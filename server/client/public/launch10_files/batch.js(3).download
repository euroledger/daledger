;try{window.performance.mark('jira.heritage_batch_file_eval:start');} catch(e){};;
/* module-key = 'jira.webresources:almond', location = '/static/lib/almond-noconflict-pre.js' */
window.__require=window.require,window.__requirejs=window.requirejs,window.__define=window.define;;
;
/* module-key = 'jira.webresources:almond', location = '/static/lib/almond/almond.js' */
var requirejs,require,define;!function(e){function n(e,n){return q.call(e,n)}function r(e,n){var r,i,t,o,u,f,c,l,s,p,a=n&&n.split("/"),d=y.map,g=d&&d["*"]||{};if(e&&"."===e.charAt(0))if(n){for(a=a.slice(0,a.length-1),e=a.concat(e.split("/")),l=0;l<e.length;l+=1)if(p=e[l],"."===p)e.splice(l,1),l-=1;else if(".."===p){if(1===l&&(".."===e[2]||".."===e[0]))break;l>0&&(e.splice(l-1,2),l-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((a||g)&&d){for(r=e.split("/"),l=r.length;l>0;l-=1){if(i=r.slice(0,l).join("/"),a)for(s=a.length;s>0;s-=1)if(t=d[a.slice(0,s).join("/")],t&&(t=t[i])){o=t,u=l;break}if(o)break;!f&&g&&g[i]&&(f=g[i],c=l)}!o&&f&&(o=f,u=c),o&&(r.splice(0,u,o),e=r.join("/"))}return e}function i(n,r){return function(){return s.apply(e,m.call(arguments,0).concat([n,r]))}}function t(e){return function(n){return r(n,e)}}function o(e){return function(n){d[e]=n}}function u(r){if(n(g,r)){var i=g[r];delete g[r],h[r]=!0,l.apply(e,i)}if(!n(d,r)&&!n(h,r))throw new Error("No "+r);return d[r]}function f(e){var n,r=e?e.indexOf("!"):-1;return r>-1&&(n=e.substring(0,r),e=e.substring(r+1,e.length)),[n,e]}function c(e){return function(){return y&&y.config&&y.config[e]||{}}}var l,s,p,a,d={},g={},y={},h={},q=Object.prototype.hasOwnProperty,m=[].slice;p=function(e,n){var i,o=f(e),c=o[0];return e=o[1],c&&(c=r(c,n),i=u(c)),c?e=i&&i.normalize?i.normalize(e,t(n)):r(e,n):(e=r(e,n),o=f(e),c=o[0],e=o[1],c&&(i=u(c))),{f:c?c+"!"+e:e,n:e,pr:c,p:i}},a={require:function(e){return i(e)},exports:function(e){var n=d[e];return"undefined"!=typeof n?n:d[e]={}},module:function(e){return{id:e,uri:"",exports:d[e],config:c(e)}}},l=function(r,t,f,c){var l,s,y,q,m,x,v=[];if(c=c||r,"function"==typeof f){for(t=!t.length&&f.length?["require","exports","module"]:t,m=0;m<t.length;m+=1)if(q=p(t[m],c),s=q.f,"require"===s)v[m]=a.require(r);else if("exports"===s)v[m]=a.exports(r),x=!0;else if("module"===s)l=v[m]=a.module(r);else if(n(d,s)||n(g,s)||n(h,s))v[m]=u(s);else{if(!q.p)throw new Error(r+" missing "+s);q.p.load(q.n,i(c,!0),o(s),{}),v[m]=d[s]}y=f.apply(d[r],v),r&&(l&&l.exports!==e&&l.exports!==d[r]?d[r]=l.exports:y===e&&x||(d[r]=y))}else r&&(d[r]=f);require.analytics("invoked",c||r,t)},requirejs=require=s=function(n,r,i,t,o){return"string"==typeof n?a[n]?a[n](r):(1===arguments.length&&require.analytics("legacyRequire",n),u(p(n,r).f)):(n.splice||(y=n,r.splice?(n=r,r=i,i=null):n=e),r=r||function(){},"function"==typeof i&&(i=t,t=o),t?l(e,n,r,i):setTimeout(function(){l(e,n,r,i)},4),s)},s.config=function(e){return y=e,y.deps&&s(y.deps,y.callback),s},require.analytics=function(e,n,r){},define=function(e,r,i){r.splice||(i=r,r=[]),n(d,e)||n(g,e)||(g[e]=[e,r,i],require.analytics("defined",e,r))},define.amd={jQuery:!0}}();;
;
/* module-key = 'jira.webresources:almond', location = '/static/lib/almond-noconflict-post.js' */
window.__require?(window.require=window.__require,window.requirejs=window.__requirejs,window.define=window.__define):delete window.define.amd,function(e){var i=e;window.require=function(e,w){var n=i.apply(window,arguments);return"string"==typeof e&&(n instanceof Array||"object"!=typeof n&&"function"!=typeof n||(n.__amdModuleName=e)),n},window.require.analytics=i.analytics}(window.require);try{delete window.__require}catch(e){window.__require=void 0}try{delete window.__requirejs}catch(e){window.__requirejs=void 0}try{delete window.__define}catch(e){window.__define=void 0};
;
/* module-key = 'com.atlassian.plugins.jquery:jquery-1.7.2', location = '/jquery.4.0.1-atlassian.js' */
/*!
 * jQuery JavaScript Library v1.7.2
 * http://jquery.com/
 *
 * Copyright 2011, John Resig
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 * Copyright 2011, The Dojo Foundation
 * Released under the MIT, BSD, and GPL Licenses.
 *
 * Date: Wed Mar 21 12:46:34 2012 -0700
 */
(function (window, undefined) {

// Use the correct document accordingly with window argument (sandbox)
	var document = window.document,
		navigator = window.navigator,
		location = window.location;
	var jQuery = (function () {

// Define a local copy of jQuery
		var jQuery = function (selector, context) {
				// The jQuery object is actually just the init constructor 'enhanced'
				return new jQuery.fn.init(selector, context, rootjQuery);
			},

			// Map over jQuery in case of overwrite
			_jQuery = window.jQuery,

			// Map over the $ in case of overwrite
			_$ = window.$,

			// A central reference to the root jQuery(document)
			rootjQuery,

			// A simple way to check for HTML strings or ID strings
			// Prioritize #id over <tag> to avoid XSS via location.hash (#9521)
			// Fix for jQuery to only deem the input to be HTML if it explicitly starts with '<'
			quickExpr = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,

			// Check if a string has a non-whitespace character in it
			rnotwhite = /\S/,

			// Used for trimming whitespace
			trimLeft = /^\s+/,
			trimRight = /\s+$/,

			// Match a standalone tag
			rsingleTag = /^<(\w+)\s*\/?>(?:<\/\1>)?$/,

			// JSON RegExp
			rvalidchars = /^[\],:{}\s]*$/,
			rvalidescape = /\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,
			rvalidtokens = /"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
			rvalidbraces = /(?:^|:|,)(?:\s*\[)+/g,

			// Useragent RegExp
			rwebkit = /(webkit)[ \/]([\w.]+)/,
			ropera = /(opera)(?:.*version)?[ \/]([\w.]+)/,
			rmsie = /(msie) ([\w.]+)/,
			rmozilla = /(mozilla)(?:.*? rv:([\w.]+))?/,

			// Matches dashed string for camelizing
			rdashAlpha = /-([a-z]|[0-9])/ig,
			rmsPrefix = /^-ms-/,

			// Used by jQuery.camelCase as callback to replace()
			fcamelCase = function (all, letter) {
				return (letter + "").toUpperCase();
			},

			// Keep a UserAgent string for use with jQuery.browser
			userAgent = navigator.userAgent,

			// For matching the engine and version of the browser
			browserMatch,

			// The deferred used on DOM ready
			readyList,

			// The ready event handler
			DOMContentLoaded,

			// Save a reference to some core methods
			toString = Object.prototype.toString,
			hasOwn = Object.prototype.hasOwnProperty,
			push = Array.prototype.push,
			slice = Array.prototype.slice,
			trim = String.prototype.trim,
			indexOf = Array.prototype.indexOf,

			// [[Class]] -> type pairs
			class2type = {};

		jQuery.fn = jQuery.prototype = {
			constructor: jQuery,
			init: function (selector, context, rootjQuery) {
				var match, elem, ret, doc;

				// Handle $(""), $(null), or $(undefined)
				if (!selector) {
					return this;
				}

				// Handle $(DOMElement)
				if (selector.nodeType) {
					this.context = this[0] = selector;
					this.length = 1;
					return this;
				}

				// The body element only exists once, optimize finding it
				if (selector === "body" && !context && document.body) {
					this.context = document;
					this[0] = document.body;
					this.selector = selector;
					this.length = 1;
					return this;
				}

				// Handle HTML strings
				if (typeof selector === "string") {
					// Are we dealing with HTML string or an ID?
					if (selector.charAt(0) === "<" && selector.charAt(selector.length - 1) === ">" && selector.length >= 3) {
						// Assume that strings that start and end with <> are HTML and skip the regex check
						match = [null, selector, null];

					} else {
						match = quickExpr.exec(selector);
					}

					// Verify a match, and that no context was specified for #id
					if (match && (match[1] || !context)) {

						// HANDLE: $(html) -> $(array)
						if (match[1]) {
							context = context instanceof jQuery ? context[0] : context;
							doc = (context ? context.ownerDocument || context : document);

							// If a single string is passed in and it's a single tag
							// just do a createElement and skip the rest
							ret = rsingleTag.exec(selector);

							if (ret) {
								if (jQuery.isPlainObject(context)) {
									selector = [document.createElement(ret[1])];
									jQuery.fn.attr.call(selector, context, true);

								} else {
									selector = [doc.createElement(ret[1])];
								}

							} else {
								ret = jQuery.buildFragment([match[1]], [doc]);
								selector = (ret.cacheable ? jQuery.clone(ret.fragment) : ret.fragment).childNodes;
							}

							return jQuery.merge(this, selector);

							// HANDLE: $("#id")
						} else {
							elem = document.getElementById(match[2]);

							// Check parentNode to catch when Blackberry 4.6 returns
							// nodes that are no longer in the document #6963
							if (elem && elem.parentNode) {
								// Handle the case where IE and Opera return items
								// by name instead of ID
								if (elem.id !== match[2]) {
									return rootjQuery.find(selector);
								}

								// Otherwise, we inject the element directly into the jQuery object
								this.length = 1;
								this[0] = elem;
							}

							this.context = document;
							this.selector = selector;
							return this;
						}

						// HANDLE: $(expr, $(...))
					} else if (!context || context.jquery) {
						return (context || rootjQuery).find(selector);

						// HANDLE: $(expr, context)
						// (which is just equivalent to: $(context).find(expr)
					} else {
						return this.constructor(context).find(selector);
					}

					// HANDLE: $(function)
					// Shortcut for document ready
				} else if (jQuery.isFunction(selector)) {
					return rootjQuery.ready(selector);
				}

				if (selector.selector !== undefined) {
					this.selector = selector.selector;
					this.context = selector.context;
				}

				return jQuery.makeArray(selector, this);
			},

			// Start with an empty selector
			selector: "",

			// The current version of jQuery being used
			jquery: "4.0.0-atlassian",

			// The default length of a jQuery object is 0
			length: 0,

			// The number of elements contained in the matched element set
			size: function () {
				return this.length;
			},

			toArray: function () {
				return slice.call(this, 0);
			},

			// Get the Nth element in the matched element set OR
			// Get the whole matched element set as a clean array
			get: function (num) {
				return num == null ?

					// Return a 'clean' array
					this.toArray() :

					// Return just the object
					(num < 0 ? this[this.length + num] : this[num]);
			},

			// Take an array of elements and push it onto the stack
			// (returning the new matched element set)
			pushStack: function (elems, name, selector) {
				// Build a new jQuery matched element set
				var ret = this.constructor();

				if (jQuery.isArray(elems)) {
					push.apply(ret, elems);

				} else {
					jQuery.merge(ret, elems);
				}

				// Add the old object onto the stack (as a reference)
				ret.prevObject = this;

				ret.context = this.context;

				if (name === "find") {
					ret.selector = this.selector + (this.selector ? " " : "") + selector;
				} else if (name) {
					ret.selector = this.selector + "." + name + "(" + selector + ")";
				}

				// Return the newly-formed element set
				return ret;
			},

			// Execute a callback for every element in the matched set.
			// (You can seed the arguments with an array of args, but this is
			// only used internally.)
			each: function (callback, args) {
				return jQuery.each(this, callback, args);
			},

			ready: function (fn) {
				// Attach the listeners
				jQuery.bindReady();

				// Add the callback
				readyList.add(fn);

				return this;
			},

			eq: function (i) {
				i = +i;
				return i === -1 ?
					this.slice(i) :
					this.slice(i, i + 1);
			},

			first: function () {
				return this.eq(0);
			},

			last: function () {
				return this.eq(-1);
			},

			slice: function () {
				return this.pushStack(slice.apply(this, arguments),
					"slice", slice.call(arguments).join(","));
			},

			map: function (callback) {
				return this.pushStack(jQuery.map(this, function (elem, i) {
					return callback.call(elem, i, elem);
				}));
			},

			end: function () {
				return this.prevObject || this.constructor(null);
			},

			// For internal use only.
			// Behaves like an Array's method, not like a jQuery method.
			push: push,
			sort: [].sort,
			splice: [].splice
		};

// Give the init function the jQuery prototype for later instantiation
		jQuery.fn.init.prototype = jQuery.fn;

		jQuery.extend = jQuery.fn.extend = function () {
			var options, name, src, copy, copyIsArray, clone,
				target = arguments[0] || {},
				i = 1,
				length = arguments.length,
				deep = false;

			// Handle a deep copy situation
			if (typeof target === "boolean") {
				deep = target;
				target = arguments[1] || {};
				// skip the boolean and the target
				i = 2;
			}

			// Handle case when target is a string or something (possible in deep copy)
			if (typeof target !== "object" && !jQuery.isFunction(target)) {
				target = {};
			}

			// extend jQuery itself if only one argument is passed
			if (length === i) {
				target = this;
				--i;
			}

			for (; i < length; i++) {
				// Only deal with non-null/undefined values
				if ((options = arguments[i]) != null) {
					// Extend the base object
					for (name in options) {
						src = target[name];
						copy = options[name];

						// Prevent Object.prototype pollution
						// Prevent never-ending loop
						if (name === "__proto__" || target === copy) {
							continue;
						}

						// Recurse if we're merging plain objects or arrays
						if (deep && copy && (jQuery.isPlainObject(copy) || (copyIsArray = jQuery.isArray(copy)))) {
							if (copyIsArray) {
								copyIsArray = false;
								clone = src && jQuery.isArray(src) ? src : [];

							} else {
								clone = src && jQuery.isPlainObject(src) ? src : {};
							}

							// Never move original objects, clone them
							target[name] = jQuery.extend(deep, clone, copy);

							// Don't bring in undefined values
						} else if (copy !== undefined) {
							target[name] = copy;
						}
					}
				}
			}

			// Return the modified object
			return target;
		};

		jQuery.extend({
			noConflict: function (deep) {
				if (window.$ === jQuery) {
					window.$ = _$;
				}

				if (deep && window.jQuery === jQuery) {
					window.jQuery = _jQuery;
				}

				return jQuery;
			},

			// Is the DOM ready to be used? Set to true once it occurs.
			isReady: false,

			// A counter to track how many items to wait for before
			// the ready event fires. See #6781
			readyWait: 1,

			// Hold (or release) the ready event
			holdReady: function (hold) {
				if (hold) {
					jQuery.readyWait++;
				} else {
					jQuery.ready(true);
				}
			},

			// Handle when the DOM is ready
			ready: function (wait) {
				// Either a released hold or an DOMready/load event and not yet ready
				if ((wait === true && !--jQuery.readyWait) || (wait !== true && !jQuery.isReady)) {
					// Make sure body exists, at least, in case IE gets a little overzealous (ticket #5443).
					if (!document.body) {
						return setTimeout(jQuery.ready, 1);
					}

					// Remember that the DOM is ready
					jQuery.isReady = true;

					// If a normal DOM Ready event fired, decrement, and wait if need be
					if (wait !== true && --jQuery.readyWait > 0) {
						return;
					}

					// If there are functions bound, to execute
					readyList.fireWith(document, [jQuery]);

					// Trigger any bound ready events
					if (jQuery.fn.trigger) {
						jQuery(document).trigger("ready").off("ready");
					}
				}
			},

			bindReady: function () {
				if (readyList) {
					return;
				}

				readyList = jQuery.Callbacks("once memory");

				// Catch cases where $(document).ready() is called after the
				// browser event has already occurred.
				if (document.readyState === "complete") {
					// Handle it asynchronously to allow scripts the opportunity to delay ready
					return setTimeout(jQuery.ready, 1);
				}

				// Mozilla, Opera and webkit nightlies currently support this event
				if (document.addEventListener) {
					// Use the handy event callback
					document.addEventListener("DOMContentLoaded", DOMContentLoaded, false);

					// A fallback to window.onload, that will always work
					window.addEventListener("load", jQuery.ready, false);

					// If IE event model is used
				} else if (document.attachEvent) {
					// ensure firing before onload,
					// maybe late but safe also for iframes
					document.attachEvent("onreadystatechange", DOMContentLoaded);

					// A fallback to window.onload, that will always work
					window.attachEvent("onload", jQuery.ready);

					// If IE and not a frame
					// continually check to see if the document is ready
					var toplevel = false;

					try {
						toplevel = window.frameElement == null;
					} catch (e) {
					}

					if (document.documentElement.doScroll && toplevel) {
						doScrollCheck();
					}
				}
			},

			// See test/unit/core.js for details concerning isFunction.
			// Since version 1.3, DOM methods and functions like alert
			// aren't supported. They return false on IE (#2968).
			isFunction: function (obj) {
				return jQuery.type(obj) === "function";
			},

			isArray: Array.isArray || function (obj) {
				return jQuery.type(obj) === "array";
			},

			isWindow: function (obj) {
				return obj != null && obj == obj.window;
			},

			isNumeric: function (obj) {
				return !isNaN(parseFloat(obj)) && isFinite(obj);
			},

			type: function (obj) {
				return obj == null ?
					String(obj) :
					class2type[toString.call(obj)] || "object";
			},

			isPlainObject: function (obj) {
				// Must be an Object.
				// Because of IE, we also have to check the presence of the constructor property.
				// Make sure that DOM nodes and window objects don't pass through, as well
				if (!obj || jQuery.type(obj) !== "object" || obj.nodeType || jQuery.isWindow(obj)) {
					return false;
				}

				try {
					// Not own constructor property must be Object
					if (obj.constructor &&
						!hasOwn.call(obj, "constructor") &&
						!hasOwn.call(obj.constructor.prototype, "isPrototypeOf")) {
						return false;
					}
				} catch (e) {
					// IE8,9 Will throw exceptions on certain host objects #9897
					return false;
				}

				// Own properties are enumerated firstly, so to speed up,
				// if last one is own, then all properties are own.

				var key;
				for (key in obj) {
				}

				return key === undefined || hasOwn.call(obj, key);
			},

			isEmptyObject: function (obj) {
				for (var name in obj) {
					return false;
				}
				return true;
			},

			error: function (msg) {
				throw new Error(msg);
			},

			parseJSON: function (data) {
				if (typeof data !== "string" || !data) {
					return null;
				}

				// Make sure leading/trailing whitespace is removed (IE can't handle it)
				data = jQuery.trim(data);

				// Attempt to parse using the native JSON parser first
				if (window.JSON && window.JSON.parse) {
					return window.JSON.parse(data);
				}

				// Make sure the incoming data is actual JSON
				// Logic borrowed from http://json.org/json2.js
				if (rvalidchars.test(data.replace(rvalidescape, "@")
					.replace(rvalidtokens, "]")
					.replace(rvalidbraces, ""))) {

					return (new Function("return " + data))();

				}
				jQuery.error("Invalid JSON: " + data);
			},

			// Cross-browser xml parsing
			parseXML: function (data) {
				if (typeof data !== "string" || !data) {
					return null;
				}
				var xml, tmp;
				try {
					if (window.DOMParser) { // Standard
						tmp = new DOMParser();
						xml = tmp.parseFromString(data, "text/xml");
					} else { // IE
						xml = new ActiveXObject("Microsoft.XMLDOM");
						xml.async = "false";
						xml.loadXML(data);
					}
				} catch (e) {
					xml = undefined;
				}
				if (!xml || !xml.documentElement || xml.getElementsByTagName("parsererror").length) {
					jQuery.error("Invalid XML: " + data);
				}
				return xml;
			},

			noop: function () {
			},

			// Evaluates a script in a global context
			// Workarounds based on findings by Jim Driscoll
			// http://weblogs.java.net/blog/driscoll/archive/2009/09/08/eval-javascript-global-context
			globalEval: function (data) {
				if (data && rnotwhite.test(data)) {
					// We use execScript on Internet Explorer
					// We use an anonymous function so that context is window
					// rather than jQuery in Firefox
					(window.execScript || function (data) {
						window["eval"].call(window, data);
					})(data);
				}
			},

			// Convert dashed to camelCase; used by the css and data modules
			// Microsoft forgot to hump their vendor prefix (#9572)
			camelCase: function (string) {
				return string.replace(rmsPrefix, "ms-").replace(rdashAlpha, fcamelCase);
			},

			nodeName: function (elem, name) {
				return elem.nodeName && elem.nodeName.toUpperCase() === name.toUpperCase();
			},

			// args is for internal usage only
			each: function (object, callback, args) {
				var name, i = 0,
					length = object.length,
					isObj = length === undefined || jQuery.isFunction(object);

				if (args) {
					if (isObj) {
						for (name in object) {
							if (callback.apply(object[name], args) === false) {
								break;
							}
						}
					} else {
						for (; i < length;) {
							if (callback.apply(object[i++], args) === false) {
								break;
							}
						}
					}

					// A special, fast, case for the most common use of each
				} else {
					if (isObj) {
						for (name in object) {
							if (callback.call(object[name], name, object[name]) === false) {
								break;
							}
						}
					} else {
						for (; i < length;) {
							if (callback.call(object[i], i, object[i++]) === false) {
								break;
							}
						}
					}
				}

				return object;
			},

			// Use native String.trim function wherever possible
			trim: trim ?
				function (text) {
					return text == null ?
						"" :
						trim.call(text);
				} :

				// Otherwise use our own trimming functionality
				function (text) {
					return text == null ?
						"" :
						text.toString().replace(trimLeft, "").replace(trimRight, "");
				},

			// results is for internal usage only
			makeArray: function (array, results) {
				var ret = results || [];

				if (array != null) {
					// The window, strings (and functions) also have 'length'
					// Tweaked logic slightly to handle Blackberry 4.7 RegExp issues #6930
					var type = jQuery.type(array);

					if (array.length == null || type === "string" || type === "function" || type === "regexp" || jQuery.isWindow(array)) {
						push.call(ret, array);
					} else {
						jQuery.merge(ret, array);
					}
				}

				return ret;
			},

			inArray: function (elem, array, i) {
				var len;

				if (array) {
					if (indexOf) {
						return indexOf.call(array, elem, i);
					}

					len = array.length;
					i = i ? i < 0 ? Math.max(0, len + i) : i : 0;

					for (; i < len; i++) {
						// Skip accessing in sparse arrays
						if (i in array && array[i] === elem) {
							return i;
						}
					}
				}

				return -1;
			},

			merge: function (first, second) {
				var i = first.length,
					j = 0;

				if (typeof second.length === "number") {
					for (var l = second.length; j < l; j++) {
						first[i++] = second[j];
					}

				} else {
					while (second[j] !== undefined) {
						first[i++] = second[j++];
					}
				}

				first.length = i;

				return first;
			},

			grep: function (elems, callback, inv) {
				var ret = [], retVal;
				inv = !!inv;

				// Go through the array, only saving the items
				// that pass the validator function
				for (var i = 0, length = elems.length; i < length; i++) {
					retVal = !!callback(elems[i], i);
					if (inv !== retVal) {
						ret.push(elems[i]);
					}
				}

				return ret;
			},

			// arg is for internal usage only
			map: function (elems, callback, arg) {
				var value, key, ret = [],
					i = 0,
					length = elems.length,
					// jquery objects are treated as arrays
					isArray = elems instanceof jQuery || length !== undefined && typeof length === "number" && ((length > 0 && elems[0] && elems[length - 1]) || length === 0 || jQuery.isArray(elems));

				// Go through the array, translating each of the items to their
				if (isArray) {
					for (; i < length; i++) {
						value = callback(elems[i], i, arg);

						if (value != null) {
							ret[ret.length] = value;
						}
					}

					// Go through every key on the object,
				} else {
					for (key in elems) {
						value = callback(elems[key], key, arg);

						if (value != null) {
							ret[ret.length] = value;
						}
					}
				}

				// Flatten any nested arrays
				return ret.concat.apply([], ret);
			},

			// A global GUID counter for objects
			guid: 1,

			// Bind a function to a context, optionally partially applying any
			// arguments.
			proxy: function (fn, context) {
				if (typeof context === "string") {
					var tmp = fn[context];
					context = fn;
					fn = tmp;
				}

				// Quick check to determine if target is callable, in the spec
				// this throws a TypeError, but we will just return undefined.
				if (!jQuery.isFunction(fn)) {
					return undefined;
				}

				// Simulated bind
				var args = slice.call(arguments, 2),
					proxy = function () {
						return fn.apply(context, args.concat(slice.call(arguments)));
					};

				// Set the guid of unique handler to the same of original handler, so it can be removed
				proxy.guid = fn.guid = fn.guid || proxy.guid || jQuery.guid++;

				return proxy;
			},

			// Mutifunctional method to get and set values to a collection
			// The value/s can optionally be executed if it's a function
			access: function (elems, fn, key, value, chainable, emptyGet, pass) {
				var exec,
					bulk = key == null,
					i = 0,
					length = elems.length;

				// Sets many values
				if (key && typeof key === "object") {
					for (i in key) {
						jQuery.access(elems, fn, i, key[i], 1, emptyGet, value);
					}
					chainable = 1;

					// Sets one value
				} else if (value !== undefined) {
					// Optionally, function values get executed if exec is true
					exec = pass === undefined && jQuery.isFunction(value);

					if (bulk) {
						// Bulk operations only iterate when executing function values
						if (exec) {
							exec = fn;
							fn = function (elem, key, value) {
								return exec.call(jQuery(elem), value);
							};

							// Otherwise they run against the entire set
						} else {
							fn.call(elems, value);
							fn = null;
						}
					}

					if (fn) {
						for (; i < length; i++) {
							fn(elems[i], key, exec ? value.call(elems[i], i, fn(elems[i], key)) : value, pass);
						}
					}

					chainable = 1;
				}

				return chainable ?
					elems :

					// Gets
					bulk ?
						fn.call(elems) :
						length ? fn(elems[0], key) : emptyGet;
			},

			now: function () {
				return (new Date()).getTime();
			},

			// Use of jQuery.browser is frowned upon.
			// More details: http://docs.jquery.com/Utilities/jQuery.browser
			uaMatch: function (ua) {
				ua = ua.toLowerCase();

				var match = rwebkit.exec(ua) ||
					ropera.exec(ua) ||
					rmsie.exec(ua) ||
					ua.indexOf("compatible") < 0 && rmozilla.exec(ua) ||
					[];

				return {browser: match[1] || "", version: match[2] || "0"};
			},

			sub: function () {
				function jQuerySub(selector, context) {
					return new jQuerySub.fn.init(selector, context);
				}

				jQuery.extend(true, jQuerySub, this);
				jQuerySub.superclass = this;
				jQuerySub.fn = jQuerySub.prototype = this();
				jQuerySub.fn.constructor = jQuerySub;
				jQuerySub.sub = this.sub;
				jQuerySub.fn.init = function init(selector, context) {
					if (context && context instanceof jQuery && !(context instanceof jQuerySub)) {
						context = jQuerySub(context);
					}

					return jQuery.fn.init.call(this, selector, context, rootjQuerySub);
				};
				jQuerySub.fn.init.prototype = jQuerySub.fn;
				var rootjQuerySub = jQuerySub(document);
				return jQuerySub;
			},

			browser: {}
		});

// Populate the class2type map
		jQuery.each("Boolean Number String Function Array Date RegExp Object".split(" "), function (i, name) {
			class2type["[object " + name + "]"] = name.toLowerCase();
		});

		browserMatch = jQuery.uaMatch(userAgent);
		if (browserMatch.browser) {
			jQuery.browser[browserMatch.browser] = true;
			jQuery.browser.version = browserMatch.version;
		}

// Deprecated, use jQuery.browser.webkit instead
		if (jQuery.browser.webkit) {
			jQuery.browser.safari = true;
		}

// IE doesn't match non-breaking spaces with \s
		if (rnotwhite.test("\xA0")) {
			trimLeft = /^[\s\xA0]+/;
			trimRight = /[\s\xA0]+$/;
		}

// All jQuery objects should point back to these
		rootjQuery = jQuery(document);

// Cleanup functions for the document ready method
		if (document.addEventListener) {
			DOMContentLoaded = function () {
				document.removeEventListener("DOMContentLoaded", DOMContentLoaded, false);
				jQuery.ready();
			};

		} else if (document.attachEvent) {
			DOMContentLoaded = function () {
				// Make sure body exists, at least, in case IE gets a little overzealous (ticket #5443).
				if (document.readyState === "complete") {
					document.detachEvent("onreadystatechange", DOMContentLoaded);
					jQuery.ready();
				}
			};
		}

// The DOM ready check for Internet Explorer
		function doScrollCheck() {
			if (jQuery.isReady) {
				return;
			}

			try {
				// If IE is used, use the trick by Diego Perini
				// http://javascript.nwbox.com/IEContentLoaded/
				document.documentElement.doScroll("left");
			} catch (e) {
				setTimeout(doScrollCheck, 1);
				return;
			}

			// and execute any waiting functions
			jQuery.ready();
		}

		return jQuery;

	})();


// String to Object flags format cache
	var flagsCache = {};

// Convert String-formatted flags into Object-formatted ones and store in cache
	function createFlags(flags) {
		var object = flagsCache[flags] = {},
			i, length;
		flags = flags.split(/\s+/);
		for (i = 0, length = flags.length; i < length; i++) {
			object[flags[i]] = true;
		}
		return object;
	}

	/*
 * Create a callback list using the following parameters:
 *
 *	flags:	an optional list of space-separated flags that will change how
 *			the callback list behaves
 *
 * By default a callback list will act like an event callback list and can be
 * "fired" multiple times.
 *
 * Possible flags:
 *
 *	once:			will ensure the callback list can only be fired once (like a Deferred)
 *
 *	memory:			will keep track of previous values and will call any callback added
 *					after the list has been fired right away with the latest "memorized"
 *					values (like a Deferred)
 *
 *	unique:			will ensure a callback can only be added once (no duplicate in the list)
 *
 *	stopOnFalse:	interrupt callings when a callback returns false
 *
 */
	jQuery.Callbacks = function (flags) {

		// Convert flags from String-formatted to Object-formatted
		// (we check in cache first)
		flags = flags ? (flagsCache[flags] || createFlags(flags)) : {};

		var // Actual callback list
			list = [],
			// Stack of fire calls for repeatable lists
			stack = [],
			// Last fire value (for non-forgettable lists)
			memory,
			// Flag to know if list was already fired
			fired,
			// Flag to know if list is currently firing
			firing,
			// First callback to fire (used internally by add and fireWith)
			firingStart,
			// End of the loop when firing
			firingLength,
			// Index of currently firing callback (modified by remove if needed)
			firingIndex,
			// Add one or several callbacks to the list
			add = function (args) {
				var i,
					length,
					elem,
					type,
					actual;
				for (i = 0, length = args.length; i < length; i++) {
					elem = args[i];
					type = jQuery.type(elem);
					if (type === "array") {
						// Inspect recursively
						add(elem);
					} else if (type === "function") {
						// Add if not in unique mode and callback is not in
						if (!flags.unique || !self.has(elem)) {
							list.push(elem);
						}
					}
				}
			},
			// Fire callbacks
			fire = function (context, args) {
				args = args || [];
				memory = !flags.memory || [context, args];
				fired = true;
				firing = true;
				firingIndex = firingStart || 0;
				firingStart = 0;
				firingLength = list.length;
				for (; list && firingIndex < firingLength; firingIndex++) {
					if (list[firingIndex].apply(context, args) === false && flags.stopOnFalse) {
						memory = true; // Mark as halted
						break;
					}
				}
				firing = false;
				if (list) {
					if (!flags.once) {
						if (stack && stack.length) {
							memory = stack.shift();
							self.fireWith(memory[0], memory[1]);
						}
					} else if (memory === true) {
						self.disable();
					} else {
						list = [];
					}
				}
			},
			// Actual Callbacks object
			self = {
				// Add a callback or a collection of callbacks to the list
				add: function () {
					if (list) {
						var length = list.length;
						add(arguments);
						// Do we need to add the callbacks to the
						// current firing batch?
						if (firing) {
							firingLength = list.length;
							// With memory, if we're not firing then
							// we should call right away, unless previous
							// firing was halted (stopOnFalse)
						} else if (memory && memory !== true) {
							firingStart = length;
							fire(memory[0], memory[1]);
						}
					}
					return this;
				},
				// Remove a callback from the list
				remove: function () {
					if (list) {
						var args = arguments,
							argIndex = 0,
							argLength = args.length;
						for (; argIndex < argLength; argIndex++) {
							for (var i = 0; i < list.length; i++) {
								if (args[argIndex] === list[i]) {
									// Handle firingIndex and firingLength
									if (firing) {
										if (i <= firingLength) {
											firingLength--;
											if (i <= firingIndex) {
												firingIndex--;
											}
										}
									}
									// Remove the element
									list.splice(i--, 1);
									// If we have some unicity property then
									// we only need to do this once
									if (flags.unique) {
										break;
									}
								}
							}
						}
					}
					return this;
				},
				// Control if a given callback is in the list
				has: function (fn) {
					if (list) {
						var i = 0,
							length = list.length;
						for (; i < length; i++) {
							if (fn === list[i]) {
								return true;
							}
						}
					}
					return false;
				},
				// Remove all callbacks from the list
				empty: function () {
					list = [];
					return this;
				},
				// Have the list do nothing anymore
				disable: function () {
					list = stack = memory = undefined;
					return this;
				},
				// Is it disabled?
				disabled: function () {
					return !list;
				},
				// Lock the list in its current state
				lock: function () {
					stack = undefined;
					if (!memory || memory === true) {
						self.disable();
					}
					return this;
				},
				// Is it locked?
				locked: function () {
					return !stack;
				},
				// Call all callbacks with the given context and arguments
				fireWith: function (context, args) {
					if (stack) {
						if (firing) {
							if (!flags.once) {
								stack.push([context, args]);
							}
						} else if (!(flags.once && memory)) {
							fire(context, args);
						}
					}
					return this;
				},
				// Call all the callbacks with the given arguments
				fire: function () {
					self.fireWith(this, arguments);
					return this;
				},
				// To know if the callbacks have already been called at least once
				fired: function () {
					return !!fired;
				}
			};

		return self;
	};


	var // Static reference to slice
		sliceDeferred = [].slice;

	jQuery.extend({

		Deferred: function (func) {
			var doneList = jQuery.Callbacks("once memory"),
				failList = jQuery.Callbacks("once memory"),
				progressList = jQuery.Callbacks("memory"),
				state = "pending",
				lists = {
					resolve: doneList,
					reject: failList,
					notify: progressList
				},
				promise = {
					done: doneList.add,
					fail: failList.add,
					progress: progressList.add,

					state: function () {
						return state;
					},

					// Deprecated
					isResolved: doneList.fired,
					isRejected: failList.fired,

					then: function (doneCallbacks, failCallbacks, progressCallbacks) {
						deferred.done(doneCallbacks).fail(failCallbacks).progress(progressCallbacks);
						return this;
					},
					always: function () {
						deferred.done.apply(deferred, arguments).fail.apply(deferred, arguments);
						return this;
					},
					pipe: function (fnDone, fnFail, fnProgress) {
						return jQuery.Deferred(function (newDefer) {
							jQuery.each({
								done: [fnDone, "resolve"],
								fail: [fnFail, "reject"],
								progress: [fnProgress, "notify"]
							}, function (handler, data) {
								var fn = data[0],
									action = data[1],
									returned;
								if (jQuery.isFunction(fn)) {
									deferred[handler](function () {
										returned = fn.apply(this, arguments);
										if (returned && jQuery.isFunction(returned.promise)) {
											returned.promise().then(newDefer.resolve, newDefer.reject, newDefer.notify);
										} else {
											newDefer[action + "With"](this === deferred ? newDefer : this, [returned]);
										}
									});
								} else {
									deferred[handler](newDefer[action]);
								}
							});
						}).promise();
					},
					// Get a promise for this deferred
					// If obj is provided, the promise aspect is added to the object
					promise: function (obj) {
						if (obj == null) {
							obj = promise;
						} else {
							for (var key in promise) {
								obj[key] = promise[key];
							}
						}
						return obj;
					}
				},
				deferred = promise.promise({}),
				key;

			for (key in lists) {
				deferred[key] = lists[key].fire;
				deferred[key + "With"] = lists[key].fireWith;
			}

			// Handle state
			deferred.done(function () {
				state = "resolved";
			}, failList.disable, progressList.lock).fail(function () {
				state = "rejected";
			}, doneList.disable, progressList.lock);

			// Call given func if any
			if (func) {
				func.call(deferred, deferred);
			}

			// All done!
			return deferred;
		},

		// Deferred helper
		when: function (firstParam) {
			var args = sliceDeferred.call(arguments, 0),
				i = 0,
				length = args.length,
				pValues = new Array(length),
				count = length,
				pCount = length,
				deferred = length <= 1 && firstParam && jQuery.isFunction(firstParam.promise) ?
					firstParam :
					jQuery.Deferred(),
				promise = deferred.promise();

			function resolveFunc(i) {
				return function (value) {
					args[i] = arguments.length > 1 ? sliceDeferred.call(arguments, 0) : value;
					if (!(--count)) {
						deferred.resolveWith(deferred, args);
					}
				};
			}

			function progressFunc(i) {
				return function (value) {
					pValues[i] = arguments.length > 1 ? sliceDeferred.call(arguments, 0) : value;
					deferred.notifyWith(promise, pValues);
				};
			}

			if (length > 1) {
				for (; i < length; i++) {
					if (args[i] && args[i].promise && jQuery.isFunction(args[i].promise)) {
						args[i].promise().then(resolveFunc(i), deferred.reject, progressFunc(i));
					} else {
						--count;
					}
				}
				if (!count) {
					deferred.resolveWith(deferred, args);
				}
			} else if (deferred !== firstParam) {
				deferred.resolveWith(deferred, length ? [firstParam] : []);
			}
			return promise;
		}
	});


	jQuery.support = (function () {

		var support,
			all,
			a,
			select,
			opt,
			input,
			fragment,
			tds,
			events,
			eventName,
			i,
			isSupported,
			div = document.createElement("div"),
			documentElement = document.documentElement;

		// Preliminary tests
		div.setAttribute("className", "t");
		div.innerHTML = "   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>";

		all = div.getElementsByTagName("*");
		a = div.getElementsByTagName("a")[0];

		// Can't get basic test support
		if (!all || !all.length || !a) {
			return {};
		}

		// First batch of supports tests
		select = document.createElement("select");
		opt = select.appendChild(document.createElement("option"));
		input = div.getElementsByTagName("input")[0];

		support = {
			// IE strips leading whitespace when .innerHTML is used
			leadingWhitespace: (div.firstChild.nodeType === 3),

			// Make sure that tbody elements aren't automatically inserted
			// IE will insert them into empty tables
			tbody: !div.getElementsByTagName("tbody").length,

			// Make sure that link elements get serialized correctly by innerHTML
			// This requires a wrapper element in IE
			htmlSerialize: !!div.getElementsByTagName("link").length,

			// Get the style information from getAttribute
			// (IE uses .cssText instead)
			style: /top/.test(a.getAttribute("style")),

			// Make sure that URLs aren't manipulated
			// (IE normalizes it by default)
			hrefNormalized: (a.getAttribute("href") === "/a"),

			// Make sure that element opacity exists
			// (IE uses filter instead)
			// Use a regex to work around a WebKit issue. See #5145
			opacity: /^0.55/.test(a.style.opacity),

			// Verify style float existence
			// (IE uses styleFloat instead of cssFloat)
			cssFloat: !!a.style.cssFloat,

			// Make sure that if no value is specified for a checkbox
			// that it defaults to "on".
			// (WebKit defaults to "" instead)
			checkOn: (input.value === "on"),

			// Make sure that a selected-by-default option has a working selected property.
			// (WebKit defaults to false instead of true, IE too, if it's in an optgroup)
			optSelected: opt.selected,

			// Test setAttribute on camelCase class. If it works, we need attrFixes when doing get/setAttribute (ie6/7)
			getSetAttribute: div.className !== "t",

			// Tests for enctype support on a form(#6743)
			enctype: !!document.createElement("form").enctype,

			// Makes sure cloning an html5 element does not cause problems
			// Where outerHTML is undefined, this still works
			html5Clone: document.createElement("nav").cloneNode(true).outerHTML !== "<:nav></:nav>",

			// Will be defined later
			submitBubbles: true,
			changeBubbles: true,
			focusinBubbles: false,
			deleteExpando: true,
			noCloneEvent: true,
			inlineBlockNeedsLayout: false,
			shrinkWrapBlocks: false,
			reliableMarginRight: true,
			pixelMargin: true,

		};

		// jQuery.boxModel DEPRECATED in 1.3, use jQuery.support.boxModel instead
		jQuery.boxModel = support.boxModel = (document.compatMode === "CSS1Compat");

		// Make sure checked status is properly cloned
		input.checked = true;
		support.noCloneChecked = input.cloneNode(true).checked;

		// Make sure that the options inside disabled selects aren't marked as disabled
		// (WebKit marks them as disabled)
		select.disabled = true;
		support.optDisabled = !opt.disabled;

		// Test to see if it's possible to delete an expando from an element
		// Fails in Internet Explorer
		try {
			delete div.test;
		} catch (e) {
			support.deleteExpando = false;
		}

		if (!div.addEventListener && div.attachEvent && div.fireEvent) {
			div.attachEvent("onclick", function () {
				// Cloning a node shouldn't copy over any
				// bound event handlers (IE does this)
				support.noCloneEvent = false;
			});
			div.cloneNode(true).fireEvent("onclick");
		}

		// Check if a radio maintains its value
		// after being appended to the DOM
		input = document.createElement("input");
		input.value = "t";
		input.setAttribute("type", "radio");
		support.radioValue = input.value === "t";

		input.setAttribute("checked", "checked");

		// #11217 - WebKit loses check when the name is after the checked attribute
		input.setAttribute("name", "t");

		div.appendChild(input);
		fragment = document.createDocumentFragment();
		fragment.appendChild(div.lastChild);

		// WebKit doesn't clone checked state correctly in fragments
		support.checkClone = fragment.cloneNode(true).cloneNode(true).lastChild.checked;

		// Check if a disconnected checkbox will retain its checked
		// value of true after appended to the DOM (IE6/7)
		support.appendChecked = input.checked;

		fragment.removeChild(input);
		fragment.appendChild(div);

		// Technique from Juriy Zaytsev
		// http://perfectionkills.com/detecting-event-support-without-browser-sniffing/
		// We only care about the case where non-standard event systems
		// are used, namely in IE. Short-circuiting here helps us to
		// avoid an eval call (in setAttribute) which can cause CSP
		// to go haywire. See: https://developer.mozilla.org/en/Security/CSP
		if (div.attachEvent) {
			for (i in {
				submit: 1,
				change: 1,
				focusin: 1
			}) {
				eventName = "on" + i;
				isSupported = (eventName in div);
				if (!isSupported) {
					div.setAttribute(eventName, "return;");
					isSupported = (typeof div[eventName] === "function");
				}
				support[i + "Bubbles"] = isSupported;
			}
		}

		fragment.removeChild(div);

		// Null elements to avoid leaks in IE
		fragment = select = opt = div = input = null;

		// Run tests that need a body at doc ready
		jQuery(function () {
			var container, outer, inner, table, td, offsetSupport,
				marginDiv, conMarginTop, style, html, positionTopLeftWidthHeight,
				paddingMarginBorderVisibility, paddingMarginBorder,
				body = document.getElementsByTagName("body")[0];

			if (!body) {
				// Return for frameset docs that don't have a body
				return;
			}

			conMarginTop = 1;
			paddingMarginBorder = "padding:0;margin:0;border:";
			positionTopLeftWidthHeight = "position:absolute;top:0;left:0;width:1px;height:1px;";
			paddingMarginBorderVisibility = paddingMarginBorder + "0;visibility:hidden;";
			style = "style='" + positionTopLeftWidthHeight + paddingMarginBorder + "5px solid #000;";
			html = "<div " + style + "display:block;'><div style='" + paddingMarginBorder + "0;display:block;overflow:hidden;'></div></div>" +
				"<table " + style + "' cellpadding='0' cellspacing='0'>" +
				"<tr><td></td></tr></table>";

			container = document.createElement("div");
			container.style.cssText = paddingMarginBorderVisibility + "width:0;height:0;position:static;top:0;margin-top:" + conMarginTop + "px";
			body.insertBefore(container, body.firstChild);

			// Construct the test element
			div = document.createElement("div");
			container.appendChild(div);

			// Check if table cells still have offsetWidth/Height when they are set
			// to display:none and there are still other visible table cells in a
			// table row; if so, offsetWidth/Height are not reliable for use when
			// determining if an element has been hidden directly using
			// display:none (it is still safe to use offsets if a parent element is
			// hidden; don safety goggles and see bug #4512 for more information).
			// (only IE 8 fails this test)
			div.innerHTML = "<table><tr><td style='" + paddingMarginBorder + "0;display:none'></td><td>t</td></tr></table>";
			tds = div.getElementsByTagName("td");
			isSupported = (tds[0].offsetHeight === 0);

			tds[0].style.display = "";
			tds[1].style.display = "none";

			// Check if empty table cells still have offsetWidth/Height
			// (IE <= 8 fail this test)
			support.reliableHiddenOffsets = isSupported && (tds[0].offsetHeight === 0);

			// Check if div with explicit width and no margin-right incorrectly
			// gets computed margin-right based on width of container. For more
			// info see bug #3333
			// Fails in WebKit before Feb 2011 nightlies
			// WebKit Bug 13343 - getComputedStyle returns wrong value for margin-right
			if (window.getComputedStyle) {
				div.innerHTML = "";
				marginDiv = document.createElement("div");
				marginDiv.style.width = "0";
				marginDiv.style.marginRight = "0";
				div.style.width = "2px";
				div.appendChild(marginDiv);
				support.reliableMarginRight =
					(parseInt((window.getComputedStyle(marginDiv, null) || {marginRight: 0}).marginRight, 10) || 0) === 0;
			}

			if (typeof div.style.zoom !== "undefined") {
				// Check if natively block-level elements act like inline-block
				// elements when setting their display to 'inline' and giving
				// them layout
				// (IE < 8 does this)
				div.innerHTML = "";
				div.style.width = div.style.padding = "1px";
				div.style.border = 0;
				div.style.overflow = "hidden";
				div.style.display = "inline";
				div.style.zoom = 1;
				support.inlineBlockNeedsLayout = (div.offsetWidth === 3);

				// Check if elements with layout shrink-wrap their children
				// (IE 6 does this)
				div.style.display = "block";
				div.style.overflow = "visible";
				div.innerHTML = "<div style='width:5px;'></div>";
				support.shrinkWrapBlocks = (div.offsetWidth !== 3);
			}

			div.style.cssText = positionTopLeftWidthHeight + paddingMarginBorderVisibility;
			div.innerHTML = html;

			outer = div.firstChild;
			inner = outer.firstChild;
			td = outer.nextSibling.firstChild.firstChild;

			offsetSupport = {
				doesNotAddBorder: (inner.offsetTop !== 5),
				doesAddBorderForTableAndCells: (td.offsetTop === 5)
			};

			inner.style.position = "fixed";
			inner.style.top = "20px";

			// safari subtracts parent border width here which is 5px
			offsetSupport.fixedPosition = (inner.offsetTop === 20 || inner.offsetTop === 15);
			inner.style.position = inner.style.top = "";

			outer.style.overflow = "hidden";
			outer.style.position = "relative";

			offsetSupport.subtractsBorderForOverflowNotVisible = (inner.offsetTop === -5);
			offsetSupport.doesNotIncludeMarginInBodyOffset = (body.offsetTop !== conMarginTop);

			if (window.getComputedStyle) {
				div.style.marginTop = "1%";
				support.pixelMargin = (window.getComputedStyle(div, null) || {marginTop: 0}).marginTop !== "1%";
			}

			if (typeof container.style.zoom !== "undefined") {
				container.style.zoom = 1;
			}

			body.removeChild(container);
			marginDiv = div = container = null;

			jQuery.extend(support, offsetSupport);
		});

		return support;
	})();


	var rbrace = /^(?:\{.*\}|\[.*\])$/,
		rmultiDash = /([A-Z])/g;

	jQuery.extend({
		cache: {},

		// Please use with caution
		uuid: 0,

		// Unique for each copy of jQuery on the page
		// Non-digits removed to match rinlinejQuery
		expando: "jQuery" + (jQuery.fn.jquery + Math.random()).replace(/\D/g, ""),

		// The following elements throw uncatchable exceptions if you
		// attempt to add expando properties to them.
		noData: {
			"embed": true,
			// Ban all objects except for Flash (which handle expandos)
			"object": "clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",
			"applet": true
		},

		hasData: function (elem) {
			elem = elem.nodeType ? jQuery.cache[elem[jQuery.expando]] : elem[jQuery.expando];
			return !!elem && !isEmptyDataObject(elem);
		},

		data: function (elem, name, data, pvt /* Internal Use Only */) {
			if (!jQuery.acceptData(elem)) {
				return;
			}

			var privateCache, thisCache, ret,
				internalKey = jQuery.expando,
				getByName = typeof name === "string",

				// We have to handle DOM nodes and JS objects differently because IE6-7
				// can't GC object references properly across the DOM-JS boundary
				isNode = elem.nodeType,

				// Only DOM nodes need the global jQuery cache; JS object data is
				// attached directly to the object so GC can occur automatically
				cache = isNode ? jQuery.cache : elem,

				// Only defining an ID for JS objects if its cache already exists allows
				// the code to shortcut on the same path as a DOM node with no cache
				id = isNode ? elem[internalKey] : elem[internalKey] && internalKey,
				isEvents = name === "events";

			// Avoid doing any more work than we need to when trying to get data on an
			// object that has no data at all
			if ((!id || !cache[id] || (!isEvents && !pvt && !cache[id].data)) && getByName && data === undefined) {
				return;
			}

			if (!id) {
				// Only DOM nodes need a new unique ID for each element since their data
				// ends up in the global cache
				if (isNode) {
					elem[internalKey] = id = ++jQuery.uuid;
				} else {
					id = internalKey;
				}
			}

			if (!cache[id]) {
				cache[id] = {};

				// Avoids exposing jQuery metadata on plain JS objects when the object
				// is serialized using JSON.stringify
				if (!isNode) {
					cache[id].toJSON = jQuery.noop;
				}
			}

			// An object can be passed to jQuery.data instead of a key/value pair; this gets
			// shallow copied over onto the existing cache
			if (typeof name === "object" || typeof name === "function") {
				if (pvt) {
					cache[id] = jQuery.extend(cache[id], name);
				} else {
					cache[id].data = jQuery.extend(cache[id].data, name);
				}
			}

			privateCache = thisCache = cache[id];

			// jQuery data() is stored in a separate object inside the object's internal data
			// cache in order to avoid key collisions between internal data and user-defined
			// data.
			if (!pvt) {
				if (!thisCache.data) {
					thisCache.data = {};
				}

				thisCache = thisCache.data;
			}

			if (data !== undefined) {
				thisCache[jQuery.camelCase(name)] = data;
			}

			// Users should not attempt to inspect the internal events object using jQuery.data,
			// it is undocumented and subject to change. But does anyone listen? No.
			if (isEvents && !thisCache[name]) {
				return privateCache.events;
			}

			// Check for both converted-to-camel and non-converted data property names
			// If a data property was specified
			if (getByName) {

				// First Try to find as-is property data
				ret = thisCache[name];

				// Test for null|undefined property data
				if (ret == null) {

					// Try to find the camelCased property
					ret = thisCache[jQuery.camelCase(name)];
				}
			} else {
				ret = thisCache;
			}

			return ret;
		},

		removeData: function (elem, name, pvt /* Internal Use Only */) {
			if (!jQuery.acceptData(elem)) {
				return;
			}

			var thisCache, i, l,

				// Reference to internal data cache key
				internalKey = jQuery.expando,

				isNode = elem.nodeType,

				// See jQuery.data for more information
				cache = isNode ? jQuery.cache : elem,

				// See jQuery.data for more information
				id = isNode ? elem[internalKey] : internalKey;

			// If there is already no cache entry for this object, there is no
			// purpose in continuing
			if (!cache[id]) {
				return;
			}

			if (name) {

				thisCache = pvt ? cache[id] : cache[id].data;

				if (thisCache) {

					// Support array or space separated string names for data keys
					if (!jQuery.isArray(name)) {

						// try the string as a key before any manipulation
						if (name in thisCache) {
							name = [name];
						} else {

							// split the camel cased version by spaces unless a key with the spaces exists
							name = jQuery.camelCase(name);
							if (name in thisCache) {
								name = [name];
							} else {
								name = name.split(" ");
							}
						}
					}

					for (i = 0, l = name.length; i < l; i++) {
						delete thisCache[name[i]];
					}

					// If there is no data left in the cache, we want to continue
					// and let the cache object itself get destroyed
					if (!(pvt ? isEmptyDataObject : jQuery.isEmptyObject)(thisCache)) {
						return;
					}
				}
			}

			// See jQuery.data for more information
			if (!pvt) {
				delete cache[id].data;

				// Don't destroy the parent cache unless the internal data object
				// had been the only thing left in it
				if (!isEmptyDataObject(cache[id])) {
					return;
				}
			}

			// Browsers that fail expando deletion also refuse to delete expandos on
			// the window, but it will allow it on all other JS objects; other browsers
			// don't care
			// Ensure that `cache` is not a window object #10080
			if (jQuery.support.deleteExpando || !cache.setInterval) {
				delete cache[id];
			} else {
				cache[id] = null;
			}

			// We destroyed the cache and need to eliminate the expando on the node to avoid
			// false lookups in the cache for entries that no longer exist
			if (isNode) {
				// IE does not allow us to delete expando properties from nodes,
				// nor does it have a removeAttribute function on Document nodes;
				// we must handle all of these cases
				if (jQuery.support.deleteExpando) {
					delete elem[internalKey];
				} else if (elem.removeAttribute) {
					elem.removeAttribute(internalKey);
				} else {
					elem[internalKey] = null;
				}
			}
		},

		// For internal use only.
		_data: function (elem, name, data) {
			return jQuery.data(elem, name, data, true);
		},

		// A method for determining if a DOM node can handle the data expando
		acceptData: function (elem) {
			if (elem.nodeName) {
				var match = jQuery.noData[elem.nodeName.toLowerCase()];

				if (match) {
					return !(match === true || elem.getAttribute("classid") !== match);
				}
			}

			return true;
		}
	});

	jQuery.fn.extend({
		data: function (key, value) {
			var parts, part, attr, name, l,
				elem = this[0],
				i = 0,
				data = null;

			// Gets all values
			if (key === undefined) {
				if (this.length) {
					data = jQuery.data(elem);

					if (elem.nodeType === 1 && !jQuery._data(elem, "parsedAttrs")) {
						attr = elem.attributes;
						for (l = attr.length; i < l; i++) {
							name = attr[i].name;

							if (name.indexOf("data-") === 0) {
								name = jQuery.camelCase(name.substring(5));

								dataAttr(elem, name, data[name]);
							}
						}
						jQuery._data(elem, "parsedAttrs", true);
					}
				}

				return data;
			}

			// Sets multiple values
			if (typeof key === "object") {
				return this.each(function () {
					jQuery.data(this, key);
				});
			}

			parts = key.split(".", 2);
			parts[1] = parts[1] ? "." + parts[1] : "";
			part = parts[1] + "!";

			return jQuery.access(this, function (value) {

				if (value === undefined) {
					data = this.triggerHandler("getData" + part, [parts[0]]);

					// Try to fetch any internally stored data first
					if (data === undefined && elem) {
						data = jQuery.data(elem, key);
						data = dataAttr(elem, key, data);
					}

					return data === undefined && parts[1] ?
						this.data(parts[0]) :
						data;
				}

				parts[1] = value;
				this.each(function () {
					var self = jQuery(this);

					self.triggerHandler("setData" + part, parts);
					jQuery.data(this, key, value);
					self.triggerHandler("changeData" + part, parts);
				});
			}, null, value, arguments.length > 1, null, false);
		},

		removeData: function (key) {
			return this.each(function () {
				jQuery.removeData(this, key);
			});
		}
	});

	function dataAttr(elem, key, data) {
		// If nothing was found internally, try to fetch any
		// data from the HTML5 data-* attribute
		if (data === undefined && elem.nodeType === 1) {

			var name = "data-" + key.replace(rmultiDash, "-$1").toLowerCase();

			data = elem.getAttribute(name);

			if (typeof data === "string") {
				try {
					data = data === "true" ? true :
						data === "false" ? false :
							data === "null" ? null :
								jQuery.isNumeric(data) ? +data :
									rbrace.test(data) ? jQuery.parseJSON(data) :
										data;
				} catch (e) {
				}

				// Make sure we set the data so it isn't changed later
				jQuery.data(elem, key, data);

			} else {
				data = undefined;
			}
		}

		return data;
	}

// checks a cache object for emptiness
	function isEmptyDataObject(obj) {
		for (var name in obj) {

			// if the public data object is empty, the private is still empty
			if (name === "data" && jQuery.isEmptyObject(obj[name])) {
				continue;
			}
			if (name !== "toJSON") {
				return false;
			}
		}

		return true;
	}


	function handleQueueMarkDefer(elem, type, src) {
		var deferDataKey = type + "defer",
			queueDataKey = type + "queue",
			markDataKey = type + "mark",
			defer = jQuery._data(elem, deferDataKey);
		if (defer &&
			(src === "queue" || !jQuery._data(elem, queueDataKey)) &&
			(src === "mark" || !jQuery._data(elem, markDataKey))) {
			// Give room for hard-coded callbacks to fire first
			// and eventually mark/queue something else on the element
			setTimeout(function () {
				if (!jQuery._data(elem, queueDataKey) &&
					!jQuery._data(elem, markDataKey)) {
					jQuery.removeData(elem, deferDataKey, true);
					defer.fire();
				}
			}, 0);
		}
	}

	jQuery.extend({

		_mark: function (elem, type) {
			if (elem) {
				type = (type || "fx") + "mark";
				jQuery._data(elem, type, (jQuery._data(elem, type) || 0) + 1);
			}
		},

		_unmark: function (force, elem, type) {
			if (force !== true) {
				type = elem;
				elem = force;
				force = false;
			}
			if (elem) {
				type = type || "fx";
				var key = type + "mark",
					count = force ? 0 : ((jQuery._data(elem, key) || 1) - 1);
				if (count) {
					jQuery._data(elem, key, count);
				} else {
					jQuery.removeData(elem, key, true);
					handleQueueMarkDefer(elem, type, "mark");
				}
			}
		},

		queue: function (elem, type, data) {
			var q;
			if (elem) {
				type = (type || "fx") + "queue";
				q = jQuery._data(elem, type);

				// Speed up dequeue by getting out quickly if this is just a lookup
				if (data) {
					if (!q || jQuery.isArray(data)) {
						q = jQuery._data(elem, type, jQuery.makeArray(data));
					} else {
						q.push(data);
					}
				}
				return q || [];
			}
		},

		dequeue: function (elem, type) {
			type = type || "fx";

			var queue = jQuery.queue(elem, type),
				fn = queue.shift(),
				hooks = {};

			// If the fx queue is dequeued, always remove the progress sentinel
			if (fn === "inprogress") {
				fn = queue.shift();
			}

			if (fn) {
				// Add a progress sentinel to prevent the fx queue from being
				// automatically dequeued
				if (type === "fx") {
					queue.unshift("inprogress");
				}

				jQuery._data(elem, type + ".run", hooks);
				fn.call(elem, function () {
					jQuery.dequeue(elem, type);
				}, hooks);
			}

			if (!queue.length) {
				jQuery.removeData(elem, type + "queue " + type + ".run", true);
				handleQueueMarkDefer(elem, type, "queue");
			}
		}
	});

	jQuery.fn.extend({
		queue: function (type, data) {
			var setter = 2;

			if (typeof type !== "string") {
				data = type;
				type = "fx";
				setter--;
			}

			if (arguments.length < setter) {
				return jQuery.queue(this[0], type);
			}

			return data === undefined ?
				this :
				this.each(function () {
					var queue = jQuery.queue(this, type, data);

					if (type === "fx" && queue[0] !== "inprogress") {
						jQuery.dequeue(this, type);
					}
				});
		},
		dequeue: function (type) {
			return this.each(function () {
				jQuery.dequeue(this, type);
			});
		},
		// Based off of the plugin by Clint Helfers, with permission.
		// http://blindsignals.com/index.php/2009/07/jquery-delay/
		delay: function (time, type) {
			time = jQuery.fx ? jQuery.fx.speeds[time] || time : time;
			type = type || "fx";

			return this.queue(type, function (next, hooks) {
				var timeout = setTimeout(next, time);
				hooks.stop = function () {
					clearTimeout(timeout);
				};
			});
		},
		clearQueue: function (type) {
			return this.queue(type || "fx", []);
		},
		// Get a promise resolved when queues of a certain type
		// are emptied (fx is the type by default)
		promise: function (type, object) {
			if (typeof type !== "string") {
				object = type;
				type = undefined;
			}
			type = type || "fx";
			var defer = jQuery.Deferred(),
				elements = this,
				i = elements.length,
				count = 1,
				deferDataKey = type + "defer",
				queueDataKey = type + "queue",
				markDataKey = type + "mark",
				tmp;

			function resolve() {
				if (!(--count)) {
					defer.resolveWith(elements, [elements]);
				}
			}

			while (i--) {
				if ((tmp = jQuery.data(elements[i], deferDataKey, undefined, true) ||
					(jQuery.data(elements[i], queueDataKey, undefined, true) ||
						jQuery.data(elements[i], markDataKey, undefined, true)) &&
					jQuery.data(elements[i], deferDataKey, jQuery.Callbacks("once memory"), true))) {
					count++;
					tmp.add(resolve);
				}
			}
			resolve();
			return defer.promise(object);
		}
	});


	var rclass = /[\n\t\r]/g,
		rspace = /\s+/,
		rreturn = /\r/g,
		rtype = /^(?:button|input)$/i,
		rfocusable = /^(?:button|input|object|select|textarea)$/i,
		rclickable = /^a(?:rea)?$/i,
		rboolean = /^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,
		getSetAttribute = jQuery.support.getSetAttribute,
		nodeHook, boolHook, fixSpecified;

	jQuery.fn.extend({
		attr: function (name, value) {
			return jQuery.access(this, jQuery.attr, name, value, arguments.length > 1);
		},

		removeAttr: function (name) {
			return this.each(function () {
				jQuery.removeAttr(this, name);
			});
		},

		prop: function (name, value) {
			return jQuery.access(this, jQuery.prop, name, value, arguments.length > 1);
		},

		removeProp: function (name) {
			name = jQuery.propFix[name] || name;
			return this.each(function () {
				// try/catch handles cases where IE balks (such as removing a property on window)
				try {
					this[name] = undefined;
					delete this[name];
				} catch (e) {
				}
			});
		},

		addClass: function (value) {
			var classNames, i, l, elem,
				setClass, c, cl;

			if (jQuery.isFunction(value)) {
				return this.each(function (j) {
					jQuery(this).addClass(value.call(this, j, this.className));
				});
			}

			if (value && typeof value === "string") {
				classNames = value.split(rspace);

				for (i = 0, l = this.length; i < l; i++) {
					elem = this[i];

					if (elem.nodeType === 1) {
						if (!elem.className && classNames.length === 1) {
							elem.className = value;

						} else {
							setClass = " " + elem.className + " ";

							for (c = 0, cl = classNames.length; c < cl; c++) {
								if (!~setClass.indexOf(" " + classNames[c] + " ")) {
									setClass += classNames[c] + " ";
								}
							}
							elem.className = jQuery.trim(setClass);
						}
					}
				}
			}

			return this;
		},

		removeClass: function (value) {
			var classNames, i, l, elem, className, c, cl;

			if (jQuery.isFunction(value)) {
				return this.each(function (j) {
					jQuery(this).removeClass(value.call(this, j, this.className));
				});
			}

			if ((value && typeof value === "string") || value === undefined) {
				classNames = (value || "").split(rspace);

				for (i = 0, l = this.length; i < l; i++) {
					elem = this[i];

					if (elem.nodeType === 1 && elem.className) {
						if (value) {
							className = (" " + elem.className + " ").replace(rclass, " ");
							for (c = 0, cl = classNames.length; c < cl; c++) {
								className = className.replace(" " + classNames[c] + " ", " ");
							}
							elem.className = jQuery.trim(className);

						} else {
							elem.className = "";
						}
					}
				}
			}

			return this;
		},

		toggleClass: function (value, stateVal) {
			var type = typeof value,
				isBool = typeof stateVal === "boolean";

			if (jQuery.isFunction(value)) {
				return this.each(function (i) {
					jQuery(this).toggleClass(value.call(this, i, this.className, stateVal), stateVal);
				});
			}

			return this.each(function () {
				if (type === "string") {
					// toggle individual class names
					var className,
						i = 0,
						self = jQuery(this),
						state = stateVal,
						classNames = value.split(rspace);

					while ((className = classNames[i++])) {
						// check each className given, space seperated list
						state = isBool ? state : !self.hasClass(className);
						self[state ? "addClass" : "removeClass"](className);
					}

				} else if (type === "undefined" || type === "boolean") {
					if (this.className) {
						// store className if set
						jQuery._data(this, "__className__", this.className);
					}

					// toggle whole className
					this.className = this.className || value === false ? "" : jQuery._data(this, "__className__") || "";
				}
			});
		},

		hasClass: function (selector) {
			var className = " " + selector + " ",
				i = 0,
				l = this.length;
			for (; i < l; i++) {
				if (this[i].nodeType === 1 && (" " + this[i].className + " ").replace(rclass, " ").indexOf(className) > -1) {
					return true;
				}
			}

			return false;
		},

		val: function (value) {
			var hooks, ret, isFunction,
				elem = this[0];

			if (!arguments.length) {
				if (elem) {
					hooks = jQuery.valHooks[elem.type] || jQuery.valHooks[elem.nodeName.toLowerCase()];

					if (hooks && "get" in hooks && (ret = hooks.get(elem, "value")) !== undefined) {
						return ret;
					}

					ret = elem.value;

					return typeof ret === "string" ?
						// handle most common string cases
						ret.replace(rreturn, "") :
						// handle cases where value is null/undef or number
						ret == null ? "" : ret;
				}

				return;
			}

			isFunction = jQuery.isFunction(value);

			return this.each(function (i) {
				var self = jQuery(this), val;

				if (this.nodeType !== 1) {
					return;
				}

				if (isFunction) {
					val = value.call(this, i, self.val());
				} else {
					val = value;
				}

				// Treat null/undefined as ""; convert numbers to string
				if (val == null) {
					val = "";
				} else if (typeof val === "number") {
					val += "";
				} else if (jQuery.isArray(val)) {
					val = jQuery.map(val, function (value) {
						return value == null ? "" : value + "";
					});
				}

				hooks = jQuery.valHooks[this.type] || jQuery.valHooks[this.nodeName.toLowerCase()];

				// If set returns undefined, fall back to normal setting
				if (!hooks || !("set" in hooks) || hooks.set(this, val, "value") === undefined) {
					this.value = val;
				}
			});
		}
	});

	jQuery.extend({
		valHooks: {
			option: {
				get: function (elem) {
					// attributes.value is undefined in Blackberry 4.7 but
					// uses .value. See #6932
					var val = elem.attributes.value;
					return !val || val.specified ? elem.value : elem.text;
				}
			},
			select: {
				get: function (elem) {
					var value, i, max, option,
						index = elem.selectedIndex,
						values = [],
						options = elem.options,
						one = elem.type === "select-one";

					// Nothing was selected
					if (index < 0) {
						return null;
					}

					// Loop through all the selected options
					i = one ? index : 0;
					max = one ? index + 1 : options.length;
					for (; i < max; i++) {
						option = options[i];

						// Don't return options that are disabled or in a disabled optgroup
						if (option.selected && (jQuery.support.optDisabled ? !option.disabled : option.getAttribute("disabled") === null) &&
							(!option.parentNode.disabled || !jQuery.nodeName(option.parentNode, "optgroup"))) {

							// Get the specific value for the option
							value = jQuery(option).val();

							// We don't need an array for one selects
							if (one) {
								return value;
							}

							// Multi-Selects return an array
							values.push(value);
						}
					}

					// Fixes Bug #2551 -- select.val() broken in IE after form.reset()
					if (one && !values.length && options.length) {
						return jQuery(options[index]).val();
					}

					return values;
				},

				set: function (elem, value) {
					var values = jQuery.makeArray(value);

					jQuery(elem).find("option").each(function () {
						this.selected = jQuery.inArray(jQuery(this).val(), values) >= 0;
					});

					if (!values.length) {
						elem.selectedIndex = -1;
					}
					return values;
				}
			}
		},

		attrFn: {
			val: true,
			css: true,
			html: true,
			text: true,
			data: true,
			width: true,
			height: true,
			offset: true
		},

		attr: function (elem, name, value, pass) {
			var ret, hooks, notxml,
				nType = elem.nodeType;

			// don't get/set attributes on text, comment and attribute nodes
			if (!elem || nType === 3 || nType === 8 || nType === 2) {
				return;
			}

			if (pass && name in jQuery.attrFn) {
				return jQuery(elem)[name](value);
			}

			// Fallback to prop when attributes are not supported
			if (typeof elem.getAttribute === "undefined") {
				return jQuery.prop(elem, name, value);
			}

			notxml = nType !== 1 || !jQuery.isXMLDoc(elem);

			// All attributes are lowercase
			// Grab necessary hook if one is defined
			if (notxml) {
				name = name.toLowerCase();
				hooks = jQuery.attrHooks[name] || (rboolean.test(name) ? boolHook : nodeHook);
			}

			if (value !== undefined) {

				if (value === null) {
					jQuery.removeAttr(elem, name);
					return;

				} else if (hooks && "set" in hooks && notxml && (ret = hooks.set(elem, value, name)) !== undefined) {
					return ret;

				} else {
					elem.setAttribute(name, "" + value);
					return value;
				}

			} else if (hooks && "get" in hooks && notxml && (ret = hooks.get(elem, name)) !== null) {
				return ret;

			} else {

				ret = elem.getAttribute(name);

				// Non-existent attributes return null, we normalize to undefined
				return ret === null ?
					undefined :
					ret;
			}
		},

		removeAttr: function (elem, value) {
			var propName, attrNames, name, l, isBool,
				i = 0;

			if (value && elem.nodeType === 1) {
				attrNames = value.toLowerCase().split(rspace);
				l = attrNames.length;

				for (; i < l; i++) {
					name = attrNames[i];

					if (name) {
						propName = jQuery.propFix[name] || name;
						isBool = rboolean.test(name);

						// See #9699 for explanation of this approach (setting first, then removal)
						// Do not do this for boolean attributes (see #10870)
						if (!isBool) {
							jQuery.attr(elem, name, "");
						}
						elem.removeAttribute(getSetAttribute ? name : propName);

						// Set corresponding property to false for boolean attributes
						if (isBool && propName in elem) {
							elem[propName] = false;
						}
					}
				}
			}
		},

		attrHooks: {
			type: {
				set: function (elem, value) {
					// We can't allow the type property to be changed (since it causes problems in IE)
					if (rtype.test(elem.nodeName) && elem.parentNode) {
						jQuery.error("type property can't be changed");
					} else if (!jQuery.support.radioValue && value === "radio" && jQuery.nodeName(elem, "input")) {
						// Setting the type on a radio button after the value resets the value in IE6-9
						// Reset value to it's default in case type is set after value
						// This is for element creation
						var val = elem.value;
						elem.setAttribute("type", value);
						if (val) {
							elem.value = val;
						}
						return value;
					}
				}
			},
			// Use the value property for back compat
			// Use the nodeHook for button elements in IE6/7 (#1954)
			value: {
				get: function (elem, name) {
					if (nodeHook && jQuery.nodeName(elem, "button")) {
						return nodeHook.get(elem, name);
					}
					return name in elem ?
						elem.value :
						null;
				},
				set: function (elem, value, name) {
					if (nodeHook && jQuery.nodeName(elem, "button")) {
						return nodeHook.set(elem, value, name);
					}
					// Does not return so that setAttribute is also used
					elem.value = value;
				}
			}
		},

		propFix: {
			tabindex: "tabIndex",
			readonly: "readOnly",
			"for": "htmlFor",
			"class": "className",
			maxlength: "maxLength",
			cellspacing: "cellSpacing",
			cellpadding: "cellPadding",
			rowspan: "rowSpan",
			colspan: "colSpan",
			usemap: "useMap",
			frameborder: "frameBorder",
			contenteditable: "contentEditable"
		},

		prop: function (elem, name, value) {
			var ret, hooks, notxml,
				nType = elem.nodeType;

			// don't get/set properties on text, comment and attribute nodes
			if (!elem || nType === 3 || nType === 8 || nType === 2) {
				return;
			}

			notxml = nType !== 1 || !jQuery.isXMLDoc(elem);

			if (notxml) {
				// Fix name and attach hooks
				name = jQuery.propFix[name] || name;
				hooks = jQuery.propHooks[name];
			}

			if (value !== undefined) {
				if (hooks && "set" in hooks && (ret = hooks.set(elem, value, name)) !== undefined) {
					return ret;

				} else {
					return (elem[name] = value);
				}

			} else {
				if (hooks && "get" in hooks && (ret = hooks.get(elem, name)) !== null) {
					return ret;

				} else {
					return elem[name];
				}
			}
		},

		propHooks: {
			tabIndex: {
				get: function (elem) {
					// elem.tabIndex doesn't always return the correct value when it hasn't been explicitly set
					// http://fluidproject.org/blog/2008/01/09/getting-setting-and-removing-tabindex-values-with-javascript/
					var attributeNode = elem.getAttributeNode("tabindex");

					return attributeNode && attributeNode.specified ?
						parseInt(attributeNode.value, 10) :
						rfocusable.test(elem.nodeName) || rclickable.test(elem.nodeName) && elem.href ?
							0 :
							undefined;
				}
			}
		}
	});

// Add the tabIndex propHook to attrHooks for back-compat (different case is intentional)
	jQuery.attrHooks.tabindex = jQuery.propHooks.tabIndex;

// Hook for boolean attributes
	boolHook = {
		get: function (elem, name) {
			// Align boolean attributes with corresponding properties
			// Fall back to attribute presence where some booleans are not supported
			var attrNode,
				property = jQuery.prop(elem, name);
			return property === true || typeof property !== "boolean" && (attrNode = elem.getAttributeNode(name)) && attrNode.nodeValue !== false ?
				name.toLowerCase() :
				undefined;
		},
		set: function (elem, value, name) {
			var propName;
			if (value === false) {
				// Remove boolean attributes when set to false
				jQuery.removeAttr(elem, name);
			} else {
				// value is true since we know at this point it's type boolean and not false
				// Set boolean attributes to the same name and set the DOM property
				propName = jQuery.propFix[name] || name;
				if (propName in elem) {
					// Only set the IDL specifically if it already exists on the element
					elem[propName] = true;
				}

				elem.setAttribute(name, name.toLowerCase());
			}
			return name;
		}
	};

// IE6/7 do not support getting/setting some attributes with get/setAttribute
	if (!getSetAttribute) {

		fixSpecified = {
			name: true,
			id: true,
			coords: true
		};

		// Use this for any attribute in IE6/7
		// This fixes almost every IE6/7 issue
		nodeHook = jQuery.valHooks.button = {
			get: function (elem, name) {
				var ret;
				ret = elem.getAttributeNode(name);
				return ret && (fixSpecified[name] ? ret.nodeValue !== "" : ret.specified) ?
					ret.nodeValue :
					undefined;
			},
			set: function (elem, value, name) {
				// Set the existing or create a new attribute node
				var ret = elem.getAttributeNode(name);
				if (!ret) {
					ret = document.createAttribute(name);
					elem.setAttributeNode(ret);
				}
				return (ret.nodeValue = value + "");
			}
		};

		// Apply the nodeHook to tabindex
		jQuery.attrHooks.tabindex.set = nodeHook.set;

		// Set width and height to auto instead of 0 on empty string( Bug #8150 )
		// This is for removals
		jQuery.each(["width", "height"], function (i, name) {
			jQuery.attrHooks[name] = jQuery.extend(jQuery.attrHooks[name], {
				set: function (elem, value) {
					if (value === "") {
						elem.setAttribute(name, "auto");
						return value;
					}
				}
			});
		});

		// Set contenteditable to false on removals(#10429)
		// Setting to empty string throws an error as an invalid value
		jQuery.attrHooks.contenteditable = {
			get: nodeHook.get,
			set: function (elem, value, name) {
				if (value === "") {
					value = "false";
				}
				nodeHook.set(elem, value, name);
			}
		};
	}


// Some attributes require a special call on IE
	if (!jQuery.support.hrefNormalized) {
		jQuery.each(["href", "src", "width", "height"], function (i, name) {
			jQuery.attrHooks[name] = jQuery.extend(jQuery.attrHooks[name], {
				get: function (elem) {
					var ret = elem.getAttribute(name, 2);
					return ret === null ? undefined : ret;
				}
			});
		});
	}

	if (!jQuery.support.style) {
		jQuery.attrHooks.style = {
			get: function (elem) {
				// Return undefined in the case of empty string
				// Normalize to lowercase since IE uppercases css property names
				return elem.style.cssText.toLowerCase() || undefined;
			},
			set: function (elem, value) {
				return (elem.style.cssText = "" + value);
			}
		};
	}

// Safari mis-reports the default selected property of an option
// Accessing the parent's selectedIndex property fixes it
	if (!jQuery.support.optSelected) {
		jQuery.propHooks.selected = jQuery.extend(jQuery.propHooks.selected, {
			get: function (elem) {
				var parent = elem.parentNode;

				if (parent) {
					parent.selectedIndex;

					// Make sure that it also works with optgroups, see #5701
					if (parent.parentNode) {
						parent.parentNode.selectedIndex;
					}
				}
				return null;
			}
		});
	}

// IE6/7 call enctype encoding
	if (!jQuery.support.enctype) {
		jQuery.propFix.enctype = "encoding";
	}

// Radios and checkboxes getter/setter
	if (!jQuery.support.checkOn) {
		jQuery.each(["radio", "checkbox"], function () {
			jQuery.valHooks[this] = {
				get: function (elem) {
					// Handle the case where in Webkit "" is returned instead of "on" if a value isn't specified
					return elem.getAttribute("value") === null ? "on" : elem.value;
				}
			};
		});
	}
	jQuery.each(["radio", "checkbox"], function () {
		jQuery.valHooks[this] = jQuery.extend(jQuery.valHooks[this], {
			set: function (elem, value) {
				if (jQuery.isArray(value)) {
					return (elem.checked = jQuery.inArray(jQuery(elem).val(), value) >= 0);
				}
			}
		});
	});


	var rformElems = /^(?:textarea|input|select)$/i,
		rtypenamespace = /^([^\.]*)?(?:\.(.+))?$/,
		rhoverHack = /(?:^|\s)hover(\.\S+)?\b/,
		rkeyEvent = /^key/,
		rmouseEvent = /^(?:mouse|contextmenu)|click/,
		rfocusMorph = /^(?:focusinfocus|focusoutblur)$/,
		rquickIs = /^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,
		quickParse = function (selector) {
			var quick = rquickIs.exec(selector);
			if (quick) {
				//   0  1    2   3
				// [ _, tag, id, class ]
				quick[1] = (quick[1] || "").toLowerCase();
				quick[3] = quick[3] && new RegExp("(?:^|\\s)" + quick[3] + "(?:\\s|$)");
			}
			return quick;
		},
		quickIs = function (elem, m) {
			var attrs = elem.attributes || {};
			return (
				(!m[1] || elem.nodeName.toLowerCase() === m[1]) &&
				(!m[2] || (attrs.id || {}).value === m[2]) &&
				(!m[3] || m[3].test((attrs["class"] || {}).value))
			);
		},
		hoverHack = function (events) {
			return jQuery.event.special.hover ? events : events.replace(rhoverHack, "mouseenter$1 mouseleave$1");
		};

	/*
 * Helper functions for managing events -- not part of the public interface.
 * Props to Dean Edwards' addEvent library for many of the ideas.
 */
	jQuery.event = {

		add: function (elem, types, handler, data, selector) {

			var elemData, eventHandle, events,
				t, tns, type, namespaces, handleObj,
				handleObjIn, quick, handlers, special;

			// Don't attach events to noData or text/comment nodes (allow plain objects tho)
			if (elem.nodeType === 3 || elem.nodeType === 8 || !types || !handler || !(elemData = jQuery._data(elem))) {
				return;
			}

			// Caller can pass in an object of custom data in lieu of the handler
			if (handler.handler) {
				handleObjIn = handler;
				handler = handleObjIn.handler;
				selector = handleObjIn.selector;
			}

			// Make sure that the handler has a unique ID, used to find/remove it later
			if (!handler.guid) {
				handler.guid = jQuery.guid++;
			}

			// Init the element's event structure and main handler, if this is the first
			events = elemData.events;
			if (!events) {
				elemData.events = events = {};
			}
			eventHandle = elemData.handle;
			if (!eventHandle) {
				elemData.handle = eventHandle = function (e) {
					// Discard the second event of a jQuery.event.trigger() and
					// when an event is called after a page has unloaded
					return typeof jQuery !== "undefined" && (!e || jQuery.event.triggered !== e.type) ?
						jQuery.event.dispatch.apply(eventHandle.elem, arguments) :
						undefined;
				};
				// Add elem as a property of the handle fn to prevent a memory leak with IE non-native events
				eventHandle.elem = elem;
			}

			// Handle multiple events separated by a space
			// jQuery(...).bind("mouseover mouseout", fn);
			types = jQuery.trim(hoverHack(types)).split(" ");
			for (t = 0; t < types.length; t++) {

				tns = rtypenamespace.exec(types[t]) || [];
				type = tns[1];
				namespaces = (tns[2] || "").split(".").sort();

				// If event changes its type, use the special event handlers for the changed type
				special = jQuery.event.special[type] || {};

				// If selector defined, determine special event api type, otherwise given type
				type = (selector ? special.delegateType : special.bindType) || type;

				// Update special based on newly reset type
				special = jQuery.event.special[type] || {};

				// handleObj is passed to all event handlers
				handleObj = jQuery.extend({
					type: type,
					origType: tns[1],
					data: data,
					handler: handler,
					guid: handler.guid,
					selector: selector,
					quick: selector && quickParse(selector),
					namespace: namespaces.join(".")
				}, handleObjIn);

				// Init the event handler queue if we're the first
				handlers = events[type];
				if (!handlers) {
					handlers = events[type] = [];
					handlers.delegateCount = 0;

					// Only use addEventListener/attachEvent if the special events handler returns false
					if (!special.setup || special.setup.call(elem, data, namespaces, eventHandle) === false) {
						// Bind the global event handler to the element
						if (elem.addEventListener) {
							elem.addEventListener(type, eventHandle, false);

						} else if (elem.attachEvent) {
							elem.attachEvent("on" + type, eventHandle);
						}
					}
				}

				if (special.add) {
					special.add.call(elem, handleObj);

					if (!handleObj.handler.guid) {
						handleObj.handler.guid = handler.guid;
					}
				}

				// Add to the element's handler list, delegates in front
				if (selector) {
					handlers.splice(handlers.delegateCount++, 0, handleObj);
				} else {
					handlers.push(handleObj);
				}

				// Keep track of which events have ever been used, for event optimization
				jQuery.event.global[type] = true;
			}

			// Nullify elem to prevent memory leaks in IE
			elem = null;
		},

		global: {},

		// Detach an event or set of events from an element
		remove: function (elem, types, handler, selector, mappedTypes) {

			var elemData = jQuery.hasData(elem) && jQuery._data(elem),
				t, tns, type, origType, namespaces, origCount,
				j, events, special, handle, eventType, handleObj;

			if (!elemData || !(events = elemData.events)) {
				return;
			}

			// Once for each type.namespace in types; type may be omitted
			types = jQuery.trim(hoverHack(types || "")).split(" ");
			for (t = 0; t < types.length; t++) {
				tns = rtypenamespace.exec(types[t]) || [];
				type = origType = tns[1];
				namespaces = tns[2];

				// Unbind all events (on this namespace, if provided) for the element
				if (!type) {
					for (type in events) {
						jQuery.event.remove(elem, type + types[t], handler, selector, true);
					}
					continue;
				}

				special = jQuery.event.special[type] || {};
				type = (selector ? special.delegateType : special.bindType) || type;
				eventType = events[type] || [];
				origCount = eventType.length;
				namespaces = namespaces ? new RegExp("(^|\\.)" + namespaces.split(".").sort().join("\\.(?:.*\\.)?") + "(\\.|$)") : null;

				// Remove matching events
				for (j = 0; j < eventType.length; j++) {
					handleObj = eventType[j];

					if ((mappedTypes || origType === handleObj.origType) &&
						(!handler || handler.guid === handleObj.guid) &&
						(!namespaces || namespaces.test(handleObj.namespace)) &&
						(!selector || selector === handleObj.selector || selector === "**" && handleObj.selector)) {
						eventType.splice(j--, 1);

						if (handleObj.selector) {
							eventType.delegateCount--;
						}
						if (special.remove) {
							special.remove.call(elem, handleObj);
						}
					}
				}

				// Remove generic event handler if we removed something and no more handlers exist
				// (avoids potential for endless recursion during removal of special event handlers)
				if (eventType.length === 0 && origCount !== eventType.length) {
					if (!special.teardown || special.teardown.call(elem, namespaces) === false) {
						jQuery.removeEvent(elem, type, elemData.handle);
					}

					delete events[type];
				}
			}

			// Remove the expando if it's no longer used
			if (jQuery.isEmptyObject(events)) {
				handle = elemData.handle;
				if (handle) {
					handle.elem = null;
				}

				// removeData also checks for emptiness and clears the expando if empty
				// so use it instead of delete
				jQuery.removeData(elem, ["events", "handle"], true);
			}
		},

		// Events that are safe to short-circuit if no handlers are attached.
		// Native DOM events should not be added, they may have inline handlers.
		customEvent: {
			"getData": true,
			"setData": true,
			"changeData": true
		},

		trigger: function (event, data, elem, onlyHandlers) {
			// Don't do events on text and comment nodes
			if (elem && (elem.nodeType === 3 || elem.nodeType === 8)) {
				return;
			}

			// Event object or event type
			var type = event.type || event,
				namespaces = [],
				cache, exclusive, i, cur, old, ontype, special, handle, eventPath, bubbleType;

			// focus/blur morphs to focusin/out; ensure we're not firing them right now
			if (rfocusMorph.test(type + jQuery.event.triggered)) {
				return;
			}

			if (type.indexOf("!") >= 0) {
				// Exclusive events trigger only for the exact event (no namespaces)
				type = type.slice(0, -1);
				exclusive = true;
			}

			if (type.indexOf(".") >= 0) {
				// Namespaced trigger; create a regexp to match event type in handle()
				namespaces = type.split(".");
				type = namespaces.shift();
				namespaces.sort();
			}

			if ((!elem || jQuery.event.customEvent[type]) && !jQuery.event.global[type]) {
				// No jQuery handlers for this event type, and it can't have inline handlers
				return;
			}

			// Caller can pass in an Event, Object, or just an event type string
			event = typeof event === "object" ?
				// jQuery.Event object
				event[jQuery.expando] ? event :
					// Object literal
					new jQuery.Event(type, event) :
				// Just the event type (string)
				new jQuery.Event(type);

			event.type = type;
			event.isTrigger = true;
			event.exclusive = exclusive;
			event.namespace = namespaces.join(".");
			event.namespace_re = event.namespace ? new RegExp("(^|\\.)" + namespaces.join("\\.(?:.*\\.)?") + "(\\.|$)") : null;
			ontype = type.indexOf(":") < 0 ? "on" + type : "";

			// Handle a global trigger
			if (!elem) {

				// TODO: Stop taunting the data cache; remove global events and always attach to document
				cache = jQuery.cache;
				for (i in cache) {
					if (cache[i].events && cache[i].events[type]) {
						jQuery.event.trigger(event, data, cache[i].handle.elem, true);
					}
				}
				return;
			}

			// Clean up the event in case it is being reused
			event.result = undefined;
			if (!event.target) {
				event.target = elem;
			}

			// Clone any incoming data and prepend the event, creating the handler arg list
			data = data != null ? jQuery.makeArray(data) : [];
			data.unshift(event);

			// Allow special events to draw outside the lines
			special = jQuery.event.special[type] || {};
			if (special.trigger && special.trigger.apply(elem, data) === false) {
				return;
			}

			// Determine event propagation path in advance, per W3C events spec (#9951)
			// Bubble up to document, then to window; watch for a global ownerDocument var (#9724)
			eventPath = [[elem, special.bindType || type]];
			if (!onlyHandlers && !special.noBubble && !jQuery.isWindow(elem)) {

				bubbleType = special.delegateType || type;
				cur = rfocusMorph.test(bubbleType + type) ? elem : elem.parentNode;
				old = null;
				for (; cur; cur = cur.parentNode) {
					eventPath.push([cur, bubbleType]);
					old = cur;
				}

				// Only add window if we got to document (e.g., not plain obj or detached DOM)
				if (old && old === elem.ownerDocument) {
					eventPath.push([old.defaultView || old.parentWindow || window, bubbleType]);
				}
			}

			// Fire handlers on the event path
			for (i = 0; i < eventPath.length && !event.isPropagationStopped(); i++) {

				cur = eventPath[i][0];
				event.type = eventPath[i][1];

				handle = (jQuery._data(cur, "events") || {})[event.type] && jQuery._data(cur, "handle");
				if (handle) {
					handle.apply(cur, data);
				}
				// Note that this is a bare JS function and not a jQuery handler
				handle = ontype && cur[ontype];
				if (handle && jQuery.acceptData(cur) && handle.apply(cur, data) === false) {
					event.preventDefault();
				}
			}
			event.type = type;

			// If nobody prevented the default action, do it now
			if (!onlyHandlers && !event.isDefaultPrevented()) {

				if ((!special._default || special._default.apply(elem.ownerDocument, data) === false) &&
					!(type === "click" && jQuery.nodeName(elem, "a")) && jQuery.acceptData(elem)) {

					// Call a native DOM method on the target with the same name name as the event.
					// Can't use an .isFunction() check here because IE6/7 fails that test.
					// Don't do default actions on window, that's where global variables be (#6170)
					// IE<9 dies on focus/blur to hidden element (#1486)
					if (ontype && elem[type] && ((type !== "focus" && type !== "blur") || event.target.offsetWidth !== 0) && !jQuery.isWindow(elem)) {

						// Don't re-trigger an onFOO event when we call its FOO() method
						old = elem[ontype];

						if (old) {
							elem[ontype] = null;
						}

						// Prevent re-triggering of the same event, since we already bubbled it above
						jQuery.event.triggered = type;
						elem[type]();
						jQuery.event.triggered = undefined;

						if (old) {
							elem[ontype] = old;
						}
					}
				}
			}

			return event.result;
		},

		dispatch: function (event) {

			// Make a writable jQuery.Event from the native event object
			event = jQuery.event.fix(event || window.event);

			var handlers = ((jQuery._data(this, "events") || {})[event.type] || []),
				delegateCount = handlers.delegateCount,
				args = [].slice.call(arguments, 0),
				run_all = !event.exclusive && !event.namespace,
				special = jQuery.event.special[event.type] || {},
				handlerQueue = [],
				i, j, cur, jqcur, ret, selMatch, matched, matches, handleObj, sel, related;

			// Use the fix-ed jQuery.Event rather than the (read-only) native event
			args[0] = event;
			event.delegateTarget = this;

			// Call the preDispatch hook for the mapped type, and let it bail if desired
			if (special.preDispatch && special.preDispatch.call(this, event) === false) {
				return;
			}

			// Determine handlers that should run if there are delegated events
			// Avoid non-left-click bubbling in Firefox (#3861)
			if (delegateCount && !(event.button && event.type === "click")) {

				// Pregenerate a single jQuery object for reuse with .is()
				jqcur = jQuery(this);
				jqcur.context = this.ownerDocument || this;

				for (cur = event.target; cur != this; cur = cur.parentNode || this) {

					// Don't process events on disabled elements (#6911, #8165)
					if (cur.disabled !== true) {
						selMatch = {};
						matches = [];
						jqcur[0] = cur;
						for (i = 0; i < delegateCount; i++) {
							handleObj = handlers[i];
							sel = handleObj.selector;

							if (selMatch[sel] === undefined) {
								selMatch[sel] = (
									handleObj.quick ? quickIs(cur, handleObj.quick) : jqcur.is(sel)
								);
							}
							if (selMatch[sel]) {
								matches.push(handleObj);
							}
						}
						if (matches.length) {
							handlerQueue.push({elem: cur, matches: matches});
						}
					}
				}
			}

			// Add the remaining (directly-bound) handlers
			if (handlers.length > delegateCount) {
				handlerQueue.push({elem: this, matches: handlers.slice(delegateCount)});
			}

			// Run delegates first; they may want to stop propagation beneath us
			for (i = 0; i < handlerQueue.length && !event.isPropagationStopped(); i++) {
				matched = handlerQueue[i];
				event.currentTarget = matched.elem;

				for (j = 0; j < matched.matches.length && !event.isImmediatePropagationStopped(); j++) {
					handleObj = matched.matches[j];

					// Triggered event must either 1) be non-exclusive and have no namespace, or
					// 2) have namespace(s) a subset or equal to those in the bound event (both can have no namespace).
					if (run_all || (!event.namespace && !handleObj.namespace) || event.namespace_re && event.namespace_re.test(handleObj.namespace)) {

						event.data = handleObj.data;
						event.handleObj = handleObj;

						ret = ((jQuery.event.special[handleObj.origType] || {}).handle || handleObj.handler)
							.apply(matched.elem, args);

						if (ret !== undefined) {
							event.result = ret;
							if (ret === false) {
								event.preventDefault();
								event.stopPropagation();
							}
						}
					}
				}
			}

			// Call the postDispatch hook for the mapped type
			if (special.postDispatch) {
				special.postDispatch.call(this, event);
			}

			return event.result;
		},

		// MODIFIED BY ATLASSIAN: Fix event handler for mouse events (DELOR-640) by manually patching
		addProp: function (name, hook) {
			Object.defineProperty(jQuery.Event.prototype, name, {
				enumerable: true,
				configurable: true,

				get: jQuery.isFunction(hook) ?
					function () {
						if (this.originalEvent) {
							return hook(this.originalEvent);
						}
					} :
					function () {
						if (this.originalEvent) {
							return this.originalEvent[name];
						}
					},

				set: function (value) {
					Object.defineProperty(this, name, {
						enumerable: true,
						configurable: true,
						writable: true,
						value: value
					});
				}
			});
		},

		fix: function (originalEvent) {
			return originalEvent[jQuery.expando] ?
				originalEvent :
				new jQuery.Event(originalEvent);
		},

		special: {
			ready: {
				// Make sure the ready event is setup
				setup: jQuery.bindReady
			},

			load: {
				// Prevent triggered image.load events from bubbling to window.load
				noBubble: true
			},

			focus: {
				delegateType: "focusin"
			},
			blur: {
				delegateType: "focusout"
			},

			beforeunload: {
				setup: function (data, namespaces, eventHandle) {
					// We only want to do this special case on windows
					if (jQuery.isWindow(this)) {
						this.onbeforeunload = eventHandle;
					}
				},

				teardown: function (namespaces, eventHandle) {
					if (this.onbeforeunload === eventHandle) {
						this.onbeforeunload = null;
					}
				}
			}
		},

		simulate: function (type, elem, event, bubble) {
			// Piggyback on a donor event to simulate a different one.
			// Fake originalEvent to avoid donor's stopPropagation, but if the
			// simulated event prevents default then we do the same on the donor.
			var e = jQuery.extend(
				new jQuery.Event(),
				event,
				{
					type: type,
					isSimulated: true,
					originalEvent: {}
				}
			);
			if (bubble) {
				jQuery.event.trigger(e, null, elem);
			} else {
				jQuery.event.dispatch.call(elem, e);
			}
			if (e.isDefaultPrevented()) {
				event.preventDefault();
			}
		}
	};

// Some plugins are using, but it's undocumented/deprecated and will be removed.
// The 1.7 special event interface should provide all the hooks needed now.
	jQuery.event.handle = jQuery.event.dispatch;

	Object.defineProperty(jQuery.event, 'props', {
		set: function() {
			throw new Error('jQuery.event.props is not available for performance reasons. Please use jQuery.event.addProp');
		}
	})

	jQuery.removeEvent = document.removeEventListener ?
		function (elem, type, handle) {
			if (elem.removeEventListener) {
				elem.removeEventListener(type, handle, false);
			}
		} :
		function (elem, type, handle) {
			if (elem.detachEvent) {
				elem.detachEvent("on" + type, handle);
			}
		};

	jQuery.Event = function (src, props) {
		// Allow instantiation without the 'new' keyword
		if (!(this instanceof jQuery.Event)) {
			return new jQuery.Event(src, props);
		}

		// Event object
		if (src && src.type) {
			this.originalEvent = src;
			this.type = src.type;

			// Events bubbling up the document may have been marked as prevented
			// by a handler lower down the tree; reflect the correct value.
			this.isDefaultPrevented = (src.defaultPrevented || src.returnValue === false ||
				src.getPreventDefault && src.getPreventDefault()) ? returnTrue : returnFalse;

			// Create target properties
			this.target = src.target;
			this.currentTarget = src.currentTarget;
			this.relatedTarget = src.relatedTarget;

			// Event type
		} else {
			this.type = src;
		}

		// Put explicitly provided properties onto the event object
		if (props) {
			jQuery.extend(this, props);
		}

		// Create a timestamp if incoming event doesn't have one
		this.timeStamp = src && src.timeStamp || jQuery.now();

		// Mark it as fixed
		this[jQuery.expando] = true;
	};

	function returnFalse() {
		return false;
	}

	function returnTrue() {
		return true;
	}

// jQuery.Event is based on DOM3 Events as specified by the ECMAScript Language Binding
// http://www.w3.org/TR/2003/WD-DOM-Level-3-Events-20030331/ecma-script-binding.html
	jQuery.Event.prototype = {
		preventDefault: function () {
			this.isDefaultPrevented = returnTrue;

			var e = this.originalEvent;
			if (!e) {
				return;
			}

			// if preventDefault exists run it on the original event
			if (e.preventDefault) {
				e.preventDefault();

				// otherwise set the returnValue property of the original event to false (IE)
			} else {
				e.returnValue = false;
			}
		},
		stopPropagation: function () {
			this.isPropagationStopped = returnTrue;

			var e = this.originalEvent;
			if (!e) {
				return;
			}
			// if stopPropagation exists run it on the original event
			if (e.stopPropagation) {
				e.stopPropagation();
			}
			// otherwise set the cancelBubble property of the original event to true (IE)
			e.cancelBubble = true;
		},
		stopImmediatePropagation: function () {
			this.isImmediatePropagationStopped = returnTrue;
			this.stopPropagation();
		},
		isDefaultPrevented: returnFalse,
		isPropagationStopped: returnFalse,
		isImmediatePropagationStopped: returnFalse
	};

// Includes all common event props including KeyEvent and MouseEvent specific props
	jQuery.each({
		altKey: true,
		bubbles: true,
		cancelable: true,
		ctrlKey: true,
		detail: true,
		eventPhase: true,
		metaKey: true,
		shiftKey: true,
		view: true,
		"char": true,
		charCode: true,
		key: true,
		keyCode: true,
		button: true,
		buttons: true,
		clientX: true,
		clientY: true,
		offsetX: true,
		offsetY: true,
		screenX: true,
		screenY: true,
		toElement: true,

		which: function (event) {
			var button = event.button;

			// Add which for key events
			if (event.which == null && rkeyEvent.test(event.type)) {
				return event.charCode != null ? event.charCode : event.keyCode;
			}

			// Add which for click: 1 === left; 2 === middle; 3 === right
			if (!event.which && button !== undefined && rmouseEvent.test(event.type)) {
				return (button & 1 ? 1 : (button & 2 ? 3 : (button & 4 ? 2 : 0)));
			}

			return event.which;
		},

		pageX: function (event) {
			var eventDoc, doc, body;

			// Calculate pageX if missing and clientX available
			if (event.pageX == null && event.clientX != null) {
				eventDoc = event.target.ownerDocument || document;
				doc = eventDoc.documentElement;
				body = eventDoc.body;

				return event.clientX +
					(doc && doc.scrollLeft || body && body.scrollLeft || 0) -
					(doc && doc.clientLeft || body && body.clientLeft || 0);
			}

			return event.pageX;
		},

		pageY: function (event) {
			var eventDoc, doc, body;

			// Calculate pageY if missing and clientY available
			if (event.pageY == null && event.clientY != null) {
				eventDoc = event.target.ownerDocument || document;
				doc = eventDoc.documentElement;
				body = eventDoc.body;

				return event.clientY +
					(doc && doc.scrollTop || body && body.scrollTop || 0) -
					(doc && doc.clientTop || body && body.clientTop || 0);
			}

			return event.pageY;
		}
	}, jQuery.event.addProp);

// Create mouseenter/leave events using mouseover/out and event-time checks
	jQuery.each({
		mouseenter: "mouseover",
		mouseleave: "mouseout"
	}, function (orig, fix) {
		jQuery.event.special[orig] = {
			delegateType: fix,
			bindType: fix,

			handle: function (event) {
				var target = this,
					related = event.relatedTarget,
					handleObj = event.handleObj,
					selector = handleObj.selector,
					ret;

				// For mousenter/leave call the handler if related is outside the target.
				// NB: No relatedTarget if the mouse left/entered the browser window
				if (!related || (related !== target && !jQuery.contains(target, related))) {
					event.type = handleObj.origType;
					ret = handleObj.handler.apply(this, arguments);
					event.type = fix;
				}
				return ret;
			}
		};
	});

// IE submit delegation
	if (!jQuery.support.submitBubbles) {

		jQuery.event.special.submit = {
			setup: function () {
				// Only need this for delegated form submit events
				if (jQuery.nodeName(this, "form")) {
					return false;
				}

				// Lazy-add a submit handler when a descendant form may potentially be submitted
				jQuery.event.add(this, "click._submit keypress._submit", function (e) {
					// Node name check avoids a VML-related crash in IE (#9807)
					var elem = e.target,
						form = jQuery.nodeName(elem, "input") || jQuery.nodeName(elem, "button") ? elem.form : undefined;
					if (form && !form._submit_attached) {
						jQuery.event.add(form, "submit._submit", function (event) {
							event._submit_bubble = true;
						});
						form._submit_attached = true;
					}
				});
				// return undefined since we don't need an event listener
			},

			postDispatch: function (event) {
				// If form was submitted by the user, bubble the event up the tree
				if (event._submit_bubble) {
					delete event._submit_bubble;
					if (this.parentNode && !event.isTrigger) {
						jQuery.event.simulate("submit", this.parentNode, event, true);
					}
				}
			},

			teardown: function () {
				// Only need this for delegated form submit events
				if (jQuery.nodeName(this, "form")) {
					return false;
				}

				// Remove delegated handlers; cleanData eventually reaps submit handlers attached above
				jQuery.event.remove(this, "._submit");
			}
		};
	}

// IE change delegation and checkbox/radio fix
	if (!jQuery.support.changeBubbles) {

		jQuery.event.special.change = {

			setup: function () {

				if (rformElems.test(this.nodeName)) {
					// IE doesn't fire change on a check/radio until blur; trigger it on click
					// after a propertychange. Eat the blur-change in special.change.handle.
					// This still fires onchange a second time for check/radio after blur.
					if (this.type === "checkbox" || this.type === "radio") {
						jQuery.event.add(this, "propertychange._change", function (event) {
							if (event.originalEvent.propertyName === "checked") {
								this._just_changed = true;
							}
						});
						jQuery.event.add(this, "click._change", function (event) {
							if (this._just_changed && !event.isTrigger) {
								this._just_changed = false;
								jQuery.event.simulate("change", this, event, true);
							}
						});
					}
					return false;
				}
				// Delegated event; lazy-add a change handler on descendant inputs
				jQuery.event.add(this, "beforeactivate._change", function (e) {
					var elem = e.target;

					if (rformElems.test(elem.nodeName) && !elem._change_attached) {
						jQuery.event.add(elem, "change._change", function (event) {
							if (this.parentNode && !event.isSimulated && !event.isTrigger) {
								jQuery.event.simulate("change", this.parentNode, event, true);
							}
						});
						elem._change_attached = true;
					}
				});
			},

			handle: function (event) {
				var elem = event.target;

				// Swallow native change events from checkbox/radio, we already triggered them above
				if (this !== elem || event.isSimulated || event.isTrigger || (elem.type !== "radio" && elem.type !== "checkbox")) {
					return event.handleObj.handler.apply(this, arguments);
				}
			},

			teardown: function () {
				jQuery.event.remove(this, "._change");

				return rformElems.test(this.nodeName);
			}
		};
	}

// Create "bubbling" focus and blur events
	if (!jQuery.support.focusinBubbles) {
		jQuery.each({focus: "focusin", blur: "focusout"}, function (orig, fix) {

			// Attach a single capturing handler while someone wants focusin/focusout
			var attaches = 0,
				handler = function (event) {
					jQuery.event.simulate(fix, event.target, jQuery.event.fix(event), true);
				};

			jQuery.event.special[fix] = {
				setup: function () {
					if (attaches++ === 0) {
						document.addEventListener(orig, handler, true);
					}
				},
				teardown: function () {
					if (--attaches === 0) {
						document.removeEventListener(orig, handler, true);
					}
				}
			};
		});
	}

	jQuery.fn.extend({

		on: function (types, selector, data, fn, /*INTERNAL*/ one) {
			var origFn, type;

			// Types can be a map of types/handlers
			if (typeof types === "object") {
				// ( types-Object, selector, data )
				if (typeof selector !== "string") { // && selector != null
					// ( types-Object, data )
					data = data || selector;
					selector = undefined;
				}
				for (type in types) {
					this.on(type, selector, data, types[type], one);
				}
				return this;
			}

			if (data == null && fn == null) {
				// ( types, fn )
				fn = selector;
				data = selector = undefined;
			} else if (fn == null) {
				if (typeof selector === "string") {
					// ( types, selector, fn )
					fn = data;
					data = undefined;
				} else {
					// ( types, data, fn )
					fn = data;
					data = selector;
					selector = undefined;
				}
			}
			if (fn === false) {
				fn = returnFalse;
			} else if (!fn) {
				return this;
			}

			if (one === 1) {
				origFn = fn;
				fn = function (event) {
					// Can use an empty set, since event contains the info
					jQuery().off(event);
					return origFn.apply(this, arguments);
				};
				// Use same guid so caller can remove using origFn
				fn.guid = origFn.guid || (origFn.guid = jQuery.guid++);
			}
			return this.each(function () {
				jQuery.event.add(this, types, fn, data, selector);
			});
		},
		one: function (types, selector, data, fn) {
			return this.on(types, selector, data, fn, 1);
		},
		off: function (types, selector, fn) {
			if (types && types.preventDefault && types.handleObj) {
				// ( event )  dispatched jQuery.Event
				var handleObj = types.handleObj;
				jQuery(types.delegateTarget).off(
					handleObj.namespace ? handleObj.origType + "." + handleObj.namespace : handleObj.origType,
					handleObj.selector,
					handleObj.handler
				);
				return this;
			}
			if (typeof types === "object") {
				// ( types-object [, selector] )
				for (var type in types) {
					this.off(type, selector, types[type]);
				}
				return this;
			}
			if (selector === false || typeof selector === "function") {
				// ( types [, fn] )
				fn = selector;
				selector = undefined;
			}
			if (fn === false) {
				fn = returnFalse;
			}
			return this.each(function () {
				jQuery.event.remove(this, types, fn, selector);
			});
		},

		bind: function (types, data, fn) {
			return this.on(types, null, data, fn);
		},
		unbind: function (types, fn) {
			return this.off(types, null, fn);
		},

		live: function (types, data, fn) {
			jQuery(this.context).on(types, this.selector, data, fn);
			return this;
		},
		die: function (types, fn) {
			jQuery(this.context).off(types, this.selector || "**", fn);
			return this;
		},

		delegate: function (selector, types, data, fn) {
			return this.on(types, selector, data, fn);
		},
		undelegate: function (selector, types, fn) {
			// ( namespace ) or ( selector, types [, fn] )
			return arguments.length == 1 ? this.off(selector, "**") : this.off(types, selector, fn);
		},

		trigger: function (type, data) {
			return this.each(function () {
				jQuery.event.trigger(type, data, this);
			});
		},
		triggerHandler: function (type, data) {
			if (this[0]) {
				return jQuery.event.trigger(type, data, this[0], true);
			}
		},

		toggle: function (fn) {
			// Save reference to arguments for access in closure
			var args = arguments,
				guid = fn.guid || jQuery.guid++,
				i = 0,
				toggler = function (event) {
					// Figure out which function to execute
					var lastToggle = (jQuery._data(this, "lastToggle" + fn.guid) || 0) % i;
					jQuery._data(this, "lastToggle" + fn.guid, lastToggle + 1);

					// Make sure that clicks stop
					event.preventDefault();

					// and execute the function
					return args[lastToggle].apply(this, arguments) || false;
				};

			// link all the functions, so any of them can unbind this click handler
			toggler.guid = guid;
			while (i < args.length) {
				args[i++].guid = guid;
			}

			return this.click(toggler);
		},

		hover: function (fnOver, fnOut) {
			return this.mouseenter(fnOver).mouseleave(fnOut || fnOver);
		}
	});

jQuery.each( ("blur focus focusin focusout load resize scroll unload click dblclick " +
		"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave " +
	"change select submit keydown keypress keyup error contextmenu").split(" "), function( i, name ) {

			// Handle event binding
			jQuery.fn[ name ] = function( data, fn ) {
		if ( fn == null ) {
			fn = data;
			data = null;
		}

				return arguments.length > 0 ?
					this.on( name, null, data, fn ) :
					this.trigger( name );
			};
		} );


	/*!
 * Sizzle CSS Selector Engine
 *  Copyright 2011, The Dojo Foundation
 *  Released under the MIT, BSD, and GPL Licenses.
 *  More information: http://sizzlejs.com/
 */
	(function () {

		var chunker = /((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,
			expando = "sizcache" + (Math.random() + '').replace('.', ''),
			done = 0,
			toString = Object.prototype.toString,
			hasDuplicate = false,
			baseHasDuplicate = true,
			rBackslash = /\\/g,
			rReturn = /\r\n/g,
			rNonWord = /\W/;

// Here we check if the JavaScript engine is using some sort of
// optimization where it does not always call our comparision
// function. If that is the case, discard the hasDuplicate value.
//   Thus far that includes Google Chrome.
		[0, 0].sort(function () {
			baseHasDuplicate = false;
			return 0;
		});

		var Sizzle = function (selector, context, results, seed) {
			results = results || [];
			context = context || document;

			var origContext = context;

			if (context.nodeType !== 1 && context.nodeType !== 9) {
				return [];
			}

			if (!selector || typeof selector !== "string") {
				return results;
			}

			var m, set, checkSet, extra, ret, cur, pop, i,
				prune = true,
				contextXML = Sizzle.isXML(context),
				parts = [],
				soFar = selector;

			// Reset the position of the chunker regexp (start from head)
			do {
				chunker.exec("");
				m = chunker.exec(soFar);

				if (m) {
					soFar = m[3];

					parts.push(m[1]);

					if (m[2]) {
						extra = m[3];
						break;
					}
				}
			} while (m);

			if (parts.length > 1 && origPOS.exec(selector)) {

				if (parts.length === 2 && Expr.relative[parts[0]]) {
					set = posProcess(parts[0] + parts[1], context, seed);

				} else {
					set = Expr.relative[parts[0]] ?
						[context] :
						Sizzle(parts.shift(), context);

					while (parts.length) {
						selector = parts.shift();

						if (Expr.relative[selector]) {
							selector += parts.shift();
						}

						set = posProcess(selector, set, seed);
					}
				}

			} else {
				// Take a shortcut and set the context if the root selector is an ID
				// (but not if it'll be faster if the inner selector is an ID)
				if (!seed && parts.length > 1 && context.nodeType === 9 && !contextXML &&
					Expr.match.ID.test(parts[0]) && !Expr.match.ID.test(parts[parts.length - 1])) {

					ret = Sizzle.find(parts.shift(), context, contextXML);
					context = ret.expr ?
						Sizzle.filter(ret.expr, ret.set)[0] :
						ret.set[0];
				}

				if (context) {
					ret = seed ?
						{expr: parts.pop(), set: makeArray(seed)} :
						Sizzle.find(parts.pop(), parts.length === 1 && (parts[0] === "~" || parts[0] === "+") && context.parentNode ? context.parentNode : context, contextXML);

					set = ret.expr ?
						Sizzle.filter(ret.expr, ret.set) :
						ret.set;

					if (parts.length > 0) {
						checkSet = makeArray(set);

					} else {
						prune = false;
					}

					while (parts.length) {
						cur = parts.pop();
						pop = cur;

						if (!Expr.relative[cur]) {
							cur = "";
						} else {
							pop = parts.pop();
						}

						if (pop == null) {
							pop = context;
						}

						Expr.relative[cur](checkSet, pop, contextXML);
					}

				} else {
					checkSet = parts = [];
				}
			}

			if (!checkSet) {
				checkSet = set;
			}

			if (!checkSet) {
				Sizzle.error(cur || selector);
			}

			if (toString.call(checkSet) === "[object Array]") {
				if (!prune) {
					results.push.apply(results, checkSet);

				} else if (context && context.nodeType === 1) {
					for (i = 0; checkSet[i] != null; i++) {
						if (checkSet[i] && (checkSet[i] === true || checkSet[i].nodeType === 1 && Sizzle.contains(context, checkSet[i]))) {
							results.push(set[i]);
						}
					}

				} else {
					for (i = 0; checkSet[i] != null; i++) {
						if (checkSet[i] && checkSet[i].nodeType === 1) {
							results.push(set[i]);
						}
					}
				}

			} else {
				makeArray(checkSet, results);
			}

			if (extra) {
				Sizzle(extra, origContext, results, seed);
				Sizzle.uniqueSort(results);
			}

			return results;
		};

		Sizzle.uniqueSort = function (results) {
			if (sortOrder) {
				hasDuplicate = baseHasDuplicate;
				results.sort(sortOrder);

				if (hasDuplicate) {
					for (var i = 1; i < results.length; i++) {
						if (results[i] === results[i - 1]) {
							results.splice(i--, 1);
						}
					}
				}
			}

			return results;
		};

		Sizzle.matches = function (expr, set) {
			return Sizzle(expr, null, null, set);
		};

		Sizzle.matchesSelector = function (node, expr) {
			return Sizzle(expr, null, null, [node]).length > 0;
		};

		Sizzle.find = function (expr, context, isXML) {
			var set, i, len, match, type, left;

			if (!expr) {
				return [];
			}

			for (i = 0, len = Expr.order.length; i < len; i++) {
				type = Expr.order[i];

				if ((match = Expr.leftMatch[type].exec(expr))) {
					left = match[1];
					match.splice(1, 1);

					if (left.substr(left.length - 1) !== "\\") {
						match[1] = (match[1] || "").replace(rBackslash, "");
						set = Expr.find[type](match, context, isXML);

						if (set != null) {
							expr = expr.replace(Expr.match[type], "");
							break;
						}
					}
				}
			}

			if (!set) {
				set = typeof context.getElementsByTagName !== "undefined" ?
					context.getElementsByTagName("*") :
					[];
			}

			return {set: set, expr: expr};
		};

		Sizzle.filter = function (expr, set, inplace, not) {
			var match, anyFound,
				type, found, item, filter, left,
				i, pass,
				old = expr,
				result = [],
				curLoop = set,
				isXMLFilter = set && set[0] && Sizzle.isXML(set[0]);

			while (expr && set.length) {
				for (type in Expr.filter) {
					if ((match = Expr.leftMatch[type].exec(expr)) != null && match[2]) {
						filter = Expr.filter[type];
						left = match[1];

						anyFound = false;

						match.splice(1, 1);

						if (left.substr(left.length - 1) === "\\") {
							continue;
						}

						if (curLoop === result) {
							result = [];
						}

						if (Expr.preFilter[type]) {
							match = Expr.preFilter[type](match, curLoop, inplace, result, not, isXMLFilter);

							if (!match) {
								anyFound = found = true;

							} else if (match === true) {
								continue;
							}
						}

						if (match) {
							for (i = 0; (item = curLoop[i]) != null; i++) {
								if (item) {
									found = filter(item, match, i, curLoop);
									pass = not ^ found;

									if (inplace && found != null) {
										if (pass) {
											anyFound = true;

										} else {
											curLoop[i] = false;
										}

									} else if (pass) {
										result.push(item);
										anyFound = true;
									}
								}
							}
						}

						if (found !== undefined) {
							if (!inplace) {
								curLoop = result;
							}

							expr = expr.replace(Expr.match[type], "");

							if (!anyFound) {
								return [];
							}

							break;
						}
					}
				}

				// Improper expression
				if (expr === old) {
					if (anyFound == null) {
						Sizzle.error(expr);

					} else {
						break;
					}
				}

				old = expr;
			}

			return curLoop;
		};

		Sizzle.error = function (msg) {
			throw new Error("Syntax error, unrecognized expression: " + msg);
		};

		/**
		 * Utility function for retreiving the text value of an array of DOM nodes
		 * @param {Array|Element} elem
		 */
		var getText = Sizzle.getText = function (elem) {
			var i, node,
				nodeType = elem.nodeType,
				ret = "";

			if (nodeType) {
				if (nodeType === 1 || nodeType === 9 || nodeType === 11) {
					// Use textContent || innerText for elements
					if (typeof elem.textContent === 'string') {
						return elem.textContent;
					} else if (typeof elem.innerText === 'string') {
						// Replace IE's carriage returns
						return elem.innerText.replace(rReturn, '');
					} else {
						// Traverse it's children
						for (elem = elem.firstChild; elem; elem = elem.nextSibling) {
							ret += getText(elem);
						}
					}
				} else if (nodeType === 3 || nodeType === 4) {
					return elem.nodeValue;
				}
			} else {

				// If no nodeType, this is expected to be an array
				for (i = 0; (node = elem[i]); i++) {
					// Do not traverse comment nodes
					if (node.nodeType !== 8) {
						ret += getText(node);
					}
				}
			}
			return ret;
		};

		var Expr = Sizzle.selectors = {
			order: ["ID", "NAME", "TAG"],

			match: {
				ID: /#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,
				CLASS: /\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,
				NAME: /\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,
				ATTR: /\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,
				TAG: /^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,
				CHILD: /:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,
				POS: /:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,
				PSEUDO: /:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/
			},

			leftMatch: {},

			attrMap: {
				"class": "className",
				"for": "htmlFor"
			},

			attrHandle: {
				href: function (elem) {
					return elem.getAttribute("href");
				},
				type: function (elem) {
					return elem.getAttribute("type");
				}
			},

			relative: {
				"+": function (checkSet, part) {
					var isPartStr = typeof part === "string",
						isTag = isPartStr && !rNonWord.test(part),
						isPartStrNotTag = isPartStr && !isTag;

					if (isTag) {
						part = part.toLowerCase();
					}

					for (var i = 0, l = checkSet.length, elem; i < l; i++) {
						if ((elem = checkSet[i])) {
							while ((elem = elem.previousSibling) && elem.nodeType !== 1) {
							}

							checkSet[i] = isPartStrNotTag || elem && elem.nodeName.toLowerCase() === part ?
								elem || false :
								elem === part;
						}
					}

					if (isPartStrNotTag) {
						Sizzle.filter(part, checkSet, true);
					}
				},

				">": function (checkSet, part) {
					var elem,
						isPartStr = typeof part === "string",
						i = 0,
						l = checkSet.length;

					if (isPartStr && !rNonWord.test(part)) {
						part = part.toLowerCase();

						for (; i < l; i++) {
							elem = checkSet[i];

							if (elem) {
								var parent = elem.parentNode;
								checkSet[i] = parent.nodeName.toLowerCase() === part ? parent : false;
							}
						}

					} else {
						for (; i < l; i++) {
							elem = checkSet[i];

							if (elem) {
								checkSet[i] = isPartStr ?
									elem.parentNode :
									elem.parentNode === part;
							}
						}

						if (isPartStr) {
							Sizzle.filter(part, checkSet, true);
						}
					}
				},

				"": function (checkSet, part, isXML) {
					var nodeCheck,
						doneName = done++,
						checkFn = dirCheck;

					if (typeof part === "string" && !rNonWord.test(part)) {
						part = part.toLowerCase();
						nodeCheck = part;
						checkFn = dirNodeCheck;
					}

					checkFn("parentNode", part, doneName, checkSet, nodeCheck, isXML);
				},

				"~": function (checkSet, part, isXML) {
					var nodeCheck,
						doneName = done++,
						checkFn = dirCheck;

					if (typeof part === "string" && !rNonWord.test(part)) {
						part = part.toLowerCase();
						nodeCheck = part;
						checkFn = dirNodeCheck;
					}

					checkFn("previousSibling", part, doneName, checkSet, nodeCheck, isXML);
				}
			},

			find: {
				ID: function (match, context, isXML) {
					if (typeof context.getElementById !== "undefined" && !isXML) {
						var m = context.getElementById(match[1]);
						// Check parentNode to catch when Blackberry 4.6 returns
						// nodes that are no longer in the document #6963
						return m && m.parentNode ? [m] : [];
					}
				},

				NAME: function (match, context) {
					if (typeof context.getElementsByName !== "undefined") {
						var ret = [],
							results = context.getElementsByName(match[1]);

						for (var i = 0, l = results.length; i < l; i++) {
							if (results[i].getAttribute("name") === match[1]) {
								ret.push(results[i]);
							}
						}

						return ret.length === 0 ? null : ret;
					}
				},

				TAG: function (match, context) {
					if (typeof context.getElementsByTagName !== "undefined") {
						return context.getElementsByTagName(match[1]);
					}
				}
			},
			preFilter: {
				CLASS: function (match, curLoop, inplace, result, not, isXML) {
					match = " " + match[1].replace(rBackslash, "") + " ";

					if (isXML) {
						return match;
					}

					for (var i = 0, elem; (elem = curLoop[i]) != null; i++) {
						if (elem) {
							if (not ^ (elem.className && (" " + elem.className + " ").replace(/[\t\n\r]/g, " ").indexOf(match) >= 0)) {
								if (!inplace) {
									result.push(elem);
								}

							} else if (inplace) {
								curLoop[i] = false;
							}
						}
					}

					return false;
				},

				ID: function (match) {
					return match[1].replace(rBackslash, "");
				},

				TAG: function (match, curLoop) {
					return match[1].replace(rBackslash, "").toLowerCase();
				},

				CHILD: function (match) {
					if (match[1] === "nth") {
						if (!match[2]) {
							Sizzle.error(match[0]);
						}

						match[2] = match[2].replace(/^\+|\s*/g, '');

						// parse equations like 'even', 'odd', '5', '2n', '3n+2', '4n-1', '-n+6'
						var test = /(-?)(\d*)(?:n([+\-]?\d*))?/.exec(
							match[2] === "even" && "2n" || match[2] === "odd" && "2n+1" ||
							!/\D/.test(match[2]) && "0n+" + match[2] || match[2]);

						// calculate the numbers (first)n+(last) including if they are negative
						match[2] = (test[1] + (test[2] || 1)) - 0;
						match[3] = test[3] - 0;
					} else if (match[2]) {
						Sizzle.error(match[0]);
					}

					// TODO: Move to normal caching system
					match[0] = done++;

					return match;
				},

				ATTR: function (match, curLoop, inplace, result, not, isXML) {
					var name = match[1] = match[1].replace(rBackslash, "");

					if (!isXML && Expr.attrMap[name]) {
						match[1] = Expr.attrMap[name];
					}

					// Handle if an un-quoted value was used
					match[4] = (match[4] || match[5] || "").replace(rBackslash, "");

					if (match[2] === "~=") {
						match[4] = " " + match[4] + " ";
					}

					return match;
				},

				PSEUDO: function (match, curLoop, inplace, result, not) {
					if (match[1] === "not") {
						// If we're dealing with a complex expression, or a simple one
						if ((chunker.exec(match[3]) || "").length > 1 || /^\w/.test(match[3])) {
							match[3] = Sizzle(match[3], null, null, curLoop);

						} else {
							var ret = Sizzle.filter(match[3], curLoop, inplace, true ^ not);

							if (!inplace) {
								result.push.apply(result, ret);
							}

							return false;
						}

					} else if (Expr.match.POS.test(match[0]) || Expr.match.CHILD.test(match[0])) {
						return true;
					}

					return match;
				},

				POS: function (match) {
					match.unshift(true);

					return match;
				}
			},

			filters: {
				enabled: function (elem) {
					return elem.disabled === false && elem.type !== "hidden";
				},

				disabled: function (elem) {
					return elem.disabled === true;
				},

				checked: function (elem) {
					return elem.checked === true;
				},

				selected: function (elem) {
					// Accessing this property makes selected-by-default
					// options in Safari work properly
					if (elem.parentNode) {
						elem.parentNode.selectedIndex;
					}

					return elem.selected === true;
				},

				parent: function (elem) {
					return !!elem.firstChild;
				},

				empty: function (elem) {
					return !elem.firstChild;
				},

				has: function (elem, i, match) {
					return !!Sizzle(match[3], elem).length;
				},

				header: function (elem) {
					return (/h\d/i).test(elem.nodeName);
				},

				text: function (elem) {
					var attr = elem.getAttribute("type"), type = elem.type;
					// IE6 and 7 will map elem.type to 'text' for new HTML5 types (search, etc)
					// use getAttribute instead to test this case
					return elem.nodeName.toLowerCase() === "input" && "text" === type && (attr === type || attr === null);
				},

				radio: function (elem) {
					return elem.nodeName.toLowerCase() === "input" && "radio" === elem.type;
				},

				checkbox: function (elem) {
					return elem.nodeName.toLowerCase() === "input" && "checkbox" === elem.type;
				},

				file: function (elem) {
					return elem.nodeName.toLowerCase() === "input" && "file" === elem.type;
				},

				password: function (elem) {
					return elem.nodeName.toLowerCase() === "input" && "password" === elem.type;
				},

				submit: function (elem) {
					var name = elem.nodeName.toLowerCase();
					return (name === "input" || name === "button") && "submit" === elem.type;
				},

				image: function (elem) {
					return elem.nodeName.toLowerCase() === "input" && "image" === elem.type;
				},

				reset: function (elem) {
					var name = elem.nodeName.toLowerCase();
					return (name === "input" || name === "button") && "reset" === elem.type;
				},

				button: function (elem) {
					var name = elem.nodeName.toLowerCase();
					return name === "input" && "button" === elem.type || name === "button";
				},

				input: function (elem) {
					return (/input|select|textarea|button/i).test(elem.nodeName);
				},

				focus: function (elem) {
					return elem === elem.ownerDocument.activeElement;
				}
			},
			setFilters: {
				first: function (elem, i) {
					return i === 0;
				},

				last: function (elem, i, match, array) {
					return i === array.length - 1;
				},

				even: function (elem, i) {
					return i % 2 === 0;
				},

				odd: function (elem, i) {
					return i % 2 === 1;
				},

				lt: function (elem, i, match) {
					return i < match[3] - 0;
				},

				gt: function (elem, i, match) {
					return i > match[3] - 0;
				},

				nth: function (elem, i, match) {
					return match[3] - 0 === i;
				},

				eq: function (elem, i, match) {
					return match[3] - 0 === i;
				}
			},
			filter: {
				PSEUDO: function (elem, match, i, array) {
					var name = match[1],
						filter = Expr.filters[name];

					if (filter) {
						return filter(elem, i, match, array);

					} else if (name === "contains") {
						return (elem.textContent || elem.innerText || getText([elem]) || "").indexOf(match[3]) >= 0;

					} else if (name === "not") {
						var not = match[3];

						for (var j = 0, l = not.length; j < l; j++) {
							if (not[j] === elem) {
								return false;
							}
						}

						return true;

					} else {
						Sizzle.error(name);
					}
				},

				CHILD: function (elem, match) {
					var first, last,
						doneName, parent, cache,
						count, diff,
						type = match[1],
						node = elem;

					switch (type) {
						case "only":
						case "first":
							while ((node = node.previousSibling)) {
								if (node.nodeType === 1) {
									return false;
								}
							}

							if (type === "first") {
								return true;
							}

							node = elem;

						/* falls through */
						case "last":
							while ((node = node.nextSibling)) {
								if (node.nodeType === 1) {
									return false;
								}
							}

							return true;

						case "nth":
							first = match[2];
							last = match[3];

							if (first === 1 && last === 0) {
								return true;
							}

							doneName = match[0];
							parent = elem.parentNode;

							if (parent && (parent[expando] !== doneName || !elem.nodeIndex)) {
								count = 0;

								for (node = parent.firstChild; node; node = node.nextSibling) {
									if (node.nodeType === 1) {
										node.nodeIndex = ++count;
									}
								}

								parent[expando] = doneName;
							}

							diff = elem.nodeIndex - last;

							if (first === 0) {
								return diff === 0;

							} else {
								return (diff % first === 0 && diff / first >= 0);
							}
					}
				},

				ID: function (elem, match) {
					return elem.nodeType === 1 && elem.getAttribute("id") === match;
				},

				TAG: function (elem, match) {
					return (match === "*" && elem.nodeType === 1) || !!elem.nodeName && elem.nodeName.toLowerCase() === match;
				},

				CLASS: function (elem, match) {
					return (" " + (elem.className || elem.getAttribute("class")) + " ")
						.indexOf(match) > -1;
				},

				ATTR: function (elem, match) {
					var name = match[1],
						result = Sizzle.attr ?
							Sizzle.attr(elem, name) :
							Expr.attrHandle[name] ?
								Expr.attrHandle[name](elem) :
								elem[name] != null ?
									elem[name] :
									elem.getAttribute(name),
						value = result + "",
						type = match[2],
						check = match[4];

					return result == null ?
						type === "!=" :
						!type && Sizzle.attr ?
							result != null :
							type === "=" ?
								value === check :
								type === "*=" ?
									value.indexOf(check) >= 0 :
									type === "~=" ?
										(" " + value + " ").indexOf(check) >= 0 :
										!check ?
											value && result !== false :
											type === "!=" ?
												value !== check :
												type === "^=" ?
													value.indexOf(check) === 0 :
													type === "$=" ?
														value.substr(value.length - check.length) === check :
														type === "|=" ?
															value === check || value.substr(0, check.length + 1) === check + "-" :
															false;
				},

				POS: function (elem, match, i, array) {
					var name = match[2],
						filter = Expr.setFilters[name];

					if (filter) {
						return filter(elem, i, match, array);
					}
				}
			}
		};

		var origPOS = Expr.match.POS,
			fescape = function (all, num) {
				return "\\" + (num - 0 + 1);
			};

		for (var type in Expr.match) {
			Expr.match[type] = new RegExp(Expr.match[type].source + (/(?![^\[]*\])(?![^\(]*\))/.source));
			Expr.leftMatch[type] = new RegExp(/(^(?:.|\r|\n)*?)/.source + Expr.match[type].source.replace(/\\(\d+)/g, fescape));
		}
// Expose origPOS
// "global" as in regardless of relation to brackets/parens
		Expr.match.globalPOS = origPOS;

		var makeArray = function (array, results) {
			array = Array.prototype.slice.call(array, 0);

			if (results) {
				results.push.apply(results, array);
				return results;
			}

			return array;
		};

// Perform a simple check to determine if the browser is capable of
// converting a NodeList to an array using builtin methods.
// Also verifies that the returned array holds DOM nodes
// (which is not the case in the Blackberry browser)
		try {
			Array.prototype.slice.call(document.documentElement.childNodes, 0)[0].nodeType;

// Provide a fallback method if it does not work
		} catch (e) {
			makeArray = function (array, results) {
				var i = 0,
					ret = results || [];

				if (toString.call(array) === "[object Array]") {
					Array.prototype.push.apply(ret, array);

				} else {
					if (typeof array.length === "number") {
						for (var l = array.length; i < l; i++) {
							ret.push(array[i]);
						}

					} else {
						for (; array[i]; i++) {
							ret.push(array[i]);
						}
					}
				}

				return ret;
			};
		}

		var sortOrder, siblingCheck;

		if (document.documentElement.compareDocumentPosition) {
			sortOrder = function (a, b) {
				if (a === b) {
					hasDuplicate = true;
					return 0;
				}

				if (!a.compareDocumentPosition || !b.compareDocumentPosition) {
					return a.compareDocumentPosition ? -1 : 1;
				}

				return a.compareDocumentPosition(b) & 4 ? -1 : 1;
			};

		} else {
			sortOrder = function (a, b) {
				// The nodes are identical, we can exit early
				if (a === b) {
					hasDuplicate = true;
					return 0;

					// Fallback to using sourceIndex (in IE) if it's available on both nodes
				} else if (a.sourceIndex && b.sourceIndex) {
					return a.sourceIndex - b.sourceIndex;
				}

				var al, bl,
					ap = [],
					bp = [],
					aup = a.parentNode,
					bup = b.parentNode,
					cur = aup;

				// If the nodes are siblings (or identical) we can do a quick check
				if (aup === bup) {
					return siblingCheck(a, b);

					// If no parents were found then the nodes are disconnected
				} else if (!aup) {
					return -1;

				} else if (!bup) {
					return 1;
				}

				// Otherwise they're somewhere else in the tree so we need
				// to build up a full list of the parentNodes for comparison
				while (cur) {
					ap.unshift(cur);
					cur = cur.parentNode;
				}

				cur = bup;

				while (cur) {
					bp.unshift(cur);
					cur = cur.parentNode;
				}

				al = ap.length;
				bl = bp.length;

				// Start walking down the tree looking for a discrepancy
				for (var i = 0; i < al && i < bl; i++) {
					if (ap[i] !== bp[i]) {
						return siblingCheck(ap[i], bp[i]);
					}
				}

				// We ended someplace up the tree so do a sibling check
				return i === al ?
					siblingCheck(a, bp[i], -1) :
					siblingCheck(ap[i], b, 1);
			};

			siblingCheck = function (a, b, ret) {
				if (a === b) {
					return ret;
				}

				var cur = a.nextSibling;

				while (cur) {
					if (cur === b) {
						return -1;
					}

					cur = cur.nextSibling;
				}

				return 1;
			};
		}

// Check to see if the browser returns elements by name when
// querying by getElementById (and provide a workaround)
		(function () {
			// We're going to inject a fake input element with a specified name
			var form = document.createElement("div"),
				id = "script" + (new Date()).getTime(),
				root = document.documentElement;

			form.innerHTML = "<a name='" + id + "'/>";

			// Inject it into the root element, check its status, and remove it quickly
			root.insertBefore(form, root.firstChild);

			// The workaround has to do additional checks after a getElementById
			// Which slows things down for other browsers (hence the branching)
			if (document.getElementById(id)) {
				Expr.find.ID = function (match, context, isXML) {
					if (typeof context.getElementById !== "undefined" && !isXML) {
						var m = context.getElementById(match[1]);

						return m ?
							m.id === match[1] || typeof m.getAttributeNode !== "undefined" && m.getAttributeNode("id").nodeValue === match[1] ?
								[m] :
								undefined :
							[];
					}
				};

				Expr.filter.ID = function (elem, match) {
					var node = typeof elem.getAttributeNode !== "undefined" && elem.getAttributeNode("id");

					return elem.nodeType === 1 && node && node.nodeValue === match;
				};
			}

			root.removeChild(form);

			// release memory in IE
			root = form = null;
		})();

		(function () {
			// Check to see if the browser returns only elements
			// when doing getElementsByTagName("*")

			// Create a fake element
			var div = document.createElement("div");
			div.appendChild(document.createComment(""));

			// Make sure no comments are found
			if (div.getElementsByTagName("*").length > 0) {
				Expr.find.TAG = function (match, context) {
					var results = context.getElementsByTagName(match[1]);

					// Filter out possible comments
					if (match[1] === "*") {
						var tmp = [];

						for (var i = 0; results[i]; i++) {
							if (results[i].nodeType === 1) {
								tmp.push(results[i]);
							}
						}

						results = tmp;
					}

					return results;
				};
			}

			// Check to see if an attribute returns normalized href attributes
			div.innerHTML = "<a href='#'></a>";

			if (div.firstChild && typeof div.firstChild.getAttribute !== "undefined" &&
				div.firstChild.getAttribute("href") !== "#") {

				Expr.attrHandle.href = function (elem) {
					return elem.getAttribute("href", 2);
				};
			}

			// release memory in IE
			div = null;
		})();

		if (document.querySelectorAll) {
			(function () {
				var oldSizzle = Sizzle,
					div = document.createElement("div"),
					id = "__sizzle__";

				div.innerHTML = "<p class='TEST'></p>";

				// Safari can't handle uppercase or unicode characters when
				// in quirks mode.
				if (div.querySelectorAll && div.querySelectorAll(".TEST").length === 0) {
					return;
				}

				Sizzle = function (query, context, extra, seed) {
					context = context || document;

					// Only use querySelectorAll on non-XML documents
					// (ID selectors don't work in non-HTML documents)
					if (!seed && !Sizzle.isXML(context)) {
						// See if we find a selector to speed up
						var match = /^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(query);

						if (match && (context.nodeType === 1 || context.nodeType === 9)) {
							// Speed-up: Sizzle("TAG")
							if (match[1]) {
								return makeArray(context.getElementsByTagName(query), extra);

								// Speed-up: Sizzle(".CLASS")
							} else if (match[2] && Expr.find.CLASS && context.getElementsByClassName) {
								return makeArray(context.getElementsByClassName(match[2]), extra);
							}
						}

						if (context.nodeType === 9) {
							// Speed-up: Sizzle("body")
							// The body element only exists once, optimize finding it
							if (query === "body" && context.body) {
								return makeArray([context.body], extra);

								// Speed-up: Sizzle("#ID")
							} else if (match && match[3]) {
								var elem = context.getElementById(match[3]);

								// Check parentNode to catch when Blackberry 4.6 returns
								// nodes that are no longer in the document #6963
								if (elem && elem.parentNode) {
									// Handle the case where IE and Opera return items
									// by name instead of ID
									if (elem.id === match[3]) {
										return makeArray([elem], extra);
									}

								} else {
									return makeArray([], extra);
								}
							}

							try {
								return makeArray(context.querySelectorAll(query), extra);
							} catch (qsaError) {
							}

							// qSA works strangely on Element-rooted queries
							// We can work around this by specifying an extra ID on the root
							// and working up from there (Thanks to Andrew Dupont for the technique)
							// IE 8 doesn't work on object elements
						} else if (context.nodeType === 1 && context.nodeName.toLowerCase() !== "object") {
							var oldContext = context,
								old = context.getAttribute("id"),
								nid = old || id,
								hasParent = context.parentNode,
								relativeHierarchySelector = /^\s*[+~]/.test(query);

							if (!old) {
								context.setAttribute("id", nid);
							} else {
								nid = nid.replace(/'/g, "\\$&");
							}
							if (relativeHierarchySelector && hasParent) {
								context = context.parentNode;
							}

							try {
								if (!relativeHierarchySelector || hasParent) {
									return makeArray(context.querySelectorAll("[id='" + nid + "'] " + query), extra);
								}

							} catch (pseudoError) {
							} finally {
								if (!old) {
									oldContext.removeAttribute("id");
								}
							}
						}
					}

					return oldSizzle(query, context, extra, seed);
				};

				for (var prop in oldSizzle) {
					Sizzle[prop] = oldSizzle[prop];
				}

				// release memory in IE
				div = null;
			})();
		}

		(function () {
			var html = document.documentElement,
				matches = html.matchesSelector || html.mozMatchesSelector || html.webkitMatchesSelector || html.msMatchesSelector;

			if (matches) {
				// Check to see if it's possible to do matchesSelector
				// on a disconnected node (IE 9 fails this)
				var disconnectedMatch = !matches.call(document.createElement("div"), "div"),
					pseudoWorks = false;

				try {
					// This should fail with an exception
					// Gecko does not error, returns false instead
					matches.call(document.documentElement, "[test!='']:sizzle");

				} catch (pseudoError) {
					pseudoWorks = true;
				}

				Sizzle.matchesSelector = function (node, expr) {
					// Make sure that attribute selectors are quoted
					expr = expr.replace(/\=\s*([^'"\]]*)\s*\]/g, "='$1']");

					if (!Sizzle.isXML(node)) {
						try {
							if (pseudoWorks || !Expr.match.PSEUDO.test(expr) && !/!=/.test(expr)) {
								var ret = matches.call(node, expr);

								// IE 9's matchesSelector returns false on disconnected nodes
								if (ret || !disconnectedMatch ||
									// As well, disconnected nodes are said to be in a document
									// fragment in IE 9, so check for that
									node.document && node.document.nodeType !== 11) {
									return ret;
								}
							}
						} catch (e) {
						}
					}

					return Sizzle(expr, null, null, [node]).length > 0;
				};
			}
		})();

		(function () {
			var div = document.createElement("div");

			div.innerHTML = "<div class='test e'></div><div class='test'></div>";

			// Opera can't find a second classname (in 9.6)
			// Also, make sure that getElementsByClassName actually exists
			if (!div.getElementsByClassName || div.getElementsByClassName("e").length === 0) {
				return;
			}

			// Safari caches class attributes, doesn't catch changes (in 3.2)
			div.lastChild.className = "e";

			if (div.getElementsByClassName("e").length === 1) {
				return;
			}

			Expr.order.splice(1, 0, "CLASS");
			Expr.find.CLASS = function (match, context, isXML) {
				if (typeof context.getElementsByClassName !== "undefined" && !isXML) {
					return context.getElementsByClassName(match[1]);
				}
			};

			// release memory in IE
			div = null;
		})();

		function dirNodeCheck(dir, cur, doneName, checkSet, nodeCheck, isXML) {
			for (var i = 0, l = checkSet.length; i < l; i++) {
				var elem = checkSet[i];

				if (elem) {
					var match = false;

					elem = elem[dir];

					while (elem) {
						if (elem[expando] === doneName) {
							match = checkSet[elem.sizset];
							break;
						}

						if (elem.nodeType === 1 && !isXML) {
							elem[expando] = doneName;
							elem.sizset = i;
						}

						if (elem.nodeName.toLowerCase() === cur) {
							match = elem;
							break;
						}

						elem = elem[dir];
					}

					checkSet[i] = match;
				}
			}
		}

		function dirCheck(dir, cur, doneName, checkSet, nodeCheck, isXML) {
			for (var i = 0, l = checkSet.length; i < l; i++) {
				var elem = checkSet[i];

				if (elem) {
					var match = false;

					elem = elem[dir];

					while (elem) {
						if (elem[expando] === doneName) {
							match = checkSet[elem.sizset];
							break;
						}

						if (elem.nodeType === 1) {
							if (!isXML) {
								elem[expando] = doneName;
								elem.sizset = i;
							}

							if (typeof cur !== "string") {
								if (elem === cur) {
									match = true;
									break;
								}

							} else if (Sizzle.filter(cur, [elem]).length > 0) {
								match = elem;
								break;
							}
						}

						elem = elem[dir];
					}

					checkSet[i] = match;
				}
			}
		}

		if (document.documentElement.contains) {
			Sizzle.contains = function (a, b) {
				return a !== b && (a.contains ? a.contains(b) : true);
			};

		} else if (document.documentElement.compareDocumentPosition) {
			Sizzle.contains = function (a, b) {
				return !!(a.compareDocumentPosition(b) & 16);
			};

		} else {
			Sizzle.contains = function () {
				return false;
			};
		}

		Sizzle.isXML = function (elem) {
			// documentElement is verified for cases where it doesn't yet exist
			// (such as loading iframes in IE - #4833)
			var documentElement = (elem ? elem.ownerDocument || elem : 0).documentElement;

			return documentElement ? documentElement.nodeName !== "HTML" : false;
		};

		var posProcess = function (selector, context, seed) {
			var match,
				tmpSet = [],
				later = "",
				root = context.nodeType ? [context] : context;

			// Position selectors must be done after the filter
			// And so must :not(positional) so we move all PSEUDOs to the end
			while ((match = Expr.match.PSEUDO.exec(selector))) {
				later += match[0];
				selector = selector.replace(Expr.match.PSEUDO, "");
			}

			selector = Expr.relative[selector] ? selector + "*" : selector;

			for (var i = 0, l = root.length; i < l; i++) {
				Sizzle(selector, root[i], tmpSet, seed);
			}

			return Sizzle.filter(later, tmpSet);
		};

// EXPOSE
// Override sizzle attribute retrieval
		Sizzle.attr = jQuery.attr;
		Sizzle.selectors.attrMap = {};
		jQuery.find = Sizzle;
		jQuery.expr = Sizzle.selectors;
		jQuery.expr[":"] = jQuery.expr.filters;
		jQuery.unique = Sizzle.uniqueSort;
		jQuery.text = Sizzle.getText;
		jQuery.isXMLDoc = Sizzle.isXML;
		jQuery.contains = Sizzle.contains;


	})();


	var runtil = /Until$/,
		rparentsprev = /^(?:parents|prevUntil|prevAll)/,
		// Note: This RegExp should be improved, or likely pulled from Sizzle
		rmultiselector = /,/,
		isSimple = /^.[^:#\[\.,]*$/,
		slice = Array.prototype.slice,
		POS = jQuery.expr.match.globalPOS,
		// methods guaranteed to produce a unique set when starting from a unique set
		guaranteedUnique = {
			children: true,
			contents: true,
			next: true,
			prev: true
		};

	jQuery.fn.extend({
		find: function (selector) {
			var self = this,
				i, l;

			if (typeof selector !== "string") {
				return jQuery(selector).filter(function () {
					for (i = 0, l = self.length; i < l; i++) {
						if (jQuery.contains(self[i], this)) {
							return true;
						}
					}
				});
			}

			var ret = this.pushStack("", "find", selector),
				length, n, r;

			for (i = 0, l = this.length; i < l; i++) {
				length = ret.length;
				jQuery.find(selector, this[i], ret);

				if (i > 0) {
					// Make sure that the results are unique
					for (n = length; n < ret.length; n++) {
						for (r = 0; r < length; r++) {
							if (ret[r] === ret[n]) {
								ret.splice(n--, 1);
								break;
							}
						}
					}
				}
			}

			return ret;
		},

		has: function (target) {
			var targets = jQuery(target);
			return this.filter(function () {
				for (var i = 0, l = targets.length; i < l; i++) {
					if (jQuery.contains(this, targets[i])) {
						return true;
					}
				}
			});
		},

		not: function (selector) {
			return this.pushStack(winnow(this, selector, false), "not", selector);
		},

		filter: function (selector) {
			return this.pushStack(winnow(this, selector, true), "filter", selector);
		},

		is: function (selector) {
			return !!selector && (
				typeof selector === "string" ?
					// If this is a positional selector, check membership in the returned set
					// so $("p:first").is("p:last") won't return true for a doc with two "p".
					POS.test(selector) ?
						jQuery(selector, this.context).index(this[0]) >= 0 :
						jQuery.filter(selector, this).length > 0 :
					this.filter(selector).length > 0);
		},

		closest: function (selectors, context) {
			var ret = [], i, l, cur = this[0];

			// Array (deprecated as of jQuery 1.7)
			if (jQuery.isArray(selectors)) {
				var level = 1;

				while (cur && cur.ownerDocument && cur !== context) {
					for (i = 0; i < selectors.length; i++) {

						if (jQuery(cur).is(selectors[i])) {
							ret.push({selector: selectors[i], elem: cur, level: level});
						}
					}

					cur = cur.parentNode;
					level++;
				}

				return ret;
			}

			// String
			var pos = POS.test(selectors) || typeof selectors !== "string" ?
				jQuery(selectors, context || this.context) :
				0;

			for (i = 0, l = this.length; i < l; i++) {
				cur = this[i];

				while (cur) {
					if (pos ? pos.index(cur) > -1 : jQuery.find.matchesSelector(cur, selectors)) {
						ret.push(cur);
						break;

					} else {
						cur = cur.parentNode;
						if (!cur || !cur.ownerDocument || cur === context || cur.nodeType === 11) {
							break;
						}
					}
				}
			}

			ret = ret.length > 1 ? jQuery.unique(ret) : ret;

			return this.pushStack(ret, "closest", selectors);
		},

		// Determine the position of an element within
		// the matched set of elements
		index: function (elem) {

			// No argument, return index in parent
			if (!elem) {
				return (this[0] && this[0].parentNode) ? this.prevAll().length : -1;
			}

			// index in selector
			if (typeof elem === "string") {
				return jQuery.inArray(this[0], jQuery(elem));
			}

			// Locate the position of the desired element
			return jQuery.inArray(
				// If it receives a jQuery object, the first element is used
				elem.jquery ? elem[0] : elem, this);
		},

		add: function (selector, context) {
			var set = typeof selector === "string" ?
				jQuery(selector, context) :
				jQuery.makeArray(selector && selector.nodeType ? [selector] : selector),
				all = jQuery.merge(this.get(), set);

			return this.pushStack(isDisconnected(set[0]) || isDisconnected(all[0]) ?
				all :
				jQuery.unique(all));
		},

		andSelf: function () {
			return this.add(this.prevObject);
		}
	});

// A painfully simple check to see if an element is disconnected
// from a document (should be improved, where feasible).
	function isDisconnected(node) {
		return !node || !node.parentNode || node.parentNode.nodeType === 11;
	}

	jQuery.each({
		parent: function (elem) {
			var parent = elem.parentNode;
			return parent && parent.nodeType !== 11 ? parent : null;
		},
		parents: function (elem) {
			return jQuery.dir(elem, "parentNode");
		},
		parentsUntil: function (elem, i, until) {
			return jQuery.dir(elem, "parentNode", until);
		},
		next: function (elem) {
			return jQuery.nth(elem, 2, "nextSibling");
		},
		prev: function (elem) {
			return jQuery.nth(elem, 2, "previousSibling");
		},
		nextAll: function (elem) {
			return jQuery.dir(elem, "nextSibling");
		},
		prevAll: function (elem) {
			return jQuery.dir(elem, "previousSibling");
		},
		nextUntil: function (elem, i, until) {
			return jQuery.dir(elem, "nextSibling", until);
		},
		prevUntil: function (elem, i, until) {
			return jQuery.dir(elem, "previousSibling", until);
		},
		siblings: function (elem) {
			return jQuery.sibling((elem.parentNode || {}).firstChild, elem);
		},
		children: function (elem) {
			return jQuery.sibling(elem.firstChild);
		},
		contents: function (elem) {
			return jQuery.nodeName(elem, "iframe") ?
				elem.contentDocument || elem.contentWindow.document :
				jQuery.makeArray(elem.childNodes);
		}
	}, function (name, fn) {
		jQuery.fn[name] = function (until, selector) {
			var ret = jQuery.map(this, fn, until);

			if (!runtil.test(name)) {
				selector = until;
			}

			if (selector && typeof selector === "string") {
				ret = jQuery.filter(selector, ret);
			}

			ret = this.length > 1 && !guaranteedUnique[name] ? jQuery.unique(ret) : ret;

			if ((this.length > 1 || rmultiselector.test(selector)) && rparentsprev.test(name)) {
				ret = ret.reverse();
			}

			return this.pushStack(ret, name, slice.call(arguments).join(","));
		};
	});

	jQuery.extend({
		filter: function (expr, elems, not) {
			if (not) {
				expr = ":not(" + expr + ")";
			}

			return elems.length === 1 ?
				jQuery.find.matchesSelector(elems[0], expr) ? [elems[0]] : [] :
				jQuery.find.matches(expr, elems);
		},

		dir: function (elem, dir, until) {
			var matched = [],
				cur = elem[dir];

			while (cur && cur.nodeType !== 9 && (until === undefined || cur.nodeType !== 1 || !jQuery(cur).is(until))) {
				if (cur.nodeType === 1) {
					matched.push(cur);
				}
				cur = cur[dir];
			}
			return matched;
		},

		nth: function (cur, result, dir, elem) {
			result = result || 1;
			var num = 0;

			for (; cur; cur = cur[dir]) {
				if (cur.nodeType === 1 && ++num === result) {
					break;
				}
			}

			return cur;
		},

		sibling: function (n, elem) {
			var r = [];

			for (; n; n = n.nextSibling) {
				if (n.nodeType === 1 && n !== elem) {
					r.push(n);
				}
			}

			return r;
		}
	});

// Implement the identical functionality for filter and not
	function winnow(elements, qualifier, keep) {

		// Can't pass null or undefined to indexOf in Firefox 4
		// Set to 0 to skip string check
		qualifier = qualifier || 0;

		if (jQuery.isFunction(qualifier)) {
			return jQuery.grep(elements, function (elem, i) {
				var retVal = !!qualifier.call(elem, i, elem);
				return retVal === keep;
			});

		} else if (qualifier.nodeType) {
			return jQuery.grep(elements, function (elem, i) {
				return (elem === qualifier) === keep;
			});

		} else if (typeof qualifier === "string") {
			var filtered = jQuery.grep(elements, function (elem) {
				return elem.nodeType === 1;
			});

			if (isSimple.test(qualifier)) {
				return jQuery.filter(qualifier, filtered, !keep);
			} else {
				qualifier = jQuery.filter(qualifier, filtered);
			}
		}

		return jQuery.grep(elements, function (elem, i) {
			return (jQuery.inArray(elem, qualifier) >= 0) === keep;
		});
	}


	function createSafeFragment(document) {
		var list = nodeNames.split("|"),
			safeFrag = document.createDocumentFragment();

		if (safeFrag.createElement) {
			while (list.length) {
				safeFrag.createElement(
					list.pop()
				);
			}
		}
		return safeFrag;
	}

	var nodeNames = "abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|" +
		"header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",
		rinlinejQuery = / jQuery\d+="(?:\d+|null)"/g,
		rleadingWhitespace = /^\s+/,
		rxhtmlTag = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,
		rtagName = /<([\w:]+)/,
		rtbody = /<tbody/i,
		rhtml = /<|&#?\w+;/,
		rnoInnerhtml = /<(?:script|style)/i,
		rnocache = /<(?:script|object|embed|option|style)/i,
		rnoshimcache = new RegExp("<(?:" + nodeNames + ")[\\s/>]", "i"),
		// checked="checked" or checked
		rchecked = /checked\s*(?:[^=]|=\s*.checked.)/i,
		rscriptType = /\/(java|ecma)script/i,
		rcleanScript = /^\s*<!(?:\[CDATA\[|\-\-)/,
		wrapMap = {
			option: [ 1, "<select multiple='multiple'>", "</select>" ],
			legend: [1, "<fieldset>", "</fieldset>"],
			thead: [1, "<table>", "</table>"],
			tr: [2, "<table><tbody>", "</tbody></table>"],
			td: [3, "<table><tbody><tr>", "</tr></tbody></table>"],
			col: [2, "<table><tbody></tbody><colgroup>", "</colgroup></table>"],
			area: [1, "<map>", "</map>"],
			_default: [0, "", ""]
		},
		safeFragment = createSafeFragment(document);

	wrapMap.optgroup = wrapMap.option;
	wrapMap.tbody = wrapMap.tfoot = wrapMap.colgroup = wrapMap.caption = wrapMap.thead;
	wrapMap.th = wrapMap.td;




// IE can't serialize <link> and <script> tags normally
	if (!jQuery.support.htmlSerialize) {
		wrapMap._default = [1, "div<div>", "</div>"];
	}

	jQuery.fn.extend({
		text: function (value) {
			return jQuery.access(this, function (value) {
				return value === undefined ?
					jQuery.text(this) :
					this.empty().append((this[0] && this[0].ownerDocument || document).createTextNode(value));
			}, null, value, arguments.length);
		},

		wrapAll: function (html) {
			if (jQuery.isFunction(html)) {
				return this.each(function (i) {
					jQuery(this).wrapAll(html.call(this, i));
				});
			}

			if (this[0]) {
				// The elements to wrap the target around
				var wrap = jQuery(html, this[0].ownerDocument).eq(0).clone(true);

				if (this[0].parentNode) {
					wrap.insertBefore(this[0]);
				}

				wrap.map(function () {
					var elem = this;

					while (elem.firstChild && elem.firstChild.nodeType === 1) {
						elem = elem.firstChild;
					}

					return elem;
				}).append(this);
			}

			return this;
		},

		wrapInner: function (html) {
			if (jQuery.isFunction(html)) {
				return this.each(function (i) {
					jQuery(this).wrapInner(html.call(this, i));
				});
			}

			return this.each(function () {
				var self = jQuery(this),
					contents = self.contents();

				if (contents.length) {
					contents.wrapAll(html);

				} else {
					self.append(html);
				}
			});
		},

		wrap: function (html) {
			var isFunction = jQuery.isFunction(html);

			return this.each(function (i) {
				jQuery(this).wrapAll(isFunction ? html.call(this, i) : html);
			});
		},

		unwrap: function () {
			return this.parent().each(function () {
				if (!jQuery.nodeName(this, "body")) {
					jQuery(this).replaceWith(this.childNodes);
				}
			}).end();
		},

		append: function () {
			return this.domManip(arguments, true, function (elem) {
				if (this.nodeType === 1) {
					this.appendChild(elem);
				}
			});
		},

		prepend: function () {
			return this.domManip(arguments, true, function (elem) {
				if (this.nodeType === 1) {
					this.insertBefore(elem, this.firstChild);
				}
			});
		},

		before: function () {
			if (this[0] && this[0].parentNode) {
				return this.domManip(arguments, false, function (elem) {
					this.parentNode.insertBefore(elem, this);
				});
			} else if (arguments.length) {
				var set = jQuery.clean(arguments);
				set.push.apply(set, this.toArray());
				return this.pushStack(set, "before", arguments);
			}
		},

		after: function () {
			if (this[0] && this[0].parentNode) {
				return this.domManip(arguments, false, function (elem) {
					this.parentNode.insertBefore(elem, this.nextSibling);
				});
			} else if (arguments.length) {
				var set = this.pushStack(this, "after", arguments);
				set.push.apply(set, jQuery.clean(arguments));
				return set;
			}
		},

		// keepData is for internal use only--do not document
		remove: function (selector, keepData) {
			for (var i = 0, elem; (elem = this[i]) != null; i++) {
				if (!selector || jQuery.filter(selector, [elem]).length) {
					if (!keepData && elem.nodeType === 1) {
						jQuery.cleanData(elem.getElementsByTagName("*"));
						jQuery.cleanData([elem]);
					}

					if (elem.parentNode) {
						elem.parentNode.removeChild(elem);
					}
				}
			}

			return this;
		},

		empty: function () {
			for (var i = 0, elem; (elem = this[i]) != null; i++) {
				// Remove element nodes and prevent memory leaks
				if (elem.nodeType === 1) {
					jQuery.cleanData(elem.getElementsByTagName("*"));
				}

				// Remove any remaining nodes
				while (elem.firstChild) {
					elem.removeChild(elem.firstChild);
				}
			}

			return this;
		},

		clone: function (dataAndEvents, deepDataAndEvents) {
			dataAndEvents = dataAndEvents == null ? false : dataAndEvents;
			deepDataAndEvents = deepDataAndEvents == null ? dataAndEvents : deepDataAndEvents;

			return this.map(function () {
				return jQuery.clone(this, dataAndEvents, deepDataAndEvents);
			});
		},

		html: function (value) {
			return jQuery.access(this, function (value) {
				var elem = this[0] || {},
					i = 0,
					l = this.length;

				if (value === undefined) {
					return elem.nodeType === 1 ?
						elem.innerHTML.replace(rinlinejQuery, "") :
						null;
				}


				if (typeof value === "string" && !rnoInnerhtml.test(value) &&
					(jQuery.support.leadingWhitespace || !rleadingWhitespace.test(value)) &&
					!wrapMap[(rtagName.exec(value) || ["", ""])[1].toLowerCase()]) {

					value = value.replace(rxhtmlTag, "<$1></$2>");

					try {
						for (; i < l; i++) {
							// Remove element nodes and prevent memory leaks
							elem = this[i] || {};
							if (elem.nodeType === 1) {
								jQuery.cleanData(elem.getElementsByTagName("*"));
								elem.innerHTML = value;
							}
						}

						elem = 0;

						// If using innerHTML throws an exception, use the fallback method
					} catch (e) {
					}
				}

				if (elem) {
					this.empty().append(value);
				}
			}, null, value, arguments.length);
		},

		replaceWith: function (value) {
			if (this[0] && this[0].parentNode) {
				// Make sure that the elements are removed from the DOM before they are inserted
				// this can help fix replacing a parent with child elements
				if (jQuery.isFunction(value)) {
					return this.each(function (i) {
						var self = jQuery(this), old = self.html();
						self.replaceWith(value.call(this, i, old));
					});
				}

				if (typeof value !== "string") {
					value = jQuery(value).detach();
				}

				return this.each(function () {
					var next = this.nextSibling,
						parent = this.parentNode;

					jQuery(this).remove();

					if (next) {
						jQuery(next).before(value);
					} else {
						jQuery(parent).append(value);
					}
				});
			} else {
				return this.length ?
					this.pushStack(jQuery(jQuery.isFunction(value) ? value() : value), "replaceWith", value) :
					this;
			}
		},

		detach: function (selector) {
			return this.remove(selector, true);
		},

		domManip: function (args, table, callback) {
			var results, first, fragment, parent,
				value = args[0],
				scripts = [];

			// We can't cloneNode fragments that contain checked, in WebKit
			if (!jQuery.support.checkClone && arguments.length === 3 && typeof value === "string" && rchecked.test(value)) {
				return this.each(function () {
					jQuery(this).domManip(args, table, callback, true);
				});
			}

			if (jQuery.isFunction(value)) {
				return this.each(function (i) {
					var self = jQuery(this);
					args[0] = value.call(this, i, table ? self.html() : undefined);
					self.domManip(args, table, callback);
				});
			}

			if (this[0]) {
				parent = value && value.parentNode;

				// If we're in a fragment, just use that instead of building a new one
				if (jQuery.support.parentNode && parent && parent.nodeType === 11 && parent.childNodes.length === this.length) {
					results = {fragment: parent};

				} else {
					results = jQuery.buildFragment(args, this, scripts);
				}

				fragment = results.fragment;

				if (fragment.childNodes.length === 1) {
					first = fragment = fragment.firstChild;
				} else {
					first = fragment.firstChild;
				}

				if (first) {
					table = table && jQuery.nodeName(first, "tr");

					for (var i = 0, l = this.length, lastIndex = l - 1; i < l; i++) {
						callback.call(
							table ?
								root(this[i], first) :
								this[i],
							// Make sure that we do not leak memory by inadvertently discarding
							// the original fragment (which might have attached data) instead of
							// using it; in addition, use the original fragment object for the last
							// item instead of first because it can end up being emptied incorrectly
							// in certain situations (Bug #8070).
							// Fragments from the fragment cache must always be cloned and never used
							// in place.
							results.cacheable || (l > 1 && i < lastIndex) ?
								jQuery.clone(fragment, true, true) :
								fragment
						);
					}
				}

				if (scripts.length) {
					jQuery.each(scripts, function (i, elem) {
						if (elem.src) {
							jQuery.ajax({
								type: "GET",
								global: false,
								url: elem.src,
								async: false,
								dataType: "script",
								throws: true // Fix - Affected versions of this package are vulnerable to Cross-site Scripting (XSS)
							});
						} else {
							jQuery.globalEval((elem.text || elem.textContent || elem.innerHTML || "").replace(rcleanScript, "/*$0*/"));
						}

						if (elem.parentNode) {
							elem.parentNode.removeChild(elem);
						}
					});
				}
			}

			return this;
		}
	});

	function root(elem, cur) {
		return jQuery.nodeName(elem, "table") ?
			(elem.getElementsByTagName("tbody")[0] ||
				elem.appendChild(elem.ownerDocument.createElement("tbody"))) :
			elem;
	}

	function cloneCopyEvent(src, dest) {

		if (dest.nodeType !== 1 || !jQuery.hasData(src)) {
			return;
		}

		var type, i, l,
			oldData = jQuery._data(src),
			curData = jQuery._data(dest, oldData),
			events = oldData.events;

		if (events) {
			delete curData.handle;
			curData.events = {};

			for (type in events) {
				for (i = 0, l = events[type].length; i < l; i++) {
					jQuery.event.add(dest, type, events[type][i]);
				}
			}
		}

		// make the cloned public data object a copy from the original
		if (curData.data) {
			curData.data = jQuery.extend({}, curData.data);
		}
	}

	function cloneFixAttributes(src, dest) {
		var nodeName;

		// We do not need to do anything for non-Elements
		if (dest.nodeType !== 1) {
			return;
		}

		// clearAttributes removes the attributes, which we don't want,
		// but also removes the attachEvent events, which we *do* want
		if (dest.clearAttributes) {
			dest.clearAttributes();
		}

		// mergeAttributes, in contrast, only merges back on the
		// original attributes, not the events
		if (dest.mergeAttributes) {
			dest.mergeAttributes(src);
		}

		nodeName = dest.nodeName.toLowerCase();

		// IE6-8 fail to clone children inside object elements that use
		// the proprietary classid attribute value (rather than the type
		// attribute) to identify the type of content to display
		if (nodeName === "object") {
			dest.outerHTML = src.outerHTML;

		} else if (nodeName === "input" && (src.type === "checkbox" || src.type === "radio")) {
			// IE6-8 fails to persist the checked state of a cloned checkbox
			// or radio button. Worse, IE6-7 fail to give the cloned element
			// a checked appearance if the defaultChecked value isn't also set
			if (src.checked) {
				dest.defaultChecked = dest.checked = src.checked;
			}

			// IE6-7 get confused and end up setting the value of a cloned
			// checkbox/radio button to an empty string instead of "on"
			if (dest.value !== src.value) {
				dest.value = src.value;
			}

			// IE6-8 fails to return the selected option to the default selected
			// state when cloning options
		} else if (nodeName === "option") {
			dest.selected = src.defaultSelected;

			// IE6-8 fails to set the defaultValue to the correct value when
			// cloning other types of input fields
		} else if (nodeName === "input" || nodeName === "textarea") {
			dest.defaultValue = src.defaultValue;

			// IE blanks contents when cloning scripts
		} else if (nodeName === "script" && dest.text !== src.text) {
			dest.text = src.text;
		}

		// Event data gets referenced instead of copied if the expando
		// gets copied too
		dest.removeAttribute(jQuery.expando);

		// Clear flags for bubbling special change/submit events, they must
		// be reattached when the newly cloned events are first activated
		dest.removeAttribute("_submit_attached");
		dest.removeAttribute("_change_attached");
	}

	jQuery.buildFragment = function (args, nodes, scripts) {
		var fragment, cacheable, cacheresults, doc,
			first = args[0];

		// nodes may contain either an explicit document object,
		// a jQuery collection or context object.
		// If nodes[0] contains a valid object to assign to doc
		if (nodes && nodes[0]) {
			doc = nodes[0].ownerDocument || nodes[0];
		}

		// Ensure that an attr object doesn't incorrectly stand in as a document object
		// Chrome and Firefox seem to allow this to occur and will throw exception
		// Fixes #8950
		if (!doc.createDocumentFragment) {
			doc = document;
		}

		// Only cache "small" (1/2 KB) HTML strings that are associated with the main document
		// Cloning options loses the selected state, so don't cache them
		// IE 6 doesn't like it when you put <object> or <embed> elements in a fragment
		// Also, WebKit does not clone 'checked' attributes on cloneNode, so don't cache
		// Lastly, IE6,7,8 will not correctly reuse cached fragments that were created from unknown elems #10501
		if (args.length === 1 && typeof first === "string" && first.length < 512 && doc === document &&
			first.charAt(0) === "<" && !rnocache.test(first) &&
			(jQuery.support.checkClone || !rchecked.test(first)) &&
			(jQuery.support.html5Clone || !rnoshimcache.test(first))) {

			cacheable = true;

			cacheresults = jQuery.fragments[first];
			if (cacheresults && cacheresults !== 1) {
				fragment = cacheresults;
			}
		}

		if (!fragment) {
			fragment = doc.createDocumentFragment();
			jQuery.clean(args, doc, fragment, scripts);
		}

		if (cacheable) {
			jQuery.fragments[first] = cacheresults ? fragment : 1;
		}

		return {fragment: fragment, cacheable: cacheable};
	};

	jQuery.fragments = {};

	jQuery.each({
		appendTo: "append",
		prependTo: "prepend",
		insertBefore: "before",
		insertAfter: "after",
		replaceAll: "replaceWith"
	}, function (name, original) {
		jQuery.fn[name] = function (selector) {
			var ret = [],
				insert = jQuery(selector),
				parent = this.length === 1 && this[0].parentNode;

			if (parent && parent.nodeType === 11 && parent.childNodes.length === 1 && insert.length === 1) {
				insert[original](this[0]);
				return this;

			} else {
				for (var i = 0, l = insert.length; i < l; i++) {
					var elems = (i > 0 ? this.clone(true) : this).get();
					jQuery(insert[i])[original](elems);
					ret = ret.concat(elems);
				}

				return this.pushStack(ret, name, insert.selector);
			}
		};
	});

	function getAll(elem) {
		if (typeof elem.getElementsByTagName !== "undefined") {
			return elem.getElementsByTagName("*");

		} else if (typeof elem.querySelectorAll !== "undefined") {
			return elem.querySelectorAll("*");

		} else {
			return [];
		}
	}

// Used in clean, fixes the defaultChecked property
	function fixDefaultChecked(elem) {
		if (elem.type === "checkbox" || elem.type === "radio") {
			elem.defaultChecked = elem.checked;
		}
	}

// Finds all inputs and passes them to fixDefaultChecked
	function findInputs(elem) {
		var nodeName = (elem.nodeName || "").toLowerCase();
		if (nodeName === "input") {
			fixDefaultChecked(elem);
			// Skip scripts, get other children
		} else if (nodeName !== "script" && typeof elem.getElementsByTagName !== "undefined") {
			jQuery.grep(elem.getElementsByTagName("input"), fixDefaultChecked);
		}
	}

// Derived From: http://www.iecss.com/shimprove/javascript/shimprove.1-0-1.js
	function shimCloneNode(elem) {
		var div = document.createElement("div");
		safeFragment.appendChild(div);

		div.innerHTML = elem.outerHTML;
		return div.firstChild;
	}

	jQuery.extend({
		clone: function (elem, dataAndEvents, deepDataAndEvents) {
			var srcElements,
				destElements,
				i,
				// IE<=8 does not properly clone detached, unknown element nodes
				clone = jQuery.support.html5Clone || jQuery.isXMLDoc(elem) || !rnoshimcache.test("<" + elem.nodeName + ">") ?
					elem.cloneNode(true) :
					shimCloneNode(elem);

			if ((!jQuery.support.noCloneEvent || !jQuery.support.noCloneChecked) &&
				(elem.nodeType === 1 || elem.nodeType === 11) && !jQuery.isXMLDoc(elem)) {
				// IE copies events bound via attachEvent when using cloneNode.
				// Calling detachEvent on the clone will also remove the events
				// from the original. In order to get around this, we use some
				// proprietary methods to clear the events. Thanks to MooTools
				// guys for this hotness.

				cloneFixAttributes(elem, clone);

				// Using Sizzle here is crazy slow, so we use getElementsByTagName instead
				srcElements = getAll(elem);
				destElements = getAll(clone);

				// Weird iteration because IE will replace the length property
				// with an element if you are cloning the body and one of the
				// elements on the page has a name or id of "length"
				for (i = 0; srcElements[i]; ++i) {
					// Ensure that the destination node is not null; Fixes #9587
					if (destElements[i]) {
						cloneFixAttributes(srcElements[i], destElements[i]);
					}
				}
			}

			// Copy the events from the original to the clone
			if (dataAndEvents) {
				cloneCopyEvent(elem, clone);

				if (deepDataAndEvents) {
					srcElements = getAll(elem);
					destElements = getAll(clone);

					for (i = 0; srcElements[i]; ++i) {
						cloneCopyEvent(srcElements[i], destElements[i]);
					}
				}
			}

			srcElements = destElements = null;

			// Return the cloned set
			return clone;
		},

		// MODIFIED BY ATLASSIAN: This function is copied from jQuery 1.8.3 to fix JDEV-35463
		clean: function (elems, context, fragment, scripts) {
			var i, j, elem, tag, wrap, depth, div, hasBody, tbody, len, handleScript, jsTags,
				safe = context === document && safeFragment,
				ret = [];

			// Ensure that context is a document
			if (!context || typeof context.createDocumentFragment === "undefined") {
				context = document;
			}

			// Use the already-created safe fragment if context permits
			for (i = 0; (elem = elems[i]) != null; i++) {
				if (typeof elem === "number") {
					elem += "";
				}

				if (!elem) {
					continue;
				}

				// Convert html string into DOM nodes
				if (typeof elem === "string") {
					if (!rhtml.test(elem)) {
						elem = context.createTextNode(elem);
					} else {
						// Ensure a safe container in which to render the html
						safe = safe || createSafeFragment(context);
						div = context.createElement("div");
						safe.appendChild(div);

						// Fix "XHTML"-style tags in all browsers
						elem = elem.replace(rxhtmlTag, "<$1></$2>");

						// Go to html and back, then peel off extra wrappers
						tag = (rtagName.exec(elem) || ["", ""])[1].toLowerCase();
						wrap = wrapMap[tag] || wrapMap._default;
						depth = wrap[0];
						div.innerHTML = wrap[1] + elem + wrap[2];

						// Move to the right depth
						while (depth--) {
							div = div.lastChild;
						}

						// Remove IE's autoinserted <tbody> from table fragments
						if (!jQuery.support.tbody) {

							// String was a <table>, *may* have spurious <tbody>
							hasBody = rtbody.test(elem);
							tbody = tag === "table" && !hasBody ?
								div.firstChild && div.firstChild.childNodes :

								// String was a bare <thead> or <tfoot>
								wrap[1] === "<table>" && !hasBody ?
									div.childNodes :
									[];

							for (j = tbody.length - 1; j >= 0; --j) {
								if (jQuery.nodeName(tbody[j], "tbody") && !tbody[j].childNodes.length) {
									tbody[j].parentNode.removeChild(tbody[j]);
								}
							}
						}

						// IE completely kills leading whitespace when innerHTML is used
						if (!jQuery.support.leadingWhitespace && rleadingWhitespace.test(elem)) {
							div.insertBefore(context.createTextNode(rleadingWhitespace.exec(elem)[0]), div.firstChild);
						}

						elem = div.childNodes;

						// Take out of fragment container (we need a fresh div each time)
						div.parentNode.removeChild(div);
					}
				}

				if (elem.nodeType) {
					ret.push(elem);
				} else {
					jQuery.merge(ret, elem);
				}
			}

			// Fix #11356: Clear elements from safeFragment
			if (div) {
				elem = div = safe = null;
			}

			// Reset defaultChecked for any radios and checkboxes
			// about to be appended to the DOM in IE 6/7 (#8060)
			if (!jQuery.support.appendChecked) {
				for (i = 0; (elem = ret[i]) != null; i++) {
					if (jQuery.nodeName(elem, "input")) {
						fixDefaultChecked(elem);
					} else if (typeof elem.getElementsByTagName !== "undefined") {
						jQuery.grep(elem.getElementsByTagName("input"), fixDefaultChecked);
					}
				}
			}

			// Append elements to a provided document fragment
			if (fragment) {
				// Special handling of each script element
				handleScript = function (elem) {
					// Check if we consider it executable
					if (!elem.type || rscriptType.test(elem.type)) {
						// Detach the script and store it in the scripts array (if provided) or the fragment
						// Return truthy to indicate that it has been handled
						return scripts ?
							scripts.push(elem.parentNode ? elem.parentNode.removeChild(elem) : elem) :
							fragment.appendChild(elem);
					}
				};

				for (i = 0; (elem = ret[i]) != null; i++) {
					// Check if we're done after handling an executable script
					if (!(jQuery.nodeName(elem, "script") && handleScript(elem))) {
						// Append to fragment and handle embedded scripts
						fragment.appendChild(elem);
						if (typeof elem.getElementsByTagName !== "undefined") {
							// handleScript alters the DOM, so use jQuery.merge to ensure snapshot iteration
							jsTags = jQuery.grep(jQuery.merge([], elem.getElementsByTagName("script")), handleScript);

							// Splice the scripts into ret after their former ancestor and advance our index beyond them
							ret.splice.apply(ret, [i + 1, 0].concat(jsTags));
							i += jsTags.length;
						}
					}
				}
			}

			return ret;
		},

		cleanData: function (elems) {
			var data, id,
				cache = jQuery.cache,
				special = jQuery.event.special,
				deleteExpando = jQuery.support.deleteExpando;

			for (var i = 0, elem; (elem = elems[i]) != null; i++) {
				if (elem.nodeName && jQuery.noData[elem.nodeName.toLowerCase()]) {
					continue;
				}

				id = elem[jQuery.expando];

				if (id) {
					data = cache[id];

					if (data && data.events) {
						for (var type in data.events) {
							if (special[type]) {
								jQuery.event.remove(elem, type);

								// This is a shortcut to avoid jQuery.event.remove's overhead
							} else {
								jQuery.removeEvent(elem, type, data.handle);
							}
						}

						// Null the DOM reference to avoid IE6/7/8 leak (#7054)
						if (data.handle) {
							data.handle.elem = null;
						}
					}

					if (deleteExpando) {
						delete elem[jQuery.expando];

					} else if (elem.removeAttribute) {
						elem.removeAttribute(jQuery.expando);
					}

					delete cache[id];
				}
			}
		}
	});


	var ralpha = /alpha\([^)]*\)/i,
		ropacity = /opacity=([^)]*)/,
		// fixed for IE9, see #8346
		rupper = /([A-Z]|^ms)/g,
		rnum = /^[\-+]?(?:\d*\.)?\d+$/i,
		rnumnonpx = /^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i,
		rrelNum = /^([\-+])=([\-+.\de]+)/,
		rmargin = /^margin/,

		cssShow = {position: "absolute", visibility: "hidden", display: "block"},

		// order is important!
		cssExpand = ["Top", "Right", "Bottom", "Left"],

		curCSS,

		getComputedStyle,
		currentStyle;

	jQuery.fn.css = function (name, value) {
		return jQuery.access(this, function (elem, name, value) {
			return value !== undefined ?
				jQuery.style(elem, name, value) :
				jQuery.css(elem, name);
		}, name, value, arguments.length > 1);
	};

	jQuery.extend({
		// Add in style property hooks for overriding the default
		// behavior of getting and setting a style property
		cssHooks: {
			opacity: {
				get: function (elem, computed) {
					if (computed) {
						// We should always get a number back from opacity
						var ret = curCSS(elem, "opacity");
						return ret === "" ? "1" : ret;

					} else {
						return elem.style.opacity;
					}
				}
			}
		},

		// Exclude the following css properties to add px
		cssNumber: {
			"fillOpacity": true,
			"fontWeight": true,
			"lineHeight": true,
			"opacity": true,
			"orphans": true,
			"widows": true,
			"zIndex": true,
			"zoom": true
		},

		// Add in properties whose names you wish to fix before
		// setting or getting the value
		cssProps: {
			// normalize float css property
			"float": jQuery.support.cssFloat ? "cssFloat" : "styleFloat"
		},

		// Get and set the style property on a DOM Node
		style: function (elem, name, value, extra) {
			// Don't set styles on text and comment nodes
			if (!elem || elem.nodeType === 3 || elem.nodeType === 8 || !elem.style) {
				return;
			}

			// Make sure that we're working with the right name
			var ret, type, origName = jQuery.camelCase(name),
				style = elem.style, hooks = jQuery.cssHooks[origName];

			name = jQuery.cssProps[origName] || origName;

			// Check if we're setting a value
			if (value !== undefined) {
				type = typeof value;

				// convert relative number strings (+= or -=) to relative numbers. #7345
				if (type === "string" && (ret = rrelNum.exec(value))) {
					value = (+(ret[1] + 1) * +ret[2]) + parseFloat(jQuery.css(elem, name));
					// Fixes bug #9237
					type = "number";
				}

				// Make sure that NaN and null values aren't set. See: #7116
				if (value == null || type === "number" && isNaN(value)) {
					return;
				}

				// If a number was passed in, add 'px' to the (except for certain CSS properties)
				if (type === "number" && !jQuery.cssNumber[origName]) {
					value += "px";
				}

				// If a hook was provided, use that value, otherwise just set the specified value
				if (!hooks || !("set" in hooks) || (value = hooks.set(elem, value)) !== undefined) {
					// Wrapped to prevent IE from throwing errors when 'invalid' values are provided
					// Fixes bug #5509
					try {
						style[name] = value;
					} catch (e) {
					}
				}

			} else {
				// If a hook was provided get the non-computed value from there
				if (hooks && "get" in hooks && (ret = hooks.get(elem, false, extra)) !== undefined) {
					return ret;
				}

				// Otherwise just get the value from the style object
				return style[name];
			}
		},

		css: function (elem, name, extra) {
			var ret, hooks;

			// Make sure that we're working with the right name
			name = jQuery.camelCase(name);
			hooks = jQuery.cssHooks[name];
			name = jQuery.cssProps[name] || name;

			// cssFloat needs a special treatment
			if (name === "cssFloat") {
				name = "float";
			}

			// If a hook was provided get the computed value from there
			if (hooks && "get" in hooks && (ret = hooks.get(elem, true, extra)) !== undefined) {
				return ret;

				// Otherwise, if a way to get the computed value exists, use that
			} else if (curCSS) {
				return curCSS(elem, name);
			}
		},

		// A method for quickly swapping in/out CSS properties to get correct calculations
		swap: function (elem, options, callback) {
			var old = {},
				ret, name;

			// Remember the old values, and insert the new ones
			for (name in options) {
				old[name] = elem.style[name];
				elem.style[name] = options[name];
			}

			ret = callback.call(elem);

			// Revert the old values
			for (name in options) {
				elem.style[name] = old[name];
			}

			return ret;
		}
	});

// DEPRECATED in 1.3, Use jQuery.css() instead
	jQuery.curCSS = jQuery.css;

	if (document.defaultView && document.defaultView.getComputedStyle) {
		getComputedStyle = function (elem, name) {
			var ret, defaultView, computedStyle, width,
				style = elem.style;

			name = name.replace(rupper, "-$1").toLowerCase();

			if ((defaultView = elem.ownerDocument.defaultView) &&
				(computedStyle = defaultView.getComputedStyle(elem, null))) {

				ret = computedStyle.getPropertyValue(name);
				if (ret === "" && !jQuery.contains(elem.ownerDocument.documentElement, elem)) {
					ret = jQuery.style(elem, name);
				}
			}

			// A tribute to the "awesome hack by Dean Edwards"
			// WebKit uses "computed value (percentage if specified)" instead of "used value" for margins
			// which is against the CSSOM draft spec: http://dev.w3.org/csswg/cssom/#resolved-values
			if (!jQuery.support.pixelMargin && computedStyle && rmargin.test(name) && rnumnonpx.test(ret)) {
				width = style.width;
				style.width = ret;
				ret = computedStyle.width;
				style.width = width;
			}

			return ret;
		};
	}

	if (document.documentElement.currentStyle) {
		currentStyle = function (elem, name) {
			var left, rsLeft, uncomputed,
				ret = elem.currentStyle && elem.currentStyle[name],
				style = elem.style;

			// Avoid setting ret to empty string here
			// so we don't default to auto
			if (ret == null && style && (uncomputed = style[name])) {
				ret = uncomputed;
			}

			// From the awesome hack by Dean Edwards
			// http://erik.eae.net/archives/2007/07/27/18.54.15/#comment-102291

			// If we're not dealing with a regular pixel number
			// but a number that has a weird ending, we need to convert it to pixels
			if (rnumnonpx.test(ret)) {

				// Remember the original values
				left = style.left;
				rsLeft = elem.runtimeStyle && elem.runtimeStyle.left;

				// Put in the new values to get a computed value out
				if (rsLeft) {
					elem.runtimeStyle.left = elem.currentStyle.left;
				}
				style.left = name === "fontSize" ? "1em" : ret;
				ret = style.pixelLeft + "px";

				// Revert the changed values
				style.left = left;
				if (rsLeft) {
					elem.runtimeStyle.left = rsLeft;
				}
			}

			return ret === "" ? "auto" : ret;
		};
	}

	curCSS = getComputedStyle || currentStyle;

	function getWidthOrHeight(elem, name, extra) {

		// Start with offset property
		var val = name === "width" ? elem.offsetWidth : elem.offsetHeight,
			i = name === "width" ? 1 : 0,
			len = 4;

		if (val > 0) {
			if (extra !== "border") {
				for (; i < len; i += 2) {
					if (!extra) {
						val -= parseFloat(jQuery.css(elem, "padding" + cssExpand[i])) || 0;
					}
					if (extra === "margin") {
						val += parseFloat(jQuery.css(elem, extra + cssExpand[i])) || 0;
					} else {
						val -= parseFloat(jQuery.css(elem, "border" + cssExpand[i] + "Width")) || 0;
					}
				}
			}

			return val + "px";
		}

		// Fall back to computed then uncomputed css if necessary
		val = curCSS(elem, name);
		if (val < 0 || val == null) {
			val = elem.style[name];
		}

		// Computed unit is not pixels. Stop here and return.
		if (rnumnonpx.test(val)) {
			return val;
		}

		// Normalize "", auto, and prepare for extra
		val = parseFloat(val) || 0;

		// Add padding, border, margin
		if (extra) {
			for (; i < len; i += 2) {
				val += parseFloat(jQuery.css(elem, "padding" + cssExpand[i])) || 0;
				if (extra !== "padding") {
					val += parseFloat(jQuery.css(elem, "border" + cssExpand[i] + "Width")) || 0;
				}
				if (extra === "margin") {
					val += parseFloat(jQuery.css(elem, extra + cssExpand[i])) || 0;
				}
			}
		}

		return val + "px";
	}

	jQuery.each(["height", "width"], function (i, name) {
		jQuery.cssHooks[name] = {
			get: function (elem, computed, extra) {
				if (computed) {
					if (elem.offsetWidth !== 0) {
						return getWidthOrHeight(elem, name, extra);
					} else {
						return jQuery.swap(elem, cssShow, function () {
							return getWidthOrHeight(elem, name, extra);
						});
					}
				}
			},

			set: function (elem, value) {
				return rnum.test(value) ?
					value + "px" :
					value;
			}
		};
	});

	if (!jQuery.support.opacity) {
		jQuery.cssHooks.opacity = {
			get: function (elem, computed) {
				// IE uses filters for opacity
				return ropacity.test((computed && elem.currentStyle ? elem.currentStyle.filter : elem.style.filter) || "") ?
					(parseFloat(RegExp.$1) / 100) + "" :
					computed ? "1" : "";
			},

			set: function (elem, value) {
				var style = elem.style,
					currentStyle = elem.currentStyle,
					opacity = jQuery.isNumeric(value) ? "alpha(opacity=" + value * 100 + ")" : "",
					filter = currentStyle && currentStyle.filter || style.filter || "";

				// IE has trouble with opacity if it does not have layout
				// Force it by setting the zoom level
				style.zoom = 1;

				// if setting opacity to 1, and no other filters exist - attempt to remove filter attribute #6652
				if (value >= 1 && jQuery.trim(filter.replace(ralpha, "")) === "") {

					// Setting style.filter to null, "" & " " still leave "filter:" in the cssText
					// if "filter:" is present at all, clearType is disabled, we want to avoid this
					// style.removeAttribute is IE Only, but so apparently is this code path...
					style.removeAttribute("filter");

					// if there there is no filter style applied in a css rule, we are done
					if (currentStyle && !currentStyle.filter) {
						return;
					}
				}

				// otherwise, set new filter values
				style.filter = ralpha.test(filter) ?
					filter.replace(ralpha, opacity) :
					filter + " " + opacity;
			}
		};
	}

	jQuery(function () {
		// This hook cannot be added until DOM ready because the support test
		// for it is not run until after DOM ready
		if (!jQuery.support.reliableMarginRight) {
			jQuery.cssHooks.marginRight = {
				get: function (elem, computed) {
					// WebKit Bug 13343 - getComputedStyle returns wrong value for margin-right
					// Work around by temporarily setting element display to inline-block
					return jQuery.swap(elem, {"display": "inline-block"}, function () {
						if (computed) {
							return curCSS(elem, "margin-right");
						} else {
							return elem.style.marginRight;
						}
					});
				}
			};
		}
	});

	if (jQuery.expr && jQuery.expr.filters) {
		jQuery.expr.filters.hidden = function (elem) {
			var width = elem.offsetWidth,
				height = elem.offsetHeight;

			return (width === 0 && height === 0) || (!jQuery.support.reliableHiddenOffsets && ((elem.style && elem.style.display) || jQuery.css(elem, "display")) === "none");
		};

		jQuery.expr.filters.visible = function (elem) {
			return !jQuery.expr.filters.hidden(elem);
		};
	}

// These hooks are used by animate to expand properties
	jQuery.each({
		margin: "",
		padding: "",
		border: "Width"
	}, function (prefix, suffix) {

		jQuery.cssHooks[prefix + suffix] = {
			expand: function (value) {
				var i,

					// assumes a single number if not a string
					parts = typeof value === "string" ? value.split(" ") : [value],
					expanded = {};

				for (i = 0; i < 4; i++) {
					expanded[prefix + cssExpand[i] + suffix] =
						parts[i] || parts[i - 2] || parts[0];
				}

				return expanded;
			}
		};
	});


	var r20 = /%20/g,
		rbracket = /\[\]$/,
		rCRLF = /\r?\n/g,
		rhash = /#.*$/,
		rheaders = /^(.*?):[ \t]*([^\r\n]*)\r?$/mg, // IE leaves an \r character at EOL
		rinput = /^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,
		// #7653, #8125, #8152: local protocol detection
		rlocalProtocol = /^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,
		rnoContent = /^(?:GET|HEAD)$/,
		rprotocol = /^\/\//,
		rquery = /\?/,
		rscript = /<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,
		rselectTextarea = /^(?:select|textarea)/i,
		rspacesAjax = /\s+/,
		rts = /([?&])_=[^&]*/,
		rurl = /^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,

		// Keep a copy of the old load method
		_load = jQuery.fn.load,

		/* Prefilters
	 * 1) They are useful to introduce custom dataTypes (see ajax/jsonp.js for an example)
	 * 2) These are called:
	 *    - BEFORE asking for a transport
	 *    - AFTER param serialization (s.data is a string if s.processData is true)
	 * 3) key is the dataType
	 * 4) the catchall symbol "*" can be used
	 * 5) execution will start with transport dataType and THEN continue down to "*" if needed
	 */
		prefilters = {},

		/* Transports bindings
	 * 1) key is the dataType
	 * 2) the catchall symbol "*" can be used
	 * 3) selection will start with transport dataType and THEN go to "*" if needed
	 */
		transports = {},

		// Document location
		ajaxLocation,

		// Document location segments
		ajaxLocParts,

		// Avoid comment-prolog char sequence (#10098); must appease lint and evade compression
		allTypes = ["*/"] + ["*"];

// #8138, IE may throw an exception when accessing
// a field from window.location if document.domain has been set
	try {
		ajaxLocation = location.href;
	} catch (e) {
		// Use the href attribute of an A element
		// since IE will modify it given document.location
		ajaxLocation = document.createElement("a");
		ajaxLocation.href = "";
		ajaxLocation = ajaxLocation.href;
	}

// Segment location into parts
	ajaxLocParts = rurl.exec(ajaxLocation.toLowerCase()) || [];

// Base "constructor" for jQuery.ajaxPrefilter and jQuery.ajaxTransport
	function addToPrefiltersOrTransports(structure) {

		// dataTypeExpression is optional and defaults to "*"
		return function (dataTypeExpression, func) {

			if (typeof dataTypeExpression !== "string") {
				func = dataTypeExpression;
				dataTypeExpression = "*";
			}

			if (jQuery.isFunction(func)) {
				var dataTypes = dataTypeExpression.toLowerCase().split(rspacesAjax),
					i = 0,
					length = dataTypes.length,
					dataType,
					list,
					placeBefore;

				// For each dataType in the dataTypeExpression
				for (; i < length; i++) {
					dataType = dataTypes[i];
					// We control if we're asked to add before
					// any existing element
					placeBefore = /^\+/.test(dataType);
					if (placeBefore) {
						dataType = dataType.substr(1) || "*";
					}
					list = structure[dataType] = structure[dataType] || [];
					// then we add to the structure accordingly
					list[placeBefore ? "unshift" : "push"](func);
				}
			}
		};
	}

// Base inspection function for prefilters and transports
	function inspectPrefiltersOrTransports(structure, options, originalOptions, jqXHR,
										   dataType /* internal */, inspected /* internal */) {

		dataType = dataType || options.dataTypes[0];
		inspected = inspected || {};

		inspected[dataType] = true;

		var list = structure[dataType],
			i = 0,
			length = list ? list.length : 0,
			executeOnly = (structure === prefilters),
			selection;

		for (; i < length && (executeOnly || !selection); i++) {
			selection = list[i](options, originalOptions, jqXHR);
			// If we got redirected to another dataType
			// we try there if executing only and not done already
			if (typeof selection === "string") {
				if (!executeOnly || inspected[selection]) {
					selection = undefined;
				} else {
					options.dataTypes.unshift(selection);
					selection = inspectPrefiltersOrTransports(
						structure, options, originalOptions, jqXHR, selection, inspected);
				}
			}
		}
		// If we're only executing or nothing was selected
		// we try the catchall dataType if not done already
		if ((executeOnly || !selection) && !inspected["*"]) {
			selection = inspectPrefiltersOrTransports(
				structure, options, originalOptions, jqXHR, "*", inspected);
		}
		// unnecessary when only executing (prefilters)
		// but it'll be ignored by the caller in that case
		return selection;
	}

// A special extend for ajax options
// that takes "flat" options (not to be deep extended)
// Fixes #9887
	function ajaxExtend(target, src) {
		var key, deep,
			flatOptions = jQuery.ajaxSettings.flatOptions || {};
		for (key in src) {
			if (src[key] !== undefined) {
				(flatOptions[key] ? target : (deep || (deep = {})))[key] = src[key];
			}
		}
		if (deep) {
			jQuery.extend(true, target, deep);
		}
	}

	jQuery.fn.extend({
		load: function (url, params, callback) {
			if (typeof url !== "string" && _load) {
				return _load.apply(this, arguments);

				// Don't do a request if no elements are being requested
			} else if (!this.length) {
				return this;
			}

			var off = url.indexOf(" ");
			if (off >= 0) {
				var selector = url.slice(off, url.length);
				url = url.slice(0, off);
			}

			// Default to a GET request
			var type = "GET";

			// If the second parameter was provided
			if (params) {
				// If it's a function
				if (jQuery.isFunction(params)) {
					// We assume that it's the callback
					callback = params;
					params = undefined;

					// Otherwise, build a param string
				} else if (typeof params === "object") {
					params = jQuery.param(params, jQuery.ajaxSettings.traditional);
					type = "POST";
				}
			}

			var self = this;

			// Request the remote document
			jQuery.ajax({
				url: url,
				type: type,
				dataType: "html",
				data: params,
				// Complete callback (responseText is used internally)
				complete: function (jqXHR, status, responseText) {
					// Store the response as specified by the jqXHR object
					responseText = jqXHR.responseText;
					// If successful, inject the HTML into all the matched elements
					if (jqXHR.isResolved()) {
						// #4825: Get the actual response in case
						// a dataFilter is present in ajaxSettings
						jqXHR.done(function (r) {
							responseText = r;
						});
						// See if a selector was specified
						self.html(selector ?
							// Create a dummy div to hold the results
							jQuery("<div>")
								// inject the contents of the document in, removing the scripts
								// to avoid any 'Permission Denied' errors in IE
								.append(responseText.replace(rscript, ""))

								// Locate the specified elements
								.find(selector) :

							// If not, just inject the full result
							responseText);
					}

					if (callback) {
						self.each(callback, [responseText, status, jqXHR]);
					}
				}
			});

			return this;
		},

		serialize: function () {
			return jQuery.param(this.serializeArray());
		},

		serializeArray: function () {
			return this.map(function () {
				return this.elements ? jQuery.makeArray(this.elements) : this;
			})
				.filter(function () {
					return this.name && !this.disabled &&
						(this.checked || rselectTextarea.test(this.nodeName) ||
							rinput.test(this.type));
				})
				.map(function (i, elem) {
					var val = jQuery(this).val();

					return val == null ?
						null :
						jQuery.isArray(val) ?
							jQuery.map(val, function (val, i) {
								return {name: elem.name, value: val.replace(rCRLF, "\r\n")};
							}) :
							{name: elem.name, value: val.replace(rCRLF, "\r\n")};
				}).get();
		}
	});

// Attach a bunch of functions for handling common AJAX events
	jQuery.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "), function (i, o) {
		jQuery.fn[o] = function (f) {
			return this.on(o, f);
		};
	});

	jQuery.each(["get", "post"], function (i, method) {
		jQuery[method] = function (url, data, callback, type) {
			// shift arguments if data argument was omitted
			if (jQuery.isFunction(data)) {
				type = type || callback;
				callback = data;
				data = undefined;
			}

			return jQuery.ajax({
				type: method,
				url: url,
				data: data,
				success: callback,
				dataType: type
			});
		};
	});

	jQuery.extend({

		getScript: function (url, callback) {
			return jQuery.get(url, undefined, callback, "script");
		},

		getJSON: function (url, data, callback) {
			return jQuery.get(url, data, callback, "json");
		},

		// Creates a full fledged settings object into target
		// with both ajaxSettings and settings fields.
		// If target is omitted, writes into ajaxSettings.
		ajaxSetup: function (target, settings) {
			if (settings) {
				// Building a settings object
				ajaxExtend(target, jQuery.ajaxSettings);
			} else {
				// Extending ajaxSettings
				settings = target;
				target = jQuery.ajaxSettings;
			}
			ajaxExtend(target, settings);
			return target;
		},

		ajaxSettings: {
			url: ajaxLocation,
			isLocal: rlocalProtocol.test(ajaxLocParts[1]),
			global: true,
			type: "GET",
			contentType: "application/x-www-form-urlencoded; charset=UTF-8",
			processData: true,
			async: true,
			/*
		timeout: 0,
		data: null,
		dataType: null,
		username: null,
		password: null,
		cache: null,
		traditional: false,
		headers: {},
		*/

			accepts: {
				xml: "application/xml, text/xml",
				html: "text/html",
				text: "text/plain",
				json: "application/json, text/javascript",
				"*": allTypes
			},

			contents: {
				xml: /xml/,
				html: /html/,
				json: /json/
			},

			responseFields: {
				xml: "responseXML",
				text: "responseText"
			},

			// List of data converters
			// 1) key format is "source_type destination_type" (a single space in-between)
			// 2) the catchall symbol "*" can be used for source_type
			converters: {

				// Convert anything to text
				"* text": window.String,

				// Text to html (true = no transformation)
				"text html": true,

				// Evaluate text as a json expression
				"text json": jQuery.parseJSON,

				// Parse text as xml
				"text xml": jQuery.parseXML
			},

			// For options that shouldn't be deep extended:
			// you can add your own custom options here if
			// and when you create one that shouldn't be
			// deep extended (see ajaxExtend)
			flatOptions: {
				context: true,
				url: true
			}
		},

		ajaxPrefilter: addToPrefiltersOrTransports(prefilters),
		ajaxTransport: addToPrefiltersOrTransports(transports),

		// Main method
		ajax: function (url, options) {

			// If url is an object, simulate pre-1.5 signature
			if (typeof url === "object") {
				options = url;
				url = undefined;
			}

			// Force options to be an object
			options = options || {};

			var // Create the final options object
				s = jQuery.ajaxSetup({}, options),
				// Callbacks context
				callbackContext = s.context || s,
				// Context for global events
				// It's the callbackContext if one was provided in the options
				// and if it's a DOM node or a jQuery collection
				globalEventContext = callbackContext !== s &&
				(callbackContext.nodeType || callbackContext instanceof jQuery) ?
					jQuery(callbackContext) : jQuery.event,
				// Deferreds
				deferred = jQuery.Deferred(),
				completeDeferred = jQuery.Callbacks("once memory"),
				// Status-dependent callbacks
				statusCode = s.statusCode || {},
				// ifModified key
				ifModifiedKey,
				// Headers (they are sent all at once)
				requestHeaders = {},
				requestHeadersNames = {},
				// Response headers
				responseHeadersString,
				responseHeaders,
				// transport
				transport,
				// timeout handle
				timeoutTimer,
				// Cross-domain detection vars
				parts,
				// The jqXHR state
				state = 0,
				// To know if global events are to be dispatched
				fireGlobals,
				// Loop variable
				i,
				// Fake xhr
				jqXHR = {

					readyState: 0,

					// Caches the header
					setRequestHeader: function (name, value) {
						if (!state) {
							var lname = name.toLowerCase();
							name = requestHeadersNames[lname] = requestHeadersNames[lname] || name;
							requestHeaders[name] = value;
						}
						return this;
					},

					// Raw string
					getAllResponseHeaders: function () {
						return state === 2 ? responseHeadersString : null;
					},

					// Builds headers hashtable if needed
					getResponseHeader: function (key) {
						var match;
						if (state === 2) {
							if (!responseHeaders) {
								responseHeaders = {};
								while ((match = rheaders.exec(responseHeadersString))) {
									responseHeaders[match[1].toLowerCase()] = match[2];
								}
							}
							match = responseHeaders[key.toLowerCase()];
						}
						return match === undefined ? null : match;
					},

					// Overrides response content-type header
					overrideMimeType: function (type) {
						if (!state) {
							s.mimeType = type;
						}
						return this;
					},

					// Cancel the request
					abort: function (statusText) {
						statusText = statusText || "abort";
						if (transport) {
							transport.abort(statusText);
						}
						done(0, statusText);
						return this;
					}
				};

			// Callback for when everything is done
			// It is defined here because jslint complains if it is declared
			// at the end of the function (which would be more logical and readable)
			function done(status, nativeStatusText, responses, headers) {

				// Called once
				if (state === 2) {
					return;
				}

				// State is "done" now
				state = 2;

				// Clear timeout if it exists
				if (timeoutTimer) {
					clearTimeout(timeoutTimer);
				}

				// Dereference transport for early garbage collection
				// (no matter how long the jqXHR object will be used)
				transport = undefined;

				// Cache response headers
				responseHeadersString = headers || "";

				// Set readyState
				jqXHR.readyState = status > 0 ? 4 : 0;

				var isSuccess,
					success,
					error,
					statusText = nativeStatusText,
					response = responses ? ajaxHandleResponses(s, jqXHR, responses) : undefined,
					lastModified,
					etag;

				// If successful, handle type chaining
				if (status >= 200 && status < 300 || status === 304) {

					// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.
					if (s.ifModified) {

						if ((lastModified = jqXHR.getResponseHeader("Last-Modified"))) {
							jQuery.lastModified[ifModifiedKey] = lastModified;
						}
						if ((etag = jqXHR.getResponseHeader("Etag"))) {
							jQuery.etag[ifModifiedKey] = etag;
						}
					}

					// If not modified
					if (status === 304) {

						statusText = "notmodified";
						isSuccess = true;

						// If we have data
					} else {

						try {
							success = ajaxConvert(s, response);
							statusText = "success";
							isSuccess = true;
						} catch (e) {
							// We have a parsererror
							statusText = "parsererror";
							error = e;
						}
					}
				} else {
					// We extract error from statusText
					// then normalize statusText and status for non-aborts
					error = statusText;
					if (!statusText || status) {
						statusText = "error";
						if (status < 0) {
							status = 0;
						}
					}
				}

				// Set data for the fake xhr object
				jqXHR.status = status;
				jqXHR.statusText = "" + (nativeStatusText || statusText);

				// Success/Error
				if (isSuccess) {
					deferred.resolveWith(callbackContext, [success, statusText, jqXHR]);
				} else {
					deferred.rejectWith(callbackContext, [jqXHR, statusText, error]);
				}

				// Status-dependent callbacks
				jqXHR.statusCode(statusCode);
				statusCode = undefined;

				if (fireGlobals) {
					globalEventContext.trigger("ajax" + (isSuccess ? "Success" : "Error"),
						[jqXHR, s, isSuccess ? success : error]);
				}

				// Complete
				completeDeferred.fireWith(callbackContext, [jqXHR, statusText]);

				if (fireGlobals) {
					globalEventContext.trigger("ajaxComplete", [jqXHR, s]);
					// Handle the global AJAX counter
					if (!(--jQuery.active)) {
						jQuery.event.trigger("ajaxStop");
					}
				}
			}

			// Attach deferreds
			deferred.promise(jqXHR);
			jqXHR.success = jqXHR.done;
			jqXHR.error = jqXHR.fail;
			jqXHR.complete = completeDeferred.add;

			// Status-dependent callbacks
			jqXHR.statusCode = function (map) {
				if (map) {
					var tmp;
					if (state < 2) {
						for (tmp in map) {
							statusCode[tmp] = [statusCode[tmp], map[tmp]];
						}
					} else {
						tmp = map[jqXHR.status];
						jqXHR.then(tmp, tmp);
					}
				}
				return this;
			};

			// Remove hash character (#7531: and string promotion)
			// Add protocol if not provided (#5866: IE7 issue with protocol-less urls)
			// We also use the url parameter if available
			s.url = ((url || s.url) + "").replace(rhash, "").replace(rprotocol, ajaxLocParts[1] + "//");

			// Extract dataTypes list
			s.dataTypes = jQuery.trim(s.dataType || "*").toLowerCase().split(rspacesAjax);

			// Determine if a cross-domain request is in order
			if (s.crossDomain == null) {
				parts = rurl.exec(s.url.toLowerCase());
				s.crossDomain = !!(parts &&
					(parts[1] != ajaxLocParts[1] || parts[2] != ajaxLocParts[2] ||
						(parts[3] || (parts[1] === "http:" ? 80 : 443)) !=
						(ajaxLocParts[3] || (ajaxLocParts[1] === "http:" ? 80 : 443)))
				);
			}

			// Convert data if not already a string
			if (s.data && s.processData && typeof s.data !== "string") {
				s.data = jQuery.param(s.data, s.traditional);
			}

			// Apply prefilters
			inspectPrefiltersOrTransports(prefilters, s, options, jqXHR);

			// If request was aborted inside a prefilter, stop there
			if (state === 2) {
				return false;
			}

			// We can fire global events as of now if asked to
			fireGlobals = s.global;

			// Uppercase the type
			s.type = s.type.toUpperCase();

			// Determine if request has content
			s.hasContent = !rnoContent.test(s.type);

			// Watch for a new set of requests
			if (fireGlobals && jQuery.active++ === 0) {
				jQuery.event.trigger("ajaxStart");
			}

			// More options handling for requests with no content
			if (!s.hasContent) {

				// If data is available, append data to url
				if (s.data) {
					s.url += (rquery.test(s.url) ? "&" : "?") + s.data;
					// #9682: remove data so that it's not used in an eventual retry
					delete s.data;
				}

				// Get ifModifiedKey before adding the anti-cache parameter
				ifModifiedKey = s.url;

				// Add anti-cache in url if needed
				if (s.cache === false) {

					var ts = jQuery.now(),
						// try replacing _= if it is there
						ret = s.url.replace(rts, "$1_=" + ts);

					// if nothing was replaced, add timestamp to the end
					s.url = ret + ((ret === s.url) ? (rquery.test(s.url) ? "&" : "?") + "_=" + ts : "");
				}
			}

			// Set the correct header, if data is being sent
			if (s.data && s.hasContent && s.contentType !== false || options.contentType) {
				jqXHR.setRequestHeader("Content-Type", s.contentType);
			}

			// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.
			if (s.ifModified) {
				ifModifiedKey = ifModifiedKey || s.url;
				if (jQuery.lastModified[ifModifiedKey]) {
					jqXHR.setRequestHeader("If-Modified-Since", jQuery.lastModified[ifModifiedKey]);
				}
				if (jQuery.etag[ifModifiedKey]) {
					jqXHR.setRequestHeader("If-None-Match", jQuery.etag[ifModifiedKey]);
				}
			}

			// Set the Accepts header for the server, depending on the dataType
			jqXHR.setRequestHeader(
				"Accept",
				s.dataTypes[0] && s.accepts[s.dataTypes[0]] ?
					s.accepts[s.dataTypes[0]] + (s.dataTypes[0] !== "*" ? ", " + allTypes + "; q=0.01" : "") :
					s.accepts["*"]
			);

			// Check for headers option
			for (i in s.headers) {
				jqXHR.setRequestHeader(i, s.headers[i]);
			}

			// Allow custom headers/mimetypes and early abort
			if (s.beforeSend && (s.beforeSend.call(callbackContext, jqXHR, s) === false || state === 2)) {
				// Abort if not done already
				jqXHR.abort();
				return false;

			}

			// Install callbacks on deferreds
			for (i in {success: 1, error: 1, complete: 1}) {
				jqXHR[i](s[i]);
			}

			// Get transport
			transport = inspectPrefiltersOrTransports(transports, s, options, jqXHR);

			// If no transport, we auto-abort
			if (!transport) {
				done(-1, "No Transport");
			} else {
				jqXHR.readyState = 1;
				// Send global event
				if (fireGlobals) {
					globalEventContext.trigger("ajaxSend", [jqXHR, s]);
				}
				// Timeout
				if (s.async && s.timeout > 0) {
					timeoutTimer = setTimeout(function () {
						jqXHR.abort("timeout");
					}, s.timeout);
				}

				try {
					state = 1;
					transport.send(requestHeaders, done);
				} catch (e) {
					// Propagate exception as error if not done
					if (state < 2) {
						done(-1, e);
						// Simply rethrow otherwise
					} else {
						throw e;
					}
				}
			}

			return jqXHR;
		},

		// Serialize an array of form elements or a set of
		// key/values into a query string
		param: function (a, traditional) {
			var s = [],
				add = function (key, value) {
					// If value is a function, invoke it and return its value
					value = jQuery.isFunction(value) ? value() : value;
					s[s.length] = encodeURIComponent(key) + "=" + encodeURIComponent(value);
				};

			// Set traditional to true for jQuery <= 1.3.2 behavior.
			if (traditional === undefined) {
				traditional = jQuery.ajaxSettings.traditional;
			}

			// If an array was passed in, assume that it is an array of form elements.
			if (jQuery.isArray(a) || (a.jquery && !jQuery.isPlainObject(a))) {
				// Serialize the form elements
				jQuery.each(a, function () {
					add(this.name, this.value);
				});

			} else {
				// If traditional, encode the "old" way (the way 1.3.2 or older
				// did it), otherwise encode params recursively.
				for (var prefix in a) {
					buildParams(prefix, a[prefix], traditional, add);
				}
			}

			// Return the resulting serialization
			return s.join("&").replace(r20, "+");
		}
	});

	function buildParams(prefix, obj, traditional, add) {
		if (jQuery.isArray(obj)) {
			// Serialize array item.
			jQuery.each(obj, function (i, v) {
				if (traditional || rbracket.test(prefix)) {
					// Treat each array item as a scalar.
					add(prefix, v);

				} else {
					// If array item is non-scalar (array or object), encode its
					// numeric index to resolve deserialization ambiguity issues.
					// Note that rack (as of 1.0.0) can't currently deserialize
					// nested arrays properly, and attempting to do so may cause
					// a server error. Possible fixes are to modify rack's
					// deserialization algorithm or to provide an option or flag
					// to force array serialization to be shallow.
					buildParams(prefix + "[" + (typeof v === "object" ? i : "") + "]", v, traditional, add);
				}
			});

		} else if (!traditional && jQuery.type(obj) === "object") {
			// Serialize object item.
			for (var name in obj) {
				buildParams(prefix + "[" + name + "]", obj[name], traditional, add);
			}

		} else {
			// Serialize scalar item.
			add(prefix, obj);
		}
	}

// This is still on the jQuery object... for now
// Want to move this to jQuery.ajax some day
	jQuery.extend({

		// Counter for holding the number of active queries
		active: 0,

		// Last-Modified header cache for next request
		lastModified: {},
		etag: {}

	});

	/* Handles responses to an ajax request:
 * - sets all responseXXX fields accordingly
 * - finds the right dataType (mediates between content-type and expected dataType)
 * - returns the corresponding response
 */
	function ajaxHandleResponses(s, jqXHR, responses) {

		var contents = s.contents,
			dataTypes = s.dataTypes,
			responseFields = s.responseFields,
			ct,
			type,
			finalDataType,
			firstDataType;

		// Fill responseXXX fields
		for (type in responseFields) {
			if (type in responses) {
				jqXHR[responseFields[type]] = responses[type];
			}
		}

		// Remove auto dataType and get content-type in the process
		while (dataTypes[0] === "*") {
			dataTypes.shift();
			if (ct === undefined) {
				ct = s.mimeType || jqXHR.getResponseHeader("content-type");
			}
		}

		// Check if we're dealing with a known content-type
		if (ct) {
			for (type in contents) {
				if (contents[type] && contents[type].test(ct)) {
					dataTypes.unshift(type);
					break;
				}
			}
		}

		// Check to see if we have a response for the expected dataType
		if (dataTypes[0] in responses) {
			finalDataType = dataTypes[0];
		} else {
			// Try convertible dataTypes
			for (type in responses) {
				if (!dataTypes[0] || s.converters[type + " " + dataTypes[0]]) {
					finalDataType = type;
					break;
				}
				if (!firstDataType) {
					firstDataType = type;
				}
			}
			// Or just use first one
			finalDataType = finalDataType || firstDataType;
		}

		// If we found a dataType
		// We add the dataType to the list if needed
		// and return the corresponding response
		if (finalDataType) {
			if (finalDataType !== dataTypes[0]) {
				dataTypes.unshift(finalDataType);
			}
			return responses[finalDataType];
		}
	}

// Chain conversions given the request and the original response
	function ajaxConvert(s, response) {

		// Apply the dataFilter if provided
		if (s.dataFilter) {
			response = s.dataFilter(response, s.dataType);
		}

		var dataTypes = s.dataTypes,
			converters = {},
			i,
			key,
			length = dataTypes.length,
			tmp,
			// Current and previous dataTypes
			current = dataTypes[0],
			prev,
			// Conversion expression
			conversion,
			// Conversion function
			conv,
			// Conversion functions (transitive conversion)
			conv1,
			conv2;

		// For each dataType in the chain
		for (i = 1; i < length; i++) {

			// Create converters map
			// with lowercased keys
			if (i === 1) {
				for (key in s.converters) {
					if (typeof key === "string") {
						converters[key.toLowerCase()] = s.converters[key];
					}
				}
			}

			// Get the dataTypes
			prev = current;
			current = dataTypes[i];

			// If current is auto dataType, update it to prev
			if (current === "*") {
				current = prev;
				// If no auto and dataTypes are actually different
			} else if (prev !== "*" && prev !== current) {

				// Get the converter
				conversion = prev + " " + current;
				conv = converters[conversion] || converters["* " + current];

				// If there is no direct converter, search transitively
				if (!conv) {
					conv2 = undefined;
					for (conv1 in converters) {
						tmp = conv1.split(" ");
						if (tmp[0] === prev || tmp[0] === "*") {
							conv2 = converters[tmp[1] + " " + current];
							if (conv2) {
								conv1 = converters[conv1];
								if (conv1 === true) {
									conv = conv2;
								} else if (conv2 === true) {
									conv = conv1;
								}
								break;
							}
						}
					}
				}
				// If we found no converter, dispatch an error
				if (!(conv || conv2)) {
					jQuery.error("No conversion from " + conversion.replace(" ", " to "));
				}
				// If found converter is not an equivalence
				if (conv !== true) {
					// Convert with 1 or 2 converters accordingly
					response = conv ? conv(response) : conv2(conv1(response));
				}
			}
		}
		return response;
	}


	var jsc = jQuery.now(),
		jsre = /(\=)\?(&|$)|\?\?/i;

// Default jsonp settings
	jQuery.ajaxSetup({
		jsonp: "callback",
		jsonpCallback: function () {
			return jQuery.expando + "_" + (jsc++);
		}
	});

// Detect, normalize options and install callbacks for jsonp requests
	jQuery.ajaxPrefilter("json jsonp", function (s, originalSettings, jqXHR) {

		var inspectData = (typeof s.data === "string") && /^application\/x\-www\-form\-urlencoded/.test(s.contentType);

		if (s.dataTypes[0] === "jsonp" ||
			s.jsonp !== false && (jsre.test(s.url) ||
				inspectData && jsre.test(s.data))) {

			var responseContainer,
				jsonpCallback = s.jsonpCallback =
					jQuery.isFunction(s.jsonpCallback) ? s.jsonpCallback() : s.jsonpCallback,
				previous = window[jsonpCallback],
				url = s.url,
				data = s.data,
				replace = "$1" + jsonpCallback + "$2";

			if (s.jsonp !== false) {
				url = url.replace(jsre, replace);
				if (s.url === url) {
					if (inspectData) {
						data = data.replace(jsre, replace);
					}
					if (s.data === data) {
						// Add callback manually
						url += (/\?/.test(url) ? "&" : "?") + s.jsonp + "=" + jsonpCallback;
					}
				}
			}

			s.url = url;
			s.data = data;

			// Install callback
			window[jsonpCallback] = function (response) {
				responseContainer = [response];
			};

			// Clean-up function
			jqXHR.always(function () {
				// Set callback back to previous value
				window[jsonpCallback] = previous;
				// Call if it was a function and we have a response
				if (responseContainer && jQuery.isFunction(previous)) {
					window[jsonpCallback](responseContainer[0]);
				}
			});

			// Use data converter to retrieve json after script execution
			s.converters["script json"] = function () {
				if (!responseContainer) {
					jQuery.error(jsonpCallback + " was not called");
				}
				return responseContainer[0];
			};

			// force json dataType
			s.dataTypes[0] = "json";

			// Delegate to script
			return "script";
		}
	});


// Install script dataType
	jQuery.ajaxSetup({
		accepts: {
			script: "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"
		},
		contents: {
			script: /javascript|ecmascript/
		},
		converters: {
			"text script": function (text) {
				jQuery.globalEval(text);
				return text;
			}
		}
	});

// Handle cache's special case and global
	jQuery.ajaxPrefilter("script", function (s) {
		if (s.cache === undefined) {
			s.cache = false;
		}
		if (s.crossDomain) {
			s.type = "GET";
			s.global = false;
		}
	});

// Bind script tag hack transport
	jQuery.ajaxTransport("script", function (s) {

		// This transport only deals with cross domain requests
		if (s.crossDomain) {

			var script,
				head = document.head || document.getElementsByTagName("head")[0] || document.documentElement;

			return {

				send: function (_, callback) {

					script = document.createElement("script");

					script.async = "async";

					if (s.scriptCharset) {
						script.charset = s.scriptCharset;
					}

					script.src = s.url;

					// Attach handlers for all browsers
					script.onload = script.onreadystatechange = function (_, isAbort) {

						if (isAbort || !script.readyState || /loaded|complete/.test(script.readyState)) {

							// Handle memory leak in IE
							script.onload = script.onreadystatechange = null;

							// Remove the script
							if (head && script.parentNode) {
								head.removeChild(script);
							}

							// Dereference the script
							script = undefined;

							// Callback if not abort
							if (!isAbort) {
								callback(200, "success");
							}
						}
					};
					// Use insertBefore instead of appendChild  to circumvent an IE6 bug.
					// This arises when a base node is used (#2709 and #4378).
					head.insertBefore(script, head.firstChild);
				},

				abort: function () {
					if (script) {
						script.onload(0, 1);
					}
				}
			};
		}
	});


	var // #5280: Internet Explorer will keep connections alive if we don't abort on unload
		xhrOnUnloadAbort = window.ActiveXObject ? function () {
			// Abort all pending requests
			for (var key in xhrCallbacks) {
				xhrCallbacks[key](0, 1);
			}
		} : false,
		xhrId = 0,
		xhrCallbacks;

// Functions to create xhrs
	function createStandardXHR() {
		try {
			return new window.XMLHttpRequest();
		} catch (e) {
		}
	}

	function createActiveXHR() {
		try {
			return new window.ActiveXObject("Microsoft.XMLHTTP");
		} catch (e) {
		}
	}

// Create the request object
// (This is still attached to ajaxSettings for backward compatibility)
	jQuery.ajaxSettings.xhr = window.ActiveXObject ?
		/* Microsoft failed to properly
	 * implement the XMLHttpRequest in IE7 (can't request local files),
	 * so we use the ActiveXObject when it is available
	 * Additionally XMLHttpRequest can be disabled in IE7/IE8 so
	 * we need a fallback.
	 */
		function () {
			return !this.isLocal && createStandardXHR() || createActiveXHR();
		} :
		// For all other browsers, use the standard XMLHttpRequest object
		createStandardXHR;

// Determine support properties
	(function (xhr) {
		jQuery.extend(jQuery.support, {
			ajax: !!xhr,
			cors: !!xhr && ("withCredentials" in xhr)
		});
	})(jQuery.ajaxSettings.xhr());

// Create transport if the browser can provide an xhr
	if (jQuery.support.ajax) {

		jQuery.ajaxTransport(function (s) {
			// Cross domain only allowed if supported through XMLHttpRequest
			if (!s.crossDomain || jQuery.support.cors) {

				var callback;

				return {
					send: function (headers, complete) {

						// Get a new xhr
						var xhr = s.xhr(),
							handle,
							i;

						// Open the socket
						// Passing null username, generates a login popup on Opera (#2865)
						if (s.username) {
							xhr.open(s.type, s.url, s.async, s.username, s.password);
						} else {
							xhr.open(s.type, s.url, s.async);
						}

						// Apply custom fields if provided
						if (s.xhrFields) {
							for (i in s.xhrFields) {
								xhr[i] = s.xhrFields[i];
							}
						}

						// Override mime type if needed
						if (s.mimeType && xhr.overrideMimeType) {
							xhr.overrideMimeType(s.mimeType);
						}

						// X-Requested-With header
						// For cross-domain requests, seeing as conditions for a preflight are
						// akin to a jigsaw puzzle, we simply never set it to be sure.
						// (it can always be set on a per-request basis or even using ajaxSetup)
						// For same-domain requests, won't change header if already provided.
						if (!s.crossDomain && !headers["X-Requested-With"]) {
							headers["X-Requested-With"] = "XMLHttpRequest";
						}

						// Need an extra try/catch for cross domain requests in Firefox 3
						try {
							for (i in headers) {
								xhr.setRequestHeader(i, headers[i]);
							}
						} catch (_) {
						}

						// Do send the request
						// This may raise an exception which is actually
						// handled in jQuery.ajax (so no try/catch here)
						xhr.send((s.hasContent && s.data) || null);

						// Listener
						callback = function (_, isAbort) {

							var status,
								statusText,
								responseHeaders,
								responses,
								xml;

							// Firefox throws exceptions when accessing properties
							// of an xhr when a network error occured
							// http://helpful.knobs-dials.com/index.php/Component_returned_failure_code:_0x80040111_(NS_ERROR_NOT_AVAILABLE)
							try {

								// Was never called and is aborted or complete
								if (callback && (isAbort || xhr.readyState === 4)) {

									// Only called once
									callback = undefined;

									// Do not keep as active anymore
									if (handle) {
										xhr.onreadystatechange = jQuery.noop;
										if (xhrOnUnloadAbort) {
											delete xhrCallbacks[handle];
										}
									}

									// If it's an abort
									if (isAbort) {
										// Abort it manually if needed
										if (xhr.readyState !== 4) {
											xhr.abort();
										}
									} else {
										status = xhr.status;
										responseHeaders = xhr.getAllResponseHeaders();
										responses = {};
										xml = xhr.responseXML;

										// Construct response list
										if (xml && xml.documentElement /* #4958 */) {
											responses.xml = xml;
										}

										// When requesting binary data, IE6-9 will throw an exception
										// on any attempt to access responseText (#11426)
										try {
											responses.text = xhr.responseText;
										} catch (_) {
										}

										// Firefox throws an exception when accessing
										// statusText for faulty cross-domain requests
										try {
											statusText = xhr.statusText;
										} catch (e) {
											// We normalize with Webkit giving an empty statusText
											statusText = "";
										}

										// Filter status for non standard behaviors

										// If the request is local and we have data: assume a success
										// (success with no data won't get notified, that's the best we
										// can do given current implementations)
										if (!status && s.isLocal && !s.crossDomain) {
											status = responses.text ? 200 : 404;
											// IE - #1450: sometimes returns 1223 when it should be 204
										} else if (status === 1223) {
											status = 204;
										}
									}
								}
							} catch (firefoxAccessException) {
								if (!isAbort) {
									complete(-1, firefoxAccessException);
								}
							}

							// Call complete if needed
							if (responses) {
								complete(status, statusText, responses, responseHeaders);
							}
						};

						// if we're in sync mode or it's in cache
						// and has been retrieved directly (IE6 & IE7)
						// we need to manually fire the callback
						if (!s.async || xhr.readyState === 4) {
							callback();
						} else {
							handle = ++xhrId;
							if (xhrOnUnloadAbort) {
								// Create the active xhrs callbacks list if needed
								// and attach the unload handler
								if (!xhrCallbacks) {
									xhrCallbacks = {};
									jQuery(window).unload(xhrOnUnloadAbort);
								}
								// Add to list of active xhrs callbacks
								xhrCallbacks[handle] = callback;
							}
							xhr.onreadystatechange = callback;
						}
					},

					abort: function () {
						if (callback) {
							callback(0, 1);
						}
					}
				};
			}
		});
	}


	var elemdisplay = {},
		iframe, iframeDoc,
		rfxtypes = /^(?:toggle|show|hide)$/,
		rfxnum = /^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,
		timerId,
		fxAttrs = [
			// height animations
			["height", "marginTop", "marginBottom", "paddingTop", "paddingBottom"],
			// width animations
			["width", "marginLeft", "marginRight", "paddingLeft", "paddingRight"],
			// opacity animations
			["opacity"]
		],
		fxNow;

	jQuery.fn.extend({
		show: function (speed, easing, callback) {
			var elem, display;

			if (speed || speed === 0) {
				return this.animate(genFx("show", 3), speed, easing, callback);

			} else {
				for (var i = 0, j = this.length; i < j; i++) {
					elem = this[i];

					if (elem.style) {
						display = elem.style.display;

						// Reset the inline display of this element to learn if it is
						// being hidden by cascaded rules or not
						if (!jQuery._data(elem, "olddisplay") && display === "none") {
							display = elem.style.display = "";
						}

						// Set elements which have been overridden with display: none
						// in a stylesheet to whatever the default browser style is
						// for such an element
						if ((display === "" && jQuery.css(elem, "display") === "none") ||
							!jQuery.contains(elem.ownerDocument.documentElement, elem)) {
							jQuery._data(elem, "olddisplay", defaultDisplay(elem.nodeName));
						}
					}
				}

				// Set the display of most of the elements in a second loop
				// to avoid the constant reflow
				for (i = 0; i < j; i++) {
					elem = this[i];

					if (elem.style) {
						display = elem.style.display;

						if (display === "" || display === "none") {
							elem.style.display = jQuery._data(elem, "olddisplay") || "";
						}
					}
				}

				return this;
			}
		},

		hide: function (speed, easing, callback) {
			if (speed || speed === 0) {
				return this.animate(genFx("hide", 3), speed, easing, callback);

			} else {
				var elem, display,
					i = 0,
					j = this.length;

				for (; i < j; i++) {
					elem = this[i];
					if (elem.style) {
						display = jQuery.css(elem, "display");

						if (display !== "none" && !jQuery._data(elem, "olddisplay")) {
							jQuery._data(elem, "olddisplay", display);
						}
					}
				}

				// Set the display of the elements in a second loop
				// to avoid the constant reflow
				for (i = 0; i < j; i++) {
					if (this[i].style) {
						this[i].style.display = "none";
					}
				}

				return this;
			}
		},

		// Save the old toggle function
		_toggle: jQuery.fn.toggle,

		toggle: function (fn, fn2, callback) {
			var bool = typeof fn === "boolean";

			if (jQuery.isFunction(fn) && jQuery.isFunction(fn2)) {
				this._toggle.apply(this, arguments);

			} else if (fn == null || bool) {
				this.each(function () {
					var state = bool ? fn : jQuery(this).is(":hidden");
					jQuery(this)[state ? "show" : "hide"]();
				});

			} else {
				this.animate(genFx("toggle", 3), fn, fn2, callback);
			}

			return this;
		},

		fadeTo: function (speed, to, easing, callback) {
			return this.filter(":hidden").css("opacity", 0).show().end()
				.animate({opacity: to}, speed, easing, callback);
		},

		animate: function (prop, speed, easing, callback) {
			var optall = jQuery.speed(speed, easing, callback);

			if (jQuery.isEmptyObject(prop)) {
				return this.each(optall.complete, [false]);
			}

			// Do not change referenced properties as per-property easing will be lost
			prop = jQuery.extend({}, prop);

			function doAnimation() {
				// XXX 'this' does not always have a nodeName when running the
				// test suite

				if (optall.queue === false) {
					jQuery._mark(this);
				}

				var opt = jQuery.extend({}, optall),
					isElement = this.nodeType === 1,
					hidden = isElement && jQuery(this).is(":hidden"),
					name, val, p, e, hooks, replace,
					parts, start, end, unit,
					method;

				// will store per property easing and be used to determine when an animation is complete
				opt.animatedProperties = {};

				// first pass over propertys to expand / normalize
				for (p in prop) {
					name = jQuery.camelCase(p);
					if (p !== name) {
						prop[name] = prop[p];
						delete prop[p];
					}

					if ((hooks = jQuery.cssHooks[name]) && "expand" in hooks) {
						replace = hooks.expand(prop[name]);
						delete prop[name];

						// not quite $.extend, this wont overwrite keys already present.
						// also - reusing 'p' from above because we have the correct "name"
						for (p in replace) {
							if (!(p in prop)) {
								prop[p] = replace[p];
							}
						}
					}
				}

				for (name in prop) {
					val = prop[name];
					// easing resolution: per property > opt.specialEasing > opt.easing > 'swing' (default)
					if (jQuery.isArray(val)) {
						opt.animatedProperties[name] = val[1];
						val = prop[name] = val[0];
					} else {
						opt.animatedProperties[name] = opt.specialEasing && opt.specialEasing[name] || opt.easing || 'swing';
					}

					if (val === "hide" && hidden || val === "show" && !hidden) {
						return opt.complete.call(this);
					}

					if (isElement && (name === "height" || name === "width")) {
						// Make sure that nothing sneaks out
						// Record all 3 overflow attributes because IE does not
						// change the overflow attribute when overflowX and
						// overflowY are set to the same value
						opt.overflow = [this.style.overflow, this.style.overflowX, this.style.overflowY];

						// Set display property to inline-block for height/width
						// animations on inline elements that are having width/height animated
						if (jQuery.css(this, "display") === "inline" &&
							jQuery.css(this, "float") === "none") {

							// inline-level elements accept inline-block;
							// block-level elements need to be inline with layout
							if (!jQuery.support.inlineBlockNeedsLayout || defaultDisplay(this.nodeName) === "inline") {
								this.style.display = "inline-block";

							} else {
								this.style.zoom = 1;
							}
						}
					}
				}

				if (opt.overflow != null) {
					this.style.overflow = "hidden";
				}

				for (p in prop) {
					e = new jQuery.fx(this, opt, p);
					val = prop[p];

					if (rfxtypes.test(val)) {

						// Tracks whether to show or hide based on private
						// data attached to the element
						method = jQuery._data(this, "toggle" + p) || (val === "toggle" ? hidden ? "show" : "hide" : 0);
						if (method) {
							jQuery._data(this, "toggle" + p, method === "show" ? "hide" : "show");
							e[method]();
						} else {
							e[val]();
						}

					} else {
						parts = rfxnum.exec(val);
						start = e.cur();

						if (parts) {
							end = parseFloat(parts[2]);
							unit = parts[3] || (jQuery.cssNumber[p] ? "" : "px");

							// We need to compute starting value
							if (unit !== "px") {
								jQuery.style(this, p, (end || 1) + unit);
								start = ((end || 1) / e.cur()) * start;
								jQuery.style(this, p, start + unit);
							}

							// If a +=/-= token was provided, we're doing a relative animation
							if (parts[1]) {
								end = ((parts[1] === "-=" ? -1 : 1) * end) + start;
							}

							e.custom(start, end, unit);

						} else {
							e.custom(start, val, "");
						}
					}
				}

				// For JS strict compliance
				return true;
			}

			return optall.queue === false ?
				this.each(doAnimation) :
				this.queue(optall.queue, doAnimation);
		},

		stop: function (type, clearQueue, gotoEnd) {
			if (typeof type !== "string") {
				gotoEnd = clearQueue;
				clearQueue = type;
				type = undefined;
			}
			if (clearQueue && type !== false) {
				this.queue(type || "fx", []);
			}

			return this.each(function () {
				var index,
					hadTimers = false,
					timers = jQuery.timers,
					data = jQuery._data(this);

				// clear marker counters if we know they won't be
				if (!gotoEnd) {
					jQuery._unmark(true, this);
				}

				function stopQueue(elem, data, index) {
					var hooks = data[index];
					jQuery.removeData(elem, index, true);
					hooks.stop(gotoEnd);
				}

				if (type == null) {
					for (index in data) {
						if (data[index] && data[index].stop && index.indexOf(".run") === index.length - 4) {
							stopQueue(this, data, index);
						}
					}
				} else if (data[index = type + ".run"] && data[index].stop) {
					stopQueue(this, data, index);
				}

				for (index = timers.length; index--;) {
					if (timers[index].elem === this && (type == null || timers[index].queue === type)) {
						if (gotoEnd) {

							// force the next step to be the last
							timers[index](true);
						} else {
							timers[index].saveState();
						}
						hadTimers = true;
						timers.splice(index, 1);
					}
				}

				// start the next in the queue if the last step wasn't forced
				// timers currently will call their complete callbacks, which will dequeue
				// but only if they were gotoEnd
				if (!(gotoEnd && hadTimers)) {
					jQuery.dequeue(this, type);
				}
			});
		}

	});

// Animations created synchronously will run synchronously
	function createFxNow() {
		setTimeout(clearFxNow, 0);
		return (fxNow = jQuery.now());
	}

	function clearFxNow() {
		fxNow = undefined;
	}

// Generate parameters to create a standard animation
	function genFx(type, num) {
		var obj = {};

		jQuery.each(fxAttrs.concat.apply([], fxAttrs.slice(0, num)), function () {
			obj[this] = type;
		});

		return obj;
	}

// Generate shortcuts for custom animations
	jQuery.each({
		slideDown: genFx("show", 1),
		slideUp: genFx("hide", 1),
		slideToggle: genFx("toggle", 1),
		fadeIn: {opacity: "show"},
		fadeOut: {opacity: "hide"},
		fadeToggle: {opacity: "toggle"}
	}, function (name, props) {
		jQuery.fn[name] = function (speed, easing, callback) {
			return this.animate(props, speed, easing, callback);
		};
	});

	jQuery.extend({
		speed: function (speed, easing, fn) {
			var opt = speed && typeof speed === "object" ? jQuery.extend({}, speed) : {
				complete: fn || !fn && easing ||
					jQuery.isFunction(speed) && speed,
				duration: speed,
				easing: fn && easing || easing && !jQuery.isFunction(easing) && easing
			};

			opt.duration = jQuery.fx.off ? 0 : typeof opt.duration === "number" ? opt.duration :
				opt.duration in jQuery.fx.speeds ? jQuery.fx.speeds[opt.duration] : jQuery.fx.speeds._default;

			// normalize opt.queue - true/undefined/null -> "fx"
			if (opt.queue == null || opt.queue === true) {
				opt.queue = "fx";
			}

			// Queueing
			opt.old = opt.complete;

			opt.complete = function (noUnmark) {
				if (jQuery.isFunction(opt.old)) {
					opt.old.call(this);
				}

				if (opt.queue) {
					jQuery.dequeue(this, opt.queue);
				} else if (noUnmark !== false) {
					jQuery._unmark(this);
				}
			};

			return opt;
		},

		easing: {
			linear: function (p) {
				return p;
			},
			swing: function (p) {
				return (-Math.cos(p * Math.PI) / 2) + 0.5;
			}
		},

		timers: [],

		fx: function (elem, options, prop) {
			this.options = options;
			this.elem = elem;
			this.prop = prop;

			options.orig = options.orig || {};
		}

	});

	jQuery.fx.prototype = {
		// Simple function for setting a style value
		update: function () {
			if (this.options.step) {
				this.options.step.call(this.elem, this.now, this);
			}

			(jQuery.fx.step[this.prop] || jQuery.fx.step._default)(this);
		},

		// Get the current size
		cur: function () {
			if (this.elem[this.prop] != null && (!this.elem.style || this.elem.style[this.prop] == null)) {
				return this.elem[this.prop];
			}

			var parsed,
				r = jQuery.css(this.elem, this.prop);
			// Empty strings, null, undefined and "auto" are converted to 0,
			// complex values such as "rotate(1rad)" are returned as is,
			// simple values such as "10px" are parsed to Float.
			return isNaN(parsed = parseFloat(r)) ? !r || r === "auto" ? 0 : r : parsed;
		},

		// Start an animation from one number to another
		custom: function (from, to, unit) {
			var self = this,
				fx = jQuery.fx;

			this.startTime = fxNow || createFxNow();
			this.end = to;
			this.now = this.start = from;
			this.pos = this.state = 0;
			this.unit = unit || this.unit || (jQuery.cssNumber[this.prop] ? "" : "px");

			function t(gotoEnd) {
				return self.step(gotoEnd);
			}

			t.queue = this.options.queue;
			t.elem = this.elem;
			t.saveState = function () {
				if (jQuery._data(self.elem, "fxshow" + self.prop) === undefined) {
					if (self.options.hide) {
						jQuery._data(self.elem, "fxshow" + self.prop, self.start);
					} else if (self.options.show) {
						jQuery._data(self.elem, "fxshow" + self.prop, self.end);
					}
				}
			};

			if (t() && jQuery.timers.push(t) && !timerId) {
				timerId = setInterval(fx.tick, fx.interval);
			}
		},

		// Simple 'show' function
		show: function () {
			var dataShow = jQuery._data(this.elem, "fxshow" + this.prop);

			// Remember where we started, so that we can go back to it later
			this.options.orig[this.prop] = dataShow || jQuery.style(this.elem, this.prop);
			this.options.show = true;

			// Begin the animation
			// Make sure that we start at a small width/height to avoid any flash of content
			if (dataShow !== undefined) {
				// This show is picking up where a previous hide or show left off
				this.custom(this.cur(), dataShow);
			} else {
				this.custom(this.prop === "width" || this.prop === "height" ? 1 : 0, this.cur());
			}

			// Start by showing the element
			jQuery(this.elem).show();
		},

		// Simple 'hide' function
		hide: function () {
			// Remember where we started, so that we can go back to it later
			this.options.orig[this.prop] = jQuery._data(this.elem, "fxshow" + this.prop) || jQuery.style(this.elem, this.prop);
			this.options.hide = true;

			// Begin the animation
			this.custom(this.cur(), 0);
		},

		// Each step of an animation
		step: function (gotoEnd) {
			var p, n, complete,
				t = fxNow || createFxNow(),
				done = true,
				elem = this.elem,
				options = this.options;

			if (gotoEnd || t >= options.duration + this.startTime) {
				this.now = this.end;
				this.pos = this.state = 1;
				this.update();

				options.animatedProperties[this.prop] = true;

				for (p in options.animatedProperties) {
					if (options.animatedProperties[p] !== true) {
						done = false;
					}
				}

				if (done) {
					// Reset the overflow
					if (options.overflow != null && !jQuery.support.shrinkWrapBlocks) {

						jQuery.each(["", "X", "Y"], function (index, value) {
							elem.style["overflow" + value] = options.overflow[index];
						});
					}

					// Hide the element if the "hide" operation was done
					if (options.hide) {
						jQuery(elem).hide();
					}

					// Reset the properties, if the item has been hidden or shown
					if (options.hide || options.show) {
						for (p in options.animatedProperties) {
							jQuery.style(elem, p, options.orig[p]);
							jQuery.removeData(elem, "fxshow" + p, true);
							// Toggle data is no longer needed
							jQuery.removeData(elem, "toggle" + p, true);
						}
					}

					// Execute the complete function
					// in the event that the complete function throws an exception
					// we must ensure it won't be called twice. #5684

					complete = options.complete;
					if (complete) {

						options.complete = false;
						complete.call(elem);
					}
				}

				return false;

			} else {
				// classical easing cannot be used with an Infinity duration
				if (options.duration == Infinity) {
					this.now = t;
				} else {
					n = t - this.startTime;
					this.state = n / options.duration;

					// Perform the easing function, defaults to swing
					this.pos = jQuery.easing[options.animatedProperties[this.prop]](this.state, n, 0, 1, options.duration);
					this.now = this.start + ((this.end - this.start) * this.pos);
				}
				// Perform the next step of the animation
				this.update();
			}

			return true;
		}
	};

	jQuery.extend(jQuery.fx, {
		tick: function () {
			var timer,
				timers = jQuery.timers,
				i = 0;

			for (; i < timers.length; i++) {
				timer = timers[i];
				// Checks the timer has not already been removed
				if (!timer() && timers[i] === timer) {
					timers.splice(i--, 1);
				}
			}

			if (!timers.length) {
				jQuery.fx.stop();
			}
		},

		interval: 13,

		stop: function () {
			clearInterval(timerId);
			timerId = null;
		},

		speeds: {
			slow: 600,
			fast: 200,
			// Default speed
			_default: 400
		},

		step: {
			opacity: function (fx) {
				jQuery.style(fx.elem, "opacity", fx.now);
			},

			_default: function (fx) {
				if (fx.elem.style && fx.elem.style[fx.prop] != null) {
					fx.elem.style[fx.prop] = fx.now + fx.unit;
				} else {
					fx.elem[fx.prop] = fx.now;
				}
			}
		}
	});

// Ensure props that can't be negative don't go there on undershoot easing
	jQuery.each(fxAttrs.concat.apply([], fxAttrs), function (i, prop) {
		// exclude marginTop, marginLeft, marginBottom and marginRight from this list
		if (prop.indexOf("margin")) {
			jQuery.fx.step[prop] = function (fx) {
				jQuery.style(fx.elem, prop, Math.max(0, fx.now) + fx.unit);
			};
		}
	});

	if (jQuery.expr && jQuery.expr.filters) {
		jQuery.expr.filters.animated = function (elem) {
			return jQuery.grep(jQuery.timers, function (fn) {
				return elem === fn.elem;
			}).length;
		};
	}

// Try to restore the default display value of an element
	function defaultDisplay(nodeName) {

		if (!elemdisplay[nodeName]) {

			var body = document.body,
				elem = jQuery("<" + nodeName + ">").appendTo(body),
				display = elem.css("display");
			elem.remove();

			// If the simple way fails,
			// get element's real default display by attaching it to a temp iframe
			if (display === "none" || display === "") {
				// No iframe to use yet, so create it
				if (!iframe) {
					iframe = document.createElement("iframe");
					iframe.frameBorder = iframe.width = iframe.height = 0;
				}

				body.appendChild(iframe);

				// Create a cacheable copy of the iframe document on first call.
				// IE and Opera will allow us to reuse the iframeDoc without re-writing the fake HTML
				// document to it; WebKit & Firefox won't allow reusing the iframe document.
				if (!iframeDoc || !iframe.createElement) {
					iframeDoc = (iframe.contentWindow || iframe.contentDocument).document;
					iframeDoc.write((jQuery.support.boxModel ? "<!doctype html>" : "") + "<html><body>");
					iframeDoc.close();
				}

				elem = iframeDoc.createElement(nodeName);

				iframeDoc.body.appendChild(elem);

				display = jQuery.css(elem, "display");
				body.removeChild(iframe);
			}

			// Store the correct default display
			elemdisplay[nodeName] = display;
		}

		return elemdisplay[nodeName];
	}


	var getOffset,
		rtable = /^t(?:able|d|h)$/i,
		rroot = /^(?:body|html)$/i;

	if ("getBoundingClientRect" in document.documentElement) {
		getOffset = function (elem, doc, docElem, box) {
			try {
				box = elem.getBoundingClientRect();
			} catch (e) {
			}

			// Make sure we're not dealing with a disconnected DOM node
			if (!box || !jQuery.contains(docElem, elem)) {
				return box ? {top: box.top, left: box.left} : {top: 0, left: 0};
			}

			var body = doc.body,
				win = getWindow(doc),
				clientTop = docElem.clientTop || body.clientTop || 0,
				clientLeft = docElem.clientLeft || body.clientLeft || 0,
				scrollTop = win.pageYOffset || jQuery.support.boxModel && docElem.scrollTop || body.scrollTop,
				scrollLeft = win.pageXOffset || jQuery.support.boxModel && docElem.scrollLeft || body.scrollLeft,
				top = box.top + scrollTop - clientTop,
				left = box.left + scrollLeft - clientLeft;

			return {top: top, left: left};
		};

	} else {
		getOffset = function (elem, doc, docElem) {
			var computedStyle,
				offsetParent = elem.offsetParent,
				prevOffsetParent = elem,
				body = doc.body,
				defaultView = doc.defaultView,
				prevComputedStyle = defaultView ? defaultView.getComputedStyle(elem, null) : elem.currentStyle,
				top = elem.offsetTop,
				left = elem.offsetLeft;

			while ((elem = elem.parentNode) && elem !== body && elem !== docElem) {
				if (jQuery.support.fixedPosition && prevComputedStyle.position === "fixed") {
					break;
				}

				computedStyle = defaultView ? defaultView.getComputedStyle(elem, null) : elem.currentStyle;
				top -= elem.scrollTop;
				left -= elem.scrollLeft;

				if (elem === offsetParent) {
					top += elem.offsetTop;
					left += elem.offsetLeft;

					if (jQuery.support.doesNotAddBorder && !(jQuery.support.doesAddBorderForTableAndCells && rtable.test(elem.nodeName))) {
						top += parseFloat(computedStyle.borderTopWidth) || 0;
						left += parseFloat(computedStyle.borderLeftWidth) || 0;
					}

					prevOffsetParent = offsetParent;
					offsetParent = elem.offsetParent;
				}

				if (jQuery.support.subtractsBorderForOverflowNotVisible && computedStyle.overflow !== "visible") {
					top += parseFloat(computedStyle.borderTopWidth) || 0;
					left += parseFloat(computedStyle.borderLeftWidth) || 0;
				}

				prevComputedStyle = computedStyle;
			}

			if (prevComputedStyle.position === "relative" || prevComputedStyle.position === "static") {
				top += body.offsetTop;
				left += body.offsetLeft;
			}

			if (jQuery.support.fixedPosition && prevComputedStyle.position === "fixed") {
				top += Math.max(docElem.scrollTop, body.scrollTop);
				left += Math.max(docElem.scrollLeft, body.scrollLeft);
			}

			return {top: top, left: left};
		};
	}

	jQuery.fn.offset = function (options) {
		if (arguments.length) {
			return options === undefined ?
				this :
				this.each(function (i) {
					jQuery.offset.setOffset(this, options, i);
				});
		}

		var elem = this[0],
			doc = elem && elem.ownerDocument;

		if (!doc) {
			return null;
		}

		if (elem === doc.body) {
			return jQuery.offset.bodyOffset(elem);
		}

		return getOffset(elem, doc, doc.documentElement);
	};

	jQuery.offset = {

		bodyOffset: function (body) {
			var top = body.offsetTop,
				left = body.offsetLeft;

			if (jQuery.support.doesNotIncludeMarginInBodyOffset) {
				top += parseFloat(jQuery.css(body, "marginTop")) || 0;
				left += parseFloat(jQuery.css(body, "marginLeft")) || 0;
			}

			return {top: top, left: left};
		},

		setOffset: function (elem, options, i) {
			var position = jQuery.css(elem, "position");

			// set position first, in-case top/left are set even on static elem
			if (position === "static") {
				elem.style.position = "relative";
			}

			var curElem = jQuery(elem),
				curOffset = curElem.offset(),
				curCSSTop = jQuery.css(elem, "top"),
				curCSSLeft = jQuery.css(elem, "left"),
				calculatePosition = (position === "absolute" || position === "fixed") && jQuery.inArray("auto", [curCSSTop, curCSSLeft]) > -1,
				props = {}, curPosition = {}, curTop, curLeft;

			// need to be able to calculate position if either top or left is auto and position is either absolute or fixed
			if (calculatePosition) {
				curPosition = curElem.position();
				curTop = curPosition.top;
				curLeft = curPosition.left;
			} else {
				curTop = parseFloat(curCSSTop) || 0;
				curLeft = parseFloat(curCSSLeft) || 0;
			}

			if (jQuery.isFunction(options)) {
				options = options.call(elem, i, curOffset);
			}

			if (options.top != null) {
				props.top = (options.top - curOffset.top) + curTop;
			}
			if (options.left != null) {
				props.left = (options.left - curOffset.left) + curLeft;
			}

			if ("using" in options) {
				options.using.call(elem, props);
			} else {
				curElem.css(props);
			}
		}
	};


	jQuery.fn.extend({

		position: function () {
			if (!this[0]) {
				return null;
			}

			var elem = this[0],

				// Get *real* offsetParent
				offsetParent = this.offsetParent(),

				// Get correct offsets
				offset = this.offset(),
				parentOffset = rroot.test(offsetParent[0].nodeName) ? {top: 0, left: 0} : offsetParent.offset();

			// Subtract element margins
			// note: when an element has margin: auto the offsetLeft and marginLeft
			// are the same in Safari causing offset.left to incorrectly be 0
			offset.top -= parseFloat(jQuery.css(elem, "marginTop")) || 0;
			offset.left -= parseFloat(jQuery.css(elem, "marginLeft")) || 0;

			// Add offsetParent borders
			parentOffset.top += parseFloat(jQuery.css(offsetParent[0], "borderTopWidth")) || 0;
			parentOffset.left += parseFloat(jQuery.css(offsetParent[0], "borderLeftWidth")) || 0;

			// Subtract the two offsets
			return {
				top: offset.top - parentOffset.top,
				left: offset.left - parentOffset.left
			};
		},

		offsetParent: function () {
			return this.map(function () {
				var offsetParent = this.offsetParent || document.body;
				while (offsetParent && (!rroot.test(offsetParent.nodeName) && jQuery.css(offsetParent, "position") === "static")) {
					offsetParent = offsetParent.offsetParent;
				}
				return offsetParent;
			});
		}
	});


// Create scrollLeft and scrollTop methods
	jQuery.each({scrollLeft: "pageXOffset", scrollTop: "pageYOffset"}, function (method, prop) {
		var top = /Y/.test(prop);

		jQuery.fn[method] = function (val) {
			return jQuery.access(this, function (elem, method, val) {
				var win = getWindow(elem);

				if (val === undefined) {
					return win ? (prop in win) ? win[prop] :
						jQuery.support.boxModel && win.document.documentElement[method] ||
						win.document.body[method] :
						elem[method];
				}

				if (win) {
					win.scrollTo(
						!top ? val : jQuery(win).scrollLeft(),
						top ? val : jQuery(win).scrollTop()
					);

				} else {
					elem[method] = val;
				}
			}, method, val, arguments.length, null);
		};
	});

	function getWindow(elem) {
		return jQuery.isWindow(elem) ?
			elem :
			elem.nodeType === 9 ?
				elem.defaultView || elem.parentWindow :
				false;
	}


// Create width, height, innerHeight, innerWidth, outerHeight and outerWidth methods
	jQuery.each({Height: "height", Width: "width"}, function (name, type) {
		var clientProp = "client" + name,
			scrollProp = "scroll" + name,
			offsetProp = "offset" + name;

		// innerHeight and innerWidth
		jQuery.fn["inner" + name] = function () {
			var elem = this[0];
			return elem ?
				elem.style ?
					parseFloat(jQuery.css(elem, type, "padding")) :
					this[type]() :
				null;
		};

		// outerHeight and outerWidth
		jQuery.fn["outer" + name] = function (margin) {
			var elem = this[0];
			return elem ?
				elem.style ?
					parseFloat(jQuery.css(elem, type, margin ? "margin" : "border")) :
					this[type]() :
				null;
		};

		jQuery.fn[type] = function (value) {
			return jQuery.access(this, function (elem, type, value) {
				var doc, docElemProp, orig, ret;

				if (jQuery.isWindow(elem)) {
					// 3rd condition allows Nokia support, as it supports the docElem prop but not CSS1Compat
					doc = elem.document;
					docElemProp = doc.documentElement[clientProp];
					return jQuery.support.boxModel && docElemProp ||
						doc.body && doc.body[clientProp] || docElemProp;
				}

				// Get document width or height
				if (elem.nodeType === 9) {
					// Either scroll[Width/Height] or offset[Width/Height], whichever is greater
					doc = elem.documentElement;

					// when a window > document, IE6 reports a offset[Width/Height] > client[Width/Height]
					// so we can't use max, as it'll choose the incorrect offset[Width/Height]
					// instead we use the correct client[Width/Height]
					// support:IE6
					if (doc[clientProp] >= doc[scrollProp]) {
						return doc[clientProp];
					}

					return Math.max(
						elem.body[scrollProp], doc[scrollProp],
						elem.body[offsetProp], doc[offsetProp]
					);
				}

				// Get width or height on the element
				if (value === undefined) {
					orig = jQuery.css(elem, type);
					ret = parseFloat(orig);
					return jQuery.isNumeric(ret) ? ret : orig;
				}

				// Set the width or height on the element
				jQuery(elem).css(type, value);
			}, type, value, arguments.length, null);
		};
	});


// Expose jQuery to the global object
	window.jQuery = window.$ = jQuery;

// Expose jQuery as an AMD module, but only for AMD loaders that
// understand the issues with loading multiple versions of jQuery
// in a page that all might call define(). The loader will indicate
// they have special allowances for multiple jQuery versions by
// specifying define.amd.jQuery = true. Register as a named module,
// since jQuery can be concatenated with other files that may use define,
// but not use a proper concatenation script that understands anonymous
// AMD modules. A named AMD is safest and most robust way to register.
// Lowercase jquery is used because AMD module names are derived from
// file names, and jQuery is normally delivered in a lowercase file name.
// Do this after creating the global so that if an AMD module wants to call
// noConflict to hide this version of jQuery, it will work.
	if (typeof define === "function" && define.amd && define.amd.jQuery) {
		define("jquery", [], function () {
			return jQuery;
		});
	}


})(window);
;
;
/* module-key = 'com.atlassian.plugins.atlassian-plugins-webresource-plugin:data', location = 'js/data/data.js' */
window.WRM = window.WRM || {};
/**
 * A constructor for the internal implementation of WRM.data. Can be instantiated
 * many times for testing, but the global instance is at WRM.data
 * @param globalHolder the object in which to find _unparsedData, etc. (typically window.WRM)
 * @return the data api object
 */
window.WRM._createDataImpl = function(globalHolder) {
    globalHolder._unparsedData = globalHolder._unparsedData || {};
    globalHolder._unparsedErrors = globalHolder._unparsedErrors || {};
    globalHolder._claimedData = globalHolder._claimedData || {};

    function parseJsonData(unparsedData) {
        if (!unparsedData) {
            return unparsedData;
        }
        return JSON.parse(unparsedData);
    }

    // This is extremely defensive, but we use Object.prototype.hasOwnProperty as developers could include
    // a piece of data with key "hasOwnProperty"
    function _hasOwnProperty(o, key) {
        return Object.prototype.hasOwnProperty.call(o, key);
    }

    var successCallbacks = {};
    var failureCallbacks = {};

    function _addCallback(key, cb, callbacks) {
        if (!cb) {
            return; // they didn't supply a callback
        }
        if (_hasOwnProperty(callbacks, key)) {
            return; // ignore duplicate claims
        }
        callbacks[key] = cb;
    }

    function _extractData(key, allUnparsed, allClaimed) {
        var unparsedData = allUnparsed[key];
        try {
            var data = parseJsonData(unparsedData);
            delete allUnparsed[key]; // purge from unparsed data map
            allClaimed[key] = true; // mark data as claimed
            return data;
        }
        catch (e) {
            console && console.log && console.log("JSON Error parsing data with key " + key + ": " + e);
            return undefined;
        }
    }

    function _callbackLater(callback, data, key) {
        var f = function() {
            try {
                callback(data);
            } catch (e) {
                console && console.log && console.log("Excpetion calling bigpipe callback for " + key + ": " + e);
            }
        };
        setTimeout(f, 0);
    }

    /**
     * Tries to find any callbacks for data in `unparsed`. If we find a callback for a key,
     * but the value cannot be parsed, then we try and call a callback in `fallbackCallbacks`.
     *
     * @param unparsed Object that contains unparsed key-value pairs
     * @param callbacks map of key->callback
     * @param fallbackCallbacks map of key->callback
     * @private
     */
    function _findAndCallCallbacks(unparsed, claimed, callbacks, fallbackCallbacks) {
        for (var k in unparsed) {
            if (_hasOwnProperty(unparsed, k)) {
                if (_hasOwnProperty(callbacks, k)) {
                    var callback = callbacks[k];
                    var data = _extractData(k, unparsed, claimed);
                    if (typeof data === "undefined") { // parse error? send it as an error
                        callback = fallbackCallbacks[k]
                    }
                    delete callbacks[k]; // you only get it once
                    delete fallbackCallbacks[k]; // you only get it once
                    if (callback) {
                        _callbackLater(callback, data, k);
                    }
                }
            }
        }
    }

    /**
     * internal method, exposed so can be called from script tags output by the WRM
     */
    globalHolder._dataArrived = function() {
        _findAndCallCallbacks(globalHolder._unparsedData, globalHolder._claimedData, successCallbacks, failureCallbacks);
        _findAndCallCallbacks(globalHolder._unparsedData, globalHolder._claimedData, failureCallbacks, failureCallbacks);
    };


    var api = {};
    /**
     * Called when the promise completed normally
     * @callback successCallback
     * @param {*} JSON data
     */
    /**
     * Called when the promise completed excpetionally or timed out. This callback takes no arguments.
     * @callback failureCallback
     */

    /**
     * Claims the data returned from the server under the given key.
     *
     * Data for a specific key is retrieved only once. Subsequent requests for the same key will return no data.
     * If the data is required by multiple callers, the suggested pattern here is to wrap an API eg
     * AJS.contextPath around the WRM.data.claim method and cache inside that external API - see context-path.js
     * in this directory for an example.
     *
     * This method has two forms: claim(key) that is synchronous, and claim(key, successcb, failurecb) that is
     * asynchronous.
     *
     * For synchronous callers:
     * Callers must ensure that any JS requesting data appears *after* the data is inserted into the page - this
     * is achieved via the caller expressing a web-resource <dependency> on the resource serving the data.
     *
     * For asynchronous callers:
     * Either the successcb or failurecb callbacks will be called. If the data is already known (either success,
     * or failure) then a callback will be invoked presently (on a timeout(0)).
     *
     * @param {string} key data key.
     * @param {successCallback} [successcb]
     * @param {failureCallback} [failurecb]
     * @returns {*|undefined} JSON data in the synchronous version, undefined in the async version.
     */
    api.claim = function(key, successcb, failurecb) {
        if (!successcb && !failurecb) {
            if (_hasOwnProperty(globalHolder._claimedData, key)) {
                console && console.error && console.error("Data with key " + key + " has already been claimed");
            }
            // Lazily parses JSON data from WRM._unparsedData
            if (globalHolder._unparsedData && _hasOwnProperty(globalHolder._unparsedData, key)) {
                return _extractData(key, globalHolder._unparsedData, globalHolder._claimedData); // synchronous
            }
        } else { // async version
            _addCallback(key, successcb, successCallbacks);
            _addCallback(key, failurecb, failureCallbacks);
            globalHolder._dataArrived(); // we might already have that data
        }
    };

    return api;

};

// create the global WRM.data instance
WRM.data = WRM._createDataImpl(WRM);

if (typeof define === 'function') {
    define('wrm/data', [], function() {
        return WRM.data;
    });
}

;
;
/* module-key = 'com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path', location = 'js/data/context-path.js' */
(function() {
    var contextPath = null;

    (window.AJS || (window.AJS = {}));

    AJS.contextPath = function() {
        if (contextPath === null) {
            contextPath = WRM.data.claim('com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path.context-path');
        }

        // If WRM.data.claim is unavailable (which it is for static sites), use the "ajs-context-path" meta tag.
        if (!contextPath) {
            var metaEl = document.querySelector('meta[name=ajs-context-path]');
            if (metaEl) {
                contextPath = metaEl.getAttribute('content');
            }
        }

        return contextPath;
    };

    // TODO: hack, this only exists for unit testing. Should refactor into a factory here
    AJS.contextPath._reset = function() {
        contextPath = null;
    };

    if (typeof define === 'function') {
        define('wrm/context-path', [], function() {
            return AJS.contextPath;
        });
    }
}());;
;
/* module-key = 'com.atlassian.plugins.atlassian-plugins-webresource-rest:curl', location = 'js/wrm/curl-config.js' */
(function() {
    if (!window.WRM) { window.WRM = {} };
    window.curl = {
        // Namespace curl's api under WRM
        apiContext: WRM,
        defineContext: WRM,
        useCrossOriginAttribute: WRM.data.claim("com.atlassian.plugins.atlassian-plugins-webresource-rest:curl.cross-origin-resources")
    };
}());;
;
/* module-key = 'com.atlassian.plugins.atlassian-plugins-webresource-rest:curl', location = 'js/wrm/lib/curl-0.7.3.js' */
/** @license MIT License (c) copyright B Cavalier & J Hann */

/**
 * curl (cujo resource loader)
 * An AMD-compliant javascript module and resource loader
 *
 * curl is part of the cujo.js family of libraries (http://cujojs.com/)
 *
 * Licensed under the MIT License at:
 * 		http://www.opensource.org/licenses/mit-license.php
 *
 */
(function (global) {
//"use strict"; don't restore this until the config routine is refactored
	var
		version = '0.7.3',
		curlName = 'curl',
		defineName = 'define',
		userCfg,
		prevCurl,
		prevDefine,
		doc = global.document,
		head = doc && (doc['head'] || doc.getElementsByTagName('head')[0]),
		// to keep IE from crying, we need to put scripts before any
		// <base> elements, but after any <meta>. this should do it:
		insertBeforeEl = head && head.getElementsByTagName('base')[0] || null,
		// constants / flags
		msgUsingExports = {},
		msgFactoryExecuted = {},
		// this is the list of scripts that IE is loading. one of these will
		// be the "interactive" script. too bad IE doesn't send a readystatechange
		// event to tell us exactly which one.
		activeScripts = {},
		// readyStates for IE6-9
		readyStates = 'addEventListener' in global ? {} : { 'loaded': 1, 'complete': 1 },
		// these are always handy :)
		cleanPrototype = {},
		toString = cleanPrototype.toString,
		undef,
		// local cache of resource definitions (lightweight promises)
		cache = {},
		// local url cache
		urlCache = {},
		// preload are files that must be loaded before any others
		preload = false,
		// net to catch anonymous define calls' arguments (non-IE browsers)
		argsNet,
		// RegExp's used later, pre-compiled here
		dontAddExtRx = /\?|\.js\b/,
		absUrlRx = /^\/|^[^:]+:\/\//,
		findDotsRx = /(\.)(\.?)(?:$|\/([^\.\/]+.*)?)/g,
		removeCommentsRx = /\/\*[\s\S]*?\*\/|(?:[^\\])\/\/.*?[\n\r]/g,
		findRValueRequiresRx = /require\s*\(\s*["']([^"']+)["']\s*\)|(?:[^\\]?)(["'])/g,
		cjsGetters,
		core;

	function noop () {}

	function isType (obj, type) {
		return toString.call(obj).indexOf('[object ' + type) == 0;
	}

	function normalizePkgDescriptor (descriptor) {
		var main;

		descriptor.path = removeEndSlash(descriptor['path'] || descriptor['location'] || '');
		main = descriptor['main'] || './main';
		if (!isRelUrl(main)) main = './' + main;
		// trailing slashes trick reduceLeadingDots to see them as base ids
		descriptor.main = reduceLeadingDots(main, descriptor.name + '/');
		//if (isRelUrl(descriptor.main)) throw new Error('invalid main (' + main + ') in ' + descriptor.name);
		descriptor.config = descriptor['config'];

		return descriptor;
	}

	function isRelUrl (it) {
		return it.charAt(0) == '.';
	}

	function isAbsUrl (it) {
		return absUrlRx.test(it);
	}

	function joinPath (path, file) {
		return removeEndSlash(path) + '/' + file;
	}

	function removeEndSlash (path) {
		return path && path.charAt(path.length - 1) == '/' ? path.substr(0, path.length - 1) : path;
	}

	function reduceLeadingDots (childId, baseId) {
		// this algorithm is similar to dojo's compactPath, which interprets
		// module ids of "." and ".." as meaning "grab the module whose name is
		// the same as my folder or parent folder".  These special module ids
		// are not included in the AMD spec but seem to work in node.js, too.
		var removeLevels, normId, levels, isRelative, diff;

		removeLevels = 1;
		normId = childId;

		// remove leading dots and count levels
		if (isRelUrl(normId)) {
			isRelative = true;
			normId = normId.replace(findDotsRx, function (m, dot, doubleDot, remainder) {
				if (doubleDot) removeLevels++;
				return remainder || '';
			});
		}

		if (isRelative) {
			levels = baseId.split('/');
			diff = levels.length - removeLevels;
			if (diff < 0) {
				// this is an attempt to navigate above parent module.
				// maybe dev wants a url or something. punt and return url;
				return childId;
			}
			levels.splice(diff, removeLevels);
			// normId || [] prevents concat from adding extra "/" when
			// normId is reduced to a blank string
			return levels.concat(normId || []).join('/');
		}
		else {
			return normId;
		}
	}

	function pluginParts (id) {
		var delPos = id.indexOf('!');
		return {
			resourceId: id.substr(delPos + 1),
			// resourceId can be zero length
			pluginId: delPos >= 0 && id.substr(0, delPos)
		};
	}

	function Begetter () {}

	function beget (parent, mixin) {
		Begetter.prototype = parent || cleanPrototype;
		var child = new Begetter();
		Begetter.prototype = cleanPrototype;
		for (var p in mixin) child[p] = mixin[p];
		return child;
	}

	function Promise () {

		var self, thens, complete;

		self = this;
		thens = [];

		function then (resolved, rejected, progressed) {
			// capture calls to callbacks
			thens.push([resolved, rejected, progressed]);
		}

		function notify (which, arg) {
			// complete all callbacks
			var aThen, cb, i = 0;
			while ((aThen = thens[i++])) {
				cb = aThen[which];
				if (cb) cb(arg);
			}
		}

		complete = function promiseComplete (success, arg) {
			// switch over to sync then()
			then = success ?
				function (resolved, rejected) { resolved && resolved(arg); } :
				function (resolved, rejected) { rejected && rejected(arg); };
			// we no longer throw during multiple calls to resolve or reject
			// since we don't really provide useful information anyways.
			complete = noop;
			// complete all callbacks
			notify(success ? 0 : 1, arg);
			// no more notifications
			notify = noop;
			// release memory
			thens = undef;
		};

		this.then = function (resolved, rejected, progressed) {
			then(resolved, rejected, progressed);
			return self;
		};
		this.resolve = function (val) {
			self.resolved = val;
			complete(true, val);
		};
		this.reject = function (ex) {
			self.rejected = ex;
			complete(false, ex);
		};
		this.progress = function (msg) {
			notify(2, msg);
		}

	}

	function isPromise (o) {
		return o instanceof Promise;
	}

	function when (promiseOrValue, callback, errback, progback) {
		// we can't just sniff for then(). if we do, resources that have a
		// then() method will make dependencies wait!
		if (isPromise(promiseOrValue)) {
			return promiseOrValue.then(callback, errback, progback);
		}
		else {
			return callback(promiseOrValue);
		}
	}

	/**
	 * Returns a function that when executed, executes a lambda function,
	 * but only executes it the number of times stated by howMany.
	 * When done executing, it executes the completed function. Each callback
	 * function receives the same parameters that are supplied to the
	 * returned function each time it executes.  In other words, they
	 * are passed through.
	 * @private
	 * @param howMany {Number} must be greater than zero
	 * @param lambda {Function} executed each time
	 * @param completed {Function} only executes once when the counter
	 *   reaches zero
	 * @returns {Function}
	 */
	function countdown (howMany, lambda, completed) {
		var result;
		return function () {
			if (--howMany >= 0 && lambda) result = lambda.apply(undef, arguments);
			// we want ==, not <=, since some callers expect call-once functionality
			if (howMany == 0 && completed) completed(result);
			return result;
		}
	}

	core = {

		/**
		 * * reduceLeadingDots of id against parentId
		 *		- if there are too many dots (path goes beyond parent), it's a url
		 *			- return reduceLeadingDots of id against baseUrl + parentId;
		 *	* if id is a url (starts with dots or slash or protocol)
		 *		- pathInfo = { config: userCfg, url: url }
		 *	* if not a url, id-to-id transform here.
		 *		- main module expansion
		 *		- plugin prefix expansion
		 *		- coordinate main module expansion with plugin expansion
		 *			- main module expansion happens first
		 *		- future: other transforms?
		 * @param id
		 * @param parentId
		 * @param cfg
		 * @return {*}
		 */
		toAbsId: function (id, parentId, cfg) {
			var absId, pluginId, parts;

			absId = reduceLeadingDots(id, parentId);

			// if this is still a relative path, it must be a url
			// so just punt, otherwise...
			if (isRelUrl(absId)) return absId;

			// plugin id split
			parts = pluginParts(absId);
			pluginId = parts.pluginId;
			absId = pluginId || parts.resourceId;

			// main id expansion
			if (absId in cfg.pathMap) {
				absId = cfg.pathMap[absId].main || absId;
			}

			// plugin id expansion
			if (pluginId) {
				if (pluginId.indexOf('/') < 0 && !(pluginId in cfg.pathMap)) {
					absId = joinPath(cfg.pluginPath, pluginId);
				}
				absId = absId + '!' + parts.resourceId;
			}

			return absId;
		},

		createContext: function (cfg, baseId, depNames, isPreload) {

			var def;

			def = new Promise();
			def.id = baseId || ''; // '' == global
			def.isPreload = isPreload;
			def.depNames = depNames;
			def.config = cfg;

			// functions that dependencies will use:

			function toAbsId (childId) {
				return core.toAbsId(childId, def.id, cfg);
			}

			function toUrl (n) {
				// the AMD spec states that we should not append an extension
				// in this function since it could already be appended.
				// we need to use toAbsId in case this is a module id.
				return core.resolvePathInfo(toAbsId(n), cfg).url;
			}

			function localRequire (ids, callback, errback) {
				var cb, rvid, childDef, earlyExport;

				// this is public, so send pure function
				// also fixes issue #41
				cb = callback && function () { callback.apply(undef, arguments[0]); };

				// RValue require (CommonJS)
				if (isType(ids, 'String')) {
					if (cb) {
						throw new Error('require(id, callback) not allowed');
					}
					// return resource
					rvid = toAbsId(ids);
					childDef = cache[rvid];
					if (!(rvid in cache)) {
						// this should only happen when devs attempt their own
						// manual wrapping of cjs modules or get confused with
						// the callback syntax:
						throw new Error('Module not resolved: '  + rvid);
					}
					earlyExport = isPromise(childDef) && childDef.exports;
					return earlyExport || childDef;
				}
				else {
					when(core.getDeps(core.createContext(cfg, def.id, ids, isPreload)), cb, errback);
				}
			}

			def.require = localRequire;
			localRequire['toUrl'] = toUrl;
			def.toAbsId = toAbsId;

			return def;
		},

		createResourceDef: function (cfg, id, isPreload) {
			var def, origResolve, execute;

			def = core.createContext(cfg, id, undef, isPreload);
			origResolve = def.resolve;

			// using countdown to only execute definition function once
			execute = countdown(1, function (deps) {
				def.deps = deps;
				try {
					return core.executeDefFunc(def);
				}
				catch (ex) {
					def.reject(ex);
				}
			});

			// intercept resolve function to execute definition function
			// before resolving
			def.resolve = function resolve (deps) {
				when(isPreload || preload, function () {
					origResolve((cache[def.id] = urlCache[def.url] = execute(deps)));
				});
			};

			// track exports
			def.exportsReady = function executeFactory (deps) {
				when(isPreload || preload, function () {
					// only resolve early if we also use exports (to avoid
					// circular dependencies). def.exports will have already
					// been set by the getDeps loop before we get here.
					if (def.exports) {
						execute(deps);
						def.progress(msgFactoryExecuted);
					}
				});
			};

			return def;
		},

		createPluginDef: function (cfg, id, resId, isPreload) {
			var def;

			// use resource id for local require and toAbsId
			def = core.createContext(cfg, resId, undef, isPreload);

			return def;
		},

		getCjsRequire: function (def) {
			return def.require;
		},

		getCjsExports: function (def) {
			return def.exports || (def.exports = {});
		},

		getCjsModule: function (def) {
			var module = def.module;
			if (!module) {
				module = def.module = {
					'id': def.id,
					'uri': core.getDefUrl(def),
					'exports': core.getCjsExports(def),
					'config': function () { return def.config; }
				};
				module.exports = module['exports']; // oh closure compiler!
			}
			return module;
		},

		getDefUrl: function (def) {
			// note: this is used by cjs module.uri
			return def.url || (def.url = core.checkToAddJsExt(def.require['toUrl'](def.id), def.config));
		},

		/**
		 * Sets the curl() and define() APIs.
		 * @param [cfg] {Object|Null} set of config params. If missing or null,
		 *   this function will set the default API!
		 */
		setApi: function (cfg) {
			/*
			scenarios:
			1. global config sets apiName: "require"
				- first call to config sets api
				- second and later calls are ignored
				- prevCurl cannot exist
			2. no global config, first call to config() sets api
				- first call to config has no api info
				- second call to config sets api
				- third and later calls must be ignored
			3. global config that doesn't set api, first call does though
				- same as #2
			4. api info is never set
				- how to know when to stop ignoring?

			objectives:
			1. fail before mistakenly overwriting global[curlName]
			2. allow rename/relocate of curl() and define()
			3. restore curl() if we overwrote it
			 */

			var apiName, defName, apiObj, defObj,
				failMsg, okToOverwrite;

			apiName = curlName;
			defName = defineName;
			apiObj = defObj = global;
			failMsg = ' already exists';

			// if we're not setting defaults
			if (cfg) {
				// is it ok to overwrite existing api functions?
				okToOverwrite = cfg['overwriteApi'] || cfg.overwriteApi;
				// allow dev to rename/relocate curl() to another object
				apiName = cfg['apiName'] || cfg.apiName || apiName;
				apiObj = cfg['apiContext'] || cfg.apiContext || apiObj;
				// define() too
				defName = cfg['defineName'] || cfg.defineName || defName;
				defObj = cfg['defineContext'] || cfg.defineContext || defObj;

				// curl() already existed, restore it if this is not a
				// setDefaults pass. dev must be a good citizen and set
				// apiName/apiContext (see below).
				if (prevCurl && isType(prevCurl, 'Function')) {
					// restore previous curl()
					global[curlName] = prevCurl;
				}
				prevCurl = null; // don't check ever again
				// ditto for define()
				if (prevDefine && isType(prevDefine, 'Function')) {
					// restore previous curl()
					global[defineName] = prevDefine;
				}
				prevDefine = null; // don't check ever again

				// check if we're mistakenly overwriting either api
				// if we're configuring, and there's a curl(), and it's not
				// ours -- and we're not explicitly overwriting -- throw!
				// Note: if we're setting defaults, we *must* overwrite curl
				// so that dev can configure it.  This is no different than
				// noConflict()-type methods.
				if (!okToOverwrite) {
					if (apiObj[apiName] && apiObj[apiName] != _curl) {
						throw new Error(apiName + failMsg);
					}
					// check if we're overwriting amd api
					if (defObj[defName] && defObj[defName] != define) {
						throw new Error(defName + failMsg);
					}
				}

			}

			// set curl api
			apiObj[apiName] = _curl;

			// set AMD public api: define()
			defObj[defName] = define;

		},

		config: function (cfg) {
			var prevCfg, newCfg, pluginCfgs, p;

			// convert from closure-safe names
			if ('baseUrl' in cfg) cfg.baseUrl = cfg['baseUrl'];
			if ('main' in cfg) cfg.main = cfg['main'];
			if ('preloads' in cfg) cfg.preloads = cfg['preloads'];
			if ('pluginPath' in cfg) cfg.pluginPath = cfg['pluginPath'];
			if ('dontAddFileExt' in cfg || cfg.dontAddFileExt) {
				cfg.dontAddFileExt = new RegExp(cfg['dontAddFileExt'] || cfg.dontAddFileExt);
			}

			prevCfg = userCfg;
			newCfg = beget(prevCfg, cfg);

			// create object to hold path map.
			// each plugin and package will have its own pathMap, too.
			newCfg.pathMap = beget(prevCfg.pathMap);
			pluginCfgs = cfg['plugins'] || {};
			newCfg.plugins = beget(prevCfg.plugins);
			newCfg.paths = beget(prevCfg.paths, cfg.paths);
			newCfg.packages = beget(prevCfg.packages, cfg.packages);

			// temporary arrays of paths. this will be converted to
			// a regexp for fast path parsing.
			newCfg.pathList = [];

			// normalizes path/package info and places info on either
			// the global cfg.pathMap or on a plugin-specific altCfg.pathMap.
			// also populates a pathList on cfg or plugin configs.
			function fixAndPushPaths (coll, isPkg) {
				var id, pluginId, data, parts, currCfg, info;
				for (var name in coll) {
					data = coll[name];
					if (isType(data, 'String')) data = {
						path: coll[name]
					};
					// grab the package id, if specified. default to
					// property name, if missing.
					data.name = data.name || name;
					currCfg = newCfg;
					// check if this is a plugin-specific path
					parts = pluginParts(removeEndSlash(data.name));
					id = parts.resourceId;
					pluginId = parts.pluginId;
					if (pluginId) {
						// plugin-specific path
						currCfg = pluginCfgs[pluginId];
						if (!currCfg) {
							currCfg = pluginCfgs[pluginId] = beget(newCfg);
							currCfg.pathMap = beget(newCfg.pathMap);
							currCfg.pathList = [];
						}
						// remove plugin-specific path from coll
						delete coll[name];
					}
					if (isPkg) {
						info = normalizePkgDescriptor(data);
						if (info.config) info.config = beget(newCfg, info.config);
					}
					else {
						info = { path: removeEndSlash(data.path) };
					}
					info.specificity = id.split('/').length;
					if (id) {
						currCfg.pathMap[id] = info;
						currCfg.pathList.push(id);
					}
					else {
						// naked plugin name signifies baseUrl for plugin
						// resources. baseUrl could be relative to global
						// baseUrl.
						currCfg.baseUrl = core.resolveUrl(data.path, newCfg);
					}
				}
			}

			// adds the path matching regexp onto the cfg or plugin cfgs.
			function convertPathMatcher (cfg) {
				var pathMap = cfg.pathMap;
				cfg.pathRx = new RegExp('^(' +
					cfg.pathList.sort(function (a, b) { return pathMap[b].specificity - pathMap[a].specificity; } )
						.join('|')
						.replace(/\/|\./g, '\\$&') +
					')(?=\\/|$)'
				);
				delete cfg.pathList;
			}

			// fix all new packages, then paths (in case there are
			// plugin-specific paths for a main module, such as wire!)
			fixAndPushPaths(cfg['packages'], true);
			fixAndPushPaths(cfg['paths'], false);

			// process plugins after packages in case we already perform an
			// id transform on a plugin (i.e. it's a package.main)
			for (p in pluginCfgs) {
				var absId = core.toAbsId(p + '!', '', newCfg);
				newCfg.plugins[absId.substr(0, absId.length - 1)] = pluginCfgs[p];
			}
			pluginCfgs = newCfg.plugins;

			// create search regex for each path map
			for (p in pluginCfgs) {
				// inherit full config
				pluginCfgs[p] = beget(newCfg, pluginCfgs[p]);
				var pathList = pluginCfgs[p].pathList;
				if (pathList) {
					pluginCfgs[p].pathList = pathList.concat(newCfg.pathList);
					convertPathMatcher(pluginCfgs[p]);
				}
			}

			// ugh, this is ugly, but necessary until we refactor this function
			// copy previous pathMap items onto pathList
			for (p in prevCfg.pathMap) {
				if (!newCfg.pathMap.hasOwnProperty(p)) newCfg.pathList.push(p);
			}

			convertPathMatcher(newCfg);

			return newCfg;

		},

		checkPreloads: function (cfg) {
			var preloads;
			preloads = cfg && cfg['preloads'];
			if (preloads && preloads.length > 0) {
				// chain from previous preload, if any.
				when(preload, function () {
					preload = core.getDeps(core.createContext(userCfg, undef, preloads, true));
				});
			}

		},

		resolvePathInfo: function (absId, cfg) {
			// searches through the configured path mappings and packages
			var pathMap, pathInfo, path, pkgCfg;

			pathMap = cfg.pathMap;

			if (!isAbsUrl(absId)) {
				path = absId.replace(cfg.pathRx, function (match) {
					// TODO: remove fallbacks here since they should never need to happen
					pathInfo = pathMap[match] || {};
					pkgCfg = pathInfo.config;
					return pathInfo.path || '';
				});
			}
			else {
				path = absId;
			}

			return {
				config: pkgCfg || userCfg,
				url: core.resolveUrl(path, cfg)
			};
		},

		resolveUrl: function (path, cfg) {
			var baseUrl = cfg.baseUrl;
			return baseUrl && !isAbsUrl(path) ? joinPath(baseUrl, path) : path;
		},

		checkToAddJsExt: function (url, cfg) {
			// don't add extension if a ? is found in the url (query params)
			// i'd like to move this feature to a moduleLoader
			return url + ((cfg || userCfg).dontAddFileExt.test(url) ? '' : '.js');
		},

		loadScript: function (def, success, failure) {
			// script processing rules learned from RequireJS

			// insert script
			var el = doc.createElement('script');

            // Modified by Atlassian //
            if (userCfg.useCrossOriginAttribute) {
                var parser;
                if (typeof window.URL === 'function') {
                    parser = new window.URL(def.url, document.location);
                } else {
                    parser = document.createElement('a');
                    parser.href = def.url;
                    parser.href = parser.href; //Forces an absolute URL, needed for IE11
                }
                if (parser.protocol !== document.location.protocol ||
                    parser.hostname !== document.location.hostname ||
                    parser.port !== document.location.port) {
                    el.crossorigin = "anonymous";
                }
            }
            // End of Atlassian modification //

			// initial script processing
			function process (ev) {
				ev = ev || global.event;
				// detect when it's done loading
				// ev.type == 'load' is for all browsers except IE6-9
				// IE6-9 need to use onreadystatechange and look for
				// el.readyState in {loaded, complete} (yes, we need both)
				if (ev.type == 'load' || readyStates[el.readyState]) {
					delete activeScripts[def.id];
					// release event listeners
					el.onload = el.onreadystatechange = el.onerror = ''; // ie cries if we use undefined
					success();
				}
			}

			function fail (e) {
				// some browsers send an event, others send a string,
				// but none of them send anything useful, so just say we failed:
				failure(new Error('Syntax or http error: ' + def.url));
			}

			// set type first since setting other properties could
			// prevent us from setting this later
			// actually, we don't even need to set this at all
			//el.type = 'text/javascript';
			// using dom0 event handlers instead of wordy w3c/ms
			el.onload = el.onreadystatechange = process;
			el.onerror = fail;
			// js! plugin uses alternate mimetypes
			el.type = def.mimetype || 'text/javascript';
			// TODO: support other charsets?
			el.charset = 'utf-8';
			el.async = !def.order;
			el.src = def.url;

			// loading will start when the script is inserted into the dom.
			// IE will load the script sync if it's in the cache, so
			// indicate the current resource definition if this happens.
			activeScripts[def.id] = el;

			head.insertBefore(el, insertBeforeEl);

			// the js! plugin uses this
			return el;
		},

		extractCjsDeps: function (defFunc) {
			// Note: ignores require() inside strings and comments
			var source, ids = [], currQuote;
			// prefer toSource (FF) since it strips comments
			source = typeof defFunc == 'string' ?
					 defFunc :
					 defFunc.toSource ? defFunc.toSource() : defFunc.toString();
			// remove comments, then look for require() or quotes
			source.replace(removeCommentsRx, '').replace(findRValueRequiresRx, function (m, id, qq) {
				// if we encounter a quote
				if (qq) {
					currQuote = currQuote == qq ? undef : currQuote;
				}
				// if we're not inside a quoted string
				else if (!currQuote) {
					ids.push(id);
				}
				return ''; // uses least RAM/CPU
			});
			return ids;
		},

		fixArgs: function (args) {
			// resolve args
			// valid combinations for define:
			// (string, array, object|function) sax|saf
			// (array, object|function) ax|af
			// (string, object|function) sx|sf
			// (object|function) x|f

			var id, deps, defFunc, defFuncArity, len, cjs;

			len = args.length;

			defFunc = args[len - 1];
			defFuncArity = isType(defFunc, 'Function') ? defFunc.length : -1;

			if (len == 2) {
				if (isType(args[0], 'Array')) {
					deps = args[0];
				}
				else {
					id = args[0];
				}
			}
			else if (len == 3) {
				id = args[0];
				deps = args[1];
			}

			// Hybrid format: assume that a definition function with zero
			// dependencies and non-zero arity is a wrapped CommonJS module
			if (!deps && defFuncArity > 0) {
				cjs = true;
				deps = ['require', 'exports', 'module'].slice(0, defFuncArity).concat(core.extractCjsDeps(defFunc));
			}

			return {
				id: id,
				deps: deps || [],
				res: defFuncArity >= 0 ? defFunc : function () { return defFunc; },
				cjs: cjs
			};
		},

		executeDefFunc: function (def) {
			var resource, moduleThis;
			// the force of AMD is strong so anything returned
			// overrides exports.
			// node.js assumes `this` === `exports` so we do that
			// for all cjs-wrapped modules, just in case.
			// also, use module.exports if that was set
			// (node.js convention).
			// note: if .module exists, .exports exists.
			moduleThis = def.cjs ? def.exports : undef;
			resource = def.res.apply(moduleThis, def.deps);
			if (resource === undef && def.exports) {
				// note: exports will equal module.exports unless
				// module.exports was reassigned inside module.
				resource = def.module ? (def.exports = def.module.exports) : def.exports;
			}
			return resource;
		},

		defineResource: function (def, args) {

			def.res = args.res;
			def.cjs = args.cjs;
			def.depNames = args.deps;
			core.getDeps(def);

		},

		getDeps: function (parentDef) {

			var i, names, deps, len, dep, completed, name,
				exportCollector, resolveCollector;

			deps = [];
			names = parentDef.depNames;
			len = names.length;

			if (names.length == 0) allResolved();

			function collect (dep, index, alsoExport) {
				deps[index] = dep;
				if (alsoExport) exportCollector(dep, index);
			}

			// reducer-collectors
			exportCollector = countdown(len, collect, allExportsReady);
			resolveCollector = countdown(len, collect, allResolved);

			// initiate the resolution of all dependencies
			// Note: the correct handling of early exports relies on the
			// fact that the exports pseudo-dependency is always listed
			// before other module dependencies.
			for (i = 0; i < len; i++) {
				name = names[i];
				// is this "require", "exports", or "module"?
				if (name in cjsGetters) {
					// a side-effect of cjsGetters is that the cjs
					// property is also set on the def.
					resolveCollector(cjsGetters[name](parentDef), i, true);
					// if we are using the `module` or `exports` cjs variables,
					// signal any waiters/parents that we can export
					// early (see progress callback in getDep below).
					// note: this may fire for `require` as well, if it
					// is listed after `module` or `exports` in the deps list,
					// but that is okay since all waiters will only record
					// it once.
					if (parentDef.exports) {
						parentDef.progress(msgUsingExports);
					}
				}
				// check for blanks. fixes #32.
				// this helps support yepnope.js, has.js, and the has! plugin
				else if (!name) {
					resolveCollector(undef, i, true);
				}
				// normal module or plugin resource
				else {
					getDep(name, i);
				}
			}

			return parentDef;

			function getDep (name, index) {
				var resolveOnce, exportOnce, childDef, earlyExport;

				resolveOnce = countdown(1, function (dep) {
					exportOnce(dep);
					resolveCollector(dep, index);
				});
				exportOnce = countdown(1, function (dep) {
					exportCollector(dep, index);
				});

				// get child def / dep
				childDef = core.fetchDep(name, parentDef);

				// check if childDef can export. if it can, then
				// we missed the notification and it will never fire in the
				// when() below.
				earlyExport = isPromise(childDef) && childDef.exports;
				if (earlyExport) {
					exportOnce(earlyExport);
				}

				when(childDef,
					resolveOnce,
					parentDef.reject,
					parentDef.exports && function (msg) {
						// messages are only sent from childDefs that support
						// exports, and we only notify parents that understand
						// exports too.
						if (childDef.exports) {
							if (msg == msgUsingExports) {
								// if we're using exports cjs variable on both sides
								exportOnce(childDef.exports);
							}
							else if (msg == msgFactoryExecuted) {
								resolveOnce(childDef.exports);
							}
						}
					}
				);
			}

			function allResolved () {
				parentDef.resolve(deps);
			}

			function allExportsReady () {
				parentDef.exportsReady && parentDef.exportsReady(deps);
			}

		},

		fetchResDef: function (def) {

			// ensure url is computed
			core.getDefUrl(def);

			core.loadScript(def,

				function () {
					var args = argsNet;
					argsNet = undef; // reset it before we get deps

					// if our resource was not explicitly defined with an id (anonymous)
					// Note: if it did have an id, it will be resolved in the define()
					if (def.useNet !== false) {

						// if !args, nothing was added to the argsNet
						if (!args || args.ex) {
							def.reject(new Error(((args && args.ex) || 'define() missing or duplicated: ' + def.url)));
						}
						else {
							core.defineResource(def, args);
						}
					}

				},

				def.reject

			);

			return def;

		},

		fetchDep: function (depName, parentDef) {
			var toAbsId, isPreload, cfg, parts, mainId, loaderId, pluginId,
				resId, pathInfo, def, tempDef, resCfg;

			toAbsId = parentDef.toAbsId;
			isPreload = parentDef.isPreload;
			cfg = parentDef.config || userCfg; // is this fallback necessary?

			// check for plugin loaderId
			// TODO: this runs pluginParts() twice. how to run it just once?
			parts = pluginParts(toAbsId(depName));
			resId = parts.resourceId;
			// get id of first resource to load (which could be a plugin)
			mainId = parts.pluginId || resId;
			pathInfo = core.resolvePathInfo(mainId, cfg);

			// get custom module loader from package config if not a plugin
			if (parts.pluginId) {
				loaderId = mainId;
			}
			else {
				// TODO: move config.moduleLoader to config.transform
				loaderId = pathInfo.config['moduleLoader'] || pathInfo.config.moduleLoader;
				if (loaderId) {
					// TODO: allow transforms to have relative module ids?
					// (we could do this by returning package location from
					// resolvePathInfo. why not return all package info?)
					resId = mainId;
					mainId = loaderId;
					pathInfo = core.resolvePathInfo(loaderId, cfg);
				}
			}

			if (mainId in cache) {
				def = cache[mainId];
			}
			else if (pathInfo.url in urlCache) {
				def = cache[mainId] = urlCache[pathInfo.url];
			}
			else {
				def = core.createResourceDef(pathInfo.config, mainId, isPreload);
				// TODO: can this go inside createResourceDef?
				// TODO: can we pass pathInfo.url to createResourceDef instead?
				def.url = core.checkToAddJsExt(pathInfo.url, pathInfo.config);
				cache[mainId] = urlCache[pathInfo.url] = def;
				core.fetchResDef(def);
			}

			// plugin or transformer
			if (mainId == loaderId) {

				// we need to use an anonymous promise until plugin tells
				// us normalized id. then, we need to consolidate the promises
				// below. Note: exports objects will be different between
				// pre-normalized and post-normalized defs! does this matter?
				// don't put this resource def in the cache because if the
				// resId doesn't change, the check if this is a new
				// normalizedDef (below) will think it's already being loaded.
				tempDef = new Promise();

				// note: this means moduleLoaders can store config info in the
				// plugins config, too.
				resCfg = cfg.plugins[loaderId] || cfg;

				// wait for plugin resource def
				when(def, function(plugin) {
					var normalizedDef, fullId, dynamic;

					dynamic = plugin['dynamic'];
					// check if plugin supports the normalize method
					if ('normalize' in plugin) {
						// note: dojo/has may return falsey values (0, actually)
						resId = plugin['normalize'](resId, toAbsId, def.config) || '';
					}
					else {
						resId = toAbsId(resId);
					}

					// use the full id (loaderId + id) to id plugin resources
					// so multiple plugins may each process the same resource
					// resId could be blank if the plugin doesn't require any (e.g. "domReady!")
					fullId = loaderId + '!' + resId;
					normalizedDef = cache[fullId];

					// if this is our first time fetching this (normalized) def
					if (!(fullId in cache)) {

						// because we're using resId, plugins, such as wire!,
						// can use paths relative to the resource
						normalizedDef = core.createPluginDef(resCfg, fullId, resId, isPreload);

						// don't cache non-determinate "dynamic" resources
						if (!dynamic) {
							cache[fullId] = normalizedDef;
						}

						// curl's plugins prefer to receive a deferred,
						// but to be compatible with AMD spec, we have to
						// piggy-back on the callback function parameter:
						var loaded = function (res) {
							normalizedDef.resolve(res);
							if (!dynamic) cache[fullId] = res;
						};
						loaded['resolve'] = loaded;
						loaded['reject'] = loaded['error'] = normalizedDef.reject;

						// load the resource!
						plugin.load(resId, normalizedDef.require, loaded, resCfg);

					}

					// chain defs (resolve when plugin.load executes)
					if (tempDef != normalizedDef) {
						when(normalizedDef, tempDef.resolve, tempDef.reject, tempDef.progress);
					}

				}, tempDef.reject);

			}

			// return tempDef if this is a plugin-based resource
			return tempDef || def;
		},

		getCurrentDefName: function () {
			// IE6-9 mark the currently executing thread as "interactive"
			// Note: Opera lies about which scripts are "interactive", so we
			// just have to test for it. Opera provides a true browser test, not
			// a UA sniff, thankfully.
			// learned this trick from James Burke's RequireJS
			var def;
			if (!isType(global.opera, 'Opera')) {
				for (var d in activeScripts) {
					if (activeScripts[d].readyState == 'interactive') {
						def = d;
						break;
					}
				}
			}
			return def;
		}

	};

	// hook-up cjs free variable getters
	cjsGetters = {'require': core.getCjsRequire, 'exports': core.getCjsExports, 'module': core.getCjsModule};

	function _curl (/* various */) {

		var args = [].slice.call(arguments), cfg;

		// extract config, if it's specified
		if (isType(args[0], 'Object')) {
			cfg = args.shift();
			_config(cfg);
		}

		return new CurlApi(args[0], args[1], args[2]);

	}

	function _config (cfg) {
		if (cfg) {
			core.setApi(cfg);
			userCfg = core.config(cfg);
			// check for preloads
			core.checkPreloads(cfg);
			// check for main module(s)
			if ('main' in cfg) {
				// start in next turn to wait for other modules in current file
				setTimeout(function () {
					var ctx;
					ctx = core.createContext(userCfg, undef, [].concat(cfg['main']));
					core.getDeps(ctx);
				}, 0);
			}
		}
	}

	// thanks to Joop Ringelberg for helping troubleshoot the API
	function CurlApi (ids, callback, errback, waitFor) {
		var then, ctx;
		ctx = core.createContext(userCfg, undef, [].concat(ids));
		this['then'] = then = function (resolved, rejected) {
			when(ctx,
				// return the dependencies as arguments, not an array
				function (deps) {
					if (resolved) resolved.apply(undef, deps);
				},
				// just throw if the dev didn't specify an error handler
				function (ex) {
					if (rejected) rejected(ex); else throw ex;
				}
			);
			return this;
		};
		this['next'] = function (ids, cb, eb) {
			// chain api
			return new CurlApi(ids, cb, eb, ctx);
		};
		this['config'] = _config;
		if (callback || errback) then(callback, errback);
		when(waitFor, function () { core.getDeps(ctx); });
	}

	_curl['version'] = version;
	_curl['config'] = _config;

	function _define (args) {

		var id, def, pathInfo;

		id = args.id;

		if (id == undef) {
			if (argsNet !== undef) {
				argsNet = { ex: 'Multiple anonymous defines in url' };
			}
			else if (!(id = core.getCurrentDefName())/* intentional assignment */) {
				// anonymous define(), defer processing until after script loads
				argsNet = args;
			}
		}
		if (id != undef) {
			// named define(), it is in the cache if we are loading a dependency
			// (could also be a secondary define() appearing in a built file, etc.)
			def = cache[id];
			if (!(id in cache)) {
				// id is an absolute id in this case, so we can get the config.
				pathInfo = core.resolvePathInfo(id, userCfg);
				def = core.createResourceDef(pathInfo.config, id);
				cache[id] = def;
			}
			if (!isPromise(def)) throw new Error('duplicate define: ' + id);
			// check if this resource has already been resolved
			def.useNet = false;
			core.defineResource(def, args);
		}

	}

	function define () {
		// wrap inner _define so it can be replaced without losing define.amd
		var args = core.fixArgs(arguments);
		_define(args);
	}

	// indicate our capabilities:
	define['amd'] = { 'plugins': true, 'jQuery': true, 'curl': version };

	// default configs
	userCfg = {
		baseUrl: '',
		pluginPath: 'curl/plugin',
		dontAddFileExt: dontAddExtRx,
		paths: {},
		packages: {},
		plugins: {},
		pathMap: {},
		pathRx: /$^/
	};

	// handle pre-existing global
	prevCurl = global[curlName];
	prevDefine = global[defineName];
	if (!prevCurl || isType(prevCurl, 'Function')) {
		// set default api
		core.setApi();
	}
	else {
		// remove global curl object
		global[curlName] = undef; // can't use delete in IE 6-8
		// configure curl
		_config(prevCurl);
	}

	// allow curl to be a dependency
	cache[curlName] = _curl;

	// expose curl core for special plugins and modules
	// Note: core overrides will only work in either of two scenarios:
	// 1. the files are running un-compressed (Google Closure or Uglify)
	// 2. the overriding module was compressed into the same file as curl.js
	// Compiling curl and the overriding module separately won't work.
	cache['curl/_privileged'] = {
		'core': core,
		'cache': cache,
		'config': function () { return userCfg; },
		'_define': _define,
		'_curl': _curl,
		'Promise': Promise
	};

}(this.window || (typeof global != 'undefined' && global) || this));
;
;
/* module-key = 'com.atlassian.plugins.atlassian-plugins-webresource-rest:curl', location = 'js/wrm/lib/curl-css-0.7.3.js' */
/** MIT License (c) copyright B Cavalier & J Hann */

/**
 * curl css! plugin
 *
 * Licensed under the MIT License at:
 * 		http://www.opensource.org/licenses/mit-license.php
 *
 */
// HACK: curl-config.js moves define() from the global namespace to WRM; this breaks the loader plugin in this file
// (which assumes that define() is global) so I have manually changed all loader plugins to use WRM.define()
(function (global) {
"use strict";

/*
 * AMD css! plugin
 * This plugin will load and wait for css files.  This could be handy when
 * loading css files as part of a component or a theme.
 * Some browsers do not support the load event handler of the link element.
 * Therefore, we have to use other means to detect when a css file loads.
 * Some browsers don't support the error event handler, either.
 * The HTML5 spec states that the LINK element should have both load and
 * error events:
 * http://www.w3.org/TR/html5/semantics.html#the-link-element
 *
 * This plugin tries to use the load event and a universal work-around when
 * it is invoked.  If the load event works, it is used on every successive load.
 * Therefore, browsers that support the load event will just work (i.e. no
 * need for hacks!).  FYI, sniffing for the load event is tricky
 * since most browsers still have a non-functional onload property.
 *
 * IE is a special case since it also has a 31-stylesheet limit (finally
 * fixed in IE 10).  To get around this, we can use a set of <style>
 * elements instead of <link> elements and add @import; rules into them.
 * This allows us to add considerably more than 31 stylesheets.  See the
 * comment for the loadImport method for more information.
 *
 * The universal work-around for other browsers watches a stylesheet
 * until its rules are available (not null or undefined).  There are
 * nuances, of course, between the various browsers.  The isLinkReady
 * function accounts for these.
 *
 * Note: it appears that all browsers load @import'ed stylesheets before
 * fully processing the rest of the importing stylesheet. Therefore, we
 * don't need to find and wait for any @import rules explicitly.  They'll
 * be waited for implicitly.
 *
 * Global configuration options:
 *
 * cssNoWait: Boolean. You can instruct this plugin to not wait
 * for any css resources. They'll get loaded asap, but other code won't wait
 * for them.  Note: you cannot use this option and use more than 31
 * stylesheets in IE6-9!
 *
 * cssWatchPeriod: if direct load-detection techniques fail, this option
 * determines the msec to wait between brute-force checks for rules. The
 * default is 50 msec.
 *
 * You may specify an alternate file extension or no extension:
 *      require('css!myproj/component.less') // --> myproj/component.less
 *      require('css!myproj/component') // --> myproj/component.css
 *
 * When using alternative file extensions, be sure to serve the files from
 * the server with the correct mime type (text/css) or some browsers won't
 * parse them, causing an error.
 *
 * usage:
 *      require(['css!myproj/comp.css']); // load and wait for myproj/comp.css
 *      define(['css!some/folder/file'], {}); // wait for some/folder/file.css
 *      require(['css!myWidget']);
 *
 * Tested in:
 *      Firefox 3.6, 4.0, 11-16
 *      Safari 3.0.4, 3.2.1, 5.0
 *      Chrome 19
 *      Opera 11.62, 12.01
 *      IE 6-10
 *  Error handlers work in the following:
 *  	Firefox 12+
 *  	Safari 6+
 *  	Chrome 9+
 *  	IE6-9
 *  Error handlers don't work in:
 *  	Opera 11.62, 12.01
 *  	Firefox 3.6, 4.0
 *  	IE 10
*/

	var
		// compressibility shortcuts
		createElement = 'createElement',
		parentNode = 'parentNode',
		setTimeout = global.setTimeout,
		// doc will be undefined during a build
		doc = global.document,
		// find the head element and set it to it's standard property if nec.
		head,
		// infer IE 6-9
		// IE 10 still doesn't seem to have link.onerror support,
		// but it doesn't choke on >31 stylesheets at least!
		shouldCollectSheets = doc && doc.createStyleSheet && !(doc.documentMode >= 10),
		ieCollectorSheets = [],
		ieCollectorPool = [],
		ieCollectorQueue = [],
		ieMaxCollectorSheets = 12,
		loadSheet,
		msgHttp = 'HTTP or network error.',
		hasEvent = {};

	if (doc) {
		head = doc.head || doc.getElementsByTagName('head')[0];
		if (shouldCollectSheets) {
			loadSheet = loadImport;
		}
		else {
			loadSheet = loadLink;
		}
	}

	/**
	 * Once we've absolutely determined if the current browser supports an
	 * event handler, we set it with this function.
	 * @private
	 * @param event
	 * @param hasNative
	 */
	function setLoadDetection (event, hasNative) {
		hasEvent[event] = hasEvent[event] || hasNative;
	}

	/**
	 * Creates a link element.
	 * IE6-9 don't use this function.
	 * @private
	 * @return {Element}
	 */
	function createLink () {
		var link;
		link = doc[createElement]('link');
		link.rel = "stylesheet";
		link.type = "text/css";
		return link;
	}

	/***** load functions for compliant browsers *****/

	/**
	 * This is the load handler for compliant browsers.
	 * Latest Chrome, Safari, Opera, FF, IE10
	 * @private
	 * @param link
	 * @param cb
	 */
	function loadHandler (link, cb) {
		link.onload = function () {
			// we know browser is compliant now!
			setLoadDetection('load', true);
			cb();
		};
	}

	/**
	 * This is the load handler for compliant browsers.
	 * Latest Chrome, Safari (not Opera 12 or IE10)
	 * @private
	 * @param link
	 * @param cb
	 */
	function errorHandler (link, cb) {
		link.onerror = function () {
			// we know browser is compliant now!
			setLoadDetection('error', true);
			cb();
		};
	}

	/***** ie load functions *****/

	/**
	 * Loads a stylesheet via IE's addImport() method, which is the only
	 * way to detect both onload and onerror in IE.  If we create a "parent
	 * stylesheet", we can addImport() other sheets into it.  The tricky part
	 * is that we have to load one sheet at a time and create a new onload
	 * and onerror event for each one.  (IE only fires an onload or onerror
	 * function once, but if you replace the onload or onerror functions,
	 * it'll fire the new ones if there's another load or error event.
	 * Way to be awesome, IE team!)
	 *
	 * To get around the one-sheet-at-a-time problem, we create many
	 * parent stylesheets at once.  If we create 12 parent sheets, we can load
	 * up to 12 imported sheets at once.  This has an additional benefit:
	 * we can load 372 (12 * 31) stylesheets.  IE 6-9 can dynamically load only
	 * 31 stylesheets in any one scope.  By creating multiple parent sheets, we
	 * create multiple scopes.
	 *
	 * The astute reader will have discovered a major flaw with this approach:
	 * we've killed the cascade (the "C" in CSS).  Rules in stylesheets override
	 * rules in stylesheets that were declared earlier.  This is universal.
	 * However, the IE team interpreted the word "earlier" differently than
	 * everybody else (including the w3c).  IE interprets it as meaning "earlier
	 * in time" (temporal), rather than "earlier in the document" (spacial).
	 * Specifically, the temporal order of the insertion of the sheet into the
	 * DOM/BOM is what matters in IE.
	 *
	 * In other words: the bungling of the IE team (both in allowing sheet
	 * error handlers to execute multiple times and in forcing us to use
	 * temporal order rather than dom order) has allowed us to implement
	 * this work-around.  Almost seems like they planned it.
	 *
	 * Note: CSS debugging tools in IE 6-8 seem to sometimes fail when inserting
	 * stylesheets dynamically, no matter which method we use to insert them.
	 *
	 * IE 6-9 only.
	 * @private
	 * @param url {String}
	 * @param cb {Function}
	 * @param eb {Function}
	 */
	function loadImport (url, cb, eb) {
		var coll;

		// push stylesheet and callbacks on queue
		ieCollectorQueue.push({
			url:url,
			cb:cb,
			eb: function failure () { eb(new Error(msgHttp)); }
		});

		// find an available collector
		coll = getIeCollector();

		// if we have an available collector, import a stylesheet from the queue
		if (coll) {
			loadNextImport(coll);
		}

	}

	/**
	 * Grabs the next sheet/callback item from the queue and imports it into
	 * the provided collector sheet.
	 * IE 6-9 only.
	 * @private
	 * @param coll {Stylesheet}
	 */
	function loadNextImport (coll) {
		var imp, collSheet;

		imp = ieCollectorQueue.shift();
		collSheet = coll.styleSheet;

		if (imp) {
			coll.onload = function () {
				imp.cb(imp.ss);
				loadNextImport(coll);
			};
			coll.onerror = function () {
				imp.eb();
				loadNextImport(coll);
			};
			imp.ss = collSheet.imports[collSheet.addImport(imp.url)];
		}
		else {
			finalize(coll);
			returnIeCollector(coll);
		}
	}

	/**
	 * Returns a collector sheet to the pool.
	 * IE 6-9 only.
	 * @private
	 * @param coll {Stylesheet}
	 */
	function returnIeCollector (coll) {
		ieCollectorPool.push(coll);
	}

	/**
	 * Gets the next collector sheet in the pool.  If there is no collector
	 * in the pool and less than the maximum collector sheets has been created,
	 * a new one is created. If the max collectors have been created,
	 * undefined is returned.
	 * IE 6-9 only.
	 * @private
	 * @return {HTMLElement} a stylesheet element to act as a collector sheet
	 */
	function getIeCollector () {
		var el;

		el = ieCollectorPool.shift();

		if (!el && ieCollectorSheets.length < ieMaxCollectorSheets) {
			el = doc.createElement('style');
			ieCollectorSheets.push(el);
			head.appendChild(el);
		}

		return el;
	}

	/***** load functions for legacy browsers (old Safari and FF, Opera) *****/

	/**
	 * Try all sorts of crazy shiz to determine when the stylesheet is loaded.
	 * @private
	 * @param link
	 * @return {Boolean}
	 */
	function isLinkReady (link) {
		var ready, sheet, rules;
		// don't bother testing until we've fully initialized the link and doc.
		if (!link.href || !isDocumentComplete()) return false;

		ready = false;
		try {
			sheet = link.sheet;
			if (sheet) {
				// old FF will throw a security exception here when an XD
				// sheet is loaded. webkits (that don't support onload)
				// will return null when an XD sheet is loaded
				rules = sheet.cssRules;
				ready = rules === null;
				if (!ready && rules) {
					// Safari needs to further test for rule manipulation
					// on local stylesheets (Opera too?)
					sheet.insertRule('-curl-css-test {}', 0);
					sheet.deleteRule(0);
					ready = true;
				}
			}
		}
		catch (ex) {
			// a "security" or "access denied" error indicates that an XD
			// stylesheet has been successfully loaded in old FF
			// Opera throws before the sheet is loaded (and before onload
			// in some cases, so we have to test for it here)
			ready = Object.prototype.toString.call(window.opera) != '[object Opera]'
				&& /security|denied/i.test(ex.message);
		}

		return ready;
	}

	/**
	 * Indicate that a link element is loaded or errored.
	 * @private
	 * @param link
	 */
	function finalize (link) {
		// noop serves as a flag that a link event fired
		// note: Opera and IE won't clear handlers if we use a non-function
		link.onload = link.onerror = noop;
	}

	/**
	 * Detect is a link is loaded or errored.
	 * @private
	 * @param link
	 * @return {Boolean}
	 */
	function isFinalized (link) {
		return link.onload == noop || !link.onload;
	}

	/**
	 * This is the function that will be used when a browser doesn't support
	 * the standard onload and handler -- or until we've verified that the
	 * browser supports it.
	 * @private
	 * @param link
	 * @param wait {Number} msec between checks
	 * @param cb
	 */
	function loadWatcher (link, wait, cb) {
		// watches a stylesheet for loading signs.
		if (hasEvent['load']) return; // always check on re-entry
		if (isLinkReady(link)) {
			cb(link.sheet);
		}
		else if (!isFinalized(link)) {
			setTimeout(function () { loadWatcher(link, wait, cb); }, wait);
		}
	}

	/**
	 * This is the function that wil be used when a browser doens't support
	 * the standard onerror handler -- or until we've verifies that the
	 * browser supports it.
	 * Note: so far we don't have a good way to check or failed stylesheets
	 * without attempting to refetch the stylesheet using an IMG, OBJECT,
	 * or any other means, so we haven't implemented this.
	 * @private
	 * @param link
	 * @param wait {Number} msec between checks
	 * @param eb
	 */
	function errorWatcher (link, wait, eb) {
		if (hasEvent['error']) return;
		// TODO: figure out a method to test for stylesheet failure without risk of re-fetching
		// TODO: timeout?
	}

	/**
	 * Launch both standards-compliant onload and fallback at the same time.
	 * One of these will eventually work.
	 * @private
	 * @param link
	 * @param wait {Number} msec between checks
	 * @param cb
	 */
	function linkLoaded (link, wait, cb) {
		// most browsers now support link.onload, but many older browsers
		// don't. Browsers that don't will launch the loadWatcher to repeatedly
		// test the link for readiness.
		function load () {
			// only executes once (link.onload is acting as a flag)
			if (isFinalized(link)) return;
			finalize(link);
// PLUGWEB-330 Unblocking CSS loading, patch begin.
//			waitForDocumentComplete(function () { cb(link.sheet); });
			cb(link.sheet);
// PLUGWEB-330 Unblocking CSS loading, patch end.
		}
		// always try standard handler
		loadHandler(link, load);
		// also try the fallback
		loadWatcher(link, wait, load);
	}

	/**
	 * Launch both standards-compliant onerror and fallback at the same time.
	 * One of these will eventually work in most browsers.
	 * @private
	 * @param link
	 * @param wait {Number} msec between checks
	 * @param cb
	 */
	function linkErrored (link, wait, cb) {
		// very few browsers (Chrome 19+ and FF9+ as of Apr 2012) have a
		// functional onerror handler (and those only detect 40X/50X http
		// errors, not parsing errors as per the w3c spec).
		// IE6-10 call onload when there's an http error. (nice, real nice)
		// this only matters in IE10 since IE6-9 use the addImport method
		// which does call onerror.
		function error () {
			// only executes once (link.onload is acting as a flag)
			if (isFinalized(link)) return;
			finalize(link);
			cb(new Error(msgHttp));
		}
		// always try standard handler
		errorHandler(link, error);
		// if we are not sure if the native error event works, try the fallback
		errorWatcher(link, wait, error);
	}

	/**
	 * Kick-start the load and detection process.
	 * @private
	 * @param url
	 * @param cb
	 * @param eb
	 * @param period {Number} msec between checks
	 */
	function loadLink (url, cb, eb, period) {
		var link;
		link = createLink();
		linkLoaded(link, period, cb);
		linkErrored(link, period, eb);
		link.href = url;
		// Modified by Atlassian
		// This allows consumers to inject CSS in other places of the page, in case they already have
		// CSS resources outside of <head> and don't want WRM to break CSS ordering.
		var point = doc.getElementById('__wrm_injection_point') || head;
		point.appendChild(link);
		// End of Atlassian modification
	}

	/**
	 * Keep checking for the document readyState to be "complete" since
	 * Chrome doesn't apply the styles to the document until that time.
	 * If we return before readyState == 'complete', Chrome may not have
	 * applied the styles, yet.
	 * Chrome only.
	 * @private
	 * @param cb
	 */
	function waitForDocumentComplete (cb) {
		// this isn't exactly the same as domReady (when dom can be
		// manipulated). it's later (when styles are applied).
		// chrome needs this (and opera?)
		function complete () {
			if (isDocumentComplete()) {
				cb();
			}
			else {
				setTimeout(complete, 10);
			}
		}
		complete();
	}

	/**
	 * Returns true if the documents' readyState == 'complete' or the
	 * document doesn't implement readyState.
	 * Chrome only.
	 * @private
	 * @return {Boolean}
	 */
	function isDocumentComplete () {
		return !doc.readyState || doc.readyState == 'complete';
	}

	function nameWithExt (name, defaultExt) {
		return name.lastIndexOf('.') <= name.lastIndexOf('/') ?
			name + '.' + defaultExt : name;
	}

	function noop () {}

	/***** finally! the actual plugin *****/

	WRM.define('curl/plugin/css', {

		'normalize': function (resourceId, normalize) {
			var resources, normalized;

			if (!resourceId) return resourceId;

			resources = [resourceId];
			normalized = [];

			for (var i = 0, len = resources.length; i < len; i++) {
				normalized.push(normalize(resources[i]));
			}

			return normalized.join(',');
		},

		'load': function (resourceId, require, callback, config) {
			var sheets, resources, cssWatchPeriod, cssNoWait, loadingCount, i;
			sheets = [];
			resources = [resourceId || ''];
			cssWatchPeriod = config['cssWatchPeriod'] || 50;
			cssNoWait = config['cssNoWait'];
			loadingCount = resources.length;

			// this function must get called just once per stylesheet!
			function loaded (ss) {
				if (resources.length > 1) sheets.push(ss);
				if (--loadingCount == 0) {
					callback(resources.length == 1 ? ss : sheets);
				}
			}

			function failed (ex) {
				var eb;
				eb = callback.reject || function (ex) {
					throw ex;
				};
				eb(ex);
			}

			for (i = 0; i < resources.length; i++) {

				resourceId = resources[i];

				var url, link;
				url = nameWithExt(require['toUrl'](resourceId), 'css');

				if (cssNoWait) {
					link = createLink();
					link.href = url;
					head.appendChild(link);
					loaded(link.sheet || link.styleSheet);
				}
				else {
					loadSheet(url, loaded, failed, cssWatchPeriod);
				}
			}

		},

		'plugin-builder': './builder/css',
		'pluginBuilder': './builder/css'

	});

})(this);
;
;
/* module-key = 'com.atlassian.plugins.atlassian-plugins-webresource-rest:curl', location = 'js/wrm/lib/curl-js-0.7.3.js' */
/** MIT License (c) copyright B Cavalier & J Hann */

/**
 * curl js! plugin
 *
 * Licensed under the MIT License at:
 * 		http://www.opensource.org/licenses/mit-license.php
 *
 */

/**
 * usage:
 *  require(['ModuleA', 'js!myNonAMDFile.js!order', 'js!anotherFile.js!order], function (ModuleA) {
 * 		var a = new ModuleA();
 * 		document.body.appendChild(a.domNode);
 * 	});
 *
 * Specify the !order suffix for files that must be evaluated in order.
 * Using the !order option and requiring js files more than once doesn't make
 * much sense since files are loaded exactly once.
 *
 * Specify the !exports=someGlobalVar option to return a global variable to
 * the module depending on the javascript file. Using this option also allows
 * positive error feedback to the loader since it can now detect if the
 * javascript file failed to load correctly.
 *
 * Async=false rules learned from @getify's LABjs!
 * http://wiki.whatwg.org/wiki/Dynamic_Script_Execution_Order
 *
 */
// HACK: curl-config.js moves define() from the global namespace to WRM; this breaks the loader plugin in this file
// (which assumes that define() is global) so I have manually changed all loader plugins to use WRM.define()
(function (global, doc, testGlobalVar) {
WRM.define('curl/plugin/js', ['curl/_privileged'], function (priv) {
"use strict";
	var cache = {},
		queue = [],
		supportsAsyncFalse = doc && doc.createElement('script').async == true,
		Promise,
		waitForOrderedScript,
		undef;

	Promise = priv['Promise'];

	function nameWithExt (name, defaultExt) {
		return name.lastIndexOf('.') <= name.lastIndexOf('/') ?
			name + '.' + defaultExt : name;
	}

	function loadScript (def, success, failure) {
		// script processing rules learned from RequireJS

		var deadline, completed, el;

		// default deadline is very far in the future (5 min)
		// devs should set something reasonable if they want to use it
		deadline = new Date().valueOf() + (def.timeoutMsec || 300000);

		// initial script processing
		function process () {
			completed = true;
			if (def.exports) def.resolved = testGlobalVar(def.exports);
			if (!def.exports || def.resolved) {
				success(el); // pass el so it can be removed (text/cache)
			}
			else {
				failure();
			}
		}

		function fail (ex) {
			// Exception is squashed by curl.js unfortunately
			completed = true;
			failure(ex);
		}

		// some browsers (Opera and IE6-8) don't support onerror and don't fire
		// readystatechange if the script fails to load so we need to poll.
		// this poller only runs if def.exports is specified and failure callback
		// is defined (see below)
		function poller () {
			// if the script loaded
			if (!completed) {
				// if neither process or fail as run and our deadline is in the past
				if (deadline < new Date()) {
					failure();
				}
				else {
					setTimeout(poller, 10);
				}
			}
		}
		if (failure && def.exports) setTimeout(poller, 10);

		el = priv['core'].loadScript(def, process, fail);

	}

	function fetch (def, promise) {

		loadScript(def,
			function () {
				// if there's another queued script
				var next = queue.shift();
				waitForOrderedScript = queue.length > 0;
				if (next) {
					// go get it (from cache hopefully)
					fetch.apply(null, next);
				}
				promise.resolve(def.resolved || true);
			},
			function (ex) {
				promise.reject(ex);
			}
		);

	}

	return {

		// the !options force us to cache ids in the plugin and provide normalize
		'dynamic': true,

		'normalize': function (id, toAbsId, config) {
			var end = id.indexOf('!');
			return end >= 0 ? toAbsId(id.substr(0, end)) + id.substr(end) : toAbsId(id);
		},

		'load': function (name, require, callback, config) {

			var order, exportsPos, exports, prefetch, url, def, promise;

			order = name.indexOf('!order') > 0; // can't be zero
			exportsPos = name.indexOf('!exports=');
			exports = exportsPos > 0 && name.substr(exportsPos + 9); // must be last option!
			prefetch = 'prefetch' in config ? config['prefetch'] : true;
			name = order || exportsPos > 0 ? name.substr(0, name.indexOf('!')) : name;
			// add extension afterwards so js!-specific path mappings don't need extension, too
			url = nameWithExt(require['toUrl'](name), 'js');

			function reject (ex) {
				(callback['error'] || function (ex) { throw ex; })(ex);
			}

			// if we've already fetched this resource, get it out of the cache
			if (url in cache) {
				if (cache[url] instanceof Promise) {
					cache[url].then(callback, reject);
				}
				else {
					callback(cache[url]);
				}
			}
			else {
				def = {
					name: name,
					url: url,
					order: order,
					exports: exports,
					timeoutMsec: config['timeout']
				};
				cache[url] = promise = new Promise();
				promise.then(
					function (o) {
						cache[url] = o;
						callback(o);
					},
					reject
				);

				// if this script has to wait for another
				// or if we're loading, but not executing it
				if (order && !supportsAsyncFalse && waitForOrderedScript) {
					// push onto the stack of scripts that will be fetched
					// from cache. do this before fetch in case IE has file cached.
					queue.push([def, promise]);
					// if we're prefetching
					if (prefetch) {
						// go get the file under an unknown mime type
						def.mimetype = 'text/cache';
						loadScript(def,
							// remove the fake script when loaded
							function (el) { el && el.parentNode.removeChild(el); },
							function () {}
						);
						def.mimetype = '';
					}
				}
				// otherwise, just go get it
				else {
					waitForOrderedScript = waitForOrderedScript || order;
					fetch(def, promise);
				}
			}

		}

	};
});
}(
	this,
	this.document,
	function () { try { return eval(arguments[0]); } catch (ex) { return; } }
));
;
;
/* module-key = 'com.atlassian.plugins.atlassian-plugins-webresource-rest:web-resource-manager', location = 'js/wrm/jquery.js' */
// Wrapper for $ to include jquery as a module
WRM.define("wrm/jquery", function() {
    // Use AJS.$ if it's available.
    if (typeof AJS !== 'undefined' && typeof AJS.$ !== 'undefined') {
        return AJS.$;
    }

    // Fallback to jQuery using '$' if AJS.$ isn't available.
    if (typeof $ !== 'undefined') {
        return $
    }

    // Lastly use 'jQuery', in case there's no AJS.$ and jQuery is in noConflict() mode.
    if (typeof jQuery !== 'undefined') {
        return jQuery;
    }

    console.error('Could not find AJS.$, $ or jQuery, which is required by WRM');
});;
;
/* module-key = 'com.atlassian.plugins.atlassian-plugins-webresource-rest:web-resource-manager', location = 'js/wrm/underscore.js' */
/**
 * Implementation of some underscore utilities; used to avoid bringing in all of underscore.
 */
WRM.define("wrm/_", function() {
    var _ = {
        filter: function(list, fn) {
            var filtered = [];
            for (var i = 0; i < list.length; ++i) {
                var item = list[i];
                if (fn(item)) {
                    filtered.push(item);
                }
            }
            return filtered;
        },
        map: function(list, fn) {
            var map = [];
            for (var i = 0; i < list.length; ++i) {
                map.push(fn(list[i]));
            }
            return map;
        },
        each: function(obj, fn) {
            if (obj.length === +obj.length) {
                for (var i = 0; i < obj.length; ++i) {
                    fn(obj[i]);
                }
            } else {
                for (var prop in obj) {
                    if (obj.hasOwnProperty(prop)) {
                        fn(obj[prop], prop);
                    }
                }
            }
        },
        bind: function(fn, scope) {
            return function() {
                fn.apply(scope, Array.prototype.slice.call(arguments));
            }
        },
        isArray: function(maybe) {
            return Object.prototype.toString.call(maybe) == '[object Array]';
        },
        isUndefined: function(maybe) {
            return maybe === void 0;
        },
        isNull: function(maybe) {
            return maybe === null;
        }
    };

    return _;
});;
;
/* module-key = 'com.atlassian.plugins.atlassian-plugins-webresource-rest:web-resource-manager', location = 'js/wrm/builder.js' */

WRM.define("wrm/builder", function() {

    var Builder = function() {
        this.wrmKeyAttribute = "data-wrm-key";
        this.wrmBatchTypeAttribute = "data-wrm-batch-type";
    };

    Builder.prototype = {
        // Builds a list of loaded modules and contexts on the page
        initialize: function(container) {
            var scripts = container.querySelectorAll("script[data-wrm-key][data-wrm-batch-type]"),
                links = container.querySelectorAll("link[data-wrm-key][data-wrm-batch-type]"),
                loadedResources = {
                    modules: [],
                    contexts: []
                };

            this._inspectTagArray(scripts, loadedResources);
            this._inspectTagArray(links, loadedResources);

            return loadedResources;
        },

        _inspectTagArray: function(elements, loadedResources) {
            for (var i = 0; i < elements.length; i++) {
                var element = elements[i];
                this.addResource(element.getAttribute(this.wrmKeyAttribute), element.getAttribute(this.wrmBatchTypeAttribute), loadedResources);
            }
        },

        addResource: function(wrmKey, batchType, loadedResources) {
            var keys = wrmKey.split(',');
            for (var i = 0; i < keys.length; i++) {
                var key = keys[i];

                if (key[0] === "-") {
                    continue;
                }

                if (batchType === "resource") {
                    this._addToLoadedList(loadedResources.modules, key);
                } else if (batchType === "context") {
                    this._addToLoadedList(loadedResources.contexts, key);
                } else {
                    console.warn("Unknown batch type: " + batchType);
                }
            }
        },

        _addToLoadedList: function(loadedList, key) {
            if (loadedList.indexOf(key) !== -1) {
                return;
            }
            loadedList.push(key);
        }
    };

    return Builder;
});

;
;
/* module-key = 'com.atlassian.plugins.atlassian-plugins-webresource-rest:web-resource-manager', location = 'js/wrm/ie-only-filter.js' */
WRM.define("wrm/ie-only-filter", ["wrm/jquery", "wrm/_"], function($, _) {

    function filter(resources) {
        var browserMsie = $.browser.msie;
        return _.filter(resources, function(resource) {
            return resource.ieOnly ? browserMsie : true;
        });
    }

    return filter;
});

;
;
/* module-key = 'com.atlassian.plugins.atlassian-plugins-webresource-rest:web-resource-manager', location = 'js/wrm/conditional-comment-filter.js' */
WRM.define("wrm/conditional-comment-filter", ["wrm/jquery", "wrm/_"], function($, _) {

    function filter(resources) {
        var browserMsie = $.browser.msie;
        var browserVersion = $.browser.version;
        return _.filter(resources, function(resource) {
            var conditionalComment = resource.conditionalComment;
            if (!conditionalComment) {
                return true;
            }
            // This is pretty much the worst thing ever.
            // We could write a regex parser but given the number of actual cases it's probably easier doing it
            // this way. Also the number of cases supported by atlassian-plugins is pretty small:
            // - We don't support the !IE conditionalComment
            // - We only support IE8 & 9
            // - If anyone uses & or | they can either change it to use lt / lte / gt / gte or they can gtfo srsly
            if (!browserMsie || browserVersion > 9) {
                return false;
            }
            conditionalComment = conditionalComment.toLowerCase();
            switch (conditionalComment) {
                case "ie":          return true;
                case "lt ie 9":     return browserVersion <  9;
                case "lte ie 9":    return browserVersion <= 9;
                case "ie 9":        return browserVersion == 9;
                case "gt ie 9":     return browserVersion >  9;
                case "gte ie 9":    return browserVersion >= 9;
                case "lt ie 8":     return browserVersion <  8;
                case "lte ie 8":    return browserVersion <= 8;
                case "ie 8":        return browserVersion == 8;
                case "gt ie 8":     return browserVersion >  8;
                case "gte ie 8":    return browserVersion >= 8;
                default:
                    console.warn("Cannot parse conditional comment " + conditionalComment);
                    return false;
            }
        });
    }

    return filter;
});

;
;
/* module-key = 'com.atlassian.plugins.atlassian-plugins-webresource-rest:web-resource-manager', location = 'js/wrm/require-handler.js' */
WRM.define("wrm/require-handler",
    ["wrm/jquery", "wrm/_", "wrm/builder", "wrm/conditional-comment-filter", "wrm/ie-only-filter"],
    function($, _, Builder, conditionalCommentFilter, ieOnlyFilter) {

    var WEBRESOURCE_PATTERN = /^wr!(.*)$/,
        CONTEXT_PATTERN = /^wrc!(.*)$/,
        LOADER_PATTERN = /^.+!/;

    var RequireHandler = function() {
        this._requireCache = {};

        this._requestedResources = {
            contexts: [],
            webResources: [],
            excludedContexts: [],
            excludedWebResources: []
        };

        // Contains a promise for the currently executing to the WRM REST API, otherwise false
        this._requestInFlight = false;

        // Contains a promise for the queued request, otherwise false if there is no request currently queued.
        this._requestWaiting = false;
    };
    RequireHandler.prototype = {
        /**
         * Requires resources on the page.~
         * @param resources list of resources (eg webresources or webresource contexts)
         * @param cb Callback that is executed when the actual JS / CSS resources representing the given
         * resources have been included on the page
         * @return a Promise that is resolved when all JS / CSS resources have been included on the page. Can be used
         * as an alternative to callback.
         */
        require: function(resources, cb) {
            if (!_.isArray(resources)) {
                resources = [resources];
            }
            // Requests are cached in this._requireCache so that if a client makes multiple requests for the same
            // set of resources, we can piggyback off the promise for the first request.
            // In other words, if a client calls require([a, b]), then does some work, then calls require([a, b])
            // again, the second call should resolve immediately (or after the first call has resolved).
            if (!this._requireCache.hasOwnProperty(resources)) {
                var deferred = $.Deferred();

                function resolveAsync() {
                    this._resolveAsync(resources).then(deferred.resolve, deferred.reject);
                }

                var InOrderLoader = window.WRM && window.WRM.InOrderLoader;
                if (InOrderLoader !== undefined) {
                    InOrderLoader.registerAllResolvedCallback(resolveAsync.bind(this));
                } else {
                    resolveAsync.call(this);
                }

                this._requireCache[resources] = deferred.promise();
            }

            var promise = this._requireCache[resources];
            if (cb) {
                promise.done(function() {
                    cb.apply(this, arguments);
                });
            }
            return promise;
        },
        /**
         * Force requires resources on the page.~
         * @param resources list of resources (eg webresources or webresource contexts)
         * @param excluded is an object that specifies excluded resources under the resources key and excluded
         * contexts under the contexts key
         * @param cb Callback that is executed when the actual JS / CSS resources representing the given
         * resources have been included on the page
         * @return a Promise that is resolved when all JS / CSS resources have been included on the page. Can be used
         * as an alternative to callback.
         */
        forceRequire: function(resources, excluded, cb) {
            if (!_.isArray(resources)) {
                resources = [resources];
            }

            var deferred = $.Deferred();

            function resolveAsync() {
                this._resolveAsync(resources, excluded).then(deferred.resolve, deferred.reject);
            }

            var InOrderLoader = window.WRM && window.WRM.InOrderLoader;
            if (InOrderLoader !== undefined) {
                InOrderLoader.registerAllResolvedCallback(resolveAsync.bind(this));
            } else {
                resolveAsync.call(this);
            }

            var promise = deferred.promise();
            if (cb) {
                promise.done(function() {
                    cb.apply(this, arguments);
                });
            }
            return promise;
        },
        /**
         * Given a list of resources, translates those resources to actual CSS / JS files and includes them on the page
         * @param resources a list of webresources and webresource contexts to include
         * @return a Promise that is resolved only after all resources have been included on the page
         * @private
         */
        _resolveAsync: function(resources, excluded) {
            this._addToRequestedResources(resources, excluded);

            var deferred = $.Deferred();
            var that = this;

            // If there isn't a request currently being executed, continue as normal
            if (this._requestInFlight === false) {
                this._requestInFlight = this._getScriptsForResources().done(this._processResourceResponse.bind(this, deferred, resources));

            // There's currently a request being processed, so we need to wait for it to finish before we make the
            // next request.
            } else if (this._requestWaiting === false) {
                this._requestWaiting = deferred;
                this._requestInFlight.done(function() {
                    that._requestInFlight = that._getScriptsForResources().done(that._processResourceResponse.bind(that, deferred, resources));
                    that._requestWaiting = false;
                });

            // If _requestWaiting !== false, it means there's already a request queued up waiting to go. We've already
            // added the resources to the queued request above (this._addToRequestedResources), so we can just return the
            // promise for the queued request.
            } else {
                return this._requestWaiting.promise();
            }

            return deferred.promise();
        },
        /**
         * Processes a response from the WRM REST endpoint
         * @param resourceResponse
         * @private
         */
        _processResourceResponse: function(deferred, resources, resourceResponse) {
            this._requestInFlight = false;
            var that = this;

            if (resourceResponse.unparsedData) {
                window.WRM._unparsedData || (window.WRM._unparsedData = {});
                _.each(resourceResponse.unparsedData, function(val, key) {
                    window.WRM._unparsedData[key] = val;
                });
                window.WRM._dataArrived();
            }
            if (resourceResponse.unparsedErrors) {
                window.WRM._unparsedErrors || (window.WRM._unparsedErrors = {});
                _.each(resourceResponse.unparsedErrors, function(val, key) {
                    window.WRM._unparsedErrors[key] = val;
                });
                window.WRM._dataArrived();
            }
            var curlResources = [];
            var cssMediaResources = [];
            var filteredResourceUrlInfos = this._filter(resourceResponse.resources);
            for (var i = 0; i < filteredResourceUrlInfos.length; ++i) {
                var resource = filteredResourceUrlInfos[i];
                var url = resource.url;

                if (!this._isDarkFeatureEnabled("wrm.disable.duplicate.resource.download.fix")) {
                    this._builder.addResource(resource.key, resource.batchType, this._loadedResources);
                }

                if (resource.resourceType === "JAVASCRIPT") {
                    if (!this._isJSInInitLoad(url)) {
                        curlResources.push("js!" + url + "!order");
                    }
                }
                else if (resource.resourceType === "CSS") {
                    if (!this._isCSSInInitLoad(url)) {
                        if (resource.media && "all" !== resource.media) {
                            // HACK: this can't be loaded by curl.js. The solution is to the DOM immediately
                            // using a <link> tag. This means two things:
                            // - the callback may be called before the CSS has been loaded, resulting in a flash
                            //   of unstyled content.
                            // - it's easier to blow the IE9 stylesheet cap (curl.js works around this).
                            cssMediaResources.push(resource);
                        }
                        else {
                            curlResources.push("css!" + url);
                        }
                    }
                }
                else {
                    console.warn("Unknown resource type required: " + url);
                }
            }
            // This logging should only be enabled when debugging.
            // console.log("Downloading resources:\n" + curlResources.join("\n"));
            WRM.curl(curlResources, function() {
                // Add all css media resources. This is done after curl resources to ensure ordering is consistent
                // with the way resources are delivered on the server.
                _.each(cssMediaResources, function(resource) {
                    that._loadCssImmediate(resource);
                });
                var callbackArgs = _.map(resources, function() { return window; });
                deferred.resolveWith(that, callbackArgs);
            }, function() {
                deferred.rejectWith(that, arguments);
            });
        },
        /**
         * Loads
         * @param resource
         * @private
         */
        _loadCssImmediate: function(resource) {
            console.warn('Asynchronously loading a CSS resource containing a media query: ' + resource.url);
            var tag = '<link rel="stylesheet" type="text/css" href="' + resource.url + '" media="' + resource.media + '" />';
            $(tag).appendTo('head');
        },
        /**
         * Makes an AJAX request to retrieve the actual JS and CSS files required to represent a resource
         * @return a Promise for the AJAX request
         * @private
         */
        _getScriptsForResources: function() {
            if (!this._builder) {
                this._builder = new Builder();
                this._loadedResources = this._builder.initialize(document);
            } else {
                this._updateLoadedResourcesFromDom();
            }
            var that = this;
            var excludedContexts = this._loadedResources.contexts.filter(function (item) {
                return that._requestedResources.excludedContexts.indexOf(item) < 0;
            });
            var excludedWebResources = this._loadedResources.modules.filter(function (item) {
                return that._requestedResources.excludedWebResources.indexOf(item) < 0 && that._requestedResources.webResources.indexOf(item) < 0;
            });
            // NOTE: AJS.contextPath() is actually defined in atlassian-plugins-webresource-plugin/src/main/resources/js/data/context-path.js
            var deferred = $.Deferred();
            $.ajax({
                url: AJS.contextPath() + "/rest/webResources/1.0/resources",
                type: "POST",
                contentType: "application/json",
                dataType: "json",
                data: JSON.stringify({
                    r: this._requestedResources.webResources,
                    c: this._requestedResources.contexts,
                    xc: excludedContexts,
                    xr: excludedWebResources
                }),
                success: deferred.resolve,
                error: deferred.reject
            });

            this._requestedResources.webResources = [];
            this._requestedResources.contexts = [];
            this._requestedResources.excludedWebResources = [];
            this._requestedResources.excludedContexts = [];

            return deferred.promise();
        },
        /**
         * PLUGWEB-399: Inspect the DOM to see if any <script> or <link> tags have already been added, in which case
         * they should not be loaded again.
         *
         * PLUGWEB-402: Only <script> or <link> tags in the DOM with the "data-wrm-key" and "data-wrm-batch-type" are
         * inspected to count which resources have already been loaded. HOWEVER, these attributes are only added if the
         * <script> or <link> tags were rendered on the server-side. Resources loaded asynchronously do not add these
         * attributes and are instead counted when the URLs are returned from "/rest/webResources/1.0/resources" and
         * processed.
         */
        _updateLoadedResourcesFromDom: function() {
            function addMissingItems(sourceList, destList) {
                _.each(sourceList, function(item) {
                    if (destList.indexOf(item) === -1) {
                        destList.push(item);
                    }
                });
            }

            var resourcesLoadedInDom = this._builder.initialize(document);
            addMissingItems(resourcesLoadedInDom.modules, this._loadedResources.modules);
            addMissingItems(resourcesLoadedInDom.contexts, this._loadedResources.contexts);
        },
        /**
         *
         * @param resources list of resources (e.g. context or web resource)
         * @private
         */
        _addToRequestedResources: function(resources, excluded) {
            var that = this;
            excluded = excluded || {};

            _.each(resources, function(resource) {
                var match;
                if (match = resource.match(WEBRESOURCE_PATTERN)) {
                    that._requestedResources.webResources.push(match[1]);
                }
                else if (match = resource.match(CONTEXT_PATTERN)) {
                    that._requestedResources.contexts.push(match[1]);
                }
                // If it's neither context nor web-resource it should be AMD module.
                else {
                    // Handling modules as if it's the web-resource.
                    that._requestedResources.webResources.push(resource.replace(LOADER_PATTERN, ''));
                }
            });
            this._requestedResources.excludedWebResources = excluded.webResources || [];
            this._requestedResources.excludedContexts = excluded.contexts || [];
        },
        /**
         * Checks if a script element whose src is the given url exists on the page
         * @param url url
         * @return {boolean} True if the script is on the page, otherwise false
         * @private
         */
        _isJSInInitLoad: function(url) {
            return $("script[src='" + url + "']").length > 0;
        },
        /**
         * Checks if a link element whose href is the given url exists on the page
         * @param url url
         * @return {boolean} True if the link is on the page, otherwise false
         * @private
         */
        _isCSSInInitLoad: function(url) {
            return $("link[href='" + url + "']").length > 0;
        },
        /**
         * Filters resources that should not be included from the given list
         * @param resourceUrlInfos list
         * @return list of filters resourceUrlInfo objects.
         * @private
         */
        _filter: function(resourceUrlInfos) {
            if (!this._filters) {
                this._filters = [
                    conditionalCommentFilter,
                    ieOnlyFilter
                ];
            }
            var filteredResourceUrlInfos = resourceUrlInfos;
            _.each(this._filters, function(filter) {
                filteredResourceUrlInfos = filter(filteredResourceUrlInfos);
            });
            return filteredResourceUrlInfos;
        },

        _isDarkFeatureEnabled: function(featureKey) {
            // Make sure the dark features API is available before we continue.
            if (typeof AJS !== 'undefined' &&
                    typeof AJS.DarkFeatures !== 'undefined' &&
                    typeof AJS.DarkFeatures.isEnabled !== 'undefined') {
                return AJS.DarkFeatures.isEnabled(featureKey);
            } else {
                // Fallback to detecting the dark features from the meta tag.
                var metaEl = document.querySelector('meta[name=ajs-enabled-dark-features]');
                var featuresArray;

                if (!metaEl) {
                    return false;
                } else {
                    featuresArray = metaEl.content ? metaEl.content.split(',') : [];
                }

                return $.inArray(featureKey, featuresArray) !== -1;
            }
        }
    };

    return RequireHandler;
});
;
;
/* module-key = 'com.atlassian.plugins.atlassian-plugins-webresource-rest:web-resource-manager', location = 'js/wrm/index.js' */
WRM.curl(["wrm/require-handler"], function(RequireHandler) {

    var requireHandler;

    WRM.require = function(resources, cb) {
        if (!requireHandler) {
            requireHandler = new RequireHandler();
        }
        return requireHandler.require(resources, cb);
    };

    WRM.forceRequire = function(resources, excluded, cb) {
        if (!requireHandler) {
            requireHandler = new RequireHandler();
        }
        return requireHandler.forceRequire(resources, excluded, cb);
    };


    // add also AMD module
    if (typeof define === 'function') {
        define('wrm/require', [], function() {
            return WRM.require;
        });

        define('wrm/require-handler-wrapper', [], function() {
            return {
                getRequireHandler: function () {
                    return requireHandler;
                },
                setRequireHandler: function (newRequireHandler) {
                    requireHandler = newRequireHandler;
                }
            };
        });
    }
});
;
;
/* module-key = 'com.atlassian.auiplugin:jquery-compatibility', location = 'node_modules/@atlassian/aui/src/js-vendor/jquery/jquery-compatibility.js' */
jQuery.noConflict();;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-polyfills-console', location = 'node_modules/@atlassian/aui/src/js/aui/polyfills/console.js' */
("undefined"===typeof window?global:window).__935a5cbb862450a49a36c8831ebb8846=function(){"use strict";"undefined"===typeof window.console?window.console={messages:[],log:function(a){this.messages.push(a)},show:function(){alert(this.messages.join("\n"));this.messages=[]}}:window.console.show=function(){};return{}}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-jquery', location = 'node_modules/@atlassian/aui/src/js/aui/jquery.js' */
("undefined"===typeof window?global:window).__307d3e18fd611f85395c67cddeb1fe24=function(){var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default=window.jQuery||window.Zepto;return a=a["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-create-element', location = 'node_modules/@atlassian/aui/src/js/aui/create-element.js' */
("undefined"===typeof window?global:window).__fd277fcde858b82a198666a405e85600=function(){var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});var b=__307d3e18fd611f85395c67cddeb1fe24,c=b&&b.__esModule?b:{"default":b};a.default=function(){var a=null;arguments.length&&"string"===typeof arguments[0]&&(a=(0,c.default)(document.createElement(arguments[0])),2===arguments.length&&a.html(arguments[1]));"undefined"!==typeof console&&console.warn&&console.warn("AJS's create element functionality has been deprecated since 5.9.0.\nNo alternative will be provided.\nUse document.createElement() or jQuery.parseHTML(), or preferably use a templating library.");
return a};return a=a["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-object-assign-4.0.1-index', location = 'node_modules/object-assign/index.js' */
("undefined"===typeof window?global:window).__20af9d35c28a1911e53d45bf2b6d5c6f=function(){var h={},i=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;return h=Object.assign||function(e,h){var a,d;if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");d=Object(e);for(var b,f=1;f<arguments.length;f++){a=Object(arguments[f]);for(var g in a)i.call(a,g)&&(d[g]=a[g]);if(Object.getOwnPropertySymbols){b=Object.getOwnPropertySymbols(a);for(var c=
0;c<b.length;c++)j.call(a,b[c])&&(d[b[c]]=a[b[c]])}}return d}}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-internal-globalize', location = 'node_modules/@atlassian/aui/src/js/aui/internal/globalize.js' */
("undefined"===typeof window?global:window).__4d02fe17b8e885a34493e34af3d145dd=function(){var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});b.default=function(a,b){window[c]=(0,d.default)(e.default,window[c]);return window[c][a]=b};var a=__fd277fcde858b82a198666a405e85600,e=a&&a.__esModule?a:{"default":a},d=(a=__20af9d35c28a1911e53d45bf2b6d5c6f)&&a.__esModule?a:{"default":a},c="AJS";return b=b["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-internal-deprecation', location = 'node_modules/@atlassian/aui/src/js/aui/internal/deprecation.js' */
("undefined"===typeof window?global:window).__c8cfa00f1eba9ac7af89ee3d0d33961d=function(){function k(){"undefined"!==typeof console&&console.warn&&Function.prototype.apply.call(console.warn,console,arguments)}function h(c,b){if("function"===typeof c)return c;var a=!1,b=b||{};return function(d){var d=d?d:1,f=Error();(f=(f=f.stack||f.stacktrace)&&f.replace(/^Error\n/,"")||"")?(f=f.split("\n"),d=f[d+2]):d=f;d=d||"";if(!a||-1===n.indexOf(d)){n.push(d);a=!0;var f="DEPRECATED "+(b.deprecationType+" "||
"")+"- ",e;e=c;e=(e+="")?e.charAt(0).toUpperCase()+e.substring(1):"";f=f+e+" has been deprecated"+(b.sinceVersion?" since "+b.sinceVersion:"")+" and will be removed in "+(b.removeInVersion||"a future release")+".";b.alternativeName&&(f+=" Use "+b.alternativeName+" instead. ");b.extraInfo&&(f+=" "+b.extraInfo);d=""===d?" \n No stack trace of the deprecated usage is available in your current browser.":" \n "+d;b.extraObject?k(f+"\n",b.extraObject,d):k(f,d)}}}function o(c,b){var a=c.options.displayName,
a=a?" ("+a+")":"",d=l.default.extend({deprecationType:"CSS",extraObject:b},c.options);h("'"+c.selector+"' pattern"+a,d)()}function i(c,b,a){a=a||{};a.deprecationType=a.deprecationType||"JS";var d=h(b||c.name||"this function",a);return function(){d();return c.apply(this,arguments)}}function p(c,b,a){a=a||{};a.deprecationType=a.deprecationType||"JS";b=i(c,b,a);b.prototype=c.prototype;l.default.extend(b,c);return b}function m(c,b,a){if("function"===typeof c[b])a=a||{},a.deprecationType=a.deprecationType||
"JS",c[b]=i(c[b],a.displayName||b,a);else if(j){var d=c[b],a=a||{};a.deprecationType=a.deprecationType||"JS";var e=h(a.displayName||b,a);Object.defineProperty(c,b,{get:function(){e();return d},set:function(a){d=a;e();return a}})}}function q(c,b,a){var a=a||{},d;for(d in c)t.call(c,d)&&(a.deprecationType=a.deprecationType||"JS",a.displayName=b+d,a.alternativeName=a.alternativeNamePrefix&&a.alternativeNamePrefix+d,m(c,d,l.default.extend({},a)))}function u(c){return function(b){var a={selector:b,options:c||
{}};r.push(a);for(var b=document.querySelectorAll(b),d=0;d<b.length;d++)o(a,b[d])}}function s(c,b){window.MutationObserver?("string"===typeof c&&(c=[c]),c.forEach(u(b))):k("CSS could not be deprecated as Mutation Observer was not found.")}function v(c){return function(b){(c.matches||c.msMatchesSelector||c.webkitMatchesSelector||c.mozMatchesSelector||c.oMatchesSelector).call(c,b.selector)&&o(b,c)}}var e={};"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.getMessageLogger=e.propertyDeprecationSupported=
e.obj=e.prop=e.css=e.construct=e.fn=void 0;var g=__307d3e18fd611f85395c67cddeb1fe24,l=g&&g.__esModule?g:{"default":g},g=(g=__4d02fe17b8e885a34493e34af3d145dd)&&g.__esModule?g:{"default":g},t=Object.prototype.hasOwnProperty,n=[],r=[],j=!1;try{Object.defineProperty&&(Object.defineProperty({},"blam",{get:function(){},set:function(){}}),e.propertyDeprecationSupported=j=!0)}catch(x){}window.MutationObserver&&(new MutationObserver(function(c){c.forEach(function(b){for(var b=b.addedNodes,a=0;a<b.length;a++){var c=
b[a];1===c.nodeType&&r.forEach(v(c))}})})).observe(document,{childList:!0,subtree:!0});var w={fn:i,construct:p,css:s,prop:m,obj:q,propertyDeprecationSupported:j,getMessageLogger:h};(0,g.default)("deprecate",w);e.fn=i;e.construct=p;e.css=s;e.prop=m;e.obj=q;e.propertyDeprecationSupported=j;e.getMessageLogger=h;return e}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-polyfills-custom-event', location = 'node_modules/@atlassian/aui/src/js/aui/polyfills/custom-event.js' */
("undefined"===typeof window?global:window).__5a18a90cc502f556e87c4181f8a6b4ab=function(){var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});var a=void 0;a:{if(window.CustomEvent)try{var c=new window.CustomEvent("name",{bubbles:!1,cancelable:!0,detail:{x:"y"}});c.preventDefault();if(!0!==c.defaultPrevented)throw Error("Could not prevent default");if("name"!==c.type)throw Error("Could not set custom name");if("y"!==c.detail.x)throw Error("Could not set detail");a=window.CustomEvent;
break a}catch(e){}a=function(b,d){var d=d||{bubbles:!1,cancelable:!1,detail:void 0},a=document.createEvent("CustomEvent");a.initCustomEvent(b,!!d.bubbles,!!d.cancelable,d.detail);var c=a.preventDefault;a.preventDefault=function(){c.call(this);try{Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}})}catch(a){this.defaultPrevented=!0}};return a};a.prototype=window.Event.prototype}b.default=a;return b=b["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-skatejs-0.13.17-lib-constants', location = 'node_modules/skatejs/lib/constants.js' */
("undefined"===typeof window?global:window).__3ceacf009ef9ceb3c52ebb9324915170=function(){var d={exports:{}},e=d.exports,i={module:d,exports:e},a;a=function(f,a,g){var c=("undefined"===typeof window?global:window).define,b,h,g=[g,a,f].filter(function(a){return"function"===typeof a})[0],a=[a,f,[]].filter(Array.isArray)[0];b=g.apply(null,a.map(function(a){return i[a]}));h=typeof b;"function"===typeof c&&c("string"===typeof f?f:"__3ceacf009ef9ceb3c52ebb9324915170",a,g);"string"===h?b=String(b):"number"===
h?b=Number(b):"boolean"===h&&(b=Boolean(b));void 0!==b&&(e=d.exports=b)};a.amd=!0;var c=function(a){Object.defineProperty(a,"__esModule",{value:!0});a.ATTR_IGNORE="data-skate-ignore";a.TYPE_ATTRIBUTE="a";a.TYPE_CLASSNAME="c";a.TYPE_ELEMENT="t"};"function"===typeof a&&a.amd?a(["exports"],c):"undefined"!==typeof e&&c(e);return d.exports}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-skatejs-0.13.17-lib-version', location = 'node_modules/skatejs/lib/version.js' */
("undefined"===typeof window?global:window).__15c28555b7ada36a99309d466d5cff55=function(){var d={exports:{}},f=d.exports,i={module:d,exports:f},a;a=function(a,c,g){var e=("undefined"===typeof window?global:window).define,b,h,g=[g,c,a].filter(function(a){return"function"===typeof a})[0],c=[c,a,[]].filter(Array.isArray)[0];b=g.apply(null,c.map(function(a){return i[a]}));h=typeof b;"function"===typeof e&&e("string"===typeof a?a:"__15c28555b7ada36a99309d466d5cff55",c,g);"string"===h?b=String(b):"number"===
h?b=Number(b):"boolean"===h&&(b=Boolean(b));void 0!==b&&(f=d.exports=b)};a.amd=!0;var e=function(a,c){c.exports="0.13.17"};"function"===typeof a&&a.amd?a(["exports","module"],e):"undefined"!==typeof f&&"undefined"!==typeof d&&e(f,d);return d.exports}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-skatejs-0.13.17-lib-globals', location = 'node_modules/skatejs/lib/globals.js' */
("undefined"===typeof window?global:window).__df73b283f1d40e8f4912fb904e42aa12=function(){var e={exports:{}},g=e.exports,j={module:e,exports:g,"./version":__15c28555b7ada36a99309d466d5cff55,"./version":__15c28555b7ada36a99309d466d5cff55},b;b=function(c,f,d){var b=("undefined"===typeof window?global:window).define,a,h,d=[d,f,c].filter(function(a){return"function"===typeof a})[0],f=[f,c,[]].filter(Array.isArray)[0];a=d.apply(null,f.map(function(a){return j[a]}));h=typeof a;"function"===typeof b&&b("string"===
typeof c?c:"__df73b283f1d40e8f4912fb904e42aa12",f,d);"string"===h?a=String(a):"number"===h?a=Number(a):"boolean"===h&&(a=Boolean(a));void 0!==a&&(g=e.exports=a)};b.amd=!0;var i=function(c,b,d){c="__skate_"+(d&&d.__esModule?d["default"]:d).replace(/[^\w]/g,"_");window[c]||(window[c]={observer:void 0,registry:{}});b.exports=window[c]};"function"===typeof b&&b.amd?b(["exports","module","./version"],i):"undefined"!==typeof g&&"undefined"!==typeof e&&i(g,e,__15c28555b7ada36a99309d466d5cff55);return e.exports}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-skatejs-0.13.17-lib-data', location = 'node_modules/skatejs/lib/data.js' */
("undefined"===typeof window?global:window).__4666b4efa3069445b77e23d8419d0090=function(){var e={exports:{}},f=e.exports,j={module:e,exports:f},b;b=function(b,c,g){var h=("undefined"===typeof window?global:window).define,a,d,g=[g,c,b].filter(function(a){return"function"===typeof a})[0],c=[c,b,[]].filter(Array.isArray)[0];a=g.apply(null,c.map(function(a){return j[a]}));d=typeof a;"function"===typeof h&&h("string"===typeof b?b:"__4666b4efa3069445b77e23d8419d0090",c,g);"string"===d?a=String(a):"number"===
d?a=Number(a):"boolean"===d&&(a=Boolean(a));void 0!==a&&(f=e.exports=a)};b.amd=!0;var i=function(b,c){c.exports=function(b,c){var a=void 0===c?"":c,d=b.__SKATE_DATA||(b.__SKATE_DATA={});return a&&(d[a]||(d[a]={}))||d}};"function"===typeof b&&b.amd?b(["exports","module"],i):"undefined"!==typeof f&&"undefined"!==typeof e&&i(f,e);return e.exports}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-skatejs-0.13.17-lib-mutation-observer', location = 'node_modules/skatejs/lib/mutation-observer.js' */
/*

 Copyright (c) 2014 The Polymer Project Authors. All rights reserved.
 This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
 The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
 The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
 Code distributed by Google as part of the polymer project is also
 subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
("undefined"===typeof window?global:window).__c91177d0507115b2c279ac28adb63576=function(){var k={exports:{}},n=k.exports,t={module:k,exports:n},i;i=function(g,o,p){var f=("undefined"===typeof window?global:window).define,d,l,p=[p,o,g].filter(function(d){return"function"===typeof d})[0],o=[o,g,[]].filter(Array.isArray)[0];d=p.apply(null,o.map(function(d){return t[d]}));l=typeof d;"function"===typeof f&&f("string"===typeof g?g:"__c91177d0507115b2c279ac28adb63576",o,p);"string"===l?d=String(d):"number"===
l?d=Number(d):"boolean"===l&&(d=Boolean(d));void 0!==d&&(n=k.exports=d)};i.amd=!0;var q=function(){var g=window;if("undefined"===typeof WeakMap){var o=Object.defineProperty,p=Date.now()%1E9,f=function(){this.name="__st"+(1E9*Math.random()>>>0)+(p++ +"__")};f.prototype={set:function(a,b){var c=a[this.name];c&&c[0]===a?c[1]=b:o(a,this.name,{value:[a,b],writable:!0});return this},get:function(a){var b;return(b=a[this.name])&&b[0]===a?b[1]:void 0},"delete":function(a){var b=a[this.name];if(!b||b[0]!==
a)return!1;b[0]=b[1]=void 0;return!0},has:function(a){var b=a[this.name];return!b?!1:b[0]===a}};window.WeakMap=f}var d=function(){u=!1;var a=v;v=[];a.sort(function(b,a){return b.uid_-a.uid_});var b=!1;a.forEach(function(a){var e=a.takeRecords();a.nodes_.forEach(function(b){(b=m.get(b))&&b.forEach(function(b){b.observer===a&&b.removeTransientObservers()})});e.length&&(a.callback_(e,a),b=!0)});b&&d()},l=function(a,b){for(var c=a;c;c=c.parentNode){var e=m.get(c);if(e)for(var w=0;w<e.length;w++){var d=
e[w],h=d.options;if(c===a||h.subtree)(h=b(h))&&d.enqueue(h)}}},f=function(a){this.callback_=a;this.nodes_=[];this.records_=[];this.uid_=++t},i=function(a,b){this.type=a;this.target=b;this.addedNodes=[];this.removedNodes=[];this.oldValue=this.attributeNamespace=this.attributeName=this.nextSibling=this.previousSibling=null},k=function(a,b){return r=new i(a,b)},n=function(a){if(j)return j;var b=r,c=new i(b.type,b.target);c.addedNodes=b.addedNodes.slice();c.removedNodes=b.removedNodes.slice();c.previousSibling=
b.previousSibling;c.nextSibling=b.nextSibling;c.attributeName=b.attributeName;c.attributeNamespace=b.attributeNamespace;c.oldValue=b.oldValue;j=c;j.oldValue=a;return j},q=function(a,b,c){this.observer=a;this.target=b;this.options=c;this.transientObservedNodes=[]};if(!g.JsMutationObserver){var m=new WeakMap,s;if(/Trident|Edge/.test(navigator.userAgent))s=setTimeout;else if(window.setImmediate)s=window.setImmediate;else{var x=[],y=String(Math.random());window.addEventListener("message",function(a){a.data===
y&&(a=x,x=[],a.forEach(function(b){b()}))});s=function(a){x.push(a);window.postMessage(y,"*")}}var u=!1,v=[],t=0;f.prototype={observe:function(a,b){a=window.ShadowDOMPolyfill&&window.ShadowDOMPolyfill.wrapIfNeeded(a)||a;if(!b.childList&&!b.attributes&&!b.characterData||b.attributeOldValue&&!b.attributes||b.attributeFilter&&b.attributeFilter.length&&!b.attributes||b.characterDataOldValue&&!b.characterData)throw new SyntaxError;var c=m.get(a);c||m.set(a,c=[]);for(var e,d=0;d<c.length;d++)if(c[d].observer===
this){e=c[d];e.removeListeners();e.options=b;break}e||(e=new q(this,a,b),c.push(e),this.nodes_.push(a));e.addListeners()},disconnect:function(){this.nodes_.forEach(function(a){for(var a=m.get(a),b=0;b<a.length;b++){var c=a[b];if(c.observer===this){c.removeListeners();a.splice(b,1);break}}},this);this.records_=[]},takeRecords:function(){var a=this.records_;this.records_=[];return a}};var r,j;q.prototype={enqueue:function(a){var b=this.observer.records_,c=b.length;if(0<b.length){var e=b[c-1]===a?b[c-
1]:j&&(b[c-1]===j||b[c-1]===r)?j:null;if(e){b[c-1]=e;return}}else v.push(this.observer),u||(u=!0,s(d));b[c]=a},addListeners:function(){this.addListeners_(this.target)},addListeners_:function(a){var b=this.options;b.attributes&&a.addEventListener("DOMAttrModified",this,!0);b.characterData&&a.addEventListener("DOMCharacterDataModified",this,!0);b.childList&&a.addEventListener("DOMNodeInserted",this,!0);(b.childList||b.subtree)&&a.addEventListener("DOMNodeRemoved",this,!0)},removeListeners:function(){this.removeListeners_(this.target)},
removeListeners_:function(a){var b=this.options;b.attributes&&a.removeEventListener("DOMAttrModified",this,!0);b.characterData&&a.removeEventListener("DOMCharacterDataModified",this,!0);b.childList&&a.removeEventListener("DOMNodeInserted",this,!0);(b.childList||b.subtree)&&a.removeEventListener("DOMNodeRemoved",this,!0)},addTransientObserver:function(a){if(a!==this.target){this.addListeners_(a);this.transientObservedNodes.push(a);var b=m.get(a);b||m.set(a,b=[]);b.push(this)}},removeTransientObservers:function(){var a=
this.transientObservedNodes;this.transientObservedNodes=[];a.forEach(function(b){this.removeListeners_(b);for(var b=m.get(b),a=0;a<b.length;a++)if(b[a]===this){b.splice(a,1);break}},this)},handleEvent:function(a){a.stopImmediatePropagation();switch(a.type){case "DOMAttrModified":var b=a.attrName,c=a.relatedNode.namespaceURI,e=a.target,d=new k("attributes",e);d.attributeName=b;d.attributeNamespace=c;var f=a.attrChange===MutationEvent.ADDITION?null:a.prevValue;l(e,function(a){if(a.attributes&&(!a.attributeFilter||
!a.attributeFilter.length||!(-1===a.attributeFilter.indexOf(b)&&-1===a.attributeFilter.indexOf(c))))return a.attributeOldValue?n(f):d});break;case "DOMCharacterDataModified":e=a.target;d=k("characterData",e);f=a.prevValue;l(e,function(a){if(a.characterData)return a.characterDataOldValue?n(f):d});break;case "DOMNodeRemoved":this.addTransientObserver(a.target);case "DOMNodeInserted":var h=a.target,g;"DOMNodeInserted"===a.type?(e=[h],g=[]):(e=[],g=[h]);var i=h.previousSibling,h=h.nextSibling,d=k("childList",
a.target.parentNode);d.addedNodes=e;d.removedNodes=g;d.previousSibling=i;d.nextSibling=h;l(a.relatedNode,function(a){if(a.childList)return d})}r=j=void 0}};g.JsMutationObserver=f;g.MutationObserver||(g.MutationObserver=f,f._isPolyfilled=!0)}};"function"===typeof i&&i.amd?i(["exports"],q):"undefined"!==typeof n&&q(n);return k.exports}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-skatejs-0.13.17-lib-utils', location = 'node_modules/skatejs/lib/utils.js' */
("undefined"===typeof window?global:window).__c962c88861b22faa9e6b0ff498553ca3=function(){var f={exports:{}},j=f.exports,l={module:f,exports:j,"./constants":__3ceacf009ef9ceb3c52ebb9324915170,"./constants":__3ceacf009ef9ceb3c52ebb9324915170},d;d=function(b,i,g){var d=("undefined"===typeof window?global:window).define,c,e,g=[g,i,b].filter(function(a){return"function"===typeof a})[0],i=[i,b,[]].filter(Array.isArray)[0];c=g.apply(null,i.map(function(a){return l[a]}));e=typeof c;"function"===typeof d&&
d("string"===typeof b?b:"__c962c88861b22faa9e6b0ff498553ca3",i,g);"string"===e?c=String(c):"number"===e?c=Number(c):"boolean"===e&&(c=Boolean(c));void 0!==c&&(j=f.exports=c)};d.amd=!0;var k=function(b,d){function g(a,m){return Object.prototype.hasOwnProperty.call(a,m)}b.hasOwn=g;b.camelCase=function(a){return a.split(/-/g).map(function(a,b){return 0===b?a:a[0].toUpperCase()+a.substring(1)}).join("")};b.elementContains=function(a,b){return a===document&&!a.contains?document.head.contains(b)||document.body.contains(b):
a.contains?a.contains(b):e.call(a,b)};b.debounce=function(a){var b=!1;return function(){b||(b=!0,setTimeout(function(){b=!1;a()},1))}};b.getClosestIgnoredElement=function(a){for(;a instanceof Element;){if(a.hasAttribute(f))return a;a=a.parentNode}};b.inherit=function(a,b,c){for(var d=Object.getOwnPropertyNames(b),g=d.length,f=0;f<g;f++){var e=d[f];if(c||void 0===a[e]){var h=Object.getOwnPropertyDescriptor(b,e);h.get||h.set||!h.writable||!h.enumerable||!h.configurable?Object.defineProperty(a,e,h):
a[e]=b[e]}}return a};b.objEach=function(a,b){for(var c in a)g(a,c)&&b(a[c],c)};b.supportsNativeCustomElements=function(){return"function"===typeof document.registerElement};b.isValidNativeCustomElementName=function(a){return 0<a.indexOf("-")};Object.defineProperty(b,"__esModule",{value:!0});var f=d.ATTR_IGNORE,c=window.HTMLElement.prototype;b.elementPrototype=c;var e=c.contains};"function"===typeof d&&d.amd?d(["exports","./constants"],k):"undefined"!==typeof j&&k(j,__3ceacf009ef9ceb3c52ebb9324915170);
return f.exports}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-skatejs-0.13.17-lib-registry', location = 'node_modules/skatejs/lib/registry.js' */
("undefined"===typeof window?global:window).__c4b6ad56719b8affc0c1c55ea177df52=function(){var h={exports:{}},l=h.exports,o={module:h,exports:l,"./constants":__3ceacf009ef9ceb3c52ebb9324915170,"./globals":__df73b283f1d40e8f4912fb904e42aa12,"./utils":__c962c88861b22faa9e6b0ff498553ca3,"./constants":__3ceacf009ef9ceb3c52ebb9324915170,"./globals":__df73b283f1d40e8f4912fb904e42aa12,"./utils":__c962c88861b22faa9e6b0ff498553ca3},b;b=function(b,d,f){var k=("undefined"===typeof window?global:window).define,
a,n,f=[f,d,b].filter(function(a){return"function"===typeof a})[0],d=[d,b,[]].filter(Array.isArray)[0];a=f.apply(null,d.map(function(a){return o[a]}));n=typeof a;"function"===typeof k&&k("string"===typeof b?b:"__c4b6ad56719b8affc0c1c55ea177df52",d,f);"string"===n?a=String(a):"number"===n?a=Number(a):"boolean"===n&&(a=Boolean(a));void 0!==a&&(l=h.exports=a)};b.amd=!0;var m=function(b,d,f,k,a){var h=f.TYPE_ATTRIBUTE,l=f.TYPE_CLASSNAME,m=f.TYPE_ELEMENT,i=k&&k.__esModule?k["default"]:k,p=a.hasOwn,o=a.isValidNativeCustomElementName,
q=a.supportsNativeCustomElements;d.exports={clear:function(){i.registry={};return this},get:function(e){return p(i.registry,e)&&i.registry[e]},getForElement:function(e){var a=e.attributes,b=a.length,f=[],j=a.is,d=j&&(j.value||j.nodeValue),j=(e.tagName||e.localName).toLowerCase(),c=d||j,g;this.isType(c,m)&&(c=i.registry[c],g=c["extends"],d?j===g&&f.push(c):g||f.push(c));for(d=0;d<b;d++)c=a[d].nodeName,this.isType(c,h)&&(c=i.registry[c],g=c["extends"],(!g||j===g)&&f.push(c));(a=e.classList)?e=a:(e=
e.attributes,e=e["class"]&&e["class"].nodeValue.split(/\s+/)||[]);a=e.length;for(b=0;b<a;b++)c=e[b],this.isType(c,l)&&(c=i.registry[c],g=c["extends"],(!g||j===g)&&f.push(c));return f},isType:function(a,b){var d=this.get(a);return d&&d.type===b},isNativeCustomElement:function(a){return q()&&this.isType(a,m)&&o(a)},set:function(a,b){if(p(i.registry,a))throw Error('A component definition of type "'+b.type+'" with the ID of "'+a+'" already exists.');i.registry[a]=b;return this}}};"function"===typeof b&&
b.amd?b(["exports","module","./constants","./globals","./utils"],m):"undefined"!==typeof l&&"undefined"!==typeof h&&m(l,h,__3ceacf009ef9ceb3c52ebb9324915170,__df73b283f1d40e8f4912fb904e42aa12,__c962c88861b22faa9e6b0ff498553ca3);return h.exports}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-skatejs-0.13.17-lib-lifecycle', location = 'node_modules/skatejs/lib/lifecycle.js' */
("undefined"===typeof window?global:window).__76ada509bc46d5c68cd543ddd8e839a4=function(){var o={exports:{}},m=o.exports,s={module:o,exports:m,"./constants":__3ceacf009ef9ceb3c52ebb9324915170,"./data":__4666b4efa3069445b77e23d8419d0090,"./mutation-observer":__c91177d0507115b2c279ac28adb63576,"./registry":__c4b6ad56719b8affc0c1c55ea177df52,"./utils":__c962c88861b22faa9e6b0ff498553ca3,"./constants":__3ceacf009ef9ceb3c52ebb9324915170,"./data":__4666b4efa3069445b77e23d8419d0090,"./mutation-observer":__c91177d0507115b2c279ac28adb63576,
"./registry":__c4b6ad56719b8affc0c1c55ea177df52,"./utils":__c962c88861b22faa9e6b0ff498553ca3},k;k=function(i,f,l){var k=("undefined"===typeof window?global:window).define,d,j,l=[l,f,i].filter(function(d){return"function"===typeof d})[0],f=[f,i,[]].filter(Array.isArray)[0];d=l.apply(null,f.map(function(d){return s[d]}));j=typeof d;"function"===typeof k&&k("string"===typeof i?i:"__76ada509bc46d5c68cd543ddd8e839a4",f,l);"string"===j?d=String(d):"number"===j?d=Number(d):"boolean"===j&&(d=Boolean(d));
void 0!==d&&(m=o.exports=d)};k.amd=!0;var q=function(i,f,l,k,d,j){function o(e,b,a){Object.defineProperty(e,a,{get:function(){return this.getAttribute(b)},set:function(a){void 0===a?this.removeAttribute(b):this.setAttribute(b,a)}})}function m(e,b,a){var d,f,c=a.name,h=a.newValue,g;t&&(g=r(e,"cachedAttributeOldValues"));var a=t&&p(g,c)?g[c]:a.oldValue,i="string"===typeof h,u="string"===typeof a,n=(b=b.attributes)&&b[c];!u&&i?f="created":u&&i?f="updated":u&&!i&&(f="removed");t&&("removed"===f?delete g[c]:
g[c]=h);n&&"function"===typeof n[f]?d=n[f]:n&&"function"===typeof n.fallback?d=n.fallback:"function"===typeof n?d=n:"function"===typeof b&&(d=b);d&&d(e,{type:f,name:c,newValue:void 0===h?null:h,oldValue:void 0===a?null:a})}function q(e,b){var a=r(e,b.id);if(!a.created){a.created=!0;C(e,b.prototype,!0);b.template&&!e.hasAttribute(b.resolvedAttribute)&&b.template(e);e.removeAttribute(b.unresolvedAttribute);e.setAttribute(b.resolvedAttribute,"");var d=function(a,b){return function(d){if(!b)return a(e,
d,e);for(var c=d.target;c&&c!==document&&c!==e.parentNode;){var f;var g=c;f=b;D&&(g=g.cloneNode(),document.createElement("div").appendChild(g));f=w.call(g,f);if(f)return a(e,d,c);c=c.parentNode}}};"object"===typeof b.events&&E(b.events,function(a,b){var c,f;f=b.split(" ");c=f.shift();f=f.join(" ");e.addEventListener(c,d(a,f),!!f&&("blur"===c||"focus"===c))});var f=e.attributes;b.attributes&&!v.isNativeCustomElement(b.id)&&(new window.MutationObserver(function(a){a.forEach(function(a){var c=a.attributeName,
d=f[c];m(e,b,{name:c,newValue:d&&(d.value||d.nodeValue),oldValue:a.oldValue})})})).observe(e,{attributes:!0,attributeOldValue:!0});a=b.attributes;if("object"===typeof a)for(var c in a){var h=F(c);p(a,c)&&!p(e,h)&&o(e,c,h)}c=b.attributes;if("object"===typeof c)for(var g in c)p(c,g)&&(p(c[g],"value")&&!e.hasAttribute(g))&&(a=c[g].value,a="function"===typeof a?a(e):a,e.setAttribute(g,a));h=e.attributes;c=[];a=h.length;for(g=0;g<a;g++)c.push(h[g]);for(g=0;g<a;g++)h=c[g],m(e,b,{name:h.nodeName,newValue:h.value||
h.nodeValue});b.created&&b.created(e)}}function x(e,b){var a=r(e,b.id);!a.attached&&G(document,e)&&(a.attached=!0,b.attached&&b.attached(e),a.detached=!1)}function y(e,b){var a=r(e,b.id);a.detached||(a.detached=!0,b.detached&&b.detached(e),a.attached=!1)}function z(e){for(var b=0;b<e.length;b++){var a=e[b];if(!(a.nodeType!==A.ELEMENT_NODE||a.attributes[s])){for(var d=v.getForElement(a),f=d.length,c=0;c<f;c++){var h=a,g=d[c];q(h,g);x(h,g)}a=a.childNodes||[];a.length&&z(a)}}}function B(e){for(var b=
0;b<e.length;b++){var a=e[b];if(a.nodeType===A.ELEMENT_NODE){B(a.childNodes);for(var d=v.getForElement(a),f=d.length,c=0;c<f;c++)y(a,d[c])}}}Object.defineProperty(i,"__esModule",{value:!0});var s=f.ATTR_IGNORE,r=l&&l.__esModule?l["default"]:l,v=d&&d.__esModule?d["default"]:d,F=j.camelCase,G=j.elementContains,p=j.hasOwn,C=j.inherit,E=j.objEach,A=window.Node,f=window.HTMLElement.prototype,w=f.matches||f.msMatchesSelector||f.webkitMatchesSelector||f.mozMatchesSelector||f.oMatchesSelector,D=!w.call(document.createElement("div"),
"div"),t=/Edge/.test(navigator.userAgent);i.initElements=z;i.removeElements=B;i.triggerAttached=x;i.triggerAttributeChanged=m;i.triggerCreated=q;i.triggerDetached=y};"function"===typeof k&&k.amd?k("exports ./constants ./data ./mutation-observer ./registry ./utils".split(" "),q):"undefined"!==typeof m&&q(m,__3ceacf009ef9ceb3c52ebb9324915170,__4666b4efa3069445b77e23d8419d0090,__c91177d0507115b2c279ac28adb63576,__c4b6ad56719b8affc0c1c55ea177df52,__c962c88861b22faa9e6b0ff498553ca3);return o.exports}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-skatejs-0.13.17-lib-fix-ie-innerhtml', location = 'node_modules/skatejs/lib/fix-ie-innerhtml.js' */
("undefined"===typeof window?global:window).__576655637d4ea6523fc9a23f8a7b3b68=function(){var f={exports:{}},h=f.exports,k={module:f,exports:h},d;d=function(g,c,b){var e=("undefined"===typeof window?global:window).define,a,i,b=[b,c,g].filter(function(a){return"function"===typeof a})[0],c=[c,g,[]].filter(Array.isArray)[0];a=b.apply(null,c.map(function(a){return k[a]}));i=typeof a;"function"===typeof e&&e("string"===typeof g?g:"__576655637d4ea6523fc9a23f8a7b3b68",c,b);"string"===i?a=String(a):"number"===
i?a=Number(a):"boolean"===i&&(a=Boolean(a));void 0!==a&&(h=f.exports=a)};d.amd=!0;var j=function(){function g(a,c){var b=a.childNodes;if(b)for(var e=b.length,d=0;d<e;d++){var f=b[d];c(f,a);g(f,c)}}var c=/MSIE/.test(navigator.userAgent),b=/Trident/.test(navigator.userAgent),e=window.HTMLElement.prototype;if(c||b)if(c=Object.getOwnPropertyDescriptor(e,"innerHTML"),!c||!c.get._hasBeenEnhanced){b&&(window.MutationObserver=window.JsMutationObserver||window.MutationObserver);var a=Object.getOwnPropertyDescriptor(e,
"innerHTML"),b=function(){return a.get.call(this)};b._hasBeenEnhanced=!0;Object.defineProperty(e,"innerHTML",{get:b,set:function(b){g(this,function(a,b){var c=document.createEvent("MutationEvent");c.initMutationEvent("DOMNodeRemoved",true,false,b,null,null,null,null);a.dispatchEvent(c)});a.set.call(this,b)}})}};"function"===typeof d&&d.amd?d(["exports"],j):"undefined"!==typeof h&&j(h);return f.exports}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-skatejs-0.13.17-lib-document-observer', location = 'node_modules/skatejs/lib/document-observer.js' */
("undefined"===typeof window?global:window).__3c8c6233f9ea85a9125bd2a1e04f063c=function(){var c={exports:{}},f=c.exports,j={module:c,exports:f,"./globals":__df73b283f1d40e8f4912fb904e42aa12,"./lifecycle":__76ada509bc46d5c68cd543ddd8e839a4,"./mutation-observer":__c91177d0507115b2c279ac28adb63576,"./fix-ie-innerhtml":__576655637d4ea6523fc9a23f8a7b3b68,"./utils":__c962c88861b22faa9e6b0ff498553ca3,"./globals":__df73b283f1d40e8f4912fb904e42aa12,"./lifecycle":__76ada509bc46d5c68cd543ddd8e839a4,"./mutation-observer":__c91177d0507115b2c279ac28adb63576,
"./fix-ie-innerhtml":__576655637d4ea6523fc9a23f8a7b3b68,"./utils":__c962c88861b22faa9e6b0ff498553ca3},d;d=function(d,e,b){var k=("undefined"===typeof window?global:window).define,a,g,b=[b,e,d].filter(function(a){return"function"===typeof a})[0],e=[e,d,[]].filter(Array.isArray)[0];a=b.apply(null,e.map(function(a){return j[a]}));g=typeof a;"function"===typeof k&&k("string"===typeof d?d:"__3c8c6233f9ea85a9125bd2a1e04f063c",e,b);"string"===g?a=String(a):"number"===g?a=Number(a):"boolean"===g&&(a=Boolean(a));
void 0!==a&&(f=c.exports=a)};d.amd=!0;var i=function(d,e,b,c,a,g,f){function i(a){for(var d=a.length,c=0;c<d;c++){var b=a[c],e=b.addedNodes,b=b.removedNodes;e&&(e.length&&!l(e[0].parentNode))&&j(e);b&&b.length&&m(b)}}var h=b&&b.__esModule?b["default"]:b,j=c.initElements,m=c.removeElements,l=f.getClosestIgnoredElement;e.exports={register:function(a){a&&this.unregister();h.observer||(a=new window.MutationObserver(i),a.observe(document,{childList:!0,subtree:!0}),h.observer=a);return this},unregister:function(){h.observer&&
(h.observer.disconnect(),h.observer=void 0);return this}}};"function"===typeof d&&d.amd?d("exports module ./globals ./lifecycle ./mutation-observer ./fix-ie-innerhtml ./utils".split(" "),i):"undefined"!==typeof f&&"undefined"!==typeof c&&i(f,c,__df73b283f1d40e8f4912fb904e42aa12,__76ada509bc46d5c68cd543ddd8e839a4,__c91177d0507115b2c279ac28adb63576,__576655637d4ea6523fc9a23f8a7b3b68,__c962c88861b22faa9e6b0ff498553ca3);return c.exports}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-skatejs-0.13.17-lib-skate', location = 'node_modules/skatejs/lib/skate.js' */
("undefined"===typeof window?global:window).__612b714a7afa741ae272e3b4821d110b=function(){var g={exports:{}},e=g.exports,n={module:g,exports:e,"./constants":__3ceacf009ef9ceb3c52ebb9324915170,"./document-observer":__3c8c6233f9ea85a9125bd2a1e04f063c,"./lifecycle":__76ada509bc46d5c68cd543ddd8e839a4,"./registry":__c4b6ad56719b8affc0c1c55ea177df52,"./utils":__c962c88861b22faa9e6b0ff498553ca3,"./version":__15c28555b7ada36a99309d466d5cff55,"./constants":__3ceacf009ef9ceb3c52ebb9324915170,"./document-observer":__3c8c6233f9ea85a9125bd2a1e04f063c,
"./lifecycle":__76ada509bc46d5c68cd543ddd8e839a4,"./registry":__c4b6ad56719b8affc0c1c55ea177df52,"./utils":__c962c88861b22faa9e6b0ff498553ca3,"./version":__15c28555b7ada36a99309d466d5cff55},c;c=function(k,h,d){var c=("undefined"===typeof window?global:window).define,a,j,d=[d,h,k].filter(function(a){return"function"===typeof a})[0],h=[h,k,[]].filter(Array.isArray)[0];a=d.apply(null,h.map(function(a){return n[a]}));j=typeof a;"function"===typeof c&&c("string"===typeof k?k:"__612b714a7afa741ae272e3b4821d110b",
h,d);"string"===j?a=String(a):"number"===j?a=Number(a):"boolean"===j&&(a=Boolean(a));void 0!==a&&(e=g.exports=a)};c.amd=!0;var m=function(c,h,d,g,a,j,e,m){function f(i,b){b=l({},b);b=l(b,f.defaults);b.id=i;o.set(i,b);if(o.isNativeCustomElement(i)){var a=b["extends"]?document.createElement(b["extends"]).constructor.prototype:r.prototype;a.isPrototypeOf(b.prototype)||(b.prototype=l(Object.create(a),b.prototype,!0));a={prototype:l(b.prototype,{createdCallback:function(){s(this,b)},attachedCallback:function(){v(this,
b)},detachedCallback:function(){w(this,b)},attributeChangedCallback:function(a,i,c){x(this,b,{name:a,oldValue:i,newValue:c})}})};b["extends"]&&(a["extends"]=b["extends"]);return document.registerElement(i,a)}y();z.register(!!b.detached);if(o.isType(i,p)){var c=b,d=function(){var a;a=c["extends"];var b=c.id;a?(a=document.createElement(a),a.setAttribute("is",b)):a=document.createElement(b);c.prototype=d.prototype;s(a,c);return a};d.prototype=c.prototype;return d}}var q=function(a){return a&&a.__esModule?
a["default"]:a},c=d.TYPE_ATTRIBUTE,n=d.TYPE_CLASSNAME,p=d.TYPE_ELEMENT,z=q(g),s=a.triggerCreated,v=a.triggerAttached,w=a.triggerDetached,x=a.triggerAttributeChanged,t=a.initElements,o=q(j),d=e.debounce,l=e.inherit,e=q(m),r=window.HTMLElement,u=!!document.attachEvent,y=d(function(){var a=function(){t(document.documentElement.childNodes)},b;b=u?"complete"===document.readyState:"interactive"===document.readyState||"complete"===document.readyState;b?a():u?window.addEventListener("load",a):document.addEventListener("DOMContentLoaded",
a)});f.init=function(a){var b=a;if(!a)return a;"string"===typeof a?b=a=document.querySelectorAll(a):a instanceof r&&(b=[a]);t(b);return a};f.type={ATTRIBUTE:c,CLASSNAME:n,ELEMENT:p};f.version=e;f.defaults={attributes:void 0,events:void 0,"extends":void 0,id:"",prototype:{},resolvedAttribute:"resolved",template:void 0,type:p,unresolvedAttribute:"unresolved"};var A=window.skate;f.noConflict=function(){window.skate=A;return f};window.skate=f;h.exports=f};"function"===typeof c&&c.amd?c("exports module ./constants ./document-observer ./lifecycle ./registry ./utils ./version".split(" "),
m):"undefined"!==typeof e&&"undefined"!==typeof g&&m(e,g,__3ceacf009ef9ceb3c52ebb9324915170,__3c8c6233f9ea85a9125bd2a1e04f063c,__76ada509bc46d5c68cd543ddd8e839a4,__c4b6ad56719b8affc0c1c55ea177df52,__c962c88861b22faa9e6b0ff498553ca3,__15c28555b7ada36a99309d466d5cff55);return g.exports}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-tether-0.6.5-tether', location = 'node_modules/@atlassian/aui/node_modules/tether/tether.js' */
("undefined"===typeof window?global:window).__c73084fddb2d02d92156231c79374859=function(){var I={exports:{}},W=I.exports,X={module:I,exports:W},P;P=function(w,p,x){var B=("undefined"===typeof window?global:window).define,l,v,x=[x,p,w].filter(function(l){return"function"===typeof l})[0],p=[p,w,[]].filter(Array.isArray)[0];l=x.apply(null,p.map(function(l){return X[l]}));v=typeof l;"function"===typeof B&&B("string"===typeof w?w:"__c73084fddb2d02d92156231c79374859",p,x);"string"===v?l=String(l):"number"===
v?l=Number(l):"boolean"===v&&(l=Boolean(l));void 0!==l&&(W=I.exports=l)};P.amd=!0;(function(w){var p,x,B,l,v,Q,R,Y,C,X={}.hasOwnProperty,ya=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1},za=[].slice;null==this.Tether&&(this.Tether={modules:[]});var oa;oa=0;Y=function(){return oa++};C={};v=function(a){var b,c,d;d=a._tetherZeroElement;if(d==null){d=a.createElement("div");d.setAttribute("data-tether-id",Y());l(d.style,{top:0,left:0,position:"absolute"});
a.body.appendChild(d);a._tetherZeroElement=d}b=d.getAttribute("data-tether-id");if(C[b]==null){C[b]={};d=d.getBoundingClientRect();for(c in d){a=d[c];C[b][c]=a}x(function(){return C[b]=void 0})}return C[b]};l=function(a){var b,c,d,e,h,f;a==null&&(a={});b=[];Array.prototype.push.apply(b,arguments);f=b.slice(1);e=0;for(h=f.length;e<h;e++)if(b=f[e])for(c in b)if(X.call(b,c)){d=b[c];a[c]=d}return a};R=function(a,b){var c,d,e,h,f;if(a.classList!=null){h=b.split(" ");f=[];d=0;for(e=h.length;d<e;d++){c=
h[d];c.trim()&&f.push(a.classList.remove(c))}return f}return a.className=a.className.replace(RegExp("(^| )"+b.split(" ").join("|")+"( |$)","gi")," ")};p=function(a,b){var c,d,e,h,f;if(a.classList!=null){h=b.split(" ");f=[];d=0;for(e=h.length;d<e;d++){c=h[d];c.trim()&&f.push(a.classList.add(c))}return f}R(a,b);return a.className=a.className+(" "+b)};Q=function(a,b){return a.classList!=null?a.classList.contains(b):RegExp("(^| )"+b+"( |$)","gi").test(a.className)};B=[];x=function(a){return B.push(a)};
var g=function(){};g.prototype.on=function(a,b,c,d){var e;d==null&&(d=false);if(this.bindings==null)this.bindings={};if((e=this.bindings)[a]==null)e[a]=[];return this.bindings[a].push({handler:b,ctx:c,once:d})};g.prototype.once=function(a,b,c){return this.on(a,b,c,true)};g.prototype.off=function(a,b){var c,d;if(((c=this.bindings)!=null?c[a]:void 0)!=null){if(b==null)return delete this.bindings[a];c=0;for(d=[];c<this.bindings[a].length;)this.bindings[a][c].handler===b?d.push(this.bindings[a].splice(c,
1)):d.push(c++);return d}};g.prototype.trigger=function(){var a,b,c,d,e,h,f;c=arguments[0];a=2<=arguments.length?za.call(arguments,1):[];if((b=this.bindings)!=null&&b[c]){e=0;for(f=[];e<this.bindings[c].length;){h=this.bindings[c][e];d=h.handler;b=h.ctx;h=h.once;d.apply(b!=null?b:this,a);h?f.push(this.bindings[c].splice(e,1)):f.push(e++)}return f}};this.Tether.Utils={getScrollParent:function(a){var b,c,d;b=getComputedStyle(a).position;if(b==="fixed")return a;for(;a=a.parentNode;){try{c=getComputedStyle(a)}catch(e){}if(c==
null||/(auto|scroll)/.test(c.overflow+c["overflow-y"]+c["overflow-x"])&&(b!=="absolute"||(d=c.position)==="relative"||d==="absolute"||d==="fixed"))return a}return document.body},getBounds:function(a){var b,c,d,e,h;if(a===document){c=document;a=document.documentElement}else c=a.ownerDocument;d=c.documentElement;b={};h=a.getBoundingClientRect();for(e in h){a=h[e];b[e]=a}e=v(c);b.top=b.top-e.top;b.left=b.left-e.left;if(b.width==null)b.width=document.body.scrollWidth-b.left-b.right;if(b.height==null)b.height=
document.body.scrollHeight-b.top-b.bottom;b.top=b.top-d.clientTop;b.left=b.left-d.clientLeft;b.right=c.body.clientWidth-b.width-b.left;b.bottom=c.body.clientHeight-b.height-b.top;return b},getOffsetParent:function(a){return a.offsetParent||document.documentElement},extend:l,addClass:p,removeClass:R,hasClass:Q,updateClasses:function(a,b,c){var d,e,h;e=0;for(h=c.length;e<h;e++){d=c[e];ya.call(b,d)<0&&Q(a,d)&&R(a,d)}h=[];c=0;for(e=b.length;c<e;c++){d=b[c];Q(a,d)?h.push(void 0):h.push(p(a,d))}return h},
defer:x,flush:function(){var a,b;for(b=[];a=B.pop();)b.push(a());return b},uniqueId:Y,Evented:g,getScrollBarSize:function(){var a,b,c;a=document.createElement("div");a.style.width="100%";a.style.height="200px";b=document.createElement("div");l(b.style,{position:"absolute",top:0,left:0,pointerEvents:"none",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"});b.appendChild(a);document.body.appendChild(b);c=a.offsetWidth;b.style.overflow="scroll";a=a.offsetWidth;if(c===a)a=b.clientWidth;
document.body.removeChild(b);b=c-a;return{width:b,height:b}}};var pa,qa,Z,D,J,$,aa,ra,S,T,ba,E,U,ca,sa,V,K,da,ea,fa,ga,z,F,ha,ta,Aa=[].slice;if(null==this.Tether)throw Error("You must include the utils.js file before tether.js");D=this.Tether;g=D.Utils;sa=g.getScrollParent;E=g.getBounds;U=g.getOffsetParent;T=g.extend;J=g.addClass;ga=g.removeClass;ha=g.updateClasses;S=g.defer;ba=g.flush;ca=g.getScrollBarSize;ta=function(a,b,c){c==null&&(c=1);return a+c>=b&&b>=a-c};a:{var A,G,L,M,g=document.createElement("div");
M=["transform","webkitTransform","OTransform","MozTransform","msTransform"];G=0;for(L=M.length;G<L;G++)if(A=M[G],void 0!==g.style[A]){F=A;break a}F=void 0}z=[];fa=function(){var a,b,c;b=0;for(c=z.length;b<c;b++){a=z[b];a.position(false)}return ba()};V=function(){var a;return(a=typeof performance!=="undefined"&&performance!==null?typeof performance.now==="function"?performance.now():void 0:void 0)!=null?a:+new Date};var N,H,O,ia;O=H=N=null;ia=function(){if(H!=null&&H>16){H=Math.min(H-16,250);O=setTimeout(ia,
250)}else if(!(N!=null&&V()-N<10)){if(O!=null){clearTimeout(O);O=null}N=V();fa();return H=V()-N}};L=["resize","scroll","touchmove"];M=[];A=0;for(G=L.length;A<G;A++)g=L[A],M.push(window.addEventListener(g,ia));pa={center:"center",left:"right",right:"left"};qa={middle:"middle",top:"bottom",bottom:"top"};Z={top:0,left:0,middle:"50%",center:"50%",bottom:"100%",right:"100%"};ra=function(a,b){var c,d;c=a.left;d=a.top;c==="auto"&&(c=pa[b.left]);d==="auto"&&(d=qa[b.top]);return{left:c,top:d}};aa=function(a){var b,
c;return{left:(b=Z[a.left])!=null?b:a.left,top:(c=Z[a.top])!=null?c:a.top}};$=function(){var a,b,c,d,e,h;b=1<=arguments.length?Aa.call(arguments,0):[];c={top:0,left:0};e=0;for(h=b.length;e<h;e++){a=b[e];d=a.top;a=a.left;typeof d==="string"&&(d=parseFloat(d,10));typeof a==="string"&&(a=parseFloat(a,10));c.top=c.top+d;c.left=c.left+a}return c};K=function(a,b){if(typeof a.left==="string"&&a.left.indexOf("%")!==-1)a.left=parseFloat(a.left,10)/100*b.width;if(typeof a.top==="string"&&a.top.indexOf("%")!==
-1)a.top=parseFloat(a.top,10)/100*b.height;return a};da=ea=function(a){a=a.split(" ");return{top:a[0],left:a[1]}};g=function(a){var b=this.position,c=this;this.position=function(){return b.apply(c,arguments)};var d,e,h,f;z.push(this);this.history=[];this.setOptions(a,false);h=D.modules;d=0;for(e=h.length;d<e;d++){a=h[d];(f=a.initialize)!=null&&f.call(this)}this.position()};g.modules=[];g.prototype.getClass=function(a){var b,c;return(b=this.options.classes)!=null&&b[a]?this.options.classes[a]:((c=
this.options.classes)!=null?c[a]:void 0)!==false?this.options.classPrefix?""+this.options.classPrefix+"-"+a:a:""};g.prototype.setOptions=function(a,b){var c,d,e,h;this.options=a;b==null&&(b=true);c=this.options=T({offset:"0 0",targetOffset:"0 0",targetAttachment:"auto auto",classPrefix:"tether"},this.options);this.element=c.element;this.target=c.target;this.targetModifier=c.targetModifier;if(this.target==="viewport"){this.target=document.body;this.targetModifier="visible"}else if(this.target==="scroll-handle"){this.target=
document.body;this.targetModifier="scroll-handle"}h=["element","target"];d=0;for(e=h.length;d<e;d++){c=h[d];if(this[c]==null)throw Error("Tether Error: Both element and target must be defined");this[c].jquery!=null?this[c]=this[c][0]:typeof this[c]==="string"&&(this[c]=document.querySelector(this[c]))}J(this.element,this.getClass("element"));J(this.target,this.getClass("target"));if(!this.options.attachment)throw Error("Tether Error: You must provide an attachment");this.targetAttachment=da(this.options.targetAttachment);
this.attachment=da(this.options.attachment);this.offset=ea(this.options.offset);this.targetOffset=ea(this.options.targetOffset);this.scrollParent!=null&&this.disable();this.scrollParent=this.targetModifier==="scroll-handle"?this.target:sa(this.target);if(this.options.enabled!==false)return this.enable(b)};g.prototype.getTargetBounds=function(){var a,b,c,d,e,h;if(this.targetModifier!=null)switch(this.targetModifier){case "visible":if(this.target===document.body)return{top:pageYOffset,left:pageXOffset,
height:innerHeight,width:innerWidth};a=E(this.target);d={height:a.height,width:a.width,top:a.top,left:a.left};d.height=Math.min(d.height,a.height-(pageYOffset-a.top));d.height=Math.min(d.height,a.height-(a.top+a.height-(pageYOffset+innerHeight)));d.height=Math.min(innerHeight,d.height);d.height=d.height-2;d.width=Math.min(d.width,a.width-(pageXOffset-a.left));d.width=Math.min(d.width,a.width-(a.left+a.width-(pageXOffset+innerWidth)));d.width=Math.min(innerWidth,d.width);d.width=d.width-2;if(d.top<
pageYOffset)d.top=pageYOffset;if(d.left<pageXOffset)d.left=pageXOffset;return d;case "scroll-handle":e=this.target;if(e===document.body){e=document.documentElement;a={left:pageXOffset,top:pageYOffset,height:innerHeight,width:innerWidth}}else a=E(e);h=getComputedStyle(e);b=e.scrollWidth>e.clientWidth||"scroll"===[h.overflow,h.overflowX]||this.target!==document.body;c=0;b&&(c=15);c=a.height-parseFloat(h.borderTopWidth)-parseFloat(h.borderBottomWidth)-c;d={width:15,height:c*0.975*(c/e.scrollHeight),
left:a.left+a.width-parseFloat(h.borderLeftWidth)-15};b=0;c<408&&this.target===document.body&&(b=-1.1E-4*Math.pow(c,2)-0.00727*c+22.58);if(this.target!==document.body)d.height=Math.max(d.height,24);e=this.target.scrollTop/(e.scrollHeight-c);d.top=e*(c-d.height-b)+a.top+parseFloat(h.borderTopWidth);if(this.target===document.body)d.height=Math.max(d.height,24);return d}else return E(this.target)};g.prototype.clearCache=function(){return this._cache={}};g.prototype.cache=function(a,b){if(this._cache==
null)this._cache={};this._cache[a]==null&&(this._cache[a]=b.call(this));return this._cache[a]};g.prototype.enable=function(a){a==null&&(a=true);J(this.target,this.getClass("enabled"));J(this.element,this.getClass("enabled"));this.enabled=true;this.scrollParent!==document&&this.scrollParent.addEventListener("scroll",this.position);if(a)return this.position()};g.prototype.disable=function(){ga(this.target,this.getClass("enabled"));ga(this.element,this.getClass("enabled"));this.enabled=false;if(this.scrollParent!=
null)return this.scrollParent.removeEventListener("scroll",this.position)};g.prototype.destroy=function(){var a,b,c,d,e;this.disable();e=[];a=c=0;for(d=z.length;c<d;a=++c){b=z[a];if(b===this){z.splice(a,1);break}else e.push(void 0)}return e};g.prototype.updateAttachClasses=function(a,b){var c,d,e,h,f,t=this;if(a==null)a=this.attachment;if(b==null)b=this.targetAttachment;e=["left","top","bottom","right","middle","center"];(c=this._addAttachClasses)!=null&&c.length&&this._addAttachClasses.splice(0,
this._addAttachClasses.length);c=this._addAttachClasses!=null?this._addAttachClasses:this._addAttachClasses=[];a.top&&c.push(""+this.getClass("element-attached")+"-"+a.top);a.left&&c.push(""+this.getClass("element-attached")+"-"+a.left);b.top&&c.push(""+this.getClass("target-attached")+"-"+b.top);b.left&&c.push(""+this.getClass("target-attached")+"-"+b.left);d=[];h=0;for(f=e.length;h<f;h++){c=e[h];d.push(""+this.getClass("element-attached")+"-"+c)}h=0;for(f=e.length;h<f;h++){c=e[h];d.push(""+this.getClass("target-attached")+
"-"+c)}return S(function(){if(t._addAttachClasses!=null){ha(t.element,t._addAttachClasses,d);ha(t.target,t._addAttachClasses,d);return t._addAttachClasses=void 0}})};g.prototype.position=function(a){var b,c,d,e,h,f,t,m,j,k,g,o,i,n,q,l,y,r,s,p,u=this;a==null&&(a=true);if(this.enabled){this.clearCache();i=ra(this.targetAttachment,this.attachment);this.updateAttachClasses(this.attachment,i);b=this.cache("element-bounds",function(){return E(u.element)});g=b.width;c=b.height;if(g===0&&c===0&&this.lastSize!=
null){c=this.lastSize;g=c.width;c=c.height}else this.lastSize={width:g,height:c};d=q=this.cache("target-bounds",function(){return u.getTargetBounds()});t=K(aa(this.attachment),{width:g,height:c});n=K(aa(i),d);e=K(this.offset,{width:g,height:c});h=K(this.targetOffset,d);t=$(t,e);n=$(n,h);d=q.left+n.left-t.left;l=q.top+n.top-t.top;p=D.modules;y=0;for(s=p.length;y<s;y++){f=p[y];f=f.position.call(this,{left:d,top:l,targetAttachment:i,targetPos:q,attachment:this.attachment,elementPos:b,offset:t,targetOffset:n,
manualOffset:e,manualTargetOffset:h,scrollbarSize:m});if(!(f==null||typeof f!=="object")){if(f===false)return false;l=f.top;d=f.left}}b={page:{top:l,left:d},viewport:{top:l-pageYOffset,bottom:pageYOffset-l-c+innerHeight,left:d-pageXOffset,right:pageXOffset-d-g+innerWidth}};if(document.body.scrollWidth>window.innerWidth){m=this.cache("scrollbar-size",ca);b.viewport.bottom=b.viewport.bottom-m.height}if(document.body.scrollHeight>window.innerHeight){m=this.cache("scrollbar-size",ca);b.viewport.right=
b.viewport.right-m.width}if((k=document.body.style.position)!==""&&k!=="static"||(o=document.body.parentElement.style.position)!==""&&o!=="static"){b.page.bottom=document.body.scrollHeight-l-c;b.page.right=document.body.scrollWidth-d-g}if(((r=this.options.optimizations)!=null?r.moveElement:void 0)!==false&&this.targetModifier==null){j=this.cache("target-offsetparent",function(){return U(u.target)});g=this.cache("target-offsetparent-bounds",function(){return E(j)});k=getComputedStyle(j);getComputedStyle(this.element);
m={};i=["Top","Left","Bottom","Right"];r=0;for(c=i.length;r<c;r++){o=i[r];m[o.toLowerCase()]=parseFloat(k["border"+o+"Width"])}g.right=document.body.scrollWidth-g.left-g.width+m.right;g.bottom=document.body.scrollHeight-g.top-g.height+m.bottom;if(b.page.top>=g.top+m.top&&b.page.bottom>=g.bottom&&b.page.left>=g.left+m.left&&b.page.right>=g.right){o=j.scrollTop;k=j.scrollLeft;b.offset={top:b.page.top-g.top+o-m.top,left:b.page.left-g.left+k-m.left}}}this.move(b);this.history.unshift(b);this.history.length>
3&&this.history.pop();a&&ba();return true}};g.prototype.move=function(a){var b,c,d,e,h,f,g,m,j,k,l,o,i=this;if(this.element.parentNode!=null){f={};for(g in a){f[g]={};for(d in a[g]){c=false;l=this.history;j=0;for(k=l.length;j<k;j++){h=l[j];if(!ta((o=h[g])!=null?o[d]:void 0,a[g][d])){c=true;break}}c||(f[g][d]=true)}}b={top:"",left:"",right:"",bottom:""};h=function(a,c){var d,e;if(((d=i.options.optimizations)!=null?d.gpu:void 0)!==false){if(a.top){b.top=0;e=c.top}else{b.bottom=0;e=-c.bottom}if(a.left){b.left=
0;d=c.left}else{b.right=0;d=-c.right}b[F]="translateX("+Math.round(d)+"px) translateY("+Math.round(e)+"px)";if(F!=="msTransform")return b[F]=b[F]+" translateZ(0)"}else{a.top?b.top=""+c.top+"px":b.bottom=""+c.bottom+"px";return a.left?b.left=""+c.left+"px":b.right=""+c.right+"px"}};c=false;if((f.page.top||f.page.bottom)&&(f.page.left||f.page.right)){b.position="absolute";h(f.page,a.page)}else if((f.viewport.top||f.viewport.bottom)&&(f.viewport.left||f.viewport.right)){b.position="fixed";h(f.viewport,
a.viewport)}else if(f.offset!=null&&f.offset.top&&f.offset.left){b.position="absolute";e=this.cache("target-offsetparent",function(){return U(i.target)});U(this.element)!==e&&S(function(){i.element.parentNode.removeChild(i.element);return e.appendChild(i.element)});h(f.offset,a.offset);c=true}else{b.position="absolute";h({top:true,left:true},a.page)}if(!c&&this.element.parentNode.tagName!=="BODY"){this.element.parentNode.removeChild(this.element);document.body.appendChild(this.element)}m={};c=false;
for(d in b){f=b[d];a=this.element.style[d];if(a!==""&&f!==""&&(d==="top"||d==="left"||d==="bottom"||d==="right")){a=parseFloat(a);f=parseFloat(f)}if(a!==f){c=true;m[d]=b[d]}}if(c)return S(function(){return T(i.element.style,m)})}};D.position=fa;this.Tether=T(g,D);var ja,ua,ka,va,la,ma,u=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1},g=this.Tether.Utils;la=g.getBounds;ka=g.extend;ma=g.updateClasses;ua=g.defer;ja=["left","top","right","bottom"];
va=function(a,b){var c,d,e,h,f;b==="scrollParent"?b=a.scrollParent:b==="window"&&(b=[pageXOffset,pageYOffset,innerWidth+pageXOffset,innerHeight+pageYOffset]);if(b===document)b=b.documentElement;if(b.nodeType!=null){c=d=la(b);e=getComputedStyle(b);b=[c.left,c.top,d.width+c.left,d.height+c.top];c=h=0;for(f=ja.length;h<f;c=++h){d=ja[c];d=d[0].toUpperCase()+d.substr(1);b[c]=d==="Top"||d==="Left"?b[c]+parseFloat(e["border"+d+"Width"]):b[c]-parseFloat(e["border"+d+"Width"])}}return b};this.Tether.modules.push({position:function(a){var b,
c,d,e,h,f,g,m,j,k,l,o,i,n,q,p,y,r,s,w,x,v=this;i=a.top;j=a.left;a=a.targetAttachment;if(!this.options.constraints)return true;n=this.cache("element-bounds",function(){return la(v.element)});m=n.height;n=n.width;if(n===0&&m===0&&this.lastSize!=null){m=this.lastSize;n=m.width;m=m.height}o=this.cache("target-bounds",function(){return v.getTargetBounds()});l=o.height;o=o.width;k={};f={};c=[this.getClass("pinned"),this.getClass("out-of-bounds")];q=this.options.constraints;f=0;for(k=q.length;f<k;f++){g=
q[f];g.outOfBoundsClass&&c.push(g.outOfBoundsClass);g.pinnedClass&&c.push(g.pinnedClass)}k=0;for(p=c.length;k<p;k++){f=c[k];e=["left","top","right","bottom"];q=0;for(y=e.length;q<y;q++){g=e[q];c.push(""+f+"-"+g)}}b=[];k=ka({},a);f=ka({},this.attachment);y=this.options.constraints;q=0;for(p=y.length;q<p;q++){g=y[q];e=g.to;d=g.attachment;g=g.pin;d==null&&(d="");if(u.call(d," ")>=0){h=d.split(" ");d=h[0];h=h[1]}else h=d;e=va(this,e);if(d==="target"||d==="both"){if(i<e[1]&&k.top==="top"){i=i+l;k.top=
"bottom"}if(i+m>e[3]&&k.top==="bottom"){i=i-l;k.top="top"}}if(d==="together"){if(i<e[1]&&k.top==="top")if(f.top==="bottom"){i=i+l;k.top="bottom";i=i+m;f.top="top"}else if(f.top==="top"){i=i+l;k.top="bottom";i=i-m;f.top="bottom"}if(i+m>e[3]&&k.top==="bottom")if(f.top==="top"){i=i-l;k.top="top";i=i-m;f.top="bottom"}else if(f.top==="bottom"){i=i-l;k.top="top";i=i+m;f.top="top"}if(k.top==="middle")if(i+m>e[3]&&f.top==="top"){i=i-m;f.top="bottom"}else if(i<e[1]&&f.top==="bottom"){i=i+m;f.top="top"}}if(h===
"target"||h==="both"){if(j<e[0]&&k.left==="left"){j=j+o;k.left="right"}if(j+n>e[2]&&k.left==="right"){j=j-o;k.left="left"}}if(h==="together")if(j<e[0]&&k.left==="left")if(f.left==="right"){j=j+o;k.left="right";j=j+n;f.left="left"}else{if(f.left==="left"){j=j+o;k.left="right";j=j-n;f.left="right"}}else if(j+n>e[2]&&k.left==="right")if(f.left==="left"){j=j-o;k.left="left";j=j-n;f.left="right"}else{if(f.left==="right"){j=j-o;k.left="left";j=j+n;f.left="left"}}else if(k.left==="center")if(j+n>e[2]&&f.left===
"left"){j=j-n;f.left="right"}else if(j<e[0]&&f.left==="right"){j=j+n;f.left="left"}if(d==="element"||d==="both"){if(i<e[1]&&f.top==="bottom"){i=i+m;f.top="top"}if(i+m>e[3]&&f.top==="top"){i=i-m;f.top="bottom"}}if(h==="element"||h==="both"){if(j<e[0]&&f.left==="right"){j=j+n;f.left="left"}if(j+n>e[2]&&f.left==="left"){j=j-n;f.left="right"}}if(typeof g==="string"){s=r=h=d=void 0;r=g.split(",");s=[];h=0;for(d=r.length;h<d;h++){g=r[h];s.push(g.trim())}g=s}else g===true&&(g=["top","left","right","bottom"]);
g||(g=[]);h=[];d=[];if(i<e[1])if(u.call(g,"top")>=0){i=e[1];h.push("top")}else d.push("top");if(i+m>e[3])if(u.call(g,"bottom")>=0){i=e[3]-m;h.push("bottom")}else d.push("bottom");if(j<e[0])if(u.call(g,"left")>=0){j=e[0];h.push("left")}else d.push("left");if(j+n>e[2])if(u.call(g,"right")>=0){j=e[2]-n;h.push("right")}else d.push("right");if(h.length){e=(w=this.options.pinnedClass)!=null?w:this.getClass("pinned");b.push(e);s=0;for(r=h.length;s<r;s++){g=h[s];b.push(""+e+"-"+g)}}if(d.length){e=(x=this.options.outOfBoundsClass)!=
null?x:this.getClass("out-of-bounds");b.push(e);s=0;for(r=d.length;s<r;s++){g=d[s];b.push(""+e+"-"+g)}}if(u.call(h,"left")>=0||u.call(h,"right")>=0)f.left=k.left=false;if(u.call(h,"top")>=0||u.call(h,"bottom")>=0)f.top=k.top=false;(k.top!==a.top||k.left!==a.left||f.top!==this.attachment.top||f.left!==this.attachment.left)&&this.updateAttachClasses(f,k)}ua(function(){ma(v.target,b,c);return ma(v.element,b,c)});return{top:i,left:j}}});var wa,xa,na,g=this.Tether.Utils;xa=g.getBounds;na=g.updateClasses;
wa=g.defer;this.Tether.modules.push({position:function(a){var b,c,d,e,h,f,g,m,j,k,l,o,i,n=this;g=a.top;e=a.left;f=this.cache("element-bounds",function(){return xa(n.element)});a=f.height;f=f.width;m=this.getTargetBounds();d=g+a;h=e+f;a=[];if(g<=m.bottom&&d>=m.top){i=["left","right"];j=0;for(o=i.length;j<o;j++){f=i[j];((k=m[f])===e||k===h)&&a.push(f)}}if(e<=m.right&&h>=m.left){h=["top","bottom"];k=0;for(e=h.length;k<e;k++){f=h[k];((l=m[f])===g||l===d)&&a.push(f)}}c=[];b=[];g=["left","top","right",
"bottom"];c.push(this.getClass("abutted"));l=0;for(m=g.length;l<m;l++){f=g[l];c.push(""+this.getClass("abutted")+"-"+f)}a.length&&b.push(this.getClass("abutted"));g=0;for(l=a.length;g<l;g++){f=a[g];b.push(""+this.getClass("abutted")+"-"+f)}wa(function(){na(n.target,b,c);return na(n.element,b,c)});return true}});this.Tether.modules.push({position:function(a){var b,c,d;d=a.top;b=a.left;if(this.options.shift){a=function(a){return typeof a==="function"?a.call(this,{top:d,left:b}):a};c=a(this.options.shift);
if(typeof c==="string"){c=c.split(" ");c[1]||(c[1]=c[0]);a=c[0];c=c[1];a=parseFloat(a,10);c=parseFloat(c,10)}else{c=[c.top,c.left];a=c[0];c=c[1]}d=d+a;b=b+c;return{top:d,left:b}}}});w.Tether=this.Tether;"function"===typeof P?P([],function(){return w.Tether}):"object"===typeof W&&(I.exports=w.Tether)})(this);return I.exports}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-version', location = 'node_modules/@atlassian/aui/src/js/aui/version.js' */
("undefined"===typeof window?global:window).__399d6bb24e6280e2241deb4e98d541ff=function(){var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});var a=__4d02fe17b8e885a34493e34af3d145dd,a=a&&a.__esModule?a:{"default":a};(0,a.default)("version","6.0.5");b.default="6.0.5";return b=b["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-prevent-default', location = 'node_modules/@atlassian/aui/src/js/aui/prevent-default.js' */
("undefined"===typeof window?global:window).__0a2618b4f4b11d46cc024fa7624c6b00=function(){function c(a){a.preventDefault()}var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});var a=__4d02fe17b8e885a34493e34af3d145dd,a=a&&a.__esModule?a:{"default":a};(0,a.default)("preventDefault",c);b.default=c;return b=b["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-stop-event', location = 'node_modules/@atlassian/aui/src/js/aui/stop-event.js' */
("undefined"===typeof window?global:window).__aeebc1cbc698431a10d11e14e8095d6e=function(){function b(a){a.stopPropagation();return!1}var c={};"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=__c8cfa00f1eba9ac7af89ee3d0d33961d,a=__4d02fe17b8e885a34493e34af3d145dd,a=a&&a.__esModule?a:{"default":a},b=(0,d.fn)(b,"stopEvent",{alternativeName:"preventDefault()",sinceVersion:"5.8.0"});(0,a.default)("stopEvent",b);c.default=b;return c=c["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-index-of', location = 'node_modules/@atlassian/aui/src/js/aui/index-of.js' */
("undefined"===typeof window?global:window).__d350fbd2bc40ef24a63df8309bff4162=function(){function d(b,c,a){var d=b.length;for(a?0>a&&(a=Math.max(0,d+a)):a=0;a<d;a++)if(b[a]===c)return a;return-1}var c={};"use strict";Object.defineProperty(c,"__esModule",{value:!0});var b=__4d02fe17b8e885a34493e34af3d145dd,b=b&&b.__esModule?b:{"default":b};(0,b.default)("indexOf",d);c.default=d;return c=c["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-contains', location = 'node_modules/@atlassian/aui/src/js/aui/contains.js' */
("undefined"===typeof window?global:window).__a2c859f35719ca3425471df788438a74=function(){function d(a,b){return-1<(0,e.default)(a,b)}var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});var a=__4d02fe17b8e885a34493e34af3d145dd,a=a&&a.__esModule?a:{"default":a},c=__d350fbd2bc40ef24a63df8309bff4162,e=c&&c.__esModule?c:{"default":c};(0,a.default)("contains",d);b.default=d;return b=b["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-include', location = 'node_modules/@atlassian/aui/src/js/aui/include.js' */
("undefined"===typeof window?global:window).__2396162f5ca62936e832b63581d0b02d=function(){function d(a){return a&&a.__esModule?a:{"default":a}}function b(a){if(!(0,f.default)(e,a)){e.push(a);var b=document.createElement("script");b.src=a;(0,g.default)("body").append(b)}}var c={};"use strict";Object.defineProperty(c,"__esModule",{value:!0});var g=d(__307d3e18fd611f85395c67cddeb1fe24),h=__c8cfa00f1eba9ac7af89ee3d0d33961d,f=d(__a2c859f35719ca3425471df788438a74),i=d(__4d02fe17b8e885a34493e34af3d145dd),
e=[],b=(0,h.fn)(b,"include",{sinceVersion:"5.9.0",extraInfo:"No alternative will be provided. Use a proper module loader instead."});(0,i.default)("include",b);c.default=b;return c=c["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-toggle-class-name', location = 'node_modules/@atlassian/aui/src/js/aui/toggle-class-name.js' */
("undefined"===typeof window?global:window).__c420a05e11c25eb845523736179494b2=function(){function c(a,b){(a=(0,e.default)(a))&&a.toggleClass(b)}var d={};"use strict";Object.defineProperty(d,"__esModule",{value:!0});var a=__307d3e18fd611f85395c67cddeb1fe24,e=a&&a.__esModule?a:{"default":a},a=__c8cfa00f1eba9ac7af89ee3d0d33961d,b=__4d02fe17b8e885a34493e34af3d145dd,b=b&&b.__esModule?b:{"default":b},c=(0,a.fn)(c,"toggleClassName",{sinceVersion:"5.8.0"});(0,b.default)("toggleClassName",c);d.default=c;
return d=d["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-set-visible', location = 'node_modules/@atlassian/aui/src/js/aui/set-visible.js' */
("undefined"===typeof window?global:window).__a6a0829fdd31675ae9bd1ab07593b9aa=function(){function d(a,b){if(a=(0,c.default)(a))(0,c.default)(a).each(function(){var a=(0,c.default)(this).hasClass("hidden");a&&b?(0,c.default)(this).removeClass("hidden"):!a&&!b&&(0,c.default)(this).addClass("hidden")})}var e={};"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=__307d3e18fd611f85395c67cddeb1fe24,c=a&&a.__esModule?a:{"default":a},a=__c8cfa00f1eba9ac7af89ee3d0d33961d,b=__4d02fe17b8e885a34493e34af3d145dd,
b=b&&b.__esModule?b:{"default":b},d=(0,a.fn)(d,"setVisible",{sinceVersion:"5.9.0",extraInfo:"No alternative will be provided. Use jQuery.addClass() / removeClass() instead."});(0,b.default)("setVisible",d);e.default=d;return e=e["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-set-current', location = 'node_modules/@atlassian/aui/src/js/aui/set-current.js' */
("undefined"===typeof window?global:window).__2886f8ce6fcbda101b4cfd4ff7250339=function(){function c(a,b){if(a=(0,e.default)(a))b?a.addClass("current"):a.removeClass("current")}var d={};"use strict";Object.defineProperty(d,"__esModule",{value:!0});var a=__307d3e18fd611f85395c67cddeb1fe24,e=a&&a.__esModule?a:{"default":a},a=__c8cfa00f1eba9ac7af89ee3d0d33961d,b=__4d02fe17b8e885a34493e34af3d145dd,b=b&&b.__esModule?b:{"default":b},c=(0,a.fn)(c,"setCurrent",{sinceVersion:"5.9.0",extraInfo:"No alternative will be provided. Use jQuery.addClass() / removeClass() instead."});
(0,b.default)("setCurrent",c);d.default=c;return d=d["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-is-visible', location = 'node_modules/@atlassian/aui/src/js/aui/is-visible.js' */
("undefined"===typeof window?global:window).__2c1b431bb110038d1c7590dfbddac12c=function(){function c(a){return!(0,e.default)(a).hasClass("hidden")}var d={};"use strict";Object.defineProperty(d,"__esModule",{value:!0});var a=__307d3e18fd611f85395c67cddeb1fe24,e=a&&a.__esModule?a:{"default":a},a=__c8cfa00f1eba9ac7af89ee3d0d33961d,b=__4d02fe17b8e885a34493e34af3d145dd,b=b&&b.__esModule?b:{"default":b},c=(0,a.fn)(c,"isVisible",{sinceVersion:"5.9.0",extraInfo:"No alternative will be provided. Use jQuery.hasClass() instead."});
(0,b.default)("isVisible",c);d.default=c;return d=d["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-is-clipped', location = 'node_modules/@atlassian/aui/src/js/aui/is-clipped.js' */
("undefined"===typeof window?global:window).__be88e4b5c5dd8d343902ce7534076e13=function(){function c(a){a=(0,d.default)(a);return a.prop("scrollWidth")>a.prop("clientWidth")}var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});var a=__307d3e18fd611f85395c67cddeb1fe24,d=a&&a.__esModule?a:{"default":a},a=(a=__4d02fe17b8e885a34493e34af3d145dd)&&a.__esModule?a:{"default":a};(0,a.default)("isClipped",c);b.default=c;return b=b["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-params', location = 'node_modules/@atlassian/aui/src/js/aui/params.js' */
("undefined"===typeof window?global:window).__c9067396b725a0e50bb5247a7338561e=function(){var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});var a=__4d02fe17b8e885a34493e34af3d145dd,a=a&&a.__esModule?a:{"default":a};b.default=(0,a.default)("params",{});return b=b["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-populate-parameters', location = 'node_modules/@atlassian/aui/src/js/aui/populate-parameters.js' */
("undefined"===typeof window?global:window).__0210cf71af3a1c7fcbb0f421af87d03c=function(){function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){a||(a=g.default);(0,f.default)(".parameters input").each(function(){var c=this.value,b=this.title||this.id;(0,f.default)(this).hasClass("list")?a[b]?a[b].push(c):a[b]=[c]:a[b]=c.match(/^(tru|fals)e$/i)?c.toLowerCase()==="true":c})}var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});var f=d(__307d3e18fd611f85395c67cddeb1fe24),
h=d(__4d02fe17b8e885a34493e34af3d145dd),g=d(__c9067396b725a0e50bb5247a7338561e);(0,h.default)("populateParameters",e);b.default=e;return b=b["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-internal-log', location = 'node_modules/@atlassian/aui/src/js/aui/internal/log.js' */
("undefined"===typeof window?global:window).__cf890abdf040e0993fb71f2f839bc972=function(){function c(a){return function(){"undefined"!==typeof console&&console[a]&&Function.prototype.apply.call(console[a],console,arguments)}}var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.error=a.warn=a.log=void 0;var b=__4d02fe17b8e885a34493e34af3d145dd,b=b&&b.__esModule?b:{"default":b},d=c("log"),e=c("warn"),f=c("error");(0,b.default)("error",f);(0,b.default)("log",d);(0,b.default)("warn",
e);a.log=d;a.warn=e;a.error=f;return a}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-to-init', location = 'node_modules/@atlassian/aui/src/js/aui/to-init.js' */
("undefined"===typeof window?global:window).__ba5a7ce6790d1c3ae792c368216bffa8=function(){function f(a){(0,g.default)(function(){try{a.apply(this,arguments)}catch(b){d.log("Failed to run init function: "+b+"\n"+a.toString())}});return this}var c={};"use strict";Object.defineProperty(c,"__esModule",{value:!0});var a=__307d3e18fd611f85395c67cddeb1fe24,g=a&&a.__esModule?a:{"default":a},d;if((a=__cf890abdf040e0993fb71f2f839bc972)&&a.__esModule)d=a;else{var e={};if(null!=a)for(var b in a)Object.prototype.hasOwnProperty.call(a,
b)&&(e[b]=a[b]);e.default=a;d=e}b=(b=__4d02fe17b8e885a34493e34af3d145dd)&&b.__esModule?b:{"default":b};(0,b.default)("toInit",f);c.default=f;return c=c["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-firebug', location = 'node_modules/@atlassian/aui/src/js/aui/firebug.js' */
("undefined"===typeof window?global:window).__a2065e31477708e50a18b50a0ede61c2=function(){function e(){}function d(){var a=(0,g.default)(document.createElement("script"));a.attr("src","https://getfirebug.com/releases/lite/1.2/firebug-lite-compressed.js");(0,g.default)("head").append(a);window.firebug?d.init():setTimeout(d,0)}var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});b.warnAboutFirebug=b.firebug=void 0;var a=__307d3e18fd611f85395c67cddeb1fe24,g=a&&a.__esModule?a:{"default":a},
c;if((a=__c8cfa00f1eba9ac7af89ee3d0d33961d)&&a.__esModule)c=a;else{var f={};if(null!=a)for(c in a)Object.prototype.hasOwnProperty.call(a,c)&&(f[c]=a[c]);f.default=a;c=f}a=(a=__4d02fe17b8e885a34493e34af3d145dd)&&a.__esModule?a:{"default":a};b.firebug=d=c.fn(d,"firebug",{sinceVersion:"5.1.0"});b.warnAboutFirebug=e=c.fn(e,"warnAboutFirebug",{sinceVersion:"5.8.0"});(0,a.default)("firebug",d);(0,a.default)("warnAboutFirebug",e);b.firebug=d;b.warnAboutFirebug=e;return b}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-clone', location = 'node_modules/@atlassian/aui/src/js/aui/clone.js' */
("undefined"===typeof window?global:window).__3991070589efec7bdc39ed4cd105d896=function(){function c(a){return(0,d.default)(a).clone().removeAttr("id")}var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});var a=__307d3e18fd611f85395c67cddeb1fe24,d=a&&a.__esModule?a:{"default":a},a=(a=__4d02fe17b8e885a34493e34af3d145dd)&&a.__esModule?a:{"default":a};(0,a.default)("clone",c);b.default=c;return b=b["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-alphanum', location = 'node_modules/@atlassian/aui/src/js/aui/alphanum.js' */
("undefined"===typeof window?global:window).__b7458c300fca6582c4952fdcceceaf52=function(){function h(c,d){for(var c=(c+"").toLowerCase(),d=(d+"").toLowerCase(),b=/(\d+|\D+)/g,e=c.match(b),b=d.match(b),h=Math.max(e.length,b.length),a=0;a<h;a++){if(a===e.length)return-1;if(a===b.length)return 1;var f=parseInt(e[a],10)+"",g=parseInt(b[a],10)+"";if(f===e[a]&&g===b[a]&&f!==g)return(f-g)/Math.abs(f-g);if((f!==e[a]||g!==b[a])&&e[a]!==b[a])return e[a]<b[a]?-1:1}return 0}var d={};"use strict";Object.defineProperty(d,
"__esModule",{value:!0});var c=__4d02fe17b8e885a34493e34af3d145dd,c=c&&c.__esModule?c:{"default":c};(0,c.default)("alphanum",h);d.default=h;return d=d["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-on-text-resize', location = 'node_modules/@atlassian/aui/src/js/aui/on-text-resize.js' */
("undefined"===typeof window?global:window).__7993d85ab19905f85e57d36cb0999580=function(){function d(a){return a&&a.__esModule?a:{"default":a}}function a(b){if("function"===typeof b)if(a["on-text-resize"])a["on-text-resize"].push(function(a){b(a)});else{var c=(0,e.default)("div");c.css({width:"1em",height:"1em",position:"absolute",top:"-9999em",left:"-9999em"});(0,f.default)("body").append(c);c.size=c.width();setInterval(function(){if(c.size!==c.width()){c.size=c.width();for(var b=0,d=a["on-text-resize"].length;b<
d;b++)a["on-text-resize"][b](c.size)}},0);a.em=c;a["on-text-resize"]=[function(a){b(a)}]}}var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});var f=d(__307d3e18fd611f85395c67cddeb1fe24),e=d(__fd277fcde858b82a198666a405e85600),g=d(__4d02fe17b8e885a34493e34af3d145dd);(0,g.default)("onTextResize",a);b.default=a;return b=b["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-unbind-text-resize', location = 'node_modules/@atlassian/aui/src/js/aui/unbind-text-resize.js' */
("undefined"===typeof window?global:window).__44bcf6c07add060bcccfeba49a3ce6b4=function(){function e(b){for(var a=0,c=d.default["on-text-resize"].length;a<c;a++)if(d.default["on-text-resize"][a]===b)return d.default["on-text-resize"].splice(a,1)}var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});var b=__4d02fe17b8e885a34493e34af3d145dd,b=b&&b.__esModule?b:{"default":b},c=__7993d85ab19905f85e57d36cb0999580,d=c&&c.__esModule?c:{"default":c};(0,b.default)("unbindTextResize",e);a.default=
e;return a=a["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-escape', location = 'node_modules/@atlassian/aui/src/js/aui/escape.js' */
("undefined"===typeof window?global:window).__7e7d65e26f310fe6f23f29f57edf55c9=function(){function c(a){return d(a).replace(/%u\w{4}/gi,function(a){return unescape(a)})}var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});var a=__4d02fe17b8e885a34493e34af3d145dd,a=a&&a.__esModule?a:{"default":a},d=window.escape;(0,a.default)("escape",c);b.default=c;return b=b["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-escape-html', location = 'node_modules/@atlassian/aui/src/js/aui/escape-html.js' */
("undefined"===typeof window?global:window).__d909216fe400315d9bcd3c1a7748d78f=function(){function c(a){return a.replace(/[&"'<>`]/g,function(a){var b={"<":"&lt;",">":"&gt;","&":"&amp;","'":"&#39;","`":"&#96;"};return"string"===typeof b[a]?b[a]:"&quot;"})}var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});var a=__4d02fe17b8e885a34493e34af3d145dd,a=a&&a.__esModule?a:{"default":a};(0,a.default)("escapeHtml",c);b.default=c;return b=b["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-filter-by-search', location = 'node_modules/@atlassian/aui/src/js/aui/filter-by-search.js' */
("undefined"===typeof window?global:window).__92d9a6fcc35a9e99b2baea240928a821=function(){function c(b,c,a){if(!c)return[];var e=a&&a.keywordsField||"keywords",d=a&&a.ignoreForCamelCase?"i":"",h=a&&a.matchBoundary?"\\b":"",f=[];c.split(a&&a.splitRegex||/\s+/).forEach(function(a){a=[RegExp(h+a,"i")];if(/^([A-Z][a-z]*) {2,}$/.test(this)){var b=this.replace(/([A-Z][a-z]*)/g,"\\b$1[^,]*");a.push(RegExp(b,d))}f.push(a)});var g=[];b.forEach(function(a){for(var b=0;b<f.length;b++){for(var c=!1,d=0;d<f[b].length;d++)if(f[b][d].test(a[e])){c=
!0;break}if(!c)return}g.push(a)});return g}var e={};"use strict";Object.defineProperty(e,"__esModule",{value:!0});var d=__c8cfa00f1eba9ac7af89ee3d0d33961d,b=__4d02fe17b8e885a34493e34af3d145dd,b=b&&b.__esModule?b:{"default":b},c=(0,d.fn)(c,"filterBySearch",{sinceVersion:"5.9.0",extraInfo:"No alternative will be provided. If products require this function, this should be copied."});(0,b.default)("filterBySearch",c);e.default=c;return e=e["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-debounce', location = 'node_modules/@atlassian/aui/src/js/aui/debounce.js' */
("undefined"===typeof window?global:window).__c6e18cf9266fe56d02f78a6e812f58db=function(){function g(a,b){var c,d;return function(){var e=arguments,f=this;clearTimeout(c);c=setTimeout(function(){d=a.apply(f,e);f=e=null},b);return d}}function h(a,b){var c=null,d;return function(){var e=this,f=arguments;null===c&&(d=a.apply(e,f));clearTimeout(c);c=setTimeout(function(){c=e=f=null},b);return d}}var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});b.default=g;b.debounceImmediate=h;var a=
__4d02fe17b8e885a34493e34af3d145dd,a=a&&a.__esModule?a:{"default":a};(0,a.default)("debounce",g);(0,a.default)("debounceImmediate",h);return b}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-unique-id', location = 'node_modules/@atlassian/aui/src/js/aui/unique-id.js' */
("undefined"===typeof window?global:window).__9fa5e8acd81f0f9028180b8fcdcd9cb4=function(){function e(a){d=f++ +"";b=a?a+d:"aui-uid-"+d;if(document.getElementById(b)&&(b=b+"-"+(new Date).getTime(),document.getElementById(b)))throw Error('Timestamped fallback ID "'+b+'" exists.');return b}var c={};"use strict";Object.defineProperty(c,"__esModule",{value:!0});var a=__4d02fe17b8e885a34493e34af3d145dd,a=a&&a.__esModule?a:{"default":a},d,b,f=0;(0,a.default)("id",e);c.default=e;return c=c["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-internal-add-id', location = 'node_modules/@atlassian/aui/src/js/aui/internal/add-id.js' */
("undefined"===typeof window?global:window).__6ccb0f8a73a13028d85029aeb628b44d=function(){function c(a){return a&&a.__esModule?a:{"default":a}}function d(a,b){var c=(0,e.default)(a),d=b||!1;c.each(function(){var a=(0,e.default)(this);a.attr("id")||a.attr("id",(0,f.default)(d))})}var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});var e=c(__307d3e18fd611f85395c67cddeb1fe24),g=c(__4d02fe17b8e885a34493e34af3d145dd),f=c(__9fa5e8acd81f0f9028180b8fcdcd9cb4);(0,g.default)("_addID",d);
b.default=d;return b=b["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-forms', location = 'node_modules/@atlassian/aui/src/js/aui/forms.js' */
("undefined"===typeof window?global:window).__05b42b82bab2942063ea875333a900bb=function(){function c(a,b){var c=(0,d.default)(a);"undefined"===typeof b&&(b=!0);return c.each(function(){this.disabled=!b})}function e(){(0,d.default)(".icon-inline-help").click(function(){var a=(0,d.default)(this).siblings(".field-help");a.hasClass("hidden")?a.removeClass("hidden"):a.addClass("hidden")})}var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});b.inlineHelp=b.enable=void 0;var a=__307d3e18fd611f85395c67cddeb1fe24,
d=a&&a.__esModule?a:{"default":a},a=(a=__4d02fe17b8e885a34493e34af3d145dd)&&a.__esModule?a:{"default":a};(0,a.default)("enable",c);(0,a.default)("inlineHelp",e);b.enable=c;b.inlineHelp=e;return b}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-setup', location = 'node_modules/@atlassian/aui/src/js/aui/setup.js' */
("undefined"===typeof window?global:window).__9e53ace664f2009a19d8a8d4adf77670=function(){function b(a){return a&&a.__esModule?a:{"default":a}}"use strict";var c=b(__307d3e18fd611f85395c67cddeb1fe24),d=b(__4d02fe17b8e885a34493e34af3d145dd),e=b(__0210cf71af3a1c7fcbb0f421af87d03c),f=b(__399d6bb24e6280e2241deb4e98d541ff);(0,c.default)(function(){var a=(0,c.default)("body");a.data("auiVersion")||a.attr("data-aui-version",f.default);(0,e.default)()});c.default.ajaxSettings.traditional=!0;(0,d.default)("$",
c.default);return{}}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-format', location = 'node_modules/@atlassian/aui/src/js/aui/format.js' */
("undefined"===typeof window?global:window).__57111a90131a66c211cf7209c7270167=function(){function l(g){var i=/'(?!')/g,o=/^\d+$/,p=/^(\d+),number$/,q=/^(\d+)\,choice\,(.+)/,r=/^(\d+)([#<])(.+)/,m=function(c){for(var h=!1,e=-1,a=0,b=0;b<c.length;b++){var d=c.charAt(b);"'"==d&&(h=!h);if(!h)if("{"===d)0===a&&(e=b),a++;else if("}"===d&&0<a&&(a--,0===a))return h=[],h.push(c.substring(0,b+1)),h.push(c.substring(0,e)),h.push(c.substring(e+1,b)),h}return null};return function(c){var h=arguments,e="";if(!c)return e;
for(var a=m(c);a;){var c=c.substring(a[0].length),e=e+a[1].replace(i,""),b=a[2],a=h,d="",f=void 0;if(b.match(o))d=a.length>++b?a[b]:"";else if(f=b.match(p))d=a.length>++f[1]?a[f[1]]:"";else if(f=b.match(q))if(b=a.length>++f[1]?a[f[1]]:null,null!==b){for(var f=f[2].split("|"),g=null,k=0;k<f.length;k++){var j=f[k].match(r),n=parseInt(j[1],10);if(b<n){d=g?g:j[3];break}if(b==n&&"#"==j[2]){d=j[3];break}k==f.length-1&&(d=j[3]);g=j[3]}a=[d].concat(Array.prototype.slice.call(a,1));d=l.apply(null,a)}e+=d;
a=m(c)}return e+=c.replace(i,"")}.apply(null,arguments)}var i={};"use strict";Object.defineProperty(i,"__esModule",{value:!0});var g=__4d02fe17b8e885a34493e34af3d145dd,g=g&&g.__esModule?g:{"default":g};(0,g.default)("format",l);i.default=l;return i=i["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-internal-animation', location = 'node_modules/@atlassian/aui/src/js/aui/internal/animation.js' */
("undefined"===typeof window?global:window).__c0311e8841bd8637e025a8fb1474f693=function(){var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});b.recomputeStyle=function(a){a=a.length?a[0]:a;window.getComputedStyle(a,null).getPropertyValue("left")};return b}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-blanket', location = 'node_modules/@atlassian/aui/src/js/aui/blanket.js' */
("undefined"===typeof window?global:window).__594942bfcf520d6e5a0843b1cfdd039a=function(){function a(b,d){Array.prototype.forEach.call(document.body.children,function(a){!a.getAttribute("aria-hidden")&&!a.className.match(/\baui-layer\b/)&&(a.setAttribute("aria-hidden","true"),f.push(a))});c||(c=document.body);!0===b&&g();var e=!!a.$dim&&"false"===a.$dim.attr("aria-hidden");a.$dim&&(a.$dim.remove(),a.$dim=null);a.$dim=(0,h.default)("div").addClass("aui-blanket");a.$dim.attr("tabindex","0");a.$dim.appendTo(document.body);
e||((0,i.recomputeStyle)(a.$dim),AJS.dim.cachedOverflow={overflow:c.style.overflow,overflowX:c.style.overflowX,overflowY:c.style.overflowY},c.style.overflowX="hidden",c.style.overflowY="hidden",c.style.overflow="hidden");a.$dim.attr("aria-hidden","false");d&&a.$dim.css({zIndex:d});return a.$dim}function e(){f.forEach(function(a){a.removeAttribute("aria-hidden")});f=[];a.$dim&&(a.$dim.attr("aria-hidden","true"),c&&(c.style.overflow=AJS.dim.cachedOverflow.overflow,c.style.overflowX=AJS.dim.cachedOverflow.overflowX,
c.style.overflowY=AJS.dim.cachedOverflow.overflowY))}var d={};"use strict";Object.defineProperty(d,"__esModule",{value:!0});d.undim=d.dim=void 0;var j=__c8cfa00f1eba9ac7af89ee3d0d33961d,i=__c0311e8841bd8637e025a8fb1474f693,b=__fd277fcde858b82a198666a405e85600,h=b&&b.__esModule?b:{"default":b},b=(b=__4d02fe17b8e885a34493e34af3d145dd)&&b.__esModule?b:{"default":b},c,f=[],g=(0,j.getMessageLogger)("useShim",{extraInfo:"useShim has no alternative as it is now calculated by dim()."});(0,b.default)("dim",
a);(0,b.default)("undim",e);d.dim=a;d.undim=e;return d}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-vendor-jquery-plugins-jquery-aop', location = 'node_modules/@atlassian/aui/src/js-vendor/jquery/plugins/jquery.aop.js' */
("undefined"===typeof window?global:window).__f69e6f12e8b5283975dbec4f415ad825=function(){(function(){for(var g=!0,h,i=Object.prototype.toString,j={},q={1:"element",3:"textnode",9:"document",11:"fragment"},k="Arguments Array Boolean Date Document Element Error Fragment Function NodeList Null Number Object RegExp String TextNode Undefined Window".split(" "),l=k.length;l--;){var m=k[l],n=window[m];if(n)try{j[i.call(new n)]=m.toLowerCase()}catch(r){}}h=function(a){return null==a&&(void 0===a?"undefined":
"null")||a.nodeType&&q[a.nodeType]||"number"==typeof a.length&&(a.callee&&"arguments"||a.alert&&"window"||a.item&&"nodelist")||j[i.call(a)]};var o=function(a,b,d){var e=a[b];6!=d.type&&"function"!=h(e)&&(e=function(){for(var a=0<arguments.length?"arguments[0]":"",b=1;b<arguments.length;b++)a+=",arguments["+b+"]";return eval("oldObject("+a+");")});var c;1==d.type||2==d.type||3==d.type?c=function(){var a,c=null;try{a=e.apply(this,arguments)}catch(f){c=f}if(1==d.type)if(null==c)a=d.value.apply(this,
[a,b]);else throw c;else 2==d.type&&null!=c?a=d.value.apply(this,[c,b]):3==d.type&&(a=d.value.apply(this,[a,c,b]));return a}:4==d.type?c=function(){d.value.apply(this,[arguments,b]);return e.apply(this,arguments)}:6==d.type?c=function(){return d.value.apply(this,arguments)}:5==d.type&&(c=function(){var a=this,c=Array.prototype.slice.call(arguments);return d.value.apply(a,[{arguments:c,method:b,proceed:function(){return e.apply(a,c)}}])});c.unweave=function(){a[b]=e;pointcut=a=c=e=null};return a[b]=
c},p=function(a,b,d){var e=[],c;for(c in a){var f=null;try{f=a[c]}catch(g){}null!=f&&(c.match(b.method)&&"function"==h(f))&&(e[e.length]={source:a,method:c,advice:d})}return e},f=function(a,b){var d="undefined"!=typeof a.target.prototype?a.target.prototype:a.target,e=[];if(6!=b.type&&"undefined"==typeof d[a.method]){var c=p(a.target,a,b);0==c.length&&(c=p(d,a,b));for(var f in c)e[e.length]=o(c[f].source,c[f].method,c[f].advice)}else e[0]=o(d,a.method,b);return g?e:e[0]};jQuery.aop={after:function(a,
b){return f(a,{type:1,value:b})},afterThrow:function(a,b){return f(a,{type:2,value:b})},afterFinally:function(a,b){return f(a,{type:3,value:b})},before:function(a,b){return f(a,{type:4,value:b})},around:function(a,b){return f(a,{type:5,value:b})},introduction:function(a,b){return f(a,{type:6,value:b})},setup:function(a){g=a.regexMatch}}})();return{}}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-drop-down', location = 'node_modules/@atlassian/aui/src/js/aui/drop-down.js' */
("undefined"===typeof window?global:window).__7d40391c96767a3290496e157f1428e1=function(){function r(b){if(b&&b.__esModule)return b;var d={};if(null!=b)for(var a in b)Object.prototype.hasOwnProperty.call(b,a)&&(d[a]=b[a]);d.default=b;return d}function p(b){return b&&b.__esModule?b:{"default":b}}function d(c,h){var a=null,s=[],m=!1,q=(0,b.default)(document),g={item:"li:has(a)",activeClass:"active",alignment:"right",displayHandler:function(b){return b.name},escapeHandler:function(){this.hide("escape");
return!1},hideHandler:function(){},moveHandler:function(){},useDisabled:!1};b.default.extend(g,h);g.alignment={left:"left",right:"right"}[g.alignment.toLowerCase()]||"left";if(c&&c.jquery)a=c;else if("string"===typeof c)a=(0,b.default)(c);else if(c&&c.constructor===Array){for(var a=(0,n.default)("div").addClass("aui-dropdown").toggleClass("hidden",!!g.isHiddenByDefault),t=0,x=c.length;t<x;t++){for(var i=(0,n.default)("ol"),e=0,l=c[t].length;e<l;e++){var j=(0,n.default)("li"),k=c[t][e];k.href?(j.append((0,
n.default)("a").html("<span>"+g.displayHandler(k)+"</span>").attr({href:k.href}).addClass(k.className)),b.default.data((0,b.default)("a > span",j)[0],"properties",k)):j.html(k.html).addClass(k.className);k.icon&&j.prepend((0,n.default)("img").attr("src",k.icon));k.insideSpanIcon&&j.children("a").prepend((0,n.default)("span").attr("class","icon"));k.iconFontClass&&j.children("a").prepend((0,n.default)("span").addClass("aui-icon aui-icon-small aui-iconfont-"+k.iconFontClass));b.default.data(j[0],"properties",
k);i.append(j)}t===x-1&&i.addClass("last");a.append(i)}(0,b.default)("body").append(a)}else throw Error("dropDown function was called with illegal parameter. Should be $ object, $ selector or array.");var o=function(){r(1)},p=function(){r(-1)},r=function(a){var c=!m,f=d.current.$[0],e=d.current.links,h=f.focused;m=!0;if(0!==e.length){f.focused="number"===typeof h?h:-1;if(!d.current)return y.log("move - not current, aborting"),!0;f.focused+=a;0>f.focused?f.focused=e.length-1:f.focused>=e.length&&(f.focused=
0);g.moveHandler((0,b.default)(e[f.focused]),0>a?"up":"down");c&&e.length?((0,b.default)(e[f.focused]).addClass(g.activeClass),m=!1):e.length||(m=!1)}},u=function(a){if(!d.current)return!0;var e=a.which,f=d.current.$[0],c=d.current.links;d.current.cleanActive();switch(e){case 40:o();break;case 38:p();break;case 27:return g.escapeHandler.call(d.current,a);case 13:return 0<=f.focused?g.selectionHandler?g.selectionHandler.call(d.current,a,(0,b.default)(c[f.focused])):"a"!=(0,b.default)(c[f.focused]).attr("nodeName")?
(0,b.default)("a",c[f.focused]).trigger("focus"):(0,b.default)(c[f.focused]).trigger("focus"):!0;default:return c.length&&(0,b.default)(c[f.focused]).addClass(g.activeClass),!0}a.stopPropagation();a.preventDefault();return!1},v=function(b){b&&b.which&&3==b.which||b&&b.button&&2==b.button||d.current&&d.current.hide("click")},w=function(a){return function(){d.current&&(d.current.cleanFocus(),this.originalClass=this.className,(0,b.default)(this).addClass(g.activeClass),d.current.$[0].focused=a)}},z=
function(a){if(a.button||a.metaKey||a.ctrlKey||a.shiftKey)return!0;d.current&&g.selectionHandler&&g.selectionHandler.call(d.current,a,(0,b.default)(this))};a.each(function(){var a=this,c=(0,b.default)(this),f={},e={reset:function(){f=b.default.extend(f,{$:c,links:(0,b.default)(g.item||"li:has(a)",a),cleanActive:function(){a.focused+1&&f.links.length&&(0,b.default)(f.links[a.focused]).removeClass(g.activeClass)},cleanFocus:function(){f.cleanActive();a.focused=-1},moveDown:o,moveUp:p,moveFocus:u,getFocusIndex:function(){return"number"==
typeof a.focused?a.focused:-1}});f.links.each(function(a){var c=(0,b.default)(this),d=!1;c.data("events")&&b.default.each(c.data("events"),function(a,c){b.default.each(c,function(a,b){if(z===b)return d=!0,!1})});d||(c.hover(w(a),f.cleanFocus),c.click(z))})},appear:function(a){a?(c.removeClass("hidden"),c.addClass("aui-dropdown-"+g.alignment)):c.addClass("hidden")},fade:function(a){a?c.fadeIn("fast"):c.fadeOut("fast")},scroll:function(a){a?c.slideDown("fast"):c.slideUp("fast")}};f.reset=e.reset;f.reset();
f.addControlProcess=function(a,c){b.default.aop.around({target:this,method:a},c)};f.addCallback=function(a,c){return b.default.aop.after({target:this,method:a},c)};f.show=function(c){if(!g.useDisabled||!this.$.closest(".aui-dd-parent").hasClass("disabled"))this.alignment=g.alignment,v(),d.current=this,this.method=c||this.method||"appear",this.timer=setTimeout(function(){q.click(v)},0),q.keydown(u),g.firstSelected&&this.links[0]&&w(0).call(this.links[0]),(0,b.default)(a.offsetParent).css({zIndex:2E3}),
e[this.method](!0),(0,b.default)(document).trigger("showLayer",["dropdown",d.current])};f.hide=function(a){this.method=this.method||"appear";(0,b.default)(c.get(0).offsetParent).css({zIndex:""});this.cleanFocus();e[this.method](!1);q.unbind("click",v).unbind("keydown",u);(0,b.default)(document).trigger("hideLayer",["dropdown",d.current]);d.current=null;return a};f.addCallback("reset",function(){g.firstSelected&&this.links[0]&&w(0).call(this.links[0])});d.iframes||(d.iframes=[]);d.createShims=function A(){(0,
b.default)("iframe").each(function(){if(!this.shim){this.shim=(0,b.default)("<div />").addClass("shim hidden").appendTo("body");d.iframes.push(this)}});return A}();f.addCallback("show",function(){(0,b.default)(d.iframes).each(function(){var a=(0,b.default)(this);if(a.is(":visible")){var c=a.offset();c.height=a.height();c.width=a.width();this.shim.css({left:c.left+"px",top:c.top+"px",height:c.height+"px",width:c.width+"px"}).removeClass("hidden")}})});f.addCallback("hide",function(){(0,b.default)(d.iframes).each(function(){this.shim.addClass("hidden")});
g.hideHandler()});s.push(f)});return s}var o={};"use strict";Object.defineProperty(o,"__esModule",{value:!0});var b=p(__307d3e18fd611f85395c67cddeb1fe24);__f69e6f12e8b5283975dbec4f415ad825;var B=r(__c8cfa00f1eba9ac7af89ee3d0d33961d),y=r(__cf890abdf040e0993fb71f2f839bc972),n=p(__fd277fcde858b82a198666a405e85600),C=p(__4d02fe17b8e885a34493e34af3d145dd);d.getAdditionalPropertyValue=function(c,d){var a=c[0];(!a||"string"!==typeof a.tagName||"li"!==a.tagName.toLowerCase())&&y.log("dropDown.getAdditionalPropertyValue : item passed in should be an LI element wrapped by jQuery");
return(a=b.default.data(a,"properties"))?a[d]:null};d.removeAllAdditionalProperties=function(){};d.Standard=function(c){var h=[],a={selector:".aui-dd-parent",dropDown:".aui-dropdown",trigger:".aui-dd-trigger"};b.default.extend(a,c);var s=function(c,d,g,e){b.default.extend(e,{trigger:c});d.addClass("dd-allocated");g.addClass("hidden");!1==a.isHiddenByDefault&&e.show();e.addCallback("show",function(){d.addClass("active")});e.addCallback("hide",function(){d.removeClass("active")})},m=function(a,b,c,
e){e!=d.current&&(c.css({top:b.outerHeight()}),e.show(),a.stopImmediatePropagation());a.preventDefault()};if(a.useLiveEvents){var q=[],g=[];(0,b.default)(a.trigger).live("click",function(c){var h=(0,b.default)(this),i,e,l;if(0<=(i=b.default.inArray(this,q))){var j=g[i];e=j.dropdown;l=j.ddcontrol}else{i=h.closest(a.selector);e=i.find(a.dropDown);if(0===e.length)return;l=d(e,a)[0];if(!l)return;q.push(this);j={parent:i,dropdown:e,ddcontrol:l};s(h,i,e,l);g.push(j)}m(c,h,e,l)})}else c=this instanceof b.default?
this:(0,b.default)(a.selector),c=c.not(".dd-allocated").filter(":has("+a.dropDown+")").filter(":has("+a.trigger+")"),c.each(function(){var c=(0,b.default)(this),g=(0,b.default)(a.dropDown,this),i=(0,b.default)(a.trigger,this),e=d(g,a)[0];b.default.extend(e,{trigger:i});s(i,c,g,e);i.click(function(a){m(a,i,g,e)});h.push(e)});return h};d.Ajax=function(c){var h={cache:!0};b.default.extend(h,c||{});c=d.Standard.call(this,h);(0,b.default)(c).each(function(){var a=this;b.default.extend(a,{getAjaxOptions:function(c){var d=
function(b){h.formatResults&&(b=h.formatResults(b));h.cache&&a.cache.set(a.getAjaxOptions(),b);a.refreshSuccess(b)};return h.ajaxOptions?b.default.isFunction(h.ajaxOptions)?b.default.extend(h.ajaxOptions.call(a),{success:d}):b.default.extend(h.ajaxOptions,{success:d}):b.default.extend(c,{success:d})},refreshSuccess:function(a){this.$.html(a)},cache:function(){var a={};return{get:function(b){return a[(b.url+(b.data||"")).replace(/[\?\&]/gi,"")]},set:function(b,c){a[(b.url+(b.data||"")).replace(/[\?\&]/gi,
"")]=c},reset:function(){a={}}}}(),show:function(c){return function(){h.cache&&a.cache.get(a.getAjaxOptions())?(a.refreshSuccess(a.cache.get(a.getAjaxOptions())),c.call(a)):((0,b.default)(b.default.ajax(a.getAjaxOptions())).throbber({target:a.$,end:function(){a.reset()}}),c.call(a),a.iframeShim&&a.iframeShim.hide())}}(a.show),resetCache:function(){a.cache.reset()}});a.addCallback("refreshSuccess",function(){a.reset()})});return c};b.default.fn.dropDown=function(b,h){b=(b||"Standard").replace(/^([a-z])/,
function(a){return a.toUpperCase()});return d[b].call(this,h)};b.default.fn.dropDown=B.construct(b.default.fn.dropDown,"Dropdown constructor",{alternativeName:"Dropdown2"});(0,C.default)("dropDown",d);o.default=d;return o=o["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:dropdown', location = 'node_modules/@atlassian/aui/src/js-vendor/jquery/plugins/jquery.aop.js' */
("undefined"===typeof window?global:window).__f69e6f12e8b5283975dbec4f415ad825=function(){(function(){for(var g=!0,h,i=Object.prototype.toString,j={},q={1:"element",3:"textnode",9:"document",11:"fragment"},k="Arguments Array Boolean Date Document Element Error Fragment Function NodeList Null Number Object RegExp String TextNode Undefined Window".split(" "),l=k.length;l--;){var m=k[l],n=window[m];if(n)try{j[i.call(new n)]=m.toLowerCase()}catch(r){}}h=function(a){return null==a&&(void 0===a?"undefined":
"null")||a.nodeType&&q[a.nodeType]||"number"==typeof a.length&&(a.callee&&"arguments"||a.alert&&"window"||a.item&&"nodelist")||j[i.call(a)]};var o=function(a,b,d){var e=a[b];6!=d.type&&"function"!=h(e)&&(e=function(){for(var a=0<arguments.length?"arguments[0]":"",b=1;b<arguments.length;b++)a+=",arguments["+b+"]";return eval("oldObject("+a+");")});var c;1==d.type||2==d.type||3==d.type?c=function(){var a,c=null;try{a=e.apply(this,arguments)}catch(f){c=f}if(1==d.type)if(null==c)a=d.value.apply(this,
[a,b]);else throw c;else 2==d.type&&null!=c?a=d.value.apply(this,[c,b]):3==d.type&&(a=d.value.apply(this,[a,c,b]));return a}:4==d.type?c=function(){d.value.apply(this,[arguments,b]);return e.apply(this,arguments)}:6==d.type?c=function(){return d.value.apply(this,arguments)}:5==d.type&&(c=function(){var a=this,c=Array.prototype.slice.call(arguments);return d.value.apply(a,[{arguments:c,method:b,proceed:function(){return e.apply(a,c)}}])});c.unweave=function(){a[b]=e;pointcut=a=c=e=null};return a[b]=
c},p=function(a,b,d){var e=[],c;for(c in a){var f=null;try{f=a[c]}catch(g){}null!=f&&(c.match(b.method)&&"function"==h(f))&&(e[e.length]={source:a,method:c,advice:d})}return e},f=function(a,b){var d="undefined"!=typeof a.target.prototype?a.target.prototype:a.target,e=[];if(6!=b.type&&"undefined"==typeof d[a.method]){var c=p(a.target,a,b);0==c.length&&(c=p(d,a,b));for(var f in c)e[e.length]=o(c[f].source,c[f].method,c[f].advice)}else e[0]=o(d,a.method,b);return g?e:e[0]};jQuery.aop={after:function(a,
b){return f(a,{type:1,value:b})},afterThrow:function(a,b){return f(a,{type:2,value:b})},afterFinally:function(a,b){return f(a,{type:3,value:b})},before:function(a,b){return f(a,{type:4,value:b})},around:function(a,b){return f(a,{type:5,value:b})},introduction:function(a,b){return f(a,{type:6,value:b})},setup:function(a){g=a.regexMatch}}})();return{}}.call(this);;
;
/* module-key = 'com.atlassian.soy.soy-template-plugin:soy-deps', location = 'soy-template-module/js/soyutils.js' */
/*!
 * Copyright 2008 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var goog=goog||{};goog.global=this;COMPILED=true;goog.global.CLOSURE_UNCOMPILED_DEFINES;goog.global.CLOSURE_DEFINES;goog.isDef=function(a){return a!==void 0};goog.exportPath_=function(c,a,f){var d=c.split(".");var e=f||goog.global;if(!(d[0] in e)&&e.execScript){e.execScript("var "+d[0])}for(var b;d.length&&(b=d.shift());){if(!d.length&&goog.isDef(a)){e[b]=a}else{if(e[b]){e=e[b]}else{e=e[b]={}}}}};goog.define=function(b,a){var c=a;if(!COMPILED){if(goog.global.CLOSURE_UNCOMPILED_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_UNCOMPILED_DEFINES,b)){c=goog.global.CLOSURE_UNCOMPILED_DEFINES[b]}else{if(goog.global.CLOSURE_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_DEFINES,b)){c=goog.global.CLOSURE_DEFINES[b]}}}goog.exportPath_(b,c)};goog.DEBUG=true;goog.define("goog.LOCALE","en");goog.define("goog.TRUSTED_SITE",true);goog.define("goog.STRICT_MODE_COMPATIBLE",false);goog.define("goog.DISALLOW_TEST_ONLY_CODE",COMPILED&&!goog.DEBUG);goog.provide=function(a){if(!COMPILED){if(goog.isProvided_(a)){throw Error('Namespace "'+a+'" already declared.')}}goog.constructNamespace_(a)};goog.constructNamespace_=function(a,c){if(!COMPILED){delete goog.implicitNamespaces_[a];var b=a;while((b=b.substring(0,b.lastIndexOf(".")))){if(goog.getObjectByName(b)){break}goog.implicitNamespaces_[b]=true}}goog.exportPath_(a,c)};goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/;goog.module=function(a){if(!goog.isString(a)||!a||a.search(goog.VALID_MODULE_RE_)==-1){throw Error("Invalid module identifier")}if(!goog.isInModuleLoader_()){throw Error("Module "+a+" has been loaded incorrectly.")}if(goog.moduleLoaderState_.moduleName){throw Error("goog.module may only be called once per module.")}goog.moduleLoaderState_.moduleName=a;if(!COMPILED){if(goog.isProvided_(a)){throw Error('Namespace "'+a+'" already declared.')}delete goog.implicitNamespaces_[a]}};goog.module.get=function(a){return goog.module.getInternal_(a)};goog.module.getInternal_=function(a){if(!COMPILED){if(goog.isProvided_(a)){return a in goog.loadedModules_?goog.loadedModules_[a]:goog.getObjectByName(a)}else{return null}}};goog.moduleLoaderState_=null;goog.isInModuleLoader_=function(){return goog.moduleLoaderState_!=null};goog.module.declareTestMethods=function(){if(!goog.isInModuleLoader_()){throw new Error("goog.module.declareTestMethods must be called from within a goog.module")}goog.moduleLoaderState_.declareTestMethods=true};goog.module.declareLegacyNamespace=function(){if(!COMPILED&&!goog.isInModuleLoader_()){throw new Error("goog.module.declareLegacyNamespace must be called from within a goog.module")}if(!COMPILED&&!goog.moduleLoaderState_.moduleName){throw Error("goog.module must be called prior to goog.module.declareLegacyNamespace.")}goog.moduleLoaderState_.declareLegacyNamespace=true};goog.setTestOnly=function(a){if(goog.DISALLOW_TEST_ONLY_CODE){a=a||"";throw Error("Importing test-only code into non-debug environment"+(a?": "+a:"."))}};goog.forwardDeclare=function(a){};if(!COMPILED){goog.isProvided_=function(a){return(a in goog.loadedModules_)||(!goog.implicitNamespaces_[a]&&goog.isDefAndNotNull(goog.getObjectByName(a)))};goog.implicitNamespaces_={"goog.module":true}}goog.getObjectByName=function(b,c){var d=b.split(".");var e=c||goog.global;for(var a;a=d.shift();){if(goog.isDefAndNotNull(e[a])){e=e[a]}else{return null}}return e};goog.globalize=function(d,b){var c=b||goog.global;for(var a in d){c[a]=d[a]}};goog.addDependency=function(f,e,l,d){if(goog.DEPENDENCIES_ENABLED){var g,a;var k=f.replace(/\\/g,"/");var h=goog.dependencies_;for(var c=0;g=e[c];c++){h.nameToPath[g]=k;h.pathIsModule[k]=!!d}for(var b=0;a=l[b];b++){if(!(k in h.requires)){h.requires[k]={}}h.requires[k][a]=true}}};goog.define("goog.ENABLE_DEBUG_LOADER",true);goog.logToConsole_=function(a){if(goog.global.console){goog.global.console.error(a)}};goog.require=function(b){if(!COMPILED){if(goog.ENABLE_DEBUG_LOADER&&goog.IS_OLD_IE_){goog.maybeProcessDeferredDep_(b)}if(goog.isProvided_(b)){if(goog.isInModuleLoader_()){return goog.module.getInternal_(b)}else{return null}}if(goog.ENABLE_DEBUG_LOADER){var c=goog.getPathFromDeps_(b);if(c){goog.included_[c]=true;goog.writeScripts_();return null}}var a="goog.require could not find: "+b;goog.logToConsole_(a);throw Error(a)}};goog.basePath="";goog.global.CLOSURE_BASE_PATH;goog.global.CLOSURE_NO_DEPS;goog.global.CLOSURE_IMPORT_SCRIPT;goog.nullFunction=function(){};goog.identityFunction=function(b,a){return b};goog.abstractMethod=function(){throw Error("unimplemented abstract method")};goog.addSingletonGetter=function(a){a.getInstance=function(){if(a.instance_){return a.instance_}if(goog.DEBUG){goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=a}return a.instance_=new a}};goog.instantiatedSingletons_=[];goog.define("goog.LOAD_MODULE_USING_EVAL",true);goog.define("goog.SEAL_MODULE_EXPORTS",goog.DEBUG);goog.loadedModules_={};goog.DEPENDENCIES_ENABLED=!COMPILED&&goog.ENABLE_DEBUG_LOADER;if(goog.DEPENDENCIES_ENABLED){goog.included_={};goog.dependencies_={pathIsModule:{},nameToPath:{},requires:{},visited:{},written:{},deferred:{}};goog.inHtmlDocument_=function(){var a=goog.global.document;return typeof a!="undefined"&&"write" in a};goog.findBasePath_=function(){if(goog.global.CLOSURE_BASE_PATH){goog.basePath=goog.global.CLOSURE_BASE_PATH;return}else{if(!goog.inHtmlDocument_()){return}}var f=goog.global.document;var a=f.getElementsByTagName("script");for(var d=a.length-1;d>=0;--d){var c=(a[d]);var g=c.src;var e=g.lastIndexOf("?");var b=e==-1?g.length:e;if(g.substr(b-7,7)=="base.js"){goog.basePath=g.substr(0,b-7);return}}};goog.importScript_=function(c,a){var b=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_;if(b(c,a)){goog.dependencies_.written[c]=true}};goog.IS_OLD_IE_=goog.global.document&&goog.global.document.all&&!goog.global.atob;goog.importModule_=function(b){var a='goog.retrieveAndExecModule_("'+b+'");';if(goog.importScript_("",a)){goog.dependencies_.written[b]=true}};goog.queuedModules_=[];goog.wrapModule_=function(b,a){if(!goog.LOAD_MODULE_USING_EVAL||!goog.isDef(goog.global.JSON)){return'goog.loadModule(function(exports) {"use strict";'+a+"\n;return exports});\n//# sourceURL="+b+"\n"}else{return"goog.loadModule("+goog.global.JSON.stringify(a+"\n//# sourceURL="+b+"\n")+");"}};goog.loadQueuedModules_=function(){var c=goog.queuedModules_.length;if(c>0){var a=goog.queuedModules_;goog.queuedModules_=[];for(var b=0;b<c;b++){var d=a[b];goog.maybeProcessDeferredPath_(d)}}};goog.maybeProcessDeferredDep_=function(a){if(goog.isDeferredModule_(a)&&goog.allDepsAreAvailable_(a)){var b=goog.getPathFromDeps_(a);goog.maybeProcessDeferredPath_(goog.basePath+b)}};goog.isDeferredModule_=function(a){var c=goog.getPathFromDeps_(a);if(c&&goog.dependencies_.pathIsModule[c]){var b=goog.basePath+c;return(b) in goog.dependencies_.deferred}return false};goog.allDepsAreAvailable_=function(a){var b=goog.getPathFromDeps_(a);if(b&&(b in goog.dependencies_.requires)){for(var c in goog.dependencies_.requires[b]){if(!goog.isProvided_(c)&&!goog.isDeferredModule_(c)){return false}}}return true};goog.maybeProcessDeferredPath_=function(a){if(a in goog.dependencies_.deferred){var b=goog.dependencies_.deferred[a];delete goog.dependencies_.deferred[a];goog.globalEval(b)}};goog.loadModule=function(d){var a=goog.moduleLoaderState_;try{goog.moduleLoaderState_={moduleName:undefined,declareTestMethods:false};var b;if(goog.isFunction(d)){b=d.call(goog.global,{})}else{if(goog.isString(d)){b=goog.loadModuleFromSource_.call(goog.global,d)}else{throw Error("Invalid module definition")}}var c=goog.moduleLoaderState_.moduleName;if(!goog.isString(c)||!c){throw Error('Invalid module name "'+c+'"')}if(goog.moduleLoaderState_.declareLegacyNamespace){goog.constructNamespace_(c,b)}else{if(goog.SEAL_MODULE_EXPORTS&&Object.seal){Object.seal(b)}}goog.loadedModules_[c]=b;if(goog.moduleLoaderState_.declareTestMethods){for(var e in b){if(e.indexOf("test",0)===0||e=="tearDown"||e=="setUp"||e=="setUpPage"||e=="tearDownPage"){goog.global[e]=b[e]}}}}finally{goog.moduleLoaderState_=a}};goog.loadModuleFromSource_=function(source){var exports={};eval(arguments[0]);return exports};goog.writeScriptTag_=function(e,b){if(goog.inHtmlDocument_()){var c=goog.global.document;if(c.readyState=="complete"){var f=/\bdeps.js$/.test(e);if(f){return false}else{throw Error('Cannot write "'+e+'" after document load')}}var d=goog.IS_OLD_IE_;if(b===undefined){if(!d){c.write('<script type="text/javascript" src="'+e+'"><\/script>')}else{var a=" onreadystatechange='goog.onScriptLoad_(this, "+ ++goog.lastNonModuleScriptIndex_+")' ";c.write('<script type="text/javascript" src="'+e+'"'+a+"><\/script>")}}else{c.write('<script type="text/javascript">'+b+"<\/script>")}return true}else{return false}};goog.lastNonModuleScriptIndex_=0;goog.onScriptLoad_=function(a,b){if(a.readyState=="complete"&&goog.lastNonModuleScriptIndex_==b){goog.loadQueuedModules_()}return true};goog.writeScripts_=function(){var a=[];var b={};var g=goog.dependencies_;function e(i){if(i in g.written){return}if(i in g.visited){if(!(i in b)){b[i]=true;a.push(i)}return}g.visited[i]=true;if(i in g.requires){for(var j in g.requires[i]){if(!goog.isProvided_(j)){if(j in g.nameToPath){e(g.nameToPath[j])}else{throw Error("Undefined nameToPath for "+j)}}}}if(!(i in b)){b[i]=true;a.push(i)}}for(var d in goog.included_){if(!g.written[d]){e(d)}}for(var c=0;c<a.length;c++){var d=a[c];goog.dependencies_.written[d]=true}var h=goog.moduleLoaderState_;goog.moduleLoaderState_=null;var f=false;for(var c=0;c<a.length;c++){var d=a[c];if(d){if(!g.pathIsModule[d]){goog.importScript_(goog.basePath+d)}else{f=true;goog.importModule_(goog.basePath+d)}}else{goog.moduleLoaderState_=h;throw Error("Undefined script input")}}goog.moduleLoaderState_=h};goog.getPathFromDeps_=function(a){if(a in goog.dependencies_.nameToPath){return goog.dependencies_.nameToPath[a]}else{return null}};goog.findBasePath_();if(!goog.global.CLOSURE_NO_DEPS){goog.importScript_(goog.basePath+"deps.js")}}goog.normalizePath_=function(c){var b=c.split("/");var a=0;while(a<b.length){if(b[a]=="."){b.splice(a,1)}else{if(a&&b[a]==".."&&b[a-1]&&b[a-1]!=".."){b.splice(--a,2)}else{a++}}}return b.join("/")};goog.retrieveAndExecModule_=function(g){if(!COMPILED){var d=g;g=goog.normalizePath_(g);var c=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_;var b=null;var f=new goog.global.XMLHttpRequest();f.onload=function(){b=this.responseText};f.open("get",g,false);f.send();b=f.responseText;if(b!=null){var a=goog.wrapModule_(g,b);var e=goog.IS_OLD_IE_;if(e){goog.dependencies_.deferred[d]=a;goog.queuedModules_.push(d)}else{c(g,a)}}else{throw new Error("load of "+g+"failed")}}};goog.typeOf=function(c){var b=typeof c;if(b=="object"){if(c){if(c instanceof Array){return"array"}else{if(c instanceof Object){return b}}var a=Object.prototype.toString.call((c));if(a=="[object Window]"){return"object"}if((a=="[object Array]"||typeof c.length=="number"&&typeof c.splice!="undefined"&&typeof c.propertyIsEnumerable!="undefined"&&!c.propertyIsEnumerable("splice"))){return"array"}if((a=="[object Function]"||typeof c.call!="undefined"&&typeof c.propertyIsEnumerable!="undefined"&&!c.propertyIsEnumerable("call"))){return"function"}}else{return"null"}}else{if(b=="function"&&typeof c.call=="undefined"){return"object"}}return b};goog.isNull=function(a){return a===null};goog.isDefAndNotNull=function(a){return a!=null};goog.isArray=function(a){return goog.typeOf(a)=="array"};goog.isArrayLike=function(b){var a=goog.typeOf(b);return a=="array"||a=="object"&&typeof b.length=="number"};goog.isDateLike=function(a){return goog.isObject(a)&&typeof a.getFullYear=="function"};goog.isString=function(a){return typeof a=="string"};goog.isBoolean=function(a){return typeof a=="boolean"};goog.isNumber=function(a){return typeof a=="number"};goog.isFunction=function(a){return goog.typeOf(a)=="function"};goog.isObject=function(b){var a=typeof b;return a=="object"&&b!=null||a=="function"};goog.getUid=function(a){return a[goog.UID_PROPERTY_]||(a[goog.UID_PROPERTY_]=++goog.uidCounter_)};goog.hasUid=function(a){return !!a[goog.UID_PROPERTY_]};goog.removeUid=function(b){if("removeAttribute" in b){b.removeAttribute(goog.UID_PROPERTY_)}try{delete b[goog.UID_PROPERTY_]}catch(a){}};goog.UID_PROPERTY_="closure_uid_"+((Math.random()*1000000000)>>>0);goog.uidCounter_=0;goog.getHashCode=goog.getUid;goog.removeHashCode=goog.removeUid;goog.cloneObject=function(c){var b=goog.typeOf(c);if(b=="object"||b=="array"){if(c.clone){return c.clone()}var d=b=="array"?[]:{};for(var a in c){d[a]=goog.cloneObject(c[a])}return d}return c};goog.bindNative_=function(a,c,b){return(a.call.apply(a.bind,arguments))};goog.bindJs_=function(a,d,b){if(!a){throw new Error()}if(arguments.length>2){var c=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(e,c);return a.apply(d,e)}}else{return function(){return a.apply(d,arguments)}}};goog.bind=function(a,c,b){if(Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1){goog.bind=goog.bindNative_}else{goog.bind=goog.bindJs_}return goog.bind.apply(null,arguments)};goog.partial=function(b,c){var a=Array.prototype.slice.call(arguments,1);return function(){var d=a.slice();d.push.apply(d,arguments);return b.apply(this,d)}};goog.mixin=function(c,b){for(var a in b){c[a]=b[a]}};goog.now=(goog.TRUSTED_SITE&&Date.now)||(function(){return +new Date()});goog.globalEval=function(script){if(goog.global.execScript){goog.global.execScript(script,"JavaScript")}else{if(goog.global.eval){if(goog.evalWorksForGlobals_==null){goog.global.eval("var _et_ = 1;");if(typeof goog.global._et_!="undefined"){delete goog.global._et_;goog.evalWorksForGlobals_=true}else{goog.evalWorksForGlobals_=false}}if(goog.evalWorksForGlobals_){goog.global.eval(script)}else{var doc=goog.global.document;var scriptElt=doc.createElement("script");scriptElt.type="text/javascript";scriptElt.defer=false;scriptElt.appendChild(doc.createTextNode(script));doc.body.appendChild(scriptElt);doc.body.removeChild(scriptElt)}}else{throw Error("goog.globalEval not available")}}};goog.evalWorksForGlobals_=null;goog.cssNameMapping_;goog.cssNameMappingStyle_;goog.getCssName=function(e,c){var d=function(f){return goog.cssNameMapping_[f]||f};var b=function(j){var h=j.split("-");var f=[];for(var g=0;g<h.length;g++){f.push(d(h[g]))}return f.join("-")};var a;if(goog.cssNameMapping_){a=goog.cssNameMappingStyle_=="BY_WHOLE"?d:b}else{a=function(f){return f}}if(c){return e+"-"+a(c)}else{return a(e)}};goog.setCssNameMapping=function(b,a){goog.cssNameMapping_=b;goog.cssNameMappingStyle_=a};goog.global.CLOSURE_CSS_NAME_MAPPING;if(!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING){goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING}goog.getMsg=function(a,b){if(b){a=a.replace(/\{\$([^}]+)}/g,function(c,d){return d in b?b[d]:c})}return a};goog.getMsgWithFallback=function(d,c){return d};goog.exportSymbol=function(b,a,c){goog.exportPath_(b,a,c)};goog.exportProperty=function(b,a,c){b[a]=c};goog.inherits=function(b,a){function c(){}c.prototype=a.prototype;b.superClass_=a.prototype;b.prototype=new c();b.prototype.constructor=b;b.base=function(g,d,h){var e=new Array(arguments.length-2);for(var f=2;f<arguments.length;f++){e[f-2]=arguments[f]}return a.prototype[d].apply(g,e)}};goog.base=function(g,c,j){var a=arguments.callee.caller;if(goog.STRICT_MODE_COMPATIBLE||(goog.DEBUG&&!a)){throw Error("arguments.caller not defined.  goog.base() cannot be used with strict mode code. See http://www.ecma-international.org/ecma-262/5.1/#sec-C")}if(a.superClass_){var b=new Array(arguments.length-1);for(var e=1;e<arguments.length;e++){b[e-1]=arguments[e]}return a.superClass_.constructor.apply(g,b)}var f=new Array(arguments.length-2);for(var e=2;e<arguments.length;e++){f[e-2]=arguments[e]}var d=false;for(var h=g.constructor;h;h=h.superClass_&&h.superClass_.constructor){if(h.prototype[c]===a){d=true}else{if(d){return h.prototype[c].apply(g,f)}}}if(g[c]===a){return g.constructor.prototype[c].apply(g,f)}else{throw Error("goog.base called from a method of one name to a method of a different name")}};goog.scope=function(a){a.call(goog.global)};if(!COMPILED){goog.global.COMPILED=COMPILED}goog.defineClass=function(c,d){var b=d.constructor;var e=d.statics;if(!b||b==Object.prototype.constructor){b=function(){throw Error("cannot instantiate an interface (no constructor defined).")}}var a=goog.defineClass.createSealingConstructor_(b,c);if(c){goog.inherits(a,c)}delete d.constructor;delete d.statics;goog.defineClass.applyProperties_(a.prototype,d);if(e!=null){if(e instanceof Function){e(a)}else{goog.defineClass.applyProperties_(a,e)}}return a};goog.defineClass.ClassDescriptor;goog.define("goog.defineClass.SEAL_CLASS_INSTANCES",goog.DEBUG);goog.defineClass.createSealingConstructor_=function(c,b){if(goog.defineClass.SEAL_CLASS_INSTANCES&&Object.seal instanceof Function){if(b&&b.prototype&&b.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]){return c}var a=function(){var d=c.apply(this,arguments)||this;d[goog.UID_PROPERTY_]=d[goog.UID_PROPERTY_];if(this.constructor===a){Object.seal(d)}return d};return a}return c};goog.defineClass.OBJECT_PROTOTYPE_FIELDS_=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"];goog.defineClass.applyProperties_=function(d,c){var b;for(b in c){if(Object.prototype.hasOwnProperty.call(c,b)){d[b]=c[b]}}for(var a=0;a<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;a++){b=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[a];if(Object.prototype.hasOwnProperty.call(c,b)){d[b]=c[b]}}};goog.tagUnsealableClass=function(a){if(!COMPILED&&goog.defineClass.SEAL_CLASS_INSTANCES){a.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]=true}};goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_="goog_defineClass_legacy_unsealable";goog.DEBUG=false;goog.inherits=function(b,a){function c(){}c.prototype=a.prototype;b.superClass_=a.prototype;b.prototype=new c();b.prototype.constructor=b;b.base=function(f,d,g){var e=Array.prototype.slice.call(arguments,2);return a.prototype[d].apply(f,e)}};if(!goog.userAgent){goog.userAgent=(function(){var b="";if("undefined"!==typeof navigator&&navigator&&"string"==typeof navigator.userAgent){b=navigator.userAgent}var a=b.indexOf("Opera")==0;return{jscript:{HAS_JSCRIPT:"ScriptEngine" in this},OPERA:a,IE:!a&&b.indexOf("MSIE")!=-1,WEBKIT:!a&&b.indexOf("WebKit")!=-1}})()}if(!goog.asserts){goog.asserts={assert:function(a){if(!a){throw Error("Assertion error")}},fail:function(a){}}}if(!goog.dom){goog.dom={};goog.dom.DomHelper=function(a){this.document_=a||document};goog.dom.DomHelper.prototype.getDocument=function(){return this.document_};goog.dom.DomHelper.prototype.createElement=function(a){return this.document_.createElement(a)};goog.dom.DomHelper.prototype.createDocumentFragment=function(){return this.document_.createDocumentFragment()}}if(!goog.format){goog.format={insertWordBreaks:function(j,a){j=String(j);var f=[];var h=0;var b=false;var k=false;var g=0;var d=0;for(var e=0,c=j.length;e<c;++e){var l=j.charCodeAt(e);if(g>=a&&l!=32){f[h++]=j.substring(d,e);d=e;f[h++]=goog.format.WORD_BREAK;g=0}if(b){if(l==62){b=false}}else{if(k){switch(l){case 59:k=false;++g;break;case 60:k=false;b=true;break;case 32:k=false;g=0;break}}else{switch(l){case 60:b=true;break;case 38:k=true;break;case 32:g=0;break;default:++g;break}}}}f[h++]=j.substring(d);return f.join("")},WORD_BREAK:goog.userAgent.WEBKIT?"<wbr></wbr>":goog.userAgent.OPERA?"&shy;":goog.userAgent.IE?"&#8203;":"<wbr>"}}if(!goog.i18n){goog.i18n={bidi:{}}}goog.i18n.bidi.IS_RTL=false;goog.i18n.bidi.Dir={LTR:1,RTL:-1,NEUTRAL:0,UNKNOWN:0};goog.i18n.bidi.toDir=function(b,a){if(typeof b=="number"){return b>0?goog.i18n.bidi.Dir.LTR:b<0?goog.i18n.bidi.Dir.RTL:a?null:goog.i18n.bidi.Dir.NEUTRAL}else{if(b==null){return null}else{return b?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR}}};goog.i18n.bidi.estimateDirection=function(h,c){var d=0;var a=0;var b=false;var g=soyshim.$$bidiStripHtmlIfNecessary_(h,c).split(soyshim.$$bidiWordSeparatorRe_);for(var f=0;f<g.length;f++){var e=g[f];if(soyshim.$$bidiRtlDirCheckRe_.test(e)){d++;a++}else{if(soyshim.$$bidiIsRequiredLtrRe_.test(e)){b=true}else{if(soyshim.$$bidiLtrCharRe_.test(e)){a++}else{if(soyshim.$$bidiHasNumeralsRe_.test(e)){b=true}}}}}return a==0?(b?goog.i18n.bidi.Dir.LTR:goog.i18n.bidi.Dir.NEUTRAL):(d/a>soyshim.$$bidiRtlDetectionThreshold_?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR)};goog.i18n.BidiFormatter=function(a){this.dir_=goog.i18n.bidi.toDir(a,true)};goog.i18n.BidiFormatter.prototype.getContextDir=function(){return this.dir_};goog.i18n.BidiFormatter.prototype.knownDirAttr=function(a){return !a||a==this.dir_?"":a<0?'dir="rtl"':'dir="ltr"'};goog.i18n.BidiFormatter.prototype.endEdge=function(){return this.dir_<0?"left":"right"};goog.i18n.BidiFormatter.prototype.mark=function(){return((this.dir_>0)?"\u200E":(this.dir_<0)?"\u200F":"")};goog.i18n.BidiFormatter.prototype.markAfterKnownDir=function(b,c,a){if(b==null){b=goog.i18n.bidi.estimateDirection(c,a)}return(this.dir_>0&&(b<0||soyshim.$$bidiIsRtlExitText_(c,a))?"\u200E":this.dir_<0&&(b>0||soyshim.$$bidiIsLtrExitText_(c,a))?"\u200F":"")};goog.i18n.BidiFormatter.prototype.spanWrapWithKnownDir=function(b,d,c){if(b==null){b=goog.i18n.bidi.estimateDirection(d,true)}var a=this.markAfterKnownDir(b,d,true);if(b>0&&this.dir_<=0){d='<span dir="ltr">'+d+"</span>"}else{if(b<0&&this.dir_>=0){d='<span dir="rtl">'+d+"</span>"}}return d+a};goog.i18n.BidiFormatter.prototype.startEdge=function(){return this.dir_<0?"right":"left"};goog.i18n.BidiFormatter.prototype.unicodeWrapWithKnownDir=function(c,d,a){if(c==null){c=goog.i18n.bidi.estimateDirection(d,a)}var b=this.markAfterKnownDir(c,d,a);if(c>0&&this.dir_<=0){d="\u202A"+d+"\u202C"}else{if(c<0&&this.dir_>=0){d="\u202B"+d+"\u202C"}}return d+b};if(!goog.string){goog.string={newLineToBr:function(b,a){b=String(b);if(!goog.string.NEWLINE_TO_BR_RE_.test(b)){return b}return b.replace(/(\r\n|\r|\n)/g,a?"<br />":"<br>")},urlEncode:encodeURIComponent,NEWLINE_TO_BR_RE_:/[\r\n]/}}goog.string.StringBuffer=function(a,b){this.buffer_=goog.userAgent.jscript.HAS_JSCRIPT?[]:"";if(a!=null){this.append.apply(this,arguments)}};goog.string.StringBuffer.prototype.bufferLength_=0;goog.string.StringBuffer.prototype.append=function(c,b,e){if(goog.userAgent.jscript.HAS_JSCRIPT){if(b==null){this.buffer_[this.bufferLength_++]=c}else{var a=(this.buffer_);a.push.apply(a,arguments);this.bufferLength_=this.buffer_.length}}else{this.buffer_+=c;if(b!=null){for(var d=1;d<arguments.length;d++){this.buffer_+=arguments[d]}}}return this};goog.string.StringBuffer.prototype.clear=function(){if(goog.userAgent.jscript.HAS_JSCRIPT){this.buffer_.length=0;this.bufferLength_=0}else{this.buffer_=""}};goog.string.StringBuffer.prototype.toString=function(){if(goog.userAgent.jscript.HAS_JSCRIPT){var a=this.buffer_.join("");this.clear();if(a){this.append(a)}return a}else{return(this.buffer_)}};if(!goog.soy){goog.soy={renderAsElement:function(c,a,b,d){return(soyshim.$$renderWithWrapper_(c,a,d,true,b))},renderAsFragment:function(c,a,b,d){return soyshim.$$renderWithWrapper_(c,a,d,false,b)},renderElement:function(c,d,a,b){c.innerHTML=d(a,null,b)},data:{}}}goog.soy.data.SanitizedContentKind={HTML:goog.DEBUG?{sanitizedContentKindHtml:true}:{},JS:goog.DEBUG?{sanitizedContentJsChars:true}:{},JS_STR_CHARS:goog.DEBUG?{sanitizedContentJsStrChars:true}:{},URI:goog.DEBUG?{sanitizedContentUri:true}:{},ATTRIBUTES:goog.DEBUG?{sanitizedContentHtmlAttribute:true}:{},CSS:goog.DEBUG?{sanitizedContentCss:true}:{},TEXT:goog.DEBUG?{sanitizedContentKindText:true}:{}};goog.soy.data.SanitizedContent=function(){throw Error("Do not instantiate directly")};goog.soy.data.SanitizedContent.prototype.contentKind;goog.soy.data.SanitizedContent.prototype.contentDir=null;goog.soy.data.SanitizedContent.prototype.content;goog.soy.data.SanitizedContent.prototype.toString=function(){return this.content};var soy={esc:{}};var soydata={};soydata.VERY_UNSAFE={};var soyshim={$$DEFAULT_TEMPLATE_DATA_:{}};soyshim.$$renderWithWrapper_=function(h,f,b,c,i){var d=b||document;var a=d.createElement("div");a.innerHTML=h(f||soyshim.$$DEFAULT_TEMPLATE_DATA_,undefined,i);if(a.childNodes.length==1){var g=a.firstChild;if(!c||g.nodeType==1){return(g)}}if(c){return a}var e=d.createDocumentFragment();while(a.firstChild){e.appendChild(a.firstChild)}return e};soyshim.$$bidiStripHtmlIfNecessary_=function(b,a){return a?b.replace(soyshim.$$BIDI_HTML_SKIP_RE_,""):b};soyshim.$$BIDI_HTML_SKIP_RE_=/<[^>]*>|&[^;]+;/g;soyshim.$$bidiLtrChars_="A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02B8\u0300-\u0590\u0800-\u1FFF\u200E\u2C00-\uFB1C\uFE00-\uFE6F\uFEFD-\uFFFF";soyshim.$$bidiRtlChars_="\u0591-\u07FF\u200F\uFB1D-\uFDFF\uFE70-\uFEFC";soyshim.$$bidiRtlDirCheckRe_=new RegExp("^[^"+soyshim.$$bidiLtrChars_+"]*["+soyshim.$$bidiRtlChars_+"]");soyshim.$$bidiLtrCharRe_=new RegExp("["+soyshim.$$bidiLtrChars_+"]");soyshim.$$bidiIsRequiredLtrRe_=/^http:\/\/.*/;soyshim.$$bidiHasNumeralsRe_=/\d/;soyshim.$$bidiWordSeparatorRe_=/\s+/;soyshim.$$bidiRtlDetectionThreshold_=0.4;soyshim.$$bidiLtrExitDirCheckRe_=new RegExp("["+soyshim.$$bidiLtrChars_+"][^"+soyshim.$$bidiRtlChars_+"]*$");soyshim.$$bidiRtlExitDirCheckRe_=new RegExp("["+soyshim.$$bidiRtlChars_+"][^"+soyshim.$$bidiLtrChars_+"]*$");soyshim.$$bidiIsLtrExitText_=function(b,a){b=soyshim.$$bidiStripHtmlIfNecessary_(b,a);return soyshim.$$bidiLtrExitDirCheckRe_.test(b)};soyshim.$$bidiIsRtlExitText_=function(b,a){b=soyshim.$$bidiStripHtmlIfNecessary_(b,a);return soyshim.$$bidiRtlExitDirCheckRe_.test(b)};soy.StringBuilder=goog.string.StringBuffer;soydata.SanitizedContentKind=goog.soy.data.SanitizedContentKind;soydata.isContentKind=function(a,b){return a!=null&&a.contentKind===b};soydata.getContentDir=function(a){if(a!=null){switch(a.contentDir){case goog.i18n.bidi.Dir.LTR:return goog.i18n.bidi.Dir.LTR;case goog.i18n.bidi.Dir.RTL:return goog.i18n.bidi.Dir.RTL;case goog.i18n.bidi.Dir.NEUTRAL:return goog.i18n.bidi.Dir.NEUTRAL}}return null};soydata.SanitizedHtml=function(){goog.soy.data.SanitizedContent.call(this)};goog.inherits(soydata.SanitizedHtml,goog.soy.data.SanitizedContent);soydata.SanitizedHtml.prototype.contentKind=soydata.SanitizedContentKind.HTML;soydata.SanitizedHtml.from=function(a){if(a!=null&&a.contentKind===soydata.SanitizedContentKind.HTML){goog.asserts.assert(a.constructor===soydata.SanitizedHtml);return(a)}return soydata.VERY_UNSAFE.ordainSanitizedHtml(soy.esc.$$escapeHtmlHelper(String(a)),soydata.getContentDir(a))};soydata.SanitizedJs=function(){goog.soy.data.SanitizedContent.call(this)};goog.inherits(soydata.SanitizedJs,goog.soy.data.SanitizedContent);soydata.SanitizedJs.prototype.contentKind=soydata.SanitizedContentKind.JS;soydata.SanitizedJs.prototype.contentDir=goog.i18n.bidi.Dir.LTR;soydata.SanitizedJsStrChars=function(){goog.soy.data.SanitizedContent.call(this)};goog.inherits(soydata.SanitizedJsStrChars,goog.soy.data.SanitizedContent);soydata.SanitizedJsStrChars.prototype.contentKind=soydata.SanitizedContentKind.JS_STR_CHARS;soydata.SanitizedUri=function(){goog.soy.data.SanitizedContent.call(this)};goog.inherits(soydata.SanitizedUri,goog.soy.data.SanitizedContent);soydata.SanitizedUri.prototype.contentKind=soydata.SanitizedContentKind.URI;soydata.SanitizedUri.prototype.contentDir=goog.i18n.bidi.Dir.LTR;soydata.SanitizedHtmlAttribute=function(){goog.soy.data.SanitizedContent.call(this)};goog.inherits(soydata.SanitizedHtmlAttribute,goog.soy.data.SanitizedContent);soydata.SanitizedHtmlAttribute.prototype.contentKind=soydata.SanitizedContentKind.ATTRIBUTES;soydata.SanitizedHtmlAttribute.prototype.contentDir=goog.i18n.bidi.Dir.LTR;soydata.SanitizedCss=function(){goog.soy.data.SanitizedContent.call(this)};goog.inherits(soydata.SanitizedCss,goog.soy.data.SanitizedContent);soydata.SanitizedCss.prototype.contentKind=soydata.SanitizedContentKind.CSS;soydata.SanitizedCss.prototype.contentDir=goog.i18n.bidi.Dir.LTR;soydata.UnsanitizedText=function(a,b){this.content=String(a);this.contentDir=b!=null?b:null};goog.inherits(soydata.UnsanitizedText,goog.soy.data.SanitizedContent);soydata.UnsanitizedText.prototype.contentKind=soydata.SanitizedContentKind.TEXT;soydata.$$EMPTY_STRING_={VALUE:""};soydata.$$makeSanitizedContentFactory_=function(b){function a(){}a.prototype=b.prototype;function c(e,f){var d=new a();d.content=String(e);if(f!==undefined){d.contentDir=f}return d}return c};soydata.$$makeSanitizedContentFactoryWithDefaultDirOnly_=function(b){function a(){}a.prototype=b.prototype;function c(e){var d=new a();d.content=String(e);return d}return c};soydata.markUnsanitizedText=function(a,b){return new soydata.UnsanitizedText(a,b)};soydata.VERY_UNSAFE.ordainSanitizedHtml=soydata.$$makeSanitizedContentFactory_(soydata.SanitizedHtml);soydata.VERY_UNSAFE.ordainSanitizedJs=soydata.$$makeSanitizedContentFactoryWithDefaultDirOnly_(soydata.SanitizedJs);soydata.VERY_UNSAFE.ordainSanitizedJsStrChars=soydata.$$makeSanitizedContentFactory_(soydata.SanitizedJsStrChars);soydata.VERY_UNSAFE.ordainSanitizedUri=soydata.$$makeSanitizedContentFactoryWithDefaultDirOnly_(soydata.SanitizedUri);soydata.VERY_UNSAFE.ordainSanitizedHtmlAttribute=soydata.$$makeSanitizedContentFactoryWithDefaultDirOnly_(soydata.SanitizedHtmlAttribute);soydata.VERY_UNSAFE.ordainSanitizedCss=soydata.$$makeSanitizedContentFactoryWithDefaultDirOnly_(soydata.SanitizedCss);soy.renderElement=goog.soy.renderElement;soy.renderAsFragment=function(d,b,a,c){return goog.soy.renderAsFragment(d,b,c,new goog.dom.DomHelper(a))};soy.renderAsElement=function(d,b,a,c){return goog.soy.renderAsElement(d,b,c,new goog.dom.DomHelper(a))};soy.$$IS_LOCALE_RTL=goog.i18n.bidi.IS_RTL;soy.$$augmentMap=function(a,d){function e(){}e.prototype=a;var b=new e();for(var c in d){b[c]=d[c]}return b};soy.$$checkMapKey=function(a){if((typeof a)!="string"){throw Error("Map literal's key expression must evaluate to string (encountered type \""+(typeof a)+'").')}return a};soy.$$getMapKeys=function(c){var b=[];for(var a in c){b.push(a)}return b};soy.$$getDelTemplateId=function(a){return a};soy.$$DELEGATE_REGISTRY_PRIORITIES_={};soy.$$DELEGATE_REGISTRY_FUNCTIONS_={};soy.$$registerDelegateFn=function(f,c,d,b){var e="key_"+f+":"+c;var a=soy.$$DELEGATE_REGISTRY_PRIORITIES_[e];if(a===undefined||d>a){soy.$$DELEGATE_REGISTRY_PRIORITIES_[e]=d;soy.$$DELEGATE_REGISTRY_FUNCTIONS_[e]=b}else{if(d==a){throw Error('Encountered two active delegates with the same priority ("'+f+":"+c+'").')}else{}}};soy.$$getDelegateFn=function(c,b,d){var a=soy.$$DELEGATE_REGISTRY_FUNCTIONS_["key_"+c+":"+b];if(!a&&b!=""){a=soy.$$DELEGATE_REGISTRY_FUNCTIONS_["key_"+c+":"]}if(a){return a}else{if(d){return soy.$$EMPTY_TEMPLATE_FN_}else{throw Error('Found no active impl for delegate call to "'+c+":"+b+'" (and not allowemptydefault="true").')}}};soy.$$EMPTY_TEMPLATE_FN_=function(a,c,b){return""};soydata.$$makeSanitizedContentFactoryForInternalBlocks_=function(b){function a(){}a.prototype=b.prototype;function c(e,f){var g=String(e);if(!g){return soydata.$$EMPTY_STRING_.VALUE}var d=new a();d.content=String(e);if(f!==undefined){d.contentDir=f}return d}return c};soydata.$$makeSanitizedContentFactoryWithDefaultDirOnlyForInternalBlocks_=function(b){function a(){}a.prototype=b.prototype;function c(e){var f=String(e);if(!f){return soydata.$$EMPTY_STRING_.VALUE}var d=new a();d.content=String(e);return d}return c};soydata.$$markUnsanitizedTextForInternalBlocks=function(a,b){var c=String(a);if(!c){return soydata.$$EMPTY_STRING_.VALUE}return new soydata.UnsanitizedText(c,b)};soydata.VERY_UNSAFE.$$ordainSanitizedHtmlForInternalBlocks=soydata.$$makeSanitizedContentFactoryForInternalBlocks_(soydata.SanitizedHtml);soydata.VERY_UNSAFE.$$ordainSanitizedJsForInternalBlocks=soydata.$$makeSanitizedContentFactoryWithDefaultDirOnlyForInternalBlocks_(soydata.SanitizedJs);soydata.VERY_UNSAFE.$$ordainSanitizedUriForInternalBlocks=soydata.$$makeSanitizedContentFactoryWithDefaultDirOnlyForInternalBlocks_(soydata.SanitizedUri);soydata.VERY_UNSAFE.$$ordainSanitizedAttributesForInternalBlocks=soydata.$$makeSanitizedContentFactoryWithDefaultDirOnlyForInternalBlocks_(soydata.SanitizedHtmlAttribute);soydata.VERY_UNSAFE.$$ordainSanitizedCssForInternalBlocks=soydata.$$makeSanitizedContentFactoryWithDefaultDirOnlyForInternalBlocks_(soydata.SanitizedCss);soy.$$escapeHtml=function(a){return soydata.SanitizedHtml.from(a)};soy.$$cleanHtml=function(a){if(soydata.isContentKind(a,soydata.SanitizedContentKind.HTML)){goog.asserts.assert(a.constructor===soydata.SanitizedHtml);return(a)}return soydata.VERY_UNSAFE.ordainSanitizedHtml(soy.$$stripHtmlTags(a,soy.esc.$$SAFE_TAG_WHITELIST_),soydata.getContentDir(a))};soy.$$escapeHtmlRcdata=function(a){if(soydata.isContentKind(a,soydata.SanitizedContentKind.HTML)){goog.asserts.assert(a.constructor===soydata.SanitizedHtml);return soy.esc.$$normalizeHtmlHelper(a.content)}return soy.esc.$$escapeHtmlHelper(a)};soy.$$HTML5_VOID_ELEMENTS_=new RegExp("^<(?:area|base|br|col|command|embed|hr|img|input|keygen|link|meta|param|source|track|wbr)\\b");soy.$$stripHtmlTags=function(d,c){if(!c){return String(d).replace(soy.esc.$$HTML_TAG_REGEX_,"").replace(soy.esc.$$LT_REGEX_,"&lt;")}var b=String(d).replace(/\[/g,"&#91;");var a=[];b=b.replace(soy.esc.$$HTML_TAG_REGEX_,function(f,h){if(h){h=h.toLowerCase();if(c.hasOwnProperty(h)&&c[h]){var i=f.charAt(1)==="/"?"</":"<";var g=a.length;a[g]=i+h+">";return"["+g+"]"}}return""});b=soy.esc.$$normalizeHtmlHelper(b);var e=soy.$$balanceTags_(a);b=b.replace(/\[(\d+)\]/g,function(g,f){return a[f]});return b+e};soy.$$balanceTags_=function(c){var b=[];for(var d=0,f=c.length;d<f;++d){var a=c[d];if(a.charAt(1)==="/"){var e=b.length-1;while(e>=0&&b[e]!=a){e--}if(e<0){c[d]=""}else{c[d]=b.slice(e).reverse().join("");b.length=e}}else{if(!soy.$$HTML5_VOID_ELEMENTS_.test(a)){b.push("</"+a.substring(1))}}}return b.reverse().join("")};soy.$$escapeHtmlAttribute=function(a){if(soydata.isContentKind(a,soydata.SanitizedContentKind.HTML)){goog.asserts.assert(a.constructor===soydata.SanitizedHtml);return soy.esc.$$normalizeHtmlHelper(soy.$$stripHtmlTags(a.content))}return soy.esc.$$escapeHtmlHelper(a)};soy.$$escapeHtmlAttributeNospace=function(a){if(soydata.isContentKind(a,soydata.SanitizedContentKind.HTML)){goog.asserts.assert(a.constructor===soydata.SanitizedHtml);return soy.esc.$$normalizeHtmlNospaceHelper(soy.$$stripHtmlTags(a.content))}return soy.esc.$$escapeHtmlNospaceHelper(a)};soy.$$filterHtmlAttributes=function(a){if(soydata.isContentKind(a,soydata.SanitizedContentKind.ATTRIBUTES)){goog.asserts.assert(a.constructor===soydata.SanitizedHtmlAttribute);return a.content.replace(/([^"'\s])$/,"$1 ")}return soy.esc.$$filterHtmlAttributesHelper(a)};soy.$$filterHtmlElementName=function(a){return soy.esc.$$filterHtmlElementNameHelper(a)};soy.$$escapeJs=function(a){return soy.$$escapeJsString(a)};soy.$$escapeJsString=function(a){if(soydata.isContentKind(a,soydata.SanitizedContentKind.JS_STR_CHARS)){goog.asserts.assert(a.constructor===soydata.SanitizedJsStrChars);return a.content}return soy.esc.$$escapeJsStringHelper(a)};soy.$$escapeJsValue=function(a){if(a==null){return" null "}if(soydata.isContentKind(a,soydata.SanitizedContentKind.JS)){goog.asserts.assert(a.constructor===soydata.SanitizedJs);return a.content}switch(typeof a){case"boolean":case"number":return" "+a+" ";default:return"'"+soy.esc.$$escapeJsStringHelper(String(a))+"'"}};soy.$$escapeJsRegex=function(a){return soy.esc.$$escapeJsRegexHelper(a)};soy.$$problematicUriMarks_=/['()]/g;soy.$$pctEncode_=function(a){return"%"+a.charCodeAt(0).toString(16)};soy.$$escapeUri=function(a){if(soydata.isContentKind(a,soydata.SanitizedContentKind.URI)){goog.asserts.assert(a.constructor===soydata.SanitizedUri);return soy.$$normalizeUri(a)}var b=soy.esc.$$escapeUriHelper(a);soy.$$problematicUriMarks_.lastIndex=0;if(soy.$$problematicUriMarks_.test(b)){return b.replace(soy.$$problematicUriMarks_,soy.$$pctEncode_)}return b};soy.$$normalizeUri=function(a){return soy.esc.$$normalizeUriHelper(a)};soy.$$filterNormalizeUri=function(a){if(soydata.isContentKind(a,soydata.SanitizedContentKind.URI)){goog.asserts.assert(a.constructor===soydata.SanitizedUri);return soy.$$normalizeUri(a)}return soy.esc.$$filterNormalizeUriHelper(a)};soy.$$filterImageDataUri=function(a){return soydata.VERY_UNSAFE.ordainSanitizedUri(soy.esc.$$filterImageDataUriHelper(a))};soy.$$escapeCssString=function(a){return soy.esc.$$escapeCssStringHelper(a)};soy.$$filterCssValue=function(a){if(soydata.isContentKind(a,soydata.SanitizedContentKind.CSS)){goog.asserts.assert(a.constructor===soydata.SanitizedCss);return a.content}if(a==null){return""}return soy.esc.$$filterCssValueHelper(a)};soy.$$filterNoAutoescape=function(a){if(soydata.isContentKind(a,soydata.SanitizedContentKind.TEXT)){goog.asserts.fail("Tainted SanitizedContentKind.TEXT for |noAutoescape: `%s`",[a.content]);return"zSoyz"}return a};soy.$$changeNewlineToBr=function(b){var a=goog.string.newLineToBr(String(b),false);if(soydata.isContentKind(b,soydata.SanitizedContentKind.HTML)){return soydata.VERY_UNSAFE.ordainSanitizedHtml(a,soydata.getContentDir(b))}return a};soy.$$insertWordBreaks=function(c,b){var a=goog.format.insertWordBreaks(String(c),b);if(soydata.isContentKind(c,soydata.SanitizedContentKind.HTML)){return soydata.VERY_UNSAFE.ordainSanitizedHtml(a,soydata.getContentDir(c))}return a};soy.$$truncate=function(c,a,b){c=String(c);if(c.length<=a){return c}if(b){if(a>3){a-=3}else{b=false}}if(soy.$$isHighSurrogate_(c.charAt(a-1))&&soy.$$isLowSurrogate_(c.charAt(a))){a-=1}c=c.substring(0,a);if(b){c+="..."}return c};soy.$$isHighSurrogate_=function(a){return 55296<=a&&a<=56319};soy.$$isLowSurrogate_=function(a){return 56320<=a&&a<=57343};soy.$$bidiFormatterCache_={};soy.$$getBidiFormatterInstance_=function(a){return soy.$$bidiFormatterCache_[a]||(soy.$$bidiFormatterCache_[a]=new goog.i18n.BidiFormatter(a))};soy.$$bidiTextDir=function(d,a){var c=soydata.getContentDir(d);if(c!=null){return c}var b=a||soydata.isContentKind(d,soydata.SanitizedContentKind.HTML);return goog.i18n.bidi.estimateDirection(d+"",b)};soy.$$bidiDirAttr=function(b,f,a){var c=soy.$$getBidiFormatterInstance_(b);var e=soydata.getContentDir(f);if(e==null){var d=a||soydata.isContentKind(f,soydata.SanitizedContentKind.HTML);e=goog.i18n.bidi.estimateDirection(f+"",d)}return soydata.VERY_UNSAFE.ordainSanitizedHtmlAttribute(c.knownDirAttr(e))};soy.$$bidiMarkAfter=function(b,e,a){var c=soy.$$getBidiFormatterInstance_(b);var d=a||soydata.isContentKind(e,soydata.SanitizedContentKind.HTML);return c.markAfterKnownDir(soydata.getContentDir(e),e+"",d)};soy.$$bidiSpanWrap=function(a,d){var c=soy.$$getBidiFormatterInstance_(a);var b=c.spanWrapWithKnownDir(soydata.getContentDir(d),d+"",true);return b};soy.$$bidiUnicodeWrap=function(a,f){var c=soy.$$getBidiFormatterInstance_(a);var d=soydata.isContentKind(f,soydata.SanitizedContentKind.HTML);var b=c.unicodeWrapWithKnownDir(soydata.getContentDir(f),f+"",d);var e=c.getContextDir();if(soydata.isContentKind(f,soydata.SanitizedContentKind.TEXT)){return new soydata.UnsanitizedText(b,e)}if(d){return soydata.VERY_UNSAFE.ordainSanitizedHtml(b,e)}if(soydata.isContentKind(f,soydata.SanitizedContentKind.JS_STR_CHARS)){return soydata.VERY_UNSAFE.ordainSanitizedJsStrChars(b,e)}return b};soy.esc.$$escapeUriHelper=function(a){return encodeURIComponent(String(a))};soy.esc.$$ESCAPE_MAP_FOR_ESCAPE_HTML__AND__NORMALIZE_HTML__AND__ESCAPE_HTML_NOSPACE__AND__NORMALIZE_HTML_NOSPACE_={"\x00":"\x26#0;","\x22":"\x26quot;","\x26":"\x26amp;","\x27":"\x26#39;","\x3c":"\x26lt;","\x3e":"\x26gt;","\x09":"\x26#9;","\x0a":"\x26#10;","\x0b":"\x26#11;","\x0c":"\x26#12;","\x0d":"\x26#13;"," ":"\x26#32;","-":"\x26#45;","/":"\x26#47;","\x3d":"\x26#61;","`":"\x26#96;","\x85":"\x26#133;","\xa0":"\x26#160;","\u2028":"\x26#8232;","\u2029":"\x26#8233;"};soy.esc.$$REPLACER_FOR_ESCAPE_HTML__AND__NORMALIZE_HTML__AND__ESCAPE_HTML_NOSPACE__AND__NORMALIZE_HTML_NOSPACE_=function(a){return soy.esc.$$ESCAPE_MAP_FOR_ESCAPE_HTML__AND__NORMALIZE_HTML__AND__ESCAPE_HTML_NOSPACE__AND__NORMALIZE_HTML_NOSPACE_[a]};soy.esc.$$ESCAPE_MAP_FOR_ESCAPE_JS_STRING__AND__ESCAPE_JS_REGEX_={"\x00":"\\x00","\x08":"\\x08","\x09":"\\t","\x0a":"\\n","\x0b":"\\x0b","\x0c":"\\f","\x0d":"\\r","\x22":"\\x22","\x26":"\\x26","\x27":"\\x27","/":"\\/","\x3c":"\\x3c","\x3d":"\\x3d","\x3e":"\\x3e","\\":"\\\\","\x85":"\\x85","\u2028":"\\u2028","\u2029":"\\u2029","$":"\\x24","(":"\\x28",")":"\\x29","*":"\\x2a","+":"\\x2b",",":"\\x2c","-":"\\x2d",".":"\\x2e",":":"\\x3a","?":"\\x3f","[":"\\x5b","]":"\\x5d","^":"\\x5e","{":"\\x7b","|":"\\x7c","}":"\\x7d"};soy.esc.$$REPLACER_FOR_ESCAPE_JS_STRING__AND__ESCAPE_JS_REGEX_=function(a){return soy.esc.$$ESCAPE_MAP_FOR_ESCAPE_JS_STRING__AND__ESCAPE_JS_REGEX_[a]};soy.esc.$$ESCAPE_MAP_FOR_ESCAPE_CSS_STRING_={"\x00":"\\0 ","\x08":"\\8 ","\x09":"\\9 ","\x0a":"\\a ","\x0b":"\\b ","\x0c":"\\c ","\x0d":"\\d ","\x22":"\\22 ","\x26":"\\26 ","\x27":"\\27 ","(":"\\28 ",")":"\\29 ","*":"\\2a ","/":"\\2f ",":":"\\3a ",";":"\\3b ","\x3c":"\\3c ","\x3d":"\\3d ","\x3e":"\\3e ","@":"\\40 ","\\":"\\5c ","{":"\\7b ","}":"\\7d ","\x85":"\\85 ","\xa0":"\\a0 ","\u2028":"\\2028 ","\u2029":"\\2029 "};soy.esc.$$REPLACER_FOR_ESCAPE_CSS_STRING_=function(a){return soy.esc.$$ESCAPE_MAP_FOR_ESCAPE_CSS_STRING_[a]};soy.esc.$$ESCAPE_MAP_FOR_NORMALIZE_URI__AND__FILTER_NORMALIZE_URI_={"\x00":"%00","\x01":"%01","\x02":"%02","\x03":"%03","\x04":"%04","\x05":"%05","\x06":"%06","\x07":"%07","\x08":"%08","\x09":"%09","\x0a":"%0A","\x0b":"%0B","\x0c":"%0C","\x0d":"%0D","\x0e":"%0E","\x0f":"%0F","\x10":"%10","\x11":"%11","\x12":"%12","\x13":"%13","\x14":"%14","\x15":"%15","\x16":"%16","\x17":"%17","\x18":"%18","\x19":"%19","\x1a":"%1A","\x1b":"%1B","\x1c":"%1C","\x1d":"%1D","\x1e":"%1E","\x1f":"%1F"," ":"%20","\x22":"%22","\x27":"%27","(":"%28",")":"%29","\x3c":"%3C","\x3e":"%3E","\\":"%5C","{":"%7B","}":"%7D","\x7f":"%7F","\x85":"%C2%85","\xa0":"%C2%A0","\u2028":"%E2%80%A8","\u2029":"%E2%80%A9","\uff01":"%EF%BC%81","\uff03":"%EF%BC%83","\uff04":"%EF%BC%84","\uff06":"%EF%BC%86","\uff07":"%EF%BC%87","\uff08":"%EF%BC%88","\uff09":"%EF%BC%89","\uff0a":"%EF%BC%8A","\uff0b":"%EF%BC%8B","\uff0c":"%EF%BC%8C","\uff0f":"%EF%BC%8F","\uff1a":"%EF%BC%9A","\uff1b":"%EF%BC%9B","\uff1d":"%EF%BC%9D","\uff1f":"%EF%BC%9F","\uff20":"%EF%BC%A0","\uff3b":"%EF%BC%BB","\uff3d":"%EF%BC%BD"};soy.esc.$$REPLACER_FOR_NORMALIZE_URI__AND__FILTER_NORMALIZE_URI_=function(a){return soy.esc.$$ESCAPE_MAP_FOR_NORMALIZE_URI__AND__FILTER_NORMALIZE_URI_[a]};soy.esc.$$MATCHER_FOR_ESCAPE_HTML_=/[\x00\x22\x26\x27\x3c\x3e]/g;soy.esc.$$MATCHER_FOR_NORMALIZE_HTML_=/[\x00\x22\x27\x3c\x3e]/g;soy.esc.$$MATCHER_FOR_ESCAPE_HTML_NOSPACE_=/[\x00\x09-\x0d \x22\x26\x27\x2d\/\x3c-\x3e`\x85\xa0\u2028\u2029]/g;soy.esc.$$MATCHER_FOR_NORMALIZE_HTML_NOSPACE_=/[\x00\x09-\x0d \x22\x27\x2d\/\x3c-\x3e`\x85\xa0\u2028\u2029]/g;soy.esc.$$MATCHER_FOR_ESCAPE_JS_STRING_=/[\x00\x08-\x0d\x22\x26\x27\/\x3c-\x3e\\\x85\u2028\u2029]/g;soy.esc.$$MATCHER_FOR_ESCAPE_JS_REGEX_=/[\x00\x08-\x0d\x22\x24\x26-\/\x3a\x3c-\x3f\x5b-\x5e\x7b-\x7d\x85\u2028\u2029]/g;soy.esc.$$MATCHER_FOR_ESCAPE_CSS_STRING_=/[\x00\x08-\x0d\x22\x26-\x2a\/\x3a-\x3e@\\\x7b\x7d\x85\xa0\u2028\u2029]/g;soy.esc.$$MATCHER_FOR_NORMALIZE_URI__AND__FILTER_NORMALIZE_URI_=/[\x00- \x22\x27-\x29\x3c\x3e\\\x7b\x7d\x7f\x85\xa0\u2028\u2029\uff01\uff03\uff04\uff06-\uff0c\uff0f\uff1a\uff1b\uff1d\uff1f\uff20\uff3b\uff3d]/g;soy.esc.$$FILTER_FOR_FILTER_CSS_VALUE_=/^(?!-*(?:expression|(?:moz-)?binding))(?:[.#]?-?(?:[_a-z0-9-]+)(?:-[_a-z0-9-]+)*-?|-?(?:[0-9]+(?:\.[0-9]*)?|\.[0-9]+)(?:[a-z]{1,2}|%)?|!important|)$/i;soy.esc.$$FILTER_FOR_FILTER_NORMALIZE_URI_=/^(?:(?:https?|mailto):|[^&:\/?#]*(?:[\/?#]|$))/i;soy.esc.$$FILTER_FOR_FILTER_IMAGE_DATA_URI_=/^data:image\/(?:bmp|gif|jpe?g|png|tiff|webp);base64,[a-z0-9+\/]+=*$/i;soy.esc.$$FILTER_FOR_FILTER_HTML_ATTRIBUTES_=/^(?!style|on|action|archive|background|cite|classid|codebase|data|dsync|href|longdesc|src|usemap)(?:[a-z0-9_$:-]*)$/i;soy.esc.$$FILTER_FOR_FILTER_HTML_ELEMENT_NAME_=/^(?!script|style|title|textarea|xmp|no)[a-z0-9_$:-]*$/i;soy.esc.$$escapeHtmlHelper=function(a){var b=String(a);return b.replace(soy.esc.$$MATCHER_FOR_ESCAPE_HTML_,soy.esc.$$REPLACER_FOR_ESCAPE_HTML__AND__NORMALIZE_HTML__AND__ESCAPE_HTML_NOSPACE__AND__NORMALIZE_HTML_NOSPACE_)};soy.esc.$$normalizeHtmlHelper=function(a){var b=String(a);return b.replace(soy.esc.$$MATCHER_FOR_NORMALIZE_HTML_,soy.esc.$$REPLACER_FOR_ESCAPE_HTML__AND__NORMALIZE_HTML__AND__ESCAPE_HTML_NOSPACE__AND__NORMALIZE_HTML_NOSPACE_)};soy.esc.$$escapeHtmlNospaceHelper=function(a){var b=String(a);return b.replace(soy.esc.$$MATCHER_FOR_ESCAPE_HTML_NOSPACE_,soy.esc.$$REPLACER_FOR_ESCAPE_HTML__AND__NORMALIZE_HTML__AND__ESCAPE_HTML_NOSPACE__AND__NORMALIZE_HTML_NOSPACE_)};soy.esc.$$normalizeHtmlNospaceHelper=function(a){var b=String(a);return b.replace(soy.esc.$$MATCHER_FOR_NORMALIZE_HTML_NOSPACE_,soy.esc.$$REPLACER_FOR_ESCAPE_HTML__AND__NORMALIZE_HTML__AND__ESCAPE_HTML_NOSPACE__AND__NORMALIZE_HTML_NOSPACE_)};soy.esc.$$escapeJsStringHelper=function(a){var b=String(a);return b.replace(soy.esc.$$MATCHER_FOR_ESCAPE_JS_STRING_,soy.esc.$$REPLACER_FOR_ESCAPE_JS_STRING__AND__ESCAPE_JS_REGEX_)};soy.esc.$$escapeJsRegexHelper=function(a){var b=String(a);return b.replace(soy.esc.$$MATCHER_FOR_ESCAPE_JS_REGEX_,soy.esc.$$REPLACER_FOR_ESCAPE_JS_STRING__AND__ESCAPE_JS_REGEX_)};soy.esc.$$escapeCssStringHelper=function(a){var b=String(a);return b.replace(soy.esc.$$MATCHER_FOR_ESCAPE_CSS_STRING_,soy.esc.$$REPLACER_FOR_ESCAPE_CSS_STRING_)};soy.esc.$$filterCssValueHelper=function(a){var b=String(a);if(!soy.esc.$$FILTER_FOR_FILTER_CSS_VALUE_.test(b)){return"zSoyz"}return b};soy.esc.$$normalizeUriHelper=function(a){var b=String(a);return b.replace(soy.esc.$$MATCHER_FOR_NORMALIZE_URI__AND__FILTER_NORMALIZE_URI_,soy.esc.$$REPLACER_FOR_NORMALIZE_URI__AND__FILTER_NORMALIZE_URI_)};soy.esc.$$filterNormalizeUriHelper=function(a){var b=String(a);if(!soy.esc.$$FILTER_FOR_FILTER_NORMALIZE_URI_.test(b)){return"#zSoyz"}return b.replace(soy.esc.$$MATCHER_FOR_NORMALIZE_URI__AND__FILTER_NORMALIZE_URI_,soy.esc.$$REPLACER_FOR_NORMALIZE_URI__AND__FILTER_NORMALIZE_URI_)};soy.esc.$$filterImageDataUriHelper=function(a){var b=String(a);if(!soy.esc.$$FILTER_FOR_FILTER_IMAGE_DATA_URI_.test(b)){return"data:image/gif;base64,zSoyz"}return b};soy.esc.$$filterHtmlAttributesHelper=function(a){var b=String(a);if(!soy.esc.$$FILTER_FOR_FILTER_HTML_ATTRIBUTES_.test(b)){return"zSoyz"}return b};soy.esc.$$filterHtmlElementNameHelper=function(a){var b=String(a);if(!soy.esc.$$FILTER_FOR_FILTER_HTML_ELEMENT_NAME_.test(b)){return"zSoyz"}return b};soy.esc.$$HTML_TAG_REGEX_=/<(?:!|\/?([a-zA-Z][a-zA-Z0-9:\-]*))(?:[^>'"]|"[^"]*"|'[^']*')*>/g;soy.esc.$$LT_REGEX_=/</g;soy.esc.$$SAFE_TAG_WHITELIST_={b:1,br:1,em:1,i:1,s:1,sub:1,sup:1,u:1};;
;
/* module-key = 'com.atlassian.soy.soy-template-plugin:soy-deps', location = 'soy-template-module/js/atlassian-deps.js' */
window.atl_soy=window.atl_soy||{};atl_soy.concat=function(d,c){if(d.concat){return d.concat(c)}var e={};for(var f in d){if(d.hasOwnProperty(f)){e[f]=d[f]}}for(var f in c){if(c.hasOwnProperty(f)){e[f]=c[f]}}return e};;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-internal-widget', location = 'node_modules/@atlassian/aui/src/js/aui/internal/widget.js' */
("undefined"===typeof window?global:window).__e3152236c406a356c24f20f7bfcccf21=function(){var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default=function(a,d){var e="_aui-widget-"+a;return function(a,g){var b,c;f.default.isPlainObject(a)?c=a:(b=a,c=g);b=b&&(0,f.default)(b);!b||!b.data(e)?(c=new d(b,c||{}),b=c.$el,b.data(e,c)):c=b.data(e);return c}};var d=__307d3e18fd611f85395c67cddeb1fe24,f=d&&d.__esModule?d:{"default":d};return a=a["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-internal-i18n-aui', location = 'node_modules/@atlassian/aui/src/js/aui/internal/i18n/aui.js' */
("undefined"===typeof window?global:window).__b7c1042973dc14ee8b82b7aa58d746af=function(){var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default={"aui.dropdown.async.error":"Error loading dropdown","aui.dropdown.async.loading":"Loading dropdown","aui.words.add":"Add","aui.words.update":"Update","aui.words.delete":"Delete","aui.words.remove":"Remove","aui.words.cancel":"Cancel","aui.words.loading":"Loading","aui.words.close":"Close","aui.enter.value":"Enter value","aui.words.more":"More",
"aui.words.moreitem":"More\u2026","aui.keyboard.shortcut.type.x":"Type ''{0}''","aui.keyboard.shortcut.then.x":"then ''{0}''","aui.keyboard.shortcut.or.x":"OR ''{0}''","aui.sidebar.expand.tooltip":"Expand sidebar ( [ )","aui.sidebar.collapse.tooltip":"Collapse sidebar ( [ )","aui.validation.message.maxlength":"Must be fewer than or equal to {0} characters","aui.validation.message.minlength":"Must be greater than or equal to {0} characters","aui.validation.message.exactlength":"Must be exactly {0} characters",
"aui.validation.message.matchingfield":"{0} and {1} do not match.","aui.validation.message.matchingfield-novalue":"These fields do not match.","aui.validation.message.doesnotcontain":"Do not include the phrase {0} in this field","aui.validation.message.pattern":"This field does not match the required format","aui.validation.message.required":"This is a required field","aui.validation.message.validnumber":"Please enter a valid number","aui.validation.message.min":"Enter a value greater than {0}","aui.validation.message.max":"Enter a value less than {0}",
"aui.validation.message.dateformat":"Enter a valid date","aui.validation.message.minchecked":"Tick at least {0,choice,0#0 checkboxes|1#1 checkbox|1<{0,number} checkboxes}.","aui.validation.message.maxchecked":"Tick at most {0,choice,0#0 checkboxes|1#1 checkbox|1<{0,number} checkboxes}.","aui.checkboxmultiselect.clear.selected":"Clear selected items","aui.select.no.suggestions":"No suggestions","aui.select.new.suggestions":"New suggestions added. Please use the up and down arrows to select.","aui.select.new.value":"new value",
"aui.toggle.on":"On","aui.toggle.off":"Off","ajs.datepicker.localisations.day-names.sunday":"Sunday","ajs.datepicker.localisations.day-names.monday":"Monday","ajs.datepicker.localisations.day-names.tuesday":"Tuesday","ajs.datepicker.localisations.day-names.wednesday":"Wednesday","ajs.datepicker.localisations.day-names.thursday":"Thursday","ajs.datepicker.localisations.day-names.friday":"Friday","ajs.datepicker.localisations.day-names.saturday":"Saturday","ajs.datepicker.localisations.day-names-min.sunday":"Sun",
"ajs.datepicker.localisations.day-names-min.monday":"Mon","ajs.datepicker.localisations.day-names-min.tuesday":"Tue","ajs.datepicker.localisations.day-names-min.wednesday":"Wed","ajs.datepicker.localisations.day-names-min.thursday":"Thu","ajs.datepicker.localisations.day-names-min.friday":"Fri","ajs.datepicker.localisations.day-names-min.saturday":"Sat","ajs.datepicker.localisations.first-day":0,"ajs.datepicker.localisations.is-RTL":!1,"ajs.datepicker.localisations.month-names.january":"January",
"ajs.datepicker.localisations.month-names.february":"February","ajs.datepicker.localisations.month-names.march":"March","ajs.datepicker.localisations.month-names.april":"April","ajs.datepicker.localisations.month-names.may":"May","ajs.datepicker.localisations.month-names.june":"June","ajs.datepicker.localisations.month-names.july":"July","ajs.datepicker.localisations.month-names.august":"August","ajs.datepicker.localisations.month-names.september":"September","ajs.datepicker.localisations.month-names.october":"October",
"ajs.datepicker.localisations.month-names.november":"November","ajs.datepicker.localisations.month-names.december":"December","ajs.datepicker.localisations.show-month-after-year":!1,"ajs.datepicker.localisations.year-suffix":null};return a=a["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-i18n', location = 'node_modules/@atlassian/aui/src/js/aui/i18n.js' */
("undefined"===typeof window?global:window).__d74c881c8f23921c15438d0f30c99f80=function(){function c(a){return a&&a.__esModule?a:{"default":a}}var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});var e=c(__57111a90131a66c211cf7209c7270167),f=c(__4d02fe17b8e885a34493e34af3d145dd),d={keys:c(__b7c1042973dc14ee8b82b7aa58d746af).default,getText:function(a){var b=Array.prototype.slice.call(arguments,1);return Object.prototype.hasOwnProperty.call(this.keys,a)?e.default.apply(null,[this.keys[a]].concat(b)):
a}};(0,f.default)("I18n",d);b.default=d;return b=b["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-internal-skate', location = 'node_modules/@atlassian/aui/src/js/aui/internal/skate.js' */
("undefined"===typeof window?global:window).__c1ce1f1e3e613f564fc234ff043570f1=function(){var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});var a=__612b714a7afa741ae272e3b4821d110b,a=(a&&a.__esModule?a:{"default":a}).default.noConflict();b.default=a;return b=b["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-navigation', location = 'node_modules/@atlassian/aui/src/js/aui/navigation.js' */
("undefined"===typeof window?global:window).__ae9d29286cb1bf270e0b6093684e6bea=function(){function c(a){return a&&a.__esModule?a:{"default":a}}function b(a){this.$el=(0,d.default)(a).closest(".aui-nav");if(1<this.$el.length)return this.$el.map(function(a,d){return new b(d)})[0];if(this.$el.data("aui-navigation"))return this.$el.data("aui-navigation");this.$el.data("aui-navigation",this);this.$treeParent=this.$el.parent("li[aria-expanded]");this.$subtreeToggleIcon=this.$treeParent.children(".aui-nav-subtree-toggle").children("span.aui-icon");
this.hideMoreItems();this.$el.children("li:has(.aui-nav-selected)").addClass("aui-nav-child-selected");a=this.$el.children(".aui-nav-selected");a.parents(".aui-nav > [aria-expanded=false]").add(a.filter("[aria-expanded=false]")).each(function(){e((0,d.default)(this).children(".aui-nav")).expand()});this.$el.find("> li[aria-expanded] > .aui-nav-subtree-toggle").on("click",function(){e((0,d.default)(this).siblings(".aui-nav")).toggle()});return this}var f={};"use strict";Object.defineProperty(f,"__esModule",
{value:!0});__d74c881c8f23921c15438d0f30c99f80;var d=c(__307d3e18fd611f85395c67cddeb1fe24),g=c(__c1ce1f1e3e613f564fc234ff043570f1),h=c(__4d02fe17b8e885a34493e34af3d145dd),i=c(__e3152236c406a356c24f20f7bfcccf21);b.prototype.isNested=function(){return 1===this.$treeParent.length};b.prototype.isCollapsed=function(){return"false"===this.$treeParent.attr("aria-expanded")};b.prototype.expand=function(){this.$treeParent.attr("aria-expanded","true");this.$subtreeToggleIcon.removeClass("aui-iconfont-collapsed").addClass("aui-iconfont-expanded");
this.hideMoreItems();return this};b.prototype.collapse=function(){this.$treeParent.attr("aria-expanded","false");this.$subtreeToggleIcon.removeClass("aui-iconfont-expanded").addClass("aui-iconfont-collapsed");return this};b.prototype.toggle=function(){this.isCollapsed()?this.expand():this.collapse();return this};b.prototype.hideMoreItems=function(){if(this.$el.is(".aui-nav:not([aria-expanded=false]) [data-more]")){var a=this.$el.attr("data-more")||"More\u2026",b=Math.abs(parseInt(this.$el.attr("data-more-limit")))||
5,c=this.$el.children("li"),e=c.length<=b+1,f=c.filter(".aui-nav-selected").length,g=c.filter(".aui-nav-more").length;if(e||f||g)return this;(0,d.default)("<li>",{"class":"aui-nav-more","aria-hidden":"true"}).append((0,d.default)("<a>",{href:"#","class":"aui-nav-item",text:a,click:function(a){a.preventDefault();(0,d.default)(this).parent().remove()}})).insertAfter(c.eq(b-1))}return this};var e=(0,i.default)("navigation",b);(0,g.default)("aui-nav",{type:g.default.type.CLASSNAME,attached:function(a){new b(a)},
detached:function(a){(0,d.default)(a).removeData()}});(0,h.default)("navigation",e);f.default=e;return f=f["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:aui-navigation', location = 'src/soy/navigation.soy' */
// This file was automatically generated from navigation.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.navigation.
 */

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.navigation == 'undefined') { aui.navigation = {}; }


aui.navigation.item = function(opt_data, opt_ignored) {
  return '<li class="' + ((opt_data.isSelected || opt_data.key && opt_data.selectedItemKey == opt_data.key) ? 'aui-nav-selected' : '') + aui.renderExtraClasses(opt_data) + '"' + ((opt_data.isCollapsible && opt_data.children && opt_data.children.length > 0) ? 'aria-expanded="' + ((opt_data.isCollapsed) ? 'false' : 'true') + '"' : '') + aui.renderExtraAttributes(opt_data) + '>' + ((opt_data.children && opt_data.children.length > 0 && opt_data.isCollapsible) ? '<a href="#" class="aui-nav-subtree-toggle">' + aui.icons.icon({icon: opt_data.isCollapsed ? 'collapsed' : 'expanded', size: 'small', useIconFont: true}) + '</a>' : '') + '<a class="aui-nav-item" href="' + soy.$$escapeHtml(opt_data.href) + '">' + ((opt_data.iconClass && ! opt_data.isChild) ? aui.icons.icon({icon: opt_data.iconClass, size: 'small', useIconFont: true}) : '') + ((opt_data.count == 0 || opt_data.count) ? '<span class="aui-badge">' + soy.$$escapeHtml(opt_data.count) + '</span>' : '') + '<span class="aui-nav-item-label">' + soy.$$escapeHtml(opt_data.label) + '</span></a>' + ((opt_data.children && opt_data.children.length > 0) ? aui.navigation.nav({items: opt_data.children, selectedItemKey: opt_data.selectedItemKey, isChild: true}) : '') + '</li>';
};
if (goog.DEBUG) {
  aui.navigation.item.soyTemplateName = 'aui.navigation.item';
}


aui.navigation.nav = function(opt_data, opt_ignored) {
  var output = '<ul class="aui-nav' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>';
  var itemList58 = opt_data.items;
  var itemListLen58 = itemList58.length;
  for (var itemIndex58 = 0; itemIndex58 < itemListLen58; itemIndex58++) {
    var itemData58 = itemList58[itemIndex58];
    output += aui.navigation.item(soy.$$augmentMap(itemData58, {isChild: opt_data.isChild, selectedItemKey: opt_data.selectedItemKey}));
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  aui.navigation.nav.soyTemplateName = 'aui.navigation.nav';
}
;
;
/* module-key = 'com.atlassian.auiplugin:internal-skatejs-template-html-0.0.0-dist-template-html', location = 'node_modules/skatejs-template-html/dist/template-html.js' */
("undefined"===typeof window?global:window).__f52b7059926ab2bdcd0aee12b4bc782b=function(){var i={exports:{}},u=i.exports,A={module:i,exports:u},l;l=function(a,b,f){var g=("undefined"===typeof window?global:window).define,e,c,f=[f,b,a].filter(function(d){return"function"===typeof d})[0],b=[b,a,[]].filter(Array.isArray)[0];e=f.apply(null,b.map(function(d){return A[d]}));c=typeof e;"function"===typeof g&&g("string"===typeof a?a:"__f52b7059926ab2bdcd0aee12b4bc782b",b,f);"string"===c?e=String(e):"number"===
c?e=Number(e):"boolean"===c&&(e=Boolean(e));void 0!==e&&(u=i.exports=e)};l.amd=!0;var v=function(a,b,f){a.__SKATE_TEMPLATE_HTML_DATA||(a.__SKATE_TEMPLATE_HTML_DATA={});a.__SKATE_TEMPLATE_HTML_DATA[b]=f;return a},q=function(a){var b={caption:"table",dd:"dl",dt:"dl",li:"ul",tbody:"table",td:"tr",thead:"table",tr:"tbody"},f=a.match(/\s*<([^\s>]+)/),b=document.createElement(f&&b[f[1]]||"div");b.innerHTML=a;return w(b.childNodes)},w=function(a){for(var b=document.createDocumentFragment();a&&a.length;)b.appendChild(a[0]);
return b},r=function(a,b){for(var f=[],g=a.nextSibling;g!==b;)f.push(g),g=g.nextSibling;return f},s=function(a){for(var b=a.defaultNodes,f=b.length,g=0;g<f;g++)a.container.insertBefore(b[g],a.endNode);a.isDefault=!0},t=function(a){for(var b=a.defaultNodes,f=b.length,g=0;g<f;g++){var e=b[g];e.parentNode.removeChild(e)}a.isDefault=!1},B=function(a,b){return{get:function(){var f=a[b];return"function"===typeof f?f.bind(a):f},set:function(f){a[b]=f}}},x=function(a){for(var b=a.childNodes,f=b.length,g=
[],e,a=0;a<f;a++){var c=b[a];if(8===c.nodeType){var d;d=c;var j=void 0,h=d.textContent.match(/^ (\/?)content (.*)/i);if(h){if(h[2])try{j=JSON.parse(h[2])}catch(p){throw Error('Unable to parse content comment data: "'+p+'" in "<\!--'+d.textContent+'--\>".');}d={data:j||{defaultContent:void 0,isDefault:void 0,selector:void 0},type:h[1]?"close":"open"}}else d=void 0;if(d)if("open"===d.type){if(e)throw Error('Cannot have an opening content placeholder after another content placeholder at the same level in the DOM tree: "'+
c.textContent+'" in "'+c.parentNode.innerHTML+'".');e={container:c.parentNode,contentNode:c,defaultNodes:d.data.defaultContent&&q(d.data.defaultContent).childNodes||[],isDefault:d.data.isDefault,selector:d.data.selector,startNode:c}}else if("close"===d.type){if(!e)throw Error('Unmatched closing content placeholder: "'+c.textContent+'" in "'+c.parentNode.innerHTML+'".');e.endNode=c;g.push(e);e=void 0}}else g=g.concat(x(c))}return g},k=function(){var a=[].slice.call(arguments).join("");return function(b){var f=
w(b.childNodes);b.innerHTML=a;var g=b.getElementsByTagName("content");if(g&&g.length){for(var e=[];g.length;){var c=g[0],d=c.parentNode,j=c.getAttribute("select"),h=document.createComment(" content "),p=document.createComment(" /content ");e.push({container:d,contentNode:c,defaultNodes:[].slice.call(c.childNodes),endNode:p,isDefault:!0,selector:j,startNode:h});d.replaceChild(p,c);d.insertBefore(h,p);h.textContent+=JSON.stringify({defaultContent:c.innerHTML,selector:j})+" "}v(b,"content",e)}f.childNodes.length&&
k.wrap(b).appendChild(f)}},y=window.DocumentFragment,m=window.HTMLElement.prototype,z=m.matches||m.msMatchesSelector||m.webkitMatchesSelector||m.mozMatchesSelector||m.oMatchesSelector;k.wrap=function(a){var b;b=a.__SKATE_TEMPLATE_HTML_DATA?a.__SKATE_TEMPLATE_HTML_DATA.content:void 0;b||v(a,"content",x(a));var f;f=a.__SKATE_TEMPLATE_HTML_DATA?a.__SKATE_TEMPLATE_HTML_DATA.content:void 0;var g=f.length;b={childNodes:{get:function(){for(var d=[],j=0;j<g;j++){var h=f[j];h.isDefault||(d=d.concat(r(h.startNode,
h.endNode)))}return d}},firstChild:{get:function(){var d=this.childNodes;return d.length&&d[0]||null}},innerHTML:{get:function(){for(var d="",j=this.childNodes,h=j.length,a=0;a<h;a++)var b=j[a],d=d+(b.outerHTML||b.textContent);return d},set:function(d){for(var d=q(d),a=0;a<g;a++){for(var h=f[a],b=r(h.startNode,h.endNode),c=0;c<b.length;c++){var e=b[c];e.parentNode.removeChild(e)}b=d;if(c=h.selector){for(var c=b.querySelectorAll(c),e=c.length,i=[],n=0;n<e;n++){var o=c[n];o.parentNode===b&&i.push(o)}b=
i}else b=[].slice.call(b.childNodes)||[];for(c=0;c<b.length;c++)h.container.insertBefore(b[c],h.endNode);b.length?t(h):s(h)}}},lastChild:{get:function(){for(var d=g-1;-1<d;d--)if(!f[d].isDefault)return d=this.childNodes,d[d.length-1];return null}},outerHTML:{get:function(){var d=this.tagName.toLowerCase(),a="<"+d,b=this.attributes;if(b)for(var c=b.length,f=0;f<c;f++)var g=b[f],a=a+(" "+g.nodeName+'="'+g.nodeValue+'"');a=a+">"+this.innerHTML;return a+("</"+d+">")}},textContent:{get:function(){for(var d=
"",a=this.childNodes,b=this.childNodes.length,c=0;c<b;c++)d+=a[c].textContent;return d},set:function(d){var a;this.innerHTML="";for(var b=0;b<g;b++){var c=f[b];if(!c.selector){a=c;break}}a&&(d?(t(a),a.container.insertBefore(document.createTextNode(d),a.endNode)):s(a))}},appendChild:{value:function(d){if(d instanceof y)return[].slice.call(d.childNodes).forEach(function(a){this.appendChild(a)}.bind(this)),this;for(var a=0;a<g;a++){var b=f[a],c=b.selector;if(!c||d instanceof window.HTMLElement&&z.call(d,
c)){t(b);b.endNode.parentNode.insertBefore(d,b.endNode);break}}return this}},insertAdjacentHTML:{value:function(d,b){"afterbegin"===d?this.insertBefore(q(b),this.childNodes[0]):"beforeend"===d?this.appendChild(q(b)):a.insertAdjacentHTML(d,b);return this}},insertBefore:{value:function(a,b){if(!b)return this.appendChild(a);if(a instanceof y){var c=a.childNodes;if(c)for(var e=c.length,i=0;i<e;i++)this.insertBefore(c[i],b);return this}c=!1;e=0;a:for(;e<g;e++)for(var i=f[e],k=r(i.startNode,i.endNode),
m=k.length,n=0;n<m;n++){var o=k[n];o===b&&(c=!0);if(c){var l=i.selector;if(!l||z.call(a,l)){o.parentNode.insertBefore(a,o);break a}}}if(!c)throw Error("DOMException 8: The node before which the new node is to be inserted is not a child of this node.");return a}},removeChild:{value:function(a){for(var b=!1,c=0;c<g;c++){var e=f[c];if(e.container===a.parentNode){e.container.removeChild(a);b=!0;break}e.startNode.nextSibling===e.endNode&&s(e)}if(!b)throw Error("DOMException 8: The node in which you are trying to remove is not a child of this node.");
return a}},replaceChild:{value:function(a,b){for(var c=0;c<g;c++){var e=f[c];if(e.container===b.parentNode){e.container.replaceChild(a,b);break}}return this}}};var e={},c;for(c in a)c in b?Object.defineProperty(e,c,b[c]):Object.defineProperty(e,c,B(a,c));return e};window.skateTemplateHtml=k;"function"===typeof l&&l(function(){return k});"object"===typeof i&&(i.exports=k);return i.exports}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-internal-header-create-header', location = 'node_modules/@atlassian/aui/src/js/aui/internal/header/create-header.js' */
("undefined"===typeof window?global:window).__906ea2ee8af7ec57662c322a720a678d=function(){function d(a){return a&&a.__esModule?a:{"default":a}}function k(a){this.element=a;this.$element=(0,f.default)(a);this.index=(0,f.default)("aui-header, .aui-header").index(a);this.$secondaryNav=this.$element.find(".aui-header-secondary .aui-nav").first();this.menuItems=[];this.totalWidth=0;this.rightMostNavItemIndex=this.$moreMenu=void 0;this.$applicationLogo=this.$element.find("#logo");this.primaryButtonsWidth=
this.moreMenuWidth=0;var b=(0,f.default)(this.$element[0].querySelector(".aui-header-primary"));this.$headerFind=function(a){return b.find(a)}}var h={};"use strict";Object.defineProperty(h,"__esModule",{value:!0});var f=d(__307d3e18fd611f85395c67cddeb1fe24),n=d(__5a18a90cc502f556e87c4181f8a6b4ab),o=d(__c6e18cf9266fe56d02f78a6e812f58db),p=d(__d74c881c8f23921c15438d0f30c99f80),j=d(__c1ce1f1e3e613f564fc234ff043570f1),l=d(__f52b7059926ab2bdcd0aee12b4bc782b),m=(0,f.default)(window);k.prototype={init:function(){var a=
this;this.element.setAttribute("data-aui-responsive","true");this.$headerFind(".aui-button").parent().each(function(){a.primaryButtonsWidth+=(0,f.default)(this).outerWidth(!0)});this.$headerFind(".aui-nav > li > a:not(.aui-button)").each(function(){var b=(0,f.default)(this).parent(),g=b.outerWidth(!0);a.totalWidth+=g;a.menuItems.push({$element:b,outerWidth:g})});this.rightMostNavItemIndex=this.menuItems.length-1;m.on("resize",this._resizeHandler=(0,o.default)(function(){a.constructResponsiveDropdown()},
100));var b=this.$applicationLogo.find("img");0!==b.length&&(b.attr("data-aui-responsive-header-index",this.index),b.load(function(){a.constructResponsiveDropdown()}));this.constructResponsiveDropdown();this.$headerFind(".aui-nav").css("width","auto")},destroy:function(){m.off("resize",this._resizeHandler)},calculateAvailableWidth:function(){var a=this.$secondaryNav.is(":visible")?this.$secondaryNav.offset().left:this.$element.outerWidth(),b=this.$applicationLogo.offset().left+this.$applicationLogo.outerWidth(!0)+
this.primaryButtonsWidth;return a-b},showResponsiveDropdown:function(){void 0===this.$moreMenu&&(this.$moreMenu=this.createResponsiveDropdownTrigger());this.$moreMenu.css("display","")},hideResponsiveDropdown:function(){void 0!==this.$moreMenu&&this.$moreMenu.css("display","none")},constructResponsiveDropdown:function(){if(this.menuItems.length){var a;a=this.calculateAvailableWidth(this.$element,this.primaryButtonsWidth);if(a>this.totalWidth)this.showAll();else{this.showResponsiveDropdown();a-=this.moreMenuWidth;
for(var b=-1;0<=a-this.menuItems[b+1].outerWidth;)a-=this.menuItems[b+1].outerWidth,b++;b<this.rightMostNavItemIndex?this.moveToResponsiveDropdown(this.rightMostNavItemIndex-b):this.rightMostNavItemIndex<b&&this.moveOutOfResponsiveDropdown(b-this.rightMostNavItemIndex)}}},createResponsiveDropdownTrigger:function(){var a=document.createElement("li"),b=document.createElement("aui-dropdown-menu");b.id="aui-responsive-header-dropdown-"+this.index;j.default.init(b);var c=document.createElement("aui-section");
c.id="aui-responsive-header-dropdown-list-"+this.index;j.default.init(c);l.default.wrap(b).appendChild(c);c=document.createElement("a");c.setAttribute("class","aui-dropdown2-trigger");c.setAttribute("href","#");c.id=b.id+"-trigger";c.setAttribute("aria-controls",b.id);c.innerHTML=p.default.getText("aui.words.more");a.appendChild(c);a.appendChild(b);0===this.primaryButtonsWidth?this.$headerFind(".aui-nav").append(a):this.$headerFind(".aui-nav > li > .aui-button:first").parent().before(a);this.moreMenuWidth=
(0,f.default)(a).outerWidth(!0);return(0,f.default)(a)},moveOutOfResponsiveDropdown:function(a){if(!(0>=a)){for(var b=(0,f.default)("#aui-responsive-header-dropdown-"+this.index),c=this.rightMostNavItemIndex+a,g=this.rightMostNavItemIndex+1;g<=c;g++){var i=this.menuItems[g].$element,e=i.children("a");e.attr("aria-controls")&&(e=(0,f.default)(document.getElementById(e.attr("aria-controls"))),e.removeClass("aui-dropdown2-sub-menu"),i.append(e));b.find("aui-item-link:first").remove();i.insertBefore(this.$moreMenu)}this.rightMostNavItemIndex+=
a}},moveToResponsiveDropdown:function(a){if(!(0>=a)){for(var b=l.default.wrap(this.$moreMenu[0].querySelector("aui-section")),c=this.rightMostNavItemIndex-a+1,g=this.rightMostNavItemIndex;g>=c;g--){var i=this.menuItems[g].$element,e=i.children("a");j.default.init(e);var d=document.createElement("aui-item-link");d.setAttribute("href",e.attr("href"));if(e.attr("aria-controls")){var h=(0,f.default)(document.getElementById(e.attr("aria-controls")));d.setAttribute("for",e.attr("aria-controls"));h.addClass("aui-dropdown2-sub-menu");
h.appendTo("body")}j.default.init(d);l.default.wrap(d).textContent=e.text();i.detach();b.insertBefore(d,b.firstChild);this.element.dispatchEvent(new n.default("aui-responsive-menu-item-created",{bubbles:!0,detail:{originalItem:i[0],newItem:d}}))}this.rightMostNavItemIndex-=a}},showAll:function(){this.moveOutOfResponsiveDropdown(this.menuItems.length-1-this.rightMostNavItemIndex);this.hideResponsiveDropdown()}};h.default=function(a){var b=a._header;b instanceof k||(b=new k(a),b.init(),a._header=b);
return b};return h=h["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-header', location = 'node_modules/@atlassian/aui/src/js/aui/header.js' */
("undefined"===typeof window?global:window).__3b5a26bdd3080332ee26f12f39993af9=function(){function e(a){return a&&a.__esModule?a:{"default":a}}function f(){(0,g.default)(".aui-header").each(function(){(0,h.default)(this)})}var d={};"use strict";Object.defineProperty(d,"__esModule",{value:!0});var g=e(__307d3e18fd611f85395c67cddeb1fe24),h=e(__906ea2ee8af7ec57662c322a720a678d),b;var a=__c8cfa00f1eba9ac7af89ee3d0d33961d;if(a&&a.__esModule)b=a;else{var c={};if(null!=a)for(b in a)Object.prototype.hasOwnProperty.call(a,
b)&&(c[b]=a[b]);c.default=a;b=c}a=e(__4d02fe17b8e885a34493e34af3d145dd);(0,g.default)(f);c={};c.setup=b.fn(f,"responsiveheader.setup",{removeInVersion:"6.0.0",sinceVersion:"5.8.0",extraInfo:"No need to manually initialise anymore as this is now a web component."});(0,a.default)("responsiveheader",c);d.default=c;return d=d["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-focus-manager', location = 'node_modules/@atlassian/aui/src/js/aui/focus-manager.js' */
("undefined"===typeof window?global:window).__1c9e0b237fd336437964bc9b6dfa74ba=function(){function c(){this._focusTrapStack=[];(0,d.default)(document).on("focusout",{focusTrapStack:this._focusTrapStack},j)}function j(a){var e=a.data.focusTrapStack;if(a.relatedTarget&&0!==e.length){var e=e[e.length-1],g=a.target,a=a.relatedTarget,b=e.find(":aui-tabbable"),c=(0,d.default)(b.first()),b=(0,d.default)(b.last());0===e.has(a).length&&a&&(c.is(g)?b.focus():b.is(g)&&c.focus())}}var f={};"use strict";Object.defineProperty(f,
"__esModule",{value:!0});var b=__307d3e18fd611f85395c67cddeb1fe24,d=b&&b.__esModule?b:{"default":b},b=(b=__4d02fe17b8e885a34493e34af3d145dd)&&b.__esModule?b:{"default":b},h=function(a){return"visible"===d.default.css(a,"visibility")},i=function(a,e){var b=a.nodeName.toLowerCase();if("aui-select"===b)return!0;if("area"===b){var b=a.parentNode,c=b.name,f=(0,d.default)("img[usemap=#"+c+"]").get();return!a.href||!c||"map"!==b.nodeName.toLowerCase()?!1:f&&h(f)}c=/input|select|textarea|button|object/.test(b);
f=a.href||e;return(c?!a.disabled:"a"===b?f:e)&&h(a)};d.default.extend(d.default.expr[":"],{"aui-focusable":function(a){return i(a,!isNaN(d.default.attr(a,"tabindex")))},"aui-tabbable":function(a){var b=d.default.attr(a,"tabindex"),c=isNaN(b);return(c||0<=b)&&i(a,!c)}});c.defaultFocusSelector=":aui-tabbable";c.prototype.enter=function(a){a.data("_aui-focus-restore",(0,d.default)(document.activeElement));if("false"!==a.attr("data-aui-focus")){var b=a.attr("data-aui-focus-selector")||c.defaultFocusSelector;
(a.is(b)?a:a.find(b)).first().focus()}a.is(".aui-dialog2")&&this._focusTrapStack.push(a)};c.prototype.exit=function(a){a.is(".aui-dialog2")&&this._focusTrapStack.pop();var b=document.activeElement;if(a[0]===b||a.has(b).length)(0,d.default)(b).blur();if((b=a.data("_aui-focus-restore"))&&b.length)a.removeData("_aui-focus-restore"),b.focus()};c.global=new c;(0,b.default)("FocusManager",c);f.default=c;return f=f["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-key-code', location = 'node_modules/@atlassian/aui/src/js/aui/key-code.js' */
("undefined"===typeof window?global:window).__509557c937caa8763def39004fcf3193=function(){var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});var a=__4d02fe17b8e885a34493e34af3d145dd,a=a&&a.__esModule?a:{"default":a},c={ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,LEFT_SQUARE_BRACKET:91,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,
NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91};(0,a.default)("keyCode",c);b.default=c;return b=b["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-layer', location = 'node_modules/@atlassian/aui/src/js/aui/layer.js' */
("undefined"===typeof window?global:window).__fe0cd0a7ef176e2ef4e0e105d1ce31f5=function(){function i(a){return a&&a.__esModule?a:{"default":a}}function p(a,b,c){var e=f.default.Event(j+b),b=f.default.Event(k+b),d=new r.default(x+c,{bubbles:!0,cancelable:!0}),c=new r.default(y+c,{bubbles:!0,cancelable:!0});a.trigger(e);a.trigger(b,[a]);a[0].dispatchEvent(d);a[0].dispatchEvent(c);return!e.isDefaultPrevented()&&!b.isDefaultPrevented()&&!d.defaultPrevented&&!c.defaultPrevented}function s(a){this.$el=
(0,f.default)(a||'<div class="aui-layer" aria-hidden="true"></div>');this.$el.addClass("aui-layer")}function t(a){return(0,f.default)('[aria-controls="'+a.attr("id")+'"]')}function u(a,b){for(var c=a.length;c--;)if(b(a[c]))return c;return-1}function g(a,b){return u(a,function(a){return a[0]===b[0]})}function l(a){return u(a,function(a){return e(a).isBlanketed()})}function n(a,b){var c=l(a);b!==c&&(-1<c?(0,q.dim)(!1,a[c].css("z-index")-20):(0,q.undim)())}function h(a,b,c){if(!(0>b))for(var d=a.length-
1;d>=b;d--){var f=e(a[d]);if(c||!f.isPersistent())f._hideLayer(!0),a.splice(d,1)}}function d(){this._stack=[]}function v(a){if(!a.length)return!1;a=document.getElementById(a.attr("aria-controls"));return-1<d.global.indexOf(a)}var o={};"use strict";Object.defineProperty(o,"__esModule",{value:!0});var f=i(__307d3e18fd611f85395c67cddeb1fe24),q=__594942bfcf520d6e5a0843b1cfdd039a,w=i(__1c9e0b237fd336437964bc9b6dfa74ba),z=i(__4d02fe17b8e885a34493e34af3d145dd),A=i(__509557c937caa8763def39004fcf3193),B=i(__e3152236c406a356c24f20f7bfcccf21),
r=i(__5a18a90cc502f556e87c4181f8a6b4ab),j="_aui-internal-layer-",k="_aui-internal-layer-global-",x="aui-layer-",y="aui-",m=(0,f.default)(document);s.prototype={below:function(){return d.global.item(d.global.indexOf(this.$el)-1)},above:function(){return d.global.item(d.global.indexOf(this.$el)+1)},changeSize:function(a,b){this.$el.css("width",a);this.$el.css("height","content"===b?"":b);return this},on:function(a,b){this.$el.on(j+a,b);return this},off:function(a,b){this.$el.off(j+a,b);return this},
show:function(){if(this.isVisible())return this.$el.attr("aria-hidden","false"),this;if(!p(this.$el,"beforeShow","show"))return this;"none"===this.$el.css("display")&&this.$el.css("display","");d.global.push(this.$el);return this},hide:function(){if(!this.isVisible())return this.$el.attr("aria-hidden","true"),this;if(!p(this.$el,"beforeHide","hide"))return this;var a=this,b=this.$el.get(0),c=function(){a.isVisible()||(this.style.display="none")},e=function(a){"opacity"===a.propertyName&&(c.call(b),
b.removeEventListener("transitionend",e))},f=window.getComputedStyle(b).transitionProperty;f&&-1<f.indexOf("opacity")?b.addEventListener("transitionend",e):c.call(b);d.global.popUntil(this.$el);return this},isVisible:function(){return"false"===this.$el.attr("aria-hidden")},remove:function(){this.hide();this.$el.remove();this.$el=null},isBlanketed:function(){return"true"===this.$el.attr("data-aui-blanketed")},isPersistent:function(){var a=this.$el.attr("modal")||this.$el.attr("data-aui-modal"),b=this.$el[0].hasAttribute("persistent");
return"true"===a||b},_hideLayer:function(a){(this.isPersistent()||this.isBlanketed())&&w.default.global.exit(this.$el);a&&p(this.$el,"beforeHide","hide");this.$el.attr("aria-hidden","true");this.$el.css("z-index",this.$el.data("_aui-layer-cached-z-index")||"");this.$el.data("_aui-layer-cached-z-index","");this.$el.trigger(j+"hide");this.$el.trigger(k+"hide",[this.$el])},_showLayer:function(a){this.$el.parent().is("body")||this.$el.appendTo(document.body);this.$el.data("_aui-layer-cached-z-index",
this.$el.css("z-index"));this.$el.css("z-index",a);this.$el.attr("aria-hidden","false");(this.isPersistent()||this.isBlanketed())&&w.default.global.enter(this.$el);this.$el.trigger(j+"show");this.$el.trigger(k+"show",[this.$el])}};var e=(0,B.default)("layer",s);e.on=function(a,b,c){m.on(k+a,b,c);return this};e.off=function(a,b,c){m.off(k+a,b,c);return this};d.prototype={push:function(a){a=a instanceof f.default?a:(0,f.default)(a);if(0<=g(this._stack,a))throw Error("The given element is already an active layer.");
this.popLayersBeside(a);var b=e(a),c;c=this._stack;c.length?(c=parseInt(c[c.length-1].css("z-index"),10),c=(isNaN(c)?0:c)+100):c=0;c=Math.max(3E3,c);b._showLayer(c);b.isBlanketed()&&(0,q.dim)(!1,c-20);this._stack.push(a);return this},popLayersBeside:function(a){a=a instanceof f.default?a:(0,f.default)(a);0<t(a).length?(a=t(a),a=0<a.length?a.closest(".aui-layer"):void 0,a?(a=this.indexOf(a),h(this._stack,++a,!1)):h(this._stack,0,!1)):(a=l(this._stack),h(this._stack,++a,!1))},indexOf:function(a){return g(this._stack,
(0,f.default)(a))},item:function(a){return this._stack[a]},hideAll:function(){this._stack.reverse().forEach(function(a){a=e(a);!a.isBlanketed()&&!a.isPersistent()&&a.hide()});return this},getNextLowerNonPersistentOrBlanketedLayer:function(a){a=a instanceof f.default?a:(0,f.default)(a);a=g(this._stack,a);if(0>a)return null;var b;for(a--;0<=a;){b=this._stack[a];var c=e(b);if(!c.isPersistent()||c.isBlanketed())return b;a--}return null},getNextHigherNonPeristentAndNonBlanketedLayer:function(a){a=a instanceof
f.default?a:(0,f.default)(a);a=g(this._stack,a);if(0>a)return null;var b;for(a++;a<this._stack.length;){b=this._stack[a];var c=e(b);if(!c.isPersistent()&&!c.isBlanketed())return b;a++}return null},popUntil:function(a){var a=a instanceof f.default?a:(0,f.default)(a),b=g(this._stack,a);if(-1===b)return null;var c=l(this._stack);h(this._stack,b+1,e(a).isBlanketed());e(a)._hideLayer();this._stack.splice(b,1);n(this._stack,c);return a},getTopLayer:function(){return!this._stack.length?null:this._stack[this._stack.length-
1]},popTopIfNonPersistent:function(){var a=this.getTopLayer(),b=e(a);return!a||b.isPersistent()?null:this.popUntil(a)},popUntilTopBlanketed:function(){var a=l(this._stack);if(0>a)return null;var b=this._stack[a];if(e(b).isPersistent())return(a=this.getNextHigherNonPeristentAndNonBlanketedLayer(b))?(b=g(this._stack,a),h(this._stack,b,!0),a):null;h(this._stack,a,!0);n(this._stack,a);return b},popUntilTopPersistent:function(){var a=d.global.getTopLayer();if(a){var b=l(this._stack),c=e(a);c.isPersistent()?
c.isBlanketed()||(a=d.global.getNextLowerNonPersistentOrBlanketedLayer(a),c=e(a),a&&!c.isPersistent()&&(a=g(this._stack,a),h(this._stack,a,!0),n(this._stack,b))):(a=g(this._stack,a),h(this._stack,a,!0),n(this._stack,b))}}};m.on("keydown",function(a){a.keyCode===A.default.ESCAPE&&(d.global.popUntilTopPersistent(),a.preventDefault())});m.on("click",".aui-blanket",function(a){d.global.popUntilTopBlanketed()&&a.preventDefault()});m.on("click",function(a){var b=(0,f.default)(a.target);b.closest(".aui-blanket").length||
(a=b.closest("[aria-controls]"),b=b.closest(".aui-layer"),!b.length&&!v(a)?d.global.hideAll():!v(a)&&b.length&&(a=d.global.getNextHigherNonPeristentAndNonBlanketedLayer(b))&&e(a).hide())});d.global=new d;e.Manager=d;(0,z.default)("layer",e);o.default=e;return o=o["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-layer-manager', location = 'node_modules/@atlassian/aui/src/js/aui/layer-manager.js' */
("undefined"===typeof window?global:window).__5530e5d8d41ad2f3690318a3191759ae=function(){var c={};"use strict";Object.defineProperty(c,"__esModule",{value:!0});var b=__4d02fe17b8e885a34493e34af3d145dd,b=b&&b.__esModule?b:{"default":b},a=__fe0cd0a7ef176e2ef4e0e105d1ce31f5,a=a&&a.__esModule?a:{"default":a};(0,b.default)("LayerManager",a.default.Manager);c.default=a.default.Manager;return c=c["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-internal-alignment', location = 'node_modules/@atlassian/aui/src/js/aui/internal/alignment.js' */
("undefined"===typeof window?global:window).__f420c577506564c314d7d5d82088641c=function(){function j(a,h){var b,c,e;b=a.getAttribute(k)||a.getAttribute("data-aui-"+k)||window;"string"===typeof b&&(b=document.querySelector(b));e=b;b=(a.getAttribute(l)||a.getAttribute("data-aui-"+l)||m).split(" ");c=n(b,2);b=c[0];c=c[1];if(!c||"auto"===c){var d=e;c="left";if(!d||d===window||d===document)d=document.documentElement;d&&(d.nodeType&&d.nodeType===Node.ELEMENT_NODE)&&(d=d.getBoundingClientRect(),h.getBoundingClientRect().left>
d.right/2&&(c="right"))}var d=o[b+" "+c]||o[m],i=a.hasAttribute(p)||a.hasAttribute("data-aui-"+p);e=new q.default({enabled:!1,element:a,target:h,attachment:d.el,targetAttachment:d.target,classPrefix:r,constraints:[{to:e===window?"window":e,attachment:!0===i?"none":"together"}]});b=s+b;c=t+c;-1===(" "+a.className+" ").indexOf(" "+b+" ")&&(a.className+=" "+b);-1===(" "+a.className+" ").indexOf(" "+c+" ")&&(a.className+=" "+c);this._auiTether=e}var f={};"use strict";Object.defineProperty(f,"__esModule",
{value:!0});var n;n=function(a,h){if(Array.isArray(a))return a;if(Symbol.iterator in Object(a)){var b=[],c=!0,e=!1,d=void 0;try{for(var i=a[Symbol.iterator](),f;!(c=(f=i.next()).done)&&!(b.push(f.value),h&&b.length===h);c=!0);}catch(g){e=!0,d=g}finally{try{if(!c&&i["return"])i["return"]()}finally{if(e)throw d;}}return b}throw new TypeError("Invalid attempt to destructure non-iterable instance");};var g=__c73084fddb2d02d92156231c79374859,q=g&&g.__esModule?g:{"default":g},l="alignment",p="alignment-static",
k="alignment-container",r="aui-alignment",s="aui-alignment-side-",t="aui-alignment-snap-",m="right middle",o={"top left":{el:"bottom left",target:"top left"},"top center":{el:"bottom center",target:"top center"},"top right":{el:"bottom right",target:"top right"},"right top":{el:"top left",target:"top right"},"right middle":{el:"middle left",target:"middle right"},"right bottom":{el:"bottom left",target:"bottom right"},"bottom left":{el:"top left",target:"bottom left"},"bottom center":{el:"top center",
target:"bottom center"},"bottom right":{el:"top right",target:"bottom right"},"left top":{el:"top right",target:"top left"},"left middle":{el:"middle right",target:"middle left"},"left bottom":{el:"bottom right",target:"bottom left"},"submenu left":{el:"top left",target:"top right"},"submenu right":{el:"top right",target:"top left"}};j.prototype={destroy:function(){this._auiTether.destroy();return this},disable:function(){this._auiTether.disable();return this},enable:function(){this._auiTether.enable();
return this}};f.default=j;return f=f["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-internal-browser', location = 'node_modules/@atlassian/aui/src/js/aui/internal/browser.js' */
("undefined"===typeof window?global:window).__5e80b2d38fa1ffdd67aa3d521738d499=function(){var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.supportsCalc=function(){var a=(0,c.default)('<div style="height: 10px; height: -webkit-calc(20px + 0); height: calc(20px);"></div>'),b=20===a.appendTo(document.documentElement).height();a.remove();return b};a.supportsRequestAnimationFrame=function(){return!!window.requestAnimationFrame};a.supportsVoiceOver=function(){return d};a.supportsNewMouseEvent=
function(){try{new MouseEvent("click")}catch(a){return!1}return!0};var b=__307d3e18fd611f85395c67cddeb1fe24,c=b&&b.__esModule?b:{"default":b},d=/Mac OS X/.test(navigator.userAgent);return a}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-internal-state', location = 'node_modules/@atlassian/aui/src/js/aui/internal/state.js' */
("undefined"===typeof window?global:window).__fd7d82ce22cd33cac1609667ce8040f9=function(){var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default=function(b){return{set:function(a,c){void 0===b._state&&(b._state={});b._state[a]=c},get:function(a){if(b._state)return b._state[a]}}};return a=a["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-dropdown2', location = 'node_modules/@atlassian/aui/src/js/aui/dropdown2.js' */
("undefined"===typeof window?global:window).__05701638a79b5b92cc62cfe475ac143b=function(){function v(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(b[e]=a[e]);b.default=a;return b}function i(a){return a&&a.__esModule?a:{"default":a}}function w(a){return(0,c.default)(a).is('.checked, .aui-dropdown2-checked, [aria-checked="true"]')}function m(a,b){var e=a._triggeringElement||document.querySelector('[aria-controls="'+a.id+'"]');e&&b(e)}function r(a,
b){var e=(0,c.default)(a);b?(e.attr("aria-expanded","true"),e.addClass("active aui-dropdown2-active")):(e.attr("aria-expanded","false"),e.removeClass("active aui-dropdown2-active"))}function x(a){(0,g.default)(a).set("loading-state",y);(0,g.default)(a).set("hasErrorBeenShown",a.isVisible());j.default.wrap(a).innerHTML='\n        <div class="aui-message aui-message-error aui-dropdown-error">\n            <p>'+"Error loading dropdown"+"</p>\n        </div>\n    "}function z(a){if(a.src&&
(0,g.default)(a).get("loading-state")!==A)(0,g.default)(a).set("loading-state",A),(0,g.default)(a).set("hasErrorBeenShown",!1),m(a,function(a){a.setAttribute("aria-busy","true")}),j.default.wrap(a).innerHTML='\n        <div class="aui-dropdown-loading">\n            <span class="spinner"></span> '+"Loading dropdown"+"\n        </div>\n    ",(0,c.default)(a).find(".spinner").spin(),c.default.ajax(a.src).done(function(b,e,h){200===h.status?((0,g.default)(a).set("loading-state",
F),j.default.wrap(a).innerHTML=b.map(function(a){var b=a.items.map(function(a){function b(e){return a[e]?e+' ="true"':""}var e="aui-item-"+a.type;return"\n                <"+e+" "+(a["for"]?'for="'+a["for"]+'"':"")+" "+(a.href?'href="'+a.href+'"':"")+" "+b("interactive")+"\n                    "+b("checked")+" "+b("disabled")+" "+b("hidden")+">\n                    "+a.content+"\n                </"+e+">"}).join("");return"\n            <aui-section "+(a.label?'label="'+a.label+'"':"")+">\n                "+
b+"\n            </aui-section>"}).join("\n"),d.default.init(a)):x(a)}).fail(function(){x(a)}).always(function(){m(a,function(a){a.setAttribute("aria-busy","false")})})}function B(a,b){return(0,c.default)(a).find('> ul > li, > .aui-dropdown2-section > ul > li, > div[role] > .aui-dropdown2-section > div[role="group"] > ul[role] > li[role], aui-item-link, aui-item-checkbox, aui-item-radio').filter(b).children('a, button, [role="checkbox"], [role="menuitemcheckbox"], [role="radio"], [role="menuitemradio"]')}
function q(a){return B(a,function(){return-1===this.className.indexOf("hidden")&&!this.hasAttribute("hidden")})}function C(a){var b=(0,c.default)(a);b.addClass("aui-dropdown2");(0,s.supportsVoiceOver)()&&b.find('> div[role="application"]').attr("role","presentation");a.hasAttribute("data-container")&&(b.attr("data-aui-alignment-container",b.attr("data-container")),b.removeAttr("data-container"));(0,k.default)(a);a.addEventListener("aui-layer-show",function(){(0,c.default)(a).trigger("aui-dropdown2-show");
var b=(0,c.default)(a),h=b.find(".hidden").addClass("aui-dropdown2-hidden"),l=b.find(".disabled").addClass("aui-dropdown2-disabled"),d=b.find(".interactive").addClass("aui-dropdown2-interactive");a._syncClasses=function(){h.removeClass("aui-dropdown2-hidden");l.removeClass("aui-dropdown2-disabled");d.removeClass("aui-dropdown2-interactive")};B(this,function(){return true}).each(function(){var a=(0,c.default)(this);a.attr("tabindex","-1");(a.hasClass("aui-dropdown2-disabled")||a.parent().hasClass("aui-dropdown2-hidden"))&&
a.attr("aria-disabled",true)});m(a,function(b){r(b,true);b=b.getAttribute("data-dropdown2-hide-location");b=document.getElementById(b)||a.parentNode;a._returnTo=b})});a.addEventListener("aui-layer-hide",function(){(0,c.default)(a).trigger("aui-dropdown2-hide");if(a._syncClasses){a._syncClasses();delete a._syncClasses}if(a._auiAlignment){a._auiAlignment.disable();a._auiAlignment.destroy()}a._returnTo&&a.parentNode&&a.parentNode!==a._returnTo&&a._returnTo.appendChild(a);(0,c.default)(a).removeClass("aui-dropdown2-in-buttons");
q(a).removeClass("active aui-dropdown2-active");m(a,function(a){var b=n===true;n=false;if(b){a.focus();r(a,a.hasSubmenu&&a.hasSubmenu())}else r(a,false)});delete a.isSubmenu;a._triggeringElement=null});b=(0,c.default)(a);b.on("keydown",function(b){if(b.keyCode===f.default.DOWN){a.focusNext();b.preventDefault()}else if(b.keyCode===f.default.UP){a.focusPrevious();b.preventDefault()}else if(b.keyCode===f.default.LEFT){if(a.isSubmenu){n=true;a.hide(b);b.preventDefault()}}else if(b.keyCode===f.default.ESCAPE)n=
true;else if(b.keyCode===f.default.TAB){n=true;a.hide(b)}});b.on("click keydown",'a, button, [role="menuitem"], [role="menuitemcheckbox"], [role="checkbox"], [role="menuitemradio"], [role="radio"]',function(b){var h=b.currentTarget,h=(0,c.default)(h),l=b.keyCode,d=l===f.default.ENTER,l=l===f.default.SPACE;if((!d||!h.is("a[href], button"))&&(b.type==="click"||d||l)){h=(0,c.default)(b.currentTarget);if(h.attr("aria-disabled")==="true")b.preventDefault();else if((!b.currentTarget.hasSubmenu||!b.currentTarget.hasSubmenu())&&
!h.is(".aui-dropdown2-interactive")){h=a;do{d=(0,k.default)(h);h=(0,k.default)(h).below();d.$el.is(".aui-dropdown2")&&d.hide(b)}while(h)}}});b.on("mouseenter",'a, button, [role="menuitem"], [role="menuitemcheckbox"], [role="checkbox"], [role="menuitemradio"], [role="radio"]',function(b){var c=b.currentTarget,c=c.hasSubmenu&&c.hasSubmenu();if(!b.isDefaultPrevented()&&!c)(b=(0,k.default)(a).above())&&(0,k.default)(b).hide()});a.hide();(0,c.default)(a).delegate(".aui-dropdown2-checkbox:not(.disabled):not(.aui-dropdown2-disabled)",
"click keydown",function(a){if((a.type==="click"||a.keyCode===f.default.ENTER||a.keyCode===f.default.SPACE)&&!a.isDefaultPrevented()){this.isInteractive()&&a.preventDefault();this.isEnabled()&&(this.isChecked()?this.uncheck():this.check())}});(0,c.default)(a).delegate(".aui-dropdown2-radio:not(.checked):not(.aui-dropdown2-checked):not(.disabled):not(.aui-dropdown2-disabled)","click keydown",function(a){if((a.type==="click"||a.keyCode===f.default.ENTER||a.keyCode===f.default.SPACE)&&!a.isDefaultPrevented()){this.isInteractive()&&
a.preventDefault();a=(0,c.default)(this);if(this.isEnabled()&&this.isChecked()===false){a.closest("ul,[role=group]").find(".aui-dropdown2-checked").not(this).each(function(){this.uncheck()});this.check()}}})}"use strict";__d74c881c8f23921c15438d0f30c99f80;var c=i(__307d3e18fd611f85395c67cddeb1fe24),j=i(__f52b7059926ab2bdcd0aee12b4bc782b),G=v(__c8cfa00f1eba9ac7af89ee3d0d33961d),H=v(__cf890abdf040e0993fb71f2f839bc972),o=__c6e18cf9266fe56d02f78a6e812f58db,s=__5e80b2d38fa1ffdd67aa3d521738d499,I=i(__f420c577506564c314d7d5d82088641c),
D=i(__5a18a90cc502f556e87c4181f8a6b4ab),f=i(__509557c937caa8763def39004fcf3193),k=i(__fe0cd0a7ef176e2ef4e0e105d1ce31f5),g=i(__fd7d82ce22cd33cac1609667ce8040f9),d=i(__c1ce1f1e3e613f564fc234ff043570f1),A="loading",y="error",F="success";(0,d.default)("aui-dropdown2-trigger",{type:d.default.type.CLASSNAME,created:function(a){function b(b){b.preventDefault();if(a.isEnabled()){var d=document.getElementById(e),f=(0,c.default)(a);f.parent().hasClass("aui-buttons")&&d.classList.add("aui-dropdown2-in-buttons");
f.parents().hasClass("aui-header")&&d.classList.add("aui-dropdown2-in-header");d.toggle(b);d.isSubmenu=a.hasSubmenu();return d}}var e=a.getAttribute("aria-controls");e||((e=a.getAttribute("aria-owns"))?(a.removeAttribute("aria-owns"),a.setAttribute("aria-controls",e)):H.error('Dropdown triggers need either a "aria-owns" or "aria-controls" attribute'));a.setAttribute("aria-haspopup",!0);a.setAttribute("aria-expanded",!1);"A"===a.nodeName&&!a.href&&a.setAttribute("href","#"+e);(0,c.default)(a).on("aui-button-invoke",
b).on("click",b).on("keydown",function(c){var e=c.keyCode===f.default.ENTER||c.keyCode===f.default.SPACE,d=c.keyCode===f.default.RIGHT&&a.hasSubmenu(),g=(c.keyCode===f.default.UP||c.keyCode===f.default.DOWN)&&!a.hasSubmenu();if(e||d||g)(c=b(c))&&c.focusItem(0)}).on("mouseenter",function(b){b.preventDefault();if(a.isEnabled()){var c=document.getElementById(e),d=(0,g.default)(c).get("loading-state")==="unloaded",f=(0,g.default)(c).get("hasErrorBeenShown");(d||f&&!c.isVisible())&&z(c);if(a.hasSubmenu()){c.show(b);
c.isSubmenu=a.hasSubmenu()}return c}})},prototype:{disable:function(){this.setAttribute("aria-disabled","true")},enable:function(){this.setAttribute("aria-disabled","false")},isEnabled:function(){return"true"!==this.getAttribute("aria-disabled")},hasSubmenu:function(){return-1!==(this.className||"").split(/\s+/).indexOf("aui-dropdown2-sub-trigger")}}});(0,c.default)(document).on("mousedown",".aui-dropdown2-trigger",function(){this.hasAttribute("resolved")||(d.default.init(this),G.getMessageLogger("Dropdown2 lazy initialisation",
{removeInVersion:"6.0.0",alternativeName:"initialisation on DOM insertion",sinceVersion:"5.8.0",extraInfo:"Dropdown2 triggers should have all necessary attributes on DOM insertion",deprecationType:"JS"})())});(0,d.default)("aui-dropdown2-sub-trigger",{type:d.default.type.CLASSNAME,created:function(a){a.className+=" aui-dropdown2-trigger";d.default.init(a)}});(0,c.default)(document).on("mouseenter",".aui-dropdown2-trigger-group a, .aui-dropdown2-trigger-group button",function(a){var b=(0,c.default)(a.currentTarget);
if(!b.is(".aui-dropdown2-active")&&!b.closest(".aui-dropdown2").size()){var d=b.closest(".aui-dropdown2-trigger-group"),h=d.find(".aui-dropdown2-active");h.size()&&b.is(".aui-dropdown2-trigger")&&(h.blur(),b.trigger("aui-button-invoke"),a.preventDefault());a=d.find(":focus");a.size()&&b.is(".aui-dropdown2-trigger")&&a.blur()}});var n=!1;(0,c.default)(window).on("resize",(0,o.debounceImmediate)(function(){(0,c.default)(".aui-dropdown2").each(function(a,b){d.default.init(b);b.isVisible()&&b.hide()})},
1E3));var o={toggle:function(a){this.isVisible()?this.hide(a):this.show(a)},show:function(a){a&&(a.currentTarget&&a.currentTarget.classList.contains("aui-dropdown2-trigger"))&&(this._triggeringElement=a.currentTarget);(0,k.default)(this).show();var b=this;m(b,function(a){var d=a&&a.hasSubmenu&&a.hasSubmenu(),f=b.getAttribute("data-aui-alignment")==="submenu auto";if(!d&&f){var g=(0,c.default)(b),i=g.data("previous-data-aui-alignment");i?b.setAttribute("data-aui-alignment",i):b.removeAttribute("data-aui-alignment");
g.removeData("previous-data-aui-alignment");g.data("had-data-aui-alignment-static")||b.removeAttribute("data-aui-alignment-static");g.removeData("had-data-aui-alignment-static")}g=b.hasAttribute("data-aui-alignment");if(d&&!f){d=(0,c.default)(b);b.hasAttribute("data-aui-alignment")&&d.data("previous-data-aui-alignment",b.getAttribute("data-aui-alignment"));d.data("had-data-aui-alignment-static",b.hasAttribute("data-aui-alignment-static"));b.setAttribute("data-aui-alignment","submenu auto");b.setAttribute("data-aui-alignment-static",
true)}else if(!g){b.setAttribute("data-aui-alignment","bottom auto");b.setAttribute("data-aui-alignment-static",true)}b._auiAlignment&&b._auiAlignment.destroy();b._auiAlignment=new I.default(b,a);b._auiAlignment.enable()});return this},hide:function(){(0,k.default)(this).hide();return this},focusNext:function(){var a=q(this),b=document.activeElement;a.last()[0]!==b&&(b=a.toArray().indexOf(b),this.focusItem(a.get(b+1)))},focusPrevious:function(){var a=q(this),b=document.activeElement;a.first()[0]!==
b&&(b=a.toArray().indexOf(b),this.focusItem(a.get(b-1)))},focusItem:function(a){var b=q(this);"number"===typeof a&&(a=b.get(a));a=(0,c.default)(a);a.focus();b.removeClass("active aui-dropdown2-active");a.addClass("active aui-dropdown2-active")},isVisible:function(){return(0,k.default)(this).isVisible()}},p={created:function(a){a=a.children[0];a.setAttribute("aria-disabled","true");a.className+=" aui-dropdown2-disabled"},removed:function(a){a=a.children[0];a.setAttribute("aria-disabled","false");(0,
c.default)(a).removeClass("aui-dropdown2-disabled")}},t={created:function(a){a.children[0].className+=" aui-dropdown2-interactive"},removed:function(a){a=a.children[0];(0,c.default)(a).removeClass("aui-dropdown2-interactive")}},E={created:function(a){var b=a.children[0];(0,c.default)(b).addClass("checked aui-dropdown2-checked");b.setAttribute("aria-checked",!0);a.dispatchEvent(new D.default("change",{bubbles:!0}))},removed:function(a){var b=a.children[0];(0,c.default)(b).removeClass("checked aui-dropdown2-checked");
b.setAttribute("aria-checked",!1);a.dispatchEvent(new D.default("change",{bubbles:!0}))}},u={created:function(a){p.created(a)},removed:function(a){p.removed(a)}};(0,d.default)("aui-item-link",{template:(0,j.default)('<a role="menuitem" tabindex="-1"><content></content></a>'),attributes:{disabled:p,interactive:t,hidden:u,href:{created:function(a,b){a.children[0].setAttribute("href",b.newValue)},updated:function(a,b){a.children[0].setAttribute("href",b.newValue)},removed:function(a){a.children[0].removeAttribute("href")}},
"for":{created:function(a){var b=a.children[0];b.setAttribute("aria-controls",a.getAttribute("for"));(0,c.default)(b).addClass("aui-dropdown2-sub-trigger")},updated:function(a){a.children[0].setAttribute("aria-controls",a.getAttribute("for"))},removed:function(a){a=a.children[0];a.removeAttribute("aria-controls");(0,c.default)(a).removeClass("aui-dropdown2-sub-trigger")}}}});(0,d.default)("aui-item-checkbox",{template:(0,j.default)('<span role="checkbox" class="aui-dropdown2-checkbox" tabindex="-1"><content></content></span>'),
attributes:{disabled:p,interactive:t,checked:E,hidden:u}});(0,d.default)("aui-item-radio",{template:(0,j.default)('<span role="radio" class="aui-dropdown2-radio" tabindex="-1"><content></content></span>'),attributes:{disabled:p,interactive:t,checked:E,hidden:u}});(0,d.default)("aui-section",{template:(0,j.default)('\n        <strong aria-role="presentation" class="aui-dropdown2-heading"></strong>\n        <div role="group">\n            <content></content>\n        </div>\n    '),attributes:{label:function(a,
b){var c=a.children[1];a.children[0].textContent=b.newValue;c.setAttribute("aria-label",b.newValue)}},created:function(a){a.className+=" aui-dropdown2-section";a.setAttribute("role","presentation")}});(0,d.default)("aui-dropdown-menu",{template:(0,j.default)('\n        <div role="application">\n            <content></content>\n        </div>\n    '),created:function(a){a.setAttribute("role","menu");a.className="aui-dropdown2 aui-style-default aui-layer";(0,g.default)(a).set("loading-state","unloaded");
d.default.init(a)},attributes:{src:{}},prototype:o,events:{"aui-layer-show":function(a){var b="unloaded"===(0,g.default)(a).get("loading-state"),c=(0,g.default)(a).get("hasErrorBeenShown");(b||c)&&z(a);if((0,g.default)(a).get("loading-state")===y)(0,g.default)(a).set("hasErrorBeenShown",!0)}}});(0,d.default)("aui-dropdown2",{type:d.default.type.CLASSNAME,created:C,prototype:o});(0,d.default)("data-aui-dropdown2",{type:d.default.type.ATTRIBUTE,created:C,prototype:o});(0,d.default)("aui-dropdown2-checkbox",
{type:d.default.type.CLASSNAME,created:function(a){var b=w(a);b&&(0,c.default)(a).addClass("checked aui-dropdown2-checked");a.setAttribute("aria-checked",b);a.setAttribute("tabindex","0");(0,s.supportsVoiceOver)()&&a.setAttribute("role","checkbox")},prototype:{isEnabled:function(){return!(null!==this.getAttribute("aria-disabled")&&"true"===this.getAttribute("aria-disabled"))},isChecked:function(){return null!==this.getAttribute("aria-checked")&&"true"===this.getAttribute("aria-checked")},isInteractive:function(){return(0,
c.default)(this).hasClass("aui-dropdown2-interactive")},uncheck:function(){"aui-item-checkbox"===this.parentNode.tagName.toLowerCase()&&this.parentNode.removeAttribute("checked");this.setAttribute("aria-checked","false");(0,c.default)(this).removeClass("checked aui-dropdown2-checked");(0,c.default)(this).trigger("aui-dropdown2-item-uncheck")},check:function(){"aui-item-checkbox"===this.parentNode.tagName.toLowerCase()&&this.parentNode.setAttribute("checked","");this.setAttribute("aria-checked","true");
(0,c.default)(this).addClass("checked aui-dropdown2-checked");(0,c.default)(this).trigger("aui-dropdown2-item-check")}}});(0,d.default)("aui-dropdown2-radio",{type:d.default.type.CLASSNAME,created:function(a){var b=w(a);b&&(0,c.default)(a).addClass("checked aui-dropdown2-checked");a.setAttribute("aria-checked",b);a.setAttribute("tabindex","0");(0,s.supportsVoiceOver)()&&a.setAttribute("role","radio")},prototype:{isEnabled:function(){return!(null!==this.getAttribute("aria-disabled")&&"true"===this.getAttribute("aria-disabled"))},
isChecked:function(){return null!==this.getAttribute("aria-checked")&&"true"===this.getAttribute("aria-checked")},isInteractive:function(){return(0,c.default)(this).hasClass("aui-dropdown2-interactive")},uncheck:function(){"aui-item-radio"===this.parentNode.tagName.toLowerCase()&&this.parentNode.removeAttribute("checked");this.setAttribute("aria-checked","false");(0,c.default)(this).removeClass("checked aui-dropdown2-checked");(0,c.default)(this).trigger("aui-dropdown2-item-uncheck")},check:function(){"aui-item-radio"===
this.parentNode.tagName.toLowerCase()&&this.parentNode.setAttribute("checked","");this.setAttribute("aria-checked","true");(0,c.default)(this).addClass("checked aui-dropdown2-checked");(0,c.default)(this).trigger("aui-dropdown2-item-check")}}});return{}}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-fancy-file-input-2.0.1-dist-fancy-file-input', location = 'node_modules/fancy-file-input/dist/fancy-file-input.js' */
("undefined"===typeof window?global:window).__e978d2e4e1d10e62ed13103fb5b406fc=function(){var f={exports:{}},g=f.exports,m={module:f,exports:g,jquery:__307d3e18fd611f85395c67cddeb1fe24,jquery:__307d3e18fd611f85395c67cddeb1fe24},d;d=function(b,a,j){var d=("undefined"===typeof window?global:window).define,c,e,j=[j,a,b].filter(function(a){return"function"===typeof a})[0],a=[a,b,[]].filter(Array.isArray)[0];c=j.apply(null,a.map(function(a){return m[a]}));e=typeof c;"function"===typeof d&&d("string"===
typeof b?b:"__e978d2e4e1d10e62ed13103fb5b406fc",a,j);"string"===e?c=String(c):"number"===e?c=Number(c):"boolean"===e&&(c=Boolean(c));void 0!==c&&(g=f.exports=c)};d.amd=!0;var l=this,i=function(b){function a(k,h){var c=b(k).data("FancyFileInput");if(c)return c;h=b.extend({},a.defaults,h);this.el=k;this.$el=b(k);this.$label=this.createLabel(h.buttonText);this._addLabelText();this.$clearButton=b("<button>",{text:this.$label.attr("data-ffi-clearButtonText")||h.clearButtonText,"class":"ffi-clear",type:"button",
tabindex:"-1"});this.multipleFileTextPattern=this.$label.attr("data-ffi-multipleFileTextPattern")||h.multipleFileTextPattern;this._eventNamespace=".ffi";this.CLASSES={disabled:"is-disabled",focused:"is-focused",active:"is-active",valid:"is-valid",invalid:"is-invalid"};this[this.isDisabled()?"disable":"enable"]();this.isFocused=!1}var d=/^.*[\\\/]/,f=/\{0\}/gi,c,e=3,g=document.createElement("div"),i=g.getElementsByTagName("i");do g.innerHTML="<\!--[if gt IE "+ ++e+"]><i></i><![endif]--\>";while(i[0]);
c=4<e?e:document.documentMode;a.defaults={buttonText:"Browse\u2026",clearButtonText:"Clear",multipleFileTextPattern:"{0} files"};a.prototype._addLabelText=function(){var a=b('label[for="'+this.el.id+'"]');a.length&&this.$el.attr("aria-label",a.text())};a.prototype.createLabel=function(a){var c=this.$el.parent(".ffi[data-ffi-button-text]");c.length||(c=this.$el.wrap(b("<label>",{"class":"ffi","data-ffi-button-text":a})).parent());return c};a.prototype.isDisabled=function(){return this.$el.is(":disabled")};
a.prototype.formatMultipleFileText=function(a){return this.multipleFileTextPattern.replace(f,a)};a.prototype.bindEvents=function(){this.$el.on("invalid"+this._eventNamespace,b.proxy(this.checkValidity,this)).on("change"+this._eventNamespace,b.proxy(this.change,this)).on("keydown"+this._eventNamespace,b.proxy(this.keydown,this)).on("mousedown"+this._eventNamespace,b.proxy(this.mousedown,this)).on("mouseup"+this._eventNamespace,b.proxy(this.mouseup,this)).on("focus"+this._eventNamespace,b.proxy(this.focus,
this)).on("blur"+this._eventNamespace,b.proxy(this.blur,this));this.$clearButton.on("click"+this._eventNamespace,b.proxy(this.clear,this))};a.prototype.unbindEvents=function(){this.$el.off(this._eventNamespace);this.$clearButton.off(this._eventNamespace)};a.prototype.fireEvent=function(a){this.$el.trigger(a+this._eventNamespace)};a.prototype.enable=function(){this.bindEvents();this.$el.prop("disabled",!1);this.$label.removeClass(this.CLASSES.disabled)};a.prototype.disable=function(){this.unbindEvents();
this.$el.prop("disabled",!0);this.$label.addClass(this.CLASSES.disabled)};a.prototype.clear=function(){this.$el.wrap("<form>").closest("form").get(0).reset();this.$el.unwrap();this.el.value="";this.change();return!1};a.prototype.focus=function(){var a=this;this.$label.addClass(this.CLASSES.focused);c&&!this.isFocused&&(this.isFocused=!0,setTimeout(function(){a.$el.blur();a.$el.focus()},0))};a.prototype.blur=function(){if(!c||!this.isFocused)this.$label.removeClass(this.CLASSES.focused),this.isFocused=
!1};a.prototype.mousedown=function(){this.$label.addClass(this.CLASSES.active)};a.prototype.mouseup=function(){this.$label.removeClass(this.CLASSES.active)};a.prototype.keydown=function(a){var b=a.which;if(8===b||46===b)this.clear(),a.preventDefault();if(c&&9===b){var d=this;this.isFocused=!1;this.$el.prop("disabled",!0);setTimeout(function(){d.$el.prop("disabled",!1).blur()},0)}};a.prototype.checkValidity=function(){if(this.el.required){var a=this.$el.is(":invalid");this.$label.toggleClass(this.CLASSES.invalid,
a).toggleClass(this.CLASSES.valid,!a)}};a.prototype.change=function(){var a,b="";this.checkValidity();a=this.el.multiple&&1<this.el.files.length?this.formatMultipleFileText(this.el.files.length):this.el.value;a.length?(b=a.replace(d,""),this.$clearButton.appendTo(this.$label)):this.$clearButton.detach();this.$el.focus();this.setFieldText(b);this.fireEvent("value-changed")};a.prototype.setFieldText=function(a){a.length?(this.$label.attr("data-ffi-value",a),this.fireEvent("value-added")):(this.$label.removeAttr("data-ffi-value"),
this.fireEvent("value-cleared"))};b.fn.fancyFileInput=function(c){return this.each(function(){var d=new a(this,c);b(this).data("FancyFileInput",d)})};return a};"function"===typeof d&&d.amd?d(["jquery"],function(b){return l.FancyFileInput=i(b)}):"object"===typeof g?f.exports=i(__307d3e18fd611f85395c67cddeb1fe24):l.FancyFileInput=i(jQuery);return f.exports}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-src-js-aui-fancy-file-input', location = 'src/js/aui/fancy-file-input.js' */
("undefined"===typeof window?global:window).__84e1fe9bfd01961fdb8386c0cdd32066=function(){var a={};Object.defineProperty(a,"__esModule",{value:!0});var b=__e978d2e4e1d10e62ed13103fb5b406fc;a.default=(b&&b.__esModule?b:{"default":b}).default;return a=a["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:hotkeys', location = 'node_modules/@atlassian/aui/src/js/jquery/jquery.hotkeys.js' */
("undefined"===typeof window?global:window).__9d8814c2d651791325671e2fd4ff2ade=function(){var a=jQuery,c=function(a){this.num=0;this.timer=0<a?a:!1},k=function(h){if(a.isPlainObject(h.data)||a.isArray(h.data)||"string"===typeof h.data){var i=h.handler,g={timer:700,combo:[]},b=h.data;"string"===typeof b?g.combo=[b]:a.isArray(b)?g.combo=b:a.extend(g,b);g.combo=a.map(g.combo,function(a){return a.toLowerCase()});h.index=new c(g.timer);h.handler=function(e){if(!(this!==e.target&&/textarea|select|input/i.test(e.target.nodeName))){var d=
"keypress"!==e.type?a.hotkeys.specialKeys[e.which]:null,b=String.fromCharCode(e.which).toLowerCase(),f="",c={};e.altKey&&"alt"!==d&&(f+="alt+");e.ctrlKey&&"ctrl"!==d&&(f+="ctrl+");e.metaKey&&(!e.ctrlKey&&"meta"!==d)&&(f+="meta+");e.shiftKey&&"shift"!==d&&(f+="shift+");e.metaKey&&"["===b&&(b=null);d&&(c[f+d]=!0);b&&(c[f+b]=!0);/shift+/.test(f)&&(c[f.replace("shift+","")+a.hotkeys.shiftNums[d||b]]=!0);d=h.index;b=g.combo;if(j(b[d.val()],c)){if(d.val()===b.length-1)return d.reset(),i.apply(this,arguments);
d.inc()}else d.reset(),j(b[0],c)&&d.inc()}}}},j=function(a,c){for(var g=a.split(" "),b=0,e=g.length;b<e;b++)if(c[g[b]])return!0;return!1};a.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",91:"meta",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",
111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",188:",",190:".",191:"/",224:"meta",219:"[",221:"]"},keypressKeys:["<",">","?"],shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(","0":")","-":"_","=":"+",";":":","'":'"',",":"<",".":">","/":"?","\\":"|"}};a.each(a.hotkeys.keypressKeys,function(c,i){a.hotkeys.shiftNums[i]=i});c.prototype.val=function(){return this.num};c.prototype.inc=
function(){this.timer&&(clearTimeout(this.timeout),this.timeout=setTimeout(a.proxy(c.prototype.reset,this),this.timer));this.num++};c.prototype.reset=function(){this.timer&&clearTimeout(this.timeout);this.num=0};a.each(["keydown","keyup","keypress"],function(){a.event.special[this]={add:k}});return{}}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-event', location = 'node_modules/@atlassian/aui/src/js/aui/event.js' */
("undefined"===typeof window?global:window).__bf6c7c62de0eb613e0ab12d56d9a6197=function(){function g(a,b,c){try{return"function"===typeof c?(0,f.default)(window).bind(a,b,c):(0,f.default)(window).bind(a,b)}catch(e){d.log("error while binding: "+e.message)}}function h(a,b){try{return(0,f.default)(window).unbind(a,b)}catch(c){d.log("error while unbinding: "+c.message)}}function i(a,b){try{return(0,f.default)(window).trigger(a,b)}catch(c){d.log("error while triggering: "+c.message)}}var c={};"use strict";
Object.defineProperty(c,"__esModule",{value:!0});c.trigger=c.unbind=c.bind=void 0;var a=__307d3e18fd611f85395c67cddeb1fe24,f=a&&a.__esModule?a:{"default":a},d;if((a=__cf890abdf040e0993fb71f2f839bc972)&&a.__esModule)d=a;else{var e={};if(null!=a)for(var b in a)Object.prototype.hasOwnProperty.call(a,b)&&(e[b]=a[b]);e.default=a;d=e}b=(b=__4d02fe17b8e885a34493e34af3d145dd)&&b.__esModule?b:{"default":b};(0,b.default)("bind",g);(0,b.default)("trigger",i);(0,b.default)("unbind",h);c.bind=g;c.unbind=h;c.trigger=
i;return c}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-dialog', location = 'node_modules/@atlassian/aui/src/js/aui/dialog.js' */
("undefined"===typeof window?global:window).__8eca5e5171c0c22be18ea931ed65c747=function(){function t(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b.default=a;return b}function r(a){return a&&a.__esModule?a:{"default":a}}function p(a,b,c,d){if("object"!=("undefined"===typeof a?"undefined":y(a)))a={width:a,height:b,id:c},a=h.default.extend({},a,d);var a=h.default.extend({},{width:800,height:600,closeOnOutsideClick:!1,keypressListener:function(a){27===
a.keyCode&&e.is(":visible")&&g.hide()}},a),e=(0,j.default)("div").addClass("aui-popup");a.id&&e.attr("id",a.id);var k=3E3;(0,h.default)(".aui-dialog").each(function(){var a=(0,h.default)(this);k=a.css("z-index")>k?a.css("z-index"):k});var z=function i(b,c){a.width=b=b||a.width;a.height=c=c||a.height;e.css({marginTop:-Math.round(c/2)+"px",marginLeft:-Math.round(b/2)+"px",width:b,height:c,"z-index":parseInt(k,10)+2});return i}(a.width,a.height);(0,h.default)("body").append(e);e.hide();(0,A.enable)(e);
var f=(0,h.default)(".aui-blanket"),q=function(a,b){var c=(0,h.default)(a,b);return c.length?(c.focus(),!0):!1},g={changeSize:function(b,c){(b&&b!=a.width||c&&c!=a.height)&&z(b,c);this.show()},show:function(){var b=function(){(0,h.default)(document).off("keydown",a.keypressListener).on("keydown",a.keypressListener);(0,u.dim)();f=(0,h.default)(".aui-blanket");0!=f.size()&&a.closeOnOutsideClick&&f.click(function(){e.is(":visible")&&g.hide()});e.show();p.current=this;var b=e;if(0===(0,h.default)(".dialog-page-body",
b).find(":focus").length)if(a.focusSelector)q(a.focusSelector,b);else if(!q(":input:visible:enabled:first",(0,h.default)(".dialog-page-body",b)))if(!q(":input:visible:enabled:first",(0,h.default)(".dialog-button-panel",b)))q(":input:visible:enabled:first",(0,h.default)(".dialog-page-menu",b));(0,h.default)(document).trigger("showLayer",["popup",this])};b.call(this);this.show=b},hide:function(){(0,h.default)(document).unbind("keydown",a.keypressListener);f.unbind();this.element.hide();if(0==(0,h.default)(".aui-dialog:visible").size())(0,
u.undim)();var b=document.activeElement;this.element.has(b).length&&b.blur();(0,h.default)(document).trigger("hideLayer",["popup",this]);p.current=null;this.enable()},element:e,remove:function(){e.remove();this.element=null},disable:function(){this.disabled||(this.popupBlanket=(0,h.default)("<div class='dialog-blanket'> </div>").css({height:e.height(),width:e.width()}),e.append(this.popupBlanket),this.disabled=!0)},enable:function(){this.disabled&&(this.disabled=!1,this.popupBlanket.remove(),this.popupBlanket=
null)}};return g}var m={};"use strict";Object.defineProperty(m,"__esModule",{value:!0});m.popup=m.Dialog=void 0;var y="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},h=r(__307d3e18fd611f85395c67cddeb1fe24),B=t(__cf890abdf040e0993fb71f2f839bc972),v=t(__c8cfa00f1eba9ac7af89ee3d0d33961d),s=__bf6c7c62de0eb613e0ab12d56d9a6197,u=__594942bfcf520d6e5a0843b1cfdd039a,
A=__05b42b82bab2942063ea875333a900bb,j=r(__fd277fcde858b82a198666a405e85600),w=r(__4d02fe17b8e885a34493e34af3d145dd),n,o=function(a,b,c,d){a.buttonpanel||a.addButtonPanel();this.page=a;this.onclick=c;this._onclick=function(b){return!0===c.call(this,a.dialog,a,b)};this.item=(0,j.default)("button",b).addClass("button-panel-button");d&&this.item.addClass(d);"function"==typeof c&&this.item.click(this._onclick);a.buttonpanel.append(this.item);this.id=a.button.length;a.button[this.id]=this},C=function(a,
b,c,d,e){a.buttonpanel||a.addButtonPanel();e||(e="#");this.page=a;this.onclick=c;this._onclick=function(b){return!0===c.call(this,a.dialog,a,b)};this.item=(0,j.default)("a",b).attr("href",e).addClass("button-panel-link");d&&this.item.addClass(d);"function"==typeof c&&this.item.click(this._onclick);a.buttonpanel.append(this.item);this.id=a.button.length;a.button[this.id]=this};n=function(a,b){var c="left"==a?-1:1;return function(a){var e=this.page[b];if(this.id!=(1==c?e.length-1:0)){c*=a||1;e[this.id+
c].item[0>c?"before":"after"](this.item);e.splice(this.id,1);e.splice(this.id+c,0,this);for(var a=0,k=e.length;a<k;a++)"panel"==b&&this.page.curtab==e[a].id&&(this.page.curtab=a),e[a].id=a}return this}};var x=function(a){return function(){this.page[a].splice(this.id,1);for(var b=0,c=this.page[a].length;b<c;b++)this.page[a][b].id=b;this.item.remove()}},f=function(a,b,c){var d={};+a||(d=Object(a),a=d.width,b=d.height,c=d.id);this.height=b||480;this.width=a||640;this.id=c;d=h.default.extend({},d,{width:this.width,
height:this.height,id:this.id});this.popup=p(d);this.popup.element.addClass("aui-dialog");this.page=[];this.curpage=0;new g(this)};o.prototype.moveUp=o.prototype.moveLeft=n("left","button");o.prototype.moveDown=o.prototype.moveRight=n("right","button");o.prototype.remove=x("button");o.prototype.html=function(a){return this.item.html(a)};o.prototype.onclick=function(a){if("undefined"==typeof a)return this.onclick;this.item.unbind("click",this._onclick);this._onclick=function(b){return!0===a.call(this,
page.dialog,page,b)};"function"==typeof a&&this.item.click(this._onclick)};var l=function(a,b,c,d,e){c instanceof h.default||(c=(0,h.default)(c));this.dialog=a.dialog;this.page=a;this.id=a.panel.length;this.button=(0,j.default)("button").html(b).addClass("item-button");e&&(this.button[0].id=e);this.item=(0,j.default)("li").append(this.button).addClass("page-menu-item");this.body=(0,j.default)("div").append(c).addClass("dialog-panel-body").css("height",a.dialog.height+"px");this.padding=20;d&&this.body.addClass(d);
var b=a.panel.length,k=this;a.menu.append(this.item);a.body.append(this.body);a.panel[b]=this;c=function(){var b;if(a.curtab+1){b=a.panel[a.curtab];b.body.hide();b.item.removeClass("selected");typeof b.onblur=="function"&&b.onblur()}a.curtab=k.id;k.body.show();k.item.addClass("selected");typeof k.onselect=="function"&&k.onselect();typeof a.ontabchange=="function"&&a.ontabchange(k,b)};this.button.click?this.button.click(c):(B.log("atlassian-dialog:Panel:constructor - this.button.click false"),this.button.onclick=
c);c();0==b?a.menu.css("display","none"):a.menu.show()};l.prototype.select=function(){this.button.click()};l.prototype.moveUp=l.prototype.moveLeft=n("left","panel");l.prototype.moveDown=l.prototype.moveRight=n("right","panel");l.prototype.remove=x("panel");l.prototype.html=function(a){return a?(this.body.html(a),this):this.body.html()};l.prototype.setPadding=function(a){isNaN(+a)||(this.body.css("padding",+a),this.padding=+a,this.page.recalcSize());return this};var g=function(a,b){this.dialog=a;this.id=
a.page.length;this.element=(0,j.default)("div").addClass("dialog-components");this.body=(0,j.default)("div").addClass("dialog-page-body");this.menu=(0,j.default)("ul").addClass("dialog-page-menu").css("height",a.height+"px");this.body.append(this.menu);this.curtab;this.panel=[];this.button=[];b&&this.body.addClass(b);a.popup.element.append(this.element.append(this.menu).append(this.body));a.page[a.page.length]=this};g.prototype.recalcSize=function(){for(var a=this.header?56:0,b=this.buttonpanel?51:
0,c=this.panel.length;c--;){var d=this.dialog.height-a-b;this.panel[c].body.css("height",d);this.menu.css("height",d)}};g.prototype.addButtonPanel=function(){this.buttonpanel=(0,j.default)("div").addClass("dialog-button-panel");this.element.append(this.buttonpanel)};g.prototype.addPanel=function(a,b,c,d){new l(this,a,b,c,d);this.recalcSize();return this};g.prototype.addHeader=function(a,b){this.header&&this.header.remove();this.header=(0,j.default)("h2").text(a||"").addClass("dialog-title");b&&this.header.addClass(b);
this.element.prepend(this.header);this.recalcSize();return this};g.prototype.addButton=function(a,b,c){new o(this,a,b,c);this.recalcSize();return this};g.prototype.addLink=function(a,b,c,d){new C(this,a,b,c,d);this.recalcSize();return this};g.prototype.gotoPanel=function(a){this.panel[a.id||a].select()};g.prototype.getCurrentPanel=function(){return this.panel[this.curtab]};g.prototype.hide=function(){this.element.hide()};g.prototype.show=function(){this.element.show()};g.prototype.remove=function(){this.element.remove()};
f.prototype.addHeader=function(a,b){this.page[this.curpage].addHeader(a,b);return this};f.prototype.addButton=function(a,b,c){this.page[this.curpage].addButton(a,b,c);return this};f.prototype.addLink=function(a,b,c,d){this.page[this.curpage].addLink(a,b,c,d);return this};f.prototype.addSubmit=function(a,b){this.page[this.curpage].addButton(a,b,"button-panel-submit-button");return this};f.prototype.addCancel=function(a,b){this.page[this.curpage].addLink(a,b,"button-panel-cancel-link");return this};
f.prototype.addButtonPanel=function(){this.page[this.curpage].addButtonPanel();return this};f.prototype.addPanel=function(a,b,c,d){this.page[this.curpage].addPanel(a,b,c,d);return this};f.prototype.addPage=function(a){new g(this,a);this.page[this.curpage].hide();this.curpage=this.page.length-1;return this};f.prototype.nextPage=function(){this.page[this.curpage++].hide();this.curpage>=this.page.length&&(this.curpage=0);this.page[this.curpage].show();return this};f.prototype.prevPage=function(){this.page[this.curpage--].hide();
0>this.curpage&&(this.curpage=this.page.length-1);this.page[this.curpage].show();return this};f.prototype.gotoPage=function(a){this.page[this.curpage].hide();this.curpage=a;0>this.curpage?this.curpage=this.page.length-1:this.curpage>=this.page.length&&(this.curpage=0);this.page[this.curpage].show();return this};f.prototype.getPanel=function(a,b){var c=null==b?this.curpage:a;null==b&&(b=a);return this.page[c].panel[b]};f.prototype.getPage=function(a){return this.page[a]};f.prototype.getCurrentPanel=
function(){return this.page[this.curpage].getCurrentPanel()};f.prototype.gotoPanel=function(a,b){null!=b&&this.gotoPage(a.id||a);this.page[this.curpage].gotoPanel("undefined"==typeof b?a:b)};f.prototype.show=function(){this.popup.show();(0,s.trigger)("show.dialog",{dialog:this});return this};f.prototype.hide=function(){this.popup.hide();(0,s.trigger)("hide.dialog",{dialog:this});return this};f.prototype.remove=function(){this.popup.hide();this.popup.remove();(0,s.trigger)("remove.dialog",{dialog:this})};
f.prototype.disable=function(){this.popup.disable();return this};f.prototype.enable=function(){this.popup.enable();return this};f.prototype.get=function(a){var b=[],c=this;(a+"").replace(RegExp('(?:^|,)\\s*(?:(page|panel|button|header)(?:#([^"][^ ]*|"[^"]*")|:(\\d+))?|#([^"][^ ]*|"[^"]*"))(?:\\s+(?:(page|panel|button|header)(?:#([^"][^ ]*|"[^"]*")|:(\\d+))?|#([^"][^ ]*|"[^"]*")))?\\s*(?=,|$)',"ig"),function(a,d,e,f,h,g,i,j,l){d=d&&d.toLowerCase();a=[];"page"==d&&c.page[f]?(a.push(c.page[f]),d=(d=
g)&&d.toLowerCase(),e=i,f=j,h=l):a=c.page;e=e&&(e+"").replace(/"/g,"");i&&(i+"").replace(/"/g,"");h=h&&(h+"").replace(/"/g,"");l&&(l+"").replace(/"/g,"");if(d||h)for(g=a.length;g--;){if(h||"panel"==d&&(e||!e&&null==f))for(i=a[g].panel.length;i--;)(a[g].panel[i].button.html()==h||a[g].panel[i].button.html()==e||"panel"==d&&!e&&null==f)&&b.push(a[g].panel[i]);if(h||"button"==d&&(e||!e&&null==f))for(i=a[g].button.length;i--;)(a[g].button[i].item.html()==h||a[g].button[i].item.html()==e||"button"==d&&
!e&&null==f)&&b.push(a[g].button[i]);a[g][d]&&a[g][d][f]&&b.push(a[g][d][f]);"header"==d&&a[g].header&&b.push(a[g].header)}else b=b.concat(a)});for(var d={length:b.length},a=b.length;a--;){d[a]=b[a];for(var e in b[a])e in d||function(a){d[a]=function(){for(var b=this.length;b--;)"function"==typeof this[b][a]&&this[b][a].apply(this[b],arguments)}}(e)}return d};f.prototype.updateHeight=function(){for(var a=0,b=(0,h.default)(window).height()-56-51-100,c=0;this.getPanel(c);c++)this.getPanel(c).body.css({height:"auto",
display:"block"}).outerHeight()>a&&(a=Math.min(b,this.getPanel(c).body.outerHeight())),c!==this.page[this.curpage].curtab&&this.getPanel(c).body.css({display:"none"});for(c=0;this.getPanel(c);c++)this.getPanel(c).body.css({height:a||this.height});this.page[0].menu.height(a);this.height=a+56+51+1;this.popup.changeSize(void 0,this.height)};f.prototype.isMaximised=function(){return this.popup.element.outerHeight()>=(0,h.default)(window).height()-100};f.prototype.getCurPanel=function(){return this.getPanel(this.page[this.curpage].curtab)};
f.prototype.getCurPanelButton=function(){return this.getCurPanel().button};m.Dialog=n=v.construct(f,"Dialog constructor",{alternativeName:"Dialog2"});m.popup=p=v.construct(p,"Dialog popup constructor",{alternatveName:"Dialog2"});(0,w.default)("Dialog",n);(0,w.default)("popup",p);m.Dialog=n;m.popup=p;return m}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-css.escape-1.5.0-css-escape', location = 'node_modules/css.escape/css.escape.js' */
("undefined"===typeof window?global:window).__73f814b2b65cefbd33b5011678834019=function(){var f={exports:{}},i=f.exports,k={module:f,exports:i},c;c=function(d,g,e){var c=("undefined"===typeof window?global:window).define,b,a,e=[e,g,d].filter(function(a){return"function"===typeof a})[0],g=[g,d,[]].filter(Array.isArray)[0];b=e.apply(null,g.map(function(a){return k[a]}));a=typeof b;"function"===typeof c&&c("string"===typeof d?d:"__73f814b2b65cefbd33b5011678834019",g,e);"string"===a?b=String(b):"number"===
a?b=Number(b):"boolean"===a&&(b=Boolean(b));void 0!==b&&(i=f.exports=b)};c.amd=!0;var h="undefined"!=typeof global?global:this,j=function(d){if(d.CSS&&d.CSS.escape)return d.CSS.escape;var c=function(e){for(var e=String(e),d=e.length,b=-1,a,c="",f=e.charCodeAt(0);++b<d;)a=e.charCodeAt(b),c=0==a?c+"\ufffd":1<=a&&31>=a||127==a||0==b&&48<=a&&57>=a||1==b&&48<=a&&57>=a&&45==f?c+("\\"+a.toString(16)+" "):0==b&&1==d&&45==a?c+("\\"+e.charAt(b)):128<=a||45==a||95==a||48<=a&&57>=a||65<=a&&90>=a||97<=a&&122>=
a?c+e.charAt(b):c+("\\"+e.charAt(b));return c};d.CSS||(d.CSS={});return d.CSS.escape=c};"object"==typeof i?f.exports=j(h):"function"==typeof c&&c.amd?c([],j.bind(h,h)):j(h);return f.exports}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-inline-dialog', location = 'node_modules/@atlassian/aui/src/js/aui/inline-dialog.js' */
("undefined"===typeof window?global:window).__8a05e920b7d8181524465449ac7de6d2=function(){function D(b){if(b&&b.__esModule)return b;var c={};if(null!=b)for(var d in b)Object.prototype.hasOwnProperty.call(b,d)&&(c[d]=b[d]);c.default=b;return c}function y(b){return b&&b.__esModule?b:{"default":b}}function v(b,c,l,a){a=a||[];a.hasOwnProperty("onTop")&&(F(),a.onTop&&void 0===a.gravity&&(a.gravity="s"));if("undefined"===typeof c&&(c=String(Math.random()).replace(".",""),(0,d.default)("#inline-dialog-"+
c+", #arrow-"+c+", #inline-dialog-shim-"+c).length))throw"GENERATED_IDENTIFIER_NOT_UNIQUE";var g=(0,G.default)(c),e=d.default.extend(!1,v.opts,a);"w"===e.gravity&&(e.offsetX=void 0===a.offsetX?10:a.offsetX,e.offsetY=void 0===a.offsetY?0:a.offsetY);var i,j,h,k=!1,o=!1,q=!1,m,t,f=(0,d.default)('<div id="inline-dialog-'+c+'" class="aui-inline-dialog"><div class="aui-inline-dialog-contents contents"></div><div id="arrow-'+c+'" class="aui-inline-dialog-arrow arrow aui-css-arrow"></div></div>'),n=(0,d.default)("#arrow-"+
g,f),p=f.find(".contents");e.displayShadow||p.addClass("aui-inline-dialog-no-shadow");e.autoWidth?p.addClass("aui-inline-dialog-auto-width"):p.width(e.width);p.on({mouseenter:function(){clearTimeout(j);f.unbind("mouseenter")},mouseleave:function(){r()}});var s=function(){i||(i={popup:f,hide:function(){r(0)},id:c,show:function(){w()},persistent:e.persistent?true:false,reset:function(){var a=(0,d.default)(window).height(),a=Math.round(a*0.75);f.children(".aui-inline-dialog-contents").css("max-height",
a);a=e.calculatePositions(f,t,m,e);if(a.hasOwnProperty("displayAbove")){H();a.gravity=a.displayAbove?"s":"n"}f.css(a.popupCss);n.removeClass("aui-bottom-arrow aui-left-arrow aui-right-arrow");a.gravity==="s"&&!n.hasClass("aui-bottom-arrow")?n.addClass("aui-bottom-arrow"):a.gravity==="w"?n.addClass("aui-left-arrow"):a.gravity==="e"&&n.addClass("aui-right-arrow");n.css(a.arrowCss);f.fadeIn(e.fadeTime,function(){});if(d.default.browser.msie&&~~d.default.browser.version<10){a=(0,d.default)("#inline-dialog-shim-"+
g);a.length||(0,d.default)(f).prepend((0,d.default)('<iframe class = "inline-dialog-shim" id="inline-dialog-shim-'+c+'" frameBorder="0" src="javascript:false;"></iframe>'));a.css({width:p.outerWidth(),height:p.outerHeight()})}}});return i},w=function(){f.is(":visible")||(h=setTimeout(function(){if(q&&o){e.addActiveClass&&(0,d.default)(b).addClass("active");k=true;if(!e.persistent){if(!C){(0,d.default)("body").bind("click."+y,function(a){(0,d.default)(a.target).closest("#inline-dialog-"+g+" .contents").length===
0&&r(0)});C=true}(0,d.default)(document).on("keydown",A)}v.current=s();(0,d.default)(document).trigger("showLayer",["inlineDialog",s()]);s().reset()}},e.showDelay))},r=function(a){if(!(typeof a==="undefined"&&e.persistent)&&typeof f.get(0)._datePickerPopup==="undefined"){o=false;if(k&&e.preHideCallback.call(f[0].popup)){a=a==null?e.hideDelay:a;clearTimeout(j);clearTimeout(h);a!=null&&(j=setTimeout(function(){C&&(0,d.default)("body").unbind("click."+y);C=false;(0,d.default)(document).off("keydown",
A);e.addActiveClass&&(0,d.default)(b).removeClass("active");f.fadeOut(e.fadeTime,function(){e.hideCallback.call(f[0].popup)});o=k=false;(0,d.default)(document).trigger("hideLayer",["inlineDialog",s()]);v.current=null;if(!e.cacheContent)u=q=false},a))}}},z=function(a,b){var g=(0,d.default)(b);e.upfrontCallback.call({popup:f,hide:function(){r(0)},id:c,show:function(){w()}});f.each(function(){typeof this.popup!=="undefined"&&this.popup.hide()});e.closeOthers&&(0,d.default)(".aui-inline-dialog").each(function(){!this.popup.persistent&&
this.popup.hide()});t={target:g};m=a?{x:a.pageX,y:a.pageY}:{x:g.offset().left,y:g.offset().top};k||clearTimeout(h);o=true;g=function(){u=false;q=true;e.initCallback.call({popup:f,hide:function(){r(0)},id:c,show:function(){w()}});w()};if(!u){u=true;d.default.isFunction(l)?l(p,b,g):d.default.get(l,function(a,b,d){p.html(e.responseHandler(a,b,d));q=true;e.initCallback.call({popup:f,hide:function(){r(0)},id:c,show:function(){w()}});w()})}clearTimeout(j);k||w();return false};f[0].popup=s();var u=!1,x=
!1,B=function(){if(!x){(0,d.default)(e.container).append(f);x=true}},a=(0,d.default)(b);if(e.onHover)if(e.useLiveEvents)if(a.selector)(0,d.default)(document).on("mouseenter",a.selector,function(a){B();z(a,this)}).on("mouseleave",a.selector,function(){r()});else E.log("Warning: inline dialog trigger elements must have a jQuery selector when the useLiveEvents option is enabled.");else a.on({mouseenter:function(a){B();z(a,this)},mouseleave:function(){r()}});else if(!e.noBind)if(e.useLiveEvents)if(a.selector)(0,
d.default)(document).on("click",a.selector,function(a){B();k&&e.closeOnTriggerClick?f.hide():z(a,this);return false}).on("mouseleave",a.selector,function(){r()});else E.log("Warning: inline dialog trigger elements must have a jQuery selector when the useLiveEvents option is enabled.");else a.on("click",function(a){B();k&&e.closeOnTriggerClick?f.hide():z(a,this);return false}).on("mouseleave",function(){r()});var C=!1,y=c+".inline-dialog-check",A=function(a){a.keyCode===27&&r(0)};f.show=function(a,
c){a&&a.stopPropagation();B();e.noBind&&(!b||!b.length)?z(a,c===void 0?a.target:c):z(a,b)};f.hide=function(){r(0)};f.refresh=function(){k&&s().reset()};f.getOptions=function(){return e};return f}function u(b){var b=(0,d.default)(b),c=d.default.extend({left:0,top:0},b.offset());return{left:c.left,top:c.top,width:b.outerWidth(),height:b.outerHeight()}}function I(b,c,l,a){var g,e,i,j,h,k,o,q,m=d.default.isFunction(a.offsetX)?a.offsetX(b,c,l,a):a.offsetX,t=d.default.isFunction(a.offsetY)?a.offsetY(b,
c,l,a):a.offsetY;d.default.isFunction(a.arrowOffsetX)&&a.arrowOffsetX(b,c,l,a);l=d.default.isFunction(a.arrowOffsetY)?a.arrowOffsetY(b,c,l,a):a.arrowOffsetY;h="body"!==a.container.toLowerCase();i=(0,d.default)(a.container);a=h?(0,d.default)(a.container).parent():(0,d.default)(window);j=h?i.offset():{left:0,top:0};h&&a.offset();g=c.target;h=g.offset();e=g[0].getBBox&&g[0].getBBox();c=a.scrollTop();q=a.scrollLeft();a.width();a=a.height();o=i.width();i.height();i=h.top-j.top;j=h.left-j.left;h=e?e.width:
g.outerWidth();k=e?e.height:g.outerHeight();g=b.width();e=b.height();var f=10,n=b.find(".arrow").outerHeight(),p=i-c,s=j-q,b=Math.floor(k/2);q=Math.floor(e/2);k=Math.floor(n/2);o=!(o-s-h-m-f>=g)&&s-m-f>=g?"e":"w";s=p+b-k;n=a-s-n;f=Math.min(f,s-5);f=Math.min(f,n-5);n=p+b;p=Math.max(n-f,0);n=Math.max(a-n-f,0);q-t>p?(m={top:c+f,left:"w"===o?j+h+m:j-g-m},t={top:i+b-(m.top+k)}):q+t>n?(m={top:c+a-e-f,left:"w"===o?j+h+m:j-g-m},t={top:i+b-(m.top+k)}):(m={top:i+b-q+t,left:"w"===o?j+h+m:j-g-m},t={top:q-k+l});
return{gravity:o,popupCss:m,arrowCss:t}}function J(b,c,l,a){var g=d.default.isFunction(a.offsetX)?a.offsetX(b,c,l,a):a.offsetX,e=d.default.isFunction(a.offsetY)?a.offsetY(b,c,l,a):a.offsetY,i=d.default.isFunction(a.arrowOffsetX)?a.arrowOffsetX(b,c,l,a):a.arrowOffsetX,j=u(window),h=u(c.target),c=u(b),b=u(b.find(".aui-inline-dialog-arrow")),k=h.left+h.width/2,o=(window.pageYOffset||document.documentElement.scrollTop)+j.height;c.top=h.top+h.height+~~e;c.left=h.left+~~g;g=j.width-(c.left+c.width+10);
b.left=k-c.left+~~i;b.top=-(b.height/2);i=h.top>c.height;if(i=!(c.top+c.height<o)&&i||i&&"s"===a.gravity)c.top=h.top-c.height-b.height/2,b.top=c.height;a.isRelativeToMouse?0>g?(c.right=10,c.left="auto",b.left=l.x-(j.width-c.width)):(c.left=l.x-20,b.left=l.x-c.left):0>g?(c.right=10,c.left="auto",l=j.width-c.right-c.width,b.right="auto",b.left=k-l-b.width/2):c.width<=h.width/2&&(b.left=c.width/2,c.left=k-c.width/2);return{gravity:i?"s":"n",displayAbove:i,popupCss:{left:c.left,top:c.top,right:c.right},
arrowCss:{left:b.left,top:b.top,right:b.right}}}var x={};Object.defineProperty(x,"__esModule",{value:!0});var d=y(__307d3e18fd611f85395c67cddeb1fe24),A=D(__c8cfa00f1eba9ac7af89ee3d0d33961d),E=D(__cf890abdf040e0993fb71f2f839bc972),K=y(__4d02fe17b8e885a34493e34af3d145dd),G=y(__73f814b2b65cefbd33b5011678834019);v.opts={onTop:!1,responseHandler:function(b){return b},closeOthers:!0,isRelativeToMouse:!1,addActiveClass:!0,onHover:!1,useLiveEvents:!1,noBind:!1,fadeTime:100,persistent:!1,hideDelay:1E4,showDelay:0,
width:300,offsetX:0,offsetY:10,arrowOffsetX:0,arrowOffsetY:0,container:"body",cacheContent:!0,displayShadow:!0,autoWidth:!1,gravity:"n",closeOnTriggerClick:!1,preHideCallback:function(){return!0},hideCallback:function(){},initCallback:function(){},upfrontCallback:function(){},calculatePositions:function(b,c,d,a){a=a||{};return("w"===a.gravity?I:J)(b,c,d,a)}};var v=A.construct(v,"Inline dialog constructor",{alternativeName:"inline dialog 2"}),H=A.getMessageLogger("displayAbove","[remove version]",
{alternativeName:"gravity",extraInfo:"See https://ecosystem.atlassian.net/browse/AUI-2197."}),F=A.getMessageLogger("onTop","[remove version]",{alternativeName:"gravity",extraInfo:"See https://ecosystem.atlassian.net/browse/AUI-2197."});(0,K.default)("InlineDialog",v);x.default=v;return x=x["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-template', location = 'node_modules/@atlassian/aui/src/js/aui/template.js' */
("undefined"===typeof window?global:window).__eb201a36d4829c396b434af7bad3dea4=function(){function i(b){return b&&b.__esModule?b:{"default":b}}var e={};"use strict";Object.defineProperty(e,"__esModule",{value:!0});var f=i(__307d3e18fd611f85395c67cddeb1fe24),m=i(__d909216fe400315d9bcd3c1a7748d78f),n=i(__4d02fe17b8e885a34493e34af3d145dd),o=f.default,k=/\{([^\}]+)\}/g,p=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,l=function(b,a,d,e){var c=d;a.replace(p,function(b,a,d,f,g){a=a||f;c&&(a+
":html"in c?(c=c[a+":html"],e=!0):a in c&&(c=c[a]),g&&"function"===typeof c&&(c=c()))});if(null==c||c===d)c=b;c=String(c);e||(c=g.escape(c));return c},q=function(b){this.template=this.template.replace(k,function(a,d){return l(a,d,b,!0)});return this},r=function(b){this.template=this.template.replace(k,function(a,d){return l(a,d,b)});return this},s=function(){return this.template},g=function(b){function a(){return a.template}a.template=String(b);a.toString=a.valueOf=s;a.fill=r;a.fillHtml=q;return a},
h={},j=[];g.load=function(b){b=String(b);if(!h.hasOwnProperty(b)){1E3<=j.length&&delete h[j.shift()];j.push(b);var a=b,d,e=b;d=o("script").filter(function(){return this.getAttribute("title")===e});h[a]=d[0].text}return this(h[b])};g.escape=m.default;f=g;(0,n.default)("template",f);e.default=f;return e=e["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-messages', location = 'node_modules/@atlassian/aui/src/js/aui/messages.js' */
("undefined"===typeof window?global:window).__7f014f4563f4730ba724da8ae59dfe98=function(){function n(a){if(a&&a.__esModule)return a;var d={};if(null!=a)for(var b in a)Object.prototype.hasOwnProperty.call(a,b)&&(d[b]=a[b]);d.default=a;return d}function i(a){return a&&a.__esModule?a:{"default":a}}function f(a){e[a]=function(d,b){b||(b=d,d="#aui-message-bar");b.closeable=null!==b.closeable&&!1!==b.closeable;b.shadowed=null!==b.shadowed&&!1!==b.shadowed;var h=this.template,c=b,h=(0,g.default)((0,q.default)(h).fill({type:a,
closeable:c.closeable?"closeable":"",shadowed:c.shadowed?"shadowed":"",fadeout:c.fadeout?"fadeout":"",title:c.title||"","body:html":c.body||""}).toString());c.id&&(/[#\'\"\.\s]/g.test(c.id)?r.warn("Messages error: ID rejected, must not include spaces, hashes, dots or quotes."):h.attr("id",c.id));c=d;"prepend"===b.insert?h.prependTo(c):h.appendTo(c);b.closeable&&k(h);b.fadeout&&l(h,b.delay,b.duration);return h}}function k(a){(0,g.default)(a||"div.aui-message.closeable").each(function(){var a=(0,g.default)(this),
b=a.find(".aui-icon.icon-close"),b=0<b.length?b.first():(0,g.default)('<span class="aui-icon icon-close" role="button" tabindex="0"></span>');a.addClass("closeable");a.append(b);a.on("click",".aui-icon.icon-close",function(a){(0,g.default)(a.target).closest(".aui-message").closeMessage()}).on("keydown",".aui-icon.icon-close",function(a){if(a.which===o.default.ENTER||a.which===o.default.SPACE)(0,g.default)(a.target).closest(".aui-message").closeMessage(),a.preventDefault()})})}function l(a,d,b){d=
"undefined"!==typeof d?d:s;b="undefined"!==typeof b?b:t;(0,g.default)(a||"div.aui-message.fadeout").each(function(){function a(){c.stop(!0,!1).delay(d).fadeOut(b,function(){c.closeMessage()})}var c=(0,g.default)(this),e=!1,f=!1;c.focusin(function(){e=!0;c.stop(!0,!1).fadeTo(p,1)}).focusout(function(){e=!1;!e&&!f&&a()}).hover(function(){f=!0;c.stop(!0,!1).fadeTo(p,1)},function(){f=!1;!e&&!f&&a()});a()})}var j={};"use strict";Object.defineProperty(j,"__esModule",{value:!0});var g=i(__307d3e18fd611f85395c67cddeb1fe24),
m=n(__c8cfa00f1eba9ac7af89ee3d0d33961d),r=n(__cf890abdf040e0993fb71f2f839bc972),u=i(__4d02fe17b8e885a34493e34af3d145dd),o=i(__509557c937caa8763def39004fcf3193),v=i(__c1ce1f1e3e613f564fc234ff043570f1),q=i(__eb201a36d4829c396b434af7bad3dea4),t=500,s=5E3,p=100,e={setup:function(){k();l()},makeCloseable:k,makeFadeout:l,template:'<div class="aui-message aui-message-{type} {closeable} {shadowed} {fadeout}"><p class="title"><strong>{title}</strong></p>{body}<\!-- .aui-message --\></div>',createMessage:f};
g.default.fn.closeMessage=function(){var a=(0,g.default)(this);a.hasClass("aui-message")&&a.hasClass("closeable")&&(a.stop(!0),a.trigger("messageClose",[this]).remove(),(0,g.default)(document).trigger("aui-message-close",[this]))};f("generic");f("error");f("warning");f("info");f("success");f("hint");(0,v.default)("aui-message",{created:function(a){var d=a.innerHTML,b=a.getAttribute("type")||"info";a.innerHTML="";e[b](a,{body:d,closeable:a.getAttribute("closeable"),delay:a.getAttribute("delay"),duration:a.getAttribute("duration"),
fadeout:a.getAttribute("fadeout"),title:a.getAttribute("title")})}});(0,g.default)(function(){e.setup()});m.prop(e,"makeCloseable",{extraInfo:'Use the "closeable" option in the constructor instead. Docs: https://docs.atlassian.com/aui/latest/docs/messages.html'});m.prop(e,"createMessage",{extraInfo:"Use the provided convenience methods instead e.g. messages.generic(). Docs: https://docs.atlassian.com/aui/latest/docs/messages.html"});m.prop(e,"makeFadeout",{extraInfo:'Use the "fadeout" option in the constructor instead. Docs: https://docs.atlassian.com/aui/latest/docs/messages.html'});
(0,u.default)("messages",e);j.default=e;return j=j["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-tabs', location = 'node_modules/@atlassian/aui/src/js/aui/tabs.js' */
("undefined"===typeof window?global:window).__528cf2801debf7075d1fc56b34c7b259=function(){function j(a){return a&&a.__esModule?a:{"default":a}}function u(a){a=(0,e.default)(a);if(!a.hasClass("aui-tabs-responsive-trigger")){var b=(0,e.default)(a.attr("href").match(A)[0]);b.addClass("active-pane").attr("aria-hidden","false").siblings(".tabs-pane").removeClass("active-pane").attr("aria-hidden","true");var c=a.parents(".aui-tabs").find(".aui-tabs-responsive-trigger-item a").attr("aria-controls"),c=(0,
e.default)(document).find("#"+c);c.find("li a").attr("aria-checked",!1).removeClass("checked aui-dropdown2-checked");c.find("li").removeClass("active-tab");a.parent("li.menu-item").addClass("active-tab").siblings(".menu-item").removeClass("active-tab");a.hasClass("aui-tabs-responsive-item")&&(c=b.parent(".aui-tabs").find("li.menu-item:not(.aui-tabs-responsive-trigger-item)"),c.removeClass("active-tab"),c.find("a").removeClass("checked").removeAttr("aria-checked"));a.hasClass("aui-tabs-responsive-item")&&
b.parent(".aui-tabs").find("li.menu-item.aui-tabs-responsive-trigger-item").addClass("active-tab");a.closest(".tabs-menu").find("a").attr("aria-selected","false");a.attr("aria-selected","true");a.trigger("tabSelect",{tab:a,pane:b})}}function v(a){return void 0!==a.attr("data-aui-persist")&&"false"!==a.attr("data-aui-persist")}function w(a){var b=a.attr("id"),a=a.attr("data-aui-persist");return B+(b?b:"")+(a&&"true"!==a?"-"+a:"")}function x(a){m.change((0,e.default)(a.target).closest("a"));a&&a.preventDefault()}
function y(a){a.forEach(function(a,c){var d=(0,e.default)(a),g=d.find(".tabs-menu").first(),f=g.find("li:not(.aui-tabs-responsive-trigger-item)"),h=g.find(".aui-tabs-responsive-trigger").parent(),o=h.find("a"),k=o.attr("aria-controls"),k=(0,e.default)(document).find("#"+k).attr("aria-checked",!1),i=0<k.length,j=l.totalTabsWidth(f,k)>d.outerWidth();!i&&j&&(h=l.createResponsiveDropdownTrigger(g,c),k=l.createResponsiveDropdown(d,c));o.attr("aria-controls","aui-tabs-responsive-dropdown-"+c);o.attr("id",
"aui-tabs-responsive-trigger-"+c);o.attr("href","aui-tabs-responsive-trigger-"+c);k.attr("id","aui-tabs-responsive-dropdown-"+c);j&&(f=l.moveVisibleTabs(f.toArray(),d,h),f=l.totalVisibleTabWidth(f),d=d.outerWidth()-f-h.outerWidth(!0),0<d&&(f=k.find("li"),l.moveInvisibleTabs(f.toArray(),d,h)),k.on("click","a",x),g.is(":visible")&&g.hide().show());i&&!j&&(k.find("li").each(function(){l.moveTabOutOfDropdown((0,e.default)(this),h)}),l.removeResponsiveDropdown(k,h))})}function z(a){var b=(0,e.default)(a);
a.setAttribute("role","application");if(!b.data("aui-tab-events-bound")){var c=b.children("ul.tabs-menu");c.attr("role","tablist");c.children("li").attr("role","presentation");c.find("> .menu-item a").each(function(){var a=(0,e.default)(this),b=a.attr("href");(0,C.default)(a);a.attr("role","tab");(0,e.default)(b).attr("aria-labelledby",a.attr("id"));a.parent().hasClass("active-tab")?a.attr("aria-selected","true"):a.attr("aria-selected","false")});c.on("click","a",x);b.data("aui-tab-events-bound",
!0);[].slice.call(a.querySelectorAll(".tabs-pane")).forEach(D)}}function D(a){a.setAttribute("role","tabpanel");a.setAttribute("aria-hidden",(0,e.default)(a).hasClass("active-pane")?"false":"true")}var p={};"use strict";Object.defineProperty(p,"__esModule",{value:!0});__f52b7059926ab2bdcd0aee12b4bc782b;var q;var i=__cf890abdf040e0993fb71f2f839bc972;if(i&&i.__esModule)q=i;else{var t={};if(null!=i)for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n]);t.default=i;q=t}var E=j(__c6e18cf9266fe56d02f78a6e812f58db),
e=j(__307d3e18fd611f85395c67cddeb1fe24),C=j(__6ccb0f8a73a13028d85029aeb628b44d);n=j(__4d02fe17b8e885a34493e34af3d145dd);var F=j(__be88e4b5c5dd8d343902ce7534076e13),r=j(__c1ce1f1e3e613f564fc234ff043570f1),s=window.skateTemplateHtml,A=/#.*/,B="_internal-aui-tabs-",l={totalTabsWidth:function(a,b){var c=this.totalVisibleTabWidth(a),d=0;b.find("li").each(function(a,b){d+=parseInt(b.getAttribute("data-aui-tab-width"))});return c+d},totalVisibleTabWidth:function(a){var b=0;a.each(function(a,d){b+=(0,e.default)(d).outerWidth()});
return b},removeResponsiveDropdown:function(a,b){a.remove();b.remove()},createResponsiveDropdownTrigger:function(a,b){a.append('<li class="menu-item aui-tabs-responsive-trigger-item"><a class="aui-dropdown2-trigger aui-tabs-responsive-trigger aui-dropdown2-trigger-arrowless" id="aui-tabs-responsive-trigger-'+b+'" aria-haspopup="true" aria-controls="aui-tabs-responsive-dropdown-'+b+'" href="aui-tabs-responsive-dropdown-'+b+'">...</a></li>');return a.find(".aui-tabs-responsive-trigger-item")},createResponsiveDropdown:function(a,
b){a.append('<div class="aui-dropdown2 aui-style-default aui-tabs-responsive-dropdown" id="aui-tabs-responsive-dropdown-'+b+'"><ul></ul></div>');return a.find("#aui-tabs-responsive-dropdown-"+b)},findNewVisibleTabs:function(a,b,c){for(var d=0,g=0;d+c<=b&&g<a.length;g++)var f=(0,e.default)(a[g]).outerWidth(!0),d=d+f;return a.slice(0,g-1)},moveVisibleTabs:function(a,b,c){for(var d=c.find("a").attr("aria-controls"),d=(0,e.default)("#"+d),b=this.findNewVisibleTabs(a,b.outerWidth(),c.parent().outerWidth(!0)),
g=b.length-1,f=a.length-1;f>=g;f--){var h=(0,e.default)(a[f]);this.moveTabToResponsiveDropdown(h,d,c)}return(0,e.default)(b)},moveTabToResponsiveDropdown:function(a,b,c){var d=a.find("a");a.attr("data-aui-tab-width",a.outerWidth(!0));d.addClass("aui-dropdown2-radio aui-tabs-responsive-item");a.hasClass("active-tab")&&(d.addClass("aui-dropdown2-checked"),c.addClass("active-tab"));b.find("ul").prepend(a)},moveInvisibleTabs:function(a,b,c){for(var d=0;0<b&&d<a.length;d++){var g=(0,e.default)(a[d]),f=
parseInt(g.attr("data-aui-tab-width"),10);f<b&&this.moveTabOutOfDropdown(g,c);b-=f}},moveTabOutOfDropdown:function(a,b){a.find("a").hasClass("aui-dropdown2-checked")&&(a.addClass("active-tab"),b.removeClass("active-tab"));a.children("a").removeClass("aui-dropdown2-radio aui-tabs-responsive-item aui-dropdown2-checked");b.before(a)}},m={setup:function(){var a=(0,E.default)(y,200),b=(0,e.default)('.aui-tabs.horizontal-tabs[data-aui-responsive]:not([data-aui-responsive="false"]), aui-tabs[responsive]:not([responsive="false"])').toArray();
y(b);(0,e.default)(window).resize(function(){a(b)});var c=(0,e.default)(".aui-tabs:not(.aui-tabs-disabled)");c.each(function(){z(this)});for(var d=0,g=c.length;d<g;d++){var f=c.eq(d),h=c.get(d);if(v(f)&&window.localStorage)if(f.attr("id")){if(f=window.localStorage.getItem(w(f)))(h=h.querySelector('a[href$="'+f+'"]'))&&u(h)}else q.warn("A tab group must specify an id attribute if it specifies data-aui-persist.")}(0,e.default)(".aui-tabs.vertical-tabs").find("a").each(function(){var a=(0,e.default)(this);
a.attr("title")||(0,F.default)(a)&&a.attr("title",a.text())})},change:function(a){var a=(0,e.default)(a),b=a.closest(".aui-tabs");u(a);v(b)&&window.localStorage&&(b=a.closest(".aui-tabs"),b.attr("id")?(a=a.attr("href"))&&window.localStorage.setItem(w(b),a):q.warn("A tab group must specify an id attribute if it specifies data-aui-persist."))}};(0,e.default)(m.setup);(0,r.default)("aui-tabs",{created:function(a){(0,e.default)(a).addClass("aui-tabs horizontal-tabs");r.default.init(a);z(a)},template:s('<ul class="tabs-menu">',
'<content select="li[is=aui-tabs-tab]"></content>',"</ul>",'<content select="aui-tabs-pane"></content>'),prototype:{select:function(a){a=(0,e.default)(this.querySelectorAll("aui-tabs-pane")).index(a);-1<a&&m.change(this.querySelectorAll("li[is=aui-tabs-tab]")[a].children[0]);return this}}});var G=(0,r.default)("aui-tabs-tab",{"extends":"li",created:function(a){(0,e.default)(a).addClass("menu-item")},template:s('<a href="#">',"<strong>","<content></content>","</strong>","</a>")});(0,r.default)("aui-tabs-pane",
{attached:function(a){var b=(0,e.default)((0,e.default)(a).closest("aui-tabs").get(0)),c=(0,e.default)(a),b=b.find("aui-tabs-pane").index(c),d=new G,g=(0,e.default)(d);c.addClass("tabs-pane");d.firstChild.setAttribute("href","#"+a.id);s.wrap(d).textContent=c.attr("title");0===b&&c.addClass("active-pane");c.hasClass("active-pane")&&g.addClass("active-tab");c.siblings("ul").append(d)},template:s("<content></content>")});(0,n.default)("tabs",m);p.default=m;return p=p["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:jquery-ui-core-1.8.24-patched', location = 'node_modules/@atlassian/aui/src/js-vendor/jquery/jquery-ui/jquery.ui.core-2.0.0-atlassian.js' */
/*! THIS FILE HAS BEEN MODIFIED BY ATLASSIAN. Modified lines are marked below, search "ATLASSIAN" */
/*!
 * jQuery UI 1.8.24
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI
 */
(function( $, undefined ) {

// prevent duplicate loading
// this is only a problem because we proxy existing functions
// and we don't want to double proxy them
$.ui = $.ui || {};
if ( $.ui.version ) {
	return;
}

$.extend( $.ui, {
	version: "2.0.0-atlassian",

	keyCode: {
		ALT: 18,
		BACKSPACE: 8,
		CAPS_LOCK: 20,
		COMMA: 188,
		COMMAND: 91,
		COMMAND_LEFT: 91, // COMMAND
		COMMAND_RIGHT: 93,
		CONTROL: 17,
		DELETE: 46,
		DOWN: 40,
		END: 35,
		ENTER: 13,
		ESCAPE: 27,
		HOME: 36,
		INSERT: 45,
		LEFT: 37,
		MENU: 93, // COMMAND_RIGHT
		NUMPAD_ADD: 107,
		NUMPAD_DECIMAL: 110,
		NUMPAD_DIVIDE: 111,
		NUMPAD_ENTER: 108,
		NUMPAD_MULTIPLY: 106,
		NUMPAD_SUBTRACT: 109,
		PAGE_DOWN: 34,
		PAGE_UP: 33,
		PERIOD: 190,
		RIGHT: 39,
		SHIFT: 16,
		SPACE: 32,
		TAB: 9,
		UP: 38,
		WINDOWS: 91 // COMMAND
	}
});

// plugins
$.fn.extend({
	propAttr: $.fn.prop || $.fn.attr,

	_focus: $.fn.focus,
	focus: function( delay, fn ) {
		return typeof delay === "number" ?
			this.each(function() {
				var elem = this;
				setTimeout(function() {
					$( elem ).focus();
					if ( fn ) {
						fn.call( elem );
					}
				}, delay );
			}) :
			this._focus.apply( this, arguments );
	},

	scrollParent: function() {
		var scrollParent;
		if (($.browser.msie && (/(static|relative)/).test(this.css('position'))) || (/absolute/).test(this.css('position'))) {
			scrollParent = this.parents().filter(function() {
				return (/(relative|absolute|fixed)/).test($.curCSS(this,'position',1)) && (/(auto|scroll)/).test($.curCSS(this,'overflow',1)+$.curCSS(this,'overflow-y',1)+$.curCSS(this,'overflow-x',1));
			}).eq(0);
		} else {
			scrollParent = this.parents().filter(function() {
				return (/(auto|scroll)/).test($.curCSS(this,'overflow',1)+$.curCSS(this,'overflow-y',1)+$.curCSS(this,'overflow-x',1));
			}).eq(0);
		}

		return (/fixed/).test(this.css('position')) || !scrollParent.length ? $(document) : scrollParent;
	},

	zIndex: function( zIndex ) {
		if ( zIndex !== undefined ) {
			return this.css( "zIndex", zIndex );
		}

		if ( this.length ) {
			var elem = $( this[ 0 ] ), position, value;
			while ( elem.length && elem[ 0 ] !== document ) {
				// Ignore z-index if position is set to a value where z-index is ignored by the browser
				// This makes behavior of this function consistent across browsers
				// WebKit always returns auto if the element is positioned
				position = elem.css( "position" );
				if ( position === "absolute" || position === "relative" || position === "fixed" ) {
					// IE returns 0 when zIndex is not specified
					// other browsers return a string
					// we ignore the case of nested elements with an explicit value of 0
					// <div style="z-index: -10;"><div style="z-index: 0;"></div></div>
					value = parseInt( elem.css( "zIndex" ), 10 );
					if ( !isNaN( value ) && value !== 0 ) {
						return value;
					}
				}
				elem = elem.parent();
			}
		}

		return 0;
	},

	disableSelection: function() {
		return this.bind( ( $.support.selectstart ? "selectstart" : "mousedown" ) +
			".ui-disableSelection", function( event ) {
				event.preventDefault();
			});
	},

	enableSelection: function() {
		return this.unbind( ".ui-disableSelection" );
	}
});

/**
 * FOLLOWING LINES MODIFIED BY ATLASSIAN
 *
 * This is a backport of the fix in #11197 in commit c077e0a347826c7acca4ca2f775ca59e3b5f8d07
 */
// support: jQuery 1.7 only (and the forked 4.0.0-atlassian)
// Not a great way to check versions, but since we only support 1.7+ and only
// need to detect <1.8, this is a simple check that should suffice. Checking
// for "1.7." would be a bit safer, but the version string is 1.7, not 1.7.0
// and we'll never reach 1.70.0 (if we do, we certainly won't be supporting
// 1.7 anymore). See #11197 for why we're not using feature detection.
// Added support for the security patched version 4.0.0-atlassian, which is a fork of 1.7.2
if ( $.fn.jquery.substring( 0, 3 ) === "1.7" || $.fn.jquery.substring( 0, 3 ) === "4.0" ) {

    // Setters for .innerWidth(), .innerHeight(), .outerWidth(), .outerHeight()
    // Unlike jQuery Core 1.8+, these only support numeric values to set the
    // dimensions in pixels
/** END ATLASSIAN */
	$.each( [ "Width", "Height" ], function( i, name ) {
		var side = name === "Width" ? [ "Left", "Right" ] : [ "Top", "Bottom" ],
			type = name.toLowerCase(),
			orig = {
				innerWidth: $.fn.innerWidth,
				innerHeight: $.fn.innerHeight,
				outerWidth: $.fn.outerWidth,
				outerHeight: $.fn.outerHeight
			};

		function reduce( elem, size, border, margin ) {
			$.each( side, function() {
				size -= parseFloat( $.curCSS( elem, "padding" + this, true) ) || 0;
				if ( border ) {
					size -= parseFloat( $.curCSS( elem, "border" + this + "Width", true) ) || 0;
				}
				if ( margin ) {
					size -= parseFloat( $.curCSS( elem, "margin" + this, true) ) || 0;
				}
			});
			return size;
		}

		$.fn[ "inner" + name ] = function( size ) {
			if ( size === undefined ) {
				return orig[ "inner" + name ].call( this );
			}

			return this.each(function() {
				$( this ).css( type, reduce( this, size ) + "px" );
			});
		};

		$.fn[ "outer" + name] = function( size, margin ) {
			if ( typeof size !== "number" ) {
				return orig[ "outer" + name ].call( this, size );
			}

			return this.each(function() {
				$( this).css( type, reduce( this, size, true, margin ) + "px" );
			});
		};
	});
}

// selectors
function focusable( element, isTabIndexNotNaN ) {
	var nodeName = element.nodeName.toLowerCase();
	if ( "area" === nodeName ) {
		var map = element.parentNode,
			mapName = map.name,
			img;
		if ( !element.href || !mapName || map.nodeName.toLowerCase() !== "map" ) {
			return false;
		}
		img = $( "img[usemap=#" + mapName + "]" )[0];
		return !!img && visible( img );
	}
	return ( /input|select|textarea|button|object/.test( nodeName )
		? !element.disabled
		: "a" == nodeName
			? element.href || isTabIndexNotNaN
			: isTabIndexNotNaN)
		// the element and all of its ancestors must be visible
		&& visible( element );
}

function visible( element ) {
	return !$( element ).parents().andSelf().filter(function() {
		return $.curCSS( this, "visibility" ) === "hidden" ||
			$.expr.filters.hidden( this );
	}).length;
}

$.extend( $.expr[ ":" ], {
	data: $.expr.createPseudo ?
		$.expr.createPseudo(function( dataName ) {
			return function( elem ) {
				return !!$.data( elem, dataName );
			};
		}) :
		// support: jQuery <1.8
		function( elem, i, match ) {
			return !!$.data( elem, match[ 3 ] );
		},

	focusable: function( element ) {
		return focusable( element, !isNaN( $.attr( element, "tabindex" ) ) );
	},

	tabbable: function( element ) {
		var tabIndex = $.attr( element, "tabindex" ),
			isTabIndexNaN = isNaN( tabIndex );
		return ( isTabIndexNaN || tabIndex >= 0 ) && focusable( element, !isTabIndexNaN );
	}
});

// support
$(function() {
	var body = document.body,
		div = body.appendChild( div = document.createElement( "div" ) );

	// access offsetHeight before setting the style to prevent a layout bug
	// in IE 9 which causes the elemnt to continue to take up space even
	// after it is removed from the DOM (#8026)
	div.offsetHeight;

	$.extend( div.style, {
		minHeight: "100px",
		height: "auto",
		padding: 0,
		borderWidth: 0
	});

	$.support.minHeight = div.offsetHeight === 100;
	$.support.selectstart = "onselectstart" in div;

	// set display to none to avoid a layout bug in IE
	// http://dev.jquery.com/ticket/4014
	body.removeChild( div ).style.display = "none";
});

// jQuery <1.4.3 uses curCSS, in 1.4.3 - 1.7.2 curCSS = css, 1.8+ only has css
if ( !$.curCSS ) {
	$.curCSS = $.css;
}





// deprecated
$.extend( $.ui, {
	// $.ui.plugin is deprecated.  Use the proxy pattern instead.
	plugin: {
		add: function( module, option, set ) {
			var proto = $.ui[ module ].prototype;
			for ( var i in set ) {
				proto.plugins[ i ] = proto.plugins[ i ] || [];
				proto.plugins[ i ].push( [ option, set[ i ] ] );
			}
		},
		call: function( instance, name, args ) {
			var set = instance.plugins[ name ];
			if ( !set || !instance.element[ 0 ].parentNode ) {
				return;
			}

			for ( var i = 0; i < set.length; i++ ) {
				if ( instance.options[ set[ i ][ 0 ] ] ) {
					set[ i ][ 1 ].apply( instance.element, args );
				}
			}
		}
	},

	// will be deprecated when we switch to jQuery 1.4 - use jQuery.contains()
	contains: function( a, b ) {
		return document.compareDocumentPosition ?
			a.compareDocumentPosition( b ) & 16 :
			a !== b && a.contains( b );
	},

	// only used by resizable
	hasScroll: function( el, a ) {

		//If overflow is hidden, the element might have extra content, but the user wants to hide it
		if ( $( el ).css( "overflow" ) === "hidden") {
			return false;
		}

		var scroll = ( a && a === "left" ) ? "scrollLeft" : "scrollTop",
			has = false;

		if ( el[ scroll ] > 0 ) {
			return true;
		}

		// TODO: determine which cases actually cause this to happen
		// if the element doesn't have the scroll set, see if it's possible to
		// set the scroll
		el[ scroll ] = 1;
		has = ( el[ scroll ] > 0 );
		el[ scroll ] = 0;
		return has;
	},

	// these are odd functions, fix the API or move into individual plugins
	isOverAxis: function( x, reference, size ) {
		//Determines when x coordinate is over "b" element axis
		return ( x > reference ) && ( x < ( reference + size ) );
	},
	isOver: function( y, x, top, left, height, width ) {
		//Determines when x, y coordinates is over "b" element
		return $.ui.isOverAxis( y, top, height ) && $.ui.isOverAxis( x, left, width );
	}
});

})( jQuery );
;
;
/* module-key = 'com.atlassian.auiplugin:internal-jquery-ui-partial', location = 'node_modules/@atlassian/aui/src/js-vendor/jquery/jquery-ui/jquery.ui.widget.js' */
(function(c){if(c.cleanData){var h=c.cleanData;c.cleanData=function(a){for(var b=0,d;null!=(d=a[b]);b++)try{c(d).triggerHandler("remove")}catch(e){}h(a)}}else{var i=c.fn.remove;c.fn.remove=function(a,b){return this.each(function(){b||(!a||c.filter(a,[this]).length)&&c("*",this).add([this]).each(function(){try{c(this).triggerHandler("remove")}catch(a){}});return i.call(c(this),a,b)})}}c.widget=function(a,b,d){var e=a.split(".")[0],f,a=a.split(".")[1];f=e+"-"+a;d||(d=b,b=c.Widget);c.expr[":"][f]=function(b){return!!c.data(b,
a)};c[e]=c[e]||{};c[e][a]=function(a,b){arguments.length&&this._createWidget(a,b)};b=new b;b.options=c.extend(!0,{},b.options);c[e][a].prototype=c.extend(!0,b,{namespace:e,widgetName:a,widgetEventPrefix:c[e][a].prototype.widgetEventPrefix||a,widgetBaseClass:f},d);c.widget.bridge(a,c[e][a])};c.widget.bridge=function(a,b){c.fn[a]=function(d){var e="string"===typeof d,f=Array.prototype.slice.call(arguments,1),g=this,d=!e&&f.length?c.extend.apply(null,[!0,d].concat(f)):d;if(e&&"_"===d.charAt(0))return g;
e?this.each(function(){var b=c.data(this,a),e=b&&c.isFunction(b[d])?b[d].apply(b,f):b;if(e!==b&&void 0!==e)return g=e,!1}):this.each(function(){var e=c.data(this,a);e?e.option(d||{})._init():c.data(this,a,new b(d,this))});return g}};c.Widget=function(a,b){arguments.length&&this._createWidget(a,b)};c.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(a,b){c.data(b,this.widgetName,this);this.element=c(b);this.options=c.extend(!0,{},this.options,this._getCreateOptions(),
a);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return c.metadata&&c.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},
option:function(a,b){var d=a;if(0===arguments.length)return c.extend({},this.options);if("string"===typeof a){if(void 0===b)return this.options[a];d={};d[a]=b}this._setOptions(d);return this},_setOptions:function(a){var b=this;c.each(a,function(a,c){b._setOption(a,c)});return this},_setOption:function(a,b){this.options[a]=b;"disabled"===a&&this.widget()[b?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",b);return this},enable:function(){return this._setOption("disabled",
!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(a,b,d){var e,f=this.options[a],d=d||{},b=c.Event(b);b.type=(a===this.widgetEventPrefix?a:this.widgetEventPrefix+a).toLowerCase();b.target=this.element[0];if(a=b.originalEvent)for(e in a)e in b||(b[e]=a[e]);this.element.trigger(b,d);return!(c.isFunction(f)&&!1===f.call(this.element[0],b,d)||b.isDefaultPrevented())}}})(jQuery);;
;
/* module-key = 'com.atlassian.auiplugin:internal-jquery-ui-partial', location = 'node_modules/@atlassian/aui/src/js-vendor/jquery/jquery-ui/jquery.ui.mouse.js' */
(function(b){var d=!1;b(document).mouseup(function(){d=!1});b.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var a=this;this.element.bind("mousedown."+this.widgetName,function(b){return a._mouseDown(b)}).bind("click."+this.widgetName,function(c){if(!0===b.data(c.target,a.widgetName+".preventClickEvent"))return b.removeData(c.target,a.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1});this.started=!1},_mouseDestroy:function(){this.element.unbind("."+
this.widgetName);this._mouseMoveDelegate&&b(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(a){if(!d){this._mouseStarted&&this._mouseUp(a);this._mouseDownEvent=a;var c=this,e=1==a.which,f="string"==typeof this.options.cancel&&a.target.nodeName?b(a.target).closest(this.options.cancel).length:!1;if(!e||f||!this._mouseCapture(a))return!0;this.mouseDelayMet=!this.options.delay;this.mouseDelayMet||(this._mouseDelayTimer=
setTimeout(function(){c.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(a)&&this._mouseDelayMet(a)&&(this._mouseStarted=!1!==this._mouseStart(a),!this._mouseStarted))return a.preventDefault(),!0;!0===b.data(a.target,this.widgetName+".preventClickEvent")&&b.removeData(a.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(a){return c._mouseMove(a)};this._mouseUpDelegate=function(a){return c._mouseUp(a)};b(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+
this.widgetName,this._mouseUpDelegate);a.preventDefault();return d=!0}},_mouseMove:function(a){if(this._mouseMoved&&(b.ui.ie&&(!document.documentMode||9>document.documentMode)&&!a.button||!a.which))return this._mouseUp(a);if(a.which||a.button)this._mouseMoved=!0;if(this._mouseStarted)return this._mouseDrag(a),a.preventDefault();this._mouseDistanceMet(a)&&this._mouseDelayMet(a)&&((this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,a))?this._mouseDrag(a):this._mouseUp(a));return!this._mouseStarted},
_mouseUp:function(a){b(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);this._mouseStarted&&(this._mouseStarted=!1,a.target==this._mouseDownEvent.target&&b.data(a.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(a));return!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},
_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})(jQuery);;
;
/* module-key = 'com.atlassian.auiplugin:internal-jquery-ui-partial', location = 'node_modules/@atlassian/aui/src/js-vendor/jquery/jquery-ui/jquery.ui.draggable.js' */
(function(d){d.widget("ui.draggable",d.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){"original"==this.options.helper&&!/^(?:r|a|f)/.test(this.element.css("position"))&&
(this.element[0].style.position="relative");this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");this._mouseInit()},destroy:function(){if(this.element.data("draggable"))return this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this},_mouseCapture:function(a){var c=this.options;if(this.helper||c.disabled||d(a.target).is(".ui-resizable-handle"))return!1;
this.handle=this._getHandle(a);if(!this.handle)return!1;c.iframeFix&&d(!0===c.iframeFix?"iframe":c.iframeFix).each(function(){d('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1E3}).css(d(this).offset()).appendTo("body")});return!0},_mouseStart:function(a){var c=this.options;this.helper=this._createHelper(a);this.helper.addClass("ui-draggable-dragging");this._cacheHelperProportions();
d.ui.ddmanager&&(d.ui.ddmanager.current=this);this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};d.extend(this.offset,{click:{left:a.pageX-this.offset.left,top:a.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this.position=this._generatePosition(a);
this.originalPageX=a.pageX;this.originalPageY=a.pageY;c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt);c.containment&&this._setContainment();if(!1===this._trigger("start",a))return this._clear(),!1;this._cacheHelperProportions();d.ui.ddmanager&&!c.dropBehaviour&&d.ui.ddmanager.prepareOffsets(this,a);this._mouseDrag(a,!0);d.ui.ddmanager&&d.ui.ddmanager.dragStart(this,a);return!0},_mouseDrag:function(a,c){this.position=this._generatePosition(a);this.positionAbs=this._convertPositionTo("absolute");
if(!c){var b=this._uiHash();if(!1===this._trigger("drag",a,b))return this._mouseUp({}),!1;this.position=b.position}if(!this.options.axis||"y"!=this.options.axis)this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||"x"!=this.options.axis)this.helper[0].style.top=this.position.top+"px";d.ui.ddmanager&&d.ui.ddmanager.drag(this,a);return!1},_mouseStop:function(a){var c=!1;d.ui.ddmanager&&!this.options.dropBehaviour&&(c=d.ui.ddmanager.drop(this,a));this.dropped&&(c=this.dropped,this.dropped=
!1);for(var b=this.element[0],f=!1;b&&(b=b.parentNode);)b==document&&(f=!0);if(!f&&"original"===this.options.helper)return!1;if("invalid"==this.options.revert&&!c||"valid"==this.options.revert&&c||!0===this.options.revert||d.isFunction(this.options.revert)&&this.options.revert.call(this.element,c)){var e=this;d(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){e._trigger("stop",a)!==false&&e._clear()})}else!1!==this._trigger("stop",a)&&this._clear();return!1},
_mouseUp:function(a){d("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)});d.ui.ddmanager&&d.ui.ddmanager.dragStop(this,a);return d.ui.mouse.prototype._mouseUp.call(this,a)},cancel:function(){this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear();return this},_getHandle:function(a){var c=!this.options.handle||!d(this.options.handle,this.element).length?!0:!1;d(this.options.handle,this.element).find("*").andSelf().each(function(){this==a.target&&(c=!0)});
return c},_createHelper:function(a){var c=this.options,a=d.isFunction(c.helper)?d(c.helper.apply(this.element[0],[a])):"clone"==c.helper?this.element.clone().removeAttr("id"):this.element;a.parents("body").length||a.appendTo("parent"==c.appendTo?this.element[0].parentNode:c.appendTo);a[0]!=this.element[0]&&!/(fixed|absolute)/.test(a.css("position"))&&a.css("position","absolute");return a},_adjustOffsetFromHelper:function(a){"string"==typeof a&&(a=a.split(" "));d.isArray(a)&&(a={left:+a[0],top:+a[1]||
0});"left"in a&&(this.offset.click.left=a.left+this.margins.left);"right"in a&&(this.offset.click.left=this.helperProportions.width-a.right+this.margins.left);"top"in a&&(this.offset.click.top=a.top+this.margins.top);"bottom"in a&&(this.offset.click.top=this.helperProportions.height-a.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var a=this.offsetParent.offset();"absolute"==this.cssPosition&&(this.scrollParent[0]!=document&&d.ui.contains(this.scrollParent[0],
this.offsetParent[0]))&&(a.left+=this.scrollParent.scrollLeft(),a.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&d.browser.msie)a={top:0,left:0};return{top:a.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:a.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var a=this.element.position();return{top:a.top-
(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),
height:this.helper.outerHeight()}},_setContainment:function(){var a=this.options;"parent"==a.containment&&(a.containment=this.helper[0].parentNode);if("document"==a.containment||"window"==a.containment)this.containment=["document"==a.containment?0:d(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"==a.containment?0:d(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"==a.containment?0:d(window).scrollLeft())+d("document"==a.containment?document:
window).width()-this.helperProportions.width-this.margins.left,("document"==a.containment?0:d(window).scrollTop())+(d("document"==a.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(a.containment)&&a.containment.constructor!=Array){var a=d(a.containment),c=a[0];if(c){a.offset();var b="hidden"!=d(c).css("overflow");this.containment=[(parseInt(d(c).css("borderLeftWidth"),10)||0)+(parseInt(d(c).css("paddingLeft"),
10)||0),(parseInt(d(c).css("borderTopWidth"),10)||0)+(parseInt(d(c).css("paddingTop"),10)||0),(b?Math.max(c.scrollWidth,c.offsetWidth):c.offsetWidth)-(parseInt(d(c).css("borderLeftWidth"),10)||0)-(parseInt(d(c).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(b?Math.max(c.scrollHeight,c.offsetHeight):c.offsetHeight)-(parseInt(d(c).css("borderTopWidth"),10)||0)-(parseInt(d(c).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];
this.relative_container=a}}else a.containment.constructor==Array&&(this.containment=a.containment)},_convertPositionTo:function(a,c){c||(c=this.position);var b="absolute"==a?1:-1,f="absolute"==this.cssPosition&&!(this.scrollParent[0]!=document&&d.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,e=/(html|body)/i.test(f[0].tagName);return{top:c.top+this.offset.relative.top*b+this.offset.parent.top*b-(d.browser.safari&&526>d.browser.version&&"fixed"==this.cssPosition?
0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():e?0:f.scrollTop())*b),left:c.left+this.offset.relative.left*b+this.offset.parent.left*b-(d.browser.safari&&526>d.browser.version&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():e?0:f.scrollLeft())*b)}},_generatePosition:function(a){var c=this.options,b="absolute"==this.cssPosition&&!(this.scrollParent[0]!=document&&d.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,
f=/(html|body)/i.test(b[0].tagName),e=a.pageX,h=a.pageY;if(this.originalPosition){var g;this.containment&&(this.relative_container?(g=this.relative_container.offset(),g=[this.containment[0]+g.left,this.containment[1]+g.top,this.containment[2]+g.left,this.containment[3]+g.top]):g=this.containment,a.pageX-this.offset.click.left<g[0]&&(e=g[0]+this.offset.click.left),a.pageY-this.offset.click.top<g[1]&&(h=g[1]+this.offset.click.top),a.pageX-this.offset.click.left>g[2]&&(e=g[2]+this.offset.click.left),
a.pageY-this.offset.click.top>g[3]&&(h=g[3]+this.offset.click.top));c.grid&&(h=c.grid[1]?this.originalPageY+Math.round((h-this.originalPageY)/c.grid[1])*c.grid[1]:this.originalPageY,h=g?!(h-this.offset.click.top<g[1]||h-this.offset.click.top>g[3])?h:!(h-this.offset.click.top<g[1])?h-c.grid[1]:h+c.grid[1]:h,e=c.grid[0]?this.originalPageX+Math.round((e-this.originalPageX)/c.grid[0])*c.grid[0]:this.originalPageX,e=g?!(e-this.offset.click.left<g[0]||e-this.offset.click.left>g[2])?e:!(e-this.offset.click.left<
g[0])?e-c.grid[0]:e+c.grid[0]:e)}return{top:h-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(d.browser.safari&&526>d.browser.version&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():f?0:b.scrollTop()),left:e-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(d.browser.safari&&526>d.browser.version&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():f?0:b.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");
this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove();this.helper=null;this.cancelHelperRemoval=!1},_trigger:function(a,c,b){b=b||this._uiHash();d.ui.plugin.call(this,a,[c,b]);"drag"==a&&(this.positionAbs=this._convertPositionTo("absolute"));return d.Widget.prototype._trigger.call(this,a,c,b)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});d.extend(d.ui.draggable,{version:"1.8.24"});
d.ui.plugin.add("draggable","connectToSortable",{start:function(a,c){var b=d(this).data("draggable"),f=b.options,e=d.extend({},c,{item:b.element});b.sortables=[];d(f.connectToSortable).each(function(){var c=d.data(this,"sortable");c&&!c.options.disabled&&(b.sortables.push({instance:c,shouldRevert:c.options.revert}),c.refreshPositions(),c._trigger("activate",a,e))})},stop:function(a,c){var b=d(this).data("draggable"),f=d.extend({},c,{item:b.element});d.each(b.sortables,function(){this.instance.isOver?
(this.instance.isOver=0,b.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(a),this.instance.options.helper=this.instance.options._helper,"original"==b.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",a,f))})},drag:function(a,c){var b=d(this).data("draggable"),f=this;d.each(b.sortables,function(){this.instance.positionAbs=
b.positionAbs;this.instance.helperProportions=b.helperProportions;this.instance.offset.click=b.offset.click;this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=d(f).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return c.helper[0]},a.target=this.instance.currentItem[0],this.instance._mouseCapture(a,
!0),this.instance._mouseStart(a,!0,!0),this.instance.offset.click.top=b.offset.click.top,this.instance.offset.click.left=b.offset.click.left,this.instance.offset.parent.left-=b.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=b.offset.parent.top-this.instance.offset.parent.top,b._trigger("toSortable",a),b.dropped=this.instance.element,b.currentItem=b.element,this.instance.fromOutside=b),this.instance.currentItem&&this.instance._mouseDrag(a)):this.instance.isOver&&
(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",a,this.instance._uiHash(this.instance)),this.instance._mouseStop(a,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),b._trigger("fromSortable",a),b.dropped=!1)})}});d.ui.plugin.add("draggable","cursor",{start:function(){var a=d("body"),c=d(this).data("draggable").options;
a.css("cursor")&&(c._cursor=a.css("cursor"));a.css("cursor",c.cursor)},stop:function(){var a=d(this).data("draggable").options;a._cursor&&d("body").css("cursor",a._cursor)}});d.ui.plugin.add("draggable","opacity",{start:function(a,c){var b=d(c.helper),f=d(this).data("draggable").options;b.css("opacity")&&(f._opacity=b.css("opacity"));b.css("opacity",f.opacity)},stop:function(a,c){var b=d(this).data("draggable").options;b._opacity&&d(c.helper).css("opacity",b._opacity)}});d.ui.plugin.add("draggable",
"scroll",{start:function(){var a=d(this).data("draggable");a.scrollParent[0]!=document&&"HTML"!=a.scrollParent[0].tagName&&(a.overflowOffset=a.scrollParent.offset())},drag:function(a){var c=d(this).data("draggable"),b=c.options,f=!1;if(c.scrollParent[0]!=document&&"HTML"!=c.scrollParent[0].tagName){if(!b.axis||"x"!=b.axis)c.overflowOffset.top+c.scrollParent[0].offsetHeight-a.pageY<b.scrollSensitivity?c.scrollParent[0].scrollTop=f=c.scrollParent[0].scrollTop+b.scrollSpeed:a.pageY-c.overflowOffset.top<
b.scrollSensitivity&&(c.scrollParent[0].scrollTop=f=c.scrollParent[0].scrollTop-b.scrollSpeed);if(!b.axis||"y"!=b.axis)c.overflowOffset.left+c.scrollParent[0].offsetWidth-a.pageX<b.scrollSensitivity?c.scrollParent[0].scrollLeft=f=c.scrollParent[0].scrollLeft+b.scrollSpeed:a.pageX-c.overflowOffset.left<b.scrollSensitivity&&(c.scrollParent[0].scrollLeft=f=c.scrollParent[0].scrollLeft-b.scrollSpeed)}else{if(!b.axis||"x"!=b.axis)a.pageY-d(document).scrollTop()<b.scrollSensitivity?f=d(document).scrollTop(d(document).scrollTop()-
b.scrollSpeed):d(window).height()-(a.pageY-d(document).scrollTop())<b.scrollSensitivity&&(f=d(document).scrollTop(d(document).scrollTop()+b.scrollSpeed));if(!b.axis||"y"!=b.axis)a.pageX-d(document).scrollLeft()<b.scrollSensitivity?f=d(document).scrollLeft(d(document).scrollLeft()-b.scrollSpeed):d(window).width()-(a.pageX-d(document).scrollLeft())<b.scrollSensitivity&&(f=d(document).scrollLeft(d(document).scrollLeft()+b.scrollSpeed))}!1!==f&&(d.ui.ddmanager&&!b.dropBehaviour)&&d.ui.ddmanager.prepareOffsets(c,
a)}});d.ui.plugin.add("draggable","snap",{start:function(){var a=d(this).data("draggable"),c=a.options;a.snapElements=[];d(c.snap.constructor!=String?c.snap.items||":data(draggable)":c.snap).each(function(){var b=d(this),c=b.offset();this!=a.element[0]&&a.snapElements.push({item:this,width:b.outerWidth(),height:b.outerHeight(),top:c.top,left:c.left})})},drag:function(a,c){for(var b=d(this).data("draggable"),f=b.options,e=f.snapTolerance,h=c.offset.left,g=h+b.helperProportions.width,n=c.offset.top,
o=n+b.helperProportions.height,i=b.snapElements.length-1;0<=i;i--){var j=b.snapElements[i].left,l=j+b.snapElements[i].width,k=b.snapElements[i].top,m=k+b.snapElements[i].height;if(j-e<h&&h<l+e&&k-e<n&&n<m+e||j-e<h&&h<l+e&&k-e<o&&o<m+e||j-e<g&&g<l+e&&k-e<n&&n<m+e||j-e<g&&g<l+e&&k-e<o&&o<m+e){if("inner"!=f.snapMode){var p=Math.abs(k-o)<=e,q=Math.abs(m-n)<=e,r=Math.abs(j-g)<=e,s=Math.abs(l-h)<=e;p&&(c.position.top=b._convertPositionTo("relative",{top:k-b.helperProportions.height,left:0}).top-b.margins.top);
q&&(c.position.top=b._convertPositionTo("relative",{top:m,left:0}).top-b.margins.top);r&&(c.position.left=b._convertPositionTo("relative",{top:0,left:j-b.helperProportions.width}).left-b.margins.left);s&&(c.position.left=b._convertPositionTo("relative",{top:0,left:l}).left-b.margins.left)}var t=p||q||r||s;if("outer"!=f.snapMode&&(p=Math.abs(k-n)<=e,q=Math.abs(m-o)<=e,r=Math.abs(j-h)<=e,s=Math.abs(l-g)<=e,p&&(c.position.top=b._convertPositionTo("relative",{top:k,left:0}).top-b.margins.top),q&&(c.position.top=
b._convertPositionTo("relative",{top:m-b.helperProportions.height,left:0}).top-b.margins.top),r&&(c.position.left=b._convertPositionTo("relative",{top:0,left:j}).left-b.margins.left),s))c.position.left=b._convertPositionTo("relative",{top:0,left:l-b.helperProportions.width}).left-b.margins.left;!b.snapElements[i].snapping&&(p||q||r||s||t)&&b.options.snap.snap&&b.options.snap.snap.call(b.element,a,d.extend(b._uiHash(),{snapItem:b.snapElements[i].item}));b.snapElements[i].snapping=p||q||r||s||t}else b.snapElements[i].snapping&&
b.options.snap.release&&b.options.snap.release.call(b.element,a,d.extend(b._uiHash(),{snapItem:b.snapElements[i].item})),b.snapElements[i].snapping=!1}}});d.ui.plugin.add("draggable","stack",{start:function(){var a=d(this).data("draggable").options,a=d.makeArray(d(a.stack)).sort(function(a,c){return(parseInt(d(a).css("zIndex"),10)||0)-(parseInt(d(c).css("zIndex"),10)||0)});if(a.length){var c=parseInt(a[0].style.zIndex)||0;d(a).each(function(a){this.style.zIndex=c+a});this[0].style.zIndex=c+a.length}}});
d.ui.plugin.add("draggable","zIndex",{start:function(a,c){var b=d(c.helper),f=d(this).data("draggable").options;b.css("zIndex")&&(f._zIndex=b.css("zIndex"));b.css("zIndex",f.zIndex)},stop:function(a,c){var b=d(this).data("draggable").options;b._zIndex&&d(c.helper).css("zIndex",b._zIndex)}})})(jQuery);;
;
/* module-key = 'com.atlassian.auiplugin:internal-jquery-ui-partial', location = 'node_modules/@atlassian/aui/src/js-vendor/jquery/jquery-ui/jquery.ui.sortable.js' */
(function(d){d.widget("ui.sortable",d.ui.mouse,{widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1E3},_create:function(){var a=this.options;this.containerCache={};this.element.addClass("ui-sortable");
this.refresh();this.floating=this.items.length?"x"===a.axis||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1;this.offset=this.element.offset();this._mouseInit();this.ready=!0},destroy:function(){d.Widget.prototype.destroy.call(this);this.element.removeClass("ui-sortable ui-sortable-disabled");this._mouseDestroy();for(var a=this.items.length-1;0<=a;a--)this.items[a].item.removeData(this.widgetName+"-item");return this},_setOption:function(a,
b){"disabled"===a?(this.options[a]=b,this.widget()[b?"addClass":"removeClass"]("ui-sortable-disabled")):d.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(a,b){var c=this;if(this.reverting||this.options.disabled||"static"==this.options.type)return!1;this._refreshItems(a);var e=null,f=this;d(a.target).parents().each(function(){if(d.data(this,c.widgetName+"-item")==f)return e=d(this),!1});d.data(a.target,c.widgetName+"-item")==f&&(e=d(a.target));if(!e)return!1;if(this.options.handle&&
!b){var g=!1;d(this.options.handle,e).find("*").andSelf().each(function(){this==a.target&&(g=!0)});if(!g)return!1}this.currentItem=e;this._removeCurrentsFromItems();return!0},_mouseStart:function(a,b,c){b=this.options;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(a);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-
this.margins.left};d.extend(this.offset,{click:{left:a.pageX-this.offset.left,top:a.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");this.originalPosition=this._generatePosition(a);this.originalPageX=a.pageX;this.originalPageY=a.pageY;b.cursorAt&&this._adjustOffsetFromHelper(b.cursorAt);this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};
this.helper[0]!=this.currentItem[0]&&this.currentItem.hide();this._createPlaceholder();b.containment&&this._setContainment();b.cursor&&(d("body").css("cursor")&&(this._storedCursor=d("body").css("cursor")),d("body").css("cursor",b.cursor));b.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",b.opacity));b.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",b.zIndex));this.scrollParent[0]!=
document&&"HTML"!=this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset());this._trigger("start",a,this._uiHash());this._preserveHelperProportions||this._cacheHelperProportions();if(!c)for(c=this.containers.length-1;0<=c;c--)this.containers[c]._trigger("activate",a,this._uiHash(this));d.ui.ddmanager&&(d.ui.ddmanager.current=this);d.ui.ddmanager&&!b.dropBehaviour&&d.ui.ddmanager.prepareOffsets(this,a);this.dragging=!0;this.helper.addClass("ui-sortable-helper");this._mouseDrag(a);
return!0},_mouseDrag:function(a){this.position=this._generatePosition(a);this.positionAbs=this._convertPositionTo("absolute");this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);if(this.options.scroll){var b=this.options,c=!1;this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-a.pageY<b.scrollSensitivity?this.scrollParent[0].scrollTop=c=this.scrollParent[0].scrollTop+b.scrollSpeed:a.pageY-this.overflowOffset.top<
b.scrollSensitivity&&(this.scrollParent[0].scrollTop=c=this.scrollParent[0].scrollTop-b.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-a.pageX<b.scrollSensitivity)?this.scrollParent[0].scrollLeft=c=this.scrollParent[0].scrollLeft+b.scrollSpeed:a.pageX-this.overflowOffset.left<b.scrollSensitivity&&(this.scrollParent[0].scrollLeft=c=this.scrollParent[0].scrollLeft-b.scrollSpeed):(a.pageY-d(document).scrollTop()<b.scrollSensitivity?c=d(document).scrollTop(d(document).scrollTop()-
b.scrollSpeed):d(window).height()-(a.pageY-d(document).scrollTop())<b.scrollSensitivity&&(c=d(document).scrollTop(d(document).scrollTop()+b.scrollSpeed)),a.pageX-d(document).scrollLeft()<b.scrollSensitivity?c=d(document).scrollLeft(d(document).scrollLeft()-b.scrollSpeed):d(window).width()-(a.pageX-d(document).scrollLeft())<b.scrollSensitivity&&(c=d(document).scrollLeft(d(document).scrollLeft()+b.scrollSpeed)));!1!==c&&(d.ui.ddmanager&&!b.dropBehaviour)&&d.ui.ddmanager.prepareOffsets(this,a)}this.positionAbs=
this._convertPositionTo("absolute");if(!this.options.axis||"y"!=this.options.axis)this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||"x"!=this.options.axis)this.helper[0].style.top=this.position.top+"px";for(b=this.items.length-1;0<=b;b--){var c=this.items[b],e=c.item[0],f=this._intersectsWithPointer(c);if(f&&c.instance===this.currentContainer&&e!=this.currentItem[0]&&this.placeholder[1==f?"next":"prev"]()[0]!=e&&!d.ui.contains(this.placeholder[0],e)&&("semi-dynamic"==this.options.type?
!d.ui.contains(this.element[0],e):1)){this.direction=1==f?"down":"up";if("pointer"==this.options.tolerance||this._intersectsWithSides(c))this._rearrange(a,c);else break;this._trigger("change",a,this._uiHash());break}}this._contactContainers(a);d.ui.ddmanager&&d.ui.ddmanager.drag(this,a);this._trigger("sort",a,this._uiHash());this.lastPositionAbs=this.positionAbs;return!1},_mouseStop:function(a,b){if(a){d.ui.ddmanager&&!this.options.dropBehaviour&&d.ui.ddmanager.drop(this,a);if(this.options.revert){var c=
this,e=c.placeholder.offset();c.reverting=!0;d(this.helper).animate({left:e.left-this.offset.parent.left-c.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:e.top-this.offset.parent.top-c.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){c._clear(a)})}else this._clear(a,b);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null});"original"==this.options.helper?
this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var a=this.containers.length-1;0<=a;a--)this.containers[a]._trigger("deactivate",null,this._uiHash(this)),this.containers[a].containerCache.over&&(this.containers[a]._trigger("out",null,this._uiHash(this)),this.containers[a].containerCache.over=0)}this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!=this.options.helper&&(this.helper&&
this.helper[0].parentNode)&&this.helper.remove(),d.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?d(this.domPosition.prev).after(this.currentItem):d(this.domPosition.parent).prepend(this.currentItem));return this},serialize:function(a){var b=this._getItemsAsjQuery(a&&a.connected),c=[],a=a||{};d(b).each(function(){var b=(d(a.item||this).attr(a.attribute||"id")||"").match(a.expression||/(.+)[-=_](.+)/);b&&c.push((a.key||b[1]+"[]")+"="+(a.key&&a.expression?
b[1]:b[2]))});!c.length&&a.key&&c.push(a.key+"=");return c.join("&")},toArray:function(a){var b=this._getItemsAsjQuery(a&&a.connected),c=[],a=a||{};b.each(function(){c.push(d(a.item||this).attr(a.attribute||"id")||"")});return c},_intersectsWith:function(a){var b=this.positionAbs.left,c=b+this.helperProportions.width,d=this.positionAbs.top,f=d+this.helperProportions.height,g=a.left,h=g+a.width,i=a.top,j=i+a.height,k=this.offset.click.top,l=this.offset.click.left;return"pointer"==this.options.tolerance||
this.options.forcePointerForContainers||"pointer"!=this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]?d+k>i&&d+k<j&&b+l>g&&b+l<h:g<b+this.helperProportions.width/2&&c-this.helperProportions.width/2<h&&i<d+this.helperProportions.height/2&&f-this.helperProportions.height/2<j},_intersectsWithPointer:function(a){var b="x"===this.options.axis||d.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,a.top,a.height),a="y"===this.options.axis||
d.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,a.left,a.width),b=b&&a,a=this._getDragVerticalDirection(),c=this._getDragHorizontalDirection();return!b?!1:this.floating?c&&"right"==c||"down"==a?2:1:a&&("down"==a?2:1)},_intersectsWithSides:function(a){var b=d.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,a.top+a.height/2,a.height),a=d.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,a.left+a.width/2,a.width),c=this._getDragVerticalDirection(),e=this._getDragHorizontalDirection();
return this.floating&&e?"right"==e&&a||"left"==e&&!a:c&&("down"==c&&b||"up"==c&&!b)},_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return 0!=a&&(0<a?"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return 0!=a&&(0<a?"right":"left")},refresh:function(a){this._refreshItems(a);this.refreshPositions();return this},_connectWith:function(){var a=this.options;return a.connectWith.constructor==String?[a.connectWith]:
a.connectWith},_getItemsAsjQuery:function(a){var b=[],c=[],e=this._connectWith();if(e&&a)for(a=e.length-1;0<=a;a--)for(var f=d(e[a]),g=f.length-1;0<=g;g--){var h=d.data(f[g],this.widgetName);h&&(h!=this&&!h.options.disabled)&&c.push([d.isFunction(h.options.items)?h.options.items.call(h.element):d(h.options.items,h.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),h])}c.push([d.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):
d(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(a=c.length-1;0<=a;a--)c[a][0].each(function(){b.push(this)});return d(b)},_removeCurrentsFromItems:function(){for(var a=this.currentItem.find(":data("+this.widgetName+"-item)"),b=0;b<this.items.length;b++)for(var c=0;c<a.length;c++)a[c]==this.items[b].item[0]&&this.items.splice(b,1)},_refreshItems:function(a){this.items=[];this.containers=[this];var b=this.items,c=[[d.isFunction(this.options.items)?
this.options.items.call(this.element[0],a,{item:this.currentItem}):d(this.options.items,this.element),this]],e=this._connectWith();if(e&&this.ready)for(var f=e.length-1;0<=f;f--)for(var g=d(e[f]),h=g.length-1;0<=h;h--){var i=d.data(g[h],this.widgetName);i&&(i!=this&&!i.options.disabled)&&(c.push([d.isFunction(i.options.items)?i.options.items.call(i.element[0],a,{item:this.currentItem}):d(i.options.items,i.element),i]),this.containers.push(i))}for(f=c.length-1;0<=f;f--){a=c[f][1];e=c[f][0];h=0;for(g=
e.length;h<g;h++)i=d(e[h]),i.data(this.widgetName+"-item",a),b.push({item:i,instance:a,width:0,height:0,left:0,top:0})}},refreshPositions:function(a){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var b=this.items.length-1;0<=b;b--){var c=this.items[b];if(!(c.instance!=this.currentContainer&&this.currentContainer&&c.item[0]!=this.currentItem[0])){var e=this.options.toleranceElement?d(this.options.toleranceElement,c.item):c.item;a||(c.width=e.outerWidth(),c.height=
e.outerHeight());e=e.offset();c.left=e.left;c.top=e.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(b=this.containers.length-1;0<=b;b--)e=this.containers[b].element.offset(),this.containers[b].containerCache.left=e.left,this.containers[b].containerCache.top=e.top,this.containers[b].containerCache.width=this.containers[b].element.outerWidth(),this.containers[b].containerCache.height=this.containers[b].element.outerHeight();
return this},_createPlaceholder:function(a){var b=a||this,c=b.options;if(!c.placeholder||c.placeholder.constructor==String){var e=c.placeholder;c.placeholder={element:function(){var a=d(document.createElement(b.currentItem[0].nodeName)).addClass(e||b.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];e||(a.style.visibility="hidden");return a},update:function(a,d){if(!e||c.forcePlaceholderSize)d.height()||d.height(b.currentItem.innerHeight()-parseInt(b.currentItem.css("paddingTop")||
0,10)-parseInt(b.currentItem.css("paddingBottom")||0,10)),d.width()||d.width(b.currentItem.innerWidth()-parseInt(b.currentItem.css("paddingLeft")||0,10)-parseInt(b.currentItem.css("paddingRight")||0,10))}}}b.placeholder=d(c.placeholder.element.call(b.element,b.currentItem));b.currentItem.after(b.placeholder);c.placeholder.update(b,b.placeholder)},_contactContainers:function(a){for(var b=null,c=null,e=this.containers.length-1;0<=e;e--)if(!d.ui.contains(this.currentItem[0],this.containers[e].element[0]))if(this._intersectsWith(this.containers[e].containerCache)){if(!b||
!d.ui.contains(this.containers[e].element[0],b.element[0]))b=this.containers[e],c=e}else this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",a,this._uiHash(this)),this.containers[e].containerCache.over=0);if(b)if(1===this.containers.length)this.containers[c]._trigger("over",a,this._uiHash(this)),this.containers[c].containerCache.over=1;else if(this.currentContainer!=this.containers[c]){for(var b=1E4,e=null,f=this.positionAbs[this.containers[c].floating?"left":"top"],g=this.items.length-
1;0<=g;g--)if(d.ui.contains(this.containers[c].element[0],this.items[g].item[0])){var h=this.containers[c].floating?this.items[g].item.offset().left:this.items[g].item.offset().top;Math.abs(h-f)<b&&(b=Math.abs(h-f),e=this.items[g],this.direction=0<h-f?"down":"up")}if(e||this.options.dropOnEmpty)this.currentContainer=this.containers[c],e?this._rearrange(a,e,null,!0):this._rearrange(a,null,this.containers[c].element,!0),this._trigger("change",a,this._uiHash()),this.containers[c]._trigger("change",a,
this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[c]._trigger("over",a,this._uiHash(this)),this.containers[c].containerCache.over=1}},_createHelper:function(a){var b=this.options,a=d.isFunction(b.helper)?d(b.helper.apply(this.element[0],[a,this.currentItem])):"clone"==b.helper?this.currentItem.clone():this.currentItem;a.parents("body").length||d("parent"!=b.appendTo?b.appendTo:this.currentItem[0].parentNode)[0].appendChild(a[0]);a[0]==this.currentItem[0]&&
(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")});(""==a[0].style.width||b.forceHelperSize)&&a.width(this.currentItem.width());(""==a[0].style.height||b.forceHelperSize)&&a.height(this.currentItem.height());return a},_adjustOffsetFromHelper:function(a){"string"==typeof a&&(a=a.split(" "));d.isArray(a)&&(a={left:+a[0],top:+a[1]||0});"left"in a&&
(this.offset.click.left=a.left+this.margins.left);"right"in a&&(this.offset.click.left=this.helperProportions.width-a.right+this.margins.left);"top"in a&&(this.offset.click.top=a.top+this.margins.top);"bottom"in a&&(this.offset.click.top=this.helperProportions.height-a.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var a=this.offsetParent.offset();"absolute"==this.cssPosition&&(this.scrollParent[0]!=document&&d.ui.contains(this.scrollParent[0],this.offsetParent[0]))&&
(a.left+=this.scrollParent.scrollLeft(),a.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&d.browser.msie)a={top:0,left:0};return{top:a.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:a.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),
10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var a=this.options;"parent"==a.containment&&(a.containment=
this.helper[0].parentNode);if("document"==a.containment||"window"==a.containment)this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,d("document"==a.containment?document:window).width()-this.helperProportions.width-this.margins.left,(d("document"==a.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(a.containment)){var b=
d(a.containment)[0],a=d(a.containment).offset(),c="hidden"!=d(b).css("overflow");this.containment=[a.left+(parseInt(d(b).css("borderLeftWidth"),10)||0)+(parseInt(d(b).css("paddingLeft"),10)||0)-this.margins.left,a.top+(parseInt(d(b).css("borderTopWidth"),10)||0)+(parseInt(d(b).css("paddingTop"),10)||0)-this.margins.top,a.left+(c?Math.max(b.scrollWidth,b.offsetWidth):b.offsetWidth)-(parseInt(d(b).css("borderLeftWidth"),10)||0)-(parseInt(d(b).css("paddingRight"),10)||0)-this.helperProportions.width-
this.margins.left,a.top+(c?Math.max(b.scrollHeight,b.offsetHeight):b.offsetHeight)-(parseInt(d(b).css("borderTopWidth"),10)||0)-(parseInt(d(b).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(a,b){b||(b=this.position);var c="absolute"==a?1:-1,e="absolute"==this.cssPosition&&!(this.scrollParent[0]!=document&&d.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,f=/(html|body)/i.test(e[0].tagName);return{top:b.top+
this.offset.relative.top*c+this.offset.parent.top*c-(d.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():f?0:e.scrollTop())*c),left:b.left+this.offset.relative.left*c+this.offset.parent.left*c-(d.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():f?0:e.scrollLeft())*c)}},_generatePosition:function(a){var b=this.options,c="absolute"==this.cssPosition&&!(this.scrollParent[0]!=document&&d.ui.contains(this.scrollParent[0],
this.offsetParent[0]))?this.offsetParent:this.scrollParent,e=/(html|body)/i.test(c[0].tagName);"relative"==this.cssPosition&&!(this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset());var f=a.pageX,g=a.pageY;if(this.originalPosition&&(this.containment&&(a.pageX-this.offset.click.left<this.containment[0]&&(f=this.containment[0]+this.offset.click.left),a.pageY-this.offset.click.top<this.containment[1]&&(g=this.containment[1]+this.offset.click.top),
a.pageX-this.offset.click.left>this.containment[2]&&(f=this.containment[2]+this.offset.click.left),a.pageY-this.offset.click.top>this.containment[3]&&(g=this.containment[3]+this.offset.click.top)),b.grid))g=this.originalPageY+Math.round((g-this.originalPageY)/b.grid[1])*b.grid[1],g=this.containment?!(g-this.offset.click.top<this.containment[1]||g-this.offset.click.top>this.containment[3])?g:!(g-this.offset.click.top<this.containment[1])?g-b.grid[1]:g+b.grid[1]:g,f=this.originalPageX+Math.round((f-
this.originalPageX)/b.grid[0])*b.grid[0],f=this.containment?!(f-this.offset.click.left<this.containment[0]||f-this.offset.click.left>this.containment[2])?f:!(f-this.offset.click.left<this.containment[0])?f-b.grid[0]:f+b.grid[0]:f;return{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(d.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():e?0:c.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+
(d.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():e?0:c.scrollLeft())}},_rearrange:function(a,b,c,d){c?c[0].appendChild(this.placeholder[0]):b.item[0].parentNode.insertBefore(this.placeholder[0],"down"==this.direction?b.item[0]:b.item[0].nextSibling);this.counter=this.counter?++this.counter:1;var f=this,g=this.counter;window.setTimeout(function(){g==f.counter&&f.refreshPositions(!d)},0)},_clear:function(a,b){this.reverting=!1;var c=[];!this._noFinalSort&&
this.currentItem.parent().length&&this.placeholder.before(this.currentItem);this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var e in this._storedCSS)if("auto"==this._storedCSS[e]||"static"==this._storedCSS[e])this._storedCSS[e]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!b&&c.push(function(a){this._trigger("receive",a,this._uiHash(this.fromOutside))});(this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||
this.domPosition.parent!=this.currentItem.parent()[0])&&!b&&c.push(function(a){this._trigger("update",a,this._uiHash())});this!==this.currentContainer&&!b&&(c.push(function(a){this._trigger("remove",a,this._uiHash())}),c.push(function(a){return function(b){a._trigger("receive",b,this._uiHash(this))}}.call(this,this.currentContainer)),c.push(function(a){return function(b){a._trigger("update",b,this._uiHash(this))}}.call(this,this.currentContainer)));for(e=this.containers.length-1;0<=e;e--)b||c.push(function(a){return function(b){a._trigger("deactivate",
b,this._uiHash(this))}}.call(this,this.containers[e])),this.containers[e].containerCache.over&&(c.push(function(a){return function(b){a._trigger("out",b,this._uiHash(this))}}.call(this,this.containers[e])),this.containers[e].containerCache.over=0);this._storedCursor&&d("body").css("cursor",this._storedCursor);this._storedOpacity&&this.helper.css("opacity",this._storedOpacity);this._storedZIndex&&this.helper.css("zIndex","auto"==this._storedZIndex?"":this._storedZIndex);this.dragging=!1;if(this.cancelHelperRemoval){if(!b){this._trigger("beforeStop",
a,this._uiHash());for(e=0;e<c.length;e++)c[e].call(this,a);this._trigger("stop",a,this._uiHash())}return this.fromOutside=!1}b||this._trigger("beforeStop",a,this._uiHash());this.placeholder[0].parentNode.removeChild(this.placeholder[0]);this.helper[0]!=this.currentItem[0]&&this.helper.remove();this.helper=null;if(!b){for(e=0;e<c.length;e++)c[e].call(this,a);this._trigger("stop",a,this._uiHash())}this.fromOutside=!1;return!0},_trigger:function(){!1===d.Widget.prototype._trigger.apply(this,arguments)&&
this.cancel()},_uiHash:function(a){var b=a||this;return{helper:b.helper,placeholder:b.placeholder||d([]),position:b.position,originalPosition:b.originalPosition,offset:b.positionAbs,item:b.currentItem,sender:a?a.element:null}}});d.extend(d.ui.sortable,{version:"1.8.24"})})(jQuery);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-jquery-jquery-hotkeys', location = 'node_modules/@atlassian/aui/src/js/jquery/jquery.hotkeys.js' */
("undefined"===typeof window?global:window).__9d8814c2d651791325671e2fd4ff2ade=function(){var a=jQuery,c=function(a){this.num=0;this.timer=0<a?a:!1},k=function(h){if(a.isPlainObject(h.data)||a.isArray(h.data)||"string"===typeof h.data){var i=h.handler,g={timer:700,combo:[]},b=h.data;"string"===typeof b?g.combo=[b]:a.isArray(b)?g.combo=b:a.extend(g,b);g.combo=a.map(g.combo,function(a){return a.toLowerCase()});h.index=new c(g.timer);h.handler=function(e){if(!(this!==e.target&&/textarea|select|input/i.test(e.target.nodeName))){var d=
"keypress"!==e.type?a.hotkeys.specialKeys[e.which]:null,b=String.fromCharCode(e.which).toLowerCase(),f="",c={};e.altKey&&"alt"!==d&&(f+="alt+");e.ctrlKey&&"ctrl"!==d&&(f+="ctrl+");e.metaKey&&(!e.ctrlKey&&"meta"!==d)&&(f+="meta+");e.shiftKey&&"shift"!==d&&(f+="shift+");e.metaKey&&"["===b&&(b=null);d&&(c[f+d]=!0);b&&(c[f+b]=!0);/shift+/.test(f)&&(c[f.replace("shift+","")+a.hotkeys.shiftNums[d||b]]=!0);d=h.index;b=g.combo;if(j(b[d.val()],c)){if(d.val()===b.length-1)return d.reset(),i.apply(this,arguments);
d.inc()}else d.reset(),j(b[0],c)&&d.inc()}}}},j=function(a,c){for(var g=a.split(" "),b=0,e=g.length;b<e;b++)if(c[g[b]])return!0;return!1};a.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",91:"meta",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",
111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",188:",",190:".",191:"/",224:"meta",219:"[",221:"]"},keypressKeys:["<",">","?"],shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(","0":")","-":"_","=":"+",";":":","'":'"',",":"<",".":">","/":"?","\\":"|"}};a.each(a.hotkeys.keypressKeys,function(c,i){a.hotkeys.shiftNums[i]=i});c.prototype.val=function(){return this.num};c.prototype.inc=
function(){this.timer&&(clearTimeout(this.timeout),this.timeout=setTimeout(a.proxy(c.prototype.reset,this),this.timer));this.num++};c.prototype.reset=function(){this.timer&&clearTimeout(this.timeout);this.num=0};a.each(["keydown","keyup","keypress"],function(){a.event.special[this]={add:k}});return{}}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-jquery-jquery-moveto', location = 'node_modules/@atlassian/aui/src/js/jquery/jquery.moveto.js' */
("undefined"===typeof window?global:window).__55cc9a6466186ba6dac3b7d90666eefa=function(){jQuery.fn.moveTo=function(a){var a=jQuery.extend({transition:!1,scrollOffset:35},a),c=this,b=c.offset().top;if((jQuery(window).scrollTop()+jQuery(window).height()-this.outerHeight()<b||jQuery(window).scrollTop()+a.scrollOffset>b)&&jQuery(window).height()>a.scrollOffset){b=jQuery(window).scrollTop()+a.scrollOffset>b?b-(jQuery(window).height()-this.outerHeight())+a.scrollOffset:b-a.scrollOffset;if(!jQuery.fn.moveTo.animating&&
a.transition)return jQuery(document).trigger("moveToStarted",this),jQuery.fn.moveTo.animating=!0,jQuery("html,body").animate({scrollTop:b},1E3,function(){jQuery(document).trigger("moveToFinished",c);delete jQuery.fn.moveTo.animating}),this;a=jQuery("html, body");a.is(":animated")&&(a.stop(),delete jQuery.fn.moveTo.animating);jQuery(document).trigger("moveToStarted");jQuery(window).scrollTop(b);setTimeout(function(){jQuery(document).trigger("moveToFinished",c)},100);return this}jQuery(document).trigger("moveToFinished",
this);return this};return{}}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-vendor-underscorejs-underscore', location = 'node_modules/@atlassian/aui/src/js-vendor/underscorejs/underscore.js' */
("undefined"===typeof window?global:window).__61c16d543bfae33bb4747b45f7b91f35=function(){var p={exports:{}},r=p.exports,x={module:p,exports:r},s;s=function(n,q,m){var k=("undefined"===typeof window?global:window).define,l,o,m=[m,q,n].filter(function(i){return"function"===typeof i})[0],q=[q,n,[]].filter(Array.isArray)[0];l=m.apply(null,q.map(function(i){return x[i]}));o=typeof l;"function"===typeof k&&k("string"===typeof n?n:"__61c16d543bfae33bb4747b45f7b91f35",q,m);"string"===o?l=String(l):"number"===
o?l=Number(l):"boolean"===o&&(l=Boolean(l));void 0!==l&&(r=p.exports=l)};s.amd=!0;(function(){var n=this,q=n._,m={},k=Array.prototype,l=Object.prototype,o=k.push,i=k.slice,v=k.concat,t=l.toString,s=l.hasOwnProperty,E=k.forEach,F=k.map,G=k.reduce,H=k.reduceRight,I=k.filter,J=k.every,K=k.some,w=k.indexOf,L=k.lastIndexOf,l=Array.isArray,x=Object.keys,y=Function.prototype.bind,b=function(a){if(a instanceof b)return a;if(!(this instanceof b))return new b(a);this._wrapped=a};"undefined"!==typeof r?("undefined"!==
typeof p&&p.exports&&(r=p.exports=b),r._=b):n._=b;b.VERSION="1.5.2";var j=b.each=b.forEach=function(a,c,d){if(a!=null)if(E&&a.forEach===E)a.forEach(c,d);else if(a.length===+a.length)for(var e=0,f=a.length;e<f;e++){if(c.call(d,a[e],e,a)===m)break}else for(var g=b.keys(a),e=0,f=g.length;e<f;e++)if(c.call(d,a[g[e]],g[e],a)===m)break};b.map=b.collect=function(a,c,b){var e=[];if(a==null)return e;if(F&&a.map===F)return a.map(c,b);j(a,function(a,g,h){e.push(c.call(b,a,g,h))});return e};b.reduce=b.foldl=
b.inject=function(a,c,d,e){var f=arguments.length>2;a==null&&(a=[]);if(G&&a.reduce===G){e&&(c=b.bind(c,e));return f?a.reduce(c,d):a.reduce(c)}j(a,function(a,b,O){if(f)d=c.call(e,d,a,b,O);else{d=a;f=true}});if(!f)throw new TypeError("Reduce of empty array with no initial value");return d};b.reduceRight=b.foldr=function(a,c,d,e){var f=arguments.length>2;a==null&&(a=[]);if(H&&a.reduceRight===H){e&&(c=b.bind(c,e));return f?a.reduceRight(c,d):a.reduceRight(c)}var g=a.length;if(g!==+g)var h=b.keys(a),g=
h.length;j(a,function(b,i,k){i=h?h[--g]:--g;if(f)d=c.call(e,d,a[i],i,k);else{d=a[i];f=true}});if(!f)throw new TypeError("Reduce of empty array with no initial value");return d};b.find=b.detect=function(a,c,b){var e;M(a,function(a,g,h){if(c.call(b,a,g,h)){e=a;return true}});return e};b.filter=b.select=function(a,c,b){var e=[];if(a==null)return e;if(I&&a.filter===I)return a.filter(c,b);j(a,function(a,g,h){c.call(b,a,g,h)&&e.push(a)});return e};b.reject=function(a,c,d){return b.filter(a,function(a,b,
g){return!c.call(d,a,b,g)},d)};b.every=b.all=function(a,c,d){c||(c=b.identity);var e=true;if(a==null)return e;if(J&&a.every===J)return a.every(c,d);j(a,function(a,b,h){if(!(e=e&&c.call(d,a,b,h)))return m});return!!e};var M=b.some=b.any=function(a,c,d){c||(c=b.identity);var e=false;if(a==null)return e;if(K&&a.some===K)return a.some(c,d);j(a,function(a,b,h){if(e||(e=c.call(d,a,b,h)))return m});return!!e};b.contains=b.include=function(a,c){return a==null?false:w&&a.indexOf===w?a.indexOf(c)!=-1:M(a,function(a){return a===
c})};b.invoke=function(a,c){var d=i.call(arguments,2),e=b.isFunction(c);return b.map(a,function(a){return(e?c:a[c]).apply(a,d)})};b.pluck=function(a,c){return b.map(a,function(a){return a[c]})};b.where=function(a,c,d){return b.isEmpty(c)?d?void 0:[]:b[d?"find":"filter"](a,function(a){for(var b in c)if(c[b]!==a[b])return false;return true})};b.findWhere=function(a,c){return b.where(a,c,true)};b.max=function(a,c,d){if(!c&&b.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.max.apply(Math,a);if(!c&&
b.isEmpty(a))return-Infinity;var e={computed:-Infinity,value:-Infinity};j(a,function(a,b,h){b=c?c.call(d,a,b,h):a;b>e.computed&&(e={value:a,computed:b})});return e.value};b.min=function(a,c,d){if(!c&&b.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.min.apply(Math,a);if(!c&&b.isEmpty(a))return Infinity;var e={computed:Infinity,value:Infinity};j(a,function(a,b,h){b=c?c.call(d,a,b,h):a;b<e.computed&&(e={value:a,computed:b})});return e.value};b.shuffle=function(a){var c,d=0,e=[];j(a,function(a){c=
b.random(d++);e[d-1]=e[c];e[c]=a});return e};b.sample=function(a,c,d){return arguments.length<2||d?a[b.random(a.length-1)]:b.shuffle(a).slice(0,Math.max(0,c))};var z=function(a){return b.isFunction(a)?a:function(c){return c[a]}};b.sortBy=function(a,c,d){var e=z(c);return b.pluck(b.map(a,function(a,c,b){return{value:a,index:c,criteria:e.call(d,a,c,b)}}).sort(function(a,c){var b=a.criteria,d=c.criteria;if(b!==d){if(b>d||b===void 0)return 1;if(b<d||d===void 0)return-1}return a.index-c.index}),"value")};
var A=function(a){return function(c,d,e){var f={},g=d==null?b.identity:z(d);j(c,function(b,d){var i=g.call(e,b,d,c);a(f,i,b)});return f}};b.groupBy=A(function(a,c,d){(b.has(a,c)?a[c]:a[c]=[]).push(d)});b.indexBy=A(function(a,c,b){a[c]=b});b.countBy=A(function(a,c){b.has(a,c)?a[c]++:a[c]=1});b.sortedIndex=function(a,c,d,e){for(var d=d==null?b.identity:z(d),c=d.call(e,c),f=0,g=a.length;f<g;){var h=f+g>>>1;d.call(e,a[h])<c?f=h+1:g=h}return f};b.toArray=function(a){return!a?[]:b.isArray(a)?i.call(a):
a.length===+a.length?b.map(a,b.identity):b.values(a)};b.size=function(a){return a==null?0:a.length===+a.length?a.length:b.keys(a).length};b.first=b.head=b.take=function(a,c,b){return a==null?void 0:c==null||b?a[0]:i.call(a,0,c)};b.initial=function(a,c,b){return i.call(a,0,a.length-(c==null||b?1:c))};b.last=function(a,c,b){return a==null?void 0:c==null||b?a[a.length-1]:i.call(a,Math.max(a.length-c,0))};b.rest=b.tail=b.drop=function(a,b,d){return i.call(a,b==null||d?1:b)};b.compact=function(a){return b.filter(a,
b.identity)};var N=function(a,c,d){if(c&&b.every(a,b.isArray))return v.apply(d,a);j(a,function(a){b.isArray(a)||b.isArguments(a)?c?o.apply(d,a):N(a,c,d):d.push(a)});return d};b.flatten=function(a,b){return N(a,b,[])};b.without=function(a){return b.difference(a,i.call(arguments,1))};b.uniq=b.unique=function(a,c,d,e){if(b.isFunction(c)){e=d;d=c;c=false}var d=d?b.map(a,d,e):a,f=[],g=[];j(d,function(d,e){if(c?!e||g[g.length-1]!==d:!b.contains(g,d)){g.push(d);f.push(a[e])}});return f};b.union=function(){return b.uniq(b.flatten(arguments,
true))};b.intersection=function(a){var c=i.call(arguments,1);return b.filter(b.uniq(a),function(a){return b.every(c,function(c){return b.indexOf(c,a)>=0})})};b.difference=function(a){var c=v.apply(k,i.call(arguments,1));return b.filter(a,function(a){return!b.contains(c,a)})};b.zip=function(){for(var a=b.max(b.pluck(arguments,"length").concat(0)),c=Array(a),d=0;d<a;d++)c[d]=b.pluck(arguments,""+d);return c};b.object=function(a,b){if(a==null)return{};for(var d={},e=0,f=a.length;e<f;e++)b?d[a[e]]=b[e]:
d[a[e][0]]=a[e][1];return d};b.indexOf=function(a,c,d){if(a==null)return-1;var e=0,f=a.length;if(d)if(typeof d=="number")e=d<0?Math.max(0,f+d):d;else{e=b.sortedIndex(a,c);return a[e]===c?e:-1}if(w&&a.indexOf===w)return a.indexOf(c,d);for(;e<f;e++)if(a[e]===c)return e;return-1};b.lastIndexOf=function(a,b,d){if(a==null)return-1;var e=d!=null;if(L&&a.lastIndexOf===L)return e?a.lastIndexOf(b,d):a.lastIndexOf(b);for(d=e?d:a.length;d--;)if(a[d]===b)return d;return-1};b.range=function(a,b,d){if(arguments.length<=
1){b=a||0;a=0}for(var d=arguments[2]||1,e=Math.max(Math.ceil((b-a)/d),0),f=0,g=Array(e);f<e;){g[f++]=a;a=a+d}return g};var B=function(){};b.bind=function(a,c){var d,e;if(y&&a.bind===y)return y.apply(a,i.call(arguments,1));if(!b.isFunction(a))throw new TypeError;d=i.call(arguments,2);return e=function(){if(!(this instanceof e))return a.apply(c,d.concat(i.call(arguments)));B.prototype=a.prototype;var b=new B;B.prototype=null;var g=a.apply(b,d.concat(i.call(arguments)));return Object(g)===g?g:b}};b.partial=
function(a){var b=i.call(arguments,1);return function(){return a.apply(this,b.concat(i.call(arguments)))}};b.bindAll=function(a){var c=i.call(arguments,1);if(c.length===0)throw Error("bindAll must be passed function names");j(c,function(c){a[c]=b.bind(a[c],a)});return a};b.memoize=function(a,c){var d={};c||(c=b.identity);return function(){var e=c.apply(this,arguments);return b.has(d,e)?d[e]:d[e]=a.apply(this,arguments)}};b.delay=function(a,b){var d=i.call(arguments,2);return setTimeout(function(){return a.apply(null,
d)},b)};b.defer=function(a){return b.delay.apply(b,[a,1].concat(i.call(arguments,1)))};b.throttle=function(a,b,d){var e,f,g,h=null,i=0;d||(d={});var k=function(){i=d.leading===false?0:new Date;h=null;g=a.apply(e,f)};return function(){var j=new Date;!i&&d.leading===false&&(i=j);var l=b-(j-i);e=this;f=arguments;if(l<=0){clearTimeout(h);h=null;i=j;g=a.apply(e,f)}else!h&&d.trailing!==false&&(h=setTimeout(k,l));return g}};b.debounce=function(a,b,d){var e,f,g,h,i;return function(){g=this;f=arguments;h=
new Date;var k=function(){var j=new Date-h;if(j<b)e=setTimeout(k,b-j);else{e=null;d||(i=a.apply(g,f))}},j=d&&!e;e||(e=setTimeout(k,b));j&&(i=a.apply(g,f));return i}};b.once=function(a){var b=false,d;return function(){if(b)return d;b=true;d=a.apply(this,arguments);a=null;return d}};b.wrap=function(a,b){return function(){var d=[a];o.apply(d,arguments);return b.apply(this,d)}};b.compose=function(){var a=arguments;return function(){for(var b=arguments,d=a.length-1;d>=0;d--)b=[a[d].apply(this,b)];return b[0]}};
b.after=function(a,b){return function(){if(--a<1)return b.apply(this,arguments)}};b.keys=x||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var c=[],d;for(d in a)b.has(a,d)&&c.push(d);return c};b.values=function(a){for(var c=b.keys(a),d=c.length,e=Array(d),f=0;f<d;f++)e[f]=a[c[f]];return e};b.pairs=function(a){for(var c=b.keys(a),d=c.length,e=Array(d),f=0;f<d;f++)e[f]=[c[f],a[c[f]]];return e};b.invert=function(a){for(var c={},d=b.keys(a),e=0,f=d.length;e<f;e++)c[a[d[e]]]=d[e];return c};
b.functions=b.methods=function(a){var c=[],d;for(d in a)b.isFunction(a[d])&&c.push(d);return c.sort()};b.extend=function(a){j(i.call(arguments,1),function(b){if(b)for(var d in b)a[d]=b[d]});return a};b.pick=function(a){var b={},d=v.apply(k,i.call(arguments,1));j(d,function(d){d in a&&(b[d]=a[d])});return b};b.omit=function(a){var c={},d=v.apply(k,i.call(arguments,1)),e;for(e in a)b.contains(d,e)||(c[e]=a[e]);return c};b.defaults=function(a){j(i.call(arguments,1),function(b){if(b)for(var d in b)a[d]===
void 0&&(a[d]=b[d])});return a};b.clone=function(a){return!b.isObject(a)?a:b.isArray(a)?a.slice():b.extend({},a)};b.tap=function(a,b){b(a);return a};var C=function(a,c,d,e){if(a===c)return a!==0||1/a==1/c;if(a==null||c==null)return a===c;if(a instanceof b)a=a._wrapped;if(c instanceof b)c=c._wrapped;var f=t.call(a);if(f!=t.call(c))return false;switch(f){case "[object String]":return a==String(c);case "[object Number]":return a!=+a?c!=+c:a==0?1/a==1/c:a==+c;case "[object Date]":case "[object Boolean]":return+a==
+c;case "[object RegExp]":return a.source==c.source&&a.global==c.global&&a.multiline==c.multiline&&a.ignoreCase==c.ignoreCase}if(typeof a!="object"||typeof c!="object")return false;for(var g=d.length;g--;)if(d[g]==a)return e[g]==c;var g=a.constructor,h=c.constructor;if(g!==h&&(!b.isFunction(g)||!(g instanceof g&&b.isFunction(h)&&h instanceof h)))return false;d.push(a);e.push(c);g=0;h=true;if(f=="[object Array]"){g=a.length;if(h=g==c.length)for(;g--;)if(!(h=C(a[g],c[g],d,e)))break}else{for(var i in a)if(b.has(a,
i)){g++;if(!(h=b.has(c,i)&&C(a[i],c[i],d,e)))break}if(h){for(i in c)if(b.has(c,i)&&!g--)break;h=!g}}d.pop();e.pop();return h};b.isEqual=function(a,b){return C(a,b,[],[])};b.isEmpty=function(a){if(a==null)return true;if(b.isArray(a)||b.isString(a))return a.length===0;for(var c in a)if(b.has(a,c))return false;return true};b.isElement=function(a){return!!(a&&a.nodeType===1)};b.isArray=l||function(a){return t.call(a)=="[object Array]"};b.isObject=function(a){return a===Object(a)};j("Arguments Function String Number Date RegExp".split(" "),
function(a){b["is"+a]=function(b){return t.call(b)=="[object "+a+"]"}});b.isArguments(arguments)||(b.isArguments=function(a){return!(!a||!b.has(a,"callee"))});"function"!==typeof/./&&(b.isFunction=function(a){return typeof a==="function"});b.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))};b.isNaN=function(a){return b.isNumber(a)&&a!=+a};b.isBoolean=function(a){return a===true||a===false||t.call(a)=="[object Boolean]"};b.isNull=function(a){return a===null};b.isUndefined=function(a){return a===
void 0};b.has=function(a,b){return s.call(a,b)};b.noConflict=function(){n._=q;return this};b.identity=function(a){return a};b.times=function(a,b,d){for(var e=Array(Math.max(0,a)),f=0;f<a;f++)e[f]=b.call(d,f);return e};b.random=function(a,b){if(b==null){b=a;a=0}return a+Math.floor(Math.random()*(b-a+1))};var u={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};u.unescape=b.invert(u.escape);var P={escape:RegExp("["+b.keys(u.escape).join("")+"]","g"),unescape:RegExp("("+b.keys(u.unescape).join("|")+
")","g")};b.each(["escape","unescape"],function(a){b[a]=function(b){return b==null?"":(""+b).replace(P[a],function(b){return u[a][b]})}});b.result=function(a,c){if(a!=null){var d=a[c];return b.isFunction(d)?d.call(a):d}};b.mixin=function(a){j(b.functions(a),function(c){var d=b[c]=a[c];b.prototype[c]=function(){var a=[this._wrapped];o.apply(a,arguments);a=d.apply(b,a);return this._chain?b(a).chain():a}})};var Q=0;b.uniqueId=function(a){var b=++Q+"";return a?a+b:b};b.templateSettings={evaluate:/<%([\s\S]+?)%>/g,
interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var D=/(.)^/,R={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},S=/\\|'|\r|\n|\t|\u2028|\u2029/g;b.template=function(a,c,d){var e,d=b.defaults({},d,b.templateSettings),f=RegExp([(d.escape||D).source,(d.interpolate||D).source,(d.evaluate||D).source].join("|")+"|$","g"),g=0,h="__p+='";a.replace(f,function(b,c,d,e,f){h=h+a.slice(g,f).replace(S,function(a){return"\\"+R[a]});c&&(h=h+("'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'"));
d&&(h=h+("'+\n((__t=("+d+"))==null?'':__t)+\n'"));e&&(h=h+("';\n"+e+"\n__p+='"));g=f+b.length;return b});h=h+"';\n";d.variable||(h="with(obj||{}){\n"+h+"}\n");h="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+h+"return __p;\n";try{e=new Function(d.variable||"obj","_",h)}catch(i){i.source=h;throw i;}if(c)return e(c,b);c=function(a){return e.call(this,a,b)};c.source="function("+(d.variable||"obj")+"){\n"+h+"}";return c};b.chain=function(a){return b(a).chain()};
b.mixin(b);j("pop push reverse shift sort splice unshift".split(" "),function(a){var c=k[a];b.prototype[a]=function(){var d=this._wrapped;c.apply(d,arguments);(a=="shift"||a=="splice")&&d.length===0&&delete d[0];return this._chain?b(d).chain():d}});j(["concat","join","slice"],function(a){var c=k[a];b.prototype[a]=function(){var a=c.apply(this._wrapped,arguments);return this._chain?b(a).chain():a}});b.extend(b.prototype,{chain:function(){this._chain=true;return this},value:function(){return this._wrapped}})}).call(this);
"function"===typeof window.define&&s("underscore",[],function(){return window._});return p.exports}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-underscore', location = 'node_modules/@atlassian/aui/src/js/aui/underscore.js' */
("undefined"===typeof window?global:window).__922acd0053a6de3ea4c53d8902766ab6=function(){var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});var a=__61c16d543bfae33bb4747b45f7b91f35,a=a&&a.__esModule?a:{"default":a};window._||(window._=a.default);b.default=window._;return b=b["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-when-i-type', location = 'node_modules/@atlassian/aui/src/js/aui/when-i-type.js' */
("undefined"===typeof window?global:window).__28e4efe4472a2cec72985d259674db56=function(){function p(e){return e&&e.__esModule?e:{"default":e}}function n(f){function i(a){!v.popup.current&&h&&h.fire(a)}function d(a){a.preventDefault()}function g(a){(a&&a.split?e.default.trim(a).split(" "):[a]).forEach(function(c){if(!(c instanceof Array)){for(var c=c.toString(),b=[],m="";c.length;){var a=c.match(/^(ctrl|meta|shift|alt)\+/i),f=c.match(w);a?(m+=a[0],c=c.substring(a[0].length)):(f?(b.push(m+f[0]),c=
c.substring(f[0].length)):(b.push(m+c[0]),c=c.substring(1)),m="")}c=b}a:{for(b=c.length;b--;)if(1<c[b].length&&"space"!==c[b]){b=!0;break a}b=!1}b=b?"keydown":"keypress";l.push(c);(0,e.default)(document).bind(b,c,i);(0,e.default)(document).bind(b+" keyup",c,d)})}function k(a,c,b){b?c+=" ("+AJS.format("Type \'\'{0}\'\'",a.shift()):(c=c.replace(/\)$/,""),c+=AJS.format("OR \'\'{0}\'\'",a.shift()));a.forEach(function(b){c=c+(" "+AJS.format("then \'\'{0}\'\'",
b))});return c+=")"}var l=[],h=e.default.Callbacks();g(f);return n.makeShortcut({executor:h,bindKeys:g,addShortcutsToTitle:function(a){for(var a=(0,e.default)(a),c=a.attr("title")||"",b=l.slice(),m=a.data("boundKeyCombos")||[],j=a.data("kbShortcutAppended")||"",f=!j,c=f?c:c.substring(0,c.length-j.length);b.length;){var d=b.shift();m.some(function(b){return x.default.isEqual(d,b)})||(j=k(d.slice(),j,f),f=!1)}t&&(j=j.replace(/Meta/ig,"\u2318").replace(/Shift/ig,"\u21e7"));a.attr("title",c+j);a.data("kbShortcutAppended",
j);a.data("boundKeyCombos",m.concat(l))},removeShortcutsFromTitle:function(a){var a=(0,e.default)(a),c=a.data("kbShortcutAppended");if(c){var b=a.attr("title");a.attr("title",b.replace(c,""));a.removeData("kbShortcutAppended");a.removeData("boundKeyCombos")}},keypressHandler:i,defaultPreventionHandler:d})}var q={};"use strict";Object.defineProperty(q,"__esModule",{value:!0});var e=p(__307d3e18fd611f85395c67cddeb1fe24);__9d8814c2d651791325671e2fd4ff2ade;__55cc9a6466186ba6dac3b7d90666eefa;var r;var g=
__cf890abdf040e0993fb71f2f839bc972;if(g&&g.__esModule)r=g;else{var s={};if(null!=g)for(var o in g)Object.prototype.hasOwnProperty.call(g,o)&&(s[o]=g[o]);s.default=g;r=s}var v=__8eca5e5171c0c22be18ea931ed65c747;o=p(__4d02fe17b8e885a34493e34af3d145dd);var y=__5e80b2d38fa1ffdd67aa3d521738d499,z=p(__509557c937caa8763def39004fcf3193),x=p(__922acd0053a6de3ea4c53d8902766ab6),t=-1!==navigator.platform.indexOf("Mac"),w=/^(backspace|tab|r(ight|eturn)|s(hift|pace|croll)|c(trl|apslock)|alt|pa(use|ge(up|down))|e(sc|nd)|home|left|up|d(el|own)|insert|f\d\d?|numlock|meta)/i,
u=function(e){var i=e[0];i&&"MouseEvent"in window?(e=void 0,(0,y.supportsNewMouseEvent)()?e=new MouseEvent("click",{bubbles:!0,cancelable:!0}):(e=document.createEvent("MouseEvent"),e.initEvent("click",!0,!0)),i.dispatchEvent(e)):e.trigger("click")};n.makeShortcut=function(f){function i(b){return function(c,a){var a=a||{},f=a.focusedClass||"focused",i=a.hasOwnProperty("wrapAround")?a.wrapAround:!0,g=a.hasOwnProperty("escToCancel")?a.escToCancel:!0;d.add(function(){var a=(0,e.default)(c),d=a.filter("."+
f),j=0===d.length?void 0:{transition:!0};if(g)(0,e.default)(document).one("keydown",function(b){b.keyCode===z.default.ESCAPE&&d&&d.removeClass(f)});d.length&&d.removeClass(f);if((d=b(d,a,i))&&0<d.length)d.addClass(f),d.moveTo(j),d.is("a")?d.focus():d.find("a:first").focus()});return this}}var d=f.executor,g=f.bindKeys,k=f.addShortcutsToTitle,l=f.removeShortcutsFromTitle,h=f.keypressHandler,a=f.defaultPreventionHandler,c=[];return{moveToNextItem:i(function(b,a,c){var d;if(c&&0===b.length)return a.eq(0);
d=e.default.inArray(b.get(0),a);return d<a.length-1?a.eq(d+1):c?a.eq(0):b}),moveToPrevItem:i(function(b,a,c){var d;if(c&&0===b.length)return a.filter(":last");d=e.default.inArray(b.get(0),a);return 0<d?a.eq(d-1):c?a.filter(":last"):b}),click:function(b){c.push(b);k(b);d.add(function(){var a=(0,e.default)(b);u(a)});return this},goTo:function(b){d.add(function(){window.location.href=b});return this},followLink:function(b){c.push(b);k(b);d.add(function(){var a=(0,e.default)(b)[0];a&&{a:!0,link:!0}[a.nodeName.toLowerCase()]&&
(window.location.href=a.href)});return this},execute:function(b){var a=this;d.add(function(){b.apply(a,arguments)});return this},evaluate:function(b){b.call(this)},moveToAndClick:function(b){c.push(b);k(b);d.add(function(){var a=(0,e.default)(b);0<a.length&&(u(a),a.moveTo())});return this},moveToAndFocus:function(a){c.push(a);k(a);d.add(function(c){var d=(0,e.default)(a);0<d.length&&(d.focus(),d.moveTo&&d.moveTo(),d.is(":input")&&c.preventDefault())});return this},or:function(a){g(a);return this},
unbind:function(){(0,e.default)(document).unbind("keydown keypress",h).unbind("keydown keypress keyup",a);for(var b=0,d=c.length;b<d;b++)l(c[b]);c=[]}}};n.fromJSON=function(f,g){var d=[];f&&e.default.each(f,function(f,k){var l=k.op,h=k.param,a=void 0;if("execute"===l||"evaluate"===l)a=[new Function(h)];else if(/^\[[^\]\[]*,[^\]\[]*\]$/.test(h)){try{a=JSON.parse(h)}catch(c){r.error("When using a parameter array, array must be in strict JSON format: "+h)}e.default.isArray(a)||r.error("Badly formatted shortcut parameter. String or JSON Array of parameters required: "+
h)}else a=[h];e.default.each(k.keys,function(){var b=this;g&&t&&(b=e.default.map(b,function(a){return a.replace(/ctrl/i,"meta")}));b=n(b);b[l].apply(b,a);d.push(b)})});return d};(0,e.default)(document).bind("iframeAppended",function(f,g){(0,e.default)(g).load(function(){(0,e.default)(g).contents().bind("keyup keydown keypress",function(d){e.default.browser.safari&&"keypress"===d.type||(0,e.default)(d.target).is(":input")||e.default.event.trigger(d,arguments,document,!0)})})});(0,o.default)("whenIType",
n);q.default=n;return q=q["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-cookie', location = 'node_modules/@atlassian/aui/src/js/aui/cookie.js' */
("undefined"===typeof window?global:window).__74896855d42a16a84b35c202ab5bc9b4=function(){function l(a){a=RegExp("\\b"+a.replace(i,"\\$&")+"=((?:[^\\\\;]+|\\\\.)*)(?:;|$)");return(a=document.cookie.match(a))&&a[1].replace(o,"")}function j(a,f,c){var d=l(k),b=RegExp("(\\s|\\|)*\\b"+a.replace(i,"\\$&")+"=[^|]*[|]*"),d=(d||"").replace(b,"|");""!==f&&(a=a+"="+f,4020>d.length+a.length&&(d+="|"+a));d=d.replace(p,"|");a=k;c=c||365;f="";d='"'+d.replace(q,'\\"')+'"';c&&(f=new Date,f.setTime(+f+864E5*c),f=
"; expires="+f.toGMTString());document.cookie=a+"="+d+f+";path=/"}function m(a,b){var c;c=(c=l(k))||"";var d=RegExp(a.replace(i,"\\$&")+"=([^|]+)");c=(c=c.match(d))&&c[1];return null!=c?c:b}function n(a){j(a,"")}var g={};"use strict";Object.defineProperty(g,"__esModule",{value:!0});g.save=g.read=g.erase=void 0;var b;b=__c8cfa00f1eba9ac7af89ee3d0d33961d;if(!b||!b.__esModule){var e={};if(null!=b)for(var h in b)Object.prototype.hasOwnProperty.call(b,h)&&(e[h]=b[h]);e.default=b;b=e}var e=(e=__4d02fe17b8e885a34493e34af3d145dd)&&
e.__esModule?e:{"default":e},k="AJS.conglomerate.cookie",o=/(\\|^"|"$)/g,p=/\|\|+/g,q=/"/g,i=/[.*+?|^$()[\]{\\]/g;h={erase:n,read:m,save:j};(0,e.default)("cookie",h);(0,e.default)("Cookie",h);b.prop(AJS,"Cookie",{alternativeName:"cookie",sinceVersion:"5.8.0"});g.erase=n;g.read=m;g.save=j;return g}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-ajs-no-context-path', location = 'node_modules/@atlassian/aui/src/js/jquery/jquery.os.js' */
("undefined"===typeof window?global:window).__9046514ee4273e195fc535faaba755b5=function(){jQuery.os={};var a=navigator.platform.toLowerCase();jQuery.os.windows=-1!=a.indexOf("win");jQuery.os.mac=-1!=a.indexOf("mac");jQuery.os.linux=-1!=a.indexOf("linux");return{}}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-ajs-no-context-path', location = 'node_modules/@atlassian/aui/src/js-vendor/jquery/plugins/jquery.form.js' */
(function(b){function m(){if(b.fn.ajaxSubmit.debug){var a="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(a):window.opera&&window.opera.postError&&window.opera.postError(a)}}b.fn.ajaxSubmit=function(a){function f(){function d(){var a=j.attr("target"),k=j.attr("action");c.setAttribute("target",f);"POST"!=c.getAttribute("method")&&c.setAttribute("method","POST");c.getAttribute("action")!=e.url&&c.setAttribute("action",e.url);e.skipEncodingOverride||
j.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"});e.timeout&&setTimeout(function(){s=!0;g()},e.timeout);var l=[];try{if(e.extraData)for(var m in e.extraData)l.push(b('<input type="hidden" name="'+m+'" value="'+e.extraData[m]+'" />').appendTo(c)[0]);i.appendTo("body");h.attachEvent?h.attachEvent("onload",g):h.addEventListener("load",g,!1);c.submit()}finally{c.setAttribute("action",k),a?c.setAttribute("target",a):j.removeAttr("target"),b(l).remove()}}function g(){if(!k.aborted){var a=
h.contentWindow?h.contentWindow.document:h.contentDocument?h.contentDocument:h.document;if(a&&a.location.href!=e.iframeSrc){h.detachEvent?h.detachEvent("onload",g):h.removeEventListener("load",g,!1);var d=!0;try{if(s)throw"timeout";var c="xml"==e.dataType||a.XMLDocument||b.isXMLDoc(a);m("isXml="+c);if(!c&&(window.opera&&(null==a.body||""==a.body.innerHTML))&&--w){m("requeing onLoad callback, DOM not available");setTimeout(g,250);return}k.responseText=a.body?a.body.innerHTML:a.documentElement?a.documentElement.innerHTML:
null;k.responseXML=a.XMLDocument?a.XMLDocument:a;k.getResponseHeader=function(a){return{"content-type":e.dataType}[a]};var f=/(json|script)/.test(e.dataType);if(f||e.textarea){var j=a.getElementsByTagName("textarea")[0];if(j)k.responseText=j.value;else if(f){var o=a.getElementsByTagName("pre")[0],q=a.getElementsByTagName("body")[0];o?k.responseText=o.textContent:q&&(k.responseText=q.innerHTML)}}else"xml"==e.dataType&&(!k.responseXML&&null!=k.responseText)&&(k.responseXML=x(k.responseText));var a=
k,p=e.dataType,c=e,t=a.getResponseHeader("content-type")||"",u="xml"===p||!p&&0<=t.indexOf("xml"),n=u?a.responseXML:a.responseText;u&&"parsererror"===n.documentElement.nodeName&&b.error&&b.error("parsererror");c&&c.dataFilter&&(n=c.dataFilter(n,p));"string"===typeof n&&("json"===p||!p&&0<=t.indexOf("json")?n=y(n):("script"===p||!p&&0<=t.indexOf("javascript"))&&b.globalEval(n));v=n}catch(r){m("error caught:",r),d=!1,k.error=r,e.error&&e.error.call(e.context,k,"error",r),l&&b.event.trigger("ajaxError",
[k,e,r])}k.aborted&&(m("upload aborted"),d=!1);d&&(e.success&&e.success.call(e.context,v,"success",k),l&&b.event.trigger("ajaxSuccess",[k,e]));l&&b.event.trigger("ajaxComplete",[k,e]);l&&!--b.active&&b.event.trigger("ajaxStop");e.complete&&e.complete.call(e.context,k,d?"success":"error");setTimeout(function(){i.removeData("form-plugin-onload");i.remove();k.responseXML=null},100)}}}var c=j[0];if(b(":input[name=submit],:input[id=submit]",c).length)alert('Error: Form elements must not have name or id of "submit".');
else{var e=b.extend(!0,{},b.ajaxSettings,a);e.context=e.context||e;var f="jqFormIO"+(new Date).getTime(),i=b('<iframe id="'+f+'" name="'+f+'" src="'+e.iframeSrc+'" />'),h=i[0];i.css({position:"absolute",top:"-1000px",left:"-1000px"});var k={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(){m("aborting upload...");this.aborted=1;i.attr("src",e.iframeSrc);k.error="aborted";
e.error&&e.error.call(e.context,k,"error","aborted");l&&b.event.trigger("ajaxError",[k,e,"aborted"]);e.complete&&e.complete.call(e.context,k,"error")}},l=e.global;l&&!b.active++&&b.event.trigger("ajaxStart");l&&b.event.trigger("ajaxSend",[k,e]);if(e.beforeSend&&!1===e.beforeSend.call(e.context,k,e))e.global&&b.active--;else if(!k.aborted){var s=0,o=c.clk;if(o){var q=o.name;q&&!o.disabled&&(e.extraData=e.extraData||{},e.extraData[q]=o.value,"image"==o.type&&(e.extraData[q+".x"]=c.clk_x,e.extraData[q+
".y"]=c.clk_y))}e.forceSync?d():setTimeout(d,10);var v,w=50,x=b.parseXML||function(a,b){window.ActiveXObject?(b=new ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a)):b=(new DOMParser).parseFromString(a,"text/xml");return b&&b.documentElement&&"parsererror"!=b.documentElement.nodeName?b:null},y=b.parseJSON||function(a){return window.eval("("+a+")")}}}}if(!this.length)return m("ajaxSubmit: skipping submit process - no element selected"),this;"function"==typeof a&&(a={success:a});var c=
this.attr("action");(c="string"===typeof c?b.trim(c):"")&&(c=(c.match(/^([^#]+)/)||[])[1]);c=c||window.location.href||"";a=b.extend(!0,{url:c,type:this[0].getAttribute("method")||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},a);c={};this.trigger("form-pre-serialize",[this,a,c]);if(c.veto)return m("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(a.beforeSerialize&&!1===a.beforeSerialize(this,a))return m("ajaxSubmit: submit aborted via beforeSerialize callback"),
this;var d,g,i=this.formToArray(a.semantic);if(a.data)for(d in a.extraData=a.data,a.data)if(a.data[d]instanceof Array)for(var h in a.data[d])i.push({name:d,value:a.data[d][h]});else g=a.data[d],g=b.isFunction(g)?g():g,i.push({name:d,value:g});if(a.beforeSubmit&&!1===a.beforeSubmit(i,this,a))return m("ajaxSubmit: submit aborted via beforeSubmit callback"),this;this.trigger("form-submit-validate",[i,this,a,c]);if(c.veto)return m("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;d=b.param(i);
"GET"==a.type.toUpperCase()?(a.url+=(0<=a.url.indexOf("?")?"&":"?")+d,a.data=null):a.data=d;var j=this,l=[];a.resetForm&&l.push(function(){j.resetForm()});a.clearForm&&l.push(function(){j.clearForm()});if(!a.dataType&&a.target){var s=a.success||function(){};l.push(function(d){var c=a.replaceTarget?"replaceWith":"html";b(a.target)[c](d).each(s,arguments)})}else a.success&&l.push(a.success);a.success=function(b,d,c){for(var e=a.context||a,g=0,f=l.length;g<f;g++)l[g].apply(e,[b,d,c||j,j])};d=0<b("input:file",
this).length;h="multipart/form-data"==j.attr("enctype")||"multipart/form-data"==j.attr("encoding");!1!==a.iframe&&(d||a.iframe||h)?a.closeKeepAlive?b.get(a.closeKeepAlive,f):f():b.ajax(a);this.trigger("form-submit-notify",[this,a]);return this};b.fn.ajaxForm=function(a){if(0===this.length){var f=this.selector,c=this.context;if(!b.isReady&&f)return m("DOM not ready, queuing ajaxForm"),b(function(){b(f,c).ajaxForm(a)}),this;m("terminating; zero elements found by selector"+(b.isReady?"":" (DOM not ready)"));
return this}return this.ajaxFormUnbind().bind("submit.form-plugin",function(d){d.isDefaultPrevented()||(d.preventDefault(),b(this).ajaxSubmit(a))}).bind("click.form-plugin",function(a){var c=a.target,f=b(c);if(!f.is(":submit,input:image")){c=f.closest(":submit");if(0==c.length)return;c=c[0]}var h=this;h.clk=c;"image"==c.type&&(void 0!=a.offsetX?(h.clk_x=a.offsetX,h.clk_y=a.offsetY):"function"==typeof b.fn.offset?(f=f.offset(),h.clk_x=a.pageX-f.left,h.clk_y=a.pageY-f.top):(h.clk_x=a.pageX-c.offsetLeft,
h.clk_y=a.pageY-c.offsetTop));setTimeout(function(){h.clk=h.clk_x=h.clk_y=null},100)})};b.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};b.fn.formToArray=function(a){var f=[];if(0===this.length)return f;var c=this[0],d=a?c.getElementsByTagName("*"):c.elements;if(!d)return f;var g,i,h,j,l,m;g=0;for(l=d.length;g<l;g++)if(i=d[g],h=i.name)if(a&&c.clk&&"image"==i.type)!i.disabled&&c.clk==i&&(f.push({name:h,value:b(i).val()}),f.push({name:h+".x",value:c.clk_x},
{name:h+".y",value:c.clk_y}));else if((j=b.fieldValue(i,!0))&&j.constructor==Array){i=0;for(m=j.length;i<m;i++)f.push({name:h,value:j[i]})}else null!==j&&"undefined"!=typeof j&&f.push({name:h,value:j});if(!a&&c.clk&&(a=b(c.clk),d=a[0],(h=d.name)&&!d.disabled&&"image"==d.type))f.push({name:h,value:a.val()}),f.push({name:h+".x",value:c.clk_x},{name:h+".y",value:c.clk_y});return f};b.fn.formSerialize=function(a){return b.param(this.formToArray(a))};b.fn.fieldSerialize=function(a){var f=[];this.each(function(){var c=
this.name;if(c){var d=b.fieldValue(this,a);if(d&&d.constructor==Array)for(var g=0,i=d.length;g<i;g++)f.push({name:c,value:d[g]});else null!==d&&"undefined"!=typeof d&&f.push({name:this.name,value:d})}});return b.param(f)};b.fn.fieldValue=function(a){for(var f=[],c=0,d=this.length;c<d;c++){var g=b.fieldValue(this[c],a);null===g||("undefined"==typeof g||g.constructor==Array&&!g.length)||(g.constructor==Array?b.merge(f,g):f.push(g))}return f};b.fieldValue=function(a,f){var c=a.name,d=a.type,g=a.tagName.toLowerCase();
void 0===f&&(f=!0);if(f&&(!c||a.disabled||"reset"==d||"button"==d||("checkbox"==d||"radio"==d)&&!a.checked||("submit"==d||"image"==d)&&a.form&&a.form.clk!=a||"select"==g&&-1==a.selectedIndex))return null;if("select"==g){var i=a.selectedIndex;if(0>i)return null;for(var c=[],g=a.options,h=(d="select-one"==d)?i+1:g.length,i=d?i:0;i<h;i++){var j=g[i];if(j.selected){var l=j.value;l||(l=j.attributes&&j.attributes.value&&!j.attributes.value.specified?j.text:j.value);if(d)return l;c.push(l)}}return c}return b(a).val()};
b.fn.clearForm=function(){return this.each(function(){b("input,select,textarea",this).clearFields()})};b.fn.clearFields=b.fn.clearInputs=function(){return this.each(function(){var a=this.type,b=this.tagName.toLowerCase();"text"==a||"password"==a||"textarea"==b?this.value="":"checkbox"==a||"radio"==a?this.checked=!1:"select"==b&&(this.selectedIndex=-1)})};b.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})};
b.fn.enable=function(a){void 0===a&&(a=!0);return this.each(function(){this.disabled=!a})};b.fn.selected=function(a){void 0===a&&(a=!0);return this.each(function(){var f=this.type;"checkbox"==f||"radio"==f?this.checked=a:"option"==this.tagName.toLowerCase()&&(f=b(this).parent("select"),a&&(f[0]&&"select-one"==f[0].type)&&f.find("option").selected(!1),this.selected=a)})}})(jQuery);;
;
/* module-key = 'com.atlassian.auiplugin:internal-ajs-no-context-path', location = 'node_modules/@atlassian/aui/src/js/jquery/jquery.is-dirty.js' */
jQuery.fn.isDirty=function(){var b,d=[];window.onbeforeunload=function(){var a=window.onbeforeunload;!1!==b&&jQuery.each(d,function(){if(this.initVal!==$(this).val())return b=!0,!1});if(b)return window.onbeforeunload=null,window.setTimeout(function(){jQuery(document).bind("mousemove",function(){window.onbeforeunload=a;jQuery(document).unbind("mousemove",arguments.callee)})},1E3),b=void 0,AJS.params.dirtyMessage||""};return function(a){function c(b){var a=jQuery(this);jQuery.fn.isDirty.fieldInFocus=
a;-1===jQuery.inArray(this,d)&&(this.initVal=a.val(),d.push(this),a.die(b.type,c))}if(0!==this.length)return jQuery(":not(:input)").live("click",function(){delete jQuery.fn.isDirty.fieldInFocus}),jQuery(":input[type != hidden]",this.selector).bind("keydown",c).bind("keypress",c).bind("click",c),jQuery(a.ignoreUnloadFromElems).live("mousedown",function(){b=!1}),this.each(function(){var a=this.onsubmit;this.onsubmit=function(){b=!1;if(a)return a.apply(this,arguments)};$(this).submit(function(){b=!1})}),
this}}();;
;
/* module-key = 'com.atlassian.auiplugin:internal-ajs-no-context-path', location = 'node_modules/@atlassian/aui/src/js/jquery/jquery.progressbar.js' */
(function(a){a.fn.progressBar=function(e,h){var f=a.extend({height:"1em",showPercentage:!0},h),b=this.attr("id")+"-incomplete-bar",c=this.attr("id")+"-complete-bar",g=this.attr("id")+"-percent-complete-text";if(0==a("#"+b).length){var d=a(document.createElement("div"));d.attr("id",b);d.css({width:"90%",border:"solid 1px #ccc","float":"left","margin-right":"0.5em"});d.addClass("progress-background-color");b=a(document.createElement("div"));b.attr("id",c);b.addClass("progress-fill-color");b.css({height:f.height,
width:e+"%"});c=a(document.createElement("span"));c.attr("id",g);c.addClass("percent-complete-text");c.html(e+"%");d.append(b);this.append(d);f.showPercentage&&this.append(c)}else a("#"+c).css("width",e+"%"),a("#"+g).html(e+"%")}})(jQuery);;
;
/* module-key = 'com.atlassian.auiplugin:internal-ajs-no-context-path', location = 'node_modules/@atlassian/aui/src/js/jquery/jquery.selection.js' */
(function(e){document.selection?(e.fn.selection=function(d){var a=this[0];this.focus();if(!a)return!1;if(null==d)return document.selection.createRange().text;var c=a.scrollTop,b=document.selection.createRange();b.text=d;b.select();a.focus();a.scrollTop=c},e.fn.selectionRange=function(d,a){var c=this[0];this.focus();var b=document.selection.createRange();if(null==d){var e=this.val(),g=e.length,f=b.duplicate();f.moveToElementText(c);f.setEndPoint("StartToEnd",b);c=g-f.text.replace(/\u000D/g,"").length;
f.setEndPoint("StartToStart",b);b=g-f.text.replace(/\u000D/g,"").length;c!=b&&"\n"==e.charAt(c+1)&&(c+=1);return{end:c,start:b,text:e.substring(b,c),textBefore:e.substring(0,b),textAfter:e.substring(c)}}b.moveToElementText(c);b.collapse(!0);b.moveStart("character",d);b.moveEnd("character",a-d);b.select()}):(e.fn.selection=function(d){var a=this[0];if(!a)return!1;if(null==d)return a.setSelectionRange?a.value.substring(a.selectionStart,a.selectionEnd):!1;var c=a.scrollTop;if(a.setSelectionRange){var b=
a.selectionStart;a.value=a.value.substring(0,b)+d+a.value.substring(a.selectionEnd);a.selectionStart=b;a.selectionEnd=b+d.length}a.focus();a.scrollTop=c},e.fn.selectionRange=function(d,a){if(null==d){var c={start:this[0].selectionStart,end:this[0].selectionEnd},b=this.val();c.text=b.substring(c.start,c.end);c.textBefore=b.substring(0,c.start);c.textAfter=b.substring(c.end);return c}this[0].selectionStart=d;this[0].selectionEnd=a});e.fn.wrapSelection=function(d,a){this.selection(d+this.selection()+
(a||""))}})(jQuery);;
;
/* module-key = 'com.atlassian.auiplugin:internal-ajs-no-context-path', location = 'node_modules/@atlassian/aui/src/js/jquery/jquery.throbber.js' */
jQuery.fn.throbber=function(d){var e=[],g={isLatentThreshold:100,minThrobberDisplay:200,loadingClass:"loading"};d(document).ajaxComplete(function(a,b){d(e).each(function(a){b===this.get(0)&&(this.hideThrobber(),e.splice(a,1))})});return function(a){var b,f,c=function(a,b){c.t=setTimeout(function(){clearTimeout(c.t);c.t=void 0;a()},b)},a=d.extend(g,a||{});if(!a.target)return this;f=jQuery(a.target);e.push(d.extend(this,{showThrobber:function(){c(function(){b||(f.addClass(a.loadingClass),c(function(){b&&
b()},a.minThrobberDisplay))},a.isLatentThreshold)},hideThrobber:function(){b=function(){f.removeClass(a.loadingClass);a.end&&a.end()};c.t||b()}}));this.showThrobber();return this}}(jQuery);;
;
/* module-key = 'com.atlassian.plugin.jslibs:jquery.textoverflow-0.7.4', location = 'jquery-plugins/jquery.textoverflow/0.7.4/jquery.textoverflow-0.7.4.js' */
/*
 jQuery Text Overflow v0.7.4

 Licensed under the new BSD License.
 Copyright 2009-2011, Bram Stein
 All rights reserved.
*/
(function(d){define("atlassian/jquery-plugins/jquery.textoverflow-0.7.4",function(){return function(j){d(window,document,j);return j}})})(function(d,j,k){var d=j.documentElement.style,n="textOverflow"in d||"OTextOverflow"in d,m=function(d,e,b){var h=0,c=[],l=function(f){var a=0,g,i=0;if(!(h>e))for(a=0;a<f.length;a+=1)if(1===f[a].nodeType)g=f[a].cloneNode(!1),c[c.length-1].appendChild(g),c.push(g),l(f[a].childNodes),c.pop();else if(3===f[a].nodeType){if(h+f[a].length<e)c[c.length-1].appendChild(f[a].cloneNode(!1));
else{g=f[a].cloneNode(!1);i=e-h;b.wholeWord&&(i=Math.min(e-h,g.textContent.substring(0,e-h).lastIndexOf(" ")));var d=g,i=b.trim?g.textContent.substring(0,i).replace(/\s+$/g,""):g.textContent.substring(0,i);d.textContent=i;c[c.length-1].appendChild(g)}h+=f[a].length}else c.appendChild(f[a].cloneNode(!1))};c.push(d.cloneNode(!1));l(d.childNodes);return k(c.pop().childNodes)};k.extend(k.fn,{textOverflow:function(d){var e=k.extend({str:"&#x2026;",autoUpdate:!1,trim:!0,title:!1,className:void 0,wholeWord:!1},
d);return n?this:this.each(function(){var b=k(this),h=b.clone(),c=b.clone(),d=b.text(),f=b.width(),a=0,g=0,i=d.length,j=function(){f!==b.width()&&(b.replaceWith(c),b=c,c=b.clone(),b.textOverflow(k.extend({},e,{autoUpdate:!1})),f=b.width())};b.after(h.hide().css({position:"absolute",width:"auto",overflow:"visible","max-width":"inherit","min-width":"inherit"}));if(h.width()>f){for(;a<i;)g=Math.floor(a+(i-a)/2),h.empty().append(m(c.get(0),g,e)).append(e.str),h.width()<f?a=g+1:i=g;a<d.length&&(b.empty().append(m(c.get(0),
a-1,e)).append(e.str),e.title&&b.attr("title",d),e.className&&b.addClass(e.className))}h.remove();e.autoUpdate&&setInterval(j,200)})}})});;
;
/* module-key = 'com.atlassian.plugin.jslibs:jquery.pjax-2011.07.10', location = 'jquery-plugins/jquery.pjax/2011.07.10/jquery.pjax-2011.07.10.js' */
// jquery.pjax.js
// copyright chris wanstrath
// https://github.com/defunkt/jquery-pjax

/////////// Modified by Atlassian ///////////
(function(factory) {
    define('atlassian/jquery-plugins/jquery.pjax-2011.07.10', function () {
        return function(jQuery) {
            factory(window, document, jQuery);
            return jQuery;
        }
    });
})(function(window, document, jQuery){
/////// End of Atlassian modification ///////

(function($){

// When called on a link, fetches the href with ajax into the
// container specified as the first parameter or with the data-pjax
// attribute on the link itself.
//
// Tries to make sure the back button and ctrl+click work the way
// you'd expect.
//
// Accepts a jQuery ajax options object that may include these
// pjax specific options:
//
// container - Where to stick the response body. Usually a String selector.
//             $(container).html(xhr.responseBody)
//      push - Whether to pushState the URL. Defaults to true (of course).
//   replace - Want to use replaceState instead? That's cool.
//
// For convenience the first parameter can be either the container or
// the options object.
//
// Returns the jQuery object
$.fn.pjax = function( container, options ) {
  if ( options )
    options.container = container
  else
    options = $.isPlainObject(container) ? container : {container:container}

  // We can't persist $objects using the history API so we must use
  // a String selector. Bail if we got anything else.
  if ( options.container && typeof options.container !== 'string' ) {
    throw "pjax container must be a string selector!"
    return false
  }

  return this.live('click', function(event){
    // Middle click, cmd click, and ctrl click should open
    // links in a new tab as normal.
    if ( event.which > 1 || event.metaKey )
      return true

    var defaults = {
      url: this.href,
      container: $(this).attr('data-pjax'),
      clickedElement: $(this),
      fragment: null
    }

    $.pjax($.extend({}, defaults, options))

    event.preventDefault()
  })
}


// Loads a URL with ajax, puts the response body inside a container,
// then pushState()'s the loaded URL.
//
// Works just like $.ajax in that it accepts a jQuery ajax
// settings object (with keys like url, type, data, etc).
//
// Accepts these extra keys:
//
// container - Where to stick the response body. Must be a String.
//             $(container).html(xhr.responseBody)
//      push - Whether to pushState the URL. Defaults to true (of course).
//   replace - Want to use replaceState instead? That's cool.
//
// Use it just like $.ajax:
//
//   var xhr = $.pjax({ url: this.href, container: '#main' })
//   console.log( xhr.readyState )
//
// Returns whatever $.ajax returns.
$.pjax = function( options ) {
  var $container = $(options.container),
      success = options.success || $.noop

  // We don't want to let anyone override our success handler.
  delete options.success

  // We can't persist $objects using the history API so we must use
  // a String selector. Bail if we got anything else.
  if ( typeof options.container !== 'string' )
    throw "pjax container must be a string selector!"

  var defaults = {
    timeout: 650,
    push: true,
    replace: false,
    // We want the browser to maintain two separate internal caches: one for
    // pjax'd partial page loads and one for normal page loads. Without
    // adding this secret parameter, some browsers will often confuse the two.
    data: { _pjax: true },
    type: 'GET',
    dataType: 'html',
    beforeSend: function(xhr){
      $container.trigger('start.pjax')
      xhr.setRequestHeader('X-PJAX', 'true')
    },
    error: function(){
      window.location = options.url
    },
    complete: function(){
      $container.trigger('end.pjax')
    },
    success: function(data){
      if ( options.fragment ) {
        // If they specified a fragment, look for it in the response
        // and pull it out.
        var $fragment = $(data).find(options.fragment)
        if ( $fragment.length )
          data = $fragment.children()
        else
          return window.location = options.url
      } else {
          // If we got no data or an entire web page, go directly
          // to the page and let normal error handling happen.
          if ( !$.trim(data) || /<html/i.test(data) )
            return window.location = options.url
      }

      // Make it happen.
      $container.html(data)

      // If there's a <title> tag in the response, use it as
      // the page's title.
      var oldTitle = document.title,
          title = $.trim( $container.find('title').remove().text() )
      if ( title ) document.title = title

      var state = {
        pjax: options.container,
        fragment: options.fragment,
        timeout: options.timeout
      }

      // If there are extra params, save the complete URL in the state object
      var query = $.param(options.data)
      if ( query != "_pjax=true" )
        state.url = options.url + (/\?/.test(options.url) ? "&" : "?") + query

      if ( options.replace ) {
        window.history.replaceState(state, document.title, options.url)
      } else if ( options.push ) {
        // this extra replaceState before first push ensures good back
        // button behavior
        if ( !$.pjax.active ) {
          window.history.replaceState($.extend({}, state, {url:null}), oldTitle)
          $.pjax.active = true
        }

        window.history.pushState(state, document.title, options.url)
      }

      // Google Analytics support
      if ( (options.replace || options.push) && window._gaq )
        _gaq.push(['_trackPageview'])

      // If the URL has a hash in it, make sure the browser
      // knows to navigate to the hash.
      var hash = window.location.hash.toString()
      if ( hash !== '' ) {
        window.location.href = hash
      }

      // Invoke their success handler if they gave us one.
      success.apply(this, arguments)
    }
  }

  options = $.extend(true, {}, defaults, options)

  if ( $.isFunction(options.url) ) {
    options.url = options.url()
  }

  // Cancel the current request if we're already pjaxing
  var xhr = $.pjax.xhr
  if ( xhr && xhr.readyState < 4) {
    xhr.onreadystatechange = $.noop
    xhr.abort()
  }

  $.pjax.xhr = $.ajax(options)
  $(document).trigger('pjax', $.pjax.xhr, options)

  return $.pjax.xhr
}


// Used to detect initial (useless) popstate.
// If history.state exists, assume browser isn't going to fire initial popstate.
var popped = ('state' in window.history), initialURL = location.href


// popstate handler takes care of the back and forward buttons
//
// You probably shouldn't use pjax on pages with other pushState
// stuff yet.
$(window).bind('popstate', function(event){
  // Ignore inital popstate that some browsers fire on page load
  var initialPop = !popped && location.href == initialURL
  popped = true
  if ( initialPop ) return

  var state = event.state

  if ( state && state.pjax ) {
    var container = state.pjax
    if ( $(container+'').length )
      $.pjax({
        url: state.url || location.href,
        fragment: state.fragment,
        container: container,
        push: false,
        timeout: state.timeout
      })
    else
      window.location = location.href
  }
})

// Fix source https://github.com/defunkt/jquery-pjax/commit/f0535096d0dfdd8083acc555ff2ba8b71b8dda0a?branch=f0535096d0dfdd8083acc555ff2ba8b71b8dda0a&diff=split
// Add the state property to jQuery's event object so we can use it in
// $(window).bind('popstate')
if ($.event.props && $.inArray('state', $.event.props) < 0) {
	$.event.props.push('state')
} else if ($.event.addProp && !('state' in $.Event.prototype)) {
	$.event.addProp('state')
}


// Is pjax supported by this browser?
$.support.pjax =
  window.history && window.history.pushState && window.history.replaceState
  // pushState isn't reliable on iOS yet.
  && !navigator.userAgent.match(/(iPod|iPhone|iPad|WebApps\/.+CFNetwork)/)


// Fall back to normalcy for older browsers.
if ( !$.support.pjax ) {
  $.pjax = function( options ) {
    window.location = $.isFunction(options.url) ? options.url() : options.url
  }
  $.fn.pjax = function() { return this }
}

})(jQuery);

/////////// Modified by Atlassian ///////////
});
/////// End of Atlassian modification ///////
;
;
/* module-key = 'com.atlassian.plugin.jslibs:jquery.lazyload-1.8.0', location = 'jquery-plugins/jquery.lazyload/1.8.0/jquery.lazyload-1.8.0.js' */
(function(e){define("atlassian/jquery-plugins/jquery.lazyload-1.8.0",function(){return function(h){e(window,document,h);return h}})})(function(e,h,i){var b=i,f=b(e);b.fn.lazyload=function(a){function c(){var a=0;g.each(function(){var c=b(this);if((!d.skip_invisible||c.is(":visible"))&&!b.abovethetop(this,d)&&!b.leftofbegin(this,d))if(!b.belowthefold(this,d)&&!b.rightoffold(this,d))c.trigger("appear");else if(++a>d.failure_limit)return!1})}var g=this,d={threshold:0,failure_limit:0,event:"scroll",effect:"show",
container:e,data_attribute:"original",skip_invisible:!0,appear:null,load:null};a&&(void 0!==a.failurelimit&&(a.failure_limit=a.failurelimit,delete a.failurelimit),void 0!==a.effectspeed&&(a.effect_speed=a.effectspeed,delete a.effectspeed),b.extend(d,a));a=void 0===d.container||d.container===e?f:b(d.container);0===d.event.indexOf("scroll")&&a.bind(d.event,function(){return c()});this.each(function(){var a=this,c=b(a);a.loaded=!1;c.one("appear",function(){this.loaded||(d.appear&&d.appear.call(a,g.length,
d),b("<img />").bind("load",function(){c.hide().attr("src",c.data(d.data_attribute))[d.effect](d.effect_speed);a.loaded=!0;var e=b.grep(g,function(a){return!a.loaded});g=b(e);d.load&&d.load.call(a,g.length,d)}).error(function(){c.attr("src",c.data(d.data_attribute))}).attr("src",c.data(d.data_attribute)))});0!==d.event.indexOf("scroll")&&c.bind(d.event,function(){a.loaded||c.trigger("appear")})});f.bind("resize",function(){c()});c();return this};b.belowthefold=function(a,c){return(void 0===c.container||
c.container===e?f.height()+f.scrollTop():b(c.container).offset().top+b(c.container).height())<=b(a).offset().top-c.threshold};b.rightoffold=function(a,c){return(void 0===c.container||c.container===e?f.width()+f.scrollLeft():b(c.container).offset().left+b(c.container).width())<=b(a).offset().left-c.threshold};b.abovethetop=function(a,c){return(void 0===c.container||c.container===e?f.scrollTop():b(c.container).offset().top)>=b(a).offset().top+c.threshold+b(a).height()};b.leftofbegin=function(a,c){return(void 0===
c.container||c.container===e?f.scrollLeft():b(c.container).offset().left)>=b(a).offset().left+c.threshold+b(a).width()};b.inviewport=function(a,c){return!b.rightofscreen(a,c)&&!b.leftofscreen(a,c)&&!b.belowthefold(a,c)&&!b.abovethetop(a,c)};b.extend(b.expr[":"],{"below-the-fold":function(a){return b.belowthefold(a,{threshold:0})},"above-the-top":function(a){return!b.belowthefold(a,{threshold:0})},"right-of-screen":function(a){return b.rightoffold(a,{threshold:0})},"left-of-screen":function(a){return!b.rightoffold(a,
{threshold:0})},"in-viewport":function(a){return!b.inviewport(a,{threshold:0})},"above-the-fold":function(a){return!b.belowthefold(a,{threshold:0})},"right-of-fold":function(a){return b.rightoffold(a,{threshold:0})},"left-of-fold":function(a){return!b.rightoffold(a,{threshold:0})}})});;
;
/* module-key = 'com.atlassian.plugin.jslibs:jquery.flot-0.7', location = 'jquery-plugins/jquery.flot/0.7/jquery.flot-0.7.js' */
(function(X){define("atlassian/jquery-plugins/jquery.flot-0.7",function(){return function(V){X(window,document,V);return V}})})(function(X,V,D){D.color={};D.color.make=function(g,k,j,da){var l={};l.r=g||0;l.g=k||0;l.b=j||0;l.a=null!=da?da:1;l.add=function(g,k){for(var j=0;j<g.length;++j)l[g.charAt(j)]+=k;return l.normalize()};l.scale=function(g,j){for(var k=0;k<g.length;++k)l[g.charAt(k)]*=j;return l.normalize()};l.toString=function(){return 1<=l.a?"rgb("+[l.r,l.g,l.b].join()+")":"rgba("+[l.r,l.g,
l.b,l.a].join()+")"};l.normalize=function(){function g(k,j,l){return j<k?k:j>l?l:j}l.r=g(0,parseInt(l.r),255);l.g=g(0,parseInt(l.g),255);l.b=g(0,parseInt(l.b),255);l.a=g(0,l.a,1);return l};l.clone=function(){return D.color.make(l.r,l.b,l.g,l.a)};return l.normalize()};D.color.extract=function(g,k){var j;do{j=g.css(k).toLowerCase();if(""!=j&&"transparent"!=j)break;g=g.parent()}while(!D.nodeName(g.get(0),"body"));"rgba(0, 0, 0, 0)"==j&&(j="transparent");return D.color.parse(j)};D.color.parse=function(g){var k,
j=D.color.make;if(k=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(g))return j(parseInt(k[1],10),parseInt(k[2],10),parseInt(k[3],10));if(k=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(g))return j(parseInt(k[1],10),parseInt(k[2],10),parseInt(k[3],10),parseFloat(k[4]));if(k=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(g))return j(2.55*parseFloat(k[1]),2.55*parseFloat(k[2]),
2.55*parseFloat(k[3]));if(k=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(g))return j(2.55*parseFloat(k[1]),2.55*parseFloat(k[2]),2.55*parseFloat(k[3]),parseFloat(k[4]));if(k=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(g))return j(parseInt(k[1],16),parseInt(k[2],16),parseInt(k[3],16));if(k=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(g))return j(parseInt(k[1]+k[1],16),parseInt(k[2]+k[2],16),parseInt(k[3]+
k[3],16));g=D.trim(g).toLowerCase();if("transparent"==g)return j(255,255,255,0);k=Y[g]||[0,0,0];return j(k[0],k[1],k[2])};var Y={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,
0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]},g=D,ca=function(A,k,
j,D){function l(a,e){for(var e=[v].concat(e),c=0;c<a.length;++c)a[c].apply(this,e)}function ea(a){for(var e=[],c=0;c<a.length;++c){var b=g.extend(!0,{},f.series);null!=a[c].data?(b.data=a[c].data,delete a[c].data,g.extend(!0,b,a[c]),a[c].data=b.data):b.data=a[c];e.push(b)}t=e;e=t.length;c=[];b=[];for(a=0;a<t.length;++a){var d=t[a].color;null!=d&&(--e,"number"==typeof d?b.push(d):c.push(g.color.parse(t[a].color)))}for(a=0;a<b.length;++a)e=Math.max(e,b[a]+1);c=[];for(a=b=0;c.length<e;)d=f.colors.length==
a?g.color.make(100,100,100):g.color.parse(f.colors[a]),d.scale("rgb",1+0.2*(1==b%2?-1:1)*Math.ceil(b/2)),c.push(d),++a,a>=f.colors.length&&(a=0,++b);for(a=e=0;a<t.length;++a){b=t[a];null==b.color?(b.color=c[e].toString(),++e):"number"==typeof b.color&&(b.color=c[b.color].toString());if(null==b.lines.show){var F,d=!0;for(F in b)if(b[F]&&b[F].show){d=!1;break}d&&(b.lines.show=!0)}b.xaxis=Q(w,O(b,"x"));b.yaxis=Q(G,O(b,"y"))}F=function(a,b,c){b<a.datamin&&b!=-z&&(a.datamin=b);c>a.datamax&&c!=z&&(a.datamax=
c)};var h=Number.POSITIVE_INFINITY,j=Number.NEGATIVE_INFINITY,z=Number.MAX_VALUE,n,o,s,E,q;g.each(C(),function(a,b){b.datamin=h;b.datamax=j;b.used=!1});for(a=0;a<t.length;++a)e=t[a],e.datapoints={points:[]},l(I.processRawData,[e,e.data,e.datapoints]);for(a=0;a<t.length;++a){var e=t[a],r=e.data,m=e.datapoints.format;if(!m){m=[];m.push({x:!0,number:!0,required:!0});m.push({y:!0,number:!0,required:!0});if(e.bars.show||e.lines.show&&e.lines.fill)m.push({y:!0,number:!0,required:!1,defaultValue:0}),e.bars.horizontal&&
(delete m[m.length-1].y,m[m.length-1].x=!0);e.datapoints.format=m}if(null==e.datapoints.pointsize){e.datapoints.pointsize=m.length;o=e.datapoints.pointsize;d=e.datapoints.points;insertSteps=e.lines.show&&e.lines.steps;e.xaxis.used=e.yaxis.used=!0;for(c=n=0;c<r.length;++c,n+=o){q=r[c];var u=null==q;if(!u)for(b=0;b<o;++b){s=q[b];if(E=m[b])if(E.number&&null!=s&&(s=+s,isNaN(s)?s=null:Infinity==s?s=z:-Infinity==s&&(s=-z)),null==s)E.required&&(u=!0),null!=E.defaultValue&&(s=E.defaultValue);d[n+b]=s}if(u)for(b=
0;b<o;++b)s=d[n+b],null!=s&&(E=m[b],E.x&&F(e.xaxis,s,s),E.y&&F(e.yaxis,s,s)),d[n+b]=null;else if(insertSteps&&0<n&&null!=d[n-o]&&d[n-o]!=d[n]&&d[n-o+1]!=d[n+1]){for(b=0;b<o;++b)d[n+o+b]=d[n+b];d[n+1]=d[n-o+1];n+=o}}}}for(a=0;a<t.length;++a)e=t[a],l(I.processDatapoints,[e,e.datapoints]);for(a=0;a<t.length;++a){e=t[a];d=e.datapoints.points;o=e.datapoints.pointsize;q=n=h;u=r=j;for(c=0;c<d.length;c+=o)if(null!=d[c])for(b=0;b<o;++b)if(s=d[c+b],(E=m[b])&&!(s==z||s==-z))if(E.x&&(s<n&&(n=s),s>r&&(r=s)),E.y)s<
q&&(q=s),s>u&&(u=s);e.bars.show&&(c="left"==e.bars.align?0:-e.bars.barWidth/2,e.bars.horizontal?(q+=c,u+=c+e.bars.barWidth):(n+=c,r+=c+e.bars.barWidth));F(e.xaxis,n,r);F(e.yaxis,q,u)}g.each(C(),function(a,b){b.datamin==h&&(b.datamin=null);b.datamax==j&&(b.datamax=null)})}function O(a,e){var c=a[e+"axis"];"object"==typeof c&&(c=c.n);"number"!=typeof c&&(c=1);return c}function C(){return g.grep(w.concat(G),function(a){return a})}function T(a){var e={},c,b;for(c=0;c<w.length;++c)(b=w[c])&&b.used&&(e["x"+
b.n]=b.c2p(a.left));for(c=0;c<G.length;++c)(b=G[c])&&b.used&&(e["y"+b.n]=b.c2p(a.top));void 0!==e.x1&&(e.x=e.x1);void 0!==e.y1&&(e.y=e.y1);return e}function Q(a,e){a[e-1]||(a[e-1]={n:e,direction:a==w?"x":"y",options:g.extend(!0,{},a==w?f.xaxis:f.yaxis)});return a[e-1]}function y(a,e){var c=V.createElement("canvas");c.className=e;c.width=x;c.height=H;a||g(c).css({position:"absolute",left:0,top:0});g(c).appendTo(A);c.getContext||(c=X.G_vmlCanvasManager.initElement(c));c.getContext("2d").save();return c}
function fa(){x=A.width();H=A.height();if(0>=x||0>=H)throw"Invalid dimensions for plot, width = "+x+", height = "+H;}function ga(a){a.width!=x&&(a.width=x);a.height!=H&&(a.height=H);a=a.getContext("2d");a.restore();a.save()}function Y(a){var e=a.labelWidth,c=a.labelHeight,b=a.options.position,d=a.options.tickLength,h=f.grid.axisMargin,j=f.grid.labelMargin,k="x"==a.direction?w:G,z=g.grep(k,function(a){return a&&a.options.position==b&&a.reserveSpace});g.inArray(a,z)==z.length-1&&(h=0);null==d&&(d="full");
k=g.grep(k,function(a){return a&&a.reserveSpace});k=0==g.inArray(a,k);!k&&"full"==d&&(d=5);isNaN(+d)||(j+=+d);"x"==a.direction?(c+=j,"bottom"==b?(p.bottom+=c+h,a.box={top:H-p.bottom,height:c}):(a.box={top:p.top+h,height:c},p.top+=c+h)):(e+=j,"left"==b?(a.box={left:p.left+h,width:e},p.left+=e+h):(p.right+=e+h,a.box={left:x-p.right,width:e}));a.position=b;a.tickLength=d;a.box.padding=j;a.innermost=k}function ha(){var a,e=C();g.each(e,function(a,b){b.show=b.options.show;null==b.show&&(b.show=b.used);
b.reserveSpace=b.show||b.options.reserveSpace;var c=b.options,d=+(null!=c.min?c.min:b.datamin),e=+(null!=c.max?c.max:b.datamax),m=e-d;if(0==m){if(m=0==e?1:0.01,null==c.min&&(d-=m),null==c.max||null!=c.min)e+=m}else{var f=c.autoscaleMargin;if(null!=f&&(null==c.min&&(d-=m*f,0>d&&(null!=b.datamin&&0<=b.datamin)&&(d=0)),null==c.max))e+=m*f,0<e&&(null!=b.datamax&&0>=b.datamax)&&(e=0)}b.min=d;b.max=e});allocatedAxes=g.grep(e,function(a){return a.reserveSpace});p.left=p.right=p.top=p.bottom=0;if(f.grid.show){g.each(allocatedAxes,
function(a,b){var c=b.options,d;d="number"==typeof c.ticks&&0<c.ticks?c.ticks:0.3*Math.sqrt("x"==b.direction?x:H);d=(b.max-b.min)/d;var e,m,f,h;if("time"==c.mode){var n={second:1E3,minute:6E4,hour:36E5,day:864E5,month:2592E6,year:525949.2*6E4};h=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[0.25,"month"],[0.5,"month"],[1,"month"],
[2,"month"],[3,"month"],[6,"month"],[1,"year"]];e=0;null!=c.minTickSize&&(e="number"==typeof c.tickSize?c.tickSize:c.minTickSize[0]*n[c.minTickSize[1]]);for(m=0;m<h.length-1&&!(d<(h[m][0]*n[h[m][1]]+h[m+1][0]*n[h[m+1][1]])/2&&h[m][0]*n[h[m][1]]>=e);++m);e=h[m][0];f=h[m][1];"year"==f&&(m=Math.pow(10,Math.floor(Math.log(d/n.year)/Math.LN10)),h=d/n.year/m,e=(1.5>h?1:3>h?2:7.5>h?5:10)*m);b.tickSize=c.tickSize||[e,f];m=function(b){var a=[],c=b.tickSize[0],d=b.tickSize[1],e=new Date(b.min),f=c*n[d];d==
"second"&&e.setUTCSeconds(M(e.getUTCSeconds(),c));d=="minute"&&e.setUTCMinutes(M(e.getUTCMinutes(),c));d=="hour"&&e.setUTCHours(M(e.getUTCHours(),c));d=="month"&&e.setUTCMonth(M(e.getUTCMonth(),c));d=="year"&&e.setUTCFullYear(M(e.getUTCFullYear(),c));e.setUTCMilliseconds(0);f>=n.minute&&e.setUTCSeconds(0);f>=n.hour&&e.setUTCMinutes(0);f>=n.day&&e.setUTCHours(0);f>=n.day*4&&e.setUTCDate(1);f>=n.year&&e.setUTCMonth(0);var h=0,m=Number.NaN,k;do{k=m;m=e.getTime();a.push(m);if(d=="month")if(c<1){e.setUTCDate(1);
var j=e.getTime();e.setUTCMonth(e.getUTCMonth()+1);var g=e.getTime();e.setTime(m+h*n.hour+(g-j)*c);h=e.getUTCHours();e.setUTCHours(0)}else e.setUTCMonth(e.getUTCMonth()+c);else d=="year"?e.setUTCFullYear(e.getUTCFullYear()+c):e.setTime(m+f)}while(m<b.max&&m!=k);return a};e=function(b,a){var e=new Date(b);if(c.timeformat!=null)return g.plot.formatDate(e,c.timeformat,c.monthNames);var d=a.tickSize[0]*n[a.tickSize[1]],f=a.max-a.min,h=c.twelveHourClock?" %p":"";fmt=d<n.minute?"%h:%M:%S"+h:d<n.day?f<2*
n.day?"%h:%M"+h:"%b %d %h:%M"+h:d<n.month?"%b %d":d<n.year?f<n.year?"%b":"%b %y":"%y";return g.plot.formatDate(e,fmt,c.monthNames)}}else{f=c.tickDecimals;var k=-Math.floor(Math.log(d)/Math.LN10);null!=f&&k>f&&(k=f);m=Math.pow(10,-k);h=d/m;if(1.5>h)e=1;else if(3>h){if(e=2,2.25<h&&(null==f||k+1<=f))e=2.5,++k}else e=7.5>h?5:10;e*=m;null!=c.minTickSize&&e<c.minTickSize&&(e=c.minTickSize);b.tickDecimals=Math.max(0,null!=f?f:k);b.tickSize=c.tickSize||e;m=function(b){var a=[],e=M(b.min,b.tickSize),c=0,d=
Number.NaN,f;do{f=d;d=e+c*b.tickSize;a.push(d);++c}while(d<b.max&&d!=f);return a};e=function(b,a){return b.toFixed(a.tickDecimals)}}if(null!=c.alignTicksWithAxis){var j=("x"==b.direction?w:G)[c.alignTicksWithAxis-1];if(j&&j.used&&j!=b){m=m(b);if(0<m.length&&(null==c.min&&(b.min=Math.min(b.min,m[0])),null==c.max&&1<m.length))b.max=Math.max(b.max,m[m.length-1]);m=function(b){var a=[],e,c;for(c=0;c<j.ticks.length;++c)e=(j.ticks[c].v-j.min)/(j.max-j.min),e=b.min+e*(b.max-b.min),a.push(e);return a};"time"!=
b.mode&&null==c.tickDecimals&&(d=Math.max(0,-Math.floor(Math.log(d)/Math.LN10)+1),h=m(b),1<h.length&&/\..*0$/.test((h[1]-h[0]).toFixed(d))||(b.tickDecimals=d))}}b.tickGenerator=m;b.tickFormatter=g.isFunction(c.tickFormatter)?function(b,a){return""+c.tickFormatter(b,a)}:e;e=b.options.ticks;d=[];null==e||"number"==typeof e&&0<e?d=b.tickGenerator(b):e&&(d=g.isFunction(e)?e({min:b.min,max:b.max}):e);b.ticks=[];for(e=0;e<d.length;++e)h=null,f=d[e],"object"==typeof f?(m=+f[0],1<f.length&&(h=f[1])):m=+f,
null==h&&(h=b.tickFormatter(m,b)),isNaN(m)||b.ticks.push({v:m,label:h});d=b.ticks;if(b.options.autoscaleMargin&&0<d.length&&(null==b.options.min&&(b.min=Math.min(b.min,d[0].v)),null==b.options.max&&1<d.length))b.max=Math.max(b.max,d[d.length-1].v);e=function(a,e){return g('<div style="position:absolute;top:-10000px;'+e+'font-size:smaller"><div class="'+b.direction+"Axis "+b.direction+b.n+'Axis">'+a.join("")+"</div></div>").appendTo(A)};f=b.options;m=b.ticks||[];h=[];var F;d=f.labelWidth;f=f.labelHeight;
if("x"==b.direction){if(null==d&&(d=Math.floor(x/(0<m.length?m.length:1))),null==f){h=[];for(k=0;k<m.length;++k)(F=m[k].label)&&h.push('<div class="tickLabel" style="float:left;width:'+d+'px">'+F+"</div>");0<h.length&&(h.push('<div style="clear:left"></div>'),e=e(h,"width:10000px;"),f=e.height(),e.remove())}}else if(null==d||null==f){for(k=0;k<m.length;++k)(F=m[k].label)&&h.push('<div class="tickLabel">'+F+"</div>");0<h.length&&(e=e(h,""),null==d&&(d=e.children().width()),null==f&&(f=e.find("div.tickLabel").height()),
e.remove())}null==d&&(d=0);null==f&&(f=0);b.labelWidth=d;b.labelHeight=f});for(a=allocatedAxes.length-1;0<=a;--a)Y(allocatedAxes[a]);var c=f.grid.minBorderMargin;if(null==c)for(a=c=0;a<t.length;++a)c=Math.max(c,t[a].points.radius+t[a].points.lineWidth/2);for(var b in p)p[b]+=f.grid.borderWidth,p[b]=Math.max(c,p[b])}P=x-p.left-p.right;K=H-p.bottom-p.top;g.each(e,function(b,a){var e=function(a){return a},c,d,f=a.options.transform||e,h=a.options.inverseTransform;"x"==a.direction?(c=a.scale=P/Math.abs(f(a.max)-
f(a.min)),d=Math.min(f(a.max),f(a.min))):(c=a.scale=K/Math.abs(f(a.max)-f(a.min)),c=-c,d=Math.max(f(a.max),f(a.min)));a.p2c=f==e?function(a){return(a-d)*c}:function(a){return(f(a)-d)*c};a.c2p=h?function(a){return h(d+a/c)}:function(a){return d+a/c}});if(f.grid.show){g.each(allocatedAxes,function(a,b){"x"==b.direction?(b.box.left=p.left,b.box.width=P):(b.box.top=p.top,b.box.height=K)});A.find(".tickLabels").remove();a=['<div class="tickLabels" style="font-size:smaller">'];e=C();for(c=0;c<e.length;++c){b=
e[c];var d=b.box;if(b.show){a.push('<div class="'+b.direction+"Axis "+b.direction+b.n+'Axis" style="color:'+b.options.color+'">');for(var h=0;h<b.ticks.length;++h){var j=b.ticks[h];if(j.label&&!(j.v<b.min||j.v>b.max)){var k={},z;"x"==b.direction?(z="center",k.left=Math.round(p.left+b.p2c(j.v)-b.labelWidth/2),"bottom"==b.position?k.top=d.top+d.padding:k.bottom=H-(d.top+d.height-d.padding)):(k.top=Math.round(p.top+b.p2c(j.v)-b.labelHeight/2),"left"==b.position?(k.right=x-(d.left+d.width-d.padding),
z="right"):(k.left=d.left+d.padding,z="left"));k.width=b.labelWidth;z=["position:absolute","text-align:"+z];for(var n in k)z.push(n+":"+k[n]+"px");a.push('<div class="tickLabel" style="'+z.join(";")+'">'+j.label+"</div>")}}a.push("</div>")}}a.push("</div>");A.append(a.join(""))}A.find(".legend").remove();if(f.legend.show){n=[];a=!1;e=f.legend.labelFormatter;for(d=0;d<t.length;++d)if(c=t[d],b=c.label)0==d%f.legend.noColumns&&(a&&n.push("</tr>"),n.push("<tr>"),a=!0),e&&(b=e(b,c)),n.push('<td class="legendColorBox"><div style="border:1px solid '+
f.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+c.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+b+"</td>");a&&n.push("</tr>");0!=n.length&&(a='<table style="font-size:smaller;color:'+f.grid.color+'">'+n.join("")+"</table>",null!=f.legend.container?g(f.legend.container).html(a):(n="",e=f.legend.position,c=f.legend.margin,null==c[0]&&(c=[c,c]),"n"==e.charAt(0)?n+="top:"+(c[1]+p.top)+"px;":"s"==e.charAt(0)&&(n+="bottom:"+(c[1]+p.bottom)+
"px;"),"e"==e.charAt(1)?n+="right:"+(c[0]+p.right)+"px;":"w"==e.charAt(1)&&(n+="left:"+(c[0]+p.left)+"px;"),a=g('<div class="legend">'+a.replace('style="','style="position:absolute;'+n+";")+"</div>").appendTo(A),0!=f.legend.backgroundOpacity&&(e=f.legend.backgroundColor,null==e&&(e=(e=f.grid.backgroundColor)&&"string"==typeof e?g.color.parse(e):g.color.extract(a,"background-color"),e.a=1,e=e.toString()),c=a.children(),g('<div style="position:absolute;width:'+c.width()+"px;height:"+c.height()+"px;"+
n+"background-color:"+e+';"> </div>').prependTo(a).css("opacity",f.legend.backgroundOpacity))))}}function ia(){h.clearRect(0,0,x,H);var a=f.grid;a.show&&a.backgroundColor&&(h.save(),h.translate(p.left,p.top),h.fillStyle=ja(f.grid.backgroundColor,K,0,"rgba(255, 255, 255, 0)"),h.fillRect(0,0,P,K),h.restore());a.show&&!a.aboveData&&ka();for(var e=0;e<t.length;++e){l(I.drawSeries,[h,t[e]]);var c=t[e];c.lines.show&&ca(c);c.bars.show&&ta(c);c.points.show&&ua(c)}l(I.draw,[h]);a.show&&a.aboveData&&ka()}function la(a,
e){var c,b,d,f,h=C();for(i=0;i<h.length;++i)if(c=h[i],c.direction==e&&(f=e+c.n+"axis",!a[f]&&1==c.n&&(f=e+"axis"),a[f])){b=a[f].from;d=a[f].to;break}a[f]||(c="x"==e?w[0]:G[0],b=a[e+"1"],d=a[e+"2"]);null!=b&&(null!=d&&b>d)&&(f=b,b=d,d=f);return{from:b,to:d,axis:c}}function ka(){var a;h.save();h.translate(p.left,p.top);var e=f.grid.markings;if(e){if(g.isFunction(e)){var c=v.getAxes();c.xmin=c.xaxis.min;c.xmax=c.xaxis.max;c.ymin=c.yaxis.min;c.ymax=c.yaxis.max;e=e(c)}for(a=0;a<e.length;++a){var c=e[a],
b=la(c,"x"),d=la(c,"y");null==b.from&&(b.from=b.axis.min);null==b.to&&(b.to=b.axis.max);null==d.from&&(d.from=d.axis.min);null==d.to&&(d.to=d.axis.max);b.to<b.axis.min||(b.from>b.axis.max||d.to<d.axis.min||d.from>d.axis.max)||(b.from=Math.max(b.from,b.axis.min),b.to=Math.min(b.to,b.axis.max),d.from=Math.max(d.from,d.axis.min),d.to=Math.min(d.to,d.axis.max),b.from==b.to&&d.from==d.to||(b.from=b.axis.p2c(b.from),b.to=b.axis.p2c(b.to),d.from=d.axis.p2c(d.from),d.to=d.axis.p2c(d.to),b.from==b.to||d.from==
d.to?(h.beginPath(),h.strokeStyle=c.color||f.grid.markingsColor,h.lineWidth=c.lineWidth||f.grid.markingsLineWidth,h.moveTo(b.from,d.from),h.lineTo(b.to,d.to),h.stroke()):(h.fillStyle=c.color||f.grid.markingsColor,h.fillRect(b.from,d.to,b.to-b.from,d.from-d.to))))}}c=C();e=f.grid.borderWidth;for(b=0;b<c.length;++b){d=c[b];a=d.box;var k=d.tickLength,j,l,z,n;if(d.show&&0!=d.ticks.length){h.strokeStyle=d.options.tickColor||g.color.parse(d.options.color).scale("a",0.22).toString();h.lineWidth=1;"x"==d.direction?
(j=0,l="full"==k?"top"==d.position?0:K:a.top-p.top+("top"==d.position?a.height:0)):(l=0,j="full"==k?"left"==d.position?0:P:a.left-p.left+("left"==d.position?a.width:0));d.innermost||(h.beginPath(),z=n=0,"x"==d.direction?z=P:n=K,1==h.lineWidth&&(j=Math.floor(j)+0.5,l=Math.floor(l)+0.5),h.moveTo(j,l),h.lineTo(j+z,l+n),h.stroke());h.beginPath();for(a=0;a<d.ticks.length;++a){var o=d.ticks[a].v;z=n=0;o<d.min||(o>d.max||"full"==k&&0<e&&(o==d.min||o==d.max))||("x"==d.direction?(j=d.p2c(o),n="full"==k?-K:
k,"top"==d.position&&(n=-n)):(l=d.p2c(o),z="full"==k?-P:k,"left"==d.position&&(z=-z)),1==h.lineWidth&&("x"==d.direction?j=Math.floor(j)+0.5:l=Math.floor(l)+0.5),h.moveTo(j,l),h.lineTo(j+z,l+n))}h.stroke()}}e&&(h.lineWidth=e,h.strokeStyle=f.grid.borderColor,h.strokeRect(-e/2,-e/2,P+e,K+e));h.restore()}function ca(a){function e(a,b,e,c,d){var f=a.points,a=a.pointsize,m=null,n=null;h.beginPath();for(var k=a;k<f.length;k+=a){var j=f[k-a],g=f[k-a+1],o=f[k],l=f[k+1];if(!(null==j||null==o)){if(g<=l&&g<d.min){if(l<
d.min)continue;j=(d.min-g)/(l-g)*(o-j)+j;g=d.min}else if(l<=g&&l<d.min){if(g<d.min)continue;o=(d.min-g)/(l-g)*(o-j)+j;l=d.min}if(g>=l&&g>d.max){if(l>d.max)continue;j=(d.max-g)/(l-g)*(o-j)+j;g=d.max}else if(l>=g&&l>d.max){if(g>d.max)continue;o=(d.max-g)/(l-g)*(o-j)+j;l=d.max}if(j<=o&&j<c.min){if(o<c.min)continue;g=(c.min-j)/(o-j)*(l-g)+g;j=c.min}else if(o<=j&&o<c.min){if(j<c.min)continue;l=(c.min-j)/(o-j)*(l-g)+g;o=c.min}if(j>=o&&j>c.max){if(o>c.max)continue;g=(c.max-j)/(o-j)*(l-g)+g;j=c.max}else if(o>=
j&&o>c.max){if(j>c.max)continue;l=(c.max-j)/(o-j)*(l-g)+g;o=c.max}(j!=m||g!=n)&&h.moveTo(c.p2c(j)+b,d.p2c(g)+e);m=o;n=l;h.lineTo(c.p2c(o)+b,d.p2c(l)+e)}}h.stroke()}h.save();h.translate(p.left,p.top);h.lineJoin="round";var c=a.lines.lineWidth,b=a.shadowSize;if(0<c&&0<b){h.lineWidth=b;h.strokeStyle="rgba(0,0,0,0.1)";var d=Math.PI/18;e(a.datapoints,Math.sin(d)*(c/2+b/2),Math.cos(d)*(c/2+b/2),a.xaxis,a.yaxis);h.lineWidth=b/2;e(a.datapoints,Math.sin(d)*(c/2+b/4),Math.cos(d)*(c/2+b/4),a.xaxis,a.yaxis)}h.lineWidth=
c;h.strokeStyle=a.color;if(b=Z(a.lines,a.color,0,K)){h.fillStyle=b;for(var f=a.datapoints,b=a.xaxis,d=a.yaxis,k=f.points,f=f.pointsize,j=Math.min(Math.max(0,d.min),d.max),g=0,n=!1,o=1,l=0,E=0;!(0<f&&g>k.length+f);){var g=g+f,q=k[g-f],r=k[g-f+o],m=k[g],u=k[g+o];if(n){if(0<f&&null!=q&&null==m){E=g;f=-f;o=2;continue}if(0>f&&g==l+f){h.fill();n=!1;f=-f;o=1;g=l=E+f;continue}}if(!(null==q||null==m)){if(q<=m&&q<b.min){if(m<b.min)continue;r=(b.min-q)/(m-q)*(u-r)+r;q=b.min}else if(m<=q&&m<b.min){if(q<b.min)continue;
u=(b.min-q)/(m-q)*(u-r)+r;m=b.min}if(q>=m&&q>b.max){if(m>b.max)continue;r=(b.max-q)/(m-q)*(u-r)+r;q=b.max}else if(m>=q&&m>b.max){if(q>b.max)continue;u=(b.max-q)/(m-q)*(u-r)+r;m=b.max}n||(h.beginPath(),h.moveTo(b.p2c(q),d.p2c(j)),n=!0);if(r>=d.max&&u>=d.max)h.lineTo(b.p2c(q),d.p2c(d.max)),h.lineTo(b.p2c(m),d.p2c(d.max));else if(r<=d.min&&u<=d.min)h.lineTo(b.p2c(q),d.p2c(d.min)),h.lineTo(b.p2c(m),d.p2c(d.min));else{var t=q,A=m;r<=u&&r<d.min&&u>=d.min?(q=(d.min-r)/(u-r)*(m-q)+q,r=d.min):u<=r&&(u<d.min&&
r>=d.min)&&(m=(d.min-r)/(u-r)*(m-q)+q,u=d.min);r>=u&&r>d.max&&u<=d.max?(q=(d.max-r)/(u-r)*(m-q)+q,r=d.max):u>=r&&(u>d.max&&r<=d.max)&&(m=(d.max-r)/(u-r)*(m-q)+q,u=d.max);q!=t&&h.lineTo(b.p2c(t),d.p2c(r));h.lineTo(b.p2c(q),d.p2c(r));h.lineTo(b.p2c(m),d.p2c(u));m!=A&&(h.lineTo(b.p2c(m),d.p2c(u)),h.lineTo(b.p2c(A),d.p2c(u)))}}}}0<c&&e(a.datapoints,0,0,a.xaxis,a.yaxis);h.restore()}function ua(a){function e(a,b,c,e,d,f,j,g){for(var k=a.points,a=a.pointsize,m=0;m<k.length;m+=a){var l=k[m],p=k[m+1];null==
l||(l<f.min||l>f.max||p<j.min||p>j.max)||(h.beginPath(),l=f.p2c(l),p=j.p2c(p)+e,"circle"==g?h.arc(l,p,b,0,d?Math.PI:2*Math.PI,!1):g(h,l,p,b,d),h.closePath(),c&&(h.fillStyle=c,h.fill()),h.stroke())}}h.save();h.translate(p.left,p.top);var c=a.points.lineWidth,b=a.shadowSize,d=a.points.radius,f=a.points.symbol;0<c&&0<b&&(b/=2,h.lineWidth=b,h.strokeStyle="rgba(0,0,0,0.1)",e(a.datapoints,d,null,b+b/2,!0,a.xaxis,a.yaxis,f),h.strokeStyle="rgba(0,0,0,0.2)",e(a.datapoints,d,null,b/2,!0,a.xaxis,a.yaxis,f));
h.lineWidth=c;h.strokeStyle=a.color;e(a.datapoints,d,Z(a.points,a.color),0,!1,a.xaxis,a.yaxis,f);h.restore()}function ma(a,e,c,b,d,f,h,j,g,k,l,p){var t,q,r,m;l?(m=q=r=!0,t=!1,l=c,c=e+b,d=e+d,a<l&&(e=a,a=l,l=e,t=!0,q=!1)):(t=q=r=!0,m=!1,l=a+b,a+=d,d=c,c=e,c<d&&(e=c,c=d,d=e,m=!0,r=!1));if(!(a<j.min||l>j.max||c<g.min||d>g.max))if(l<j.min&&(l=j.min,t=!1),a>j.max&&(a=j.max,q=!1),d<g.min&&(d=g.min,m=!1),c>g.max&&(c=g.max,r=!1),l=j.p2c(l),d=g.p2c(d),a=j.p2c(a),c=g.p2c(c),h&&(k.beginPath(),k.moveTo(l,d),
k.lineTo(l,c),k.lineTo(a,c),k.lineTo(a,d),k.fillStyle=h(d,c),k.fill()),0<p&&(t||q||r||m))k.beginPath(),k.moveTo(l,d+f),t?k.lineTo(l,c+f):k.moveTo(l,c+f),r?k.lineTo(a,c+f):k.moveTo(a,c+f),q?k.lineTo(a,d+f):k.moveTo(a,d+f),m?k.lineTo(l,d+f):k.moveTo(l,d+f),k.stroke()}function ta(a){h.save();h.translate(p.left,p.top);h.lineWidth=a.bars.lineWidth;h.strokeStyle=a.color;for(var e="left"==a.bars.align?0:-a.bars.barWidth/2,c=a.datapoints,b=e+a.bars.barWidth,d=a.bars.fill?function(b,c){return Z(a.bars,a.color,
b,c)}:null,f=a.xaxis,j=a.yaxis,g=c.points,c=c.pointsize,k=0;k<g.length;k+=c)null!=g[k]&&ma(g[k],g[k+1],g[k+2],e,b,0,d,f,j,h,a.bars.horizontal,a.bars.lineWidth);h.restore()}function Z(a,e,c,b){var d=a.fill;if(!d)return null;if(a.fillColor)return ja(a.fillColor,c,b,e);a=g.color.parse(e);a.a="number"==typeof d?d:0.4;a.normalize();return a.toString()}function na(a){f.grid.hoverable&&$("plothover",a,function(a){return!1!=a.hoverable})}function oa(a){f.grid.hoverable&&$("plothover",a,function(){return!1})}
function pa(a){$("plotclick",a,function(a){return!1!=a.clickable})}function $(a,e,c){var b=J.offset(),d=e.pageX-b.left-p.left,h=e.pageY-b.top-p.top,j=T({left:d,top:h});j.pageX=e.pageX;j.pageY=e.pageY;var e=f.grid.mouseActiveRadius,k=e*e+1,g=null,l,o;for(l=t.length-1;0<=l;--l)if(c(t[l])){var s=t[l],v=s.xaxis,q=s.yaxis,r=s.datapoints.points,m=s.datapoints.pointsize,u=v.c2p(d),y=q.c2p(h),B=e/v.scale,C=e/q.scale;v.options.inverseTransform&&(B=Number.MAX_VALUE);q.options.inverseTransform&&(C=Number.MAX_VALUE);
if(s.lines.show||s.points.show)for(o=0;o<r.length;o+=m){var w=r[o],x=r[o+1];if(null!=w&&!(w-u>B||w-u<-B||x-y>C||x-y<-C))w=Math.abs(v.p2c(w)-d),x=Math.abs(q.p2c(x)-h),x=w*w+x*x,x<k&&(k=x,g=[l,o/m])}if(s.bars.show&&!g){v="left"==s.bars.align?0:-s.bars.barWidth/2;s=v+s.bars.barWidth;for(o=0;o<r.length;o+=m)if(w=r[o],x=r[o+1],q=r[o+2],null!=w&&(t[l].bars.horizontal?u<=Math.max(q,w)&&u>=Math.min(q,w)&&y>=x+v&&y<=x+s:u>=w+v&&u<=w+s&&y>=Math.min(q,x)&&y<=Math.max(q,x)))g=[l,o/m]}}g?(l=g[0],o=g[1],m=t[l].datapoints.pointsize,
c={datapoint:t[l].datapoints.points.slice(o*m,(o+1)*m),dataIndex:o,series:t[l],seriesIndex:l}):c=null;c&&(c.pageX=parseInt(c.series.xaxis.p2c(c.datapoint[0])+b.left+p.left),c.pageY=parseInt(c.series.yaxis.p2c(c.datapoint[1])+b.top+p.top));if(f.grid.autoHighlight){for(b=0;b<N.length;++b)d=N[b],d.auto==a&&(!c||!(d.series==c.series&&d.point[0]==c.datapoint[0]&&d.point[1]==c.datapoint[1]))&&qa(d.series,d.point);c&&ra(c.series,c.datapoint,a)}A.trigger(a,[j,c])}function W(){U||(U=setTimeout(va,30))}function va(){U=
null;B.save();B.clearRect(0,0,x,H);B.translate(p.left,p.top);var a,e;for(a=0;a<N.length;++a)if(e=N[a],e.series.bars.show)wa(e.series,e.point);else{var c=e.series,b=e.point;e=b[0];var b=b[1],d=c.xaxis,f=c.yaxis;if(!(e<d.min||e>d.max||b<f.min||b>f.max)){var h=c.points.radius+c.points.lineWidth/2;B.lineWidth=h;B.strokeStyle=g.color.parse(c.color).scale("a",0.5).toString();h*=1.5;e=d.p2c(e);b=f.p2c(b);B.beginPath();"circle"==c.points.symbol?B.arc(e,b,h,0,2*Math.PI,!1):c.points.symbol(B,e,b,h,!1);B.closePath();
B.stroke()}}B.restore();l(I.drawOverlay,[B])}function ra(a,e,c){"number"==typeof a&&(a=t[a]);if("number"==typeof e)var b=a.datapoints.pointsize,e=a.datapoints.points.slice(b*e,b*(e+1));b=sa(a,e);-1==b?(N.push({series:a,point:e,auto:c}),W()):c||(N[b].auto=!1)}function qa(a,e){null==a&&null==e&&(N=[],W());"number"==typeof a&&(a=t[a]);"number"==typeof e&&(e=a.data[e]);var c=sa(a,e);-1!=c&&(N.splice(c,1),W())}function sa(a,e){for(var c=0;c<N.length;++c){var b=N[c];if(b.series==a&&b.point[0]==e[0]&&b.point[1]==
e[1])return c}return-1}function wa(a,e){B.lineWidth=a.bars.lineWidth;B.strokeStyle=g.color.parse(a.color).scale("a",0.5).toString();var c=g.color.parse(a.color).scale("a",0.5).toString(),b="left"==a.bars.align?0:-a.bars.barWidth/2;ma(e[0],e[1],e[2]||0,b,b+a.bars.barWidth,0,function(){return c},a.xaxis,a.yaxis,B,a.bars.horizontal,a.bars.lineWidth)}function ja(a,e,c,b){if("string"==typeof a)return a;for(var e=h.createLinearGradient(0,c,0,e),c=0,d=a.colors.length;c<d;++c){var f=a.colors[c];if("string"!=
typeof f){var j=g.color.parse(b);null!=f.brightness&&(j=j.scale("rgb",f.brightness));null!=f.opacity&&(j.a*=f.opacity);f=j.toString()}e.addColorStop(c/(d-1),f)}return e}var t=[],f={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:0.85},xaxis:{show:null,position:"bottom",mode:null,color:null,tickColor:null,transform:null,inverseTransform:null,
min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null,monthNames:null,timeformat:null,twelveHourClock:!1},yaxis:{autoscaleMargin:0.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:!1,fillColor:null,steps:!1},bars:{show:!1,lineWidth:2,barWidth:1,
fill:!0,fillColor:null,align:"left",horizontal:!1},shadowSize:3},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,labelMargin:5,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,mouseActiveRadius:10},hooks:{}},R=null,S=null,J=null,h=null,B=null,w=[],G=[],p={left:0,right:0,top:0,bottom:0},x=0,H=0,P=0,K=0,I={processOptions:[],processRawData:[],processDatapoints:[],
drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},v=this;v.setData=ea;v.setupGrid=ha;v.draw=ia;v.getPlaceholder=function(){return A};v.getCanvas=function(){return R};v.getPlotOffset=function(){return p};v.width=function(){return P};v.height=function(){return K};v.offset=function(){var a=J.offset();a.left+=p.left;a.top+=p.top;return a};v.getData=function(){return t};v.getAxes=function(){var a={};g.each(w.concat(G),function(e,c){c&&(a[c.direction+(1!=c.n?c.n:"")+"axis"]=c)});return a};
v.getXAxes=function(){return w};v.getYAxes=function(){return G};v.c2p=T;v.p2c=function(a){var e={},c,b,d;for(c=0;c<w.length;++c)if((b=w[c])&&b.used)if(d="x"+b.n,null==a[d]&&1==b.n&&(d="x"),null!=a[d]){e.left=b.p2c(a[d]);break}for(c=0;c<G.length;++c)if((b=G[c])&&b.used)if(d="y"+b.n,null==a[d]&&1==b.n&&(d="y"),null!=a[d]){e.top=b.p2c(a[d]);break}return e};v.getOptions=function(){return f};v.highlight=ra;v.unhighlight=qa;v.triggerRedrawOverlay=W;v.pointOffset=function(a){return{left:parseInt(w[O(a,"x")-
1].p2c(+a.x)+p.left),top:parseInt(G[O(a,"y")-1].p2c(+a.y)+p.top)}};v.shutdown=function(){U&&clearTimeout(U);J.unbind("mousemove",na);J.unbind("mouseleave",oa);J.unbind("click",pa);l(I.shutdown,[J])};v.resize=function(){fa();ga(R);ga(S)};v.hooks=I;for(var aa=0;aa<D.length;++aa){var ba=D[aa];ba.init(v);ba.options&&g.extend(!0,f,ba.options)}g.extend(!0,f,j);null==f.xaxis.color&&(f.xaxis.color=f.grid.color);null==f.yaxis.color&&(f.yaxis.color=f.grid.color);null==f.xaxis.tickColor&&(f.xaxis.tickColor=
f.grid.tickColor);null==f.yaxis.tickColor&&(f.yaxis.tickColor=f.grid.tickColor);null==f.grid.borderColor&&(f.grid.borderColor=f.grid.color);null==f.grid.tickColor&&(f.grid.tickColor=g.color.parse(f.grid.color).scale("a",0.22).toString());for(j=0;j<Math.max(1,f.xaxes.length);++j)f.xaxes[j]=g.extend(!0,{},f.xaxis,f.xaxes[j]);for(j=0;j<Math.max(1,f.yaxes.length);++j)f.yaxes[j]=g.extend(!0,{},f.yaxis,f.yaxes[j]);f.xaxis.noTicks&&null==f.xaxis.ticks&&(f.xaxis.ticks=f.xaxis.noTicks);f.yaxis.noTicks&&null==
f.yaxis.ticks&&(f.yaxis.ticks=f.yaxis.noTicks);f.x2axis&&(f.xaxes[1]=g.extend(!0,{},f.xaxis,f.x2axis),f.xaxes[1].position="top");f.y2axis&&(f.yaxes[1]=g.extend(!0,{},f.yaxis,f.y2axis),f.yaxes[1].position="right");f.grid.coloredAreas&&(f.grid.markings=f.grid.coloredAreas);f.grid.coloredAreasColor&&(f.grid.markingsColor=f.grid.coloredAreasColor);f.lines&&g.extend(!0,f.series.lines,f.lines);f.points&&g.extend(!0,f.series.points,f.points);f.bars&&g.extend(!0,f.series.bars,f.bars);null!=f.shadowSize&&
(f.series.shadowSize=f.shadowSize);for(j=0;j<f.xaxes.length;++j)Q(w,j+1).options=f.xaxes[j];for(j=0;j<f.yaxes.length;++j)Q(G,j+1).options=f.yaxes[j];for(var L in I)f.hooks[L]&&f.hooks[L].length&&(I[L]=I[L].concat(f.hooks[L]));l(I.processOptions,[f]);L=A.children("canvas.base");j=A.children("canvas.overlay");0==L.length||0==j?(A.html(""),A.css({padding:0}),"static"==A.css("position")&&A.css("position","relative"),fa(),R=y(!0,"base"),S=y(!1,"overlay"),L=!1):(R=L.get(0),S=j.get(0),L=!0);h=R.getContext("2d");
B=S.getContext("2d");J=g([S,R]);L&&(A.data("plot").shutdown(),v.resize(),B.clearRect(0,0,x,H),J.unbind(),A.children().not([R,S]).remove());A.data("plot",v);ea(k);ha();ia();f.grid.hoverable&&(J.mousemove(na),J.mouseleave(oa));f.grid.clickable&&J.click(pa);l(I.bindEvents,[J]);var N=[],U=null},M=function(g,k){return k*Math.floor(g/k)};g.plot=function(A,k,j){return new ca(g(A),k,j,g.plot.plugins)};g.plot.version="0.7";g.plot.plugins=[];g.plot.formatDate=function(g,k,j){var D=function(g){g=""+g;return 1==
g.length?"0"+g:g},l=[],M=!1,O=!1,C=g.getUTCHours(),T=12>C;null==j&&(j="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "));-1!=k.search(/%p|%P/)&&(12<C?C-=12:0==C&&(C=12));for(var Q=0;Q<k.length;++Q){var y=k.charAt(Q);if(M){switch(y){case "h":y=""+C;break;case "H":y=D(C);break;case "M":y=D(g.getUTCMinutes());break;case "S":y=D(g.getUTCSeconds());break;case "d":y=""+g.getUTCDate();break;case "m":y=""+(g.getUTCMonth()+1);break;case "y":y=""+g.getUTCFullYear();break;case "b":y=""+j[g.getUTCMonth()];
break;case "p":y=T?"am":"pm";break;case "P":y=T?"AM":"PM";break;case "0":y="",O=!0}y&&O&&(y=D(y),O=!1);l.push(y);O||(M=!1)}else"%"==y?M=!0:l.push(y)}return l.join("")}});;
;
/* module-key = 'com.atlassian.plugin.jslibs:jquery.effects-1.8rc3', location = 'jquery-plugins/jquery.effects/1.8rc3/jquery.effects-1.8rc3.js' */
(function(k){define("atlassian/jquery-plugins/jquery.effects-1.8rc3",function(){return function(i){k(window,document,i);return i}})})(function(k,i,f){if(!f.effects){var m=function(c){var a;return c&&c.constructor==Array&&3==c.length?c:(a=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(c))?[parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3],10)]:(a=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(c))?[2.55*parseFloat(a[1]),
2.55*parseFloat(a[2]),2.55*parseFloat(a[3])]:(a=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(c))?[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]:(a=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(c))?[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]:/rgba\(0, 0, 0, 0\)/.exec(c)?l.transparent:l[f.trim(c).toLowerCase()]},n=function(){var c=i.defaultView?i.defaultView.getComputedStyle(this,null):this.currentStyle,a={},b,d;if(c&&c.length&&c[0]&&c[c[0]])for(var e=
c.length;e--;)b=c[e],"string"==typeof c[b]&&(d=b.replace(/\-(\w)/g,function(a,b){return b.toUpperCase()}),a[d]=c[b]);else for(b in c)"string"===typeof c[b]&&(a[b]=c[b]);return a},o=function(c){var a,b;for(a in c)b=c[a],(null==b||f.isFunction(b)||a in q||/scrollbar/.test(a)||!/color/i.test(a)&&isNaN(parseFloat(b)))&&delete c[a];return c},r=function(c,a){var b={_:0},d;for(d in a)c[d]!=a[d]&&(b[d]=a[d]);return b},j=function(c,a,b,d){"object"==typeof c&&(d=a,b=null,a=c,c=a.effect);f.isFunction(a)&&(d=
a,b=null,a={});if("number"==typeof a||f.fx.speeds[a])d=b,b=a,a={};a=a||{};b=b||a.duration;b=f.fx.off?0:"number"==typeof b?b:f.fx.speeds[b]||f.fx.speeds._default;d=d||a.complete;return[c,a,b,d]};f.effects={};f.each("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color outlineColor".split(" "),function(c,a){f.fx.step[a]=function(b){if(!b.colorInit){var c;c=b.elem;var e=a,h;do{h=f.curCSS(c,e);if(h!=""&&h!="transparent"||f.nodeName(c,"body"))break;e="backgroundColor"}while(c=
c.parentNode);c=m(h);b.start=c;b.end=m(b.end);b.colorInit=true}b.elem.style[a]="rgb("+Math.max(Math.min(parseInt(b.pos*(b.end[0]-b.start[0])+b.start[0],10),255),0)+","+Math.max(Math.min(parseInt(b.pos*(b.end[1]-b.start[1])+b.start[1],10),255),0)+","+Math.max(Math.min(parseInt(b.pos*(b.end[2]-b.start[2])+b.start[2],10),255),0)+")"}});var l={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],
darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],
maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},p=["add","remove","toggle"],q={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};f.effects.animateClass=function(c,a,b,d){f.isFunction(b)&&(d=b,b=null);return this.each(function(){var e=f(this),h=e.attr("style")||
" ",g=o(n.call(this)),i,j=e.attr("className");f.each(p,function(a,b){if(c[b])e[b+"Class"](c[b])});i=o(n.call(this));e.attr("className",j);e.animate(r(g,i),a,b,function(){f.each(p,function(a,b){if(c[b])e[b+"Class"](c[b])});if(typeof e.attr("style")=="object"){e.attr("style").cssText="";e.attr("style").cssText=h}else e.attr("style",h);d&&d.apply(this,arguments)})})};f.fn.extend({_addClass:f.fn.addClass,addClass:function(c,a,b,d){return a?f.effects.animateClass.apply(this,[{add:c},a,b,d]):this._addClass(c)},
_removeClass:f.fn.removeClass,removeClass:function(c,a,b,d){return a?f.effects.animateClass.apply(this,[{remove:c},a,b,d]):this._removeClass(c)},_toggleClass:f.fn.toggleClass,toggleClass:function(c,a,b,d,e){return"boolean"==typeof a||void 0===a?b?f.effects.animateClass.apply(this,[a?{add:c}:{remove:c},b,d,e]):this._toggleClass(c,a):f.effects.animateClass.apply(this,[{toggle:c},a,b,d])},switchClass:function(c,a,b,d,e){return f.effects.animateClass.apply(this,[{add:a,remove:c},b,d,e])}});f.extend(f.effects,
{version:"1.8rc3",save:function(c,a){for(var b=0;b<a.length;b++)null!==a[b]&&c.data("ec.storage."+a[b],c[0].style[a[b]])},restore:function(c,a){for(var b=0;b<a.length;b++)null!==a[b]&&c.css(a[b],c.data("ec.storage."+a[b]))},setMode:function(c,a){"toggle"==a&&(a=c.is(":hidden")?"show":"hide");return a},getBaseline:function(c,a){var b,d;switch(c[0]){case "top":b=0;break;case "middle":b=0.5;break;case "bottom":b=1;break;default:b=c[0]/a.height}switch(c[1]){case "left":d=0;break;case "center":d=0.5;break;
case "right":d=1;break;default:d=c[1]/a.width}return{x:d,y:b}},createWrapper:function(c){if(c.parent().is(".ui-effects-wrapper"))return c.parent();var a={width:c.outerWidth(!0),height:c.outerHeight(!0),"float":c.css("float")},b=f("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0});c.wrap(b);b=c.parent();"static"==c.css("position")?(b.css({position:"relative"}),c.css({position:"relative"})):(f.extend(a,{position:c.css("position"),
zIndex:c.css("z-index")}),f.each(["top","left","bottom","right"],function(b,e){a[e]=c.css(e);isNaN(parseInt(a[e],10))&&(a[e]="auto")}),c.css({position:"relative",top:0,left:0}));return b.css(a).show()},removeWrapper:function(c){return c.parent().is(".ui-effects-wrapper")?c.parent().replaceWith(c):c},setTransition:function(c,a,b,d){d=d||{};f.each(a,function(a,f){unit=c.cssUnit(f);0<unit[0]&&(d[f]=unit[0]*b+unit[1])});return d}});f.fn.extend({effect:function(c,a,b,d){var e=j.apply(this,arguments),e=
{options:e[1],duration:e[2],callback:e[3]},h=f.effects[c];return h&&!f.fx.off?h.call(this,e):this},_show:f.fn.show,show:function(c){if(!c||"number"==typeof c||f.fx.speeds[c])return this._show.apply(this,arguments);var a=j.apply(this,arguments);a[1].mode="show";return this.effect.apply(this,a)},_hide:f.fn.hide,hide:function(c){if(!c||"number"==typeof c||f.fx.speeds[c])return this._hide.apply(this,arguments);var a=j.apply(this,arguments);a[1].mode="hide";return this.effect.apply(this,a)},__toggle:f.fn.toggle,
toggle:function(c){if(!c||"number"==typeof c||f.fx.speeds[c]||"boolean"==typeof c||f.isFunction(c))return this.__toggle.apply(this,arguments);var a=j.apply(this,arguments);a[1].mode="toggle";return this.effect.apply(this,a)},cssUnit:function(c){var a=this.css(c),b=[];f.each(["em","px","%","pt"],function(c,e){0<a.indexOf(e)&&(b=[parseFloat(a),e])});return b}});f.easing.jswing=f.easing.swing;f.extend(f.easing,{def:"easeOutQuad",swing:function(c,a,b,d,e){return f.easing[f.easing.def](c,a,b,d,e)},easeInQuad:function(c,
a,b,d,e){return d*(a/=e)*a+b},easeOutQuad:function(c,a,b,d,e){return-d*(a/=e)*(a-2)+b},easeInOutQuad:function(c,a,b,d,e){return 1>(a/=e/2)?d/2*a*a+b:-d/2*(--a*(a-2)-1)+b},easeInCubic:function(c,a,b,d,e){return d*(a/=e)*a*a+b},easeOutCubic:function(c,a,b,d,e){return d*((a=a/e-1)*a*a+1)+b},easeInOutCubic:function(c,a,b,d,e){return 1>(a/=e/2)?d/2*a*a*a+b:d/2*((a-=2)*a*a+2)+b},easeInQuart:function(c,a,b,d,e){return d*(a/=e)*a*a*a+b},easeOutQuart:function(c,a,b,d,e){return-d*((a=a/e-1)*a*a*a-1)+b},easeInOutQuart:function(c,
a,b,d,e){return 1>(a/=e/2)?d/2*a*a*a*a+b:-d/2*((a-=2)*a*a*a-2)+b},easeInQuint:function(c,a,b,d,e){return d*(a/=e)*a*a*a*a+b},easeOutQuint:function(c,a,b,d,e){return d*((a=a/e-1)*a*a*a*a+1)+b},easeInOutQuint:function(c,a,b,d,e){return 1>(a/=e/2)?d/2*a*a*a*a*a+b:d/2*((a-=2)*a*a*a*a+2)+b},easeInSine:function(c,a,b,d,e){return-d*Math.cos(a/e*(Math.PI/2))+d+b},easeOutSine:function(c,a,b,d,e){return d*Math.sin(a/e*(Math.PI/2))+b},easeInOutSine:function(c,a,b,d,e){return-d/2*(Math.cos(Math.PI*a/e)-1)+b},
easeInExpo:function(c,a,b,d,e){return 0==a?b:d*Math.pow(2,10*(a/e-1))+b},easeOutExpo:function(c,a,b,d,e){return a==e?b+d:d*(-Math.pow(2,-10*a/e)+1)+b},easeInOutExpo:function(c,a,b,d,e){return 0==a?b:a==e?b+d:1>(a/=e/2)?d/2*Math.pow(2,10*(a-1))+b:d/2*(-Math.pow(2,-10*--a)+2)+b},easeInCirc:function(c,a,b,d,e){return-d*(Math.sqrt(1-(a/=e)*a)-1)+b},easeOutCirc:function(c,a,b,d,e){return d*Math.sqrt(1-(a=a/e-1)*a)+b},easeInOutCirc:function(c,a,b,d,e){return 1>(a/=e/2)?-d/2*(Math.sqrt(1-a*a)-1)+b:d/2*(Math.sqrt(1-
(a-=2)*a)+1)+b},easeInElastic:function(c,a,b,d,e){var c=1.70158,f=0,g=d;if(0==a)return b;if(1==(a/=e))return b+d;f||(f=0.3*e);g<Math.abs(d)?(g=d,c=f/4):c=f/(2*Math.PI)*Math.asin(d/g);return-(g*Math.pow(2,10*(a-=1))*Math.sin((a*e-c)*2*Math.PI/f))+b},easeOutElastic:function(c,a,b,d,e){var c=1.70158,f=0,g=d;if(0==a)return b;if(1==(a/=e))return b+d;f||(f=0.3*e);g<Math.abs(d)?(g=d,c=f/4):c=f/(2*Math.PI)*Math.asin(d/g);return g*Math.pow(2,-10*a)*Math.sin((a*e-c)*2*Math.PI/f)+d+b},easeInOutElastic:function(c,
a,b,d,e){var c=1.70158,f=0,g=d;if(0==a)return b;if(2==(a/=e/2))return b+d;f||(f=e*0.3*1.5);g<Math.abs(d)?(g=d,c=f/4):c=f/(2*Math.PI)*Math.asin(d/g);return 1>a?-0.5*g*Math.pow(2,10*(a-=1))*Math.sin((a*e-c)*2*Math.PI/f)+b:0.5*g*Math.pow(2,-10*(a-=1))*Math.sin((a*e-c)*2*Math.PI/f)+d+b},easeInBack:function(c,a,b,d,e,f){void 0==f&&(f=1.70158);return d*(a/=e)*a*((f+1)*a-f)+b},easeOutBack:function(c,a,b,d,e,f){void 0==f&&(f=1.70158);return d*((a=a/e-1)*a*((f+1)*a+f)+1)+b},easeInOutBack:function(c,a,b,d,
e,f){void 0==f&&(f=1.70158);return 1>(a/=e/2)?d/2*a*a*(((f*=1.525)+1)*a-f)+b:d/2*((a-=2)*a*(((f*=1.525)+1)*a+f)+2)+b},easeInBounce:function(c,a,b,d,e){return d-f.easing.easeOutBounce(c,e-a,0,d,e)+b},easeOutBounce:function(c,a,b,d,e){return(a/=e)<1/2.75?d*7.5625*a*a+b:a<2/2.75?d*(7.5625*(a-=1.5/2.75)*a+0.75)+b:a<2.5/2.75?d*(7.5625*(a-=2.25/2.75)*a+0.9375)+b:d*(7.5625*(a-=2.625/2.75)*a+0.984375)+b},easeInOutBounce:function(c,a,b,d,e){return a<e/2?0.5*f.easing.easeInBounce(c,2*a,0,d,e)+b:0.5*f.easing.easeOutBounce(c,
2*a-e,0,d,e)+0.5*d+b}})}});;
;
/* module-key = 'com.atlassian.plugin.jslibs:jquery.dragtable-2.0.4', location = 'jquery-plugins/jquery.dragtable/2.0.4/jquery.dragtable-2.0.4.js' */
(function (j) {
    define("atlassian/jquery-plugins/jquery.dragtable-2.0.4", function () {
        return function (e) {
            j(window, document, e);
            return e
        }
    })
})(function (j, e, b) {
    var i = function (a, b) {
        var c = a.parentNode, e = a.nextSibling === b ? a : a.nextSibling;
        b.parentNode.insertBefore(a, b);
        c.insertBefore(b, e)
    };
    b.widget("akottr.dragtable", {
        options: {
            revert: !0,
            dragHandle: ".table-handle",
            maxMovingRows: 40,
            excludeFooter: !1,
            onlyHeaderThreshold: 100,
            dragaccept: null,
            persistState: null,
            restoreState: null,
            clickDelay: 10,
            containment: "parent",
            cursor: "move",
            cursorAt: !1,
            distance: 0,
            tolerance: "pointer",
            axis: "x",
            beforeStart: b.noop,
            beforeMoving: b.noop,
            beforeReorganize: b.noop,
            beforeStop: b.noop
        },
        originalTable: {el: null, selectedHandle: null, sortOrder: null, startIndex: 0, endIndex: 0},
        sortableTable: {el: b(), selectedHandle: b(), movingRow: b()},
        persistState: function () {
            var a = this;
            this.originalTable.el.find("th").each(function (b) {
                "" != this.id && (a.originalTable.sortOrder[this.id] = b)
            });
            b.ajax({url: this.options.persistState, data: this.originalTable.sortOrder})
        },
        _restoreState: function (a) {
            for (n in a) this.originalTable.startIndex =
                b("#" + n).closest("th").prevAll().size() + 1, this.originalTable.endIndex = parseInt(a[n] + 1), this._bubbleCols()
        },
        _bubbleCols: function () {
            var a = this.originalTable.startIndex, b = this.originalTable.endIndex,
                c = this.originalTable.el.children();
            this.options.excludeFooter && (c = c.not("tfoot"));
            if (a < b) for (; a < b; a++) for (var e = c.find("> tr > td:nth-child(" + a + ")").add(c.find("> tr > th:nth-child(" + a + ")")), g = c.find("> tr > td:nth-child(" + (a + 1) + ")").add(c.find("> tr > th:nth-child(" + (a + 1) + ")")), f = 0; f < e.length; f++) i(e[f],
                g[f]); else for (; a > b; a--) {
                e = c.find("> tr > td:nth-child(" + a + ")").add(c.find("> tr > th:nth-child(" + a + ")"));
                g = c.find("> tr > td:nth-child(" + (a - 1) + ")").add(c.find("> tr > th:nth-child(" + (a - 1) + ")"));
                for (f = 0; f < e.length; f++) i(e[f], g[f])
            }
        },
        _rearrangeTableBackroundProcessing: function () {
            var a = this;
            return function () {
                a._bubbleCols();
                a.options.beforeStop(this.originalTable);
                a.sortableTable.el.remove();
                b("#__dragtable_disable_text_selection__").remove();
                p ? b(e.body).attr("onselectstart", p) : b(e.body).removeAttr("onselectstart");
                q ? b(e.body).attr("unselectable", q) : b(e.body).removeAttr("unselectable");
                null !== a.options.persistState && (b.isFunction(a.options.persistState) ? a.options.persistState(a.originalTable) : a.persistState())
            }
        },
        _rearrangeTable: function () {
            var a = this;
            return function () {
                a.originalTable.selectedHandle.removeClass("dragtable-handle-selected");
                a.sortableTable.el.sortable("disable");
                a.sortableTable.el.addClass("dragtable-disabled");
                a.options.beforeReorganize(a.originalTable, a.sortableTable);
                a.originalTable.endIndex =
                    a.sortableTable.movingRow.prevAll().size() + 1;
                setTimeout(a._rearrangeTableBackroundProcessing(), 50)
            }
        },
        _generateSortable: function (a) {
            !a.cancelBubble && (a.cancelBubble = !0);
            for (var k = this, c = this.originalTable.el[0].attributes, l = "", g = 0; g < c.length; g++) c[g].nodeValue && ("id" != c[g].nodeName && "width" != c[g].nodeName) && (l += c[g].nodeName + '="' + c[g].nodeValue + '" ');
            var f = [], i = [];
            this.originalTable.el.find("tr").slice(0, this.options.maxMovingRows).each(function () {
                for (var a = this.attributes, c = "", d = 0; d < a.length; d++) a[d].nodeValue &&
                "id" != a[d].nodeName && (c += " " + a[d].nodeName + '="' + a[d].nodeValue + '"');
                f.push(c);
                i.push(b(this).height())
            });
            var m = [], o = 0, h = k.originalTable.el.children();
            this.options.excludeFooter && (h = h.not("tfoot"));
            h.find("> tr > th").each(function () {
                o += b(this).outerWidth() + 2;
                m.push(b(this).width())
            });
            var d = '<ul class="dragtable-sortable" style="position:absolute; width:' + o + 'px;">';
            h.find("> tr > th").each(function (a) {
                d += "<li>";
                d += '<table class="issue-table" ' + l + ">";
                var c = h.find("> tr > th:nth-child(" + (a + 1) + ")");
                1 <
                k.options.maxMovingRows && (c = c.add(h.find("> tr > td:nth-child(" + (a + 1) + ")").slice(0, k.options.maxMovingRows - 1)));
                c.each(function (a) {
                    var c = b(this).clone().wrap("<div></div>").parent().html();
                    0 === c.toLowerCase().indexOf("<th") && (d += "<thead>");
                    d += "<tr " + f[a] + '" style="height:' + i[a] + 'px;">';
                    d += c;
                    0 === c.toLowerCase().indexOf("<th") && (d += "</thead>");
                    d += "</tr>"
                });
                d += "</table>";
                d += "</li>"
            });
            d += "</ul>";
            this.sortableTable.el = this.originalTable.el.before(d).prev();
            this.sortableTable.el.find("th").each(function (a) {
                var c =
                    b(this);
                m[a] > c.width() && c.css({width: m[a]})
            });
            this.sortableTable.selectedHandle = this.sortableTable.el.find("th .dragtable-handle-selected");
            this.sortableTable.el.sortable({
                items: !this.options.dragaccept ? "li" : "li:has(" + this.options.dragaccept + ")",
                stop: this._rearrangeTable(),
                revert: this.options.revert,
                tolerance: this.options.tolerance,
                containment: this.options.containment,
                cursor: this.options.cursor,
                cursorAt: this.options.cursorAt,
                distance: this.options.distance,
                axis: this.options.axis
            });
            this.originalTable.startIndex =
                b(a.target).closest("th").prevAll().size() + 1;
            this.options.beforeMoving(this.originalTable, this.sortableTable);
            this.sortableTable.movingRow = this.sortableTable.el.find("li:nth-child(" + this.originalTable.startIndex + ")");
            c = b('<style id="__dragtable_disable_text_selection__" type="text/css">body { -ms-user-select:none;-moz-user-select:-moz-none;-khtml-user-select:none;-webkit-user-select:none;user-select:none; }</style>');
            b(e.head).append(c);
            b(e.body).attr("onselectstart", "return false;").attr("unselectable",
                "on");
            j.getSelection ? j.getSelection().removeAllRanges() : e.selection.empty();
            this.sortableTable.movingRow.trigger(b.extend(b.Event(a.type), {
                which: 1,
                clientX: a.clientX,
                clientY: a.clientY,
                pageX: a.pageX,
                pageY: a.pageY,
                screenX: a.screenX,
                screenY: a.screenY
            }));
            this.sortableTable.el.find(".ui-sortable-placeholder").html('<div class="outer" style="height:100%;"><div class="inner" style="height:100%;"></div></div>')
        },
        bindTo: {},
        _create: function () {
            this.originalTable = {
                el: this.element, selectedHandle: b(), sortOrder: {},
                startIndex: 0, endIndex: 0
            };
            this.bindTo = this.originalTable.el.find("th");
            this.options.dragaccept && (this.bindTo = this.bindTo.filter(this.options.dragaccept));
            0 < this.bindTo.find(this.options.dragHandle).size() && (this.bindTo = this.bindTo.find(this.options.dragHandle));
            null !== this.options.restoreState && (b.isFunction(this.options.restoreState) ? this.options.restoreState(this.originalTable) : this._restoreState(this.options.restoreState));
            var a = this;
            this.bindTo.mousedown(function (e) {
                clearTimeout(this.downTimer);
                this.downTimer = setTimeout(function () {
                    a.originalTable.selectedHandle = b(this);
                    a.originalTable.selectedHandle.addClass("dragtable-handle-selected");
                    a.options.beforeStart(this.originalTable);
                    a._generateSortable(e)
                }, a.options.clickDelay)
            }).mouseup(function () {
                clearTimeout(this.downTimer)
            })
        },
        destroy: function () {
            this.bindTo.unbind("mousedown");
            b.Widget.prototype.destroy.apply(this, arguments)
        }
    });
    var p = b(e.body).attr("onselectstart"), q = b(e.body).attr("unselectable");
    !0
});;
;
/* module-key = 'com.atlassian.plugin.jslibs:jquery.serializeobject-0.2', location = 'jquery-plugins/jquery.serializeobject/0.2/jquery.serializeobject-0.2.js' */
(function(b){define("atlassian/jquery-plugins/jquery.serializeobject-0.2",function(){return function(d){b(window,document,d);return d}})})(function(b,d,e){"$:nomunge";e.fn.serializeObject=function(){var a={};e.each(this.serializeArray(),function(d,b){var c=b.name,f=b.value;a[c]=void 0===a[c]?f:e.isArray(a[c])?a[c].concat(f):[a[c],f]});return a}});;
;
/* module-key = 'com.atlassian.plugin.jslibs:jquery.scrollintoview-1.8', location = 'jquery-plugins/jquery.scrollintoview/1.8/jquery.scrollintoview-1.8.js' */
(function(m){define("atlassian/jquery-plugins/jquery.scrollintoview-1.8",function(){return function(g){m(window,document,g);return g}})})(function(m,g,f){var k={vertical:{x:!1,y:!0},horizontal:{x:!0,y:!1},both:{x:!0,y:!0},x:{x:!0,y:!1},y:{x:!1,y:!0}},q={duration:0,direction:"y"},n=/^(?:html)$/i,o=function(a){var b=f(m),c=n.test(a[0].nodeName),e;if(c)e={top:0,left:0,bottom:0,right:0};else{var d=a[0],i;i=g.defaultView&&g.defaultView.getComputedStyle?g.defaultView.getComputedStyle(d,null):d.currentStyle;
var l=g.defaultView&&g.defaultView.getComputedStyle?!0:!1;e=parseFloat(l?i.borderTopWidth:f.css(d,"borderTopWidth"))||0;var h=parseFloat(l?i.borderLeftWidth:f.css(d,"borderLeftWidth"))||0,j=parseFloat(l?i.borderBottomWidth:f.css(d,"borderBottomWidth"))||0,d=parseFloat(l?i.borderRightWidth:f.css(d,"borderRightWidth"))||0;e={top:e,left:h,bottom:j,right:d,vertical:e+j,horizontal:h+d}}b={top:(c?b:a).scrollTop(),left:(c?b:a).scrollLeft()};h={right:c?0:a.innerWidth()-a[0].clientWidth,bottom:c?0:a.innerHeight()-
a[0].clientHeight};j=a[0].getBoundingClientRect();return{border:e,scroll:b,scrollbar:h,rect:{top:c?0:j.top,left:c?0:j.left,bottom:c?a[0].clientHeight:j.bottom,right:c?a[0].clientWidth:j.right}}};f.fn.extend({scrollIntoViewForAuto:function(a){a=f.extend({},q,a);a.direction=k["string"===typeof a.direction&&a.direction.toLowerCase()]||k.both;var b="";!0===a.direction.x&&(b="horizontal");!0===a.direction.y&&(b=b?"both":"vertical");var c=this.eq(0),e=c.closest(":scrollable("+b+")");if(0<e.length){var e=
e.eq(0),d=o(c),b=o(e),c=d.rect.top-(b.rect.top+b.border.top),i=b.rect.bottom-b.border.bottom-b.scrollbar.bottom-d.rect.bottom,g=d.rect.left-(b.rect.left+b.border.left),d=b.rect.right-b.border.right-b.scrollbar.right-d.rect.right,h={};!0===a.direction.y&&(0>c?h.scrollTop=b.scroll.top+c-30:0<c&&0>i&&(h.scrollTop=b.scroll.top+Math.min(c,-i)+30));!0===a.direction.x&&(0>g?h.scrollLeft=b.scroll.left+g:0<g&&0>d&&(h.scrollLeft=b.scroll.left+Math.min(g,-d)));f.isEmptyObject(h)?f.isFunction(a.complete)&&a.complete.call(e[0]):
(n.test(e[0].nodeName)&&(e=f("html,body")),e.animate(h,a.duration).eq(0).queue(function(b){f.isFunction(a.complete)&&a.complete.call(e[0]);b()}))}return this}});var p={auto:!0,scroll:!0,visible:!1,hidden:!1};f.extend(f.expr[":"],{scrollable:function(a,b,c){var b=k["string"===typeof c[3]&&c[3].toLowerCase()]||k.both,c=g.defaultView&&g.defaultView.getComputedStyle?g.defaultView.getComputedStyle(a,null):a.currentStyle,e=p[c.overflowX.toLowerCase()]||!1,d=p[c.overflowY.toLowerCase()]||!1,f=n.test(a.nodeName);
if(!e&&!d&&!f)return!1;a={height:{scroll:a.scrollHeight,client:a.clientHeight},width:{scroll:a.scrollWidth,client:a.clientWidth},scrollableX:function(){return(e||f)&&this.width.scroll>this.width.client},scrollableY:function(){return(d||f)&&this.height.scroll>this.height.client}};return b.y&&a.scrollableY()||b.x&&a.scrollableX()}})});;
;
/* module-key = 'jira.webresources:jquery', location = '/static/lib/amd-shims/jquery-amd.js' */
define("jquery",["atlassian/jquery-plugins/jquery.textoverflow-0.7.4","atlassian/jquery-plugins/jquery.pjax-2011.07.10","atlassian/jquery-plugins/jquery.lazyload-1.8.0","atlassian/jquery-plugins/jquery.flot-0.7","atlassian/jquery-plugins/jquery.effects-1.8rc3","atlassian/jquery-plugins/jquery.dragtable-2.0.4","atlassian/jquery-plugins/jquery.serializeobject-0.2","atlassian/jquery-plugins/jquery.scrollintoview-1.8"],function(a,e,s,u,r,l,i,n){var j=AJS.$;return a(j),e(j),s(j),u(j),r(j),l(j),i(j),n(j),j});;
;
/* module-key = 'jira.webresources:jquery', location = '/static/lib/amd-shims/jquery-deferred-amd.js' */
define("jira/jquery/deferred",["jquery"],function(e){return e.Deferred});;
;
/* module-key = 'jira.webresources:aui-core-amd-shim', location = '/static/lib/amd-shims/aui-dialog.js' */
define("aui/dialog",function(){return AJS.Dialog});;
;
/* module-key = 'jira.webresources:aui-core-amd-shim', location = '/static/lib/amd-shims/aui-dropdown.js' */
define("aui/dropdown",function(){return AJS.dropDown});;
;
/* module-key = 'jira.webresources:aui-core-amd-shim', location = '/static/lib/amd-shims/aui-inline-dialog.js' */
define("aui/inline-dialog",function(){return AJS.InlineDialog});;
;
/* module-key = 'jira.webresources:aui-core-amd-shim', location = '/static/lib/amd-shims/aui-message.js' */
define("aui/message",function(){return AJS.messages});;
;
/* module-key = 'jira.webresources:aui-core-amd-shim', location = '/static/lib/amd-shims/aui-params.js' */
define("aui/params",function(){return AJS.params});;
;
/* module-key = 'jira.webresources:aui-core-amd-shim', location = '/static/lib/amd-shims/aui-populate-parameters.js' */
define("aui/populate-parameters",function(){return AJS.populateParameters});;
;
/* module-key = 'jira.webresources:aui-core-amd-shim', location = '/static/lib/amd-shims/aui-popup.js' */
define("aui/popup",function(){return AJS.popup});;
;
/* module-key = 'jira.webresources:aui-core-amd-shim', location = '/static/lib/amd-shims/aui-progressive-data-set.js' */
define("aui/progressive-data-set",function(){return AJS.ProgressiveDataSet});;
;
/* module-key = 'jira.webresources:aui-core-amd-shim', location = '/static/lib/amd-shims/aui-tabs.js' */
define("aui/tabs",function(){return AJS.tabs});;
;
/* module-key = 'jira.webresources:jira-logger', location = '/static/util/logger.js' */
define("jira/util/logger",["exports"],function(n){"use strict";function o(){}function e(n){return"undefined"!=typeof console&&"function"==typeof console[n]?console[n].bind(console):function(){if("undefined"!=typeof console&&console[n])return Function.prototype.apply.call(console[n],console,arguments)}}function r(n){return e(n)||o}n.log=r("log"),n.info=r("info"),n.warn=r("warn"),n.error=r("error"),n.debug=r("debug"),n.trace=function n(){var e=window.__tracer||window.JIRA&&window.JIRA.trace||o;if(e!==n)return e.apply(e,arguments)}});;
;
/* module-key = 'jira.webresources:jira-logger', location = '/static/util/safe-logger.js' */
define("jira/util/safe-logger",["exports","jquery","wrm/context-path","jira/util/logger"],function(r,e,n,o){function t(r,t,a,i){if("info"!==r&&"warn"!==r&&"error"!==r)throw new Error("Unknown level");if(AJS.isDevMode()!==!1)o[r](a);else{var c={sentFrom:"jira.legacy."+t,message:a,event:i||{},buildKey:"N/A",logTime:(new Date).toISOString()},f=JSON.stringify(c),l=n()+"/rest/internal/2/log/safe/"+r;e.ajax({type:"POST",url:l,data:f,contentType:"application/json"})}}r.safeInfo=function(r,e,n){try{return t("info",r,e,n)}catch(r){console.error(r)}},r.safeWarm=function(r,e,n){try{return t("warn",r,e,n)}catch(r){console.error(r)}},r.safeError=function(r,e,n){try{return t("error",r,e,n)}catch(r){console.error(r)}}});;
;
/* module-key = 'jira.webresources:jira-logger', location = '/static/util/unsafe-logger.js' */
define("jira/util/unsafe-logger",["exports","jquery","wrm/context-path","jira/util/logger"],function(e,r,t,n){function o(e,o,i,s){if("error"!==e)throw new Error("Unknown level");const c={sentFrom:"jira.legacy."+o,message:i,event:s,buildKey:"N/A",logTime:(new Date).toISOString()};if(a())n[e](c);else{const u=JSON.stringify(c),f=t()+"/rest/internal/2/log/unsafe/frontend-exception";r.ajax({type:"POST",url:f,data:u,contentType:"application/json"})}}function i(e){if(e instanceof Error)return{message:error.message,stack:error.stack};if("string"==typeof e||"number"==typeof e)return{message:e};if("object"==typeof e)return e;throw new Error("Error event type cannot be logged: "+typeof e)}function a(){const e=document.querySelector("meta[name=ajs-region]");return!!e&&"stg-volt"===e.getAttribute("content")}e.unsafeError=function(e,r,t){try{return o("error",e,r,i(t))}catch(e){console.error(e)}}});;
;
/* module-key = 'jira.webresources:deprecator', location = '/includes/jira/common/deprecator.js' */
define("jira/deprecator",function(){function e(e){return e+="",e?e.charAt(0).toUpperCase()+e.substring(1):""}function n(e){var n=new Error,t=n.stack||n.stacktrace,r=t&&t.replace(/^Error\n/,"")||"";return r?(r=r.split("\n"),r[e+2]):r}function t(){"undefined"!=typeof console&&console.warn&&Function.prototype.apply.call(console.warn,console,arguments)}function r(r,o){if("function"==typeof r)return r;var a=!1;return o=o||{},function(i){var p=n(i?i:1)||"";if(!a||c.indexOf(p)===-1){c.push(p),a=!0;var u=o.deprecationType+" "||"",f="DEPRECATED "+u+"- "+e(r)+" has been deprecated"+(o.sinceVersion?" since "+o.sinceVersion:"")+" and will be removed in "+(o.removeInVersion||"a future release")+".";o.alternativeName&&(f+=" Use "+o.alternativeName+" instead. "),o.extraInfo&&(f+=" "+o.extraInfo),p=""===p?" \n No stack trace of the deprecated usage is available in your current browser.":" \n "+p,o.extraObject?(f+="\n",t(f,o.extraObject,p)):t(f,p)}}}function o(e,n,t){t=t||{},t.deprecationType=t.deprecationType||"JS";var o=r(n||e.name||"this function",t);return function(){return o(),e.apply(this,arguments)}}function a(e,n,t){if(p){var o=e[n];t=t||{},t.deprecationType=t.deprecationType||"JS";var a=t.displayName||n,i=r(a,t);Object.defineProperty(e,n,{get:function(){return i(),o},set:function(e){return o=e,i(),e}})}}function i(e,n,t){if("function"==typeof e[n]){t=t||{},t.deprecationType=t.deprecationType||"JS";var r=t.displayName||n;e[n]=o(e[n],r,t)}else a(e,n,t)}var c=(Object.prototype.hasOwnProperty,[]),p=!1;try{Object.defineProperty&&(Object.defineProperty({},"blam",{get:function(){},set:function(){}}),exports.propertyDeprecationSupported=p=!0)}catch(e){}return{getDeprecatedLocation:n,prop:i}});;
;
/* module-key = 'jira.webresources:legacy-namespacing', location = '/includes/jira/common/legacy-config.js' */
define("jira/legacy/config",function(){function e(e){return r&&r.indexOf(e)!==-1}var t=document.querySelector("meta[name=ajs-dev-mode]");t=t&&"true"===t.getAttribute("content");var r=document.querySelector("meta[name=ajs-enabled-dark-features]");r=r&&r.getAttribute("content")||"";var n=e("amd.loader.noglobals"),a=t||n||e("amd.loader.globals.deprecation.warning"),o=function(){try{return Object.defineProperty&&Object.defineProperty({},"x",{get:function(){return!0}}).x===!0}catch(e){}return!1}();return{hasDefineProperty:o,logDeprecationNotice:a,noGlobals:n}});;
;
/* module-key = 'jira.webresources:legacy-namespacing', location = '/includes/jira/common/legacy-deprecator.js' */
define("jira/legacy/deprecator",["jira/deprecator"],function(e){return e});;
;
/* module-key = 'jira.webresources:legacy-namespacing', location = '/includes/jira/common/legacy-logger.js' */
define("jira/legacy/logger",["jira/util/logger"],function(o){function e(){var e=0,l=n.length;for(console&&console.groupCollapsed&&console.groupCollapsed("Global object deprecations ("+l+")");e<l;e++)o.warn.apply(void 0,n[e]);console&&console.groupEnd&&console.groupEnd(),n.length=0}var l,n=[];return function(){n.push(Array.prototype.slice.apply(arguments)),l&&clearTimeout(l),l=setTimeout(function(){e(),l=void 0},200)}});;
;
/* module-key = 'jira.webresources:legacy-namespacing', location = '/includes/jira/common/legacy-namespace.js' */
define("jira/legacy/namespace",["jira/legacy/config","jira/legacy/logger","jira/legacy/deprecator"],function(e,o,a){return function internalLegacyNamespacing(t,n,r){var i,c;if(e.logDeprecationNotice&&(i=e.noGlobals?"GONE: The global object "+t+" was not created!":"DEPRECATED: The global object "+t+" is deprecated.","object"!=typeof r&&"function"!=typeof r||r.__amdModuleName&&(i+=' Please use require(["'+r.__amdModuleName+'"]) instead.',delete r.__amdModuleName)),e.noGlobals)return void o(i);c=t.split("."),n=n||window;for(var l=0,d=c.length-1;l<d;l++){var f=n[c[l]];n=null!=f?f:n[c[l]]={}}return function(t){e.hasDefineProperty&&e.logDeprecationNotice?Object.defineProperty(n,c[l],{configurable:!0,get:function(){var e="";return a&&a.getDeprecatedLocation&&(e=a.getDeprecatedLocation(0)),e.indexOf(internalLegacyNamespacing.name)===-1&&(e&&e.indexOf("AJS.namespace")===-1?o(i,"\n"+e):o(i)),t},set:function(e){t=e}}):(e.logDeprecationNotice&&o(i),n[c[l]]=t)}(r||n[c[l]]||{}),n[c[l]]}});;
;
/* module-key = 'jira.webresources:legacy-namespacing', location = '/includes/jira/common/namespace.js' */
AJS.namespace=require("jira/legacy/namespace"),AJS.namespace("jQuery.namespace",null,function(e){AJS.namespace(e)});;
;
/* module-key = 'jira.webresources:ajs-underscorejs-amd-shim', location = '/static/lib/amd-shims/underscore-amd.js' */
define("underscore",function(){return _});;
;
/* module-key = 'jira.webresources:jira-metadata', location = '/static/util/strings.js' */
define("jira/util/strings",["exports","underscore"],function(n,t){"use strict";n.asBooleanOrString=function(n){var t=n?n.toLowerCase():"",r=n;return"true"===t?r=!0:"false"===t&&(r=!1),r},n.startsWith=function(n,r){return!t.isEmpty(n)&&(!t.isEmpty(r)&&0==n.indexOf(r))},n.endsWith=function(n,r){return!t.isEmpty(n)&&(!t.isEmpty(r)&&n.indexOf(r)+r.length==n.length)},n.substringAfter=function(n,r){if(t.isEmpty(n))return n;if(t.isEmpty(r))return"";var e=n.indexOf(r);return e<0?"":n.substring(e+r.length)},n.substringBefore=function(n,r){if(t.isEmpty(n))return n;if(t.isEmpty(r))return"";var e=n.indexOf(r);return e<0?"":n.substring(0,e)},n.contains=function(n,r){if(t.isEmpty(n))return!1;var e=n.indexOf(r);return e>=0},n.repeat=function(n,r){return t.isEmpty(n)?"":new Array(r+1).join(n)},n.length=function(n){return t.isEmpty(n)?0:n.length},n.replace=function(n,r,e){if(t.isEmpty(n))return"";if(t.isEmpty(r))return"";"undefined"==typeof e&&(e="");for(var i=0,s=n.indexOf(r);s>=0;){var u=n.substring(0,s),f=n.substring(s+r.length);n=u+e+f,i=s+e.length,s=n.indexOf(r,i)}return n.substring(s,n.length)},n.hashCode=function(n){var t,r=0;if(!n)return"";for(var e=0;e<n.length;e+=1)t=n.charCodeAt(e),r=31*r+t,r|=0;return""+r},n.camelCase=function(n){return n.replace(/^([A-Z])|[\s-_]+(\w)/g,function(n,t,r){return r?r.toUpperCase():t.toLowerCase()})}});;
;
/* module-key = 'jira.webresources:jira-metadata', location = '/static/util/data/meta.js' */
define("jira/util/data/meta",["jquery","jira/util/strings"],function(t,n){"use strict";var e={};return{set:function(t,n){e[t]=n},get:function(r){if("undefined"!=typeof e[r])return e[r];var i=t("meta[name='ajs-"+r+"']");if(i.length){var a=i.attr("content");return n.asBooleanOrString(a)}},getBoolean:function(t){return this.get(t)===!0},getNumber:function(t){return+this.get(t)},getAllAsMap:function(){var n={};return t("meta[name^=ajs-]").each(function(){n[this.name.substring(4)]=this.content}),t.extend(n,e)}}});;
;
/* module-key = 'jira.webresources:aui-extensions', location = '/includes/ajs/aui-experimental.js' */
AJS.namespace("AJS.asBooleanOrString",null,require("jira/util/strings").asBooleanOrString),AJS.namespace("AJS.Meta",null,require("jira/util/data/meta"));;
;
/* module-key = 'jira.webresources:jira-events', location = '/static/util/events.js' */
define("jira/util/events",["jquery","exports"],function(n,i){"use strict";var t=n(document);i.bind=function(n,i,e){t.bind(n,i,e)},i.one=function(n,i){t.one(n,i)},i.unbind=function(n,i){t.unbind(n,i)},i.trigger=function(n,i){t.trigger(n,i)}});;
;
/* module-key = 'jira.webresources:jira-events', location = '/static/util/events/types.js' */
define("jira/util/events/types",{NEW_CONTENT_ADDED:"newContentAdded",NEW_PAGE_ADDED:"newPageAdded",REFRESH_TOGGLE_BLOCKS:"refreshToggleBlocks",CHECKBOXMULITSELECT_READY:"checkboxMultiSelectReady",VALIDATE_TIMETRACKING:"validateTimeTracking",REFRESH_ISSUE_PAGE:"refreshIssuePage",UPDATE_ISSUE_GLANCE:"updateIssueGlance"}),AJS.namespace("JIRA.Events",null,require("jira/util/events/types"));;
;
/* module-key = 'jira.webresources:jira-events', location = '/static/util/events/reasons.js' */
define("jira/util/events/reasons",{pageLoad:"pageLoad",inlineEditStarted:"inlineEditStarted",panelRefreshed:"panelRefreshed",criteriaPanelRefreshed:"criteriaPanelRefreshed",issueTableRefreshed:"issueTableRefreshed",issueTableRowRefreshed:"issueTableRowRefreshed",filterPanelOpened:"filterPanelOpened",layoutSwitcherReady:"layoutSwitcherReady",returnToSearch:"returnToSearch",shareDialogOpened:"shareDialogOpened",filtersSearchRefreshed:"filtersSearchRefreshed",tabUpdated:"tabUpdated",dialogReady:"dialogReady",componentsTableReady:"componentsTableReady",workflowReady:"workflowReady",workflowHeaderReady:"workflowHeaderReady",contentRefreshed:"contentRefreshed"}),AJS.namespace("JIRA.CONTENT_ADDED_REASON",null,require("jira/util/events/reasons"));;
;
/* module-key = 'jira.webresources:jira-formatter', location = '/static/util/formatter.js' */
define("jira/util/formatter",["exports","jira/util/data/meta"],function(t,r){"use strict";function e(t,r){return AJS.I18n.getText.apply(AJS.I18n,arguments)}function a(t){var e=r.get("user-locale-group-separator")||"";return t.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g,e)}var n=AJS.format.bind(AJS);t.format=n,t.formatNumber=a,t.formatText=n,t.I18n={},t.I18n.getText=e});;
;
/* module-key = 'jira.webresources:browser-properties', location = '/static/lib/internal/util/navigator.js' */
define("internal/util/navigator",["jquery","underscore","exports"],function(n,r,e){"use strict";function t(n){return/\bTrident\b/.test(n)}function i(n){return n==c||/(Edge)\/(\d+)\.(\d+)/.test(n)}function o(n){if(n==c)return f;var r=n.match(/Edge\/(\d+)/);return r&&r[1]}var u=window.navigator.userAgent,s=window.navigator.platform,c="Mozilla/5.0 (Windows NT 10.0; Win64; x64)",f=12,a=r.once(function(){return/Chrome/.test(e._getUserAgent())}),d=r.once(function(){return t(u)||g()}),g=r.once(function(){return i(u)}),l=r.once(function(){return n.browser.mozilla&&!d()}),w=r.once(function(){return n.browser.safari&&!a()}),m=r.once(function(){return n.browser.webkit}),b=r.once(function(){return parseInt(n.browser.version,10)}),v=r.once(function(){return e._getPlatform().indexOf("Linux")!==-1}),x=r.once(function(){return e._getPlatform().indexOf("Mac")!==-1}),_=r.once(function(){return e._getPlatform().indexOf("Win")!==-1});e.isChrome=a,e.isIE=d,e.isEdge=g,e.isMozilla=l,e.isSafari=w,e.isWebkit=m,e.majorVersion=b,e.isLinux=v,e.isMac=x,e.isWin=_,e._isTrident=t,e._getUserAgent=function(){return u},e._getPlatform=function(){return s},i(u)&&(n.browser.version=o(u),n.browser.mozilla=!1,n.browser.msie=!0)});;
;
/* module-key = 'jira.webresources:browser-properties', location = '/static/util/navigator.js' */
define("jira/util/navigator",["internal/util/navigator","jquery"],function(e,r){"use strict";var n=r.extend({},e);return n.isOpera=function(){return r.browser.opera===!0},n.modifierKey=function(){return AJS.Meta.get("keyboard-accesskey-modifier")},n.getLanguage=function(){return window.navigator.language},n});;
;
/* module-key = 'jira.webresources:browser-properties', location = '/includes/ajs/browser/Navigator.js' */
!function(){var i=require("jira/util/navigator");AJS.Navigator={family:function(){return i.isIE()?this.Families.INTERNET_EXPLORER:i.isMozilla()?this.Families.MOZILLA:i.isWebkit()?this.Families.WEBKIT:i.isOpera()?this.Families.OPERA:this.Families.UNKNOWN},modifierKey:function(){return i.modifierKey()},platform:function(){return this.Platform}},AJS.Navigator.Families={INTERNET_EXPLORER:"msie",MOZILLA:"mozilla",WEBKIT:"webkit",OPERA:"opera",UNKNOWN:"unknown"},AJS.Navigator.Platform={platform:i._getPlatform(),isIOS:function(){return"iPod"===this.platform||"iPhone"===this.platform||"iPad"===this.platform}}}();;
;
/* module-key = 'jira.webresources:top-same-origin-window', location = '/static/util/top-same-origin-window.js' */
define("jira/util/top-same-origin-window",function(){const n="@atlassian/spa-iframe";return function(r,t){function e(n){try{if(void 0==n.location.href)return!1}catch(n){return!1}return!0}function i(n){return n===n.parent}function a(r){return t&&r.name===n}for(;!i(r)&&e(r.parent)&&!a(r);)r=r.parent;return r}});;
;
/* module-key = 'jira.webresources:util-lite', location = '/static/util/assistive.js' */
define("jira/util/assistive",["jira/util/navigator"],function(t){function e(t){setTimeout(t,r)}function i(t){s||(s=this.getDocument().createElement("div"),s.setAttribute("id","assistive-text"),s.setAttribute("class","visually-hidden"),s.setAttribute("aria-hidden","false"),s.setAttribute("role","status"),s.setAttribute("aria-live","assertive"),s.setAttribute("aria-relevant","additions"),this.getDocument().body.appendChild(s)),s[u]=" ",e(function(){s[u]=t})}function n(t,e){e||(e="label-"+d,d+=1);var i=this.getDocument().getElementById(e);return i||(i=this.getDocument().createElement("div"),i.setAttribute("id",e),i.setAttribute("class","visually-hidden"),i.setAttribute("aria-hidden","false"),this.getDocument().body.appendChild(i)),i[u]=t,e}function a(){return document}var s,r=50,u=t.isIE()?"innerText":"textContent",d=0;return{wait:e,readText:i,createOrUpdateLabel:n,getDocument:a}});;
;
/* module-key = 'jira.webresources:util-lite', location = '/static/util/elements.js' */
define("jira/util/elements",["jquery"],function(e){"use strict";return{elementIsFocused:function(t){return!(!t||e(t).get(0)!==document.activeElement)},consumesKeyboardEvents:function(t){var n=t instanceof e?t:e(t);return!n.is(":button")&&(n.is(":input")||n.is("[contentEditable]"))}}});;
;
/* module-key = 'jira.webresources:util-lite', location = '/static/util/browser.js' */
define("jira/util/browser",["jira/util/elements","aui/params","jquery","exports"],function(e,n,t,a){"use strict";function r(n){var a=n.keyCode,r=t.ui.keyCode;if("keypress"!==n.type&&(a===r.DOWN||a===r.UP||a===r.LEFT||a===r.RIGHT)){var i=t(n.target);e.consumesKeyboardEvents(i)||n.preventDefault()}}a.canAccessIframe=function(e){var a=t(e);return!/^(http|https):\/\//.test(a.attr("src"))||n.baseURL&&0===t.trim(a.attr("src")).indexOf(n.baseURL)},a.disableKeyboardScrolling=function(){t(document.body).bind("keydown",r)},a.enableKeyboardScrolling=function(){t(document.body).unbind("keydown",r)},a.isSelenium=function(){return window.name.toLowerCase().indexOf("selenium")>=0},a.reloadViaWindowLocation=function(e){a.reloadViaWindowLocation._delegate(e,window.location)},a.reloadViaWindowLocation._delegate=function(){var e=function(){var e=new Date,n=new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0),t=(e.getTime()-n.getTime())/1e3;return Math.max(Math.floor(t),1)},n="jwupdated",t=/(jwupdated=[0-9]*)/,a=function(a){var r=a.indexOf("#");if(r===-1)return a;var i=a.indexOf("?"),o=n+"="+e();return a=i===-1?a.replace("#","?"+o+"#"):t.test(a)?a.replace(t,o):a.replace("?","?"+o+"&")};return function(e,n){var t=e||n.href,r=a(t);t===n.href?n.replace(r):n.assign(r)}}()});;
;
/* module-key = 'jira.webresources:util-lite', location = '/includes/ajs/browser/describeBrowser.js' */
define("jira/ajs/browser/describe-browser",["jira/util/navigator","jquery"],function(e,r){function i(){return e.isEdge()?"msie edge":e.isIE()?"msie":e.isSafari()?"webkit safari":e.isChrome()?"webkit chrome":e.isMozilla()?"mozilla":e.isOpera()?"opera":""}function s(){var s=[],a=i(),o=e.majorVersion();if(s.push(a),e.isIE())for(s.push("msie-"+o);o>6;)--o,s.push("msie-gt-"+o);r("html").addClass(s.join(" "))}return s}),AJS.namespace("AJS.describeBrowser",null,require("jira/ajs/browser/describe-browser"));;
;
/* module-key = 'jira.webresources:util-lite', location = '/static/util/objects.js' */
define("jira/util/objects",["jquery","exports"],function(t,e){"use strict";e.begetObject=function(t){var e=function(){};return e.prototype=t,new e},e.copyObject=function(n,c){var o=t.isArray(n)?[]:{};return t.each(n,function(n,r){"object"!=typeof r||null===r||r instanceof t?o[n]=r:c!==!1&&(o[n]=e.copyObject(r,c))}),o}});;
;
/* module-key = 'jira.webresources:util-lite', location = '/static/util/forms.js' */
define("jira/util/forms",["jira/util/navigator","jquery"],function(t,e){"use strict";return{submitOnEnter:function(t){return!(13===t.keyCode&&t.target.form&&!t.ctrlKey&&!t.shiftKey)||(e(t.target.form).submit(),!1)},submitOnCtrlEnter:function(r){return!(r.ctrlKey&&r.target.form&&(13===r.keyCode||!t.isMac()&&10===r.keyCode))||(e(r.target.form).submit(),!1)},getMultiSelectValues:function(t){for(var e="",r=0;r<t.length;r++)t.options[r].selected&&t.options[r].value&&t.options[r].value.length>0&&(e=e+" "+t.options[r].value);return e},getMultiSelectValuesAsArray:function(t){for(var e=[],r=0;r<t.length;r++)t.options[r].selected&&t.options[r].value&&t.options[r].value.length>0&&(e[e.length]=t.options[r].value);return e}}});;
;
/* module-key = 'jira.webresources:util-lite', location = '/includes/ajs/copyobject/copyObject.js' */
AJS.namespace("AJS.copyObject",null,require("jira/util/objects").copyObject);;
;
/* module-key = 'jira.webresources:util-lite', location = '/static/util/users/logged-in-user.js' */
define("jira/util/users/logged-in-user",["jira/util/data/meta"],function(n){var e={};return e.username=function(){return n.get("remote-user")},e.accountId=function(){return n.get("atlassian-account-id")},e.fullName=function(){return n.get("remote-user-fullname")},e.isAnonymous=function(){return""===n.get("remote-user")},e.isSysadmin=function(){return!!n.getBoolean("is-sysadmin")},e.isAdmin=function(){return!!n.getBoolean("is-admin")},e.isSiteadmin=function(){return!!n.getBoolean("is-site-admin")},e});;
;
/* module-key = 'jira.webresources:util-lite', location = '/includes/jira/data/Cookie.js' */
define("jira/data/cookie",function(){var e={};return e.saveToConglomerate=function(n,t,r){var a=e.getValue(n);a=e.addOrAppendToValue(t,r,a),e.save(n,a,365)},e.readFromConglomerate=function(n,t,r){var a=e.getValue(n),o=e.getValueFromCongolmerate(t,a);return null!=o?o:r},e.eraseFromConglomerate=function(n,t){e.saveToConglomerate(n,t,"")},e.getValueFromCongolmerate=function(e,n){null==n&&(n="");for(var t=e+"=",r=n.split("|"),a=0;a<r.length;a++){for(var o=r[a];" "===o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(e))return o.substring(t.length,o.length)}return null},e.addOrAppendToValue=function(e,n,t){var r="";null==t&&(t="");for(var a=t.split("|"),o=0;o<a.length;o++){var l=a[o];if(""!==l){for(;" "===l.charAt(0);)l=l.substring(1,l.length);0!==l.indexOf(e)&&(r+=l+"|")}}if(null!=n&&""!==n){var u=e+"="+n;r.length+u.length<4020&&(r+=u)}return r},e.getValue=function(e){for(var n=e+"=",t=document.cookie.split(";"),r=0;r<t.length;r++){for(var a=t[r];" "===a.charAt(0);)a=a.substring(1,a.length);if(0===a.indexOf(n))return unescape(a.substring(n.length,a.length))}return null},e.save=function(e,n,t){if("undefined"!=typeof contextPath){var r=contextPath;r||(r="/");var a;if(t){var o=new Date;o.setTime(o.getTime()+24*t*60*60*1e3),a="; expires="+o.toGMTString()}else a="";document.cookie=e+"="+escape(n)+a+";path="+r}},e.read=function(n,t){var r=e.getValue(n);return null!=r?r:t?(e.save(n,t,365),t):null},e.erase=function(n){e.save(n,"",-1)},e});;
;
/* module-key = 'jira.webresources:util-lite', location = '/includes/ajs/layer-constants.js' */
define("jira/ajs/layer/layer-constants",["exports"],function(e){e.LEFT="left",e.RIGHT="right",e.ACTIVE_CLASS="active",e.BOX_SHADOW_CLASS="box-shadow",e.LOADING_CLASS="loading",e.INTELLIGENT_GUESS="Intelligent Guess"});;
;
/* module-key = 'jira.webresources:util-lite', location = '/includes/jira/common/util.js' */
!function(){var e=require("jira/util/events");AJS.namespace("JIRA.bind",null,e.bind),AJS.namespace("JIRA.unbind",null,e.unbind),AJS.namespace("JIRA.one",null,e.one),AJS.namespace("JIRA.trigger",null,e.trigger)}(),function(){var e=require("jira/util/users/logged-in-user");AJS.namespace("JIRA.isAdmin",null,e.isAdmin),AJS.namespace("JIRA.isSysadmin",null,e.isSysadmin),AJS.namespace("JIRA.isSiteadmin",null,e.isSiteadmin)}(),function(){var e=require("jira/util/elements");AJS.namespace("AJS.elementIsFocused",null,e.elementIsFocused),AJS.namespace("AJS.consumesKeyboardEvents",null,e.consumesKeyboardEvents)}(),function(){var e=require("jira/util/browser");AJS.namespace("AJS.canAccessIframe",null,e.canAccessIframe),AJS.namespace("AJS.isSelenium",null,e.isSelenium),AJS.namespace("AJS.reloadViaWindowLocation",null,e.reloadViaWindowLocation),AJS.namespace("AJS.enableKeyboardScrolling",null,e.enableKeyboardScrolling),AJS.namespace("AJS.disableKeyboardScrolling",null,e.disableKeyboardScrolling)}(),function(){var e=require("jira/util/objects");AJS.namespace("begetObject",window,e.begetObject)}(),function(){var e=require("jira/util/forms");AJS.namespace("submitOnEnter",window,e.submitOnEnter),AJS.namespace("submitOnCtrlEnter",window,e.submitOnCtrlEnter),AJS.namespace("getMultiSelectValues",window,e.getMultiSelectValues),AJS.namespace("getMultiSelectValuesAsArray",window,e.getMultiSelectValuesAsArray)}(),function(){var e=require("jira/data/cookie");AJS.namespace("saveToConglomerateCookie",window,e.saveToConglomerate),AJS.namespace("readFromConglomerateCookie",window,e.readFromConglomerate),AJS.namespace("eraseFromConglomerateCookie",window,e.eraseFromConglomerate),AJS.namespace("getValueFromCongolmerate",window,e.getValueFromCongolmerate),AJS.namespace("addOrAppendToValue",window,e.addOrAppendToValue),AJS.namespace("getCookieValue",window,e.getValue),AJS.namespace("saveCookie",window,e.save),AJS.namespace("readCookie",window,e.read),AJS.namespace("eraseCookie",window,e.erase)}(),jQuery.noConflict(),jQuery.ajaxSettings.traditional=!0,contextPath="undefined"==typeof contextPath?"":contextPath,function(){var e=require("jira/ajs/layer/layer-constants");AJS.namespace("AJS.LEFT",null,e.LEFT),AJS.namespace("AJS.RIGHT",null,e.RIGHT),AJS.namespace("AJS.ACTIVE_CLASS",null,e.ACTIVE_CLASS),AJS.namespace("AJS.BOX_SHADOW_CLASS",null,e.BOX_SHADOW_CLASS),AJS.namespace("AJS.LOADING_CLASS",null,e.LOADING_CLASS),AJS.namespace("AJS.INTELLIGENT_GUESS",null,e.INTELLIGENT_GUESS)}(),function(){var e=/[.*+?|^$()[\]{\\]/g;RegExp.escape=function(n){return n.replace(e,"\\$&")}}(),function(e){e.readData=function(n){var a={},o="";return e(n).children().each(function(n){n%2?a[o]=jQuery.trim(e(this).text()):o=jQuery.trim(e(this).text())}).remove(),e(n).remove(),a}}(jQuery),String.prototype.escapejQuerySelector=function(){return this.replace(/([:.])/g,"\\$1")},AJS.extractBodyFromResponse=function(e){var n=e.match(/<body[^>]*>([\S\s]*)<\/body[^>]*>/);return n&&n.length>0?n[1]:e},AJS.escapeHTML=AJS.escapeHtml,AJS.isDevMode=function(){return AJS.Meta.get("dev-mode")},function(){function e(e,n){try{return e()}catch(e){return n}}AJS.namespace("tryIt",window,e)}(),function(){function e(e,n){for(var a=0,o=e.length;a<o;a++)if(e[a]==n)return!0;return!1}AJS.namespace("arrayContains",window,e)}(),function(){function e(e,n){jQuery("#"+e).addClass(n)}AJS.namespace("addClassName",window,e)}(),function(){function e(e,n){jQuery("#"+e).removeClass(n)}AJS.namespace("removeClassName",window,e)}(),function(){function e(e){var n=document.getElementById(e);return n.value?e+"="+encodeURIComponent(n.value):""}AJS.namespace("getEscapedFieldValue",window,e)}(),function(){function e(e){for(var n="",a=0;a<e.length;a++)n=n+"&"+getEscapedFieldValue(e[a]);return n}AJS.namespace("getEscapedFieldValues",window,e)}(),function(){var e={toggleVisibility:function(e){var n=document.getElementById(e);n&&("1"==readFromConglomerateCookie("jira.conglomerate.cookie",e,"1")?(n.style.display="none",removeClassName(e+"header","headerOpened"),addClassName(e+"header","headerClosed"),saveToConglomerateCookie("jira.conglomerate.cookie",e,"0")):(n.style.display="",removeClassName(e+"header","headerClosed"),addClassName(e+"header","headerOpened"),eraseFromConglomerateCookie("jira.conglomerate.cookie",e)))}};AJS.namespace("GuiPrefs",window,e)}(),function(){function e(e){GuiPrefs.toggleVisibility(e)}AJS.namespace("toggle",window,e)}(),function(){function e(e,n){var a=document.getElementById(e),o=document.getElementById(n);"none"===a.style.display?(o.style.display="none",a.style.display="block",saveToConglomerateCookie("jira.viewissue.cong.cookie",e,"1"),saveToConglomerateCookie("jira.viewissue.cong.cookie",n,"0")):(a.style.display="none",o.style.display="block",saveToConglomerateCookie("jira.viewissue.cong.cookie",n,"1"),saveToConglomerateCookie("jira.viewissue.cong.cookie",e,"0"))}AJS.namespace("toggleDivsWithCookie",window,e)}(),function(){function e(e,n,a){null==a&&(a="1");var o=document.getElementById(e);o&&("1"!=readFromConglomerateCookie(n,e,a)?(o.style.display="none",removeClassName(e+"header","headerOpened"),addClassName(e+"header","headerClosed")):(o.style.display="",removeClassName(e+"header","headerClosed"),addClassName(e+"header","headerOpened")))}AJS.namespace("restoreDivFromCookie",window,e)}(),function(){function e(e){restoreDivFromCookie(e,"jira.conglomerate.cookie","1")}AJS.namespace("restore",window,e)}(),function(){function e(e){recolourTableRows(e,"rowNormal","rowAlternate",e+"_empty")}AJS.namespace("recolourSimpleTableRows",window,e)}(),function(){function e(e,n,a,o){var t=document.getElementById(e),i=document.getElementById(o),r=!1,s=0,l=t.rows,c=null,u=null;AJS.$(t).hasClass("aui")&&(n="",a="zebra");for(var d=1;d<l.length;d++){var m=l[d];"none"!==m.style.display&&(r?m.className=a:m.className=n,s++,r=!r),"none"!==m.style.display&&(null==c&&(c=m),u=m)}null!=c&&(c.className=c.className+" first-row"),null!=u&&(u.className=u.className+" last-row"),i&&(0===s?(t.style.display="none",i.style.display=""):(t.style.display="",i.style.display="none"))}AJS.namespace("recolourTableRows",window,e)}(),function(){function e(e){var n=document.createElement("div");return n.appendChild(document.createTextNode(e)),n.innerHTML}AJS.namespace("htmlEscape",window,e)}(),function(){function e(){return jQuery("#atlassian-token").attr("content")}AJS.namespace("atl_token",window,e)}();;
;
/* module-key = 'jira.webresources:util-lite', location = '/includes/jira/common/trace.js' */
AJS.namespace("JIRA.trace",window,function(){});;
;
/* module-key = 'jira.webresources:util-lite', location = '/includes/lib/class/Class.js' */
define("jira/lib/class",["jira/util/objects","jquery"],function(t,e){var n=!1,i=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/,r=function(){};return r.extend=function(){function r(){!n&&this.init&&this.init.apply(this,arguments)}var o,s=this.prototype;if(arguments.length>1){var u=e.makeArray(arguments);o=u.pop();var a;return e.each(u,function(t,e){a=a?a.extend(e):e}),a.extend(this.prototype).extend(o)}o=arguments[0],n=!0;var c=new this;n=!1;for(var f in o)if(c[f]="function"==typeof o[f]&&"function"==typeof s[f]&&i.test(o[f]))c[f]=function(t,e){return function(){var n=this._super;this._super=s[t];var i=e.apply(this,arguments);return this._super=n,i}}(f,o[f]);else if("object"==typeof s[f]){var p=t.begetObject(o[f]);e.each(s[f],function(n,i){if(p[n]){if("object"==typeof p[n]){var r=t.begetObject(p[n]);e.each(i,function(t,e){r[t]||(r[t]=e)}),p[n]=r}}else p[n]=i}),c[f]=p}else c[f]=o[f];return r.fn=r.prototype=c,r.constructor=r,r.extend=arguments.callee,r},r.prototype.bind=function(t,n){return e(this).bind(t,n),this},r.prototype.trigger=function(t){var n=e(this),i=[].slice.call(arguments,1);return t=new e.Event(t),i.unshift(t),n.trigger.apply(n,i),!t.isDefaultPrevented()},r}),AJS.namespace("Class",null,require("jira/lib/class"));;
;
/* module-key = 'jira.webresources:util-lite', location = '/includes/ajs/control/Control.js' */
define("jira/ajs/control",["jira/lib/class","jquery"],function(t,e){return t.extend({INVALID:"INVALID",_throwReadOnlyError:function(t){new Error(this.CLASS_SIGNATURE+": Sorry ["+t+"] is a read-only property")},_assignEvents:function(t,n){if(this._unassignEvents(t,n),"string"==typeof n)for(var i in this._events[t])e(document).delegate(n,i,this._getDispatcher(t,i));else{n=e(n);for(i in this._events[t])n.bind(i,this._getDispatcher(t,i))}return this},_unassignEvents:function(t,n){if("string"==typeof n)for(var i in this._events[t])e(document).undelegate(n,i,this._getDispatcher(t,i));else{n=e(n);for(i in this._events[t])n.unbind(i,this._getDispatcher(t,i))}},_getDispatcher:function(t,n){var i=t+"/"+n;if(this._dispatchers||(this._dispatchers={}),!this._dispatchers[i]){var s=this._events[t][n],r=this;this._dispatchers[i]=function(t){return s.call(r,t,e(this))}}return this._dispatchers[i]},_isValidInput:function(){return!0},_handleKeyEvent:function(t){if(this._isValidInput(t))if("input"===t.type)"function"==typeof this.onEdit&&this.onEdit(t);else{var e=this.keys&&this.keys[t.key];"function"==typeof e&&e.call(this,t)}},getCustomEventName:function(t){return(this.CLASS_SIGNATURE||"")+"_"+t},_getCustomEventArgs:function(){return[this]},_supportsBoxShadow:function(){var t=document.body.style;return void 0!==t.WebkitBoxShadow||void 0!==t.MozBoxShadow||void 0!==t.boxShadow},_setOptions:function(t){var n,i;if(t=t||{},(t instanceof e||"string"==typeof t||"object"==typeof t&&t.nodeName)&&(t={element:t}),n=e(t.element),i=n.getOptionsFromAttributes(),this.options=e.extend(!0,this._getDefaultOptions(t),i,t),this.options.element=n,0===n.length)return this.INVALID},getCaret:function(t){var e=t.selectionStart;if(e>=0)return t.selectionEnd>e?-1:e;if(document.selection){var n=document.selection.createRange();if(0===n.text.length){var i=n.duplicate();return i.moveToElementText(t),i.setEndPoint("EndToStart",n),i.text.length}}return-1},_render:function(){var t,e=arguments[0],n=[];for(t=1;t<arguments.length;t++)n.push(arguments[t]);return this._renders[e].apply(this,n)}})}),AJS.namespace("AJS.Control",null,require("jira/ajs/control"));;
;
/* module-key = 'jira.webresources:util-lite', location = '/includes/ajs/descriptor/Descriptor.js' */
define("jira/ajs/descriptor",["jira/lib/class","jquery"],function(e,t){return e.extend({init:function(e){this._validate(e)&&(this.properties=t.extend(this._getDefaultOptions(),e))},allProperties:function(){return this.properties},_validate:function(e){return this.REQUIRED_PROPERTIES&&t.each(this.REQUIRED_PROPERTIES,function(t){if("undefined"==typeof e[t])throw new Error("AJS.Descriptor: expected property ["+t+"] but was undefined")}),!0}})}),AJS.namespace("AJS.Descriptor",null,require("jira/ajs/descriptor"));;
;
/* module-key = 'jira.webresources:util-lite', location = '/includes/ajs/input/Keyboard.js' */
define("jira/ajs/input/keyboard",["jira/util/navigator","jquery"],function(e,r){function n(e,r,n){return a[r]=e,u[e]=r,n&&(s[r]=!0),e}function t(e){return e.originalEvent||e}function i(e){var r=t(e);return null==r.which?r.keyCode:0!==r.which&&0!==r.charCode?r.which:null}function o(r){r=t(r);var n=c.specialKeyEntered(r);if(n)return n;if(e.isMozilla()){if("keypress"===r.type){var o=i(r);if(null!==o)return String.fromCharCode(o).toLowerCase()}}else if("keypress"!==r.type)return String.fromCharCode(r.keyCode).toLowerCase()}function f(e){return e+"+"}var a={},u={},s={},c={},y=c.SpecialKey={BACKSPACE:n("backspace",8,!0),TAB:n("tab",9,!0),RETURN:n("return",13,!0),SHIFT:n("shift",16),CTRL:n("ctrl",17),ALT:n("alt",18),PAUSE:n("pause",19),CAPS_LOCK:n("capslock",20),ESC:n("esc",27,!0),SPACE:n("space",32,!0),PAGE_UP:n("pageup",33),PAGE_DOWN:n("pagedown",34),END:n("end",35),HOME:n("home",36),LEFT:n("left",37),UP:n("up",38),RIGHT:n("right",39),DOWN:n("down",40),INSERT:n("insert",45),DELETE:n("del",46),F1:n("f1",112),F2:n("f2",113),F3:n("f3",114),F4:n("f4",115),F5:n("f5",116),F6:n("f6",117),F7:n("f7",118),F8:n("f8",119),F9:n("f9",120),F10:n("f10",121),F11:n("f11",122),F12:n("f12",123),NUMLOCK:n("numlock",144),SCROLL:n("scroll",145),META:n("meta",224)};return y.eventType=function(){return e.isMozilla()?"keypress":"keydown"},y.fromKeyCode=function(e){return a[e]},y.toKeyCode=function(e){return u[e]},y.isAscii=function(e){return!!s[e]},y.isSpecialKey=function(e){return!!y.toKeyCode(e)},c.characterEntered=function(e){var r=t(e);if("keypress"===r.type){var n=i(r);if(null!==n&&(!y.isAscii(n)||y.fromKeyCode(n)===y.SPACE))return String.fromCharCode(n)}},c.specialKeyEntered=function(r){if(r=t(r),e.isMozilla()){if("keypress"===r.type){var n=i(r);if(null===n)return y.fromKeyCode(r.keyCode);if(y.isAscii(n))return y.fromKeyCode(n)}}else if("keypress"!==r.type)return y.fromKeyCode(r.keyCode)},c.shortcutEntered=function(e){if(e=t(e),e.type===y.eventType()){var r=c.specialKeyEntered(e),n="";if(e.altKey&&r!==y.ALT&&(n+=f(y.ALT)),e.ctrlKey&&r!==y.CTRL&&(n+=f(y.CTRL)),e.metaKey&&!e.ctrlKey&&r!==y.META&&(n+=f(y.META)),e.shiftKey&&r!==y.SHIFT&&(n+=f(y.SHIFT)),r)return n+r;if(n.length>0&&"shift+"!==n){var i=o(e);if(i)return n+i}}},c}),AJS.namespace("JIRA.Keyboard",null,require("jira/ajs/input/keyboard"));;
;
/* module-key = 'jira.webresources:util-lite', location = '/includes/ajs/input/Mouse.js' */
define("jira/ajs/input/mouse",["jquery","jira/util/top-same-origin-window"],function(e,n){var t=n(window),i={},o=i.MotionDetector=function(){this.reset()};return o.prototype.reset=function(){this._handler=null,this._x=null,this._y=null,this.moved=!1},o.prototype.wait=function(n){var i=this;i._handler||(this.reset(),i._handler=function(e){i._x||i._y?e.pageX===i._x&&e.pageY===i._y||(i.unbind(),i.moved=!0,n&&n.call(this,e)):(i._x=e.pageX,i._y=e.pageY)},e(t.document).bind("mousemove",i._handler),t.document!==window.document&&e(window.document).bind("mousemove",i._handler))},o.prototype.unbind=function(){this._handler&&(e(t.document).unbind("mousemove",this._handler),this.reset())},i}),AJS.namespace("JIRA.Mouse",null,require("jira/ajs/input/mouse"));;
;
/* module-key = 'jira.webresources:util-lite', location = '/includes/jquery/plugins/getoptionsfromattributes/getOptionsFromAttributes.js' */
!function(t){t.fn.getOptionsFromAttributes=function(){var e={};return this.length&&t.each(this[0].attributes,function(){var t,a=this.nodeValue,n=e;/^data-/.test(this.nodeName)&&(t=this.nodeName.replace(/^data-/,"").split("."),AJS.$.each(t,function(e,r){r=r.replace(/([a-z])-([a-z])/gi,function(t,e,a){return e+a.toUpperCase()}),r=r.replace(/_([a-z]+)/gi,function(t,e){return e.toUpperCase()}),e===t.length-1?n[r]=a.match(/^(tru|fals)e$/i)?"true"==a.toLowerCase():a:n[r]||(n[r]={}),n=n[r]}))}),e}}(jQuery);;
;
/* module-key = 'jira.webresources:util-lite', location = '/includes/ajs/ajax/SmartAjax.js' */
define("jira/ajs/ajax/smart-ajax",["jira/util/formatter","jira/util/logger","jquery","jira/jquery/deferred","jira/util/data/meta","jira/util/top-same-origin-window"],function(t,e,r,a,n,o){function s(t,r,a){var n=r?"["+r+"] ":" ";e.log("ajax"+n+t+" : "+a)}function u(t){var e={},a=function(){var t=new Date,e=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0),r=t.getTime()-e.getTime();return Math.max(Math.floor(r),1)},n=function(a,n,o,u){if(!u){var i=tryIt(function(){return a.responseText},"");u=e=new j.SmartAjaxResult(a,f,n,i,(!1),o)}s("error",u.requestId,u),r.isFunction(t.error)&&t.error(a,n,o,u)},o=function(a,o,s){return s.status<100?(e=new j.SmartAjaxResult(s,f,j.SmartAjaxResult.ERROR,"",(!1)),void n(s,j.SmartAjaxResult.ERROR,void 0,e)):(e=new j.SmartAjaxResult(s,f,o,a,(!0)),void(r.isFunction(t.success)&&t.success(a,o,s,e)))},u=function(a,n){r.isFunction(t.complete)&&t.complete(a,n,e)},m={jqueryAjaxFn:r.ajax,headers:{"X-AUSERNAME":encodeURIComponent(i()),"X-AACCOUNTID":encodeURIComponent(c())}},l=r.extend(!0,{},m,t);l.error=n,l.success=o,l.complete=u;var d=l.jqueryAjaxFn.apply(l,[l]),f=a();try{d.abort=function(t){return function(){if(s("aborted",f,""),d.aborted=!0,r.isFunction(t))try{t.apply(d,arguments)}catch(t){}}}(d.abort)}catch(t){}return d}function i(){var t=n.get("remote-user");return"undefined"==typeof t?"undefined":t}function c(){var t=n.get("atlassian-account-id");return"undefined"==typeof t?"undefined":t}function m(e,r){var a;f.AJS;return a=e.statusText==j.SmartAjaxResult.TIMEOUT?"The call to the Jira server did not complete within the timeout period.  We are unsure of the result of this operation.":401===e.status?"You are not authorized to perform this operation.  Please log in.":e.hasData?"The Jira server was contacted but has returned an error response. We are unsure of the result of this operation.":"The Jira server could not be contacted. This may be a temporary glitch or the server may be down."}function l(e,r){var a='<div class="dialog-error"><p>'+e+"</p><p>"+"Close this dialog and press refresh in your browser"+"</p></div>";return r||(a="<h1>"+"Communications Breakdown"+"</h1>"+a),d(a)}function d(t){var e=r('<div class="ajaxerror"/>');return e.append(t),e}var f=o(window),j={};return j.SmartAjaxResult=function(t,e,r,a,n,o){var s=tryIt(function(){return t.status},0),u={successful:n,status:s,statusText:r,errorThrown:o,readyState:t.readyState,hasData:null!=a&&a.length>0,data:a,xhr:t,aborted:t.aborted,requestId:e,validationError:!(400!==t.status||!a||!a.errors)};return u.toString=function(){return"{\nsuccessful  : "+this.successful+",\nstatus      : "+this.status+",\nstatusText  : "+this.statusText+",\nhasData     : "+this.hasData+",\nreadyState  : "+this.readyState+",\nrequestId   : "+this.requestId+",\naborted     : "+this.aborted+",\n}"},u},j.SmartAjaxResult.ERROR="error",j.SmartAjaxResult.TIMEOUT="timeout",j.SmartAjaxResult.NOTMODIFIED="notmodified",j.SmartAjaxResult.PARSEERROR="parseerror",j.makeChainableRequest=function(t){var e=r.extend({},t),n=a(),o=function(e,a,o,s){r.isFunction(t.error)&&t.error.apply(this,arguments),n.rejectWith(this,arguments)},s=function(e,a,n){r.isFunction(t.complete)&&t.complete.apply(this,arguments)},i=function(e,a,o,s){r.isFunction(t.success)&&t.success.apply(this,arguments),n.resolveWith(this,arguments)};return e.error=o,e.complete=s,e.success=i,u(e),n.promise()},j.makeRequest=function(t){return u(t)},j.buildDialogErrorContent=function(t,e){var r=Math.floor(t.status/100);if(t.hasData&&4!==r)return d(AJS.extractBodyFromResponse(t.data));var a=m(t);return l(a,e)},j.buildSimpleErrorContent=function(t,e){return m(t,e?e:{})},j}),AJS.namespace("JIRA.SmartAjax",null,require("jira/ajs/ajax/smart-ajax")),AJS.namespace("jira.ajax",null,require("jira/ajs/ajax/smart-ajax"));;
;
/* module-key = 'jira.webresources:util-lite', location = '/includes/ajs/ajax/initAjaxSetup.js' */
!function(){var e=require("jquery");e.ajaxSetup({timeout:6e4,async:!0,cache:!1,global:!0})}();;
;
/* module-key = 'jira.webresources:util-lite', location = '/includes/ajs/reasons.js' */
define("jira/ajs/layer/hide-reasons",[],function(){return{clickOutside:"clickOutside",toggle:"toggle",escPressed:"esc",cancelClicked:"cancelClicked",submit:"submit",tabbedOut:"tabbedOut"}}),AJS.namespace("AJS.HIDE_REASON",null,require("jira/ajs/layer/hide-reasons"));;
;
/* module-key = 'jira.webresources:util-lite', location = '/includes/ajs/layer/LayerManager.js' */
!function(){function e(e,r){return"string"==typeof r&&(r=[r]),c.any(r,function(r){return u.contains(e,r)})}function r(){var e=window;try{for(;e.parent.window!==e.window&&e.parent.AJS;)e=e.parent}catch(e){}return e}function n(e){return(e.$layer||e.$popup||e.$||e.popup||e.element||e)[0]}function t(t){t.bind("showLayer",function(n,t,i){if(!e(i&&i.id,["user-hover-dialog","aui-inline-edit-error","watchers","jira-help-tip"])){var a=r().AJS;a.currentLayerItem&&i!==a.currentLayerItem&&"popup"!==a.currentLayerItem.type&&a.currentLayerItem.hide(),i&&(a.currentLayerItem=i,a.currentLayerItem.type=t)}}).bind("hideLayer",function(t,i,a){if(a&&!e(a.id,["user-hover-dialog","aui-inline-edit-error","jira-help-tip"])){var u=r().AJS;u.currentLayerItem&&(u.currentLayerItem===a?u.currentLayerItem=null:l.contains(n(a),n(u.currentLayerItem))&&u.currentLayerItem.hide())}}).bind("hideAllLayers",function(){var e=r().AJS;e.currentLayerItem&&e.currentLayerItem.hide()}).click(function(e){var n=r().AJS,t=n.currentLayerItem;!t||"popup"===t.type||"inlineDialog"===t.type&&t.persistent||r()===window&&e.originalEvent&&e.originalEvent.isProgrammatic||(t._validateClickToClose?t._validateClickToClose(e)&&(t instanceof AJS.InlineLayer?t.hide(o.clickOutside,e):t.hide()):t.hide())})}var i=require("jira/util/events"),a=require("jira/util/events/types"),u=require("jira/util/strings"),o=require("jira/ajs/layer/hide-reasons"),l=require("jquery"),c=require("underscore"),d=l(document);i.bind("Dialog.beforeHide",function(e){"undefined"!=typeof Calendar&&Calendar.current&&e.preventDefault(),JIRA.Dropdown&&JIRA.Dropdown.current&&e.preventDefault(),AJS.InlineLayer&&AJS.InlineLayer.current&&e.preventDefault(),AJS.Dropdown&&AJS.Dropdown.current&&e.preventDefault(),AJS.InlineDialog&&AJS.InlineDialog.current&&e.preventDefault()}),i.bind("Dialog.show",function(e){JIRA.Dropdown&&JIRA.Dropdown.current&&JIRA.Dropdown.current.hide(),AJS.InlineLayer&&AJS.InlineLayer.current&&(AJS.InlineLayer.current.hide(),e.preventDefault()),AJS.Dropdown&&AJS.Dropdown.current&&(AJS.Dropdown.current.hide(),e.preventDefault()),AJS.InlineDialog&&AJS.InlineDialog.current&&(AJS.InlineDialog.current.hide(),e.preventDefault())}),l(function(){"undefined"!=typeof Calendar&&(d.bind("beforeBlurInput",function(e){Calendar.current&&e.preventDefault(),JIRA.InlineLayer&&JIRA.InlineLayer.current&&e.preventDefault()}),a.BEFORE_INLINE_EDIT_CANCEL&&i.bind(a.BEFORE_INLINE_EDIT_CANCEL,function(e,r,n,t){t===JIRA.Issues.CANCEL_REASON.escPressed&&Calendar.current&&e.preventDefault()}))}),d.bind("iframeAppended",function(e,r){r=l(r),r.load(function(){t(r.contents())})}),t(d)}();;
;
/* module-key = 'jira.webresources:util-lite', location = '/includes/jquery/plugins/hasFixedParent/hasFixedParent.js' */
!function(n){n.fn.hasFixedParent=function(){var i=!1;return this.parents().each(function(){if("fixed"===n(this).css("position"))return i=this,!1}),i}}(jQuery);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-vendor-backbone-backbone', location = 'node_modules/@atlassian/aui/src/js-vendor/backbone/backbone.js' */
("undefined"===typeof window?global:window).__2c84bbdd61b43f2115abf64994b2cc7a=function(){var o={exports:{}},m=o.exports,v={module:o,exports:m,underscore:__61c16d543bfae33bb4747b45f7b91f35,jquery:__307d3e18fd611f85395c67cddeb1fe24,underscore:__61c16d543bfae33bb4747b45f7b91f35,jquery:__307d3e18fd611f85395c67cddeb1fe24},i;i=function(h,f,d){var i=("undefined"===typeof window?global:window).define,j,k,d=[d,f,h].filter(function(d){return"function"===typeof d})[0],f=[f,h,[]].filter(Array.isArray)[0];j=
d.apply(null,f.map(function(d){return v[d]}));k=typeof j;"function"===typeof i&&i("string"===typeof h?h:"__2c84bbdd61b43f2115abf64994b2cc7a",f,d);"string"===k?j=String(j):"number"===k?j=Number(j):"boolean"===k&&(j=Boolean(j));void 0!==j&&(m=o.exports=j)};i.amd=!0;var h=this,q=function(h,f,d,i){var h=this,j=h.Backbone,k=[],o=k.push,m=k.slice,q=k.splice;f.VERSION="1.0.0";f.$=i;f.noConflict=function(){h.Backbone=j;return this};f.emulateHTTP=!1;f.emulateJSON=!1;var l=f.Events={on:function(a,b,c){if(!s(this,
"on",a,[b,c])||!b)return this;this._events||(this._events={});(this._events[a]||(this._events[a]=[])).push({callback:b,context:c,ctx:c||this});return this},once:function(a,b,c){if(!s(this,"once",a,[b,c])||!b)return this;var e=this,g=d.once(function(){e.off(a,g);b.apply(this,arguments)});g._callback=b;return this.on(a,g,c)},off:function(a,b,c){var e,g,w,f,h,i,j,k;if(!this._events||!s(this,"off",a,[b,c]))return this;if(!a&&!b&&!c)return this._events={},this;f=a?[a]:d.keys(this._events);h=0;for(i=f.length;h<
i;h++)if(a=f[h],w=this._events[a]){this._events[a]=e=[];if(b||c){j=0;for(k=w.length;j<k;j++)g=w[j],(b&&b!==g.callback&&b!==g.callback._callback||c&&c!==g.context)&&e.push(g)}e.length||delete this._events[a]}return this},trigger:function(a){if(!this._events)return this;var b=m.call(arguments,1);if(!s(this,"trigger",a,b))return this;var c=this._events[a],e=this._events.all;c&&x(c,b);e&&x(e,arguments);return this},stopListening:function(a,b,c){var e=this._listeners;if(!e)return this;var d=!b&&!c;"object"===
typeof b&&(c=this);a&&((e={})[a._listenerId]=a);for(var f in e)e[f].off(b,c,this),d&&delete this._listeners[f];return this}},r=/\s+/,s=function(a,b,c,e){if(!c)return!0;if("object"===typeof c){for(var d in c)a[b].apply(a,[d,c[d]].concat(e));return!1}if(r.test(c)){c=c.split(r);d=0;for(var f=c.length;d<f;d++)a[b].apply(a,[c[d]].concat(e));return!1}return!0},x=function(a,b){var c,e=-1,d=a.length,f=b[0],h=b[1],i=b[2];switch(b.length){case 0:for(;++e<d;)(c=a[e]).callback.call(c.ctx);break;case 1:for(;++e<
d;)(c=a[e]).callback.call(c.ctx,f);break;case 2:for(;++e<d;)(c=a[e]).callback.call(c.ctx,f,h);break;case 3:for(;++e<d;)(c=a[e]).callback.call(c.ctx,f,h,i);break;default:for(;++e<d;)(c=a[e]).callback.apply(c.ctx,b)}};d.each({listenTo:"on",listenToOnce:"once"},function(a,b){l[b]=function(b,e,g){var f=this._listeners||(this._listeners={}),h=b._listenerId||(b._listenerId=d.uniqueId("l"));f[h]=b;"object"===typeof e&&(g=this);b[a](e,g,this);return this}});l.bind=l.on;l.unbind=l.off;d.extend(f,l);var p=
f.Model=function(a,b){var c,e=a||{};b||(b={});this.cid=d.uniqueId("c");this.attributes={};d.extend(this,d.pick(b,v));b.parse&&(e=this.parse(e,b)||{});if(c=d.result(this,"defaults"))e=d.defaults({},e,c);this.set(e,b);this.changed={};this.initialize.apply(this,arguments)},v=["url","urlRoot","collection"];d.extend(p.prototype,l,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return d.clone(this.attributes)},sync:function(){return f.sync.apply(this,arguments)},
get:function(a){return this.attributes[a]},escape:function(a){return d.escape(this.get(a))},has:function(a){return null!=this.get(a)},set:function(a,b,c){var e,g,f,h,i,j,k;if(null==a)return this;"object"===typeof a?(g=a,c=b):(g={})[a]=b;c||(c={});if(!this._validate(g,c))return!1;f=c.unset;h=c.silent;a=[];i=this._changing;this._changing=!0;i||(this._previousAttributes=d.clone(this.attributes),this.changed={});k=this.attributes;j=this._previousAttributes;this.idAttribute in g&&(this.id=g[this.idAttribute]);
for(e in g)b=g[e],d.isEqual(k[e],b)||a.push(e),d.isEqual(j[e],b)?delete this.changed[e]:this.changed[e]=b,f?delete k[e]:k[e]=b;if(!h){a.length&&(this._pending=!0);b=0;for(e=a.length;b<e;b++)this.trigger("change:"+a[b],this,k[a[b]],c)}if(i)return this;if(!h)for(;this._pending;)this._pending=!1,this.trigger("change",this,c);this._changing=this._pending=!1;return this},unset:function(a,b){return this.set(a,void 0,d.extend({},b,{unset:!0}))},clear:function(a){var b={},c;for(c in this.attributes)b[c]=
void 0;return this.set(b,d.extend({},a,{unset:!0}))},hasChanged:function(a){return null==a?!d.isEmpty(this.changed):d.has(this.changed,a)},changedAttributes:function(a){if(!a)return this.hasChanged()?d.clone(this.changed):!1;var b,c=!1,e=this._changing?this._previousAttributes:this.attributes,g;for(g in a)if(!d.isEqual(e[g],b=a[g]))(c||(c={}))[g]=b;return c},previous:function(a){return null==a||!this._previousAttributes?null:this._previousAttributes[a]},previousAttributes:function(){return d.clone(this._previousAttributes)},
fetch:function(a){a=a?d.clone(a):{};void 0===a.parse&&(a.parse=!0);var b=this,c=a.success;a.success=function(e){if(!b.set(b.parse(e,a),a))return false;c&&c(b,e,a);b.trigger("sync",b,e,a)};t(this,a);return this.sync("read",this,a)},save:function(a,b,c){var e,g=this.attributes;null==a||"object"===typeof a?(e=a,c=b):(e={})[a]=b;if(e&&(!c||!c.wait)&&!this.set(e,c))return!1;c=d.extend({validate:!0},c);if(!this._validate(e,c))return!1;e&&c.wait&&(this.attributes=d.extend({},g,e));void 0===c.parse&&(c.parse=
!0);var f=this,h=c.success;c.success=function(a){f.attributes=g;var b=f.parse(a,c);c.wait&&(b=d.extend(e||{},b));if(d.isObject(b)&&!f.set(b,c))return false;h&&h(f,a,c);f.trigger("sync",f,a,c)};t(this,c);a=this.isNew()?"create":c.patch?"patch":"update";"patch"===a&&(c.attrs=e);a=this.sync(a,this,c);e&&c.wait&&(this.attributes=g);return a},destroy:function(a){var a=a?d.clone(a):{},b=this,c=a.success,e=function(){b.trigger("destroy",b,b.collection,a)};a.success=function(d){(a.wait||b.isNew())&&e();c&&
c(b,d,a);b.isNew()||b.trigger("sync",b,d,a)};if(this.isNew())return a.success(),!1;t(this,a);var g=this.sync("delete",this,a);a.wait||e();return g},url:function(){var a=d.result(this,"urlRoot")||d.result(this.collection,"url")||y();return this.isNew()?a:a+("/"===a.charAt(a.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(a){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(a){return this._validate({},d.extend(a||
{},{validate:!0}))},_validate:function(a,b){if(!b.validate||!this.validate)return!0;var a=d.extend({},this.attributes,a),c=this.validationError=this.validate(a,b)||null;if(!c)return!0;this.trigger("invalid",this,c,d.extend(b||{},{validationError:c}));return!1}});d.each("keys values pairs invert pick omit".split(" "),function(a){p.prototype[a]=function(){var b=m.call(arguments);b.unshift(this.attributes);return d[a].apply(d,b)}});var u=f.Collection=function(a,b){b||(b={});b.url&&(this.url=b.url);b.model&&
(this.model=b.model);void 0!==b.comparator&&(this.comparator=b.comparator);this._reset();this.initialize.apply(this,arguments);a&&this.reset(a,d.extend({silent:!0},b))},A={add:!0,remove:!0,merge:!0},B={add:!0,merge:!1,remove:!1};d.extend(u.prototype,l,{model:p,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return f.sync.apply(this,arguments)},add:function(a,b){return this.set(a,d.defaults(b||{},B))},remove:function(a,b){a=d.isArray(a)?
a.slice():[a];b||(b={});var c,e,g,f;c=0;for(e=a.length;c<e;c++)if(f=this.get(a[c]))delete this._byId[f.id],delete this._byId[f.cid],g=this.indexOf(f),this.models.splice(g,1),this.length--,b.silent||(b.index=g,f.trigger("remove",f,this,b)),this._removeReference(f);return this},set:function(a,b){b=d.defaults(b||{},A);b.parse&&(a=this.parse(a,b));d.isArray(a)||(a=a?[a]:[]);var c,e,g,f,h,i=b.at,j=this.comparator&&null==i&&!1!==b.sort,k=d.isString(this.comparator)?this.comparator:null,l=[],m=[],n={};c=
0;for(e=a.length;c<e;c++)if(g=this._prepareModel(a[c],b))(f=this.get(g))?(b.remove&&(n[f.cid]=!0),b.merge&&(f.set(g.attributes,b),j&&(!h&&f.hasChanged(k))&&(h=!0))):b.add&&(l.push(g),g.on("all",this._onModelEvent,this),this._byId[g.cid]=g,null!=g.id&&(this._byId[g.id]=g));if(b.remove){c=0;for(e=this.length;c<e;++c)n[(g=this.models[c]).cid]||m.push(g);m.length&&this.remove(m,b)}l.length&&(j&&(h=!0),this.length+=l.length,null!=i?q.apply(this.models,[i,0].concat(l)):o.apply(this.models,l));h&&this.sort({silent:!0});
if(b.silent)return this;c=0;for(e=l.length;c<e;c++)(g=l[c]).trigger("add",g,this,b);h&&this.trigger("sort",this,b);return this},reset:function(a,b){b||(b={});for(var c=0,e=this.models.length;c<e;c++)this._removeReference(this.models[c]);b.previousModels=this.models;this._reset();this.add(a,d.extend({silent:!0},b));b.silent||this.trigger("reset",this,b);return this},push:function(a,b){a=this._prepareModel(a,b);this.add(a,d.extend({at:this.length},b));return a},pop:function(a){var b=this.at(this.length-
1);this.remove(b,a);return b},unshift:function(a,b){a=this._prepareModel(a,b);this.add(a,d.extend({at:0},b));return a},shift:function(a){var b=this.at(0);this.remove(b,a);return b},slice:function(a,b){return this.models.slice(a,b)},get:function(a){return null==a?void 0:this._byId[null!=a.id?a.id:a.cid||a]},at:function(a){return this.models[a]},where:function(a,b){return d.isEmpty(a)?b?void 0:[]:this[b?"find":"filter"](function(b){for(var e in a)if(a[e]!==b.get(e))return!1;return!0})},findWhere:function(a){return this.where(a,
!0)},sort:function(a){if(!this.comparator)throw Error("Cannot sort a set without a comparator");a||(a={});d.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(d.bind(this.comparator,this));a.silent||this.trigger("sort",this,a);return this},sortedIndex:function(a,b,c){b||(b=this.comparator);var e=d.isFunction(b)?b:function(a){return a.get(b)};return d.sortedIndex(this.models,a,e,c)},pluck:function(a){return d.invoke(this.models,"get",
a)},fetch:function(a){a=a?d.clone(a):{};void 0===a.parse&&(a.parse=!0);var b=a.success,c=this;a.success=function(e){c[a.reset?"reset":"set"](e,a);b&&b(c,e,a);c.trigger("sync",c,e,a)};t(this,a);return this.sync("read",this,a)},create:function(a,b){b=b?d.clone(b):{};if(!(a=this._prepareModel(a,b)))return!1;b.wait||this.add(a,b);var c=this,e=b.success;b.success=function(a,b,d){d.wait&&c.add(a,d);e&&e(a,b,d)};a.save(null,b);return a},parse:function(a){return a},clone:function(){return new this.constructor(this.models)},
_reset:function(){this.length=0;this.models=[];this._byId={}},_prepareModel:function(a,b){if(a instanceof p)return a.collection||(a.collection=this),a;b||(b={});b.collection=this;var c=new this.model(a,b);return!c._validate(a,b)?(this.trigger("invalid",this,a,b),!1):c},_removeReference:function(a){this===a.collection&&delete a.collection;a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,e){("add"===a||"remove"===a)&&c!==this||("destroy"===a&&this.remove(b,e),b&&a==="change:"+b.idAttribute&&
(delete this._byId[b.previous(b.idAttribute)],null!=b.id&&(this._byId[b.id]=b)),this.trigger.apply(this,arguments))}});d.each("forEach each map collect reduce foldl inject reduceRight foldr find detect filter select reject every all some any include contains invoke max min toArray size first head take initial rest tail drop last without indexOf shuffle lastIndexOf isEmpty chain".split(" "),function(a){u.prototype[a]=function(){var b=m.call(arguments);b.unshift(this.models);return d[a].apply(d,b)}});
d.each(["groupBy","countBy","sortBy"],function(a){u.prototype[a]=function(b,c){var e=d.isFunction(b)?b:function(a){return a.get(b)};return d[a](this.models,e,c)}});var i=f.View=function(a){this.cid=d.uniqueId("view");this._configure(a||{});this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()},C=/^(\S+)\s*(.*)$/,D="model collection el id attributes className tagName events".split(" ");d.extend(i.prototype,l,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},
render:function(){return this},remove:function(){this.$el.remove();this.stopListening();return this},setElement:function(a,b){this.$el&&this.undelegateEvents();this.$el=a instanceof f.$?a:f.$(a);this.el=this.$el[0];!1!==b&&this.delegateEvents();return this},delegateEvents:function(a){if(!a&&!(a=d.result(this,"events")))return this;this.undelegateEvents();for(var b in a){var c=a[b];d.isFunction(c)||(c=this[a[b]]);if(c){var e=b.match(C),g=e[1],e=e[2],c=d.bind(c,this),g=g+(".delegateEvents"+this.cid);
if(""===e)this.$el.on(g,c);else this.$el.on(g,e,c)}}return this},undelegateEvents:function(){this.$el.off(".delegateEvents"+this.cid);return this},_configure:function(a){this.options&&(a=d.extend({},d.result(this,"options"),a));d.extend(this,d.pick(a,D));this.options=a},_ensureElement:function(){if(this.el)this.setElement(d.result(this,"el"),!1);else{var a=d.extend({},d.result(this,"attributes"));this.id&&(a.id=d.result(this,"id"));this.className&&(a["class"]=d.result(this,"className"));a=f.$("<"+
d.result(this,"tagName")+">").attr(a);this.setElement(a,!1)}}});f.sync=function(a,b,c){var e=E[a];d.defaults(c||(c={}),{emulateHTTP:f.emulateHTTP,emulateJSON:f.emulateJSON});var g={type:e,dataType:"json"};c.url||(g.url=d.result(b,"url")||y());if(null==c.data&&b&&("create"===a||"update"===a||"patch"===a))g.contentType="application/json",g.data=JSON.stringify(c.attrs||b.toJSON(c));c.emulateJSON&&(g.contentType="application/x-www-form-urlencoded",g.data=g.data?{model:g.data}:{});if(c.emulateHTTP&&("PUT"===
e||"DELETE"===e||"PATCH"===e)){g.type="POST";c.emulateJSON&&(g.data._method=e);var h=c.beforeSend;c.beforeSend=function(a){a.setRequestHeader("X-HTTP-Method-Override",e);if(h)return h.apply(this,arguments)}}"GET"!==g.type&&!c.emulateJSON&&(g.processData=!1);if("PATCH"===g.type&&window.ActiveXObject&&(!window.external||!window.external.msActiveXFilteringEnabled))g.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")};a=c.xhr=f.ajax(d.extend(g,c));b.trigger("request",b,a,c);return a};var E=
{create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};f.ajax=function(){return f.$.ajax.apply(f.$,arguments)};var k=f.Router=function(a){a||(a={});a.routes&&(this.routes=a.routes);this._bindRoutes();this.initialize.apply(this,arguments)},F=/\((.*?)\)/g,G=/(\(\?)?:\w+/g,H=/\*\w+/g,I=/[\-{}\[\]+?.,\\\^$|#\s]/g;d.extend(k.prototype,l,{initialize:function(){},route:function(a,b,c){d.isRegExp(a)||(a=this._routeToRegExp(a));d.isFunction(b)&&(c=b,b="");c||(c=this[b]);var e=this;f.history.route(a,
function(d){d=e._extractParameters(a,d);c&&c.apply(e,d);e.trigger.apply(e,["route:"+b].concat(d));e.trigger("route",b,d);f.history.trigger("route",e,b,d)});return this},navigate:function(a,b){f.history.navigate(a,b);return this},_bindRoutes:function(){if(this.routes){this.routes=d.result(this,"routes");for(var a,b=d.keys(this.routes);null!=(a=b.pop());)this.route(a,this.routes[a])}},_routeToRegExp:function(a){a=a.replace(I,"\\$&").replace(F,"(?:$1)?").replace(G,function(a,c){return c?a:"([^/]+)"}).replace(H,
"(.*?)");return RegExp("^"+a+"$")},_extractParameters:function(a,b){var c=a.exec(b).slice(1);return d.map(c,function(a){return a?decodeURIComponent(a):null})}});var n=f.History=function(){this.handlers=[];d.bindAll(this,"checkUrl");"undefined"!==typeof window&&(this.location=window.location,this.history=window.history)},z=/^[#\/]|\s+$/g,J=/^\/+|\/+$/g,K=/msie [\w.]+/,L=/\/$/;n.started=!1;d.extend(n.prototype,l,{interval:50,getHash:function(a){return(a=(a||this).location.href.match(/#(.*)$/))?a[1]:
""},getFragment:function(a,b){if(null==a)if(this._hasPushState||!this._wantsHashChange||b){var a=this.location.pathname,c=this.root.replace(L,"");a.indexOf(c)||(a=a.substr(c.length))}else a=this.getHash();return a.replace(z,"")},start:function(a){if(n.started)throw Error("Backbone.history has already been started");n.started=!0;this.options=d.extend({},{root:"/"},this.options,a);this.root=this.options.root;this._wantsHashChange=!1!==this.options.hashChange;this._wantsPushState=!!this.options.pushState;
this._hasPushState=!(!this.options.pushState||!this.history||!this.history.pushState);var a=this.getFragment(),b=document.documentMode,b=K.exec(navigator.userAgent.toLowerCase())&&(!b||7>=b);this.root=("/"+this.root+"/").replace(J,"/");b&&this._wantsHashChange&&(this.iframe=f.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(a));if(this._hasPushState)f.$(window).on("popstate",this.checkUrl);else if(this._wantsHashChange&&"onhashchange"in window&&
!b)f.$(window).on("hashchange",this.checkUrl);else this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval));this.fragment=a;a=this.location;b=a.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!b)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._wantsPushState&&(this._hasPushState&&b&&a.hash)&&(this.fragment=this.getHash().replace(z,
""),this.history.replaceState({},document.title,this.root+this.fragment+a.search));if(!this.options.silent)return this.loadUrl()},stop:function(){f.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl);clearInterval(this._checkUrlInterval);n.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(){var a=this.getFragment();a===this.fragment&&this.iframe&&(a=this.getFragment(this.getHash(this.iframe)));if(a===this.fragment)return!1;this.iframe&&
this.navigate(a);this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(a){var b=this.fragment=this.getFragment(a);return d.any(this.handlers,function(a){if(a.route.test(b))return a.callback(b),!0})},navigate:function(a,b){if(!n.started)return!1;if(!b||!0===b)b={trigger:b};a=this.getFragment(a||"");if(this.fragment!==a){this.fragment=a;var c=this.root+a;if(this._hasPushState)this.history[b.replace?"replaceState":"pushState"]({},document.title,c);else if(this._wantsHashChange)this._updateHash(this.location,
a,b.replace),this.iframe&&a!==this.getFragment(this.getHash(this.iframe))&&(b.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,a,b.replace));else return this.location.assign(c);b.trigger&&this.loadUrl(a)}},_updateHash:function(a,b,c){c?(c=a.href.replace(/(javascript:|#).*$/,""),a.replace(c+"#"+b)):a.hash="#"+b}});f.history=new n;p.extend=u.extend=k.extend=i.extend=n.extend=function(a,b){var c=this,e;e=a&&d.has(a,"constructor")?a.constructor:function(){return c.apply(this,
arguments)};d.extend(e,c,b);var f=function(){this.constructor=e};f.prototype=c.prototype;e.prototype=new f;a&&d.extend(e.prototype,a);e.__super__=c.prototype;return e};var y=function(){throw Error('A "url" property or function must be specified');},t=function(a,b){var c=b.error;b.error=function(d){c&&c(a,d,b);a.trigger("error",a,d,b)}};return f};if("function"===typeof i&&i.amd)i(["underscore","jquery","exports"],function(i,f,d){h.Backbone=q(h,d,i,f)});else if("undefined"!==typeof m){i=__61c16d543bfae33bb4747b45f7b91f35;
var r;try{r=__307d3e18fd611f85395c67cddeb1fe24}catch(M){}q(h,m,i,r)}else h.Backbone=q(h,{},h._,h.jQuery||h.Zepto||h.ender||h.$);return o.exports}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-backbone', location = 'node_modules/@atlassian/aui/src/js/aui/backbone.js' */
("undefined"===typeof window?global:window).__e3ce9f42f29f6bd2118d84461512f4a4=function(){var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});var a=__2c84bbdd61b43f2115abf64994b2cc7a,a=a&&a.__esModule?a:{"default":a};window.Backbone||(window.Backbone=a.default);b.default=window.Backbone;return b=b["default"]}.call(this);;
;
/* module-key = 'jira.webresources:ajs-backbone-amd-shim', location = '/static/lib/amd-shims/backbone-amd.js' */
define("backbone",["underscore","jquery"],function(){return Backbone});;
;
/* module-key = 'jira.webresources:number-formatter', location = '/includes/jira/numberformatter/NumberFormatter.js' */
AJS.namespace("JIRA.NumberFormatter.format",null,require("jira/util/formatter").formatNumber);;
;
/* module-key = 'jira.webresources:util', location = '/includes/jira/common/meta.js' */
AJS.namespace("JIRA.Meta"),function(){var e=require("jira/util/data/meta"),t=require("aui/params");JIRA.Meta.getLoggedInUser=function(){return{name:e.get("remote-user"),fullName:e.get("remote-user-fullname")}},JIRA.Meta.getProject=function(){return t.projectKey},JIRA.Meta.getIssueKey=function(){return e.get("issue-key")}}();;
;
/* module-key = 'jira.webresources:util', location = '/includes/ajs/ajax/AjaxUtil.js' */
define("jira/ajs/ajax/ajax-util",["jira/util/formatter","jquery","underscore","exports"],function(r,e,t,s){"use strict";var n=function(r){if(r){if(t.isArray(r.errorMessages)&&!t.isEmpty(r.errorMessages))return r.errorMessages.join(" ");if(t.isObject(r.errors)&&!t.isEmpty(r.errors))return t.values(r.errors).join(" ")}return null},a=function(r){var t;try{return t=r.responseText&&e.parseJSON(r.responseText),n(t)}catch(r){}return null},o=function(e){return 401===e.status?"You are not authorized to perform this operation. Please log in.":e.responseText?"The Jira server was contacted but has returned an error response. We are unsure of the result of this operation.":"The Jira server could not be contacted. This may be a temporary glitch or the server may be down."};s.getErrorMessageFromXHR=function(r){return a(r)||o(r)},s.isWebSudoFailure=function(r){return!1}}),AJS.namespace("JIRA.Ajax",null,require("jira/ajs/ajax/ajax-util"));;
;
/* module-key = 'jira.webresources:util', location = '/includes/jira/common/observer.js' */
!function(){var e=require("jira/util/events"),r=require("jira/util/events/types"),t=require("jira/util/events/reasons"),i=require("jquery");i(function(){var n=i(document);e.trigger(r.NEW_CONTENT_ADDED,[n,t.pageLoad]),e.trigger(r.NEW_PAGE_ADDED,[n])}),e.bind("dialogContentReady",function(i,n){var D=n.get$popupContent();e.trigger(r.NEW_CONTENT_ADDED,[D,t.dialogReady]),e.trigger(r.NEW_PAGE_ADDED,[D])}),e.bind("contentRefreshed",function(t,n){var D=i(n);e.trigger(r.NEW_CONTENT_ADDED,[D])})}();;
;
/* module-key = 'jira.webresources:util', location = '/includes/lib/json/JSONiefix.js' */
jQuery.browser.msie&&jQuery.browser.version>7&&"undefined"!=typeof JSON&&(JSON.stringify=null);;
;
/* module-key = 'jira.webresources:util', location = '/includes/jira/common/version.js' */
define("jira/util/version",["aui/params"],function(r){var e={};return e.compare=function(e){if(r.JiraVersion){var n,a=r.JiraVersion.split("."),t=e.split("."),i=-1;n=a.length,a.length>t.length?(n=t.length,i=1):a.length===t.length&&(i=0);for(var l=0;l<n;l++){var u,o,s,p,h,c,f;if(u=a[l],o=t[l],h=/^(0+)(.*)$/,s=u.match(h),null!=s?(u="0."+u,c=parseFloat(u)):c=parseInt(u,10),p=o.match(h),null!=p?(o="0."+o,f=parseFloat(o)):f=parseInt(o,10),c<f)return-1;if(c>f)return 1}return i}},e.isGreaterThanOrEqualTo=function(r){return e.compare(r)!==-1},e}),AJS.namespace("JIRA.Version",null,require("jira/util/version"));;
;
/* module-key = 'jira.webresources:util', location = '/includes/lib/json/JSON.js' */
this.JSON||(this.JSON={}),function(){function f(t){return t<10?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var n,r,f,o,u,i=gap,a=e[t];switch(a&&"object"==typeof a&&"function"==typeof a.toJSON&&(a=a.toJSON(t)),"function"==typeof rep&&(a=rep.call(e,t,a)),typeof a){case"string":return quote(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a)return"null";if(gap+=indent,u=[],"[object Array]"===Object.prototype.toString.apply(a)){for(o=a.length,n=0;n<o;n+=1)u[n]=str(n,a)||"null";return f=0===u.length?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+i+"]":"["+u.join(",")+"]",gap=i,f}if(rep&&"object"==typeof rep)for(o=rep.length,n=0;n<o;n+=1)r=rep[n],"string"==typeof r&&(f=str(r,a),f&&u.push(quote(r)+(gap?": ":":")+f));else for(r in a)Object.hasOwnProperty.call(a,r)&&(f=str(r,a),f&&u.push(quote(r)+(gap?": ":":")+f));return f=0===u.length?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+i+"}":"{"+u.join(",")+"}",gap=i,f}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(t){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(t){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,e,n){var r;if(gap="",indent="","number"==typeof n)for(r=0;r<n;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(t,e){var n,r,f=t[e];if(f&&"object"==typeof f)for(n in f)Object.hasOwnProperty.call(f,n)&&(r=walk(f,n),void 0!==r?f[n]=r:delete f[n]);return reviver.call(t,e,f)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}();;
;
/* module-key = 'jira.webresources:util', location = '/includes/lib/parseuri/parseUri.js' */
/*!
 * parseUri 1.2.2
 * (c) Steven Levithan <stevenlevithan.com>
 * MIT License
 * MODIFIED BY ATLASSIAN
 */
define("jira/libs/parse-uri",function(){function r(e){for(var o=r.options,s=o.parser[o.strictMode?"strict":"loose"].exec(e),t={},i=14;i--;)t[o.key[i]]=s[i]||"";return t[o.q.name]={},t[o.key[12]].replace(o.q.parser,function(r,e,s){e&&(t[o.q.name][e]=s)}),t}return r.options={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},r}),AJS.namespace("parseUri",null,require("jira/libs/parse-uri"));;
;
/* module-key = 'jira.webresources:util', location = '/includes/jira/data/parseOptionsFromFieldset.js' */
define("jira/data/parse-options-from-fieldset",["jquery"],function(e){function t(e){var t=r(e,e);return e.remove(),t}function r(t,a){var n={};return t.children().each(function(){var t,s=e(this);s.is("input[type=hidden]")?(t=i(s),n.hasOwnProperty(t.id)?e.isArray(n[t.id])?n[t.id].push(t.value):n[t.id]=[n[t.id],t.value]:n[t.id]=t.value):s.is("fieldset")?n[s.attr("title")||s.attr("id")]=r(s,a):s.insertBefore(a)}),n}function i(e){var t={},r=e.val();return t.id=e.attr("title")||e.attr("id"),t.value=r.match(/^(tru|fals)e$/i)?"true"==r.toLowerCase():r,t}return t}),AJS.namespace("JIRA.parseOptionsFromFieldset",null,require("jira/data/parse-options-from-fieldset"));;
;
/* module-key = 'jira.webresources:util', location = '/includes/jquery/plugins/handleaccesskeys/handleAccessKeys.js' */
!function(e){var t=require("underscore");e.fn.handleAccessKeys=function(s){function n(t,n){if(t)return s.selective===!1||(/[a-z]/i.test(t)&&(t=t.toLowerCase()),e.inArray(t,n)!==-1)}function c(t){t.each(function(){var t=e(this);t.data(a)&&t.attr(a,t.data(a))})}function r(t,s){t.each(function(){var t=e(this);n(t.attr(a),s)&&(t.data(a,t.attr(a)),t.removeAttr(a))})}var a="accesskey";return e.browser.msie&&"7.0"==e.browser.version&&(a="accessKey"),s=s||{},this.each(function(){var s=e(this),n={getBlackList:t.once(function(){var e=[];return this.getMyAccesskeyElems().each(function(){this.hasAttribute(a)&&e.push(this.getAttribute(a).toLowerCase())}),e}),getMyAccesskeyElems:t.once(function(){return e(":input["+a+"], a["+a+"]",s)}),getOtherAccesskeyElems:t.once(function(){return e("form").not(s).find(":input["+a+"], a["+a+"]")})};return s.is("form")?void(s.data("handleAccessKeys.applied")||(s.data("handleAccessKeys.applied",!0),s.delegate(":input, a","focus",function(){r(n.getOtherAccesskeyElems(),n.getBlackList()),c(n.getMyAccesskeyElems())}).delegate(":input, a","blur",function(){c(n.getOtherAccesskeyElems())}))):(console.warn("jQuery.fn.handleAccessKeys: node type ["+s.prop("nodeName")+"] is not valid. Only <form> supported"),this)}),this}}(jQuery);;
;
/* module-key = 'jira.webresources:util', location = '/includes/jquery/plugins/setselectionrange/setSelectionRange.js' */
jQuery.fn.setSelectionRange=function(e,t){if(0!=this.length)if(this[0].setSelectionRange)this[0].focus(),this[0].setSelectionRange(e,t);else if(this[0].createTextRange){var n=this[0].createTextRange();n.collapse(!0),n.moveEnd("character",t),n.moveStart("character",e),n.select()}},jQuery.fn.setCaretToPosition=function(e){this.setSelectionRange(e,e)};;
;
/* module-key = 'jira.webresources:util', location = '/includes/jquery/plugins/simpleclick/simpleClick.js' */
!function(e){e.event.special.simpleClick={add:function(c){c._clickHandler=function(e){if(!e.ctrlKey&&!e.metaKey&&!e.shiftKey)return c.handler.apply(this,arguments)},e(this).on("click",c.selector,c._clickHandler)},remove:function(c){e(this).off("click",c.selector,c._clickHandler)}}}(jQuery);;
;
/* module-key = 'jira.webresources:util', location = '/includes/jira/data/SessionStorage.js' */
define("jira/data/session-storage",function(){return{nativesupport:!0,length:function(){return sessionStorage.length},key:function(e){return sessionStorage.key(e)},getItem:function(e){return sessionStorage.getItem(e)},setItem:function(e,t){return sessionStorage.setItem(e,t)},removeItem:function(e){return sessionStorage.removeItem(e)},clear:function(){return sessionStorage.clear()},asJSON:function(){for(var e=this.length(),t="{\n",n=0;n<e;n++){var s=this.key(n),r=this.getItem(s);t+=s+":"+r,n<e-1&&(t+=","),t+="\n"}return t+="}\n"}}}),AJS.namespace("jira.app.session.storage",null,require("jira/data/session-storage")),AJS.namespace("JIRA.SessionStorage",null,require("jira/data/session-storage"));;
;
/* module-key = 'jira.webresources:util', location = '/includes/jira/data/LocalStorage.js' */
define("jira/data/local-storage",["jquery"],function(e){return"undefined"==typeof localStorage&&(localStorage={getItem:e.noop,setItem:e.noop,removeItem:e.noop,clear:e.noop}),localStorage});;
;
/* module-key = 'jira.webresources:util', location = '/includes/ajs/persistence/persistence.js' */
define("jira/ajs/persistence",["jira/data/session-storage","jquery","exports"],function(e,n,a){var t="AJS.thisPage";a.nextPage=function(){var a=[];return n(window).unload(function(){e.setItem(t,JSON.stringify(a))}),function(e,t){var i;n.each(a,function(){this.name===e&&(this.value=t,i=!0)}),i||a.push({name:e,value:t})}}(),a.thisPage=function(){var n,a,i={};if(a=e.getItem(t),e.removeItem(t),a)for(a=JSON.parse(a),n=0;n<a.length;n++)i[a[n].name]=a[n].value;return function(e){return i[e]}}()}),AJS.namespace("AJS.nextPage",null,require("jira/ajs/persistence").nextPage),AJS.namespace("AJS.thisPage",null,require("jira/ajs/persistence").thisPage);;
;
/* module-key = 'jira.webresources:util', location = '/includes/jira/xsrf/XSRF.js' */
define("jira/xsrf",["jira/util/formatter","jquery"],function(t,a){function n(t){var a=atl_token();a!==t&&(o(a,t),u(a,t),c(a,t))}var r="atlassian-token",e="atl_token",i="atl_token",f=function(a){return t.format("{0}={1}",e,a)},o=function(n,e){var i=t.format("meta#{0}",r);a(i).attr("content",e)},u=function(t,n){a("a,link").each(function(){var r=a(this),e=r.attr("href");e&&r.attr("href",e.replace(f(t),f(n)))})},c=function(n,r){a("form").each(function(){var e=a(this),o=e.attr("action");o&&e.attr("action",o.replace(f(n),f(r)));var u=t.format('input[name="{0}"][value="{1}"]',i,n);e.find(u).each(function(){a(this).attr("value",r)})})};return{updateTokenOnPage:n}}),AJS.namespace("jira.xsrf",null,require("jira/xsrf")),AJS.namespace("JIRA.XSRF",null,require("jira/xsrf"));;
;
/* module-key = 'jira.webresources:util', location = '/includes/ajs/bindDefaultCustomEvent/bindDefaultCustomEvent.js' */
define("jira/ajs/default-custom-event",["jquery","exports"],function(e,n){var t={};n.bind=function(n,a){if(t[n])throw new Error("You have already bound a default handler for ["+n+"] event");t[n]=function(t){var u=e(document).data("events")[n],l=u[u.length-1].handler;l!==arguments.callee?(t.preventDefault=function(){a=null},u[u.length-1].handler=function(){l.apply(this,arguments),a&&a.apply(this,arguments),u[u.length-1].handler=l}):a.apply(this,arguments)},e(document).bind(n,t[n])},n.unbind=function(n){t[n]&&(e(document).unbind(n,t[n]),delete t[n])}}),AJS.namespace("AJS.bindDefaultCustomEvent",null,require("jira/ajs/default-custom-event").bind),AJS.namespace("AJS.unbindDefaultCustomEvent",null,require("jira/ajs/default-custom-event").unbind);;
;
/* module-key = 'com.atlassian.plugin.jslibs:skate-0.12.6', location = 'libs/skate/0.12.6/skate-0.12.6.js' */
(function e(g,c,j){function h(a,k){if(!c[a]){if(!g[a]){var d="function"==typeof require&&require;if(!k&&d)return d(a,!0);if(f)return f(a,!0);d=Error("Cannot find module '"+a+"'");throw d.code="MODULE_NOT_FOUND",d;}d=c[a]={exports:{}};g[a][0].call(d.exports,function(c){var f=g[a][1][c];return h(f?f:c)},d,d.exports,e,g,c,j)}return c[a].exports}for(var f="function"==typeof require&&require,d=0;d<j.length;d++)h(j[d]);return h})({1:[function(b,g,c){Object.defineProperty(c,"__esModule",{value:!0});"use strict";
c.ATTR_IGNORE="data-skate-ignore";c.types={ANY:"act",ATTR:"a",CLASS:"c",NOATTR:"ct",NOCLASS:"at",NOTAG:"ac",TAG:"t"}},{}],2:[function(b,g){g.exports={get:function(c,b){if(c.__SKATE_DATA)return c.__SKATE_DATA[b]},set:function(c,b,h){c.__SKATE_DATA||(c.__SKATE_DATA={});c.__SKATE_DATA[b]=h;return c}}},{}],3:[function(b,g){function c(c){for(var f=c.length,b=0;b<f;b++){var i=c[b],o=i.addedNodes,i=i.removedNodes;o&&(o.length&&!p(o[0].parentNode))&&d(o);i&&i.length&&a(i)}}var j=function(c){return c&&c.__esModule?
c["default"]:c},h=j(b("./globals")),f=b("./lifecycle"),d=f.initElements,a=f.removeElements,k=j(b("./mutation-observer")),p=b("./utils").getClosestIgnoredElement;g.exports={register:function(a){a&&(k.fixIe(),this.unregister());h.observer||(a=new k(c),a.observe(document,{childList:!0,subtree:!0}),h.observer=a);return this},unregister:function(){h.observer&&(h.observer.disconnect(),h.observer=void 0);return this}}},{"./globals":4,"./lifecycle":5,"./mutation-observer":6,"./utils":9}],4:[function(b,g){window.__skate||
(window.__skate={observer:void 0,registry:{}});g.exports=window.__skate},{}],5:[function(b,g,c){function j(o,c,a){if(k.get(o,c.id+":lifecycle:"+a))return!0;k.set(o,c.id+":lifecycle:"+a,!0);return!1}function h(c,a){if(!j(c,a,"created")){m(c,a.prototype,!0);a.template&&a.template(c);var b=function(a,b){return function(f){if(!b)return a(c,f,c);for(var d=f.target;d&&d!==document&&d!==c.parentNode;){if(i.call(d,b))return a(c,f,d);d=d.parentNode}}};"object"===typeof a.events&&l(a.events,function(a,d){var f,
i;i=d.split(" ");f=i.shift();i=i.join(" ");c.addEventListener(f,b(a,i),!!i&&("blur"===f||"focus"===f))});var f=function(i,f,d,b){var k;a.attributes&&a.attributes[f]&&"function"===typeof a.attributes[f][i]?k=a.attributes[f][i]:a.attributes&&"function"===typeof a.attributes[f]?k=a.attributes[f]:"function"===typeof a.attributes&&(k=a.attributes);k&&k(c,{type:i,name:f,newValue:d,oldValue:b})},d,k=c.attributes,h=[],g=k.length;(new p(function(a){a.forEach(function(a){var c,i=a.attributeName,d=k[i];d&&null===
a.oldValue?c="created":d&&null!==a.oldValue?c="updated":d||(c="removed");f(c,i,d?d.value||d.nodeValue:void 0,a.oldValue)})})).observe(c,{attributes:!0,attributeOldValue:!0});for(d=0;d<g;d++)h.push(k[d]);for(d=0;d<g;d++){var n=h[d];f("created",n.nodeName,n.value||n.nodeValue)}a.created&&a.created(c)}}function f(c){for(var i=c.length,d=0;d<i;d++){var b=c[d];if(!(1!==b.nodeType||b.attributes[a])){for(var k=n.getForElement(b),g=k.length,m=0;m<g;m++){var l=b,p=k[m];h(l,p);j(l,p,"attached")||(l.removeAttribute(p.unresolvedAttribute),
l.setAttribute(p.resolvedAttribute,""),p.attached&&p.attached(l))}b=b.childNodes;b.length&&f(b)}}}function d(a){for(var c=a.length,i=0;i<c;i++){var f=a[i];if(1===f.nodeType){d(f.childNodes);for(var b=n.getForElement(f),g=b.length,j=0;j<g;j++){var h=f,m=b[j];m.detached&&m.detached(h);k.set(h,m.id+":lifecycle:attached",!1)}}}}g=function(a){return a&&a.__esModule?a["default"]:a};Object.defineProperty(c,"__esModule",{value:!0});"use strict";var a=b("./constants").ATTR_IGNORE,k=g(b("./data")),p=g(b("./mutation-observer")),
n=g(b("./registry")),b=b("./utils"),m=b.inherit,l=b.objEach,b=window.HTMLElement.prototype,i=b.matches||b.msMatchesSelector||b.webkitMatchesSelector||b.mozMatchesSelector||b.oMatchesSelector;c.triggerCreated=h;c.initElements=f;c.removeElements=d},{"./constants":1,"./data":2,"./mutation-observer":6,"./registry":7,"./utils":9}],6:[function(b,g){function c(a,c){return{addedNodes:null,attributeName:null,attributeNamespace:null,nextSibling:null,oldValue:null,previousSibling:null,removedNodes:null,target:a,
type:c||"childList"}}function j(a,c){var f=a.childNodes;if(f)for(var d=f.length,b=0;b<d;b++){var k=f[b];c(k);j(k,c)}}function h(a){if(n&&!m)return new n(a);this.callback=a;this.elements=[]}var f=b("./utils"),d=f.debounce,a=f.objEach,k=window.HTMLElement.prototype,p=window.HTMLElement.prototype.contains,n=window.MutationObserver||window.WebkitMutationObserver||window.MozMutationObserver,m=!1,l=-1<window.navigator.userAgent.indexOf("Trident");h.fixIe=function(){if(l&&!m){var a=Object.getOwnPropertyDescriptor(k,
"innerHTML");Object.defineProperty(k,"innerHTML",{get:function(){return a.get.call(this)},set:function(c){j(this,function(a){var c=document.createEvent("MutationEvent");c.initMutationEvent("DOMNodeRemoved",!0,!1,null,null,null,null,null);a.dispatchEvent(c)});a.set.call(this,c)}});m=!0}};Object.defineProperty(h,"isFixingIe",{get:function(){return m}});h.prototype={observe:function(a,f){function b(a){h.push(a);n()}var k=this,j,g,h=[],l=[],n=d(function(){for(var b=h.length,d=0;d<b;d++){var n=h[d],r=
n.target;if(r){var n=n.type,q=r.parentNode;if(f.childList&&(f.subtree||q===a)){var s=m&&"DOMNodeRemoved"===n,t=j&&(1!==j.nodeType?!1:j.contains?j.contains(r):p.call(j,r));if(s||!t){if(!g||g.target!==q)l.push(g=c(q));"DOMNodeInserted"===n?(g.addedNodes||(g.addedNodes=[]),g.addedNodes.push(r)):(g.removedNodes||(g.removedNodes=[]),g.removedNodes.push(r));j=r}}}}k.callback(l);h=[];l=[];g=j=void 0}),t={},q=[],u=d(function(){var a=q.length;k.callback(q);q.splice(0,a)}),s={target:a,options:f,insertHandler:b,
removeHandler:b,attributeHandler:function(d){var b=d.target;if(f.attributes&&(f.subtree||b===a)){var k=d.attrName,g=d.prevValue,d=d.newValue,b=c(b,"attributes");b.attributeName=k;f.attributeOldValue&&(b.oldValue=t[k]||g||null);q.push(b);f.attributeOldValue&&(t[k]=d);u()}}};this.elements.push(s);f.childList&&(a.addEventListener("DOMNodeInserted",s.insertHandler),a.addEventListener("DOMNodeRemoved",s.removeHandler));f.attributes&&a.addEventListener("DOMAttrModified",s.attributeHandler);return this},
disconnect:function(){a(this.elements,function(a){a.target.removeEventListener("DOMNodeInserted",a.insertHandler);a.target.removeEventListener("DOMNodeRemoved",a.removeHandler);a.target.removeEventListener("DOMAttrModified",a.attributeHandler)});this.elements=[];return this}};g.exports=h},{"./utils":9}],7:[function(b,g){function c(a,c){return d(j.registry,a)&&-1<j.registry[a].type.indexOf(c)}var j,h=b("./globals");j=h&&h.__esModule?h["default"]:h;var f=b("./constants.js").types,d=b("./utils").hasOwn;
g.exports={clear:function(){j.registry={};return this},getForElement:function(a){var d=a.attributes,b=d.length,g=[],h=d.is,l=h&&(h.value||h.nodeValue),h=a.tagName.toLowerCase(),i=l||h,o;c(i,f.TAG)&&(i=j.registry[i],o=i["extends"],l?h===o&&g.push(i):o||g.push(i));for(l=0;l<b;l++)i=d[l].nodeName,c(i,f.ATTR)&&(i=j.registry[i],o=i["extends"],(!o||h===o)&&g.push(i));(d=a.classList)?a=d:(a=a.attributes,a=a["class"]&&a["class"].nodeValue.split(/\s+/)||[]);d=a.length;for(b=0;b<d;b++)i=a[b],c(i,f.CLASS)&&
(i=j.registry[i],o=i["extends"],(!o||h===o)&&g.push(i));return g},has:function(a){return d(j.registry,a)},set:function(a,c){if(this.has(a))throw Error('A definition of type "'+c.type+'" with the ID of "'+a+'" already exists.');j.registry[a]=c;return this},remove:function(a){this.has(a)&&delete j.registry[a];return this}}},{"./constants.js":1,"./globals":4,"./utils":9}],8:[function(b,g){function c(a,b){b=n(b||{},c.defaults);b.id=a;if(k.has(b.id))throw Error('A definition of type "'+b.type+'" with the ID of "'+
a+'" already exists.');k.set(b.id,b);i();h.register(b.remove);if(-1<b.type.indexOf(m.TAG)){var f=b,g=function(){var a;a=f["extends"];var b=f.id;a?(a=document.createElement(a),a.setAttribute("is",b)):a=document.createElement(b);f.prototype=g.prototype;d(a,f);return a};g.prototype=f.prototype;return g}}var j=function(a){return a&&a.__esModule?a["default"]:a},h=j(b("./document-observer")),f=b("./lifecycle"),d=f.triggerCreated,a=f.initElements,k=j(b("./registry")),p=b("./utils"),f=p.debounce,n=p.inherit,
j=j(b("./version")),m=b("./constants").types,l=!!document.attachEvent,i=f(function(){var b=function(){a(document.getElementsByTagName("html"))},c;c=l?"complete"===document.readyState:"interactive"===document.readyState||"complete"===document.readyState;c?b():l?window.addEventListener("load",b):document.addEventListener("DOMContentLoaded",b)});c.init=function(b){if(b)return"string"===typeof b&&(b=document.querySelectorAll(b)),a("undefined"===typeof b.length?[b]:b),b};c.types=m;c.version=j;c.defaults=
{attributes:void 0,events:void 0,"extends":"",id:"",prototype:{},resolvedAttribute:"resolved",template:void 0,type:m.ANY,unresolvedAttribute:"unresolved"};var o=window.skate;c.noConflict=function(){window.skate=o;return this};window.skate=c;g.exports=c},{"./constants":1,"./document-observer":3,"./lifecycle":5,"./registry":7,"./utils":9,"./version":10}],9:[function(b,g,c){function j(b,c){return Object.prototype.hasOwnProperty.call(b,c)}c.hasOwn=j;c.debounce=function(b){var c=!1;return function(){c||
(c=!0,setTimeout(function(){c=!1;b()},1))}};c.getClosestIgnoredElement=function(b){for(;b&&b!==document&&!(b instanceof DocumentFragment);){if(b.hasAttribute(h))return b;b=b.parentNode}};c.inherit=function(b,c,a){for(var g=Object.getOwnPropertyNames(c),h=g.length,j=0;j<h;j++){var m=g[j];if(a||void 0===b[m]){var l=Object.getOwnPropertyDescriptor(c,m);l.get||l.set||!l.writable||!l.enumerable||!l.configurable?Object.defineProperty(b,m,l):b[m]=c[m]}}return b};c.objEach=function(b,c){for(var a in b)j(b,
a)&&c(b[a],a)};Object.defineProperty(c,"__esModule",{value:!0});"use strict";var h=b("./constants").ATTR_IGNORE},{"./constants":1}],10:[function(b,g){g.exports="0.12.6"},{}]},{},[8]);(function(b){var g=b.skate.noConflict();define("atlassian/libs/skate-0.12.6",[],function(){return g})})(window);;
;
/* module-key = 'jira.webresources:skate', location = '/static/lib/skate/skate.js' */
define("jira/skate",["atlassian/libs/skate-0.12.6"],function(t){function i(i,n){return t(i,n)}return i.type=t.type||{CLASSNAME:t.types.CLASS,ELEMENT:t.types.TAG,ATTRIBUTE:t.types.ATTR},i.init=function(n){return t.init(n),window.skate&&window.skate.init&&window.skate.init!==i.init&&window.skate.init(n),n},i});;
;
/* module-key = 'jira.webresources:skate', location = '/static/lib/skate/skate-generic-path.js' */
define("skate",["jira/skate"],function(e){return e});;
;
/* module-key = 'jira.webresources:feature-flags', location = '/js/featureflags/feature-manager.js' */
define("jira/featureflags/feature-manager",["wrm/data","exports","jira/util/top-same-origin-window"],function(e,t,a){var r=e.claim("jira.webresources:feature-flags.feature-flag-data"),n=r&&r["enabled-feature-keys"]||[],u=r&&r["feature-flag-states"]||{},i=function(e,t){return e.indexOf(t)!==-1},f=function(e){var t;try{t=AJS.Meta.get(e)}catch(e){}if(!t)try{t=a(window).AJS.Meta.get(e)}catch(e){}try{return JSON.parse(t)}catch(e){return null}},l=f("fe-feature-flags")||{},o=function(e){var t="",a=!1;"string"==typeof e||e instanceof String?t=e:null!==e&&"object"==typeof e&&(t=e.key,a=e.fallback);var r=l[t];if(void 0!==r&&"value"in r&&(r=r.value),void 0!==r&&"boolean"==typeof r)return r;var f=u[t];if(f===!0){var o=i(n,t+".disabled");return!o}return f===!1?i(n,t+".enabled"):!!i(n,t)||a},c=function(e){try{var t=l[e];return void 0!==t&&"value"in t?t.value:null}catch(e){return null}},v=function(e){var t="",a=!1;"string"==typeof e||e instanceof String?t=e:null!==e&&"object"==typeof e&&(t=e.key,a=e.fallback);var r=l[t];return void 0!==r&&"value"in r?r:void 0!==r&&"boolean"==typeof r?r:{value:a}};t.getFlagResultObject=function(e){return v(e)},t.getFlagValue=function(e){return c(e)},t.isFeatureEnabled=function(e){return o(e)},t.getStringValue=function(e){return c(e)}});;
;
/* module-key = 'jira.webresources:general-configuration', location = '/includes/jira/general-configuration/Settings.js' */
JIRA.Settings={},JIRA.Settings.ApplicationTitle={get:function(){return AJS.Meta.get("app-title")}};;
;
/* module-key = 'jira.webresources:content-retrievers', location = '/includes/ajs/contentretriever/ContentRetriever.js' */
define("jira/ajs/contentretriever/content-retriever",["jira/lib/class","jquery"],function(e,n){return e.extend({startingRequest:n.noop,finishedRequest:n.noop,cache:n.noop,isLocked:n.noop,content:n.noop})}),AJS.namespace("AJS.ContentRetriever",null,require("jira/ajs/contentretriever/content-retriever"));;
;
/* module-key = 'jira.webresources:content-retrievers', location = '/includes/ajs/contentretriever/AjaxContentRetriever.js' */
define("jira/ajs/contentretriever/ajax-content-retriever",["jira/ajs/contentretriever/content-retriever","jira/ajs/ajax/smart-ajax","jquery"],function(t,e,i){return t.extend({init:function(t){this.ajaxOptions=t,this.ajaxOptions.requestDelay||0===this.ajaxOptions.requestDelay||(this.ajaxOptions.requestDelay=75)},getAjaxOptions:function(){var t,e=this;return t="string"==typeof this.ajaxOptions?{url:this.ajaxOptions}:i.isFunction(this.ajaxOptions)?this.ajaxOptions():this.ajaxOptions,t.globalThrobber=!1,t.success=function(t,i,s){e._requestComplete(s,i,t,!0,null)},t.error=function(t,i){t.rc&&(t.status=t.rc),e._requestComplete(t,i,null,!1,null)},t},content:function(t){return i.isFunction(t)?(this.callback=t,this._makeRequest(t)):t&&this.callback&&(this.callback(t),delete this.callback),this.$content},startingRequest:function(t){t?this.startingCallback=t:this.startingCallback&&(this.locked=!0,this.startingCallback())},finishedRequest:function(t){t?this.finishedCallback=t:this.finishedCallback&&(this.locked=!1,this.finishedCallback())},failedRequest:function(t){t?this.failedCallback=t:this.failedCallback&&(this.locked=!1,this.failedCallback())},cache:function(t){return"undefined"!=typeof t&&(this.getAjaxOptions().cache=t),this.getAjaxOptions().cache},isLocked:function(){return this.locked},_requestComplete:function(t,s,a,n,r){if("abort"===s)return void(this.locked=!1);var o,u,c=this.getAjaxOptions();if(e.SmartAjaxResult&&(u=e.SmartAjaxResult.apply(window,arguments)),n)o=i.isFunction(c.formatSuccess)?c.formatSuccess(a):i("<div>"+a+"</div>");else{if(i.isFunction(c.formatError))o=c.formatError(a);else if(u){var l=401===u.status?"warning":"error";o=i('<div class="aui-message '+l+'"><span class="aui-icon icon-'+l+'"></span>'+e.buildSimpleErrorContent(u)+"</div>")}this.failedRequest()}this.content(o),this.finishedRequest()},_makeRequest:function(){function t(){e.startingRequest(),e.outstandingRequest=i.ajax(e.getAjaxOptions())}var e=this;this.getAjaxOptions();this.outstandingRequest&&(this.outstandingRequest.abort(),this.outstandingRequest=null),clearTimeout(this._queuedRequest),this.isLocked()?this._queuedRequest=setTimeout(function(){e._makeRequest()},this.ajaxOptions.requestDelay):t()}})}),AJS.namespace("AJS.AjaxContentRetriever",null,require("jira/ajs/contentretriever/ajax-content-retriever"));;
;
/* module-key = 'jira.webresources:content-retrievers', location = '/includes/ajs/contentretriever/DOMContentRetriever.js' */
define("jira/ajs/contentretriever/dom-content-retriever",["jira/ajs/contentretriever/content-retriever","jquery"],function(e,t){return e.extend({init:function(e){this.$content=t(e)},content:function(e){return t.isFunction(e)&&e(this.$content),this.$content}})}),AJS.namespace("AJS.DOMContentRetriever",null,require("jira/ajs/contentretriever/dom-content-retriever"));;
;
/* module-key = 'jira.webresources:content-retrievers', location = '/includes/ajs/contentretriever/DeferredContentRetriever.js' */
define("jira/ajs/contentretriever/deferred-content-retriever",["jira/ajs/contentretriever/content-retriever","jquery","underscore"],function(e,n,r){return e.extend({init:function(e){this.func=e},content:function(e){if(n.isFunction(e)){var t=this.func();t instanceof n?e(t):t.done(r.bind(function(n){e(n)},this))}},cache:function(){return!1}})}),AJS.namespace("AJS.DeferredContentRetriever",null,require("jira/ajs/contentretriever/deferred-content-retriever"));;
;
/* module-key = 'jira.webresources:inline-layer', location = '/includes/ajs/layer/InlineLayer.StandardPositioning.js' */
define("jira/ajs/layer/inline-layer/standard-positioning",["jira/lib/class","jquery"],function(t,e){return t.extend({init:function(){this.rebuiltCallbacks=[]},left:function(){var t=this.offset();return{left:t.left,top:t.top+this.offsetTarget().outerHeight()}},right:function(){var t=this.offset();return{left:t.left-this.layer().outerWidth()+this.offsetTarget().outerWidth(),top:t.top+this.offsetTarget().outerHeight()}},window:function(){return window},offset:function(){var t=this.offsetTarget().offset();return this.offsetTarget().hasFixedParent()?(this.layer().css("position","fixed"),t.top=t.top-e(window).scrollTop()):this.layer().css("position","absolute"),t},rebuilt:function(t){var i=this;e.isFunction(t)?this.rebuiltCallbacks.push(t):e.each(this.rebuiltCallbacks,function(){this(i.layer())})},appendToBody:function(){this.layer().appendTo("body")},appendToPlaceholder:function(){this.layer().appendTo(this.$placeholder)},scrollTo:function(){}})});;
;
/* module-key = 'jira.webresources:inline-layer', location = '/includes/ajs/layer/InlineLayer.WindowPositioning.js' */
define("jira/ajs/layer/inline-layer/window-positioning",["jira/ajs/layer/inline-layer/standard-positioning","jquery"],function(t,e){return t.extend({_calculateOverflow:function(t){var i="fixed"===this.layer().css("position"),r=t.top+this.layer().outerHeight(!0),a=e(window).outerHeight(),n=e(window).scrollTop();return i?Math.max(0,r-a):Math.max(0,r-n-a)},left:function(){var t=this._super(),e=this._calculateOverflow(t);return e>0&&(t.left+=this.offsetTarget().outerWidth(),t.top-=e),t},right:function(){var t=this._super(),e=this._calculateOverflow(t);return e>0&&(t.left-=this.offsetTarget().outerWidth(),t.top-=e),t}})});;
;
/* module-key = 'jira.webresources:inline-layer', location = '/includes/ajs/layer/InlineLayer.IframePositioning.js' */
define("jira/ajs/layer/inline-layer/iframe-positioning",["jira/ajs/layer/inline-layer/standard-positioning","jira/util/navigator","jquery","jira/util/top-same-origin-window"],function(e,t,n,o){var i=o(window,!0),r=e.extend({offset:function(){var e=r.window(),t=r.topWindow(),o=n("iframe",t.document.body).filter(function(){return this.getAttribute("name")===e.name}),i=o.parent().offset(),l=this._super(),c=this._topDocumentScrollTop(),u=this._topDocumentScrollLeft(),a=this._iframeScrollTop(),d=this._iframeScrollLeft(),s=c-a,f=u-d;return{left:i.left+l.left+f,top:i.top+l.top+s}},_topDocumentScrollTop:function(){return this.isOffsetIncludingScroll()?0:Math.max(i.document.body.scrollTop,i.document.documentElement.scrollTop)},_topDocumentScrollLeft:function(){return this.isOffsetIncludingScroll()?0:Math.max(i.document.body.scrollLeft,i.document.documentElement.scrollLeft)},_iframeScrollTop:function(){return this.isOffsetIncludingScroll()?2*Math.max(window.document.body.scrollTop,window.document.documentElement.scrollTop):0},_iframeScrollLeft:function(){return this.isOffsetIncludingScroll()?2*Math.max(window.document.body.scrollLeft,window.document.documentElement.scrollLeft):0},isOffsetIncludingScroll:function(e){return"undefined"==typeof this.offsetIncludingScroll&&(this.offsetIncludingScroll=!0),"undefined"!=typeof e&&(this.offsetIncludingScroll=e),this.offsetIncludingScroll},appendToBody:function(){i.jQuery("body").append(this.layer())},window:function(){return i},scrollTo:function(){}});return t.isWebkit()&&(r=r.extend({appendToBody:function(){var e=this.layer();this.layer(this._rebuildLayerInParent()),i.jQuery("body").append(this.layer()),e.remove(),this.rebuilt()},appendToPlaceholder:function(){var e=this.layer();this.layer(this._rebuildLayerInIframe()),this.layer().appendTo(this.placeholder()),e.remove(),this.rebuilt()},_rebuildLayerInParent:function(){return i.jQuery("<div class='ajs-layer'>"+this.layer().html()+"</div>")},_rebuildLayerInIframe:function(){return n("<div class='ajs-layer'>"+this.layer().html()+"</div>")}})),t.isMozilla()&&(r=r.extend({appendToPlaceholder:function(){var e=this.layer();this.layer(e.clone(!0).appendTo(this.placeholder())),this.rebuilt(),window.setTimeout(function(){e.remove()},10)}})),r.window=function(){return window},r.topWindow=function(){return i},r});;
;
/* module-key = 'jira.webresources:inline-layer', location = '/includes/ajs/layer/InlineLayer.OptionsDescriptor.js' */
define("jira/ajs/layer/inline-layer/options-descriptor",["jira/ajs/layer/layer-constants","jira/ajs/descriptor","jira/ajs/contentretriever/ajax-content-retriever","jira/ajs/contentretriever/deferred-content-retriever","jira/ajs/contentretriever/dom-content-retriever","jira/ajs/layer/inline-layer/iframe-positioning","jira/ajs/layer/inline-layer/window-positioning","jira/ajs/layer/inline-layer/standard-positioning","aui/params","jquery"],function(t,e,i,r,n,o,s,p,a,h){return e.extend({init:function(t){if(this._super(t),!this.contentRetriever())if(this.ajaxOptions())this.contentRetriever(new i(this.ajaxOptions()));else if(h.isFunction(this.content()))this.contentRetriever(new r(this.content()));else{if(!this.content())throw new Error("InlineLayer.OptionsDescriptor: Expected either [ajaxOptions] or [contentRetriever] or [content] to be defined");this.contentRetriever(new n(this.content()))}if(!this.positioningController())if(!a.ignoreFrame&&this._inIFrame())this.positioningController(new o);else{var e=h("body"),c="hidden"===e.css("overflow")||"hidden"===e.css("overflowY");c?this.positioningController(new s):this.positioningController(new p)}!this.offsetTarget()&&this.content()instanceof h&&this.offsetTarget(this.content().prev())},_inIFrame:function(){var t=window;try{for(;t.parent.window!==t.window;)if(t=t.parent,t.AJS)return!0}catch(t){}return!1},_getDefaultOptions:function(){return{alignment:t.INTELLIGENT_GUESS,hideOnScroll:".form-body",cushion:20,width:200}},positioningController:function(t){return t?void(this.properties.positioningController=t):this.properties.positioningController},ajaxOptions:function(t){return t?void(this.properties.ajaxOptions=t):this.properties.ajaxOptions},content:function(t){if(t)t=h(t),t.length&&(this.properties.content=t);else if(this.properties.content&&(this.properties.content.length||h.isFunction(this.properties.content)))return this.properties.content},contentRetriever:function(t){return t?void(this.properties.contentRetriever=t):this.properties.contentRetriever},offsetTarget:function(t){if(t)t=h(t),t.length&&(this.properties.offsetTarget=t);else if(this.properties.offsetTarget&&(this.properties.offsetTarget.length||h.isFunction(this.properties.offsetTarget)))return this.properties.offsetTarget},cushion:function(t){return t?void(this.properties.cushion=t):this.properties.cushion},styleClass:function(t){return t?void(this.properties.styleClass=t):this.properties.styleClass},hideOnScroll:function(t){return t?void(this.properties.hideOnScroll=t):this.properties.hideOnScroll},alignment:function(t){return t?void(this.properties.alignment=t):this.properties.alignment},width:function(t){return t?void(this.properties.width=t):h.isFunction(this.properties.width)?this.properties.width.call(this):this.properties.width},allowDownsize:function(t){return t?void(this.properties.allowDownsize=t):this.properties.allowDownsize},customEvents:function(t){return t?void(this.properties.customEvents=t):this.properties.customEvents}})});;
;
/* module-key = 'jira.webresources:inline-layer', location = '/includes/ajs/layer/InlineLayer.js' */
define("jira/ajs/layer/inline-layer",["jira/ajs/layer/layer-constants","jira/ajs/control","jira/ajs/layer/hide-reasons","jira/ajs/layer/inline-layer/options-descriptor","jira/ajs/contentretriever/content-retriever","jira/util/events","jquery"],function(t,i,e,s,n,r,o){var h=i.extend({CLASS_SIGNATURE:"AJS_InlineLayer",SCROLL_HIDE_EVENT:"scroll.hide-dropdown",init:function(t){var i=this;if(t instanceof s?this.options=t:this.options=new s(t),this.offsetTarget(this.options.offsetTarget()),this.contentRetriever=this.options.contentRetriever(),o.extend(this,this.options.positioningController()),!(this.contentRetriever instanceof n))throw new Error("InlineLayer: Failed construction, Content retriever does not implement interface [AJS.ContentRetrieverInterface]");this.contentRetriever.startingRequest(function(){i._showLoading()}),this.contentRetriever.finishedRequest(function(){i._hideLoading()}),this.contentRetriever.failedRequest&&this.contentRetriever.failedRequest(function(){i.onerror()}),this.$layer=this._render("layer",this.options.alignment())},content:function(t){var i=this;return o.isFunction(t)?void this.contentRetriever.content(function(e){i.$content=e.removeClass("hidden"),t.call(i)}):this.$content},offsetTarget:function(){var t=this.options.offsetTarget();return o.isFunction(t)&&(t=t()),t},contentChange:function(t){var i=this;o.isFunction(t)?(this.contentChangeCallback||(this.contentChangeCallback=[]),this.contentChangeCallback.push(t)):t||(this.trigger("contentChanged",[this]),this.setWidth(this.options.width()),this.setPosition(),this.contentChangeCallback&&o.each(this.contentChangeCallback,function(t,e){e(i)}))},onhide:function(t){var i=this;o.isFunction(t)?(this.hideCallback||(this.hideCallback=[]),this.hideCallback.push(t)):!t&&this.hideCallback&&o.each(this.hideCallback,function(t,e){e(i)})},onerror:function(t){var i=this;o.isFunction(t)?(this.errorCallback||(this.errorCallback=[]),this.errorCallback.push(t)):!t&&this.errorCallback&&o.each(this.errorCallback,function(t,e){e(i)})},layer:function(t){return t?void(this.$layer=t):this.$layer},placeholder:function(t){return t?void this._throwReadOnlyError("placeholder"):this.$placeholder},isVisible:function(t){return"undefined"!=typeof t&&this._throwReadOnlyError("visible"),this.visible},scrollableContainer:function(t){return t&&this._throwReadOnlyError("scrollableContainer"),this.$scrollableContainer},isInitialized:function(t){return t&&this._throwReadOnlyError("initialized"),this.initialized},hide:function(t,i){var e,s=i&&i.target;if(!this.isVisible())return!1;if(e=o.Event(h.EVENTS.beforeHide),this.trigger(e,[this.layer(),t,this.options.id,s]),r.trigger(e,[this.layer(),t,this.options.id,s]),!e.isDefaultPrevented()){this.visible=!1,this._makeInactiveAndHideLayer();var n=this;setTimeout(function(){n.appendToPlaceholder()},0),this.layer().attr("aria-hidden","true"),this._unbindEvents(),this.onhide(),this.trigger("hideLayer",[this]),o(document).trigger("hideLayer",[this.CLASS_SIGNATURE,this]),this.trigger(h.EVENTS.hide,[this.layer(),t,this.options.id]),r.trigger(h.EVENTS.hide,[this.layer(),t,this.options.id]),h.current=null}},_makeInactiveAndHideLayer:function(){this.layer().removeClass(t.ACTIVE_CLASS).hide(),this.offsetTarget().removeClass(t.ACTIVE_CLASS)},refreshContent:function(t){var i=this;this.content(function(){0===this.layer().has(this.content()).length&&this.layer().html(this.content()),o.isFunction(t)&&t.call(i),this.contentChange()})},show:function(){var t,i=this;this.isVisible()||(t=o.Event(h.EVENTS.beforeShow),this.trigger(t,[this.layer(),this.options.id]),r.trigger(t,[this.layer(),this.options.id]),t.isDefaultPrevented()||(this.isInitialized()?this.contentRetriever.cache()===!1?this.refreshContent(function(){i._showContent()}):i._showContent():this._lazyInit(function(){i._showContent()})))},_showContent:function(){this.offsetTarget().is(":visible")?this._show():this._makeInactiveAndHideLayer()},toggle:function(t){null==t&&(t=!this.isVisible()),t?this.show():this.hide(e.toggle)},setPosition:function(){var i,e=o(window);if(this.isInitialized()&&this.offsetTarget()&&0!==this.offsetTarget().length){var s=this.offsetTarget().get(0).getBoundingClientRect(),n=this.layer().width(),r=s.right+n<e.width(),h=s.left-n>0;if(this.options.alignment()===t.RIGHT?i=h||!r?this.right():this.left():this.options.alignment()===t.LEFT?i=r||!h?this.left():this.right():this.options.alignment()===t.INTELLIGENT_GUESS&&(i=s.left+s.width/2>e.width()/2?this.right():this.left()),this.trigger("setLayerPosition",[i,this]),this.options.properties.setMaxHeightToWindow||this.options.properties.setMaxHeightToWindow!==!1&&o(".aui-blanket").is(":visible")){var a=e.scrollLeft();a>0&&(i.left-=a);var l,c=this.fixedParent();l=c.size()?0:e.scrollTop(),i.maxHeight=e.height()-i.top+l-this.options.cushion()}i.minHeight=this.options.properties.minHeight,this.layer().css(i)}},setOverflowAndHeight:function(){this.options.properties.maxInlineResultsDisplayed&&this.layer().addClass("limited")},fixedParent:function(){return this.offsetTarget().parents().filter(function(){return"fixed"===o(this).css("position")})},setWidth:function(t){this.layer().width(t)},_lazyInit:function(i){this.initializing||(this.initializing=!0,this.refreshContent(function(){var e=this;this.initializing=!1,this.initialized=!0,this.layer().insertAfter(this.offsetTarget()),this._supportsBoxShadow()&&this.layer().addClass(t.BOX_SHADOW_CLASS),this.$placeholder=o("<div class='ajs-layer-placeholder' />").insertAfter(this.offsetTarget()),this.$scrollableContainer=this.offsetTarget().closest(this.options.hideOnScroll()),this.rebuilt(function(t){e.layer(t)}),i()}))},_show:function(){h.current&&h.current.hide(),this.visible=!0,this.content().show(),this.appendToBody(),this.layer().addClass(t.ACTIVE_CLASS),this.offsetTarget().addClass(t.ACTIVE_CLASS),this.layer().show(),this.layer().attr("aria-hidden","false"),this.setWidth(this.options.width()),this.setPosition(),this.setOverflowAndHeight(),this._bindEvents(),AJS.dim.dim||this.scrollTo(),h.current=this,this.trigger("showLayer",[this]),o(document).trigger("showLayer",[this.CLASS_SIGNATURE,this]),this.trigger(h.EVENTS.show,[this.layer(),this.options.id]),r.trigger(h.EVENTS.show,[this.layer(),this.options.id])},_hideLoading:function(){this.$layer.removeClass(t.LOADING_CLASS),this.offsetTarget().removeClass(t.LOADING_CLASS)},_showLoading:function(){this.$layer.addClass(t.LOADING_CLASS),this.offsetTarget().addClass(t.LOADING_CLASS)},_unbindEvents:function(){this.$scrollableContainer.unbind(this.SCROLL_HIDE_EVENT),this._unassignCustomEvents(),this._unassignEvents("container",document),this._unassignEvents("win",window)},_bindEvents:function(){var t=this;this.$scrollableContainer.one(this.SCROLL_HIDE_EVENT,function(){t.hide()}),this._assignCustomEvents(),this._assignEvents("container",document),this._assignEvents("win",window)},_assignCustomEvents:function(){var t=this.options.customEvents();if(t){this._unassignCustomEvents();for(var i in t)for(var e in t[i])o(i).on(e,this._getCustomEventsDispatcher(i,e,t))}},_unassignCustomEvents:function(){var t=this.options.customEvents();if(t)for(var i in t)for(var e in t[i])o(i).off(e,this._getCustomEventsDispatcher(i,e,t))},_getCustomEventsDispatcher:function(t,i,e){var s="custom",n=s+"/"+t+"/"+i;if(this._dispatchers||(this._dispatchers={}),!this._dispatchers[n]){var r=this,h=e[t][i];this._dispatchers[n]=function(t){return h.call(r,t,o(this))}}return this._dispatchers[n]},_validateClickToClose:function(t){return t.target!==this.offsetTarget()[0]&&(t.target!==this.layer()[0]&&(!(this.offsetTarget().has(t.target).length>0)&&!(this.layer().has(t.target).length>0)))},keys:{Esc:function(t){this.hide(e.escPressed,t)}},_events:{container:{"aui:keydown":function(t){this._handleKeyEvent(t)},click:function(t){this._validateClickToClose(t)&&this.hide(e.clickOutside,t)}},win:{resize:function(){this.setPosition()},scroll:function(){this.setPosition()}}},_renders:{layer:function(){return o("<div />").addClass("ajs-layer").addClass(this.options.styleClass())}}});return h.EVENTS={beforeHide:"InlineLayer.beforeHide",hide:"InlineLayer.hide",beforeShow:"InlineLayer.beforeShow",show:"InlineLayer.show"},h});;
;
/* module-key = 'jira.webresources:inline-layer', location = '/includes/ajs/layer/InlineLayer.create.js' */
define("jira/ajs/layer/inline-layer-factory",["jira/ajs/layer/inline-layer","jira/util/objects","jquery","exports"],function(n,e,t,r){r.createInlineLayers=function(r){var a=[];return r.content&&(r.content=t(r.content),t.each(r.content,function(){var c=e.copyObject(r);c.content=t(this),a.push(new n(c))})),1===a.length?a[0]:a}});;
;
/* module-key = 'jira.webresources:inline-layer', location = '/includes/ajs/layer/initInlineLayer.js' */
AJS.namespace("AJS.InlineLayer",null,require("jira/ajs/layer/inline-layer")),AJS.namespace("AJS.InlineLayer.create",null,require("jira/ajs/layer/inline-layer-factory").createInlineLayers),AJS.namespace("AJS.InlineLayer.OptionsDescriptor",null,require("jira/ajs/layer/inline-layer/options-descriptor")),AJS.namespace("AJS.InlineLayer.StandardPositioning",null,require("jira/ajs/layer/inline-layer/standard-positioning")),AJS.namespace("AJS.InlineLayer.WindowPositioning",null,require("jira/ajs/layer/inline-layer/window-positioning")),AJS.namespace("AJS.InlineLayer.IframePositioning",null,require("jira/ajs/layer/inline-layer/iframe-positioning")),JIRA.bind(AJS.InlineLayer.EVENTS.beforeHide,function(e){"undefined"!=typeof Calendar&&Calendar.current&&e.preventDefault()});;
;
/* module-key = 'com.atlassian.auiplugin:aui-experimental-soy-templates', location = 'src/soy/aui.soy' */
// This file was automatically generated from aui.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.
 */

if (typeof aui == 'undefined') { var aui = {}; }


aui.renderExtraAttributes = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = '';
  if (opt_data.extraAttributes) {
    if (Object.prototype.toString.call(opt_data.extraAttributes) === '[object Object]') {
      var attrList7 = soy.$$getMapKeys(opt_data.extraAttributes);
      var attrListLen7 = attrList7.length;
      for (var attrIndex7 = 0; attrIndex7 < attrListLen7; attrIndex7++) {
        var attrData7 = attrList7[attrIndex7];
        output += ' ' + soy.$$escapeHtml(attrData7) + '="' + soy.$$escapeHtml(opt_data.extraAttributes[attrData7]) + '"';
      }
    } else {
      output += ' ' + soy.$$filterNoAutoescape(opt_data.extraAttributes);
    }
  }
  return output;
};
if (goog.DEBUG) {
  aui.renderExtraAttributes.soyTemplateName = 'aui.renderExtraAttributes';
}


aui.renderExtraClasses = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = '';
  if (opt_data.extraClasses) {
    if ((opt_data.extraClasses) instanceof Array) {
      var classList23 = opt_data.extraClasses;
      var classListLen23 = classList23.length;
      for (var classIndex23 = 0; classIndex23 < classListLen23; classIndex23++) {
        var classData23 = classList23[classIndex23];
        output += ' ' + soy.$$escapeHtml(classData23);
      }
    } else {
      output += ' ' + soy.$$escapeHtml(opt_data.extraClasses);
    }
  }
  return output;
};
if (goog.DEBUG) {
  aui.renderExtraClasses.soyTemplateName = 'aui.renderExtraClasses';
}
;
;
/* module-key = 'com.atlassian.auiplugin:aui-experimental-soy-templates', location = 'src/soy/badges.soy' */
// This file was automatically generated from badges.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.badges.
 */

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.badges == 'undefined') { aui.badges = {}; }


aui.badges.badge = function(opt_data, opt_ignored) {
  return '<' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'span') + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-badge' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + soy.$$escapeHtml(opt_data.text) + '</' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'span') + '>';
};
if (goog.DEBUG) {
  aui.badges.badge.soyTemplateName = 'aui.badges.badge';
}
;
;
/* module-key = 'com.atlassian.auiplugin:aui-experimental-soy-templates', location = 'src/soy/buttons.soy' */
// This file was automatically generated from buttons.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.buttons.
 */

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.buttons == 'undefined') { aui.buttons = {}; }


aui.buttons.button = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.href || opt_data.href == '') {
    output += '<a href="' + soy.$$escapeHtml(opt_data.href) + '"' + aui.buttons.buttonAttributes(soy.$$augmentMap(opt_data, {tagName: 'a'})) + '>' + aui.buttons.buttonIcon(opt_data) + ((opt_data.hasLabel) ? '<span class="aui-button-label">' : '') + soy.$$escapeHtml(opt_data.text) + ((opt_data.hasLabel) ? '</span>' : '') + '</a>';
  } else if (opt_data.tagName == 'input') {
    output += '<input type="' + soy.$$escapeHtml(opt_data.inputType ? opt_data.inputType : 'button') + '" ' + aui.buttons.buttonAttributes(opt_data) + ' value="' + soy.$$escapeHtml(opt_data.text) + '" />';
  } else {
    var theTagName__soy29 = opt_data.tagName ? opt_data.tagName : 'button';
    output += '<' + soy.$$escapeHtml(theTagName__soy29) + aui.buttons.buttonAttributes(soy.$$augmentMap(opt_data, {tagName: theTagName__soy29})) + '>' + aui.buttons.buttonIcon(opt_data) + ((opt_data.hasLabel) ? '<span class="aui-button-label">' : '') + soy.$$escapeHtml(opt_data.text) + ((opt_data.hasLabel) ? '</span>' : '') + '</' + soy.$$escapeHtml(theTagName__soy29) + '>';
  }
  return output;
};
if (goog.DEBUG) {
  aui.buttons.button.soyTemplateName = 'aui.buttons.button';
}


aui.buttons.buttons = function(opt_data, opt_ignored) {
  return '<div' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-buttons' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</div>';
};
if (goog.DEBUG) {
  aui.buttons.buttons.soyTemplateName = 'aui.buttons.buttons';
}


aui.buttons.buttonAttributes = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-button' + ((opt_data.splitButtonType == 'main') ? ' aui-button-split-main' : '') + ((opt_data.dropdown2Target) ? ' aui-dropdown2-trigger' + ((opt_data.splitButtonType == 'more') ? ' aui-button-split-more' : '') : '');
  switch (opt_data.type) {
    case 'primary':
      output += ' aui-button-primary';
      break;
    case 'link':
      output += ' aui-button-link';
      break;
    case 'subtle':
      output += ' aui-button-subtle';
      break;
    case 'text':
      output += ' aui-button-text';
      break;
  }
  output += aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + ((opt_data.isPressed) ? ' aria-pressed="' + soy.$$escapeHtml(opt_data.isPressed) + '"' : '') + ((opt_data.isDisabled) ? ' aria-disabled="' + soy.$$escapeHtml(opt_data.isDisabled) + '"' + ((opt_data.isDisabled == true) ? (opt_data.tagName == 'button' || opt_data.tagName == 'input') ? ' disabled="disabled" ' : '' : '') : '') + ((opt_data.dropdown2Target) ? ' aria-owns="' + soy.$$escapeHtml(opt_data.dropdown2Target) + '" aria-haspopup="true"' : '') + ((opt_data.tagName == 'a') ? ' tabindex="0"' : '');
  return output;
};
if (goog.DEBUG) {
  aui.buttons.buttonAttributes.soyTemplateName = 'aui.buttons.buttonAttributes';
}


aui.buttons.buttonIcon = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + ((opt_data.iconType) ? '<span class="' + ((opt_data.iconType == 'aui') ? 'aui-icon' : '') + ((opt_data.iconClass) ? ' ' + soy.$$escapeHtml(opt_data.iconClass) : '') + '">' + ((opt_data.iconText) ? soy.$$escapeHtml(opt_data.iconText) + ' ' : '') + '</span>' : '');
};
if (goog.DEBUG) {
  aui.buttons.buttonIcon.soyTemplateName = 'aui.buttons.buttonIcon';
}


aui.buttons.splitButton = function(opt_data, opt_ignored) {
  return '' + aui.buttons.button(soy.$$augmentMap(opt_data.splitButtonMain, {splitButtonType: 'main'})) + aui.buttons.button(soy.$$augmentMap(opt_data.splitButtonMore, {splitButtonType: 'more'}));
};
if (goog.DEBUG) {
  aui.buttons.splitButton.soyTemplateName = 'aui.buttons.splitButton';
}
;
;
/* module-key = 'com.atlassian.auiplugin:aui-experimental-soy-templates', location = 'src/soy/dropdown.soy' */
// This file was automatically generated from dropdown.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.dropdown.
 */

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.dropdown == 'undefined') { aui.dropdown = {}; }


aui.dropdown.trigger = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<a' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-dd-trigger' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '><span class="dropdown-text">' + ((opt_data.accessibilityText) ? soy.$$escapeHtml(opt_data.accessibilityText) : '') + '</span>' + ((! (opt_data.showIcon == false)) ? '<span class="icon icon-dropdown"></span>' : '') + '</a>';
};
if (goog.DEBUG) {
  aui.dropdown.trigger.soyTemplateName = 'aui.dropdown.trigger';
}


aui.dropdown.menu = function(opt_data, opt_ignored) {
  return '<' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'ul') + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-dropdown hidden' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'ul') + '>';
};
if (goog.DEBUG) {
  aui.dropdown.menu.soyTemplateName = 'aui.dropdown.menu';
}


aui.dropdown.parent = function(opt_data, opt_ignored) {
  return '<' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'div') + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-dd-parent' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'div') + '>';
};
if (goog.DEBUG) {
  aui.dropdown.parent.soyTemplateName = 'aui.dropdown.parent';
}


aui.dropdown.item = function(opt_data, opt_ignored) {
  return '<' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'li') + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="dropdown-item' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '><a href="' + soy.$$escapeHtml(opt_data.url ? opt_data.url : '#') + '">' + soy.$$escapeHtml(opt_data.text) + '</a></' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'li') + '>';
};
if (goog.DEBUG) {
  aui.dropdown.item.soyTemplateName = 'aui.dropdown.item';
}
;
;
/* module-key = 'com.atlassian.auiplugin:aui-experimental-soy-templates', location = 'src/soy/dropdown2.soy' */
// This file was automatically generated from dropdown2.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.dropdown2.
 */

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.dropdown2 == 'undefined') { aui.dropdown2 = {}; }


aui.dropdown2.dropdown2 = function(opt_data, opt_ignored) {
  return '' + aui.dropdown2.trigger(soy.$$augmentMap(opt_data.trigger, {menu: opt_data.menu})) + aui.dropdown2.contents(opt_data.menu);
};
if (goog.DEBUG) {
  aui.dropdown2.dropdown2.soyTemplateName = 'aui.dropdown2.dropdown2';
}


aui.dropdown2.trigger = function(opt_data, opt_ignored) {
  return '' + aui.trigger.trigger(soy.$$augmentMap(opt_data, {extraClasses: 'aui-dropdown2-trigger' + aui.renderExtraClasses(opt_data)}));
};
if (goog.DEBUG) {
  aui.dropdown2.trigger.soyTemplateName = 'aui.dropdown2.trigger';
}


aui.dropdown2.contents = function(opt_data, opt_ignored) {
  return '<div id="' + soy.$$escapeHtml(opt_data.id) + '" class="aui-dropdown2' + aui.renderExtraClasses(opt_data) + '" role="menu" aria-hidden="true"' + aui.renderExtraAttributes(opt_data) + '><div role="application">' + ((opt_data.content) ? soy.$$filterNoAutoescape(opt_data.content) : '') + '</div></div>';
};
if (goog.DEBUG) {
  aui.dropdown2.contents.soyTemplateName = 'aui.dropdown2.contents';
}


aui.dropdown2.section = function(opt_data, opt_ignored) {
  return '<div' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-dropdown2-section' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + ((opt_data.label) ? '<strong role="presentation" class="aui-dropdown2-heading">' + soy.$$escapeHtml(opt_data.label) + '</strong>' : '') + soy.$$filterNoAutoescape(opt_data.content) + '</div>';
};
if (goog.DEBUG) {
  aui.dropdown2.section.soyTemplateName = 'aui.dropdown2.section';
}


aui.dropdown2.itemGroup = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div ' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' role="presentation" class="aui-dropdown2-section' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + ((opt_data.label) ? '<strong role="presentation" class="aui-dropdown2-heading">' + soy.$$escapeHtml(opt_data.label) + '</strong>' : '') + '<div role="group"' + ((opt_data.label) ? ' aria-label="' + soy.$$escapeHtml(opt_data.label) + '"' : '') + '>' + aui.dropdown2.itemList(opt_data) + '</div></div>';
};
if (goog.DEBUG) {
  aui.dropdown2.itemGroup.soyTemplateName = 'aui.dropdown2.itemGroup';
}


aui.dropdown2.itemList = function(opt_data, opt_ignored) {
  var output = '<ul' + ((opt_data.isTruncated) ? ' class="aui-list-truncate"' : '') + ' role="presentation">';
  var itemList76 = opt_data.items;
  var itemListLen76 = itemList76.length;
  for (var itemIndex76 = 0; itemIndex76 < itemListLen76; itemIndex76++) {
    var itemData76 = itemList76[itemIndex76];
    output += '<li ' + ((itemData76.isHidden) ? 'class="aui-dropdown2-hidden" aria-hidden="true"' : '') + ' role="presentation">';
    switch (itemData76.itemType) {
      case 'checkbox':
        output += aui.dropdown2.menuCheckbox(itemData76);
        break;
      case 'radio':
        output += aui.dropdown2.menuRadio(itemData76);
        break;
      default:
        output += aui.dropdown2.menuLink(itemData76);
    }
    output += '</li>';
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  aui.dropdown2.itemList.soyTemplateName = 'aui.dropdown2.itemList';
}


aui.dropdown2.menuLink = function(opt_data, opt_ignored) {
  return '<a role="menuitem" tabindex="-1" class="' + aui.renderExtraClasses(opt_data) + ((opt_data.submenuTarget) ? ' aui-dropdown2-sub-trigger' : '') + ((opt_data.isDisabled) ? ' aui-dropdown2-disabled' : '') + '"' + ((opt_data.href) ? ' href="' + soy.$$escapeHtml(opt_data.href) + '"' : '') + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ((opt_data.isDisabled) ? ' aria-disabled="' + soy.$$escapeHtml(opt_data.isDisabled) + '"' : '') + ((opt_data.submenuTarget) ? ' aria-controls="' + soy.$$escapeHtml(opt_data.submenuTarget) + '"' : '') + aui.renderExtraAttributes(opt_data) + '>' + soy.$$escapeHtml(opt_data.text) + '</a>';
};
if (goog.DEBUG) {
  aui.dropdown2.menuLink.soyTemplateName = 'aui.dropdown2.menuLink';
}


aui.dropdown2.menuCheckbox = function(opt_data, opt_ignored) {
  return '<span role="menuitemcheckbox" tabindex="-1" class="aui-dropdown2-checkbox' + ((opt_data.isInteractive) ? ' aui-dropdown2-interactive' : '') + ((opt_data.isDisabled) ? ' aui-dropdown2-disabled' : '') + ((opt_data.isChecked) ? ' aui-dropdown2-checked' : '') + aui.renderExtraClasses(opt_data) + '"' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ((opt_data.isChecked) ? ' aria-checked="' + soy.$$escapeHtml(opt_data.isChecked) + '"' : ' aria-checked="false"') + ((opt_data.isDisabled) ? ' aria-disabled="' + soy.$$escapeHtml(opt_data.isDisabled) + '"' : '') + aui.renderExtraAttributes(opt_data) + '>' + soy.$$escapeHtml(opt_data.text) + '</span>';
};
if (goog.DEBUG) {
  aui.dropdown2.menuCheckbox.soyTemplateName = 'aui.dropdown2.menuCheckbox';
}


aui.dropdown2.menuRadio = function(opt_data, opt_ignored) {
  return '<span role="menuitemradio" tabindex="-1" class="aui-dropdown2-radio' + ((opt_data.isInteractive) ? ' aui-dropdown2-interactive' : '') + ((opt_data.isDisabled) ? ' aui-dropdown2-disabled' : '') + ((opt_data.isChecked) ? ' aui-dropdown2-checked' : '') + aui.renderExtraClasses(opt_data) + '"' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ((opt_data.isChecked) ? ' aria-checked="' + soy.$$escapeHtml(opt_data.isChecked) + '"' : ' aria-checked="false"') + ((opt_data.isDisabled) ? ' aria-disabled="' + soy.$$escapeHtml(opt_data.isDisabled) + '"' : '') + aui.renderExtraAttributes(opt_data) + '>' + soy.$$escapeHtml(opt_data.text) + '</span>';
};
if (goog.DEBUG) {
  aui.dropdown2.menuRadio.soyTemplateName = 'aui.dropdown2.menuRadio';
}
;
;
/* module-key = 'com.atlassian.auiplugin:aui-experimental-soy-templates', location = 'src/soy/form.soy' */
// This file was automatically generated from form.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.form.
 */

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.form == 'undefined') { aui.form = {}; }


aui.form.form = function(opt_data, opt_ignored) {
  return '<form' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui' + ((opt_data.isUnsectioned) ? ' unsectioned' : '') + ((opt_data.isLongLabels) ? ' long-label' : '') + ((opt_data.isTopLabels) ? ' top-label' : '') + aui.renderExtraClasses(opt_data) + '" action="' + soy.$$escapeHtml(opt_data.action) + '" method="' + soy.$$escapeHtml(opt_data.method ? opt_data.method : 'post') + '"' + ((opt_data.enctype) ? ' enctype="' + soy.$$escapeHtml(opt_data.enctype) + '"' : '') + aui.renderExtraAttributes(opt_data) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</form>';
};
if (goog.DEBUG) {
  aui.form.form.soyTemplateName = 'aui.form.form';
}


aui.form.formDescription = function(opt_data, opt_ignored) {
  return '<div' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="field-group' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</div>';
};
if (goog.DEBUG) {
  aui.form.formDescription.soyTemplateName = 'aui.form.formDescription';
}


aui.form.fieldset = function(opt_data, opt_ignored) {
  var output = '';
  var hasClass__soy51 = opt_data.isInline || opt_data.isDateSelect || opt_data.isGroup || opt_data.extraClasses;
  output += '<fieldset' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ((hasClass__soy51) ? ' class="' + soy.$$escapeHtml(opt_data.isInline ? 'inline' : opt_data.isDateSelect ? 'date-select' : opt_data.isGroup ? 'group' : '') + aui.renderExtraClasses(opt_data) + '"' : '') + aui.renderExtraAttributes(opt_data) + '><legend><span>' + soy.$$filterNoAutoescape(opt_data.legendContent) + '</span></legend>' + soy.$$filterNoAutoescape(opt_data.content) + '</fieldset>';
  return output;
};
if (goog.DEBUG) {
  aui.form.fieldset.soyTemplateName = 'aui.form.fieldset';
}


aui.form.fieldGroup = function(opt_data, opt_ignored) {
  return '<div' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="field-group' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</div>';
};
if (goog.DEBUG) {
  aui.form.fieldGroup.soyTemplateName = 'aui.form.fieldGroup';
}


aui.form.buttons = function(opt_data, opt_ignored) {
  return '<div class="buttons-container' + ((opt_data.alignment) ? ' ' + soy.$$escapeHtml(opt_data.alignment) : '') + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '><div class="buttons">' + soy.$$filterNoAutoescape(opt_data.content) + '</div></div>';
};
if (goog.DEBUG) {
  aui.form.buttons.soyTemplateName = 'aui.form.buttons';
}


aui.form.label = function(opt_data, opt_ignored) {
  return '<label' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ((opt_data.forField) ? ' for="' + soy.$$escapeHtml(opt_data.forField) + '"' : '') + ((opt_data.extraClasses) ? ' class="' + aui.renderExtraClasses(opt_data) + '"' : '') + aui.renderExtraAttributes(opt_data) + '>' + soy.$$filterNoAutoescape(opt_data.content) + ((opt_data.isRequired) ? '<span class="aui-icon icon-required"></span>' : '') + '</label>';
};
if (goog.DEBUG) {
  aui.form.label.soyTemplateName = 'aui.form.label';
}


aui.form.input = function(opt_data, opt_ignored) {
  var output = '';
  var baseType__soy126 = '';
  switch (opt_data.type) {
    case 'password':
    case 'email':
    case 'url':
    case 'tel':
    case 'search':
      baseType__soy126 += 'text';
      break;
    case 'submit':
    case 'reset':
      baseType__soy126 += 'button';
      break;
    default:
      baseType__soy126 += soy.$$escapeHtml(opt_data.type);
  }
  output += '<input class="' + soy.$$escapeHtml(baseType__soy126) + aui.renderExtraClasses(opt_data) + ((opt_data.icon && baseType__soy126 == 'text') ? ' aui-field-has-icon' : '') + '" type="' + soy.$$escapeHtml(opt_data.type) + '" name="' + ((opt_data.name) ? soy.$$escapeHtml(opt_data.name) : soy.$$escapeHtml(opt_data.id)) + '"' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ((opt_data.value) ? ' value="' + soy.$$escapeHtml(opt_data.value) + '"' : '') + (((opt_data.type == 'checkbox' || opt_data.type == 'radio') && opt_data.isChecked) ? ' checked="checked"' : '') + ((baseType__soy126 == 'text' && opt_data.type != 'password' && opt_data.maxLength) ? ' maxlength="' + soy.$$escapeHtml(opt_data.maxLength) + '"' : '') + ((baseType__soy126 == 'text' && opt_data.type != 'password' && opt_data.size) ? ' size="' + soy.$$escapeHtml(opt_data.size) + '"' : '') + ((baseType__soy126 == 'text' && opt_data.placeholderText) ? ' placeholder="' + soy.$$escapeHtml(opt_data.placeholderText) + '"' : '') + ((baseType__soy126 == 'text' && opt_data.autocomplete) ? ' autocomplete="' + soy.$$escapeHtml(opt_data.autocomplete) + '"' : '') + ((opt_data.isDisabled) ? ' disabled' : '') + ((opt_data.isAutofocus) ? ' autofocus' : '') + aui.renderExtraAttributes(opt_data) + aui.form.renderValidationArguments(opt_data) + aui.form.renderInfoMessage(opt_data) + aui.form.renderFieldComponentAttribute(opt_data) + aui.form.renderTooltipArguments(opt_data) + '/>' + ((opt_data.icon && baseType__soy126 == 'text') ? aui.icons.icon({icon: opt_data.icon, useIconFont: true, size: 'small'}) : '');
  return output;
};
if (goog.DEBUG) {
  aui.form.input.soyTemplateName = 'aui.form.input';
}


aui.form.renderValidationArguments = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = '';
  if (opt_data.validationArguments) {
    var argumentList203 = soy.$$getMapKeys(opt_data.validationArguments);
    var argumentListLen203 = argumentList203.length;
    for (var argumentIndex203 = 0; argumentIndex203 < argumentListLen203; argumentIndex203++) {
      var argumentData203 = argumentList203[argumentIndex203];
      output += (argumentData203 == 'required' || argumentData203 == 'pattern' || argumentData203 == 'min' || argumentData203 == 'max' || argumentData203 == 'minlength' || argumentData203 == 'maxlength') ? ' ' + soy.$$escapeHtml(argumentData203) + '="' + soy.$$escapeHtml(opt_data.validationArguments[argumentData203]) + '"' : ' ' + soy.$$escapeHtml('data-aui-validation-' + argumentData203) + '="' + soy.$$escapeHtml(opt_data.validationArguments[argumentData203]) + '"';
    }
  }
  return output;
};
if (goog.DEBUG) {
  aui.form.renderValidationArguments.soyTemplateName = 'aui.form.renderValidationArguments';
}


aui.form.renderTooltipArguments = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = '';
  if (opt_data.tooltipArguments) {
    var argumentList221 = soy.$$getMapKeys(opt_data.tooltipArguments);
    var argumentListLen221 = argumentList221.length;
    for (var argumentIndex221 = 0; argumentIndex221 < argumentListLen221; argumentIndex221++) {
      var argumentData221 = argumentList221[argumentIndex221];
      output += ' ' + soy.$$escapeHtml('data-aui-notification-' + argumentData221) + '="' + soy.$$escapeHtml(opt_data.tooltipArguments[argumentData221]) + '"';
    }
  }
  return output;
};
if (goog.DEBUG) {
  aui.form.renderTooltipArguments.soyTemplateName = 'aui.form.renderTooltipArguments';
}


aui.form.renderInfoMessage = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + ((opt_data.infoMessage) ? ' data-aui-notification-info="' + soy.$$escapeHtml(opt_data.infoMessage) + '"' : '');
};
if (goog.DEBUG) {
  aui.form.renderInfoMessage.soyTemplateName = 'aui.form.renderInfoMessage';
}


aui.form.renderFieldComponentAttribute = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + ((opt_data.infoMessage) ? ' data-aui-notification-field' : '') + ((opt_data.validationArguments) ? ' data-aui-validation-field' : '');
};
if (goog.DEBUG) {
  aui.form.renderFieldComponentAttribute.soyTemplateName = 'aui.form.renderFieldComponentAttribute';
}


aui.form.submit = function(opt_data, opt_ignored) {
  return '' + aui.form.button(soy.$$augmentMap(opt_data, {tagName: 'input', inputType: 'submit'}));
};
if (goog.DEBUG) {
  aui.form.submit.soyTemplateName = 'aui.form.submit';
}


aui.form.button = function(opt_data, opt_ignored) {
  return '' + aui.buttons.button(soy.$$augmentMap(opt_data, {extraClasses: opt_data.extraClasses, extraAttributes: '' + ((opt_data.name) ? 'name="' + soy.$$escapeHtml(opt_data.name) + '"' : '') + aui.renderExtraAttributes(opt_data)}));
};
if (goog.DEBUG) {
  aui.form.button.soyTemplateName = 'aui.form.button';
}


aui.form.linkButton = function(opt_data, opt_ignored) {
  return '' + aui.buttons.button(soy.$$augmentMap(opt_data, {tagName: 'a', type: 'link', href: opt_data.href ? opt_data.href : opt_data.url, extraClasses: 'cancel' + aui.renderExtraClasses(opt_data), extraAttributes: '' + ((opt_data.name) ? 'name="' + soy.$$escapeHtml(opt_data.name) + '"' : '') + aui.renderExtraAttributes(opt_data)}));
};
if (goog.DEBUG) {
  aui.form.linkButton.soyTemplateName = 'aui.form.linkButton';
}


aui.form.textarea = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<textarea name="' + ((opt_data.name) ? soy.$$escapeHtml(opt_data.name) : soy.$$escapeHtml(opt_data.id)) + '" class="textarea' + aui.renderExtraClasses(opt_data) + ' ' + ((opt_data.icon) ? 'aui-field-has-icon' : '') + '"' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ((opt_data.rows) ? ' rows="' + soy.$$escapeHtml(opt_data.rows) + '"' : '') + ((opt_data.cols) ? ' cols="' + soy.$$escapeHtml(opt_data.cols) + '"' : '') + ((opt_data.autocomplete) ? ' autocomplete="' + soy.$$escapeHtml(opt_data.autocomplete) + '"' : '') + ((opt_data.isDisabled) ? ' disabled' : '') + ((opt_data.isAutofocus) ? ' autofocus' : '') + ((opt_data.placeholderText) ? ' placeholder="' + soy.$$escapeHtml(opt_data.placeholderText) + '"' : '') + aui.renderExtraAttributes(opt_data) + aui.form.renderValidationArguments(opt_data) + aui.form.renderInfoMessage(opt_data) + aui.form.renderFieldComponentAttribute(opt_data) + aui.form.renderTooltipArguments(opt_data) + '>' + ((opt_data.value) ? soy.$$escapeHtml(opt_data.value) : '') + '</textarea>' + ((opt_data.icon) ? aui.icons.icon({icon: opt_data.icon, useIconFont: true, size: 'small'}) : '');
};
if (goog.DEBUG) {
  aui.form.textarea.soyTemplateName = 'aui.form.textarea';
}


aui.form.select = function(opt_data, opt_ignored) {
  var output = '<select' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' name="' + ((opt_data.name) ? soy.$$escapeHtml(opt_data.name) : soy.$$escapeHtml(opt_data.id)) + '" class="' + soy.$$escapeHtml(opt_data.isMultiple ? 'multi-select' : 'select') + aui.renderExtraClasses(opt_data) + '"' + ((opt_data.size) ? ' size="' + soy.$$escapeHtml(opt_data.size) + '"' : '') + ((opt_data.isDisabled) ? ' disabled' : '') + ((opt_data.isAutofocus) ? ' autofocus' : '') + ((opt_data.isMultiple) ? ' multiple' : '') + aui.renderExtraAttributes(opt_data) + aui.form.renderValidationArguments(opt_data) + aui.form.renderInfoMessage(opt_data) + aui.form.renderFieldComponentAttribute(opt_data) + aui.form.renderTooltipArguments(opt_data) + '>';
  var optionList375 = opt_data.options;
  var optionListLen375 = optionList375.length;
  for (var optionIndex375 = 0; optionIndex375 < optionListLen375; optionIndex375++) {
    var optionData375 = optionList375[optionIndex375];
    output += aui.form.optionOrOptgroup(soy.$$augmentMap(optionData375, {defaultValue: opt_data.value}));
  }
  output += '</select>';
  return output;
};
if (goog.DEBUG) {
  aui.form.select.soyTemplateName = 'aui.form.select';
}


aui.form.optionOrOptgroup = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.options) {
    output += '<optgroup label="' + soy.$$escapeHtml(opt_data.text) + '"' + ((opt_data.disabled) ? ' disabled' : '') + '>';
    var optionList390 = opt_data.options;
    var optionListLen390 = optionList390.length;
    for (var optionIndex390 = 0; optionIndex390 < optionListLen390; optionIndex390++) {
      var optionData390 = optionList390[optionIndex390];
      output += aui.form.optionOrOptgroup(soy.$$augmentMap(optionData390, {defaultValue: opt_data.defaultValue}));
    }
    output += '</optgroup>';
  } else {
    output += '<option value="' + soy.$$escapeHtml(opt_data.value) + '"' + ((opt_data.selected || opt_data.defaultValue == opt_data.value) ? ' selected' : '') + ((opt_data.disabled) ? ' disabled' : '') + '>' + soy.$$escapeHtml(opt_data.text) + '</option>';
  }
  return output;
};
if (goog.DEBUG) {
  aui.form.optionOrOptgroup.soyTemplateName = 'aui.form.optionOrOptgroup';
}


aui.form.value = function(opt_data, opt_ignored) {
  return '<span' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="field-value' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</span>';
};
if (goog.DEBUG) {
  aui.form.value.soyTemplateName = 'aui.form.value';
}


aui.form.field = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = '';
  var isCheckboxOrRadio__soy424 = opt_data.type == 'checkbox' || opt_data.type == 'radio';
  var fieldWidthClass__soy425 = opt_data.fieldWidth ? opt_data.fieldWidth + '-field ' : '';
  var fieldClasses__soy426 = fieldWidthClass__soy425 + (opt_data.extraFieldClasses ? opt_data.extraFieldClasses : '');
  output += '<div class="' + ((isCheckboxOrRadio__soy424) ? soy.$$escapeHtml(opt_data.type) : 'field-group') + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + ((opt_data.labelContent && ! isCheckboxOrRadio__soy424) ? aui.form.label({forField: opt_data.id, isRequired: opt_data.isRequired, content: opt_data.labelContent}) : '');
  switch (opt_data.type) {
    case 'textarea':
      output += aui.form.textarea({id: opt_data.id, name: opt_data.name, value: opt_data.value, rows: opt_data.rows, cols: opt_data.cols, autocomplete: opt_data.autocomplete, placeholderText: opt_data.placeholderText, isDisabled: opt_data.isDisabled ? true : false, isAutofocus: opt_data.isAutofocus, extraClasses: fieldClasses__soy426, icon: opt_data.icon, validationArguments: opt_data.validationArguments, infoMessage: opt_data.infoMessage, tooltipArguments: opt_data.tooltipArguments});
      break;
    case 'select':
      output += aui.form.select({id: opt_data.id, name: opt_data.name, value: opt_data.value, options: opt_data.options, isMultiple: opt_data.isMultiple, size: opt_data.size, isDisabled: opt_data.isDisabled ? true : false, isAutofocus: opt_data.isAutofocus, extraClasses: fieldClasses__soy426, validationArguments: opt_data.validationArguments, infoMessage: opt_data.infoMessage, tooltipArguments: opt_data.tooltipArguments});
      break;
    case 'value':
      output += aui.form.value({id: opt_data.id, content: '' + soy.$$escapeHtml(opt_data.value), extraClasses: fieldClasses__soy426});
      break;
    case 'text':
    case 'password':
    case 'email':
    case 'url':
    case 'tel':
    case 'search':
    case 'file':
    case 'radio':
    case 'checkbox':
    case 'button':
    case 'submit':
    case 'reset':
      output += aui.form.input({id: opt_data.id, name: opt_data.name, type: opt_data.type, value: opt_data.value, maxLength: opt_data.maxLength, size: opt_data.size, autocomplete: opt_data.autocomplete, placeholderText: opt_data.placeholderText, isChecked: opt_data.isChecked, isDisabled: opt_data.isDisabled ? true : false, isAutofocus: opt_data.isAutofocus, extraClasses: fieldClasses__soy426, icon: opt_data.icon, validationArguments: opt_data.validationArguments, infoMessage: opt_data.infoMessage, tooltipArguments: opt_data.tooltipArguments});
      break;
  }
  output += ((opt_data.labelContent && isCheckboxOrRadio__soy424) ? aui.form.label({forField: opt_data.id, isRequired: opt_data.isRequired, content: opt_data.labelContent}) : '') + ((opt_data.descriptionText || opt_data.descriptionContent) ? aui.form.fieldDescription({text: opt_data.descriptionText, content: opt_data.descriptionContent}) : '');
  if (opt_data.errorTexts) {
    var errorList512 = opt_data.errorTexts;
    var errorListLen512 = errorList512.length;
    for (var errorIndex512 = 0; errorIndex512 < errorListLen512; errorIndex512++) {
      var errorData512 = errorList512[errorIndex512];
      output += aui.form.fieldError({message: errorData512});
    }
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  aui.form.field.soyTemplateName = 'aui.form.field';
}


aui.form.fieldError = function(opt_data, opt_ignored) {
  return '<div class="error' + aui.renderExtraClasses(opt_data) + '">' + soy.$$escapeHtml(opt_data.message) + '</div>';
};
if (goog.DEBUG) {
  aui.form.fieldError.soyTemplateName = 'aui.form.fieldError';
}


aui.form.fieldDescription = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div class="description' + aui.renderExtraClasses(opt_data) + '">' + ((opt_data.text) ? soy.$$escapeHtml(opt_data.text) : (opt_data.message) ? soy.$$escapeHtml(opt_data.message) : soy.$$filterNoAutoescape(opt_data.content)) + '</div>';
};
if (goog.DEBUG) {
  aui.form.fieldDescription.soyTemplateName = 'aui.form.fieldDescription';
}


aui.form.textField = function(opt_data, opt_ignored) {
  return '' + aui.form.field(soy.$$augmentMap(opt_data, {type: 'text'}));
};
if (goog.DEBUG) {
  aui.form.textField.soyTemplateName = 'aui.form.textField';
}


aui.form.textareaField = function(opt_data, opt_ignored) {
  return '' + aui.form.field(soy.$$augmentMap(opt_data, {type: 'textarea'}));
};
if (goog.DEBUG) {
  aui.form.textareaField.soyTemplateName = 'aui.form.textareaField';
}


aui.form.passwordField = function(opt_data, opt_ignored) {
  return '' + aui.form.field(soy.$$augmentMap(opt_data, {type: 'password'}));
};
if (goog.DEBUG) {
  aui.form.passwordField.soyTemplateName = 'aui.form.passwordField';
}


aui.form.fileField = function(opt_data, opt_ignored) {
  return '' + aui.form.field(soy.$$augmentMap(opt_data, {type: 'file'}));
};
if (goog.DEBUG) {
  aui.form.fileField.soyTemplateName = 'aui.form.fileField';
}


aui.form.selectField = function(opt_data, opt_ignored) {
  return '' + aui.form.field(soy.$$augmentMap(opt_data, {type: 'select'}));
};
if (goog.DEBUG) {
  aui.form.selectField.soyTemplateName = 'aui.form.selectField';
}


aui.form.checkboxField = function(opt_data, opt_ignored) {
  var param557 = '' + ((opt_data.isMatrix) ? '<div class="matrix">' : '');
  var fieldList561 = opt_data.fields;
  var fieldListLen561 = fieldList561.length;
  for (var fieldIndex561 = 0; fieldIndex561 < fieldListLen561; fieldIndex561++) {
    var fieldData561 = fieldList561[fieldIndex561];
    param557 += aui.form.field(soy.$$augmentMap(fieldData561, {type: 'checkbox', labelContent: '' + soy.$$escapeHtml(fieldData561.labelText), extraFieldClasses: opt_data.extraFieldClasses}));
  }
  param557 += ((opt_data.isMatrix) ? '</div>' : '') + ((opt_data.descriptionText || opt_data.descriptionContent || opt_data.errorTexts && opt_data.errorTexts.length) ? aui.form.field({descriptionText: opt_data.descriptionText, descriptionContent: opt_data.descriptionContent, errorTexts: opt_data.errorTexts, isDisabled: false}) : '');
  var output = '' + aui.form.fieldset({legendContent: opt_data.legendContent + (opt_data.isRequired ? '<span class="aui-icon icon-required"></span>' : ''), isGroup: true, id: opt_data.id, extraClasses: opt_data.extraClasses, extraAttributes: opt_data.extraAttributes, content: param557});
  return output;
};
if (goog.DEBUG) {
  aui.form.checkboxField.soyTemplateName = 'aui.form.checkboxField';
}


aui.form.radioField = function(opt_data, opt_ignored) {
  var param585 = '' + ((opt_data.isMatrix) ? '<div class="matrix">' : '');
  var fieldList589 = opt_data.fields;
  var fieldListLen589 = fieldList589.length;
  for (var fieldIndex589 = 0; fieldIndex589 < fieldListLen589; fieldIndex589++) {
    var fieldData589 = fieldList589[fieldIndex589];
    param585 += aui.form.field(soy.$$augmentMap(fieldData589, {type: 'radio', name: opt_data.name ? opt_data.name : opt_data.id, labelContent: '' + soy.$$escapeHtml(fieldData589.labelText), extraFieldClasses: opt_data.extraFieldClasses}));
  }
  param585 += ((opt_data.isMatrix) ? '</div>' : '') + ((opt_data.descriptionText || opt_data.descriptionContent || opt_data.errorTexts && opt_data.errorTexts.length) ? aui.form.field({descriptionText: opt_data.descriptionText, descriptionContent: opt_data.descriptionContent, errorTexts: opt_data.errorTexts, isDisabled: false}) : '');
  var output = '' + aui.form.fieldset({legendContent: opt_data.legendContent + (opt_data.isRequired ? '<span class="aui-icon icon-required"></span>' : ''), isGroup: true, id: opt_data.id, extraClasses: opt_data.extraClasses, extraAttributes: opt_data.extraAttributes, content: param585});
  return output;
};
if (goog.DEBUG) {
  aui.form.radioField.soyTemplateName = 'aui.form.radioField';
}


aui.form.valueField = function(opt_data, opt_ignored) {
  return '' + aui.form.field(soy.$$augmentMap(opt_data, {type: 'value'}));
};
if (goog.DEBUG) {
  aui.form.valueField.soyTemplateName = 'aui.form.valueField';
}


aui.form.emailField = function(opt_data, opt_ignored) {
  return '' + aui.form.field(soy.$$augmentMap(opt_data, {type: 'email'}));
};
if (goog.DEBUG) {
  aui.form.emailField.soyTemplateName = 'aui.form.emailField';
}


aui.form.urlField = function(opt_data, opt_ignored) {
  return '' + aui.form.field(soy.$$augmentMap(opt_data, {type: 'url'}));
};
if (goog.DEBUG) {
  aui.form.urlField.soyTemplateName = 'aui.form.urlField';
}


aui.form.telephoneField = function(opt_data, opt_ignored) {
  return '' + aui.form.field(soy.$$augmentMap(opt_data, {type: 'tel'}));
};
if (goog.DEBUG) {
  aui.form.telephoneField.soyTemplateName = 'aui.form.telephoneField';
}


aui.form.searchField = function(opt_data, opt_ignored) {
  return '' + aui.form.field(soy.$$augmentMap(opt_data, {type: 'search'}));
};
if (goog.DEBUG) {
  aui.form.searchField.soyTemplateName = 'aui.form.searchField';
}
;
;
/* module-key = 'com.atlassian.auiplugin:aui-experimental-soy-templates', location = 'src/soy/group.soy' */
// This file was automatically generated from group.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.group.
 */

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.group == 'undefined') { aui.group = {}; }


aui.group.group = function(opt_data, opt_ignored) {
  return '<' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'div') + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-group' + ((opt_data.isSplit) ? ' aui-group-split' : '') + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'div') + '>';
};
if (goog.DEBUG) {
  aui.group.group.soyTemplateName = 'aui.group.group';
}


aui.group.item = function(opt_data, opt_ignored) {
  return '<' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'div') + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-item' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'div') + '>';
};
if (goog.DEBUG) {
  aui.group.item.soyTemplateName = 'aui.group.item';
}
;
;
/* module-key = 'com.atlassian.auiplugin:aui-experimental-soy-templates', location = 'src/soy/labels.soy' */
// This file was automatically generated from labels.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.labels.
 */

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.labels == 'undefined') { aui.labels = {}; }


aui.labels.label = function(opt_data, opt_ignored) {
  return '' + ((opt_data.url && opt_data.isCloseable == true) ? '<span' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-label aui-label-closeable aui-label-split' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '><a class="aui-label-split-main" href="' + soy.$$escapeHtml(opt_data.url) + '">' + soy.$$escapeHtml(opt_data.text) + '</a><span class="aui-label-split-close" >' + aui.labels.closeIcon(opt_data) + '</span></span>' : '<' + soy.$$escapeHtml(opt_data.url ? 'a' : 'span') + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-label' + ((opt_data.isCloseable) ? ' aui-label-closeable' : '') + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + ((opt_data.url) ? ' href="' + soy.$$escapeHtml(opt_data.url) + '"' : '') + '>' + soy.$$escapeHtml(opt_data.text) + ((opt_data.isCloseable) ? aui.labels.closeIcon(opt_data) : '') + '</' + soy.$$escapeHtml(opt_data.url ? 'a' : 'span') + '>');
};
if (goog.DEBUG) {
  aui.labels.label.soyTemplateName = 'aui.labels.label';
}


aui.labels.closeIcon = function(opt_data, opt_ignored) {
  return '<span tabindex="0" class="aui-icon aui-icon-close"' + ((opt_data.hasTitle != false) ? ' title="' + aui.labels.closeIconText(opt_data) + '"' : '') + '>' + aui.labels.closeIconText(opt_data) + '</span>';
};
if (goog.DEBUG) {
  aui.labels.closeIcon.soyTemplateName = 'aui.labels.closeIcon';
}


aui.labels.closeIconText = function(opt_data, opt_ignored) {
  return '' + ((opt_data.closeIconText) ? soy.$$escapeHtml(opt_data.closeIconText) : '(' + soy.$$escapeHtml('Remove') + ' ' + soy.$$escapeHtml(opt_data.text) + ')');
};
if (goog.DEBUG) {
  aui.labels.closeIconText.soyTemplateName = 'aui.labels.closeIconText';
}
;
;
/* module-key = 'com.atlassian.auiplugin:aui-experimental-soy-templates', location = 'src/soy/message.soy' */
// This file was automatically generated from message.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.message.
 */

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.message == 'undefined') { aui.message = {}; }


aui.message.info = function(opt_data, opt_ignored) {
  return '' + aui.message.message(soy.$$augmentMap(opt_data, {type: 'info'}));
};
if (goog.DEBUG) {
  aui.message.info.soyTemplateName = 'aui.message.info';
}


aui.message.warning = function(opt_data, opt_ignored) {
  return '' + aui.message.message(soy.$$augmentMap(opt_data, {type: 'warning'}));
};
if (goog.DEBUG) {
  aui.message.warning.soyTemplateName = 'aui.message.warning';
}


aui.message.error = function(opt_data, opt_ignored) {
  return '' + aui.message.message(soy.$$augmentMap(opt_data, {type: 'error'}));
};
if (goog.DEBUG) {
  aui.message.error.soyTemplateName = 'aui.message.error';
}


aui.message.success = function(opt_data, opt_ignored) {
  return '' + aui.message.message(soy.$$augmentMap(opt_data, {type: 'success'}));
};
if (goog.DEBUG) {
  aui.message.success.soyTemplateName = 'aui.message.success';
}


aui.message.hint = function(opt_data, opt_ignored) {
  return '' + aui.message.message(soy.$$augmentMap(opt_data, {type: 'hint'}));
};
if (goog.DEBUG) {
  aui.message.hint.soyTemplateName = 'aui.message.hint';
}


aui.message.generic = function(opt_data, opt_ignored) {
  return '' + aui.message.message(soy.$$augmentMap(opt_data, {type: 'generic'}));
};
if (goog.DEBUG) {
  aui.message.generic.soyTemplateName = 'aui.message.generic';
}


aui.message.message = function(opt_data, opt_ignored) {
  var output = '';
  var theTagName__soy21 = opt_data.tagName ? opt_data.tagName : 'div';
  var theType__soy22 = opt_data.type ? opt_data.type : 'generic';
  output += '<' + soy.$$escapeHtml(theTagName__soy21) + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-message aui-message-' + soy.$$escapeHtml(theType__soy22) + ' ' + soy.$$escapeHtml(theType__soy22) + ((opt_data.isCloseable) ? ' closeable' : '') + ((opt_data.isShadowed) ? ' shadowed' : '') + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + ((opt_data.titleContent) ? '<p class="title"><strong>' + soy.$$filterNoAutoescape(opt_data.titleContent) + '</strong></p>' : '') + soy.$$filterNoAutoescape(opt_data.content) + ((opt_data.isCloseable) ? '<span class="aui-icon icon-close" role="button" tabindex="0"></span>' : '') + '</' + soy.$$escapeHtml(theTagName__soy21) + '>';
  return output;
};
if (goog.DEBUG) {
  aui.message.message.soyTemplateName = 'aui.message.message';
}
;
;
/* module-key = 'com.atlassian.auiplugin:aui-experimental-soy-templates', location = 'src/soy/page.soy' */
// This file was automatically generated from page.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.page.
 */

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.page == 'undefined') { aui.page = {}; }


aui.page.document = function(opt_data, opt_ignored, opt_ijData) {
  return '<!DOCTYPE html><html lang="' + soy.$$escapeHtml(opt_ijData.language ? opt_ijData.language : 'en') + '">' + aui.page.documentHTMLContent(opt_data, null, opt_ijData) + '</html>';
};
if (goog.DEBUG) {
  aui.page.document.soyTemplateName = 'aui.page.document';
}


aui.page.documentHTMLContent = function(opt_data, opt_ignored, opt_ijData) {
  var output = '';
  var thePageSize__soy9 = opt_data.pageSize ? opt_data.pageSize : opt_data.focusedPageSize ? opt_data.focusedPageSize : 'xlarge';
  output += '<head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>' + soy.$$escapeHtml(opt_data.windowTitle) + '</title>' + ((opt_data.headContent) ? soy.$$filterNoAutoescape(opt_data.headContent) : '') + '</head><body' + ((opt_data.pageType) ? (opt_data.pageType == 'generic') ? (opt_data.extraClasses) ? ' class="' + aui.renderExtraClasses(opt_data, null, opt_ijData) + '"' : '' : (opt_data.pageType == 'focused') ? ' class="aui-page-focused aui-page-focused-' + soy.$$escapeHtml(thePageSize__soy9) + ' aui-page-size-' + soy.$$escapeHtml(thePageSize__soy9) + aui.renderExtraClasses(opt_data, null, opt_ijData) + '"' : (opt_data.pageType == 'notification') ? ' class="aui-page-notification aui-page-size-' + soy.$$escapeHtml(thePageSize__soy9) + aui.renderExtraClasses(opt_data, null, opt_ijData) + '"' : (opt_data.pageType == 'sidebar') ? ' class="aui-page-sidebar' + soy.$$escapeHtml(opt_data.sidebarState ? ' aui-sidebar-' + opt_data.sidebarState : '') + aui.renderExtraClasses(opt_data, null, opt_ijData) + '"' : ' class="aui-page-' + soy.$$escapeHtml(opt_data.pageType) + aui.renderExtraClasses(opt_data, null, opt_ijData) + '"' : ' class="' + aui.renderExtraClasses(opt_data, null, opt_ijData) + '"') + aui.renderExtraAttributes(opt_data, null, opt_ijData) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</body>';
  return output;
};
if (goog.DEBUG) {
  aui.page.documentHTMLContent.soyTemplateName = 'aui.page.documentHTMLContent';
}


aui.page.page = function(opt_data, opt_ignored, opt_ijData) {
  return '<div id="page"><header id="header" role="banner">' + soy.$$filterNoAutoescape(opt_data.headerContent) + '</header><!-- #header --><section id="content" role="main">' + soy.$$filterNoAutoescape(opt_data.contentContent) + '</section><!-- #content --><footer id="footer" role="contentinfo">' + soy.$$filterNoAutoescape(opt_data.footerContent) + '</footer><!-- #footer --></div><!-- #page -->';
};
if (goog.DEBUG) {
  aui.page.page.soyTemplateName = 'aui.page.page';
}


aui.page.header = function(opt_data, opt_ignored, opt_ijData) {
  return ((opt_data.bannerContent) ? '<div class="aui-banner aui-banner-error" role="banner">' + soy.$$filterNoAutoescape(opt_data.bannerContent) + '</div>' : '') + '<nav' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-header aui-dropdown2-trigger-group' + aui.renderExtraClasses(opt_data, null, opt_ijData) + '"' + aui.renderExtraAttributes(opt_data, null, opt_ijData) + ' role="navigation"><div class="aui-header-inner">' + ((opt_data.headerBeforeContent) ? '<div class="aui-header-before">' + soy.$$filterNoAutoescape(opt_data.headerBeforeContent) + '</div>' : '') + '<div class="aui-header-primary"><h1 id="logo" class="aui-header-logo' + ((opt_data.headerLogoImageUrl) ? ' aui-header-logo-custom' : (opt_data.logo) ? ' aui-header-logo-' + soy.$$escapeHtml(opt_data.logo) : '') + '"><a href="' + soy.$$escapeHtml(opt_data.headerLink ? opt_data.headerLink : '/') + '">' + ((opt_data.headerLogoImageUrl) ? '<img src="' + soy.$$escapeHtml(opt_data.headerLogoImageUrl) + '" alt="' + soy.$$escapeHtml(opt_data.headerLogoText) + '" />' : '<span class="aui-header-logo-device">' + soy.$$escapeHtml(opt_data.headerLogoText ? opt_data.headerLogoText : '') + '</span>') + ((opt_data.headerText) ? '<span class="aui-header-logo-text">' + soy.$$escapeHtml(opt_data.headerText) + '</span>' : '') + '</a></h1>' + ((opt_data.primaryNavContent) ? soy.$$filterNoAutoescape(opt_data.primaryNavContent) : '') + '</div>' + ((opt_data.secondaryNavContent) ? '<div class="aui-header-secondary">' + soy.$$filterNoAutoescape(opt_data.secondaryNavContent) + '</div>' : '') + ((opt_data.headerAfterContent) ? '<div class="aui-header-after">' + soy.$$filterNoAutoescape(opt_data.headerAfterContent) + '</div>' : '') + '</div><!-- .aui-header-inner--></nav><!-- .aui-header -->';
};
if (goog.DEBUG) {
  aui.page.header.soyTemplateName = 'aui.page.header';
}


aui.page.pagePanel = function(opt_data, opt_ignored, opt_ijData) {
  return '<' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'div') + ' class="aui-page-panel' + aui.renderExtraClasses(opt_data, null, opt_ijData) + '"' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + aui.renderExtraAttributes(opt_data, null, opt_ijData) + '><div class="aui-page-panel-inner">' + soy.$$filterNoAutoescape(opt_data.content) + '</div><!-- .aui-page-panel-inner --></' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'div') + '><!-- .aui-page-panel -->';
};
if (goog.DEBUG) {
  aui.page.pagePanel.soyTemplateName = 'aui.page.pagePanel';
}


aui.page.pagePanelNav = function(opt_data, opt_ignored, opt_ijData) {
  return '<' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'div') + ' class="aui-page-panel-nav' + aui.renderExtraClasses(opt_data, null, opt_ijData) + '"' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + aui.renderExtraAttributes(opt_data, null, opt_ijData) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'div') + '><!-- .aui-page-panel-nav -->';
};
if (goog.DEBUG) {
  aui.page.pagePanelNav.soyTemplateName = 'aui.page.pagePanelNav';
}


aui.page.pagePanelContent = function(opt_data, opt_ignored, opt_ijData) {
  return '<' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'section') + ' class="aui-page-panel-content' + aui.renderExtraClasses(opt_data, null, opt_ijData) + '"' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + aui.renderExtraAttributes(opt_data, null, opt_ijData) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'section') + '><!-- .aui-page-panel-content -->';
};
if (goog.DEBUG) {
  aui.page.pagePanelContent.soyTemplateName = 'aui.page.pagePanelContent';
}


aui.page.pagePanelSidebar = function(opt_data, opt_ignored, opt_ijData) {
  return '<' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'aside') + ' class="aui-page-panel-sidebar' + aui.renderExtraClasses(opt_data, null, opt_ijData) + '"' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + aui.renderExtraAttributes(opt_data, null, opt_ijData) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'aside') + '><!-- .aui-page-panel-sidebar -->';
};
if (goog.DEBUG) {
  aui.page.pagePanelSidebar.soyTemplateName = 'aui.page.pagePanelSidebar';
}


aui.page.pagePanelItem = function(opt_data, opt_ignored, opt_ijData) {
  return '<' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'section') + ' class="aui-page-panel-item' + aui.renderExtraClasses(opt_data, null, opt_ijData) + '"' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + aui.renderExtraAttributes(opt_data, null, opt_ijData) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'section') + '><!-- .aui-page-panel-item -->';
};
if (goog.DEBUG) {
  aui.page.pagePanelItem.soyTemplateName = 'aui.page.pagePanelItem';
}


aui.page.pageHeader = function(opt_data, opt_ignored, opt_ijData) {
  return '<header class="aui-page-header' + aui.renderExtraClasses(opt_data, null, opt_ijData) + '"' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + aui.renderExtraAttributes(opt_data, null, opt_ijData) + '><div class="aui-page-header-inner">' + soy.$$filterNoAutoescape(opt_data.content) + '</div><!-- .aui-page-header-inner --></header><!-- .aui-page-header -->';
};
if (goog.DEBUG) {
  aui.page.pageHeader.soyTemplateName = 'aui.page.pageHeader';
}


aui.page.pageHeaderImage = function(opt_data, opt_ignored, opt_ijData) {
  return '<div class="aui-page-header-image' + aui.renderExtraClasses(opt_data, null, opt_ijData) + '"' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + aui.renderExtraAttributes(opt_data, null, opt_ijData) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</div><!-- .aui-page-header-image -->';
};
if (goog.DEBUG) {
  aui.page.pageHeaderImage.soyTemplateName = 'aui.page.pageHeaderImage';
}


aui.page.pageHeaderMain = function(opt_data, opt_ignored, opt_ijData) {
  return '<div class="aui-page-header-main' + aui.renderExtraClasses(opt_data, null, opt_ijData) + '"' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + aui.renderExtraAttributes(opt_data, null, opt_ijData) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</div><!-- .aui-page-header-main -->';
};
if (goog.DEBUG) {
  aui.page.pageHeaderMain.soyTemplateName = 'aui.page.pageHeaderMain';
}


aui.page.pageHeaderActions = function(opt_data, opt_ignored, opt_ijData) {
  return '<div class="aui-page-header-actions' + aui.renderExtraClasses(opt_data, null, opt_ijData) + '"' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + aui.renderExtraAttributes(opt_data, null, opt_ijData) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</div><!-- .aui-page-header-actions -->';
};
if (goog.DEBUG) {
  aui.page.pageHeaderActions.soyTemplateName = 'aui.page.pageHeaderActions';
}
;
;
/* module-key = 'com.atlassian.auiplugin:aui-experimental-soy-templates', location = 'src/soy/panel.soy' */
// This file was automatically generated from panel.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.
 */

if (typeof aui == 'undefined') { var aui = {}; }


aui.panel = function(opt_data, opt_ignored) {
  return '<' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'div') + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-panel' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'div') + '>';
};
if (goog.DEBUG) {
  aui.panel.soyTemplateName = 'aui.panel';
}
;
;
/* module-key = 'com.atlassian.auiplugin:aui-experimental-soy-templates', location = 'src/soy/table.soy' */
// This file was automatically generated from table.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.
 */

if (typeof aui == 'undefined') { var aui = {}; }


aui.table = function(opt_data, opt_ignored) {
  return '<table' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + ((opt_data.columnsContent) ? soy.$$filterNoAutoescape(opt_data.columnsContent) : '') + ((opt_data.captionContent) ? '<caption>' + soy.$$filterNoAutoescape(opt_data.captionContent) + '</caption>' : '') + ((opt_data.theadContent) ? '<thead>' + soy.$$filterNoAutoescape(opt_data.theadContent) + '</thead>' : '') + ((opt_data.tfootContent) ? '<tfoot>' + soy.$$filterNoAutoescape(opt_data.tfootContent) + '</tfoot>' : '') + ((! opt_data.contentIncludesTbody) ? '<tbody>' : '') + soy.$$filterNoAutoescape(opt_data.content) + ((! opt_data.contentIncludesTbody) ? '</tbody>' : '') + '</table>';
};
if (goog.DEBUG) {
  aui.table.soyTemplateName = 'aui.table';
}
;
;
/* module-key = 'com.atlassian.auiplugin:aui-experimental-soy-templates', location = 'src/soy/tabs.soy' */
// This file was automatically generated from tabs.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.
 */

if (typeof aui == 'undefined') { var aui = {}; }


aui.tabs = function(opt_data, opt_ignored) {
  var output = '<' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'div') + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-tabs ' + soy.$$escapeHtml(opt_data.isVertical ? 'vertical-tabs' : 'horizontal-tabs') + ((opt_data.isDisabled) ? ' aui-tabs-disabled' : '') + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '><ul class="tabs-menu">';
  var itemList19 = opt_data.menuItems;
  var itemListLen19 = itemList19.length;
  for (var itemIndex19 = 0; itemIndex19 < itemListLen19; itemIndex19++) {
    var itemData19 = itemList19[itemIndex19];
    output += aui.tabMenuItem(itemData19);
  }
  output += '</ul>' + soy.$$filterNoAutoescape(opt_data.paneContent) + '</' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'div') + '>';
  return output;
};
if (goog.DEBUG) {
  aui.tabs.soyTemplateName = 'aui.tabs';
}


aui.tabMenuItem = function(opt_data, opt_ignored) {
  return '<li' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="menu-item' + ((opt_data.isActive) ? ' active-tab' : '') + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '><a href="' + soy.$$escapeHtml(opt_data.url) + '">' + soy.$$escapeHtml(opt_data.text) + '</a></li>';
};
if (goog.DEBUG) {
  aui.tabMenuItem.soyTemplateName = 'aui.tabMenuItem';
}


aui.tabPane = function(opt_data, opt_ignored) {
  return '<' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'div') + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="tabs-pane' + ((opt_data.isActive) ? ' active-pane' : '') + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'div') + '>';
};
if (goog.DEBUG) {
  aui.tabPane.soyTemplateName = 'aui.tabPane';
}
;
;
/* module-key = 'com.atlassian.auiplugin:aui-experimental-soy-templates', location = 'src/soy/trigger.soy' */
// This file was automatically generated from trigger.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.trigger.
 */

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.trigger == 'undefined') { aui.trigger = {}; }


aui.trigger.trigger = function(opt_data, opt_ignored) {
  return '<' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'a') + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '" ' : '') + ' class="' + aui.renderExtraClasses(opt_data) + '" aria-controls="' + soy.$$escapeHtml(opt_data.menu.id) + '" aria-haspopup="true" role="button"' + ((opt_data.title) ? ' title="' + soy.$$escapeHtml(opt_data.title) + '"' : '') + ((opt_data.container) ? ' data-container="' + soy.$$escapeHtml(opt_data.container) + '"' : '') + (((! opt_data.tagName || opt_data.tagName == 'a') && (! opt_data.extraAttributes || Object.prototype.toString.call(opt_data.extraAttributes) === '[object Object]' && ! opt_data.extraAttributes.href && ! opt_data.extraAttributes.tabindex || (! opt_data.extraAttributes.href || ! opt_data.extraAttributes.tabindex))) ? ' tabindex="0"' : '') + ' data-aui-trigger' + aui.renderExtraAttributes(opt_data) + '>' + ((opt_data.content) ? soy.$$filterNoAutoescape(opt_data.content) : '') + ((opt_data.text) ? soy.$$escapeHtml(opt_data.text) : '') + ((! (opt_data.showIcon == false)) ? '<span class="icon ' + soy.$$escapeHtml(opt_data.iconClasses ? opt_data.iconClasses : 'aui-icon-dropdown') + '">' + ((opt_data.iconText) ? soy.$$escapeHtml(opt_data.iconText) : '') + '</span>' : '') + '</' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'a') + '>';
};
if (goog.DEBUG) {
  aui.trigger.trigger.soyTemplateName = 'aui.trigger.trigger';
}
;
;
/* module-key = 'com.atlassian.auiplugin:aui-experimental-soy-templates', location = 'src/soy/toolbar.soy' */
// This file was automatically generated from toolbar.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.toolbar.
 */

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.toolbar == 'undefined') { aui.toolbar = {}; }


aui.toolbar.toolbar = function(opt_data, opt_ignored) {
  return '<' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'div') + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-toolbar' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'div') + '>';
};
if (goog.DEBUG) {
  aui.toolbar.toolbar.soyTemplateName = 'aui.toolbar.toolbar';
}


aui.toolbar.split = function(opt_data, opt_ignored) {
  return '<' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'div') + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="toolbar-split toolbar-split-' + soy.$$escapeHtml(opt_data.split) + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'div') + '>';
};
if (goog.DEBUG) {
  aui.toolbar.split.soyTemplateName = 'aui.toolbar.split';
}


aui.toolbar.group = function(opt_data, opt_ignored) {
  return '<ul' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="toolbar-group' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</ul>';
};
if (goog.DEBUG) {
  aui.toolbar.group.soyTemplateName = 'aui.toolbar.group';
}


aui.toolbar.item = function(opt_data, opt_ignored) {
  return '<li ' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="toolbar-item' + ((opt_data.isPrimary) ? ' primary' : '') + ((opt_data.isActive) ? ' active' : '') + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</li>';
};
if (goog.DEBUG) {
  aui.toolbar.item.soyTemplateName = 'aui.toolbar.item';
}


aui.toolbar.trigger = function(opt_data, opt_ignored) {
  return '<a' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="toolbar-trigger' + aui.renderExtraClasses(opt_data) + '" href="' + soy.$$escapeHtml(opt_data.url ? opt_data.url : '#') + '"' + ((opt_data.title) ? ' title="' + soy.$$escapeHtml(opt_data.title) + '"' : '') + aui.renderExtraAttributes(opt_data) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</a>';
};
if (goog.DEBUG) {
  aui.toolbar.trigger.soyTemplateName = 'aui.toolbar.trigger';
}


aui.toolbar.button = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + aui.toolbar.item({isActive: opt_data.isActive, isPrimary: opt_data.isPrimary, id: opt_data.id, extraClasses: opt_data.extraClasses, extraAttributes: opt_data.extraAttributes, content: '' + aui.toolbar.trigger({url: opt_data.url, title: opt_data.title, content: '' + ((opt_data.iconClass) ? '<span class="icon ' + soy.$$escapeHtml(opt_data.iconClass) + '"></span>' : '') + ((opt_data.text) ? '<span class="trigger-text">' + soy.$$escapeHtml(opt_data.text) + '</span>' : '')})});
};
if (goog.DEBUG) {
  aui.toolbar.button.soyTemplateName = 'aui.toolbar.button';
}


aui.toolbar.link = function(opt_data, opt_ignored) {
  return '' + aui.toolbar.item({id: opt_data.id, extraClasses: 'toolbar-item-link' + aui.renderExtraClasses(opt_data), extraAttributes: opt_data.extraAttributes, content: '' + aui.toolbar.trigger({url: opt_data.url, content: '' + soy.$$escapeHtml(opt_data.text)})});
};
if (goog.DEBUG) {
  aui.toolbar.link.soyTemplateName = 'aui.toolbar.link';
}


aui.toolbar.dropdownInternal = function(opt_data, opt_ignored) {
  return '' + aui.toolbar.item({isPrimary: opt_data.isPrimary, id: opt_data.id, extraClasses: '' + soy.$$filterNoAutoescape(opt_data.itemClass) + aui.renderExtraClasses(opt_data), extraAttributes: opt_data.extraAttributes, content: '' + ((opt_data.splitButtonContent) ? soy.$$filterNoAutoescape(opt_data.splitButtonContent) : '') + aui.dropdown.parent({content: '' + aui.dropdown.trigger({extraClasses: 'toolbar-trigger', accessibilityText: opt_data.text}) + aui.dropdown.menu({content: opt_data.dropdownItemsContent})})});
};
if (goog.DEBUG) {
  aui.toolbar.dropdownInternal.soyTemplateName = 'aui.toolbar.dropdownInternal';
}


aui.toolbar.dropdown = function(opt_data, opt_ignored) {
  return '' + aui.toolbar.dropdownInternal({isPrimary: opt_data.isPrimary, id: opt_data.id, itemClass: 'toolbar-dropdown', extraClasses: opt_data.extraClasses, extraAttributes: opt_data.extraAttributes, text: opt_data.text, dropdownItemsContent: opt_data.dropdownItemsContent});
};
if (goog.DEBUG) {
  aui.toolbar.dropdown.soyTemplateName = 'aui.toolbar.dropdown';
}


aui.toolbar.splitButton = function(opt_data, opt_ignored) {
  return '' + aui.toolbar.dropdownInternal({isPrimary: opt_data.isPrimary, id: opt_data.id, itemClass: 'toolbar-splitbutton', extraClasses: opt_data.extraClasses, extraAttributes: opt_data.extraAttributes, dropdownItemsContent: opt_data.dropdownItemsContent, splitButtonContent: '' + aui.toolbar.trigger({url: opt_data.url, content: '' + soy.$$escapeHtml(opt_data.text)})});
};
if (goog.DEBUG) {
  aui.toolbar.splitButton.soyTemplateName = 'aui.toolbar.splitButton';
}
;
;
/* module-key = 'com.atlassian.auiplugin:aui-experimental-soy-templates', location = 'src/soy/toolbar2.soy' */
// This file was automatically generated from toolbar2.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.toolbar2.
 */

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.toolbar2 == 'undefined') { aui.toolbar2 = {}; }


aui.toolbar2.toolbar2 = function(opt_data, opt_ignored) {
  return '<div' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-toolbar2' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + ' role="toolbar"><div class="aui-toolbar2-inner">' + soy.$$filterNoAutoescape(opt_data.content) + '</div></div>';
};
if (goog.DEBUG) {
  aui.toolbar2.toolbar2.soyTemplateName = 'aui.toolbar2.toolbar2';
}


aui.toolbar2.item = function(opt_data, opt_ignored) {
  return '<div' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-toolbar2-' + soy.$$escapeHtml(opt_data.item) + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</div>';
};
if (goog.DEBUG) {
  aui.toolbar2.item.soyTemplateName = 'aui.toolbar2.item';
}


aui.toolbar2.group = function(opt_data, opt_ignored) {
  return '<div' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-toolbar2-group' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</div>';
};
if (goog.DEBUG) {
  aui.toolbar2.group.soyTemplateName = 'aui.toolbar2.group';
}
;
;
/* module-key = 'com.atlassian.auiplugin:aui-experimental-soy-templates', location = 'src/soy/progress-tracker.soy' */
// This file was automatically generated from progress-tracker.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.progressTracker.
 */

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.progressTracker == 'undefined') { aui.progressTracker = {}; }


aui.progressTracker.progressTracker = function(opt_data, opt_ignored) {
  var output = '<ol' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-progress-tracker' + ((opt_data.isInverted) ? ' aui-progress-tracker-inverted' : '') + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>';
  var param18 = '';
  var currentStepList19 = opt_data.steps;
  var currentStepListLen19 = currentStepList19.length;
  for (var currentStepIndex19 = 0; currentStepIndex19 < currentStepListLen19; currentStepIndex19++) {
    var currentStepData19 = currentStepList19[currentStepIndex19];
    if (currentStepData19['isCurrent']) {
      var stepList22 = opt_data.steps;
      var stepListLen22 = stepList22.length;
      for (var stepIndex22 = 0; stepIndex22 < stepListLen22; stepIndex22++) {
        var stepData22 = stepList22[stepIndex22];
        param18 += aui.progressTracker.step(soy.$$augmentMap(stepData22, {width: Math.round(100 / opt_data.steps.length * 10000) / 10000, href: stepIndex22 < currentStepIndex19 ? stepData22['href'] : null}));
      }
    }
  }
  output += aui.progressTracker.content({steps: opt_data.steps, content: param18});
  output += '</ol>';
  return output;
};
if (goog.DEBUG) {
  aui.progressTracker.progressTracker.soyTemplateName = 'aui.progressTracker.progressTracker';
}


aui.progressTracker.content = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.content != '') {
    output += soy.$$filterNoAutoescape(opt_data.content);
  } else {
    var stepList36 = opt_data.steps;
    var stepListLen36 = stepList36.length;
    for (var stepIndex36 = 0; stepIndex36 < stepListLen36; stepIndex36++) {
      var stepData36 = stepList36[stepIndex36];
      output += aui.progressTracker.step(soy.$$augmentMap(stepData36, {isCurrent: stepIndex36 == 0, width: Math.round(100 / opt_data.steps.length * 10000) / 10000, href: null}));
    }
  }
  return output;
};
if (goog.DEBUG) {
  aui.progressTracker.content.soyTemplateName = 'aui.progressTracker.content';
}


aui.progressTracker.step = function(opt_data, opt_ignored) {
  return '<li' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-progress-tracker-step' + ((opt_data.isCurrent) ? ' aui-progress-tracker-step-current' : '') + aui.renderExtraClasses(opt_data) + '" style="width: ' + soy.$$escapeHtml(opt_data.width) + '%;"' + aui.renderExtraAttributes(opt_data) + '><' + soy.$$escapeHtml(opt_data.href ? 'a' : 'span') + ((opt_data.href) ? ' href="' + soy.$$escapeHtml(opt_data.href) + '"' : '') + '>' + soy.$$escapeHtml(opt_data.text) + '</' + soy.$$escapeHtml(opt_data.href ? 'a' : 'span') + '></li>';
};
if (goog.DEBUG) {
  aui.progressTracker.step.soyTemplateName = 'aui.progressTracker.step';
}
;
;
/* module-key = 'com.atlassian.auiplugin:aui-experimental-soy-templates', location = 'src/soy/expander.soy' */
// This file was automatically generated from expander.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.expander.
 */

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.expander == 'undefined') { aui.expander = {}; }


aui.expander.content = function(opt_data, opt_ignored) {
  return '<div id="' + soy.$$escapeHtml(opt_data.id) + '" class="aui-expander-content' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + ((opt_data.initiallyExpanded) ? ' aria-expanded="' + soy.$$escapeHtml(opt_data.initiallyExpanded) + '"' : '') + '>' + ((opt_data.content) ? soy.$$filterNoAutoescape(opt_data.content) : '') + '</div>';
};
if (goog.DEBUG) {
  aui.expander.content.soyTemplateName = 'aui.expander.content';
}


aui.expander.trigger = function(opt_data, opt_ignored) {
  return '<' + soy.$$escapeHtml(opt_data.tag ? opt_data.tag : 'div') + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ((opt_data.replaceText) ? ' data-replace-text="' + soy.$$escapeHtml(opt_data.replaceText) + '"' : '') + ((opt_data.replaceSelector) ? ' data-replace-selector="' + soy.$$escapeHtml(opt_data.replaceSelector) + '"' : '') + ' class="aui-expander-trigger' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + ' aria-controls="' + soy.$$escapeHtml(opt_data.contentId) + '"' + ((opt_data.collapsible) ? ' data-collapsible="' + soy.$$escapeHtml(opt_data.collapsible) + '"' : '') + '>' + ((opt_data.content) ? soy.$$filterNoAutoescape(opt_data.content) : '') + '</' + soy.$$escapeHtml(opt_data.tag ? opt_data.tag : 'div') + '>';
};
if (goog.DEBUG) {
  aui.expander.trigger.soyTemplateName = 'aui.expander.trigger';
}


aui.expander.revealText = function(opt_data, opt_ignored) {
  return '' + aui.expander.content({id: opt_data.contentId, content: '' + soy.$$escapeHtml(opt_data.contentContent) + aui.expander.trigger({id: opt_data.triggerId, contentId: opt_data.contentId, tag: 'a', content: '<span class=\'reveal-text-trigger-text\'>Show more</span>', replaceSelector: '.reveal-text-trigger-text', replaceText: 'Show less', extraAttributes: opt_data.triggerExtraAttributes, extraClasses: ((opt_data.triggerExtraClasses) ? soy.$$escapeHtml(opt_data.triggerExtraClasses) + '  ' : '') + ' aui-expander-reveal-text'}), extraAttributes: opt_data.contentExtraAttributes, extraClasses: opt_data.contentExtraClasses});
};
if (goog.DEBUG) {
  aui.expander.revealText.soyTemplateName = 'aui.expander.revealText';
}
;
;
/* module-key = 'com.atlassian.auiplugin:aui-experimental-soy-templates', location = 'src/soy/avatar.soy' */
// This file was automatically generated from avatar.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.avatar.
 */

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.avatar == 'undefined') { aui.avatar = {}; }


aui.avatar.avatar = function(opt_data, opt_ignored) {
  return '<' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'span') + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-avatar aui-avatar-' + soy.$$escapeHtml(opt_data.size) + soy.$$escapeHtml(opt_data.isProject ? ' aui-avatar-project' : '') + soy.$$escapeHtml(opt_data.badgeContent ? ' aui-avatar-badged' : '') + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '><span class="aui-avatar-inner"><img src="' + soy.$$escapeHtml(opt_data.avatarImageUrl) + '"' + ((opt_data.accessibilityText) ? ' alt="' + soy.$$escapeHtml(opt_data.accessibilityText) + '"' : '') + ((opt_data.title) ? ' title="' + soy.$$escapeHtml(opt_data.title) + '"' : '') + ((opt_data.imageClasses) ? ' class="' + soy.$$escapeHtml(opt_data.imageClasses) + '"' : '') + ' /></span>' + ((opt_data.badgeContent) ? soy.$$filterNoAutoescape(opt_data.badgeContent) : '') + '</' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'span') + '>';
};
if (goog.DEBUG) {
  aui.avatar.avatar.soyTemplateName = 'aui.avatar.avatar';
}
;
;
/* module-key = 'com.atlassian.auiplugin:aui-experimental-soy-templates', location = 'src/soy/icons.soy' */
// This file was automatically generated from icons.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.icons.
 */

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.icons == 'undefined') { aui.icons = {}; }


aui.icons.icon = function(opt_data, opt_ignored) {
  return '<' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'span') + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-icon' + ((opt_data.useIconFont) ? ' aui-icon-' + soy.$$escapeHtml(opt_data.size ? opt_data.size : 'small') : '') + ' aui' + soy.$$escapeHtml(opt_data.useIconFont ? '-iconfont' : '-icon') + soy.$$escapeHtml(opt_data.iconFontSet ? '-' + opt_data.iconFontSet : '') + '-' + soy.$$escapeHtml(opt_data.icon) + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + ((opt_data.accessibilityText) ? soy.$$escapeHtml(opt_data.accessibilityText) : '') + '</' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'span') + '>';
};
if (goog.DEBUG) {
  aui.icons.icon.soyTemplateName = 'aui.icons.icon';
}
;
;
/* module-key = 'com.atlassian.auiplugin:aui-experimental-soy-templates', location = 'src/soy/lozenges.soy' */
// This file was automatically generated from lozenges.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.lozenges.
 */

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.lozenges == 'undefined') { aui.lozenges = {}; }


aui.lozenges.lozenge = function(opt_data, opt_ignored) {
  return '<' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'span') + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ((opt_data.title) ? ' title="' + soy.$$escapeHtml(opt_data.title) + '"' : '') + ' class="aui-lozenge' + soy.$$escapeHtml(opt_data.type ? ' aui-lozenge-' + opt_data.type : '') + soy.$$escapeHtml(opt_data.isSubtle ? ' aui-lozenge-subtle' : '') + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + ((opt_data.maxLength) ? soy.$$truncate(soy.$$escapeHtml(opt_data.text), opt_data.maxLength, true) : soy.$$escapeHtml(opt_data.text)) + '</' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'span') + '>';
};
if (goog.DEBUG) {
  aui.lozenges.lozenge.soyTemplateName = 'aui.lozenges.lozenge';
}
;
;
/* module-key = 'com.atlassian.auiplugin:aui-experimental-soy-templates', location = 'src/soy/sidebar.soy' */
// This file was automatically generated from sidebar.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.sidebar.
 */

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.sidebar == 'undefined') { aui.sidebar = {}; }


aui.sidebar.sidebar = function(opt_data, opt_ignored) {
  return '<' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'div') + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ((opt_data.state) ? ' aria-expanded="' + ((opt_data.state == 'collapsed') ? 'false' : 'true') + '"' : '') + ' class="aui-sidebar ' + ((opt_data.isAnimated) ? 'aui-is-animated' : '') + aui.renderExtraClasses(opt_data) + '" ' + ((opt_data.isResponsive == false) ? 'data-aui-responsive="false"' : '') + aui.renderExtraAttributes(opt_data) + '><div class="aui-sidebar-wrapper"><div class="aui-sidebar-body">' + soy.$$filterNoAutoescape(opt_data.headerContent) + soy.$$filterNoAutoescape(opt_data.content) + '</div><div class="aui-sidebar-footer">' + ((opt_data.footerContent) ? soy.$$filterNoAutoescape(opt_data.footerContent) : (opt_data.settingsButtonUrl && opt_data.settingsText) ? '<a href="' + soy.$$escapeHtml(opt_data.settingsButtonUrl) + '" class="aui-button aui-button-subtle aui-sidebar-settings-button' + ((opt_data.isSettingsButtonSelected) ? ' aui-sidebar-settings-selected' : '') + '" data-tooltip="' + soy.$$escapeHtml(opt_data.settingsTooltip ? opt_data.settingsTooltip : opt_data.settingsText) + '"><span class="aui-icon aui-icon-small aui-iconfont-configure"></span><span class="aui-button-label">' + soy.$$escapeHtml(opt_data.settingsText) + '</span></a>' : '') + '<a class="aui-button aui-button-subtle aui-sidebar-toggle aui-sidebar-footer-tipsy" data-tooltip="' + soy.$$escapeHtml('Expand sidebar ( [ )') + '" href="#"><span class="aui-icon aui-icon-small"></span></a></div>' + ((opt_data.isResizable) ? '<div class="aui-sidebar-handle"></div>' : '') + '</div></' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'div') + '>';
};
if (goog.DEBUG) {
  aui.sidebar.sidebar.soyTemplateName = 'aui.sidebar.sidebar';
}
;
;
/* module-key = 'jira.webresources:js-soy-templates', location = 'includes/templates/jira/links.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.Links&&(JIRA.Templates.Links={}),JIRA.Templates.Links.helpLinkFromHelpPath=function(e,t){return""+JIRA.Templates.Links.helpLink({isLocal:e.helpPath.local,title:e.helpPath.title,description:e.helpPath.alt,url:e.helpPath.url,fragmentIdentifier:""+(e.fragmentIdentifier?soy.$$escapeHtml(e.fragmentIdentifier):"")})},JIRA.Templates.Links.helpLink=function(e,t){return'<a class="help-lnk'+(e.extraClasses?aui.renderExtraClasses(e):"")+'"'+(e.id?' id="'+soy.$$escapeHtml(e.id)+'"':"")+' href="'+soy.$$escapeHtml(e.url)+(e.fragmentIdentifier?soy.$$escapeHtml(e.fragmentIdentifier):"")+'" title="'+(e.isLocal?AJS.format("Get local help about {0}",e.title):AJS.format("Get online help about {0}",e.title))+'" data-helplink="'+(e.isLocal?"local":"online")+'"'+(e.isLocal?"":' target="_jirahelp"')+aui.renderExtraAttributes(e)+'><span class="aui-icon aui-icon-small aui-iconfont-help">'+(e.description?soy.$$escapeHtml(e.description):"")+"</span></a>"},JIRA.Templates.Links.button=function(e,t){return""+aui.buttons.button(soy.$$augmentMap(e,{tagName:"a",extraAttributes:'href="'+soy.$$escapeHtml(e.url)+'"'}))},JIRA.Templates.Links.basicHelpLink=function(e,t){var a="",l=e.isLocal?"local":"online",i=e.isLocal?"_self":"_jirahelp",n=null!=e.title?e.title:"";return a+=aui.buttons.button(soy.$$augmentMap(e,{extraClasses:"help-lnk",type:"link",tagName:"a",text:e.desc,extraAttributes:{href:e.url,title:n,target:i,"data-helplink":l}}))};;
;
/* module-key = 'jira.webresources:js-soy-templates', location = 'includes/templates/jira/header/pageHeader.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.Headers&&(JIRA.Templates.Headers={}),JIRA.Templates.Headers.pageHeader=function(e,a){return"<"+soy.$$escapeHtml(e.tagName?e.tagName:"header")+' class="'+soy.$$escapeHtml("aui-page-header"+(e.containsBreadcrumbs?" contains-breadcrumbs":""))+'" '+(e.id?' id="'+soy.$$escapeHtml(e.id)+'"':"")+'><div class="aui-page-header-inner">'+(e.imageContent?'<div class="aui-page-header-image">'+soy.$$filterNoAutoescape(e.imageContent)+"</div>":"")+'<div class="aui-page-header-main">'+soy.$$filterNoAutoescape(e.mainContent)+"</div>"+(e.actionsContent||e.helpContent?'<div class="aui-page-header-actions">'+(e.actionsContent?soy.$$filterNoAutoescape(e.actionsContent):"")+(e.helpContent?soy.$$filterNoAutoescape(e.helpContent):"")+"</div>":"")+"</div></"+soy.$$escapeHtml(e.tagName?e.tagName:"header")+">"},JIRA.Templates.Headers.projectAvatar=function(e,a){return"<span"+(e.id?' id="'+soy.$$escapeHtml(e.id)+'"':"")+' class="aui-avatar aui-avatar-large aui-avatar-project'+(e.isSystemAvatar?" jira-system-avatar":"")+aui.renderExtraClasses(e)+'"'+aui.renderExtraAttributes(e)+'><span class="aui-avatar-inner"><img id="project-avatar" alt="'+soy.$$escapeHtml(AJS.format("Uploaded image for project: \'\'{0}\'\'",e.avatarAlt))+'" src="'+soy.$$filterNoAutoescape(e.avatarUrl)+'" /></span>'+(e.projectTypeIcon?'<img src="data:image/svg+xml;base64,'+soy.$$escapeHtml(e.projectTypeIcon)+'" class="jira-project-avatar-icon" />':"")+"</span>"},JIRA.Templates.Headers.breadcrumbs=function(e,a){return'<div id="breadcrumbs-container"></div>'},JIRA.Templates.Headers.breadcrumbsProjectSettings=function(e,a){return'<div id="breadcrumbs-container" class="project-settings-breadcrumb"></div>'};;
;
/* module-key = 'jira.webresources:js-soy-templates', location = 'includes/templates/jira/jiraDialogs.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.JiraDialog&&(JIRA.Templates.JiraDialog={}),JIRA.Templates.JiraDialog.dialogChrome=function(o,e){return""+JIRA.Templates.JiraDialog.abstractDialogChrome(o)},JIRA.Templates.JiraDialog.formDialogChrome=function(o,e){return""+JIRA.Templates.JiraDialog.abstractDialogChrome(o)},JIRA.Templates.JiraDialog.abstractDialogChrome=function(o,e){return(o.titleText?'<div class="jira-dialog-heading"><h2>'+soy.$$escapeHtml(o.titleText)+"</h2></div>":"")+'<div class="jira-dialog-content">'+(o.formActionUrl?'<form class="aui" action="'+soy.$$escapeHtml(o.formActionUrl)+'" method="'+(o.formMethod?soy.$$escapeHtml(o.formMethod):"POST")+'"><div class="form-body">'+soy.$$filterNoAutoescape(o.bodyContent)+'</div><div class="form-footer buttons-container">'+soy.$$filterNoAutoescape(o.footerContent)+"</div></form>":soy.$$filterNoAutoescape(o.bodyContent)+(o.footerContent?'<div class="buttons-container">'+soy.$$filterNoAutoescape(o.footerContent)+"</div>":""))+"</div>"};;
;
/* module-key = 'jira.webresources:js-soy-templates', location = 'includes/jira/field/templates/statusCategoryField.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.Fields&&(JIRA.Templates.Fields={}),"undefined"==typeof JIRA.Templates.Fields.Pickers&&(JIRA.Templates.Fields.Pickers={}),"undefined"==typeof JIRA.Templates.Fields.Pickers.Statuses&&(JIRA.Templates.Fields.Pickers.Statuses={}),JIRA.Templates.Fields.Pickers.Statuses.statusCategorySelectField=function(e,t){var s='<div class="field-group">'+aui.form.label({forField:e.id,isRequired:!0,content:"Category"})+JIRA.Templates.Fields.Pickers.Statuses.statusCategorySelect(e)+(e.statusCategoryHelpData?" "+JIRA.Templates.Links.helpLink(e.statusCategoryHelpData):"")+'<div class="description">',a="<b>"+soy.$$escapeHtml("To Do")+"</b>",o="<b>"+soy.$$escapeHtml("In Progress")+"</b>",l="<b>"+soy.$$escapeHtml("Done")+"</b>";return s+=soy.$$filterNoAutoescape(AJS.format("Helps identify where an issue is in its lifecycle. \u003cbr/\u003eIssues move from {0} to {1} when work starts on them, and later move to {2} when all work is complete.",a,o,l))+"</div>"+(e.errors&&e.errors.statusCategory?aui.form.fieldError({message:e.errors.statusCategory}):"")+"</div>"},JIRA.Templates.Fields.Pickers.Statuses.statusCategorySelect=function(e,t){for(var s='<select id="'+soy.$$escapeHtml(e.id)+'" name="'+soy.$$escapeHtml(e.id)+'" class="select">',a=e.statusCategoryOptions,o=a.length,l=0;l<o;l++){var i=a[l];s+=JIRA.Templates.Fields.Pickers.Statuses.statusCategoryOption(i)}return s+="</select>"},JIRA.Templates.Fields.Pickers.Statuses.statusCategoryOption=function(e,t){return'<option value="'+soy.$$escapeHtml(e.value)+'" data-key="'+soy.$$escapeHtml(e.key)+'" data-color-name="'+soy.$$escapeHtml(e.colorName)+'" data-sequence="'+soy.$$escapeHtml(e.sequence)+'"'+(e.selected?" selected":"")+(e.isPlaceholder?' data-placeholder="true"':"")+">"+soy.$$escapeHtml(e.text)+"</option>"};;
;
/* module-key = 'jira.webresources:page-loading-indicator', location = '/includes/jira/loading/Loading.js' */
define("jira/loading/loading",["jquery"],function(i){function a(){e||(i(window).trigger("show.loading"),i("body").append(r).append(s),e=!0)}function n(){e&&(i(window).trigger("hide.loading"),s.remove(),r.remove(),e=!1)}var e=!1,r=i('<div class="jira-page-adg-loading-background" />'),s=i('<div class="jira-page-adg-spinner">   <span class="jira-page-adg-spinner-container">     <span class="jira-page-adg-spinner-wrapper" size="48">       <svg        class="jira-page-adg-spinner-svg"        focusable="false"        height="48"        size="48"        viewBox="0 0 48 48"        width="48"        xmlns="http://www.w3.org/2000/svg"      >        <circle cx="24" cy="24" r="21.5"></circle>      </svg>    </span>  </span></div>');return{showLoadingIndicator:a,hideLoadingIndicator:n,isVisible:function(){return e}}}),AJS.namespace("JIRA.Loading",null,require("jira/loading/loading"));;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-internal-amdify', location = 'node_modules/@atlassian/aui/src/js/aui/internal/amdify.js' */
("undefined"===typeof window?global:window).__574ac67f906effeb9d8ec2753b23cf28=function(){var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default=function(a,b){if(window.define){var c=window.define;c(a,[],function(){return b})}return b};return a=a["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-flag', location = 'node_modules/@atlassian/aui/src/js/aui/flag.js' */
("undefined"===typeof window?global:window).__e243db5c139a94f8b4c4fe7a1d0dbab0=function(){function d(a){return a&&a.__esModule?a:{"default":a}}function g(a){var a=c.default.extend({},l,a),b,e=a,e=(0,m.default)('<div class="aui-flag"><div class="aui-message aui-message-{type} {type} {closeable} shadowed"><p class="title"><strong>{title}</strong></p>{body}<\!-- .aui-message --\></div></div>').fill({"body:html":e.body||"",closeable:"never"===e.close?"":"closeable",title:e.title||"",type:e.type}).toString();
b=(0,c.default)(e);b[0].close=function(){h(b)};"auto"===a.close?(j(b),b.find(".aui-message").addClass("aui-will-close"),setTimeout(function(){b[0].close()},n)):"manual"===a.close&&j(b);(0,c.default)("#"+i).find(".aui-flag").get().forEach(function(a){a.getAttribute("aria-hidden")==="true"&&(0,c.default)(a).remove()});a=(0,c.default)("#"+i);a.length||(a=(0,c.default)('<div id="'+i+'"></div>'),(0,c.default)("body").prepend(a));b.appendTo(a);(0,o.recomputeStyle)(b);return b.attr("aria-hidden","false")[0]}
function j(a){var b=(0,c.default)('<span class="aui-icon icon-close" role="button" tabindex="0"></span>');b.click(function(){h(a)});b.keypress(function(b){if(b.which===k.default.ENTER||b.which===k.default.SPACE)h(a),b.preventDefault()});return a.find(".aui-message").append(b)[0]}function h(a){a=a.get(0);a.setAttribute("aria-hidden","true");a.dispatchEvent(new p.default("aui-flag-close",{bubbles:!0}));return a}var f={};"use strict";Object.defineProperty(f,"__esModule",{value:!0});var c=d(__307d3e18fd611f85395c67cddeb1fe24),
o=__c0311e8841bd8637e025a8fb1474f693,q=d(__574ac67f906effeb9d8ec2753b23cf28),r=d(__4d02fe17b8e885a34493e34af3d145dd),k=d(__509557c937caa8763def39004fcf3193),m=d(__eb201a36d4829c396b434af7bad3dea4),p=d(__5a18a90cc502f556e87c4181f8a6b4ab),n=5E3,i="aui-flag-container",l={body:"",close:"manual",title:"",type:"info"};(0,q.default)("aui/flag",g);(0,r.default)("flag",g);f.default=g;return f=f["default"]}.call(this);;
;
/* module-key = 'jira.webresources:messages', location = 'includes/jira/common/messages.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),JIRA.Templates.warningMsg=function(s,e){return'<div class="aui-message warning '+(s.closeable?"closeable":"")+'"><span class="aui-icon icon-warning"></span>'+soy.$$filterNoAutoescape(s.msg)+(s.closeable?'<span class="aui-icon icon-close"></span>':"")+"</div>"},JIRA.Templates.successMsg=function(s,e){return'<div class="aui-message success '+(s.closeable?"closeable":"")+'"><span class="aui-icon icon-success"></span>'+soy.$$filterNoAutoescape(s.msg)+(s.closeable?'<span class="aui-icon icon-close"></span>':"")+"</div>"},JIRA.Templates.errorMsg=function(s,e){return'<div class="aui-message error '+(s.closeable?"closeable":"")+'"><span class="aui-icon icon-error"></span>'+soy.$$filterNoAutoescape(s.msg)+(s.closeable?'<span class="aui-icon icon-close"></span>':"")+"</div>"},JIRA.Templates.infoMsg=function(s,e){return'<div class="aui-message info '+(s.closeable?"closeable":"")+'"><span class="aui-icon icon-info"></span>'+soy.$$filterNoAutoescape(s.msg)+(s.closeable?'<span class="aui-icon icon-close"></span>':"")+"</div>"};;
;
/* module-key = 'jira.webresources:messages', location = '/includes/jira/common/flag.js' */
define("jira/flag",["jira/util/logger","aui/flag","jira/ajs/ajax/smart-ajax","underscore","jquery","wrm/data","wrm/context-path"],function(s,e,t,i,n,a,r){"use strict";function o(s){var e=c();i.contains(e,s)||(e.push(s),sessionStorage.setItem("dismissedFlags",JSON.stringify(e)))}function u(s){var e=i.without(c(),s);sessionStorage.setItem("dismissedFlags",JSON.stringify(e))}function c(){return JSON.parse(sessionStorage.getItem("dismissedFlags"))||[]}function f(){return i.union(j(),c())}function d(e){o(e),t.makeRequest({type:"PUT",url:r()+"/rest/flags/1.0/flags/"+encodeURIComponent(e)+"/dismiss"}).done(function(){u(e)}).always(function(){s.trace("flag.dismiss.finished:"+e)})}function g(s,t,a){a=a||{};var r=i.extend({},p,w[a.type],a,{title:s?s:"",body:t?t:""}),o=r.dismissalKey;if(o&&i.contains(f(),o))return!1;var u=e(r);o?(u.dismiss=function(){d(o)},u.addEventListener("aui-flag-close",u.dismiss)):u.dismiss=function(){};var c=n(u).find(".title");return""===n.trim(c.text())&&c.remove(),u}function l(s,e,t){return g(s,e,i.extend({},t,{type:"error"}))}function m(s,e,t){return g(s,e,i.extend({},t,{type:"warning"}))}function y(s,e,t){return g(s,e,i.extend({},t,{type:"success"}))}function h(s){s.forEach(function(s){g(s.title,s.htmlMessage,{close:s.auiClosingPolicy,type:s.auiMessageType})})}var p={type:"info",title:"",body:""},w={success:{close:"auto"}},j=i.once(function(){var s=a.claim("com.atlassian.jira.jira-header-plugin:dismissedFlags.flags")||{};return s.dismissed||[]}),v=c();return setTimeout(function(){i.each(v,d)},1e3),{showMsg:g,showMessages:h,showInfoMsg:g,showErrorMsg:l,showWarningMsg:m,showSuccessMsg:y}});;
;
/* module-key = 'jira.webresources:messages', location = '/includes/jira/common/message-types.js' */
define("jira/message-types",{WARNING:JIRA.Templates.warningMsg,ERROR:JIRA.Templates.errorMsg,SUCCESS:JIRA.Templates.successMsg});;
;
/* module-key = 'jira.webresources:messages', location = '/includes/jira/common/message.js' */
define("jira/message",["jira/flag","jquery","jira/message-types","jira/data/local-storage"],function(e,t,o,r){"use strict";function s(e,o){o=o||{};var r,s=o.type({msg:e,closeable:o.closeable}),a=t("<div>").html(s),n=null!=o.timeout?o.timeout:f;return o.closeable&&a.find(".icon-close").click(function(e){e.preventDefault(),null!=r&&window.clearTimeout(r),a.remove()}),n>0&&(r=window.setTimeout(function(){a.fadeOut(function(){a.remove()})},1e3*n)),a}function a(e,t){t=t||{};var o=s(e,t);return o.prependTo(t.target)}function n(e,t){return t=t||{},t.type="WARNING",p(e,t)}function u(e,t){return t=t||{},t.type="SUCCESS",p(e,t)}function i(e,t){return t=t||{},t.type="ERROR",p(e,t)}function c(o,r){var s={};r=r||{},s.type=r.type,"undefined"==typeof r.timeout?r.closeable===!1&&(s.close="auto"):r.timeout>0?s.close="auto":r.closeable===!1?s.close="never":s.close="manual";var a=t(e.showMsg("",o,s));return r.id&&a.attr("id",r.id),a}function l(e,o){return c(e,t.extend({},o,{type:"error"}))}function g(e,o){return c(e,t.extend({},o,{type:"warning"}))}function m(e,o){var r=t(e);o=o||{},r.css("backgroundColor","#fff").animate({backgroundColor:o.backgroundColor||"#ffd"}),window.setTimeout(function(){r.animate({backgroundColor:"#fff"},"slow",function(){r.css("backgroundColor","")})},3e3)}function d(e,o){return c(e,t.extend({},o,{type:"success"}))}var f=10,p=function(){var e="jira.messages.reloadMessageMsg",s="jira.messages.reloadMessageType",n="jira.messages.reloadMessageCloseable",u="jira.messages.reloadMessageTarget";return t(function(){var i,l,g,m=r.getItem(e);if(m){i=r.getItem(s),l="true"===r.getItem(n)||r.getItem(n)===!0,g=r.getItem(u),r.removeItem(e),r.removeItem(s),r.removeItem(n),r.removeItem(u);var d={WARNING:{soyTemplate:o.WARNING,auiType:"warning"},ERROR:{soyTemplate:o.ERROR,auiType:"error"},SUCCESS:{soyTemplate:o.SUCCESS,auiType:"success"}};!g||t(g).is(document.body)?c(m,{type:d[i].auiType,closeable:l}):a(m,{type:d[i].soyTemplate,closeable:l,target:t(g)})}}),function(t,o){r.setItem(e,t),r.setItem(s,o.type),o.closeable&&r.setItem(n,o.closeable),o.target&&r.setItem(u,o.target)}}(),I=function(){var e="jira.messages.fadeInBackground.color",o="jira.messages.fadeInBackground.target";return t(function(){var t=r.getItem(e),s=r.getItem(o);r.removeItem(e),r.removeItem(o),m(s,{backgroundColor:t})}),function(t,s){s=s||{};var a=r.getItem(o);a?(a=a.split(","),a.push(t),a=a.join(",")):a=t,r.setItem(o,a),r.setItem(e,s.backgroundColor||"#ffd")}}(),y={Types:o,DefaultTimeout:10,buildMsg:s,showMsg:c,showMessageAtTarget:a,showMsgOnReload:p,fadeInBackground:m,fadeInBackgroundOnReload:I,showErrorMsg:l,showWarningMsg:g,showSuccessMsg:d,showReloadErrorMsg:i,showReloadWarningMsg:n,showReloadSuccessMsg:u},v={removeInVersion:"8.0",alternativeName:"jira/flag",sinceVersion:"6.4"};return AJS.deprecate.prop(y,"showMsg",v),AJS.deprecate.prop(y,"showErrorMsg",v),AJS.deprecate.prop(y,"showWarningMsg",v),AJS.deprecate.prop(y,"showSuccessMsg",v),y});;
;
/* module-key = 'jira.webresources:messages', location = '/includes/jira/common/message-namespace.js' */
AJS.namespace("JIRA.Messages",null,require("jira/message"));;
;
/* module-key = 'jira.webresources:messages', location = '/includes/jira/common/message-jquery.js' */
!function(){var e=require("jira/message-types"),r=require("jira/message"),t=require("jquery");t.fn.fadeInBackground=function(e){return r.fadeInBackground(this,e),this},t.fn.showErrorMsg=function(t,s){return s=s||{},s.target=this,s.type=e.ERROR,r.showMessageAtTarget(t,s)},t.fn.showWarningMsg=function(t,s){return s=s||{},s.target=this,s.type=e.WARNING,r.showMessageAtTarget(t,s)},t.fn.showSuccessMsg=function(t,s){return s=s||{},s.target=this,s.type=e.SUCCESS,r.showMessageAtTarget(t,s)}}();;
;
/* module-key = 'jira.webresources:jira-dialog-core', location = '/includes/jira/dialog/DialogFactory.js' */
define("jira/dialog/dialog-factory",{});;
;
/* module-key = 'jira.webresources:jira-dialog-core', location = '/includes/jira/dialog/DialogRegister.js' */
define("jira/dialog/dialog-register",{});;
;
/* module-key = 'jira.webresources:jira-dialog-core', location = '/includes/jira/dialog/Dialog.js' */
define("jira/dialog/dialog",["jira/jquery/deferred","jira/ajs/control","jira/ajs/layer/inline-layer","jira/util/data/meta","jira/ajs/ajax/smart-ajax","jira/loading/loading","jira/xsrf","jira/util/browser","jira/util/events","jira/util/navigator","aui/dropdown","jquery","underscore","wrm/require"],function(t,i,e,s,o,n,a,r,h,d,l,c,p,u){var g=AJS.bind,f=AJS.unbind,_=AJS.dim,m=AJS.layer,v=AJS.LayerManager.global,C=i.extend({_getDefaultOptions:function(){return{height:"auto",cached:!1,widthClass:"medium",modeless:!1,useReadyForInteractionMetric:!1,ajaxOptions:{data:{inline:!0,decorator:"dialog"}}}},init:function(t){if("string"==typeof t||t instanceof c?t={trigger:t}:t&&t.width&&(t.widthClass="custom"),this.classNames=C.ClassNames,this.OPEN_DIALOG_SELECTOR="."+this.classNames.DIALOG+"."+this.classNames.DIALOG_OPEN,this.options=c.extend(!0,this._getDefaultOptions(),t),this.options.width=C.WIDTH_PRESETS[this.options.widthClass]||t.width,"function"==typeof this.options.content?this.options.type="builder":this.options.content instanceof c||"object"==typeof this.options.content&&this.options.nodeName?this.options.type="element":(!this.options.type&&!this.options.content||"object"==typeof this.options.content&&this.options.content.url)&&(this.options.type="ajax"),this.options.trigger){var i=c.makeArray(this.options.trigger),e=this;c.each(i,function(t,i){e._assignEvents("trigger",i)})}this.onContentReadyCallbacks=[],this._assignEvents("container",document),this.initModeless(),this.defineResources(),this.options.prefetchResources&&this.downloadResources()},initModeless:function(){this.options.modeless=!!this.options.modeless,this.options.modeless&&(!1===this.options.windowTitle&&(this.options.windowTitle=document.title),this._temporarilyHidden=!1,this._auiDialogShowHandler=this._auiDialogHandlers.hideTemporarily.bind(this),this._auiDialogHideHandler=this._auiDialogHandlers.restoreVisibility.bind(this),this._auiDialogRemoveHandler=this._auiDialogHandlers.restoreVisibilityRebindable.bind(this),g("show.dialog",this._auiDialogShowHandler),g("hide.dialog",this._auiDialogHideHandler),g("remove.dialog",this._auiDialogRemoveHandler),AJS.dialog2&&(this._auiDialog2ShowHandler=this._auiDialog2Handlers.hideTemporarily.bind(this),this._auiDialog2HideHandler=this._auiDialog2Handlers.restoreVisibility.bind(this),AJS.dialog2.on("show",this._auiDialog2ShowHandler),AJS.dialog2.on("hide",this._auiDialog2HideHandler)))},_runContentReadyCallbacks:function(){var t=this;c.each(this.onContentReadyCallbacks,function(){this.call(t)})},_setContent:function(t,i){var e;return this.resourcesReady().isResolved()?void(t?C.current===this?(this.get$popup().show().css("visibility","hidden").addClass("popup-width-"+this.options.widthClass),this.$content=t,this.get$popupContent().html(t),i!==!1&&this.decorateContent&&this.decorateContent(),(e=this.get$popupContent().find("."+this.classNames.HEADING_AREA)).size()>0&&this.get$popupHeading().replaceWith(e),(e=this.get$popupContent().find("."+this.classNames.CONTENT_AREA)).size()>0&&(e.contents().insertAfter(e),e.remove()),this._positionInCenter(),i!==!1&&(c(document).trigger("dialogContentReady",[this]),this._runContentReadyCallbacks()),this.get$popup().css("visibility",""),i!==!1&&c.isFunction(this.options.onContentRefresh)&&this.options.onContentRefresh.call(this),this._onShowContent()):this.options.cached===!1&&delete this.$content:this._contentRetrievers[this.options.type].call(this,this._setContent)):(this._showloadingIndicator(),void this.resourcesReady().done(this._setContent.bind(this,t,i)))},_ellipsify:function(t){t instanceof c||(t=this.get$popup()),c(".overflow-ellipsis",t).textOverflow({className:"ellipsified"})},_handleInitialDoneResponse:function(t,i,e){},getRequestUrlFromTrigger:function(){if(this.$activeTrigger&&this.$activeTrigger.length)return this.$activeTrigger.attr("href")||this.$activeTrigger.data("url")},_getRequestOptions:function(){var t={};return this._getAjaxOptionsObject()!==!1&&(t=c.extend(!0,t,this._getAjaxOptionsObject()),t.url||(t.url=this.getRequestUrlFromTrigger()),t)},_getAjaxOptionsObject:function(){var t=this.options.ajaxOptions;return c.isFunction(t)?t.call(this):t},_contentRetrievers:{element:function(t){this.$content||(this.$content=c(this.options.content).clone(!0)),t.call(this,this.$content)},builder:function(t){var i=this;this.$content||(this._showloadingIndicator(),this.options.content.call(this,function(e){i.$content=c(e),t.call(i,i.$content)}))},ajax:function(t){var i,e=this;this.$content||(i=this._getRequestOptions(),this._showloadingIndicator(),this.serverIsDone=!1,i.complete=function(s,n,a){if(a.successful){var r=e._detectRedirectInstructions(s);e.serverIsDone=r.serverIsDone,r.redirectUrl?e._performRedirect(r.redirectUrl):(i.dataType&&"json"===i.dataType.toLowerCase()&&e._buildContentFromJSON?e.$content=e._buildContentFromJSON(a.data):e.$content=a.data,e.serverIsDone?e._handleInitialDoneResponse(a.data,s,a):t.call(e,e.$content))}else{var h=o.buildDialogErrorContent(a);t.call(e,h)}},o.makeRequest(i))}},_detectRedirectInstructions:function(t){var i={serverIsDone:!1,redirectUrl:""},e=t.getResponseHeader("X-Atlassian-Dialog-Control");if(e){i.serverIsDone=!0;var s=e.indexOf("redirect:");0===s?i.redirectUrl=e.substr("redirect:".length):"permissionviolation"===e&&(i.redirectUrl=window.location.href)}return i},_performRedirect:function(t){r.reloadViaWindowLocation(t)},_renders:{popupHeading:function(){var t=c("<div />");return t.addClass(this.classNames.HEADING_AREA)},popupContent:function(){return c("<div />").addClass(this.classNames.CONTENT_AREA)},popup:function(){return c("<div />").attr("id",this.options.id||"").addClass(this.classNames.DIALOG).toggleClass(this.classNames.MODELESS_DIALOG,this.options.modeless).hide()}},_events:{trigger:{simpleClick:function(t,i){if(this.$activeTrigger=i,this.$activeTrigger.is("a")||(this.$activeTrigger=i.find("a")),this.options.analyticsComponent&&this.options.analyticsAction){var e;try{e=require("jira/components/analytics-tracker/tracker"),e.trackEvent(this.options.analyticsComponent,this.options.analyticsAction)}catch(t){e=null}}this.show(),t.preventDefault()}},container:{keydown:function(t){if(t.which===c.ui.keyCode.ESCAPE){var i=this.handleCancel();d.isIE()&&d.majorVersion()<12&&i===!1&&t.preventDefault()}}}},handleCancel:function(){return this.hide(!0,{reason:C.HIDE_REASON.escape})},_showloadingIndicator:function(){n.showLoadingIndicator()},_hideloadingIndicator:function(){n.hideLoadingIndicator()},_positionInCenter:function(){var t=c(window),i=this.get$popup(),e=this.getContentContainer(),s=this.getContentArea(),o=40,n=t.height(),a=0;if("number"==typeof this.options.width&&i.width(this.options.width),this.options.modeless)a=Math.round(n/2);else{i.css({marginLeft:-i.outerWidth()/2,marginTop:Math.max(-i.outerHeight()/2,o-n/2)});for(var r=i[0];r;)a+=r.offsetTop,r=r.offsetParent}var h=Math.max(n-a-o,C.CONSTRAINTS.MODELESS_MIN_HEIGHT),d=parseInt(s.css("padding-top"),10)+parseInt(s.css("padding-bottom"),10);s.css("maxHeight","");var l=h-(i.outerHeight()-e.outerHeight())-d;s.css("maxHeight",l),c(this).trigger("contentMaxHeightChanged",[l])},getContentArea:function(){return this.$popup.find(".form-body")},getContentContainer:function(){var t=this.$popup.find(".content-area-container");return 1===t.length?t:this.$popup.find(".form-body")},get$popup:function(){return this.$popup||(this.$popup=this._render("popup").appendTo("body"),this.$popup.addClass("box-shadow")),this.$popup},bindAnchorsToDialog:function(t){var i=this;t.click(function(t){i.$activeTrigger=c(this),delete i.$content,i._setContent(),t.preventDefault()})},get$popupContent:function(){return this.$popupContent||(this.$popupContent=this._render("popupContent").appendTo(this.get$popup())),this.$popupContent},get$popupHeading:function(){return this.$popupHeading||(this.$popupHeading=this._render("popupHeading").prependTo(this.get$popup())),this.$popupHeading},getLoadingIndicator:function(){return this.get$popupContent().find(".throbber:last")},showFooterLoadingIndicator:function(){var t=this.getLoadingIndicator();t.length&&(t.data("spinner")?t.hasClass("loading")||t.addClass("loading"):t.addClass("loading").spin())},hideFooterLoadingIndicator:function(){var t=this.getLoadingIndicator();t.length&&(t.removeClass("loading"),p.defer(function(){t.hasClass("loading")||t.spinStop()}))},_watchTab:function(t){var i,e,s;c(t.target).parents(this.get$popupContent()).length>0&&(i=c("html").hasClass("safari")?c(":input:visible:enabled, :checkbox:visible:enabled, :radio:visible:enabled",this.OPEN_DIALOG_SELECTOR):c("a:visible, :input:visible:enabled, :checkbox:visible:enabled, :radio:visible:enabled",this.OPEN_DIALOG_SELECTOR),e=i.first(),s=i.last(),(t.target===e[0]&&t.shiftKey||t.target===s[0]&&!t.shiftKey)&&(t.shiftKey?s.focus():e.focus(),t.preventDefault()))},_show:function(t){if(e.current&&e.current.hide(),l.current&&l.current.hide(),C.current){var i;if(C.current.options.stacked)i=C.current,i.stacked=!0,i.hide(!1),this.prev=i;else{C.stackroot=this;var s=C.current;for(i=s._removeStackState(),s.hide(!1);i;)s=i,i=s._removeStackState(),s._destroyIfNecessary()}}else this.stacked!==!0&&(C.stackroot=this,C.originalWindowTitle=document.title);this.options.modeless||(this.prev&&this.prev.options.modeless?_(!1):this.stacked!==!0&&_(!1)),C.current=this;var o=this.get$popup().addClass(this.classNames.DIALOG_OPEN);t||"blank"!==this.options.type&&!this.$content&&this.stacked!==!0?(delete this.$content,this._setContent()):(o.show(),this._positionInCenter(),this._onShowContent()),this.tabWatcher=function(t){9===t.keyCode&&C.current._watchTab(t)},c(document).bind("keydown",this.tabWatcher),c(this).trigger("Dialog.show",[this.$popup,this,this.id]),h.trigger("Dialog.show",[this.$popup,this,this.id]),this.options.modeless||r.disableKeyboardScrolling(),this.stacked=!1},show:function(t){var i=this.options.delayShowUntil,e=this;if(C.current===this)return!1;var s=new c.Event("beforeShow"),o=new c.Event("beforeShow");if(c(this).trigger(s),h.trigger(o,[this.options.id]),c(this).trigger("Dialog.beforeShow"),h.trigger("Dialog.beforeShow",[this.options.id]),s.isDefaultPrevented()||o.isDefaultPrevented())return!1;if(this.downloadResources(),i){var n=i();"resolved"===n.state()?e._show(t):(this.options.modeless||_(!1),this._showloadingIndicator(),n.done(function(){e._show(t)}))}else e._show(t)},_setWindowTitle:function(){var t,i,e=this.options.windowTitle,o=this.get$popup();if(e!==!1&&("string"==typeof e?t=e:"function"==typeof e?t=e.call(this):(i=o.find("."+this.classNames.HEADING_AREA),i.length&&(t=i.text())),t)){var n=s.get("app-title"),a=[t];n&&a.push(n),document.title=a.join(" - ")}},_onShowContent:function(){this._setWindowTitle(),this._hideloadingIndicator(),this._ellipsify(),this.get$popup().addClass(this.classNames.CONTENT_READY)},_resetWindowTitle:function(){this.stacked!==!0&&C.stackroot===this&&C.originalWindowTitle&&(document.title!==C.originalWindowTitle&&(document.title=C.originalWindowTitle),delete C.originalWindowTitle)},notifyOfNewContent:function(){this.$content&&(this.decorateContent(),this._positionInCenter(),this._onShowContent(),c(document).trigger("dialogContentReady",[this]))},destroy:function(){this.options.modeless&&(AJS.dialog2&&(AJS.dialog2.off("show",this._auiDialog2ShowHandler),AJS.dialog2.off("hide",this._auiDialog2HideHandler),delete this._auiDialog2ShowHandler,delete this._auiDialog2HideHandler),f("show.dialog",this._auiDialogShowHandler),f("hide.dialog",this._auiDialogHideHandler),f("remove.dialog",this._auiDialogRemoveHandler),delete this._auiDialogShowHandler,delete this._auiDialogHideHandler,delete this._auiDialogRemoveHandler),this.$popup&&this.$popup.remove(),delete this.$popup,delete this.$popupContent,delete this.$popupHeading,delete this.$content},_destroyIfNecessary:function(){!this.options.cached&&this.destroy()},_removeStackState:function(){var t=this.prev;return delete this.prev,delete this.stacked,t},isCurrent:function(){return C.current===this},hide:function(t,i){if(C.current===this){var e=new c.Event("Dialog.beforeHide"),s=new c.Event("Dialog.beforeHide");if(i=i||{},h.trigger(e,[this.$popup,i.reason,this.options.id]),c(this).trigger(s,[this.$popup,i.reason,this.options.id]),(i.reason===C.HIDE_REASON.escape||i.reason===C.HIDE_REASON.cancel)&&this.options.analyticsComponent&&this.options.analyticsAction){var o;try{o=require("jira/components/analytics-tracker/tracker"),o.trackEvent(this.options.analyticsComponent,this.options.analyticsAction+".cancel")}catch(t){o=null}}if(e.isDefaultPrevented()||s.isDefaultPrevented())return!1;var n=c("input[name=atl_token]",this.OPEN_DIALOG_SELECTOR).attr("value");void 0!==n&&a.updateTokenOnPage(n),(t!==!1&&!this.prev&&!this.options.modeless||this.prev&&this.prev.options.modeless)&&AJS.undim(),this.get$popup().removeClass(this.classNames.DIALOG_OPEN).removeClass(this.classNames.CONTENT_READY).hide(),this._hideloadingIndicator(),this._resetWindowTitle(),c(document).trigger("hideAllLayers",[this.$popup,i.reason,this.options.id]),c(this).trigger("Dialog.hide",[this.$popup,i.reason,this.options.id]),h.trigger("Dialog.hide",[this.$popup,i.reason,this.options.id]),C.current=null,this.options.cached===!1&&this.stacked!==!0&&this.destroy(),this.options.modeless||r.enableKeyboardScrolling(),this.tabWatcher&&c(document).unbind("keydown",this.tabWatcher),this.stacked!==!0&&(this.prev?(this.prev.show(!!this.prev.options.reloadOnPop),delete this.prev):C.stackroot===this&&delete C.stackroot)}},addHeading:function(t){var i=c("<div/>").html(t).contents(),e=c("<h2/>"),s=[];i.each(function(t){"div"===this.nodeName.toLowerCase()?s.push(this):e.append(this)}),this.get$popupHeading().html(s).append(e),e.attr("title",c.trim(e.text()))},onContentReady:function(t){c.isFunction(t)&&this.onContentReadyCallbacks.push(t)},_auiDialogHandlers:{hideTemporarily:function(t,i){this._temporarilyHidden||this._hideTemporarily()},restoreVisibility:function(t,i){if(this._temporarilyHidden){var e=v.getTopLayer(),s=!!e&&m(e);s&&s.isVisible()&&s.isBlanketed()||this._restoreVisibility()}},restoreVisibilityRebindable:function(t,i){this._restoreVisibility(t,i);var e=function(){g("remove.dialog",this._auiDialogRemoveHandler)};setTimeout(e.bind(this),0)}},_auiDialog2Handlers:{hideTemporarily:function(t,i){this._temporarilyHidden||this._hideTemporarily()},restoreVisibility:function(t,i){if(this._temporarilyHidden&&(!AJS.popup.current||!AJS.popup.current.element.is(":visible"))){for(;i;){var e=m(i);if(e.isVisible()&&e.isBlanketed())return;i=e.below()}this._restoreVisibility()}}},_hideTemporarily:function(){this.get$popup().addClass(this.classNames.DIALOG_NOT_VISIBLE),this._temporarilyHidden=!0},_restoreVisibility:function(){this.get$popup().removeClass(this.classNames.DIALOG_NOT_VISIBLE),this._temporarilyHidden=!1},defineResources:function(){p.isFunction(this.options.defineResources)&&this.options.defineResources.call(this)},requireContext:function(t){this.requireResource(t,"wrc!")},requireResource:function(t,i){this.wrmResources=this.wrmResources||[],this.wrmResources.push((i||"wr!")+t)},getRequiredResources:function(){return this.wrmResources||[]},downloadResources:function(){this.getRequiredResources().length>0&&!this.deferredResources&&(this.deferredResources=u(this.getRequiredResources()))},resourcesReady:function(){return this.deferredResources?this.deferredResources.promise():(new t).resolve().promise()}});return C.fn.dirtyFormWarning=function(){return this.bind("Dialog.beforeHide",function(t,i,e){if(!t.isDefaultPrevented()&&(e===C.HIDE_REASON.cancel||e===C.HIDE_REASON.escape)){var s=require("jira/jquery/plugins/isdirty"),o=s.getDirtyWarning();o&&!confirm(o)&&t.preventDefault()}})},C.ClassNames={DIALOG:"jira-dialog",HEADING_AREA:"jira-dialog-heading",CONTENT_AREA:"jira-dialog-content",DIALOG_OPEN:"jira-dialog-open",CONTENT_READY:"jira-dialog-content-ready",MODELESS_DIALOG:"jira-dialog-modeless",DIALOG_NOT_VISIBLE:"jira-dialog-not-visible"},C.WIDTH_PRESETS={small:360,medium:540,large:810},C.CONSTRAINTS={MODELESS_MIN_HEIGHT:240},C.HIDE_REASON={cancel:"cancel",escape:"esc",submit:"submit"},C}),AJS.namespace("AJS.FlexiPopup",null,require("jira/dialog/dialog")),AJS.namespace("JIRA.Dialog",null,require("jira/dialog/dialog"));;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-plugin:issues-api', location = 'content/js/search/IssuesApi.js' */
define("jira/issues/api",["require"],function(e){"use strict";var s=e("jira/featureflags/feature-manager"),i=s.isFeatureEnabled("gin-analytics-to-support-tti-definition"),t={getEffectiveIssue:function(){return null},getEffectiveIssueId:function(){return null},getEffectiveIssueKey:function(){return null}};return{initialize:function(e){t=e.searchPageModule},editFieldOnSelectedIssue:function(e){var s=JIRA.Issues.Api.getFieldsOnSelectedIssue(),i=s&&s.get(e),u=i&&i.isEditable();return u&&t&&JIRA.Issues.Application.execute("issueEditor:editField",i),u},focusSearch:function(){AJS.$(".criteria-selector:first, #advanced-search").focus().select()},getSelectedIssue:function(){return t.getEffectiveIssue()},getSelectedIssueId:function(){return t.getEffectiveIssueId()},getSelectedIssueKey:function(){return t.getEffectiveIssueKey()},getFieldsOnSelectedIssue:function(){var e=JIRA.Issues.Application.request("issueEditor:fields");return e.length?e:void 0},hasSavesInProgress:function(){return JIRA.Issues.Application.request("issueEditor:hasSavesInProgress")},isCurrentlyLoadingIssue:function(){return t.isCurrentlyLoadingIssue()},isSelectedIssueAccessible:function(){return t.isHighlightedIssueAccessible()},issueIsVisible:function(){return t.isIssueVisible()},nextIssue:function(e){t&&t.nextIssue&&(i?t.nextIssue(e):t.nextIssue())},openFocusShifter:function(){t.isIssueVisible()&&t.openFocusShifter()},prevIssue:function(e){t&&t.prevIssue&&(i?t.prevIssue(e):t.prevIssue())},refreshSelectedIssue:function(e){return JIRA.Issues.Application.request("issueEditor:refreshIssue",e)},returnToSearch:function(e){t.returnToSearch({ignoreDirtiness:e})},showInlineIssueLoadError:function(e){t.showInlineIssueLoadError(e)},switchLayouts:function(e){var s,i=-1,u=t.getCurrentLayout(),n=t.getSortedLayouts();_.find(n,function(e,s){if(u instanceof e.View)return i=s,!0}),s=n[(i+1)%n.length],s&&("split-view"===s.id?JIRA.Issues.Api.isNewIssueViewEnabled()&&AJS.$("body").trigger("global-issue-navigator-issue-selected"):"list-view"===s.id&&JIRA.Issues.Api.isNewIssueViewEnabled()&&AJS.$("body").trigger("global-issue-navigator-list-view-rendered"),t.changeLayout(s.id,e))},isQueryValid:function(){return t.queryModule.isQueryValid()},isFullScreenIssueVisible:function(){return t.isFullScreenIssueVisible&&t.isFullScreenIssueVisible()||!1},viewSelectedIssue:function(){if(JIRA.Issues.Api.isSelectedIssueAccessible()){var e=JIRA.Issues.Api.getSelectedIssueKey();t.isIssueVisible()||t.update({selectedIssueKey:e})}},toggleFilterPanel:function(){t.toggleFilterPanel()},waitForSavesToComplete:function(){var e=new jQuery.Deferred;window.setTimeout(function(){JIRA.Issues.Api.hasSavesInProgress()?JIRA.bind(JIRA.Events.INLINE_EDIT_SAVE_COMPLETE,function(){JIRA.Issues.Api.hasSavesInProgress()||e.resolve()}):e.resolve()},10)},updateIssue:function(e,s){return s=s||"thanks_issue_updated",t.updateIssue({key:e.key,id:e.id,action:JIRA.Issues.Actions.UPDATE,message:s,meta:{}})},toggleFullscreenIssue:function(){if(t.isFullScreenIssueVisible())t.standalone||t.returnToSearch();else{var e=t.isSplitViewLayout()?{reset:!0}:{};JIRA.Issues.Application.execute("navigation:navigate",{selectedIssueKey:t.getEffectiveIssueKey()},e)}},focusIssueList:function(){t.focusIssueList()},focusIssueEditor:function(){t.focusIssueEditor()},isNewIssueViewEnabled:function(){return"true"===AJS.$('meta[name="ajs-new-jira-issue-view-gin-enabled"]').attr("content")},getNewIssueViewToggleValue:function(){return AJS.$('meta[name="ajs-new-jira-issue-view-toggle-value"]').attr("content")},shouldSuppressLegacyShortcut:function(e){var s="e";return e===s?JIRA.Issues.Api.isNewIssueViewEnabled():JIRA.Issues.Api.isNewIssueViewEnabled()&&(t.isFullScreenIssueVisible()||t.isSplitViewLayout())}}}),AJS.namespace("JIRA.Issues.Api",null,require("jira/issues/api"));
//# sourceMappingURL=IssuesApi-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-plugin:issues-api', location = 'content/js/search/LayoutPreferenceManager.js' */
define("jira/issues/layout-preference-manager",["require"],function(e){"use strict";return{PREFERRED_LAYOUT_KEY:"jira.issues.preferred.layout.key",getPreferredLayoutKey:function(){return AJS.Meta.get(this.PREFERRED_LAYOUT_KEY)},setPreferredLayoutKey:function(e,s){s=_.defaults({},s,{ajax:!0}),AJS.Meta.set(this.PREFERRED_LAYOUT_KEY,e),s.ajax&&AJS.$.ajax({data:{layoutKey:e},type:"POST",headers:JIRA.Issues.XsrfTokenHeader,url:AJS.contextPath()+"/rest/issueNav/latest/preferredSearchLayout"}).done(function(){JIRA&&JIRA.Issues&&JIRA.Issues.Application&&JIRA.Issues.Application.fireSuccessSlaEvent&&JIRA.Issues.Application.fireSuccessSlaEvent("switchLayoutView")}).fail(function(e){JIRA&&JIRA.Issues&&JIRA.Issues.Application&&JIRA.Issues.Application.fireFailSlaEvent&&e.status>=500&&JIRA.Issues.Application.fireFailSlaEvent("switchLayoutView",{reason:"switch-layout-view-failed-with-status-code",statusCode:e.status})})}}}),AJS.namespace("JIRA.Issues.LayoutPreferenceManager",null,require("jira/issues/layout-preference-manager"));
//# sourceMappingURL=LayoutPreferenceManager-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-plugin:issuenav-legacy', location = 'content/js/search/LegacyIssueNavigatorShortcuts.js' */
define("jira/issues/search/legacyissuenavigatorshortcuts",["jira/issues/search/legacyissuenavigator","jquery"],function(e,t){"use strict";function s(){return r&&r.length>0}function i(e){var s=t(r[e]).find("td:first");t(r[e]).removeClass("focused"),a=s.attr("title"),s.removeAttr("title")}function n(e,s,i){var n=t(r[e]).addClass("focused").scrollIntoView();n.find("td").first().attr("title",a),i||u(e)}function o(e,t,s){var o=l[e];(o||0===o)&&(i(c),n(c=o,t,s))}function u(e){var s=t(r[e]);s.find(".hidden-link").removeAttr("tabIndex").focus()}var r,c,a,f={},l={};return f.initialize=function(){f.isNavigator=function(){return e.isNavigator()},f.selectNextIssue=function(){return JIRA.Issues.Api.nextIssue()},f.selectPreviousIssue=function(){return JIRA.Issues.Api.prevIssue()},f.viewSelectedIssue=function(){return JIRA.Issues.Api.viewSelectedIssue()},f.focusSearch=function(){JIRA.Issues.Api.focusSearch()}},f._quickEditSessionCompleteHandler=t.noop,f._quickCreateSubtaskSessionCompleteHandler=t.noop,f.isNavigator=t.noop,f.selectNextIssue=t.noop,f.selectPreviousIssue=t.noop,f.viewSelectedIssue=t.noop,f.focusSearch=t.noop,f.focusRow=function(e,i,n){s()&&(e?o(e,i,n):n||t(r[c]).find("a:first").focus())},t(document).ready(function(){if(e.isNavigator()){var i="true"===t("#focusSearch").attr("content");if(!i){var n=t(document.activeElement);n.is(":input")&&n.blur()}s()&&!t(document.activeElement).is(":input")&&setTimeout(function(){r.eq(c).scrollIntoView()},0),t(".issue-actions-trigger").click(function(){var e=t(this).closest("tr"),s=e.attr("rel");s&&f.focusRow(s,0,!0)})}}),f});
//# sourceMappingURL=LegacyIssueNavigatorShortcuts-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-plugin:issuenav-legacy', location = 'content/js/search/LegacyIssueNavigator.js' */
define("jira/issues/search/legacyissuenavigator",["jira/data/session-storage","jira/util/browser","jquery"],function(e,s,t){"use strict";var i={initialize:function(){i.isNavigator=function(){return JIRA.Issues.Api.issueIsVisible()}},isNavigator:t.noop,setIssueUpdatedMsg:function(s){s=s||{};var t=s.issueMsg,i=s.issueId,u=s.issueKey;i||(i=this.getSelectedIssueId(),u=this.getSelectedIssueKey()),i&&e.setItem("selectedIssueId",i),u&&e.setItem("selectedIssueKey",u),t&&e.setItem("selectedIssueMsg",t)},reload:function(){s.reloadViaWindowLocation()},isRowSelected:function(){return 0!==i.get$focusedRow().length},get$focusedRow:function(){return t("#issuetable tr.issuerow.focused")},getSelectedIssueKey:function(){var e=i.get$focusedRow();if(0!==e.length)return e.attr("data-issuekey")},getSelectedIssueId:function(){return i.get$focusedRow().attr("rel")}};return i});
//# sourceMappingURL=LegacyIssueNavigator-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-plugin:issuenav-legacy', location = 'content/js/search/LegacyIssue.js' */
define("jira/issues/search/legacyissue",["jira/util/browser","jira/util/events","jquery","wrm/context-path"],function(e,s,t,u){"use strict";var n={};return n.getStalker=function(){return t("#stalker")},n.getSubtaskContent=function(){return n.getSubtaskModule().find(".mod-content")},n.getSubtaskModule=function(){return t("#view-subtasks")},n.reload=function(){e.reloadViaWindowLocation()},n.refreshSubtasks=function(){var r=new t.Deferred,i=n.getSubtaskContent();return 0===i.length?(e.reloadViaWindowLocation(window.location.href+"#view-subtasks"),r.promise()):t.ajax({url:u+"/secure/ViewSubtasks.jspa?id="+n.getIssueId(),success:function(e){i.replaceWith(e),s.trigger("Issue.subtasksRefreshed",[n.getSubtaskContent()])}})},n.highlightSubtasks=function(e){t.each(e,function(e,s){t(".issuerow[data-issuekey='"+s.issueKey+"']").fadeInBackground()})},n.getIssueId=function(){return JIRA.Issues.Api.getSelectedIssueId()},n.getIssueKey=function(){return JIRA.Issues.Api.getSelectedIssueKey()},n.issueCreatedMessage=function(e,s){var t=s?"Subtask":"Issue",n='<a class="issue-created-key issue-link" data-issue-key="'+e.issueKey+'" href="'+u()+"/browse/"+e.issueKey+'">'+e.issueKey+" - "+AJS.escapeHtml(e.summary)+"</a>";return AJS.format("{0} {1} has been successfully created.",t,n)},n});
//# sourceMappingURL=LegacyIssue-min.js.map
;
;
/* module-key = 'jira.webresources:jira-issuenavigator', location = '/includes/jira/issue/Issue.js' */
define("jira/issue",["jira/issues/search/legacyissue"],function(e){return e}),AJS.namespace("jira.app.issue",null,require("jira/issue")),AJS.namespace("JIRA.Issue",null,require("jira/issue"));;
;
/* module-key = 'jira.webresources:jira-issuenavigator', location = '/includes/jira/issuenavigator/IssueNavigator.js' */
define("jira/issuenavigator/issue-navigator",["jira/issues/search/legacyissuenavigator"],function(a){return a}),AJS.namespace("jira.app.issuenavigator",null,require("jira/issuenavigator/issue-navigator")),AJS.namespace("JIRA.IssueNavigator",null,require("jira/issuenavigator/issue-navigator"));;
;
/* module-key = 'jira.webresources:jira-issuenavigator', location = '/includes/jira/issuenavigator/IssueNavigator.Shortcuts.js' */
define("jira/issuenavigator/issue-navigator/shortcuts",["jira/issues/search/legacyissuenavigatorshortcuts"],function(s){return s}),AJS.namespace("jira.app.issuenavigator.shortcuts",null,require("jira/issuenavigator/issue-navigator/shortcuts")),AJS.namespace("JIRA.IssueNavigator.Shortcuts",null,require("jira/issuenavigator/issue-navigator/shortcuts"));;
;
/* module-key = 'jira.webresources:jira-dialog-config', location = '/includes/jira/dialog/IssueDialogUtil.js' */
define("jira/dialog/dialog-util",["jira/dialog/dialog-register","jira/jquery/deferred","jira/issuenavigator/issue-navigator","jquery"],function(e,i,s,t){var u={};return u.getDefaultAjaxOptions=function(){if(JIRA&&"function"==typeof e.getDefaultAjaxOptions&&u.getDefaultAjaxOptions!==e.getDefaultAjaxOptions)return e.getDefaultAjaxOptions.apply(this,arguments);var i=s.get$focusedRow(),t=this.options.url||this.getRequestUrlFromTrigger();if(/id=\{0\}/.test(t)){if(!i.length)return!1;t=t.replace(/(id=\{0\})/,"id="+i.attr("rel"))}if(s.isNavigator()){var r=/[?&]id=([0-9]+)/.exec(t);this.issueId=r&&2===r.length?r[1]:null,this.issueId!==i.attr("rel")&&(s.Shortcuts.focusRow(this.issueId),i=s.get$focusedRow()),this.issueKey=s.getSelectedIssueKey()}return{url:t,data:{decorator:"dialog",inline:"true"}}},u.BeforeShowIssueDialogHandler=function(){var e=[];return{add:function(i){return e.push(i),this},execute:function(){var s=[];return 0===e.length?i().resolve():(t.each(e,function(e,i){s.push(i())}),t.when.apply(t,s))}}}(),u.storeCurrentIssueIdOnSucessfulSubmit=function(){s.isNavigator()&&s.setIssueUpdatedMsg({issueMsg:this.options.issueMsg,issueId:this.issueId,issueKey:this.issueKey})},u}),AJS.namespace("JIRA.Dialogs",null,require("jira/dialog/dialog-register")),AJS.namespace("JIRA.Dialogs.getDefaultAjaxOptions",null,require("jira/dialog/dialog-util").getDefaultAjaxOptions),AJS.namespace("JIRA.Dialogs.BeforeShowIssueDialogHandler",null,require("jira/dialog/dialog-util").BeforeShowIssueDialogHandler),AJS.namespace("JIRA.Dialogs.storeCurrentIssueIdOnSucessfulSubmit",null,require("jira/dialog/dialog-util").storeCurrentIssueIdOnSucessfulSubmit);;
;
/* module-key = 'jira.webresources:set-focus', location = '/includes/jira/focus/setFocus.js' */
define("jira/focus/set-focus",["jira/dialog/dialog","jquery"],function(e,t){var n="form.dont-default-focus",o="input:not(#issue-filter-submit), select, textarea, button, a.cancel",s=["."+e.ClassNames.CONTENT_AREA,"form.aui","form"],i=[],u=function(e,n,o,s){var i=!1;return t(n,e).not(o).find(s).each(function(){var e=t(this);if(e.is(":enabled, a")&&e.is(":visible"))return e.focus(),e.is(":text, :password, textarea")&&(e.is(".focus-select-end")?e.setCaretToPosition(e[0].value.length):e.setSelectionRange(0,e[0].value.length)),i=!0,!1}),i},c=function(){for(var e=0,t=i[i.length-1];!u(t.context,t.parentElementSelectors[e],t.excludeParentSelector,t.focusElementSelector)&&e<t.parentElementSelectors.length;)e++};return{FocusConfiguration:function(){this.context=document,this.excludeParentSelector=n,this.focusElementSelector=o,this.parentElementSelectors=s.slice(0),this.focusNow=c},triggerFocus:function(){0===i.length&&i.push(new this.FocusConfiguration),i[i.length-1].focusNow()},pushConfiguration:function(e){i.push(e)},popConfiguration:function(){i.pop()}}}),AJS.namespace("JIRA.setFocus",null,require("jira/focus/set-focus"));;
;
/* module-key = 'jira.webresources:set-focus', location = '/includes/jira/focus/initSetFocus.js' */
!function(r,u){r(function(){u.triggerFocus()})}(require("jquery"),require("jira/focus/set-focus"));;
;
/* module-key = 'jira.webresources:list', location = '/includes/ajs/group/Group.js' */
define("jira/ajs/group",["jira/ajs/control","jquery"],function(t,i){return t.extend({init:function(){this.items=[],this.index=-1,this._assignEvents("instance",this)},addItem:function(t){this.items.push(t),this._assignEvents("item",t)},_removeItem:function(t){var e=i.inArray(t,this.items);if(e<0)throw new Error("Group: item ["+t+"] is not a member of this group");t.trigger("blur"),e<this.index&&this.index--,this.items.splice(e,1),this._unassignEvents("item",t)},removeItem:function(t){t.trigger("remove")},removeAllItems:function(){for(;this.items.length;)this.items[0].trigger("remove")},shiftFocus:function(t){if(this.index===-1&&1===t&&(t=0),this.items.length>0){var i=(Math.max(0,this.index)+this.items.length+t)%this.items.length;this.items[i].trigger("focus")}},prepareForInput:function(){this._assignEvents("keys",document)},_events:{instance:{focus:function(){0!==this.items.length&&(this.index<0?this.items[0].trigger("focus"):this._assignEvents("keys",document))},blur:function(){this.index>=0?this.items[this.index].trigger("blur"):this._unassignEvents("keys",document)}},keys:{"aui:keydown":function(t){this._handleKeyEvent(t)}},item:{focus:function(t){var e=this.index;this.index=i.inArray(t.target,this.items),e<0?this.trigger("focus"):e!==this.index&&this.items[e].trigger("blur")},blur:function(t){this.index===i.inArray(t.target,this.items)&&(this.index=-1,this.trigger("blur"))},remove:function(t){this._removeItem(t.target)}}},keys:{}})}),AJS.namespace("AJS.Group",null,require("jira/ajs/group"));;
;
/* module-key = 'jira.webresources:list', location = '/includes/ajs/list/ItemDescriptor.js' */
define("jira/ajs/list/item-descriptor",["jira/ajs/descriptor","jquery"],function(e,t){return e.extend({init:function(e){e&&"object"==typeof e.meta&&(e.meta=JSON.stringify(e.meta)),this._super(e)},REQUIRED_PROPERTIES:{label:!0},_getDefaultOptions:function(){return{showLabel:!0}},styleClass:function(){return this.properties.styleClass},meta:function(){if(this.properties.meta)return JSON.parse(this.properties.meta)},value:function(){return this.properties.value},invalid:function(){return this.properties.invalid},labelSuffix:function(e){return"undefined"!=typeof e&&(this.properties.labelSuffix=e),this.properties.labelSuffix},title:function(){return this.properties.title},label:function(){return this.properties.label},disabled:function(e){return e?void(this.properties.disabled=e):this.properties.disabled},allowDuplicate:function(){return this.properties.allowDuplicate},removeOnUnSelect:function(e){return"undefined"!=typeof e&&(this.properties.removeOnUnSelect=e),this.properties.removeOnUnSelect},icon:function(){return this.properties.icon},fallbackIcon:function(){return this.properties.fallbackIcon},selected:function(e){return"undefined"!=typeof e&&(this.properties.selected=e),this.properties.selected},model:function(e){return e?void(this.properties.model=e):this.properties.model},keywords:function(){return this.properties.keywords},href:function(){return this.properties.href},highlighted:function(e){return e===!1&&(this.properties.html&&!this.dontUpdateLabelOnHighlightedChange&&(this.properties.label=t("<div>"+this.properties.html+"</div>").text(),this.properties.html=null),this.properties.highlighted=!1),this.properties.highlighted&&this.properties.html},html:function(){return this.properties.html},fieldText:function(){return this.properties.fieldText},noExactMatch:function(){return this.properties.noExactMatch}})}),AJS.namespace("AJS.ItemDescriptor",null,require("jira/ajs/list/item-descriptor"));;
;
/* module-key = 'jira.webresources:list', location = '/includes/ajs/list/MessageDescriptor.js' */
define("jira/ajs/list/message-descriptor",["jira/ajs/list/item-descriptor","jquery"],function(e,s){return e.extend({useAUI:function(){return this.properties.useAUI},messageID:function(){return this.properties.messageID},_getDefaultOptions:function(){return s.extend(this._super(),{useAUI:!0})}})}),AJS.namespace("AJS.MessageDescriptor",null,require("jira/ajs/list/message-descriptor"));;
;
/* module-key = 'jira.webresources:list', location = '/includes/ajs/list/GroupDescriptor.js' */
define("jira/ajs/list/group-descriptor",["jira/ajs/descriptor","jira/ajs/list/item-descriptor"],function(t,e){return t.extend({_getDefaultOptions:function(){return{showLabel:!0,label:"",items:[]}},placement:function(){return this.properties.placement},styleClass:function(){return this.properties.styleClass},weight:function(){return this.properties.weight},label:function(){return this.properties.label},footerText:function(t){return t?void(this.properties.footerText=t):this.properties.footerText},footerHtml:function(t){return t?void(this.properties.footerHtml=t):this.properties.footerHtml},actionBarHtml:function(t){return t&&(this.properties.actionBarHtml=t),this.properties.actionBarHtml},showLabel:function(){return this.properties.showLabel},items:function(t){return t?(this.properties.items=t,this):this.properties.items},addItem:function(t){return this.properties.items.push(t),this},id:function(){return this.properties.id},setModel:function(t){this.properties.model=t},replace:function(){return this.properties.replace},uniqueItemScope:function(){return this.properties.uniqueItemScope},description:function(){return this.properties.description},model:function(t){return t?void(this.properties.model=t):this.properties.model}})}),AJS.namespace("AJS.GroupDescriptor",null,require("jira/ajs/list/group-descriptor"));;
;
/* module-key = 'jira.webresources:list', location = '/includes/ajs/list/ItemDescriptorFactory.js' */
define("jira/ajs/list/item-descriptor-factory",["jira/ajs/list/item-descriptor","jira/ajs/list/message-descriptor"],function(e,s){function r(s,r){return s.isMessage?a(s,r):new e({label:s.label,styleClass:s.styleClass,value:s.value,keywords:s.keywords,meta:{groupIndex:r}})}function a(e,r){return new s({label:e.label,styleClass:e.styleClass,useAUI:e.useAUI,messageID:e.messageID,value:e.value,keywords:e.keywords,meta:{groupIndex:r}})}return{createItemDescriptor:r,createMessageDescriptor:a}}),AJS.namespace("AJS.ItemDescriptor.create",null,require("jira/ajs/list/item-descriptor-factory").createItemDescriptor),AJS.namespace("AJS.MessageDescriptor.create",null,require("jira/ajs/list/item-descriptor-factory").createMessageDescriptor);;
;
/* module-key = 'jira.webresources:list', location = '/includes/ajs/list/List.js' */
define("jira/ajs/list/list",["jira/util/logger","jira/util/formatter","jira/ajs/control","jira/ajs/list/group-descriptor","jira/ajs/list/item-descriptor","jira/ajs/input/mouse","jira/util/assistive","jira/util/browser","jquery","jira/featureflags/feature-manager","underscore"],function(t,e,i,s,n,o,r,a,l,c,h){function u(t){return t.trim().toLowerCase().replace(/[\s\.]+/g,"-")}var d=0;return i.extend({MAX_RESULT_LIMIT:2e3,init:function(t){t=t||{},t?this.options=l.extend(!0,this._getDefaultOptions(t),t):this.options=this._getDefaultOptions(t),this.maxInlineResultsDisplayed=this.options.maxInlineResultsDisplayed||this.MAX_RESULT_LIMIT,this._renders=l.extend({},this._renders,this.options.renderers),this.disabled=!0,this.reset();var e=this;this.options.selectionHandler&&this.$container.delegate(this.options.itemSelector,this.options.selectionEvent,function(t){e.options.selectionHandler.call(e,t)}),this.motionDetector.wait(),this.$container.delegate(this.options.itemSelector,"mousemove",function(){e.disabled||!e.motionDetector.moved&&!a.isSelenium()||(e.index=l.inArray(this,e.$visibleItems),e.focus(!0))})},_getDefaultOptions:function(){return{selectionEvent:"click",delegateTarget:document,matchingStrategy:"(^|.*?(\\s+|\\())({0})(.*)",itemSelector:"li.aui-list-item",hasLinks:!0,stallEventBind:!0,expandAllResults:!1,suggestionRole:"option"}},index:0,moveToFirst:function(){this.$visibleItems.length>0&&(this.index=0,this.focus())},moveToNext:function(){this.index<this.maxIndex?(++this.index,this.focus()):this.options.expandAllResults&&this.hasTooManySuggestions?(this._expandAllResults(),++this.index,this.focus()):this.$visibleItems.length>1&&(this.index=0,this.focus())},container:function(t){return t?(this.$container=l(t),void(this.containerSelector=t)):this.$container},getItemsByDescriptor:function(t){var e=l();return this.$container.find(this.options.itemSelector).each(function(){var i=l.data(this,"descriptor");i&&i.value()===t.value()&&(e=e.add(this))}),e},scrollContainer:function(){return this.options.scrollContainer?this.$container.find(this.options.scrollContainer):this.$container.parent()},_isScrollConstrained:function(){var t=this.scrollContainer()[0];return t.clientHeight<t.scrollHeight},moveToPrevious:function(){this.index>0?(--this.index,this.focus()):this.$visibleItems.length>0&&(this.index=this.$visibleItems.length-1,this.focus())},scrollActiveItemIntoView:function(){var t=this.$visibleItems.filter(".active"),e=this.scrollContainer(),i=e.scrollTop();if(0!==t.length){if(!this._isScrollConstrained())return void t.scrollIntoView({callback:l.proxy(this.motionDetector,"wait")});if(0!==t.closest(e).length){if(t.is(e.find(this.items).first()))return void this._scrollContainerTo(0);var s=t.offset().top-e.offset().top,n=e.outerHeight()-t.outerHeight()-s;s>=0?n<0&&this._scrollContainerTo(i-n):this._scrollContainerTo(i+s)}}},_scrollContainerTo:function(t){var e=this.scrollContainer();e.scrollTop()!==t&&(this.motionDetector.unbind(),this.motionDetector.wait(),e.scrollTop(t))},focus:function(t){this.$visibleItems.removeClass("active");var e=this.$visibleItems.eq(this.index);e.addClass("active"),this.lastFocusedItemDescriptor=e.data("descriptor"),this.trigger("itemFocus",e,this.lastFocusedItemDescriptor),t||this.scrollActiveItemIntoView()},motionDetector:new o.MotionDetector,disable:function(){this.disabled||(this._unassignEvents("delegateTarget",this.options.delegateTarget),this.disabled=!0,this.lastFocusedItemDescriptor=null)},enable:function(){var t=this;t.disabled&&(this.options.stallEventBind?window.setTimeout(function(){t._assignEvents("delegateTarget",t.options.delegateTarget)},0):t._assignEvents("delegateTarget",t.options.delegateTarget),t.disabled=!1,this._scrollContainerTo(0))},getFocused:function(){return this.$visibleItems.filter(".active")},reset:function(t){this.$container=l(this.options.containerSelector),this.items=l(this.options.itemSelector,this.$container).not(".no-suggestions"),this.$visibleItems=this._computeVisibleItems(),this.groups=l(this.options.groupSelector,this.$container),this.maxIndex=this.$visibleItems.length-1,this.index=this.$visibleItems[t]?t:0,this.focus(!0)},_computeVisibleItems:function(){return this.items.not(".hidden, .disabled")},selectValue:function(e){var i=this.$container.find(this.options.itemSelector).filter(function(){return l(this).parent().data("descriptor").value()==e});i.length||t.log("WARN: No List item found with Decriptor value '"+e+"'"),i.click()},_getLinkFromItem:function(t){var e;return t=l(t),e=t.is("a")?t:t.find("a")},_makeResultDiv:function(t,e){function i(){c.length>0&&(r.append(a._generateUngroupedOptions(c,e)),c=[])}var o=l('<div class="aui-list-fixed" role="presentation">'),r=l('<div class="aui-list-scroll" tabindex="-1" role="presentation">'),a=this,c=[];return l.each(t,function(t,l){var h,u;l instanceof s?(i(),h="fixed"===l.placement()?o:r,u=a._generateOptGroup(l,e),h.append(u)):l instanceof n&&c.push(l)}),i(),0===o.children().length?r:o.add(r)},_addResultToContainer:function(t){if(0===t.not(".aui-list-fixed").find(this.options.itemSelector).length){var e=this.$container.find(".aui-list-scroll");0===e.length&&(e=l('<div class="aui-list-scroll" tabindex="-1" role="presentation">').appendTo(this.$container));var i=this._render("noSuggestion");r.readText(i.text()),e.html(i)}else t.find("ul:last").addClass("aui-last"),this.$container.html(t)},generateListFromJSON:function(t,e,i){this.suggestions=0,this.exactMatchIndex=-1,this.lastFocusedIndex=-1,this.lastQuery=e,this.lastData=t,this.forceAllResults=i,this.hasTooManySuggestions=!1;var s=this._makeResultDiv(t,e);this.$container.hide(),this._addResultToContainer(s,e),this.$container.show();var n=this.exactMatchIndex>=0?this.exactMatchIndex:this.lastFocusedIndex;this.reset(n)},appendToGroupDescriptor:function(t,e){var i=h.find(this.lastData,function(e){return e.id()===t});h.forEach(e,function(t){i.addItem(t)})},_highlight:function(t,e){return this.options.matchingHighlighter?this.options.matchingHighlighter(t,e):t.label().replace(e,function(t,e,i,s,n){var o=l("<div>");return e&&o.append(l("<span>").text(e)),s&&o.append(l("<em>").text(s)),n&&o.append(l("<span>").text(n)),o.html()})},_generateOption:function(t,e,i){var s;if(!t.highlighted()&&i&&i.test(t.label())&&(s=this._highlight(t,i)),this.exactMatchIndex<0){var n=l.trim(t.label()).toLowerCase();t.noExactMatch()||n!==l.trim(e).toLowerCase()?this.lastFocusedIndex<0&&this.lastFocusedItemDescriptor&&n===l.trim(this.lastFocusedItemDescriptor.label()).toLowerCase()&&(this.lastFocusedIndex=this.suggestions):this.exactMatchIndex=this.suggestions}return this.suggestions++,this._render("suggestion",t,s)},_filterOptions:function(t,i,s){if(!i)return t;for(var n=[],o=new RegExp(e.format(".*{0}.*",i),"i"),r=0,a=t.length;r<a;r++){var l=this._filterOption(t[r],o,s);l&&n.push(l)}return n},_filterOption:function(t,e,i){var s;if(t.highlighted())s=t;else if(i.test(t.label()))s=t;else if(t.keywords()){for(var n=[],o=""+t.keywords(),r=o.split(","),a=0;a<r.length;a++){var l=r[a];e.test(l)&&n.push(l)}n.length&&(t.labelSuffix(" "+n.join(", ")),s=t)}return s},_addOptionsToContainer:function(t,e,i,s){for(var n=this,o=this.maxInlineResultsDisplayed,a=!1,c=this.forceAllResults,h=[],u=0,d=t.length;u<d;u++){var p=t[u];if(!(u<o||c)){this.hasTooManySuggestions=!0;var g=n._render("tooManySuggestions",t.length-u);r.readText(g.text()),h.push(g[0]);break}var f=n._generateOption(p,i,s);f&&(a=!0,h.push(f[0]))}return e.html(l(h)),a},_filterAndAddOptions:function(t,i,s){var n,o;return s&&(n=RegExp.escape(s),o=new RegExp(e.format(this.options.matchingStrategy,n),"i"),t=this._filterOptions(t,n,o)),this.options.maxResultsDisplayedPerGroup&&(t=t.slice(0,this.options.maxResultsDisplayedPerGroup)),this._addOptionsToContainer(t,i,s,o)},_generateUngroupedOptions:function(t,e){var i=this._render("ungroupedSuggestions"),s=this._filterAndAddOptions(t,i,e);if(s)return i},_generateOptGroup:function(t,e){var i,s=l(),n=this._render("suggestionGroup",t),o=t.items();if(i=this._filterAndAddOptions(o,n,e))return t.label()&&t.showLabel()!==!1&&(s=s.add(this._render("suggestionGroupHeading",t))),t.footerText()?n.append(this._render("suggestionsGroupFooter",t.footerText())):t.footerHtml()&&n.append(t.footerHtml()),t.actionBarHtml()&&n.prepend(t.actionBarHtml()),s=s.add(n)},_expandAllResults:function(){this.generateListFromJSON(this.lastData,this.lastQuery,!0)},_events:{delegateTarget:{"aui:keydown":function(t){this._handleKeyEvent(t)}}},_renders:{suggestion:function(t,e){d+=1;var i=t.fieldText()||t.label(),s=AJS.escapeHtml(u(i)),n=l('<li class="aui-list-item"><a class="aui-list-item-link" role="presentation" /></li>').attr({role:this.options.suggestionRole,id:s+"-"+d}),o=n.children();if(n.addClass("aui-list-item-li-"+s),t.selected()&&n.addClass("aui-checked"),this.options.hasLinks&&o.attr("href",t.href()||"#"),t.styleClass()&&o.addClass(t.styleClass()),e?o.html(e):t.html()?o.html(t.html()):o.text(t.label()),t.labelSuffix()){var r=l("<span class='aui-item-suffix' />").text(t.labelSuffix());o.append(r)}if(t.icon()&&"none"!==t.icon()){var a=l('<img class="icon"  alt="" />');a.attr("src",t.icon()),o.addClass("aui-iconised-link").prepend(a)}return t.title()&&o.prop("title",t.title()),n.data("descriptor",t),n},noSuggestion:function(){return l('<li class="no-suggestions">').text("No Matches")},tooManySuggestions:function(t){if(this.options.expandAllResults){var i=this,s=l(["<button type='button' class='aui-button aui-button-link view-all'>",e.format("View all ({0} more)",t),"</button>"].join("")),n=l('<li class="no-suggestions"></li>').append(s);return s.click(function(t){i._expandAllResults(),t.stopPropagation()}),s=null,n}return l('<li class="no-suggestions">'+e.format("{0} more options. Continue typing to refine further.",t)+"</li>")},ungroupedSuggestions:function(){return l("<ul>")},suggestionGroup:function(t){return l("<ul/>").attr({id:u(t.label()),class:"aui-list-section","aria-label":t.label()}).addClass(t.styleClass()).data("descriptor",t)},suggestionGroupHeading:function(t){var e=l("<h5 />").text(t.label()).addClass(t.styleClass()).data("descriptor",t);return t.description()&&l("<span class='aui-section-description' />").text(" ("+t.description()+")").appendTo(e),e},suggestionsGroupFooter:function(t){return l("<li class='aui-list-section-footer' />").text(t)}},_acceptSuggestion:function(t){!t instanceof l&&(t=l(t));var e=this._getLinkFromItem(t);if(e.length){var i=new l.Event("click");e.trigger(i,[e]),i.isDefaultPrevented()||(window.location.href=e.attr("href"))}},getAllItems:function(){return this.$container.find(this.options.itemSelector)},_acceptUserInput:function(t){t.triggerHandler("blur")},_handleSectionByKeyboard:function(t){var e=this.getFocused(),i=l(t.target);if(0!==e.length){if(this._latestQuery&&l.trim(i.val())!==this._latestQuery){var s=i.val().toLowerCase().match(/\S+/g);if(s){var n=this.lastFocusedItemDescriptor&&this.lastFocusedItemDescriptor.html(),o=n?l("<div>").html(n):e,r=[];o.find("em,b").each(function(){var t=l(this),e=l(t.attr("nextSibling")).text().toLowerCase().match(/^\S*/)[0];l.each(t.text().toLowerCase().match(/\S+/g),function(t,i){r.push(i+e)})});for(var a=0;a<s.length;a++){for(var c=s[a],h=c.length,u=!1,d=0;d<r.length;d++)if(r[d].slice(0,h)===c){u=!0;break}if(!u)return void this._acceptUserInput(i)}}}this.scrollActiveItemIntoView(),this.options.selectionHandler&&!this.options.selectionHandler.call(this,t)||this._acceptSuggestion(e)}},_isValidInput:function(){return!this.disabled&&this.$container.is(":visible")},keys:{Down:function(t){this.moveToNext(),t.preventDefault()},Up:function(t){this.moveToPrevious(),t.preventDefault()},Return:function(t){this._handleSectionByKeyboard(t),t.preventDefault()}},_buildElementId:u})}),AJS.namespace("AJS.List",null,require("jira/ajs/list/list"));;
;
/* module-key = 'jira.webresources:list', location = '/includes/ajs/list/PageableList.js' */
define("jira/ajs/list/pageable-list",["jira/util/formatter","jira/ajs/list/list","jira/ajs/list/group-descriptor","jquery","underscore"],function(t,e,i,s,n){return e.extend({init:function(t){var e={pageSize:50,pagingThreshold:100};t=s.extend(!0,e,t),this._super(t),this.pageSize=this.options.pageSize},generateListFromJSON:function(e,s,r){var a,o,h=[],g=0;if(this.pageNumber=this.pageNumber||1,s!==this.lastQuery&&(this.pageNumber=1),s){a=RegExp.escape(s),o=new RegExp(t.format(this.options.matchingStrategy,a),"i");for(var l=0;l<e.length;l++)h.push(new i(n.omit(e[l].allProperties(),"items"))),h[l].items(this._filterOptions(e[l].items(),a,o)),g+=h[l].items().length}else{h=e;for(var l=0;l<e.length;l++)g+=e[l].items().length}g<this.options.pagingThreshold&&(r=!0),this._super(h,s,r)},_filterAndAddOptions:function(e,i,s){var n;return s&&(n=new RegExp(t.format(this.options.matchingStrategy,RegExp.escape(s)),"i")),this._addOptionsToContainer(e,i,s,n)},_addOptionsToContainer:function(t,e,i,n){for(var r=!1,a=[],o=this.pageNumber*this.pageSize,h=0,g=t.length;h<g;h++){var l=t[h];if(this.forceAllResults||this.suggestions<o){var u=this._generateOption(l,i,n);u&&(r=!0,a.push(u[0]))}}return e.children().length?e.find(".aui-list-item:last").after(s(a)):e.html(s(a)),r},addNextPage:function(){var t,e,i,s=this.suggestions;this.pageNumber++;for(var n=0;n<this.lastData.length;n++)t=this.lastData[n],t.items().length>s&&(e=this.$container.find("#"+this._buildElementId(t.label())),0===e.length?(e=this._generateOptGroup(t,this.lastQuery),i="fixed"===t.placement()?this.$container.find(".aui-list-fixed"):this.$container.find(".aui-list-scroll"),i.append(e)):this._filterAndAddOptions(t.items().slice(s),e,this.lastQuery)),s-=t.items().length;return this.reset(this.index),this.suggestions},disable:function(){this._super(),this.pageNumber=1},showPageRenderError:function(){this.$container.find(".aui-last").append(this._render("errorRenderingPage"))},_renders:{errorRenderingPage:function(){return s("<li class='no-suggestions' />").text("Error rendering next page of results. Close dropdown and try again.")}},isDisplayedAllItems:function(){var t=n.reduce(this.lastData,function(t,e){return t+e.items().length},0);return t===this.suggestions}})});;
;
/* module-key = 'jira.webresources:list', location = '/includes/ajs/list/ListWithMessages.js' */
define("jira/ajs/list/list-with-messages",["jira/ajs/list/list","jira/ajs/list/message-descriptor","jquery"],function(s,e,a){var t=s.extend({_filterOption:function(s,a,t){return s instanceof e?s:this._super(s,a,t)},_computeVisibleItems:function(){return this.items.not(".hidden, .disabled, .nofocus")},_generateOption:function(s,a,t){return s instanceof e?this._render(s.useAUI()?"AUImessage":"message",s):this._super(s,a,t)}});return t.prototype._renders.message=function(s){var e=s.messageID()||s.fieldText()||s.label(),t=AJS.escapeHtml(a.trim(e).toLowerCase()).replace(/[\s\.]+/g,"-"),i=a('<li class="aui-list-item nofocus">').addClass("aui-list-item-li-"+t),l=a('<span class="aui-list-item-message" />');return s.styleClass()&&l.addClass(s.styleClass()),l.text(s.label()),i.append(l).data("descriptor",s),i},t.prototype._renders.AUImessage=function(s){var e=s.messageID()||s.fieldText()||s.label(),t=AJS.escapeHtml(a.trim(e).toLowerCase()).replace(/[\s\.]+/g,"-"),i=a('<li class="aui-list-item nofocus aui-list-item-li-'+t+'">'),l=a('<div class="aui-list-item-aui-message aui-message" />'),n=a('<span class="aui-icon"/>'),r=a("<p />");return s.styleClass()?(l.addClass(s.styleClass()),n.addClass("icon-"+s.styleClass())):n.addClass("icon-generic"),r.text(s.label()),l.append(n).append(r),i.append(l).data("descriptor",s),i},t}),AJS.namespace("AJS.ListWithMessages",null,require("jira/ajs/list/list-with-messages"));;
;
/* module-key = 'jira.webresources:select-model', location = '/includes/ajs/select/SelectModel.js' */
define("jira/ajs/select/select-model",["jira/ajs/control","jira/ajs/list/group-descriptor","jira/ajs/list/item-descriptor","jira/util/objects","jquery"],function(e,t,i,n,s){return e.extend({init:function(e){var t=this,i={};e&&(e instanceof s?i.element=e:e instanceof Element||"string"==typeof e?i.element=s(e):i=e),this._setOptions(i),this.$element=this.options.element.hide(),this.type=this.$element.attr("multiple")?"multiple":"single",this.id=this.$element.attr("id")||this.$element.attr("name"),"single"===this.type&&this.$element.attr("multiple","multiple"),this.$element.bind("reset",function(){t._parseDescriptors()}),this._parseDescriptors()},hasOptionByValue:function(e){return this.$element.find('option[value="'+e+'"]').length>0},getSelectedTexts:function(){for(var e=[],t=this.getDisplayableSelectedDescriptors(),i=0;i<t.length;i++)e.push(t[i].label());return e},putOption:function(e,t,i){var n;if(this.hasOptionByValue(e)){var r=this.getDescriptor(e);t||(t=r.label()),n=r.model()}else n=s("<option/>"),this.$element.append(n);i&&n.addClass("hidden"),t&&n.text(t),n.attr("value",e),this._parseOption(n)},changeSelectionByValue:function(e){var t=this.getDescriptor(e);if(t){var i=this.setSelected(t);return i||this.$element.trigger("change",t),!0}return!1},_getFreeInputEl:function(){return this.$element.find(".free-input")},removeFreeInputVal:function(){this._getFreeInputEl().remove()},updateFreeInput:function(e){var t=this._getFreeInputEl();e=s.trim(e),e?(t.length||(t=s("<option class='free-input' />").appendTo(this.$element)),t.attr({value:e,selected:"selected"})):t.remove()},_getDefaultOptions:function(){return{}},getSelectedValues:function(){for(var e=[],t=this.getDisplayableSelectedDescriptors(),i=0;i<t.length;i++)e.push(t[i].value());return e},setSelected:function(e){var t=this,i=!1,n=!1,r=this.$element.find("option").not(this._getExclusions()).filter(function(){return this.value===e.value()});if("single"===this.type){if(this.getValue()===e.value())return n;r=r.first(),this.$element.find("option:selected").not(this._getExclusions()).each(function(e,i){var n=s(this).data("descriptor");r[0]!==i&&t.setUnSelected(n)})}if(r.each(function(){var e=s(this);i=!0,n=!e.is(":selected"),e.attr("selected","selected").data("descriptor").selected(!0)}),!i){e.selected(!0),e.removeOnUnSelect(!0);var l=this._render("option",e);l.attr("selected","selected"),this.$element.append(l),n=!0}return e.highlighted(!1),n&&this.$element.trigger("change",e),n},setAllSelected:function(){var e=this;s(this.getDisplayableUnSelectedDescriptors()).each(function(){e.setSelected(this)})},setAllUnSelected:function(){var e=this;s(this.getDisplayableSelectedDescriptors()).each(function(){e.setUnSelected(this)})},setUnSelected:function(e){var t=this,i=e.value();this.$element.find("option:selected").not(this._getExclusions()).filter(function(){return s(this).attr("value")===i}).each(function(){var e=s(this);e.data("descriptor").selected(!1),t.options.removeOnUnSelect||e.data("descriptor").removeOnUnSelect()?e.remove():e.removeAttr("selected")})},remove:function(e){e&&e.model()&&e.model().remove()},getDescriptor:function(e){var t;return e=s.trim(e.toLowerCase()),s.each(this.getAllDescriptors(!1),function(i,n){if(e===s.trim(n.label().toLowerCase())||e===s.trim(n.value().toLowerCase()))return t=n,!1}),t},_parseOption:function(e){var t,n,r;return e=s(e),this.options.removeNullOptions&&this._hasNullValue(e)?(e.remove(),null):(n=e.attr("data-icon"),r=e.attr("data-fallback-icon"),t=new i({styleClass:e.prop("className"),value:e.val(),invalid:e.hasClass("invalid_sel"),fieldText:e.attr("data-field-text"),title:e.attr("title"),meta:e.data("meta"),label:e.attr("data-field-label")||s.trim(e.text()),icon:n?n:e.css("backgroundImage").replace(/url\(['"]?(.*?)['"]?\)/,"$1"),fallbackIcon:r?r:"none",selected:e.prop("selected"),removeOnUnSelect:!!e.data("remove-on-unselect"),model:e}),e.data("descriptor",t),t)},_hasNullValue:function(e){return e.val()<0},_parseDescriptors:function(){function e(e){var n={label:e.attr("label"),placement:e.attr("data-placement"),footerText:e.attr("data-footer-text"),styleClass:e.prop("className"),model:e,items:i(e)},s=e.data("weight");s&&(n.weight=+s),e.data("descriptor",new t(n))}function i(e){var t=s("option",e),i=[];return s.each(t,function(){i.push(n._parseOption(this))}),i}var n=this,r=this.$element.children();r.each(function(t){var i=r.eq(t);i.is("optgroup")?e(i):i.is("option")&&(i.attr("data-placeholder")?(n.placeholder=i.text(),i.remove()):n._parseOption(i))})},getPlaceholder:function(){return this.placeholder},_getExclusions:function(){return".free-input"},getValue:function(){return"single"===this.type?this.$element.val()&&this.$element.val()[0]:this.$element.val()},getDisplayableSelectedDescriptors:function(){var e=[];return this.$element.find("option:selected").not(this._getExclusions()).each(function(){e.push(s.data(this,"descriptor"))}),e},getDisplayableUnSelectedDescriptors:function(){var e=[];return this.$element.find("option").not(":selected").not(this._getExclusions()).each(function(){e.push(s.data(this,"descriptor"))}),e},getAllDescriptors:function(e){var i,r=[];return this.$element.children().each(function(){var l,a=s(this);a.is("option")?a.data("descriptor")&&r.push(a.data("descriptor")):a.is("optgroup")&&(e!==!1&&(i=n.copyObject(a.data("descriptor").allProperties(),!1),i.items=[],l=new t(i),r.push(l)),a.children("option").each(function(){var t=s(this),i=t.data("descriptor");i&&(e!==!1?l.addItem(i):r.push(i))}))}),r},clearUnSelected:function(){this.$element.find("option:not(:selected)").not(this._getExclusions()).remove()},getUnSelectedDescriptors:function(){function e(e){var t=e.value().toLowerCase();return!(l[t]||a[t]&&e.allowDuplicate()===!1)&&(a[t]=!0,!0)}var i=this,r=[],l={},a={},o=this.getDisplayableSelectedDescriptors();s.each(o,function(e,t){l[t.value().toLowerCase()]=!0});var c=this.$element.children();return c.each(function(){var l,a,o=s(this);o.is("option")&&!this.selected?(l=s.data(this,"descriptor"),e(l)&&r.push(l)):o.is("optgroup")&&(a=n.copyObject(o.data("descriptor").allProperties(),!1),a.items=[],l=new t(a),r.push(l),o.find("option").not(i._getExclusions()).each(function(t){if(!t.selected){var i=s.data(this,"descriptor");e(i)&&l.addItem(i)}}))}),r},_renders:{option:function(e){var t=e.label(),i=e.fieldText()||t,n=new Option(i,e.value()),r=s(n),l=e.icon();return n.title=e.title(),i!=t&&r.data("field-label",t),e.selected()&&r.attr("selected","selected"),s.data(n,"descriptor",e),e.model(r),l&&r.css("backgroundImage","url("+l+")"),r},optgroup:function(e){var t=s("<optgroup />").addClass(e.styleClass()).attr("label",e.label());return e.model(t),t.data("descriptor",e),e.id()&&t.attr("id",e.id()),t}}})}),AJS.namespace("AJS.SelectModel",null,require("jira/ajs/select/select-model"));;
;
/* module-key = 'jira.webresources:select-model', location = '/includes/ajs/select/SuggestionCollectionModel.js' */
define("jira/ajs/select/suggestion-collection-model",["jira/ajs/control","jira/ajs/list/group-descriptor","jira/ajs/list/item-descriptor","jira/util/objects","jquery","underscore"],function(e,t,s,i,r,n){return e.extend({init:function(e){e.element?e.element=r(e.element):e.element=r(e),this._setOptions(e),this.$element=this.options.element.hide(),this.type=this.$element.attr("data-multiple")?"multiple":"single",this.id=this.$element.attr("id")||this.$element.attr("name"),this.$optionsContainer=this.$element.siblings("#"+this.id+"-options"),this.selectedDescriptors=[],this.groupFilter=!1,this._parseDescriptors()},_getDefaultOptions:function(){return{}},_setValue:function(){var e=this.selectedDescriptors.map(function(e){return e.value()});this.$element.val(e.join(","))},getSelectedValues:function(){for(var e=[],t=0;t<this.selectedDescriptors.length;t++)e.push(this.selectedDescriptors[t].value());return e},setSelected:function(e,t){t="undefined"==typeof t||t,e=this._descriptor(e);var s=n.filter(this.getAllDescriptors(!1),function(t){return t.value()===e.value()});if(0===s.length)return!1;if("single"===this.type){if(e.value()===this.getValue())return!0;this.setAllUnSelected(),s=s.slice(0,1)}else s=n.filter(s,function(e){return e.selected()!==!0});return Array.prototype.push.apply(this.selectedDescriptors,s),n.each(s,function(e){e.selected(!0)}),this._setValue(),e.highlighted(!1),t&&this.$element.trigger("change",e),!0},setAllSelected:function(){var e=this;r(this.getDisplayableUnSelectedDescriptors()).each(function(){e.setSelected(this)})},setAllUnSelected:function(){n.each(this.selectedDescriptors,function(e){e.selected(!1)}),this.selectedDescriptors=[],this._setValue()},setUnSelected:function(e){e=this._descriptor(e);for(var t=0;t<this.selectedDescriptors.length;t++)this.selectedDescriptors[t].value()===e.value()&&(this.selectedDescriptors[t].selected(!1),this.selectedDescriptors.splice(t,1),t--);this._setValue()},remove:function(e){e=this._descriptor(e);for(var s=0;s<this.descriptors.length;s++)if(this.descriptors[s]instanceof t)for(var i=0;i<this.descriptors[s].items().length;i++)this.descriptors[s].items()[i].value()===e.value()&&(this.descriptors[s].items().splice(i,1),i--);else this.descriptors[s].value()===e.value()&&(this.descriptors.splice(s,1),s--)},getDescriptor:function(e){var t;return e=r.trim(e.toLowerCase()),r.each(this.getAllDescriptors(!1),function(s,i){if(e===r.trim(i.label().toLowerCase())||e===r.trim(i.value().toLowerCase()))return t=i,!1}),t},_parseDescriptors:function(){var e,i,r=[];if(r=this.$optionsContainer.data("suggestions")||[],this.descriptors=[],"string"==typeof r)try{r=JSON.parse(r),this.$optionsContainer.data("suggestions",r)}catch(e){r=[]}for(var n=0;n<r.length;n++)if("undefined"!=typeof r[n].items){e=new t({label:r[n].label}),i=r[n].items;for(var l=0;l<i.length;l++){var c=new s(i[l]);c.selected()===!0&&("single"===this.type&&this.selectedDescriptors.length>0?c.selected(!1):this.selectedDescriptors.push(c)),e.addItem(c)}this.descriptors.push(e)}else c=new s(r[n]),this.descriptors.push(c),c.selected()===!0&&("single"===this.type&&this.selectedDescriptors.length>0?c.selected(!1):this.selectedDescriptors.push(c));this._setValue()},getPlaceholder:function(){return this.placeholder},getValue:function(){return this.$element.val()},getDisplayableSelectedDescriptors:function(){return this.selectedDescriptors.slice()},getDisplayableUnSelectedDescriptors:function(){return n.filter(this.getAllDescriptors(!1),function(e){return this.selectedDescriptors.indexOf(e)===-1}.bind(this))},getAllDescriptors:function(e){var s=[];if(this.groupFilter!==!1)for(var i in this.descriptors)this.descriptors[i]instanceof t&&this.descriptors[i].label()==this.groupFilter&&(s=this.descriptors[i].items().slice());else if(e===!1)for(var i in this.descriptors)this.descriptors[i]instanceof t?s=s.concat(this.descriptors[i].items()):this.descriptors.hasOwnProperty(i)&&s.push(this.descriptors[i]);else s=this.descriptors.slice();return s},clearUnSelected:function(){var e=this;this.descriptors=n.filter(this.descriptors,function(s){return s instanceof t?(s.items(n.filter(s.items(),function(t){return e.selectedDescriptors.indexOf(t)!==-1})),!0):e.selectedDescriptors.indexOf(s)!==-1})},getUnSelectedDescriptors:function(){for(var e=this,s=[],i={},r={},l=function(e){var t=e.value().toLowerCase();return!(r[t]&&(!i[t]||e.allowDuplicate()!==!1))&&(i[t]=!0,!0)},c=0;c<this.selectedDescriptors.length;c++)r[this.selectedDescriptors[c].value().toLowerCase()]=!0;return n.each(this.descriptors,function(i){var r;i instanceof t?e.groupFilter===!1?(r=n.clone(i.allProperties()),r.items=n.filter(i.items(),l),s.push(new t(r))):e.groupFilter===i.label()&&(s=s.concat(n.filter(i.items(),l))):e.groupFilter===!1&&l(i)&&s.push(i)}),s},setFilterGroup:function(e){for(var s=0;s<this.descriptors.length;s++)if(this.descriptors[s]instanceof t&&this.descriptors[s].label()===e)return this.groupFilter=e,!0;return!1},clearFilterGroup:function(){this.groupFilter=!1},_descriptor:function(e){return"string"==typeof e&&(e=new s({value:e,label:e})),e}})});;
;
/* module-key = 'jira.webresources:dropdown', location = '/includes/ajs/dropdown/Dropdown.constants.js' */
define("jira/ajs/dropdown/dropdown-constants",{TRIGGER_SELECTOR:".aui-dropdown-trigger",CONTENT_SELECTOR:".aui-dropdown-content"});;
;
/* module-key = 'jira.webresources:dropdown', location = '/includes/ajs/dropdown/Dropdown.ListItem.js' */
define("jira/ajs/dropdown/dropdown-list-item",["jira/ajs/layer/layer-constants","jira/ajs/control","jira/ajs/input/mouse","jquery","jira/util/top-same-origin-window"],function(t,e,s,i,n){var o=n(window),a=e.extend({init:function(t){this._setOptions(t),this.$element=i(this.options.element),this.hasFocus=!1,this._assignEvents("instance",this),this._assignEvents("element",this.$element)},_getDefaultOptions:function(){return{element:null,autoScroll:!0,focusClass:t.ACTIVE_CLASS}},_events:{instance:{focus:function(t){this.hasFocus=!0,this.$element.addClass(this.options.focusClass),t.noscrolling||(a.MOTION_DETECTOR.unbind(),this.isWaitingForMove=!0,this.options.autoScroll&&this.$element.scrollIntoView(a.SCROLL_INTO_VIEW_OPTIONS))},blur:function(){this.hasFocus=!1,this.$element.removeClass(this.options.focusClass)},accept:function(){var t=new i.Event("click"),e=this.$element.is("a[href]")?this.$element:this.$element.find("a[href]");e.trigger(t),t.isDefaultPrevented()||(o.location=e.attr("href"))}},element:{mousemove:function(){(this.isWaitingForMove&&a.MOTION_DETECTOR.moved&&!this.hasFocus||!this.hasFocus)&&(this.isWaitingForMove=!1,this.trigger({type:"focus",noscrolling:!0}))}}}});return a.MOTION_DETECTOR=new s.MotionDetector,a.SCROLL_INTO_VIEW_OPTIONS={duration:100,callback:function(){a.MOTION_DETECTOR.wait()}},a}),AJS.namespace("AJS.Dropdown.ListItem",null,require("jira/ajs/dropdown/dropdown-list-item"));;
;
/* module-key = 'jira.webresources:dropdown', location = '/includes/ajs/dropdown/Dropdown.ListItemGroup.js' */
define("jira/ajs/dropdown/dropdown-list-item-group",["jira/ajs/group"],function(t){return t.extend({keys:{Up:function(t){this.shiftFocus(-1),t.preventDefault()},Down:function(t){this.shiftFocus(1),t.preventDefault()},Return:function(t){this.items[this.index].trigger("accept"),t.preventDefault()}}})}),AJS.namespace("AJS.Dropdown.ListItemGroup",null,require("jira/ajs/dropdown/dropdown-list-item-group"));;
;
/* module-key = 'jira.webresources:dropdown', location = '/includes/ajs/dropdown/Dropdown.OptionsDescriptor.js' */
define("jira/ajs/dropdown/dropdown-options-descriptor",["jira/ajs/descriptor","jira/ajs/dropdown/dropdown-constants","jira/ajs/dropdown/dropdown-list-item-group","jira/ajs/contentretriever/ajax-content-retriever","jira/ajs/contentretriever/deferred-content-retriever","jira/ajs/contentretriever/dom-content-retriever","jquery"],function(t,e,r,i,n,o,s){return t.extend({init:function(t){if(this._super(t),!this.content()&&!this.trigger())throw new Error("Dropdown.OptionsDescriptor: expected either [content] or [trigger] to be defined.");this.trigger()&&!this.content()?this.content(this.trigger().next(e.CONTENT_SELECTOR)):this.content()&&!this.trigger()&&this.content(this.trigger().next(e.TRIGGER_SELECTOR)),this.trigger()&&!this.content()?(this.ajaxOptions()?this.ajaxOptions().url||(this.ajaxOptions().url=this.trigger().attr("href")):this.trigger().attr("href")&&this.ajaxOptions(this.trigger().attr("href")),this.contentRetriever(new i(this.ajaxOptions()))):this.content()&&(s.isFunction(this.content())?this.contentRetriever(new n(this.content())):this.contentRetriever(new o(this.content()))),this.listController()||this.listController(new r)},_getDefaultOptions:function(){return{trigger:null,ajaxOptions:null,autoScroll:!0}},content:function(t){return t?(t=s(t),void(t.length&&(this.properties.content=t))):this.properties.content},trigger:function(t){return t?void(this.properties.trigger=t):this.properties.trigger},contentRetriever:function(t){return t?void(this.properties.contentRetriever=t):this.properties.contentRetriever},listController:function(t){return t?void(this.properties.listController=t):this.properties.listController},focusFirstItem:function(t){return t?void(this.properties.focusFirstItem=t):this.properties.focusFirstItem},autoScroll:function(t){return"undefined"!=typeof t&&(this.properties.autoScroll=!!t),this.properties.autoScroll},ajaxOptions:function(t){return t?void(this.properties.ajaxOptions=t):this.properties.ajaxOptions},loop:function(t){return"undefined"==typeof t?this.properties.loop:void(this.properties.loop=t)},alignment:function(t){return t?void(this.properties.alignment=t):this.properties.alignment},eventDelegator:function(t){return"undefined"==typeof t?this.properties.eventDelegator:void(this.properties.eventDelegator=t)}})}),AJS.namespace("AJS.Dropdown.OptionsDescriptor",null,require("jira/ajs/dropdown/dropdown-options-descriptor"));;
;
/* module-key = 'jira.webresources:dropdown', location = '/includes/ajs/dropdown/Dropdown.js' */
define("jira/ajs/dropdown/dropdown",["jira/ajs/control","jira/ajs/layer/inline-layer","jira/ajs/layer/layer-constants","jira/ajs/dropdown/dropdown-constants","jira/ajs/dropdown/dropdown-list-item","jira/ajs/dropdown/dropdown-options-descriptor","jquery"],function(t,r,o,i,e,n,s){var l=t.extend({CLASS_SIGNATURE:"AJS_DROPDOWN",init:function(t){var o,i=this;t instanceof n?this.options=t:this.options=new n(t),o=this.options.allProperties(),o.offsetTarget||(o.offsetTarget=o.trigger),this.layerController=new r(this.options.allProperties()),this.layerController._validateClickToClose=function(t){return t.target!==this.offsetTarget()[0]&&(t.target!==this.layer()[0]&&!(this.offsetTarget().has(t.target).length>0))},this.listController=this.options.listController(),this.listEnabler=function(t){i.listController._handleKeyEvent(t)},this.layerController.onhide(function(){i.hide()}),this.layerController.onerror(function(){s.isFunction(i.options.properties.onerror)&&i.options.properties.onerror(i)}),this.layerController.contentChange(function(){i.listController.removeAllItems(),i.layerController.layer().find("div > ul > li:visible:has(a)").each(function(){i.listController.addItem(new e({element:this,autoScroll:i.options.autoScroll()}))}),i.options.focusFirstItem()?i.listController.shiftFocus(0):i.listController.prepareForInput()}),this.trigger(this.options.trigger()),this._applyIdToLayer()},show:function(){this.trigger().addClass(o.ACTIVE_CLASS),s(this).trigger("showLayer"),this.layerController.show(),this.options.focusFirstItem()?this.listController.shiftFocus(0):this.listController.prepareForInput()},hide:function(){s(this).trigger("hideLayer"),this.trigger().removeClass(o.ACTIVE_CLASS),this.layerController.hide(),this.listController.trigger("blur")},toggle:function(){this.layerController.isVisible()?this.hide():this.show()},content:function(t){return t?void this.layerController.content(t):this.layerController.content()},trigger:function(t){return t?(this.options.trigger()&&this._unassignEvents("trigger",this.options.trigger()),this.options.trigger(s(t)),this.layerController.offsetTarget()||this.layerController.offsetTarget(this.options.trigger()),this._assignEvents("trigger",this.options.trigger()),void 0):this.options.trigger()},_applyIdToLayer:function(){this.trigger().attr("id")&&this.layerController.layer().attr("id",this.trigger().attr("id")+"_drop")},_events:{trigger:{click:function(t){t.preventDefault(),this.toggle()}}}});return s.extend(l,i),l}),AJS.namespace("AJS.DropDown",null,require("jira/ajs/dropdown/dropdown")),AJS.namespace("AJS.Dropdown",null,require("jira/ajs/dropdown/dropdown"));;
;
/* module-key = 'jira.webresources:dropdown', location = '/includes/jira/dropdown/Dropdown.js' */
define("jira/dropdown",["require"],function(i){function o(){try{return Boolean(n.require("jira/dialog/dialog").current)}catch(i){}return!1}var n=i("jira/util/top-same-origin-window")(window),t=i("jquery"),d=[];return{current:null,addInstance:function(){d.push(this)},hideInstances:function(){var i=this;t(d).each(function(){i!==this&&this.hideDropdown()})},getHash:function(){return this.hash||(this.hash={container:this.dropdown,hide:this.hideDropdown,show:this.displayDropdown}),this.hash},displayDropdown:function(i){if(this.current!==this){this.hideInstances(),this.current=this,this.dropdown.css({display:"block"}),this.displayed=!0;var n=this.dropdown;o()||i||setTimeout(function(){var i=t(window),o=n.offset().top+n.prop("offsetHeight")-i.height()+10;i.scrollTop()<o&&t("html,body").animate({scrollTop:o},300,"linear")},100)}},hideDropdown:function(){this.displayed!==!1&&(this.current=null,this.dropdown.css({display:"none"}),this.displayed=!1)},init:function(i,o){var n=this;this.addInstance(this),this.dropdown=t(o),this.dropdown.css({display:"none"}),t(document).keydown(function(i){9===i.keyCode&&n.hideDropdown()}),i.target?t.aop.before(i,function(){n.displayed||n.displayDropdown()}):(n.dropdown.css("top",t(i).outerHeight()+"px"),i.click(function(i){n.displayed?n.hideDropdown():(n.displayDropdown(),i.stopPropagation()),i.preventDefault()})),t(document.body).click(function(){n.displayed&&n.hideDropdown()})}}}),AJS.namespace("JIRA.Dropdown",null,require("jira/dropdown")),AJS.namespace("jira.widget.dropdown",null,require("jira/dropdown"));;
;
/* module-key = 'jira.webresources:dropdown', location = '/includes/jira/dropdown/AutoComplete.js' */
define("jira/dropdown/auto-complete",["require"],function(o){var n=o("jira/util/objects"),t=o("jquery"),i=o("jira/dropdown");return function(o,e){var r=n.begetObject(i);return r.init=function(o,n){this.addInstance(this),this.dropdown=t(n).click(function(o){o.stopPropagation()}),this.dropdown.css({display:"none"}),o.target?t.aop.before(o,function(){r.displayed||r.displayDropdown(o.target.preventScroll)}):o.click(function(o){r.displayed||(r.displayDropdown(),o.stopPropagation())}),t(document.body).click(function(){r.displayed&&r.hideDropdown()})},r.init(o,e),r}}),AJS.namespace("JIRA.Dropdown.AutoComplete",null,require("jira/dropdown/auto-complete"));;
;
/* module-key = 'jira.webresources:dropdown', location = '/includes/jira/dropdown/Standard.js' */
define("jira/dropdown/standard",["jira/dropdown","jira/util/objects"],function(r,n){return function(d,a){var e=n.begetObject(r);return e.init(d,a),e}}),AJS.namespace("JIRA.Dropdown.Standard",null,require("jira/dropdown/standard"));;
;
/* module-key = 'jira.webresources:dropdown', location = '/includes/ajs/dropdown/Dropdown.create.js' */
define("jira/ajs/dropdown/dropdown-factory",["jira/ajs/dropdown/dropdown","jira/util/objects","jquery"],function(e,t,r){function n(n){var o=[];if(n.content&&!n.trigger)n.content=r(n.content),r.each(n.content,function(){var c=t.copyObject(n);c.content=r(this),o.push(new e(c))});else if(!n.content&&n.trigger)n.trigger=r(n.trigger),r.each(n.trigger,function(){var c=t.copyObject(n);c.trigger=r(this),o.push(new e(c))});else if(n.content&&n.trigger){if(n.content=r(n.content),n.trigger=r(n.trigger),n.content.length!==n.trigger.length)throw new Error("Dropdown.create: Expected the same number of content elements as trigger elements");n.trigger.each(function(c){var i=t.copyObject(n);i.trigger=r(this),i.content=n.content.eq(c),o.push(new e(i))})}return o}return{createDropdown:n}}),AJS.namespace("AJS.Dropdown.create",null,require("jira/ajs/dropdown/dropdown-factory").createDropdown);;
;
/* module-key = 'jira.webresources:dropdown', location = '/includes/jira/dropdown/containDropdown.js' */
define("jira/dropdown/contain-dropdown",["jquery","exports"],function(o,n){function e(n,e,i){function c(){return n.$.offset().top-o(e).offset().top}var s,d,l,p=25;n.$.parents(e).length!==-1&&(s=o(e),d=c(),p=30,l=s.outerHeight()-d-p,l<=parseInt(n.$.prop("scrollHeight"),10)?r(n,l):i&&t(n),n.reset())}function r(o,n){o.$.css({height:n}),"scroll"!==o.$.css("overflowY")&&o.$.css({width:15+o.$.prop("scrollWidth"),overflowY:"scroll",overflowX:"hidden"})}function t(o){o.$.css({height:"",width:"",overflowY:"",overflowX:""})}n=e,n.containHeight=r,n.releaseContainment=t}),AJS.namespace("AJS.containDropdown",null,require("jira/dropdown/contain-dropdown")),AJS.namespace("JIRA.containDropdown",null,require("jira/dropdown/contain-dropdown"));;
;
/* module-key = 'jira.webresources:dropdown', location = '/includes/jquery/plugins/linkedmenu/linkedMenu.js' */
!function(e){e.deactivateLinkedMenu=function(){},e.linkedMenuInstances=[],e.fn.linkedMenu=function(n){var o,u,s=this,t=!1,i=function(n){n=e(n),s.blur(),n.trigger("click","focus","mousedown")},c=function(e){var n;37!==e.keyCode&&39!==e.keyCode&&27!==e.keyCode||(37===e.keyCode?(n=o-1,o-1>=0?r(s[n])&&(o=n,i(s[o])):(n=s.length-1,r(s[n])&&(o=n,i(s[o])))):39===e.keyCode?(n=o+1,n<s.length?r(s[n])&&(o=n,i(s[o])):(n=0,r(s[n])&&(o=n,i(s[o])))):s.disableLinkedMenu(e),e.preventDefault())},r=function(e){if(e!==s[o])return!0},d=function(){r(this)&&(o=e.inArray(this,s),i(this))},l=function(){var u=e.inArray(this,e(n.reflectFocus));r(s[u])&&(o=u,i(s[o]))},a=function(){var i,r;t||(e.currentLinkedMenu=s,n.onFocusRemoveClass&&(i=e(n.onFocusRemoveClass),r=n.onFocusRemoveClass.match(/\.([a-z]*)$/),r&&r[1]&&i.length>0&&(e(n.onFocusRemoveClass).removeClass(r[1]),u=function(){e(i).addClass(r[1])})),t=!0,o=e.inArray(this,s),s.mouseover(d),e.browser.mozilla?e(document).keypress(c):e(document).keydown(c),e(document).mousedown(s.disableLinkedMenu),n.reflectFocus&&e(n.reflectFocus).mouseover(l))};return s.disableLinkedMenu=function(o){e(document).unbind("keypress",c),e(document).unbind("keydown",c),s.unbind("mouseover",d),e(document).unbind("mousedown",arguments.callee),n.reflectFocus&&e(n.reflectFocus).unbind("mouseover",l),u&&u(),s.blur(),delete e.currentLinkedMenu,window.setTimeout(function(){t=!1},200)},n=n||{},i=n.focusElement||i,s.click(a),s}}(jQuery);;
;
/* module-key = 'jira.webresources:dropdown', location = '/includes/jquery/plugins/scrollintoview/scrollIntoView.js' */
!function(){function t(t){t=t||{},t.marginTop=t.marginTop||t.margin||0,t.marginBottom=t.marginBottom||t.margin||0;var e=r(o),n=r("#stalker"),l=e.scrollTop(),a=e.height(),s=Math.max(0,i(this[0])-t.marginTop),h=t.marginTop+this.outerHeight()+t.marginBottom,c=l;if(c+a<s+h&&(c=s+h-a),0!==n.length){var g=this[0],p=null;do"absolute"===r(g).css("position")&&(p=g);while(g=g.offsetParent);p&&i(p)>i(n[0])&&(s-=n.outerHeight())}return c>s&&(c=s),c}function i(t){var i=t,o=0;do o+=i.offsetTop;while(i=i.offsetParent);i=t;do i&&i.scrollTop&&(o-=i.scrollTop),i=i.parentNode;while(i&&i!=document.body);return o}var o=require("jira/util/top-same-origin-window")(window,!0),r=o.jQuery;window.jQuery.fn.scrollIntoView=function(i){if(0===this.length)return this;var e=this.hasFixedParent();if(e){var n=r(this),l=r(e),a=l.outerHeight(),s=l.scrollTop(),h=s+a,c=n.position(),g=c.top+n.height(),p=g+s>h,u=c.top<0;p?l.scrollTop(s+g-a):u&&l.scrollTop(s+c.top)}else{if(i=i||{},!this.is(":visible")&&i.callback)return i.callback(),this;var f=r(o).scrollTop(),d=t.call(this,i),m=r("#stalker");if(d!==f){var T=this,v=r(o.document);v.trigger("moveToStarted",T),i.duration?v.find("body, html").stop(!0).animate({scrollTop:d},i.duration,"swing",function(){i.callback&&i.callback(),v.trigger("moveToFinished",T),m.trigger("positionChanged")}):v.find("body, html").prop("scrollTop",d)}else i.callback&&i.callback()}return this},r.fn.isInView=function(i){if(this.length>0&&!this.hasFixedParent()){i=i||{};var e=r(o).scrollTop(),n=t.call(this,i);return n===e}return this}}();;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-vendor-jquery-jquery-tipsy', location = 'node_modules/@atlassian/aui/src/js-vendor/jquery/jquery.tipsy.js' */
("undefined"===typeof window?global:window).__f673a5150978887490995d88aeec0c8d=function(){var b=jQuery,i=function(a){for(;a=a.parentNode;)if(a==document)return!0;return!1},j=function(a,c){this.$element=b(a);this.options=c;this.enabled=!0;this.fixTitle()},k=0;j.prototype={show:function(){if(i(this.$element[0])){var a=this.getTitle();if(a&&this.enabled){var c=this.tip();c.find(".tipsy-inner")[this.options.html?"html":"text"](a);c[0].className="tipsy";c.remove().css({top:0,left:0,visibility:"hidden",
display:"block"}).appendTo(document.body);var d=this;this.options.hoverable&&c.hover(function(){d.hoverTooltip=!0},function(){"in"!=d.hoverState&&(d.hoverTooltip=!1,"manual"!=d.options.trigger&&d.$element.trigger("hover"==d.options.trigger?"mouseleave.tipsy":"blur.tipsy"))});this.options.className&&c.addClass("function"==typeof this.options.className?this.options.className.call(this.$element[0]):this.options.className);var a=b.extend({},this.$element.offset(),{width:this.$element[0].getBoundingClientRect().width,
height:this.$element[0].getBoundingClientRect().height}),e={},f=c[0].offsetWidth,h=c[0].offsetHeight,g="function"==typeof this.options.gravity?this.options.gravity.call(this.$element[0]):this.options.gravity;2===g.length&&(e.left="w"===g.charAt(1)?a.left+a.width/2-15:a.left+a.width/2-f+15);switch(g.charAt(0)){case "n":"undefined"===typeof e.left&&(e.left=a.left+a.width/2-f/2);e.top=a.top+a.height+this.options.offset;break;case "s":"undefined"===typeof e.left&&(e.left=a.left+a.width/2-f/2,c.css(e),
h=c[0].offsetHeight);e.top=a.top-h-this.options.offset;break;case "e":e.left=a.left-f-this.options.offset;e.top=a.top+a.height/2-h/2;break;case "w":e.left=a.left+a.width+this.options.offset,e.top=a.top+a.height/2-h/2}c.css(e).addClass("tipsy-"+g);c.find(".tipsy-arrow")[0].className="tipsy-arrow tipsy-arrow-"+g.charAt(0);this.options.fade?c.stop().css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:this.options.opacity}):c.css({visibility:"visible",opacity:this.options.opacity});
this.options.aria&&(a="tipsyuid"+k++,c.attr("id",a),this.$element.attr("aria-describedby",a))}}},destroy:function(){this.$element.removeData("tipsy");this.unbindHandlers();this.hide()},unbindHandlers:function(){this.options.live?b(this.$element.context).off(".tipsy"):this.$element.unbind(".tipsy")},hide:function(){this.options.fade?this.tip().stop().fadeOut(function(){b(this).remove()}):this.tip().remove();this.options.aria&&this.$element.removeAttr("aria-describedby")},fixTitle:function(){var a=
this.$element;if(a.attr("title")||"string"!=typeof a.attr("original-title"))a.attr("original-title",a.attr("title")||"").removeAttr("title")},getTitle:function(){var a,b=this.$element,d=this.options;this.fixTitle();d=this.options;"string"==typeof d.title?a=b.attr("title"==d.title?"original-title":d.title):"function"==typeof d.title&&(a=d.title.call(b[0]));return(a=(""+a).replace(/(^\s*|\s*$)/,""))||d.fallback},tip:function(){this.$tip||(this.$tip=b('<div class="tipsy"></div>').html('<div class="tipsy-arrow"></div><div class="tipsy-inner"></div>').attr("role",
"tooltip"),this.$tip.data("tipsy-pointee",this.$element[0]));return this.$tip},validate:function(){this.$element[0].parentNode||(this.hide(),this.options=this.$element=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled}};b.fn.tipsy=function(a){function c(c){var d=b.data(c,"tipsy");d||(d=new j(c,b.fn.tipsy.elementOptions(c,a)),b.data(c,"tipsy",d));return d}function d(){var b=c(this);b.hoverState="in";0==a.delayIn?b.show():
(b.fixTitle(),setTimeout(function(){"in"==b.hoverState&&b.show()},a.delayIn))}function e(){var b=c(this);b.hoverState="out";0==a.delayOut?b.hide():setTimeout(function(){"out"==b.hoverState&&!b.hoverTooltip&&b.hide()},a.delayOut)}if(!0===a)return this.data("tipsy");if("string"==typeof a){var f=this.data("tipsy");if(f)f[a]();return this}a=b.extend({},b.fn.tipsy.defaults,a);a.hoverable&&(a.delayOut=a.delayOut||20);a.live||this.each(function(){c(this)});if("manual"!=a.trigger){var f="hover"==a.trigger?
"mouseenter.tipsy focus.tipsy":"focus.tipsy",h="hover"==a.trigger?"mouseleave.tipsy blur.tipsy":"blur.tipsy";if(a.live)b(this.context).on(f,this.selector,d).on(h,this.selector,e);else this.bind(f,d).bind(h,e)}return this};b.fn.tipsy.defaults={aria:!1,className:null,delayIn:0,delayOut:0,fade:!1,fallback:"",gravity:"n",html:!1,live:!1,hoverable:!1,offset:0,opacity:0.8,title:"title",trigger:"hover"};b.fn.tipsy.revalidate=function(){b(".tipsy").each(function(){var a=b.data(this,"tipsy-pointee");(!a||
!i(a))&&b(this).remove()})};b.fn.tipsy.elementOptions=function(a,c){return b.metadata?b.extend({},c,b(a).metadata()):c};b.fn.tipsy.autoNS=function(){return b(this).offset().top>b(document).scrollTop()+b(window).height()/2?"s":"n"};b.fn.tipsy.autoWE=function(){return b(this).offset().left>b(document).scrollLeft()+b(window).width()/2?"e":"w"};b.fn.tipsy.autoBounds=function(a,c){return function(){var d=c[0],e=1<c.length?c[1]:!1,f=b(document).scrollTop()+a,h=b(document).scrollLeft()+a,g=b(this);g.offset().top<
f&&(d="n");g.offset().left<h&&(e="w");b(window).width()+b(document).scrollLeft()-g.offset().left<a&&(e="e");b(window).height()+b(document).scrollTop()-g.offset().top<a&&(d="s");return d+(e?e:"")}};return{}}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-tipsy', location = 'node_modules/@atlassian/aui/src/js/aui/tipsy.js' */
("undefined"===typeof window?global:window).__e0e2fcbfe1adeeec3d129337203daa99=function(){"use strict";__f673a5150978887490995d88aeec0c8d;return{}}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-tooltip', location = 'node_modules/@atlassian/aui/src/js/aui/tooltip.js' */
("undefined"===typeof window?global:window).__8a6820c3d0bc5d638a8490d849a5b750=function(){function f(a,b,c){a.tipsy(c);"destroy"===c&&(b.live?(0,d.default)(a.context).off(".tipsy",a.selector):a.unbind(".tipsy"));return a}function g(a,b){a.tipsy(b);if(b&&b.hideOnClick&&("hover"===b.trigger||!b.trigger&&"hover"===a.tipsy.defaults.trigger)){var c=function(){(0,d.default)(this).tipsy("hide")};if(b.live)(0,d.default)(a.context).on("click.tipsy",a.selector,c);else a.bind("click.tipsy",c)}return a}"use strict";
var e=__307d3e18fd611f85395c67cddeb1fe24,d=e&&e.__esModule?e:{"default":e};__f673a5150978887490995d88aeec0c8d;d.default.fn.tooltip=function(a){var b=d.default.extend({},d.default.fn.tooltip.defaults,a);return b.live?("string"===typeof a?f(this,b,a):g(this,b),this):this.each(function(){var c=(0,d.default)(this);"string"===typeof a?f(c,b,a):g(c,b);return c})};d.default.fn.tooltip.defaults={opacity:1,offset:1,delayIn:500,hoverable:!0,hideOnClick:!0,aria:!0};return{}}.call(this);;
;
/* module-key = 'com.atlassian.plugins.issue-status-plugin:issue-status-resources', location = 'templates/status.soy' */
// This file was automatically generated from status.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Template.Util.Issue.Status.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Template == 'undefined') { JIRA.Template = {}; }
if (typeof JIRA.Template.Util == 'undefined') { JIRA.Template.Util = {}; }
if (typeof JIRA.Template.Util.Issue == 'undefined') { JIRA.Template.Util.Issue = {}; }
if (typeof JIRA.Template.Util.Issue.Status == 'undefined') { JIRA.Template.Util.Issue.Status = {}; }


JIRA.Template.Util.Issue.Status.issueStatusResolver = function(opt_data, opt_ignored) {
  return '' + ((! opt_data.issueStatus) ? '<span class="aui-icon aui-icon-small aui-iconfont-help jira-issue-status-render-error" title="' + soy.$$escapeHtml('No issue status information was provided') + '"></span>' : (opt_data.issueStatus.statusCategory) ? JIRA.Template.Util.Issue.Status.issueStatus(opt_data) : JIRA.Template.Util.Issue.Status.iconStatus({name: opt_data.issueStatus.name, iconUrl: opt_data.issueStatus.iconUrl, description: opt_data.issueStatus.description, isCompact: opt_data.isCompact}));
};
if (goog.DEBUG) {
  JIRA.Template.Util.Issue.Status.issueStatusResolver.soyTemplateName = 'JIRA.Template.Util.Issue.Status.issueStatusResolver';
}


JIRA.Template.Util.Issue.Status.iconStatus = function(opt_data, opt_ignored) {
  return '<img src="' + soy.$$escapeHtml(opt_data.iconUrl) + '" width="16" height="16" alt="' + soy.$$escapeHtml(opt_data.name) + '" title="' + soy.$$escapeHtml(opt_data.name) + ((opt_data.description) ? ' - ' + soy.$$escapeHtml(opt_data.description) : '') + '" class="jira-issue-status-icon">' + ((! opt_data.isCompact) ? ' ' + soy.$$escapeHtml(opt_data.name) : '');
};
if (goog.DEBUG) {
  JIRA.Template.Util.Issue.Status.iconStatus.soyTemplateName = 'JIRA.Template.Util.Issue.Status.iconStatus';
}


JIRA.Template.Util.Issue.Status.issueStatus = function(opt_data, opt_ignored) {
  return '' + JIRA.Template.Util.Issue.Status.statusLozenge({name: opt_data.issueStatus.name, categoryKey: opt_data.issueStatus.statusCategory.key, colorName: opt_data.issueStatus.statusCategory.colorName, description: opt_data.issueStatus.description, isSubtle: opt_data.isSubtle, isCompact: opt_data.isCompact, maxWidth: opt_data.maxWidth});
};
if (goog.DEBUG) {
  JIRA.Template.Util.Issue.Status.issueStatus.soyTemplateName = 'JIRA.Template.Util.Issue.Status.issueStatus';
}


JIRA.Template.Util.Issue.Status.statusLozenge = function(opt_data, opt_ignored) {
  var output = '';
  var maxWidth__soy46 = opt_data.maxWidth ? opt_data.maxWidth : 'medium';
  var tooltipContent__soy47 = '<span class="jira-issue-status-tooltip-title">' + soy.$$escapeHtml(opt_data.name) + '</span>' + ((opt_data.description) ? '<br><span class="jira-issue-status-tooltip-desc">' + soy.$$escapeHtml(opt_data.description) + '</span>' : '');
  output += '<span class=" jira-issue-status-lozenge aui-lozenge ' + JIRA.Template.Util.Issue.Status.statusLozengeClasses(opt_data) + ((opt_data.isSubtle && ! opt_data.isCompact) ? ' aui-lozenge-subtle' : '') + ((opt_data.isCompact) ? ' jira-issue-status-lozenge-compact' : '') + ' jira-issue-status-lozenge-max-width-' + soy.$$escapeHtml(maxWidth__soy46) + '" data-tooltip="' + soy.$$escapeHtml(tooltipContent__soy47) + '">' + soy.$$escapeHtml(opt_data.name) + '</span>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Template.Util.Issue.Status.statusLozenge.soyTemplateName = 'JIRA.Template.Util.Issue.Status.statusLozenge';
}


JIRA.Template.Util.Issue.Status.statusLozengeClasses = function(opt_data, opt_ignored) {
  return 'jira-issue-status-lozenge-' + soy.$$escapeHtml(opt_data.colorName ? opt_data.colorName : 'medium-gray') + ' ' + ((opt_data.categoryKey) ? 'jira-issue-status-lozenge-' + soy.$$escapeHtml(opt_data.categoryKey) : '');
};
if (goog.DEBUG) {
  JIRA.Template.Util.Issue.Status.statusLozengeClasses.soyTemplateName = 'JIRA.Template.Util.Issue.Status.statusLozengeClasses';
}
;
;
/* module-key = 'com.atlassian.plugins.issue-status-plugin:issue-status-resources', location = '/js/issue-status-plugin.js' */
AJS.$(function(){AJS.$.fn.tooltip&&AJS.$(".jira-issue-status-lozenge[data-tooltip]").tooltip({aria:!0,gravity:AJS.$.fn.tipsy.autoWE,delayIn:100,html:!0,live:!0,title:"data-tooltip",className:"jira-issue-status-tooltip"})});;
;
/* module-key = 'jira.webresources:select-pickers', location = 'includes/ajs/select/QueryableSelect.soy.js' */
if("undefined"==typeof AJS)var AJS={};"undefined"==typeof AJS.Templates&&(AJS.Templates={}),AJS.Templates.queryableSelect=function(e,t){for(var o="<select "+(e.name?'name="'+soy.$$escapeHtml(e.name)+'"':"")+" "+(e.id?'id="'+soy.$$escapeHtml(e.id)+'"':"")+' multiple="multiple">',p=e.descriptors,s=p.length,i=0;i<s;i++){var l=p[i];if(l.properties.items){o+='<optgroup label="'+soy.$$escapeHtml(l.properties.label)+'">';for(var r=l.properties.items,a=r.length,n=0;n<a;n++){var m=r[n];o+=AJS.Templates.option({option:m})}o+="</optgroup>"}else o+=AJS.Templates.option({option:l})}return o+="</select>"},AJS.Templates.option=function(e,t){return"<option "+(e.option.properties.className?'class="'+soy.$$escapeHtml(e.option.properties.className)+'"':"")+" "+(e.option.properties.title?'title="'+soy.$$escapeHtml(e.option.properties.title)+'"':"")+" "+(e.option.properties.meta?'data-meta="'+soy.$$escapeHtml(e.option.properties.meta)+'"':"")+" "+(e.option.properties.selected?'selected="selected"':"")+' value="'+soy.$$escapeHtml(e.option.properties.value)+'">'+soy.$$escapeHtml(e.option.properties.label)+"</option>"};;
;
/* module-key = 'jira.webresources:select-pickers', location = '/includes/ajs/select/SelectHelper.js' */
define("jira/ajs/select/select-helper",function(){return{updateFreeInputVal:function(){this.options.submitInputVal&&this.model.updateFreeInput(this.$field.val())},removeFreeInputVal:function(){this.options.submitInputVal&&this.model.removeFreeInputVal()}}}),AJS.namespace("AJS.SelectHelper",null,require("jira/ajs/select/select-helper"));;
;
/* module-key = 'jira.webresources:select-pickers', location = '/includes/ajs/select/fetchers/ajax-descriptor-fetcher.js' */
define("jira/ajs/select/fetchers/ajax-descriptor-fetcher",["jira/util/logger","jira/jquery/deferred","jira/lib/class","jira/ajs/ajax/smart-ajax","jquery","underscore"],function(e,t,s,n,i,u){return s.extend({init:function(e){this.options=u.extend({keyInputPeriod:75,minQueryLength:1,data:{},dataType:"json"},e)},makeRequest:function(e,t,s){t.complete=u.bind(function(){this.outstandingRequest=null,JIRA.trace("jira.suggestionhandler.done")},this),t.success=u.bind(function(n){t.query?e.resolve(t.formatResponse(n,s)):(this.lastResponse=t.formatResponse(n,s),e.resolve(this.lastResponse))},this);var i=t.error;t.error=function(t,s,u,r){r.aborted?"timeout"===r.statusText&&(i?i.apply(this,arguments):alert(n.buildSimpleErrorContent(r,{alert:!0})),e.resolve()):(i?i.apply(this,arguments):alert(n.buildSimpleErrorContent(r,{alert:!0})),e.resolve())},this.outstandingRequest=n.makeRequest(t)},incubateRequest:function(e,t,s,n){return clearTimeout(this.queuedRequest),n&&this.outstandingRequest&&(this.outstandingRequest.abort(),this.outstandingRequest=null),!t.query&&this.lastResponse?e.resolve(this.lastResponse):this.outstandingRequest?this.queuedRequest=setTimeout(u.bind(function(){this.incubateRequest(e,t,s,!0)},this),t.keyInputPeriod):("function"==typeof t.data?t.data=t.data(s):t.data.query=s,"function"==typeof t.url&&(t.url=t.url()),s.length>=parseInt(t.minQueryLength,10)||n?this.makeRequest(e,t,s):e.resolve()),e},execute:function(e,s){var n=t();return n.fail(u.bind(function(){clearTimeout(this.queuedRequest),this.outstandingRequest&&this.outstandingRequest.abort()},this)),this.incubateRequest(n,u.extend({},this.options),e,s),n}})});;
;
/* module-key = 'jira.webresources:select-pickers', location = '/includes/ajs/select/fetchers/mixed-descriptor-fetcher.js' */
define("jira/ajs/select/fetchers/mixed-descriptor-fetcher",["jira/jquery/deferred","jira/lib/class","jira/ajs/select/fetchers/ajax-descriptor-fetcher","jquery","underscore"],function(e,t,i,r,s){return t.extend({init:function(e,t){this.ajaxFetcher=new i(e.ajaxOptions),this.options=e,this.model=t},execute:function(t,i){var r=e(),n=this.options.ajaxOptions.minQueryLength;if(n="number"==typeof n&&isFinite(n)?n:1,t.length>=n){var o=this.ajaxFetcher.execute(t,i).done(s.bind(function(e){var i;i=this.options.suggestionAtTop?[].concat(this.model.getAllDescriptors(),e):[].concat(e,this.model.getAllDescriptors()),r.resolve(i,t)},this));r.fail(function(){o.reject()})}else r.resolve(this.model.getUnSelectedDescriptors(),t);return r}})});;
;
/* module-key = 'jira.webresources:select-pickers', location = '/includes/ajs/select/fetchers/func-descriptor-fetcher.js' */
define("jira/ajs/select/fetchers/func-descriptor-fetcher",["jira/jquery/deferred","jira/lib/class","jquery"],function(e,r,t){return r.extend({init:function(e){this.options=e},execute:function(r){var t=e();return t.resolve(this.options.suggestions(r),r),t}})});;
;
/* module-key = 'jira.webresources:select-pickers', location = '/includes/ajs/select/fetchers/static-descriptor-fetcher.js' */
define("jira/ajs/select/fetchers/static-descriptor-fetcher",["jira/jquery/deferred","jira/lib/class","jquery"],function(e,t,r){return t.extend({init:function(e,t){this.model=t,this.model.$element.data("static-suggestions",!0)},execute:function(t){var r=e();return r.resolve(this.model.getUnSelectedDescriptors(),t),r}})});;
;
/* module-key = 'jira.webresources:select-pickers', location = '/includes/ajs/select/fetchers/namespace.js' */
AJS.namespace("AJS.StaticDescriptorFetcher",null,require("jira/ajs/select/fetchers/static-descriptor-fetcher")),AJS.namespace("AJS.AjaxDescriptorFetcher",null,require("jira/ajs/select/fetchers/ajax-descriptor-fetcher")),AJS.namespace("AJS.MixedDescriptorFetcher",null,require("jira/ajs/select/fetchers/mixed-descriptor-fetcher")),AJS.namespace("AJS.FuncDescriptorFetcher",null,require("jira/ajs/select/fetchers/func-descriptor-fetcher"));;
;
/* module-key = 'jira.webresources:select-pickers', location = '/includes/ajs/select/suggestions/suggest-helper.js' */
define("jira/ajs/select/suggestions/suggest-helper",["jira/ajs/list/group-descriptor","jira/ajs/list/item-descriptor","jira/ajs/select/fetchers/mixed-descriptor-fetcher","jira/ajs/select/fetchers/ajax-descriptor-fetcher","jira/ajs/select/fetchers/func-descriptor-fetcher","jira/ajs/select/fetchers/static-descriptor-fetcher","underscore"],function(e,t,r,i,n,s,c){return{createDescriptorFetcher:function(e,t){return e.ajaxOptions&&e.ajaxOptions.url?t&&"mixed"===e.content?new r(e,t):new i(e.ajaxOptions):e.suggestions?new n(e):t?new s(e,t):void 0},extractItems:function(t){return c.flatten(c.map(t,function(t){return t instanceof e?t.items():[t]}))},mirrorQuery:function(r,i,n){var s=n?r.toUpperCase():r;return new e({label:"user inputted option",showLabel:!1,replace:!0}).addItem(new t({value:s,label:s,labelSuffix:" ("+i+")",title:s,allowDuplicate:!1,noExactMatch:!0}))},isSelected:function(e,t){return c.any(t,function(t){return e.value()===t.value()})},removeDuplicates:function(t,r){return r=r||[],c.filter(t,c.bind(function(t){return t instanceof e?(t.items(this.removeDuplicates(t.items(),r)),!0):c.include(r,t.value())?void 0:(t.value()&&r.push(t.value()),!0)},this))},removeSelected:function(r,i){return c.filter(r,c.bind(function(r){return!(r instanceof t&&this.isSelected(r,i))&&(r instanceof e&&r.items(this.removeSelected(r.items(),i)),!0)},this))}}});;
;
/* module-key = 'jira.webresources:select-pickers', location = '/includes/ajs/select/suggestions/default-suggest-handler.js' */
define("jira/ajs/select/suggestions/default-suggest-handler",["jira/jquery/deferred","jira/lib/class","jira/ajs/select/suggestions/suggest-helper","jquery","underscore"],function(e,t,r,s,i){return t.extend({init:function(e){this.options=e,this.descriptorFetcher=r.createDescriptorFetcher(e)},validateMirroring:function(e){return this.options.userEnteredOptionsMsg&&e.length>0},formatSuggestions:function(e,t){return this.validateMirroring(t)&&e.push(r.mirrorQuery(t,this.options.userEnteredOptionsMsg,this.options.uppercaseUserEnteredOnSelect)),e},execute:function(t,r){var s=e(),n=this.descriptorFetcher.execute(t,r).done(i.bind(function(e){e&&(e=this.formatSuggestions(e,t)),s.resolve(e,t)},this));return s.fail(function(){n.reject()}),s}})});;
;
/* module-key = 'jira.webresources:select-pickers', location = '/includes/ajs/select/suggestions/select-suggest-handler.js' */
define("jira/ajs/select/suggestions/select-suggest-handler",["jira/ajs/select/suggestions/default-suggest-handler","jira/ajs/select/suggestions/suggest-helper"],function(e,s){return e.extend({init:function(e,t){this.descriptorFetcher=s.createDescriptorFetcher(e,t),this.options=e,this.model=t},formatSuggestions:function(e,t){var i=this._super(e,t),r=this.model.getDisplayableSelectedDescriptors();return this.options.removeDuplicates&&(i=s.removeDuplicates(e)),s.removeSelected(i,r)}})});;
;
/* module-key = 'jira.webresources:select-pickers', location = '/includes/ajs/select/suggestions/invite-capable-suggest-handler.js' */
define("jira/ajs/select/suggestions/invite-capable-suggest-handler",["jira/ajs/select/suggestions/select-suggest-handler","jira/ajs/select/suggestions/suggest-helper","jira/ajs/list/item-descriptor","jira/util/formatter","underscore"],function(e,t,i,n,s){return e.extend({init:function(e,i){this.descriptorFetcher=t.createDescriptorFetcher(e,i),this.options=e,this.model=i},formatSuggestions:function(e,t){var r=this._super(e,t);return s.map(r,s.bind(function(e){return 0===e.items().length&&this._isValidEmail(t)?e.items([new i({value:t,label:t,html:"<div>"+n.format("Create \"{0}\"",t)+"</div>",allowDuplicate:!1,highlighted:!0})]):e},this))},_isValidEmail:function(e){function t(e,t){return e.substring(0,t.length)===t}function i(e,t){var i=e.length-t.length,n=e.indexOf(t,i);return n!==-1&&n===i}function n(e,t){var i=!1;return t.length<=e.length&&(i=e.indexOf(t)!==-1),i}var s=/^[a-zA-Z0-9_\-\+'`\?=\*%\$#!\/^\{\|}~\.]+@([a-zA-Z0-9\-]+\.)+([a-zA-Z0-9]+)$/,r=!1;if(s.test(e)){var a=e.split("@")[0];r=!t(a,".")&&!i(a,".")&&!n(a,"..")}return r}})});;
;
/* module-key = 'jira.webresources:select-pickers', location = '/includes/ajs/select/suggestions/assignee-suggest-handler.js' */
define("jira/ajs/select/suggestions/assignee-suggest-handler",["jira/util/formatter","jira/ajs/select/suggestions/select-suggest-handler"],function(e,s){return s.extend({formatSuggestions:function(s,t){var s=this._super(s,t);return 0===t.length&&s[0].footerText("Start Typing for Users"),s}})});;
;
/* module-key = 'jira.webresources:select-pickers', location = '/includes/ajs/select/suggestions/checkbox-multi-select-suggest-handler.js' */
define("jira/ajs/select/suggestions/checkbox-multi-select-suggest-handler",["jira/util/formatter","jira/ajs/select/suggestions/select-suggest-handler","jira/ajs/select/suggestions/suggest-helper","jira/ajs/list/group-descriptor"],function(e,t,s,l){return t.extend({createClearAll:function(){return"<li class='check-list-group-actions'><a class='clear-all' href='#'>"+"Clear selected items"+"</a></li>"},formatSuggestions:function(e,t){var a=s.removeDuplicates(this.model.getDisplayableSelectedDescriptors()),r=new l({styleClass:"selected-group",items:a,actionBarHtml:a.length>1?this.createClearAll():null});if(e.splice(0,0,r),t.length>0){e=s.removeDuplicates(e);var i=s.extractItems(e).sort(function(e,t){return e=e.label().toLowerCase(),t=t.label().toLowerCase(),e.localeCompare(t)});e=[new l({items:i})]}return e}})});;
;
/* module-key = 'jira.webresources:select-pickers', location = '/includes/ajs/select/suggestions/user-list-suggest-handler.js' */
define("jira/ajs/select/suggestions/user-list-suggest-handler",["jira/ajs/select/suggestions/select-suggest-handler"],function(e){return e.extend({emailExpression:/^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/,validateMirroring:function(e){return this.options.freeEmailInput&&e.length>0&&this.emailExpression.test(e)}})});;
;
/* module-key = 'jira.webresources:select-pickers', location = '/includes/ajs/select/suggestions/only-new-items-suggest-handler.js' */
define("jira/ajs/select/suggestions/only-new-items-suggest-handler",["jira/ajs/select/suggestions/select-suggest-handler","underscore"],function(e,s){return e.extend({validateMirroring:function(e){var t=this._super(e);if(t){var r=e.toLowerCase(),n=this.model.getDisplayableSelectedDescriptors().concat(this.model.getDisplayableUnSelectedDescriptors()),i=s.some(n,function(e){var s=e.label();return s&&s.toLowerCase()===r});return!i}return!1}})});;
;
/* module-key = 'jira.webresources:select-pickers', location = '/includes/ajs/select/suggestions/namespace.js' */
AJS.namespace("AJS.SuggestHelper",null,require("jira/ajs/select/suggestions/suggest-helper")),AJS.namespace("AJS.DefaultSuggestHandler",null,require("jira/ajs/select/suggestions/default-suggest-handler")),AJS.namespace("AJS.SelectSuggestHandler",null,require("jira/ajs/select/suggestions/select-suggest-handler")),AJS.namespace("AJS.OnlyNewItemsSuggestHandler",null,require("jira/ajs/select/suggestions/only-new-items-suggest-handler")),AJS.namespace("AJS.CheckboxMultiSelectSuggestHandler",null,require("jira/ajs/select/suggestions/checkbox-multi-select-suggest-handler")),AJS.namespace("JIRA.AssigneeSuggestHandler",null,require("jira/ajs/select/suggestions/assignee-suggest-handler")),AJS.namespace("AJS.UserListSuggestHandler",null,require("jira/ajs/select/suggestions/user-list-suggest-handler"));;
;
/* module-key = 'jira.webresources:select-pickers', location = '/includes/ajs/select/QueryableDropdownSelect.js' */
define("jira/ajs/select/queryable-dropdown-select",["jira/util/formatter","jira/jquery/deferred","jira/ajs/control","jira/ajs/select/suggestions/default-suggest-handler","jira/ajs/layer/inline-layer-factory","jira/ajs/list/list","jira/util/navigator","jira/util/assistive","jquery","jira/featureflags/feature-manager","underscore"],function(t,e,i,n,s,o,r,a,l,d,h){var u="-suggestions",g=0;return i.extend({INVALID_KEYS:{Shift:!0,Esc:!0,Right:!0},init:function(t){this.suggestionsVisible=!1,this._setOptions(t),this._createFurniture(),this._createDropdownController(),this._createSuggestionsController(),this._createListController(),this._assignEventsToFurniture(),this.options.width&&this.setFieldWidth(this.options.width),this.options.loadOnInit&&this.requestSuggestions(!0)},_createDropdownController:function(){var t=this;this.options.dropdownController?this.dropdownController=this.options.dropdownController:this.dropdownController=s.createInlineLayers({offsetTarget:this.$field,width:this.$field.innerWidth(),content:this.options.element}),this.dropdownController.onhide(function(){t.hideSuggestions()})},_createSuggestionsController:function(){this.suggestionsHandler=this.options.suggestionsHandler?new this.options.suggestionsHandler(this.options):new n(this.options)},_createListController:function(){var e=this,i=null;this.suggestionsHandler.suggestionHighlighter&&(i=this.suggestionsHandler.suggestionHighlighter.bind(this.suggestionsHandler)),this.listController=new o({containerSelector:this.options.element,groupSelector:"ul.aui-list-section",matchingStrategy:this.options.matchingStrategy,matchingHighlighter:i,eventTarget:this.$field,selectionHandler:function(){return e.$field.val("Loading...").css("color","#999"),e.hideSuggestions(),!0}})},_onItemFocus:function(t,e){var i=this.$field,n=e&&e.id?e.id:"null";a.wait(function(){i.attr("aria-activedescendant",n)})},setFieldWidth:function(t){this.$container.css({width:t,minWidth:t})},showErrorMessage:function(e){var i=this.$container.parent(".field-group");return this.hideErrorMessage(),this.$errorMessage.text(t.format(this.options.errorMessage,e||this.getQueryVal())),1===i.length?void i.append(this.$errorMessage):(0===i.length&&(i=this.$container.parent(".frother-control-renderer")),1===i.length?void this.$errorMessage.prependTo(i):void(0===i.length&&this.$container.parent().append(this.$errorMessage)))},hideErrorMessage:function(){this.$errorMessage&&this.$errorMessage.remove(),this.$container.parent().find(".error").remove()},_getDefaultOptions:function(){return g+=1,{id:g,keyInputPeriod:75,localListLiveUpdateLimit:25,localListLiveUpdateDelay:150}},_createFurniture:function(){this.$container=this._render("container").insertBefore(this.options.element),this.suggestionsContainerId=this.options.id+u,this.$field=this._render("field").appendTo(this.$container),this.$dropDownIcon=this._render("dropdownAndLoadingIcon",this._hasDropdownButton()).appendTo(this.$container),this.options.overlabel&&(this.$overlabel=this._render("overlabel").insertBefore(this.$field),this.$overlabel.overlabel())},_hasDropdownButton:function(){return this.options.showDropdownButton||this.options.ajaxOptions&&0===this.options.ajaxOptions.minQueryLength},_assignEventsToFurniture:function(){var t=this;this._assignEvents("ignoreBlurElement",this.dropdownController.$layer),this._assignEvents("container",this.$container),this._hasDropdownButton()&&(this._assignEvents("ignoreBlurElement",this.$dropDownIcon),this._assignEvents("dropdownAndLoadingIcon",this.$dropDownIcon)),setTimeout(function(){t._assignEvents("field",t.$field),t._assignEvents("keys",t.$field)},15),this.listController.bind("itemFocus",this._onItemFocus.bind(this))},requestSuggestions:function(t){var i=this,n=e();return this.outstandingRequest=this.suggestionsHandler.execute(this.getQueryVal(),t).done(function(t,e){e===i.getQueryVal()&&n.resolve(t,e)}),"resolved"!==this.outstandingRequest.state()&&(window.clearTimeout(this.loadingWait),this.loadingWait=window.setTimeout(function(){"pending"===i.outstandingRequest.state()&&i.showLoading()},150),this.outstandingRequest.always(function(){i.hideLoading()})),n},showLoading:function(){return this.$dropDownIcon.addClass("loading").removeClass("noloading"),this.$dropDownIcon.data("spinner")||this.$dropDownIcon.spin(),this.$field.attr("aria-busy","true"),this},hideLoading:function(){return this.$dropDownIcon.removeClass("loading").addClass("noloading"),this.$dropDownIcon.spinStop(),this.$field.attr("aria-busy","false"),this},_setSuggestions:function(t){t?(this.listController.generateListFromJSON(t,this.getQueryVal()),this.showSuggestions()):this.hideSuggestions(),this.$container.attr("data-query",this.getQueryVal())},disable:function(){this.disabled||(this.$container.addClass("aui-disabled"),this.$disabledBlanket=this._render("disabledBlanket").appendTo(this.$container),this.$field.attr("disabled",!0),this.dropdownController.hide(),this.disabled=!0)},enable:function(){this.disabled&&(this.$container.removeClass("aui-disabled"),this.$disabledBlanket.remove(),this.$field.attr("disabled",!1),this.disabled=!1)},getQueryVal:function(){return l.trim(this.$field.val())},_isValidInput:function(t){return this.$field.is(":visible")&&!("aui:keydown"===t.type&&this.INVALID_KEYS[t.key])},_handleCharacterInput:function(t){if(this.options&&this.options.disableSearch)return void this.hideSuggestions();var e=this.getQueryVal().length;e>=1||t?this.requestSuggestions(t).done(h.bind(function(t){this._setSuggestions(t)},this)):this.hideSuggestions()},_handleDown:function(t){this.suggestionsVisible||(this.listController._latestQuery="",this._handleCharacterInput(!0)),t.preventDefault()},_rejectPendingRequests:function(){this.outstandingRequest&&this.outstandingRequest.reject()},showSuggestions:function(){this.suggestionsVisible||(this.suggestionsVisible=!0,this.dropdownController.show(),this.dropdownController.setWidth(this.$field.innerWidth()),this.dropdownController.setPosition(),this.listController.enable(),this.$field.attr("aria-expanded","true"),this.$field.attr("aria-controls",this.suggestionsContainerId))},hideSuggestions:function(){this.suggestionsVisible&&(this._rejectPendingRequests(),this.suggestionsVisible=!1,this.$dropDownIcon.addClass("noloading"),this.dropdownController.hide(),this.listController.disable(),this.$field.removeAttr("aria-activedescendant"),this.$field.attr("aria-expanded","false"),this.$field.removeAttr("aria-controls"))},_deactivate:function(){this.hideSuggestions()},_handleEscape:function(t){this.suggestionsVisible&&(t.stopPropagation(),"keyup"===t.type&&(this.hideSuggestions(),r.isIE()&&r.majorVersion()<12&&this.$field.focus()))},acceptFocusedSuggestion:function(){var t=this.listController.getFocused();0!==t.length&&t.is(":visible")&&this.listController._acceptSuggestion(t)},keys:{Down:function(t){this._hasDropdownButton()&&this._handleDown(t)},Up:function(t){t.preventDefault()},Return:function(t){t.preventDefault()}},onEdit:function(){this._handleCharacterInput()},_events:{dropdownAndLoadingIcon:{click:function(t){this.suggestionsVisible?this.hideSuggestions():(this._handleDown(t),this.$field.focus()),t.stopPropagation()}},container:{disable:function(){this.disable()},enable:function(){this.enable()}},field:{blur:function(){this.ignoreBlurEvent?this.ignoreBlurEvent=!1:this._deactivate()},click:function(t){t.stopPropagation()},"keydown keyup":function(t){27===t.keyCode&&this._handleEscape(t)}},keys:{"aui:keydown input":function(t){this._handleKeyEvent(t)}},ignoreBlurElement:{mousedown:function(t){function e(t){t.returnValue=!1}if(r.isIE()&&r.majorVersion()<12){var i=l(t.target)[0]==l(this.dropdownController.$layer)[0];if(i&&(this.ignoreBlurEvent=!0),"undefined"==typeof document.addEventListener){if(!i){var n=this.$field.get(0);n.attachEvent("onbeforedeactivate",e),setTimeout(function(){n.detachEvent("onbeforedeactivate",e)},0)}return}}t.preventDefault()}}},_renders:{disabledBlanket:function(){return l("<div class='aui-disabled-blanket' />").height(this.$field.outerHeight())},overlabel:function(){return l("<span class='overlabel' />").text(this.options.overlabel).attr({"data-target":this.options.id+"-field",id:this.options.id+"-overlabel"})},baseField:function(t){var e=document.createElement(t||"input");return l(e).attr({autocomplete:"off",role:"combobox","aria-autocomplete":"list","aria-haspopup":"true","aria-expanded":"false"})},field:function(){return this._render("baseField").attr({class:"text",id:this.options.id+"-field",type:"text"})},container:function(){return l("<div class='queryable-select' id='"+this.options.id+"-queryable-container' />")},dropdownAndLoadingIcon:function(t){return l('<span class="icon noloading"><span>More</span></span>').toggleClass("drop-menu",!!t)},suggestionsContainer:function(t){return l("<div />").attr({class:"aui-list",id:t+u,tabindex:"-1",role:"listbox"})}}})}),AJS.namespace("AJS.QueryableDropdown",null,require("jira/ajs/select/queryable-dropdown-select")),AJS.namespace("AJS.QueryableDropdownSelect",null,require("jira/ajs/select/queryable-dropdown-select"));;
;
/* module-key = 'jira.webresources:select-pickers', location = '/includes/ajs/select/MultiSelect.Lozenge.js' */
define("jira/ajs/select/multi-select/lozenge",["jira/util/formatter","jira/util/assistive","jira/ajs/control","jquery"],function(e,t,n,s){var i,o=0;return n.extend({init:function(e){this.id=o,o+=1,this._setOptions(e),this.$lozenge=this._render("lozenge"),this.$removeButton=this._render("removeButton"),this.$removeButton.tooltip(),this._assignEvents("instance",this),this._assignEvents("lozenge",this.$lozenge),this._assignEvents("removeButton",this.$removeButton),this.$removeButton.appendTo(this.$lozenge),this.$lozenge.appendTo(this.options.container)},_getDefaultOptions:function(){return{label:null,title:null,container:null,focusClass:"focused"}},_renders:{lozenge:function(){var n=AJS.escapeHtml(this.options.label);AJS.escapeHtml(this.options.title)||"";return i||(i=t.createOrUpdateLabel("Press delete or backspace to remove this option")),s('<li class="item-row" role="option"><button type="button" tabindex="-1" class="value-item"><span><span class="value-text">'+n+"</span></span></button></li>").attr({"aria-describedby":i,id:"item-row-"+this.id})},removeButton:function(){return s('<em class="item-delete" aria-label=" "></em>')}},_events:{instance:{focus:function(){this.$lozenge.addClass(this.options.focusClass)},blur:function(){this.$lozenge.removeClass(this.options.focusClass)},remove:function(){this.$lozenge.remove()}},lozenge:{click:function(){this.trigger("focus")}},removeButton:{click:function(){this.trigger("remove")}}}})}),AJS.namespace("AJS.MultiSelect.Lozenge",null,require("jira/ajs/select/multi-select/lozenge"));;
;
/* module-key = 'jira.webresources:select-pickers', location = '/includes/ajs/select/MultiSelect.LozengeGroup.js' */
define("jira/ajs/select/multi-select/lozenge-group",["jira/ajs/group"],function(t){return t.extend({keys:{Left:function(){this.index>0&&this.shiftFocus(-1)},Right:function(){this.index===this.items.length-1?this.items[this.index].trigger("blur"):this.shiftFocus(1)},Backspace:function(){var t=this.index;t>0?this.shiftFocus(-1):this.items.length>1&&this.shiftFocus(1),this.items[t].trigger("remove")},Return:function(){this.items[this.index].trigger("blur")},Del:function(){var t=this.index;t+1<this.items.length&&this.shiftFocus(1),this.items[t].trigger("remove")}}})}),AJS.namespace("AJS.MultiSelect.LozengeGroup",null,require("jira/ajs/select/multi-select/lozenge-group"));;
;
/* module-key = 'jira.webresources:select-pickers', location = '/includes/ajs/select/MultiSelect.js' */
define("jira/ajs/select/multi-select",["jira/util/formatter","jira/ajs/layer/layer-constants","jira/ajs/select/multi-select/lozenge","jira/ajs/select/multi-select/lozenge-group","jira/ajs/select/queryable-dropdown-select","jira/ajs/select/select-helper","jira/ajs/select/select-model","jira/ajs/select/suggestions/select-suggest-handler","jira/ajs/layer/inline-layer-factory","jira/ajs/list/list","jira/ajs/list/item-descriptor","jira/util/navigator","jira/util/objects","jira/util/assistive","jquery"],function(e,t,i,s,n,o,r,l,a,u,d,h,c,p,g){return n.extend({init:function(e){return this._setOptions(e)===this.INVALID?this.INVALID:(g.extend(this,o),this.options.element=g(this.options.element),this.lozengeGroup=this.options.itemGroup,this.prevQuery=void 0,this._createSelectModel(),this.options.disabled?(this._createFurniture(!0),this):(this._createFurniture(),this._createSuggestionsController(),this._createListController(),this._createDropdownController(),this._assignEventsToFurniture(),this._setInitState(),this.options.width&&this.setFieldWidth(this.options.width),void this.model.$element.addClass("multi-select-select").trigger("initialized",[this])))},_createSelectModel:function(){this.model=new r({element:this.options.element,removeOnUnSelect:this.options.removeOnUnSelect})},_setInitState:function(){this._restoreSelectedOptions(),this.options.inputText&&(this.$field.val(this.options.inputText),this.updateFreeInputVal())},_createListController:function(){var e=this;this.listController=new u({containerSelector:g(".aui-list",this.$container),groupSelector:"ul.aui-list-section",matchingStrategy:this.options.matchingStrategy,maxInlineResultsDisplayed:this.options.maxInlineResultsDisplayed,expandAllResults:this.options.expandAllResults,selectionHandler:function(t){return e._selectionHandler(this.getFocused(),t),!1}})},_createDropdownController:function(){var e=this;this.dropdownController=a.createInlineLayers({alignment:t.LEFT,offsetTarget:this.$field,maxInlineResultsDisplayed:this.options.maxInlineResultsDisplayed,content:g(".aui-list",this.$container)}),this.options.layerId&&(this.dropdownController.options.id=this.options.layerId),this.dropdownController.onhide(function(){e.hideSuggestions()})},_createSuggestionsController:function(){this.suggestionsHandler=this.options.suggestionsHandler?new this.options.suggestionsHandler(this.options,this.model):new l(this.options,this.model)},_getDefaultOptions:function(){return g.extend(!0,this._super(),{minRoomForText:50,errorMessage:"The value {0} is invalid.",showDropdownButton:!0,itemGroup:new s,suggestionsHandler:l,itemBuilder:function(e){return new i({label:e.label(),title:e.title(),container:this.$selectedItemsContainer})}})},_createFurniture:function(e){var t=this.model.$element.attr("id");if(this.model.$element.prev().hasClass("ajs-multi-select-placeholder")&&this.model.$element.prev().remove(),e)this.model.$element.replaceWith(this._render("disableSelectField",t));else{this.$container=this._render("container",t),this.$field=this._render("field",t).appendTo(this.$container);var i=this._render("suggestionsContainer",t);this.$container.append(i),this.suggestionsContainerId=i.attr("id"),this.$container.insertBefore(this.model.$element),this.$dropDownIcon=this._render("dropdownAndLoadingIcon",this._hasDropdownButton()).appendTo(this.$container),this.$errorMessage=this._render("errorMessage",t),this.$selectedItemsWrapper=this._render("selectedItemsWrapper").appendTo(this.$container),this.$selectedItemsContainer=this._render("selectedItemsContainer").appendTo(this.$selectedItemsWrapper)}},_assignEventsToFurniture:function(){var e=this;this._super(),this._assignEvents("body",document),this._assignEvents("selectedItemsContainer",this.$selectedItemsContainer),this._assignEvents("lozengeGroup",this.lozengeGroup),this.model.$element.bind("updateOptions",function(t){e.options=g.extend(!0,e.options,e.model.$element.getOptionsFromAttributes()),e._createSuggestionsController()}).bind("selectOption",function(t,i){e.addItem(i)}).bind("removeOption",function(t,i){e.removeItem(i)}).bind("clearSelection",function(){e.clearLozenges()}).bind("showSuggestions",function(t){e._handleDown(t)}).bind("hideSuggestions",function(){e.hideSuggestions()})},_getUserInputValue:function(){return this.options.uppercaseUserEnteredOnSelect?this.$field.val().toUpperCase():this.$field.val()},clear:function(){this.$field.val(""),this.hideSuggestions(),this.clearSelection()},clearSelection:function(){this.model.setAllUnSelected(),this.updateItemsIndent(),this.model.$element.trigger("unselect",[this])},clearLozenges:function(){this.lozengeGroup.removeAllItems(),this.clear()},removeItem:function(e){var t=this;this.model.setUnSelected(e),window.setTimeout(function(){t.updateItemsIndent()},0),this.model.$element.trigger("unselect",[e,this])},_restoreSelectedOptions:function(){var e=this;g.each(this.model.getDisplayableSelectedDescriptors(),function(){e.addItem(this,!0)}),this.updateItemsIndent()},_shouldEnableLozengeGroup:function(){return this.lozengeGroup.items.length>0&&this.lozengeGroup.index<0&&(0===this.$field.val().length||0===this.getCaret(this.$field[0]))},_handleBackSpace:function(){var e=this;this._shouldEnableLozengeGroup()&&setTimeout(function(){e.lozengeGroup.shiftFocus(-1)},0)},_handleLeft:function(){if(this._shouldEnableLozengeGroup()){var e=this;setTimeout(function(){e.lozengeGroup.shiftFocus(-1)},0)}},updateItemsIndent:function(){var e=20,t=this._getInputIndent(),i=t.top+e;i+=this.$container&&this.$container.closest(".inline-edit-fields").size()?0:6,this.$field.css({paddingTop:t.top,paddingLeft:t.left}),this.$field.css({height:i}),this.currentTopOffset&&this.currentTopOffset!==t.top&&this.$container.trigger("multiSelectHeightUpdated",[this]),this.currentTopOffset=t.top},_isItemPresent:function(e){var t=!1,i=e.value();return g.each(this.lozengeGroup.items,function(){if(this.value===i)return t=!0,!1}),t},addItem:function(e,t){if(e instanceof d&&(e=c.copyObject(e.allProperties(),!1)),e.value=g.trim(e.value),e.label=g.trim(e[this.options.itemAttrDisplayed])||e.value,e.title=g.trim(e.title)||e.label,e=new d(e),!this._isItemPresent(e)){var i=this.options.itemBuilder.call(this,e);this.lozengeGroup.addItem(i),this._assignEvents("lozenge",i),this.model.setSelected(e),this.updateItemsIndent(),this.dropdownController.setPosition(),i.value=e.value(),t||this.model.$element.trigger("selected",[e,this])}},_addMultipleItems:function(e,t){var i=this;g.each(e,function(e,s){t&&(s.removeOnUnSelect=!0),i.addItem(s)})},_getInputIndent:function(){var e,t,i,s,n=21,o=5,r=4,l=this.lozengeGroup.items.length-1;return i={top:r,left:o},l>=0&&(s=this.lozengeGroup.items[l].$lozenge,e=s.prop("offsetTop"),t=s.prop("offsetLeft")+s.outerWidth(),t>this.$container.width()-n-this.options.minRoomForText&&(e+=s.prop("offsetHeight"),t=0),i.top+=e,i.left+=t),i},_selectionHandler:function(e,t){var i=this;e.each(function(){i.addItem(g.data(this,"descriptor"))}),this.$field.val("").focus().scrollIntoView({margin:20}),this.hideSuggestions(),this.hideErrorMessage(),this.updateFreeInputVal(),this.model.$element.trigger("change"),t.preventDefault()},isValidItem:function(e){var t=this.listController.getFocused().data("descriptor");return!!t&&(e=e.toLowerCase(),e===g.trim(t.label.toLowerCase())||e===g.trim(t.value.toLowerCase()))},handleFreeInput:function(){var e,t=g.trim(this.$field.val());t&&(e=this.model.getDescriptor(t),e?(this.addItem(e),this.model.$element.trigger("change"),this.$field.val(""),this.hideErrorMessage(),this.updateFreeInputVal()):this.options.submitInputVal||this.showErrorMessage(t))},submitForm:function(){0!==this.$field.val().length||this.suggestionsVisible||g(this.$field[0].form).submit()},_handleCharacterInput:function(e,t){this._super(e,t),this.updateFreeInputVal()},_deactivate:function(){this.handleFreeInput(),this.lozengeGroup.trigger("blur"),this.hideSuggestions()},keys:{Left:function(){this._handleLeft()},Backspace:function(){this._handleBackSpace()},Return:function(e){this.submitForm(),e.preventDefault()},Tab:function(e){this.acceptFocusedSuggestion()}},_events:{body:{tabSelect:function(){this.$field.is(":visible")&&this.updateItemsIndent()},multiSelectRevealed:function(){this.$field.is(":visible")&&this.updateItemsIndent()}},field:{blur:function(){this.ignoreBlurEvent?(this.ignoreBlurEvent=!1,this.$field.focus()):this._deactivate()},"aui:keydown aui:keypress":function(e){this.lozengeGroup.index>=0&&(e.key in this.lozengeGroup.keys?e.preventDefault():"Return"===e.key?(this.submitForm(),e.preventDefault()):(this.onEdit(e),this.lozengeGroup.trigger("blur")))},click:function(){this.prevQuery=void 0,this.lozengeGroup.trigger("blur"),this.$field.focus()}},lozengeGroup:{focus:function(){this.$field.focus(),this.hideSuggestions(),this._unassignEvents("keys",this.$field),this.$field.attr("aria-controls",this.suggestionsContainerId)},blur:function(){this._assignEvents("keys",this.$field),this.$field.removeAttr("aria-controls"),this.$field.val()&&this.$field.val()!=this.prevQuery&&(this.prevQuery=this.$field.val(),this._handleCharacterInput())}},lozenge:{remove:function(e){this.removeItem(this.model.getDescriptor(e.target.value)),this.$field.focus()},focus:function(e){p.wait(function(){this.$field.attr("aria-activedescendant",e.currentTarget.$lozenge.attr("id"))}.bind(this))},blur:function(){this.$field.removeAttr("aria-activedescendant")}},selectedItemsContainer:{click:function(e){e.target===e.currentTarget&&(this.lozengeGroup.trigger("blur"),this.$field.focus())}}},_renders:{errorMessage:function(e){return g('<div class="error" />').attr("id",e+"-error")},selectedItemsWrapper:function(){return g('<div class="representation"></div>')},selectedItemsContainer:function(){return g('<ul class="items" role="listbox" />')},field:function(e){return this._render("baseField","textarea").attr({id:e+"-textarea",class:"text long-field",wrap:"off"})},disableSelectField:function(e){return g("<input type='text' class='long-field' />").attr({name:e,id:e})},container:function(e){return g('<div class="jira-multi-select long-field" id="'+e+'-multi-select">')},suggestionsContainer:function(e){return g('<div class="aui-list" tabindex="-1" />').attr("id",e+"-suggestions")}}})}),AJS.namespace("AJS.MultiSelect",null,require("jira/ajs/select/multi-select"));;
;
/* module-key = 'jira.webresources:select-pickers', location = '/includes/jira/field/IssuePicker.js' */
define("jira/field/issue-picker",["jira/ajs/select/multi-select","jira/ajs/list/group-descriptor","jira/ajs/list/item-descriptor","wrm/context-path","jquery","jira/libs/parse-uri"],function(e,s,i,t,r,n){var a=t(),u=e.extend({_formatResponse:function(e){var t=[],u=function(){var e=n(window.location);return e.protocol+"://"+e.authority}();return e&&e.sections&&r(e.sections).each(function(e,n){var o=new s({weight:e,label:n.label,description:n.sub});n.issues&&n.issues.length>0&&r(n.issues).each(function(){o.addItem(new i({highlighted:!0,value:this.key,label:this.key+" - "+this.summaryText,icon:this.img?u+a+this.img:null,html:this.keyHtml+" - "+this.summary}))}),t.push(o)}),t},_getDefaultOptions:function(){return r.extend(!0,this._super(),{ajaxOptions:{formatResponse:this._formatResponse}})},_launchPopup:function(){function e(e,s){return null==e?s:e}var s,i,t,n,o=this;u.callback=function(e){"string"==typeof e&&(e=JSON.parse(e)),o._addMultipleItems(e,!0),o.$field.focus()},n=this.options.ajaxOptions.data,s=a+"/secure/popups/IssuePicker.jspa?",i={singleSelectOnly:"false",decorator:"popup",currentIssue:n.currentIssueKey||"",showSubTasks:e(n.showSubTasks,!1),showSubTasksParent:e(n.showSubTaskParent,!1)},n.currentProjectId&&(i.currentProjectId=n.currentProjectId),s+=r.param(i),t=window.open(s,"IssueSelectorPopup","status=no,resizable=yes,top=100,left=200,width="+this.options.popupWidth+",height="+this.options.popupHeight+",scrollbars=yes,resizable"),t.opener=self,t.focus()},_createFurniture:function(e){var s;this._super(e),s=this._render("popupLink"),this._assignEvents("popupLink",s),this.$container.addClass("jira-issue-picker"),this.$container.addClass("hasIcon"),this.$container.after(s)},handleFreeInput:function(){var e=this.$field.val().toUpperCase().match(/\S+/g);e&&this._addMultipleItems(r.map(e,function(e){return{value:e,label:e}})),this.$field.val("")},_events:{popupLink:{click:function(e){this._launchPopup(),e.preventDefault()}}},_renders:{popupLink:function(){return r("<a class='issue-picker-popup' />").attr({href:"#",title:this.options.popupLinkMessage}).text(""+this.options.popupLinkMessage)}}});return u.callback=null,u}),AJS.namespace("jira.issuepicker",null,require("jira/field/issue-picker")),AJS.namespace("AJS.IssuePicker",null,require("jira/field/issue-picker")),AJS.namespace("JIRA.IssuePicker",null,require("jira/field/issue-picker"));;
;
/* module-key = 'jira.webresources:select-pickers', location = '/includes/jira/field/LabelPicker.js' */
define("jira/field/label-picker",["jira/util/formatter","jira/ajs/select/multi-select","jira/ajs/list/group-descriptor","jira/ajs/list/item-descriptor","wrm/context-path","jquery"],function(e,t,i,s,a,l){var n=a();return t.extend({_getDefaultOptions:function(){return l.extend(!0,this._super(),{ajaxOptions:{url:n+"/includes/js/ajs/layer/labeldata.js",query:!0,formatResponse:this._formatResponse},removeDuplicates:!0,removeOnUnSelect:!0,userEnteredOptionsMsg:"New Label"})},isValidItem:function(e){return!/\s/.test(e)},_handleServerSuggestions:function(e){e&&e.token&&l.trim(this.$field.val())!==e.token||this._super(e)},_handleSpace:function(){""!==l.trim(this.$field.val())&&this.handleFreeInput()&&this.hideSuggestions()},keys:{Spacebar:function(e){this._handleSpace(),e.preventDefault()}},_formatResponse:function(t){var a=new i({label:"Suggestions",type:"optgroup",styleClass:"labels-suggested"});return t&&t.suggestions&&l.each(t.suggestions,function(){a.addItem(new s({value:this.label,label:this.label,html:this.html,highlighted:!0}))}),[a]},handleFreeInput:function(){var e=l.trim(this.$field.val()).match(/\S+/g);if(e){for(var t,i=0;t=e[i];i++)this.addItem({value:t,label:t});this.model.$element.trigger("change")}this.$field.val("")}})}),AJS.namespace("AJS.LabelPicker",null,require("jira/field/label-picker")),AJS.namespace("JIRA.LabelPicker",null,require("jira/field/label-picker"));;
;
/* module-key = 'jira.webresources:select-pickers', location = '/includes/ajs/select/SingleSelect.js' */
define("jira/ajs/select/single-select",["jira/util/formatter","jira/ajs/layer/layer-constants","jira/ajs/select/queryable-dropdown-select","jira/ajs/select/select-helper","jira/ajs/select/select-model","jira/ajs/select/suggestion-collection-model","jira/ajs/select/suggestions/select-suggest-handler","jira/ajs/layer/inline-layer-factory","jira/ajs/list/list","jira/ajs/list/item-descriptor","jira/util/navigator","jquery"],function(e,t,i,s,n,o,r,a,l,d,h,c){return i.extend({init:function(e){return this._setOptions(e)===this.INVALID?this.INVALID:(this._createSelectModel(),this.options.disabled?(this._createFurniture(!0),this):(c.extend(this,s),this._createFurniture(),this._createSuggestionsController(),this._createDropdownController(),this._createListController(),this._assignEventsToFurniture(),this._setInitState(),this.options.width&&this.setFieldWidth(this.options.width),this.$overlabel&&this.$overlabel.overlabel(this.$field),this.options.uneditable&&this.disable(),void this.model.$element.addClass("aui-ss-select").trigger("initialized",[this])))},disable:function(){this.$container.find(".drop-menu").addClass("hidden"),this.$container.find("input").attr("disabled","disabled"),this.$container.find("input").attr("aria-disabled","true"),this._super()},enable:function(){this.$container.find(".drop-menu").removeClass("hidden"),this.$container.find("input").removeAttr("disabled"),this.$container.find("input").removeAttr("aria-disabled"),this._super()},_setInitState:function(){this.options.editValue?(this._setEditingMode(),this.$field.val(this.options.editValue)):this.getSelectedDescriptor()?this.setSelection(this.getSelectedDescriptor()):(this._setEditingMode(),this.options.inputText&&this.$field.val(this.options.inputText))},_createSelectModel:function(){this.options.model?this.model=new this.options.model({element:this.options.element,removeOnUnSelect:this.options.removeOnUnSelect}):this.model=new n({element:this.options.element,removeOnUnSelect:this.options.removeOnUnSelect})},_createDropdownController:function(){this.dropdownController=a.createInlineLayers({alignment:t.LEFT,offsetTarget:this.$field,content:c(".aui-list",this.$container),setMaxHeightToWindow:this.options.setMaxHeightToWindow,minHeight:this.options.minHeight})},_createSuggestionsController:function(){this.suggestionsHandler=this.options.suggestionsHandler?new this.options.suggestionsHandler(this.options,this.model):new r(this.options,this.model)},_assignEventsToFurniture:function(){var e=this;this._super(),this.model.$element.bind("reset",function(){var t=e.getSelectedDescriptor();t&&e.setSelection(e.getSelectedDescriptor())}).bind("showSuggestions",function(t){e._handleDown(t)}).bind("hideSuggestions",function(){e.hideSuggestions()}).bind("set-selection-value",function(t,i){e._setDescriptorWithValue(i)})},setFieldWidth:function(e){this.$container.css({maxWidth:e}),this.$field.css({maxWidth:e})},_createListController:function(){var e=this;this.listController=new l({containerSelector:c(".aui-list",this.$container),groupSelector:"ul.aui-list-section",matchingStrategy:this.options.matchingStrategy,maxInlineResultsDisplayed:this.options.maxInlineResultsDisplayed,matchItemText:this.options.matchItemText,hasLinks:this.options.hasLinks,selectionHandler:function(t){var i=this.getFocused(),s=i.data("descriptor");return e.setSelection(s),e.$field.select(),t.preventDefault(),!1}})},getSelectedDescriptor:function(){return this.model.getDisplayableSelectedDescriptors()[0]},getDisplayVal:function(e){return e[this.options.itemAttrDisplayed||"label"]()},_getDefaultOptions:function(){return c.extend(!0,this._super(),{errorMessage:"The value {0} is invalid.",revertOnInvalid:!1,showDropdownButton:!0})},_createFurniture:function(e){var t=this.model.$element.attr("id");this.model.$element.data("aui-ss",!0),this.$container=this._render("container",this.model.id);var i=this.model.$element.data("container-class");if(i&&this.$container.addClass(i),e){var s=this.model.$element.val()&&this.model.$element.val()[0];s=s||"",this.model.$element.replaceWith(this._render("disableSelectField",t,s))}else{var n=this.model.getPlaceholder();this.$field=this._render("field",this.model.id,n).appendTo(this.$container);var o=this._render("suggestionsContainer",this.model.id);this.suggestionsContainerId=o.attr("id"),this.$container.append(o),this.$field.attr("aria-controls",o.attr("id")),this.$container.insertBefore(this.model.$element),this.$dropDownIcon=this._render("dropdownAndLoadingIcon",this._hasDropdownButton()).appendTo(this.$container),this.$errorMessage=this._render("errorMessage")}},getQueryVal:function(){return this.$container.hasClass("aui-ss-editing")?c.trim(this.$field.val()):""},_setSuggestions:function(e,t){e?(this._super(e,t),this.model.$element.trigger("suggestionsRefreshed",[this])):this.hideSuggestions()},_setEditingMode:function(){this.$container.addClass("aui-ss-editing").removeClass("aui-ss-has-entity-icon"),this.$field.css("paddingLeft")},_hasIcon:function(){var e,t=this.getSelectedDescriptor();if(t)return e=t.icon(),e&&"none"!==e},_setReadOnlyMode:function(){this.$container.removeClass("aui-ss-editing"),this._hasIcon()&&(this.$container.addClass("aui-ss-has-entity-icon"),h.isIE()&&h.majorVersion()>8&&this.$container.append(this.$field.detach()))},submitForm:function(){this.suggestionsVisible||(this.handleFreeInput(),c(this.$field[0].form).submit())},selectValue:function(e){this.listController.selectValue(e)},setSelection:function(e,t){t="undefined"==typeof t||t,"string"==typeof e&&(e=new d({value:e,label:e})),this.removeFreeInputVal(),this.$field.val(e.fieldText()||this.getDisplayVal(e)),this.$field.trigger("change"),this.model.setSelected(e,t)&&this.hideErrorMessage(),this._hasIcon()&&(this.$entityIcon&&this.$entityIcon.remove(),this.$entityIcon=this._render("entityIcon",e.icon()).appendTo(this.$container)),this._setReadOnlyMode(),this.hideSuggestions(),this.lastSelection=e,this.model.$element.trigger("selected",[e,this])},clear:function(){this.$field.val(""),this.hideSuggestions(),this.clearSelection()},clearSelection:function(){var e=this;e._setEditingMode(),e.model.setAllUnSelected(),e.model.$element.trigger("unselect",[this])},_handleServerSuggestions:function(e){this.cleanUpModel(),this._super(e)},cleanUpModel:function(){this.options.ajaxOptions.query&&this.model.clearUnSelected()},onEdit:function(){this.getSelectedDescriptor()&&this.clearSelection(),this._super(),this.model.$element.trigger("query")},handleFreeInput:function(e){e=e||c.trim(this.$field.val()),this.options.revertOnInvalid&&!this.model.getDescriptor(e)?this.setSelection(this.lastSelection||""):this.$container.hasClass("aui-ss-editing")&&(this._setDescriptorWithValue(e)?this.hideErrorMessage():this.options.submitInputVal||this.showErrorMessage(e))},_setDescriptorWithValue:function(e){var t=this.model.getDescriptor(e);return!!t&&(this.setSelection(t),!0)},_handleCharacterInput:function(e){this._super(e),this.$container.hasClass("aui-ss-editing")&&this.updateFreeInputVal()},_deactivate:function(){this.handleFreeInput(),this.hideSuggestions()},keys:{Return:function(e){this.submitForm(),e.preventDefault()},Tab:function(){this.acceptFocusedSuggestion()}},_events:{field:{focus:function(){var e=this;window.setTimeout(function(){e.$field.is(":focus")&&e.$field.select()},0)},click:function(){this._handleCharacterInput(!0)}}},_renders:{label:function(e,t){return c("<label />").attr("for",t).text(e).addClass("overlabel")},errorMessage:function(){return c('<div class="error" />')},entityIcon:function(e){var t=c('<img class="aui-ss-entity-icon" alt=""/>');return t.attr("src",e),t},field:function(e,t){var i=this._render("baseField").attr({class:"text aui-ss-field ajs-dirty-warning-exempt",id:e+"-field",type:"text"});return t&&i.attr("placeholder",t),i},disableSelectField:function(e,t){return c("<input type='text' class='text long-field' />").attr({value:t,name:e,id:e})},container:function(e){return c('<div class="aui-ss'+(this.options.ajaxOptions?" ajax-ss":"")+'" id="'+e+'-single-select">')},dropdownAndLoadingIcon:function(e){return c('<span class="icon aui-ss-icon noloading"><span>More</span></span>').toggleClass("drop-menu",!!e)}}})}),AJS.namespace("AJS.SingleSelect",null,require("jira/ajs/select/single-select"));;
;
/* module-key = 'jira.webresources:select-pickers', location = '/includes/ajs/select/ScrollableSingleSelect.js' */
define("jira/ajs/select/scrollable-single-select",["jira/jquery/deferred","jira/ajs/select/single-select","jira/ajs/layer/inline-layer-factory","jira/ajs/list/pageable-list","jquery","underscore"],function(e,t,s,i,n,o){return t.extend({init:function(e){var t={newResultsThreshold:90};e=n.extend(!0,t,e),this._super(e),this.newResultsThreshold=e.newResultsThreshold},_assignEventsToFurniture:function(){var e,t=this;this._super(),this.dropdownController.$layer.on("scroll",function(){100*this.scrollTop/t.newResultsThreshold>this.scrollHeight-this.clientHeight&&(e&&!e.isResolved()||(e=t._fetchNewContent().done(function(){t.listController.isDisplayedAllItems()&&"function"==typeof t.scrolledToBottomHandler&&t.scrolledToBottomHandler()}).fail(function(s){t.listController.showPageRenderError(),t.model.$element.one("suggestionsRefreshed",function(){e=void 0})})))})},_createListController:function(){var e=this;this.listController=new i({containerSelector:n(".aui-list",this.$container),groupSelector:"ul.aui-list-section",matchingStrategy:this.options.matchingStrategy,pageSize:this.options.pageSize,pagingThreshold:this.options.pagingThreshold,matchItemText:this.options.matchItemText,hasLinks:this.options.hasLinks,selectionHandler:function(t){var s=this.getFocused(),i=s.data("descriptor");return e.setSelection(i),e.$field.select(),t.preventDefault(),!1}})},_fetchNewContent:function(){var t=e();return o.defer(function(){try{this.listController.addNextPage(),t.resolve()}catch(e){t.reject(e)}}.bind(this)),t}})});;
;
/* module-key = 'jira.webresources:select-pickers', location = '/includes/ajs/select/CheckboxMultiSelect.js' */
define("jira/ajs/select/checkbox-multi-select",["jira/util/formatter","jira/ajs/select/queryable-dropdown-select","jira/ajs/select/select-helper","jira/ajs/select/select-model","jira/ajs/select/suggestions/checkbox-multi-select-suggest-handler","jira/ajs/list/list","jira/ajs/list/item-descriptor","jira/util/events","jira/util/events/types","jquery","jira/featureflags/feature-manager","underscore"],function(e,t,i,n,s,o,l,r,a,c,d,h){return t.extend({init:function(e){var t=this;c.extend(this,i),this._setOptions(e);var o=c(this.options.element);if(!o.attr("multiple"))throw"Cannot create CheckboxMultiSelect without multiple-select select element.";return this.options.element=c(this.options.element).hide(),this.model=new n({element:this.options.element,removeOnUnSelect:this.options.removeOnUnSelect}),this.suggestionsHandler=this.options.suggestionsHandler?new this.options.suggestionsHandler(this.options,this.model):new s(this.options,this.model),this.options.element.bind("updateOptions",function(){t._setOptions(e)}).bind("selectOption",function(e,i){t.selectItem(i)}).bind("removeOption",function(e,i){t.unselectItem(i)}).bind("clear",function(){t.clear()}),this._createFurniture(),this._createDropdownController(),this._createListController(),this._assignEventsToFurniture(),this.render(),this.model.$element.addClass("check-list-select-select").trigger("initialized",[this]),r.trigger(a.CHECKBOXMULITSELECT_READY,[this.model.$element,this]),this},_createListController:function(){var e=this,t=null;this.suggestionsHandler.suggestionHighlighter&&(t=this.suggestionsHandler.suggestionHighlighter.bind(this.suggestionsHandler)),this.listController=new o({stallEventBind:this.options.stallEventBind,containerSelector:c(".aui-list",this.$container),scrollContainer:".aui-list-scroll",selectionEvent:"change",delegateTarget:this.$field,hasLinks:!1,itemSelector:".check-list-item",groupSelector:"ul.aui-list-section",matchingStrategy:this.options.matchingStrategy,matchingHighlighter:t,maxInlineResultsDisplayed:this.options.maxInlineResultsDisplayed,expandAllResults:this.options.expandAllResults,renderers:this._getCustomRenders(),selectionHandler:function(t){var i;return i="change"===t.type?c(t.target).closest(this.options.itemSelector):this.getFocused(),e._selectionHandler(i,t),!1}})},_createDropdownController:function(){this.dropdownController={show:c.noop,setWidth:c.noop,setPosition:c.noop,hide:c.noop}},_getCustomRenders:function(){return{suggestion:this._renders.suggestionItem,suggestionItemElement:this._renders.suggestionItemElement.bind(this),suggestionItemResolver:this._renders.suggestionItemResolver.bind(this)}},_handleCharacterInput:function(e){c.each(this.listController.$container.find(".invalid-item"),function(){c(this).tipsy("hide")}),this.requestSuggestions(e).done(h.bind(function(e){this._setSuggestions(e)},this)),this.$dropDownIcon.toggleClass("clear-field aui-iconfont-remove",!!this.getQueryVal()),this.$dropDownIcon.toggleClass("aui-iconfont-search",!this.getQueryVal()),this.listController.moveToFirst()},_getDefaultOptions:function(){return c.extend(!0,this._super(),{errorMessage:"The value {0} is invalid.",stallEventBind:!0})},_createFurniture:function(){var e=this.model.$element.attr("id");this.$container=this._render("container",e),this.$fieldContainer=this._render("fieldContainer").appendTo(this.$container),this.$fieldContainer.attr("data-no-focus-lock",!0),this.$field=this._render("field",e,this._getPlaceholderText()).appendTo(this.$fieldContainer);var t=this._render("suggestionsContainer",e);this.suggestionsContainerId=t.attr("id"),this.$container.append(t),this.$field.attr("aria-controls",t.attr("id")),this.$container.insertBefore(this.model.$element),this.$dropDownIcon=this._render("dropdownAndLoadingIcon").appendTo(this.$fieldContainer)},_getPlaceholderText:function(){var t=c.trim(this.model.$element.data("placeholder-text"));return t&&""!==t?t:"Search"},_assignEventsToFurniture:function(){var e=this;this._assignEvents("body",document),this.options.stallEventBind?window.setTimeout(function(){e._assignEvents("field",e.$field)._assignEvents("keys",e.$field)._assignEvents("container",e.$container)._assignEvents("fieldIcon",e.$dropDownIcon)},0):e._assignEvents("field",e.$field)._assignEvents("keys",e.$field)._assignEvents("fieldIcon",e.$dropDownIcon),this.listController.$container.delegate(".clear-all","click",function(t){t.preventDefault();var i=c(t.target);i.hasClass("disabled")||(i.parent().remove(),e.clear())}),this.listController.bind("itemFocus",this._onItemFocus.bind(this))},clear:function(){var e=this,t=this.model.getDisplayableSelectedDescriptors();this.model.setAllUnSelected(),0===this.$field.val().length?(this.$field.val(""),this.listController.$container.find(":checkbox").removeAttr("checked")):(this.clearQueryField(),this.listController.moveToFirst()),this._toggleClearButton(),c.each(t,function(){e.model.$element.trigger("unselect",[this,e,!0])})},clearQueryField:function(){this.$field.val(""),this._handleCharacterInput(!0),this.$field.focus()},unselectItem:function(e){this.model.setUnSelected(e),this.model.$element.trigger("unselect",[e,this,!1]),this.$container.find(".aui-list input[type=checkbox]").each(function(){this.value===e.value()&&(this.checked=!1)})},showLoading:function(){return this.$dropDownIcon.addClass("loading").removeClass("noloading"),this},hideLoading:function(){return this.$dropDownIcon.removeClass("loading").addClass("noloading"),this},_handleEscape:function(e){function t(e){27===e.keyCode&&(e.stopPropagation(),i.off("keyup",t))}var i=this.$field;"keydown"===e.type&&""!==i.val()&&(e.stopPropagation(),i.val(""),i.on("keyup",t),this._handleCharacterInput(!0))},selectItem:function(e,t){this.model.setSelected(e),t||this.model.$element.trigger("selected",[e,this]),this.$container.find(".aui-list input[type=checkbox]").each(function(){this.value===e.value()&&(this.checked=!0)})},_selectionHandler:function(e,t){var i=this;e.each(function(){var e=c.data(this,"descriptor"),n=c(this).find(":input");(i._directCheckboxClick||t.shiftKey)&&(e.properties.fromCheckbox=!0),i._setDescriptorSelection(e,n)}),this._toggleClearButton()},_toggleClearButton:function(){var e=this.model.getSelectedValues().length>0;this.listController.$container.find(".clear-all").attr("tabindex",e?null:-1).closest(".check-list-group-actions").toggleClass("hidden",!e)},_setDescriptorSelection:function(e,t){e.selected()?(this.unselectItem(e),t.removeAttr("checked")):(this.selectItem(e),t.attr("checked","checked"))},render:function(){this._handleCharacterInput(!0)},_events:{field:{keydown:function(e){function t(){""!==c.trim(i.$field.val())&&(i.$field.val(""),i._handleCharacterInput(!0))}if(13===e.keyCode){e.preventDefault();var i=this;this.model.$element.bind("unselect selected",t),setTimeout(function(){i.model.$element.unbind("unselect selected",t)},0)}}},container:{mousedown:function(e){function t(e){"mouseup"===e.type&&(i._directCheckboxClick=!0,setTimeout(function(){i._directCheckboxClick=!1},40)),c(document).unbind("mouseup mouseleave",t)}var i=this;c(e.target).is("input[type=checkbox]")&&c(document).unbind("mouseup mouseleave",t).bind("mouseup mouseleave",t),e.target!==this.$field.get(0)&&e.preventDefault()},click:function(){this.$field.get(0)!==document.activeElement&&this.$field.focus()}},fieldIcon:{click:function(e){c(e.target).hasClass("clear-field")&&this.clearQueryField()}}},_renders:{errorMessage:function(e){return c('<div class="error" />').attr("id",e+"-error")},fieldContainer:function(){return c("<div class='check-list-field-container' />")},field:function(e,t){return this._render("baseField").attr({placeholder:t,class:"aui-field check-list-field",id:e+"-input"})},disableSelectField:function(e){return c("<input type='text' class='long-field' />").attr({name:e,id:e})},container:function(e){return c('<div class="check-list-select" />').attr("id",e+"-multi-select")},suggestionItemElement:function(e,t){var i,n=c("<input type='checkbox' tabindex='-1' />").val(e.value()),s=c('<li class="check-list-item" role="option" />').attr("id",e.value()+"-"+this.options.id),o=c("<label class='item-label' />");return e.styleClass()&&s.addClass(e.styleClass()),t?o.html(t):e.html()?o.html(e.html()):o.text(e.label()),e.selected()&&n.attr("checked","checked"),e.icon()&&"none"!==e.icon()&&(i=c("<img height='16' width='16' align='absmiddle' />").attr("src",e.icon()),e.fallbackIcon()&&"none"!==e.fallbackIcon()&&i.one("error",function(){this.src=e.fallbackIcon()}),o.prepend(i)),e.title()&&(o.attr("title",e.title()),o.attr("data-descriptor-title",e.title())),e.disabled()&&(s.addClass("disabled"),n.attr("disabled","disabled")),o.prepend(n),s.append(o),s},suggestionItemResolver:function(e,t){return this._render("suggestionItemElement",e,t)},suggestionItem:function(t,i){var n,s=this._render("suggestionItemResolver",t,i),o=s.find("label");if(t.invalid()||t.disabled()){s.addClass("has-invalid-item"),o.append("<span class='invalid-item'></span>"),n=o.find(".invalid-item"),h.defer(function(){s.attr("original-title",s.attr("title")),s.removeAttr("title")});var l;t.title()?(l=t.title(),o.attr("original-title",l),o.removeAttr("title")):l=e.format("{0} \'\'{1}\'\' is not valid for your current Project(s) and/or Issue Type(s) selection","Value",t.label()),n.tipsy({title:function(){return l},className:"tipsy-front",trigger:"manual"}),n.hoverIntent({interval:200,over:function(){n.tipsy("show")},out:function(){n.tipsy("hide")}})}return s.data("descriptor",t)},dropdownAndLoadingIcon:function(){return c('<span class="icon-default aui-icon aui-icon-small aui-iconfont-search noloading"></span>')}},handleFreeInput:c.noop,hideSuggestions:c.noop,showErrorMessage:c.noop,_deactivate:c.noop})}),AJS.namespace("AJS.CheckboxMultiSelect",null,require("jira/ajs/select/checkbox-multi-select"));;
;
/* module-key = 'jira.webresources:select-pickers', location = '/includes/ajs/select/CheckboxMultiSelectStatusLozenge.js' */
define("jira/ajs/select/checkbox-multi-select-status-lozenge",["jira/ajs/select/checkbox-multi-select","jquery"],function(e,t){return e.extend({_getCustomRenders:function(){var e=this._super();return e.suggestionItemStatusLozenge=this._renders.suggestionItemStatusLozenge,e},_renders:{suggestionItemStatusLozenge:function(e){var s=t("<input type='checkbox' tabindex='-1' />").val(e.value()),a=t('<li class="check-list-item" role="option" />').attr("id",e.value()+"-"+this.options.id),l=t("<label class='item-label' />");return e.styleClass()&&a.addClass(e.styleClass()),l.html(JIRA.Template.Util.Issue.Status.issueStatusResolver({issueStatus:e.model().data("simple-status"),isSubtle:!0})),e.selected()&&s.attr("checked","checked"),e.title()&&l.attr("data-descriptor-title",e.title()),e.disabled()&&(a.addClass("disabled"),s.attr("disabled","disabled")),l.prepend(s),a.append(l),a},suggestionItemResolver:function(e,t){return e.model().data("simple-status")?this._render("suggestionItemStatusLozenge",e):this._render("suggestionItemElement",e,t)}}})}),AJS.namespace("AJS.CheckboxMultiSelectStatusLozenge",null,require("jira/ajs/select/checkbox-multi-select-status-lozenge"));;
;
/* module-key = 'jira.webresources:jira-analytics-amd', location = '/includes/jira/analytics.js' */
define("jira/analytics",function(){"use strict";function n(){return window.AJS||(window.AJS={}),window.AJS}function e(n){u.EventQueue.push(n)}var u=n();return u.EventQueue=u.EventQueue||[],{send:e}});;
;
/* module-key = 'jira.webresources:trigger-custom-event', location = '/js/customevents/trigger-custom-event.js' */
define("jira/customevents/trigger-custom-event",["underscore","jira/data/local-storage","jira/data/cookie"],function(n,e,t){var r=function(n){function e(n){try{if(null==n.location.href)return!1}catch(n){return!1}return!0}function t(n){return n===n.parent}for(var r=n;!t(r)&&e(r.parent);)r=r.parent;return r},i=function(i,a,o){var u=e.getItem("__storejs_navigation-session-provider_navigationSessionId")||t.read("navigationSessionId",null);if(u){var c=document.createEvent("Event");c.detail=n.extend({},{eventName:a},o),c.initEvent(i,!0,!1);var s=r(window);return s.document.dispatchEvent(c),c}};return{trigger:i,getTopmostSameOriginWindow:r}});;
;
/* module-key = 'com.atlassian.jira.jira-client-analytics-plugin:analytics-web-client-library', location = 'jira-client-analytics-module/node_modules/@atlassiansox/analytics-web-client/dist/analytics-web-client.with-deps.amd.js' */
define("analytics-web-client",[],function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=146)}([function(t,e){var n=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UNAVAILABLE="UNAVAILABLE",e.ERROR="ERROR",e.YES="YES",e.NO="NO"},function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,n){var r=n(67)("wks"),i=n(46),o=n(4).Symbol,a="function"==typeof o;(t.exports=function(t){return r[t]||(r[t]=a&&o[t]||(a?o:i)("Symbol."+t))}).store=r},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e,n){var r=n(4),i=n(0),o=n(19),a=n(16),s=function(t,e,n){var u,c,l,f=t&s.F,d=t&s.G,p=t&s.S,h=t&s.P,v=t&s.B,y=t&s.W,m=d?i:i[e]||(i[e]={}),g=m.prototype,_=d?r:p?r[e]:(r[e]||{}).prototype;d&&(n=e);for(u in n)(c=!f&&_&&void 0!==_[u])&&u in m||(l=c?_[u]:n[u],m[u]=d&&"function"!=typeof _[u]?n[u]:v&&c?o(l,r):y&&_[u]==l?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(l):h&&"function"==typeof l?o(Function.call,l):l,h&&((m.virtual||(m.virtual={}))[u]=l,t&s.R&&g&&!g[u]&&a(g,u,l)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,t.exports=s},function(t,e,n){(function(r){function i(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function o(t){var n=this.useColors;if(t[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+t[0]+(n?"%c ":" ")+"+"+e.humanize(this.diff),n){var r="color: "+this.color;t.splice(1,0,r,"color: inherit");var i=0,o=0;t[0].replace(/%[a-zA-Z%]/g,function(t){"%%"!==t&&(i++,"%c"===t&&(o=i))}),t.splice(o,0,r)}}function a(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function s(t){try{null==t?e.storage.removeItem("debug"):e.storage.debug=t}catch(t){}}function u(){var t;try{t=e.storage.debug}catch(t){}return!t&&void 0!==r&&"env"in r&&(t=Object({NODE_ENV:"production"}).DEBUG),t}e=t.exports=n(194),e.log=a,e.formatArgs=o,e.save=s,e.load=u,e.useColors=i,e.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(t){}}(),e.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],e.formatters.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},e.enable(u())}).call(e,n(78))},function(t,e,n){"use strict";var r=n(39),i=Object.prototype.toString,o=function(t){var e=typeof t;return"number"===e||"object"===e&&"[object Number]"===i.call(t)},a="function"==typeof Array.isArray?Array.isArray:function(t){return"[object Array]"===i.call(t)},s=function(t){return null!=t&&(a(t)||"function"!==t&&o(t.length))},u=function(t,e){for(var n=0;n<e.length&&!1!==t(e[n],n,e);n+=1);},c=function(t,e){for(var n=r(e),i=0;i<n.length&&!1!==t(e[n[i]],n[i],e);i+=1);},l=function(t,e){return(s(e)?u:c).call(this,t,e)};t.exports=l},function(t,e,n){var r=n(11),i=n(94),o=n(63),a=Object.defineProperty;e.f=n(9)?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),i)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){t.exports=!n(20)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,n){"use strict";e.inherit=n(79),e.clone=n(28),e.type=n(185)},function(t,e,n){var r=n(12);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){t.exports={default:n(165),__esModule:!0}},function(t,e,n){"use strict";e.__esModule=!0;var r=n(50),i=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default=i.default||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){return(0,s.default)(t).map(function(e){return t[e]})}function o(t,e){return i(t).indexOf(e)>-1}Object.defineProperty(e,"__esModule",{value:!0}),e.originTracingType=e.webPlatforms=e.desktopPlatforms=e.apdexType=e.userType=e.tenantType=e.originType=e.platformType=e.eventType=e.envType=void 0;var a=n(13),s=r(a),u=n(293),c=r(u);e.objectValues=i,e.isType=o;var l=(e.envType=(0,c.default)({LOCAL:"local",DEV:"dev",STAGING:"staging",PROD:"prod"}),e.eventType=(0,c.default)({TRACK:"track",UI:"ui",OPERATIONAL:"operational",SCREEN:"screen"}),e.platformType=(0,c.default)({MAC:"mac",LINUX:"linux",WINDOWS:"windows",DESKTOP:"desktop",WEB:"web",MOBILE_WEB:"mobileWeb"}));e.originType=(0,c.default)({DESKTOP:"desktop",WEB:"web"}),e.tenantType=(0,c.default)({CLOUD_ID:"cloudId",ORG_ID:"orgId",OPSGENIE_CUSTOMER_ID:"opsgenieCustomerId",NONE:"none"}),e.userType=(0,c.default)({ATLASSIAN_ACCOUNT:"atlassianAccount",HASHED_EMAIL:"hashedEmail",TRELLO:"trello",OPSGENIE:"opsgenie"}),e.apdexType=(0,c.default)({TRANSITION:"transition",INITIAL_LOAD:"initialLoad"}),e.desktopPlatforms=(0,c.default)([l.DESKTOP,l.MAC,l.LINUX,l.WINDOWS]),e.webPlatforms=(0,c.default)([l.WEB,l.MOBILE_WEB]),e.originTracingType=(0,c.default)({ATL_ORIGIN:"atlOrigin"})},function(t,e,n){var r=n(8),i=n(44);t.exports=n(9)?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(64),i=n(42);t.exports=function(t){return r(i(t))}},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var r=n(61);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var r=n(96),i=n(68);t.exports=Object.keys||function(t){return r(t,i)}},function(t,e,n){"use strict";var r=n(27);r.Alias=n(190),r.Group=n(191),r.Identify=n(112),r.Track=n(81),r.Page=n(114),r.Screen=n(192),t.exports=r},function(t,e){function n(t){return!(null==t||!(t._isBuffer||t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)))}var r=Object.prototype.toString;t.exports=function(t){switch(r.call(t)){case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object Error]":return"error"}return null===t?"null":void 0===t?"undefined":t!==t?"nan":t&&1===t.nodeType?"element":n(t)?"buffer":typeof(t=t.valueOf?t.valueOf():Object.prototype.valueOf.apply(t))}},function(t,e,n){"use strict";function r(t){for(var e in t)"function"==typeof t[e]&&(t[e]=i(t,t[e]));return t}var i=n(116);t.exports=r},function(t,e){t.exports={}},function(t,e,n){"use strict";function r(t,e){e=e||{},"clone"in e||(e.clone=!0),e.clone&&(t=a(t)),"traverse"in e||(e.traverse=!0),t.timestamp="timestamp"in t?u(t.timestamp):new Date,e.traverse&&l(t),this.opts=e,this.obj=t}function i(t){return a(t)}var o=n(184),a=n(10).clone,s=n(186),u=n(80),c=n(51),l=n(108),f=n(10).type;o(r.prototype),r.prototype.proxy=function(t){var e=t.split(".");t=e.shift();var n=this[t]||this.field(t);return n?("function"==typeof n&&(n=n.call(this)||{}),0===e.length?this.opts.clone?i(n):n:(n=c(n,e.join(".")),this.opts.clone?i(n):n)):n},r.prototype.field=function(t){var e=this.obj[t];return this.opts.clone?i(e):e},r.proxy=function(t){return function(){return this.proxy(t)}},r.field=function(t){return function(){return this.field(t)}},r.multi=function(t){return function(){var e=this.proxy(t+"s");if("array"===f(e))return e;var n=this.proxy(t);return n&&(n=[this.opts.clone?a(n):n]),n||[]}},r.one=function(t){return function(){var e=this.proxy(t);if(e)return e;var n=this.proxy(t+"s");return"array"===f(n)?n[0]:void 0}},r.prototype.json=function(){var t=this.opts.clone?a(this.obj):this.obj;return this.type&&(t.type=this.type()),t},r.prototype.options=function(t){var e=this.obj.options||this.obj.context||{},n=this.opts.clone?a(e):e;if(!t)return n;if(this.enabled(t)){var r=this.integrations(),i=r[t]||c(r,t);return"object"!=typeof i&&(i=c(this.options(),t)),"object"==typeof i?i:{}}},r.prototype.context=r.prototype.options,r.prototype.enabled=function(t){var e=this.proxy("options.providers.all");"boolean"!=typeof e&&(e=this.proxy("options.all")),"boolean"!=typeof e&&(e=this.proxy("integrations.all")),"boolean"!=typeof e&&(e=!0);var n=e&&s(t),r=this.integrations();if(r.providers&&r.providers.hasOwnProperty(t)&&(n=r.providers[t]),r.hasOwnProperty(t)){var i=r[t];n="boolean"!=typeof i||i}return!!n},r.prototype.integrations=function(){return this.obj.integrations||this.proxy("options.providers")||this.options()},r.prototype.active=function(){var t=this.proxy("options.active");return null!==t&&void 0!==t||(t=!0),t},r.prototype.anonymousId=function(){return this.field("anonymousId")||this.field("sessionId")},r.prototype.sessionId=r.prototype.anonymousId,r.prototype.groupId=r.proxy("options.groupId"),r.prototype.traits=function(t){var e=this.proxy("options.traits")||{},n=this.userId();t=t||{},n&&(e.id=n);for(var r in t){var i=null==this[r]?this.proxy("options.traits."+r):this[r]();null!=i&&(e[t[r]]=i,delete e[r])}return e},r.prototype.library=function(){var t=this.proxy("options.library");return t?"string"==typeof t?{name:t,version:null}:t:{name:"unknown",version:null}},r.prototype.device=function(){var t=this.proxy("context.device");"object"!==f(t)&&(t={});var e=this.library().name;return t.type?t:(e.indexOf("ios")>-1&&(t.type="ios"),e.indexOf("android")>-1&&(t.type="android"),t)},r.prototype.userAgent=r.proxy("context.userAgent"),r.prototype.timezone=r.proxy("context.timezone"),r.prototype.timestamp=r.field("timestamp"),r.prototype.channel=r.field("channel"),r.prototype.ip=r.proxy("context.ip"),r.prototype.userId=r.field("userId"),t.exports=r},function(t,e,n){"use strict";var r=n(24),i=function t(e){var n=r(e);if("object"===n){var i={};for(var o in e)e.hasOwnProperty(o)&&(i[o]=t(e[o]));return i}if("array"===n){for(var i=new Array(e.length),a=0,s=e.length;a<s;a++)i[a]=t(e[a]);return i}if("regexp"===n){var u="";return u+=e.multiline?"m":"",u+=e.global?"g":"",u+=e.ignoreCase?"i":"",new RegExp(e.source,u)}return"date"===n?new Date(e.getTime()):e};t.exports=i},function(t,e,n){"use strict";var r=n(196),i=n(197),o=Object.prototype.hasOwnProperty,a=Object.prototype.toString,s=function(t){return Boolean(t)&&"object"==typeof t},u=function(t){return Boolean(t)&&"[object Object]"===a.call(t)},c=function(t,e,n,r){return o.call(e,r)&&void 0===t[r]&&(t[r]=n),e},l=function(t,e,n,r){return o.call(e,r)&&(u(t[r])&&u(n)?t[r]=d(t[r],n):void 0===t[r]&&(t[r]=n)),e},f=function(t,e){if(!s(e))return e;t=t||c;for(var n=r(2,arguments),i=0;i<n.length;i+=1)for(var o in n[i])t(e,n[i],n[i][o],o);return e},d=function(t){return f.apply(null,[l,t].concat(i(arguments)))},p=function(t){return f.apply(null,[null,t].concat(i(arguments)))};t.exports=p,t.exports.deep=d},function(t,e,n){(function(t,r){var i;(function(){function o(t,e){function n(t){if(n[t]!==y)return n[t];var o;if("bug-string-char-index"==t)o="a"!="a"[0];else if("json"==t)o=n("json-stringify")&&n("json-parse");else{var a,s='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==t){var c=e.stringify,l="function"==typeof c&&_;if(l){(a=function(){return 1}).toJSON=a;try{l="0"===c(0)&&"0"===c(new r)&&'""'==c(new i)&&c(g)===y&&c(y)===y&&c()===y&&"1"===c(a)&&"[1]"==c([a])&&"[null]"==c([y])&&"null"==c(null)&&"[null,null,null]"==c([y,g,null])&&c({a:[a,!0,!1,null,"\0\b\n\f\r\t"]})==s&&"1"===c(null,a)&&"[\n 1,\n 2\n]"==c([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==c(new u(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==c(new u(864e13))&&'"-000001-01-01T00:00:00.000Z"'==c(new u(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==c(new u(-1))}catch(t){l=!1}}o=l}if("json-parse"==t){var f=e.parse;if("function"==typeof f)try{if(0===f("0")&&!f(!1)){a=f(s);var d=5==a.a.length&&1===a.a[0];if(d){try{d=!f('"\t"')}catch(t){}if(d)try{d=1!==f("01")}catch(t){}if(d)try{d=1!==f("1.")}catch(t){}}}}catch(t){d=!1}o=d}}return n[t]=!!o}t||(t=c.Object()),e||(e=c.Object());var r=t.Number||c.Number,i=t.String||c.String,a=t.Object||c.Object,u=t.Date||c.Date,l=t.SyntaxError||c.SyntaxError,f=t.TypeError||c.TypeError,d=t.Math||c.Math,p=t.JSON||c.JSON;"object"==typeof p&&p&&(e.stringify=p.stringify,e.parse=p.parse);var h,v,y,m=a.prototype,g=m.toString,_=new u(-0xc782b5b800cec);try{_=-109252==_.getUTCFullYear()&&0===_.getUTCMonth()&&1===_.getUTCDate()&&10==_.getUTCHours()&&37==_.getUTCMinutes()&&6==_.getUTCSeconds()&&708==_.getUTCMilliseconds()}catch(t){}if(!n("json")){var b=n("bug-string-char-index");if(!_)var w=d.floor,I=[0,31,59,90,120,151,181,212,243,273,304,334],T=function(t,e){return I[e]+365*(t-1970)+w((t-1969+(e=+(e>1)))/4)-w((t-1901+e)/100)+w((t-1601+e)/400)};if((h=m.hasOwnProperty)||(h=function(t){var e,n={};return(n.__proto__=null,n.__proto__={toString:1},n).toString!=g?h=function(t){var e=this.__proto__,n=t in(this.__proto__=null,this);return this.__proto__=e,n}:(e=n.constructor,h=function(t){var n=(this.constructor||e).prototype;return t in this&&!(t in n&&this[t]===n[t])}),n=null,h.call(this,t)}),v=function(t,e){var n,r,i,o=0;(n=function(){this.valueOf=0}).prototype.valueOf=0,r=new n;for(i in r)h.call(r,i)&&o++;return n=r=null,o?v=2==o?function(t,e){var n,r={},i="[object Function]"==g.call(t);for(n in t)i&&"prototype"==n||h.call(r,n)||!(r[n]=1)||!h.call(t,n)||e(n)}:function(t,e){var n,r,i="[object Function]"==g.call(t);for(n in t)i&&"prototype"==n||!h.call(t,n)||(r="constructor"===n)||e(n);(r||h.call(t,n="constructor"))&&e(n)}:(r=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],v=function(t,e){var n,i,o="[object Function]"==g.call(t),a=!o&&"function"!=typeof t.constructor&&s[typeof t.hasOwnProperty]&&t.hasOwnProperty||h;for(n in t)o&&"prototype"==n||!a.call(t,n)||e(n);for(i=r.length;n=r[--i];a.call(t,n)&&e(n));}),v(t,e)},!n("json-stringify")){var E={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},x=function(t,e){return("000000"+(e||0)).slice(-t)},S=function(t){for(var e='"',n=0,r=t.length,i=!b||r>10,o=i&&(b?t.split(""):t);n<r;n++){var a=t.charCodeAt(n);switch(a){case 8:case 9:case 10:case 12:case 13:case 34:case 92:e+=E[a];break;default:if(a<32){e+="\\u00"+x(2,a.toString(16));break}e+=i?o[n]:t.charAt(n)}}return e+'"'},k=function(t,e,n,r,i,o,a){var s,u,c,l,d,p,m,_,b,I,E,A,O,j,C,M;try{s=e[t]}catch(t){}if("object"==typeof s&&s)if("[object Date]"!=(u=g.call(s))||h.call(s,"toJSON"))"function"==typeof s.toJSON&&("[object Number]"!=u&&"[object String]"!=u&&"[object Array]"!=u||h.call(s,"toJSON"))&&(s=s.toJSON(t));else if(s>-1/0&&s<1/0){if(T){for(d=w(s/864e5),c=w(d/365.2425)+1970-1;T(c+1,0)<=d;c++);for(l=w((d-T(c,0))/30.42);T(c,l+1)<=d;l++);d=1+d-T(c,l),p=(s%864e5+864e5)%864e5,m=w(p/36e5)%24,_=w(p/6e4)%60,b=w(p/1e3)%60,I=p%1e3}else c=s.getUTCFullYear(),l=s.getUTCMonth(),d=s.getUTCDate(),m=s.getUTCHours(),_=s.getUTCMinutes(),b=s.getUTCSeconds(),I=s.getUTCMilliseconds();s=(c<=0||c>=1e4?(c<0?"-":"+")+x(6,c<0?-c:c):x(4,c))+"-"+x(2,l+1)+"-"+x(2,d)+"T"+x(2,m)+":"+x(2,_)+":"+x(2,b)+"."+x(3,I)+"Z"}else s=null;if(n&&(s=n.call(e,t,s)),null===s)return"null";if("[object Boolean]"==(u=g.call(s)))return""+s;if("[object Number]"==u)return s>-1/0&&s<1/0?""+s:"null";if("[object String]"==u)return S(""+s);if("object"==typeof s){for(j=a.length;j--;)if(a[j]===s)throw f();if(a.push(s),E=[],C=o,o+=i,"[object Array]"==u){for(O=0,j=s.length;O<j;O++)A=k(O,s,n,r,i,o,a),E.push(A===y?"null":A);M=E.length?i?"[\n"+o+E.join(",\n"+o)+"\n"+C+"]":"["+E.join(",")+"]":"[]"}else v(r||s,function(t){var e=k(t,s,n,r,i,o,a);e!==y&&E.push(S(t)+":"+(i?" ":"")+e)}),M=E.length?i?"{\n"+o+E.join(",\n"+o)+"\n"+C+"}":"{"+E.join(",")+"}":"{}";return a.pop(),M}};e.stringify=function(t,e,n){var r,i,o,a;if(s[typeof e]&&e)if("[object Function]"==(a=g.call(e)))i=e;else if("[object Array]"==a){o={};for(var u,c=0,l=e.length;c<l;u=e[c++],("[object String]"==(a=g.call(u))||"[object Number]"==a)&&(o[u]=1));}if(n)if("[object Number]"==(a=g.call(n))){if((n-=n%1)>0)for(r="",n>10&&(n=10);r.length<n;r+=" ");}else"[object String]"==a&&(r=n.length<=10?n:n.slice(0,10));return k("",(u={},u[""]=t,u),i,o,r,"",[])}}if(!n("json-parse")){var A,O,j=i.fromCharCode,C={92:"\\",34:'"',47:"/",98:"\b",116:"\t",110:"\n",102:"\f",114:"\r"},M=function(){throw A=O=null,l()},P=function(){for(var t,e,n,r,i,o=O,a=o.length;A<a;)switch(i=o.charCodeAt(A)){case 9:case 10:case 13:case 32:A++;break;case 123:case 125:case 91:case 93:case 58:case 44:return t=b?o.charAt(A):o[A],A++,t;case 34:for(t="@",A++;A<a;)if((i=o.charCodeAt(A))<32)M();else if(92==i)switch(i=o.charCodeAt(++A)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:t+=C[i],A++;break;case 117:for(e=++A,n=A+4;A<n;A++)(i=o.charCodeAt(A))>=48&&i<=57||i>=97&&i<=102||i>=65&&i<=70||M();t+=j("0x"+o.slice(e,A));break;default:M()}else{if(34==i)break;for(i=o.charCodeAt(A),e=A;i>=32&&92!=i&&34!=i;)i=o.charCodeAt(++A);t+=o.slice(e,A)}if(34==o.charCodeAt(A))return A++,t;M();default:if(e=A,45==i&&(r=!0,i=o.charCodeAt(++A)),i>=48&&i<=57){for(48==i&&(i=o.charCodeAt(A+1))>=48&&i<=57&&M(),r=!1;A<a&&(i=o.charCodeAt(A))>=48&&i<=57;A++);if(46==o.charCodeAt(A)){for(n=++A;n<a&&(i=o.charCodeAt(n))>=48&&i<=57;n++);n==A&&M(),A=n}if(101==(i=o.charCodeAt(A))||69==i){for(i=o.charCodeAt(++A),43!=i&&45!=i||A++,n=A;n<a&&(i=o.charCodeAt(n))>=48&&i<=57;n++);n==A&&M(),A=n}return+o.slice(e,A)}if(r&&M(),"true"==o.slice(A,A+4))return A+=4,!0;if("false"==o.slice(A,A+5))return A+=5,!1;if("null"==o.slice(A,A+4))return A+=4,null;M()}return"$"},R=function(t){var e,n;if("$"==t&&M(),"string"==typeof t){if("@"==(b?t.charAt(0):t[0]))return t.slice(1);if("["==t){for(e=[];"]"!=(t=P());n||(n=!0))n&&(","==t?"]"==(t=P())&&M():M()),","==t&&M(),e.push(R(t));return e}if("{"==t){for(e={};"}"!=(t=P());n||(n=!0))n&&(","==t?"}"==(t=P())&&M():M()),","!=t&&"string"==typeof t&&"@"==(b?t.charAt(0):t[0])&&":"==P()||M(),e[t.slice(1)]=R(P());return e}M()}return t},N=function(t,e,n){var r=D(t,e,n);r===y?delete t[e]:t[e]=r},D=function(t,e,n){var r,i=t[e];if("object"==typeof i&&i)if("[object Array]"==g.call(i))for(r=i.length;r--;)N(i,r,n);else v(i,function(t){N(i,t,n)});return n.call(t,e,i)};e.parse=function(t,e){var n,r;return A=0,O=""+t,n=R(P()),"$"!=P()&&M(),A=O=null,e&&"[object Function]"==g.call(e)?D((r={},r[""]=n,r),"",e):n}}}return e.runInContext=o,e}var a=n(199),s={function:!0,object:!0},u=s[typeof e]&&e&&!e.nodeType&&e,c=s[typeof window]&&window||this,l=u&&s[typeof t]&&t&&!t.nodeType&&"object"==typeof r&&r;if(!l||l.global!==l&&l.window!==l&&l.self!==l||(c=l),u&&!a)o(c,u);else{var f=c.JSON,d=c.JSON3,p=!1,h=o(c,c.JSON3={noConflict:function(){return p||(p=!0,c.JSON=f,c.JSON3=d,f=d=null),h}});c.JSON={parse:h.parse,stringify:h.stringify}}a&&void 0!==(i=function(){return h}.call(e,n,e,t))&&(t.exports=i)}).call(this)}).call(e,n(198)(t),n(18))},function(t,e,n){"use strict";function r(t,e){function n(){this.constructor=t}I(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function i(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function o(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}function a(t,e){return function(n,r){e(n,r,t)}}function s(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function u(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})}function c(t,e){function n(t){return function(e){return r([t,e])}}function r(n){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,o&&(a=2&n[0]?o.return:n[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,n[1])).done)return a;switch(o=0,a&&(n=[2&n[0],a.value]),n[0]){case 0:case 1:a=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,o=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(a=u.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){u.label=n[1];break}if(6===n[0]&&u.label<a[1]){u.label=a[1],a=n;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(n);break}a[2]&&u.ops.pop(),u.trys.pop();continue}n=e.call(t,u)}catch(t){n=[6,t],o=0}finally{i=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,o,a,s,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s}function l(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}function f(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function d(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function p(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(d(arguments[e]));return t}function h(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function v(t){return this instanceof v?(this.v=t,this):new v(t)}function y(t,e,n){function r(t){l[t]&&(c[t]=function(e){return new Promise(function(n,r){f.push([t,e,n,r])>1||i(t,e)})})}function i(t,e){try{o(l[t](e))}catch(t){u(f[0][3],t)}}function o(t){t.value instanceof v?Promise.resolve(t.value.v).then(a,s):u(f[0][2],t)}function a(t){i("next",t)}function s(t){i("throw",t)}function u(t,e){t(e),f.shift(),f.length&&i(f[0][0],f[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var c,l=n.apply(t,e||[]),f=[];return c={},r("next"),r("throw"),r("return"),c[Symbol.asyncIterator]=function(){return this},c}function m(t){function e(e,i){n[e]=t[e]?function(n){return(r=!r)?{value:v(t[e](n)),done:"return"===e}:i?i(n):n}:i}var n,r;return n={},e("next"),e("throw",function(t){throw t}),e("return"),n[Symbol.iterator]=function(){return this},n}function g(t){function e(e){r[e]=t[e]&&function(r){return new Promise(function(i,o){r=t[e](r),n(i,o,r.done,r.value)})}}function n(t,e,n,r){Promise.resolve(r).then(function(e){t({value:e,done:n})},e)}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=t[Symbol.asyncIterator];return i?i.call(t):(t="function"==typeof f?f(t):t[Symbol.iterator](),r={},e("next"),e("throw"),e("return"),r[Symbol.asyncIterator]=function(){return this},r)}function _(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function b(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function w(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.__extends=r,n.d(e,"__assign",function(){return T}),e.__rest=i,e.__decorate=o,e.__param=a,e.__metadata=s,e.__awaiter=u,e.__generator=c,e.__exportStar=l,e.__values=f,e.__read=d,e.__spread=p,e.__spreadArrays=h,e.__await=v,e.__asyncGenerator=y,e.__asyncDelegator=m,e.__asyncValues=g,e.__makeTemplateObject=_,e.__importStar=b,e.__importDefault=w;/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var I=function(t,e){return(I=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},T=function(){return T=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},T.apply(this,arguments)}},function(t,e,n){"use strict";e.__esModule=!0;var r=n(139),i=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,i.default)(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}()},function(t,e,n){"use strict";var r=n(150)(!0);n(60)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var r=n(8).f,i=n(21),o=n(3)("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},function(t,e,n){var r=n(42);t.exports=function(t){return Object(r(t))}},function(t,e,n){n(155);for(var r=n(4),i=n(16),o=n(26),a=n(3)("toStringTag"),s=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],u=0;u<5;u++){var c=s[u],l=r[c],f=l&&l.prototype;f&&!f[a]&&i(f,a,c),o[c]=o.Array}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty,i=String.prototype.charAt,o=Object.prototype.toString,a=function(t,e){return i.call(t,e)},s=function(t,e){return r.call(t,e)},u=function(t){return"[object String]"===o.call(t)},c=function(t){return null!=t&&"function"!=typeof t&&"number"==typeof t.length},l=function(t,e){e=e||s;for(var n=[],r=0,i=t.length;r<i;r+=1)e(t,r)&&n.push(String(r));return n},f=function(t,e){e=e||s;var n=[];for(var r in t)e(t,r)&&n.push(String(r));return n},d=function(t){return null==t?[]:u(t)?l(t,a):c(t)?l(t,s):f(t)};t.exports=d},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.TEST="test",t.LOCAL="local",t.DEV="dev",t.STAGE="stage",t.PROD="prod"}(e.Environment||(e.Environment={})),function(t){t.XC="xc",t.UID="uid"}(e.XIDItemType||(e.XIDItemType={})),function(t){t.NEW="NEW",t.CHANGED="CHANGED",t.EXISTING="EXISTING",t.TIMEOUT="TIMEOUT",t.ERROR="ERROR",t.UNAVAILABLE="UNAVAILABLE",t.MALFORMED="MALFORMED",t.UNKNOWN="UNKNOWN"}(e.XIDState||(e.XIDState={})),function(t){t.XC_ONLY="XC_ONLY",t.UID_ONLY="UID_ONLY",t.CACHE_ONLY="CACHE_ONLY",t.XC_UID="XC_UID",t.CACHE_XC_UID="CACHE_XC_UID"}(e.XIDGenerateMode||(e.XIDGenerateMode={}))},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(148),o=r(i),a=n(157),s=r(a),u="function"==typeof s.default&&"symbol"==typeof o.default?function(t){return typeof t}:function(t){return t&&"function"==typeof s.default&&t.constructor===s.default&&t!==s.default.prototype?"symbol":typeof t};e.default="function"==typeof s.default&&"symbol"===u(o.default)?function(t){return void 0===t?"undefined":u(t)}:function(t){return t&&"function"==typeof s.default&&t.constructor===s.default&&t!==s.default.prototype?"symbol":void 0===t?"undefined":u(t)}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e){t.exports=!0},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var r=n(11),i=n(152),o=n(68),a=n(66)("IE_PROTO"),s=function(){},u=function(){var t,e=n(62)("iframe"),r=o.length;for(e.style.display="none",n(97).appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),u=t.F;r--;)delete u.prototype[o[r]];return u()};t.exports=Object.create||function(t,e){var n;return null!==t?(s.prototype=r(t),n=new s,s.prototype=null,n[a]=t):n=u(),void 0===e?n:i(n,e)}},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e,n){var r=n(46)("meta"),i=n(12),o=n(21),a=n(8).f,s=0,u=Object.isExtensible||function(){return!0},c=!n(20)(function(){return u(Object.preventExtensions({}))}),l=function(t){a(t,r,{value:{i:"O"+ ++s,w:{}}})},f=function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,r)){if(!u(t))return"F";if(!e)return"E";l(t)}return t[r].i},d=function(t,e){if(!o(t,r)){if(!u(t))return!0;if(!e)return!1;l(t)}return t[r].w},p=function(t){return c&&h.NEED&&u(t)&&!o(t,r)&&l(t),t},h=t.exports={KEY:r,NEED:!1,fastKey:f,getWeak:d,onFreeze:p}},function(t,e,n){var r=n(34),i=n(3)("toStringTag"),o="Arguments"==r(function(){return arguments}()),a=function(t,e){try{return t[e]}catch(t){}};t.exports=function(t){var e,n,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=a(e=Object(t),i))?n:o?r(e):"Object"==(s=r(e))&&"function"==typeof e.callee?"Arguments":s}},function(t,e,n){var r=n(19),i=n(171),o=n(172),a=n(11),s=n(65),u=n(103),c={},l={},e=t.exports=function(t,e,n,f,d){var p,h,v,y,m=d?function(){return t}:u(t),g=r(n,f,e?2:1),_=0;if("function"!=typeof m)throw TypeError(t+" is not iterable!");if(o(m)){for(p=s(t.length);p>_;_++)if((y=e?g(a(h=t[_])[0],h[1]):g(t[_]))===c||y===l)return y}else for(v=m.call(t);!(h=v.next()).done;)if((y=i(v,g,h.value,e))===c||y===l)return y};e.BREAK=c,e.RETURN=l},function(t,e,n){t.exports={default:n(177),__esModule:!0}},function(t,e){function n(t){return function(e,n,r,i){normalize=i&&s(i.normalizer)?i.normalizer:a,n=normalize(n);for(var o,u=!1;!u;)!function(){for(o in e){var t=normalize(o);if(0===n.indexOf(t)){var r=n.substr(t.length);if("."===r.charAt(0)||0===r.length){n=r.substr(1);var i=e[o];return null==i?void(u=!0):n.length?void(e=i):void(u=!0)}}}o=void 0,u=!0}();if(o)return null==e?e:t(e,o,r)}}function r(t,e){if(t.hasOwnProperty(e))return t[e]}function i(t,e){return t.hasOwnProperty(e)&&delete t[e],t}function o(t,e,n){return t.hasOwnProperty(e)&&(t[e]=n),t}function a(t){return t.replace(/[^a-zA-Z0-9\.]+/g,"").toLowerCase()}function s(t){return"function"==typeof t}t.exports=n(r),t.exports.find=t.exports,t.exports.replace=function(t,e,r,i){return n(o).call(this,t,e,r,i),t},t.exports.del=function(t,e,r){return n(i).call(this,t,e,null,r),t}},function(t,e,n){"use strict";/**!
 * is
 * the definitive JavaScript type testing library
 *
 * @copyright 2013-2014 Enrico Marino / Jordan Harband
 * @license MIT
 */
var r,i=Object.prototype,o=i.hasOwnProperty,a=i.toString;"function"==typeof Symbol&&(r=Symbol.prototype.valueOf);var s=function(t){return t!==t},u={boolean:1,number:1,string:1,undefined:1},c=/^([A-Za-z0-9+\/]{4})*([A-Za-z0-9+\/]{4}|[A-Za-z0-9+\/]{3}=|[A-Za-z0-9+\/]{2}==)$/,l=/^[A-Fa-f0-9]+$/,f={};f.a=f.type=function(t,e){return typeof t===e},f.defined=function(t){return void 0!==t},f.empty=function(t){var e,n=a.call(t);if("[object Array]"===n||"[object Arguments]"===n||"[object String]"===n)return 0===t.length;if("[object Object]"===n){for(e in t)if(o.call(t,e))return!1;return!0}return!t},f.equal=function(t,e){if(t===e)return!0;var n,r=a.call(t);if(r!==a.call(e))return!1;if("[object Object]"===r){for(n in t)if(!(f.equal(t[n],e[n])&&n in e))return!1;for(n in e)if(!(f.equal(t[n],e[n])&&n in t))return!1;return!0}if("[object Array]"===r){if((n=t.length)!==e.length)return!1;for(;n--;)if(!f.equal(t[n],e[n]))return!1;return!0}return"[object Function]"===r?t.prototype===e.prototype:"[object Date]"===r&&t.getTime()===e.getTime()},f.hosted=function(t,e){var n=typeof e[t];return"object"===n?!!e[t]:!u[n]},f.instance=f.instanceof=function(t,e){return t instanceof e},f.nil=f.null=function(t){return null===t},f.undef=f.undefined=function(t){return void 0===t},f.args=f.arguments=function(t){var e="[object Arguments]"===a.call(t),n=!f.array(t)&&f.arraylike(t)&&f.object(t)&&f.fn(t.callee);return e||n},f.array=Array.isArray||function(t){return"[object Array]"===a.call(t)},f.args.empty=function(t){return f.args(t)&&0===t.length},f.array.empty=function(t){return f.array(t)&&0===t.length},f.arraylike=function(t){return!!t&&!f.bool(t)&&o.call(t,"length")&&isFinite(t.length)&&f.number(t.length)&&t.length>=0},f.bool=f.boolean=function(t){return"[object Boolean]"===a.call(t)},f.false=function(t){return f.bool(t)&&!1===Boolean(Number(t))},f.true=function(t){return f.bool(t)&&!0===Boolean(Number(t))},f.date=function(t){return"[object Date]"===a.call(t)},f.date.valid=function(t){return f.date(t)&&!isNaN(Number(t))},f.element=function(t){return void 0!==t&&"undefined"!=typeof HTMLElement&&t instanceof HTMLElement&&1===t.nodeType},f.error=function(t){return"[object Error]"===a.call(t)},f.fn=f.function=function(t){if("undefined"!=typeof window&&t===window.alert)return!0;var e=a.call(t);return"[object Function]"===e||"[object GeneratorFunction]"===e||"[object AsyncFunction]"===e},f.number=function(t){return"[object Number]"===a.call(t)},f.infinite=function(t){return t===1/0||t===-1/0},f.decimal=function(t){return f.number(t)&&!s(t)&&!f.infinite(t)&&t%1!=0},f.divisibleBy=function(t,e){var n=f.infinite(t),r=f.infinite(e),i=f.number(t)&&!s(t)&&f.number(e)&&!s(e)&&0!==e;return n||r||i&&t%e==0},f.integer=f.int=function(t){return f.number(t)&&!s(t)&&t%1==0},f.maximum=function(t,e){if(s(t))throw new TypeError("NaN is not a valid value");if(!f.arraylike(e))throw new TypeError("second argument must be array-like");for(var n=e.length;--n>=0;)if(t<e[n])return!1;return!0},f.minimum=function(t,e){if(s(t))throw new TypeError("NaN is not a valid value");if(!f.arraylike(e))throw new TypeError("second argument must be array-like");for(var n=e.length;--n>=0;)if(t>e[n])return!1;return!0},f.nan=function(t){return!f.number(t)||t!==t},f.even=function(t){return f.infinite(t)||f.number(t)&&t===t&&t%2==0},f.odd=function(t){return f.infinite(t)||f.number(t)&&t===t&&t%2!=0},f.ge=function(t,e){if(s(t)||s(e))throw new TypeError("NaN is not a valid value");return!f.infinite(t)&&!f.infinite(e)&&t>=e},f.gt=function(t,e){if(s(t)||s(e))throw new TypeError("NaN is not a valid value");return!f.infinite(t)&&!f.infinite(e)&&t>e},f.le=function(t,e){if(s(t)||s(e))throw new TypeError("NaN is not a valid value");return!f.infinite(t)&&!f.infinite(e)&&t<=e},f.lt=function(t,e){if(s(t)||s(e))throw new TypeError("NaN is not a valid value");return!f.infinite(t)&&!f.infinite(e)&&t<e},f.within=function(t,e,n){if(s(t)||s(e)||s(n))throw new TypeError("NaN is not a valid value");if(!f.number(t)||!f.number(e)||!f.number(n))throw new TypeError("all arguments must be numbers");return f.infinite(t)||f.infinite(e)||f.infinite(n)||t>=e&&t<=n},f.object=function(t){return"[object Object]"===a.call(t)},f.primitive=function(t){return!t||!("object"==typeof t||f.object(t)||f.fn(t)||f.array(t))},f.hash=function(t){return f.object(t)&&t.constructor===Object&&!t.nodeType&&!t.setInterval},f.regexp=function(t){return"[object RegExp]"===a.call(t)},f.string=function(t){return"[object String]"===a.call(t)},f.base64=function(t){return f.string(t)&&(!t.length||c.test(t))},f.hex=function(t){return f.string(t)&&(!t.length||l.test(t))},f.symbol=function(t){return"function"==typeof Symbol&&"[object Symbol]"===a.call(t)&&"symbol"==typeof r.call(t)},t.exports=f},function(t,e){t.exports=function(t){return/.+\@.+\..+/.test(t)}},function(t,e,n){function r(t){if(t)return i(t)}function i(t){for(var e in r.prototype)t[e]=r.prototype[e];return t}t.exports=r,r.prototype.on=r.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},r.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var r,i=0;i<n.length;i++)if((r=n[i])===e||r.fn===e){n.splice(i,1);break}return this},r.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),n=this._callbacks["$"+t];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,e)}return this},r.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},r.prototype.hasListeners=function(t){return!!this.listeners(t).length}},function(t,e,n){"use strict";function r(t){this.options(t)}var i=n(25),o=n(28),a=n(56),s=n(6)("analytics.js:cookie"),u=n(29),c=n(30),l=n(117);r.prototype.options=function(t){if(0===arguments.length)return this._options;t=t||{};var e="."+l(window.location.href);"."===e&&(e=null),this._options=u(t,{maxage:31536e6,path:"/",domain:e}),this.set("ajs:test",!0),this.get("ajs:test")||(s("fallback to domain=null"),this._options.domain=null),this.remove("ajs:test")},r.prototype.set=function(t,e){try{return e=c.stringify(e),a(t,e,o(this._options)),!0}catch(t){return!1}},r.prototype.get=function(t){try{var e=a(t);return e=e?c.parse(e):null}catch(t){return null}},r.prototype.remove=function(t){try{return a(t,null,o(this._options)),!0}catch(t){return!1}},t.exports=i(new r),t.exports.Cookie=r},function(t,e,n){function r(t,e,n){n=n||{};var r=s(t)+"="+s(e);null==e&&(n.maxage=-1),n.maxage&&(n.expires=new Date(+new Date+n.maxage)),n.path&&(r+="; path="+n.path),n.domain&&(r+="; domain="+n.domain),n.expires&&(r+="; expires="+n.expires.toUTCString()),n.secure&&(r+="; secure"),document.cookie=r}function i(){var t;try{t=document.cookie}catch(t){return"undefined"!=typeof console&&"function"==typeof console.error&&console.error(t.stack||t),{}}return a(t)}function o(t){return i()[t]}function a(t){var e,n={},r=t.split(/ *; */);if(""==r[0])return n;for(var i=0;i<r.length;++i)e=r[i].split("="),n[u(e[0])]=u(e[1]);return n}function s(t){try{return encodeURIComponent(t)}catch(e){c("error `encode(%o)` - %o",t,e)}}function u(t){try{return decodeURIComponent(t)}catch(e){c("error `decode(%o)` - %o",t,e)}}var c=n(6)("cookie");t.exports=function(t,e,n){switch(arguments.length){case 3:case 2:return r(t,e,n);case 1:return o(t);default:return i()}}},function(t,e,n){"use strict";(function(e,n){var r,i;r=function(t){if("function"!=typeof t)throw new TypeError(t+" is not a function");return t},i=function(t){var e,n=document.createTextNode(""),i=0;return new t(function(){var t;if(e){if(t=e,e=null,"function"==typeof t)return void t();t.forEach(function(t){t()})}}).observe(n,{characterData:!0}),function(t){if(r(t),e)return void("function"==typeof e?e=[e,t]:e.push(t));e=t,n.data=i=++i%2}},t.exports=function(){if(void 0!==e&&e&&"function"==typeof e.nextTick)return e.nextTick;if("object"==typeof document&&document){if("function"==typeof MutationObserver)return i(MutationObserver);if("function"==typeof WebKitMutationObserver)return i(WebKitMutationObserver)}return"function"==typeof n?function(t){n(r(t))}:"function"==typeof setTimeout?function(t){setTimeout(r(t),0)}:null}()}).call(e,n(78),n(106).setImmediate)},function(t,e,n){t.exports={default:n(288),__esModule:!0}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e,n){"use strict";var r=n(43),i=n(5),o=n(95),a=n(16),s=n(21),u=n(26),c=n(151),l=n(35),f=n(98),d=n(3)("iterator"),p=!([].keys&&"next"in[].keys()),h=function(){return this};t.exports=function(t,e,n,v,y,m,g){c(n,e,v);var _,b,w,I=function(t){if(!p&&t in S)return S[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},T=e+" Iterator",E="values"==y,x=!1,S=t.prototype,k=S[d]||S["@@iterator"]||y&&S[y],A=k||I(y),O=y?E?I("entries"):A:void 0,j="Array"==e?S.entries||k:k;if(j&&(w=f(j.call(new t)))!==Object.prototype&&(l(w,T,!0),r||s(w,d)||a(w,d,h)),E&&k&&"values"!==k.name&&(x=!0,A=function(){return k.call(this)}),r&&!g||!p&&!x&&S[d]||a(S,d,A),u[e]=A,u[T]=h,y)if(_={values:E?A:I("values"),keys:m?A:I("keys"),entries:O},g)for(b in _)b in S||o(S,b,_[b]);else i(i.P+i.F*(p||x),e,_);return _}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var r=n(12),i=n(4).document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,e,n){var r=n(12);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){var r=n(34);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e,n){var r=n(59),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},function(t,e,n){var r=n(67)("keys"),i=n(46);t.exports=function(t){return r[t]||(r[t]=i(t))}},function(t,e,n){var r=n(4),i=r["__core-js_shared__"]||(r["__core-js_shared__"]={});t.exports=function(t){return i[t]||(i[t]={})}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){e.f=n(3)},function(t,e,n){var r=n(4),i=n(0),o=n(43),a=n(69),s=n(8).f;t.exports=function(t){var e=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:a.f(t)})}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e){},function(t,e,n){var r=n(5),i=n(0),o=n(20);t.exports=function(t,e){var n=(i.Object||{})[t]||Object[t],a={};a[t]=e(n),r(r.S+r.F*o(function(){n(1)}),"Object",a)}},function(t,e,n){t.exports={default:n(167),__esModule:!0}},function(t,e){t.exports=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){var r=n(16);t.exports=function(t,e,n){for(var i in e)n&&t[i]?t[i]=e[i]:r(t,i,e[i]);return t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){function r(t){return Boolean(t&&void 0!==t.length)}function i(){}function o(t,e){return function(){t.apply(e,arguments)}}function a(t){if(!(this instanceof a))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],d(t,this)}function s(t,e){for(;3===t._state;)t=t._value;if(0===t._state)return void t._deferreds.push(e);t._handled=!0,a._immediateFn(function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null===n)return void(1===t._state?u:c)(e.promise,t._value);var r;try{r=n(t._value)}catch(t){return void c(e.promise,t)}u(e.promise,r)})}function u(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof a)return t._state=3,t._value=e,void l(t);if("function"==typeof n)return void d(o(n,e),t)}t._state=1,t._value=e,l(t)}catch(e){c(t,e)}}function c(t,e){t._state=2,t._value=e,l(t)}function l(t){2===t._state&&0===t._deferreds.length&&a._immediateFn(function(){t._handled||a._unhandledRejectionFn(t._value)});for(var e=0,n=t._deferreds.length;e<n;e++)s(t,t._deferreds[e]);t._deferreds=null}function f(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function d(t,e){var n=!1;try{t(function(t){n||(n=!0,u(e,t))},function(t){n||(n=!0,c(e,t))})}catch(t){if(n)return;n=!0,c(e,t)}}var p=n(182),h=setTimeout;a.prototype.catch=function(t){return this.then(null,t)},a.prototype.then=function(t,e){var n=new this.constructor(i);return s(this,new f(t,e,n)),n},a.prototype.finally=p.a,a.all=function(t){return new a(function(e,n){function i(t,r){try{if(r&&("object"==typeof r||"function"==typeof r)){var s=r.then;if("function"==typeof s)return void s.call(r,function(e){i(t,e)},n)}o[t]=r,0==--a&&e(o)}catch(t){n(t)}}if(!r(t))return n(new TypeError("Promise.all accepts an array"));var o=Array.prototype.slice.call(t);if(0===o.length)return e([]);for(var a=o.length,s=0;s<o.length;s++)i(s,o[s])})},a.resolve=function(t){return t&&"object"==typeof t&&t.constructor===a?t:new a(function(e){e(t)})},a.reject=function(t){return new a(function(e,n){n(t)})},a.race=function(t){return new a(function(e,n){if(!r(t))return n(new TypeError("Promise.race accepts an array"));for(var i=0,o=t.length;i<o;i++)a.resolve(t[i]).then(e,n)})},a._immediateFn="function"==typeof t&&function(e){t(e)}||function(t){h(t,0)},a._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},e.default=a}.call(e,n(106).setImmediate)},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(t){if(l===setTimeout)return setTimeout(t,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(t,0);try{return l(t,0)}catch(e){try{return l.call(null,t,0)}catch(e){return l.call(this,t,0)}}}function o(t){if(f===clearTimeout)return clearTimeout(t);if((f===r||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(t);try{return f(t)}catch(e){try{return f.call(null,t)}catch(e){return f.call(this,t)}}}function a(){v&&p&&(v=!1,p.length?h=p.concat(h):y=-1,h.length&&s())}function s(){if(!v){var t=i(a);v=!0;for(var e=h.length;e;){for(p=h,h=[];++y<e;)p&&p[y].run();y=-1,e=h.length}p=null,v=!1,o(t)}}function u(t,e){this.fun=t,this.array=e}function c(){}var l,f,d=t.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(t){l=n}try{f="function"==typeof clearTimeout?clearTimeout:r}catch(t){f=r}}();var p,h=[],v=!1,y=-1;d.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];h.push(new u(t,e)),1!==h.length||v||i(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=c,d.addListener=c,d.once=c,d.off=c,d.removeListener=c,d.removeAllListeners=c,d.emit=c,d.prependListener=c,d.prependOnceListener=c,d.listeners=function(t){return[]},d.binding=function(t){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(t){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){"use strict";function r(t){return t<315576e5?1e3*t:t}var i=n(52),o=n(107),a=n(187),s=n(188);t.exports=function(t){return i.date(t)?t:i.number(t)?new Date(r(t)):o.is(t)?o.parse(t):a.is(t)?a.parse(t):s.is(t)?s.parse(t):new Date(t)}},function(t,e,n){"use strict";function r(t,e){s.call(this,t,e)}function i(t){if(t){if("number"==typeof t)return t;if("string"==typeof t)return t=t.replace(/\$/g,""),t=parseFloat(t),isNaN(t)?void 0:t}}var o=n(10).inherit,a=n(10).type,s=n(27),u=n(112),c=n(53),l=n(51);o(r,s),r.prototype.action=function(){return"track"},r.prototype.type=r.prototype.action,r.prototype.event=s.field("event"),r.prototype.value=s.proxy("properties.value"),r.prototype.category=s.proxy("properties.category"),r.prototype.id=s.proxy("properties.id"),r.prototype.productId=function(){return this.proxy("properties.product_id")||this.proxy("properties.productId")},r.prototype.promotionId=function(){return this.proxy("properties.promotion_id")||this.proxy("properties.promotionId")},r.prototype.cartId=function(){return this.proxy("properties.cart_id")||this.proxy("properties.cartId")},r.prototype.checkoutId=function(){return this.proxy("properties.checkout_id")||this.proxy("properties.checkoutId")},r.prototype.paymentId=function(){return this.proxy("properties.payment_id")||this.proxy("properties.paymentId")},r.prototype.couponId=function(){return this.proxy("properties.coupon_id")||this.proxy("properties.couponId")},r.prototype.wishlistId=function(){return this.proxy("properties.wishlist_id")||this.proxy("properties.wishlistId")},r.prototype.reviewId=function(){return this.proxy("properties.review_id")||this.proxy("properties.reviewId")},r.prototype.orderId=function(){return this.proxy("properties.id")||this.proxy("properties.order_id")||this.proxy("properties.orderId")},r.prototype.sku=s.proxy("properties.sku"),r.prototype.tax=s.proxy("properties.tax"),r.prototype.name=s.proxy("properties.name"),r.prototype.price=s.proxy("properties.price"),r.prototype.total=s.proxy("properties.total"),r.prototype.repeat=s.proxy("properties.repeat"),r.prototype.coupon=s.proxy("properties.coupon"),r.prototype.shipping=s.proxy("properties.shipping"),r.prototype.discount=s.proxy("properties.discount"),r.prototype.shippingMethod=function(){return this.proxy("properties.shipping_method")||this.proxy("properties.shippingMethod")},r.prototype.paymentMethod=function(){return this.proxy("properties.payment_method")||this.proxy("properties.paymentMethod")},r.prototype.description=s.proxy("properties.description"),r.prototype.plan=s.proxy("properties.plan"),r.prototype.subtotal=function(){var t=l(this.properties(),"subtotal"),e=this.total()||this.revenue();if(t)return t;if(!e)return 0;if(this.total()){var n=this.tax();n&&(e-=n),n=this.shipping(),n&&(e-=n),(n=this.discount())&&(e+=n)}return e},r.prototype.products=function(){var t=this.properties(),e=l(t,"products");return"array"===a(e)?e:[]},r.prototype.quantity=function(){return(this.obj.properties||{}).quantity||1},r.prototype.currency=function(){return(this.obj.properties||{}).currency||"USD"},r.prototype.referrer=function(){return this.proxy("context.referrer.url")||this.proxy("context.page.referrer")||this.proxy("properties.referrer")},r.prototype.query=s.proxy("options.query"),r.prototype.properties=function(t){var e=this.field("properties")||{};t=t||{};for(var n in t){var r=null==this[n]?this.proxy("properties."+n):this[n]();null!=r&&(e[t[n]]=r,delete e[n])}return e},r.prototype.username=function(){return this.proxy("traits.username")||this.proxy("properties.username")||this.userId()||this.sessionId()},r.prototype.email=function(){var t=this.proxy("traits.email")||this.proxy("properties.email")||this.proxy("options.traits.email");if(t)return t;var e=this.userId();return c(e)?e:void 0},r.prototype.revenue=function(){var t=this.proxy("properties.revenue"),e=this.event(),n=/^[ _]?completed[ _]?order[ _]?|^[ _]?order[ _]?completed[ _]?$/i;return!t&&e&&e.match(n)&&(t=this.proxy("properties.total")),i(t)},r.prototype.cents=function(){var t=this.revenue();return"number"!=typeof t?this.value()||0:100*t},r.prototype.identify=function(){var t=this.json();return t.traits=this.traits(),new u(t,this.opts)},t.exports=r},function(t,e,n){"use strict";var r=n(7),i=function(t,e,n){if("function"!=typeof t)throw new TypeError("Expected a function but received a "+typeof t);return r(function(n,r,i){e=t(e,n,r,i)},n),e};t.exports=i},function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty,i=function(t){for(var e=Array.prototype.slice.call(arguments,1),n=0;n<e.length;n+=1)for(var i in e[n])r.call(e[n],i)&&(t[i]=e[n][i]);return t};t.exports=i},function(t,e,n){"use strict";function r(t){this.options(t)}var i=n(25),o=n(29),a=n(206);r.prototype.options=function(t){if(0===arguments.length)return this._options;t=t||{},o(t,{enabled:!0}),this.enabled=t.enabled&&a.enabled,this._options=t},r.prototype.set=function(t,e){return!!this.enabled&&a.set(t,e)},r.prototype.get=function(t){return this.enabled?a.get(t):null},r.prototype.remove=function(t){return!!this.enabled&&a.remove(t)},t.exports=i(new r),t.exports.Store=r},function(t,e,n){"use strict";var r=n(7),i=String.prototype.indexOf,o=function(t,e){return t===e?0!==t||1/t==1/e:t!==t&&e!==e},a=function(t,e){var n=!1;return"string"==typeof e?-1!==i.call(e,t):(r(function(e){if(o(e,t))return n=!0,!1},e),n)};t.exports=a},function(t,e,n){function r(t,e,n){var r=e&&n||0,i=0;for(e=e||[],t.toLowerCase().replace(/[0-9a-f]{2}/g,function(t){i<16&&(e[r+i++]=c[t])});i<16;)e[r+i++]=0;return e}function i(t,e){var n=e||0,r=u;return r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]}function o(t,e,n){var r=e&&n||0,o=e||[];t=t||{};var a=void 0!==t.clockseq?t.clockseq:p,s=void 0!==t.msecs?t.msecs:(new Date).getTime(),u=void 0!==t.nsecs?t.nsecs:v+1,c=s-h+(u-v)/1e4;if(c<0&&void 0===t.clockseq&&(a=a+1&16383),(c<0||s>h)&&void 0===t.nsecs&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");h=s,v=u,p=a,s+=122192928e5;var l=(1e4*(268435455&s)+u)%4294967296;o[r++]=l>>>24&255,o[r++]=l>>>16&255,o[r++]=l>>>8&255,o[r++]=255&l;var f=s/4294967296*1e4&268435455;o[r++]=f>>>8&255,o[r++]=255&f,o[r++]=f>>>24&15|16,o[r++]=f>>>16&255,o[r++]=a>>>8|128,o[r++]=255&a;for(var y=t.node||d,m=0;m<6;m++)o[r+m]=y[m];return e||i(o)}function a(t,e,n){var r=e&&n||0;"string"==typeof t&&(e="binary"==t?new Array(16):null,t=null),t=t||{};var o=t.random||(t.rng||s)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e)for(var a=0;a<16;a++)e[r+a]=o[a];return e||i(o)}for(var s=n(210),u=[],c={},l=0;l<256;l++)u[l]=(l+256).toString(16).substr(1),c[u[l]]=l;var f=s(),d=[1|f[0],f[1],f[2],f[3],f[4],f[5]],p=16383&(f[6]<<8|f[7]),h=0,v=0,y=a;y.v1=o,y.v4=a,y.parse=r,y.unparse=i,t.exports=y},function(t,e,n){var r=n(113),i=n(216),o=/(\w+)\[(\d+)\]/,a=function(t){try{return encodeURIComponent(t)}catch(e){return t}},s=function(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(e){return t}};e.parse=function(t){if("string"!=typeof t)return{};if(""==(t=r(t)))return{};"?"==t.charAt(0)&&(t=t.slice(1));for(var e={},n=t.split("&"),i=0;i<n.length;i++){var a,u=n[i].split("="),c=s(u[0]);(a=o.exec(c))?(e[a[1]]=e[a[1]]||[],e[a[1]][a[2]]=s(u[1])):e[u[0]]=null==u[1]?"":s(u[1])}return e},e.stringify=function(t){if(!t)return"";var e=[];for(var n in t){var r=t[n];if("array"!=i(r))e.push(a(n)+"="+a(t[n]));else for(var o=0;o<r.length;++o)e.push(a(n+"["+o+"]")+"="+a(r[o]))}return e.join("&")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n(31).__exportStar(n(40),e);var r=n(218);e.XID=r.XID},function(t,e,n){"use strict";function r(t){return p()[t]}function i(t){var e={},n=t.split(/ *; */);return""===n[0]?e:(n.forEach(function(t){var n=t.split("="),r=a(n[0]),i=a(n[1]);r&&i&&(e[r]=i)}),e)}function o(t){try{return encodeURIComponent(t)}catch(e){return console.log("error `encode(%o)` - %o",t,e),""}}function a(t){try{return decodeURIComponent(t)}catch(e){return console.log("error `decode(%o)` - %o",t,e),""}}function s(t){return r(t)}function u(){return p()}function c(t,e,n){var r=f.__assign({maxage:31536e6,secure:!1,path:"/",expires:null,domain:null,sameSite:"lax"},n);return d(t,e,r)}function l(){return{sameSite:"None",domain:window.location.hostname.split(".").slice(-2).join("."),secure:!0}}Object.defineProperty(e,"__esModule",{value:!0});var f=n(31),d=function(t,e,n){var r=o(t)+"="+o((e||"").toString());null==e&&(n.maxage=-1);var i;return n.maxage&&(i=new Date(+new Date+n.maxage)),n.path&&(r+="; path="+n.path),n.domain&&(r+="; domain="+n.domain),i&&(r+="; expires="+i.toUTCString()),n.secure&&(r+="; secure"),n.sameSite&&(r+="; samesite="+n.sameSite),document.cookie=r,r},p=function(){try{return i(document.cookie)}catch(t){return"undefined"!=typeof console&&"function"==typeof console.error&&console.error(t.stack||t),{}}};e.getCookie=s,e.getAllCookies=u,e.setCookie=c,e.getCrossDomainCookieOption=l},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.InMemoryStore=void 0;var i=n(13),o=r(i),a=n(2),s=r(a),u=e.InMemoryStore=function t(){var e=this;(0,s.default)(this,t),this._data={},this.length=0,this.setItem=function(t,n){return e._data[t]=n,e.length=(0,o.default)(e._data).length,n},this.getItem=function(t){return t in e._data?e._data[t]:null},this.removeItem=function(t){return t in e._data&&delete e._data[t],e.length=(0,o.default)(e._data).length,null},this.clear=function(){e._data={},e.length=0},this.key=function(t){return(0,o.default)(e._data)[t]}};e.default=new u},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(134),o=r(i),a=n(2),s=r(a),u=n(135),c=r(u),l=n(136),f=r(l),d=n(90),p=r(d),h=n(137),v=r(h),y=function(t){function e(t){(0,s.default)(this,e);var n=void 0;try{n=window.sessionStorage||p.default}catch(t){n=p.default}return(0,c.default)(this,(e.__proto__||(0,o.default)(e)).call(this,n,t))}return(0,f.default)(e,t),e}(v.default);e.default=y},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.defaultHistoryReplaceFn=void 0;var r=n(13),i=function(t){return t&&t.__esModule?t:{default:t}}(r),o=n(142),a=n(143),s=e.defaultHistoryReplaceFn=function(t){return window.history.replaceState({},"",t)},u=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s,n=window.location.href,r=window.location.hash,u=""!==r?n.replace(r,""):n,c=(0,o.parseUrl)(u),l=c.url,f=c.query,d=(0,a.pickBy)(f,t);if((0,i.default)(d).length>0){var p=(0,a.omitBy)(f,t);e((0,i.default)(p).length>0?l+"?"+(0,o.stringify)(p)+r:""+l+r)}return d};e.default=u},function(t,e,n){"use strict";function r(t){if(!(0,y.isPlainObject)(t))throw new Error("properties.containers must be an Object");if(!("id"in t))throw new Error("properties.containers is missing field 'id'");if("string"!=typeof t.id)throw new Error("properties.containers.id must be of type String");if("type"in t&&"string"!=typeof t.type)throw new Error("properties.containers.type must be of type String")}function i(t){if(t){if(t&&t.constructor!==Object)throw new Error("properties.containers must be an Object");(0,h.default)(t).forEach(function(t){return r(t)})}}function o(t){if(!t)throw new Error("Missing event");if(!t.source)throw new Error("Missing event.source");if(!t.actionSubject)throw new Error("Missing event.actionSubject");if(!t.action)throw new Error("Missing event.action");i(t.containers)}function a(t){if(!t)throw new Error("Missing name")}function s(t){o(t)}function u(t){if(!t)throw new Error("Missing event");if(!t.source)throw new Error("Missing event.source");if(!t.actionSubject)throw new Error("Missing event.actionSubject")}function c(t){o(t)}function l(t){o(t)}function f(t,e){if(!t)throw new Error("Missing userIdType");if(!e)throw new Error("Missing userId");if(!(0,v.isType)(v.userType,t))throw new Error("Invalid userIdType '"+t+"', must be an userType: ["+(0,v.objectValues)(v.userType)+"]")}function d(t){if(!(0,v.isType)(v.platformType,t.platform))throw new Error("Invalid productInfo.platform '"+t.platform+"', must be a platformType: ["+(0,v.objectValues)(v.platformType)+"]");if(t.origin===v.originType.DESKTOP&&!(0,v.isType)(v.desktopPlatforms,t.platform))throw new Error("Invalid productInfo.platform '"+t.platform+"', must be one of [mac, linux, windows]");if(t.origin===v.originType.WEB&&!(0,v.isType)(v.webPlatforms,t.platform))throw new Error("Invalid productInfo.platform '"+t.platform+"', must be one of [web, mobileWeb]")}Object.defineProperty(e,"__esModule",{value:!0});var p=n(58),h=function(t){return t&&t.__esModule?t:{default:t}}(p);e.validateContainersObject=r,e.validateContainers=i,e.validateScreenEvent=a,e.validateTrackEvent=s,e.validateDwellBaseEvent=u,e.validateUIEvent=c,e.validateOperationalEvent=l,e.validateIdentifyEvent=f,e.validatePlatform=d;var v=n(15),y=n(145)},function(t,e,n){t.exports=!n(9)&&!n(20)(function(){return 7!=Object.defineProperty(n(62)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){t.exports=n(16)},function(t,e,n){var r=n(21),i=n(17),o=n(153)(!1),a=n(66)("IE_PROTO");t.exports=function(t,e){var n,s=i(t),u=0,c=[];for(n in s)n!=a&&r(s,n)&&c.push(n);for(;e.length>u;)r(s,n=e[u++])&&(~o(c,n)||c.push(n));return c}},function(t,e,n){t.exports=n(4).document&&document.documentElement},function(t,e,n){var r=n(21),i=n(36),o=n(66)("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),r(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){var r=n(34);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){var r=n(96),i=n(68).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},function(t,e,n){var r=n(38),i=n(44),o=n(17),a=n(63),s=n(21),u=n(94),c=Object.getOwnPropertyDescriptor;e.f=n(9)?c:function(t,e){if(t=o(t),e=a(e,!0),u)try{return c(t,e)}catch(t){}if(s(t,e))return i(!r.f.call(t,e),t[e])}},function(t,e,n){var r=n(48),i=n(3)("iterator"),o=n(26);t.exports=n(0).getIteratorMethod=function(t){if(void 0!=t)return t[i]||t["@@iterator"]||o[r(t)]}},function(t,e,n){var r,i,o,a=n(19),s=n(174),u=n(97),c=n(62),l=n(4),f=l.process,d=l.setImmediate,p=l.clearImmediate,h=l.MessageChannel,v=0,y={},m=function(){var t=+this;if(y.hasOwnProperty(t)){var e=y[t];delete y[t],e()}},g=function(t){m.call(t.data)};d&&p||(d=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return y[++v]=function(){s("function"==typeof t?t:Function(t),e)},r(v),v},p=function(t){delete y[t]},"process"==n(34)(f)?r=function(t){f.nextTick(a(m,t,1))}:h?(i=new h,o=i.port2,i.port1.onmessage=g,r=a(o.postMessage,o,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(r=function(t){l.postMessage(t+"","*")},l.addEventListener("message",g,!1)):r="onreadystatechange"in c("script")?function(t){u.appendChild(c("script")).onreadystatechange=function(){u.removeChild(this),m.call(t)}}:function(t){setTimeout(a(m,t,1),0)}),t.exports={set:d,clear:p}},function(t,e,n){"use strict";var r=n(4),i=n(0),o=n(8),a=n(9),s=n(3)("species");t.exports=function(t){var e="function"==typeof i[t]?i[t]:r[t];a&&e&&!e[s]&&o.f(e,s,{configurable:!0,get:function(){return this}})}},function(t,e,n){function r(t,e){this._id=t,this._clearFn=e}var i=Function.prototype.apply;e.setTimeout=function(){return new r(i.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new r(i.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n(180);var o=n(181);e.setImmediate=o.setImmediate,e.clearImmediate=o.clearImmediate},function(t,e,n){"use strict";var r=/^(\d{4})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:([ T])(\d{2}):?(\d{2})(?::?(\d{2})(?:[,\.](\d{1,}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?)?)?$/;e.parse=function(t){var e=[1,5,6,7,11,12],n=r.exec(t),i=0;if(!n)return new Date(t);for(var o,a=0;o=e[a];a++)n[o]=parseInt(n[o],10)||0;n[2]=parseInt(n[2],10)||1,n[3]=parseInt(n[3],10)||1,n[2]--,n[8]=n[8]?(n[8]+"00").substring(0,3):0," "===n[4]?i=(new Date).getTimezoneOffset():"Z"!==n[9]&&n[10]&&(i=60*n[11]+n[12],"+"===n[10]&&(i=0-i));var s=Date.UTC(n[1],n[2],n[3],n[5],n[6]+i,n[7],n[8]);return new Date(s)},e.is=function(t,e){return(!e||!1!==/^\d{4}-\d{2}-\d{2}/.test(t))&&r.test(t)}},function(t,e,n){"use strict";function r(t,e){return void 0===e&&(e=!0),"object"===a(t)?i(t,e):"array"===a(t)?o(t,e):t}function i(t,e){return s(t,function(n,i){u.is(i,e)?t[n]=u.parse(i):"object"!==a(i)&&"array"!==a(i)||r(i,e)}),t}function o(t,e){return s(t,function(n,i){"object"===a(n)?r(n,e):u.is(n,e)&&(t[i]=u.parse(n))}),t}var a=n(24),s=n(109),u=n(107);t.exports=r},function(t,e,n){function r(t,e,n){for(var r=0;r<t.length;++r)e.call(n,t.charAt(r),r)}function i(t,e,n){for(var r in t)u.call(t,r)&&e.call(n,r,t[r])}function o(t,e,n){for(var r=0;r<t.length;++r)e.call(n,t[r],r)}try{var a=n(110)}catch(t){var a=n(110)}var s=n(189),u=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){switch(e=s(e),n=n||this,a(t)){case"array":return o(t,e,n);case"object":return"number"==typeof t.length?o(t,e,n):i(t,e,n);case"string":return r(t,e,n)}}},function(t,e){var n=Object.prototype.toString;t.exports=function(t){switch(n.call(t)){case"[object Function]":return"function";case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object String]":return"string"}return null===t?"null":void 0===t?"undefined":t&&1===t.nodeType?"element":t===Object(t)?"object":typeof t}},function(t,e){function n(t){return t.replace(/\.\w+|\w+ *\(|"[^"]*"|'[^']*'|\/([^\/]+)\//g,"").replace(a,"").match(/[a-zA-Z_]\w*/g)||[]}function r(t,e,n){var r=/\.\w+|\w+ *\(|"[^"]*"|'[^']*'|\/([^\/]+)\/|[a-zA-Z_]\w*/g;return t.replace(r,function(t){return"("==t[t.length-1]?n(t):~e.indexOf(t)?n(t):t})}function i(t){for(var e=[],n=0;n<t.length;n++)~e.indexOf(t[n])||e.push(t[n]);return e}function o(t){return function(e){return t+e}}var a=/\b(Array|Date|Object|Math|JSON)\b/g;t.exports=function(t,e){var a=i(n(t));return e&&"string"==typeof e&&(e=o(e)),e?r(t,a,e):a}},function(t,e,n){"use strict";function r(t,e){i.call(this,t,e)}var i=n(27),o=n(51),a=n(10).inherit,s=n(53),u=n(80),c=n(113),l=n(10).type;a(r,i),r.prototype.action=function(){return"identify"},r.prototype.type=r.prototype.action,r.prototype.traits=function(t){var e=this.field("traits")||{},n=this.userId();t=t||{},n&&(e.id=n);for(var r in t){var i=null==this[r]?this.proxy("traits."+r):this[r]();null!=i&&(e[t[r]]=i,r!==t[r]&&delete e[r])}return e},r.prototype.email=function(){var t=this.proxy("traits.email");if(t)return t;var e=this.userId();return s(e)?e:void 0},r.prototype.created=function(){var t=this.proxy("traits.created")||this.proxy("traits.createdAt");if(t)return u(t)},r.prototype.companyCreated=function(){var t=this.proxy("traits.company.created")||this.proxy("traits.company.createdAt");if(t)return u(t)},r.prototype.name=function(){var t=this.proxy("traits.name");if("string"==typeof t)return c(t);var e=this.firstName(),n=this.lastName();return e&&n?c(e+" "+n):void 0},r.prototype.firstName=function(){var t=this.proxy("traits.firstName");if("string"==typeof t)return c(t);var e=this.proxy("traits.name");return"string"==typeof e?c(e).split(" ")[0]:void 0},r.prototype.lastName=function(){var t=this.proxy("traits.lastName");if("string"==typeof t)return c(t);var e=this.proxy("traits.name");if("string"==typeof e){var n=c(e).indexOf(" ");if(-1!==n)return c(e.substr(n+1))}},r.prototype.uid=function(){return this.userId()||this.username()||this.email()},r.prototype.description=function(){return this.proxy("traits.description")||this.proxy("traits.background")},r.prototype.age=function(){var t=this.birthday(),e=o(this.traits(),"age");return null!=e?e:"date"===l(t)?(new Date).getFullYear()-t.getFullYear():void 0},r.prototype.avatar=function(){var t=this.traits();return o(t,"avatar")||o(t,"photoUrl")||o(t,"avatarUrl")},r.prototype.position=function(){var t=this.traits();return o(t,"position")||o(t,"jobTitle")},r.prototype.username=i.proxy("traits.username"),r.prototype.website=i.one("traits.website"),r.prototype.websites=i.multi("traits.website"),r.prototype.phone=i.one("traits.phone"),r.prototype.phones=i.multi("traits.phone"),r.prototype.address=i.proxy("traits.address"),r.prototype.gender=i.proxy("traits.gender"),r.prototype.birthday=i.proxy("traits.birthday"),t.exports=r},function(t,e){function n(t){return t.replace(/^\s*|\s*$/g,"")}e=t.exports=n,e.left=function(t){return t.replace(/^\s*/,"")},e.right=function(t){return t.replace(/\s*$/,"")}},function(t,e,n){"use strict";function r(t,e){o.call(this,t,e)}var i=n(10).inherit,o=n(27),a=n(81),s=n(53);i(r,o),r.prototype.action=function(){return"page"},r.prototype.type=r.prototype.action,r.prototype.category=o.field("category"),r.prototype.name=o.field("name"),r.prototype.title=o.proxy("properties.title"),r.prototype.path=o.proxy("properties.path"),r.prototype.url=o.proxy("properties.url"),r.prototype.referrer=function(){return this.proxy("context.referrer.url")||this.proxy("context.page.referrer")||this.proxy("properties.referrer")},r.prototype.properties=function(t){var e=this.field("properties")||{},n=this.category(),r=this.name();t=t||{},n&&(e.category=n),r&&(e.name=r);for(var i in t){var o=null==this[i]?this.proxy("properties."+i):this[i]();null!=o&&(e[t[i]]=o,i!==t[i]&&delete e[i])}return e},r.prototype.email=function(){var t=this.proxy("context.traits.email")||this.proxy("properties.email");if(t)return t;var e=this.userId();return s(e)?e:void 0},r.prototype.fullName=function(){var t=this.category(),e=this.name();return e&&t?t+" "+e:e},r.prototype.event=function(t){return t?"Viewed "+t+" Page":"Loaded a Page"},r.prototype.track=function(t){var e=this.json();return e.event=this.event(t),e.timestamp=this.timestamp(),e.properties=this.properties(),new a(e,this.opts)},t.exports=r},function(t,e,n){"use strict";function r(t){var e=[];return t.getMiddlewares=function(){return e.slice()},t.add=function(t){if("function"!=typeof t)throw new Error("attempted to add non-function middleware");if(-1!==e.indexOf(t))throw new Error("middleware is already registered");e.push(t)},function(t,n,r){if("object"!=typeof n)throw new Error("applyMiddlewares requires a payload object");if("function"!=typeof r)throw new Error("applyMiddlewares requires a function callback");var o=e.slice();o.push(r),i(t,n,o,0)}}function i(t,e,n,r){if(null===e)return void n[n.length-1](null);e instanceof o||(e=new o(e));var a=n[r];a&&(n[r+1]?t(a,e,function(e){i(t,e,n,++r)}):a(e))}var o=n(23);t.exports.SourceMiddlewareChain=function(){var t=r(this);this.applyMiddlewares=function(e,n,r){return t(function(t,e,r){t({integrations:n,next:r,payload:e})},e,r)}},t.exports.IntegrationMiddlewareChain=function(){var t=r(this);this.applyMiddlewares=function(e,n,r){return t(function(t,e,r){t(e,n,r)},e,r)}},t.exports.middlewareChain=r},function(t,e){var n=[].slice;t.exports=function(t,e){if("string"==typeof e&&(e=t[e]),"function"!=typeof e)throw new Error("bind() requires a function");var r=n.call(arguments,2);return function(){return e.apply(t,r.concat(n.call(arguments)))}}},function(t,e,n){"use strict";function r(t){for(var n=e.cookie,r=e.levels(t),i=0;i<r.length;++i){var o=r[i],a={domain:"."+o};if(n("__tld__",1,a),n("__tld__"))return n("__tld__",null,a),o}return""}var i=n(118).parse,o=n(56);r.levels=function(t){var e=i(t).hostname,n=e.split("."),r=n[n.length-1],o=[];if(4===n.length&&r===parseInt(r,10))return o;if(n.length<=1)return o;for(var a=n.length-2;a>=0;--a)o.push(n.slice(a).join("."));return o},r.cookie=o,e=t.exports=r},function(t,e){function n(t){switch(t){case"http:":return 80;case"https:":return 443;default:return location.port}}e.parse=function(t){var e=document.createElement("a");return e.href=t,{href:e.href,host:e.host||location.host,port:"0"===e.port||""===e.port?n(e.protocol):e.port,hash:e.hash,hostname:e.hostname||location.hostname,pathname:"/"!=e.pathname.charAt(0)?"/"+e.pathname:e.pathname,protocol:e.protocol&&":"!=e.protocol?e.protocol:location.protocol,search:e.search,query:e.search.slice(1)}},e.isAbsolute=function(t){return 0==t.indexOf("//")||!!~t.indexOf("://")},e.isRelative=function(t){return!e.isAbsolute(t)},e.isCrossDomain=function(t){t=e.parse(t);var n=e.parse(window.location.href);return t.hostname!==n.hostname||t.port!==n.port||t.protocol!==n.protocol}},function(t,e,n){"use strict";function r(t,e,n,r){function i(){if(4===o.readyState)return r(null,o)}3===arguments.length&&(r=n,n={});var o=new XMLHttpRequest;o.onerror=r,o.onreadystatechange=i,o.open("POST",t,!0);for(var s in n)o.setRequestHeader(s,n[s]);o.send(a.stringify(e))}function i(t,n,r,i){3===arguments.length&&(i=r);var a=e.prefix,s=o(n);t+="?"+a+"="+s,c(t,{param:e.callback},function(e,n){if(e)return i(e);i(null,{url:t,body:n})})}function o(t){var e="";return e=a.stringify(t),e=s(e),e=e.replace(/\+/g,"-").replace(/\//g,"_"),encodeURIComponent(e)}var a=n(30),s=n(201),u=n(203),c=n(204);e=t.exports=u?r:i,e.callback="callback",e.prefix="data",e.json=r,e.base64=i,e.type=u?"xhr":"jsonp"},function(t,e,n){"use strict";function r(t){this.options(t),this.initialize()}var i=n(28),o=n(55),a=n(6)("analytics:entity"),s=n(29),u=n(83),c=n(121),l=n(84),f=n(108);t.exports=r,r.prototype.initialize=function(){return o.set("ajs:cookies",!0),o.get("ajs:cookies")?(o.remove("ajs:cookies"),void(this._storage=o)):l.enabled?void(this._storage=l):(a("warning using memory store both cookies and localStorage are disabled"),void(this._storage=c))},r.prototype.storage=function(){return this._storage},r.prototype.options=function(t){if(0===arguments.length)return this._options;this._options=s(t||{},this.defaults||{})},r.prototype.id=function(t){switch(arguments.length){case 0:return this._getId();case 1:return this._setId(t)}},r.prototype._getId=function(){if(!this._options.persist)return void 0===this._id?null:this._id;var t=this._getIdFromCookie();if(t)return t;var e=this._getIdFromLocalStorage();return e?(this._setIdInCookies(e),e):null},r.prototype._getIdFromCookie=function(){return this.storage().get(this._options.cookie.key)},r.prototype._getIdFromLocalStorage=function(){return this._options.localStorageFallbackDisabled?null:l.get(this._options.cookie.key)},r.prototype._setId=function(t){this._options.persist?(this._setIdInCookies(t),this._setIdInLocalStorage(t)):this._id=t},r.prototype._setIdInCookies=function(t){this.storage().set(this._options.cookie.key,t)},r.prototype._setIdInLocalStorage=function(t){this._options.localStorageFallbackDisabled||l.set(this._options.cookie.key,t)},r.prototype.properties=r.prototype.traits=function(t){switch(arguments.length){case 0:return this._getTraits();case 1:return this._setTraits(t)}},r.prototype._getTraits=function(){var t=this._options.persist?l.get(this._options.localStorage.key):this._traits;return t?f(i(t)):{}},r.prototype._setTraits=function(t){t=t||{},this._options.persist?l.set(this._options.localStorage.key,t):this._traits=t},r.prototype.identify=function(t,e){e=e||{};var n=this.id();null!==n&&n!==t||(e=u(this.traits(),e)),t&&this.id(t),this.debug("identify %o, %o",t,e),this.traits(e),this.save()},r.prototype.save=function(){return!!this._options.persist&&(this._setId(this.id()),this._setTraits(this.traits()),!0)},r.prototype.logout=function(){this.id(null),this.traits({}),this.storage().remove(this._options.cookie.key),l.remove(this._options.cookie.key),l.remove(this._options.localStorage.key)},r.prototype.reset=function(){this.logout(),this.options({})},r.prototype.load=function(){this.id(this.id()),this.traits(this.traits())}},function(t,e,n){"use strict";function r(){this.store={}}var i=n(25),o=n(28),a=Object.prototype.hasOwnProperty;t.exports=i(new r),r.prototype.set=function(t,e){return this.store[t]=o(e),!0},r.prototype.get=function(t){if(a.call(this.store,t))return o(this.store[t])},r.prototype.remove=function(t){return delete this.store[t],!0}},function(t,e,n){!function(e){t.exports=function(t){"use strict";function e(t,e,n,r,i,o){return e=_(_(e,t),_(r,o)),_(e<<i|e>>>32-i,n)}function n(t,n,r,i,o,a,s){return e(n&r|~n&i,t,n,o,a,s)}function r(t,n,r,i,o,a,s){return e(n&i|r&~i,t,n,o,a,s)}function i(t,n,r,i,o,a,s){return e(n^r^i,t,n,o,a,s)}function o(t,n,r,i,o,a,s){return e(r^(n|~i),t,n,o,a,s)}function a(t,e){var a=t[0],s=t[1],u=t[2],c=t[3];a=n(a,s,u,c,e[0],7,-680876936),c=n(c,a,s,u,e[1],12,-389564586),u=n(u,c,a,s,e[2],17,606105819),s=n(s,u,c,a,e[3],22,-1044525330),a=n(a,s,u,c,e[4],7,-176418897),c=n(c,a,s,u,e[5],12,1200080426),u=n(u,c,a,s,e[6],17,-1473231341),s=n(s,u,c,a,e[7],22,-45705983),a=n(a,s,u,c,e[8],7,1770035416),c=n(c,a,s,u,e[9],12,-1958414417),u=n(u,c,a,s,e[10],17,-42063),s=n(s,u,c,a,e[11],22,-1990404162),a=n(a,s,u,c,e[12],7,1804603682),c=n(c,a,s,u,e[13],12,-40341101),u=n(u,c,a,s,e[14],17,-1502002290),s=n(s,u,c,a,e[15],22,1236535329),a=r(a,s,u,c,e[1],5,-165796510),c=r(c,a,s,u,e[6],9,-1069501632),u=r(u,c,a,s,e[11],14,643717713),s=r(s,u,c,a,e[0],20,-373897302),a=r(a,s,u,c,e[5],5,-701558691),c=r(c,a,s,u,e[10],9,38016083),u=r(u,c,a,s,e[15],14,-660478335),s=r(s,u,c,a,e[4],20,-405537848),a=r(a,s,u,c,e[9],5,568446438),c=r(c,a,s,u,e[14],9,-1019803690),u=r(u,c,a,s,e[3],14,-187363961),s=r(s,u,c,a,e[8],20,1163531501),a=r(a,s,u,c,e[13],5,-1444681467),c=r(c,a,s,u,e[2],9,-51403784),u=r(u,c,a,s,e[7],14,1735328473),s=r(s,u,c,a,e[12],20,-1926607734),a=i(a,s,u,c,e[5],4,-378558),c=i(c,a,s,u,e[8],11,-2022574463),u=i(u,c,a,s,e[11],16,1839030562),s=i(s,u,c,a,e[14],23,-35309556),a=i(a,s,u,c,e[1],4,-1530992060),c=i(c,a,s,u,e[4],11,1272893353),u=i(u,c,a,s,e[7],16,-155497632),s=i(s,u,c,a,e[10],23,-1094730640),a=i(a,s,u,c,e[13],4,681279174),c=i(c,a,s,u,e[0],11,-358537222),u=i(u,c,a,s,e[3],16,-722521979),s=i(s,u,c,a,e[6],23,76029189),a=i(a,s,u,c,e[9],4,-640364487),c=i(c,a,s,u,e[12],11,-421815835),u=i(u,c,a,s,e[15],16,530742520),s=i(s,u,c,a,e[2],23,-995338651),a=o(a,s,u,c,e[0],6,-198630844),c=o(c,a,s,u,e[7],10,1126891415),u=o(u,c,a,s,e[14],15,-1416354905),s=o(s,u,c,a,e[5],21,-57434055),a=o(a,s,u,c,e[12],6,1700485571),c=o(c,a,s,u,e[3],10,-1894986606),u=o(u,c,a,s,e[10],15,-1051523),s=o(s,u,c,a,e[1],21,-2054922799),a=o(a,s,u,c,e[8],6,1873313359),c=o(c,a,s,u,e[15],10,-30611744),u=o(u,c,a,s,e[6],15,-1560198380),s=o(s,u,c,a,e[13],21,1309151649),a=o(a,s,u,c,e[4],6,-145523070),c=o(c,a,s,u,e[11],10,-1120210379),u=o(u,c,a,s,e[2],15,718787259),s=o(s,u,c,a,e[9],21,-343485551),t[0]=_(a,t[0]),t[1]=_(s,t[1]),t[2]=_(u,t[2]),t[3]=_(c,t[3])}function s(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}function u(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t[e]+(t[e+1]<<8)+(t[e+2]<<16)+(t[e+3]<<24);return n}function c(t){var e,n,r,i,o,u,c=t.length,l=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=c;e+=64)a(l,s(t.substring(e-64,e)));for(t=t.substring(e-64),n=t.length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e=0;e<n;e+=1)r[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(r[e>>2]|=128<<(e%4<<3),e>55)for(a(l,r),e=0;e<16;e+=1)r[e]=0;return i=8*c,i=i.toString(16).match(/(.*?)(.{0,8})$/),o=parseInt(i[2],16),u=parseInt(i[1],16)||0,r[14]=o,r[15]=u,a(l,r),l}function l(t){var e,n,r,i,o,s,c=t.length,l=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=c;e+=64)a(l,u(t.subarray(e-64,e)));for(t=e-64<c?t.subarray(e-64):new Uint8Array(0),n=t.length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e=0;e<n;e+=1)r[e>>2]|=t[e]<<(e%4<<3);if(r[e>>2]|=128<<(e%4<<3),e>55)for(a(l,r),e=0;e<16;e+=1)r[e]=0;return i=8*c,i=i.toString(16).match(/(.*?)(.{0,8})$/),o=parseInt(i[2],16),s=parseInt(i[1],16)||0,r[14]=o,r[15]=s,a(l,r),l}function f(t){var e,n="";for(e=0;e<4;e+=1)n+=b[t>>8*e+4&15]+b[t>>8*e&15];return n}function d(t){var e;for(e=0;e<t.length;e+=1)t[e]=f(t[e]);return t.join("")}function p(t){return/[\u0080-\uFFFF]/.test(t)&&(t=unescape(encodeURIComponent(t))),t}function h(t,e){var n,r=t.length,i=new ArrayBuffer(r),o=new Uint8Array(i);for(n=0;n<r;n+=1)o[n]=t.charCodeAt(n);return e?o:i}function v(t){return String.fromCharCode.apply(null,new Uint8Array(t))}function y(t,e,n){var r=new Uint8Array(t.byteLength+e.byteLength);return r.set(new Uint8Array(t)),r.set(new Uint8Array(e),t.byteLength),n?r:r.buffer}function m(t){var e,n=[],r=t.length;for(e=0;e<r-1;e+=2)n.push(parseInt(t.substr(e,2),16));return String.fromCharCode.apply(String,n)}function g(){this.reset()}var _=function(t,e){return t+e&4294967295},b=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];return"5d41402abc4b2a76b9719d911017c592"!==d(c("hello"))&&(_=function(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}),"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function e(t,e){return t=0|t||0,t<0?Math.max(t+e,0):Math.min(t,e)}ArrayBuffer.prototype.slice=function(n,r){var i,o,a,s,u=this.byteLength,c=e(n,u),l=u;return r!==t&&(l=e(r,u)),c>l?new ArrayBuffer(0):(i=l-c,o=new ArrayBuffer(i),a=new Uint8Array(o),s=new Uint8Array(this,c,i),a.set(s),o)}}(),g.prototype.append=function(t){return this.appendBinary(p(t)),this},g.prototype.appendBinary=function(t){this._buff+=t,this._length+=t.length;var e,n=this._buff.length;for(e=64;e<=n;e+=64)a(this._hash,s(this._buff.substring(e-64,e)));return this._buff=this._buff.substring(e-64),this},g.prototype.end=function(t){var e,n,r=this._buff,i=r.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<i;e+=1)o[e>>2]|=r.charCodeAt(e)<<(e%4<<3);return this._finish(o,i),n=d(this._hash),t&&(n=m(n)),this.reset(),n},g.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},g.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash}},g.prototype.setState=function(t){return this._buff=t.buff,this._length=t.length,this._hash=t.hash,this},g.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},g.prototype._finish=function(t,e){var n,r,i,o=e;if(t[o>>2]|=128<<(o%4<<3),o>55)for(a(this._hash,t),o=0;o<16;o+=1)t[o]=0;n=8*this._length,n=n.toString(16).match(/(.*?)(.{0,8})$/),r=parseInt(n[2],16),i=parseInt(n[1],16)||0,t[14]=r,t[15]=i,a(this._hash,t)},g.hash=function(t,e){return g.hashBinary(p(t),e)},g.hashBinary=function(t,e){var n=c(t),r=d(n);return e?m(r):r},g.ArrayBuffer=function(){this.reset()},g.ArrayBuffer.prototype.append=function(t){var e,n=y(this._buff.buffer,t,!0),r=n.length;for(this._length+=t.byteLength,e=64;e<=r;e+=64)a(this._hash,u(n.subarray(e-64,e)));return this._buff=e-64<r?new Uint8Array(n.buffer.slice(e-64)):new Uint8Array(0),this},g.ArrayBuffer.prototype.end=function(t){var e,n,r=this._buff,i=r.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<i;e+=1)o[e>>2]|=r[e]<<(e%4<<3);return this._finish(o,i),n=d(this._hash),t&&(n=m(n)),this.reset(),n},g.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},g.ArrayBuffer.prototype.getState=function(){var t=g.prototype.getState.call(this);return t.buff=v(t.buff),t},g.ArrayBuffer.prototype.setState=function(t){return t.buff=h(t.buff,!0),g.prototype.setState.call(this,t)},g.ArrayBuffer.prototype.destroy=g.prototype.destroy,g.ArrayBuffer.prototype._finish=g.prototype._finish,g.ArrayBuffer.hash=function(t,e){var n=l(new Uint8Array(t)),r=d(n);return e?m(r):r},g}()}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(31),i=n(89),o=n(40),a=n(219),s=n(124),u=n(222);e.XC_CURRENT="atl_xid.xc";var c=function(){function t(){}return t.getCachedXID=function(){try{var t=a.getXidItemFromCache("atl_xid.current"),e=a.getCache("atl_xid.ts"),n=!1;if(t.length>0&&t[0].type===o.XIDItemType.UID?n=parseInt(e||"",10)>=(new Date).getTime()-6048e5:t.length>0&&t[0].type===o.XIDItemType.XC&&(n=parseInt(e||"",10)>=(new Date).getTime()-2592e6),n){for(var r=0,i=t;r<i.length;r++)i[r].state="EXISTING";return t}return[]}catch(t){return[]}},t.saveXid=function(t){try{i.setCookie("atl_xid.ts",(new Date).getTime()),a.setLocalstorage("atl_xid.ts",(new Date).getTime().toString());for(var e=[],n=0,r=t;n<r.length;n++){var o=r[n];if(o.value&&o.createdAt){e.push({type:o.type,value:o.value,createdAt:o.createdAt});break}}i.setCookie("atl_xid.current",JSON.stringify(e)),a.setLocalstorage("atl_xid.current",JSON.stringify(e))}catch(t){console.error("Error setting xid cookie.")}},t.updateXc=function(e,n){try{if("prod"===e&&s.isAtlassianComDomain())return t.processAtlassianComDomainXc(n);t.saveXcLocalstorage(n)}catch(t){console.error("Error setting xc cookie.")}return n},t.getUids=function(){for(var t=a.getXidItemFromCache("atl_xid.uid")||[],e=0,n=t;e<n.length;e++)n[e].state="EXISTING";return t},t.saveUids=function(t){try{for(var e=[],n=0,r=t;n<r.length;n++){var i=r[n];i.value&&i.createdAt&&e.push({type:i.type,value:i.value,createdAt:i.createdAt})}e.slice(0,20),a.setLocalstorage("atl_xid.uid",JSON.stringify(e))}catch(t){console.error("Error setting uid cookie.")}},t.saveXcLocalstorage=function(t){if(t.value&&t.createdAt){var n=a.getXidFromLocalStorage(e.XC_CURRENT);if(n&&n.value===t.value)return;n&&n.value!==t.value&&(t.state="CHANGED");var r={type:t.type,value:t.value,createdAt:t.createdAt};a.setLocalstorage(e.XC_CURRENT,JSON.stringify(r))}},t.processAtlassianComDomainXc=function(n){if(n.value&&n.createdAt){var s=a.getXidFromCookie(e.XC_CURRENT);if(s){i.setCookie(e.XC_CURRENT,JSON.stringify(s),i.getCrossDomainCookieOption());var c=r.__assign({state:"EXISTING"},s);return t.saveXcLocalstorage(c),c}var l={value:u.uuidv4(),createdAt:(new Date).toISOString(),type:o.XIDItemType.XC};i.setCookie(e.XC_CURRENT,JSON.stringify(l),i.getCrossDomainCookieOption());var f=r.__assign({state:"NEW"},l);return t.saveXcLocalstorage(f),f}return n},t}();e.Storage=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(89),i=n(221),o=function(t){var e=i.parse(t).hostname,n=e.split("."),r=n[n.length-1],o=[];if(4===n.length&&!isNaN(parseInt(r,10)))return o;if(n.length<=1)return o;for(var a=n.length-2;a>=0;--a)o.push(n.slice(a).join("."));return o};e.domain=function(t){for(var e=o(t),n=0,i=e;n<i.length;n++){var a=i[n],s={domain:"."+a};if(r.setCookie("__tld__",1,s),r.getCookie("__tld__"))return r.setCookie("__tld__",null,s),a}return""},e.inIframe=function(){try{return window.self!==window.top}catch(t){return!0}},e.isAtlassianComDomain=function(){return/atlassian\.com$/.test(window.location.hostname)}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(253),o=r(i),a=n(256),s=r(a);e.default=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=(0,s.default)(t);!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if((0,o.default)(Object(e)))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},function(t,e,n){var r=n(22),i=n(17),o=n(38).f;t.exports=function(t){return function(e){for(var n,a=i(e),s=r(a),u=s.length,c=0,l=[];u>c;)o.call(a,n=s[c++])&&l.push(t?[n,a[n]]:a[n]);return l}}},function(t,e,n){"use strict";function r(t){function e(n){if(n&&n.addIntegration)return n.addIntegration(e);this.debug=a("analytics:integration:"+c(t)),this.options=s(o(n)||{},this.defaults),this._queue=[],this.once("ready",i(this,this.flush)),e.emit("construct",this),this.ready=i(this,this.ready),this._wrapInitialize(),this._wrapPage(),this._wrapTrack()}return e.prototype.defaults={},e.prototype.globals=[],e.prototype.templates={},e.prototype.name=t,u(e,f),u(e.prototype,l),e}var i=n(116),o=n(28),a=n(6),s=n(29),u=n(83),c=n(264),l=n(265),f=n(274);t.exports=r},function(t,e){function n(t,e){t.addEventListener("load",function(t,n){e(null,n)},!1),t.addEventListener("error",function(n){var r=new Error('script error "'+t.src+'"');r.event=n,e(r)},!1)}function r(t,e){t.attachEvent("onreadystatechange",function(n){/complete|loaded/.test(t.readyState)&&e(null,n)}),t.attachEvent("onerror",function(n){var r=new Error('failed to load the script "'+t.src+'"');r.event=n||window.event,e(r)})}t.exports=function(t,e){return t.addEventListener?n(t,e):r(t,e)}},function(t,e,n){var r=n(282),i=n(283),o=i;o.v1=r,o.v4=i,t.exports=o},function(t,e){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);t.exports=function(){return n(r),r}}else{var i=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),i[e]=t>>>((3&e)<<3)&255;return i}}},function(t,e){function n(t,e){var n=e||0,i=r;return[i[t[n++]],i[t[n++]],i[t[n++]],i[t[n++]],"-",i[t[n++]],i[t[n++]],"-",i[t[n++]],i[t[n++]],"-",i[t[n++]],i[t[n++]],"-",i[t[n++]],i[t[n++]],i[t[n++]],i[t[n++]],i[t[n++]],i[t[n++]]].join("")}for(var r=[],i=0;i<256;++i)r[i]=(i+256).toString(16).substr(1);t.exports=n},function(t,e,n){"use strict";function r(){try{if(!window.localStorage)return!1;var t=o();window.localStorage.setItem(t,"test_value");var e=window.localStorage.getItem(t);return window.localStorage.removeItem(t),"test_value"===e}catch(t){return!1}}var i=n(39),o=n(129).v4,a={_data:{},length:0,setItem:function(t,e){return this._data[t]=e,this.length=i(this._data).length,e},getItem:function(t){return t in this._data?this._data[t]:null},removeItem:function(t){return t in this._data&&delete this._data[t],this.length=i(this._data).length,null},clear:function(){this._data={},this.length=0},key:function(t){return i(this._data)[t]}};t.exports.defaultEngine=function(){return r()?window.localStorage:a}(),t.exports.inMemoryEngine=a},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(134),o=r(i),a=n(2),s=r(a),u=n(135),c=r(u),l=n(136),f=r(l),d=n(90),p=r(d),h=n(137),v=r(h),y=function(t){function e(t){(0,s.default)(this,e);var n=void 0;try{n=window.localStorage||p.default}catch(t){n=p.default}return(0,c.default)(this,(e.__proto__||(0,o.default)(e)).call(this,n,t))}return(0,f.default)(e,t),e}(v.default);e.default=y},function(t,e,n){t.exports={default:n(296),__esModule:!0}},function(t,e,n){"use strict";e.__esModule=!0;var r=n(41),i=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==(void 0===e?"undefined":(0,i.default)(e))&&"function"!=typeof e?t:e}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var i=n(298),o=r(i),a=n(302),s=r(a),u=n(41),c=r(u);e.default=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":(0,c.default)(e)));t.prototype=(0,s.default)(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(o.default?(0,o.default)(t,e):t.__proto__=e)}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){try{if(!t)return!1;var e="awc.storage.support";t.setItem(e,"test_value");var n=t.getItem(e);return t.removeItem(e),"test_value"===n}catch(t){return!1}}function o(t){var e=!1;if(t.code)switch(t.code){case 22:e=!0;break;case 1014:"NS_ERROR_DOM_QUOTA_REACHED"===t.name&&(e=!0)}else-2147024882===t.number&&(e=!0);return e}Object.defineProperty(e,"__esModule",{value:!0}),e.GLOBAL_IN_MEMORY_NAME=e.AWC_STORAGE_PREFIX=void 0;var a=n(2),s=r(a);e.isSupported=i,e.isQuotaExceeded=o;var u=n(90),c=r(u),l=n(15),f=e.AWC_STORAGE_PREFIX="awc",d=e.GLOBAL_IN_MEMORY_NAME="awcInMemoryStorageFallback",p=function t(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;(0,s.default)(this,t),this.getStore=function(){return n._store},this.getItem=function(t){return n._store.getItem(n.createKey(t))},this.removeItem=function(t){return n._store.removeItem(n.createKey(t))},this.setItem=function(t,e){try{n._store.setItem(n.createKey(t),e)}catch(r){o(r)&&(n.swapToInMemory(),n._store.setItem(n.createKey(t),e))}},this.swapToInMemory=function(){var t=[];if(n._store)for(var e=0;e<n._store.length;e++)t.push(n._store.key(e));var r=void 0;i(window[d])?r=window[d]:(r=c.default,window[d]||(window[d]=c.default)),t.forEach(function(t){if(0===t.indexOf(n.getPrefix())){var e=n._store.getItem(t);r.setItem(t,e)}}),n._store=r},this.clear=function(){return n._store.clear()},this.key=function(t){return n._store.key(t)},this.getPrefix=function(){return n._prefix},this.createKey=function(t){return n.getPrefix()+"."+t},this._prefix=r&&r!==l.envType.PROD?f+"-"+r:f,i(e)?this._store=e:this.swapToInMemory()};e.default=p},function(t,e,n){t.exports={default:n(306),__esModule:!0}},function(t,e,n){t.exports={default:n(316),__esModule:!0}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(138),o=r(i),a=n(2),s=r(a),u=n(32),c=r(u),l=function(){function t(){var e=this;(0,s.default)(this,t),this._bindEventListeners=function(){document.addEventListener(e._visibilityChange,e._handleVisibilityChange,!1)},this._handleVisibilityChange=function(){var t=document[e._hidden];e._isHidden=t,e._callbacks.forEach(function(e){return e(t)})},this._isHidden=!1,this._callbacks=new o.default,this._hidden=void 0,this._visibilityChange=void 0,void 0!==document.hidden?(this._isHidden=document.hidden,this._hidden="hidden",this._visibilityChange="visibilitychange"):void 0!==document.msHidden?(this._isHidden=document.msHidden,this._hidden="msHidden",this._visibilityChange="msvisibilitychange"):void 0!==document.webkitHidden&&(this._isHidden=document.webkitHidden,this._hidden="webkitHidden",this._visibilityChange="webkitvisibilitychange"),void 0!==document.addEventListener&&void 0!==this._hidden&&this._bindEventListeners()}return(0,c.default)(t,[{key:"addCallback",value:function(t,e){if("string"!=typeof t)throw new Error("Invalid name, must be string");if("function"!=typeof e)throw new Error("Invalid callback, must be function");this._callbacks.set(t,e)}},{key:"removeCallback",value:function(t){this._callbacks.has(t)&&this._callbacks.delete(t)}},{key:"getIsHidden",value:function(){return this._isHidden}}]),t}();e.default=l},function(t,e,n){"use strict";function r(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r},function(t,e,n){"use strict";function r(t){switch(t.arrayFormat){case"index":return function(e,n,r){return null===n?[o(e,t),"[",r,"]"].join(""):[o(e,t),"[",o(r,t),"]=",o(n,t)].join("")};case"bracket":return function(e,n){return null===n?o(e,t):[o(e,t),"[]=",o(n,t)].join("")};default:return function(e,n){return null===n?o(e,t):[o(e,t),"=",o(n,t)].join("")}}}function i(t){var e;switch(t.arrayFormat){case"index":return function(t,n,r){if(e=/\[(\d*)\]$/.exec(t),t=t.replace(/\[\d*\]$/,""),!e)return void(r[t]=n);void 0===r[t]&&(r[t]={}),r[t][e[1]]=n};case"bracket":return function(t,n,r){return e=/(\[\])$/.exec(t),t=t.replace(/\[\]$/,""),e?void 0===r[t]?void(r[t]=[n]):void(r[t]=[].concat(r[t],n)):void(r[t]=n)};default:return function(t,e,n){if(void 0===n[t])return void(n[t]=e);n[t]=[].concat(n[t],e)}}}function o(t,e){return e.encode?e.strict?c(t):encodeURIComponent(t):t}function a(t){return Array.isArray(t)?t.sort():"object"==typeof t?a(Object.keys(t)).sort(function(t,e){return Number(t)-Number(e)}).map(function(e){return t[e]}):t}function s(t){var e=t.indexOf("?");return-1===e?"":t.slice(e+1)}function u(t,e){e=l({arrayFormat:"none"},e);var n=i(e),r=Object.create(null);return"string"!=typeof t?r:(t=t.trim().replace(/^[?#&]/,""))?(t.split("&").forEach(function(t){var e=t.replace(/\+/g," ").split("="),i=e.shift(),o=e.length>0?e.join("="):void 0;o=void 0===o?null:f(o),n(f(i),o,r)}),Object.keys(r).sort().reduce(function(t,e){var n=r[e];return Boolean(n)&&"object"==typeof n&&!Array.isArray(n)?t[e]=a(n):t[e]=n,t},Object.create(null))):r}var c=n(322),l=n(323),f=n(324);e.extract=s,e.parse=u,e.stringify=function(t,e){e=l({encode:!0,strict:!0,arrayFormat:"none"},e),!1===e.sort&&(e.sort=function(){});var n=r(e);return t?Object.keys(t).sort(e.sort).map(function(r){var i=t[r];if(void 0===i)return"";if(null===i)return o(r,e);if(Array.isArray(i)){var a=[];return i.slice().forEach(function(t){void 0!==t&&a.push(n(r,t,a.length))}),a.join("&")}return o(r,e)+"="+o(i,e)}).filter(function(t){return t.length>0}).join("&"):""},e.parseUrl=function(t,e){return{url:t.split("?")[0]||"",query:u(s(t),e)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.omit=e.omitBy=e.pickBy=e.pick=e.mapKeys=void 0;var r=n(13),i=function(t){return t&&t.__esModule?t:{default:t}}(r),o=function(t,e){return(0,i.default)(t).reduce(function(n,r){return n[e(t[r],r,t)]=t[r],n},{})},a=function(t,e){return e.reduce(function(e,n){return n in t&&(e[n]=t[n]),e},{})},s=function(t,e){return(0,i.default)(t).filter(function(n){return!e(t[n],n)}).reduce(function(e,n){return e[n]=t[n],e},{})},u=function(t,e){return(0,i.default)(t).filter(function(n){return e(t[n],n)}).reduce(function(e,n){return e[n]=t[n],e},{})},c=function(t,e){return(0,i.default)(t).filter(function(t){return e.indexOf(t)<0}).reduce(function(e,n){return e[n]=t[n],e},{})};e.mapKeys=o,e.pick=a,e.pickBy=u,e.omitBy=s,e.omit=c},function(t,e,n){"use strict";e.__esModule=!0;var r=n(139),i=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default=function(t,e,n){return e in t?(0,i.default)(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},function(t,e,n){"use strict";function r(t){return null!==t&&"object"===(void 0===t?"undefined":(0,s.default)(t))&&!1===Array.isArray(t)}function i(t){return!0===r(t)&&"[object Object]"===Object.prototype.toString.call(t)}function o(t){if(!1===i(t))return!1;var e=t.constructor;if("function"!=typeof e)return!1;var n=e.prototype;return!1!==i(n)&&"isPrototypeOf"in n}var a=n(41),s=function(t){return t&&t.__esModule?t:{default:t}}(a);t.exports={isPlainObject:o}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.DwellTimeHelperWithBrowserInteraction=e.DwellTimeHelper=e.TypeAheadHelper=e.originTracingType=e.userType=e.tenantType=e.platformType=e.originType=e.eventType=e.envType=e.apdexType=e.default=void 0;var i=n(147),o=r(i),a=n(331),s=r(a),u=n(332),c=r(u),l=n(334),f=r(l),d=n(15);e.default=o.default,e.apdexType=d.apdexType,e.envType=d.envType,e.eventType=d.eventType,e.originType=d.originType,e.platformType=d.platformType,e.tenantType=d.tenantType,e.userType=d.userType,e.originTracingType=d.originTracingType,e.TypeAheadHelper=s.default,e.DwellTimeHelper=c.default,e.DwellTimeHelperWithBrowserInteraction=f.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(41),o=r(i),a=n(13),s=r(a),u=n(74),c=r(u),l=n(168),f=r(l),d=n(14),p=r(d),h=n(2),v=r(h),y=n(77),m=r(y),g=n(183),_=r(g),b=n(88),w=n(252),I=r(w),T=n(290),E=r(T),x=n(291),S=r(x),k=n(305),A=r(k),O=n(140),j=r(O),C=n(319),M=r(C),P=n(320),R=r(P),N=n(321),D=r(N),L=n(325),U=r(L),F=n(15),B=n(326),X=n(93),H=n(92),z=n(328),W=r(z),V=n(330),q=r(V),G=n(91),$=r(G),K=["atlassian.net","jira.com","jira-dev.com","admin.atlassian.com","admin.stg.atlassian.com"],J=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((0,v.default)(this,t),Q.call(this),!e)throw new Error("Missing productInfo");if(!e.env)throw new Error("Missing productInfo.env");if(!e.product)throw new Error("Missing productInfo.product");if(!(0,F.isType)(F.envType,e.env))throw new Error("Invalid productInfo.env '"+e.env+"', must be an envType: ["+(0,F.objectValues)(F.envType)+"]");if(e.origin){if(!(0,F.isType)(F.originType,e.origin))throw new Error("Invalid productInfo.origin '"+e.origin+"', must be an originType: ["+(0,F.objectValues)(F.originType)+"]")}else e.origin=F.originType.WEB;e.platform?(0,X.validatePlatform)(e):e.platform=e.origin===F.originType.WEB?F.platformType.WEB:F.platformType.DESKTOP,e.embeddedProduct=this._createEmbeddedProductGetter(e.embeddedProduct),e.subproduct=this._createSubproductGetter(e.subproduct),this._productInfo=(0,p.default)({},e),this._tenantInfo={},this._orgInfo={},this._userInfo={},this._uiViewedAttributes={},this._context=(0,B.buildContext)(this._productInfo),this._safeSessionStorage=new $.default;var r=new _.default,i=this._useStargate(n.useStargate),o=n.maxRetryAttempts||4,a=n.minRetryDelay||1e3,s=function(){if(n.xidConsent){var t=function(){return[{type:b.XIDItemType.XC,state:b.XIDState.TIMEOUT},{type:b.XIDItemType.UID,state:b.XIDState.TIMEOUT}]},r=function(){return[{type:b.XIDItemType.XC,state:b.XIDState.UNKNOWN},{type:b.XIDItemType.UID,state:b.XIDState.UNKNOWN}]},i=f.default||m.default;return i.race([new b.XID(e.env,5e3).getXidCallbackForPromise().catch(function(){return r}),new i(function(e){setTimeout(function(){return e(t)},5e3)})])}};r.use(E.default),r.use(I.default),r.init({BeforeSend:{},"Segment.io":{apiKey:n.apiKey||"",apiHost:n.apiHost||this._selectHost({useStargate:i,env:e.env}),retryQueue:!0,retryQueuePrefix:"awc-"+e.env,addBundledMetadata:!0,unbundledIntegrations:["Amplitude"],retryQueueOptions:{maxRetryDelay:6e4,minRetryDelay:a,backoffFactor:2,maxAttempts:o,maxItems:100},xidPromiseGetter:s}},{user:{persist:!1,cookie:{},localStorage:{},localStorageFallbackDisabled:!0}}),this._analytics=r,this._pageVisibility=new j.default,this._tabTracking=new M.default,this._sessionTracking=new R.default({sessionExpiryTime:n.sessionExpiryTime}),this.task=new D.default,this.originTracing=new U.default,this._apdexEvent=new A.default(this.sendOperationalEvent,this._pageVisibility),this._historyReplaceFn="function"==typeof n.historyReplaceFn?n.historyReplaceFn:H.defaultHistoryReplaceFn},Q=function(){var t=this;this._useStargate=function(t){return null==t||t},this._selectHost=function(e){var n=e.useStargate,r=e.env;return n?t._isTenantedHost()?window.location.host+"/gateway/api/gasv3/api/v1":r===F.envType.PROD?"api-private.atlassian.com/gasv3/api/v1":"api-private.stg.atlassian.com/gasv3/api/v1":r===F.envType.PROD?"as.atlassian.com/api/v1":"as.staging.atl-paas.net/api/v1"},this._isTenantedHost=function(){return K.filter(function(e){return t._endsWith(window.location.host,e)}).length>0},this._endsWith=function(t,e){return-1!==t.indexOf(e,t.length-e.length)},this._changeInternalUserId=function(e){t._analytics.user().id()!==e&&t._analytics.user().id(e)},this._createSubproductGetter=function(t){return(0,q.default)(t,"Cannot get subproduct from the callback. Proceeding without it.")},this._createEmbeddedProductGetter=function(t){return(0,q.default)(t,"Cannot get embeddedProduct from the callback. Proceeding without it.")},this._getLastScreenEvent=function(){try{return JSON.parse(t._safeSessionStorage.getItem("last.screen.event"))}catch(e){return t._safeSessionStorage.removeItem("last.screen.event"),null}},this._setLastScreenEvent=function(e){t._safeSessionStorage.setItem("last.screen.event",(0,c.default)({name:e.name,attributes:e.attributes}))},this.setEmbeddedProduct=function(e){t._productInfo.embeddedProduct=t._createEmbeddedProductGetter(e),t.resetUIViewedTimers()},this.clearEmbeddedProduct=function(){t._productInfo.embeddedProduct=t._createEmbeddedProductGetter(null)},this.setSubproduct=function(e){t._productInfo.subproduct=t._createSubproductGetter(e),t.resetUIViewedTimers()},this.setOriginTracingHandlers=function(e){var n=t.originTracing.handleOriginParameters(e,t._historyReplaceFn);(0,s.default)(n).forEach(function(e){void 0!==n[e].taskSessionId&&t.task.createTaskSessionWithProvidedId(e,n[e].taskSessionId)});var r={};(0,s.default)(n).forEach(function(t){n[t].originTracingAttributes?r[t]=n[t].originTracingAttributes:console.warn("Handling method for origin parameter "+t+" has not returned any attributes")}),(0,s.default)(n).length>0&&t.sendOperationalEvent({action:"landed",actionSubject:"origin",source:"webClient",attributes:{originTracesLanded:r}},function(){})},this.setTenantInfo=function(e,n){if(!e)throw new Error("Missing tenantIdType");if(e!==F.tenantType.NONE&&!n)throw new Error("Missing tenantId");if(!(0,F.isType)(F.tenantType,e))throw new Error("Invalid tenantIdType '"+e+"', must be an tenantType: ["+(0,F.objectValues)(F.tenantType)+"]");t._tenantInfo={tenantIdType:e,tenantId:n}},this.clearTenantInfo=function(){t._tenantInfo={}},this.setOrgInfo=function(e){if(!e)throw new Error("Missing orgId");t._orgInfo={orgId:e}},this.clearOrgInfo=function(){t._orgInfo={}},this.setUserInfo=function(e,n){(0,X.validateIdentifyEvent)(e,n),t._userInfo={userIdType:e,userId:n},t._changeInternalUserId(n)},this.clearUserInfo=function(){t._userInfo={},t._changeInternalUserId(null)},this.setUIViewedAttributes=function(e){if(!e)throw new Error("Missing uiViewedAttributes");if("object"!==(void 0===e?"undefined":(0,o.default)(e))||Array.isArray(e))throw new Error("Invalid uiViewedAttributes type, should be a non array object");t._uiViewedAttributes=(0,p.default)({},e)},this.clearUIViewedAttributes=function(){t._uiViewedAttributes={}},this.sendIdentifyEvent=function(e,n,r){(0,X.validateIdentifyEvent)(e,n),t._userInfo={userIdType:e,userId:n},t._analytics.identify(n,{userIdType:e},t._context,r)},this.sendPageEvent=function(e,n){t.sendScreenEvent(e,n)},this.sendScreenEvent=function(e,n,r){var i=void 0,a=void 0,s=void 0,u=void 0;"object"===(void 0===e?"undefined":(0,o.default)(e))?(i=e.name,a=e.attributes,s=e.containers,u=e.tags):(i=e,a=r),(0,X.validateScreenEvent)(i),(0,X.validateContainers)(s);var c=(0,B.buildScreenEvent)(t._productInfo,t._tenantInfo,t._userInfo,a,e.nonPrivacySafeAttributes,u,t._tabTracking.getCurrentTabId(),t._sessionTracking.getCurrentSessionId(),t.task.getAllTaskSessions(),t._orgInfo,s),l=(0,p.default)({name:i},c);t._setLastScreenEvent(l),t._analytics.page(i,c,t._context,(0,W.default)(n,l))},this.sendTrackEvent=function(e,n){(0,X.validateTrackEvent)(e);var r=(0,B.buildActionEvent)(t._productInfo,t._tenantInfo,t._userInfo,e,F.eventType.TRACK,t._tabTracking.getCurrentTabId(),t._sessionTracking.getCurrentSessionId(),t.task.getAllTaskSessions(),t._orgInfo);t._analytics.track((0,B.buildActionName)(e),r,t._context,(0,W.default)(n,r))},this.sendUIEvent=function(e,n){(0,X.validateUIEvent)(e);var r=(0,B.buildActionEvent)(t._productInfo,t._tenantInfo,t._userInfo,e,F.eventType.UI,t._tabTracking.getCurrentTabId(),t._sessionTracking.getCurrentSessionId(),t.task.getAllTaskSessions(),t._orgInfo);t._analytics.track((0,B.buildActionName)(e),r,t._context,(0,W.default)(n,r))},this.sendOperationalEvent=function(e,n){(0,X.validateOperationalEvent)(e);var r=(0,B.buildActionEvent)(t._productInfo,t._tenantInfo,t._userInfo,e,F.eventType.OPERATIONAL,t._tabTracking.getCurrentTabId(),t._sessionTracking.getCurrentSessionId(),t.task.getAllTaskSessions(),t._orgInfo);t._analytics.track((0,B.buildActionName)(e),r,t._context,(0,W.default)(n,r))},this.startUIViewedEvent=function(e){t.stopUIViewedEvent(),t._uiViewedEvent=new S.default(t._productInfo,function(){return{embeddedProduct:t._productInfo.embeddedProduct(),subproduct:t._productInfo.subproduct(),tenantIdType:t._tenantInfo.tenantIdType,tenantId:t._tenantInfo.tenantId,userId:t._userInfo.userId,lastScreenEvent:t._getLastScreenEvent(),attributes:t._uiViewedAttributes}},function(n){return t.sendUIEvent(n,e)}),t._uiViewedEvent.start()},this.stopUIViewedEvent=function(){t._uiViewedEvent&&(t._uiViewedEvent.stop(),t._uiViewedEvent=null)},this.resetUIViewedTimers=function(){t._uiViewedEvent&&t._uiViewedEvent.resetTimers()},this.startApdexEvent=function(e){t._apdexEvent.start(e)},this.getApdexStart=function(e){return t._apdexEvent.getStart(e)},this.stopApdexEvent=function(e,n){t._apdexEvent.stop(e,n)},this.onEvent=function(e,n){if(!n)throw new Error("Missing analyticsData");if(!n.eventType)throw new Error("Missing analyticsData.eventType");if(!(0,F.isType)(F.eventType,n.eventType))throw new Error("Invalid analyticsData.eventType '"+n.eventType+"', must be an eventType: ["+(0,F.objectValues)(F.eventType)+"]");n.eventType===F.eventType.TRACK?t.sendTrackEvent(n):n.eventType===F.eventType.UI?t.sendUIEvent(n):n.eventType===F.eventType.OPERATIONAL&&t.sendOperationalEvent(n)}};e.default=J},function(t,e,n){t.exports={default:n(149),__esModule:!0}},function(t,e,n){n(33),n(37),t.exports=n(69).f("iterator")},function(t,e,n){var r=n(59),i=n(42);t.exports=function(t){return function(e,n){var o,a,s=String(i(e)),u=r(n),c=s.length;return u<0||u>=c?t?"":void 0:(o=s.charCodeAt(u),o<55296||o>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?t?s.charAt(u):o:t?s.slice(u,u+2):a-56320+(o-55296<<10)+65536)}}},function(t,e,n){"use strict";var r=n(45),i=n(44),o=n(35),a={};n(16)(a,n(3)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(a,{next:i(1,n)}),o(t,e+" Iterator")}},function(t,e,n){var r=n(8),i=n(11),o=n(22);t.exports=n(9)?Object.defineProperties:function(t,e){i(t);for(var n,a=o(e),s=a.length,u=0;s>u;)r.f(t,n=a[u++],e[n]);return t}},function(t,e,n){var r=n(17),i=n(65),o=n(154);t.exports=function(t){return function(e,n,a){var s,u=r(e),c=i(u.length),l=o(a,c);if(t&&n!=n){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((t||l in u)&&u[l]===n)return t||l||0;return!t&&-1}}},function(t,e,n){var r=n(59),i=Math.max,o=Math.min;t.exports=function(t,e){return t=r(t),t<0?i(t+e,0):o(t,e)}},function(t,e,n){"use strict";var r=n(156),i=n(99),o=n(26),a=n(17);t.exports=n(60)(Array,"Array",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,i(1)):"keys"==e?i(0,n):"values"==e?i(0,t[n]):i(0,[n,t[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(t,e){t.exports=function(){}},function(t,e,n){t.exports={default:n(158),__esModule:!0}},function(t,e,n){n(159),n(72),n(163),n(164),t.exports=n(0).Symbol},function(t,e,n){"use strict";var r=n(4),i=n(21),o=n(9),a=n(5),s=n(95),u=n(47).KEY,c=n(20),l=n(67),f=n(35),d=n(46),p=n(3),h=n(69),v=n(70),y=n(160),m=n(161),g=n(100),_=n(11),b=n(17),w=n(63),I=n(44),T=n(45),E=n(162),x=n(102),S=n(8),k=n(22),A=x.f,O=S.f,j=E.f,C=r.Symbol,M=r.JSON,P=M&&M.stringify,R=p("_hidden"),N=p("toPrimitive"),D={}.propertyIsEnumerable,L=l("symbol-registry"),U=l("symbols"),F=l("op-symbols"),B=Object.prototype,X="function"==typeof C,H=r.QObject,z=!H||!H.prototype||!H.prototype.findChild,W=o&&c(function(){return 7!=T(O({},"a",{get:function(){return O(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=A(B,e);r&&delete B[e],O(t,e,n),r&&t!==B&&O(B,e,r)}:O,V=function(t){var e=U[t]=T(C.prototype);return e._k=t,e},q=X&&"symbol"==typeof C.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof C},G=function(t,e,n){return t===B&&G(F,e,n),_(t),e=w(e,!0),_(n),i(U,e)?(n.enumerable?(i(t,R)&&t[R][e]&&(t[R][e]=!1),n=T(n,{enumerable:I(0,!1)})):(i(t,R)||O(t,R,I(1,{})),t[R][e]=!0),W(t,e,n)):O(t,e,n)},$=function(t,e){_(t);for(var n,r=m(e=b(e)),i=0,o=r.length;o>i;)G(t,n=r[i++],e[n]);return t},K=function(t,e){return void 0===e?T(t):$(T(t),e)},J=function(t){var e=D.call(this,t=w(t,!0));return!(this===B&&i(U,t)&&!i(F,t))&&(!(e||!i(this,t)||!i(U,t)||i(this,R)&&this[R][t])||e)},Q=function(t,e){if(t=b(t),e=w(e,!0),t!==B||!i(U,e)||i(F,e)){var n=A(t,e);return!n||!i(U,e)||i(t,R)&&t[R][e]||(n.enumerable=!0),n}},Y=function(t){for(var e,n=j(b(t)),r=[],o=0;n.length>o;)i(U,e=n[o++])||e==R||e==u||r.push(e);return r},Z=function(t){for(var e,n=t===B,r=j(n?F:b(t)),o=[],a=0;r.length>a;)!i(U,e=r[a++])||n&&!i(B,e)||o.push(U[e]);return o};X||(C=function(){if(this instanceof C)throw TypeError("Symbol is not a constructor!");var t=d(arguments.length>0?arguments[0]:void 0),e=function(n){this===B&&e.call(F,n),i(this,R)&&i(this[R],t)&&(this[R][t]=!1),W(this,t,I(1,n))};return o&&z&&W(B,t,{configurable:!0,set:e}),V(t)},s(C.prototype,"toString",function(){return this._k}),x.f=Q,S.f=G,n(101).f=E.f=Y,n(38).f=J,n(71).f=Z,o&&!n(43)&&s(B,"propertyIsEnumerable",J,!0),h.f=function(t){return V(p(t))}),a(a.G+a.W+a.F*!X,{Symbol:C});for(var tt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),et=0;tt.length>et;)p(tt[et++]);for(var tt=k(p.store),et=0;tt.length>et;)v(tt[et++]);a(a.S+a.F*!X,"Symbol",{for:function(t){return i(L,t+="")?L[t]:L[t]=C(t)},keyFor:function(t){if(q(t))return y(L,t);throw TypeError(t+" is not a symbol!")},useSetter:function(){z=!0},useSimple:function(){z=!1}}),a(a.S+a.F*!X,"Object",{create:K,defineProperty:G,defineProperties:$,getOwnPropertyDescriptor:Q,getOwnPropertyNames:Y,getOwnPropertySymbols:Z}),M&&a(a.S+a.F*(!X||c(function(){var t=C();return"[null]"!=P([t])||"{}"!=P({a:t})||"{}"!=P(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!q(t)){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);return e=r[1],"function"==typeof e&&(n=e),!n&&g(e)||(e=function(t,e){if(n&&(e=n.call(this,t,e)),!q(e))return e}),r[1]=e,P.apply(M,r)}}}),C.prototype[N]||n(16)(C.prototype,N,C.prototype.valueOf),f(C,"Symbol"),f(Math,"Math",!0),f(r.JSON,"JSON",!0)},function(t,e,n){var r=n(22),i=n(17);t.exports=function(t,e){for(var n,o=i(t),a=r(o),s=a.length,u=0;s>u;)if(o[n=a[u++]]===e)return n}},function(t,e,n){var r=n(22),i=n(71),o=n(38);t.exports=function(t){var e=r(t),n=i.f;if(n)for(var a,s=n(t),u=o.f,c=0;s.length>c;)u.call(t,a=s[c++])&&e.push(a);return e}},function(t,e,n){var r=n(17),i=n(101).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return i(t)}catch(t){return a.slice()}};t.exports.f=function(t){return a&&"[object Window]"==o.call(t)?s(t):i(r(t))}},function(t,e,n){n(70)("asyncIterator")},function(t,e,n){n(70)("observable")},function(t,e,n){n(166),t.exports=n(0).Object.keys},function(t,e,n){var r=n(36),i=n(22);n(73)("keys",function(){return function(t){return i(r(t))}})},function(t,e,n){var r=n(0),i=r.JSON||(r.JSON={stringify:JSON.stringify});t.exports=function(t){return i.stringify.apply(i,arguments)}},function(t,e,n){t.exports={default:n(169),__esModule:!0}},function(t,e,n){n(72),n(33),n(37),n(170),t.exports=n(0).Promise},function(t,e,n){"use strict";var r,i,o,a=n(43),s=n(4),u=n(19),c=n(48),l=n(5),f=n(12),d=n(61),p=n(75),h=n(49),v=n(173),y=n(104).set,m=n(175)(),g=s.TypeError,_=s.process,b=s.Promise,_=s.process,w="process"==c(_),I=function(){},T=!!function(){try{var t=b.resolve(1),e=(t.constructor={})[n(3)("species")]=function(t){t(I,I)};return(w||"function"==typeof PromiseRejectionEvent)&&t.then(I)instanceof e}catch(t){}}(),E=function(t,e){return t===e||t===b&&e===o},x=function(t){var e;return!(!f(t)||"function"!=typeof(e=t.then))&&e},S=function(t){return E(b,t)?new k(t):new i(t)},k=i=function(t){var e,n;this.promise=new t(function(t,r){if(void 0!==e||void 0!==n)throw g("Bad Promise constructor");e=t,n=r}),this.resolve=d(e),this.reject=d(n)},A=function(t){try{t()}catch(t){return{error:t}}},O=function(t,e){if(!t._n){t._n=!0;var n=t._c;m(function(){for(var r=t._v,i=1==t._s,o=0;n.length>o;)!function(e){var n,o,a=i?e.ok:e.fail,s=e.resolve,u=e.reject,c=e.domain;try{a?(i||(2==t._h&&M(t),t._h=1),!0===a?n=r:(c&&c.enter(),n=a(r),c&&c.exit()),n===e.promise?u(g("Promise-chain cycle")):(o=x(n))?o.call(n,s,u):s(n)):u(r)}catch(t){u(t)}}(n[o++]);t._c=[],t._n=!1,e&&!t._h&&j(t)})}},j=function(t){y.call(s,function(){var e,n,r,i=t._v;if(C(t)&&(e=A(function(){w?_.emit("unhandledRejection",i,t):(n=s.onunhandledrejection)?n({promise:t,reason:i}):(r=s.console)&&r.error&&r.error("Unhandled promise rejection",i)}),t._h=w||C(t)?2:1),t._a=void 0,e)throw e.error})},C=function(t){if(1==t._h)return!1;for(var e,n=t._a||t._c,r=0;n.length>r;)if(e=n[r++],e.fail||!C(e.promise))return!1;return!0},M=function(t){y.call(s,function(){var e;w?_.emit("rejectionHandled",t):(e=s.onrejectionhandled)&&e({promise:t,reason:t._v})})},P=function(t){var e=this;e._d||(e._d=!0,e=e._w||e,e._v=t,e._s=2,e._a||(e._a=e._c.slice()),O(e,!0))},R=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw g("Promise can't be resolved itself");(e=x(t))?m(function(){var r={_w:n,_d:!1};try{e.call(t,u(R,r,1),u(P,r,1))}catch(t){P.call(r,t)}}):(n._v=t,n._s=1,O(n,!1))}catch(t){P.call({_w:n,_d:!1},t)}}};T||(b=function(t){p(this,b,"Promise","_h"),d(t),r.call(this);try{t(u(R,this,1),u(P,this,1))}catch(t){P.call(this,t)}},r=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=n(76)(b.prototype,{then:function(t,e){var n=S(v(this,b));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=w?_.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&O(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),k=function(){var t=new r;this.promise=t,this.resolve=u(R,t,1),this.reject=u(P,t,1)}),l(l.G+l.W+l.F*!T,{Promise:b}),n(35)(b,"Promise"),n(105)("Promise"),o=n(0).Promise,l(l.S+l.F*!T,"Promise",{reject:function(t){var e=S(this);return(0,e.reject)(t),e.promise}}),l(l.S+l.F*(a||!T),"Promise",{resolve:function(t){if(t instanceof b&&E(t.constructor,this))return t;var e=S(this);return(0,e.resolve)(t),e.promise}}),l(l.S+l.F*!(T&&n(176)(function(t){b.all(t).catch(I)})),"Promise",{all:function(t){var e=this,n=S(e),r=n.resolve,i=n.reject,o=A(function(){var n=[],o=0,a=1;h(t,!1,function(t){var s=o++,u=!1;n.push(void 0),a++,e.resolve(t).then(function(t){u||(u=!0,n[s]=t,--a||r(n))},i)}),--a||r(n)});return o&&i(o.error),n.promise},race:function(t){var e=this,n=S(e),r=n.reject,i=A(function(){h(t,!1,function(t){e.resolve(t).then(n.resolve,r)})});return i&&r(i.error),n.promise}})},function(t,e,n){var r=n(11);t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&r(o.call(t)),e}}},function(t,e,n){var r=n(26),i=n(3)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||o[i]===t)}},function(t,e,n){var r=n(11),i=n(61),o=n(3)("species");t.exports=function(t,e){var n,a=r(t).constructor;return void 0===a||void 0==(n=r(a)[o])?e:i(n)}},function(t,e){t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var r=n(4),i=n(104).set,o=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,u="process"==n(34)(a);t.exports=function(){var t,e,n,c=function(){var r,i;for(u&&(r=a.domain)&&r.exit();t;){i=t.fn,t=t.next;try{i()}catch(r){throw t?n():e=void 0,r}}e=void 0,r&&r.enter()};if(u)n=function(){a.nextTick(c)};else if(o){var l=!0,f=document.createTextNode("");new o(c).observe(f,{characterData:!0}),n=function(){f.data=l=!l}}else if(s&&s.resolve){var d=s.resolve();n=function(){d.then(c)}}else n=function(){i.call(r,c)};return function(r){var i={fn:r,next:void 0};e&&(e.next=i),t||(t=i,n()),e=i}}},function(t,e,n){var r=n(3)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!i)return!1;var n=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:n=!0}},o[r]=function(){return a},t(o)}catch(t){}return n}},function(t,e,n){n(178),t.exports=n(0).Object.assign},function(t,e,n){var r=n(5);r(r.S+r.F,"Object",{assign:n(179)})},function(t,e,n){"use strict";var r=n(22),i=n(71),o=n(38),a=n(36),s=n(64),u=Object.assign;t.exports=!u||n(20)(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=u({},t)[n]||Object.keys(u({},e)).join("")!=r})?function(t,e){for(var n=a(t),u=arguments.length,c=1,l=i.f,f=o.f;u>c;)for(var d,p=s(arguments[c++]),h=l?r(p).concat(l(p)):r(p),v=h.length,y=0;v>y;)f.call(p,d=h[y++])&&(n[d]=p[d]);return n}:u},function(t,e,n){(function(t,e){!function(t,n){"use strict";function r(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var r={callback:t,args:e};return c[u]=r,s(u),u++}function i(t){delete c[t]}function o(t){var e=t.callback,r=t.args;switch(r.length){case 0:e();break;case 1:e(r[0]);break;case 2:e(r[0],r[1]);break;case 3:e(r[0],r[1],r[2]);break;default:e.apply(n,r)}}function a(t){if(l)setTimeout(a,0,t);else{var e=c[t];if(e){l=!0;try{o(e)}finally{i(t),l=!1}}}}if(!t.setImmediate){var s,u=1,c={},l=!1,f=t.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(t);d=d&&d.setTimeout?d:t,"[object process]"==={}.toString.call(t.process)?function(){s=function(t){e.nextTick(function(){a(t)})}}():function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?function(){var e="setImmediate$"+Math.random()+"$",n=function(n){n.source===t&&"string"==typeof n.data&&0===n.data.indexOf(e)&&a(+n.data.slice(e.length))};t.addEventListener?t.addEventListener("message",n,!1):t.attachEvent("onmessage",n),s=function(n){t.postMessage(e+n,"*")}}():t.MessageChannel?function(){var t=new MessageChannel;t.port1.onmessage=function(t){a(t.data)},s=function(e){t.port2.postMessage(e)}}():f&&"onreadystatechange"in f.createElement("script")?function(){var t=f.documentElement;s=function(e){var n=f.createElement("script");n.onreadystatechange=function(){a(e),n.onreadystatechange=null,t.removeChild(n),n=null},t.appendChild(n)}}():function(){s=function(t){setTimeout(a,0,t)}}(),d.setImmediate=r,d.clearImmediate=i}}("undefined"==typeof self?void 0===t?this:t:self)}).call(e,n(18),n(78))},function(t,e,n){(function(e){var n;n="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},t.exports=n}).call(e,n(18))},function(t,e,n){"use strict";function r(t){var e=this.constructor;return this.then(function(n){return e.resolve(t()).then(function(){return n})},function(n){return e.resolve(t()).then(function(){return e.reject(n)})})}e.a=r},function(t,e,n){"use strict";(function(e){function r(){this._options({}),this.Integrations={},this._sourceMiddlewares=new l,this._integrationMiddlewares=new f,this._integrations={},this._readied=!1,this._timeout=300,this._user=D,this.log=_("analytics.js"),h(this);var t=this;this.on("initialize",function(e,n){n.initialPageview&&t.page(),t._parseQuery(window.location.search)})}var i=e.analytics,o=n(23).Alias,a=n(54),s=n(23),u=n(23).Group,c=n(23).Identify,l=n(115).SourceMiddlewareChain,f=n(115).IntegrationMiddlewareChain,d=n(23).Page,p=n(23).Track,h=n(25),v=n(28),y=n(193),m=n(55),g=n(200),_=n(6),b=n(29),w=n(7),I=n(82),T=n(205),E=n(52),x=n(207),S=n(39),k=n(121),A=n(57),O=n(208),j=n(211).bind,C=n(212),M=n(214),P=n(215),R=n(87),N=n(84),D=n(217),L=n(24);a(r.prototype),r.prototype.use=function(t){return t(this),this},r.prototype.addIntegration=function(t){var e=t.prototype.name;if(!e)throw new TypeError("attempted to add an invalid integration");return this.Integrations[e]=t,this},r.prototype.addSourceMiddleware=function(t){if(this.initialized)throw new Error("attempted to add a source middleware after initialization");return this._sourceMiddlewares.add(t),this},r.prototype.addIntegrationMiddleware=function(t){if(this.initialized)throw new Error("attempted to add an integration middleware after initialization");return this._integrationMiddlewares.add(t),this},r.prototype.init=r.prototype.initialize=function(t,e){t=t||{},e=e||{},this._options(e),this._readied=!1;var n=this;w(function(e,r){n.Integrations[r]||delete t[r]},t),w(function(t,r){if(!e.integrations||!1!==e.integrations[r]&&(!1!==e.integrations.All||e.integrations[r])){var i=n.Integrations[r],o={};y(!0,o,t);var a=new i(o);n.log("initialize %o - %o",r,t),n.add(a)}},t);var r=this._integrations;D.load(),T.load();var i=0,o=S(r).length,a=function(){++i>=o&&(n._readied=!0,n.emit("ready"))};o<=0&&a(),this.failedInitializations=[];var s=!1;return w(function(t){if(e.initialPageview&&!1===t.options.initialPageview){var r=t.page;t.page=function(){if(s)return r.apply(this,arguments);s=!0}}t.analytics=n,t.once("ready",a);try{g.increment("analytics_js.integration.invoke",{method:"initialize",integration_name:t.name}),t.initialize()}catch(e){var i=t.name;g.increment("analytics_js.integration.invoke.error",{method:"initialize",integration_name:t.name}),n.failedInitializations.push(i),n.log("Error initializing %s integration: %o",i,e),t.ready()}},r),this.initialized=!0,this.emit("initialize",t,e),this},r.prototype.setAnonymousId=function(t){return this.user().anonymousId(t),this},r.prototype.add=function(t){return this._integrations[t.name]=t,this},r.prototype.identify=function(t,e,n,r){E.fn(n)&&(r=n,n=null),E.fn(e)&&(r=e,n=null,e=null),E.object(t)&&(n=e,e=t,t=D.id()),D.identify(t,e);var i=this.normalize({options:n,traits:D.traits(),userId:D.id()});return this.options.integrations&&b(i.integrations,this.options.integrations),this._invoke("identify",new c(i)),this.emit("identify",t,e,n),this._callback(r),this},r.prototype.user=function(){return D},r.prototype.group=function(t,e,n,r){if(!arguments.length)return T;E.fn(n)&&(r=n,n=null),E.fn(e)&&(r=e,n=null,e=null),E.object(t)&&(n=e,e=t,t=T.id()),T.identify(t,e);var i=this.normalize({options:n,traits:T.traits(),groupId:T.id()});return this.options.integrations&&b(i.integrations,this.options.integrations),this._invoke("group",new u(i)),this.emit("group",t,e,n),this._callback(r),this},r.prototype.track=function(t,e,n,r){E.fn(n)&&(r=n,n=null),E.fn(e)&&(r=e,n=null,e=null);var i=this.options.plan||{},o=i.track||{},a={},s=this.normalize({properties:e,options:n,event:t});return(i=o[t])?(this.log("plan %o - %o",t,i),a=!1===i.enabled?{All:!1,"Segment.io":!0}:i.integrations||{}):(o.__default||{enabled:!0}).enabled||(a={All:!1,"Segment.io":!0}),b(s.integrations,this._mergeInitializeAndPlanIntegrations(a)),this._invoke("track",new p(s)),this.emit("track",t,e,n),this._callback(r),this},r.prototype.trackClick=r.prototype.trackLink=function(t,e,n){if(!t)return this;"element"===L(t)&&(t=[t]);var r=this;return w(function(t){if("element"!==L(t))throw new TypeError("Must pass HTMLElement to `analytics.trackLink`.");j(t,"click",function(i){var o=E.fn(e)?e(t):e,a=E.fn(n)?n(t):n,s=t.getAttribute("href")||t.getAttributeNS("http://www.w3.org/1999/xlink","href")||t.getAttribute("xlink:href");r.track(o,a),s&&"_blank"!==t.target&&!x(i)&&(P(i),r._callback(function(){window.location.href=s}))})},t),this},r.prototype.trackSubmit=r.prototype.trackForm=function(t,e,n){if(!t)return this;"element"===L(t)&&(t=[t]);var r=this;return w(function(t){function i(i){P(i);var o=E.fn(e)?e(t):e,a=E.fn(n)?n(t):n;r.track(o,a),r._callback(function(){t.submit()})}if("element"!==L(t))throw new TypeError("Must pass HTMLElement to `analytics.trackForm`.");var o=window.jQuery||window.Zepto;o?o(t).submit(i):j(t,"submit",i)},t),this},r.prototype.page=function(t,e,n,r,i){E.fn(r)&&(i=r,r=null),E.fn(n)&&(i=n,r=n=null),E.fn(e)&&(i=e,r=n=e=null),"object"===L(t)&&(r=e,n=t,e=t=null),"object"===L(e)&&(r=n,n=e,e=null),"string"===L(t)&&"string"!==L(e)&&(e=t,t=null),n=v(n)||{},e&&(n.name=e),t&&(n.category=t);var o=C();b(n,o);var a=M(S(o),n);E.empty(a)||(r=r||{},r.context=r.context||{},r.context.page=a);var s=this.normalize({properties:n,category:t,options:r,name:e});return this.options.integrations&&b(s.integrations,this.options.integrations),this._invoke("page",new d(s)),this.emit("page",t,e,n,r),this._callback(i),this},r.prototype.pageview=function(t){var e={};return t&&(e.path=t),this.page(e),this},r.prototype.alias=function(t,e,n,r){E.fn(n)&&(r=n,n=null),E.fn(e)&&(r=e,n=null,e=null),E.object(e)&&(n=e,e=null);var i=this.normalize({options:n,previousId:e,userId:t});return this.options.integrations&&b(i.integrations,this.options.integrations),this._invoke("alias",new o(i)),this.emit("alias",t,e,n),this._callback(r),this},r.prototype.ready=function(t){return E.fn(t)&&(this._readied?A(t):this.once("ready",t)),this},r.prototype.timeout=function(t){this._timeout=t},r.prototype.debug=function(t){!arguments.length||t?_.enable("analytics:"+(t||"*")):_.disable()},r.prototype._options=function(t){return t=t||{},this.options=t,m.options(t.cookie),g.options(t.metrics),N.options(t.localStorage),D.options(t.user),T.options(t.group),this},r.prototype._callback=function(t){return E.fn(t)&&(this._timeout?setTimeout(t,this._timeout):A(t)),this},r.prototype._invoke=function(t,e){function n(e){var n=r.failedInitializations||[];w(function(i,o){var a=y(!0,new s({}),e);if(a.enabled(o))if(n.indexOf(o)>=0)r.log("Skipping invocation of .%s method of %s integration. Integration failed to initialize properly.",t,o);else try{r._integrationMiddlewares.applyMiddlewares(a,i.name,function(e){if(null===e)return void r.log('Payload to integration "%s" was null and dropped by a middleware.',o);e instanceof s||(e=new s(e)),g.increment("analytics_js.integration.invoke",{method:t,integration_name:i.name}),i.invoke.call(i,t,e)})}catch(e){g.increment("analytics_js.integration.invoke.error",{method:t,integration_name:i.name}),r.log("Error invoking .%s method of %s integration: %o",t,o,e)}},r._integrations)}var r=this;try{this._sourceMiddlewares.applyMiddlewares(y(!0,new s({}),e),this._integrations,function(e){if(null===e)return void r.log('Payload with method "%s" was null and dropped by source a middleware.',t);e instanceof s||(e=new s(e)),r.emit("invoke",e),g.increment("analytics_js.invoke",{method:t}),n(e)})}catch(e){g.increment("analytics_js.invoke.error",{method:t}),r.log("Error invoking .%s method of %s integration: %o",t,name,e)}return this},r.prototype.push=function(t){var e=t.shift();this[e]&&this[e].apply(this,t)},r.prototype.reset=function(){this.user().logout(),this.group().logout()},r.prototype._parseQuery=function(t){function e(t,e){var n,r=t.length;return I(function(e,i,o){return o.substr(0,r)===t&&(n=o.substr(r),e[n]=i),e},{},e)}var n=R.parse(t),r=e("ajs_trait_",n),i=e("ajs_prop_",n);return n.ajs_uid&&this.identify(n.ajs_uid,r),n.ajs_event&&this.track(n.ajs_event,i),n.ajs_aid&&D.anonymousId(n.ajs_aid),this},r.prototype.normalize=function(t){return t=O(t,S(this._integrations)),t.anonymousId&&D.anonymousId(t.anonymousId),t.anonymousId=D.anonymousId(),t.context.page=b(t.context.page||{},C()),t},r.prototype._mergeInitializeAndPlanIntegrations=function(t){if(!this.options.integrations)return t;var e,n=y({},this.options.integrations);!1===t.All&&(n={All:!1});for(e in t)t.hasOwnProperty(e)&&!1!==this.options.integrations[e]&&(n[e]=t[e]);return n},r.prototype.noConflict=function(){return window.analytics=i,this},t.exports=r,t.exports.cookie=m,t.exports.memory=k,t.exports.store=N,t.exports.metrics=g}).call(e,n(18))},function(t,e,n){"use strict";var r=n(51);t.exports=function(t){function e(t,e){return function(){var n=this.traits(),i=this.properties?this.properties():{};return r(n,"address."+t)||r(n,t)||(e?r(n,"address."+e):null)||(e?r(n,e):null)||r(i,"address."+t)||r(i,t)||(e?r(i,"address."+e):null)||(e?r(i,e):null)}}t.zip=e("postalCode","zip"),t.country=e("country"),t.street=e("street"),t.state=e("state"),t.city=e("city"),t.region=e("region")}},function(t,e){var n=Object.prototype.toString;t.exports=function(t){switch(n.call(t)){case"[object Function]":return"function";case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array"}return null===t?"null":void 0===t?"undefined":t===Object(t)?"object":typeof t}},function(t,e,n){"use strict";var r={Salesforce:!0};t.exports=function(t){return!r[t]}},function(t,e,n){"use strict";var r=/\d{13}/;e.is=function(t){return r.test(t)},e.parse=function(t){return t=parseInt(t,10),new Date(t)}},function(t,e,n){"use strict";var r=/\d{10}/;e.is=function(t){return r.test(t)},e.parse=function(t){var e=1e3*parseInt(t,10);return new Date(e)}},function(t,e,n){function r(t){switch({}.toString.call(t)){case"[object Object]":return s(t);case"[object Function]":return t;case"[object String]":return a(t);case"[object RegExp]":return o(t);default:return i(t)}}function i(t){return function(e){return t===e}}function o(t){return function(e){return t.test(e)}}function a(t){return/^ *\W+/.test(t)?new Function("_","return _ "+t):new Function("_","return "+u(t))}function s(t){var e={};for(var n in t)e[n]="string"==typeof t[n]?i(t[n]):r(t[n]);return function(t){if("object"!=typeof t)return!1;for(var n in e){if(!(n in t))return!1;if(!e[n](t[n]))return!1}return!0}}function u(t){var e=l(t);if(!e.length)return"_."+t;var n,r,i;for(r=0;r<e.length;r++)i=e[r],n="_."+i,n="('function' == typeof "+n+" ? "+n+"() : "+n+")",t=c(i,t,n);return t}function c(t,e,n){return e.replace(new RegExp("(\\.)?"+t,"g"),function(t,e){return e?t:n})}var l;try{l=n(111)}catch(t){l=n(111)}t.exports=r},function(t,e,n){"use strict";function r(t,e){o.call(this,t,e)}var i=n(10).inherit,o=n(27);i(r,o),r.prototype.action=function(){return"alias"},r.prototype.type=r.prototype.action,r.prototype.previousId=function(){return this.field("previousId")||this.field("from")},r.prototype.from=r.prototype.previousId,r.prototype.userId=function(){return this.field("userId")||this.field("to")},r.prototype.to=r.prototype.userId,t.exports=r},function(t,e,n){"use strict";function r(t,e){s.call(this,t,e)}var i=n(10).inherit,o=n(53),a=n(80),s=n(27);i(r,s),r.prototype.action=function(){return"group"},r.prototype.type=r.prototype.action,r.prototype.groupId=s.field("groupId"),r.prototype.created=function(){var t=this.proxy("traits.createdAt")||this.proxy("traits.created")||this.proxy("properties.createdAt")||this.proxy("properties.created");if(t)return a(t)},r.prototype.email=function(){var t=this.proxy("traits.email");if(t)return t;var e=this.groupId();return o(e)?e:void 0},r.prototype.traits=function(t){var e=this.properties(),n=this.groupId();t=t||{},n&&(e.id=n);for(var r in t){var i=null==this[r]?this.proxy("traits."+r):this[r]();null!=i&&(e[t[r]]=i,delete e[r])}return e},r.prototype.name=s.proxy("traits.name"),r.prototype.industry=s.proxy("traits.industry"),r.prototype.employees=s.proxy("traits.employees"),r.prototype.properties=function(){return this.field("traits")||this.field("properties")||{}},t.exports=r},function(t,e,n){"use strict";function r(t,e){o.call(this,t,e)}var i=n(10).inherit,o=n(114),a=n(81);i(r,o),r.prototype.action=function(){return"screen"},r.prototype.type=r.prototype.action,r.prototype.event=function(t){return t?"Viewed "+t+" Screen":"Loaded a Screen"},r.prototype.track=function(t){var e=this.json();return e.event=this.event(t),e.timestamp=this.timestamp(),e.properties=this.properties(),new a(e,this.opts)},t.exports=r},function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty,i=Object.prototype.toString,o=Object.defineProperty,a=Object.getOwnPropertyDescriptor,s=function(t){return"function"==typeof Array.isArray?Array.isArray(t):"[object Array]"===i.call(t)},u=function(t){if(!t||"[object Object]"!==i.call(t))return!1;var e=r.call(t,"constructor"),n=t.constructor&&t.constructor.prototype&&r.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!e&&!n)return!1;var o;for(o in t);return void 0===o||r.call(t,o)},c=function(t,e){o&&"__proto__"===e.name?o(t,e.name,{enumerable:!0,configurable:!0,value:e.newValue,writable:!0}):t[e.name]=e.newValue},l=function(t,e){if("__proto__"===e){if(!r.call(t,e))return;if(a)return a(t,e).value}return t[e]};t.exports=function t(){var e,n,r,i,o,a,f=arguments[0],d=1,p=arguments.length,h=!1;for("boolean"==typeof f&&(h=f,f=arguments[1]||{},d=2),(null==f||"object"!=typeof f&&"function"!=typeof f)&&(f={});d<p;++d)if(null!=(e=arguments[d]))for(n in e)r=l(f,n),i=l(e,n),f!==i&&(h&&i&&(u(i)||(o=s(i)))?(o?(o=!1,a=r&&s(r)?r:[]):a=r&&u(r)?r:{},c(f,{name:n,newValue:t(h,a,i)})):void 0!==i&&c(f,{name:n,newValue:i}));return f}},function(t,e,n){function r(t){var n,r=0;for(n in t)r=(r<<5)-r+t.charCodeAt(n),r|=0;return e.colors[Math.abs(r)%e.colors.length]}function i(t){function n(){if(n.enabled){var t=n,r=+new Date,i=r-(c||r);t.diff=i,t.prev=c,t.curr=r,c=r;for(var o=new Array(arguments.length),a=0;a<o.length;a++)o[a]=arguments[a];o[0]=e.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var s=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,function(n,r){if("%%"===n)return n;s++;var i=e.formatters[r];if("function"==typeof i){var a=o[s];n=i.call(t,a),o.splice(s,1),s--}return n}),e.formatArgs.call(t,o),(n.log||e.log||console.log.bind(console)).apply(t,o)}}return n.namespace=t,n.enabled=e.enabled(t),n.useColors=e.useColors(),n.color=r(t),"function"==typeof e.init&&e.init(n),n}function o(t){e.save(t),e.names=[],e.skips=[];for(var n=("string"==typeof t?t:"").split(/[\s,]+/),r=n.length,i=0;i<r;i++)n[i]&&(t=n[i].replace(/\*/g,".*?"),"-"===t[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")))}function a(){e.enable("")}function s(t){var n,r;for(n=0,r=e.skips.length;n<r;n++)if(e.skips[n].test(t))return!1;for(n=0,r=e.names.length;n<r;n++)if(e.names[n].test(t))return!0;return!1}function u(t){return t instanceof Error?t.stack||t.message:t}e=t.exports=i.debug=i.default=i,e.coerce=u,e.disable=a,e.enable=o,e.enabled=s,e.humanize=n(195),e.names=[],e.skips=[],e.formatters={};var c},function(t,e){function n(t){if(t=String(t),!(t.length>100)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(e){var n=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*l;case"days":case"day":case"d":return n*c;case"hours":case"hour":case"hrs":case"hr":case"h":return n*u;case"minutes":case"minute":case"mins":case"min":case"m":return n*s;case"seconds":case"second":case"secs":case"sec":case"s":return n*a;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function r(t){return t>=c?Math.round(t/c)+"d":t>=u?Math.round(t/u)+"h":t>=s?Math.round(t/s)+"m":t>=a?Math.round(t/a)+"s":t+"ms"}function i(t){return o(t,c,"day")||o(t,u,"hour")||o(t,s,"minute")||o(t,a,"second")||t+" ms"}function o(t,e,n){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+n:Math.ceil(t/e)+" "+n+"s"}var a=1e3,s=60*a,u=60*s,c=24*u,l=365.25*c;t.exports=function(t,e){e=e||{};var o=typeof t;if("string"===o&&t.length>0)return n(t);if("number"===o&&!1===isNaN(t))return e.long?i(t):r(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},function(t,e,n){"use strict";var r=Math.max,i=function(t,e){var n=e?e.length:0;if(!n)return[];for(var i=r(Number(t)||0,0),o=r(n-i,0),a=new Array(o),s=0;s<o;s+=1)a[s]=e[s+i];return a};t.exports=i},function(t,e,n){"use strict";var r=Math.max,i=function(t){if(null==t||!t.length)return[];for(var e=new Array(r(t.length-2,0)),n=1;n<t.length;n+=1)e[n-1]=t[n];return e};t.exports=i},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){(function(e){t.exports=e}).call(e,{})},function(t,e,n){"use strict";function r(t){this.options(t)}var i=n(25),o=n(119),a=n(6)("analytics.js:metrics");r.prototype.options=function(t){if(t=t||{},this.host=t.host||"api.segment.io/v1",this.sampleRate=t.sampleRate||0,this.flushTimer=t.flushTimer||3e4,this.maxQueueSize=t.maxQueueSize||20,this.queue=[],this.sampleRate>0){var e=this;setInterval(function(){e._flush()},this.flushTimer)}},r.prototype.increment=function(t,e){Math.random()>this.sampleRate||this.queue.length>=this.maxQueueSize||(this.queue.push({type:"Counter",metric:t,value:1,tags:e}),t.indexOf("error")>0&&this._flush())},r.prototype._flush=function(){var t=this;if(!(t.queue.length<=0)){var e={series:this.queue},n={"Content-Type":"text/plain"};t.queue=[],"xhr"===o.type&&o("https://"+this.host+"/m",e,n,function(t,n){a("sent %O, received %O",e,[t,n])})}},t.exports=i(new r),t.exports.Metrics=r},function(t,e,n){function r(t){var e,n,r,a,s,u,c,l="",f=0;for(t=i(t);f<t.length;)e=t.charCodeAt(f++),n=t.charCodeAt(f++),r=t.charCodeAt(f++),a=e>>2,s=(3&e)<<4|n>>4,u=(15&n)<<2|r>>6,c=63&r,isNaN(n)?u=c=64:isNaN(r)&&(c=64),l=l+o.charAt(a)+o.charAt(s)+o.charAt(u)+o.charAt(c);return l}var i=n(202),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";t.exports=r},function(t,e){function n(t){t=t.replace(/\r\n/g,"\n");for(var e="",n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e+=String.fromCharCode(r):r>127&&r<2048?(e+=String.fromCharCode(r>>6|192),e+=String.fromCharCode(63&r|128)):(e+=String.fromCharCode(r>>12|224),e+=String.fromCharCode(r>>6&63|128),e+=String.fromCharCode(63&r|128))}return e}t.exports=n},function(t,e){try{t.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){t.exports=!1}},function(t,e,n){function r(){}function i(t,e,n){function i(){u.parentNode&&u.parentNode.removeChild(u),window[f]=r,c&&clearTimeout(c)}function s(){window[f]&&i()}"function"==typeof e&&(n=e,e={}),e||(e={});var u,c,l=e.prefix||"__jp",f=e.name||l+a++,d=e.param||"callback",p=null!=e.timeout?e.timeout:6e4,h=encodeURIComponent,v=document.getElementsByTagName("script")[0]||document.head;return p&&(c=setTimeout(function(){i(),n&&n(new Error("Timeout"))},p)),window[f]=function(t){o("jsonp got",t),i(),n&&n(null,t)},t+=(~t.indexOf("?")?"&":"?")+d+"="+h(f),t=t.replace("?&","?"),o('jsonp req "%s"',t),u=document.createElement("script"),u.src=t,v.parentNode.insertBefore(u,v),s}var o=n(6)("jsonp");t.exports=i;var a=0},function(t,e,n){"use strict";function r(t){this.defaults=r.defaults,this.debug=a,i.call(this,t)}var i=n(120),o=n(25),a=n(6)("analytics:group"),s=n(79);r.defaults={persist:!0,cookie:{key:"ajs_group_id"},localStorage:{key:"ajs_group_properties"}},s(r,i),t.exports=o(new r),t.exports.Group=r},function(t,e,n){"use strict";(function(e){var r=n(30);t.exports=function(){var t,n={},i="undefined"!=typeof window?window:e,o=i.document;if(n.disabled=!1,n.version="1.3.20",n.set=function(t,e){},n.get=function(t,e){},n.has=function(t){return void 0!==n.get(t)},n.remove=function(t){},n.clear=function(){},n.transact=function(t,e,r){null==r&&(r=e,e=null),null==e&&(e={});var i=n.get(t,e);r(i),n.set(t,i)},n.getAll=function(){var t={};return n.forEach(function(e,n){t[e]=n}),t},n.forEach=function(){},n.serialize=function(t){return r.stringify(t)},n.deserialize=function(t){if("string"==typeof t)try{return r.parse(t)}catch(e){return t||void 0}},function(){try{return"localStorage"in i&&i.localStorage}catch(t){return!1}}())t=i.localStorage,n.set=function(e,r){return void 0===r?n.remove(e):(t.setItem(e,n.serialize(r)),r)},n.get=function(e,r){var i=n.deserialize(t.getItem(e));return void 0===i?r:i},n.remove=function(e){t.removeItem(e)},n.clear=function(){t.clear()},n.forEach=function(e){for(var r=0;r<t.length;r++){var i=t.key(r);e(i,n.get(i))}};else if(o&&o.documentElement.addBehavior){var a,s;try{s=new ActiveXObject("htmlfile"),s.open(),s.write('<script>document.w=window<\/script><iframe src="/favicon.ico"></iframe>'),s.close(),a=s.w.frames[0].document,t=a.createElement("div")}catch(e){t=o.createElement("div"),a=o.body}var u=function(e){return function(){var r=Array.prototype.slice.call(arguments,0);r.unshift(t),a.appendChild(t),t.addBehavior("#default#userData"),t.load("localStorage");var i=e.apply(n,r);return a.removeChild(t),i}},c=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g"),l=function(t){return t.replace(/^d/,"___$&").replace(c,"___")};n.set=u(function(t,e,r){return e=l(e),void 0===r?n.remove(e):(t.setAttribute(e,n.serialize(r)),t.save("localStorage"),r)}),n.get=u(function(t,e,r){e=l(e);var i=n.deserialize(t.getAttribute(e));return void 0===i?r:i}),n.remove=u(function(t,e){e=l(e),t.removeAttribute(e),t.save("localStorage")}),n.clear=u(function(t){var e=t.XMLDocument.documentElement.attributes;t.load("localStorage");for(var n=e.length-1;n>=0;n--)t.removeAttribute(e[n].name);t.save("localStorage")}),n.forEach=u(function(t,e){for(var r,i=t.XMLDocument.documentElement.attributes,o=0;r=i[o];++o)e(r.name,n.deserialize(t.getAttribute(r.name)))})}try{var f="__storejs__";n.set(f,f),n.get(f)!=f&&(n.disabled=!0),n.remove(f)}catch(t){n.disabled=!0}return n.enabled=!n.disabled,n}()}).call(e,n(18))},function(t,e,n){"use strict";function r(t){if(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)return!0;var e=t.which,n=t.button;return e||void 0===n?2===e:1&!n&&2&!n&&4&n}t.exports=r},function(t,e,n){"use strict";function r(t,e){function n(t){return!(!s(t,e)&&"all"!==t.toLowerCase()&&!s(t.toLowerCase(),r))}var r=u(function(t){return t.toLowerCase()},e),v=t.options||{},y=v.integrations||{},m=v.providers||{},g=v.context||{},_={};return i("<-",t),a(function(t,e){n(e)&&(p.call(y,e)||(y[e]=t),delete v[e])},v),delete v.providers,a(function(t,e){n(e)&&"object"!==c(y[e])&&(p.call(y,e)&&"boolean"==typeof m[e]||(y[e]=t))},m),a(function(t,e){s(e,h)?_[e]=v[e]:g[e]=v[e]},v),t.messageId="ajs-"+d(f.stringify(t)+l()),delete t.options,_.integrations=y,_.context=g,_=o(_,t),i("->",_),_}var i=n(6)("analytics.js:normalize"),o=n(29),a=n(7),s=n(85),u=n(209),c=n(24),l=n(86).v4,f=n(30),d=n(122).hash,p=Object.prototype.hasOwnProperty;t.exports=r;var h=["integrations","anonymousId","timestamp","context"]},function(t,e,n){"use strict";var r=n(7),i=function(t,e){if("function"!=typeof t)throw new TypeError("Expected a function but received a "+typeof t);var n=[];return r(function(e,r,i){n.push(t(e,r,i))},e),n};t.exports=i},function(t,e,n){(function(e){var n,r=e.crypto||e.msCrypto;if(r&&r.getRandomValues){var i=new Uint8Array(16);n=function(){return r.getRandomValues(i),i}}if(!n){var o=new Array(16);n=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),o[e]=t>>>((3&e)<<3)&255;return o}}t.exports=n}).call(e,n(18))},function(t,e){var n=window.addEventListener?"addEventListener":"attachEvent",r=window.removeEventListener?"removeEventListener":"detachEvent",i="addEventListener"!==n?"on":"";e.bind=function(t,e,r,o){return t[n](i+e,r,o||!1),r},e.unbind=function(t,e,n,o){return t[r](i+e,n,o||!1),n}},function(t,e,n){"use strict";function r(){return{path:i(),referrer:document.referrer,search:location.search,title:document.title,url:o(location.search)}}function i(){var t=a();return t?u.parse(t).pathname:window.location.pathname}function o(t){var e=a();if(e)return s("?",e)?e:e+t;var n=window.location.href,r=n.indexOf("#");return-1===r?n:n.slice(0,r)}var a=n(213),s=n(85),u=n(118);t.exports=r},function(t,e,n){"use strict";function r(){for(var t,e=document.getElementsByTagName("link"),n=0;t=e[n];n++)if("canonical"===t.getAttribute("rel"))return t.getAttribute("href")}t.exports=r},function(t,e,n){"use strict";var r=Object.prototype.toString,i=function(t){return null!=t},o=function(t){return"[object Array]"===r.call(t)},a=function(t){return"string"==typeof t||"[object String]"===r.call(t)},s=function(t){return null!=t&&"object"==typeof t},u=function(t,e){if(!i(e)||!s(e))return{};a(t)&&(t=[t]),o(t)||(t=[]);for(var n={},r=0;r<t.length;r+=1)a(t[r])&&t[r]in e&&(n[t[r]]=e[t[r]]);return n};t.exports=u},function(t,e,n){"use strict";function r(t){return t=t||window.event,t.preventDefault?t.preventDefault():t.returnValue=!1}t.exports=r},function(t,e){var n=Object.prototype.toString;t.exports=function(t){switch(n.call(t)){case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object Error]":return"error"}return null===t?"null":void 0===t?"undefined":t!==t?"nan":t&&1===t.nodeType?"element":typeof(t=t.valueOf?t.valueOf():Object.prototype.valueOf.apply(t))}},function(t,e,n){"use strict";function r(t){this.defaults=r.defaults,this.debug=s,i.call(this,t)}var i=n(120),o=n(25),a=n(55),s=n(6)("analytics:user"),u=n(79),c=n(56),l=n(86),f=n(84);r.defaults={persist:!0,cookie:{key:"ajs_user_id",oldKey:"ajs_user"},localStorage:{key:"ajs_user_traits"}},u(r,i),r.prototype.id=function(t){var e=this._getId(),n=i.prototype.id.apply(this,arguments);return null==e?n:(e!=t&&t&&this.anonymousId(null),n)},r.prototype.anonymousId=function(t){var e=this.storage();return arguments.length?(e.set("ajs_anonymous_id",t),this._setAnonymousIdInLocalStorage(t),this):(t=e.get("ajs_anonymous_id"))?(this._setAnonymousIdInLocalStorage(t),e.set("ajs_anonymous_id",t),t):!this._options.localStorageFallbackDisabled&&(t=f.get("ajs_anonymous_id"))?(e.set("ajs_anonymous_id",t),t):(t=c("_sio"))?(t=t.split("----")[0],e.set("ajs_anonymous_id",t),this._setAnonymousIdInLocalStorage(t),e.remove("_sio"),t):(t=l.v4(),e.set("ajs_anonymous_id",t),this._setAnonymousIdInLocalStorage(t),e.get("ajs_anonymous_id"))},r.prototype._setAnonymousIdInLocalStorage=function(t){this._options.localStorageFallbackDisabled||f.set("ajs_anonymous_id",t)},r.prototype.logout=function(){i.prototype.logout.call(this),this.anonymousId(null)},r.prototype.load=function(){this._loadOldCookie()||i.prototype.load.call(this)},r.prototype._loadOldCookie=function(){var t=a.get(this._options.cookie.oldKey);return!!t&&(this.id(t.id),this.traits(t.traits),a.remove(this._options.cookie.oldKey),!0)},t.exports=o(new r),t.exports.User=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(31),i=r.__importDefault(n(77)),o=n(123),a=n(223),s=n(250),u=n(251),c=n(40);e.defaultTimeout=5e3;var l=3e4,f=1e4,d=2e3,p=function(){function t(t,n){if(void 0===t&&(t="local"),void 0===n&&(n=e.defaultTimeout),this.storageEnabled=!0,this.timeoutUid={type:c.XIDItemType.UID,state:"TIMEOUT"},!t)throw new Error("Missing env configuration");this.env=t;var r="prod"===this.env?f:l;n>=d&&n<=r?this.timeout=n:("prod"!==this.env&&console.log("timeout configuration must be in the range of ["+d+", "+r+"] seconds"),this.timeout=e.defaultTimeout)}return t.prototype.getTimeoutPromise=function(t){var e=this;return new i.default(function(n){setTimeout(function(){n([t])},(e.timeout-1e3)/2)})},t.prototype.getXcPromiseAndSave=function(){var t=this;return new i.default(function(e){t.getXc().then(function(n){t.storageEnabled&&o.Storage.saveXid([n]),e([n])})})},t.prototype.getUidPromiseAndSave=function(){var t=this;return new i.default(function(e){var n=function(){var n=[];t.storageEnabled&&(n=o.Storage.getUids());var r=a.UIDGenerator.getValue(n);t.storageEnabled&&(o.Storage.saveUids(r),o.Storage.saveXid(r)),e(r)},r=window.requestIdleCallback;r?r(n):setTimeout(n,1e3)})},t.prototype.getXidPromiseInXcUidOnly=function(){var t=this;return this.getXcPromiseAndSave().then(function(e){return e&&e.length>0&&e[0].createdAt&&e[0].value?e:(t.getTimeoutPromise(t.timeoutUid),t.getUidPromiseAndSave().then(function(t){return r.__spreadArrays(t,e)}))})},t.prototype.getXidCallbackForPromise=function(t,e){void 0===t&&(t=c.XIDGenerateMode.CACHE_XC_UID),void 0===e&&(e=!0);var n,r=function(t){return n||(n=t.map(function(t){return"NEW"===t.state||"CHANGED"===t.state?{state:"EXISTING",type:t.type,createdAt:t.createdAt,value:t.value}:t}),t)};return this.getXidPromise(t,e).then(function(t){return function(){return r(t)}})},t.prototype.getXidPromise=function(t,e){var n=this;void 0===t&&(t=c.XIDGenerateMode.CACHE_XC_UID),void 0===e&&(e=!0),this.storageEnabled=e;var r=t===c.XIDGenerateMode.CACHE_ONLY||t===c.XIDGenerateMode.CACHE_XC_UID?o.Storage.getCachedXID():[];switch(t){case c.XIDGenerateMode.XC_ONLY:return u.promiseWithTimer(function(){return n.getXcPromiseAndSave()});case c.XIDGenerateMode.UID_ONLY:return u.promiseWithTimer(function(){return i.default.race([n.getTimeoutPromise(n.timeoutUid),n.getUidPromiseAndSave()])});case c.XIDGenerateMode.XC_UID:return u.promiseWithTimer(function(){return n.getXidPromiseInXcUidOnly()});case c.XIDGenerateMode.CACHE_ONLY:return i.default.resolve(r);case c.XIDGenerateMode.CACHE_XC_UID:default:return r.length>0?i.default.resolve(r):u.promiseWithTimer(function(){return n.getXidPromiseInXcUidOnly()})}},t.prototype.getXc=function(){return s.XCGenerator.getValue(this.env,(this.timeout-1e3)/2,this.storageEnabled)},t.prototype.getUidDetails=function(){return a.UIDGenerator.getDetails()},t}();e.XID=p},function(t,e,n){"use strict";function r(t){try{return localStorage.getItem(t)||""}catch(t){}}function i(t){var e=c.getCookie(t);return f(e)}function o(t){var e="";try{e=localStorage.getItem(t)||""}catch(t){}return f(e)}function a(t,e){try{localStorage.setItem(t,e)}catch(t){}}function s(t){return c.getCookie(t)||r(t)}function u(t){return i(t)||o(t)}Object.defineProperty(e,"__esModule",{value:!0});var c=n(89),l=n(220),f=function(t){try{var e=JSON.parse(t);if(e instanceof Array){for(var n=!0,r=0,i=e;r<i.length;r++){var o=i[r];n=n&&l.checkXidValid(o)}return n?e:void 0}return l.checkXidValid(e)?e:void 0}catch(t){return}};e.getXidFromCookie=i,e.getXidFromLocalStorage=o,e.setLocalstorage=a,e.getCache=s,e.getXidItemFromCache=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(40);e.checkXidValid=function(t){return!(t.type!==r.XIDItemType.UID&&t.type!==r.XIDItemType.XC||!t.value||!Date.parse(t.createdAt))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parse=function(t){var n=document.createElement("a");return n.href=t,{href:n.href,host:n.host||location.host,port:"0"===n.port||""===n.port?e.port(n.protocol):n.port,hash:n.hash,hostname:n.hostname||location.hostname,pathname:"/"!==n.pathname.charAt(0)?"/"+n.pathname:n.pathname,protocol:n.protocol&&":"!==n.protocol?n.protocol:location.protocol,search:n.search,query:n.search.slice(1)}},e.isAbsolute=function(t){return 0===t.indexOf("//")||!!~t.indexOf("://")},e.isRelative=function(t){return!e.isAbsolute(t)},e.isCrossDomain=function(t){var n=e.parse(t),r=e.parse(window.location.href);return n.hostname!==r.hostname||n.port!==r.port||n.protocol!==r.protocol},e.port=function(t){switch(t){case"http:":return 80;case"https:":return 443;default:return location.port}},e.getParam=function(t){var e=window.location.href.match("[?&]"+t+"=([^&#]+)");return e?e.pop():""}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.uuidv4=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(31),i=n(224),o=n(241),a=n(1),s=n(243),u=n(246),c=n(88),l=n(249),f=function(){function t(){}return t.getDetails=function(){try{return{browser:{browserDefaultEvalLength:i.browserDefaultEvalLength(),canWriteCookie:i.canWriteCookie(),getBrowserVendor:i.getBrowserVendor(),getHardwareConcurrency:i.getHardwareConcurrency(),getLanguage:i.getLanguage(),getPlatform:i.getPlatform(),getPlugins:i.getPlugins(),getProductSub:i.getProductSub(),getTimeZone:i.getTimeZone(),getTimeZoneOffset:i.getTimeZoneOffset(),getUserAgent:i.getUserAgent(),isIndexedDBAvailable:i.isIndexedDBAvailable(),isLocalStorageAvailable:i.isLocalStorageAvailable(),isSessionStorageAvailable:i.isSessionStorageAvailable(),isTestingBot:i.isTestingBot(),isWebDriver:i.isWebDriver()},canvas:{studyPrint:o.studyPrint()},font:{jsFonts:(new s.DetectFonts).detect()},webGL:{getWebGL:u.getWebGL()}}}catch(t){return a.ERROR}},t.getValue=function(t){try{var e=[i.browserDefaultEvalLength(),i.canWriteCookie(),i.getBrowserVendor(),i.getHardwareConcurrency(),i.getLanguage(),i.getPlatform(),i.getPlugins(),i.getProductSub(),i.getTimeZone(),i.getTimeZoneOffset(),i.getUserAgent(),i.isIndexedDBAvailable(),i.isLocalStorageAvailable(),i.isSessionStorageAvailable(),i.isTestingBot(),i.isWebDriver(),o.studyPrint(),(new s.DetectFonts).result(),u.getWebGL()],n=l.x64hash128(e.join("|"),64),a=void 0;return a=t.length?t[0].value===n?"EXISTING":"CHANGED":"NEW","EXISTING"===a?t:r.__spreadArrays([{type:c.XIDItemType.UID,createdAt:(new Date).toISOString(),state:a,value:n}],t)}catch(t){return[{type:c.XIDItemType.UID,state:"ERROR"}]}},t}();e.UIDGenerator=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(225);e.browserDefaultEvalLength=r.browserDefaultEvalLength;var i=n(226);e.canWriteCookie=i.canWriteCookie;var o=n(227);e.getBrowserVendor=o.getBrowserVendor;var a=n(228);e.getHardwareConcurrency=a.getHardwareConcurrency;var s=n(229);e.getLanguage=s.getLanguage;var u=n(230);e.getPlatform=u.getPlatform;var c=n(231);e.getPlugins=c.getPlugins;var l=n(232);e.getProductSub=l.getProductSub;var f=n(233);e.getTimeZone=f.getTimeZone;var d=n(234);e.getTimeZoneOffset=d.getTimeZoneOffset;var p=n(235);e.getUserAgent=p.getUserAgent;var h=n(236);e.isIndexedDBAvailable=h.isIndexedDBAvailable;var v=n(237);e.isLocalStorageAvailable=v.isLocalStorageAvailable;var y=n(238);e.isSessionStorageAvailable=y.isSessionStorageAvailable;var m=n(239);e.isTestingBot=m.isTestingBot;var g=n(240);e.isWebDriver=g.isWebDriver},function(t,e,n){"use strict";function r(){try{return eval.toString().length||0}catch(t){return i.ERROR}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(1);e.browserDefaultEvalLength=r},function(t,e,n){"use strict";function r(){try{return document.cookie="cookietest=1",-1!==document.cookie.indexOf("cookietest=")?(document.cookie="cookietest=1; expires=Thu, 01-Jan-1970 00:00:01 GMT",i.YES):i.NO}catch(t){return i.ERROR}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(1);e.canWriteCookie=r},function(t,e,n){"use strict";function r(){try{return navigator.vendor||i.UNAVAILABLE}catch(t){return i.ERROR}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(1);e.getBrowserVendor=r},function(t,e,n){"use strict";function r(){try{var t=parseInt(navigator.hardwareConcurrency.toString(),10);return isNaN(t)?1:t}catch(t){return 1}}Object.defineProperty(e,"__esModule",{value:!0}),e.getHardwareConcurrency=r},function(t,e,n){"use strict";function r(){try{return navigator.language||i.UNAVAILABLE}catch(t){return i.ERROR}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(1);e.getLanguage=r},function(t,e,n){"use strict";function r(){try{return navigator.platform||i.UNAVAILABLE}catch(t){return i.ERROR}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(1);e.getPlatform=r},function(t,e,n){"use strict";function r(){try{var t="Microsoft Internet Explorer"===navigator.appName,e="Netscape"===navigator.appName,n=/Trident/.test(navigator.userAgent);if(t||e&&n)return i.UNAVAILABLE;for(var r=navigator.plugins,o="",a=0;a<r.length;a++)for(var s=navigator.plugins[a],u=s.name,c=s.filename,l=s.length,f=0;f<l;f++){var d=s[f];d&&(o=o+u+","+c+","+d.type+"|")}return o}catch(t){return i.ERROR}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(1);e.getPlugins=r},function(t,e,n){"use strict";function r(){try{return navigator.productSub||i.UNAVAILABLE}catch(t){return i.ERROR}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(1);e.getProductSub=r},function(t,e,n){"use strict";function r(){try{return window.Intl&&window.Intl.DateTimeFormat?(new window.Intl.DateTimeFormat).resolvedOptions().timeZone:i.UNAVAILABLE}catch(t){return i.ERROR}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(1);e.getTimeZone=r},function(t,e,n){"use strict";function r(){try{return(new Date).getTimezoneOffset()||i.UNAVAILABLE}catch(t){return i.ERROR}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(1);e.getTimeZoneOffset=r},function(t,e,n){"use strict";function r(){try{return navigator.userAgent||i.UNAVAILABLE}catch(t){return i.ERROR}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(1);e.getUserAgent=r},function(t,e,n){"use strict";function r(){try{return window.indexedDB?i.YES:i.NO}catch(t){return i.ERROR}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(1);e.isIndexedDBAvailable=r},function(t,e,n){"use strict";function r(){try{return window.localStorage?i.YES:i.NO}catch(t){return i.ERROR}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(1);e.isLocalStorageAvailable=r},function(t,e,n){"use strict";function r(){try{return window.sessionStorage?i.YES:i.NO}catch(t){return i.ERROR}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(1);e.isSessionStorageAvailable=r},function(t,e,n){"use strict";function r(){try{return["webdriver"in window,"_Selenium_IDE_Recorder"in window,"callSelenium"in window,"_selenium"in window,"__webdriver_script_fn"in document,"__driver_evaluate"in document,"__webdriver_evaluate"in document,"__selenium_evaluate"in document,"__fxdriver_evaluate"in document,"__driver_unwrapped"in document,"__webdriver_unwrapped"in document,"__selenium_unwrapped"in document,"__fxdriver_unwrapped"in document,"__webdriver_script_func"in document,null!==document.documentElement.getAttribute("selenium"),null!==document.documentElement.getAttribute("webdriver"),null!==document.documentElement.getAttribute("driver")].some(function(t){return!0===t})?i.YES:i.NO}catch(t){return i.ERROR}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(1);e.isTestingBot=r},function(t,e,n){"use strict";function r(){try{return navigator.webdriver?i.YES:i.NO}catch(t){return i.ERROR}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(1);e.isWebDriver=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(242);e.studyPrint=r.studyPrint},function(t,e,n){"use strict";function r(){try{var t=document.createElement("canvas");t.width=240,t.height=140,t.style.display="inline";var e=t.getContext("2d");return e?(e.rect(0,0,10,10),e.rect(2,2,6,6),e.isPointInPath(5,5,"evenodd"),e.textBaseline="alphabetic",e.fillStyle="#f60",e.fillRect(125,1,62,20),e.fillStyle="#069",e.font="11pt no-real-font-123",e.fillText("Cwm fjordbank  gly",2,15),e.fillStyle="rgba(102, 204, 0, 0.2)",e.font="18pt Arial",e.fillText("Cwm fjordbank  gly",4,45),e.globalCompositeOperation="multiply",e.fillStyle="rgb(255,0,255)",e.beginPath(),e.arc(50,50,50,0,2*Math.PI,!0),e.closePath(),e.fill(),e.fillStyle="rgb(0,255,255)",e.beginPath(),e.arc(100,50,50,0,2*Math.PI,!0),e.closePath(),e.fill(),e.fillStyle="rgb(255,255,0)",e.beginPath(),e.arc(75,100,50,0,2*Math.PI,!0),e.closePath(),e.fill(),e.fillStyle="rgb(255,0,255)",e.arc(75,75,75,0,2*Math.PI,!0),e.arc(75,75,25,0,2*Math.PI,!0),e.fill("evenodd"),t.toDataURL()):i.UNAVAILABLE}catch(t){return i.ERROR}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(1);e.studyPrint=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(244);e.DetectFonts=r.DetectFonts},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1),i=n(245),o=function(){function t(){var t=this;this.baseFonts=["monospace","sans-serif","serif"],this.testString="mmmmmmmmmmlli",this.testSize="72px",this.defaultWidth={},this.defaultHeight={},this.createSpan=function(){var e=document.createElement("span");return e.style.position="absolute",e.style.left="-9999px",e.style.fontSize=t.testSize,e.style.fontStyle="normal",e.style.fontWeight="normal",e.style.letterSpacing="normal",e.style.lineBreak="auto",e.style.lineHeight="normal",e.style.textTransform="none",e.style.textAlign="left",e.style.textDecoration="none",e.style.textShadow="none",e.style.whiteSpace="normal",e.style.wordBreak="normal",e.style.wordSpacing="normal",e.innerHTML=t.testString,e},this.createSpanWithFonts=function(e,n){var r=t.createSpan();return r.style.fontFamily="'"+e+"',"+n,r},this.initializeBaseFontsSpans=function(){for(var e=[],n=0,r=t.baseFonts;n<r.length;n++){var i=r[n],o=t.createSpan();o.style.fontFamily=i,t.baseFontsDiv.appendChild(o),e.push(o)}return e},this.initializeFontsSpans=function(){for(var e={},n=0,r=i.fontsToCheck;n<r.length;n++){for(var o=r[n],a=[],s=0,u=t.baseFonts;s<u.length;s++){var c=u[s],l=t.createSpanWithFonts(o,c);t.fontsDiv.appendChild(l),a.push(l)}e[o]=a}return e},this.isFontAvailable=function(e){for(var n=!1,r=0;r<t.baseFonts.length;r++){var i=e[r].offsetWidth,o=t.defaultWidth[t.baseFonts[r]],a=e[r].offsetHeight,s=t.defaultHeight[t.baseFonts[r]];if(n=i!==o||a!==s)return n}return n},this.bodyElement=document.getElementsByTagName("body")[0],this.baseFontsDiv=document.createElement("div"),this.fontsDiv=document.createElement("div")}return t.prototype.detect=function(){var t=this.initializeBaseFontsSpans();this.bodyElement.appendChild(this.baseFontsDiv);for(var e=0;e<this.baseFonts.length;e++)this.defaultWidth[this.baseFonts[e]]=t[e].offsetWidth,this.defaultHeight[this.baseFonts[e]]=t[e].offsetHeight;var n=this.initializeFontsSpans();this.bodyElement.appendChild(this.fontsDiv);for(var r=[],o=0,a=i.fontsToCheck;o<a.length;o++){var s=a[o],u=0;this.isFontAvailable(n[s])&&(u=1),r.push(u)}return this.bodyElement.removeChild(this.fontsDiv),this.bodyElement.removeChild(this.baseFontsDiv),r.join("|")},t.prototype.result=function(){try{return this.detect()}catch(t){return r.ERROR}},t}();e.DetectFonts=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.fontsToCheck=["Adobe Garamond","Adobe Hebrew","Agency FB","Airstream","Andale Mono","Aparajita","Arial","BN Manson Nights","Baskerville","BlackChancery","Book Antiqua","Bookman Old Style","CG Times","Calibri","Cambria","Cambria Math","Century","Century Gothic","Century Schoolbook","Chalkboard","Comic Sans","Comic Sans MS","Consolas","Cooper Black","Corbel","Courier","Courier New","Curlz MT","DS Sans Serif","Degrassi","Didot","Ebrima","GOST Common","Geneva","Georgia","Gulim","Heiti TC","Helvetica","Helvetica Neue","Hoefler Text","Impact","Kalinga","Letter Gothic","Lithos Pro","Lucida Bright","Lucida Calligraphy","Lucida Console","Lucida Fax","Lucida Handwriting","Lucida Sans","MS Gothic","MS Outlook","MS PGothic","MYRIAD","Malgun Gothic","Mangal","MapInfo Miscellaneous","Meiryo UI","Monaco","Monotype Corsiva","NSimSun","OSAKA","Palatino","Pickwick","Playbill","Pristina","Segoe Print","Segoe Script","Segoe UI","Shonar Bangla","Snell Roundhand","Styllo","Tahoma","Times","Times New Roman","Trebuchet MS","Verdana","Wingdings"]},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(247);e.getWebGL=r.getWebGL},function(t,e,n){"use strict";function r(){try{var t=o.getContext();if(void 0===t)return i.UNAVAILABLE;if(t&&"object"==typeof t&&t.context){var e=t.context,n=e.getExtension("WEBGL_debug_renderer_info");return null!==n?[e.getParameter(n.UNMASKED_RENDERER_WEBGL),e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS),e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE)].join("|"):i.UNAVAILABLE}}catch(t){return i.ERROR}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=n(248);e.getWebGL=r},function(t,e,n){"use strict";function r(){if(window.WebGLRenderingContext)for(var t=document.createElement("canvas"),e=["webgl","experimental-webgl","moz-webgl","webkit-3d"],n=0,r=e;n<r.length;n++){var o=r[n];try{var a=t.getContext(o);if(a&&a instanceof WebGLRenderingContext&&"function"==typeof a.getParameter)return{name:o,context:a}}catch(t){return i.ERROR}}return i.UNAVAILABLE}Object.defineProperty(e,"__esModule",{value:!0});var i=n(1);e.getContext=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t,e){t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]],e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]];var n=[0,0,0,0];return n[3]+=t[3]+e[3],n[2]+=n[3]>>>16,n[3]&=65535,n[2]+=t[2]+e[2],n[1]+=n[2]>>>16,n[2]&=65535,n[1]+=t[1]+e[1],n[0]+=n[1]>>>16,n[1]&=65535,n[0]+=t[0]+e[0],n[0]&=65535,[n[0]<<16|n[1],n[2]<<16|n[3]]},i=function(t,e){t=[t[0]>>>16,65535&t[0],t[1]>>>16,65535&t[1]],e=[e[0]>>>16,65535&e[0],e[1]>>>16,65535&e[1]];var n=[0,0,0,0];return n[3]+=t[3]*e[3],n[2]+=n[3]>>>16,n[3]&=65535,n[2]+=t[2]*e[3],n[1]+=n[2]>>>16,n[2]&=65535,n[2]+=t[3]*e[2],n[1]+=n[2]>>>16,n[2]&=65535,n[1]+=t[1]*e[3],n[0]+=n[1]>>>16,n[1]&=65535,n[1]+=t[2]*e[2],n[0]+=n[1]>>>16,n[1]&=65535,n[1]+=t[3]*e[1],n[0]+=n[1]>>>16,n[1]&=65535,n[0]+=t[0]*e[3]+t[1]*e[2]+t[2]*e[1]+t[3]*e[0],n[0]&=65535,[n[0]<<16|n[1],n[2]<<16|n[3]]},o=function(t,e){return e%=64,32===e?[t[1],t[0]]:e<32?[t[0]<<e|t[1]>>>32-e,t[1]<<e|t[0]>>>32-e]:(e-=32,[t[1]<<e|t[0]>>>32-e,t[0]<<e|t[1]>>>32-e])},a=function(t,e){return e%=64,0===e?t:e<32?[t[0]<<e|t[1]>>>32-e,t[1]<<e]:[t[1]<<e-32,0]},s=function(t,e){return[t[0]^e[0],t[1]^e[1]]},u=function(t){return t=s(t,[0,t[0]>>>1]),t=i(t,[4283543511,3981806797]),t=s(t,[0,t[0]>>>1]),t=i(t,[3301882366,444984403]),t=s(t,[0,t[0]>>>1])};e.x64hash128=function(t,e){t=t||"",e=e||0;for(var n=t.length%16,c=t.length-n,l=[0,e],f=[0,e],d=[0,0],p=[0,0],h=[2277735313,289559509],v=[1291169091,658871167],y=0;y<c;y+=16)d=[255&t.charCodeAt(y+4)|(255&t.charCodeAt(y+5))<<8|(255&t.charCodeAt(y+6))<<16|(255&t.charCodeAt(y+7))<<24,255&t.charCodeAt(y)|(255&t.charCodeAt(y+1))<<8|(255&t.charCodeAt(y+2))<<16|(255&t.charCodeAt(y+3))<<24],p=[255&t.charCodeAt(y+12)|(255&t.charCodeAt(y+13))<<8|(255&t.charCodeAt(y+14))<<16|(255&t.charCodeAt(y+15))<<24,255&t.charCodeAt(y+8)|(255&t.charCodeAt(y+9))<<8|(255&t.charCodeAt(y+10))<<16|(255&t.charCodeAt(y+11))<<24],d=i(d,h),d=o(d,31),d=i(d,v),l=s(l,d),l=o(l,27),l=r(l,f),l=r(i(l,[0,5]),[0,1390208809]),p=i(p,v),p=o(p,33),p=i(p,h),f=s(f,p),f=o(f,31),f=r(f,l),f=r(i(f,[0,5]),[0,944331445]);d=[0,0],p=[0,0];var m=c;switch(n){case 15:p=s(p,a([0,t.charCodeAt(m+14)],48));case 14:p=s(p,a([0,t.charCodeAt(m+13)],40));case 13:p=s(p,a([0,t.charCodeAt(m+12)],32));case 12:p=s(p,a([0,t.charCodeAt(m+11)],24));case 11:p=s(p,a([0,t.charCodeAt(m+10)],16));case 10:p=s(p,a([0,t.charCodeAt(m+9)],8));case 9:p=s(p,[0,t.charCodeAt(m+8)]),p=i(p,v),p=o(p,33),p=i(p,h),f=s(f,p);case 8:d=s(d,a([0,t.charCodeAt(m+7)],56));case 7:d=s(d,a([0,t.charCodeAt(m+6)],48));case 6:d=s(d,a([0,t.charCodeAt(m+5)],40));case 5:d=s(d,a([0,t.charCodeAt(m+4)],32));case 4:d=s(d,a([0,t.charCodeAt(m+3)],24));case 3:d=s(d,a([0,t.charCodeAt(m+2)],16));case 2:d=s(d,a([0,t.charCodeAt(m+1)],8));case 1:d=s(d,[0,t.charCodeAt(m)]),d=i(d,h),d=o(d,31),d=i(d,v),l=s(l,d)}return l=s(l,[0,t.length]),f=s(f,[0,t.length]),l=r(l,f),f=r(f,l),l=u(l),f=u(f),l=r(l,f),f=r(f,l),("00000000"+(l[0]>>>0).toString(16)).slice(-8)+("00000000"+(l[1]>>>0).toString(16)).slice(-8)+("00000000"+(f[0]>>>0).toString(16)).slice(-8)+("00000000"+(f[1]>>>0).toString(16)).slice(-8)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(31),i=r.__importDefault(n(77)),o=n(124),a=n(123),s=n(88),u=function(){function t(){}return t.getValue=function(e,n,r){void 0===n&&(n=3e3),void 0===r&&(r=!0);var o=t.getHost(e),u=o?"https://"+o:"",c=u?u+"?t="+(new Date).getTime():"",l=t.addFrame(c);return new i.default(function(i){var o=function(n){if("xcReady"===n.data.type&&n.origin===u){var s=t.messageToXc(n);r&&(s=a.Storage.updateXc(e,s)),i(s),t.removeFrame(l,o)}};window.addEventListener("message",o),setTimeout(function(){i({type:s.XIDItemType.XC,state:"TIMEOUT"}),t.removeFrame(l,o)},n)})},t.messageToXc=function(t){var e=t.data,n=e.xc,r=e.ts,i=e.state;return n&&Date.parse(r)&&i?{type:s.XIDItemType.XC,value:n,createdAt:r,state:i}:{type:s.XIDItemType.XC,state:i||"MALFORMED"}},t.addFrame=function(t){var e=document.createElement("iframe");return e.id="xc-"+(new Date).getTime(),e.src=t,e.style.display="none",e.style.position="fixed",document.body.appendChild(e),e},t.removeFrame=function(t,e){document.body.contains(t)&&(document.body.removeChild(t),window.removeEventListener("message",e))},t.getHost=function(t){switch(t){case"stage":return"xxid.staging.atl-paas.net";case"prod":return o.isAtlassianComDomain()?"xxid.atl-paas.net":"xxid.atlassian.com";case"test":return"";case"local":case"dev":default:return"xxid.dev.atl-paas.net"}},t}();e.XCGenerator=u},function(t,e,n){"use strict";function r(t){var e=function(t){var e={type:i.XIDItemType.UID,state:"MALFORMED"};return o(t,r)||a(t)||s(t)||u(t)||e},n=function(t){return t.map(function(t){return e(t)})},r=c();return t().then(n)}Object.defineProperty(e,"__esModule",{value:!0});var i=n(40),o=function(t,e){var n=t.state,r=t.type,i=t.value,o=t.createdAt;return t&&n&&r&&i&&o&&("NEW"===n||"CHANGED"===n)?{state:n,type:r,value:i,createdAt:o,timeTaken:c()-e}:null},a=function(t){var e=t.state,n=t.type,r=t.value,i=t.createdAt;return t&&e&&n&&r&&i&&"EXISTING"===e?{state:e,type:n,value:r,createdAt:i}:null},s=function(t){var e=t.state,n=t.type;if(t&&e&&n)switch(e){case"TIMEOUT":case"ERROR":case"UNAVAILABLE":case"UNKNOWN":case"MALFORMED":return{type:n,state:e}}return null},u=function(t){var e=t.type;return t&&e?{type:e,state:"MALFORMED"}:null};e.promiseWithTimer=r;var c=function(){return performance&&performance.now?performance.now():(new Date).getTime()}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){return t.split(".").splice(-2).join(".")}function o(t,e){var n=new XMLHttpRequest;n.open("GET",t,!0),n.withCredentials=!0,n.onreadystatechange=function(){n.readyState===XMLHttpRequest.DONE&&(n.status>=200&&n.status<300?e(null,n.responseText?m.parse(n.responseText):null):e(n.statusText||"Unknown Error",null))},n.send()}function a(t,e,n){o("https://"+t+"/v1/id/"+e,function(e,r){e?n(e,null):n(null,{domain:t,id:r&&r.id||null})})}function s(t,e,n){0===t.length&&n(null,null);var r=!1,i=0,o=null;t.forEach(function(s){a(s,e,function(e,a){i++,e?o=e:a&&a.id&&!r&&(r=!0,n(null,a)),i!==t.length||r||n(o,null)})})}var u=n(125),c=r(u),l=n(259),f=r(l),d=n(262),p=n(263),h=n(56),v=n(83),y=n(127),m=n(30),g=n(39),_=n(276),b=n(122).hash,w=n(278),I=n(119),T=n(117),E=n(279),x=n(86).v4,S=n(280).default,k=n(287).default,A={maxage:31536e6,secure:!1,path:"/"},O={maxRetryDelay:6e4,minRetryDelay:1e3,backoffFactor:2,maxAttempts:10,maxItems:100},j=y("Segment.io").option("apiKey","").option("apiScheme","https").option("apiHost","api.segment.io/v1").option("crossDomainIdServers",[]).option("retryQueue",!0).option("retryQueuePrefix","awc").option("addBundledMetadata",!1).option("unbundledIntegrations",[]).option("retryQueueOptions",O).option("requestTimeout",1e4);e=j,t.exports=j,e.storage=function(){return"file:"===w()||"chrome-extension:"===w()?_:h},e.global=window,e.sendJsonWithTimeout=function(t,e,n,r,i){function o(){4===a.readyState&&(429===a.status||a.status>=500&&a.status<600?i(new Error("HTTP Error "+a.status+" ("+a.statusText+")")):i(null,a))}if("xhr"!==I.type)return void I(t,e,n,i);var a=new XMLHttpRequest;a.onerror=i,a.onreadystatechange=o,a.withCredentials=!0,a.open("POST",t,!0),a.timeout=r,a.ontimeout=i,(0,f.default)(n).forEach(function(t){var e=(0,c.default)(t,2),n=e[0],r=e[1];a.setRequestHeader(n,r)}),a.send(m.stringify(e))},j.prototype.attachXid=function(t,e){if(e&&e instanceof Function){if(t&&t.msg&&t.msg.properties&&["screen","ui","operational","track"].indexOf(t.msg.properties.eventType)>-1){var n=e();n&&Array.isArray(n)&&(t.msg.properties.xid=n)}if(t&&t.msg&&t.msg.traits&&t.msg.traits.userIdType&&"identify"===t.msg.type){var r=e();r&&Array.isArray(r)&&(t.msg.traits.xid=r)}}return t},j.prototype.attachXids=function(t){var e=this;return this._xidPromiseCallback?this._xidPromiseCallback.then(function(n){return Array.isArray(t)?t.map(function(t){return e.attachXid(t,n)}):e.attachXid(t,n)}).catch(function(){return t}):t},j.prototype.proccessSingleItem=function(t,e){var n=this,r=this,i=function(t){return t.msg.sentAt=new Date,j.sendJsonWithTimeout(t.url,t.msg,t.headers,n.options.requestTimeout,function(n,i){return r.debug("sent %O, received %O",t.msg,[n,i]),n?e(n):e(null,i)})};return this._xidPromiseCallback?this.attachXids(t).then(function(t){i(t)}):i(t)},j.prototype.proccessBatchItems=function(t,e){var n=this,r=this;if(1===t.length)return this.proccessSingleItem(t[0],e);var i=function(t){var i=(new Date).toISOString(),o=t.map(function(t){return t.msg.sentAt=i,t.msg}),a={batch:o,sentAt:i},s=n.options.apiScheme+"://"+n.options.apiHost+"/batch",u={"Content-Type":"text/plain"};return j.sendJsonWithTimeout(s,a,u,n.options.requestTimeout,function(t,n){return r.debug("sent %O, received %O",a,[t,n]),t?e(t):e(null,n)})};return this._xidPromiseCallback?this.attachXids(t).then(function(t){i(t)}):i(t)},j.prototype.initialize=function(){var t=this;this.options.retryQueue&&(this._lsqueue=new S(this.options.retryQueuePrefix,this.options.retryQueueOptions,this.proccessBatchItems.bind(this)),this._lsqueue.start()),this.options.xidPromiseGetter&&(this._xidPromiseCallback=this.options.xidPromiseGetter()),this.ready(),this.analytics.on("invoke",function(e){var n=e.action(),r="on"+e.action();t.debug("%s %o",n,e),t[r]&&t[r](e),t.ready()}),this.cookie("segment_cross_domain_id")&&(this.cookie("seg_xid",this.cookie("segment_cross_domain_id")),this.cookie("seg_xid_fd",this.cookie("segment_cross_domain_id_from_domain")),this.cookie("seg_xid_ts",this.cookie("segment_cross_domain_id_timestamp")),this.cookie("segment_cross_domain_id",null),this.cookie("segment_cross_domain_id_from_domain",null),this.cookie("segment_cross_domain_id_timestamp",null)),this.options.crossDomainIdServers&&this.options.crossDomainIdServers.length>0&&this.retrieveCrossDomainId(),k(this.options.retryQueuePrefix)},j.prototype.loaded=function(){return!0},j.prototype.onpage=function(t){this.enqueue("/p",t.json())},j.prototype.onidentify=function(t){this.enqueue("/i",t.json())},j.prototype.ongroup=function(t){this.enqueue("/g",t.json())},j.prototype.ontrack=function(t){var e=t.json();delete e.traits,this.enqueue("/t",e)},j.prototype.onalias=function(t){var e=t.json(),n=this.analytics.user();e.previousId=e.previousId||e.from||n.id()||n.anonymousId(),e.userId=e.userId||e.to,delete e.from,delete e.to,this.enqueue("/a",e)},j.prototype.normalize=function(t){this.debug("normalize %o",t);var n=this.analytics.user(),r=e.global,i=r.location.search;t.context=t.context||t.options||{};var o=t.context;delete t.options,t.writeKey=this.options.apiKey,o.userAgent=navigator.userAgent,o.library||(o.library={name:"analytics.js",version:this.analytics.VERSION});var a=this.cookie("seg_xid");a&&(o.traits?o.traits.crossDomainId||(o.traits.crossDomainId=a):o.traits={crossDomainId:a}),i&&!o.campaign&&(o.campaign=E(i)),this.referrerId(i,o),t.userId=t.userId||n.id(),t.anonymousId=n.anonymousId(),t.sentAt=new Date;var s=this.analytics.failedInitializations||[];if(s.length>0&&(t._metadata={failedInitializations:s}),this.options.addBundledMetadata){var u=g(this.analytics.Integrations);t._metadata=t._metadata||{},t._metadata.bundled=u,t._metadata.unbundled=this.options.unbundledIntegrations}return t.messageId="ajs-"+b(m.stringify(t)+x()),this.debug("normalized %o",t),this.ampId(o),t},j.prototype.ampId=function(t){var e=this.cookie("segment_amp_id");e&&(t.amp={id:e})},j.prototype.enqueue=function(t,e,n){var r=this.options.apiScheme+"://"+this.options.apiHost+t,i={"Content-Type":"text/plain"},o=this.normalize(e);m.stringify(o).length>32e3&&this.debug("message must be less than 32kb %O",o),this.debug("enqueueing %O",o);var a=this;this.options.retryQueue?this._lsqueue.addItem({url:r,headers:i,msg:o}):I(r,o,i,function(t,e){if(a.debug("sent %O, received %O",o,[t,e]),n){if(t)return n(t);n(null,e)}})},j.prototype.cookie=function(t,n){var r=j.storage();if(1===arguments.length)return r(t);var i=e.global,o=i.location.href,a="."+T(o);"."===a&&(a=""),this.debug("store domain %s -> %s",o,a);var s=p(A);s.domain=a,this.debug("store %s, %s, %o",t,n,s),r(t,n,s),r(t)||(delete s.domain,this.debug("fallback store %s, %s, %o",t,n,s),r(t,n,s))},j.prototype.referrerId=function(t,e){var n=this.cookie("s:context.referrer"),r=void 0;n&&(n=m.parse(n)),t&&(r=d(t)),(r=r||n)&&(e.referrer=v(e.referrer||{},r),this.cookie("s:context.referrer",m.stringify(r)))},j.prototype.retrieveCrossDomainId=function(t){if(!this.options.crossDomainIdServers)return void(t&&t("crossDomainId not enabled",null));if(!this.cookie("seg_xid")){var e=this,n=this.options.apiKey,r=i(window.location.hostname),o=[];this.options.crossDomainIdServers.forEach(function(t){i(t)!==r&&o.push(t)}),s(o,n,function(n,r){if(n)return void(t&&t(n,null));var i=null,o=null;r?(i=r.id,o=r.domain):(i=x(),o=window.location.hostname);var a=(new Date).getTime();e.cookie("seg_xid",i),e.cookie("seg_xid_fd",o),e.cookie("seg_xid_ts",a),e.analytics.identify({crossDomainId:i}),t&&t(null,{crossDomainId:i,fromDomain:o,timestamp:a})})}}},function(t,e,n){t.exports={default:n(254),__esModule:!0}},function(t,e,n){n(37),n(33),t.exports=n(255)},function(t,e,n){var r=n(48),i=n(3)("iterator"),o=n(26);t.exports=n(0).isIterable=function(t){var e=Object(t);return void 0!==e[i]||"@@iterator"in e||o.hasOwnProperty(r(e))}},function(t,e,n){t.exports={default:n(257),__esModule:!0}},function(t,e,n){n(37),n(33),t.exports=n(258)},function(t,e,n){var r=n(11),i=n(103);t.exports=n(0).getIterator=function(t){var e=i(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return r(e.call(t))}},function(t,e,n){t.exports={default:n(260),__esModule:!0}},function(t,e,n){n(261),t.exports=n(0).Object.entries},function(t,e,n){var r=n(5),i=n(126)(!0);r(r.S,"Object",{entries:function(t){return i(t)}})},function(t,e,n){"use strict";function r(t){var e=i(t);for(var n in e)if(e.hasOwnProperty(n))for(var r in o)if(o.hasOwnProperty(r)&&n===r)return{id:e[n],type:o[r]}}var i=n(87).parse,o={btid:"dataxu",urid:"millennial-media"};t.exports=r},function(t,e,n){function r(t){switch(i(t)){case"object":var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=r(t[n]));return e;case"array":for(var e=new Array(t.length),o=0,a=t.length;o<a;o++)e[o]=r(t[o]);return e;case"regexp":var s="";return s+=t.multiline?"m":"",s+=t.global?"g":"",s+=t.ignoreCase?"i":"",new RegExp(t.source,s);case"date":return new Date(t.getTime());default:return t}}var i;try{i=n(24)}catch(t){i=n(24)}t.exports=r},function(t,e){t.exports=function(t,e){return e||(e={}),t.toLowerCase().replace(e.replace||/[^a-z0-9]/g," ").replace(/^ +| +$/g,"").replace(/ +/g,e.separator||"-")}},function(t,e,n){"use strict";function r(t){return v.array(t)?d(i,t)?"mixed":"array":v.object(t)?"map":"unknown"}function i(t){return!!v.object(t)&&!!v.string(t.key)&&!!b.call(t,"value")}function o(t,e){e=e||function(){};var n=new Image;return n.onerror=a(e,"failed to load pixel",n),n.onload=function(){e()},n.src=t.src,n.width=1,n.height=1,n}function a(t,e,n){return function(r){r=r||window.event;var i=new Error(e);i.event=r,i.source=n,t(i)}}function s(t,e){return h(function(t,n,r){return t[r]=n.replace(/\{\{\ *(\w+)\ *\}\}/g,function(t,n){return e[n]}),t},{},t.attrs)}var u=n(54),c=n(266),l=n(7),f=n(268),d=n(269),p=n(270),h=n(82),v=n(52),y=n(271),m=n(272),g=n(57),_=n(273),b=Object.prototype.hasOwnProperty,w=function(){},I=window.onerror;u(e),e.initialize=function(){var t=this.ready;g(t)},e.loaded=function(){return!1},e.page=function(t){},e.track=function(t){},e.map=function(t,e){var n=_(e),i=r(t);return"unknown"===i?[]:h(function(t,e,r){var o,a;return"map"===i&&(o=r,a=e),"array"===i&&(o=e,a=e),"mixed"===i&&(o=e.key,a=e.value),_(o)===n&&t.push(a),t},[],t)},e.invoke=function(t){if(this[t]){var e=Array.prototype.slice.call(arguments,1);return this._ready?(this.debug("%s with %o",t,e),this[t].apply(this,e)):this.queue(t,e)}},e.queue=function(t,e){if("page"===t&&this._assumesPageview&&!this._initialized)return this.page.apply(this,e);this._queue.push({method:t,args:e})},e.flush=function(){this._ready=!0;var t=this;l(function(e){t[e.method].apply(t,e.args)},this._queue),this._queue.length=0},e.reset=function(){for(var t=0;t<this.globals.length;t++)window[this.globals[t]]=void 0;window.onerror=I,window.onload=null},e.load=function(t,e,n){"function"==typeof t&&(n=t,e=null,t=null),t&&"object"==typeof t&&(n=e,e=t,t=null),"function"==typeof e&&(n=e,e=null),t=t||"library",e=e||{},e=this.locals(e);var r=this.templates[t];if(!r)throw new Error(p('template "%s" not defined.',t));var i=s(r,e);n=n||w;var a,u=this;switch(r.type){case"img":i.width=1,i.height=1,a=o(i,n);break;case"script":a=m(i,function(t){if(!t)return n();u.debug('error loading "%s" error="%s"',u.name,t)}),delete i.src,l(function(t,e){a.setAttribute(e,t)},i);break;case"iframe":a=y(i,n)}return a},e.locals=function(t){t=t||{};var e=Math.floor((new Date).getTime()/36e5);return t.hasOwnProperty("cache")||(t.cache=e),l(function(e,n){t.hasOwnProperty(n)||(t[n]=e)},this.options),t},e.ready=function(){this.emit("ready")},e._wrapInitialize=function(){var t=this.initialize;this.initialize=function(){this.debug("initialize"),this._initialized=!0;var e=t.apply(this,arguments);return this.emit("initialize"),e},this._assumesPageview&&(this.initialize=c(2,this.initialize))},e._wrapPage=function(){var t=this.page;this.page=function(){return this._assumesPageview&&!this._initialized?this.initialize.apply(this,arguments):t.apply(this,arguments)}},e._wrapTrack=function(){var t=this.track;this.track=function(e){var n,r,i=e.event();for(var o in f)if(b.call(f,o)){var a=f[o];if(!this[o])continue;if(!a.test(i))continue;r=this[o].apply(this,arguments),n=!0;break}return n||(r=t.apply(this,arguments)),r}}},function(t,e,n){"use strict";var r=n(267),i=Object.prototype.toString,o=function(t){return"function"==typeof t},a=function(t){var e=typeof t;return"number"===e||"object"===e&&"[object Number]"===i.call(t)},s=function(t,e){if(!a(t))throw new TypeError("Expected a number but received "+typeof t);if(!o(e))throw new TypeError("Expected a function but received "+typeof e);var n=0;return r(e.length,function(){if(!((n+=1)<t))return e.apply(this,arguments)})};t.exports=s},function(t,e,n){"use strict";var r=Object.prototype.toString,i=function(t){return"function"==typeof t},o=function(t){var e=typeof t;return"number"===e||"object"===e&&"[object Number]"===r.call(t)},a=function(t){for(var e=[],n=1;n<=t;n+=1)e.push("arg"+n);return e},s=function(t){var e=a(t).join(", "),n="".concat("  return function(",e,") {\n","    return func.apply(this, arguments);\n","  };");return new Function("func",n)},u=[function(t){return function(){return t.apply(this,arguments)}},function(t){return function(e){return t.apply(this,arguments)}},function(t){return function(e,n){return t.apply(this,arguments)}},function(t){return function(e,n,r){return t.apply(this,arguments)}},function(t){return function(e,n,r,i){return t.apply(this,arguments)}},function(t){return function(e,n,r,i,o){return t.apply(this,arguments)}}],c=function(t,e){if(!i(e))throw new TypeError("Expected a function but got "+typeof e);return t=Math.max(o(t)?t:0,0),u[t]||(u[t]=s(t)),u[t](e)};t.exports=c},function(t,e){t.exports={promotionViewed:/^[ _]?promotion[ _]?viewed?[ _]?$/i,viewedPromotion:/^[ _]?viewed[ _]?promotion?[ _]?$/i,promotionClicked:/^[ _]?promotion[ _]?clicked?[ _]?$/i,clickedPromotion:/^[ _]?clicked[ _]?promotion?[ _]?$/i,productsSearched:/^[ _]?products[ _]?searched[ _]?$/i,productListViewed:/^[ _]?product[ _]?list[ _]?viewed[ _]?$/i,productListFiltered:/^[ _]?product[ _]?list[ _]?filtered[ _]?$/i,viewedProductCategory:/^[ _]?viewed[ _]?product[ _]?category[ _]?$/i,viewedProductDetails:/^[ _]?viewed[ _]?product[ _]?details?[ _]?$/i,productClicked:/^[ _]?product[ _]?clicked[ _]?$/i,clickedProduct:/^[ _]?clicked[ _]?product[ _]?$/i,productViewed:/^[ _]?product[ _]?viewed[ _]?$/i,viewedProduct:/^[ _]?viewed[ _]?product[ _]?$/i,productAdded:/^[ _]?product[ _]?added[ _]?$/i,addedProduct:/^[ _]?added[ _]?product[ _]?$/i,productRemoved:/^[ _]?product[ _]?removed[ _]?$/i,removedProduct:/^[ _]?removed[ _]?product[ _]?$/i,cartViewed:/^[ _]?cart[ _]?viewed[ _]?$/i,orderStarted:/^[ _]?order[ _]?started[ _]?$/i,startedOrder:/^[ _]?started[ _]?order[ _]?$/i,orderUpdated:/^[ _]?order[ _]?updated[ _]?$/i,updatedOrder:/^[ _]?updated[ _]?order[ _]?$/i,orderCompleted:/^[ _]?order[ _]?completed[ _]?$/i,completedOrder:/^[ _]?completed[ _]?order[ _]?$/i,orderRefunded:/^[ _]?order[ _]?refunded[ _]?$/i,refundedOrder:/^[ _]?refunded[ _]?order[ _]?$/i,orderCancelled:/^[ _]?order[ _]?cancelled[ _]?$/i,paymentInfoAdded:/^[ _]?payment[ _]?info[ _]?added[ _]?$/i,checkoutStarted:/^[ _]?checkout[ _]?started[ _]?$/i,checkoutStepViewed:/^[ _]?checkout[ _]?step[ _]?viewed[ _]?$/i,viewedCheckoutStep:/^[ _]?viewed[ _]?checkout[ _]?step[ _]?$/i,checkoutStepCompleted:/^[ _]?checkout[ _]?step[ _]?completed[ _]?$/i,completedCheckoutStep:/^[ _]?completed[ _]?checkout[ _]?step[ _]?$/i,couponEntered:/^[ _]?coupon[ _]?entered[ _]?$/i,couponApplied:/^[ _]?coupon[ _]?applied[ _]?$/i,couponDenied:/^[ _]?coupon[ _]?denied[ _]?$/i,couponRemoved:/^[ _]?coupon[ _]?removed[ _]?$/i,productAddedToWishlist:/^[ _]?product[ _]?added[ _]?to[ _]?wishlist[ _]?$/i,wishlistProductRemoved:/^[ _]?wishlist[ _]?product[ _]?removed[ _]?$/i,wishlistProductAddedToCart:/^[ _]?wishlist[ _]?product[ _]?added[ _]?to[ _]?cart[ _]?$/i,productShared:/^[ _]?product[ _]?shared[ _]?$/i,cartShared:/^[ _]?cart[ _]?shared[ _]?$/i,productRemoved:/^[ _]?product[ _]?removed[ _]?$/i,applicationInstalled:/^[ _]?application[ _]?installed[ _]?$/i,applicationUpdated:/^[ _]?application[ _]?updated[ _]?$/i,applicationOpened:/^[ _]?application[ _]?opened[ _]?$/i,applicationBackgrounded:/^[ _]?application[ _]?backgrounded[ _]?$/i,applicationUninstalled:/^[ _]?application[ _]?uninstalled[ _]?$/i,installAttributed:/^[ _]?install[ _]?attributed[ _]?$/i,deepLinkOpened:/^[ _]?deep[ _]?link[ _]?opened[ _]?$/i,pushNotificationReceived:/^[ _]?push[ _]?notification[ _]?received[ _]?$/i,pushNotificationTapped:/^[ _]?push[ _]?notification[ _]?received[ _]?$/i,pushNotificationBounced:/^[ _]?push[ _]?notification[ _]?bounced[ _]?$/i}},function(t,e,n){"use strict";var r=n(7),i=function(t,e){if("function"!=typeof t)throw new TypeError("`predicate` must be a function but was a "+typeof t);var n=!0;return r(function(e,r,i){if(!(n=!!t(e,r,i)))return!1},e),n};t.exports=i},function(t,e,n){"use strict";(function(e){function n(t){var e=Array.prototype.slice.call(arguments,1),r=0;return t.replace(/%([a-z])/gi,function(t,i){return n[i]?n[i](e[r++]):t+i})}var r=e.JSON&&"function"==typeof JSON.stringify?JSON.stringify:String;n.o=r,n.s=String,n.d=parseInt,t.exports=n}).call(e,n(18))},function(t,e,n){var r=n(52),i=n(128),o=n(57);t.exports=function(t,e){if(!t)throw new Error("Cant load nothing...");r.string(t)&&(t={src:t});var n="https:"===document.location.protocol||"chrome-extension:"===document.location.protocol;t.src&&0===t.src.indexOf("//")&&(t.src=n?"https:"+t.src:"http:"+t.src),n&&t.https?t.src=t.https:!n&&t.http&&(t.src=t.http);var a=document.createElement("iframe");return a.src=t.src,a.width=t.width||1,a.height=t.height||1,a.style.display="none",r.fn(e)&&i(a,e),o(function(){var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(a,t)}),a}},function(t,e,n){"use strict";function r(t,e){if(!t)throw new Error("Can't load nothing...");"string"===a(t)&&(t={src:t});var n="https:"===document.location.protocol||"chrome-extension:"===document.location.protocol;t.src&&0===t.src.indexOf("//")&&(t.src=(n?"https:":"http:")+t.src),n&&t.https?t.src=t.https:!n&&t.http&&(t.src=t.http);var r=document.createElement("script");return r.type="text/javascript",r.async=!0,r.src=t.src,"function"===a(e)&&i(r,e),o(function(){var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(r,t)}),r}var i=n(128),o=n(57),a=n(24);t.exports=r},function(t,e){function n(t){return o.test(t)?t.toLowerCase():a.test(t)?(r(t)||t).toLowerCase():i(t).toLowerCase()}function r(t){return t.replace(s,function(t,e){return e?" "+e:""})}function i(t){return t.replace(u,function(t,e,n){return e+" "+n.toLowerCase().split("").join(" ")})}t.exports=n;var o=/\s/,a=/[\W_]/,s=/[\W_]+(.|$)/g,u=/(.)([A-Z]+)/g},function(t,e,n){"use strict";function r(t){t=t.replace(' src="',' data-src="');var e=o(t),n={};return a(function(e){var r="data-src"===e.name?"src":e.name;s(e.name+"=",t)&&(n[r]=e.value)},e.attributes),{type:e.tagName.toLowerCase(),attrs:n}}var i=n(54),o=n(275),a=n(7),s=n(85);i(e),e.option=function(t,e){return this.prototype.defaults[t]=e,this},e.mapping=function(t){return this.option(t,[]),this.prototype[t]=function(e){return this.map(this.options[t],e)},this},e.global=function(t){return this.prototype.globals.push(t),this},e.assumesPageview=function(){return this.prototype._assumesPageview=!0,this},e.readyOnLoad=function(){return this.prototype._readyOnLoad=!0,this},e.readyOnInitialize=function(){return this.prototype._readyOnInitialize=!0,this},e.tag=function(t,e){return null==e&&(e=t,t="library"),this.prototype.templates[t]=r(e),this}},function(t,e){function n(t,e){if("string"!=typeof t)throw new TypeError("String expected");e||(e=document);var n=/<([\w:]+)/.exec(t);if(!n)return e.createTextNode(t);t=t.replace(/^\s+|\s+$/g,"");var r=n[1];if("body"==r){var i=e.createElement("html");return i.innerHTML=t,i.removeChild(i.lastChild)}var a=o[r]||o._default,s=a[0],u=a[1],c=a[2],i=e.createElement("div");for(i.innerHTML=u+t+c;s--;)i=i.lastChild;if(i.firstChild==i.lastChild)return i.removeChild(i.firstChild);for(var l=e.createDocumentFragment();i.firstChild;)l.appendChild(i.removeChild(i.firstChild));return l}t.exports=n;var r,i=!1;"undefined"!=typeof document&&(r=document.createElement("div"),r.innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',i=!r.getElementsByTagName("link").length,r=void 0);var o={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:i?[1,"X<div>","</div>"]:[0,"",""]};o.td=o.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],o.option=o.optgroup=[1,'<select multiple="multiple">',"</select>"],o.thead=o.tbody=o.colgroup=o.caption=o.tfoot=[1,"<table>","</table>"],o.polyline=o.ellipse=o.polygon=o.circle=o.text=o.line=o.path=o.rect=o.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"]},function(t,e,n){function r(t,e){var n=arguments.length;return 0==n?a():2<=n?i(t,e):1==n?null==t?s.clear():"string"==typeof t?o(t):"object"==typeof t?c(t,i):void 0:void 0}function i(t,e){return null==e?s.removeItem(t):s.setItem(t,JSON.stringify(e))}function o(t){return u(s.getItem(t))}function a(){for(var t,e=s.length,n={};0<=--e;)t=s.key(e),n[t]=o(t);return n}var s,u=n(277),c=n(109);try{s=window.localStorage}catch(t){s=null}t.exports=r,r.supported=!!s},function(t,e){t.exports=function(t){try{return JSON.parse(t)}catch(e){return t||void 0}}},function(t,e,n){"use strict";function r(){return o||window.location.protocol}function i(t){try{a(window.location,"protocol",{get:function(){return t}})}catch(e){o=t}}var o,a=Object.defineProperty,s=window.location.protocol;t.exports=function(t){return 0===arguments.length?r():i(t)},t.exports.http=function(){i("http:")},t.exports.https=function(){i("https:")},t.exports.reset=function(){i(s)}},function(t,e,n){"use strict";function r(t){"?"===t.charAt(0)&&(t=t.substring(1)),t=t.replace(/\?/g,"&");var e,n=a(t),r={};for(var i in n)s.call(n,i)&&"utm_"===i.substr(0,4)&&(e=i.substr(4),"campaign"===e&&(e="name"),r[e]=n[i]);return r}function i(t){return o(function(t,e,n){return s.call(u,n)&&(t[n]=e),t},{},r(t))}var o=n(82),a=n(87).parse,s=Object.prototype.hasOwnProperty,u={name:!0,term:!0,source:!0,medium:!0,content:!0};t.exports=r,t.exports.strict=i},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(14),o=r(i),a=n(2),s=r(a),u=n(281),c=r(u),l=n(286),f=r(l),d={minRetryDelay:1,maxRetryDelay:1,backoffFactor:1,backoffJitter:0},p=function t(e,n,r){var i=this;(0,s.default)(this,t),this.start=function(){i.queue.start()},this._flush=function(t){if(0!==i.currentBatch.length){var e=i.currentBatch.splice(0,i.flushBatchSize),n=e.map(function(t){return t.item});i.batchProcessFunc(n,function(n,r){e.forEach(function(t){return t.done(n,r)}),t(n),i.currentBatch.length>0&&i._schedule()})}else t()},this._schedule=function(){i.scheduler.schedule({immediate:i.currentBatch.length>=i.flushBatchSize})},this._processSingleElement=function(t,e){i.currentBatch.push({item:t,done:e}),i.currentBatch.length>i.maxQueueSize&&i.currentBatch.splice(0,i.currentBatch.length-i.maxQueueSize),i._schedule()},this.addItem=function(t){return i.queue.addItem(t)},this.stop=function(){i.scheduler.stop(),i.queue.stop()},this.on=function(t,e){return i.queue.on(t,e)},this.maxQueueSize=n.maxItems||500,this.queue=new c.default(e,(0,o.default)({},n,d),this._processSingleElement),this.flushBatchSize=n.batchFlushSize||7,this.batchProcessFunc=r,this.currentBatch=[],this.scheduler=new f.default((0,o.default)({},n,{waitInterval:n.flushWaitMs}),this._flush)};e.default=p},function(t,e,n){"use strict";function r(t,e){return function(){return t.apply(e,arguments)}}function i(t,e,n){"function"==typeof e&&(n=e),this.name=t,this.id=o(),this.fn=n,this.maxItems=e.maxItems||1/0,this.maxAttempts=e.maxAttempts||1/0,this.backoff={MIN_RETRY_DELAY:e.minRetryDelay||1e3,MAX_RETRY_DELAY:e.maxRetryDelay||3e4,FACTOR:e.backoffFactor||2,JITTER:e.backoffJitter||0},this.timeouts={ACK_TIMER:1e3,RECLAIM_TIMER:3e3,RECLAIM_TIMEOUT:1e4,RECLAIM_WAIT:500},this.keys={IN_PROGRESS:"inProgress",QUEUE:"queue",RECLAIM_START:"reclaimStart",RECLAIM_END:"reclaimEnd",ACK:"ack"},this._schedule=new u,this._processId=0,this._store=new a(this.name,this.id,this.keys),this._store.set(this.keys.IN_PROGRESS,{}),this._store.set(this.keys.QUEUE,[]),this._ack=r(this._ack,this),this._checkReclaim=r(this._checkReclaim,this),this._processHead=r(this._processHead,this),this._running=!1}var o=n(129).v4,a=n(284),s=n(7),u=n(285),c=n(6)("localstorage-retry");n(54)(i.prototype),i.prototype.start=function(){this._running&&this.stop(),this._running=!0,this._ack(),this._checkReclaim(),this._processHead()},i.prototype.stop=function(){this._schedule.cancelAll(),this._running=!1},i.prototype.shouldRetry=function(t,e){return!(e>this.maxAttempts)},i.prototype.getDelay=function(t){var e=this.backoff.MIN_RETRY_DELAY*Math.pow(this.backoff.FACTOR,t);if(this.backoff.JITTER){var n=Math.random(),r=Math.floor(n*this.backoff.JITTER*e);Math.floor(10*n)<5?e-=r:e+=r}return Number(Math.min(e,this.backoff.MAX_RETRY_DELAY).toPrecision(1))},i.prototype.addItem=function(t){this._enqueue({item:t,attemptNumber:0,time:this._schedule.now()})},i.prototype.requeue=function(t,e,n){this.shouldRetry(t,e,n)?this._enqueue({item:t,attemptNumber:e,time:this._schedule.now()+this.getDelay(e)}):this.emit("discard",t,e)},i.prototype._enqueue=function(t){var e=this._store.get(this.keys.QUEUE)||[];e=e.slice(-(this.maxItems-1)),e.push(t),e=e.sort(function(t,e){return t.time-e.time}),this._store.set(this.keys.QUEUE,e),this._running&&this._processHead()},i.prototype._processHead=function(){var t=this,e=this._store;this._schedule.cancel(this._processId);for(var n=e.get(this.keys.QUEUE)||[],r=e.get(this.keys.IN_PROGRESS)||{},i=this._schedule.now(),a=[],u=Object.keys(r).length;n.length&&n[0].time<=i&&u++<t.maxItems;){var l=n.shift(),f=o();r[f]={item:l.item,attemptNumber:l.attemptNumber,time:t._schedule.now()},function(n,r){a.push({item:n.item,done:function(i,o){var a=e.get(t.keys.IN_PROGRESS)||{};delete a[r],e.set(t.keys.IN_PROGRESS,a),t.emit("processed",i,o,n.item),i&&t.requeue(n.item,n.attemptNumber+1,i)}})}(l,f)}e.set(this.keys.QUEUE,n),e.set(this.keys.IN_PROGRESS,r),s(function(e){try{t.fn(e.item,e.done)}catch(t){c("Process function threw error: "+t)}},a),n=e.get(this.keys.QUEUE)||[],this._schedule.cancel(this._processId),n.length>0&&(this._processId=this._schedule.run(this._processHead,n[0].time-i))},i.prototype._ack=function(){this._store.set(this.keys.ACK,this._schedule.now()),this._store.set(this.keys.RECLAIM_START,null),this._store.set(this.keys.RECLAIM_END,null),this._schedule.run(this._ack,this.timeouts.ACK_TIMER)},i.prototype._checkReclaim=function(){function t(t){t.set(e.keys.RECLAIM_START,e.id),t.set(e.keys.ACK,e._schedule.now()),e._schedule.run(function(){t.get(e.keys.RECLAIM_START)===e.id&&(t.set(e.keys.RECLAIM_END,e.id),e._schedule.run(function(){t.get(e.keys.RECLAIM_END)===e.id&&t.get(e.keys.RECLAIM_START)===e.id&&e._reclaim(t.id)},e.timeouts.RECLAIM_WAIT))},e.timeouts.RECLAIM_WAIT)}var e=this;s(function(n){n.id!==e.id&&(e._schedule.now()-n.get(e.keys.ACK)<e.timeouts.RECLAIM_TIMEOUT||t(n))},function(t){for(var n=[],r=e._store.getOriginalEngine(),i=0;i<r.length;i++){var o=r.key(i),s=o.split(".");3===s.length&&s[0]===t&&"ack"===s[2]&&n.push(new a(t,s[1],e.keys))}return n}(this.name)),this._schedule.run(this._checkReclaim,this.timeouts.RECLAIM_TIMER)},i.prototype._reclaim=function(t){var e=this,n=new a(this.name,t,this.keys),r={queue:this._store.get(this.keys.QUEUE)||[]},i={inProgress:n.get(this.keys.IN_PROGRESS)||{},queue:n.get(this.keys.QUEUE)||[]};s(function(t){r.queue.push({item:t.item,attemptNumber:t.attemptNumber,time:e._schedule.now()})},i.queue),s(function(t){r.queue.push({item:t.item,attemptNumber:t.attemptNumber+1,time:e._schedule.now()})},i.inProgress),r.queue=r.queue.sort(function(t,e){return t.time-e.time}),this._store.set(this.keys.QUEUE,r.queue),n.remove(this.keys.IN_PROGRESS),n.remove(this.keys.QUEUE),n.remove(this.keys.RECLAIM_START),n.remove(this.keys.RECLAIM_END),n.remove(this.keys.ACK),this._processHead()},t.exports=i},function(t,e,n){function r(t,e,n){var r=e&&n||0,l=e||[];t=t||{};var f=t.node||i,d=void 0!==t.clockseq?t.clockseq:o;if(null==f||null==d){var p=a();null==f&&(f=i=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==d&&(d=o=16383&(p[6]<<8|p[7]))}var h=void 0!==t.msecs?t.msecs:(new Date).getTime(),v=void 0!==t.nsecs?t.nsecs:c+1,y=h-u+(v-c)/1e4;if(y<0&&void 0===t.clockseq&&(d=d+1&16383),(y<0||h>u)&&void 0===t.nsecs&&(v=0),v>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");u=h,c=v,o=d,h+=122192928e5;var m=(1e4*(268435455&h)+v)%4294967296;l[r++]=m>>>24&255,l[r++]=m>>>16&255,l[r++]=m>>>8&255,l[r++]=255&m;var g=h/4294967296*1e4&268435455;l[r++]=g>>>8&255,l[r++]=255&g,l[r++]=g>>>24&15|16,l[r++]=g>>>16&255,l[r++]=d>>>8|128,l[r++]=255&d;for(var _=0;_<6;++_)l[r+_]=f[_];return e||s(l)}var i,o,a=n(130),s=n(131),u=0,c=0;t.exports=r},function(t,e,n){function r(t,e,n){var r=e&&n||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null),t=t||{};var a=t.random||(t.rng||i)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,e)for(var s=0;s<16;++s)e[r+s]=a[s];return e||o(a)}var i=n(130),o=n(131);t.exports=r},function(t,e,n){"use strict";function r(t,e,n,r){this.id=e,this.name=t,this.keys=n||{},this.engine=r||o,this.originalEngine=this.engine}function i(t){var e=!1;if(t.code)switch(t.code){case 22:e=!0;break;case 1014:"NS_ERROR_DOM_QUOTA_REACHED"===t.name&&(e=!0)}else-2147024882===t.number&&(e=!0);return e}var o=n(132).defaultEngine,a=n(132).inMemoryEngine,s=n(7),u=n(39),c=n(30);r.prototype.set=function(t,e){var n=this._createValidKey(t);if(n)try{this.engine.setItem(n,c.stringify(e))}catch(n){i(n)&&(this._swapEngine(),this.set(t,e))}},r.prototype.get=function(t){try{var e=this.engine.getItem(this._createValidKey(t));return null===e?null:c.parse(e)}catch(t){return null}},r.prototype.getOriginalEngine=function(){return this.originalEngine},r.prototype.remove=function(t){this.engine.removeItem(this._createValidKey(t))},r.prototype._createValidKey=function(t){var e=this.name,n=this.id;if(!u(this.keys).length)return[e,n,t].join(".");var r;return s(function(i){i===t&&(r=[e,n,t].join("."))},this.keys),r},r.prototype._swapEngine=function(){var t=this;s(function(e){var n=t.get(e);a.setItem([t.name,t.id,e].join("."),n),t.remove(e)},this.keys),this.engine=a},t.exports=r},function(t,e,n){"use strict";function r(){this.tasks={},this.nextId=1}var i=n(7),o={setTimeout:function(t,e){return window.setTimeout(t,e)},clearTimeout:function(t){return window.clearTimeout(t)},Date:window.Date},a=o;r.prototype.now=function(){return+new a.Date},r.prototype.run=function(t,e){var n=this.nextId++;return this.tasks[n]=a.setTimeout(this._handle(n,t),e),n},r.prototype.cancel=function(t){this.tasks[t]&&(a.clearTimeout(this.tasks[t]),delete this.tasks[t])},r.prototype.cancelAll=function(){i(a.clearTimeout,this.tasks),this.tasks={}},r.prototype._handle=function(t,e){var n=this;return function(){return delete n.tasks[t],e()}},r.setClock=function(t){a=t},r.resetClock=function(){a=o},t.exports=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2),i=function(t){return t&&t.__esModule?t:{default:t}}(r),o={minRetryDelay:1e3,maxRetryDelay:3e4,backoffFactor:2,backoffJitter:0,waitInterval:500},a={NONE:"none",IMMEDIATE:"immediate",WAIT:"wait"},s=function t(e,n){var r=this;(0,i.default)(this,t),this.schedule=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{immediate:!1},e=t.immediate,n=void 0!==e&&e;r.operationInFlight?n?r.queuedSchedule=a.IMMEDIATE:r.queuedSchedule!==a.IMMEDIATE&&(r.queuedSchedule=a.WAIT):n&&0===r.failureCount?(r._clearTimeout(),r._run()):r.failureCount>0&&null===r.scheduledTimeout?r.scheduledTimeout=window.setTimeout(r._run,r._calculateBackoff()):null===r.scheduledTimeout&&(r.scheduledTimeout=window.setTimeout(r._run,r.options.waitInterval))},this.stop=function(){r._clearTimeout(),r.queuedSchedule=a.NONE},this._clearTimeout=function(){null!==r.scheduledTimeout&&(window.clearTimeout(r.scheduledTimeout),r.scheduledTimeout=null)},this._run=function(){r.operationInFlight=!0,r._clearTimeout();try{r.callback(r._done)}catch(t){r._done(t)}},this._done=function(t){r.operationInFlight=!1,t?(r.failureCount++,r._clearTimeout()):r.failureCount=0,r._processQueuedSchedule()},this._processQueuedSchedule=function(){if(r.queuedSchedule!==a.NONE){var t=r.queuedSchedule===a.IMMEDIATE;r.queuedSchedule=a.NONE,r.schedule({immediate:t})}},this._calculateBackoff=function(){var t=r.options,e=t.minRetryDelay,n=t.maxRetryDelay,i=t.backoffFactor,o=t.backoffJitter,a=e*Math.pow(i,r.failureCount);if(o){var s=Math.random(),u=Math.floor(s*o*a);Math.floor(10*s)<5?a-=u:a+=u}return Number(Math.min(a,n).toPrecision(1))},this.options={minRetryDelay:e.minRetryDelay||o.minRetryDelay,maxRetryDelay:e.maxRetryDelay||o.maxRetryDelay,backoffFactor:e.backoffFactor||o.backoffFactor,backoffJitter:e.backoffJitter||o.backoffJitter,waitInterval:e.waitInterval||o.waitInterval},this.scheduledTimeout=null,this.failureCount=0,this.callback=n,this.operationInFlight=!1,this.queuedSchedule=a.NONE};e.default=s},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(13),o=r(i),a=n(125),s=r(a),u=n(58),c=r(u),l={IN_PROGRESS:"inProgress",QUEUE:"queue",ACK:"ack",RECLAIM_START:"reclaimStart",RECLAIM_END:"reclaimEnd"},f=(0,c.default)(l);e.default=function(t){if("string"==typeof t&&0!==t.length)try{var e=new Array(window.localStorage.length).fill("").map(function(t,e){return window.localStorage.key(e)}).filter(function(e){return e.startsWith(t+".")}).map(function(t){return t.split(".")}).filter(function(t){return 3===t.length&&f.includes(t[2])}).reduce(function(t,e){var n=(0,s.default)(e,3),r=n[1],i=n[2];return void 0===t[r]&&(t[r]={}),t[r][i]=!0,t},{});(0,o.default)(e).filter(function(t){return!0!==e[t][l.ACK]}).forEach(function(e){localStorage.removeItem(t+"."+e+"."+l.IN_PROGRESS),localStorage.removeItem(t+"."+e+"."+l.QUEUE),localStorage.removeItem(t+"."+e+"."+l.RECLAIM_START),localStorage.removeItem(t+"."+e+"."+l.RECLAIM_END)})}catch(t){}}},function(t,e,n){n(289),t.exports=n(0).Object.values},function(t,e,n){var r=n(5),i=n(126)(!1);r(r.S,"Object",{values:function(t){return i(t)}})},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(50),o=r(i),a=n(127),s=r(a),u=(0,s.default)("BeforeSend");(0,o.default)(u.prototype,{initialize:function(){var t=this;this.ready(),this.analytics.on("invoke",function(e){e&&e.obj&&e.obj.context&&e.obj.context.page&&(e.obj.context.page=void 0,t.ready())})},loaded:function(){return!0}}),e.default=u},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(14),o=r(i),a=n(292),s=r(a),u=n(74),c=r(u),l=n(2),f=r(l),d=n(15),p=n(133),h=r(p),v=function t(e,n,r){var i=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if((0,f.default)(this,t),this.start=function(){i._startInterval(),i._bindEventListeners()},this.stop=function(){i._stopInterval(),i._unbindEventListeners()},this.resetTimers=function(){i._intervalId&&(i.stop(),i.start())},this._bindEventListeners=function(){window.addEventListener("focus",i._focusListener),window.addEventListener("blur",i._blurListener)},this._unbindEventListeners=function(){window.removeEventListener("focus",i._focusListener),window.removeEventListener("blur",i._blurListener)},this._startInterval=function(){clearInterval(i._intervalId),i._intervalId=setInterval(i._handleInterval,i._delay)},this._stopInterval=function(){i._intervalId&&(clearInterval(i._intervalId),i._intervalId=null)},this._getProductKey=function(t,e){var n=t;return e&&(n+="-"+e),n},this._getLastSentTimestamp=function(t,e,n){return(((i._parseLocalStorageData()||{})[n]||{})[e]||{})[t]||null},this._parseLocalStorageData=function(){var t=i._safeLocalStorage.getItem(i._storageKey);try{return JSON.parse(t)}catch(t){return i._safeLocalStorage.removeItem(i._storageKey),null}},this._setLastSentTimestamp=function(t,e,n){var r=JSON.parse(i._safeLocalStorage.getItem(i._storageKey))||{},o=r[n]||{},a=o[e]||{};a[t]=Date.now(),o[e]=a,r[n]=o,i._safeLocalStorage.setItem(i._storageKey,(0,c.default)(r))},this._shouldSendEvent=function(t,e,n,r){return!!document.hasFocus()&&!(e!==d.tenantType.NONE&&!n||!r)&&Date.now()-i._getLastSentTimestamp(t,n,r)>i._throttle},this._handleInterval=function(){var t=i._getContext(),e=t.embeddedProduct,n=(0,s.default)(t,["embeddedProduct"]);i._sendEvent(i._product,n),e&&i._sendEvent(e,n,!0)},this._sendEvent=function(t,e,n){var r=e.subproduct,o=e.tenantIdType,a=e.tenantId,s=e.userId,u=e.lastScreenEvent,c=e.attributes,l=i._getProductKey(t,r);if(i._shouldSendEvent(l,o,a,s)){i._setLastSentTimestamp(l,a,s);var f=i._createEvent(t,r,n,u,c);i._onEvent(f)}},this._createEvent=function(t,e,n,r,a){var s={product:t,source:"ui",action:"viewed",actionSubject:"ui",attributes:a};return n&&(s.subproduct=null,s.version=null,s.attributes=(0,o.default)({},s.attributes,{embeddedInEnv:i._productInfo.env,embeddedInProduct:i._productInfo.product,embeddedInSubproduct:e,embeddedInVersion:i._productInfo.version,embeddedInOrigin:i._productInfo.origin,embeddedInPlatform:i._productInfo.platform})),r&&(s.attributes=(0,o.default)({},s.attributes,{lastScreenEvent:{name:r.name,attributes:r.attributes}})),s},!e)throw new Error("Missing productInfo");if(!e.product)throw new Error("Missing productInfo.product");if(!n)throw new Error("Missing getContext callback");if("function"!=typeof n)throw new Error("Invalid getContext, must be function");if(!r)throw new Error("Missing onEvent callback");if("function"!=typeof r)throw new Error("Invalid onEvent, must be function");this._productInfo=e,this._product=e.product,this._getContext=n,this._onEvent=r,this._delay=a.delay||2e3,this._throttle=a.throttle||36e5,this._storageKey=a.storageKey||"ui.viewed.last.sent",this._safeLocalStorage=new h.default(this._productInfo.env),this._focusListener=function(){i._startInterval()},this._blurListener=function(){i._stopInterval()}};e.default=v},function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}},function(t,e,n){t.exports={default:n(294),__esModule:!0}},function(t,e,n){n(295),t.exports=n(0).Object.freeze},function(t,e,n){var r=n(12),i=n(47).onFreeze;n(73)("freeze",function(t){return function(e){return t&&r(e)?t(i(e)):e}})},function(t,e,n){n(297),t.exports=n(0).Object.getPrototypeOf},function(t,e,n){var r=n(36),i=n(98);n(73)("getPrototypeOf",function(){return function(t){return i(r(t))}})},function(t,e,n){t.exports={default:n(299),__esModule:!0}},function(t,e,n){n(300),t.exports=n(0).Object.setPrototypeOf},function(t,e,n){var r=n(5);r(r.S,"Object",{setPrototypeOf:n(301).set})},function(t,e,n){var r=n(12),i=n(11),o=function(t,e){if(i(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{r=n(19)(Function.call,n(102).f(Object.prototype,"__proto__").set,2),r(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return o(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:o}},function(t,e,n){t.exports={default:n(303),__esModule:!0}},function(t,e,n){n(304);var r=n(0).Object;t.exports=function(t,e){return r.create(t,e)}},function(t,e,n){var r=n(5);r(r.S,"Object",{create:n(45)})},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(138),o=r(i),a=n(14),s=r(a),u=n(2),c=r(u),l=n(32),f=r(l),d=n(318),p=r(d),h=n(140),v=r(h),y=n(15),m=function(){function t(e,n){var r=this;if((0,c.default)(this,t),this._getEventKey=function(t){var e=t.task,n=t.taskId;return n?e+"."+n:e},this._getEventTimingByName=function(t){var e=r._performance.getEntriesByName(t);return e[e.length-1]},this._getApdexFields=function(t){var e=r._getApdexTimings(t),n=r._calculateApdex({duration:e.duration,threshold:t.threshold});return(0,s.default)({},e,{apdex:n})},this._getApdexTimings=function(t){var e=r._getEventKey(t),n=e+"-start",i=t.startTime||r._getStartTime(t,n),o=t.stopTime||r._getStopTime();return r._cleanApdexState(e),{startTime:i,stopTime:o,duration:o-i}},this._getStartTime=function(t,e){var n=r._performance.getTimeOrigin();return t.type===y.apdexType.INITIAL_LOAD?n:n+r._getEventTimingByName(e).startTime},this._getStopTime=function(){return r._performance.getTimeOrigin()+r._performance.now()},this._cleanApdexState=function(t){r._performance.clearMarks(t+"-start"),r._performance.clearMarks(t+"-stop"),r._startedEvents.delete(t)},this._getVisibilityFields=function(t){var e=void 0;if(t.type===y.apdexType.INITIAL_LOAD)e=!r._wasPreviouslyHidden;else if(t.type===y.apdexType.TRANSITION){var n=r._getEventKey(t);e=r._isActiveEvents.get(n)}return(t.startTime||t.stopTime)&&(e=!r._pageVisibility.getIsHidden()),{isActiveTab:e}},this._calculateApdex=function(t){var e=t.duration,n=t.threshold,i=void 0===n?r._threshold:n,o=i,a=4*i;return e<=o?1:e<=a?.5:0},this._validateStartEvent=function(t){if(!t)throw new Error('Missing "event" in Apdex start event');if(!t.task)throw new Error('Missing "task" in Apdex start event');if("string"!=typeof t.task)throw new Error('Invalid "task" in Apdex start event');if(t.taskId&&"string"!=typeof t.taskId)throw new Error('Invalid "taskId" in Apdex start event')},this._validateStopEvent=function(t){if(!t)throw new Error('Missing "event" in Apdex stop event');if(!t.task)throw new Error('Missing "task" in Apdex stop event');if("string"!=typeof t.task)throw new Error('Invalid "task" in Apdex stop event');if(t.taskId&&"string"!=typeof t.taskId)throw new Error('Invalid "taskId" in Apdex stop event');if(!t.type)throw new Error('Missing "type" in Apdex stop event');if(t.type&&!(0,y.isType)(y.apdexType,t.type))throw new Error('Invalid "type" in Apdex stop event');if(t.threshold&&"number"!=typeof t.threshold)throw new Error('Invalid "threshold" in Apdex stop event');if(!t.startTime&&t.type===y.apdexType.TRANSITION){var e=r._getEventKey(t);if(!r._startedEvents.has(e))throw new Error('Apdex event transition "'+e+'" was not started')}if(t.startTime&&!("number"==typeof t.startTime&&t.startTime>=0))throw new Error('Invalid "startTime" in Apdex stop event');if(t.stopTime&&"number"!=typeof t.stopTime)throw new Error('Invalid "stopTime" in Apdex stop event');if(t.stopTime<=t.startTime)throw new Error('"stopTime" should be greater than "startTime" in Apdex stop event')},this._shouldSendEvent=function(t){return!!t&&"number"==typeof t.apdex},this._sendEvent=function(t,e){r._shouldSendEvent(t)&&r._onEvent({source:"ui",action:"readyForUser",actionSubject:"ui",attributes:(0,s.default)({},t.additionalAttributes,{task:t.task,taskId:t.taskId,type:t.type,threshold:t.threshold||r._threshold,apdex:t.apdex,startTime:t.startTime,stopTime:t.stopTime,duration:t.duration,isActiveTab:t.isActiveTab})},e)},!e)throw new Error("Missing onEvent callback");if("function"!=typeof e)throw new Error("Invalid onEvent, must be function");if(!(n instanceof v.default))throw new Error("Invalid pageVisibility, must be PageVisibility class");this._startedEvents=new o.default,this._performance=new p.default,this._onEvent=e,this._threshold=1e3,this._wasPreviouslyHidden=n.getIsHidden(),this._isActiveEvents=new o.default,this._pageVisibility=n,this._pageVisibility.addCallback("apdexEvent",function(t){r.onVisibilityChange(!t)})}return(0,f.default)(t,[{key:"start",value:function(t){if(this._validateStartEvent(t),this._performance.isAvailable()){var e=this._getEventKey(t),n=e+"-start";this._startedEvents.set(e,!0),this._isActiveEvents.set(e,!this._pageVisibility.getIsHidden()),this._performance.clearMarks(n),this._performance.mark(n)}}},{key:"getStart",value:function(t){if(this._validateStartEvent(t),this._performance.isAvailable()){var e=this._getEventKey(t),n=e+"-start";return this._getEventTimingByName(n)}}},{key:"stop",value:function(t,e){if(this._validateStopEvent(t),this._performance.isAvailable()){var n=this._getApdexFields(t),r=this._getVisibilityFields(t);this._sendEvent((0,s.default)({},t,n,r),e)}}},{key:"onVisibilityChange",value:function(t){var e=this;t||(this._wasPreviouslyHidden=!0,this._isActiveEvents.forEach(function(t,n){return e._isActiveEvents.set(n,!1)}))}}]),t}();e.default=m},function(t,e,n){n(72),n(33),n(37),n(307),n(313),t.exports=n(0).Map},function(t,e,n){"use strict";var r=n(308);t.exports=n(309)("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=r.getEntry(this,t);return e&&e.v},set:function(t,e){return r.def(this,0===t?0:t,e)}},r,!0)},function(t,e,n){"use strict";var r=n(8).f,i=n(45),o=n(76),a=n(19),s=n(75),u=n(42),c=n(49),l=n(60),f=n(99),d=n(105),p=n(9),h=n(47).fastKey,v=p?"_s":"size",y=function(t,e){var n,r=h(e);if("F"!==r)return t._i[r];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,e,n,l){var f=t(function(t,r){s(t,f,e,"_i"),t._i=i(null),t._f=void 0,t._l=void 0,t[v]=0,void 0!=r&&c(r,n,t[l],t)});return o(f.prototype,{clear:function(){for(var t=this,e=t._i,n=t._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete e[n.i];t._f=t._l=void 0,t[v]=0},delete:function(t){var e=this,n=y(e,t);if(n){var r=n.n,i=n.p;delete e._i[n.i],n.r=!0,i&&(i.n=r),r&&(r.p=i),e._f==n&&(e._f=r),e._l==n&&(e._l=i),e[v]--}return!!n},forEach:function(t){s(this,f,"forEach");for(var e,n=a(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.n:this._f;)for(n(e.v,e.k,this);e&&e.r;)e=e.p},has:function(t){return!!y(this,t)}}),p&&r(f.prototype,"size",{get:function(){return u(this[v])}}),f},def:function(t,e,n){var r,i,o=y(t,e);return o?o.v=n:(t._l=o={i:i=h(e,!0),k:e,v:n,p:r=t._l,n:void 0,r:!1},t._f||(t._f=o),r&&(r.n=o),t[v]++,"F"!==i&&(t._i[i]=o)),t},getEntry:y,setStrong:function(t,e,n){l(t,e,function(t,e){this._t=t,this._k=e,this._l=void 0},function(){for(var t=this,e=t._k,n=t._l;n&&n.r;)n=n.p;return t._t&&(t._l=n=n?n.n:t._t._f)?"keys"==e?f(0,n.k):"values"==e?f(0,n.v):f(0,[n.k,n.v]):(t._t=void 0,f(1))},n?"entries":"values",!n,!0),d(e)}}},function(t,e,n){"use strict";var r=n(4),i=n(5),o=n(47),a=n(20),s=n(16),u=n(76),c=n(49),l=n(75),f=n(12),d=n(35),p=n(8).f,h=n(310)(0),v=n(9);t.exports=function(t,e,n,y,m,g){var _=r[t],b=_,w=m?"set":"add",I=b&&b.prototype,T={};return v&&"function"==typeof b&&(g||I.forEach&&!a(function(){(new b).entries().next()}))?(b=e(function(e,n){l(e,b,t,"_c"),e._c=new _,void 0!=n&&c(n,m,e[w],e)}),h("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(t){var e="add"==t||"set"==t;t in I&&(!g||"clear"!=t)&&s(b.prototype,t,function(n,r){if(l(this,b,t),!e&&g&&!f(n))return"get"==t&&void 0;var i=this._c[t](0===n?0:n,r);return e?this:i})}),"size"in I&&p(b.prototype,"size",{get:function(){return this._c.size}})):(b=y.getConstructor(e,t,m,w),u(b.prototype,n),o.NEED=!0),d(b,t),T[t]=b,i(i.G+i.W+i.F,T),g||y.setStrong(b,t,m),b}},function(t,e,n){var r=n(19),i=n(64),o=n(36),a=n(65),s=n(311);t.exports=function(t,e){var n=1==t,u=2==t,c=3==t,l=4==t,f=6==t,d=5==t||f,p=e||s;return function(e,s,h){for(var v,y,m=o(e),g=i(m),_=r(s,h,3),b=a(g.length),w=0,I=n?p(e,b):u?p(e,0):void 0;b>w;w++)if((d||w in g)&&(v=g[w],y=_(v,w,m),t))if(n)I[w]=y;else if(y)switch(t){case 3:return!0;case 5:return v;case 6:return w;case 2:I.push(v)}else if(l)return!1;return f?-1:c||l?l:I}}},function(t,e,n){var r=n(312);t.exports=function(t,e){return new(r(t))(e)}},function(t,e,n){var r=n(12),i=n(100),o=n(3)("species");t.exports=function(t){var e;return i(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!i(e.prototype)||(e=void 0),r(e)&&null===(e=e[o])&&(e=void 0)),void 0===e?Array:e}},function(t,e,n){var r=n(5);r(r.P+r.R,"Map",{toJSON:n(314)("Map")})},function(t,e,n){var r=n(48),i=n(315);t.exports=function(t){return function(){if(r(this)!=t)throw TypeError(t+"#toJSON isn't generic");return i(this)}}},function(t,e,n){var r=n(49);t.exports=function(t,e){var n=[];return r(t,!1,n.push,n,e),n}},function(t,e,n){n(317);var r=n(0).Object;t.exports=function(t,e,n){return r.defineProperty(t,e,n)}},function(t,e,n){var r=n(5);r(r.S+r.F*!n(9),"Object",{defineProperty:n(8).f})},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),o=r(i),a=n(32),s=r(a),u=function(){function t(){(0,o.default)(this,t),this._performance=window.performance}return(0,s.default)(t,[{key:"clearMarks",value:function(){var t;this._performance&&this._performance.clearMarks&&(t=this._performance).clearMarks.apply(t,arguments)}},{key:"mark",value:function(){var t;this._performance&&this._performance.mark&&(t=this._performance).mark.apply(t,arguments)}},{key:"getEntriesByName",value:function(){var t;return this._performance&&this._performance.getEntriesByName?(t=this._performance).getEntriesByName.apply(t,arguments):[]}},{key:"getTimeOrigin",value:function(){return this._performance&&(this._performance.timeOrigin||this._performance.timing)?this._performance.timeOrigin||this._performance.timing.navigationStart:0}},{key:"now",value:function(){return this._performance&&this._performance.now?this._performance.now():Date.now?Date.now():+new Date}},{key:"isAvailable",value:function(){return!!(this._performance&&this._performance.clearMarks&&this._performance.mark&&this._performance.getEntriesByName&&this._performance.timing)}}]),t}();e.default=u},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),o=r(i),a=n(32),s=r(a),u=n(141),c=r(u),l=n(91),f=r(l),d="tab.id",p=function(){function t(){var e=this;(0,o.default)(this,t),this._generateNewTabId=function(){var t=(0,c.default)();return e._safeSessionStorage.setItem(d,t),t},this._safeSessionStorage=new f.default}return(0,s.default)(t,[{key:"getCurrentTabId",value:function(){var t=this._safeSessionStorage.getItem(d);return t||(t=this._generateNewTabId()),t}}]),t}();e.default=p},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),o=r(i),a=n(32),s=r(a),u=n(133),c=r(u),l="session.id",f="session.expiry",d=/^\d+$/,p=18e5,h=function(){function t(e){var n=this;(0,o.default)(this,t),this._generateNewSessionId=function(){var t=Date.now().toString();return n._safeLocalStorage.setItem(l,t),t},this._updateSessionExpiry=function(){var t=Date.now()+n._sessionExpiryTime;return n._safeLocalStorage.setItem(f,t),t},this._sessionExpiryTime=e?e.sessionExpiryTime||p:p,this._safeLocalStorage=new c.default}return(0,s.default)(t,[{key:"getCurrentSessionId",value:function(){var t=this._safeLocalStorage.getItem(l),e=parseInt(this._safeLocalStorage.getItem(f),10);return this._updateSessionExpiry(),!t||e<=Date.now()||isNaN(e)?this._generateNewSessionId():d.test(t)?t:this._generateNewSessionId()}}]),t}();e.default=h},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(14),o=r(i),a=n(13),s=r(a),u=n(58),c=r(u),l=n(50),f=r(l),d=n(74),p=r(d),h=n(2),v=r(h),y=n(142),m=n(141),g=r(m),_=n(143),b=n(92),w=r(b),I=n(15),T=n(91),E=r(T),x="taskSessionsInit",S=function t(){(0,v.default)(this,t),k.call(this);var e=Date.now();this._safeSessionStorage=new E.default;try{this._taskSessionsNotRecentlyInitialised(e)&&(this._writeToSessionStorage({}),this._safeSessionStorage.setItem(x,e))}catch(t){}},k=function(){var t=this;this._taskSessionsNotRecentlyInitialised=function(e){return null===t._safeSessionStorage.getItem("taskSessions")||null===t._safeSessionStorage.getItem(x)||t._safeSessionStorage.getItem(x)<e-3e3},this._removeTaskSessionPrefix=function(t,e){return e.split("awc.")[1]},this._isTaskSessionQueryParam=function(t,e){return e.startsWith("awc.")},this.getAllTaskSessions=function(){try{return JSON.parse(t._safeSessionStorage.getItem("taskSessions"))}catch(t){return{}}},this._writeToSessionStorage=function(e){try{t._safeSessionStorage.setItem("taskSessions",(0,p.default)(e))}catch(t){}},this._appendTaskSessions=function(e){var n=t.getAllTaskSessions(),r=null===n?e:(0,f.default)(n,e);t._writeToSessionStorage(r)},this.createTaskSession=function(e){var n=(0,g.default)(),r={};return r[e]=n,t._appendTaskSessions(r),n},this.createTaskSessionWithProvidedId=function(e,n){if("string"!=typeof n)throw new TypeError("invalid taskSessionId, must be string");var r={};r[e]=n,t._appendTaskSessions(r)},this.completeTaskSession=function(e){var n=t.getAllTaskSessions();delete n[e],t._writeToSessionStorage(n)},this.formatTaskSessionQueryString=function(e){var n=e.uri,r=e.includedTaskSessions,i=(0,y.parseUrl)(n),a=i.url,u=i.query,l=t.getAllTaskSessions(),f=r?(0,_.pick)(l,r):(0,_.omit)(l,(0,c.default)(I.originTracingType));if(0===(0,s.default)(f).length)return n;var d=(0,o.default)({},(0,_.mapKeys)(f,function(t,e){return"awc."+e}),u);return a+"?"+(0,y.stringify)(d)},this.stripQueryParameters=function(){var e=(0,_.mapKeys)((0,w.default)(t._isTaskSessionQueryParam),t._removeTaskSessionPrefix);t._appendTaskSessions(e)}};e.default=S},function(t,e,n){"use strict";t.exports=function(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}},function(t,e,n){"use strict";function r(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/
var i=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(t){r[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,s,u=r(t),c=1;c<arguments.length;c++){n=Object(arguments[c]);for(var l in n)o.call(n,l)&&(u[l]=n[l]);if(i){s=i(n);for(var f=0;f<s.length;f++)a.call(n,s[f])&&(u[s[f]]=n[s[f]])}}return u}},function(t,e,n){"use strict";function r(t,e){try{return decodeURIComponent(t.join(""))}catch(t){}if(1===t.length)return t;e=e||1;var n=t.slice(0,e),i=t.slice(e);return Array.prototype.concat.call([],r(n),r(i))}function i(t){try{return decodeURIComponent(t)}catch(i){for(var e=t.match(a),n=1;n<e.length;n++)t=r(e,n).join(""),e=t.match(a);return t}}function o(t){for(var e={"%FE%FF":"","%FF%FE":""},n=s.exec(t);n;){try{e[n[0]]=decodeURIComponent(n[0])}catch(t){var r=i(n[0]);r!==n[0]&&(e[n[0]]=r)}n=s.exec(t)}e["%C2"]="";for(var o=Object.keys(e),a=0;a<o.length;a++){var u=o[a];t=t.replace(new RegExp(u,"g"),e[u])}return t}var a=new RegExp("%[a-f0-9]{2}","gi"),s=new RegExp("(%[a-f0-9]{2})+","gi");t.exports=function(t){if("string"!=typeof t)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch(e){return o(t)}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(50),o=r(i),a=n(144),s=r(a),u=n(58),c=r(u),l=n(13),f=r(l),d=n(2),p=r(d),h=n(92),v=r(h),y=n(15),m=function t(){(0,p.default)(this,t),this.handleOriginParameters=function(t,e){var n=(0,f.default)(t);if(!n.length>0)throw new Error("Empty parameter mapping provided");var r=n.filter(function(t){return(0,c.default)(y.originTracingType).indexOf(t)<0});if(r.length>0)throw new Error("Invalid Origin Tracing Parameter(s) supplied: "+r.join()+"!");var i=function(t,e){return n.indexOf(e)>=0},a=(0,v.default)(i,e),u=function(e){var n=t[e](a[e]);return(0,s.default)({},e,n)};return(0,f.default)(a).map(u).reduce(function(t,e){return(0,o.default)(t,e)},{})},this._originStore={}};e.default=m},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){return{tenantIdType:t.tenantIdType,tenantId:t.tenantId}}function o(t){return{userIdType:t.userIdType}}function a(t){return{orgId:t.orgId}}function s(t,e){return void 0===e?t:e}function u(t,e){var n=e||{};return{env:s(t.env,n.env),product:s(t.product,n.product),subproduct:s(t.subproduct(),n.subproduct),version:s(t.version,n.version),origin:s(t.origin,n.origin),platform:s(t.platform,n.platform)}}function c(t){return(0,O.isPlainObject)(t)&&(0,x.default)(t).length>0}function l(t,e){return c(e)?(0,T.default)({},t,e):void 0}function f(t){return l("attributes",t)}function d(t){var e={};return(0,x.default)(t).forEach(function(n){var r=t[n];e[n]={id:r.id,type:r.type}}),e}function p(t){if(c(t))return l("containers",d(t))}function h(t){return l("nonPrivacySafeAttributes",t)}function v(t,e,n,r,s,c,l,d,v,y,m){var g=u(t),_=i(e),b=o(n),I=a(y),T={title:"",path:"",url:"",referrer:"",search:"",eventType:S.eventType.SCREEN};return(0,w.default)({},g,_,b,I,T,f(r),h(s),p(m),{tags:c,tabId:l,sessionId:d,taskSessions:v})}function y(t){return t.actionSubject+" "+t.action}function m(t){var e=window.screen||{};return{context:{locale:t.locale,screen:{width:e.width,height:e.height,density:window.devicePixelRatio},library:{name:"analytics.js",version:A.default}}}}function g(t){return{env:t.env,product:t.product,subproduct:t.subproduct,version:t.version,origin:t.origin,platform:t.platform}}function _(t,e,n,r,s,c,l,f,d){var h=u(t,g(r)),v=i(e),y=a(d),m=o(n),_=(0,w.default)({containerType:r.containerType,containerId:r.containerId,source:r.source,objectType:r.objectType,objectId:r.objectId,actionSubject:r.actionSubject,action:r.action,actionSubjectId:r.actionSubjectId,attributes:r.attributes,nonPrivacySafeAttributes:r.nonPrivacySafeAttributes,tags:r.tags,eventType:s},p(r.containers));return(0,w.default)({},h,v,y,m,_,{tabId:c,sessionId:l,taskSessions:f})}Object.defineProperty(e,"__esModule",{value:!0});var b=n(14),w=r(b),I=n(144),T=r(I),E=n(13),x=r(E);e.filterAndBuildContainers=d,e.buildContainersWithName=p,e.buildScreenEvent=v,e.buildActionName=y,e.buildContext=m,e.extractProductOverrides=g,e.buildActionEvent=_;var S=n(15),k=n(327),A=r(k),O=n(145)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default="1.12.0"},function(t,e,n){"use strict";function r(t,e){return a.saveEvent(e),t&&"function"==typeof t?function(){t(e)}:null}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var i=n(329),o=function(t){return t&&t.__esModule?t:{default:t}}(i),a=new o.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),o=r(i),a=n(55),s=r(a),u=function t(){var e=this;(0,o.default)(this,t),this._bind=function(){window.testAnalytics||(window.testAnalytics={eventCache:[],events:function(){return window.testAnalytics.eventCache},clear:function(){window.testAnalytics.eventCache=[],localStorage.removeItem("awc.ui.viewed.last.sent"),localStorage.removeItem("awc-staging.ui.viewed.last.sent"),localStorage.removeItem("awc-dev.ui.viewed.last.sent"),localStorage.removeItem("awc-local.ui.viewed.last.sent")}})},this._cache=function(t){window.testAnalytics.eventCache.length>=100&&(window.testAnalytics.eventCache=window.testAnalytics.eventCache.slice(1,window.testAnalytics.eventCache.length)),window.testAnalytics.eventCache.push(t)},this._shouldCacheEvent=function(){return!!s.default.get("atlassian_analytics_debug")},this.saveEvent=function(t){t&&e._shouldCacheEvent()&&(window.testAnalytics||e._bind(),t.tags instanceof Array?t.tags.push("synthetic"):t.tags=["synthetic"],e._cache(t))},this._shouldCacheEvent()&&this._bind()};e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n="function"==typeof t;return function(){if(n)try{return t()}catch(t){return void console.error(e+" - "+t.message)}return t}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n){var r=(0,l.default)({action:t},n);return r.attributes=(0,l.default)({},e,r.attributes),r}Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),a=r(o),s=n(32),u=r(s),c=n(14),l=r(c),f=function(){function t(e,n){(0,a.default)(this,t),this._onEvent=e,this._baseEvent=n,this._searchStartedTime=null,this._lastQueryResultsTime=null,this._queryLength=null,this._baseEvent=(0,l.default)({},n)}return(0,u.default)(t,[{key:"search",value:function(t){if(!t&&""!==t)throw new Error("Missing query param");this._searchStartedTime=Date.now(),this._queryLength=(t||"").length}},{key:"searched",value:function(t){if(!t)throw new Error("Missing results param");if(null===this._queryLength)throw new Error("search() must be called before searched().");var e=Date.now()-this._searchStartedTime;this._lastQueryResultsTime=Date.now(),this._lastResults=t;var n={responseTimeMs:e,queryLength:this._queryLength,results:t},r=i("searched",n,this._baseEvent);this._onEvent(r)}},{key:"selected",value:function(t){if(!t&&0!==t)throw new Error("Missing selectionIndex param");if(!this._lastQueryResultsTime)throw new Error("searched() must be called before selected().");var e=Date.now(),n=e-this._lastQueryResultsTime,r=e-this._searchStartedTime,o=this._lastResults[t],a={queryLength:this._queryLength,selectionIndex:t,selectionTimeMs:n,searchTimeMs:r,selectedResultValue:o},s=i("selected",a,this._baseEvent);this._onEvent(s)}}]),t}();e.default=f},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(14),o=r(i),a=n(2),s=r(a),u=n(333),c=r(u),l=n(93),f={initialPollInterval:5,pollBackoffRate:2,idleTimeout:30},d=function t(e,n,r,i){if((0,s.default)(this,t),p.call(this),!e)throw new Error("trackCallback is required for DwellTimeHelper");(0,l.validateDwellBaseEvent)(n),this._trackCallback=e,this._eventData=n,this._searchSessionId=r,this._timing=(0,o.default)({},f,i)},p=function(){var t=this;this.start=function(){if(c.default.active)throw new Error("DwellTimeHelper should only be initialised once per page load.");t._initDwellTimeCounterAndPolling(),window.addEventListener("beforeunload",function(){t.stop()})},this.stop=function(){c.default.active&&t._sendDwellEvent(t._eventData,t._searchSessionId,!0),c.default.stopAllTimers(),c.default.resetAllRecordedPageTimes(),c.default.timeElapsedCallbacks=[]},this.newPage=function(e,n){(0,l.validateDwellBaseEvent)(e),t.stop(),t._eventData=e,t._searchSessionId=n,t._initDwellTimeCounterAndPolling()},this._initDwellTimeCounterAndPolling=function(){c.default.initialize({idleTimeoutInSeconds:t._timing.idleTimeout}),t._pollDwellTime(t._timing.initialPollInterval,t._searchSessionId,t._eventData)},this._pollDwellTime=function(e,n,r){c.default.callAfterTimeElapsedInSeconds(e,function(){t._sendDwellEvent(r,n,!1),t._pollDwellTime(e*t._timing.pollBackoffRate,n,r)})},this._sendDwellEvent=function(e,n,r){var i={dwellTime:c.default.getTimeOnCurrentPageInMilliseconds(),searchReferrer:n,finalDwellEvent:r};t._trackCallback({action:"dwelled",actionSubject:e.actionSubject,actionSubjectId:e.actionSubjectId,source:e.source,containerType:e.containerType,containerId:e.containerId,containers:e.containers,objectType:e.objectType,objectId:e.objectId,attributes:(0,o.default)({},i,e.attributes),tags:e.tags})}};e.default=d},function(t,e,n){var r,i;(function(){!function(n,o){if(void 0!==t&&t.exports)return t.exports=o();r=[],void 0!==(i=function(){return n.TimeMe=o()}.apply(e,r))&&(t.exports=i)}(this,function(){var t={startStopTimes:{},idleTimeoutMs:3e4,currentIdleTimeMs:0,checkStateRateMs:250,active:!1,idle:!1,currentPageName:"default-page-name",timeElapsedCallbacks:[],userLeftCallbacks:[],userReturnCallbacks:[],trackTimeOnElement:function(e){var n=document.getElementById(e);n&&(n.addEventListener("mouseover",function(){t.startTimer(e)}),n.addEventListener("mousemove",function(){t.startTimer(e)}),n.addEventListener("mouseleave",function(){t.stopTimer(e)}),n.addEventListener("keypress",function(){t.startTimer(e)}),n.addEventListener("focus",function(){t.startTimer(e)}))},getTimeOnElementInSeconds:function(e){return t.getTimeOnPageInSeconds(e)||0},startTimer:function(e){if(e||(e=t.currentPageName),void 0===t.startStopTimes[e])t.startStopTimes[e]=[];else{var n=t.startStopTimes[e],r=n[n.length-1];if(void 0!==r&&void 0===r.stopTime)return}t.startStopTimes[e].push({startTime:new Date,stopTime:void 0}),t.active=!0},stopAllTimers:function(){for(var e=Object.keys(t.startStopTimes),n=0;n<e.length;n++)t.stopTimer(e[n])},stopTimer:function(e){e||(e=t.currentPageName);var n=t.startStopTimes[e];void 0!==n&&0!==n.length&&(void 0===n[n.length-1].stopTime&&(n[n.length-1].stopTime=new Date),t.active=!1)},getTimeOnCurrentPageInSeconds:function(){return t.getTimeOnPageInSeconds(t.currentPageName)},getTimeOnPageInSeconds:function(e){return void 0===t.getTimeOnPageInMilliseconds(e)?void 0:t.getTimeOnPageInMilliseconds(e)/1e3},getTimeOnCurrentPageInMilliseconds:function(){return t.getTimeOnPageInMilliseconds(t.currentPageName)},getTimeOnPageInMilliseconds:function(e){var n=t.startStopTimes[e];if(void 0!==n){for(var r=0,i=0;i<n.length;i++){var o=n[i].startTime,a=n[i].stopTime;void 0===a&&(a=new Date),r+=a-o}return Number(r)}},getTimeOnAllPagesInSeconds:function(){for(var e=[],n=Object.keys(t.startStopTimes),r=0;r<n.length;r++){var i=n[r],o=t.getTimeOnPageInSeconds(i);e.push({pageName:i,timeOnPage:o})}return e},setIdleDurationInSeconds:function(e){var n=parseFloat(e);if(!1!==isNaN(n))throw{name:"InvalidDurationException",message:"An invalid duration time ("+e+") was provided."};return t.idleTimeoutMs=1e3*e,this},setCurrentPageName:function(e){return t.currentPageName=e,this},resetRecordedPageTime:function(e){delete t.startStopTimes[e]},resetAllRecordedPageTimes:function(){for(var e=Object.keys(t.startStopTimes),n=0;n<e.length;n++)t.resetRecordedPageTime(e[n])},resetIdleCountdown:function(){t.idle&&t.triggerUserHasReturned(),t.idle=!1,t.currentIdleTimeMs=0},callWhenUserLeaves:function(t,e){this.userLeftCallbacks.push({callback:t,numberOfTimesToInvoke:e})},callWhenUserReturns:function(t,e){this.userReturnCallbacks.push({callback:t,numberOfTimesToInvoke:e})},triggerUserHasReturned:function(){if(!t.active)for(var e=0;e<this.userReturnCallbacks.length;e++){var n=this.userReturnCallbacks[e],r=n.numberOfTimesToInvoke;(isNaN(r)||void 0===r||r>0)&&(n.numberOfTimesToInvoke-=1,n.callback())}t.startTimer()},triggerUserHasLeftPage:function(){if(t.active)for(var e=0;e<this.userLeftCallbacks.length;e++){var n=this.userLeftCallbacks[e],r=n.numberOfTimesToInvoke;(isNaN(r)||void 0===r||r>0)&&(n.numberOfTimesToInvoke-=1,n.callback())}t.stopAllTimers()},callAfterTimeElapsedInSeconds:function(e,n){t.timeElapsedCallbacks.push({timeInSeconds:e,callback:n,pending:!0})},checkState:function(){for(var e=0;e<t.timeElapsedCallbacks.length;e++)t.timeElapsedCallbacks[e].pending&&t.getTimeOnCurrentPageInSeconds()>t.timeElapsedCallbacks[e].timeInSeconds&&(t.timeElapsedCallbacks[e].callback(),t.timeElapsedCallbacks[e].pending=!1);!1===t.idle&&t.currentIdleTimeMs>t.idleTimeoutMs?(t.idle=!0,t.triggerUserHasLeftPage()):t.currentIdleTimeMs+=t.checkStateRateMs},visibilityChangeEventName:void 0,hiddenPropName:void 0,listenForVisibilityEvents:function(){void 0!==document.hidden?(t.hiddenPropName="hidden",t.visibilityChangeEventName="visibilitychange"):void 0!==document.mozHidden?(t.hiddenPropName="mozHidden",t.visibilityChangeEventName="mozvisibilitychange"):void 0!==document.msHidden?(t.hiddenPropName="msHidden",t.visibilityChangeEventName="msvisibilitychange"):void 0!==document.webkitHidden&&(t.hiddenPropName="webkitHidden",t.visibilityChangeEventName="webkitvisibilitychange"),document.addEventListener(t.visibilityChangeEventName,function(){document[t.hiddenPropName]?t.triggerUserHasLeftPage():t.triggerUserHasReturned()},!1),window.addEventListener("blur",function(){t.triggerUserHasLeftPage()}),window.addEventListener("focus",function(){t.triggerUserHasReturned()}),document.addEventListener("mousemove",function(){t.resetIdleCountdown()}),document.addEventListener("keyup",function(){t.resetIdleCountdown()}),document.addEventListener("touchstart",function(){t.resetIdleCountdown()}),window.addEventListener("scroll",function(){t.resetIdleCountdown()}),setInterval(function(){t.checkState()},t.checkStateRateMs)},websocket:void 0,websocketHost:void 0,setUpWebsocket:function(e){if(window.WebSocket&&e){var n=e.websocketHost;try{t.websocket=new WebSocket(n),window.onbeforeunload=function(n){t.sendCurrentTime(e.appId)},t.websocket.onopen=function(){t.sendInitWsRequest(e.appId)},t.websocket.onerror=function(t){console&&console.log("Error occurred in websocket connection: "+t)},t.websocket.onmessage=function(t){console&&console.log(t.data)}}catch(t){console&&console.error("Failed to connect to websocket host.  Error:"+t)}}return this},websocketSend:function(e){t.websocket.send(JSON.stringify(e))},sendCurrentTime:function(e){var n=t.getTimeOnCurrentPageInMilliseconds(),r={type:"INSERT_TIME",appId:e,timeOnPageMs:n,pageName:t.currentPageName};t.websocketSend(r)},sendInitWsRequest:function(e){var n={type:"INIT",appId:e};t.websocketSend(n)},initialize:function(e){var n=t.idleTimeoutMs||30,r=t.currentPageName||"default-page-name",i=void 0;e&&(n=e.idleTimeoutInSeconds||n,r=e.currentPageName||r,i=e.websocketOptions),t.setIdleDurationInSeconds(n).setCurrentPageName(r).setUpWebsocket(i).listenForVisibilityEvents(),t.startTimer()}};return t})}).call(this)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(14),o=r(i),a=n(2),s=r(a),u=n(335),c=r(u),l=n(93),f={initialPollInterval:5e3,idleTimeout:3e4,multiplierCallback:function(t){return t+t}},d=function t(e,n,r,i){if((0,s.default)(this,t),p.call(this),!e)throw new Error("trackCallback is required for DwellTimeHelper");(0,l.validateDwellBaseEvent)(n),this._trackCallback=e,this._eventData=n,this._searchSessionId=r,this._timing=(0,o.default)({},f,i),this.browserInteractionTime=new c.default({idleTimeoutMs:this._timing.idleTimeout,checkCallbacksIntervalMs:500})},p=function(){var t=this;this.start=function(){t.browserInteractionTime.startTimer(),t.browserInteractionTime.addTimeIntervalEllapsedCallback({callback:function(e){return t._sendDwellEvent(t._eventData,t._searchSessionId,e,!1)},timeInMilliseconds:t._timing.initialPollInterval,multiplier:t._timing.multiplierCallback}),window.addEventListener("beforeunload",t._onBeforeUnload)},this.stop=function(){t.browserInteractionTime.isRunning()&&t._sendDwellEvent(t._eventData,t._searchSessionId,t.browserInteractionTime.getTimeInMilliseconds(),!0),t.browserInteractionTime.stopTimer()},this.newPage=function(e,n){(0,l.validateDwellBaseEvent)(e),t.stop(),t.browserInteractionTime.reset(),t.setEventData(e),t.setSearchSessionId(n),t.start()},this.setEventData=function(e){t._eventData=e},this.getEventData=function(){return t._eventData},this.setSearchSessionId=function(e){t._searchSessionId=e},this.getSearchSessionId=function(){return t._searchSessionId},this.destroy=function(){t.browserInteractionTime.destroy(),window.removeEventListener("beforeunload",t._onBeforeUnload)},this._onBeforeUnload=function(){t.stop(),t.destroy()},this._sendDwellEvent=function(e,n,r,i){var a={dwellTime:r,searchReferrer:n,finalDwellEvent:i};t._trackCallback({action:"dwelled",actionSubject:e.actionSubject,actionSubjectId:e.actionSubjectId,source:e.source,containerType:e.containerType,containerId:e.containerId,objectType:e.objectType,objectId:e.objectId,attributes:(0,o.default)({},a,e.attributes),tags:e.tags})}};e.default=d},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){function n(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function r(t){var e=T.call(t,x),n=t[x];try{t[x]=void 0;var r=!0}catch(t){}var i=E.call(t);return r&&(e?t[x]=n:delete t[x]),i}function i(t){return A.call(t)}function o(t){return null==t?void 0===t?C:j:M&&M in Object(t)?S(t):O(t)}function a(t){return null!=t&&"object"==typeof t}function s(t){return"symbol"==typeof t||R(t)&&P(t)==N}function u(t){if("number"==typeof t)return t;if(D(t))return L;if(f(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=f(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(U,"");var n=B.test(t);return n||X.test(t)?H(t.slice(2),n?2:8):F.test(t)?L:+t}function c(t,e,n){function r(e){var n=p,r=h;return p=h=void 0,b=e,y=t.apply(r,n)}function i(t){return b=t,m=setTimeout(s,e),w?r(t):y}function o(t){var n=t-g,r=t-b,i=e-n;return I?q(i,v-r):i}function a(t){var n=t-g,r=t-b;return void 0===g||n>=e||n<0||I&&r>=v}function s(){var t=_();if(a(t))return u(t);m=setTimeout(s,o(t))}function u(t){return m=void 0,T&&p?r(t):(p=h=void 0,y)}function c(){void 0!==m&&clearTimeout(m),b=0,p=g=h=m=void 0}function l(){return void 0===m?y:u(_())}function d(){var t=_(),n=a(t);if(p=arguments,h=this,g=t,n){if(void 0===m)return i(g);if(I)return m=setTimeout(s,e),r(g)}return void 0===m&&(m=setTimeout(s,e)),y}var p,h,v,y,m,g,b=0,w=!1,I=!1,T=!0;if("function"!=typeof t)throw new TypeError(W);return e=z(e)||0,f(n)&&(w=!!n.leading,I="maxWait"in n,v=I?V(z(n.maxWait)||0,e):v,T="trailing"in n?!!n.trailing:T),d.cancel=c,d.flush=l,d}function l(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new TypeError($);return f(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),G(t,e,{leading:r,maxWait:e,trailing:i})}var f=n,d="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},p="object"==typeof d&&d&&d.Object===Object&&d,h=p,v="object"==typeof self&&self&&self.Object===Object&&self,y=h||v||Function("return this")(),m=y,g=function(){return m.Date.now()},_=g,b=m.Symbol,w=b,I=Object.prototype,T=I.hasOwnProperty,E=I.toString,x=w?w.toStringTag:void 0,S=r,k=Object.prototype,A=k.toString,O=i,j="[object Null]",C="[object Undefined]",M=w?w.toStringTag:void 0,P=o,R=a,N="[object Symbol]",D=s,L=NaN,U=/^\s+|\s+$/g,F=/^[-+]0x[0-9a-f]+$/i,B=/^0b[01]+$/i,X=/^0o[0-7]+$/i,H=parseInt,z=u,W="Expected a function",V=Math.max,q=Math.min,G=c,$="Expected a function",K=l,J=["scroll","resize"],Q=["mousemove","keyup","keydown","touchstart","click","contextmenu"],Y=function(){function t(t){var e=t.timeIntervalEllapsedCallbacks,n=t.absoluteTimeEllapsedCallbacks,r=t.checkCallbacksIntervalMs,i=t.browserTabInactiveCallbacks,o=t.browserTabActiveCallbacks,a=t.idleTimeoutMs,s=this;this.onBrowserTabInactive=function(t){s.isRunning()&&s.stopTimer(),s.browserTabInactiveCallbacks.forEach(function(t){return t(s.getTimeInMilliseconds())})},this.onBrowserTabActive=function(t){s.isRunning()||s.startTimer(),s.browserTabActiveCallbacks.forEach(function(t){return t(s.getTimeInMilliseconds())})},this.onTimePassed=function(){s.absoluteTimeEllapsedCallbacks.forEach(function(t,e){var n=t.callback,r=t.pending,i=t.timeInMilliseconds;r&&i<=s.getTimeInMilliseconds()&&(n(s.getTimeInMilliseconds()),s.absoluteTimeEllapsedCallbacks[e].pending=!1)}),s.timeIntervalEllapsedCallbacks.forEach(function(t,e){var n=t.callback,r=t.timeInMilliseconds,i=t.multiplier;r<=s.getTimeInMilliseconds()&&(n(s.getTimeInMilliseconds()),s.timeIntervalEllapsedCallbacks[e].timeInMilliseconds=i(r))}),s.currentIdleTimeMs>=s.idleTimeoutMs&&s.isRunning()?(s.idle=!0,s.stopTimer()):s.currentIdleTimeMs+=s.checkCallbacksIntervalMs},this.resetIdleTime=function(){s.idle&&s.startTimer(),s.idle=!1,s.currentIdleTimeMs=0},this.registerEventListeners=function(){var t={passive:!0};window.addEventListener("blur",s.onBrowserTabInactive,t),window.addEventListener("focus",s.onBrowserTabActive,t);var e=K(s.resetIdleTime,2e3,{leading:!0,trailing:!1});J.forEach(function(n){window.addEventListener(n,e,t)}),Q.forEach(function(n){return document.addEventListener(n,e,t)})},this.unregisterEventListeners=function(){window.removeEventListener("blur",s.onBrowserTabInactive),window.removeEventListener("focus",s.onBrowserTabActive),J.forEach(function(t){return window.removeEventListener(t,s.resetIdleTime)}),Q.forEach(function(t){return document.removeEventListener(t,s.resetIdleTime)})},this.checkCallbacksOnInterval=function(){s.checkCallbackIntervalId=window.setInterval(function(){s.onTimePassed()},s.checkCallbacksIntervalMs)},this.startTimer=function(){s.checkCallbackIntervalId||s.checkCallbacksOnInterval();var t=s.times[s.times.length-1];t&&null===t.stop||(s.times.push({start:performance.now(),stop:null}),s.running=!0)},this.stopTimer=function(){s.times.length&&(s.times[s.times.length-1].stop=performance.now(),s.running=!1)},this.addTimeIntervalEllapsedCallback=function(t){s.timeIntervalEllapsedCallbacks.push(t)},this.addAbsoluteTimeEllapsedCallback=function(t){s.absoluteTimeEllapsedCallbacks.push(t)},this.addBrowserTabInactiveCallback=function(t){s.browserTabInactiveCallbacks.push(t)},this.addBrowserTabActiveCallback=function(t){s.browserTabActiveCallbacks.push(t)},this.getTimeInMilliseconds=function(){return s.times.reduce(function(t,e){return e.stop?t+=e.stop-e.start:t+=performance.now()-e.start,t},0)},this.isRunning=function(){return s.running},this.reset=function(){s.times=[]},this.destroy=function(){s.unregisterEventListeners(),s.checkCallbackIntervalId&&window.clearInterval(s.checkCallbackIntervalId)},this.running=!1,this.times=[],this.idle=!1,this.currentIdleTimeMs=0,this.marks={},this.measures={},this.browserTabActiveCallbacks=o||[],this.browserTabInactiveCallbacks=i||[],this.checkCallbacksIntervalMs=r||100,this.idleTimeoutMs=a||3e3,this.timeIntervalEllapsedCallbacks=e||[],this.absoluteTimeEllapsedCallbacks=n||[],this.registerEventListeners()}return t.prototype.mark=function(t){this.marks[t]||(this.marks[t]=[]),this.marks[t].push({time:this.getTimeInMilliseconds()})},t.prototype.getMarks=function(t){if(!(this.marks[t].length<1))return this.marks[t]},t.prototype.measure=function(t,e,n){var r=this.marks[e],i=r[r.length-1],o=this.marks[n],a=o[o.length-1];this.measures[t]||(this.measures[t]=[]),this.measures[t].push({name:t,startTime:i.time,duration:a.time-i.time})},t.prototype.getMeasures=function(t){if(this.measures[t]||!(this.measures[t].length<1))return this.measures[t]},t}();e.default=Y}.call(e,n(18))}])});;
;
/* module-key = 'com.atlassian.jira.jira-client-analytics-plugin:analytics-context-provider', location = 'jira-client-analytics-module/client-analytics/analytics-context.js' */
define("jira/analytics/context-provider",["wrm/data"],function(t){var n,i="com.atlassian.jira.jira-client-analytics-plugin:analytics-context-provider.client-analytic-descriptors";return{getContext:function(){return"undefined"==typeof n&&(n=t.claim(i)),n}}});;
;
/* module-key = 'com.atlassian.jira.jira-client-analytics-plugin:analytics-events-transformers', location = 'jira-client-analytics-module/client-analytics/transformers/issue-type.js' */
define("jira/analytics/transformers/issue-type",["jira/util/strings","underscore"],function(t,e){function r(e){if(o.hasOwnProperty(e)){var r=o[e];return t.camelCase(r.toLowerCase())}return"custom"}function n(t,e){return!o.hasOwnProperty(t)&&(o[t]=e,!0)}function a(t){e.defaults(o,t)}var s="Task",i="Sub-task",u="Bug",o={};return n(s,"Task"),n(i,"Sub-task"),n(u,"Bug"),{map:r,register:n,registerAll:a}});;
;
/* module-key = 'com.atlassian.jira.jira-client-analytics-plugin:analytics-events-transformers', location = 'jira-client-analytics-module/client-analytics/transformers/subproduct.js' */
define("jira/analytics/transformers/sub-product",function(){var r={"jira-software":"software","jira-servicedesk":"serviceDesk","jira-core":"core",portfolio:"portfolio",family:"platform",addon:"addon"};return function(o){return r.hasOwnProperty(o)?r[o]:"unknown"}});;
;
/* module-key = 'com.atlassian.jira.jira-client-analytics-plugin:analytics-web-client', location = 'jira-client-analytics-module/client-analytics/sub-product-resolver/sub-product-resolver.js' */
define("jira/analytics/sub-product-resolver",["jira/util/safe-logger","jira/featureflags/feature-manager"],function(e,n){var r=null,t=[],u=["software","serviceDesk","core","ops","polaris","portfolio","platform","addon","unknown"],i=function(){return null===r?(e.safeError("jira/analytics/sub-product-resolver","Sub product has not been set."),"unknown"):r},o=function(i){if(u.indexOf(i)!==-1){var o=i!==r;r=i,n.isFeatureEnabled("solutions-attribute-in-jsd-ui-viewed-analytics-event")&&o&&t.forEach(function(e){e(i)})}else e.safeError("jira/analytics/sub-product-resolver","Invalid sub-product set, ignoring: "+i)},a=function(e){return n.isFeatureEnabled("solutions-attribute-in-jsd-ui-viewed-analytics-event")&&"function"==typeof e?(t.push(e),function(){t=t.filter(function(n){return n!==e})}):function(){}};return{getSubProduct:i,setSubProduct:o,onChange:a}});;
;
/* module-key = 'com.atlassian.jira.jira-client-analytics-plugin:analytics-web-client', location = 'jira-client-analytics-module/client-analytics/solutions-attribute/solutions-attribute.js' */
define("jira/analytics/solutions-attribute",["jira/analytics/sub-product-resolver"],function(e){return function(){var r=e.getSubProduct();if("serviceDesk"===r)return{solutions:["jiraServiceManagement"]}}});;
;
/* module-key = 'com.atlassian.jira.jira-client-analytics-plugin:analytics-web-client', location = 'jira-client-analytics-module/client-analytics/embedded-product-resolver/embedded-product-resolver.js' */
define("jira/analytics/embedded-product-resolver",["jira/util/safe-logger"],function(n){function e(n){r.forEach(function(e){e(n)})}var r=[],t=!1,i=["confluence"];return{onChange:function(n){return r.push(n),function(){r=r.filter(function(e){return e!==n})}},set:function(r){i.indexOf(r)!==-1?(t=r,e(r)):n.safeError("jira.analytics.embedded-product","Invalid value for embedded product, ignoring "+r)},clear:function(){t=!1,e(!1)},get:function(){return t}}});;
;
/* module-key = 'com.atlassian.jira.jira-client-analytics-plugin:analytics-web-client', location = 'jira-client-analytics-module/client-analytics/analytics-web-client-with-session-attributes.js' */
define("jira/analytics/web-client-with-session-attributes",[],function(){var e=function(e){var n=document.querySelector("meta[name="+e+"]");if(n&&n.content)return n.content},n=function(){var n=e("ajs-search-session-id");return n?{searchSessionId:n,searchObjectId:e("ajs-search-object-id"),searchContainerId:e("ajs-search-container-id"),searchContentType:e("ajs-search-content-type")}:null},t=function(e,n){if(n){var t=e||{};return t.searchSessionId=t.searchSessionId||n.searchSessionId,t.searchObjectId=t.searchObjectId||n.searchObjectId,t.searchContainerId=t.searchContainerId||n.searchContainerId,t.searchContentType=t.searchContentType||n.searchContentType,t}return e};return function(e){var r=n();if(!r)return e;var s=Object.create(e);return s.sendScreenEvent=function(n,s,a){"object"==typeof n?(n.attributes=t(n.attributes,r),e.sendScreenEvent(n,s,a)):e.sendScreenEvent(n,s,t(a,r))},s.sendPageEvent=function(e,n){this.sendScreenEvent(e,n)},s.sendTrackEvent=function(n,s){var a=n||{};a.attributes=t(a.attributes,r),e.sendTrackEvent(a,s)},s.sendUIEvent=function(n,s){var a=n||{};a.attributes=t(a.attributes,r),e.sendUIEvent(a,s)},s}});;
;
/* module-key = 'com.atlassian.jira.jira-client-analytics-plugin:analytics-web-client', location = 'jira-client-analytics-module/client-analytics/analytics-web-client-with-custom-event.js' */
define("jira/analytics/analytics-web-client-with-custom-event",["jira/customevents/trigger-custom-event","jira/data/local-storage"],function(t,e){var n="legacy-gas-v3-event",i=function(){return e.getItem("__storejs_navigation-session-provider_navigationSessionId")||null},a=function(e){var a=i();if(a){var r="",s=e;"string"==typeof e?(r=e,s={attributes:{navigationSessionId:a}}):(r=e.actionSubject+" "+e.action,s=e,s.attributes=s.attributes||{},s.attributes.navigationSessionId=a),t.trigger(n,r,s)}},r=function(t){var e=i(),n=t||{};return e?(n.navigationSessionId=e,n):t};return function(t){var e=Object.create(t);return e.sendScreenEvent=function(e,n,i){"object"==typeof e?(e.attributes=r(e.attributes),t.sendScreenEvent(e,n,i)):t.sendScreenEvent(e,n,r(i)),a(e)},e.sendPageEvent=function(t,e){this.sendScreenEvent(t,e)},e.sendTrackEvent=function(e,n){var i=e||{};i.attributes=r(i.attributes),t.sendTrackEvent(i,n),a(i)},e.sendUIEvent=function(e,n){var i=e||{};i.attributes=r(i.attributes),t.sendUIEvent(i,n),a(i)},e}});;
;
/* module-key = 'com.atlassian.jira.jira-client-analytics-plugin:analytics-web-client', location = 'jira-client-analytics-module/client-analytics/analytics-web-client.js' */
define("jira/analytics/web-client",["jira/analytics/context-provider","analytics-web-client","jira/analytics/transformers/sub-product","jira/analytics","jira/analytics/sub-product-resolver","jira/analytics/solutions-attribute","jira/featureflags/feature-manager","jira/analytics/embedded-product-resolver"],function(e,t,n,a,r,i,s,c){var u={dev:t.envType.DEV,prod:t.envType.PROD,staging:t.envType.STAGING},o=function(e){return u[e]||t.envType.LOCAL},d=function(e){var t=document.querySelector("meta[name="+e+"]");if(t&&t.content)return t.content},l=function(){return d("ajs-user-locale")},y=e.getContext();r.setSubProduct(n(d("ajs-application-key")));var v=new t.default({env:o(y.env),product:"jira",subproduct:r.getSubProduct,version:"1.0.0",origin:t.originType.WEB,locale:l()},{useStargate:!0,useBatchQueue:!0});try{v.setTenantInfo(t.tenantType.CLOUD_ID,y.tenantId)}catch(e){a.send({name:"analytics.web.client.tenant.id.error",properties:{tenantId:y.tenantId,error:e.message}})}y.aid&&v.setUserInfo(t.userType.ATLASSIAN_ACCOUNT,y.aid),c.onChange(function(e){e?v.setEmbeddedProduct(e):v.clearEmbeddedProduct()});var b=function(){var e=i();e?v.setUIViewedAttributes(e):v.clearUIViewedAttributes()};s.isFeatureEnabled("solutions-attribute-in-jsd-ui-viewed-analytics-event")&&(b(),r.onChange(b));var p=require("jira/analytics/web-client-with-session-attributes"),f=p(v),j=require("jira/analytics/analytics-web-client-with-custom-event");return j(f)});;
;
/* module-key = 'com.atlassian.jira.jira-client-analytics-plugin:analytics-web-client', location = 'jira-client-analytics-module/client-analytics/helpers/typeahead-helper.js' */
define("jira/analytics/typeahead-helper",["analytics-web-client"],function(e){return e.TypeAheadHelper});;
;
/* module-key = 'jira.webresources:shifter', location = 'includes/jira/shifter/shifter.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.Shifter&&(JIRA.Templates.Shifter={}),JIRA.Templates.Shifter.dialog=function(e,t){return'<div class="aui-blanket shifter-dialog-blanket" tabindex="0" aria-hidden="false"></div><div class="shifter-dialog" id="'+soy.$$escapeHtml(e.id)+'"><form class="aui ajs-dirty-warning-exempt"><div id="'+soy.$$escapeHtml(e.id)+'-suggestions" class="aui-list"></div></form><div class="hint-container overflow-ellipsis" title="'+soy.$$escapeHtml("Pressing period (.) opens this dialog box")+'">'+soy.$$filterNoAutoescape("Pressing period (\u003ckbd\u003e.\u003c/kbd\u003e) opens this dialog box")+"</div></div>"},JIRA.Templates.Shifter.groupHeading=function(e,t){return'<div class="shifter-group-heading"><h5>'+soy.$$escapeHtml(e.groupName)+"</h5>"+(e.groupContext?'<span class="shifter-group-context">'+soy.$$escapeHtml(e.groupContext)+"</span>":"")+"</div>"};;
;
/* module-key = 'jira.webresources:shifter', location = '/includes/jira/shifter/ShifterAnalytics.js' */
define("jira/shifter/shifter-analytics",["jira/util/strings","jira/util/data/meta","underscore","exports"],function(e,t,n,i){function o(e){return l.indexOf(e)>=0}function r(e){return f.indexOf(e)>=0}function s(t,n,i){return n=c(n),t=t.toLowerCase(),o(i)||r(t)?t:"edit-fields"!==i||e.startsWith(n,"customfield_")?e.hashCode(t):n}function c(e){return n.isObject(e)&&n.has(e,"url")?e.url:n.isString(e)?e.toLowerCase():""}function a(e,t){d.sendUIEvent({source:"dotDialog",actionSubject:"link",action:"clicked",actionSubjectId:"suggestion",attributes:t})}function u(){var n,i=t.get("user-locale");return e.contains(i,"_")&&(n=i.split("_")[0]),n||"en"}var d=require("jira/analytics/web-client"),l=["admin","issue-actions"],f=["done","start progress","ready for review","stop progress","reopen","approve","reject","reopen and start progress"];i.shortcutPressed=function(){d.sendUIEvent({source:"dotDialog",actionSubject:"keyboardShortcut",action:"pressed",actionSubjectId:"dotDialogKeyboardShortcut"})},i.show=function(){d.sendScreenEvent({name:"dotDialog",attributes:{action:"viewed"}})},i.userTyping=function(){d.sendUIEvent({source:"dotDialog",actionSubject:"searchBox",action:"typed"})},i.selection=function(e,t,n){n&&t&&e&&a("selection",{group:n,selected:s(e,t,n),lang:u()})},i.selection.privacyPolicySafeGroups=l,i.selection.privacyPolicySafeLabels=f});;
;
/* module-key = 'jira.webresources:shifter', location = '/includes/jira/shifter/ShifterSelect.js' */
define("jira/shifter/shifter-select",["jira/util/formatter","jira/ajs/select/queryable-dropdown-select","jira/ajs/list/list-with-messages","jira/ajs/list/message-descriptor","jquery","underscore"],function(e,t,o,i,n,r){return t.extend({init:function(t){r.extend(t,{dropdownController:{setWidth:n.noop,setPosition:n.noop,onhide:n.noop,hide:n.noop,show:n.noop}}),this._super(t),this.$field.attr("aria-controls",this.options.element.attr("id")),this.$field.attr("placeholder","Find Actions..."),this.$dropDownIcon.click(r.bind(this.clear,this)),this._handleCharacterInput()},onEdit:function(){this.toggleClearButton(),this._handleCharacterInput()},clear:function(){this.$field.val("").focus(),this.onEdit()},toggleClearButton:function(){this.$dropDownIcon.toggleClass("aui-iconfont-remove",!!this.$field.val())},showLoading:function(){this._super(),this.$dropDownIcon.removeClass("aui-iconfont-remove")},hideLoading:function(){this._super(),this.toggleClearButton()},_handleCharacterInput:function(){this._super(!0),0===this.getQueryVal().length&&this.listController.moveToFirst()},_createListController:function(){var t=this;this.listController=new o({containerSelector:this.options.element,groupSelector:"ul.aui-list-section",scrollContainer:".aui-list-scroll",matchingStrategy:this.options.matchingStrategy,maxResultsDisplayedPerGroup:this.options.maxResultsDisplayedPerGroup,eventTarget:this.$field,hasLinks:!1,renderers:{suggestionGroupHeading:this._renders.suggestionGroupHeading},selectionHandler:function(o){var r=n(o.currentTarget).data();if(r&&r.descriptor instanceof i)return!1;var s=this.getFocused().data("descriptor"),a=s.meta().groupIndex,l=t.options.groups[a],c=s.value(),d=s.label();t.$dropDownIcon.removeClass("aui-iconfont-remove"),t.$field.val("Loading...").prop("disabled",!0),t.options.onSelection(l,c,d)}})},hideSuggestions:n.noop,_renders:{suggestionGroupHeading:function(e){return n(JIRA.Templates.Shifter.groupHeading({groupName:e.label(),groupContext:e.description()})).data("descriptor",e)},dropdownAndLoadingIcon:function(e){return n('<span class="icon noloading aui-icon aui-icon-small"><span>More</span></span>')}}})}),AJS.namespace("JIRA.ShifterComponent.ShifterSelect",null,require("jira/shifter/shifter-select"));;
;
/* module-key = 'jira.webresources:shifter', location = '/includes/jira/shifter/ShifterDialog.js' */
define("jira/shifter/shifter-dialog",["jira/jquery/deferred","jira/lib/class","jira/data/session-storage","jira/shifter/shifter-select","jira/ajs/list/group-descriptor","jira/ajs/list/item-descriptor-factory","jira/shifter/shifter-analytics","jira/featureflags/feature-manager","jquery","underscore"],function(t,e,i,s,n,r,o,a,u,d){var h=50;return e.extend({BLUR_DELAY:h,init:function(t,e,i){this.id=t,this.groups=e,this.options=i,this.userKeyStrokes=-1,o.show(),this._render(),this._destroyOnBlur(),this._preventFocusOnNonInputElements(),u(document).on("mousedown.shifterdialog."+t,d.bind(this._destroyOnMousedownOutside,this))},focus:function(){this.$dialog&&this.$dialog.find("input").focus()},destroy:function(){var t=this.$dialog;t&&(t.remove(),this.$dialog=null,u(document).off("mousedown.shifterdialog."+this.id))},destroyed:function(){return!this.$dialog},saveLastQuery:function(t){i.setItem("JIRA.Shifter.lastQuery",t)},getLastQuery:function(){return i.getItem("JIRA.Shifter.lastQuery")},enterLoadingState:function(){var t=this.$dialog;t.addClass("loading-action"),t.find(".aui-list").slideUp(200)},_isKeyboardButton:function(t){return t>47&&t<58||32===t||13===t||t>64&&t<91||t>95&&t<112||t>185&&t<193||t>218&&t<223},_render:function(){var t=JIRA.Templates.Shifter.dialog({id:this.id}),e=this.$dialog=u(t).appendTo("body"),i=this.shifterSelect=new s({id:this.id,element:e.find(".aui-list"),groups:this.groups,suggestionsHandler:this._makeSuggestionsHandler(),onSelection:d.bind(this._onSelection,this),maxResultsDisplayedPerGroup:this.options.maxResultsDisplayedPerGroup});this.getLastQuery()&&(i.$field.val(this.getLastQuery()).select(),i.onEdit()),i.$field.on("keyup",d.bind(function(t){var e=t.which;e===u.ui.keyCode.ESCAPE&&(t.stopPropagation(),this.destroy()),this.userKeyStrokes<1&&this._isKeyboardButton(e)&&(this.userKeyStrokes++,1===this.userKeyStrokes&&o.userTyping())},this)),AJS.currentLayerItem&&AJS.currentLayerItem.hide&&AJS.currentLayerItem.hide(),this._closeDropdownsIfNeeded()},_closeDropdownsIfNeeded:function(){u(".aui-dropdown2-trigger.active").trigger("aui-button-invoke")},_destroyOnBlur:function(){this.$dialog.find("input").blur(d.bind(function(){setTimeout(d.bind(function(){this.$dialog&&!u.contains(this.$dialog[0],document.activeElement)&&this.destroy()},this),this.BLUR_DELAY)},this))},_destroyOnMousedownOutside:function(t){0===this.$dialog.find(t.target).length&&t.target!==this.$dialog&&this.destroy()},_preventFocusOnNonInputElements:function(){var t=this.$dialog.find("input");this.$dialog.mousedown(function(e){u.inArray(e.target,t)===-1&&e.preventDefault()})},_makeSuggestionsHandler:function(){var i=this.groups;return e.extend({execute:function(e){var s=[],o=t(),u=i.length;return d.map(i,function(i,h){var l=i.getSuggestions(e);return a.isFeatureEnabled("project.config.dw.project.settings.switcher")&&(l.done&&"function"==typeof l.done||(l=t().resolve(l))),l.done(function(t){d.isArray(t)&&(s.push(new n({label:i.name,description:i.context,weight:i.weight,items:d.map(t,function(t){return r.createItemDescriptor(t,h)})})),s.sort(function(t,e){return t.weight()-e.weight()}))}).always(function(){u--,0===u&&o.resolve(s,e)})}),o}})},_onSelection:function(t,e,i){o.selection(i,e,t.id),this.saveLastQuery(i);var s=t.onSelection(e,i);s&&d.isFunction(s.always)?(this.enterLoadingState(),s.always(d.bind(this.destroy,this))):this.destroy()}})}),AJS.namespace("JIRA.ShifterComponent.ShifterDialog",null,require("jira/shifter/shifter-dialog"));;
;
/* module-key = 'jira.webresources:shifter', location = '/includes/jira/shifter/ShifterController.js' */
define("jira/shifter/shifter-controller",["jira/lib/class","jira/shifter/shifter-dialog","jira/shifter/shifter-analytics","underscore","jira/featureflags/feature-manager"],function(e,i,t,r,s){return e.extend({MAX_RESULTS_PER_GROUP:5,init:function(e){this.id=e,this.groupFactories=[]},register:function(e){return this.groupFactories.push(e),e},unregister:function(e){return this.groupFactories=r.without(this.groupFactories,e),e},show:function(){var e=window.location.pathname,n=window.location.search,o=e.indexOf("/RapidBoard")!==-1&&n.indexOf("view")===-1,a=e.indexOf("/board")!==-1,u=!1;if(!(o&&(u=n.indexOf("selectedIssue")!==-1)||a&&(u=n.indexOf("issue-key")!==-1||n.indexOf("selectedIssue")!==-1))){if(s.isFeatureEnabled("issue.details.shortcuts-dialog")){var d="(browse)/([^/]+-[0-9]+)",c="/jira/servicedesk/(.+)/([^/]+-[0-9]+)",f="projects/.*/issues",h=r.chain(this.groupFactories).map(function(e){return e()}).compact().flatten().value(),l=h.find(function(e){return"edit-fields"===e.id});if(!l&&(e.match(d)||e.match(c)||e.match(f)||n.indexOf("issue-key")!==-1||n.indexOf("selectedIssue")!==-1))return}if(t.shortcutPressed(),!this.dialog||this.dialog.destroyed()){var g=r.chain(this.groupFactories).map(function(e){return e()}).compact().flatten().value().sort(function(e,i){return e.weight-i.weight});this.dialog=new i(this.id,g,{maxResultsDisplayedPerGroup:this.MAX_RESULTS_PER_GROUP})}this.dialog.focus()}},hide:function(){this.dialog&&this.dialog.destroy()}})}),AJS.namespace("JIRA.ShifterComponent.ShifterController",window,require("jira/shifter/shifter-controller"));;
;
/* module-key = 'jira.webresources:shifter', location = '/includes/jira/shifter/shifter.js' */
!function(){var r=null;define("jira/shifter",["jira/shifter/shifter-controller"],function(e){return null===r&&(r=new e("shifter-dialog",(!0))),r})}(),AJS.namespace("JIRA.Shifter",null,require("jira/shifter"));;
;
/* module-key = 'com.atlassian.jira.jira-npmbridge-plugin:atlassian-spa-iframe-amd', location = 'jira-npmbridge-module/node_modules/@atlassian/spa-iframe/dist/legacy.amd.min.js' */
define("@atlassian/spa-iframe",["exports"],function(n){"use strict";function c(n){return n.origin||n.location&&(n.location.origin||"".concat(n.location.protocol,"//").concat(n.location.hostname).concat(n.location.port?":".concat(n.location.port):""))}function u(n,e){var t=c(n),r=e.split("/"),i=r[0],o=r[2],a="".concat(i,"//").concat(o);return 0===e.indexOf("/")||t===a}function a(e){function n(n){(function(n,e){return n.origin===c(e)})(n,window)&&n.data&&"string"==typeof n.data.type&&(r?e.process(n.data):t.push(n.data))}var t=[],r=!1;return window.addEventListener("message",n),{unsubscribe:function(){return window.removeEventListener("message",n)},init:function(){for(r=!0;t.length;)e.process(t.shift())}}}function s(){return String(Date.now())}function y(n){var e=function(){function t(n,e){r[n].delete(e)}var r={};return{add:function(n,e){return r[n]=r[n]||new Set,r[n].add(e),function(){return t(n,e)}},remove:t,removeAll:function(){r={}},process:function(e){null!=e&&"string"==typeof e.type&&r[e.type]&&r[e.type].forEach(function(n){return n(e)})}}}(),t=function(e,n,t){function r(n){e()!==window&&e().postMessage(n,c(window))}var i,o=v.ready({id:t()}),a=[],u=!1;return n.add(A,function(n){var e=n.payload.id;if(!u||e!==i)for(i=e,u=!0,r(o);a.length;)r(a.shift())}),r(o),function(n){u?r(n):a.push(n)}}(n,e,s),r=a(e),i=r.unsubscribe,o=r.init;return{message:{dispatch:t,registerCallback:e.add,unregisterCallback:e.remove},init:o,destroy:function(){e.removeAll(),i()}}}function S(n){function e(n){try{if(null==n.location.href)return!1}catch(n){return!1}return!0}for(var t,r=n;(t=r)!==t.parent&&e(r.parent);)r=r.parent;return r}function I(t){return function(n){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1];null!=n&&(u(window,n)?t.syncUrl(function(n){return 0===n.indexOf("/")?n:"/".concat(n.split("/").slice(3).join("/"))}(n),e):S(window).location[e?"replace":"assign"](n))}}function o(i,o){return function(n,e){function t(n){if(!n.isProgrammatic&&o()){var e=function(n){if("function"==typeof Event)return new n.constructor(n.type,n);var e=document.createEvent("Event");return e.initEvent(n.type,n.bubbles,n.cancelable),n.defaultPrevented&&(Object.defineProperty(n,"returnValue",{value:!1}),Object.defineProperty(e,"returnValue",{value:!1})),Object.defineProperty(n,"preventDefault",{value:function(){Object.defineProperty(n,"returnValue",{value:!1})}}),e}(n);r&&(Object.defineProperty(e,"target",{writable:!1,value:n.target}),Object.defineProperty(e,"srcElement",{writable:!1,value:n.srcElement})),Object.defineProperty(e,"isProgrammatic",{writable:!1,value:!0}),i()!==window&&i().document.body&&i().document.body.dispatchEvent(e)}}var r=2<arguments.length&&void 0!==arguments[2]&&arguments[2];return n.addEventListener(e,t),function(){n.removeEventListener(e,t)}}}function f(n){return Array.prototype.slice.call(n)}function l(n){return-1!==g.indexOf(n)}function d(n){return n.altKey||n.ctrlKey||n.metaKey||n.shiftKey}function p(n,e,t,r,i){!function(n,e,t){return!(null==n||""===n||0===n.indexOf("#")||t.defaultPrevented||!1===t.returnValue||"_blank"===e||t.hasBeenSpaHandled||0<t.button)}(e,t,n)||(n.preventDefault(),r(e),n.hasBeenSpaHandled=!0),i&&i()}function R(r,i){return function(n){var e=I(r),t=o(function(){return S(window)},i);!function(n,e){n.addEventListener("beforeunload",function(){e.beforeUnload()})}(window,r),t(n,"keydown",!0),t(n,"keypress",!0),t(n,"click"),function(o,a){function n(n){if(!(n.hasBeenSpaHandled||d(n)||n.target instanceof o.HTMLElement&&n.target.isContentEditable)){for(var e,t="",r=n.target,i=o.document;r&&r!==i&&r instanceof o.HTMLElement;){if(l(r.tagName)&&r.getAttribute("href")){t=r.getAttribute("href"),e=r.getAttribute("target");break}r=r.parentElement}p(n,t,e,a)}}function e(n){n.forEach(function(i){return i.addEventListener("click",function(n){if(!d(n)&&!i.isContentEditable){var e=i.getAttribute("href"),t=i.getAttribute("target");requestAnimationFrame(function(){p(n,e,t,a)}),null==e||u(window,e)||p(n,e,t,a);var r=window.addEventListener("unload",function(){return p(n,e,t,a,r)})}})})}var t=new MutationObserver(function(n){n.forEach(function(n){var t=[];n.addedNodes.forEach(function(n){l(n.nodeName)&&t.push(n);var e=n instanceof o.Element&&n;e&&g.forEach(function(n){t=t.concat(f(e.getElementsByTagName(n)))})}),e(t)})});e(f(o.document.links)),t.observe(o.document,{subtree:!0,childList:!0}),o.addEventListener("click",n)}(n,e)}}var A="@ATLASSIAN/SPA-IFRAME/READY",w="@ATLASSIAN/SPA-IFRAME/PARENT/URL_CHANGE",P="@ATLASSIAN/SPA-IFRAME/PARENT/OFFSET",T="@ATLASSIAN/SPA-IFRAME/PARENT/DID-MOUNT",F="@ATLASSIAN/SPA-IFRAME/PARENT/REQUEST-REFRESH",L="@ATLASSIAN/SPA-IFRAME/PARENT/HIDE-PERSISTED",v={ready:function(n){return{type:A,payload:n}}},N={beforeUnload:function(){return{type:"@ATLASSIAN/SPA-IFRAME/IFRAME/BEFORE-UNLOAD"}},init:function(n){return{type:"@ATLASSIAN/SPA-IFRAME/IFRAME/INIT",payload:n}},title:function(n){return{type:"@ATLASSIAN/SPA-IFRAME/IFRAME/TITLE",payload:n}},urlChange:function(n){return{type:"@ATLASSIAN/SPA-IFRAME/IFRAME/URL_CHANGE",payload:n}},RFU:function(n){return{type:"@ATLASSIAN/SPA-IFRAME/IFRAME/RFU",payload:n}},setExternalSpinner:function(n){return{type:"@ATLASSIAN/SPA-IFRAME/IFRAME/SET-EXTERNAL-SPINNER",payload:n}}},g=["A","AREA"];n.ContainerAPI=function(n){var e=0<arguments.length&&void 0!==n?n:{},t=e.browserMetrics,r=e.reporters,i=void 0===r?[]:r,o=e.isIframe,a=void 0===o?function(n){return S(n)!==n&&"@atlassian/spa-iframe"===n.name}(window):o,u=e.postponeMessageChannelInit,c=void 0!==u&&u,s={offset:null,shouldPropagateEvents:!0,hidden:!1},f=null,l=y(function(){return S(window)});c||l.init();function d(n){var e=0<arguments.length&&void 0!==n?n:document.title;a?E.titleChange(e):window.document.title=e}function p(n){var e=0<arguments.length&&void 0!==n?n:{};a&&(v=e,m(window),f=l.message.registerCallback(P,function(n){s.offset=Object.assign({},s.offset||{},n.payload)}),c&&l.init(),E.iframeInit(null!=e.url?{url:e.url}:{}),d())}function A(n){return a?l.message.registerCallback(T,function(){return n()}):function(){}}var v,g,E=function(r){return{beforeUnload:function(){return r.message.dispatch(N.beforeUnload())},iframeInit:function(n){r.message.dispatch(N.init(n))},titleChange:function(n){if("string"!=typeof n)throw new Error("Title must be a string");r.message.dispatch(N.title({title:n}))},sendRFU:function(n){return r.message.dispatch(N.RFU(n))},syncUrl:function(n,e){var t=1<arguments.length&&void 0!==e&&e;if("string"!=typeof n)throw new Error("URL must be a string");r.message.dispatch(N.urlChange({url:n,replaceState:t}))},setExternalSpinner:function(n){return r.message.dispatch(N.setExternalSpinner(n))}}}(l),m=R(E,function(){return s.shouldPropagateEvents}),h=I(E),b=t?function(r,e,n){var u=2<arguments.length&&void 0!==n?n:[],c={subscribeToReport:function(t){e.subscribe(function(n){var e=n.report;e.key===t&&e.isInitial&&r.sendRFU(e)})},sendRfuAsIs:function(n){e.start(n),n.ready||e.end({key:n.key})},sendRfuFromIframe:function(n){var e=n.key,t=n.reporters;if(!n.isInitial)return c.subscribeToReport(e),void c.sendRfuAsIs(n);var r=window.performance,i=[],o=[].concat(t).concat(u).filter(function(n){return"function"==typeof n});r&&r.timing&&i.push(function(){return{navigationStartTimestamp:r.timing.navigationStart}});var a=e+"__spa-iframe-contents";c.subscribeToReport(a),c.sendRfuAsIs(Object.assign({},n,{reporters:o.concat(i),key:a}))}};return c}(E,t,i):null;return g=function(){s.hidden=!0,f&&f()},a&&l.message.registerCallback(L,function(){return g()}),A(function(){s.hidden&&(p(v),s.hidden=!1,f=null)}),{init:p,sendRFU:function(n){if(!b)throw new Error("BrowserMetrics is required to send RFU events");a?b.sendRfuFromIframe(n):b.sendRfuAsIs(n)},navigate:function(n,e,t){var r=(2<arguments.length&&void 0!==t?t:{replace:!1}).replace;return a?h(n,r):e()},titleChange:d,onParentUrlChange:function(e){return a?l.message.registerCallback(w,function(n){return e(n.payload)}):function(){}},onParentDidMount:A,onParentRequestRefresh:function(e){return a?l.message.registerCallback(F,function(n){return e(n.payload)}):function(){}},setupInterceptors:m,getIsIframe:function(){return a},getOffset:function(){return s.offset},setShouldPropagateEvents:function(n){s.shouldPropagateEvents=n},messageChannel:l.message,setExternalSpinner:function(n){var e=0<arguments.length&&void 0!==n&&n;a&&E.setExternalSpinner({isVisible:e})}}},Object.defineProperty(n,"__esModule",{value:!0})});
;
;
/* module-key = 'com.atlassian.plugins.browser.metrics.browser-metrics-plugin:api', location = 'browser-metrics-plugin/probe.js' */
!function(){var n,t,e,r,i,o,u,a,c,s,f,l,h,d,y,p,v,m,w;n=function(){return window}(),t=function(n){return!(!n.performance||!n.performance.now)}(n),e=[],r=function(n){return function(t){n.unshift({addReporter:t})}}(e),i=function(n){return function(t){for(;n.length;)t(n.splice(0,1)[0]);n.unshift=t,n.push=t}}(e),o=function(n,t){return function(e){n.push({end:{key:e.key,timestamp:t.performance.now()}})}}(e,n),u=function(n){return n.document}(n),a=function(n){return n.Promise}(n),c=function(){function n(){this._={}}var t=function(e){var r=e[0],i=e[1];i instanceof n?e.length>=3?Object.keys(i._).forEach(function(n){t([r,i._[n],n].concat(e.slice(2)))}):Object.keys(i._).forEach(function(n){t([r,i._[n],n])}):Array.isArray(i)&&r.apply(null,[i].concat(e.slice(2)))};n.prototype.forEach=function(n){t([n,this])},n.prototype.add=function(){for(var t=this,e=null,r=null,i=0;i<arguments.length;i++){if(r=arguments[i],i===arguments.length-1&&Array.isArray(t)){t.push(r);break}i<arguments.length-2&&!t._.hasOwnProperty(r)?t._[r]=new n:i!==arguments.length-2||t._.hasOwnProperty(r)||(t._[r]=[]),t=t._[r],e=r}};var e=function(n,t){if(0!==n.length){var r=n.pop(),i=r[0],o=r[1];i===t?e(n,i):o._.hasOwnProperty(t)&&delete o._[t],0===Object.keys(o).length&&e(n,i)}};return n.prototype.remove=function(){for(var n,t=!1,r=null,i=this,o=[[r,i]],u=null,a=0;a<arguments.length;a++)if(u=arguments[a],Array.isArray(i))n=i.indexOf(u),n>-1&&(i.splice(n,1),0===i.length&&o.length>1&&e(o,r),t=!0);else{if(!i._.hasOwnProperty(u))break;a===arguments.length-1&&(delete i._[u],0===Object.keys(i).length&&o.length>1&&e(o,r),t=!0),r=u,i=i._[u],o.push([r,i])}return t},n.prototype.get=function(n){return this._.hasOwnProperty(n)?this._[n]:[]},n}(),s=function(n,t,e,r){function i(n){return!n||null==n||"null"===n||"undefined"===n}function o(t,e,r){l||(c.observe(n,{attributes:!0,childList:!0,subtree:!0}),l=!0),s.add(t,e,r)}function u(t,e){var r=n.querySelectorAll(t);return r.length&&(i(e)||Array.prototype.every.call(r,function(n){return!n.querySelector(e)}))}function a(n,e){var r;n.forEach||(n=[n]),!i(e)&&Array.isArray(e)&&(e=e.join(", "));var a=new t(function(i,a){var c=[],f=[];n.forEach(function(n){var r,i;u(n,e)||(r=new t(function(t){o(n,e,t),i=function(){s.remove(n,e,t)},f.push(i)}),c.push(r))});var l=function(){f.forEach(function(n){n()})};t.all(c).then(l).then(i,a),r=function(){l(),a()}});return a.dismiss=r,a}var c,s,f=r.MutationObserver,l=!1;return f&&t?(s=new e,c=new f(function(){s.forEach(function(n,t,e){u(e,t)&&(n.forEach(function(n){n()}),s.remove(e,t))})}),a):void 0}(u,a,c,n),f=function(n){return!!n}(s),l=function(n){function t(){c(),n.body.classList.add(u)}function e(){function e(){n.body.classList.remove(u),n.removeEventListener(i,s),n.removeEventListener(o,c),r=null}if(r)return r;var c,s,f=!1;return r=new Promise(function(e,r){"visible"!==n.visibilityState?r():(s=function(){f=!0},c=function(n){n.animationName===a&&(f?r():e())},n.addEventListener(i,s),n.addEventListener(o,c),t())}),r.then(e,e),r}var r,i="visibilitychange",o="animationend",u="browser-metrics-visibility-test",a="browser-metrics-visibility-animation",c=function(){var t=n.createElement("style"),e=["."+u+" {","-webkit-animation-duration: 0.001s;","animation-duration: 0.001s;","-webkit-animation-name: "+a+";","animation-name: "+a+";","-webkit-animation-iteration-count: 1;","animation-iteration-count: 1;","}","@keyframes "+a+" {}","@-webkit-keyframes "+a+" {","from {}","to {}","}"].join("\n");t.type="text/css",t.styleSheet?t.styleSheet.cssText=e:t.appendChild(n.createTextNode(e)),n.head.appendChild(t),c=function(){}};return e}(u),h=function(n,t,e,r,i){function o(n){return Array.isArray(n)||(n=[n]),n.map(function(n){return"string"==typeof n?{selector:n,hasNone:null}:n})}function u(n){return Array.isArray(n)||"string"==typeof n}function a(n){return u(n)&&(n={rules:n}),n.rules=o(n.rules),n.requirePaint="undefined"==typeof n.requirePaint?!1:n.requirePaint,n}return function(i,o){if(n){i=a(i);var u=function(){},c=new e(function(n,r){var o=[],a=i.rules.map(function(n){var e=new t(n.selector,n.hasNone);return o.push(function(){e.dismiss()}),e});u=function(){o.forEach(function(n){n()}),r()},e.all(a).then(function(n){}).then(n,r)});return c.cancel=u,i.requirePaint&&(c=c.then(r)),"function"==typeof o&&c.then(o),c}}}(f,s,a,l,n),d=function(n,t){function e(){return r}var r=!1;return n.addEventListener("DOMContentLoaded",function(){t.setTimeout(function(){r=!0})}),e}(u,n),y=function(n,t,e,r,i,o,u){function a(){c=null}var c;return function(o){var s="isInitial"in o?o.isInitial:i()===!1,f="threshold"in o?o.threshold:1e3,l="reporters"in o?o.reporters:[];r.push({start:{key:o.key,isInitial:s,threshold:f,timestamp:s?0:u.performance.now(),reporters:Array.isArray(l)?l:[l]}}),c&&(c.cancel(),a()),o.ready&&e&&(c=n(o.ready),c.then(function(){t({key:o.key})}).then(a,a))}}(h,o,f,e,d,a,n),p=function(n){return function(t){n.push({subscribe:t})}}(e),v=function(){return window}(),m=function(n){return n.performance}(v),w=function(n,t,e,r,i,o,u){var a=function(){};return u?{start:n?i:a,end:n?r:a,addReporter:n?t:a,delegateTo:n?e:a,subscribe:n?o:a}:void 0}(t,r,i,o,y,p,m),window["browser-metrics"]=w,window.define&&window.define("internal/browser-metrics",function(){return w})}();;
;
/* module-key = 'com.atlassian.plugins.browser.metrics.browser-metrics-plugin:api', location = 'browser-metrics-plugin/internal/browser-metrics-aa-beacon.js' */
!function(){var e={};e=function(e){function n(e,n){Object.keys(n).forEach(function(r){e[r]=n[r]})}Object.defineProperty(e,"__esModule",{value:!0});var r,t=[],o=[];return e.addUrlCleaner=function(e){o.push(e)},e.cleanUrl=function(e){return o.reduce(function(n,r){var t=r(e);return t.length>n.length?t:n},"")},e.addReportMarshaller=function(e){t.push(e)},e.setEventQueue=function(e){r=e},e.beacon=function(e){var o={};t.forEach(function(r){var t=r(e);"object"==typeof t&&n(o,t)});var a={name:"browser.metrics.navigation",properties:o};(r||AJS.EventQueue).push(a)},e}(e),window["browser-metrics-aa-beacon"]=e,window.define&&window.define("internal/browser-metrics-aa-beacon",function(){return e})}();;
;
/* module-key = 'com.atlassian.plugins.browser.metrics.browser-metrics-plugin:api', location = 'browser-metrics-plugin/loader.js' */
!function(){var n={},r={};r=function(n,r,i){function e(){t===u&&o&&(o(),o=null)}Object.defineProperty(n,"__esModule",{value:!0});var t=0,u=0,o=null,c={install:function(n){t+=1,n(function(){u+=1,e()})}};return r["browser-metrics-plugin"]=c,i.require(["wrc!browser-metrics-plugin.contrib"],function(){r.require(["internal/browser-metrics-plugin/collector"],function(n){o=function(){n.install()},e()})}),n}(r,n=window,n.WRM)}();;
;
/* module-key = 'com.atlassian.jira.jira-atlaskit-plugin:container-api', location = 'jira-atlaskit-module/js/container-api/utils/index.js' */
!function(){define("jira/container-api/utils",["exports","jira/util/top-same-origin-window","jira/featureflags/feature-manager","jira/util/data/meta"],function(e,a,n,t){e.isInSpaIframe=function(){return!1},e.getIframeDatasetValue=function(e){return window.frameElement&&window.frameElement.dataset[e]},e.setIframeDatasetValue=function(e,a){window.frameElement&&(window.frameElement.dataset[e]=a)},e.loadAmdResource=function(e){var n=this.isInSpaIframe()?a(window):window;return new Promise(function(a,t){var i=function(i){i?t(i):n.require(e).then(a).catch(t)};try{var r=n.JIRA_HERITAGE;r&&"function"==typeof r.onReady?r.onReady(i):i()}catch(e){t(e)}})}})}();;
;
/* module-key = 'com.atlassian.jira.jira-atlaskit-plugin:container-api', location = 'jira-atlaskit-module/js/container-api/apis/navigation/index.js' */
!function(){define("jira/container-api/apis/navigation",["jira/container-api/utils"],function(i){return function(){return i.loadAmdResource("jira/navigation")}})}();;
;
/* module-key = 'com.atlassian.jira.jira-atlaskit-plugin:container-api', location = 'jira-atlaskit-module/js/container-api/apis/favourite/index.js' */
!function(){define("jira/container-api/apis/favourite",["jira/container-api/utils"],function(i){return function(){return i.loadAmdResource("jira/favouriteItems")}})}();;
;
/* module-key = 'com.atlassian.jira.jira-atlaskit-plugin:container-api', location = 'jira-atlaskit-module/js/container-api/apis/profilecard/index.js' */
!function(){define("jira/container-api/apis/profilecard",["jira/container-api/utils"],function(i){return function(){return i.loadAmdResource("jira/profilecard")}})}();;
;
/* module-key = 'com.atlassian.jira.jira-atlaskit-plugin:container-api', location = 'jira-atlaskit-module/js/container-api/apis/async-modals/index.js' */
!function(){define("jira/container-api/apis/async-modals",["jira/container-api/utils"],function(n){return function(){return n.loadAmdResource("jira/async-modals")}})}();;
;
/* module-key = 'com.atlassian.jira.jira-atlaskit-plugin:container-api', location = 'jira-atlaskit-module/js/container-api/apis/flags/index.js' */
!function(){define("jira/container-api/apis/flags",["jira/container-api/utils"],function(i){return function(){return i.loadAmdResource("jira/flags")}})}();;
;
/* module-key = 'com.atlassian.jira.jira-atlaskit-plugin:container-api', location = 'jira-atlaskit-module/js/container-api/apis/modal/index.js' */
!function(){define("jira/container-api/apis/modal",[],function(){var n=!1;return{modalOpen:function(){n=!0},modalClose:function(){n=!1},getIsModalOpen:function(){return n}}})}();;
;
/* module-key = 'com.atlassian.jira.jira-atlaskit-plugin:container-api', location = 'jira-atlaskit-module/js/container-api/apis/ipblocklisting/index.js' */
!function(){define("jira/container-api/apis/ipblocklisting",["jira/container-api/utils"],function(i){return function(){return i.loadAmdResource("jira/global-components/ipblocklisting")}})}();;
;
/* module-key = 'com.atlassian.jira.jira-atlaskit-plugin:container-api', location = 'jira-atlaskit-module/js/container-api/apis/index.js' */
!function(){define("jira/container-api/apis",["jira/container-api/apis/navigation","jira/container-api/apis/favourite","jira/container-api/apis/profilecard","jira/container-api/apis/async-modals","jira/container-api/apis/modal","jira/container-api/apis/flags","jira/container-api/apis/ipblocklisting"],function(i,a,n,r,t,o,e){return{getNavigationAPI:i,getFavouriteAPI:a,getProfilecardAPI:n,getAsyncModalsAPI:r,modal:t,getFlagsAPI:o,getIPBlocklistApi:e}})}();;
;
/* module-key = 'com.atlassian.jira.jira-atlaskit-plugin:container-api', location = 'jira-atlaskit-module/js/container-api/index.js' */
!function(){define("jira/container-api",["@atlassian/spa-iframe","internal/browser-metrics","jira/container-api/utils","jira/container-api/apis"],function(a,e,i,n){var r=a.ContainerAPI({browserMetrics:e,isIframe:i.isInSpaIframe(),postponeMessageChannelInit:!0});r.APIs=n,r.utils={getUuid:i.getIframeDatasetValue.bind(i,"uuid")};var t=r.sendRFU;return r.sendRFU=function(a){var e=i.getIframeDatasetValue("uuid"),n="false"!==i.getIframeDatasetValue("isInitial"),s=window.performance&&performance.timing&&performance.timing.navigationStart,o=Object.assign({},a,{reporters:[].concat(a.reporters).concat(function(a){return{iframeUuid:e,isInitialSpaLoad:n,readyForUserTimestamp:s?s+a.end:void 0,navigationStartTimestamp:s}})});return t.call(r,o)},r})}();;
;
/* module-key = 'jira.webresources:inline-attach', location = '/includes/ajs/attachment/InlineAttach.js' */
define("jira/attachment/inline-attach",["jira/util/formatter","jira/lib/class","jira/xsrf","jira/util/navigator","jquery","wrm/context-path"],function(t,e,r,n,i,o){var a=e.extend({init:function(t){var e=i(t);a.AjaxPresenter.isSupported(e)?new a.AjaxPresenter(e):new a.FormPresenter(e)}});return i.extend(a,{MAX_UPLOADS:2,DISPLAY_WAIT:600,rescope:function(t,e){return t?e?i.proxy(t,e):t:i.noop},copyArrayLike:function(t){return i.makeArray(t)},Renderers:{container:function(){return i("<div class='field-group'/>")}}}),a.Presenter=e.extend({init:function(){this.cancelled=!1,this.running=[],this.waiting=[]},_addUpload:function(t){return this.cancelled||(this.running.length>=a.MAX_UPLOADS?this.waiting.push(t):(this.running.push(t),t.upload())),this.running.length>0},_finishUpload:function(t){if(!this.cancelled&&(a.Presenter.removeFromArray(this.waiting,t),a.Presenter.removeFromArray(this.running,t)&&this.waiting.length>0)){var e=this.waiting.shift();this.running.push(e),e.upload()}return this.running.length>0},_cancel:function(){this.cancelled=!0;var t,e=a.copyArrayLike(this.waiting);for(t=0;t<e.length;t++)e[t].abort();var r=a.copyArrayLike(this.running);for(t=0;t<r.length;t++)r[t].abort();this.waiting=[],this.running=[]}}),i.extend(a.Presenter,{removeFromArray:function(t,e){var r=i.inArray(e,t);return r>=0?t.splice(r,1):null}}),a.FormPresenter=a.Presenter.extend({init:function(t){this._super(),this.form=new a.Form(new a.FileInput(t,(!1))),this.form.fileSelector.onChange(i.proxy(this._attach,this)),this.form.onCancel(i.proxy(this._cancel,this))},_attach:function(t){if(this.form.clearErrors(),!this.cancelled){var e=this.form,r=this._createSubmitData(),n=e.cloneFileInput();e.fileSelector.clear();var i=e.addStaticProgress(t),o=new a.Timer(function(){!this.cancelled&&i.show()},this),s=new a.FormUpload({$input:n,url:a.FormPresenter.DEFAULT_URL,params:r,scope:this,before:function(){!this.cancelled&&i.start()},success:function(r){this.cancelled||(r.id&&r.name?e.addTemporaryFileCheckbox(r.id,r.name,i):r.errorMsg?e.addErrorWithFileName(r.errorMsg,t,i):e.addError(a.Text.tr("upload.error.bad.response",t),i))},error:function(r){this.cancelled||(r.indexOf("SecurityTokenMissing")>=0?e.addError(a.Text.tr("upload.xsrf.timeout",t),i):e.addError(a.Text.tr("upload.error.unknown",t),i))},after:function(){o.cancel(),i.remove(),this.cancelled||this._finishUpload(s)||e.enable()}});i.onCancel(function(){s.abort()}),this._addUpload(s)&&(o.schedule(a.DISPLAY_WAIT),e.disable()),e.fileSelector.focus()}},_cancel:function(){this._super(),this.form.enable()},_createSubmitData:function(){var t={atl_token:this.form.getAtlToken(),formToken:this.form.getFormToken()};if(this.form.issueId)t.id=this.form.issueId;else{if(!this.form.projectId)throw"Unable to find either an issueId or projectId to submit the attachment to.";t.create=!0,t.projectId=this.form.projectId}return t}}),a.FormPresenter.DEFAULT_URL=o()+"/secure/AttachTemporaryFile.jspa?decorator=none",a.AjaxPresenter=a.Presenter.extend({init:function(t){this._super(),this.form=new a.Form(new a.FileInput(t,(!0))),this.form.fileSelector.onChange(i.proxy(this._attach,this)),this.form.onCancel(i.proxy(this._cancel,this))},_attach:function(t){this.form.clearErrors(),this.cancelled||(t&&t.length>0&&(t=this._checkAndFilterFiles(t),t&&this._uploadFiles(t)),this.form.fileSelector.clear().focus())},_checkAndFilterFiles:function(t){if(t.length>a.AjaxPresenter.MAX_SELECTED_FILES)return this.form.addError(a.Text.tr("upload.error.too.many.files",t.length,a.AjaxPresenter.MAX_SELECTED_FILES)),null;for(var e=this.form.maxSize,r=[],n=0;n<t.length;n++)try{var i=t[n];if(0===i.size)this.form.addError(a.Text.tr("upload.empty.file",i.name));else if(e>0&&i.size>e){var o=a.Text.fileSize(e,i.size);this.form.addError(a.Text.tr("upload.too.big",i.name,o[1],o[0]))}else r.push({name:i.name,size:i.size,file:i})}catch(t){this.form.addError(a.AjaxUpload.getClientErrorMessage(t,i))}return 0===r.length?null:r},_createSubmitData:function(){var t={atl_token:this.form.getAtlToken(),formToken:this.form.getFormToken()};if(this.form.issueId)t.issueId=this.form.issueId;else{if(!this.form.projectId)throw"Unable to find either an issueId or projectId to submit the attachment to.";t.projectId=this.form.projectId}return t},_uploadFiles:function(t){var e=this.form,r=this._createSubmitData(),n=this,o=!1;i.each(t,function(){var t=e.addProgress(this),s=this,l=new a.Timer(function(){n.cancelled||t.show()}),u=new a.AjaxUpload({file:s.file,params:i.extend({filename:s.name,size:s.size},r),scope:n,url:a.AjaxPresenter.DEFAULT_URL,before:function(){!this.cancelled&&t.start()},progress:function(e){!this.cancelled&&t.update(e)},success:function(r,n){this.cancelled||(201===n?void 0!==r.id&&void 0!==r.name?e.addTemporaryFileCheckbox(r.id,r.name,t,s.file):e.addError(a.Text.tr("upload.error.bad.response",s.name),t):(r.token&&e.setAtlToken(r.token),r.errorMessage?e.addErrorWithFileName(r.errorMessage,s.name,t):e.addError(this._getErrorFromStatus(n,s),t)))},error:function(r,n){if(!this.cancelled)if(n<0)e.addError(r,t);else{var i=this._getErrorFromStatus(n,s);i?e.addError(i,t):e.addError(a.Text.tr("upload.error.unknown",s.name),t)}},after:function(){l.cancel(),t.finish().remove(),this.cancelled||this._finishUpload(u)||e.enable()}});t.onCancel(function(){u.abort()}),n._addUpload(u)&&(o=!0,l.schedule(a.DISPLAY_WAIT))}),o&&this.form.disable()},_getErrorFromStatus:function(t,e){var r;return r=0===t?a.Text.tr("upload.error.server.no.reply",e.name):400===t?a.Text.tr("upload.error.badrequest",e.name):401===t?a.Text.tr("upload.error.auth",e.name):a.Text.tr("upload.error.unknown.status",e.name,t)},_cancel:function(){this._super(),this.form.enable()}}),i.extend(a.AjaxPresenter,{DEFAULT_URL:contextPath+"/rest/internal/2/AttachTemporaryFile",MAX_SELECTED_FILES:100,isSupported:function(t){return!!(t&&t[0]&&t[0].files)&&a.AjaxUpload.isSupported()}}),a.FileInput=e.extend({init:function(t,e){this.$element=t,this.$container=t.parent(),e&&void 0!==this.$element[0].files?(this.$element.attr("multiple","multiple"),this.multiple=!0):this.multiple=!1},clear:function(){return this.$element.val(""),this},getFiles:function(){return this.$element[0].files},hasFiles:function(){return this.getFiles().length>0},onChange:function(t){var e=this;return this.$element.change(function(){e.multiple?t.call(e,this.files):t.call(e,e.getFileName())}),this},focus:function(){if(this._isIE()){var t=this.$element;setTimeout(function(){t.focus()},0)}else this.$element.focus();return this},cloneInput:function(){var t=this.$element;return t.replaceWith(this.$element=t.clone(!0)),t.unbind(),t},getFileName:function(){var t=/^c:\\fakepath\\(?!$)/i;return function(){var e=this.$element.val();return e=e.replace(t,""),this._isIE()&&e.indexOf("\\")>=0&&(e=e.substring(e.lastIndexOf("\\")+1)),e}}(),_isIE:function(){return n.isIE()&&n.majorVersion()<11},before:function(t){t&&(t.$element&&(t=t.$element),this.$container.before(t))}}),function(){var t={showPercentage:!1,height:"2px"},r=0;a.ProgressBar=e.extend({init:function(){var e=this.$element=this._renderers.container();this.$progress=this._renderers.progress().appendTo(e),this.$progress.progressBar(0,t),this.hidden=!0,this.old=0},value:function(e){e>100?e=100:e<0&&(e=0),this.hidden&&(this.$progress.show(),this.hidden=!1),this.old!==e&&(this.$progress.progressBar(e,t),e>=100&&this.$progress.fadeOut(),this.old=e)},_renderers:{container:function(){return i("<div>").addClass("file-progress")},progress:function(){return i("<div>").attr("id","upload-progress-"+r++).hide()}}})}(),a.UploadProgress=e.extend({init:function(t){var e=this.$element=a.Renderers.container().hide(),r=this.progress=new a.ProgressBar,n=this._renders.content(t.name);this.$content=n.$content,this.$cancel=n.$cancel,e.append(n.$element).append(r.$element),this.total=t.size,this.current=0,this.name=t.name,this.timer=new a.Timer(this._update,this),this.rateNumerator=0,this.rateDenominator=0,this._title(a.Text.tr("upload.progress.title.waiting"))},start:function(){return this.started=this._now(),this.startedSize=0,this},update:function(t){return this.timer.cancel(),this._update(t)},_update:function(t){var e=this._now();void 0===t?t=this.current:t!==this.current&&(this.lastUpdate=e,this.current=t);var r,n,i=a.Text,o=Math.min(100,Math.round(t/this.total*100)),s=i.currentOutOfTotalSize(t,this.total);this.progress.value(o);var l=(e-this.started)/1e3;l>=2&&(this.startedSize>0&&this._addRate((t-this.startedSize)/l),this.started=e,this.startedSize=t);var u=this._calcRate();if(t>=a.UploadProgress.DATA_MIN&&u>0){var h=Math.max(1,(this.total-t)/u);r=i.rate(u),n=i.time(h)}return e-this.lastUpdate>=a.UploadProgress.STALLED_TIMEOUT?(this._content(i.tr("upload.file.stalled",this.name)),r?this._title(i.tr("upload.progress.title.known.stalled",r,s)):this._title(i.tr("upload.progress.title.unknown.stalled",s))):r?(this._title(i.tr("upload.progress.title.known",r,s,n)),this._content(i.tr("upload.file.remaining",this.name,n))):(this._title(s),this._content(this.name)),t<this.total&&this.timer.schedule(a.UploadProgress.UPLOAD_REFRESH),this},finish:function(){return this.progress.value(100),this.timer.cancel(),this},onCancel:function(t){var e=this;return this.$cancel.click(function(r){r.preventDefault(),t.call(e)}),this},remove:function(){return this.$element.remove(),this},hide:function(){return this.$element.hide(),this},show:function(){return this.$element.fadeIn(),this},_title:function(t){return this.$element.attr("title",t),this},_content:function(t){return this.$content.text(t),this},_addRate:function(t){var e=a.UploadProgress.WEIGHT;this.rateNumerator=this.rateNumerator*e+t,this.rateDenominator=this.rateDenominator*e+1},_calcRate:function(){if(0===this.rateDenominator)return 0;var t=this.rateNumerator/this.rateDenominator;return Math.abs(t)<.005?0:t},_now:function(){return(new Date).getTime()},_renders:{content:function(t){var e=a.Text.tr("upload.file.waiting",t),r=i("<div class='loading file' />"),n=i("<span />").text(e),o=i("<a href='#'/>").text(a.Text.tr("upload.cancel"));return r.append(n).append(" ").append(o),{$element:r,$content:n,$cancel:o}}}}),i.extend(a.UploadProgress,{STALLED_TIMEOUT:1e4,UPLOAD_REFRESH:2e3,DATA_MIN:20480,WEIGHT:.7}),a.UnknownProgress=e.extend({init:function(t){var e=this._renders.content(t);this.$element=e.$element,this.$cancel=e.$cancel,this.$content=e.$content,this.fileName=t,this._title(a.Text.tr("upload.progress.title.waiting"))},remove:function(){return this.$element.remove(),this},hide:function(){return this.$element.hide(),this},show:function(){return this.$element.fadeIn(),this},start:function(){return this._title(a.Text.tr("upload.progress.title.running")),this._content(this.fileName),this},onCancel:function(t){var e=this;return this.$cancel.click(function(r){r.preventDefault(),t.call(e)}),this},_title:function(t){return this.$element.attr("title",t),this},_content:function(t){return this.$content.text(t),this},_renders:{content:function(t){var e=a.Text.tr("upload.file.waiting",t),r=i("<a href='#'/>").text(a.Text.tr("upload.cancel")),n=i("<div class='loading file' />"),o=i("<span />").text(e);n.append(o).append(" ").append(r);var s=a.Renderers.container().append(n);return{$element:s,$cancel:r,$content:o}}}}),a.Form=e.extend({init:function(t){if(this.fileSelector=t,this.$form=t.$element.closest("form"),this.maxSize=parseInt(this.$form.find("#attach-max-size").text()||i("#attach-max-size").text()),isNaN(this.maxSize))throw"Unable to find maximum upload size on form.";var e=!1,r=parseInt(this.$form.find(":input[name=id]").val());if(isNaN(r)||(e=!0,this.issueId=r),r=parseInt(this.$form.find(":input[name=pid]").val()),isNaN(r)||(e=!0,this.projectId=r),!e)throw"Unable to find either an issueId or projectId to submit the attachment to."},getAtlToken:function(){var t=this.$form.find("input[name='atl_token']");return t.length>0?t.val():atl_token()},setAtlToken:function(t){var e=this.$form.find("input[name='atl_token']");return e.length>0?e.val(t):r.updateTokenOnPage(t),this},getFormToken:function(){var t=this.$form.find("input[name='formToken']");return t.length>0?t.val():null},disable:function(){return this._getFormSubmits().attr("disabled","disabled"),this},enable:function(){return this._getFormSubmits().removeAttr("disabled"),this},addProgress:function(t){var e=new a.UploadProgress(t);return this._addElement(e.$element),e},addStaticProgress:function(t){var e=new a.UnknownProgress(t);return this._addElement(e.$element),e},addTemporaryFileCheckbox:function(t,e,r,n){var o=this.addLocalThumbnailImage(e,n),s=a.Renderers.container(),l=i("<label>").attr("for","filetoconvert-"+t).text(e),u=i("<input type='checkbox' class='checkbox' name='filetoconvert' checked='checked'>").attr({id:"filetoconvert-"+t,value:t,title:a.Text.tr("upload.checkbox.title")});return s.append(u).append(l),o&&s.append(i("<br/>")).append(o),s.hide(),this._replaceElement(s,r),this},addLocalThumbnailImage:function(t,e){var r=null;if(window.URL=window.webkitURL||window.URL,e&&window.URL&&window.URL.createObjectURL){var n=/image.*/;if(e.type.match(n)){var o=this,s=t+" - "+a.Text.fileSize(e.size)+" - "+e.type,l=document.createElement("img");l.title=s,l.alt=s,l.onload=function(t){var e=o.getAspectRatio(100,100,l.width,l.height);l.width=Math.round(l.width/e),l.height=Math.round(l.height/e),r.show(),window.URL.revokeObjectURL(l.src)},l.src=window.URL.createObjectURL(e),r=i(l).hide()}}return r},getAspectRatio:function(t,e,r,n){return r>t?Math.round(r/t):n>e?Math.round(n/e):1},addErrorWithFileName:function(t,e,r){return t.indexOf(e)===-1&&(t=a.Text.tr("upload.error.server",e,t)),this.addError(t,r)},addError:function(t,e){var r=a.Renderers.container();return r.addClass("error").append(i("<div>").text(t)).hide(),this._replaceElement(r,e),r},clearErrors:function(){return this.$form.find("div.error").remove(),this},cloneFileInput:function(){return this.fileSelector.cloneInput()},onCancel:function(t){var e=this.$form.find("a.cancel");return e.click(i.proxy(t,this)),this},_getFormSubmits:function(){return this.$form.find("input[type=submit]")},_addElement:function(t){this.fileSelector.before(t)},_replaceElement:function(t,e){e&&e.$element?e.$element.replaceWith(t):this._addElement(t),t.fadeIn()}}),a.FormUpload=e.extend({init:function(t){var e=t.scope||null,r=a.rescope;this.$input=t.$input,this.url=t.url,this.params=t.params||{},this.successcb=r(t.success,e),this.errorcb=r(t.error,e),this.before=r(t.before,e),this.after=r(t.after,e),this.abortcb=r(t.abort,e),this.aborted=!1,this.$form=null,this.xhr=null},upload:function(){if(!this.aborted){var t=this.url,e=i.param(this.params);e&&(t=t+"?"+e);var r=this.$form=this._renders.form(t),n=this;this._addToBody(r.append(this.$input)),r.ajaxForm({dataType:"json",data:this.params,timeout:0,beforeSend:function(t){n.xhr=t},beforeSubmit:function(){n.before()},error:function(t){if(n.aborted)n.abortcb();else{var e=t&&t.responseText||"";n.errorcb(e)}},success:function(t){n.successcb(t||{})},complete:function(){n.$form&&(n.$form.remove(),n.$form=null),n.after()}}),r.submit()}},abort:function(){this.aborted||(this.aborted=!0,this.xhr?(this.xhr.abort(),this.xhr=null):(this.abortcb(),this.after()))},_addToBody:function(t){i("body").append(t)},_renders:{form:function(t){return i("<form method='post' enctype='multipart/form-data'/>").attr("action",t).hide()}}}),a.AjaxUpload=e.extend({init:function(t){var e=t.scope||null,r=a.rescope;this.file=t.file,this.url=t.url,this.params=t.params||{},this.beforecb=r(t.before,e),this.progresscb=r(t.progress,e),this.errorcb=r(t.error,e),this.successcb=r(t.success,e),this.abortcb=r(t.abort,e),this.finalcb=r(t.after,e),this.aborted=!1},upload:function(){if(!this.aborted&&!this.xhr){var t=this.xhr=a.AjaxUpload.xhr();t.upload.onprogress=i.proxy(this._upload,this),t.onreadystatechange=i.proxy(this._statechange,this);var e=this.url,r=i.param(this.params);r&&(e=e+"?"+r),this.beforecb();try{t.open("POST",e,!0),t.setRequestHeader("Content-Type",this.file.type||"application/octet-stream"),t.send(this.file)}catch(t){this._clienterror(t,this.file)}}},abort:function(){this.aborted||(this.aborted=!0,this.xhr?this.xhr.abort():(this.abortcb(),this.finalcb()))},_statechange:function(){if(4===this.xhr.readyState){if(this.aborted)this.abortcb();else{try{this.successcb(JSON.parse(this.xhr.responseText),this.xhr.status,this.xhr)}catch(t){this.errorcb(this.xhr.responseText,this.xhr.status,this.xhr)}this.xhr.upload.onprogress=this.xhr.statechange=null}this.finalcb()}},_clienterror:function(t,e){this.errorcb(a.AjaxUpload.getClientErrorMessage(t,e),-1,this.xhr),this.finalcb()},_upload:function(t){t.lengthComputable&&this.progresscb(t.loaded)}}),i.extend(a.AjaxUpload,{isSupported:function(){return a.AjaxUpload._fileApiSupport(window)&&a.AjaxUpload._xhrSupport()},xhr:function(){var t=a.AjaxUpload._xhrJquery();return t||(t=a.AjaxUpload._xhrDirect),a.AjaxUpload.xhr=t,t()},getClientErrorMessage:function(t,e){var r;try{r=e.name}catch(t){r="<unknown>"}return"NS_ERROR_FILE_ACCESS_DENIED"===t.name?a.Text.tr("upload.error.no.access",r):"NS_ERROR_FILE_NOT_FOUND"===t.name||"NS_ERROR_FILE_TARGET_DOES_NOT_EXIST"===t.name?a.Text.tr("upload.error.does.not.exist",r):a.Text.tr("upload.error.client.unknown",r,t.message||t)},_xhrJquery:function(){var t=i.ajaxSettings;return t&&t.xhr||null},_xhrDirect:function(){try{return new XMLHttpRequest}catch(t){return null}},_xhrSupport:function(){try{var t=a.AjaxUpload.xhr();if(t&&t.upload)return!0}catch(t){}return!1},_fileApiSupport:function(t){return t.File&&t.FileList&&(!n.isMozilla()||t.FileReader)}}),a.Timer=e.extend({init:function(t,e){this.callback=a.rescope(t,e||this),this._callback=i.proxy(this._callback,this),this.timeoutId=null},cancel:function(){return null!==this.timeoutId&&(this._endTimeout(this.timeoutId),this.timeoutId=null),this},schedule:function(t){return this.cancel(),this.timeoutId=this._startTimeout(this._callback,t),this},_callback:function(){this.timeoutId=null,this.callback()},_startTimeout:function(t,e){return window.setTimeout(t,e)},_endTimeout:function(t){window.clearTimeout(t)}}),a.Text=function(){var e=1024,r=1024*e,n=1024*r,i=Math.floor(.995*e),o=Math.floor(.995*r),s=Math.floor(.995*n);return{"upload.empty.file":"Cannot attach empty file {0}.","upload.too.big":"{0} is too large to attach. Attachment is {1} but the largest allowed attachment is {2}.","upload.error.bad.response":"Cannot attach file {0}: Unexpected server response.","upload.error.unknown.status":"Cannot attach file {0}: Unknown server error ({1}).","upload.error.auth":"Cannot attach file {0}: You do not have permission to attach a file to the issue.","upload.error.badrequest":"Cannot attach file {0}. Browser made bad request to the server.","upload.error.server":"Cannot attach file {0}: {1}","upload.cancel":"Cancel","upload.file.remaining":"{0} - {1} left.","upload.file.waiting":"{0} - waiting.","upload.file.stalled":"{0} - stalled.","upload.checkbox.title":"Clear check box to prevent file being attached","upload.xsrf.timeout":"Cannot attach file {0}: Your session has timed out or you were logged out. Please save your work and reload the page.","upload.error.unknown":"Cannot attach file {0}: Unknown server error.","upload.progress.title.waiting":"Waiting for other uploads to complete.","upload.progress.title.running":"Uploading.","upload.progress.title.unknown.stalled":"{0}, stalled.","upload.progress.title.known":"{0} - {1}, {2} left.","upload.progress.title.known.stalled":"{0} - {1}, stalled.","upload.kilobyte":"{0} kB","upload.kilobyte.part":"{0}/{1} kB","upload.megabyte":"{0} MB","upload.megabyte.part":"{0}/{1} MB","upload.gigabyte":"{0} GB","upload.gigabyte.part":"{0}/{1} GB","upload.seconds":"{0} sec","upload.minutes":"{0} min","upload.hours":"{0} hr","upload.hours.minutes":"{0} hr {1} min","upload.bytes.per.second":"{0} B/sec","upload.kilobytes.per.second":"{0} kB/sec","upload.megabytes.per.second":"{0} MB/sec","upload.error.no.access":"Browser does not have permission to access {0}.","upload.error.does.not.exist":"{0} does not exist.","upload.error.client.unknown":"An unknown error occured on the browser while trying to attach {0}: {1}.","upload.error.too.many.files":"You are trying to attach {0} files. Only {1} files can be attached at a time.","upload.error.server.no.reply":"Cannot attach file {0}: Unable to communicate with Jira.","upload.error.unsupported.browser":"You are using browser that does not support file upload.",tr:function(e){if(0!==arguments.length){if(1===arguments.length)return this[e]||e;if(this[e]){var r=a.copyArrayLike(arguments);return r[0]=this[e],t.format.apply(AJS,r)}return e}},fileSize:function(){if(0!==arguments.length){var t,n=a.Text._classifySize(arguments[0]);if(t=n.unit===e?"upload.kilobyte":n.unit===r?"upload.megabyte":"upload.gigabyte",1===arguments.length)return this.tr(t,n.convert(arguments[0]));for(var i=new Array(arguments.length),o=0;o<arguments.length;o++)i[o]=this.tr(t,n.convert(arguments[o]));return i}},currentOutOfTotalSize:function(t,n){var i,o=this._classifySize(n);return i=o.unit===e?"upload.kilobyte.part":o.unit===r?"upload.megabyte.part":"upload.gigabyte.part",this.tr(i,o.convert(t),o.convert(n))},_classifySize:function(t){var i;return i=t<=o?e:t<=s?r:n,{unit:i,convert:function(t){return a.Text._toDisplay(t/i)}}},time:function(t){if(t<60)return this.tr("upload.seconds",Math.floor(t));var e=t/60;if(e<60)return this.tr("upload.minutes",Math.floor(e));var r=Math.floor(e/60);return e=Math.floor(e%60),e>0?this.tr("upload.hours.minutes",r,e):this.tr("upload.hours",r)},rate:function(t){return t<=i?this.tr("upload.bytes.per.second",a.Text._toDisplay(t)):t<=o?this.tr("upload.kilobytes.per.second",a.Text._toDisplay(t/e)):this.tr("upload.megabytes.per.second",a.Text._toDisplay(t/r))},_toDisplay:function(t){return t<.005?"0":(Math.round(100*t)/100).toFixed(2)}}}(),a}),AJS.namespace("AJS.InlineAttach",null,require("jira/attachment/inline-attach"));;
;
/* module-key = 'jira.webresources:inline-attach', location = '/includes/jquery/plugins/attachment/jquery.inlineAttach.js' */
define("jira/jquery/plugins/attachment/inline-attach",["jira/attachment/inline-attach","jquery"],function(n,t){t.fn.inlineAttach=function(){var t=[];return this.each(function(){t.push(new n(this))}),t}}),function(){require("jira/jquery/plugins/attachment/inline-attach")}();;
;
/* module-key = 'jira.webresources:dialogs', location = '/includes/jira/dialog/FormDialog.js' */
define("jira/dialog/form-dialog",["jira/util/formatter","jira/dialog/dialog","jira/flag","jira/message","jira/ajs/ajax/smart-ajax","jira/focus/set-focus","jira/util/browser","jira/util/events","jira/util/navigator","jira/skate","jquery","jira/libs/parse-uri"],function(t,e,i,o,n,s,r,a,u,l,c,h){return e.extend({defineResources:function(){this._super.apply(this,arguments),this.isIssueDialog()&&this.requireContext("jira.edit.issue"),this.shouldLoadHeritageFormDialogContext()&&this.requireContext("jira.heritage.form.dialog")},_getDefaultOptions:function(){return c.extend(this._super(),{autoClose:!1,targetUrl:"",handleRedirect:!1,onUnSuccessfulSubmit:function(){},onSuccessfulSubmit:function(){},onDialogFinished:function(){var t=this._getTargetUrlValue();this.hide(),t?(a.trigger("page-unload.location-change.from-dialog",[this.$popup]),window.location.href=t):(a.trigger("page-unload.refresh.from-dialog",[this.$popup]),r.reloadViaWindowLocation())},submitAjaxOptions:{type:"post",data:{inline:!0,decorator:"dialog"},dataType:"html"},isIssueDialog:!1,shouldLoadHeritageFormDialogContext:!1})},_getFormDataAsObject:function(){var t={};return c(this.$form.serializeArray()).each(function(){var e=t[this.name];e?c.isArray(e)?e.push(this.value):e=[e,this.value]:e=this.value,t[this.name]=e}),t},_getRelativePath:function(){var t=this._getRequestOptions();return h(t.url).directory},_getPath:function(t){var e=this._getRelativePath();return 0===t.indexOf(e)?t:e+t},_submitForm:function(t){this.cancelled=!1,this.xhr=null,this.redirected=!1,this.serverIsDone=!1;var e=this._getFormDataAsObject();if(this.options.analyticsComponent&&this.options.analyticsAction){var i;try{i=require("jira/components/analytics-tracker/tracker");var o={commentId:e.commentId};"edit-comment"===this.options.id&&(o.commentLength=e.comment.length),i.trackEvent(this.options.analyticsComponent,this.options.analyticsAction+".submit",o)}catch(t){i=null}}var s=this,r=c.extend(!0,{},this.options.submitAjaxOptions),a=c.extend(!0,r,{url:this._getPath(this.$form.attr("action")),data:e,complete:function(t,e,i){s.hideFooterLoadingIndicator(),s.cancelled||(s._showMessagesFromXhrResponse(t),i.successful?(s.$form.trigger("fakesubmit"),s._handleServerSuccess(i.data,t,e,i),s.redirected||s._handleSubmitResponse(i.data,t,i)):s._handleServerError(t,e,i.errorThrown,i)),s.$form.removeClass("submitting")}});a.data.decorator="dialog",a.data.inline=!0,this.showFooterLoadingIndicator(),this.xhr=n.makeRequest(a),t.preventDefault()},_showMessagesFromXhrResponse:function(t){var e=t.getResponseHeader("X-Atlassian-Messages");if(e){var o=JSON.parse(e);i.showMessages(o)}},_handleServerError:function(t,e,i,o){this.options.onUnSuccessfulSubmit&&this.options.onUnSuccessfulSubmit.call(t,e,i,o);var s=n.buildDialogErrorContent(o,!0),r=this.get$popupContent().find(".form-body");1!==r.length&&(r=this.get$popupContent());var a=1===r.length&&!o.hasData;a?r.prepend(s):this.setSubmitResponseContent(s)},setSubmitResponseContent:function(t){this.options.formatSubmitResponseContent&&(t=this.options.formatSubmitResponseContent.call(this,t)),this._setContent(t)},isIssueDialog:function(){return!!this.options.isIssueDialog},shouldLoadHeritageFormDialogContext:function(){return!!this.options.shouldLoadHeritageFormDialogContext},_handleServerSuccess:function(t,e,i,n){var s=this._detectMsgInstructions(e);s&&o.showMsgOnReload(s.msg,{type:s.type,closeable:s.closeable,target:s.target});var r=this._detectRedirectInstructions(e);this.serverIsDone=r.serverIsDone,r.redirectUrl?(this.options.onSuccessfulSubmit&&this.options.onSuccessfulSubmit.call(this,t,e,i,n),this._performRedirect(r.redirectUrl)):this.serverIsDone||this.setSubmitResponseContent(t)},_detectMsgInstructions:function(t){var e={msg:t.getResponseHeader("X-Atlassian-Dialog-Msg-Html")};if(e.msg)return e.type=t.getResponseHeader("X-Atlassian-Dialog-Msg-Type").toUpperCase(),e.closeable="true"===t.getResponseHeader("X-Atlassian-Dialog-Msg-Closeable"),e.target=t.getResponseHeader("X-Atlassian-Dialog-Msg-Target"),e},_handleInitialDoneResponse:function(t,e,i){this._handleSubmitResponse(t,e,i)},_handleSubmitResponse:function(t,e,i){this.serverIsDone&&(this.options.onSuccessfulSubmit&&this.options.onSuccessfulSubmit.call(this,t,e,i),this.options.autoClose&&this.hide(),this.options.onDialogFinished&&this.options.onDialogFinished.call(this,t,e,i))},_performRedirect:function(t){this.options.stayVisibleOnRedirect||this.hide(),this.redirected=!0,this._super(t)},_hasTargetUrl:function(){return this._getTargetUrlHolder().length>0},_getTargetUrlHolder:function(){return c(this.options.targetUrl)},_getTargetUrlValue:function(){return this._getTargetUrlHolder().val()},decorateContent:function(){var i,o,n,s,r,a=this;this.$form=c("form",this.get$popupContent()),this._constructHeading(),this.$form.submit(function(t){var e=new c.Event("before-submit");if(a.$form.trigger(e,[t,a]),e.isDefaultPrevented())t.preventDefault();else{a.$form.addClass("submitting");var i=c(":submit",a.$form);i.attr("disabled","disabled"),a.options.submitHandler?(a.showFooterLoadingIndicator(),a.options.submitHandler.call(a,t,function(){a.isCurrent()&&(a.hideFooterLoadingIndicator(),a.$form.removeClass("submitting"))})):a._submitForm(t)}}),o=c(".cancel",this.get$popupContent()),o.click(function(t){a.xhr&&a.xhr.abort(),a.xhr=null,a.cancelled=!0,a.hide(!0,{reason:e.HIDE_REASON.cancel}),t.preventDefault()}),u.isIE()&&u.majorVersion()<12&&o.focus(function(t){t.altKey&&o.click()}),i=this.get$popupContent().find(".button, .aui-button"),n=this.get$popupContent().find("div.buttons"),0===o.length&&0===i.length&&(0===n.length&&(s=c('<div class="buttons-container form-footer"><div class="buttons"/></div>').appendTo(this.get$popupContent()),n=s.find(".buttons")),AJS.populateParameters(),r=c("<button class='aui-button aui-button-link cancel' id='aui-dialog-close'>"+"Close"+"</button>"),n.append(r),r=c(".cancel",this.get$popupContent()),r.click(function(t){a.hide(!0,{reason:e.HIDE_REASON.cancel}),t.preventDefault()})),n.prepend(c("<span class='icon throbber'/>")),this.get$popupContent().on("click",".shortcut-tip-trigger",function(e){e.preventDefault(),a.get$popupContent().isDirty()&&!confirm("You have entered new data in this dialog. If you navigate away from this dialog without first saving your data, the changes will be lost. Click cancel to return to the dialog.")||(a.hide(),c("#keyshortscuthelp").click())}),s instanceof c||(s=n.closest(".buttons-container, .form-footer"),s.size()||(s=n)),this.$buttonContainer=s},getButtonsContainer:function(){return this.$buttonContainer},_constructHeading:function(){var t,e;if(t=c(":header:first",this.get$popupContent()),t.length>0)for(this.addHeading(t.contents()),e=t.parent(),t.remove();e.is(":empty");)t=e.parent(),e.remove(),e=t},_setContent:function(t,i){this._super(t,i),t&&e.current===this&&e.current===this&&this._focusFirstField()},_focusFirstField:function(t){var e=new s.FocusConfiguration;t?e.focusElementSelector=t:this.$activeTrigger&&this.$activeTrigger.attr("data-field")&&(e.focusElementSelector="[name='"+this.$activeTrigger.attr("data-field")+"']"),e.parentElementSelectors.unshift(".aui-dialog-content"),e.context=this.get$popup()[0],l.init&&l.init(e.context),s.pushConfiguration(e),s.triggerFocus(),s.triggerFocus()},hide:function(t,e){return this._super(t,e)!==!1&&void s.popConfiguration()}})}),AJS.namespace("AJS.FormPopup",null,require("jira/dialog/form-dialog")),AJS.namespace("JIRA.FormDialog",null,require("jira/dialog/form-dialog"));;
;
/* module-key = 'jira.webresources:dialogs', location = '/includes/jira/dialog/ErrorDialog.js' */
define("jira/dialog/error-dialog",["jira/util/formatter","jira/dialog/dialog","jira/ajs/ajax/ajax-util","jira/lib/class","jira/util/browser","jquery"],function(r,o,e,i,a,n){var t=i.extend({init:function(e){var i,t=e.message||"The Jira server was contacted but has returned an error response. We are unsure of the result of this operation.";i=!e.mode||["warning","error","info"].indexOf(e.mode)<0?"error":e.mode,this.dialog=new o({id:"error-dialog",content:function(r){var o=n(JIRA.Templates.ErrorDialog.serverErrorModalDialog({message:t,mode:i}));o.find(".error-dialog-refresh").click(function(r){r.preventDefault(),a.reloadViaWindowLocation()}),r(o)}}),this.dialog.addHeading("Error"),this.dialog.handleCancel=n.noop},hide:function(){return this.dialog.hide(),this},show:function(){return this.dialog.show(),this}});return t.openErrorDialogForXHR=function(r){return new t({message:e.getErrorMessageFromXHR(r)}).show()},t}),AJS.namespace("JIRA.ErrorDialog",null,require("jira/dialog/error-dialog"));;
;
/* module-key = 'jira.webresources:dialogs', location = 'includes/jira/dialog/ErrorDialog.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.ErrorDialog&&(JIRA.Templates.ErrorDialog={}),JIRA.Templates.ErrorDialog.serverErrorModalDialog=function(e,o){return'<div class="form-body"><div class="aui-message '+soy.$$escapeHtml(e.mode)+'"><span class="aui-icon icon-error"></span> '+soy.$$escapeHtml(e.message)+'</div></div><div class="buttons-container form-footer"><div class="buttons"><a href="#" class="error-dialog-refresh aui-button aui-button-link">'+soy.$$escapeHtml("Refresh")+"</a></div></div>"};;
;
/* module-key = 'jira.webresources:dialogs', location = '/includes/ajs/ajax/SmartAjaxWebSudo.js' */
define("jira/ajs/ajax/smart-ajax/web-sudo",["jira/jquery/deferred","jira/ajs/ajax/smart-ajax","jira/ajs/ajax/ajax-util","jira/dialog/dialog","jira/dialog/form-dialog","jira/util/browser","jquery"],function(e,a,o,t,n,s,i){return{showWebSudoDialog:function(e){var o=e.context||this,u=new n({id:"smart-websudo",type:"ajax",ajaxOptions:{url:contextPath+"/secure/admin/WebSudoAuthenticate!default.jspa?close=true"},submitHandler:function(t,n){t.preventDefault();var s=i(t.target);a.makeRequest({url:s.attr("action"),data:s.serialize(),type:"POST",complete:function(a){"Has-Authentication"===a.getResponseHeader("X-Atlassian-WebSudo")?i.isFunction(e.success)?e.success.call(o,function(){n(),u.hide()}):(n(),u.hide()):u._setContent(a.responseText,!0)}})}});i.isFunction(e.cancel)&&i(u).one("Dialog.hide",function(a,n,u){u!=t.HIDE_REASON.cancel&&u!=t.HIDE_REASON.escape||(a=i.Event(),(e.cancel.call(o,a)===!1||!a.isDefaultPrevented())&&s.reloadViaWindowLocation(n.find(".cancel").attr("href")))}),i.isFunction(e.beforeShow)&&e.beforeShow.call(o),u.show(),i.isFunction(e.show)&&e.show.call(o)},handleWebSudoError:function(e,o,t,n,s){var u={success:function(t){o&&i.isFunction(o.success)?o.success.apply(this,arguments):t(),a.makeRequest(e)},cancel:function(){i.isFunction(e.complete)&&e.complete.call(this,t,n,s),o&&i.isFunction(o.cancel)&&o.cancel.apply(this,arguments)},beforeShow:function(){o&&i.isFunction(o.beforeShow)&&o.beforeShow.apply(this,arguments)},show:function(){o&&i.isFunction(o.show)&&o.show.apply(this,arguments)},context:this};this.showWebSudoDialog(u)},makeWebSudoRequest:function(e,o){return a.makeChainableRequest(e)}}}),AJS.namespace("JIRA.SmartAjax.showWebSudoDialog",null,require("jira/ajs/ajax/smart-ajax/web-sudo").showWebSudoDialog),AJS.namespace("JIRA.SmartAjax.handleWebSudoError",null,require("jira/ajs/ajax/smart-ajax/web-sudo").handleWebSudoError),AJS.namespace("JIRA.SmartAjax.makeWebSudoRequest",null,require("jira/ajs/ajax/smart-ajax/web-sudo").makeWebSudoRequest);;
;
/* module-key = 'jira.webresources:dialogs', location = '/includes/jira/dialog/IssueActionsDialog.js' */
require(["jira/util/formatter","wrm/context-path","jira/jquery/deferred","jquery","underscore","jira/ajs/ajax/smart-ajax","jira/shifter"],function(e,s,t,r,i,n,a){a.register(function(){function a(e){for(var s=0;s<e.length;s++){var t=i.reduce(e[s].split("."),function(e,s){return void 0!==e?e[s]:void 0},window);if(i.isFunction(t)){var r=t();if(null!=r)return r}}}var o=t(),u=t(),l=a(["JIRA.Issues.getSelectedIssueKey","JIRA.Issue.getIssueKey","JIRA.IssueNavigator.getSelectedIssueKey"]),I=a(["JIRA.Issues.getSelectedIssueKey","JIRA.Issue.getIssueId","JIRA.IssueNavigator.getSelectedIssueId"]);if(null==I||JIRA.Issues.Api.isNewIssueViewEnabled())return null;var c=e.format(s()+"/rest/api/1.0/issues/{0}/ActionsAndOperations?atl_token={1}",I,atl_token());n.makeRequest({dataType:"json",url:c}).done(function(e){var t=i.map(e.operations,function(e){return{label:e.name,value:{styleClass:e.styleClass,url:e.url}}}),r=i.map(e.actions,function(t){var r=s()+"/secure/WorkflowUIDispatcher.jspa?id="+e.id+"&action="+t.action+"&atl_token="+e.atlToken;return{label:t.name,value:{styleClass:"issueaction-workflow-transition",url:r}}});o.resolve(t),u.resolve(r)}).fail(function(s,t){var r;r=JIRA&&JIRA.Templates&&JIRA.Templates.ViewIssue&&JIRA.Templates.ViewIssue.Body&&JIRA.Templates.ViewIssue.Body.errorsLoading?JIRA.Templates.ViewIssue.Body.errorsLoading({isTimeout:"timeout"===t}):"Unable to retrieve issue.",o.resolve([{label:r,messageID:"error-loading-issue",useAUI:!1,isMessage:!0}]),u.reject()});var d=function(e,s){var t=r("<a>",{text:s,class:e.styleClass,href:e.url,css:{display:"none"}});t.appendTo("body").get(0).click(),t.remove()};return[{id:"issue-actions",name:"Issue Actions",context:l,weight:200,getSuggestions:function(){return o},onSelection:d},{id:"issue-transitions",name:"Workflow",context:l,weight:220,getSuggestions:function(){return u},onSelection:d}]})});;
;
/* module-key = 'jira.webresources:dialogs', location = '/includes/jira/dialog/LabelsDialog.js' */
define("jira/dialog/labels-dialog",["jira/dialog/form-dialog","jira/issue","jira/issuenavigator/issue-navigator","jira/util/events","jira/util/events/types","jquery"],function(i,t,e,s,n,o){return i.extend({init:function(i){this._super(i),this.issueId=null,this.customFieldId=null,this.labelsProvider=this.initLabelsProvider(),this.labelPicker=null},initLabelsProvider:function(){return this.options.labelsProvider&&o.isFunction(this.options.labelsProvider)?this.options.labelsProvider:this.options.labels?this._getLabelsFromOptions:this._getLabelsFromTrigger},_getLabelsFromOptions:function(){return o(this.options.labels)},_getLabelsFromTrigger:function(){return this.$activeTrigger.closest(".labels-wrap")},decorateContent:function(){this._super();var i=this.get$popupContent();this.issueId=i.find("input[name=id]").val();var t=i.find("input[name=customFieldId]");1===t.length?this.customFieldId=t.val():this.customFieldId=null},focusLabelPicker:function(){this.get$popupContent().find("textarea").focus()},show:function(){this._super()&&this.focusLabelPicker()},_handleSubmitResponse:function(i,l,a){if(this.serverIsDone){this.options.onSuccessfulSubmit&&this.options.onSuccessfulSubmit.call(this,i,l,a);var r=this.get$popupContent().find("input[name=id]").val(),u=this.get$popupContent().find("input[name=noLink]").val();this.options.autoClose&&this.hide();var d={id:r,decorator:"none",noLink:u};this.customFieldId&&(d.customFieldId=this.customFieldId);var h=this,c=h.labelsProvider(this);o(o.ajax({url:contextPath+"/secure/EditLabels!viewLinks.jspa",data:d,success:function(i){var l=o("<div>").html(i).find(".labels-wrap");e.isNavigator()&&l.find("a.edit-labels").remove(),c.html(l.html()),n.REFRESH_ISSUE_PAGE&&s.trigger(n.REFRESH_ISSUE_PAGE,[t.getIssueId()])}})).throbber({target:c})}},handleCancel:function(){this._super(),this.$content=null}})}),AJS.namespace("AJS.LabelsPopup",null,require("jira/dialog/labels-dialog")),AJS.namespace("JIRA.LabelsDialog",null,require("jira/dialog/labels-dialog"));;
;
/* module-key = 'jira.webresources:dialogs', location = '/includes/jira/dialog/ScreenshotDialog.js' */
define("jira/dialog/screenshot-window",["jira/dialog/dialog","jira/ajs/layer/inline-layer","jquery"],function(e,r,i){return function(n){this.$trigger=i(n.trigger),i(document).delegate(n.trigger,"click",function(n){n.preventDefault(),e.current&&e.current.hide(),r.current&&r.current.hide(),window.open(i(this).attr("href")+"&decorator=popup","screenshot","width=800,height=700,scrollbars=yes,status=yes")})}}),AJS.namespace("jira.app.attachments.screenshot.ScreenshotWindow",null,require("jira/dialog/screenshot-window")),AJS.namespace("JIRA.ScreenshotDialog",null,require("jira/dialog/screenshot-window"));;
;
/* module-key = 'jira.webresources:dialogs', location = '/includes/jira/userhover/userhover.js' */
define("jira/userhover/userhover",["jira/container-api","jquery","wrm/context-path","jira/featureflags/feature-manager"],function(e,r,t,n){var i=t(),o=e.APIs.getProfilecardAPI,a=function(e){if(e){var r=0,t=e,n=window,i=e.getBoundingClientRect(),o=i.x||i.left;do r+=t.offsetLeft,t=t.offsetParent,null==t&&(t=n.frameElement,n=n.parent);while(t);return r-o}},u=function(e,r,t){return r.querySelectorAll('.user-hover[rel="'+e.getAttribute("rel")+'"]').length<t},l=function(){};return l._api=null,l._observer=null,l.observe=function(e,r){if(!l._observer||1===r.length){var t=r[0];if(t){var n=t.querySelectorAll('[rel="'+e.getAttribute("rel")+'"]').length,i={attributes:!0,childList:!0,subtree:!0};l._observer=new MutationObserver(function(){l._api&&u(e,t,n)&&l._api.hideProfileCard()}),l._observer.observe(t,i)}}},l._showProfileCardIfHoveringOnTrigger=function(e,r,t){r.parentElement.querySelector(":hover")===r&&l._api.setData(e,r,t)},l.show=function(e){var t=r(e).data("user"),n=encodeURIComponent(e.getAttribute("rel"));o().then(function(o){var u=a(e)||0,f=u+"px, 8px";l._api=o,t&&t.accountId?l._showProfileCardIfHoveringOnTrigger(t,e,f):r.get(i+"/rest/api/2/user?username="+n,function(r){l._showProfileCardIfHoveringOnTrigger(r,e,f)})})},l});;
;
/* module-key = 'jira.webresources:dialogs', location = '/includes/jira/userhover/initUserhover.js' */
!function(e,r){e(document).delegate(".user-hover[rel]",{mouseenter:function(){r.show(this);var s=e(".user-hover[rel]").closest(".sd-items-listing"),o=e(".user-hover[rel]").closest("#peopledetails");r.observe(this,s.length>0?s:o)}})}(require("jquery"),require("jira/userhover/userhover"));;
;
/* module-key = 'jira.webresources:dialogs', location = '/includes/jira/dialog/LinkIssueDialog.js' */
!function(){function e(e,i){var t=!1;return c.each(i,function(i,n){if(n.id===e)return n.isSelected=!0,t=!0,!1}),t||(i[0].isSelected=!0),i}function i(e){var i=c.Deferred();return o.makeRequest({url:contextPath+"/rest/viewIssue/1/remoteIssueLink/linkType?issueId="+e,complete:function(e,t,n){n.successful?i.resolve(n.data):i.reject(o.buildDialogErrorContent(n))}}),i.promise()}function t(e){var i=c.Deferred(),t=a.getDefaultAjaxOptions.call(e);return t.complete=function(e,t,n){n.successful?i.resolve(n.data):i.reject(o.buildDialogErrorContent(n))},o.makeRequest(t),i.promise()}function n(e){return e.$activeTrigger.attr("id")}var s=require("jira/dialog/dialog-factory"),r=require("jira/dialog/form-dialog"),a=require("jira/dialog/dialog-util"),o=require("jira/ajs/ajax/smart-ajax"),u=require("jira/issue"),l=require("jira/issuenavigator/issue-navigator"),c=require("jquery");s.createLinkIssueDialog=function(s){return new r({id:"link-issue-dialog",isIssueDialog:!0,trigger:s,onSuccessfulSubmit:function(e,i){"warning"!==i.getResponseHeader("X-Atlassian-Dialog-Msg-Type")&&a.storeCurrentIssueIdOnSucessfulSubmit.apply(this,arguments)},issueMsg:"thanks_issue_linked",widthClass:"large",stacked:!0,content:function(s){var r=this,a=u.getIssueId()||l.getSelectedIssueId();t(r).done(function(t){i(a).done(function(i){i=e(n(r),i),s(JIRA.Templates.LinkIssue.dialog({linkTypes:i,tabContent:t})),c.each(i,function(e,i){var t;i.isSelected===!0&&(t="[name='"+i.focusedFieldName+"']",0===c(t).length&&(t="#"+i.id),r._focusFirstField(t))})}).fail(function(e){s(e)})}).fail(function(e){s(e)})},formatSubmitResponseContent:function(e){return this.get$popupContent().find(".dialog-pane").html(e),this.get$popupContent().html()},onContentRefresh:function(){this.bindAnchorsToDialog(this.get$popupContent().find(".dialog-menu-item "))}})},AJS.namespace("JIRA.Dialogs.createLinkIssueDialog",null,s.createLinkIssueDialog)}();;
;
/* module-key = 'jira.webresources:dialogs', location = 'includes/jira/dialog/linkissue.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.LinkIssue&&(JIRA.Templates.LinkIssue={}),JIRA.Templates.LinkIssue.dialog=function(e,i){for(var s='<div class="aui-group"><div class="aui-item dialog-menu-group"><ul class="dialog-menu">',l=e.linkTypes,a=l.length,t=0;t<a;t++){var u=l[t];s+='<li><button id="'+soy.$$escapeHtml(u.id)+'" data-url="'+soy.$$escapeHtml(u.url)+'" class="dialog-menu-item '+(u.isSelected?"selected":"")+'">'+soy.$$escapeHtml(u.label)+"</button></li>"}return s+='</ul></div><div class="aui-item dialog-pane">'+soy.$$filterNoAutoescape(e.tabContent)+"</div></div>"};;
;
/* module-key = 'jira.webresources:es6-promise', location = '/static/lib/polyfills/promise/es6-promise-3.2.1.js' */
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/jakearchibald/es6-promise/master/LICENSE
 * @version   3.2.1
 */
(function(){"use strict";function t(t){return"function"==typeof t||"object"==typeof t&&null!==t}function e(t){return"function"==typeof t}function n(t){G=t}function r(t){Q=t}function o(){return function(){process.nextTick(a)}}function i(){return function(){B(a)}}function s(){var t=0,e=new X(a),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}function u(){var t=new MessageChannel;return t.port1.onmessage=a,function(){t.port2.postMessage(0)}}function c(){return function(){setTimeout(a,1)}}function a(){for(var t=0;t<J;t+=2){var e=tt[t],n=tt[t+1];e(n),tt[t]=void 0,tt[t+1]=void 0}J=0}function f(){try{var t=require,e=t("vertx");return B=e.runOnLoop||e.runOnContext,i()}catch(t){return c()}}function l(t,e){var n=this,r=new this.constructor(p);void 0===r[rt]&&k(r);var o=n._state;if(o){var i=arguments[o-1];Q(function(){x(o,r,i,n._result)})}else E(n,r,t,e);return r}function h(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var n=new e(p);return g(n,t),n}function p(){}function _(){return new TypeError("You cannot resolve a promise with itself")}function d(){return new TypeError("A promises callback cannot return that same promise.")}function v(t){try{return t.then}catch(t){return ut.error=t,ut}}function y(t,e,n,r){try{t.call(e,n,r)}catch(t){return t}}function m(t,e,n){Q(function(t){var r=!1,o=y(n,e,function(n){r||(r=!0,e!==n?g(t,n):S(t,n))},function(e){r||(r=!0,j(t,e))},"Settle: "+(t._label||" unknown promise"));!r&&o&&(r=!0,j(t,o))},t)}function b(t,e){e._state===it?S(t,e._result):e._state===st?j(t,e._result):E(e,void 0,function(e){g(t,e)},function(e){j(t,e)})}function w(t,n,r){n.constructor===t.constructor&&r===et&&constructor.resolve===nt?b(t,n):r===ut?j(t,ut.error):void 0===r?S(t,n):e(r)?m(t,n,r):S(t,n)}function g(e,n){e===n?j(e,_()):t(n)?w(e,n,v(n)):S(e,n)}function A(t){t._onerror&&t._onerror(t._result),T(t)}function S(t,e){t._state===ot&&(t._result=e,t._state=it,0!==t._subscribers.length&&Q(T,t))}function j(t,e){t._state===ot&&(t._state=st,t._result=e,Q(A,t))}function E(t,e,n,r){var o=t._subscribers,i=o.length;t._onerror=null,o[i]=e,o[i+it]=n,o[i+st]=r,0===i&&t._state&&Q(T,t)}function T(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r,o,i=t._result,s=0;s<e.length;s+=3)r=e[s],o=e[s+n],r?x(n,r,o,i):o(i);t._subscribers.length=0}}function M(){this.error=null}function P(t,e){try{return t(e)}catch(t){return ct.error=t,ct}}function x(t,n,r,o){var i,s,u,c,a=e(r);if(a){if(i=P(r,o),i===ct?(c=!0,s=i.error,i=null):u=!0,n===i)return void j(n,d())}else i=o,u=!0;n._state!==ot||(a&&u?g(n,i):c?j(n,s):t===it?S(n,i):t===st&&j(n,i))}function C(t,e){try{e(function(e){g(t,e)},function(e){j(t,e)})}catch(e){j(t,e)}}function O(){return at++}function k(t){t[rt]=at++,t._state=void 0,t._result=void 0,t._subscribers=[]}function Y(t){return new _t(this,t).promise}function q(t){var e=this;return new e(I(t)?function(n,r){for(var o=t.length,i=0;i<o;i++)e.resolve(t[i]).then(n,r)}:function(t,e){e(new TypeError("You must pass an array to race."))})}function F(t){var e=this,n=new e(p);return j(n,t),n}function D(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function K(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function L(t){this[rt]=O(),this._result=this._state=void 0,this._subscribers=[],p!==t&&("function"!=typeof t&&D(),this instanceof L?C(this,t):K())}function N(t,e){this._instanceConstructor=t,this.promise=new t(p),this.promise[rt]||k(this.promise),Array.isArray(e)?(this._input=e,this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?S(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&S(this.promise,this._result))):j(this.promise,U())}function U(){return new Error("Array Methods must be provided an Array")}function W(){var t;if("undefined"!=typeof global)t=global;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;e&&"[object Promise]"===Object.prototype.toString.call(e.resolve())&&!e.cast||(t.Promise=pt)}var z;z=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var B,G,H,I=z,J=0,Q=function(t,e){tt[J]=t,tt[J+1]=e,J+=2,2===J&&(G?G(a):H())},R="undefined"!=typeof window?window:void 0,V=R||{},X=V.MutationObserver||V.WebKitMutationObserver,Z="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),$="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,tt=new Array(1e3);H=Z?o():X?s():$?u():void 0===R&&"function"==typeof require?f():c();var et=l,nt=h,rt=Math.random().toString(36).substring(16),ot=void 0,it=1,st=2,ut=new M,ct=new M,at=0,ft=Y,lt=q,ht=F,pt=L;L.all=ft,L.race=lt,L.resolve=nt,L.reject=ht,L._setScheduler=n,L._setAsap=r,L._asap=Q,L.prototype={constructor:L,then:et,catch:function(t){return this.then(null,t)}};var _t=N;N.prototype._enumerate=function(){for(var t=this.length,e=this._input,n=0;this._state===ot&&n<t;n++)this._eachEntry(e[n],n)},N.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===nt){var o=v(t);if(o===et&&t._state!==ot)this._settledAt(t._state,e,t._result);else if("function"!=typeof o)this._remaining--,this._result[e]=t;else if(n===pt){var i=new n(p);w(i,t,o),this._willSettleAt(i,e)}else this._willSettleAt(new n(function(e){e(t)}),e)}else this._willSettleAt(r(t),e)},N.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===ot&&(this._remaining--,t===st?j(r,n):this._result[e]=n),0===this._remaining&&S(r,this._result)},N.prototype._willSettleAt=function(t,e){var n=this;E(t,void 0,function(t){n._settledAt(it,e,t)},function(t){n._settledAt(st,e,t)})};var dt=W,vt={Promise:pt,polyfill:dt};"function"==typeof define&&define.amd?define(function(){return vt}):"undefined"!=typeof module&&module.exports?module.exports=vt:"undefined"!=typeof this&&(this.ES6Promise=vt),dt()}).call(this);;
;
/* module-key = 'jira.webresources:promise-polyfill', location = '/static/lib/polyfills/promise/promise-polyfill.js' */
ES6Promise.polyfill(),delete window.ES6Promise;;
;
/* module-key = 'jira.webresources:usertiming-polyfill', location = '/static/lib/polyfills/usertiming/usertiming-0.1.8.js' */
/*!
 * usertiming.js
 *
 * A polyfill for UserTiming (http://www.w3.org/TR/user-timing/)
 *
 * Copyright 2013 Nic Jansma
 * http://nicj.net
 *
 * https://github.com/nicjansma/usertiming.js
 *
 * Licensed under the MIT license
 * Modified by Atlassian.
 */
!function(e){"use strict";"undefined"==typeof e&&(e={}),"undefined"==typeof e.performance&&(e.performance={}),e._perfRefForUserTimingPolyfill=e.performance,e.performance.userTimingJsNow=!1,e.performance.userTimingJsNowPrefixed=!1,e.performance.userTimingJsUserTiming=!1,e.performance.userTimingJsUserTimingPrefixed=!1,e.performance.userTimingJsPerformanceTimeline=!1,e.performance.userTimingJsPerformanceTimelinePrefixed=!1;var r,n,o=[],t=[],i=null;if("function"!=typeof e.performance.now){for(e.performance.userTimingJsNow=!0,t=["webkitNow","msNow","mozNow"],r=0;r<t.length;r++)if("function"==typeof e.performance[t[r]]){e.performance.now=e.performance[t[r]],e.performance.userTimingJsNowPrefixed=!0;break}var f=+new Date;e.performance.timing&&e.performance.timing.navigationStart?f=e.performance.timing.navigationStart:"undefined"!=typeof process&&"function"==typeof process.hrtime&&(f=process.hrtime(),e.performance.now=function(){var e=process.hrtime(f);return 1e3*e[0]+1e-6*e[1]}),"function"!=typeof e.performance.now&&(Date.now?e.performance.now=function(){return Date.now()-f}:e.performance.now=function(){return+new Date-f})}var a=function(){},m=function(){},p=[],c=!1,s=!1;if("function"!=typeof e.performance.getEntries||"function"!=typeof e.performance.mark){for("function"==typeof e.performance.getEntries&&"function"!=typeof e.performance.mark&&(s=!0),e.performance.userTimingJsPerformanceTimeline=!0,o=["webkit","moz"],t=["getEntries","getEntriesByName","getEntriesByType"],r=0;r<t.length;r++)for(n=0;n<o.length;n++)i=o[n]+t[r].substr(0,1).toUpperCase()+t[r].substr(1),"function"==typeof e.performance[i]&&(e.performance[t[r]]=e.performance[i],e.performance.userTimingJsPerformanceTimelinePrefixed=!0);a=function(e){p.push(e),"measure"===e.entryType&&(c=!0)};var u=function(){c&&(p.sort(function(e,r){return e.startTime-r.startTime}),c=!1)};if(m=function(e,n){for(r=0;r<p.length;)p[r].entryType===e&&("undefined"==typeof n||p[r].name===n)?p.splice(r,1):r++},"function"!=typeof e.performance.getEntries||s){var y=e.performance.getEntries;e.performance.getEntries=function(){u();var r=p.slice(0);return s&&y&&(Array.prototype.push.apply(r,y.call(e.performance)),r.sort(function(e,r){return e.startTime-r.startTime})),r}}if("function"!=typeof e.performance.getEntriesByType||s){var g=e.performance.getEntriesByType;e.performance.getEntriesByType=function(n){if("undefined"==typeof n||"mark"!==n&&"measure"!==n)return s&&g?g.call(e.performance,n):[];"measure"===n&&u();var o=[];for(r=0;r<p.length;r++)p[r].entryType===n&&o.push(p[r]);return o}}if("function"!=typeof e.performance.getEntriesByName||s){var d=e.performance.getEntriesByName;e.performance.getEntriesByName=function(n,o){if(o&&"mark"!==o&&"measure"!==o)return s&&d?d.call(e.performance,n,o):[];"undefined"!=typeof o&&"measure"===o&&u();var t=[];for(r=0;r<p.length;r++)"undefined"!=typeof o&&p[r].entryType!==o||p[r].name===n&&t.push(p[r]);return s&&d&&(Array.prototype.push.apply(t,d.call(e.performance,n,o)),t.sort(function(e,r){return e.startTime-r.startTime})),t}}}if("function"!=typeof e.performance.mark){for(e.performance.userTimingJsUserTiming=!0,o=["webkit","moz","ms"],t=["mark","measure","clearMarks","clearMeasures"],r=0;r<t.length;r++)for(n=0;n<o.length;n++)i=o[n]+t[r].substr(0,1).toUpperCase()+t[r].substr(1),"function"==typeof e.performance[i]&&(e.performance[t[r]]=e.performance[i],e.performance.userTimingJsUserTimingPrefixed=!0);var l={};"function"!=typeof e.performance.mark&&(e.performance.mark=function(r){var n=e.performance.now();if("undefined"==typeof r)throw new SyntaxError("Mark name must be specified");if(e.performance.timing&&r in e.performance.timing)throw new SyntaxError("Mark name is not allowed");l[r]||(l[r]=[]),l[r].push(n),a({entryType:"mark",name:r,startTime:n,duration:0})}),"function"!=typeof e.performance.clearMarks&&(e.performance.clearMarks=function(e){e?l[e]=[]:l={},m("mark",e)}),"function"!=typeof e.performance.measure&&(e.performance.measure=function(r,n,o){var t=e.performance.now();if("undefined"==typeof r)throw new SyntaxError("Measure must be specified");if(!n)return void a({entryType:"measure",name:r,startTime:0,duration:t});var i=0;if(e.performance.timing&&n in e.performance.timing){if("navigationStart"!==n&&0===e.performance.timing[n])throw new Error(n+" has a timing of 0");i=e.performance.timing[n]-e.performance.timing.navigationStart}else{if(!(n in l))throw new Error(n+" mark not found");i=l[n][l[n].length-1]}var f=t;if(o)if(f=0,e.performance.timing&&o in e.performance.timing){if("navigationStart"!==o&&0===e.performance.timing[o])throw new Error(o+" has a timing of 0");f=e.performance.timing[o]-e.performance.timing.navigationStart}else{if(!(o in l))throw new Error(o+" mark not found");f=l[o][l[o].length-1]}var m=f-i;a({entryType:"measure",name:r,startTime:i,duration:m})}),"function"!=typeof e.performance.clearMeasures&&(e.performance.clearMeasures=function(e){m("measure",e)})}"function"==typeof define&&define.amd?define([],function(){return e.performance}):"undefined"!=typeof module&&"undefined"!=typeof module.exports&&(module.exports=e.performance)}("undefined"!=typeof window?window:void 0);;
;
/* module-key = 'jira.webresources:issue-table', location = 'includes/jira/dropdown/issueActionsDropdown.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.Dropdowns&&(JIRA.Templates.Dropdowns={}),JIRA.Templates.Dropdowns.issueActionsDropdown=function(s,e){var a='<div class="aui-list"><ul class="aui-list-section"><li class="aui-list-item"><a class="aui-list-item-link issue-link" data-issue-key="'+soy.$$escapeHtml(s.key)+'" href="'+soy.$$escapeHtml(AJS.contextPath())+"/browse/"+soy.$$escapeHtml(s.key)+'" >'+soy.$$escapeHtml(s.viewIssue)+"</a></li></ul>",t=s.actions&&s.actions.length>0,l=s.operations&&s.operations.length>0;if(t){a+='<ul class="aui-list-section'+(l?"":" aui-last")+'">';for(var i=s.actions,o=i.length,n=0;n<o;n++){var c=i[n];a+='<li class="aui-list-item"><a href="'+soy.$$escapeHtml(AJS.contextPath())+"/secure/WorkflowUIDispatcher.jspa?id="+soy.$$escapeHtml(s.id)+"&amp;action="+soy.$$escapeHtml(c.action)+"&amp;atl_token="+soy.$$escapeHtml(s.atlToken)+"&amp;returnUrl="+soy.$$escapeHtml(s.returnUrl)+'" class="aui-list-item-link issueaction-workflow-transition" data-issueId="'+soy.$$escapeHtml(s.id)+'" data-issueKey="'+soy.$$escapeHtml(s.key)+'" >'+soy.$$escapeHtml(c.name)+"</a></li>"}a+="</ul>"}if(l){a+='<ul class="aui-list-section aui-last">';for(var p=s.operations,r=p.length,u=0;u<r;u++){var $=p[u];a+='<li class="aui-list-item"><a href="'+soy.$$escapeHtml($.url)+"&amp;returnUrl="+soy.$$escapeHtml(s.returnUrl)+"&amp;atl_token="+soy.$$escapeHtml(s.atlToken)+'" class="aui-list-item-link '+soy.$$escapeHtml($.styleClass)+'" data-issueId="'+soy.$$escapeHtml(s.id)+'" data-issueKey="'+soy.$$escapeHtml(s.key)+'" >'+soy.$$escapeHtml($.name)+"</a></li>"}a+="</ul>"}return a+="</div>"};;
;
/* module-key = 'jira.webresources:issue-table', location = '/includes/jira/fragments/issueActionsFragment.js' */
define("jira/fragments/issueActionsFragment",["require"],function(e){function n(e){var n=/selectedIssueId=[0-9]*/g;if(self!=top)return encodeURIComponent(t.location.href);var r=window.location.href,s=r;return/selectedIssueId=[0-9]*/.test(r)?s=r.replace(n,"selectedIssueId="+e):(s=r.lastIndexOf("?")>=0?r+"&":r+"?",s=s+"selectedIssueId="+e),encodeURIComponent(s)}var r=e("jquery"),t=e("jira/util/top-same-origin-window")(window);return function(e){e.returnUrl=e.returnUrl||n(e.id);var t=e,s="true"===r('meta[name="ajs-new-jira-issue-view-gin-enabled"]').attr("content");return s&&(t=r.extend({},e,{operations:e.operations.filter(function(e){return!e.url.includes("/EditIssue")})})),r(JIRA.Templates.Dropdowns.issueActionsDropdown(t))}}),AJS.namespace("JIRA.FRAGMENTS.issueActionsFragment",null,require("jira/fragments/issueActionsFragment"));;
;
/* module-key = 'jira.webresources:default-comment-security-level', location = '/includes/ajs/select/security/DefaultCommentSecurityLevelModel.js' */
define("jira/ajs/select/security/default-comment-security-level-model",["jira/issue","jira/lib/class","jira/util/strings","jquery","wrm/context-path"],function(e,t,n,i,a){return t.extend({DEFAULT_COMMENT_SECURITY_LEVEL_KEY_PREFIX:"default-comment-security-level-",_currentDefault:null,_preferenceKey:null,init:function(e){this.NOT_SELECTED_DEFAULT=new this.LvlObj("",""),this._preferenceKey=this.DEFAULT_COMMENT_SECURITY_LEVEL_KEY_PREFIX+e},LvlObj:function(e,t){this.level=e,this.levelName=t},_isLvlObjValid:function(e){return!(void 0==e.level||void 0==e.levelName)},_getDefaultStoreRequest:function(e){return i.ajax({url:a()+"/rest/api/2/mypreferences?key="+this._preferenceKey,type:"PUT",contentType:"application/json",dataType:"json",data:JSON.stringify(e)})},_getDefaultLoadRequest:function(){return i.ajax({url:a()+"/rest/api/2/mypreferences?key="+this._preferenceKey,type:"GET",contentType:"application/json",dataType:"json"})},updateDefault:function(e,t,n){this._sendDefaultChangedAnalytics(e),this._getDefaultStoreRequest(e).done(function(n){this._currentDefault=e,t()}.bind(this)).fail(function(e){n(e)})},getDefault:function(e,t){null==this._currentDefault?this._getDefaultLoadRequest().done(function(t){this._isLvlObjValid(t)?this._currentDefault=t:this._currentDefault=this.NOT_SELECTED_DEFAULT,e(this._currentDefault)}.bind(this)).fail(function(n){404==n.status?(this._currentDefault=this.NOT_SELECTED_DEFAULT,e(this._currentDefault)):t(n)}.bind(this)):e(this._currentDefault)},getCurrentDefault:function(){return this._currentDefault},_sendDefaultChangedAnalytics:function(t){var i=n.hashCode(this._preferenceKey);AJS.trigger("analyticsEvent",{name:"jira.issue.comment.level.default.set",data:{newDefaultlevelHash:n.hashCode(t.level.toString()),projectIdHash:i,issueIdHash:n.hashCode(e.getIssueId().toString()),wasSetToByAll:""===t.level}})}})});;
;
/* module-key = 'jira.webresources:default-comment-security-level', location = '/includes/ajs/select/security/DefaultCommentSecurityLevelControl.js' */
define("jira/ajs/select/security/default-comment-security-level-control",["jira/util/formatter","jira/ajs/select/security/default-comment-security-level-model","jira/ajs/ajax/smart-ajax","jira/dialog/form-dialog","jira/lib/class","jquery","underscore","wrm/data"],function(e,t,n,i,l,a,o,s){var r=s.claim("jira.webresources:default-comment-security-level.DefaultCommentSecurityLevelHelpLink");return l.extend({_InitialLoadDefaultLevelView:l.extend({init:function(e){this.$containerSpan=e},startLoading:function(){this.$containerSpan.html(JIRA.Templates.CommentSecurityLevel.initialLoadDefaultStart()),this.$containerSpan.find(".default-comment-level-spinner").spin({top:"0px",left:"0px"})},endLoading:function(){this.$containerSpan.find(".default-comment-level-load").addClass("hidden")}}),_SaveDefaultLevelControl:l.extend({init:function(e,t,n){this.$containerSpan=e,this.defaultLevelModel=t,this.currentSelection=n,this._putLinkToSetDefault(),this._putHelpLink()},_putLinkToSetDefault:function(){this.$containerSpan.append(JIRA.Templates.CommentSecurityLevel.linkToSetDefault()),this.$containerSpan.find(".default-comment-level-switch").bind("click",function(e){e.preventDefault(),this._onUpdateBegin(),this.defaultLevelModel.updateDefault(this.currentSelection,this._onUpdateSuccess.bind(this),this._onUpdateFail.bind(this))}.bind(this))},_putHelpLink:function(){this.$containerSpan.append(JIRA.Templates.Links.helpLink(r));var t=this.$containerSpan.find(".default-comment-level-help");t.attr("title","Makes the selected restriction level your default for this project"),t.tooltip({trigger:"hover",gravity:"nw",fade:!1})},_putStatusSpan:function(e){this.$containerSpan.html(JIRA.Templates.CommentSecurityLevel.defaultLevelStatus(e));var t=this.$containerSpan.find(".default-comment-level-status");t.attr("status",e.status),setTimeout(function(){t.addClass("fade-out")},2e3)},_onUpdateBegin:function(){this.$containerSpan.find(".default-comment-level-switch").addClass("disabled-link"),0==this.$containerSpan.find(".default-comment-level-spinner").length&&(this.$containerSpan.prepend(JIRA.Templates.CommentSecurityLevel.defaultLevelSpinner()),this.$containerSpan.find(".default-comment-level-spinner").spin())},_onUpdateSuccess:function(){this._putStatusSpan({text:"Done",status:"success",span_classes:"",icon_classes:"aui-icon aui-icon-small aui-iconfont-approve",text_classes:"default-saved-message"})},_onUpdateFail:function(e){new i({content:n.buildDialogErrorContent(e)}).show(),this.$containerSpan.find(".default-comment-level-spinner").remove(),this.$containerSpan.find(".default-comment-level-switch").removeClass("disabled-link")}}),enabled:!0,projectId:null,$rootSpan:null,$errorSpan:null,selectionSpi:null,defaultLevelModel:null,init:function(e,n,i){return this.$rootSpan=e,this.$errorSpan=n,this.projectId=e.data("project-id"),o.isNumber(this.projectId)?(this.selChanged=!1,this.selectionSpi=i,void(this.defaultLevelModel=new t(this.projectId))):void(this.enabled=!1)},selectionChanged:function(){this.selChanged=!0},loadAndApplyDefault:function(t){t&&this.selectionSpi.selectUnavailble("Unknown");var l=this._createContainer(),a=new this._InitialLoadDefaultLevelView(l);a.startLoading(),this.defaultLevelModel.getDefault(function(e){t?this.selChanged||this._applyDefaultToSelection(e):this.selectionSpi.repickSelection(),a.endLoading()}.bind(this),function(e){new i({content:n.buildDialogErrorContent(e)}).show(),a.endLoading()}.bind(this))},flushViewWithNewControl:function(e){var t=this.defaultLevelModel.getCurrentDefault();if(t&&e.value()!=t.level&&"none"!=e.value()){var n=this._createContainer(),i=new this.defaultLevelModel.LvlObj(e.value(),e.label());new this._SaveDefaultLevelControl(n,this.defaultLevelModel,i)}else this.$rootSpan.empty();this.$errorSpan.empty()},_applyDefaultToSelection:function(e){if(this.selectionSpi.hasSecurityLevel(e.level)){this.selectionSpi.selectLevel(e.level);var t=this.selectionSpi.getSelectedLevelName();t!=e.levelName&&(e.levelName=t,this.defaultLevelModel.updateDefault(e,function(){},function(){}))}else this.selectionSpi.selectUnavailble(e.levelName),this.$errorSpan.html(JIRA.Templates.CommentSecurityLevel.unavailable({name:e.levelName}))},_createContainer:function(){var e=a(JIRA.Templates.CommentSecurityLevel.defaultLevelContainer());return this.$rootSpan.html(e),e}})});;
;
/* module-key = 'jira.webresources:default-comment-security-level', location = '/includes/ajs/select/security/SecuritySelectAdapter.js' */
define("jira/ajs/select/security/select-adapter",["jira/lib/class"],function(e){return e.extend({_selectedModel:null,init:function(e){this._selectModel=e},hasSecurityLevel:function(e){return this._selectModel.hasOptionByValue(e)},selectUnavailble:function(e){this._selectModel.putOption("none",e,!0),this._selectModel.changeSelectionByValue("none")},selectLevel:function(e){this._selectModel.changeSelectionByValue(e)},repickSelection:function(){this._selectModel.changeSelectionByValue(this.getSelectedLevel())},getSelectedLevel:function(){return this._selectModel.getSelectedValues()[0]},getSelectedLevelName:function(){return this._selectModel.getSelectedTexts()[0]}})});;
;
/* module-key = 'jira.webresources:default-comment-security-level', location = 'includes/ajs/select/security/CommentSecurityLevel.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.CommentSecurityLevel&&(JIRA.Templates.CommentSecurityLevel={}),JIRA.Templates.CommentSecurityLevel.defaultLevelSpinner=function(e,t){return'<span class="icon default-comment-level-spinner"></span>'},JIRA.Templates.CommentSecurityLevel.initialLoadDefaultStart=function(e,t){return'<span class="default-comment-level-load">'+JIRA.Templates.CommentSecurityLevel.defaultLevelSpinner(null)+'<span class="default-comment-level-load-text">'+soy.$$escapeHtml("Loading your default...")+"</span></span>"},JIRA.Templates.CommentSecurityLevel.linkToSetDefault=function(e,t){return""+aui.buttons.button({text:"Make this my default",type:"link",extraClasses:"default-comment-level-switch"})},JIRA.Templates.CommentSecurityLevel.defaultLevelStatus=function(e,t){return'<span class="default-comment-level-status '+soy.$$escapeHtml(e.span_classes)+'"><span class="default-comment-level-status-icon '+soy.$$escapeHtml(e.icon_classes)+'"></span><span class="default-comment-level-status-text '+soy.$$escapeHtml(e.text_classes)+'">'+soy.$$escapeHtml(e.text)+"</span></span>"},JIRA.Templates.CommentSecurityLevel.unavailable=function(e,t){return'<span class="security-level-unavailble"><span class="aui-icon aui-icon-small aui-iconfont-error"></span><span class="security-level-unavailble-text">'+soy.$$escapeHtml(AJS.format("Your selected security level is unavailable, please change it",e.name))+"</span></span>"},JIRA.Templates.CommentSecurityLevel.defaultLevelContainer=function(e,t){return'<span class="default-comment-level-container"></span>'};;
;
/* module-key = 'jira.webresources:dropdown-select', location = '/includes/ajs/select/DropdownSelect.js' */
define("jira/ajs/select/dropdown-select",["jira/ajs/layer/layer-constants","jira/ajs/control","jira/ajs/select/select-model","jira/ajs/layer/inline-layer-factory","jira/ajs/list/list","jquery"],function(e,t,n,i,r,s){return t.extend({init:function(t){var o=this;this.model=new n(t),this.model.$element.hide(),this._createFurniture(),this.dropdownController=i.createInlineLayers({alignment:e.LEFT,width:200,hideOnScroll:".issue-container",content:s(".aui-list",this.$container)}),this.dropdownController.layer().addClass("select-menu"),this.listController=new r({containerSelector:s(".aui-list",this.$container),groupSelector:"ul.opt-group",itemSelector:"li:not(.no-suggestions)",selectionHandler:function(e){o._selectionHandler(this.getFocused(),e),e.preventDefault()}}),this._assignEventsToFurniture()},show:function(){this.listController.generateListFromJSON(this.model.getAllDescriptors()),this.dropdownController.show(),this.listController.index=0,this.listController.focus(),this.listController.enable()},_assignEventsToFurniture:function(){this._assignEvents("trigger",this.$trigger)},_createFurniture:function(){var e=this.model.$element.attr("id");this.$container=this._render("container",e),this.$trigger=this.model.$element.prev("a").appendTo(this.$container),this.$container.append(this._render("suggestionsContainer",e)),this.$container.insertBefore(this.model.$element)},_renders:{container:function(e){return s('<div class="select-menu" />').attr("id",e+"-multi-select")},suggestionsContainer:function(e){return s('<div class="aui-list aui-list-checked" tabindex="-1" />').attr("id",e+"-suggestions")}},_selectionHandler:function(e){var t=this,n=0;this.model.setSelected(e.data("descriptor")),this.dropdownController.content().find(".aui-checked").removeClass(".aui-checked"),e.addClass(".aui-checked");var i=window.setInterval(function(){n++,e.toggleClass(".aui-checking"),n>2&&(clearInterval(i),t.dropdownController.hide())},80)},_events:{trigger:{click:function(e){this.show(),e.preventDefault(),e.stopPropagation()}}}})}),AJS.namespace("AJS.SelectMenu",null,require("jira/ajs/select/dropdown-select")),AJS.namespace("AJS.DropdownSelect",null,require("jira/ajs/select/dropdown-select"));;
;
/* module-key = 'jira.webresources:dropdown-select', location = '/includes/ajs/select/SecurityLevelSelect.js' */
define("jira/ajs/select/security-level-select",["jira/util/formatter","jira/util/strings","jira/issue","jira/featureflags/feature-manager","jira/ajs/select/security/default-comment-security-level-control","jira/ajs/select/security/select-adapter","jira/ajs/select/dropdown-select","jquery"],function(e,t,l,i,n,a,r,s){return r.extend({$securityLevelDiv:null,$commentLevelSelect:null,$triggerIcon:null,$currentLevelSpan:null,defaultEnabled:!1,applyDefault:!1,loadDefault:!1,_defaultSecurityLevelControl:null,_createFurniture:function(){AJS.populateParameters(),this._super()},init:function(e){this._super(e);var t=s(e);if(this.$securityLevelDiv=t.parent(),this.$triggerIcon=this.$securityLevelDiv.find(".security-level-drop-icon"),this.$currentLevelSpan=this.$securityLevelDiv.find(".current-level"),this.defaultEnabled=!!t.data("enable-default"),this.applyDefault=!!t.data("apply-default"),this.model.$element.bind("change",function(e,t){this._updateView(t)}.bind(this)),this.defaultEnabled&&i.isFeatureEnabled("viewissue.comment.defaultlevel")){var l=this.$securityLevelDiv.find(".default-comment-level"),r=this.$securityLevelDiv.next(".security-level-inline-error");this._defaultSecurityLevelControl=new n(l,r,new a(this.model)),this._defaultSecurityLevelControl.loadAndApplyDefault(this.applyDefault),this.model.$element.bind("change",function(e,t){this._defaultSecurityLevelControl.flushViewWithNewControl(t)}.bind(this))}},_updateView:function(t){var l=""==t.value();if(l){this.$triggerIcon.removeClass("aui-iconfont-locked").addClass("aui-iconfont-unlocked");var i="Viewable by All Users";this.$triggerIcon.text(e.format("This comment will be {0}",i)),this.$currentLevelSpan.text(i)}else{this.$triggerIcon.removeClass("aui-iconfont-unlocked").addClass("aui-iconfont-locked");var n=s("<div/>").text(t.label()).html(),a=e.format("Restricted to \u003cspan class=\'redText\'\u003e{0}\u003c/span\u003e",n),r=s("<div/>").html(a).text();this.$triggerIcon.text(e.format("This comment will be {0}",r)),this.$currentLevelSpan.html(a)}},_handleDownKey:function(e){e.keyCode!==s.ui.keyCode.DOWN||this.dropdownController.isVisible()||(e.preventDefault(),e.stopPropagation(),this.show())},_selectionHandler:function(e){this._super(e),this._defaultSecurityLevelControl&&this._defaultSecurityLevelControl.selectionChanged(),this._sendSelectionChangedAnalytics(e.data("descriptor").value())},_sendSelectionChangedAnalytics:function(e){var i=null!=this._defaultSecurityLevelControl,n=i?this._defaultSecurityLevelControl.defaultLevelModel.getCurrentDefault().level:"";AJS.trigger("analyticsEvent",{name:"jira.issue.comment.level.changed",data:{defaultWasSelected:e===n,issueIdHash:t.hashCode(l.getIssueId().toString()),defaultEnabled:i}})},_events:{trigger:{keydown:function(e){this._handleDownKey(e)},keypress:function(e){this._handleDownKey(e)}}}})}),AJS.namespace("AJS.SecurityLevel",null,require("jira/ajs/select/security-level-select")),AJS.namespace("AJS.SecurityLevelSelect",null,require("jira/ajs/select/security-level-select"));;
;
/* module-key = 'jira.webresources:user-management', location = '/includes/jira/common/Users.js' */
AJS.namespace("JIRA.Users.LoggedInUser.userName",null,require("jira/util/users/logged-in-user").username),AJS.namespace("JIRA.Users.LoggedInUser.isAnonymous",null,require("jira/util/users/logged-in-user").isAnonymous);;
;
/* module-key = 'jira.webresources:mentions-base', location = '/includes/jira/mention/Mention.js' */
define("jira/mention/mention",["jira/ajs/control","jira/dialog/dialog","jira/mention/mention-user","jira/mention/mention-group","jira/mention/mention-matcher","jira/mention/scroll-pusher","jira/mention/contextual-mention-analytics-event","jira/mention/uncomplicated-inline-layer","jira/ajs/layer/inline-layer/standard-positioning","jira/ajs/dropdown/dropdown-list-item","jira/util/events","jira/util/navigator","jira/analytics/typeahead-helper","jira/analytics/web-client","jira/featureflags/feature-manager","aui/progressive-data-set","jquery","underscore","wrm/context-path"],function(e,t,r,n,i,a,s,o,l,u,c,h,d,g,f,m,y,p,v){"use strict";function C(e){var t,r="";return e&&(t=e instanceof y?e.get(0):e,r=t.querySelector("a").getAttribute("rel")),r}function _(e){var t,r="";if(e){t=e instanceof y?e.get(0):e;var n=t.querySelector("a").getAttribute("rel"),i=t.querySelector("a").getAttribute("data-display-name");r=i+"|~accountid:"+n}return r}function w(){return P}function x(e,t){var r=S(e.get("highestIssueInvolvementRank"),t.get("highestIssueInvolvementRank"),function(e,t){return e-t});return 0===r&&(r=S(e.get("latestCommentCreationTime"),t.get("latestCommentCreationTime"),function(e,t){return t-e}),0===r&&(r=e.get("displayName").localeCompare(t.get("displayName")))),r}function S(e,t,r){return void 0!==e?void 0!==t?r(e,t):-1:void 0!==t?1:0}function b(e){return!!e}function I(e){var t={model:r,comparator:x};return b(e)?(t.queryEndpoint=v()+"/rest/internal/2/user/mention/search",t.queryParamKey="query"):(t.queryEndpoint=v()+"/rest/api/2/user/viewissue/search",t.queryParamKey="query"),t}var U="issueCommentTextArea",j="issueDescriptionTextArea",A="data-issueid",T="data-projectid",N="data-issuekey",k="data-projectkey",E={actionSubject:"mention",containerType:"project",objectType:"issue"},P=!1,R={},$=null,q=f.isFeatureEnabled("smarts.mentions.instrumentation");return e.extend({CLASS_SIGNATURE:"AJS_MENTION",lastInvalidUsername:"",lastRequestMatch:!0,lastValidUsername:"",init:function(e){var t=I(e);this.listController=new n,this.isRolesEnabled=b(e),this.dataSource=new m([],p.extend({queryData:this._getQueryParams.bind(this),matcher:this._matcher.bind(this)},t)),this.dataSource.bind("respond",function(e){var t=e.results,r=e.query;if(r&&w()){t.length?(this.lastInvalidUsername="",this.lastValidUsername=r,this.lastRequestMatch=!0):(r&&this.dataSource.hasQueryCache(r)&&(!this.lastInvalidUsername||r.length<=this.lastInvalidUsername.length)&&(this.lastInvalidUsername=r),this.lastRequestMatch=!1);var n=this.generateSuggestions(t,r);this.updateSuggestions(n)}}.bind(this)),this.dataSource.bind("activity",function(e){e.activity?this.layerController._showLoading():this.layerController._hideLoading()}.bind(this))},updateSuggestions:function(e){this.layerController&&(this.layerController.content(e),this.layerController.show(),this.layerController.refreshContent())},_getQueryParams:function(){return this.restParams},_setQueryParams:function(){var e={issueKey:this.$textarea.attr(N),projectKey:this.$textarea.attr(k),maxResults:10};t.current&&"create-issue-dialog"===t.current.options.id&&delete e.issueKey,this.restParams=e},_composeCustomEventForFollowScroll:function(e){e=e||{};var t=this.$textarea.attr("follow-scroll");return t&&t.length&&(e[t]={scroll:function(){this.setPosition()}}),e},_matcher:function(e,t){return this._stringPartStartsWith(e.get("name"),t)||this._stringPartStartsWith(e.get("displayName"),t)||p.chain(e.get("issueInvolvements")).filter(function(e){return"assignee"===e.id||"reporter"===e.id}).any(function(e){return 0===e.label.indexOf(t)}).value()},textarea:function(e){var r=this;if(!e)return this.$textarea;this.$textarea=y(e);var n=this;if(y("#mentionDropDown").remove(),this.$textarea.attr("push-scroll"))var i=new l,s=a(this.$textarea,10);this.layerController=new o({offsetTarget:this.textarea(),allowDownsize:!0,positioningController:i,customEvents:this._composeCustomEventForFollowScroll(),width:function(){return r.$textarea.width()}}),this.layerController.bind("showLayer",function(){q&&n._getTypeAheadAnalyticsHelper().search(n._getCurrentUserName()||""),r.listController.trigger("focus"),r._assignEvents("win",window)}).bind("hideLayer",function(){r.listController.trigger("blur"),r._unassignEvents("win",window),s&&s.reset()}).bind("contentChanged",function(){if(r.layerController.$content){var e,t=r.listController.index,n=r.listController.highlighted||r.listController.items[t],i=n?C(n.$element):"";r.listController.removeAllItems(),r.layerController.$content.off("click.jiraMentions"),r.layerController.$content.on("click.jiraMentions","li",function(e){var t=e.currentTarget;r._acceptSuggestion(t),e.preventDefault()}),r.layerController.$content.find("li").each(function(){var t=this,n=C(t),a=new u({element:t,autoScroll:!0});n===i&&(e=a),r.listController.addItem(a)}),r.listController.prepareForInput(),e?e.trigger("focus"):r.listController.shiftFocus(0)}}).bind("setLayerPosition",function(e,r,n){if(t.current&&t.current.$form){var i=t.current.$popup.find(".buttons-container:visible");i.length&&r.top>i.offset().top&&(r.top=i.offset().top)}r.left<0&&(r.left=0),r.left+n.layer().width()>y(window).width()&&(r.left=Math.max(y(window).width()-n.layer().width(),0)),s&&s.push(r.top+n.layer().outerHeight(!0))}),this.layerController.layer().attr("id","mentionDropDown"),this._assignEvents("inlineLayer",r.layerController.layer()),this._assignEvents("textarea",r.$textarea),this._setQueryParams(),this._seedData().then(function(e){var t=[];t.push.apply(t,e),r.dataSource.add(t)})},generateSuggestions:function(e,t,r){var n=function(e){var n={text:e};if(!r&&e&&e.length){var i=this._indexOfFirstMatch(e.toLowerCase(),t.toLowerCase());if(i!==-1){var a=i+t.length;n={prefix:e.substring(0,i),match:e.substring(i,a),suffix:e.substring(a)}}}return n}.bind(this),i=p.map(e,function(e){var t=e.toJSON();return t.fullName=t.displayName,t.name=t.accountId,t.username=t.accountId,t.displayName=n(t.displayName),t.issueRoles=p.map(t.roles,function(e){return n(e.label)}),t});return q&&this._getTypeAheadAnalyticsHelper().searched(i.map(function(e){return e.id})),y(JIRA.Templates.mentionsSuggestions({suggestions:i,query:t,activity:this.dataSource.activeQueryCount>0,isRolesEnabled:this.isRolesEnabled}))},_indexOfFirstMatch:function(e,t){for(var r,n=/ |@|\.|-|"|,|'|\(/,i=0;;){if(0===e.indexOf(t))return i;if(r=e.search(n),r===-1)return-1;i=i+r+1,e=e.substring(r+1)}},_seedData:function(){var e,t=this._getQueryParams().issueKey;return t?(R[t]||(R[t]=y.ajax({method:"GET",url:v()+"/rest/internal/2/user/mention/search",data:this._getQueryParams(),dataType:"json",contentType:"application/json; charset=UTF-8"})),e=R[t].promise()):e=(new y.Deferred).reject(),e},_acceptSuggestion:function(e){this._hide(),s.fireUserMayAcceptSuggestionByUsingContextualMentionEvent(this._getCurrentUserName()),q&&this._getTypeAheadAnalyticsHelper().selected(y(e).index()),this._replaceCurrentUserName(_(e)),this.listController.removeAllItems(),P=!1},_replaceCurrentUserName:function(e){var t=this._rawInputValue(),r=this._getCaretPosition(),n=t.substr(0,r),a=i.getLastWordBoundaryIndex(n,!0),s=t.substr(0,a+1).replace(/\r\n/g,"\n"),o="["+e+"]",l=t.substr(r);this._rawInputValue([s,o,l].join("")),this._setCursorPosition(s.length+o.length)},_setCursorPosition:function(e){var t=this.$textarea.get(0);if(t.setSelectionRange)t.focus(),t.setSelectionRange(e,e);else if(t.createTextRange){var r=t.createTextRange();r.collapse(!0),r.moveEnd("character",e),r.moveStart("character",e),r.select()}},_getTypeAheadAnalyticsHelper:function(){if(!$){var e=p.defaults({objectId:this.$textarea.attr(A),containerId:this.$textarea.attr(T),source:this._getTypeAheadAnalyticsSource()},E);$=new d(g.sendTrackEvent,e)}return $},_getCaretPosition:function(){var e,t,r,n,i,a=this.$textarea.get(0),s=this._rawInputValue();return"number"==typeof a.selectionStart?a.selectionStart:document.selection&&a.createTextRange?(t=document.selection.createRange(),t?(i=a.createTextRange(),i.moveToBookmark(t.getBookmark()),i.compareEndPoints("StartToEnd",a.createTextRange())>=0?s.length:(n=s.replace(/\r\n/g,"\n"),r=i.moveStart("character",-s.length),e=n.slice(0,-r).split("\n").length-1,e-r)):s.length):0},_rawInputValue:function(){var e=this.$textarea.get(0);return"string"==typeof arguments[0]&&(e.value=arguments[0]),e.value},fetchUserNames:function(e){q&&this._getTypeAheadAnalyticsHelper().search(e),this.dataSource.query(e)},_getCurrentUserName:function(){return this.currentUserName},_hide:function(){this.layerController.hide()},_show:function(){this.layerController.show()},_keyUp:function(){var e=this._getCaretPosition(),t=this._getUserNameFromInput(e),r=y.trim(t||"");if(this._isNewRequestRequired(r))this.fetchUserNames(r),P=!0;else if(this._showHintSuggestions(t)){var n=this.dataSource.first(5);q&&this._getTypeAheadAnalyticsHelper().search("");var i=this.generateSuggestions(n,r,!0);this.updateSuggestions(i),P=!0}else this._keepSuggestWindowOpen(r)||(this._hide(),P=!1);this.lastQuery=r,delete this.willCheck},_showHintSuggestions:function(e){return"string"==typeof e&&0===e.length},_keepSuggestWindowOpen:function(e){return!!e&&(!!this.layerController.isVisible()&&(this.dataSource.activeQueryCount||this.lastRequestMatch))},_isNewRequestRequired:function(e){if(!e)return!1;if(e=y.trim(e),e===this.lastQuery)return!1;if(this.lastInvalidUsername){if(0===e.indexOf(this.lastInvalidUsername)&&this.lastInvalidUsername.length<e.length)return!1}else if(!this.lastRequestMatch&&e===this.lastValidUsername)return!0;return!0},_stringPartStartsWith:function(e,t){return e=y.trim(e||"").toLowerCase(),t=(t||"").toLowerCase(),!(!e||!t)&&this._indexOfFirstMatch(e,t)!==-1},_getUserNameFromInput:function(e){return"number"!=typeof e&&(e=this._getCaretPosition()),this.currentUserName=i.getUserNameFromCurrentWord(this._rawInputValue(),e)},_getTypeAheadAnalyticsSource:function(){var e=this.$textarea.attr("id");return"comment"===e?U:"description"===e?j:"UNKNOWN"},_events:{win:{resize:function(){this.layerController.setWidth(this.$textarea.width())}},textarea:{keydown:function(e){e.keyCode===y.ui.keyCode.ESCAPE?this.layerController.isVisible()&&(t.current&&c.one("Dialog.beforeHide",function(e){e.preventDefault()}),this.$textarea.one("keyup",function(e){e.keyCode===y.ui.keyCode.ESCAPE&&(e.stopPropagation(),c.trigger("Mention.afterHide"))})):this.willCheck||(this.willCheck=p.defer(p.bind(this._keyUp,this)),p.defer(p.bind(function(){var t=this._getUserNameFromInput(this._getCaretPosition());s.fireContextualMentionIsBeingLookedUpAnalyticsEvent(t,e.keyCode,e.ctrlKey,e.metaKey)},this)))},focus:function(){this._keyUp()},mouseup:function(){this._keyUp()},blur:function(){this.listController.removeAllItems(),this.lastQuery=this.lastValidUsername=this.lastInvalidUsername=""}},inlineLayer:{mousedown:function(e){e.preventDefault()}}}})});;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-progressive-data-set', location = 'node_modules/@atlassian/aui/src/js/aui/progressive-data-set.js' */
("undefined"===typeof window?global:window).__c35ee65482ba222c97e480e4544e6569=function(){function f(a){return a&&a.__esModule?a:{"default":a}}var e={};"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=f(__922acd0053a6de3ea4c53d8902766ab6),g=f(__e3ce9f42f29f6bd2118d84461512f4a4),i=f(__4d02fe17b8e885a34493e34af3d145dd),h=g.default.Collection.extend({initialize:function(a,b){b||(b={});b.matcher&&(this.matcher=b.matcher);b.model&&(this.model=b.model);this._idAttribute=(new this.model).idAttribute;
this._maxResults=b.maxResults||5;this._queryData=b.queryData||{};this._queryParamKey=b.queryParamKey||"q";this._queryEndpoint=b.queryEndpoint||"";this.value=null;this.queryCache={};this.activeQueryCount=0;c.default.bindAll(this,"query","respond")},url:function(){return this._queryEndpoint},query:function(a){var b,d;this.value=a;d=this.getFilteredResults(a);this.respond(a,d);a&&(this._queryEndpoint&&!this.hasQueryCache(a)&&this.shouldGetMoreResults(d))&&(b=this.fetch(a),this.activeQueryCount++,this.trigger("activity",
{activity:!0}),b.always(c.default.bind(function(){this.activeQueryCount--;this.trigger("activity",{activity:!!this.activeQueryCount})},this)),b.done(c.default.bind(function(b,d,c){this.addQueryCache(a,b,c)},this)),b.done(c.default.bind(function(){a=this.value;d=this.getFilteredResults(a);this.respond(a,d)},this)))},getQueryData:function(a){var b=c.default.isFunction(this._queryData)?this._queryData(a):this._queryData,b=c.default.extend({},b);b[this._queryParamKey]=a;return b},fetch:function(a){a=
{add:!0,update:!0,remove:!1,data:this.getQueryData(a)};return g.default.Collection.prototype.fetch.call(this,a)},respond:function(a,b){this.trigger("respond",{query:a,results:b});return b},matcher:function(){},getFilteredResults:function(a){var b=[];if(!a)return b;b=this.filter(function(b){return!!this.matcher(b,a)},this);this._maxResults&&(b=c.default.first(b,this._maxResults));return b},addQueryCache:function(a,b,d){var e=this.queryCache,b=this.parse(b,d);e[a]=c.default.pluck(b,this._idAttribute)},
hasQueryCache:function(a){return this.queryCache.hasOwnProperty(a)},findQueryCache:function(a){return this.queryCache[a]},shouldGetMoreResults:function(a){return a.length<this._maxResults},setMaxResults:function(a){this._maxResults=a;this.value&&this.respond(this.value,this.getFilteredResults(this.value))}});(0,i.default)("ProgressiveDataSet",h);e.default=h;return e=e["default"]}.call(this);;
;
/* module-key = 'jira.webresources:data-sets', location = '/includes/ajs/contentretriever/ProgressiveDataSet.js' */
AJS.namespace("JIRA.ProgressiveDataSet",null,require("aui/progressive-data-set"));;
;
/* module-key = 'jira.webresources:mentions-feature', location = '/includes/jira/mention/UncomplicatedInlineLayer.js' */
define("jira/mention/uncomplicated-inline-layer",["jira/ajs/layer/inline-layer","jira/ajs/contentretriever/content-retriever","jquery"],function(n,e,t){return n.extend({init:function(t){t||(t={}),t.contentRetriever=new e,n.prototype.init.call(this,t)},content:function(){return arguments.length&&(this.$content=arguments[0]),this.$content},refreshContent:function(n){this.layer().empty().append(this.content()),t.isFunction(n)&&n.call(this),this.contentChange(),this.setPosition()}})}),AJS.namespace("JIRA.UncomplicatedInlineLayer",null,require("jira/mention/uncomplicated-inline-layer"));;
;
/* module-key = 'jira.webresources:mentions-feature', location = '/includes/jira/mention/Mention.Group.js' */
define("jira/mention/mention-group",["jira/ajs/group"],function(t){return t.extend({_makeSelection:function(t){this.items&&this.items[this.index]&&(this.items[this.index].trigger("accept"),t.preventDefault())},shiftFocus:function(i){t.prototype.shiftFocus.call(this,i);var e=this.items[this.index];e&&(this.highlighted=this.items[this.index])},keys:{Up:function(t){this.shiftFocus(-1),t.preventDefault()},Down:function(t){this.shiftFocus(1),t.preventDefault()},Return:function(t){this._makeSelection(t)},Tab:function(t){this._makeSelection(t)}}})}),AJS.namespace("JIRA.MentionGroup",null,require("jira/mention/mention-group"));;
;
/* module-key = 'jira.webresources:mentions-feature', location = '/includes/jira/mention/contextual-mention-analytics-event.js' */
define("jira/mention/contextual-mention-analytics-event",["jquery","underscore"],function(e,n){var t=/^(assi(gnee?)|repo(rter?))$/,i=n.debounce(function(e,n,i,r){var a=o(n)||c(n,i,r),u=t.test(e);a===!1&&u&&AJS.trigger("analytics",{name:"issue.comment.contextualMention.lookup"})},500),o=function(n){return n===e.ui.keyCode.BACKSPACE},c=function(e,n,t){return e==="A".charCodeAt()&&(n||t)||n||t};return{fireAcceptedContextualMentionAnalyticsEvent:function(){AJS.trigger("analytics",{name:"issue.comment.contextualMention.accepted"})},fireContextualMentionIsBeingLookedUpAnalyticsEvent:function(e,n,t,o){i(e,n,t,o)},fireUserMayAcceptSuggestionByUsingContextualMentionEvent:function(e){n.any(["assignee","reporter"],function(n){if(0===n.indexOf(e)&&n!==e)return AJS.trigger("analytics",{name:"issue.comment.contextualMention.mayAccepted"}),!0})}}});;
;
/* module-key = 'jira.webresources:mentions-feature', location = '/includes/jira/mention/mention-matcher.js' */
define("jira/mention/mention-matcher",["jquery"],function(t){return{AT_USERNAME_START_REGEX:/^@(.*)/i,AT_USERNAME_REGEX:/[^\[]@(.*)/i,WIKI_MARKUP_REGEX:/\[[~@]+([^~@]*)/i,ACCEPTED_USER_REGEX:/\[~[^~\]]*\]/i,WORD_LIMIT:3,getUserNameFromCurrentWord:function(e,n){var r,i=e.substr(0,n),E=this.getLastWordBoundaryIndex(i,!1),s=i.charAt(E-1),u=null;if(!s||!/\w/i.test(s)){if(r=this._removeAcceptedUsernames(i.substr(E)),/[\r\n]/.test(r))return null;t.each([this.AT_USERNAME_START_REGEX,this.AT_USERNAME_REGEX,this.WIKI_MARKUP_REGEX],function(t,e){var n=e.exec(r);if(n)return u=n[1],!1})}return null!=u&&this.lengthWithinLimit(u,this.WORD_LIMIT)?u:null},lengthWithinLimit:function(e,n){var r=t.trim(e).split(/\s+/);return r.length<=~~n},getLastWordBoundaryIndex:function(t,e){var n=t.lastIndexOf("@"),r=t.lastIndexOf("[~");return e&&(n-=1,r-=1),n>r?n:r},_removeAcceptedUsernames:function(t){var e=this.ACCEPTED_USER_REGEX.exec(t);return e?t.split(e)[1]:t}}});;
;
/* module-key = 'jira.webresources:mentions-feature', location = '/includes/jira/mention/mention-user.js' */
define("jira/mention/mention-user",["backbone","underscore"],function(e,n){return e.Model.extend({idAttribute:"accountId",initialize:function(){this.on("change:issueInvolvements",function(e,t){var i=n.union(e.previous("issueInvolvements"),t);e.attributes.issueInvolvements=n.uniq(i,!1,function(e){return e.id})})},parse:function(e,n){return e.issueInvolvements||(e.issueInvolvements=[]),e},toJSON:function(){var e=n.clone(this.attributes);return e.roles=e.issueInvolvements,delete e.issueInvolvements,e}})});;
;
/* module-key = 'jira.webresources:mentions-feature', location = '/includes/jira/mention/scroll-pusher.js' */
define("jira/mention/scroll-pusher",["jquery"],function(e){return function(t,n){function r(e,t){"undefined"==typeof t&&(t=n);var r=u.offset().top+u.outerHeight(),i=e-r;i+t>0&&(h||(h=u.height()),u.height(u.height()+i+t))}function i(){h&&u.height(h)}n=n||0;var h,u=e(t.attr("push-scroll"));return{push:r,reset:i}}});;
;
/* module-key = 'jira.webresources:mentions-feature', location = '/includes/jira/mention/namespace.js' */
AJS.namespace("JIRA.MentionUserModel",null,require("jira/mention/mention-user")),AJS.namespace("JIRA.Mention",null,require("jira/mention/mention")),AJS.namespace("JIRA.Mention.Matcher",null,require("jira/mention/mention-matcher")),AJS.namespace("JIRA.Mention.ScrollPusher",null,require("jira/mention/scroll-pusher")),AJS.namespace("JIRA.Mention.ContextualMentionAnalyticsEvent",null,require("jira/mention/contextual-mention-analytics-event"));;
;
/* module-key = 'jira.webresources:mentions-feature', location = 'includes/jira/mention/Mention.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),JIRA.Templates.mentionsSuggestions=function(e,s){var t='<div class="aui-list">';if(e.suggestions.length>0){t+='<ul class="aui-list-section aui-last">';for(var i=e.suggestions,a=i.length,n=0;n<a;n++){var l=i[n];if(t+='<li class="aui-list-item jira-mention-suggestion"><a class="aui-list-item-link aui-iconised-link" style="background-image: url('+soy.$$escapeHtml(l.avatarUrls["16x16"])+'); overflow:hidden; text-overflow: ellipsis" rel="'+soy.$$escapeHtml(l.accountId)+'" data-display-name="'+soy.$$escapeHtml(l.fullName)+'"',l.roles){t+=' data-issue-roles="';for(var o=l.roles,r=o.length,m=0;m<r;m++){var u=o[m];t+=soy.$$escapeHtml(u.id)+" "}t+='"'}t+=' href="#" >'+JIRA.Templates.highlitEntryWithNoUsername(l)+"</a></li>"}t+="</ul>"}else t+=JIRA.Templates.noSuggestions({activity:e.activity,query:""+soy.$$escapeHtml(e.query)});return t+=(e.isRolesEnabled?'<div class="aui-list-section-footer">'+soy.$$escapeHtml(AJS.format("Try typing @{0} or @{1}","assignee","reporter"))+"</div>":"")+"</div>"},JIRA.Templates.noSuggestions=function(e,s){return e=e||{},""+(0==e.query.length?'<div class="no-suggestions">'+soy.$$escapeHtml("Type to start searching.")+"</div>":e.activity?'<div class="no-suggestions searching">'+soy.$$filterNoAutoescape(AJS.format("Searching for {0}{1}{2}...","<strong>",e.query,"</strong>"))+"</div>":'<div class="no-suggestions">'+soy.$$filterNoAutoescape(AJS.format("Found no matching users for {0}{1}{2}.","<strong>",e.query,"</strong>"))+"</div>")},JIRA.Templates.highlitEntry=function(e,s){return'<span class="jira-mention-suggestion-user">'+JIRA.Templates.highlightMention({match:e.displayName})+" - "+soy.$$escapeHtml(e.emailAddress)+JIRA.Templates.highlightMention({prefix:" (",match:e.name,suffix:")"})+"</span>"+(e.issueRoles?JIRA.Templates.renderIssueRoles(e):"")},JIRA.Templates.highlitEntryWithNoUsername=function(e,s){return'<span class="jira-mention-suggestion-user">'+JIRA.Templates.highlightMention({match:e.displayName})+" - "+soy.$$escapeHtml(e.emailAddress)+"</span>"+(e.issueRoles?JIRA.Templates.renderIssueRoles(e):"")},JIRA.Templates.highlightMention=function(e,s){return""+(e.match.text||e.match.match?(e.prefix?soy.$$escapeHtml(e.prefix):"")+(e.match.match?soy.$$escapeHtml(e.match.prefix)+"<mark>"+soy.$$escapeHtml(e.match.match)+"</mark>"+soy.$$escapeHtml(e.match.suffix):soy.$$escapeHtml(e.match.text))+(e.suffix?soy.$$escapeHtml(e.suffix):""):"")},JIRA.Templates.renderIssueRoles=function(e,s){for(var t='<span class="jira-mention-issue-roles">',i=e.issueRoles,a=i.length,n=0;n<a;n++){var l=i[n];t+=' <span class="aui-lozenge aui-lozenge-complete'+(l.match?"":" aui-lozenge-subtle")+'">'+JIRA.Templates.highlightMention({prefix:"",match:l,suffix:""})+"</span>"}return t+="</span>"};;
;
/* module-key = 'jira.webresources:mentions-feature', location = '/includes/jira/mention/Mention.Element.js' */
define("jira/mention/mention-element",["jira/mention/mention","jira/skate","underscore"],function(e,t,n){function o(t){var n=t.getAttribute("data-issuekey");t._controller||(t._controller=new e(n)),t._controller.textarea(t)}return t("mentionable",{type:t.type.CLASSNAME,created:function(e){},attached:function(e){document.activeElement===e&&o(e)},events:{focus:function(e,t){o(e)}}})});;
;
/* module-key = 'jira.webresources:mentions', location = '/includes/jira/mention/initMentions.js' */
require(["wrm/require"],function(e){e(["wrc!jira.webresources:mentions-feature"],function(){require(["jira/mention/mention-element"])})});;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-banner', location = 'node_modules/@atlassian/aui/src/js/aui/banner.js' */
("undefined"===typeof window?global:window).__3ad706cbf23ce48c5828dc88c7c5b7ee=function(){function b(a){return a&&a.__esModule?a:{"default":a}}function e(a){a=(0,c.default)((0,g.default)('<div class="aui-banner aui-banner-{type}" role="banner">{body}</div>').fill({type:"error","body:html":a.body||""}).toString());(0,c.default)("#"+f).find(".aui-banner").get().forEach(function(a){"true"===a.getAttribute("aria-hidden")&&(0,c.default)(a).remove()});var b=(0,c.default)("#"+f);if(!b.length)throw Error("You must implement the application header");
a.prependTo(b);(0,h.recomputeStyle)(a);a.attr("aria-hidden","false");return a[0]}var d={};"use strict";Object.defineProperty(d,"__esModule",{value:!0});var c=b(__307d3e18fd611f85395c67cddeb1fe24),h=__c0311e8841bd8637e025a8fb1474f693,i=b(__574ac67f906effeb9d8ec2753b23cf28),j=b(__4d02fe17b8e885a34493e34af3d145dd),g=b(__eb201a36d4829c396b434af7bad3dea4),f="header";(0,i.default)("aui/banner",e);(0,j.default)("banner",e);d.default=e;return d=d["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-trigger', location = 'node_modules/@atlassian/aui/src/js/aui/trigger.js' */
("undefined"===typeof window?global:window).__50e2876f514ad7c8f1fee05297cde9e2=function(){function e(a){return a&&a.__esModule?a:{"default":a}}function d(a,b){if(a.isEnabled()){var c=document.getElementById(a.getAttribute("aria-controls"));c&&c.message&&c.message(b)}}"use strict";var g=e(__307d3e18fd611f85395c67cddeb1fe24),h=e(__574ac67f906effeb9d8ec2753b23cf28),f=e(__c1ce1f1e3e613f564fc234ff043570f1);(0,f.default)("data-aui-trigger",{type:f.default.type.ATTRIBUTE,events:{click:function(a,b){var c=
b.target,c=(0,g.default)(c).closest("a[href]",a);c.length&&c[0]!==a||(d(a,b),b.preventDefault())},mouseenter:function(a,b){d(a,b)},mouseleave:function(a,b){d(a,b)},focus:function(a,b){d(a,b)},blur:function(a,b){d(a,b)}},prototype:{disable:function(){this.setAttribute("aria-disabled","true")},enable:function(){this.setAttribute("aria-disabled","false")},isEnabled:function(){return"true"!==this.getAttribute("aria-disabled")}}});(0,h.default)("aui/trigger");return{}}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:aui-trigger', location = 'src/soy/trigger.soy' */
// This file was automatically generated from trigger.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.trigger.
 */

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.trigger == 'undefined') { aui.trigger = {}; }


aui.trigger.trigger = function(opt_data, opt_ignored) {
  return '<' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'a') + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '" ' : '') + ' class="' + aui.renderExtraClasses(opt_data) + '" aria-controls="' + soy.$$escapeHtml(opt_data.menu.id) + '" aria-haspopup="true" role="button"' + ((opt_data.title) ? ' title="' + soy.$$escapeHtml(opt_data.title) + '"' : '') + ((opt_data.container) ? ' data-container="' + soy.$$escapeHtml(opt_data.container) + '"' : '') + (((! opt_data.tagName || opt_data.tagName == 'a') && (! opt_data.extraAttributes || Object.prototype.toString.call(opt_data.extraAttributes) === '[object Object]' && ! opt_data.extraAttributes.href && ! opt_data.extraAttributes.tabindex || (! opt_data.extraAttributes.href || ! opt_data.extraAttributes.tabindex))) ? ' tabindex="0"' : '') + ' data-aui-trigger' + aui.renderExtraAttributes(opt_data) + '>' + ((opt_data.content) ? soy.$$filterNoAutoescape(opt_data.content) : '') + ((opt_data.text) ? soy.$$escapeHtml(opt_data.text) : '') + ((! (opt_data.showIcon == false)) ? '<span class="icon ' + soy.$$escapeHtml(opt_data.iconClasses ? opt_data.iconClasses : 'aui-icon-dropdown') + '">' + ((opt_data.iconText) ? soy.$$escapeHtml(opt_data.iconText) : '') + '</span>' : '') + '</' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'a') + '>';
};
if (goog.DEBUG) {
  aui.trigger.trigger.soyTemplateName = 'aui.trigger.trigger';
}
;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-internal-attributes', location = 'node_modules/@atlassian/aui/src/js/aui/internal/attributes.js' */
("undefined"===typeof window?global:window).__29fa312a51517f20df339a1900640e1d=function(){function d(a){return null!==a}function e(a,b,c){c?a.setAttribute(b,""):a.removeAttribute(b)}function f(a,b){var c=function(a){return a.toLowerCase()===b.toLowerCase()},d=null===b,e=!d&&!a.values.filter(c).length;return d?a.hasOwnProperty("missingDefault")?a.missingDefault:null:e?a.hasOwnProperty("invalidDefault")?a.invalidDefault:a.hasOwnProperty("missingDefault")?a.missingDefault:null:a.values.length?a.values.filter(c)[0]:
null}function g(a,b,c){a.setAttribute(b.attribute,c)}var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});b.computeBooleanValue=d;b.setBooleanAttribute=e;b.computeEnumValue=f;b.setEnumAttribute=g;b.default={computeBooleanValue:d,setBooleanAttribute:e,computeEnumValue:f,setEnumAttribute:g};return b}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-internal-enforcer', location = 'node_modules/@atlassian/aui/src/js/aui/internal/enforcer.js' */
("undefined"===typeof window?global:window).__8339408c10b0a9052af9f3aad7b3a4e8=function(){var c={};"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d;var a=__cf890abdf040e0993fb71f2f839bc972;if(a&&a.__esModule)d=a;else{var b={};if(null!=a)for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(b[e]=a[e]);b.default=a;d=b}c.default=function(a){function c(b){return e(function(){return a.hasAttribute(b)},b+" wasn't defined")}function b(d){if(!c(d,a))return!1;var f=a.getAttribute(d);
return e(function(){return document.getElementById(f)},'an element with id set to "'+f+'" was not found')}function e(b,c){return!b()?(a?d.error(c,a):d.error(c),!1):!0}return{attributeExists:c,refersTo:b,satisfiesRules:e,ariaControls:function(){return b("aria-controls")},ariaOwns:function(){return b("aria-owns")}}};return c=c["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-inline-dialog2', location = 'node_modules/@atlassian/aui/src/js/aui/inline-dialog2.js' */
("undefined"===typeof window?global:window).__2883f62e804d6ae6a52910b6c4a55520=function(){function c(a){return a&&a.__esModule?a:{"default":a}}function l(a,b){var d=document.querySelector('[aria-controls="'+a.id+'"]');d&&b(d)}function n(a){a=a.target;(0,e.default)(a).set("mouse-inside",!0);a.message({type:"mouseenter"})}function o(a){a=a.target;(0,e.default)(a).set("mouse-inside",!1);a.message({type:"mouseleave"})}function m(a){(0,e.default)(a).set("mouse-inside",void 0);a.removeEventListener("mouseenter",
n);a.removeEventListener("mouseleave",o);"hover"===a.respondsTo&&((0,e.default)(a).set("mouse-inside",!1),a.addEventListener("mouseenter",n),a.addEventListener("mouseleave",o))}function j(a){var b=!a.hasAttribute("aria-hidden"),d=a.hasAttribute("open");if(b||a.open!==d)d?((0,e.default)(a).set("is-processing-show",!0),(0,f.default)(a).show(),(0,f.default)(a).isVisible()?l(a,function(b){a._auiAlignment||(a._auiAlignment=new p.default(a,b));a._auiAlignment.enable();b.setAttribute("aria-expanded","true")}):
a.open=!1,(0,e.default)(a).set("is-processing-show",!1)):((0,f.default)(a).hide(),(0,f.default)(a).isVisible()?a.open=!0:l(a,function(b){a._auiAlignment||(a._auiAlignment=new p.default(a,b));a._auiAlignment.disable();b.setAttribute("aria-expanded","false")}))}var k={};"use strict";Object.defineProperty(k,"__esModule",{value:!0});var q=c(__307d3e18fd611f85395c67cddeb1fe24),p=c(__f420c577506564c314d7d5d82088641c),r=c(__574ac67f906effeb9d8ec2753b23cf28),g=c(__29fa312a51517f20df339a1900640e1d),s=c(__8339408c10b0a9052af9f3aad7b3a4e8),
t=c(__4d02fe17b8e885a34493e34af3d145dd),f=c(__fe0cd0a7ef176e2ef4e0e105d1ce31f5),h=c(__c1ce1f1e3e613f564fc234ff043570f1),e=c(__fd7d82ce22cd33cac1609667ce8040f9),u={click:function(a){if(a.open){if(!(0,f.default)(a).isPersistent())a.open=!1}else a.open=!0},mouseenter:function(a){a.open||(a.open=!0);a._clearMouseleaveTimeout&&a._clearMouseleaveTimeout()},mouseleave:function(a){if(!(0,f.default)(a).isPersistent()&&a.open){a._clearMouseleaveTimeout&&a._clearMouseleaveTimeout();var b=setTimeout(function(){if(!(0,
e.default)(a).get("mouse-inside"))a.open=!1},1E3);a._clearMouseleaveTimeout=function(){clearTimeout(b);a._clearMouseleaveTimeout=null}}},focus:function(a){a.open||(a.open=!0)},blur:function(a){if(!(0,f.default)(a).isPersistent()&&a.open)a.open=!1}},i={attribute:"responds-to",values:["toggle","hover"],missingDefault:"toggle",invalidDefault:"toggle"},h=(0,h.default)("aui-inline-dialog",{prototype:{get open(){return(0,f.default)(this).isVisible()},set open(a){g.default.setBooleanAttribute(this,"open",
a);j(this)},get persistent(){return this.hasAttribute("persistent")},set persistent(a){g.default.setBooleanAttribute(this,"persistent",a)},get respondsTo(){return g.default.computeEnumValue(i,this.getAttribute(i.attribute))},set respondsTo(a){var b=this.respondsTo;g.default.setEnumAttribute(this,i,a);b!==this.respondsTo&&m(this)},message:function(a){var b={toggle:["click"],hover:["mouseenter","mouseleave","focus","blur"]}[this.respondsTo];if(b&&-1<b.indexOf(a.type))u[a.type](this,a);return this}},
created:function(a){(0,e.default)(a).set("is-processing-show",!1);l(a,function(b){b.setAttribute("aria-expanded",a.open);b.setAttribute("aria-haspopup","true")})},attributes:{"aria-hidden":function(a,b){if("true"===b.newValue){var d=document.querySelector('[aria-controls="'+a.id+'"]');d&&d.setAttribute("aria-expanded","false")}g.default.setBooleanAttribute(a,"open","false"===b.newValue)},open:function(a){document.body.contains(a)&&j(a)},"responds-to":function(a,b){var d=g.default.computeEnumValue(i,
b.oldValue),c=g.default.computeEnumValue(i,b.newValue);d!==c&&m(a)}},attached:function(a){(0,s.default)(a).attributeExists("id");a.hasAttribute("open")?(0,e.default)(a).get("is-processing-show")||j(a):j(a);m(a)},detached:function(a){a._auiAlignment&&a._auiAlignment.destroy()},template:function(a){var b=(0,q.default)('<div class="aui-inline-dialog-contents"></div>').append(a.childNodes);(0,q.default)(a).addClass("aui-layer").html(b)}});(0,r.default)("aui/inline-dialog2",h);(0,t.default)("InlineDialog2",
h);k.default=h;return k=k["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:aui-inline-dialog2', location = 'src/soy/inline-dialog2.soy' */
// This file was automatically generated from inline-dialog2.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.inlineDialog2.
 */

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.inlineDialog2 == 'undefined') { aui.inlineDialog2 = {}; }


aui.inlineDialog2.inlineDialog2 = function(opt_data, opt_ignored) {
  return '<aui-inline-dialog' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="' + aui.renderExtraClasses(opt_data) + '"' + ((opt_data.alignment) ? ' alignment="' + soy.$$escapeHtml(opt_data.alignment) + '"' : '') + ((opt_data.open) ? ' open' : '') + ((opt_data.persistent) ? ' persistent' : '') + ((opt_data.respondsTo) ? ' responds-to="' + soy.$$escapeHtml(opt_data.respondsTo) + '"' : '') + aui.renderExtraAttributes(opt_data) + '>' + ((opt_data.content) ? soy.$$filterNoAutoescape(opt_data.content) : '') + '</aui-inline-dialog>';
};
if (goog.DEBUG) {
  aui.inlineDialog2.inlineDialog2.soyTemplateName = 'aui.inlineDialog2.inlineDialog2';
}


aui.inlineDialog2.trigger = function(opt_data, opt_ignored) {
  return '' + aui.trigger.trigger(soy.$$augmentMap(opt_data, {showIcon: opt_data.showIcon ? opt_data.showIcon : false}));
};
if (goog.DEBUG) {
  aui.inlineDialog2.trigger.soyTemplateName = 'aui.inlineDialog2.trigger';
}
;
;
/* module-key = 'jira.webresources:keyboard-shortcut-toggle', location = '/includes/ajs/keyboardshortcut/KeyboardShortcuts.toggle.js' */
define("jira/ajs/keyboardshortcut/keyboard-shortcut-toggle",["exports"],function(e){var r=!1;e.disable=function(){r=!0},e.enable=function(){r=!1},e.areKeyboardShortcutsDisabled=function(){return r}}),AJS.namespace("AJS.enableKeyboardShortcuts",null,require("jira/ajs/keyboardshortcut/keyboard-shortcut-toggle").enable),AJS.namespace("AJS.disableKeyboardShortcuts",null,require("jira/ajs/keyboardshortcut/keyboard-shortcut-toggle").disable);;
;
/* module-key = 'jira.webresources:assignee-picker', location = '/includes/jira/field/AssigneePicker.js' */
define("jira/field/assignee-picker",["jira/util/formatter","jira/ajs/select/scrollable-single-select","jira/ajs/select/suggestions/assignee-suggest-handler","jira/ajs/list/group-descriptor","jira/ajs/list/item-descriptor","jira/featureflags/feature-manager","aui/params","jquery","underscore","wrm/context-path","aui/populate-parameters","jira/featureflags/feature-manager"],function(e,t,i,s,n,a,r,o,u,l,g){function p(e){return u.find(e,function(e){return"assignee-group-search"===e.id()})}return t.extend({init:function(t){function a(e){r.actionDescriptorId=void 0,g();var t={projectKeys:r.projectKeys,issueKey:r.assigneeEditIssueKey,actionDescriptorId:r.actionDescriptorId,maxResults:50,startAt:0===h._pagination.numberOfShowingItems?0:h._pagination.numberOfShowingItems+1};return p(t,e)}function p(e,t){return u.extend({query:t},e)}function c(e,t){var i=t.accountId;return u.extend({value:i},e)}function d(t){var i=[];if(t.length){for(var a=new s({weight:1,id:"assignee-group-search",uniqueItemScope:"container",replace:!0,label:"All Users"}),r=0,o=t.length;r<o;r++){var u=t[r],l=u.displayName,g=u.emailAddress,p=l;g&&(p+=" - "+g);var d={fieldText:l,label:p,allowDuplicate:!1,icon:u.avatarUrls["16x16"]};a.addItem(new n(c(d,u)))}i.push(a)}return i}var h=this,m=t.element instanceof o?t.element:o(t.element);h._pagination={lastQuery:null,numberOfShowingItems:0,allResultsDisplayed:!1,requestNextPagePromise:null},t=o.extend(!0,{},{submitInputVal:!0,showDropdownButton:!!m.data("show-dropdown-button"),errorMessage:"User \'\'{0}\'\' cannot be assigned this issue",localDataGroupId:"assignee-group-suggested",content:"mixed",suggestionAtTop:!0,removeDuplicates:!0,ajaxOptions:{url:function(){r.assigneeEditIssueKey=void 0,g();var e=r.assigneeEditIssueKey?"search":"multiProjectSearch";return l()+"/rest/api/latest/user/assignable/"+e},query:!0,minQueryLength:0,data:a,formatResponse:d}},t),"-1"==t.editValue&&(t.editValue=!1,m.val("-1")),this._super(t),this.suggestionsHandler=new i(this.options,this.model)},requestSuggestions:function(e){return this._pagination.lastQuery!=this.getQueryVal()&&this._resetPagination(),this._super(e).done(u.bind(function(e){var t=p(e);if(t){var i=t.items();i&&i.length&&(this._pagination.numberOfShowingItems+=i.length)}return e},this))},scrolledToBottomHandler:function(){this._pagination.requestNextPagePromise&&!this._pagination.requestNextPagePromise.isResolved()||this._pagination.allResultsDisplayed||(this._pagination.requestNextPagePromise=this.requestSuggestions(!0).done(u.bind(function(e){var t=p(e);if(t){var i=t.items();i&&i.length?(this.listController.appendToGroupDescriptor("assignee-group-search",i),this.listController.addNextPage()):this._pagination.allResultsDisplayed=!0}else this._pagination.allResultsDisplayed=!0},this)))},_handleCharacterInput:function(e){this._pagination.lastQuery!=this.getQueryVal()?this._super(e):e&&this.showSuggestions()},handleFreeInput:function(e){""===o.trim(e||this.$field.val())?this.setSelection(this.model.getDescriptor("-1")):this._super(e),this._resetPagination()},cleanUpModel:function(){},_resetPagination:function(){this._pagination.lastQuery=this.getQueryVal(),this._pagination.numberOfShowingItems=0,this._pagination.allResultsDisplayed=!1,this._pagination.requestNextPagePromise=null}})}),AJS.namespace("JIRA.AssigneePicker",null,require("jira/field/assignee-picker"));;
;
/* module-key = 'jira.webresources:assignee-picker', location = '/includes/jira/field/initAssigneePickers.js' */
define("jira/field/init-assignee-pickers",["jira/field/assignee-picker","jira/util/users/logged-in-user","jira/util/events","jira/util/events/types","jira/util/events/reasons","jquery","jira/featureflags/feature-manager","jira/skate"],function(e,i,n,t,a,r,s,c){function u(e){var i=e.indexOf("#");return i!==-1?e.substring(i):e}function l(e){r("#assign-to-me-trigger",e).click(function(n){n.preventDefault();var t=r(this).attr("href"),a=u(t),s=i.accountId(),c=r(a,e);r(a+"-single-select",e).length?c.trigger("set-selection-value",s):c.val(s).change()})}function d(e){r(".assignee-edit-group",e).each(function(){var i=r(this),n=i.attr("rel");r("#assignee_userpicker_dummy_"+n+"_container",e).click(function(){r("#assignee_radio_picker_"+n,e).attr("checked","checked")}),i.parents("form[name=jiraform]").submit(function(){i.find("input[name=assignee_radio]:checked").each(function(){this.id=="assignee_radio_picker_"+n?r("#"+n,e).val(r("#hidden-assignee_userpicker_dummy_"+n,e).val()):r("#"+n,e).val(r(this).val())})})})}c("js-assignee-picker",{type:c.type.CLASSNAME,created:function(i){var n=r(i),t=n.data("editValue"),a=new e({element:n,editValue:t});r(document).trigger("ready.single-select.assignee",a)}}),n.bind(t.NEW_CONTENT_ADDED,function(e,i,n){n!==a.panelRefreshed&&(l(i),d(i))})});;
;
/* module-key = 'jira.webresources:assignee-picker', location = '/includes/jira/field/init/init-assignee-picker-webresource.js' */
require("jira/field/init-assignee-pickers");;
;
/* module-key = 'jira.webresources:jira-global', location = '/includes/ajs/dark-features.js' */
define("jira/ajs/dark-features",["jira/util/data/meta"],function(e){function a(){try{var a=JSON.parse(e.get("enabled-dark-features"));if("object"==typeof a)return a}catch(e){}return[]}for(var r=a(),t={},n=0,u=r.length;n<u;n++)t[r[n]]=!0;return{isEnabled:function(e){return!!t[e]},enable:function(e){e&&!t[e]&&(t[e]=!0)},disable:function(e){e&&t[e]&&delete t[e]}}}),AJS.namespace("AJS.DarkFeatures",null,require("jira/ajs/dark-features"));;
;
/* module-key = 'jira.webresources:jira-global', location = '/includes/jquery/plugins/expandoninput/expandOnInput.js' */
!function(t){function i(){var i=t(this),e=this;setTimeout(function(){i.keyup(),e.scrollTop=e.scrollHeight},0)}function e(){var s=t(this),a="border-box"===(s.css("boxSizing")||s.css("-mozBoxSizing")||s.css("-webkitBoxSizing")||s.css("-msBoxSizing"));this.scrollHeight;var h,r=parseInt(s.css("maxHeight"),10)||s.data("expandOnInput_maxHeight")||t(window).height()-160;if(a){var o=s.outerHeight();h=Math.max(o+this.scrollHeight-this.clientHeight,o)}else{var c=s.height();h=Math.max(this.scrollHeight-(s.innerHeight()-c),c)}if(h<r)s.css({overflow:"hidden",height:h+"px"});else{var l=this.selectionStart;s.css({"overflow-y":"auto",height:r+"px"}),s.unbind(n,e),s.unbind("paste",i),this.selectionStart!==l&&(this.selectionStart=l,this.selectionEnd=l),h=r}if(s.trigger("expandedOnInput"),!s.data("hasFixedParent")){var d=t(window),g=d.scrollTop(),u=s.offset().top+h-d.height()+29;g<u&&d.scrollTop(u)}s.trigger("stalkerHeightUpdated")}var n="input keyup";t.fn.expandOnInput=function(s){var a=this.filter("textarea");return a.unbind(n,e).bind(n,e),(t.browser.mozilla||t.browser.msie)&&a.unbind("paste",i).bind("paste",i),a.unbind("refreshInputHeight").bind("refreshInputHeight",function(){t(this).css("height",""),e.call(this)}),a.data("expandOnInput_maxHeight",s),a.each(function(){var i=t(this);i.each(function(){var i=t(this);i.data("hasFixedParent",!!i.hasFixedParent())}),""!==i.val()&&e.call(this)}),this}}(jQuery);;
;
/* module-key = 'jira.webresources:jira-global', location = '/includes/jquery/plugins/isdirty/isDirty.js' */
define("jira/jquery/plugins/isdirty",["jira/util/logger","jira/util/formatter","jira/util/events","jira/util/browser","jquery"],function(e,r,n,t,i){function a(){var e=h;return h=g,"***\n\n"+e+"\n\n***"}function o(e){var r=i(e),n=i(e.form),t=e.type;if(n.hasClass(u)||r.hasClass(u))return!1;if(n.hasClass(f))return!0;if(r.is(":hidden")&&!r.hasClass(l))return!1;if(!r.parent().length)return!1;if(n.has(".error, .errMsg, .errorMessage, .errLabel, .ajaxerror").length>0||n.prev(".error").length>0||n.children(".error").length>0)return!0;if(("hidden"===t||"submit"===t||"button"===t)&&!r.hasClass(l))return!1;if("select-one"===t||"select-multiple"===t){for(var a=e.options,o=0;o<a.length;o++){var s=a[o];if(s.selected!==s.defaultSelected)return!0}return!1}return"checkbox"===t||"radio"===t?e.checked!==e.defaultChecked:e.value!==e.defaultValue}function s(){e.log("the cancel event on forms is deprecated"),i(this.form||this).closest("form").trigger("cancel")}var u="ajs-dirty-warning-exempt",l="ajs-dirty-warning-whitelist",f="ajs-dirty-warning-by-default",c="ajs-dirty-warning-subsequent-submits-allowed",d=!1,g="You have entered new data on this page. If you navigate away from this page without first saving your data, the changes will be lost.",h=g;i.fn.isDirty=function(){for(var e=this.find("*").andSelf().filter(":input"),r=0;r<e.length;r++)if(o(e[r]))return!0;return!1},i.fn.removeDirtyWarning=function(){return i(this.form||this).closest("form").addClass(u),this},n.bind("page-unload.location-change.from-dialog",function(){window.onbeforeunload=function(){}}),n.bind("page-unload.refresh.from-dialog",function(){h="The data in the dialog box was successfully submitted, although this page requires a refresh to display the results.\n\nYou had entered new data on the page before you opened the dialog box. If you continue, your page data will be lost."});var m={getInputsToCheck:function(){return i("input[type='text'], textarea[name], ."+l)},getDirtyWarning:function(){for(var e=m.getInputsToCheck(),r=0,n=e.size();r<n;r++)if(!d&&o(e[r]))return a();d&&(d=!1)},ClassNames:{SANCTIONED:l,EXEMPT:u,BY_DEFAULT:f,SUBSEQUENT_SUBMITS_ALLOWED:c}};return t.isSelenium()||(window.onbeforeunload=m.getDirtyWarning),i(document).delegate("form","submit",function(){function e(e){return e.parents(".jira-dialog.jira-dialog-open").length<=0}function r(e){return e.hasClass(c)}var n=i(this);e(n)&&!r(n)&&(d=!0)}),i(function(){i(".cancel").bind("click",s)}),i(function(){i("#cancelButton").bind("mousedown keydown click",s)}),m}),AJS.namespace("JIRA.DirtyForm",null,require("jira/jquery/plugins/isdirty"));;
;
/* module-key = 'jira.webresources:jira-global', location = '/includes/jquery/plugins/overlabel/overlabel.js' */
!function(a){a.fn.overlabel=function(e){return this.each(function(){var t=a(this),d=e||a("#"+(t.data("target")||t.attr("for")));t.removeClass("overlabel").addClass("overlabel-apply").click(function(a){d.attr("disabled")||d.focus(),a.preventDefault()}),d.width()&&t.width(d.width()),d.on({focus:function(){t.addClass("hidden")},"blur change":function(){var e=a(this);""===e.val()?t.removeClass("hidden"):t.addClass("hidden")}}),d.val()&&""!==d.val()&&t.addClass("hidden")}),this}}(jQuery);;
;
/* module-key = 'jira.webresources:jira-global', location = '/includes/jira/toggleblock/ToggleBlock.js' */
define("jira/toggleblock/toggle-block",["jira/util/logger","jira/lib/class","jira/util/events","jira/util/events/types","jira/data/local-storage","jquery","jira/libs/parse-uri"],function(t,e,i,o,s,n,r){function a(t){var e=t.data.instance;n(this).hasClass(e.options.collapsedClass)&&e.expand(this)}function l(t){var e=t.data.instance;e.options.originalTargetIgnoreSelector&&n(t.originalTarget).is(e.options.originalTargetIgnoreSelector)||(e.toggle(t.target),t.preventDefault())}function c(t){t.data.instance._collapseTwiciBlocksFromStorage()}return e.extend({getDefautOptions:function(){return{blockSelector:".twixi-block",triggerSelector:".twixi",eventType:"click",collapsedClass:"collapsed",expandedClass:"expanded",storageCollectionName:"twixi-blocks",autoFocusTrigger:!0}},_collapseTwiciBlocksFromStorage:function(){var t,e=s.getItem(this.options.storageCollectionName)||"";return e=e.replace(/\./g,"\\."),/#\w+/.test(e)&&(t=n(e),t.is(this.options.blockSelector)&&(this.isPermlink()||t.removeClass(this.options.expandedClass).addClass(this.options.collapsedClass))),this},_updateTwixiBlockIdInStorage:function(t){if(!this.isPermlink()){if(!/#\w+/.test(t))return this;var e=s.getItem(this.options.storageCollectionName)||"",i=(","+e+",").indexOf(","+t+",")+1;e=i?e.indexOf(","+t)+1?e.replace(","+t,""):e.replace(t,""):e.length?e+","+t:t,s.setItem(this.options.storageCollectionName,e)}return this},contract:function(t){return t=n(t),t.is(this.options.blockSelector)&&(t.removeClass(this.options.expandedClass).addClass(this.options.collapsedClass),this.options.persist!==!1&&this._updateTwixiBlockIdInStorage("#"+t.attr("id"))),n(t).trigger("contractBlock"),this},expand:function(t){return t=n(t),t.is(this.options.blockSelector)&&(t.removeClass(this.options.collapsedClass).addClass(this.options.expandedClass),this.options.persist!==!1&&this._updateTwixiBlockIdInStorage("#"+t.attr("id"))),n(t).trigger("expandBlock"),this},toggle:function(t){var e=n(t).closest(this.options.blockSelector);return e.hasClass(this.options.collapsedClass)?this.expand(e):this.contract(e),this.options.autoFocusTrigger&&e.find(this.options.triggerSelector+":visible").focus(),this},isPermlink:function(){return this.checkIsPermlink(location.href)},checkIsPermlink:function(t){var e=r(t).queryKey;return e.hasOwnProperty("focusedCommentId")||e.hasOwnProperty("focusedWorklogId")},addTrigger:function(t,e){var i=this,o=0;return t&&(e=e||"click","dblclick"===e&&(document.selection?n(document).delegate(t,"dblclick",function(){document.selection.empty()}):n(document).delegate(t,"mousedown",function(){var t=(new Date).getTime(),e=t-o>750;return o=t,e})),n(document).delegate(t,e,function(){i.toggle(this)})),this},addCallback:function(t,e){return n.aop.after({target:this,method:t},e),this},isUnique:function(t){var e=n(document).data("toggleBlockUids")||[];return n.inArray(t,e)===-1},setUid:function(t){var e=n(document).data("toggleBlockUids")||[];e.push(t),n(document).data("toggleBlockUids",e)},init:function(e){var s=this;e=e||{},this.options=n.extend(this.getDefautOptions(),e);var r=this.options.triggerSelector;return this.isUnique(r)?(this.setUid(r),n(document).delegate(this.options.blockSelector,"reveal",{instance:this},a),n(document).delegate(this.options.triggerSelector,this.options.eventType,{instance:this},l),i.bind(o.REFRESH_TOGGLE_BLOCKS,{instance:this},c),void(this.options.persist!==!1&&n(function(){s._collapseTwiciBlocksFromStorage()}))):void("undefined"!=typeof console&&t.warn&&t.warn("Your are trying to create a ToggleBlock with selector '"+this.options.triggerSelector+"'.One already exists with this trigger so has been ignored."))}})});;
;
/* module-key = 'jira.webresources:jira-global', location = '/includes/jira/toggleblock/namespaces.js' */
AJS.namespace("JIRA.ToggleBlock",null,require("jira/toggleblock/toggle-block"));;
;
/* module-key = 'jira.webresources:jira-global', location = '/includes/jira/togglelist/ToggleList.js' */
define("jira/togglelist/toggle-list",["jira/lib/class","jquery"],function(e,i){return e.extend({init:function(e){var i=e.more,o=e.showMoreContainer||e.showMoreLink,t=e.showLessContainer||e.showLessLink,n=e.showMoreLink,s=e.showLessLink;if(!i||!i.length)return o.hide(),void t.hide();i.hide(),o.show(),t.hide();var l=function(e){e.preventDefault(),i.toggle(),o.toggle(),t.toggle()};n.click(l),s.click(l)}})}),AJS.namespace("JIRA.ToggleList",null,require("jira/togglelist/toggle-list"));;
;
/* module-key = 'jira.webresources:jira-global', location = '/includes/jira/wikipreview/wikiPreview.js' */
define("jira/wikipreview/wiki-preview",["jira/util/formatter","wrm/context-path","jquery"],function(e,i,n){return function(r,t){var s,a,o,d,c=!1,l=function(){s=n("#"+r.fieldId,t),a=n("#"+r.fieldId+"-wiki-edit",t),o=n("#"+r.trigger,t)},u=function(){var e;return{show:function(){e||(e=n("<div>").html("&nbsp;").css({height:"300px"}).insertBefore(a)),e.css({display:"block"})},hide:function(){e.css({display:"none"})}}}(),p=function(){c?(a.find(".content-inner").css({maxHeight:""}),this.showInput()):(a.find(".content-inner").css({maxHeight:s.css("maxHeight")}),this.showPreview())},w=function(i){a.originalHeight=a.height(),u.show(),a.addClass("previewClass"),d=s.val(),s.hide(),o.removeClass("loading").addClass("selected"),h(e.format("Back to edit {0}",r.fieldId)),a.find(".content-inner").html(i),u.hide(),c=!0,n(document).trigger("showWikiPreview",[a]),setTimeout(function(){o.focus()},0)},f=function(e){return function(i,n,r){o.removeClass("loading"),d=s.val(),n&&alert(n),r&&alert(r),e.showInput()}},h=function(e){o.find(".wiki-renderer-icon").text(e)};return{showPreview:function(){var e=this,a=n("#pid",t).val(),o=n("#issuetype",t).val();n.isArray(a)&&(a=a[0]),n.isArray(o)&&(o=o[0]),n("#"+r.trigger,t).addClass("loading"),n.ajax({url:i()+"/rest/api/1.0/render",contentType:"application/json",type:"POST",data:JSON.stringify({rendererType:r.rendererType,unrenderedMarkup:s.val(),issueKey:r.issueKey,projectId:a,issueType:o}),dataType:"html",success:w,error:f(e)})},showInput:function(i){a&&(u.show(),a.css({height:""}),a.removeClass("previewClass").find(".content-inner").empty(),s=n("#"+r.fieldId,t),s.val(d),s.show(),s.focus(),o.removeClass("selected"),h(e.format("Preview {0}",r.fieldId)),u.hide(),c=!1,n(document).trigger("showWikiInput",[a]))},init:function(){var e,i=this;r instanceof n&&(r=n.readData(r)),e=n("#"+r.trigger,t),e.click(function(n){e.hasClass("loading")||(l(),p.call(i)),n.preventDefault()})}}}}),AJS.namespace("jira.app.wikiPreview",null,require("jira/wikipreview/wiki-preview")),AJS.namespace("JIRA.wikiPreview",null,require("jira/wikipreview/wiki-preview"));;
;
/* module-key = 'jira.webresources:jira-global', location = '/includes/jira/common/app.js' */
!function(){function e(){k("label.overlabel").overlabel()}function t(){var e=k("div.results"),t=e.width();e.bind("resultsWidthChanged",function(){var e=k(this);e.css("width",100/t*(t-(parseInt(k(document.documentElement).prop("scrollWidth"),10)-k(window).width()))+"%")}),k(window).resize(function(){e.trigger("resultsWidthChanged")}),e.trigger("resultsWidthChanged"),k("#issuenav").bind("contractBlock expandBlock",function(){k(".results").trigger("resultsWidthChanged")})}function i(){k(".fieldTabs li").click(function(e){e.preventDefault(),e.stopPropagation();var t=k(this);t.hasClass("active")||(k(".fieldTabs li.active").removeClass("active"),t.addClass("active"),k(".fieldTabArea.active").removeClass("active"),k("#"+t.attr("rel")).addClass("active"))})}function n(){k("form").handleAccessKeys(),W.bind("dialogContentReady",function(){k("form",this.$content).handleAccessKeys({selective:!1})})}function a(){W.keydown(function(e){S.current&&27===e.which&&!k(e.target).is(":input")&&S.current.hide()})}function r(){new x({blockSelector:".twixi-block",storageCollectionName:"twixi"}).addCallback("toggle",function(){A.getStalker().trigger("stalkerHeightUpdated")}).addTrigger(".action-head .action-details","click"),new x({blockSelector:"#issue-filter .toggle-wrap:not(#navigator-filter-subheading-textsearch-group)",triggerSelector:".toggle-trigger",collapsedClass:"expanded",expandedClass:"collapsed",storageCollectionName:"navSimpleSearch"}),new x({blockSelector:".twixi-block",triggerSelector:".twixi-trigger",storageCollectionName:"twixi"}),new x({blockSelector:"#issuenav",triggerSelector:"a.toggle-lhc",collapsedClass:"lhc-collapsed",storageCollectionName:"lhc-state",autoFocusTrigger:!1}),k(".error","#issue-filter").parents(".toggle-wrap").removeClass("collapsed").addClass("expanded"),k("fieldset.content-toggle input[type='radio']").live("change",function(){var e=k(this);e.closest(".content-toggle").find("input[type='radio']").each(function(){var e=k(this);k("#"+e.attr("name")+"-"+e.val()+"-content").addClass("hidden")}),k("#"+e.attr("name")+"-"+e.val()+"-content").removeClass("hidden")})}function o(){k("#log-work-adjust-estimate-new-value,#log-work-adjust-estimate-manual-value").attr("disabled","disabled"),k("#log-work-adjust-estimate-"+k("input[name=worklog_adjustEstimate]:checked,input[name=adjustEstimate]:checked").val()+"-value").removeAttr("disabled"),k("input[name=worklog_adjustEstimate],input[name=adjustEstimate]").change(function(){k("#log-work-adjust-estimate-new-value,#log-work-adjust-estimate-manual-value").attr("disabled","disabled"),k("#log-work-adjust-estimate-"+k(this).val()+"-value").removeAttr("disabled")})}function s(){var e=k("input:checked");0!==e.length&&("forgot-login-rb-forgot-password"===e.attr("id")?(k("#username,#password").addClass("hidden"),k("#password").removeClass("hidden")):"forgot-login-rb-forgot-username"===e.attr("id")&&(k("#username,#password").addClass("hidden"),k("#username").removeClass("hidden"))),k("#forgot-login-rb-forgot-password").change(function(){k("#username,#password").addClass("hidden"),k("#password").removeClass("hidden")}),k("#forgot-login-rb-forgot-username").change(function(){k("#username,#password").addClass("hidden"),k("#username").removeClass("hidden")})}function l(){k("input.upfile").each(function(){var e=k(this),t=e.closest(".field-group");e.change(function(){e.val().length>0&&t.next(".field-group").removeClass("hidden")})})}function c(){W.on("keypress","textarea",N.submitOnCtrlEnter),k("#jqltext").keypress(N.submitOnEnter)}function d(){var e=k("#browser-warning");k(".icon-close",e).click(function(){e.slideUp("fast"),E.save("UNSUPPORTED_BROWSER_WARNING","handled")})}function u(){k("form").submit(function(e){var t=new k.Event("before-submit");k(this).trigger(t),t.isDefaultPrevented()&&e.preventDefault()})}function f(){var e="#comment, #environment, #description",t=200;W.bind("tabSelect",function(t,i){i.pane.find(e).expandOnInput()}),k(e).expandOnInput(t),W.bind("dialogContentReady",function(i,n){n.get$popupContent().bind("tabSelect",function(i,n){n.pane.find(e).expandOnInput(t)}).find(e).expandOnInput(t)}),W.bind("showWikiInput",function(t,i){i.find(e).expandOnInput()})}function g(){I.bind("dialogContentReady",function(){j.setup()})}function h(){var e=k("form.aui"),t=k("a.cancel",e);O.isIE()&&O.majorVersion()<12&&t.attr("accessKey")&&t.focus(function(e){e.altKey&&(k(this).mousedown(),window.location.href=t.attr("href"))})}function p(){var e=function(e){k(e).closest(".availableActionRow").find("td:first :checkbox").attr("checked",!0)},t=k("#availableActionsTable tr.availableActionRow");t.children("td:last-child").find(":input").change(function(t){e(this)})}function v(){var e=function(e){k(e).closest("tr").prev().find("td:first :checkbox").attr("checked",!0)},t=k("#availableActionsTable .availableActionRowMultiSelect");t.children("td:last-child").find(":input").change(function(t){e(this)})}function m(){k("#availableActionsTable .availableActionMultiSelect select").change(function(e){var t=k(this);t.closest("tr").next().toggleClass("hidden","removeall"===t.val())})}function b(){k(".clickable").click(function(){window.location.href=k(this).find("a").attr("href")})}function w(e){k(".projects-list-trigger",e).each(function(){var e=k(this);e.click(!1);var t=e.attr("href");S(this,t.substring(1),function(e,i,n){e.html(k(t).html()),n()},{onHover:!0,hideDelay:500,width:240})})}function C(){W.on("click","[data-helplink=local]",function(e){var t=this.getAttribute("href"),i=window.open(t,"jiraLocalHelp","resizable, scrollbars=yes");return i.focus(),e.preventDefault(),!1})}var k=require("jquery"),S=(require("aui/params"),require("aui/inline-dialog")),j=require("aui/tabs"),x=require("jira/toggleblock/toggle-block"),y=require("jira/ajs/browser/describe-browser"),A=require("jira/issue"),q=require("jira/message"),E=require("jira/data/cookie"),N=require("jira/util/forms"),R=require("jira/util/data/meta"),I=require("jira/util/events"),O=require("jira/util/navigator"),T=require("jira/skate"),W=k(document);T("shared-item-trigger",{type:T.type.CLASSNAME,attached:function(e){var t=e.getAttribute("href");S(e,t.substring(1),function(e,i,n){e.html(k(t).html()),n()},{width:240})}}),k(function(){r(),e(),t(),i(),n(),o(),s(),l(),c(),d(),u(),f(),h(),p(),v(),m(),a(),b(),C(),w()}),y(),g(),T("js-filter-form-edit",{type:T.type.CLASSNAME,extends:"form",events:{submit:function(e,t){if(!t.defaultPrevented){var i=AJS.escapeHtml(e.elements.filterName.value);q.showMsgOnReload(AJS.format("Changes to {0} have been saved.",i),{type:"SUCCESS",closeable:!0,target:"body:not(:has(#filter-edit))"})}}}}),T("js-filter-form-subscription",{type:T.type.CLASSNAME,extends:"form",events:{submit:function(e,t){if(!t.defaultPrevented){var i=e.elements.groupName.value||R.get("remote-user-fullname");q.showMsgOnReload(AJS.format("A subscription has been added for \u003cstrong\u003e{0}\u003c/strong\u003e.",AJS.escapeHtml(i)),{type:"SUCCESS",closeable:!0,target:"body:not(:has(#filter-subscription))"})}}}})}();;
;
/* module-key = 'jira.webresources:jira-global', location = '/includes/jira/common/page.js' */
define("jira/common/page",["jira/util/logger","jquery"],function(e,n){var t={relatedContentCssSelector:".content-container > .content-related",mainContentCssSelector:".content-container > .content-body"},a={relatedContentCssSelector:".aui-page-panel > .aui-page-panel-inner > .aui-page-panel-nav",mainContentCssSelector:".aui-page-panel > .aui-page-panel-inner > .aui-page-panel-content"},o=function(o){var r=n(t[o]);return r.size()?e.log("This page is using a deprecated page layout markup pattern. It should be updated to use AUI page layout."):r=n(a[o]),r},r=JIRA&&JIRA.Page;return n.extend({},r,t,a,{relatedContentElement:function(){return o("relatedContentCssSelector")},mainContentElement:function(){return o("mainContentCssSelector")}})}),AJS.namespace("JIRA.Page",null,require("jira/common/page"));;
;
/* module-key = 'jira.webresources:jira-global', location = '/includes/jira/dialog/initGenericDialogs.js' */
define("jira/dialog/init-generic-dialogs",["jira/dialog/dialog-register","jira/dialog/dialog-util","jira/dialog/form-dialog","jira/ajs/keyboardshortcut/keyboard-shortcut-toggle","jquery","exports"],function(i,e,t,a,o,r){r.init=function(){i.keyboardShortcuts=new t({id:"keyboard-shortcuts-dialog",trigger:"#keyshortscuthelp",widthClass:"large",onContentRefresh:function(){var i=this.get$popupContent();o("a.submit-link",i).click(function(e){e.preventDefault(),o("form",i).submit()})},onSuccessfulSubmit:function(){a.areKeyboardShortcutsDisabled()?a.enable():a.disable()}}),i.deleteIssueLink=new t({type:"ajax",id:"delete-issue-link-dialog",trigger:"#linkingmodule .delete-link > a",ajaxOptions:e.getDefaultAjaxOptions,isIssueDialog:!0}),new t({id:"credits-dialog",trigger:"#view_credits",widthClass:"creditsContainer",onContentRefresh:function(){!o("html").hasClass("safari")}}),new t({id:"about-dialog",trigger:"#view_about",ajaxOptions:{url:this.href,data:{decorator:"dialog",inline:"false"}},widthClass:"large"}),o(document).on("click","a.trigger-dialog",function(i){i.preventDefault();var e=void 0!==i.target&&o(i.target).hasClass("stacked-dialog"),a=new t({id:this.id+"-dialog",ajaxOptions:{url:this.href,data:{decorator:"dialog",inline:"false"}},stacked:e});a.show()})}});;
;
/* module-key = 'jira.webresources:jira-global', location = '/includes/jira/dialog/initDashboardDialogs.js' */
define("jira/dialog/init-dashboard-dialogs",["jira/dialog/dialog-register","jira/dialog/form-dialog","jquery","exports"],function(e,a,t,d){d.init=function(){document.getElementById("dashboard")&&(e.deleteDashboard=new a({type:"ajax"}),t(document).delegate("#delete_dashboard","click",function(a){a.stopPropagation(),a.preventDefault(),e.deleteDashboard.$activeTrigger=t("#delete_dashboard"),e.deleteDashboard.init({type:"ajax",id:"delete-dshboard",ajaxOptions:{url:e.deleteDashboard.$activeTrigger.attr("href")},targetUrl:"input[name=targetUrl]"}),e.deleteDashboard.show()}))}});;
;
/* module-key = 'jira.webresources:jira-global', location = '/includes/jira/dialog/initNonDashboardDialogs.js' */
define("jira/dialog/init-non-dashboard-dialogs",["jira/dialog/dialog-register","jira/dialog/dialog-factory","jira/dialog/dialog-util","jira/dialog/form-dialog","jira/dialog/labels-dialog","jira/dialog/screenshot-window","jira/issuenavigator/issue-navigator","jquery","exports"],function(e,s,i,t,a,o,l,u,n){n.init=function(){function n(e){var s=e.$activeTrigger,i=s.closest(".labels-wrap"),t=0!==s.parents("#view-subtasks").length;return t?i=s.parents("tr").find(".labels-wrap"):s.hasClass("issueaction-edit-labels")&&(i=u(l.isNavigator()?"#issuetable tr.issuerow.focused td.labels .labels-wrap":"#wrap-labels .labels-wrap")),i.length>0&&i}document.getElementById("dashboard")||(e.linkIssue=s.createLinkIssueDialog("a.issueaction-link-issue"),e.deleteIssue=new t({id:"delete-issue-dialog",trigger:"a.issueaction-delete-issue",targetUrl:"#delete-issue-return-url",ajaxOptions:i.getDefaultAjaxOptions,onSuccessfulSubmit:i.storeCurrentIssueIdOnSucessfulSubmit,issueMsg:"thanks_issue_deleted",delayShowUntil:i.BeforeShowIssueDialogHandler.execute,isIssueDialog:!0}),e.cloneIssue=new t({id:"clone-issue-dialog",trigger:"a.issueaction-clone-issue",handleRedirect:!0,ajaxOptions:i.getDefaultAjaxOptions,onSuccessfulSubmit:i.storeCurrentIssueIdOnSucessfulSubmit,issueMsg:"thanks_issue_cloned",delayShowUntil:i.BeforeShowIssueDialogHandler.execute,isIssueDialog:!0}),e.assignIssue=new t({id:"assign-dialog",trigger:"a.issueaction-assign-issue",ajaxOptions:i.getDefaultAjaxOptions,onSuccessfulSubmit:i.storeCurrentIssueIdOnSucessfulSubmit,issueMsg:"thanks_issue_assigned",delayShowUntil:i.BeforeShowIssueDialogHandler.execute,isIssueDialog:!0,widthClass:"large"}),e.assignIssueToMe=new t({id:"assign-dialog",trigger:"a.issueaction-assign-to-me",ajaxOptions:i.getDefaultAjaxOptions,onSuccessfulSubmit:i.storeCurrentIssueIdOnSucessfulSubmit,issueMsg:"thanks_issue_assigned",delayShowUntil:i.BeforeShowIssueDialogHandler.execute,isIssueDialog:!0}),e.logWork=new t({id:"log-work-dialog",trigger:"a.issueaction-log-work",handleRedirect:!0,ajaxOptions:i.getDefaultAjaxOptions,onSuccessfulSubmit:i.storeCurrentIssueIdOnSucessfulSubmit,issueMsg:"thanks_issue_worklogged",delayShowUntil:i.BeforeShowIssueDialogHandler.execute,isIssueDialog:!0,widthClass:"large"}),e.attachFile=new t({id:"attach-file-dialog",trigger:"a.issueaction-attach-file",handleRedirect:!0,ajaxOptions:i.getDefaultAjaxOptions,onSuccessfulSubmit:i.storeCurrentIssueIdOnSucessfulSubmit,issueMsg:"thanks_issue_attached",isIssueDialog:!0,widthClass:"large"}),e.attachScreenshot=new o({id:"attach-screenshot-window",trigger:"a.issueaction-attach-screenshot"}),e.manageAttachment=new t({id:"manage-attachment-dialog",trigger:"#manage-attachment-link",stacked:!0,reloadOnPop:!0,isIssueDialog:!0,widthClass:"large"}),e.comment=new t({id:"comment-add-dialog",trigger:"a.issueaction-comment-issue:not(.inline-comment)",handleRedirect:!0,ajaxOptions:i.getDefaultAjaxOptions,onSuccessfulSubmit:i.storeCurrentIssueIdOnSucessfulSubmit,issueMsg:"thanks_issue_commented",isIssueDialog:!0,widthClass:"large"}).dirtyFormWarning(),e.editLabels=new a({id:"edit-labels-dialog",trigger:"a.issueaction-edit-labels,a.edit-labels",autoClose:!0,ajaxOptions:i.getDefaultAjaxOptions,onSuccessfulSubmit:i.storeCurrentIssueIdOnSucessfulSubmit,issueMsg:"thanks_issue_labelled",delayShowUntil:i.BeforeShowIssueDialogHandler.execute,labelsProvider:n,isIssueDialog:!0}),e.editComment=new t({type:"ajax",id:"edit-comment",trigger:".action-links .edit-comment",delayShowUntil:i.BeforeShowIssueDialogHandler.execute,isIssueDialog:!0,widthClass:"large",analyticsComponent:"viewissue.comment",analyticsAction:"edit"}).dirtyFormWarning(),e.editLogWork=new t({id:"edit-log-work-dialog",trigger:".action-links .edit-worklog-trigger",isIssueDialog:!0,onSuccessfulSubmit:i.storeCurrentIssueIdOnSucessfulSubmit,delayShowUntil:i.BeforeShowIssueDialogHandler.execute,widthClass:"large"}),e.deleteLogWork=new t({id:"delete-log-work-dialog",trigger:".action-links .delete-worklog-trigger",isIssueDialog:!0,onSuccessfulSubmit:i.storeCurrentIssueIdOnSucessfulSubmit,delayShowUntil:i.BeforeShowIssueDialogHandler.execute,widthClass:"large"}),e.deleteComment=new t({type:"ajax",id:"delete-comment-dialog",trigger:".action-links [id^='delete_comment']",delayShowUntil:i.BeforeShowIssueDialogHandler.execute,isIssueDialog:!0,widthClass:"large",analyticsComponent:"viewissue.comment",analyticsAction:"delete"}).dirtyFormWarning(),e.watchIssue=new t({ajaxOptions:i.getDefaultAjaxOptions,onSuccessfulSubmit:i.storeCurrentIssueIdOnSucessfulSubmit,delayShowUntil:i.BeforeShowIssueDialogHandler.execute,trigger:".issueaction-watch-issue:not([id='toggle-watch-issue'])",isIssueDialog:!0}),e.stopWatchingIssue=new t({ajaxOptions:i.getDefaultAjaxOptions,onSuccessfulSubmit:i.storeCurrentIssueIdOnSucessfulSubmit,delayShowUntil:i.BeforeShowIssueDialogHandler.execute,trigger:".issueaction-unwatch-issue:not([id='toggle-watch-issue'])",isIssueDialog:!0}),e.addVoteForIssue=new t({ajaxOptions:i.getDefaultAjaxOptions,onSuccessfulSubmit:i.storeCurrentIssueIdOnSucessfulSubmit,delayShowUntil:i.BeforeShowIssueDialogHandler.execute,trigger:".issueaction-vote-issue:not([id='toggle-vote-issue'])",isIssueDialog:!0}),e.removeVoteForIssue=new t({ajaxOptions:i.getDefaultAjaxOptions,onSuccessfulSubmit:i.storeCurrentIssueIdOnSucessfulSubmit,delayShowUntil:i.BeforeShowIssueDialogHandler.execute,trigger:".issueaction-unvote-issue:not([id='toggle-vote-issue'])",isIssueDialog:!0}),new t({type:"ajax",id:"delete-attachment-dialog",trigger:"#attachmentmodule .attachment-delete a, #issue-attachments-table a.delete",isIssueDialog:!0}))}});;
;
/* module-key = 'jira.webresources:jira-global', location = '/includes/jira/dialog/initWorkflowTransitionDialogs.js' */
define("jira/dialog/init-workflow-transition-dialogs",["jira/dialog/dialog-register","jira/dialog/dialog-util","jira/dialog/form-dialog","jira/issuenavigator/issue-navigator","aui/tabs","jquery","exports","jira/libs/parse-uri"],function(i,t,a,e,o,s,r,n){var l="a.issueaction-workflow-transition";r.init=function(){s(document).delegate(l,"click",function(e){e.preventDefault();var r=s(e.target).closest(l),u=n(r.attr("href")).queryKey.action;if(u){var g="workflow-transition-"+u+"-dialog",f=s(this);i[g]||(i[g]=new a({id:g,trigger:['a[href*="action='+u+'&"].issueaction-workflow-transition','a[href$="action='+u+'"].issueaction-workflow-transition'],widthClass:"large",handleRedirect:!0,ajaxOptions:t.getDefaultAjaxOptions,onSuccessfulSubmit:t.storeCurrentIssueIdOnSucessfulSubmit,delayShowUntil:t.BeforeShowIssueDialogHandler.execute,issueMsg:"thanks_issue_transitioned",onContentRefresh:function(){o.setup()},isIssueDialog:!0}),i[g].$activeTrigger=f,i[g].show())}})}});;
;
/* module-key = 'jira.webresources:jira-global', location = '/includes/jira/dialog/initDialogBehaviour.js' */
define("jira/dialog/init-dialog-behaviour",["jira/dialog/dialog-register","jira/dialog/dialog","jira/issue","jira/issuenavigator/issue-navigator","jquery","underscore","exports"],function(i,e,n,o,r,t,a){a.init=function(){r(window).resize(t.debounce(function(){e.current&&e.current._positionInCenter()},200)),r.each(i,function(i,a){a instanceof e&&t.result(a,"isIssueDialog")&&r(a).bind("beforeShow",function(){return o.isRowSelected()||!!n.getIssueId()})})}});;
;
/* module-key = 'jira.webresources:jira-global', location = '/includes/jira/dialog/initDialogs.js' */
AJS.$(function(){require("jira/dialog/init-generic-dialogs").init(),require("jira/dialog/init-dashboard-dialogs").init(),require("jira/dialog/init-non-dashboard-dialogs").init(),require("jira/dialog/init-workflow-transition-dialogs").init(),require("jira/dialog/init-dialog-behaviour").init()});;
;
/* module-key = 'jira.webresources:jira-global', location = '/includes/jira/dropdown/element/default-dropdown.js' */
define("jira/dropdown/element/default-dropdown",["jira/util/logger","jira/ajs/layer/layer-constants","jira/ajs/dropdown/dropdown","jira/skate","jquery"],function(t,n,a,o,e){return o("js-default-dropdown",{type:o.type.CLASSNAME,created:function(t){},attached:function(o){var r=e(o),d=r.next(".aui-list"),i=r.attr("data-alignment")||n.RIGHT,l=!!r.data("hasDropdown");0===d.length&&t.warn("Dropdown init failed. Could not find content. Printing culprit...",o),l||(r.data("hasDropdown",!0),new a({trigger:r,content:d,alignment:i,setMaxHeightToWindow:r.attr("data-contain-to-window"),hideOnScroll:r.attr("data-hide-on-scroll")||".issue-container"}))}})});;
;
/* module-key = 'jira.webresources:jira-global', location = '/includes/jira/dropdown/element/issue-actions-trigger.js' */
define("jira/dropdown/element/issue-actions-trigger",["jira/fragments/issueActionsFragment","jira/ajs/dropdown/dropdown","jira/skate","jquery"],function(r,e,n,s){function a(){var r={};return JIRA.Issues&&JIRA.Issues.Api&&(r.ajaxOptions={},r.ajaxOptions.formatError=JIRA.Issues.Api.showInlineIssueLoadError),r}var i=r;return n("issue-actions-trigger",{type:n.type.CLASSNAME,attached:function(r){var n=s(r),t={hideOnScroll:".issue-container",trigger:n,ajaxOptions:{dataType:"json",cache:!1,formatSuccess:i},onerror:function(r){r.layerController.initialized=!0,r.hide()}};t=s.extend(!0,t,a()),new e(t),n.addClass("trigger-happy")}})});;
;
/* module-key = 'jira.webresources:jira-global', location = '/includes/jira/dropdown/DropdownFactory.js' */
define("jira/dropdown/dropdown-factory",["jira/ajs/layer/layer-constants","jira/ajs/dropdown/dropdown","jquery","exports"],function(n,d,o,i){i.bindGenericDropdowns=o.noop,i.bindIssueActionsDds=o.noop,i.bindNavigatorOptionsDds=function(){var i=o("#navigator-options");d.create({trigger:i.find(".aui-dd-link"),content:i.find(".aui-list"),alignment:n.RIGHT}),i.find("a.aui-dd-link").linkedMenu()},i.bindConfigDashboardDds=function(){o("#dashboard").find(".aui-dd-parent").dropDown("Standard",{trigger:"a.aui-dd-link"})}}),AJS.namespace("JIRA.Dropdowns",null,require("jira/dropdown/dropdown-factory"));;
;
/* module-key = 'jira.webresources:jira-global', location = '/includes/jira/dropdown/initDropdowns.js' */
require(["jira/dropdown/element/default-dropdown","jira/dropdown/element/issue-actions-trigger","jira/dropdown/dropdown-factory","jquery"],function(o,d,n,r){r(function(){n.bindNavigatorOptionsDds(),n.bindConfigDashboardDds()})});;
;
/* module-key = 'jira.webresources:jira-global', location = '/includes/jquery/plugins/togglefield/toggleField.js' */
!function(e){e.fn.toggleField=function(n){var t=this,n=e(n),r=function(){return n.prop("disabled",function(){return t.prop("checked")===!1?(t.parent().addClass("disabled"),!0):(t.parent().removeClass("disabled"),!1)}()),arguments.callee}();return e(document[this.attr("name")]).click(r).change(r),this}}(jQuery);;
;
/* module-key = 'jira.webresources:jira-global', location = '/includes/jira/project/character-map.js' */
define("jira/util/strings/character-map",function(){var a={};return a[199]="C",a[231]="c",a[252]="u",a[251]="u",a[250]="u",a[249]="u",a[233]="e",a[234]="e",a[235]="e",a[232]="e",a[226]="a",a[228]="a",a[224]="a",a[229]="a",a[225]="a",a[239]="i",a[238]="i",a[236]="i",a[237]="i",a[196]="A",a[197]="A",a[201]="E",a[230]="ae",a[198]="Ae",a[244]="o",a[246]="o",a[242]="o",a[243]="o",a[220]="U",a[255]="Y",a[214]="O",a[241]="n",a[209]="N",a});;
;
/* module-key = 'jira.webresources:jira-global', location = '/includes/jira/project/ProjectKeyGenerator.js' */
define("jira/project/project-key-generator",["jira/util/strings/character-map","jira/lib/class","jquery","underscore"],function(e,t,n,r){function i(e){return e.join("").length}function h(e){return r.reject(e,function(e){return n.inArray(e,g)!==-1})}function s(e){var t="";return n.each(e,function(e,n){t+=n.charAt(0)}),t}function a(e){var t,n=!1;for(t=0;t<e.length;t++)if(u(e[t]))n=!0;else if(n)return e.substring(0,t+1);return e}function u(e){return e&&1===e.length&&e.search("[AEIOUY]")!==-1}var g=["THE","A","AN","AS","AND","OF","OR"];return t.extend({init:function(e){e=n.extend({},e),this.desiredKeyLength="number"==typeof e.desiredKeyLength?e.desiredKeyLength:4,this.maxKeyLength="number"==typeof e.maxKeyLength?e.maxKeyLength:0},generateKey:function(t){if(t=n.trim(t),!t)return"";for(var r=[],u=0,g=t.length;u<g;u++){var c=e[t.charCodeAt(u)];r.push(c?c:t[u])}t=r.join("");var o=[];n.each(t.split(/\s+/),function(e,t){t&&(t=t.replace(/[^a-zA-Z]/g,""),t=t.toUpperCase(),t.length&&o.push(t))}),this.desiredKeyLength&&i(o)>this.desiredKeyLength&&(o=h(o));var f;if(0===o.length)f="";else if(1===o.length){var d=o[0];f=this.desiredKeyLength&&d.length>this.desiredKeyLength?a(d):d}else f=s(o);return this.maxKeyLength&&f.length>this.maxKeyLength&&(f=f.substr(0,this.maxKeyLength)),f}})});;
;
/* module-key = 'jira.webresources:jira-global', location = '/includes/jira/project/namespace.js' */
AJS.namespace("JIRA.ProjectKeyGenerator",null,require("jira/project/project-key-generator"));;
;
/* module-key = 'jira.webresources:jira-global', location = 'includes/jira/project/templates/projectSample.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.CreateProject&&(JIRA.Templates.CreateProject={}),JIRA.Templates.CreateProject.projectSample=function(e,a){return e=e||{},'<div class="aui-message hint sample-project-container"><span class="aui-icon icon-hint"></span><p class="title">'+soy.$$escapeHtml("Project preview")+"</p><p>"+soy.$$escapeHtml("With the values you\'ve set, an issue in your project might look like this:")+'</p><div class="aui-panel sample-project"><div class="item-header"><div class="avatar"><img id="project-avatar" alt="" class="project-avatar-48" height="48" src="'+soy.$$escapeHtml(e.avatarUrl)+'" width="48"/></div><ul class="breadcrumbs"><li><a id="project-name-val">'+soy.$$escapeHtml(e.projectName)+'</a></li><li><a id="key-val">'+soy.$$escapeHtml(e.projectKey)+'</a></li></ul><h1 class="item-summary"><a>'+(e.issueTitle?soy.$$escapeHtml(e.issueTitle):soy.$$escapeHtml("Example"))+'</a></h1><div class="command-bar"></div></div></div></div>'};;
;
/* module-key = 'jira.webresources:jira-global', location = '/includes/jira/field/templates/create-project-template-wrapper.js' */
define("jira/field/create-project/templates",[],function(){"use strict";return window.JIRA.Templates.CreateProject});;
;
/* module-key = 'jira.webresources:jira-global', location = '/includes/jira/project/ProjectSample.js' */
define("jira/project/project-sample",["jira/lib/class","jquery","jira/field/create-project/templates"],function(e,t,a){return e.extend({init:function(e){this.defaultName="My Project",this.defaultKey="MP",this.defaultAvatarSrc="",this.nameValue="",this.keyValue="",this.avatarSrc="",this.$container=e.element,this.$container.html(a.projectSample({projectName:this.defaultName,projectKey:this.defaultKey,issueName:e.issueName})),this.$sampleElement=this.$container.find(".sample-project"),this.$sampleElementName=this.$sampleElement.find("#project-name-val"),this.$sampleElementKey=this.$sampleElement.find("#key-val"),this.$sampleElementAvatar=this.$sampleElement.find("#project-avatar"),this.events=e.events,this.events.bind("updated.Name",t.proxy(function(){this.updateSampleName(arguments[1])},this)),this.events.bind("updated.Key",t.proxy(function(){this.updateSampleKey(arguments[1])},this)),this.events.bind("updated.Avatar",t.proxy(function(){this.updateSampleAvatar(arguments[1])},this))},_render:function(){var e=this.nameValue||this.defaultName,t=this.keyValue||this.defaultKey,a=this.avatarSrc||this.defaultAvatarSrc;t=(t||"")+"-1",t=t.toUpperCase(),this.$sampleElementName.text(e),this.$sampleElementKey.text(t),this.$sampleElementAvatar.attr("src",a)},updateSampleName:function(e){this.nameValue=t.trim(e),this._render()},updateSampleKey:function(e){this.keyValue=t.trim(e),this._render()},updateSampleAvatar:function(e){this.avatarSrc=e,this._render()}})}),AJS.namespace("JIRA.ProjectSample",null,require("jira/project/project-sample"));;
;
/* module-key = 'jira.webresources:jira-global', location = '/includes/jira/field/CreateProjectField.js' */
define("jira/field/create-project-field",["jira/util/formatter","jira/lib/class","jira/ajs/dark-features","jira/project/project-key-generator","jira/project/project-sample","aui/inline-dialog","jquery","jira/field/create-project/templates","wrm/context-path"],function(e,t,i,n,a,r,s,o,l){return t.extend({TIMEOUT_MS:100,projectNames:[],maxNameLength:80,init:function(e){this.$element=e.element,this.$nameElement=this.$element.find("input.text[name='name']"),this.$keyElement=this.$element.find("input.text[name='key']"),this.$keyEditedElement=this.$element.find("input[name='keyEdited']"),this.$avatarElement=this.$element.find(".jira-inline-avatar-picker-trigger"),this.eventBus={src:s(this),trigger:function(e,t){this.src.trigger(e,t)},bind:function(e,t){this.src.bind(e,t)}};var t=+this.$keyElement.attr("maxlength");t||(t=10),this.keygen=new n({desiredKeyLength:4,maxKeyLength:t}),this.lastKeyValidated="",i.isEnabled("addproject.project.sample")&&(this.sample=new a({element:this.$element.find("#sample-project-container"),events:this.eventBus})),this.$keyElement.attr("style","text-transform: uppercase"),this.initialName=this.$nameElement.val(),this.initialKey=this.$keyElement.val(),this.$element.find(".error").addClass("description initial-error"),this.showInitialError(this.$nameElement),this.showInitialError(this.$keyElement),this.$nameElement.focus(s.proxy(this._bindNameHook,this)),this.$nameElement.blur(s.proxy(this._unbindHook,this)),this.$keyElement.focus(s.proxy(this._bindKeyHook,this)),this.$keyElement.blur(s.proxy(this._unbindHook,this)),this.$keyElement.blur(s.proxy(this.autofillKeyIfNeeded,this));var l=this.$keyElement.parent().find("#add-project-key-icon").removeAttr("target data-helplink");l.length&&new r(l,"project-key-help-popup",function(e,t,i){e.html(o.keyHelp()),i()},{width:330,offsetX:-30}),this.$avatarElement.size()&&(this.eventBus.trigger("updated.Avatar",this.$avatarElement.attr("src")),this.$avatarElement.bind("AvatarSelected",s.proxy(function(){this.eventBus.trigger("updated.Avatar",this.$avatarElement.attr("src"))},this))),this._loadExistingProjects()},_loadExistingProjects:function(){var e=this;s.ajax({url:l()+"/rest/api/latest/project",success:function(t){t=t||[];for(var i=0,n=t.length;i<n;i++)e.projectNames.push(t[i].name.toUpperCase())}})},_bindNameHook:function(e){this._bindHook(e,this.onNameTimeout)},_bindKeyHook:function(e){var t=s(e.target);t.data("lastValue",t.val()),this._bindHook(e,this.onKeyTimeout)},_bindHook:function(e,t){var i,n=this,a=s(e.target);i=function(){n._unbindHook(e),t.apply(n),a.is(":visible")&&a.data("checkHook",setTimeout(i,n.TIMEOUT_MS))},a.data("checkHook")||a.data("checkHook",setTimeout(i,0))},_unbindHook:function(e){var t=s(e.target);clearTimeout(t.data("checkHook")),t.removeData("checkHook")},shouldUpdateKey:function(){return"true"!=this.$keyEditedElement.val()},setKeyEdited:function(e){this.$keyElement.data("lastValue")!==e&&this.$keyEditedElement.val(e?"true":"false"),this.$keyElement.data("lastValue",e)},updateKey:function(e){this.$keyElement.val(e),this.validateKey(e),this.eventBus.trigger("updated.Key",e)},autofillKeyIfNeeded:function(){if(this.shouldUpdateKey()){var e=this.keygen.generateKey(this.$nameElement.val());e.length>1?this.updateKey(e):this.$keyElement.val("")}},onNameTimeout:function(){var e=this.$nameElement.val();this.validateName(e),this.eventBus.trigger("updated.Name",e),this.autofillKeyIfNeeded()},onKeyTimeout:function(){var e=this.$keyElement.val();this.setKeyEdited(e),this.validateKey(e),this.eventBus.trigger("updated.Key",e)},validateName:function(t){if(t!=this.initialName||!this.$nameElement.parent().find(".error").size()){if(t.length>this.maxNameLength)return void this.showInlineError(this.$nameElement,this.initialName,e.format("The project name must not exceed {0} characters in length.",this.maxNameLength));for(var i=0,n=this.projectNames.length;i<n;i++)if(t.toUpperCase()==this.projectNames[i])return void this.showInlineError(this.$nameElement,this.initialName,"A project with that name already exists.");this.hideInlineError(this.$nameElement)}},validateKey:function(e){var t=this,i=t.lastKeyValidated!==e;this.lastKeyValidated=e,i&&(e?s.ajax({url:l()+"/rest/api/latest/projectvalidate/key?key="+e.toUpperCase(),success:function(e){e.errors&&e.errors.projectKey?t.showInlineError(t.$keyElement,t.initialKey,e.errors.projectKey):t.hideInlineError(t.$keyElement)}}):t.hideInlineError(t.$keyElement))},showInlineError:function(e,t,i){var n=e.parent().find(".initial-error");if(e.val()===t&&n.length)this.showInitialError(e);else{var a=e.parent().find(".error.description");a.length||(a=s("<div class='error description'></div>"),e.parent().append(a)),a.text(i),e.parent().find(".description").hide(),n.hide(),a.show()}},hideInlineError:function(e){e.parent().find(".description").show(),e.parent().find(".error.description").hide()},showInitialError:function(e){var t=e.parent().find(".initial-error");t.length&&(e.parent().find(".description").hide(),e.parent().find(".error.description").hide(),t.show())}})}),AJS.namespace("JIRA.CreateProjectField",null,require("jira/field/create-project-field"));;
;
/* module-key = 'jira.webresources:jira-global', location = '/includes/jira/field/initCreateProjectField.js' */
define("jira/field/init-create-project-field",["jira/field/create-project-field","jira/util/events","jira/util/events/types","jira/util/events/reasons","jquery"],function(e,i,t,n,r){i.bind(t.NEW_CONTENT_ADDED,function(i,t,a){a!==n.panelRefreshed&&t.find("#add-project-fields").each(function(){new e({element:r(this)})})})});;
;
/* module-key = 'jira.webresources:jira-global', location = 'includes/jira/field/templates/createProject.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.CreateProject&&(JIRA.Templates.CreateProject={}),JIRA.Templates.CreateProject.keyHelp=function(e,t){return'<div class="project-key-help"><p><b>'+soy.$$escapeHtml("What\'s a project key?")+"</b></p><ul><li>"+soy.$$escapeHtml("It prefixes each issue in the project")+"</li><li>"+soy.$$escapeHtml("It can be changed, but this is not a trivial task")+"</li></ul></div>"};;
;
/* module-key = 'jira.webresources:jira-global', location = '/includes/jira/field/init/init-create-project-field-webresource.js' */
require("jira/field/init-create-project-field");;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-vendor-spin-spin', location = 'node_modules/@atlassian/aui/src/js-vendor/spin/spin.js' */
("undefined"===typeof window?global:window).__5948fbc87d30aef48e0301714319f1fd=function(){var m={exports:{}},r=m.exports,x={module:m,exports:r},s;s=function(p,e,h){var j=("undefined"===typeof window?global:window).define,f,k,h=[h,e,p].filter(function(e){return"function"===typeof e})[0],e=[e,p,[]].filter(Array.isArray)[0];f=h.apply(null,e.map(function(e){return x[e]}));k=typeof f;"function"===typeof j&&j("string"===typeof p?p:"__5948fbc87d30aef48e0301714319f1fd",e,h);"string"===k?f=String(f):"number"===
k?f=Number(f):"boolean"===k&&(f=Boolean(f));void 0!==f&&(r=m.exports=f)};s.amd=!0;var w=function(){function p(b,a){var c=document.createElement(b||"div"),d;for(d in a)c[d]=a[d];return c}function e(b){for(var a=1,c=arguments.length;a<c;a++)b.appendChild(arguments[a]);return b}function h(b,a){var c=b.style,d,e,a=a.charAt(0).toUpperCase()+a.slice(1);for(e=0;e<m.length;e++)if(d=m[e]+a,void 0!==c[d])return d;if(void 0!==c[a])return a}function j(b,a){for(var c in a)b.style[h(b,c)||c]=a[c];return b}function f(b){for(var a=
1;a<arguments.length;a++){var c=arguments[a],d;for(d in c)void 0===b[d]&&(b[d]=c[d])}return b}function k(b){for(var a={x:b.offsetLeft,y:b.offsetTop};b=b.offsetParent;)a.x+=b.offsetLeft+b.clientLeft,a.y+=b.offsetTop+b.clientTop;return a}function l(b){if("undefined"==typeof this)return new l(b);this.opts=f(b||{},l.defaults,r)}var m=["webkit","Moz","ms","O"],s={},t,u,n=p("style",{type:"text/css"});e(document.getElementsByTagName("head")[0],n);u=n.sheet||n.styleSheet;var r={lines:12,length:7,width:5,
radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:0.25,fps:20,zIndex:2E9,className:"spinner",top:"auto",left:"auto",position:"relative"};l.defaults={};f(l.prototype,{spin:function(b){this.stop();var a=this,c=a.opts,d=a.el=j(p(0,{className:c.className}),{position:c.position,width:0,zIndex:c.zIndex}),e=c.radius+c.length+c.width,i,g;b&&(b.insertBefore(d,b.firstChild||null),g=k(b),i=k(d),j(d,{left:("auto"==c.left?g.x-i.x+(b.offsetWidth>>1):parseInt(c.left,10)+e)+"px",top:("auto"==
c.top?g.y-i.y+(b.offsetHeight>>1):parseInt(c.top,10)+e)+"px"}));d.setAttribute("role","progressbar");a.lines(d,a.opts);if(!t){var f=0,m=(c.lines-1)*(1-c.direction)/2,o,h=c.fps,q=h/c.speed,s=(1-c.opacity)/(q*c.trail/100),l=q/c.lines;(function y(){f++;for(var b=0;b<c.lines;b++){o=Math.max(1-(f+(c.lines-b)*l)%q*s,c.opacity);a.opacity(d,b*c.direction+m,o,c)}a.timeout=a.el&&setTimeout(y,~~(1E3/h))})()}return a},stop:function(){var b=this.el;b&&(clearTimeout(this.timeout),b.parentNode&&b.parentNode.removeChild(b),
this.el=void 0);return this},lines:function(b,a){function c(b,c){return j(p(),{position:"absolute",width:a.length+a.width+"px",height:a.width+"px",background:b,boxShadow:c,transformOrigin:"left",transform:"rotate("+~~(360/a.lines*d+a.rotate)+"deg) translate("+a.radius+"px,0)",borderRadius:(a.corners*a.width>>1)+"px"})}for(var d=0,f=(a.lines-1)*(1-a.direction)/2,i;d<a.lines;d++){i=p();var g=1+~(a.width/2)+"px",h=a.hwaccel?"translate3d(0,0,0)":"",m=a.opacity,o;if(o=t){o=a.opacity;var l=a.trail,q=f+
d*a.direction,k=a.lines,n=["opacity",l,~~(100*o),q,k].join("-"),q=0.01+100*(q/k),k=Math.max(1-(1-o)/l*(100-q),o),r=t.substring(0,t.indexOf("Animation")).toLowerCase(),r=r&&"-"+r+"-"||"";s[n]||(u.insertRule("@"+r+"keyframes "+n+"{0%{opacity:"+k+"}"+q+"%{opacity:"+o+"}"+(q+0.01)+"%{opacity:1}"+(q+l)%100+"%{opacity:"+o+"}100%{opacity:"+k+"}}",u.cssRules.length),s[n]=1);o=n+" "+1/a.speed+"s linear infinite"}i=j(i,{position:"absolute",top:g,transform:h,opacity:m,animation:o});a.shadow&&e(i,j(c("#000",
"0 0 4px #000"),{top:"2px"}));e(b,e(i,c("string"==typeof a.color?a.color:a.color[d%a.color.length],"0 0 1px rgba(0,0,0,.1)")))}return b},opacity:function(b,a,c){a<b.childNodes.length&&(b.childNodes[a].style.opacity=c)}});n=j(p("group"),{behavior:"url(#default#VML)"});if(!h(n,"transform")&&n.adj){var v=function(b,a){return p("<"+b+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',a)};u.addRule(".spin-vml","behavior:url(#default#VML)");l.prototype.lines=function(b,a){function c(){return j(v("group",
{coordsize:i+" "+i,coordorigin:-f+" "+-f}),{width:i,height:i})}function d(b,d,g){e(h,e(j(c(),{rotation:360/a.lines*b+"deg",left:~~d}),e(j(v("roundrect",{arcsize:a.corners}),{width:f,height:a.width,left:a.radius,top:-a.width>>1,filter:g}),v("fill",{color:"string"==typeof a.color?a.color:a.color[b%a.color.length],opacity:a.opacity}),v("stroke",{opacity:0}))))}var f=a.length+a.width,i=2*f,g=2*-(a.width+a.length)+"px",h=j(c(),{position:"absolute",top:g,left:g});if(a.shadow)for(g=1;g<=a.lines;g++)d(g,
-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(g=1;g<=a.lines;g++)d(g);return e(b,h)};l.prototype.opacity=function(b,a,c,d){b=b.firstChild;d=d.shadow&&d.lines||0;if(b&&a+d<b.childNodes.length&&(b=(b=(b=b.childNodes[a+d])&&b.firstChild)&&b.firstChild))b.opacity=c}}else t=h(n,"animation");return l};"object"==typeof r?m.exports=w():"function"==typeof s&&s("aui/internal/spin",w);this.Spinner=w();return m.exports}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-vendor-jquery-jquery-spin', location = 'node_modules/@atlassian/aui/src/js-vendor/jquery/jquery.spin.js' */
("undefined"===typeof window?global:window).__e9282c4286b6886c60cee0b1e3321cc6=function(){var b=jQuery;b.fn.spin=function(a,c){var f,d;if("string"===typeof a){if(!a in b.fn.spin.presets)throw Error("Preset '"+a+"' isn't defined");f=b.fn.spin.presets[a];d=c||{}}else{if(c)throw Error("Invalid arguments. Accepted arguments:\n$.spin([String preset[, Object options]]),\n$.spin(Object options),\n$.spin(Boolean shouldSpin)");f=b.fn.spin.presets.small;d=b.isPlainObject(a)?a:{}}if(window.Spinner)return this.each(function(){var c=
b(this),e=c.data();e.spinner&&(e.spinner.stop(),delete e.spinner);!1!==a&&(d=b.extend({color:c.css("color")},f,d),e.spinner=(new Spinner(d)).spin(this))});throw"Spinner class not available.";};b.fn.spin.presets={small:{lines:12,length:3,width:2,radius:3,trail:60,speed:1.5},medium:{lines:12,length:5,width:3,radius:8,trail:60,speed:1.5},large:{lines:12,length:8,width:4,radius:10,trail:60,speed:1.5}};b.fn.spinStop=function(){if(window.Spinner)return this.each(function(){var a=b(this).data();a.spinner&&
(a.spinner.stop(),delete a.spinner)});throw"Spinner class not available.";};return{}}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-spin', location = 'node_modules/@atlassian/aui/src/js/aui/spin.js' */
("undefined"===typeof window?global:window).__e573296a636ce4ee054d5d3b9c8823fb=function(){"use strict";__5948fbc87d30aef48e0301714319f1fd;__e9282c4286b6886c60cee0b1e3321cc6;return{}}.call(this);;
;
/* module-key = 'jira.webresources:key-commands', location = '/includes/jquery/plugins/keyevents/keyevents.js' */
!function(e){function t(t,n,r){function i(t){var i=n(t);if(i){var c=new e.Event(r);c.key=i,"aui:keypress"!==r&&(c.shiftKey=t.shiftKey,c.ctrlKey=t.ctrlKey,c.altKey=t.altKey);var u=t.target,a=9===u.nodeType?u:u.ownerDocument;a!==document?(c.target=u,arguments[0]=c,e.event.trigger(c,arguments,document,!0)):e(u).trigger(c),c.isDefaultPrevented()&&t.preventDefault()}}var c=0;e.event.special[r]={setup:function(){0===c&&e(document).bind(t,i),c++},teardown:function(){c--,0===c&&e(document).unbind(t,i)}}}var n={8:"Backspace",9:"Tab",13:"Return",16:"Shift",17:"Control",18:"Alt",27:"Esc",32:"Spacebar",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",46:"Del"},r={16:"Shift",17:"Control",18:"Alt"},i=0;t("keydown",function(e){if(e.which in r){if(e.which===i)return null;i=e.which}else i=0;return n[e.which]||null},"aui:keydown"),t("keypress",function(e){var t=e.altKey&&e.ctrlKey;switch(i=0,e.which){case 0:case 8:case 9:case 27:break;default:if(t||!e.ctrlKey&&!e.metaKey)return String.fromCharCode(e.which)}return null},"aui:keypress"),t("keyup",function(e){return e.which===i&&(i=0),n[e.which]||null},"aui:keyup")}(jQuery);;
;
/* module-key = 'jira.webresources:key-commands', location = '/includes/jquery/plugins/shortcuts/shortcuts.js' */
!function(t){function n(t){h&&r(),h=16!==t.which}function e(n){var e=t(n.target).prop("contenteditable");if(t(n.target).is(":input:not(button[type=button])")||"true"===e||""===e)return void r();a.push(n.key),clearTimeout(c),c=setTimeout(r,2e3),a.length>d&&a.shift();for(var o=a.join(""),i=0;i<o.length;i++){var s=o.slice(i);if(s in u){n.preventDefault(),n=new t.Event("shortcut"),n.data=s,u[s].call(document,n),a.length=0;break}}h=!1}function o(){h&&r()}function r(){a.length=0}function i(t,n){var e=t.length,o=n.length;if(e===o)return t===n;var r,i;return e<o?(r=n.indexOf(t),i=o-e):(r=t.indexOf(n),i=e-o),r>=0&&r<i}var u={},a=[],d=0,c=0,h=!1,s=t(document);t.event.special.shortcut={setup:function(){s.bind("keydown",n),s.bind("aui:keypress",e),s.bind("keyup",o)},teardown:function(){s.unbind("keydown",n),s.unbind("aui:keypress",e),s.unbind("keyup",o)},add:function(t){if(this!==document)throw new TypeError('"shortcut" event handlers must be bound at the document');if(void 0===t.data)throw new Error('No data argument supplied in call to jQuery.fn.bind("shortcut", '+(t.handler.name||"function")+")");if("string"!=typeof t.data)throw new TypeError("Object "+t.data+" is not a string");if(0===t.data.length)throw new Error("Shortcut sequence must not be empty");for(var n in u)if(i(n,t.data))return void console.log('Cannot bind new shortcut "'+t.data+'" due to conflict with existing shortcut "'+n+'"');t.data.length>d&&(d=t.data.length),u[t.data]=t.handler},remove:function(t){if(this!==document)throw new TypeError('"shortcut" event handlers must be bound at the document');delete u[t.data]}}}(jQuery);;
;
/* module-key = 'jira.webresources:key-commands', location = '/includes/ajs/keyboardshortcut/KeyboardShortcuts.js' */
define("jira/ajs/keyboardshortcut/keyboard-shortcut",["jira/util/formatter","aui/inline-dialog","wrm/context-path","jquery","underscore"],function(t,e,o,r,n){var i=o(),c=function(t,e){this._executer=null,this.shortcuts=[t],this._bindShortcut(t,e)};return c.prototype._bindShortcut=function(t,o){if("string"!=typeof t)throw new TypeError("KeyboardShortcut expects string; received "+typeof t);if(/^(?:ctrl|alt|shift|meta)+/i.test(t))throw new SyntaxError('KeyboardShortcut cannot bind the shortcut "'+t+'" because it uses a modifier');var n=this;r(document).bind("shortcut",t,function(r){n._executer&&!n._ignoreShortcut(r,t,o)&&(e.current&&e.current.hide(),n._executer(r),r.preventDefault())})},c.prototype._ignoreShortcut=function(t,e,o){var r=!1;return n.each(c._ignoreConditions,function(n){n(t,e,o)&&(r=!0)}),r},c.prototype._addShortcutTitle=function(e){var o=r(e),n=o.attr("title")||"",i="Type",c="then",u="OR",s=r.map(this.shortcuts,function(t){return" '"+t.split("").join("' "+c+" '")+"'"});n+=" ( "+i+s.join(" "+u+" ")+" )",o.attr("title",n)},c.prototype.moveToNextItem=function(t){this._executer=function(){var e,o=r(t),n=r(t+".focused");this._executer.blurHandler||r(document).one("keypress",function(t){27===t.keyCode&&n&&n.removeClass("focused")}),0===n.length?n=r(t).eq(0):(n.removeClass("focused"),e=r.inArray(n.get(0),o),e<o.length-1?(e+=1,n=o.eq(e)):(n.removeClass("focused"),n=r(t).eq(0))),n&&n.length>0&&(n.addClass("focused"),n.scrollIntoView(),n.find("a:first").focus())}},c.prototype.moveToPrevItem=function(t){this._executer=function(){var e,o=r(t),n=r(t+".focused");this._executer.blurHandler||r(document).one("keypress",function(t){27===t.keyCode&&n&&n.removeClass("focused")}),0===n.length?n=r(t+":last"):(n.removeClass("focused"),e=r.inArray(n.get(0),o),e>0?(e-=1,n=o.eq(e)):(n.removeClass("focused"),n=r(t+":last"))),n&&n.length>0&&(n.addClass("focused"),n.scrollIntoView(),n.find("a:first").focus())}},c.prototype.click=function(t){this._addShortcutTitle(t),this._executer=function(){var e=r(t).eq(0);e.length>0&&e.click()}},c.prototype.goTo=function(t){this._executer=function(){window.location.href=i+t}},c.prototype.followLink=function(t){this._addShortcutTitle(t),this._executer=function(){var e=r(t).eq(0);e.length>0&&("a"===e.prop("nodeName").toLowerCase()||"link"===e.prop("nodeName").toLowerCase())&&(e.click(),window.location.href=e.attr("href"))}},c.prototype.moveToAndClick=function(t){this._addShortcutTitle(t),this._executer=function(){var e=r(t).eq(0);e.length>0&&(e.click(),e.scrollIntoView())}},c.prototype.moveToAndFocus=function(t){this._addShortcutTitle(t),this._executer=function(e){var o=r(t).eq(0);o.length>0&&(o.focus(),o.scrollIntoView(),o.is(":input")&&e.preventDefault())}},c.prototype.evaluate=function(t){"function"!=typeof t&&(t=new Function(t)),t.call(this)},c.prototype.execute=function(t){var e=this;this._executer=function(){"function"!=typeof t&&(t=new Function(t)),t.call(e)}},c.prototype.or=function(t){return this.shortcuts.push(t),this._bindShortcut(t),this},c._ignoreConditions=[],c._shortcuts=[],c.addIgnoreCondition=function(t){c._ignoreConditions.push(t)},c.getKeyboardShortcutKeys=function(t){for(var e in c._shortcuts){var o=c._shortcuts[e];if(o.moduleKey===t)return o.keys.toString()}return null},c.fromJSON=function(t){var e;return t&&(c._shortcuts=t,e={},n.each(t,function(t){t.keys.forEach(function(o){var r=o.join("");if(o.length<r.length)throw new Error("Shortcut sequence ["+o.join(",")+"] contains invalid keys");var n=e[r]=new c(r,t.context);n[t.op](t.param)})})),e},c}),AJS.namespace("AJS.KeyboardShortcut",null,require("jira/ajs/keyboardshortcut/keyboard-shortcut"));;
;
/* module-key = 'jira.webresources:key-commands', location = '/includes/ajs/keyboardshortcut/initKeyboardShortcuts.js' */
!function(){var r=require("jira/ajs/keyboardshortcut/keyboard-shortcut"),e=require("jira/ajs/keyboardshortcut/keyboard-shortcut-toggle"),t=require("jira/util/data/meta"),u=require("jira/dialog/dialog"),a=require("aui/dropdown"),o=require("aui/popup"),i=require("jquery"),n=require("wrm/data");r.addIgnoreCondition(function(){return o.current||a.current||u.current||e.areKeyboardShortcutsDisabled()}),i(function(){t.get("keyboard-shortcuts-enabled")?e.enable():e.disable();var u=n.claim("jira.webresources:key-commands.shortcuts");u&&(AJS.activeShortcuts=r.fromJSON(u),i(document).bind("aui:keyup",function(r){var e,t;"Esc"===r.key&&(e=i(r.target),e.is(":input:not(button[type='button'])")&&(t=new i.Event("beforeBlurInput"),e.trigger(t,[{reason:"escPressed"}]),t.isDefaultPrevented()||e.blur()))}))})}();;
;
/* module-key = 'jira.webresources:key-commands', location = '/includes/ajs/whenitype/whenIType.js' */
!function(r){AJS.whenIType=function(e,n){return new r(e,n)},AJS.whenIType.fromJSON=r.fromJSON}(require("jira/ajs/keyboardshortcut/keyboard-shortcut"));;
;
/* module-key = 'jira.webresources:header', location = '/includes/jira/common/headerModule.js' */
define("jira/common/header",["jira/util/formatter","jira/message","jira/issue","jira/util/events","jquery","exports","wrm/context-path","jira/featureflags/feature-manager"],function(e,n,t,s,i,r,a,o){var u,c,d,p,f={},m={getPath:function(){return window.location.pathname}},l=function(n,t){var s=n.substr(0,n.indexOf("-"));return e.format('<a href="{0}" target="_blank">',a()+"/plugins/servlet/project-config/"+s+"/"+t)},I=function(e){e&&n.showSuccessMsg(e,{closeable:!0}),f={}},g=function(e,n){var t="";return f.versionCreated&&(t="<p>"+e+"</p>"),f.componentCreated&&(t+="<p>"+n+"</p>"),t},v=function(){var e=/jira\/software\/(c\/)?projects\/[a-zA-Z0-9]+\/boards\/\d+\/roadmap/g;return e.test(m.getPath())},j=function(){return!!(JIRA&&JIRA.Issues&&JIRA.Issues.Application)&&JIRA.Issues.Application};r.initialize=function(){s.bind("QuickCreateIssue.sessionComplete",u=function(n,s){if(!v()){var i=[].concat(s).pop(),r=t.issueCreatedMessage(i);r+=g(e.format("You also added a new version to this project. You can set a release date for this version in {0}project admin{1}.",l(i.issueKey,"versions"),"</a>"),e.format("You also added a new component to this project. You can assign a component lead for this component in {0}project admin{1}.",l(i.issueKey,"administer-components"),"</a>")),I(r)}}),j()&&j().on("issueEditor:saveSuccess",c=function(n){var s=n&&n.issueKey?n.issueKey:t.getIssueKey(),i=g(e.format("A new version has been added to your project. You can set a release date for this version in {0}project admin{1}.",l(s,"versions"),"</a>"),e.format("A new component has been added to your project. You can assign a component lead for this component in {0}project admin{1}.",l(s,"administer-components"),"</a>"));I(i)}),s.bind("Issue.Version.new.selected",d=function(){f.versionCreated=!0}),s.bind("Issue.Component.new.selected",p=function(){f.componentCreated=!0})},r.unbind=function(){s.unbind("QuickCreateIssue.sessionComplete",u),s.unbind("Issue.Version.new.selected",d),s.unbind("Issue.Component.new.selected",p),j()&&j().unbind("issueEditor:saveSuccess",c)},r.location=m});;
;
/* module-key = 'jira.webresources:header', location = '/includes/jira/common/initHeader.js' */
!function(){var i=require("jira/common/header");jQuery(function(){i.initialize()})}();;
;
/* module-key = 'com.atlassian.administration.atlassian-admin-quicksearch-jira:admin-quicksearch-webresources', location = 'atlassian-admin-quicksearch-jira-module/com/atlassian/administration/quicksearch/jira/js/adminQuickNav.js' */
/**
 * Shifter group for admin search
 */
require([
    'jquery',
    'underscore',
    'jira/ajs/ajax/smart-ajax',
    'jira/shifter',
    'wrm/context-path',
    'jira/featureflags/feature-manager'
], function (jQuery,
             _,
             SmartAjax,
             Shifter,
             contextPath,
             FeatureManager) {
    Shifter.register(function () {
        var suggestionsDeferred = jQuery.Deferred();

        function formatItem(item) {
            return {
                label: item.label,
                value: item.linkUrl,
                keywords: item.aliases
            };
        }

        function getItemsInSection(section) {
            return _.map(section.items, formatItem).concat(_.map(section.sections, getItemsInSection));
        }

         // TODO EI-22: Should be removed when cleaning up FF endeavour.admin.settings.system-configuration and use formatResponseSPA instead
        function formatResponse(data) {
            return _.flatten(getItemsInSection(data));
        }

        // Same as formatResponse and getItemsInSection above but works in both SPA and non-SPA contexts
        // Currently it is behind FF for rollback purpose but should replace formatResponse eventually
        function formatResponseSPA(data) {
                // In SPA underscore is replaced by Lodash that has .flatMap instead of .flatten
                var flatMap = _.flatMap
                    ? _.flatMap
                    : function(collection, fn) {
                        return _.flatten(_.map(collection, fn));
                    }

                function getItems(section) {
                    return _.map(section.items, formatItem).concat(flatMap(section.sections, getItems));
                }

                return getItems(data)
        }

        var isSPASystemConfigurationEnabled = FeatureManager.isFeatureEnabled('endeavour.admin.settings.system-configuration');

        SmartAjax.makeRequest({
            dataType: 'json',
            url: contextPath() + '/rest/adminquicksearch/latest/links/default'
        })
            .pipe(isSPASystemConfigurationEnabled
                ? formatResponseSPA
                : formatResponse)
            .done(function (suggestions) {
                suggestionsDeferred.resolve(suggestions);
            })
            .fail(function () {
                suggestionsDeferred.reject();
            });

        return {
            id: 'admin',
            name: "Administration",
            weight: 500,
            getSuggestions: function () {
                return suggestionsDeferred;
            },
            onSelection: function (value) {
                var ContainerApi;
                var nativeNavigate = function() {
                    window.location = value;
                };

                try {
                    ContainerApi = require('jira/container-api');
                } catch (e) {
                    nativeNavigate();
                }

                ContainerApi && ContainerApi.navigate(value, nativeNavigate);

                return jQuery.Deferred();
            }
        };
    });
});
;
;
/* module-key = 'com.atlassian.jira.jira-atlaskit-plugin:sidebar', location = 'jira-atlaskit-module/js/global-sidebar-api.js' */
!function(){var n,e=new Promise(function(e){n=e});e.done=function(n){return this.then(n)},AJS.namespace("JIRA.API"),JIRA.API.getSidebar=function(){return e},define("jira/globalnavigator/sidebar/bridge",function(){return function(e){n(e)}}),define("jira/globalnavigator/sidebar",function(){return e})}();;
;
/* module-key = 'com.atlassian.jira.jira-atlaskit-plugin:sidebar', location = 'jira-atlaskit-module/js/imperative-api.js' */
!function(){var n,i=new Promise(function(i){n=i});AJS.namespace("JIRA.API"),JIRA.API.getNavigationApi=function(){return i},define("jira/navigation/bridge",function(){return function(i){n(i)}}),define("jira/navigation",function(){return i})}();;
;
/* module-key = 'com.atlassian.jira.jira-atlaskit-plugin:sidebar', location = 'jira-atlaskit-module/js/check-both-apis.js' */
!function(){require(["jira/globalnavigator/sidebar","jira/navigation","jira/analytics"],function(i,a,n){Promise.all([i,a]).then(function(){n.send({name:"navigation.imperative-api.both-apis-resolves"})})})}();;
;
/* module-key = 'com.atlassian.jira.jira-atlaskit-plugin:sidebar', location = 'jira-atlaskit-module/js/favourite-imperative-api.js' */
!function(){var e,n=new Promise(function(n){e=n});AJS.namespace("JIRA.API"),JIRA.API.getFavouriteItemsApi=function(){return n},define("jira/favouriteItems",function(){return n}),define("jira/favouriteItems/bridge",function(){return function(n){e(n)}})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:data', location = 'jira-projects-module/data/web-resource-manager.js' */
define("jira/projects/data/WRM",window.WRM);;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:projects-api', location = 'jira-projects-module/page/projects-api.js' */
define("jira/api/projects",["jira/projects/data/WRM"],function(e){"use strict";function r(r,t){if(void 0!==r)return r;var a=e.data.claim(t);return void 0!==a?a:AJS.Meta.get(t)}function t(e){return AJS.$('meta[name="'+e+'"]').attr("content")}var a=require("jira/featureflags/feature-manager"),n=a.isFeatureEnabled("endeavour.rapidboards-wrm.spa-enabled"),i=e.data.claim("project-key"),c=e.data.claim("project-id"),o=e.data.claim("project-name"),u=e.data.claim("project-type"),j=e.data.claim("is-project-admin"),p=e.data.claim("project-simplified");return{ProjectType:Object.freeze({SOFTWARE:"software",BUSINESS:"business"}),getCurrentProjectId:function(){return c=r(c,"project-id"),null==c&&n&&(c=t("ghx-project-id")),c},getCurrentProjectKey:function(){return i=r(i,"project-key"),null==i&&n&&(i=t("ghx-project-key")),i},getCurrentProjectName:function(){return o=r(o,"project-name")},getCurrentProjectType:function(){return u=r(u,"project-type")},isCurrentUserProjectAdmin:function(){return j=r(j,"is-project-admin")},isCurrentProjectSimplified:function(){return p=r(p,"project-simplified")}}}),AJS.namespace("JIRA.API.Projects",null,require("jira/api/projects"));;
;
/* module-key = 'com.atlassian.jira.jira-atlaskit-plugin:breadcrumbs', location = 'jira-atlaskit-module/js/global-breadcrumbs-api.js' */
!function(){var n,r=new Promise(function(r){n=r});r.done=function(n){return this.then(n)},AJS.namespace("JIRA.API"),JIRA.API.getBreadcrumbApi=function(){return r},define("jira/globalnavigator/breadcrumbs/bridge",function(){return function(r){n(r)}}),define("jira/globalnavigator/breadcrumbs",function(){return r})}();;
;
/* module-key = 'com.atlassian.jira.jira-atlaskit-plugin:breadcrumbs', location = 'jira-atlaskit-module/js/breadcrumbs-api.js' */
define("jira/atlaskit/breadcrumbs",["jira/featureflags/feature-manager"],function(e){const t=AJS.contextPath(),r=JIRA.API.Projects&&JIRA.API.Projects.getCurrentProjectKey()||AJS.Meta.get("project-key")||AJS.Meta.get("projectKey"),s=e.isFeatureEnabled("jsd-default-settings-page-lands-on-details")?r&&t+"/plugins/servlet/project-config/"+r:r&&t+"/servicedesk/admin/"+r+"/request-types",i={REPORTS:{id:"breadcrumbs-item-reports",index:0,text:"Reports",href:r&&t+"/projects/"+r+"?selectedItem=com.atlassian.jira.jira-projects-plugin:report-page"},RELEASES:{id:"breadcrumbs-item-releases-versions",index:0,text:"Releases",href:r&&t+"/projects/"+r+"?selectedItem=com.atlassian.jira.jira-projects-plugin:release-page"},VERSIONS:{id:"breadcrumbs-item-releases-versions",index:0,text:"Versions",href:r&&t+"/projects/"+r+"?selectedItem=com.atlassian.jira.jira-projects-plugin:release-page"},PROJECT_SETTINGS:{id:"breadcrumbs-item-project-settings",index:0,text:"Project settings",href:r&&t+"/projects/"+r+"/settings"},ISSUE_COLLECTORS:{id:"breadcrumbs-item-issue-collectors",index:1,text:"Issue collectors",href:r&&t+"/secure/ViewCollectors!default.jspa?projectKey="+r},ISSUE_TYPES:{id:"breadcrumbs-item-issue-types",index:1,text:"Issue types",href:r&&t+"/plugins/servlet/project-config/"+r+"/issuetypes"},SD_CLASSIC_PROJECT_SETTINGS:{id:"breadcrumbs-item-project-settings",index:0,text:"Project settings",href:s},SD_REQUEST_TYPES:{id:"breadcrumbs-item-request-types",index:1,text:"Request types",href:r&&t+"/servicedesk/admin/"+r+"/request-types"},LANGUAGE_SUPPORT:{id:"breadcrumbs-item-language-support",index:1,text:"Language support",href:r&&t+"/servicedesk/admin/"+r+"/language"},QUEUES:{id:"breadcrumbs-item-queue",index:1,text:"Queues",href:r&&t+"/projects/"+r+"/queues"},CUSTOMERS:{id:"breadcrumbs-item-customers",index:1,text:"Customers",href:r&&t+"/projects/"+r+"/customers"},CUSTOMERS_JIRA_SPA:{id:"breadcrumbs-item-customers",index:1,text:"Customers",href:r&&t+"/jira/servicedesk/projects/"+r+"/customers"},CUSTOMER_NOTIFICATIONS:{id:"breadcrumbs-item-customer-notification",index:1,text:"Customer notifications",href:r&&t+"/servicedesk/admin/"+r+"/customer-notifications"},SD_REPORTS:{id:"breadcrumbs-item-jsd-reports",index:0,text:"Reports",href:r&&t+"/projects/"+r+"/reports"},SD_REPORTS_JIRA_SPA:{id:"breadcrumbs-item-jsd-reports",index:0,text:"Reports",href:r&&t+"/jira/servicedesk/projects/"+r+"/reports"}},n=function(){return require("jira/globalnavigator/breadcrumbs")},a=function(){const e=document.getElementById("breadcrumbs-container");e?n().done(function(t){t.render(e)}):(AJS.trigger("analyticsEvent",{name:"jira.atlaskit.plugin.breadcrumbs.render.without.container"}),window.console&&console.warn("Attempted to render breadcrumbs, but container element with id: 'breadcrumbs-container' not found in DOM."))},o=function(){const e=document.getElementById("breadcrumbs-container");return!(!e||!e.innerHTML)},c=function(){return!0},d=function(e){n().done(function(t){t.insertItem(e)})},u=function(e){n().done(function(t){t.removeItem(e)})};return{Items:i,render:a,isRendered:o,isEnabled:c,insertItem:d,removeItem:u}});;
;
/* module-key = 'com.atlassian.jira.jira-atlaskit-plugin:profilecard', location = 'jira-atlaskit-module/js/profilecard-api.js' */
!function(){var n,r=new Promise(function(r){n=r});AJS.namespace("JIRA.API"),JIRA.API.getProfilecardApi=function(){return r},define("jira/profilecard/bridge",function(){return function(r){n(r)}}),define("jira/profilecard",function(){return r})}();;
;
/* module-key = 'com.atlassian.jira.jira-atlaskit-plugin:ipblocklisting', location = 'jira-atlaskit-module/js/ipblocklisting-api.js' */
!function(){var n,i=new Promise(function(i){n=i});AJS.namespace("JIRA.API"),JIRA.API.getIPBlocklistApi=function(){return i},define("jira/global-components/ipblocklisting/bridge",function(){return function(i){n(i)}}),define("jira/global-components/ipblocklisting",function(){return i})}();;
;
/* module-key = 'com.atlassian.jira.jira-atlaskit-plugin:async-modals', location = 'jira-atlaskit-module/js/async-modals-api.js' */
!function(){var n,e=new Promise(function(e){n=e});AJS.namespace("JIRA.API"),JIRA.API.getAsyncModalsAPI=function(){return e},define("jira/async-modals/bridge",function(){return function(e){n(e)}}),define("jira/async-modals",function(){return e})}();;
;
/* module-key = 'com.atlassian.jira.jira-atlaskit-plugin:flags', location = 'jira-atlaskit-module/js/flags-api.js' */
!function(){var n,e=new Promise(function(e){n=e});AJS.namespace("JIRA.API"),JIRA.API.getFlagsAPI=function(){return e},define("jira/flags/bridge",function(){return function(e){n(e)}}),define("jira/flags",function(){return e})}();;
;
/* module-key = 'com.atlassian.jira.plugins.jira-browser-metrics:contrib', location = 'jira-browser-metrics-frontend/contrib.js' */
window["browser-metrics-plugin"].install(function(r){require(["internal/browser-metrics","internal/browser-metrics-aa-beacon","jquery","jira/featureflags/feature-manager"],function(e,n,t,i,a){var o,s={},u={},d={},c={},l={},f={},p={},m={},b={},v={},R={},w={},y={},N={},M={},_={},h={},I={},S={},E={},g={},T={};s=function(r){r.window=(0,eval)("window");return r}(s),u=function(r,e){function n(){t||(t=e.window.WRM.data.claim(i));var r=t?{applicationHash:t}:{};return r}r.applicationHashReporter=n;var t=null,i="com.atlassian.jira.plugins.jira-browser-metrics:contrib.scm-commit-id";return r}(u,s),d=function(r){function e(r){return"string"==typeof r.applicationHash}function n(r){if(e(r))return{applicationHash:r.applicationHash}}return r.applicationHashReportMarshaller=n,r}(d),c=function(r,e){function n(r){return r.isInitial?t.promise():{}}r.applicationVersionReporter=n;var t=e.Deferred();return e(function(){var r={},n=e("meta[name=application-name]").data("version");n&&(r.applicationHash=n),t.resolve(r)}),r}(c,t),l=function(r){function e(r){return"string"==typeof r.applicationVersion}function n(r){if(e(r))return{applicationVersion:r.applicationVersion}}return r.applicationVersionReportMarshaller=n,r}(l),f=function(r,e){function n(r){return""+Number(r)===r}function t(r){return r.isInitial?i.promise():{}}r.serverDurationReporter=t;var i=e.Deferred();return e(function(){var r={},t=e("#jira_request_timing_info").find("[title=jira\\.request\\.server\\.time]").val();t&&n(t)&&(r.serverDuration=Number(t));var a=e("#jira_request_timing_info").find("[title=jira\\.request\\.server\\.head\\.time]").val();a&&n(a)&&(r.serverHeadDuration=Number(a));var o=e("#jira_request_timing_info").find("[title=jira\\.request\\.id]").val();o&&(r.serverOriginRequestId=o);var s=e("#jira_request_timing_info").find("[title=jira\\.request\\.trace\\.id]").val();s&&(r.serverRequestTraceId=s),i.resolve(r)}),r}(f,t),p=function(r){function e(r){return"number"==typeof r.serverDuration}function n(r){if(e(r))return{serverDuration:""+r.serverDuration,serverHeadDuration:""+r.serverHeadDuration,serverOriginRequestId:""+r.serverOriginRequestId,serverRequestTraceId:""+r.serverRequestTraceId}}return r.serverDurationReportMarshaller=n,r}(p),m=function(r,e){function n(r){return""+Number(r)===r}function t(r){return r.isInitial?i.promise():{}}r.databaseDurationReporter=t;var i=e.Deferred();return e(function(){var r={},t="#jira_request_timing_info",a=e(t).find("[title=db\\.reads\\.time\\.in\\.ms]").val(),o=e(t).find("[title=db\\.conns\\.time\\.in\\.ms]").val(),s=e(t).find("[title=db\\.reads\\.count]").val(),u=e(t).find("[title=head\\.db\\.reads\\.count]").val();a&&n(a)&&(r.dbReadsTimeInMs=Number(a)),o&&n(o)&&(r.dbConnsTimeInMs=Number(o)),s&&n(s)&&(r.dbReadsCount=Number(s)),u&&n(u)&&(r.dbReadsHeadCount=Number(u)),i.resolve(r)}),r}(m,t),b=function(r){function e(r){return"number"==typeof r.dbReadsTimeInMs||"number"==typeof r.dbConnsTimeInMs||"number"==typeof r.dbReadsCount||"number"==typeof r.dbReadsHeadCount}function n(r){if(e(r)){var n={dbReadsTimeInMs:""+(r.dbReadsTimeInMs||""),dbConnsTimeInMs:""+(r.dbConnsTimeInMs||"")};return r.dbReadsCount&&(n.dbReadsCount=r.dbReadsCount),r.dbReadsHeadCount&&(n.dbReadsHeadCount=r.dbReadsHeadCount),n}}return r.databaseDurationReportMarshaller=n,r}(b),v=function(r,e){function n(r){if(r.isInitial){i||(i=e.window.WRM.data.claim(t));var n=i?{correlationId:i}:{};return n}return{}}r.correlationIdReporter=n;var t="jira.request.correlation-id",i=null;return r}(v,s),R=function(r){function e(r){return"string"==typeof r.correlationId}function n(r){if(e(r))return{correlationId:r.correlationId}}return r.correlationIdReportMarshaller=n,r}(R),w=function(r,e){function n(r){var n={};if(e.window.performance&&e.window.performance.getEntriesByName&&r.isInitial){var t=e.window.performance.getEntriesByName("mark_fully_visible"),i=e.window.performance.getEntriesByName("mark_fully_loaded");if(t&&t.length>0&&i&&i.length>0){var a=t[0].startTime;n.deferScriptsStart=a;var o=i[0].startTime;n.deferScriptsEnd=o;var s=0,u=e.window.performance.getEntriesByName("defer_scripts_clicks");u&&u.forEach(function(r){var e=r.startTime;e>=a&&e<=o&&s++}),n.deferScriptsClicks=s;var d=0,c=e.window.performance.getEntriesByName("defer_scripts_keydowns");c&&c.forEach(function(r){var e=r.startTime;e>=a&&e<=o&&d++}),n.deferScriptsKeydowns=d}}return n}return r.deferScriptsReporter=n,r}(w,s),y=function(r){function e(r){var e={};return"number"==typeof r.deferScriptsStart&&(e.deferScriptsStart=Math.floor(r.deferScriptsStart)),"number"==typeof r.deferScriptsEnd&&(e.deferScriptsEnd=Math.floor(r.deferScriptsEnd)),"number"==typeof r.deferScriptsClicks&&(e.deferScriptsClicks=Math.floor(r.deferScriptsClicks)),"number"==typeof r.deferScriptsKeydowns&&(e.deferScriptsKeydowns=Math.floor(r.deferScriptsKeydowns)),e}return r.deferScriptsMarshaller=e,r}(y),N=function(r,e){function n(){var r=e.isFeatureEnabled("fe.platform.ssr.navigation.master");return{isSsrNavCohort:r}}return r.ssrNavReporter=n,r}(N,i),M=function(r,e){function n(){return e.window.SKELETON_NAVIGATION&&e.window.SKELETON_NAVIGATION["ssr/detail_request_trace"]&&e.window.SKELETON_NAVIGATION["ssr/detail_request_trace"].data||{}}function t(){return e.window.SKELETON_NAVIGATION&&e.window.SKELETON_NAVIGATION["ssr/detail_render_trace"]&&e.window.SKELETON_NAVIGATION["ssr/detail_render_trace"].data||{}}function i(r){var e={},i=n(),a=t();return e.ssrRouteName=a.routeName,e.ssrRenderTiming=JSON.stringify(a.traces),e.ssrResourceTiming=JSON.stringify(i),e}return r.ssrTimingReporter=i,r}(M,s),_=function(r){function e(r){return"boolean"==typeof r.isSsrNavCohort}function n(r){if(e(r))return r}return r.ssrNavReportMarshaller=n,r}(_),h=function(r,e){function n(){var r=e.window.__NAV_VERSION__||"UNKNOWN";return{navVersion:r}}return r.navigationVersionReporter=n,r}(h,s),I=function(r){function e(r){return"object"===t(r.navigationVersion)}function n(r){if(e(r))return{navVersion:JSON.stringify(r.navVersion)}}r.navigationVersionReportMarshaller=n;var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r};return r}(I),S=function(r){function e(r){if(r.isInitial){var e=window.JFE_PRELOAD_MODE;if(void 0!==e)return{jiraFrontendPreloadMode:e}}return{}}return r.preloadModeReporter=e,r}(S),E=function(r){function e(r){return"string"==typeof r.jiraFrontendPreloadMode}function n(r){if(e(r))return{jiraFrontendPreloadMode:r.jiraFrontendPreloadMode}}return r.preloadModeReportMarshaller=n,r}(E),g=function(r,e){function n(){var r=e.isFeatureEnabled("endeavour.rapidboards-wrm.spa-enabled");return{isWrmRapidboardsEnabled:r}}return r.wrmRapidboardsEnabledReporter=n,r}(g,i),T=function(r){function e(r){return"boolean"==typeof r.isWrmRapidboardsEnabled}function n(r){if(e(r))return{isWrmRapidboardsEnabled:r.isWrmRapidboardsEnabled}}return r.wrmRapidboardsEnabledMarshaller=n,r}(T),o=function(r,e,n,t,i,a,o,s,u,d,c,l,f,p,m,b,v,R,w,y,N,M,_){var h=M.addReporter,I=_.addReportMarshaller;h(r.applicationHashReporter),h(n.applicationVersionReporter),h(o.databaseDurationReporter),h(i.serverDurationReporter),h(u.correlationIdReporter),h(c.deferScriptsReporter),h(f.ssrNavReporter),h(p.ssrTimingReporter),h(b.navigationVersionReporter),h(R.preloadModeReporter),h(y.wrmRapidboardsEnabledReporter),I(e.applicationHashReportMarshaller),I(t.applicationVersionReportMarshaller),I(s.databaseDurationReportMarshaller),I(a.serverDurationReportMarshaller),I(d.correlationIdReportMarshaller),I(l.deferScriptsMarshaller),I(m.ssrNavReportMarshaller),I(v.navigationVersionReportMarshaller),I(w.preloadModeReportMarshaller),I(N.wrmRapidboardsEnabledMarshaller),M.subscribe(function(r){var e=document.getElementById("browser-metrics-report");null==e&&(e=document.createElement("div"),e.id="browser-metrics-report",e.style.display="none",document.body.appendChild(e)),e.textContent=JSON.stringify(r)})}(u,d,c,l,f,p,m,b,v,R,w,y,N,M,_,h,I,S,E,g,T,e,n),r()})});;
;
/* module-key = 'com.atlassian.plugins.browser.metrics.browser-metrics-plugin:impl', location = 'browser-metrics-plugin/internal/browser-metrics-aa-beacon/impl.js' */
!function(n,r){var t={},e={},o={},u={},i={};i=function(n,r,t,e,o,u,i,c,a,s,f,d,h,l,m,p,v,y){Object.defineProperty(n,"__esModule",{value:!0});var E=t.addReportMarshaller;return E(o),E(e),E(u),E(i),E(c),E(a),E(s),E(f),E(d),E(h),E(l),E(m),E(p),E(v),E(y),r.subscribe(function(n){t.beacon(n.report)}),n}(i,window["browser-metrics"],r,function(n,r){function t(n){return r(n.apdex)}return function(n){if(t(n))return{apdex:""+n.apdex}}}(0,t=function(n){return"number"==typeof n}),function(n,r,t,e){return function(n){var o={};return Object.keys(n).forEach(function(u){var i=n[u];(t(i)||r(i)||e(i)||null===i)&&(o[u]=i)}),o}}(0,function(n){return"boolean"==typeof n},t,e=function(n){return"string"==typeof n}),function(n,r,t){function e(n){return t(n.firstPaint)}return function(n){if(e(n))return{firstPaint:r(n.firstPaint)}}}(0,o=function(n){return""+Math.floor(n)},t),function(n){function r(n){return"boolean"==typeof n.isInitial}return function(n){if(r(n))return{isInitial:""+n.isInitial}}}(),function(n,r){function t(n){return r(n.journeyId)}return function(n){if(t(n))return{journeyId:n.journeyId}}}(0,e),function(n,r){function t(n){return r(n.key)}return function(n){if(t(n))return{key:n.key}}}(0,e),function(n,r){function t(n){return r(n.navigationType)}return function(n){if(t(n))return{navigationType:""+n.navigationType}}}(0,t),function(n,r,t){function e(n){return t(n.readyForUser)}return function(n){if(e(n))return{readyForUser:r(n.readyForUser)}}}(0,o,t),function(n,r){function t(n){return r(n.redirectCount)}return function(n){if(t(n))return{redirectCount:""+n.redirectCount}}}(0,t),function(n,r,t){function e(n){return t(n.resourceLoadedEnd)}return function(n){if(e(n))return{resourceLoadedEnd:r(n.resourceLoadedEnd)}}}(0,o,t),function(n,r,t){function e(n){return Array.isArray(n.resourceTiming)}function o(n){return(n=Math.floor(n||0))>0?u(n):""}function u(n){return n.toString(36)}function i(n){return[c[n.initiatorType]||a,o(n.startTime),o(n.responseEnd),o(n.responseStart),o(n.requestStart),o(n.connectEnd),o(n.secureConnectionStart),o(n.connectStart),o(n.domainLookupEnd),o(n.domainLookupStart),o(n.redirectEnd),o(n.redirectStart)].join(",").replace(/,+$/,"")}var c={other:0,img:1,link:2,script:3,css:4,xmlhttprequest:5},a=-1;return function(n){if(e(n)){var o=new t;return n.resourceTiming.forEach(function(n){var t=r.cleanUrl(n.name);o.add(t||"",i(n))}),{resourceTiming:JSON.stringify(o.condensed().toTrieObject())}}}}(0,r,function(n,r){function t(n){return Object.keys(n).length}return function(){function n(){this.children={},this.values=[]}return n.prototype.add=function(r,t){0==r.length?this.values.push(t):(this.children.hasOwnProperty(r[0])||(this.children[r[0]]=new n),this.children[r[0]].add(r.substr(1),t))},n.prototype.toTrieObject=function(){var n={};return r(this.children,function(r,t){n[r]=t.toTrieObject()}),0===this.values.length?n:0===t(this.children)?this.values:[n,this.values]},n.prototype.condensed=function(){var e=new n;return e.values=this.values.concat(),r(this.children,function(n,o){var u=o.condensed();0===u.values.length&&1===t(u.children)?r(u.children,function(r,t){e.children[n+r]=t}):e.children[n]=u}),e},n}()}(0,u=function(n,r){Object.keys(n).forEach(function(t){r(t,n[t])})})),function(n,r,t){function e(n){return t(n.threshold)}return function(n){if(e(n))return{threshold:r(n.threshold)}}}(0,o,t),function(n,r,t){var e="unloadEventStart,unloadEventEnd,redirectStart,redirectEnd,fetchStart,domainLookupStart,domainLookupEnd,connectStart,connectEnd,secureConnectionStart,requestStart,responseStart,responseEnd,domLoading,domInteractive,domContentLoadedEventStart,domContentLoadedEventEnd,domComplete,loadEventStart,loadEventEnd".split(",");return function(n){var o={};return e.forEach(function(e){t(n[e])&&(o[e]=r(n[e]))}),o}}(0,o,t),function(n,r){function t(n){return r(n.userAgent)}return function(n){if(t(n))return{userAgent:n.userAgent}}}(0,e),function(n,r){function t(n){return"object"==typeof n.marks}return function(n){if(t(n)){var e={},o={marks:{},measures:{}};return n.marks.forEach(function(n){o.marks[n.name]=o.marks[n.name]||[],o.marks[n.name].push(Math.floor(n.time))}),r(o.marks,function(n,r){var t=r.sort(function(n,r){return n-r})[0];e["mark__"+n]=t}),n.measures.forEach(function(n){o.measures[n.name]=o.measures[n.name]||[],o.measures[n.name].push([Math.floor(n.startTime),Math.floor(n.duration)])}),r(o.measures,function(n,r){var t=r.sort(function(n,r){return n[0]-r[0]})[0],o=t[0],u=t[1];e["measure__"+n+"__start"]=o,e["measure__"+n+"__duration"]=u}),e.userTimingRaw=JSON.stringify({marks:o.marks,measures:o.measures}),e}}}(0,u))}(0,window["browser-metrics-aa-beacon"]);;
;
/* module-key = 'com.atlassian.plugins.browser.metrics.browser-metrics-plugin:impl', location = 'browser-metrics-plugin/impl.js' */
define("internal/browser-metrics-plugin/collector",function(){return{install:function(){!function(){var t,n,e,r,o,i,u,a,s,c,f,l,p,d,h,m,v,y,g,w,T,b,x,_,E,k,S,A,C,P;t=function(){return function(t){return{isInitial:"isInitial"in t&&t.isInitial,start:t.timestamp,end:null,key:t.key,threshold:t.threshold,reporters:t.reporters}}}(),e=function(t){return function(n){var e,r=t(n),o=n.threshold,i=4*n.threshold;return e=r.readyForUser<=o?1:r.readyForUser<=i?.5:0,{apdex:e}}}(n=function(){return function(t){return{readyForUser:t.end-t.start}}}()),function(){"use strict";function t(t){return"function"==typeof t}function n(){}function e(){for(var t=0;t<y;t+=2){(0,x[t])(x[t+1]),x[t]=void 0,x[t+1]=void 0}y=0}function o(){}function i(n,e){n===e?a(n,new TypeError("You cannot resolve a promise with itself")):function(t){return"function"==typeof t||"object"==typeof t&&null!==t}(e)?function(n,e){if(e.constructor===n.constructor)!function(t,n){n._state===E?u(t,n._result):t._state===k?a(t,n._result):s(n,void 0,function(n){i(t,n)},function(n){a(t,n)})}(n,e);else{var r=function(t){try{return t.then}catch(t){return S.error=t,S}}(e);r===S?a(n,S.error):void 0===r?u(n,e):t(r)?function(t,n,e){g(function(t){var r=!1,o=function(t,n,e,r){try{t.call(n,e,r)}catch(t){return t}}(e,n,function(e){r||(r=!0,n!==e?i(t,e):u(t,e))},function(n){r||(r=!0,a(t,n))},t._label);!r&&o&&(r=!0,a(t,o))},t)}(n,e,r):u(n,e)}}(n,e):u(n,e)}function u(t,n){t._state===_&&(t._result=n,t._state=E,0===t._subscribers.length||g(c,t))}function a(t,n){t._state===_&&(t._state=k,t._result=n,g(function(t){t._onerror&&t._onerror(t._result),c(t)},t))}function s(t,n,e,r){var o=t._subscribers,i=o.length;t._onerror=null,o[i]=n,o[i+E]=e,o[i+k]=r,0===i&&t._state&&g(c,t)}function c(t){var n=t._subscribers,e=t._state;if(0!==n.length){for(var r,o,i=t._result,u=0;u<n.length;u+=3)r=n[u],o=n[u+e],r?l(e,r,o,i):o(i);t._subscribers.length=0}}function f(){this.error=null}function l(n,e,r,o){var s,c,f,l,p=t(r);if(p){if((s=function(t,n){try{return t(n)}catch(t){return A.error=t,A}}(r,o))===A?(l=!0,c=s.error,s=null):f=!0,e===s)return void a(e,new TypeError("A promises callback cannot return that same promise."))}else s=o,f=!0;e._state!==_||(p&&f?i(e,s):l?a(e,c):n===E?u(e,s):n===k&&a(e,s))}function p(t,n,e,r){this._instanceConstructor=t,this.promise=new t(o,r),this._abortOnReject=e,this._validateInput(n)?(this._input=n,this.length=n.length,this._remaining=n.length,this._init(),0===this.length?u(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&u(this.promise,this._result))):a(this.promise,this._validationError())}function d(n,e){this._id=P++,this._label=e,this._state=void 0,this._result=void 0,this._subscribers=[],o!==n&&(t(n)||function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof d||function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}(),function(t,n){try{n(function(n){i(t,n)},function(n){a(t,n)})}catch(n){a(t,n)}}(this,n))}var h,m,v=h=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},y=(Date.now,Object.create,0),g=function(t,n){x[y]=t,x[y+1]=n,2===(y+=2)&&m()},w="undefined"!=typeof window?window:{},T=w.MutationObserver||w.WebKitMutationObserver,b="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,x=new Array(1e3);m="undefined"!=typeof process&&"[object process]"==={}.toString.call(process)?function(){process.nextTick(e)}:T?function(){var t=0,n=new T(e),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){r.data=t=++t%2}}():b?function(){var t=new MessageChannel;return t.port1.onmessage=e,function(){t.port2.postMessage(0)}}():function(){setTimeout(e,1)};var _=void 0,E=1,k=2,S=new f,A=new f;p.prototype._validateInput=function(t){return v(t)},p.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},p.prototype._init=function(){this._result=new Array(this.length)};var C=p;p.prototype._enumerate=function(){for(var t=this.length,n=this.promise,e=this._input,r=0;n._state===_&&r<t;r++)this._eachEntry(e[r],r)},p.prototype._eachEntry=function(t,n){var e=this._instanceConstructor;!function(t){return"object"==typeof t&&null!==t}(t)?(this._remaining--,this._result[n]=this._makeResult(E,n,t)):t.constructor===e&&t._state!==_?(t._onerror=null,this._settledAt(t._state,n,t._result)):this._willSettleAt(e.resolve(t),n)},p.prototype._settledAt=function(t,n,e){var r=this.promise;r._state===_&&(this._remaining--,this._abortOnReject&&t===k?a(r,e):this._result[n]=this._makeResult(t,n,e)),0===this._remaining&&u(r,this._result)},p.prototype._makeResult=function(t,n,e){return e},p.prototype._willSettleAt=function(t,n){var e=this;s(t,void 0,function(t){e._settledAt(E,n,t)},function(t){e._settledAt(k,n,t)})};var P=0,j=d;d.all=function(t,n){return new C(this,t,!0,n).promise},d.race=function(t,n){var e=new this(o,n);if(!v(t))return a(e,new TypeError("You must pass an array to race.")),e;for(var r=t.length,u=0;e._state===_&&u<r;u++)s(this.resolve(t[u]),void 0,function(t){i(e,t)},function(t){a(e,t)});return e},d.resolve=function(t,n){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(o,n);return i(e,t),e},d.reject=function(t,n){var e=new this(o,n);return a(e,t),e},d.prototype={constructor:d,then:function(t,n,e){var r=this._state;if(r===E&&!t||r===k&&!n)return this;this._onerror=null;var i=new this.constructor(o,e),u=this._result;if(r){var a=arguments[r-1];g(function(){l(r,i,a,u)})}else s(this,i,t,n);return i},catch:function(t,n){return this.then(null,t,n)}};var M={Promise:j,polyfill:function(){var n;"Promise"in(n="undefined"!=typeof global?global:"undefined"!=typeof window&&window.document?window:self)&&"resolve"in n.Promise&&"reject"in n.Promise&&"all"in n.Promise&&"race"in n.Promise&&function(){var e;return new n.Promise(function(t){e=t}),t(e)}()||(n.Promise=j)}};r=M}.call(this),s=function(t,n,e,r){function o(){return u&&u.loadTimes}function i(){return void 0!==a.msFirstPaint}if(n){var u=r.chrome,a=n.timing;return function(n){return n.isInitial?(r.top===r.self&&(o()||i())?t(function(){return o()&&u.loadTimes().firstPaintTime>0?1e3*u.loadTimes().firstPaintTime-a.navigationStart:i()&&a.msFirstPaint>0?a.msFirstPaint-a.navigationStart:void 0},250):e.reject("The browser does not have a first paint metric")).then(function(t){return{firstPaint:t}},function(){return{}}):{}}}}(i=function(t){return function(n,e){return new t(function(t){function r(){var e=n();void 0!==e&&(clearInterval(o),t(e))}var o;o=setInterval(r,e),r()})}}(o=r.Promise),a=(u=window).performance,o,u),c=function(t){return{isInitial:t.isInitial}},f=function(t,n){var e="browser-metrics-journey";return function(){return void 0===n.sessionStorage?t.reject("sessionStorage is required to produce a report for this transition."):(null===n.sessionStorage.getItem(e)&&n.sessionStorage.setItem(e,"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*n.Math.random()|0;return("x"===t?e:3&e|8).toString(16)})),t.resolve({journeyId:n.sessionStorage.getItem(e)}))}}(o,u),l=function(){return function(t){return{key:t.key}}}(),d=function(t,n){return function(e){var r={};return e.isInitial&&n()&&(r.navigationType=t.performance.navigation.type),r}}(u,p=function(t){return function(){return t.performance&&t.performance.navigation&&t.performance.timing&&void 0!==t.performance.timing.navigationStart}}(u)),h=function(t,n,e){return function(r){var o={};if(r.isInitial){if(!n())return t.reject("The navigation timing API is required to produce a report for this transition.");void 0!==e.performance.navigation.redirectCount&&(o.redirectCount=e.performance.navigation.redirectCount)}return t.resolve(o)}}(o,p,u),m=function(t){return function(n){var e=t.document.createElement("a");return e.href=n,e.href}}(u),y=function(t,n){return function(e){var r=n.onresourcetimingbufferfull||function(){};t(n.addEventListener)?n.addEventListener("resourcetimingbufferfull",e):n.onresourcetimingbufferfull=function(){e(),r()}}}(v=function(t){return"function"==typeof t},a),g=function(t,n){return function(){return n&&t(n.getEntriesByType)}}(v,a),x=function(t){return function(n){return n.isInitial?t().then(function(t){return 0===t.length?{resourceLoadedEnd:null}:{resourceLoadedEnd:t.map(function(t){return t.responseEnd}).reduce(function(t,n){return Math.max(t,n)})}}):{}}}(b=function(t,n,e,r){return function(){var o=function(){var n=r.document.querySelectorAll("script[src][async]");return Array.prototype.map.call(n,function(n){return t(n.src)})}();return e().then(function(t){return n().filter(function(t){return"link"===t.initiatorType||"script"===t.initiatorType}).filter(function(n){return n.responseEnd<t.domContentLoadedEventStart}).filter(function(t){return"script"!==t.initiatorType||-1===o.indexOf(t.name)})})}}(m,w=function(t,n,e,r){function o(){return e.getEntriesByType("resource").filter(function(t){return"img"!==t.initiatorType})}function i(){t(e.clearResourceTimings)&&(u=o(),e.clearResourceTimings())}var u=[];return g()?(i(),n(i),function(){return u.concat(o())}):function(){return[]}}(v,y,a),T=function(t,n,e,r){if(r){var o,i=r.timing,u="unloadEventStart,unloadEventEnd,redirectStart,redirectEnd,fetchStart,domainLookupStart,domainLookupEnd,connectStart,connectEnd,secureConnectionStart,requestStart,responseStart,responseEnd,domLoading,domInteractive,domContentLoadedEventStart,domContentLoadedEventEnd,domComplete,loadEventStart,loadEventEnd".split(",");return function(){return e()?(void 0===o&&(o=t(function(){var t={};if(i.loadEventEnd>0)return u.forEach(function(n){var e=i[n];e>0&&(t[n]=e-i.navigationStart)}),t},250)),o):n.reject("The navigation timing API is required to produce a report for this transition.")}}}(i,o,p,a),u)),_=function(t){return function(n){return n.isInitial?t().then(function(t){if(0===t.length)return{resourceLoadedStart:null};var n=t.map(function(t){return t.startTime});return{resourceLoadedStart:Math.min.apply(Math,n)}}):{}}}(b),E=function(t,n){var e="duration,initiatorType,name".split(","),r="startTime,connectEnd,connectStart,domainLookupEnd,domainLookupStart,fetchStart,redirectEnd,redirectStart,requestStart,responseEnd,responseStart,secureConnectionStart".split(",");return function(o){return t()?{resourceTiming:n().filter(function(t){var n=t.responseEnd;return n>=o.start&&n<=o.end&&t.startTime>=o.start}).map(function(t){var n={};return e.forEach(function(e){n[e]=t[e]}),r.forEach(function(e){n[e]=t[e]>0?t[e]-o.start:0}),n})}:{}}}(g,w),k=function(){return function(t){return{threshold:t.threshold}}}(),S=function(t){return function(n){return n.isInitial?t():{}}}(T),A=function(t){return function(){return{userAgent:t.navigator.userAgent}}}(u),C=function(t,n){return function(e){if(!n||!t(n.getEntriesByType))return{};var r=n.getEntriesByType("mark").filter(function(t){return t.startTime>=e.start&&t.startTime<=e.end}),o=n.getEntriesByType("measure").filter(function(t){return t.startTime>=e.start&&t.startTime+t.duration<=e.end});return{marks:r.map(function(t){return{name:t.name,time:t.startTime-e.start}}),measures:o.map(function(t){return{name:t.name,startTime:t.startTime-e.start,duration:t.duration}})}}}(v,a),function(t,n,e){if(a){var r=new t;n.delegateTo(r)}}(function(t,n,e){return function(){var r,o=[],i=[];return function(u){u.start?function(n){r=new t(n)}(u.start):u.end?function(t){r&&r.key===t.key&&(r.end=t.timestamp,e(r).then(function(t){i.push(t),o.forEach(function(n){n({report:t})})}),r=null)}(u.end):u.addReporter?function(t){n.add(t)}(u.addReporter):u.subscribe&&function(t){i.forEach(function(n){t({report:n})}),o.push(t)}(u.subscribe)}}}(t,P=function(t,r,o,i,u,a,p,m,v,y,g,w,T,b,P){var j=[e,s,c,f,l,d,n,h,x,_,E,k,S,A,C];return{get:function(){return j.concat()},add:function(t){j.push(t)}}}(),function(t,n,e,r,o,i){return function(t){var r=t.reporters,u=i.get().concat(r).map(function(n){var r;try{r=n(t)}catch(t){o(t),r={}}return function(t){return function(t){return e.all([t]).then(function(t){return t[0]})}(t).then(null,function(){return{}})}(r)});return e.all(u).then(function(t){return n.apply(void 0,t)})}}(0,function(){var t=Object.prototype.hasOwnProperty;return function(){for(var n,e,r={},o=0,i=arguments.length;o<i;o++){n=arguments[o];for(e in n)t.call(n,e)&&(r[e]=n[e])}return r}}(),o,0,function(t){return function(n){(t.console.error||t.console.log).call(t.console,n.stack||n)}}(u),P)),u["browser-metrics"])}()}}}),window["browser-metrics-plugin"].install(function(t){require(["internal/browser-metrics","internal/browser-metrics-aa-beacon"],function(n,e){var r,o={},i={};!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define("uxm",["exports"],n):n(t.uxm={})}(this,function(t){function n(){var t="undefined"!=typeof navigator?navigator.connection||navigator.mozConnection||navigator.webkitConnection:null;return t?t.effectiveType:null}function e(){if(!h||void 0===window.PerformancePaintTiming)return null;var t=h.getEntriesByType("paint").find(function(t){return"first-paint"===t.name});return t?Math.round(t.startTime):null}function r(){if(!h||void 0===window.PerformancePaintTiming)return null;var t=h.getEntriesByType("paint").find(function(t){return"first-contentful-paint"===t.name});return t?Math.round(t.startTime):null}function o(){if(!h)return null;var t=h.getEntriesByType("navigation");return t&&t[0]?Math.round(t[0].responseStart):null}function i(){if(!h)return null;var t=h.getEntriesByType("navigation");return t&&t[0]?Math.round(t[0].domContentLoadedEventEnd):null}function u(){if(!h)return null;var t=h.getEntriesByType("navigation");return t&&t[0]?Math.round(t[0].loadEventEnd):null}function a(t){void 0===t&&(t=c()),t=t.toLowerCase();var n=function(n){return-1!==t.indexOf(n)},e=n("windows"),r=e&&n("phone"),o=e&&n("touch")&&!r,i=!e&&n("iphone"),u=n("ipod"),a=n("ipad"),s=!e&&n("android"),f=s&&n("mobile"),l=s&&!n("mobile");return f||i||u||r?"phone":a||l||o?"tablet":"desktop"}function s(){return window.location.href}function c(){return window.navigator.userAgent}function f(){var t="undefined"!=typeof navigator?navigator.deviceMemory:void 0;return void 0===t?null:t>1?"full":"lite"}function l(){if(!h||"undefined"==typeof PerformanceMark)return null;var t=h.getEntriesByType("mark").map(function(t){return{type:"mark",name:t.name,startTime:Math.round(t.startTime)}}),n=h.getEntriesByType("measure").map(function(t){return{type:"measure",name:t.name,startTime:Math.round(t.startTime),duration:Math.round(t.duration)}});return t.concat(n)}function p(){return h&&"undefined"!=typeof PerformanceResourceTiming?h.getEntriesByType("navigation").concat(h.getEntriesByType("resource")).map(function(t){return{url:t.name,type:t.initiatorType,size:t.transferSize,startTime:Math.round(t.startTime),duration:Math.round(t.duration)}}):null}function d(){return void 0===window.__lt?null:window.__lt.e.map(function(t){return{startTime:Math.round(t.startTime),duration:Math.round(t.duration)}})}var h="undefined"!=typeof window?window.performance:null;t.uxm=function t(h){void 0===h&&(h={});var m={deviceType:a(),effectiveConnectionType:n(),timeToFirstByte:o(),firstPaint:e(),firstContentfulPaint:r(),domContentLoaded:i(),onLoad:u()};return m.onLoad?((h.url||h.all)&&(m.url=s()),(h.userAgent||h.all)&&(m.userAgent=c()),(h.deviceMemory||h.all)&&(m.deviceMemory=f()),(h.userTiming||h.all)&&(m.userTiming=l()),(h.longTasks||h.all)&&(m.longTasks=d()),(h.resources||h.all)&&(m.resources=p()),Promise.resolve(m)):new Promise(function(t){return setTimeout(t,250)}).then(function(){return t(h)})},t.mark=function(t){h&&h.mark&&h.mark(t)},t.measure=function(t,n){if(h&&h.measure)try{h.measure(t,n)}catch(t){console.error(t)}},t.getEffectiveConnectionType=n,t.getFirstPaint=e,t.getFirstContentfulPaint=r,t.getTimeToFirstByte=o,t.getDomContentLoaded=i,t.getOnLoad=u,t.getDeviceType=a,t.getUrl=s,t.getUserAgent=c,t.getDeviceMemory=f,t.getUserTiming=l,t.getResources=p,t.getLongTasks=d}),function(t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():r="function"==typeof t?t():t}(function(){return function t(n,e,r){function o(u,a){if(!e[u]){if(!n[u]){var s="function"==typeof require&&require;if(!a&&s)return s(u,!0);if(i)return i(u,!0);var c=new Error("Cannot find module '"+u+"'");throw c.code="MODULE_NOT_FOUND",c}var f=e[u]={exports:{}};n[u][0].call(f.exports,function(t){return o(n[u][1][t]||t)},f,f.exports,t,n,e,r)}return e[u].exports}for(var i="function"==typeof require&&require,u=0;u<r.length;u++)o(r[u]);return o}({1:[function(t,n,e){(function(e){"use strict";function r(t){return(t||"").toString().replace(l,"")}function o(t){var n,r=("undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{}).location||{},o={},i=typeof(t=t||r);if("blob:"===t.protocol)o=new u(unescape(t.pathname),{});else if("string"===i)for(n in o=new u(t,{}),d)delete o[n];else if("object"===i){for(n in t)n in d||(o[n]=t[n]);void 0===o.slashes&&(o.slashes=c.test(t.href))}return o}function i(t){t=r(t);var n=f.exec(t);return{protocol:n[1]?n[1].toLowerCase():"",slashes:!!n[2],rest:n[3]}}function u(t,n,e){if(t=r(t),!(this instanceof u))return new u(t,n,e);var c,f,l,d,h,m,v=p.slice(),y=typeof n,g=this,w=0;for("object"!==y&&"string"!==y&&(e=n,n=null),e&&"function"!=typeof e&&(e=s.parse),n=o(n),c=!(f=i(t||"")).protocol&&!f.slashes,g.slashes=f.slashes||c&&n.slashes,g.protocol=f.protocol||n.protocol||"",t=f.rest,f.slashes||(v[3]=[/(.*)/,"pathname"]);w<v.length;w++)"function"!=typeof(d=v[w])?(l=d[0],m=d[1],l!=l?g[m]=t:"string"==typeof l?~(h=t.indexOf(l))&&("number"==typeof d[2]?(g[m]=t.slice(0,h),t=t.slice(h+d[2])):(g[m]=t.slice(h),t=t.slice(0,h))):(h=l.exec(t))&&(g[m]=h[1],t=t.slice(0,h.index)),g[m]=g[m]||c&&d[3]&&n[m]||"",d[4]&&(g[m]=g[m].toLowerCase())):t=d(t);e&&(g.query=e(g.query)),c&&n.slashes&&"/"!==g.pathname.charAt(0)&&(""!==g.pathname||""!==n.pathname)&&(g.pathname=function(t,n){if(""===t)return n;for(var e=(n||"/").split("/").slice(0,-1).concat(t.split("/")),r=e.length,o=e[r-1],i=!1,u=0;r--;)"."===e[r]?e.splice(r,1):".."===e[r]?(e.splice(r,1),u++):u&&(0===r&&(i=!0),e.splice(r,1),u--);return i&&e.unshift(""),"."!==o&&".."!==o||e.push(""),e.join("/")}(g.pathname,n.pathname)),a(g.port,g.protocol)||(g.host=g.hostname,g.port=""),g.username=g.password="",g.auth&&(d=g.auth.split(":"),g.username=d[0]||"",g.password=d[1]||""),g.origin=g.protocol&&g.host&&"file:"!==g.protocol?g.protocol+"//"+g.host:"null",g.href=g.toString()}var a=t("requires-port"),s=t("querystringify"),c=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,f=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,l=new RegExp("^[\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF]+"),p=[["#","hash"],["?","query"],function(t){return t.replace("\\","/")},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],d={hash:1,query:1};u.prototype={set:function(t,n,e){var r=this;switch(t){case"query":"string"==typeof n&&n.length&&(n=(e||s.parse)(n)),r[t]=n;break;case"port":r[t]=n,a(n,r.protocol)?n&&(r.host=r.hostname+":"+n):(r.host=r.hostname,r[t]="");break;case"hostname":r[t]=n,r.port&&(n+=":"+r.port),r.host=n;break;case"host":r[t]=n,/:\d+$/.test(n)?(n=n.split(":"),r.port=n.pop(),r.hostname=n.join(":")):(r.hostname=n,r.port="");break;case"protocol":r.protocol=n.toLowerCase(),r.slashes=!e;break;case"pathname":case"hash":if(n){var o="pathname"===t?"/":"#";r[t]=n.charAt(0)!==o?o+n:n}else r[t]=n;break;default:r[t]=n}for(var i=0;i<p.length;i++){var u=p[i];u[4]&&(r[u[1]]=r[u[1]].toLowerCase())}return r.origin=r.protocol&&r.host&&"file:"!==r.protocol?r.protocol+"//"+r.host:"null",r.href=r.toString(),r},toString:function(t){t&&"function"==typeof t||(t=s.stringify);var n,e=this,r=e.protocol;r&&":"!==r.charAt(r.length-1)&&(r+=":");var o=r+(e.slashes?"//":"");return e.username&&(o+=e.username,e.password&&(o+=":"+e.password),o+="@"),o+=e.host+e.pathname,(n="object"==typeof e.query?t(e.query):e.query)&&(o+="?"!==n.charAt(0)?"?"+n:n),e.hash&&(o+=e.hash),o}},u.extractProtocol=i,u.location=o,u.trimLeft=r,u.qs=s,n.exports=u}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{querystringify:2,"requires-port":3}],2:[function(t,n,e){"use strict";function r(t){return decodeURIComponent(t.replace(/\+/g," "))}var o=Object.prototype.hasOwnProperty;e.stringify=function(t,n){n=n||"";var e=[];for(var r in"string"!=typeof n&&(n="?"),t)o.call(t,r)&&e.push(encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return e.length?n+e.join("&"):""},e.parse=function(t){for(var n,e=/([^=?&]+)=?([^&]*)/g,o={};n=e.exec(t);){var i=r(n[1]),u=r(n[2]);i in o||(o[i]=u)}return o}},{}],3:[function(t,n,e){"use strict";n.exports=function(t,n){if(n=n.split(":")[0],!(t=+t))return!1;switch(n){case"http":case"ws":return 80!==t;case"https":case"wss":return 443!==t;case"ftp":return 21!==t;case"gopher":return 70!==t;case"file":return!1}return 0!==t}},{}]},{},[1])(1)}),i=function(t,n,e,r,o,i,u,a,s,c){Object.defineProperty(t,"__esModule",{value:!0});var f=n.addReporter,l=e.addReportMarshaller,p=e.addUrlCleaner;return f(function(){return{pageVisible:!(window&&window.document&&window.document.hidden)}}),window.performance.clearResourceTimings&&(window.performance.clearResourceTimings=function(){}),f(r),f(o),l(i),l(u),p(a),p(s),p(c),t}(i,n,e,function(t,n,e){return function(t){var r=n.getResources();if(!r)return{};var o={};if(r.filter(function(t){return["script","link","fetch"].indexOf(t.type)>-1}).map(function(t){if(!t.url)return null;var n={startTime:t.startTime,duration:t.duration,size:t.size,type:t.type};n.transferType=function(t){var n=t.duration,e=t.size;return 0===e&&0===n?"memory":0===e&&n>0?"disk":"network"}(n);var r;r="fetch"===t.type?e(t.url,!0).pathname.replace(/\/(\w+)-(\d+)\//i,"/<issue-key>/").split("#")[0].split("?")[0]:e(t.url,!0).pathname.replace(/^.*[\\\/]/,"").replace(/\..*\./,"."),o[r]=n}),!o||o==={})return t;return{resourceTiming:JSON.stringify(o)}}}(0,uxm,r),function(t,n,e){var r=/^(?:https?:)?\/\/[^\.]+\.cloudfront\.net\/p\/([^\/]+)\/main\.js$/,o=/^(?:https?:)?\/\/aes-artifacts--cdn\.[^\.]+\.atlassian\.io\/hashed\/([^\/]+)\/.+\.js$/,i=function(){var t=e.Deferred();return e(function(){var e=[];Array.prototype.slice.call(n.document.getElementsByTagName("script")||[]).forEach(function(t){var n=t.getAttribute("src"),i=n&&(n.match(o)||n.match(r));if(i&&i.length>1){var u=i[1];e.push({name:u,async:t.async})}}),t.resolve(e)}),t.promise()}().pipe(function(t){return{experiments:t}});return function(){return i}}(0,o=window,function(t,n){var e;try{e=n.require("jquery")}catch(t){e=n.jQuery}return e}(0,o)),function(t){return function(t){if(function(t){return Array.isArray(t.experiments)}(t))return{experiments:JSON.stringify(t.experiments.map(function(t){return[t.name,t.async?1:0]}))}}}(),function(t){function n(t){var n=t.toLowerCase().replace(/[;,()+]/g,"");return function(t){return!!t.match(/^[0-9.,_%\-]+$/)}(n)||-1!==e.indexOf(n)?t:""}var e=["android","applewebkit","baiduspider","bingbot","build","chrome","compatible","edge","electron","explorer","firefox","gecko","googlebot","iemobile","intel","ipad","iphone","khtml","konqueror","like","linux","mac","macintosh","maxthon","microsoft","mini","mobi","mobile","mozilla","msie","mwendo","nt","opera","opr","os","phone","playstation","presto","rv","safari","samsung","thunderbird","trident","ubuntu","ucbrowser","unix","version","vivo","win","win64","windows","wow64","x","x11","x64","x86","x86_64","xbox"];return function(t){if(t.userAgent)return{userAgent:function(t){var e=/[\s\/:]/g,r=t.match(e);return null===r?n(t):t.split(e).map(n).reduce(function(t,n){return t+r.shift()+n})}(t.userAgent)}}}(),function(t,n,e){var r=/^https:\/\/[^.]+\.cloudfront.net\/[^\/]+(\/wiki)?\/s\//g;return function(t){return t.match(r)?(t=n(t),t=e(t)):""}}(0,function(t,n){var e=/([&?][^&=]+)(=?)([^&#]*)/g;return function(t){return t.replace(e,function(t,e,r,o){return e+r+(n(o)?o:"")})}}(0,function(t){var n=/^(true|false|\d+)$/gi;return function(t){return!!t.match(n)}}()),function(t){var n=/(\/s\/).+(\/_\/)/;return function(t){return t.replace(n,function(t,n,e){return n+""+e})}}()),function(t){var n=/^https:\/\/d2kryfvs3op226\.cloudfront\.net\/[a-f0-9]+\.[a-z]+$/g;return function(t){return t.match(n)?t:""}}(),function(t){var n=/^https:\/\/[^\/]+\.atl-paas.net\//g;return function(t){return t.match(n)?t:""}}()),t()})});;
;
/* module-key = 'com.atlassian.auiplugin:ajs-raf', location = 'node_modules/@atlassian/aui/src/js-vendor/raf/raf.js' */
("undefined"===typeof window?global:window).__0e57a5ff611a3173e3f9aa2306aea259=function(){for(var a=window,f=0,d=["webkit","moz"],b=a.requestAnimationFrame,c=a.cancelAnimationFrame,e=d.length;0<=--e&&!b;)b=a[d[e]+"RequestAnimationFrame"],c=a[d[e]+"CancelAnimationFrame"];if(!b||!c)b=function(a){var b=Date.now(),c=Math.max(f+16,b);return setTimeout(function(){a(f=c)},c-b)},c=clearTimeout;a.requestAnimationFrame=b;a.cancelAnimationFrame=c;return{}}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-internal-is-input', location = 'node_modules/@atlassian/aui/src/js/aui/internal/is-input.js' */
("undefined"===typeof window?global:window).__f268bb685e7e11f511cb91a156a783b0=function(){var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default=function(a){return"value"in a||a.isContentEditable};return a=a["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-vendor-raf-raf', location = 'node_modules/@atlassian/aui/src/js-vendor/raf/raf.js' */
("undefined"===typeof window?global:window).__0e57a5ff611a3173e3f9aa2306aea259=function(){for(var a=window,f=0,d=["webkit","moz"],b=a.requestAnimationFrame,c=a.cancelAnimationFrame,e=d.length;0<=--e&&!b;)b=a[d[e]+"RequestAnimationFrame"],c=a[d[e]+"CancelAnimationFrame"];if(!b||!c)b=function(a){var b=Date.now(),c=Math.max(f+16,b);return setTimeout(function(){a(f=c)},c-b)},c=clearTimeout;a.requestAnimationFrame=b;a.cancelAnimationFrame=c;return{}}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-internal-has-touch', location = 'node_modules/@atlassian/aui/src/js/aui/internal/has-touch.js' */
("undefined"===typeof window?global:window).__29f0b74d9ef495751062ec4e83e0b098=function(){var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});var b=window.DocumentTouch;a.default="ontouchstart"in window||b&&document instanceof b;return a=a["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-internal-mediaQuery', location = 'node_modules/@atlassian/aui/src/js/aui/internal/mediaQuery.js' */
("undefined"===typeof window?global:window).__e67a99ea27950f14c1291fb7cebabf6d=function(){var a={};Object.defineProperty(a,"__esModule",{value:!0});a.default=function(a){if(window.matchMedia)return window.matchMedia(a).matches;var b=document.createElement("style");b.type="text/css";b.id="testMedia";b.innerText="@media "+a+" { #testMedia { width: 1px; } }";document.head.appendChild(b);a="1px"===window.getComputedStyle(b,null).width;b.parentNode.removeChild(b);return a};return a=a["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-sidebar', location = 'node_modules/@atlassian/aui/src/js/aui/sidebar.js' */
("undefined"===typeof window?global:window).__c0275cfdb12ae34a5641a8e219403604=function(){function j(a){return a&&a.__esModule?a:{"default":a}}function c(a){this.$el=(0,e.default)(a);if(this.$el.length){this.$body=(0,e.default)("body");this.$wrapper=this.$el.children(".aui-sidebar-wrapper");this.$body.addClass("aui-page-sidebar");this._previousOffsetTop=this._previousViewportWidth=this._previousViewportHeight=this._previousScrollTop=null;this.submenus=new g;var b=this;if((0,e.default)(".aui-sidebar").length){b.$el.on("hover click focus",
b.collapsedTriggersSelector,function(a){a=(0,e.default)(a.target);r(b,a)});if(y.default&&(0,z.default)("only screen and (max-device-width:1024px)"))(0,e.default)("body").addClass("aui-page-sidebar-touch");var d=null,c=function(){null===d&&(d=requestAnimationFrame(function(){b.reflow();d=null}))};(0,e.default)(window).on("scroll resize",c);b.reflow();if(b.isAnimated())b.$el.on("transitionend webkitTransitionEnd",function(){b.$el.trigger(e.default.Event(l+(b.isCollapsed()?"collapse-end":"expand-end")))});
b.$el.on("click",".aui-sidebar-toggle",function(a){a.preventDefault();b.toggle()});(0,e.default)(".aui-page-panel").click(function(){!b.isCollapsed()&&b.isViewportNarrow()&&b.collapse()});var s=function(a){a.which===AJS.keyCode.LEFT_SQUARE_BRACKET&&(!a.shiftKey&&!a.ctrlKey&&!a.metaKey&&!(0,A.default)(a.target))&&b.toggle()};(0,e.default)(document).on("keypress",s);b._remove=function(){this._removeAllTooltips();(0,e.default)(this.inlineDialogSelector).remove();this.$el.off();this.$el.remove();(0,e.default)(document).off("keypress",
s);(0,e.default)(window).off("scroll resize",c)};b.$el.on("touchend",function(a){b.isCollapsed()&&(b.expand(),a.preventDefault())});b.$el.on("mouseenter focus",b.collapsedTriggersSelector,function(){if(b.isCollapsed()){var a=(0,e.default)(this);0!==m(a).length||t(a)}});b.$el.on("click blur mouseleave",b.collapsedTriggersSelector,function(){b.isCollapsed()&&u((0,e.default)(this))});b.$el.on("mouseenter focus",b.toggleSelector,function(){var a=(0,e.default)(this);b.isCollapsed()?a.data("tooltip","Expand sidebar ( [ )"):
a.data("tooltip","Collapse sidebar ( [ )");t(a)});b.$el.on("click blur mouseleave",b.toggleSelector,function(){u((0,e.default)(this))});b.$el.on("keydown",b.collapsedTriggersSelector,function(a){if(b.isCollapsed()){var d=a.target,c=v(d);if(c){var f=(0,e.default)(c);a.keyCode===AJS.keyCode.TAB&&(!a.shiftKey&&!a.altKey)&&c.open&&(a.preventDefault(),f.attr("persistent",""),f.find(":aui-tabbable").first().focus(),setTimeout(function(){f.removeAttr("persistent")},100),f.on("keydown",
function(a){if(a.keyCode===AJS.keyCode.TAB&&a.shiftKey&&a.target===f.find(":aui-tabbable")[0]||a.keyCode===AJS.keyCode.TAB&&(!a.shiftKey&&!a.altKey)&&a.target===f.find(":aui-tabbable").last()[0])d.focus(),(0,e.default)(this).off("keydown"),p()}))}}})}var f=this;(0,e.default)(f.collapsedTriggersSelector).each(function(){var a=(0,e.default)(this);r(f,a)})}}function w(a){return e.default.map(a.split(" "),function(a){return l+a}).join(" ")}function g(){this.inlineDialog=null}function m(a){return a.is("a")?
a.next(".aui-nav"):a.children(".aui-nav, hr")}function v(a){a=a.getAttribute("aria-controls");return document.getElementById(a)}function p(){var a=document.querySelectorAll(c.prototype.inlineDialogSelector);Array.prototype.forEach.call(a,function(a){a.open=!1})}function r(a,b){if(!b.data("_aui-sidebar-submenu-constructed")&&(b.data("_aui-sidebar-submenu-constructed",!0),0!==m(b).length)){var d=document.createElement("aui-inline-dialog"),g=(0,B.default)("sidebar-submenu");b.attr("aria-controls",g);
b.attr("data-aui-trigger","");x.default.init(b);d.setAttribute("id",g);d.setAttribute("alignment","right top");d.setAttribute("aria-hidden","true");a.isCollapsed()&&d.setAttribute("responds-to","hover");(0,e.default)(d).addClass(c.prototype.inlineDialogClass);document.body.appendChild(d);x.default.init(d);d.addEventListener("aui-layer-show",function(c){if(a.isCollapsed()){b.addClass("active");d.innerHTML=C;var f=b.is("a")?b.text():b.children(".aui-nav-heading").text(),c=(0,e.default)(d).find(".aui-navgroup-inner");
c.children(".aui-nav-heading").attr("title",f).children("strong").text(f);f=m(b);f=AJS.clone(f);f.hasClass("aui-expander-content")&&(f.find(".aui-expander-cutoff").remove(),f.removeClass("aui-expander-content"));f.appendTo(c)}else c.preventDefault()});d.addEventListener("aui-layer-hide",function(){b.removeClass("active")});return d}}function t(a){a.tipsy(D).tipsy("show");(a=a.data("tipsy")&&a.data("tipsy").$tip)&&a.css({opacity:""}).addClass("tooltip-shown")}function u(a){var b=a.data("tipsy")&&a.data("tipsy").$tip;
if(b){var d=b.css("transition-duration");d&&(d=0<=d.indexOf("ms")?parseInt(d.substring(0,d.length-2),10):1E3*parseInt(d.substring(0,d.length-1),10),setTimeout(function(){a.tipsy("hide")},d));b.removeClass("tooltip-shown")}}var o={};"use strict";Object.defineProperty(o,"__esModule",{value:!0});var e=j(__307d3e18fd611f85395c67cddeb1fe24);__f673a5150978887490995d88aeec0c8d;__0e57a5ff611a3173e3f9aa2306aea259;__d74c881c8f23921c15438d0f30c99f80;var k;var h=__c8cfa00f1eba9ac7af89ee3d0d33961d;if(h&&h.__esModule)k=
h;else{var n={};if(null!=h)for(k in h)Object.prototype.hasOwnProperty.call(h,k)&&(n[k]=h[k]);n.default=h;k=n}var h=j(__4d02fe17b8e885a34493e34af3d145dd),y=j(__29f0b74d9ef495751062ec4e83e0b098),A=j(__f268bb685e7e11f511cb91a156a783b0),z=j(__e67a99ea27950f14c1291fb7cebabf6d),x=j(__c1ce1f1e3e613f564fc234ff043570f1),B=j(__9fa5e8acd81f0f9028180b8fcdcd9cb4),n=j(__e3152236c406a356c24f20f7bfcccf21),E="undefined"!==typeof document.documentElement.style.transition||"undefined"!==typeof document.documentElement.style.webkitTransition,
l="_aui-internal-sidebar-";c.prototype.on=function(){var a=arguments[0],b=Array.prototype.slice.call(arguments,1),a=w(a);this.$el.on.apply(this.$el,[a].concat(b));return this};c.prototype.off=function(){var a=arguments[0],b=Array.prototype.slice.call(arguments,1),a=w(a);this.$el.off.apply(this.$el,[a].concat(b));return this};c.prototype.setHeight=function(a,b,d){a=Math.max(0,d-a);this.$wrapper.height(b-a);return this};c.prototype.setPosition=function(a){a=a||window.pageYOffset;this.$wrapper.toggleClass("aui-is-docked",
a>this.$el.offset().top);return this};c.prototype.setCollapsedState=function(a){var b={collapsed:{},expanded:{}};b.collapsed.narrow={narrow:e.default.noop,wide:function(b){b._expand(a,!0)}};b.collapsed.wide={narrow:e.default.noop,wide:e.default.noop};b.expanded.narrow={narrow:e.default.noop,wide:function(a){a.$body.removeClass("aui-sidebar-collapsed");a.$el.removeClass("aui-sidebar-fly-out")}};b.expanded.wide={narrow:function(a){a._collapse(!0)},wide:e.default.noop};var d=this.isCollapsed()?"collapsed":
"expanded",c=this.isViewportNarrow(this._previousViewportWidth)?"narrow":"wide",g=this.isViewportNarrow(a)?"narrow":"wide";b[d][c][g](this);return this};c.prototype._collapse=function(a){if(this.isCollapsed())return this;var b=e.default.Event(l+"collapse-start",{isResponsive:a});this.$el.trigger(b);if(b.isDefaultPrevented())return this;this.$body.addClass("aui-sidebar-collapsed");this.$el.attr("aria-expanded","false");this.$el.removeClass("aui-sidebar-fly-out");this.$el.find(this.submenuTriggersSelector).attr("tabindex",
0);(0,e.default)(this.inlineDialogSelector).attr("responds-to","hover");this.isAnimated()||this.$el.trigger(e.default.Event(l+"collapse-end",{isResponsive:a}));return this};c.prototype.collapse=function(){return this._collapse(!1)};c.prototype._expand=function(a,b){var d=e.default.Event(l+"expand-start",{isResponsive:b});this.$el.trigger(d);if(d.isDefaultPrevented())return this;d=this.isViewportNarrow(a);this.$el.attr("aria-expanded","true");this.$body.toggleClass("aui-sidebar-collapsed",d);this.$el.toggleClass("aui-sidebar-fly-out",
d);this.$el.find(this.submenuTriggersSelector).removeAttr("tabindex");(0,e.default)(this.inlineDialogSelector).removeAttr("responds-to");this.isAnimated()||this.$el.trigger(e.default.Event(l+"expand-end",{isResponsive:b}));return this};c.prototype.expand=function(){this.isCollapsed()&&this._expand(this._previousViewportWidth,!1);return this};c.prototype.isAnimated=function(){return E&&this.$el.hasClass("aui-is-animated")};c.prototype.isCollapsed=function(){return"false"===this.$el.attr("aria-expanded")};
c.prototype.isViewportNarrow=function(a){a=void 0===a?this._previousViewportWidth:a;return 1240>a};c.prototype._removeAllTooltips=function(){(0,e.default)(this.tooltipSelector).remove()};c.prototype.responsiveReflow=function(a,b){if(a){if(!this.isCollapsed()&&this.isViewportNarrow(b)){var d=this.isAnimated();d&&this.$el.removeClass("aui-is-animated");this.collapse();d&&(this.$el[0].offsetHeight,this.$el.addClass("aui-is-animated"))}}else b!==this._previousViewportWidth&&this.setCollapsedState(b)};
c.prototype.reflow=function(a,b,d,c){var a=void 0===a?window.pageYOffset:a,b=void 0===b?document.documentElement.clientHeight:b,c=void 0===c?document.documentElement.scrollHeight:c,d=void 0===d?window.innerWidth:d,e=this.$el.offset().top,f=null===this._previousViewportWidth;if(!(a===this._previousScrollTop&&b===this._previousViewportHeight&&e===this._previousOffsetTop)){this.isCollapsed()&&(!f&&a!==this._previousScrollTop)&&(p(),this._removeAllTooltips());var g=this.$body.hasClass("aui-page-sidebar-touch"),
c=a!==this._previousScrollTop&&(0>a||a+b>c);if(!g&&(f||!c))this.setHeight(a,b,e),this.setPosition(a)}"false"!==this.$el.attr("data-aui-responsive")?this.responsiveReflow(f,d):(f=!this.isCollapsed()&&this.isViewportNarrow(d),this.$el.toggleClass("aui-sidebar-fly-out",f));this._previousScrollTop=a;this._previousViewportHeight=b;this._previousViewportWidth=d;this._previousOffsetTop=e;return this};c.prototype.toggle=function(){this.isCollapsed()?(this.expand(),this._removeAllTooltips()):this.collapse();
return this};c.prototype.submenuTriggersSelector=".aui-sidebar-group:not(.aui-sidebar-group-tier-one)";c.prototype.collapsedTriggersSelector=[c.prototype.submenuTriggersSelector,".aui-sidebar-group.aui-sidebar-group-tier-one > .aui-nav > li > a",".aui-sidebar-footer > .aui-sidebar-settings-button"].join(", ");c.prototype.toggleSelector=".aui-sidebar-footer > .aui-sidebar-toggle";c.prototype.tooltipSelector=".aui-sidebar-section-tooltip";c.prototype.inlineDialogClass="aui-sidebar-submenu-dialog";c.prototype.inlineDialogSelector=
"."+c.prototype.inlineDialogClass;g.prototype.submenu=function(a){i();return m(a)};g.prototype.hasSubmenu=function(a){i();return 0!==m(a).length};g.prototype.submenuHeadingHeight=function(){i();return 34};g.prototype.isShowing=function(){i();return c.prototype.isSubmenuVisible()};g.prototype.show=function(a,b){i();v(b).open=!0};g.prototype.hide=function(){i();p()};g.prototype.inlineDialogShowHandler=function(){i()};g.prototype.inlineDialogHideHandler=function(){i()};g.prototype.moveSubmenuToInlineDialog=
function(){i()};g.prototype.restoreSubmenu=function(){i()};c.prototype.getVisibleSubmenus=function(){return Array.prototype.filter.call(document.querySelectorAll(c.prototype.inlineDialogSelector),function(a){return a.open})};c.prototype.isSubmenuVisible=function(){return 0<this.getVisibleSubmenus().length};var C='<div class="aui-inline-dialog-contents"><div class="aui-sidebar-submenu" ><div class="aui-navgroup aui-navgroup-vertical"><div class="aui-navgroup-inner"><div class="aui-nav-heading"><strong></strong></div></div></div></div></div>',
D={trigger:"manual",gravity:"w",className:"aui-sidebar-section-tooltip",title:function(){var a=(0,e.default)(this);return a.is("a")?a.attr("title")||a.find(".aui-nav-item-label").text()||a.data("tooltip"):a.children(".aui-nav").attr("title")||a.children(".aui-nav-heading").text()}},q=(0,n.default)("sidebar",c);(0,e.default)(function(){q(".aui-sidebar")});var i=k.getMessageLogger("Sidebar.submenus",{removeInVersion:"6.0",sinceVersion:"5.8"});(0,h.default)("sidebar",q);o.default=q;return o=o["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-dialog2', location = 'node_modules/@atlassian/aui/src/js/aui/dialog2.js' */
("undefined"===typeof window?global:window).__bdbf9d213bf319eb4577ef21ac6c491c=function(){function f(a){return a&&a.__esModule?a:{"default":a}}function e(a){var c=this.$el=a?(0,g.default)(a):(0,g.default)(aui.dialog.dialog2({}));g.default.each(i,function(a,b){var d="data-"+a;c[0].hasAttribute(d)||c.attr(d,b)})}var h={};"use strict";Object.defineProperty(h,"__esModule",{value:!0});var g=f(__307d3e18fd611f85395c67cddeb1fe24),j=f(__574ac67f906effeb9d8ec2753b23cf28),k=f(__4d02fe17b8e885a34493e34af3d145dd),
b=f(__fe0cd0a7ef176e2ef4e0e105d1ce31f5),l=f(__e3152236c406a356c24f20f7bfcccf21),i={"aui-focus":"false","aui-blanketed":"true"};e.prototype.on=function(a,c){(0,b.default)(this.$el).on(a,c);return this};e.prototype.off=function(a,c){(0,b.default)(this.$el).off(a,c);return this};e.prototype.show=function(){(0,b.default)(this.$el).show();return this};e.prototype.hide=function(){(0,b.default)(this.$el).hide();return this};e.prototype.remove=function(){(0,b.default)(this.$el).remove();return this};e.prototype.isVisible=
function(){return(0,b.default)(this.$el).isVisible()};var d=(0,l.default)("dialog2",e);d.on=function(a,c){b.default.on(a,".aui-dialog2",c);return this};d.off=function(a,c){b.default.off(a,".aui-dialog2",c);return this};(0,g.default)(document).on("click",".aui-dialog2-header-close",function(a){a.preventDefault();d((0,g.default)(this).closest(".aui-dialog2")).hide()});d.on("show",function(a,c){var b;[".aui-dialog2-content",".aui-dialog2-footer",".aui-dialog2-header"].some(function(a){b=c.find(a+" :aui-tabbable");
return b.length});b&&b.first().focus()});d.on("hide",function(a,c){var d=(0,b.default)(c);c.data("aui-remove-on-hide")&&d.remove()});(0,j.default)("aui/dialog2",d);(0,k.default)("dialog2",d);h.default=d;return h=h["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:dialog2', location = 'src/soy/dialog2.soy' */
// This file was automatically generated from dialog2.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace aui.dialog.
 */

if (typeof aui == 'undefined') { var aui = {}; }
if (typeof aui.dialog == 'undefined') { aui.dialog = {}; }


aui.dialog.dialog2 = function(opt_data, opt_ignored) {
  return '' + aui.dialog.dialog2Chrome({id: opt_data.id, titleId: opt_data.id ? opt_data.id + '-dialog-title' : null, modal: opt_data.modal, tagName: opt_data.tagName, removeOnHide: opt_data.removeOnHide, visible: opt_data.visible, size: opt_data.size, extraClasses: opt_data.extraClasses, extraAttributes: opt_data.extraAttributes, content: '' + aui.dialog.dialog2Content({id: null, titleText: opt_data.titleText, titleContent: opt_data.titleContent, headerActionContent: opt_data.headerActionContent, headerSecondaryContent: opt_data.headerSecondaryContent, modal: opt_data.modal, content: opt_data.content, footerHintText: opt_data.footerHintText, footerHintContent: opt_data.footerHintContent, footerActionContent: opt_data.footerActionContent})});
};
if (goog.DEBUG) {
  aui.dialog.dialog2.soyTemplateName = 'aui.dialog.dialog2';
}


aui.dialog.dialog2Chrome = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'section') + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ((opt_data.titleId) ? ' aria-labelledby="' + soy.$$escapeHtml(opt_data.titleId) + '"' : '') + ' role="dialog" class=" aui-layer aui-dialog2 aui-dialog2-' + soy.$$escapeHtml(opt_data.size ? opt_data.size : 'medium') + aui.renderExtraClasses(opt_data) + '"' + ((opt_data.modal) ? 'data-aui-modal="true"' : '') + ((opt_data.removeOnHide) ? 'data-aui-remove-on-hide="true"' : '') + ((opt_data.visible != true) ? 'aria-hidden="true"' : '') + aui.renderExtraAttributes(opt_data) + '>' + ((opt_data.content) ? soy.$$filterNoAutoescape(opt_data.content) : '') + '</' + soy.$$escapeHtml(opt_data.tagName ? opt_data.tagName : 'section') + '>';
};
if (goog.DEBUG) {
  aui.dialog.dialog2Chrome.soyTemplateName = 'aui.dialog.dialog2Chrome';
}


aui.dialog.dialog2Content = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + aui.dialog.dialog2Header({titleId: opt_data.id ? opt_data.id + '-dialog-title' : null, titleText: opt_data.titleText, titleContent: opt_data.titleContent, actionContent: opt_data.headerActionContent, secondaryContent: opt_data.headerSecondaryContent, modal: opt_data.modal}) + aui.dialog.dialog2Panel(opt_data) + aui.dialog.dialog2Footer({hintText: opt_data.footerHintText, hintContent: opt_data.footerHintContent, actionContent: opt_data.footerActionContent});
};
if (goog.DEBUG) {
  aui.dialog.dialog2Content.soyTemplateName = 'aui.dialog.dialog2Content';
}


aui.dialog.dialog2Header = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<header' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-dialog2-header' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '><h2 ' + ((opt_data.titleId) ? ' id="' + soy.$$escapeHtml(opt_data.titleId) + '"' : '') + ' class="aui-dialog2-header-main">' + ((opt_data.titleText) ? soy.$$escapeHtml(opt_data.titleText) : '') + ((opt_data.titleContent) ? soy.$$filterNoAutoescape(opt_data.titleContent) : '') + '</h2>' + ((opt_data.actionContent) ? '<div class="aui-dialog2-header-actions">' + soy.$$filterNoAutoescape(opt_data.actionContent) + '</div>' : '') + ((opt_data.secondaryContent) ? '<div class="aui-dialog2-header-secondary">' + soy.$$filterNoAutoescape(opt_data.secondaryContent) + '</div>' : '') + ((opt_data.modal != true) ? '<a class="aui-dialog2-header-close"><span class="aui-icon aui-icon-small aui-iconfont-close-dialog">' + soy.$$escapeHtml('Close') + '</span></a>' : '') + '</header>';
};
if (goog.DEBUG) {
  aui.dialog.dialog2Header.soyTemplateName = 'aui.dialog.dialog2Header';
}


aui.dialog.dialog2Footer = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<footer' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-dialog2-footer' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + ((opt_data.actionContent) ? '<div class="aui-dialog2-footer-actions">' + soy.$$filterNoAutoescape(opt_data.actionContent) + '</div>' : '') + ((opt_data.hintText || opt_data.hintContent) ? '<div class="aui-dialog2-footer-hint">' + ((opt_data.hintText) ? soy.$$escapeHtml(opt_data.hintText) : '') + ((opt_data.hintContent) ? soy.$$filterNoAutoescape(opt_data.hintContent) : '') + '</div>' : '') + '</footer>';
};
if (goog.DEBUG) {
  aui.dialog.dialog2Footer.soyTemplateName = 'aui.dialog.dialog2Footer';
}


aui.dialog.dialog2Panel = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="aui-dialog2-content' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + ((opt_data.content) ? soy.$$filterNoAutoescape(opt_data.content) : '') + '</div>';
};
if (goog.DEBUG) {
  aui.dialog.dialog2Panel.soyTemplateName = 'aui.dialog.dialog2Panel';
}
;
;
/* module-key = 'com.atlassian.plugin.jslibs:marionette-2.1.0-factory', location = 'factories/marionette/2.1.0/marionette-2.1.0-factory.js' */
(function(l){define("atlassian/libs/factories/marionette-2.1.0",function(){return function(f,c){var i={_:f,Backbone:c};l.call(i);return i.Marionette.noConflict()}})})(function(){var l=this,f=this.Backbone,c=this._,i=function(a,b){var e=Error(a);e.name=b||"Error";throw e;},r=f.ChildViewContainer,m=function(a){this._views={};this._indexByModel={};this._indexByCustom={};this._updateLength();c.each(a,this.add,this)};c.extend(m.prototype,{add:function(a,b){var e=a.cid;this._views[e]=a;a.model&&(this._indexByModel[a.model.cid]=
e);b&&(this._indexByCustom[b]=e);this._updateLength();return this},findByModel:function(a){return this.findByModelCid(a.cid)},findByModelCid:function(a){return this.findByCid(this._indexByModel[a])},findByCustom:function(a){return this.findByCid(this._indexByCustom[a])},findByIndex:function(a){return c.values(this._views)[a]},findByCid:function(a){return this._views[a]},remove:function(a){var b=a.cid;a.model&&delete this._indexByModel[a.model.cid];c.any(this._indexByCustom,function(a,c){if(a===b)return delete this._indexByCustom[c],
!0},this);delete this._views[b];this._updateLength();return this},call:function(a){this.apply(a,c.tail(arguments))},apply:function(a,b){c.each(this._views,function(e){c.isFunction(e[a])&&e[a].apply(e,b||[])})},_updateLength:function(){this.length=c.size(this._views)}});c.each("forEach each map find detect filter select reject every all some any include contains invoke toArray first initial rest last without isEmpty pluck".split(" "),function(a){m.prototype[a]=function(){var b=[c.values(this._views)].concat(c.toArray(arguments));
return c[a].apply(c,b)}});f.ChildViewContainer=m;f.ChildViewContainer.VERSION="0.1.4";f.ChildViewContainer.noConflict=function(){f.ChildViewContainer=r;return this};var s=f.Wreqr,h=f.Wreqr={};f.Wreqr.VERSION="1.3.1";f.Wreqr.noConflict=function(){f.Wreqr=s;return this};var g=function(a){this.options=a;this._wreqrHandlers={};c.isFunction(this.initialize)&&this.initialize(a)};g.extend=f.Model.extend;c.extend(g.prototype,f.Events,{setHandlers:function(a){c.each(a,function(a,e){var d=null;c.isObject(a)&&
!c.isFunction(a)&&(d=a.context,a=a.callback);this.setHandler(e,a,d)},this)},setHandler:function(a,b,e){this._wreqrHandlers[a]={callback:b,context:e};this.trigger("handler:add",a,b,e)},hasHandler:function(a){return!!this._wreqrHandlers[a]},getHandler:function(a){var b=this._wreqrHandlers[a];if(b)return function(){var a=Array.prototype.slice.apply(arguments);return b.callback.apply(b.context,a)}},removeHandler:function(a){delete this._wreqrHandlers[a]},removeAllHandlers:function(){this._wreqrHandlers=
{}}});h.Handlers=g;g=function(a){this.options=a;this._commands={};c.isFunction(this.initialize)&&this.initialize(a)};c.extend(g.prototype,f.Events,{getCommands:function(a){var b=this._commands[a];b||(b={command:a,instances:[]},this._commands[a]=b);return b},addCommand:function(a,b){this.getCommands(a).instances.push(b)},clearCommands:function(a){this.getCommands(a).instances=[]}});h.CommandStorage=g;g=h.Handlers.extend({storageType:h.CommandStorage,constructor:function(a){this.options=a||{};this._initializeStorage(this.options);
this.on("handler:add",this._executeCommands,this);var b=Array.prototype.slice.call(arguments);h.Handlers.prototype.constructor.apply(this,b)},execute:function(a,b){a=arguments[0];b=Array.prototype.slice.call(arguments,1);this.hasHandler(a)?this.getHandler(a).apply(this,b):this.storage.addCommand(a,b)},_executeCommands:function(a,b,e){var d=this.storage.getCommands(a);c.each(d.instances,function(a){b.apply(e,a)});this.storage.clearCommands(a)},_initializeStorage:function(a){a=a.storageType||this.storageType;
this.storage=c.isFunction(a)?new a:a}});h.Commands=g;h.RequestResponse=h.Handlers.extend({request:function(){var a=arguments[0],b=Array.prototype.slice.call(arguments,1);if(this.hasHandler(a))return this.getHandler(a).apply(this,b)}});g=function(){};g.extend=f.Model.extend;c.extend(g.prototype,f.Events);h.EventAggregator=g;g=function(a){this.vent=new h.EventAggregator;this.reqres=new h.RequestResponse;this.commands=new h.Commands;this.channelName=a};c.extend(g.prototype,{reset:function(){this.vent.off();
this.vent.stopListening();this.reqres.removeAllHandlers();this.commands.removeAllHandlers();return this},connectEvents:function(a,b){this._connect("vent",a,b);return this},connectCommands:function(a,b){this._connect("commands",a,b);return this},connectRequests:function(a,b){this._connect("reqres",a,b);return this},_connect:function(a,b,e){if(b){var e=e||this,d="vent"===a?"on":"setHandler";c.each(b,function(b,f){this[a][d](f,c.bind(b,e))},this)}}});h.Channel=g;g=function(){this._channels={};this.vent=
{};this.commands={};this.reqres={};this._proxyMethods()};c.extend(g.prototype,{channel:function(a){if(!a)throw Error("Channel must receive a name");return this._getChannel(a)},_getChannel:function(a){var b=this._channels[a];b||(b=new h.Channel(a),this._channels[a]=b);return b},_proxyMethods:function(){c.each(["vent","commands","reqres"],function(a){c.each(t[a],function(b){var e=this;this[a][b]=function(c){var d=e._getChannel(c)[a],f=Array.prototype.slice.call(arguments,1);return d[b].apply(d,f)}},
this)},this)}});var t={vent:"on off trigger once stopListening listenTo listenToOnce".split(" "),commands:["execute","setHandler","setHandlers","removeHandler","removeAllHandlers"],reqres:["request","setHandler","setHandlers","removeHandler","removeAllHandlers"]},g=new g;h.radio=g;var u=f.ChildViewContainer.noConflict(),v=f.Wreqr.noConflict(),w=l.Marionette,d=f.Marionette={};d.VERSION="2.1.0";d.noConflict=function(){l.Marionette=w;return this};f.Marionette=d;d.Deferred=f.$.Deferred;var j=Array.prototype.slice;
d.extend=f.Model.extend;d.getOption=function(a,b){if(a&&b)return a.options&&void 0!==a.options[b]?a.options[b]:a[b]};d.proxyGetOption=function(a){return d.getOption(this,a)};d.normalizeMethods=function(a){var b={};c.each(a,function(a,d){c.isFunction(a)||(a=this[a]);a&&(b[d]=a)},this);return b};d.normalizeUIKeys=function(a,b){if("undefined"!==typeof a)return c.each(c.keys(a),function(e){var c=/@ui\.[a-zA-Z_$0-9]*/g;e.match(c)&&(a[e.replace(c,function(a){return b[a.slice(4)]})]=a[e],delete a[e])}),
a};d.actAsCollection=function(a,b){c.each("forEach each map find detect filter select reject every all some any include contains invoke toArray first initial rest last without isEmpty pluck".split(" "),function(e){a[e]=function(){var a=[c.values(c.result(this,b))].concat(c.toArray(arguments));return c[e].apply(c,a)}})};var x=function(a,b,e){return e.toUpperCase()},y=/(^|:)(\w)/gi;d.triggerMethod=function(a){var b=this["on"+a.replace(y,x)],e;c.isFunction(b)&&(e=b.apply(this,c.tail(arguments)));c.isFunction(this.trigger)&&
this.trigger.apply(this,arguments);return e};var z=document.documentElement,o=function(a){a._isShown&&a._isRendered&&f.$.contains(z,a.el)&&c.isFunction(a.triggerMethod)&&a.triggerMethod("dom:refresh")};d.MonitorDOMRefresh=function(a){a.listenTo(a,"show",function(){a._isShown=!0;o(a)});a.listenTo(a,"render",function(){a._isRendered=!0;o(a)})};var A=function(a,b,e,d){d=d.split(/\s+/);c.each(d,function(c){var d=a[c];d||i('Method "'+c+'" was configured as an event handler, but does not exist.');a.listenTo(b,
e,d)})},B=function(a,b,e,c){a.listenTo(b,e,c)},C=function(a,b,e,d){d=d.split(/\s+/);c.each(d,function(c){a.stopListening(b,e,a[c])})},D=function(a,b,c,d){a.stopListening(b,c,d)},p=function(a,b,e,d,f){b&&e&&(c.isFunction(e)&&(e=e.call(a)),c.each(e,function(e,g){c.isFunction(e)?d(a,b,g,e):f(a,b,g,e)}))};d.bindEntityEvents=function(a,b,c){p(a,b,c,B,A)};d.unbindEntityEvents=function(a,b,c){p(a,b,c,D,C)};d.proxyBindEntityEvents=function(a,b){return d.bindEntityEvents(this,a,b)};d.proxyUnbindEntityEvents=
function(a,b){return d.unbindEntityEvents(this,a,b)};d.Callbacks=function(){this._deferred=d.Deferred();this._callbacks=[]};c.extend(d.Callbacks.prototype,{add:function(a,b){var e=c.result(this._deferred,"promise");this._callbacks.push({cb:a,ctx:b});e.then(function(c){b&&(c.context=b);a.call(c.context,c.options)})},run:function(a,b){this._deferred.resolve({options:a,context:b})},reset:function(){var a=this._callbacks;this._deferred=d.Deferred();this._callbacks=[];c.each(a,function(a){this.add(a.cb,
a.ctx)},this)}});d.Controller=function(a){this.options=a||{};c.isFunction(this.initialize)&&this.initialize(this.options)};d.Controller.extend=d.extend;c.extend(d.Controller.prototype,f.Events,{destroy:function(){var a=j.call(arguments);this.triggerMethod.apply(this,["before:destroy"].concat(a));this.triggerMethod.apply(this,["destroy"].concat(a));this.stopListening();this.off();return this},triggerMethod:d.triggerMethod,getOption:d.proxyGetOption});d.Object=function(a){this.options=c.extend({},c.result(this,
"options"),a);this.initialize(this.options)};d.Object.extend=d.extend;c.extend(d.Object.prototype,{initialize:function(){},destroy:function(){this.triggerMethod("before:destroy");this.triggerMethod("destroy");this.stopListening()},triggerMethod:d.triggerMethod,getOption:d.proxyGetOption,bindEntityEvents:d.proxyBindEntityEvents,unbindEntityEvents:d.proxyUnbindEntityEvents});c.extend(d.Object.prototype,f.Events);d.Region=function(a){this.options=a||{};this.el=this.getOption("el");(this.el=this.el instanceof
f.$?this.el[0]:this.el)||i('An "el" must be specified for a region.',"NoElError");this.$el=this.getEl(this.el);if(this.initialize){var b=j.apply(arguments);this.initialize.apply(this,b)}};c.extend(d.Region,{buildRegion:function(a,b){if(c.isString(a))return this._buildRegionFromSelector(a,b);if(a.selector||a.el||a.regionClass)return this._buildRegionFromObject(a,b);if(c.isFunction(a))return this._buildRegionFromRegionClass(a);i("Improper region configuration type. Please refer to http://marionettejs.com/docs/marionette.region.html#region-configuration-types")},
_buildRegionFromSelector:function(a,b){return new b({el:a})},_buildRegionFromObject:function(a,b){var e=a.regionClass||b,d=c.omit(a,"selector","regionClass");a.selector&&!d.el&&(d.el=a.selector);e=new e(d);a.parentEl&&(e.getEl=function(b){if(c.isObject(b))return f.$(b);var e=a.parentEl;c.isFunction(e)&&(e=e());return e.find(b)});return e},_buildRegionFromRegionClass:function(a){return new a}});c.extend(d.Region.prototype,f.Events,{show:function(a,b){this._ensureElement();var e=b||{},d=a!==this.currentView,
f=!!e.forceShow,g=!!this.currentView;!e.preventDestroy&&d&&this.empty();if(d||f)a.once("destroy",c.bind(this.empty,this)),a.render(),g&&this.triggerMethod("before:swap",a),this.triggerMethod("before:show",a),c.isFunction(a.triggerMethod)?a.triggerMethod("before:show"):this.triggerMethod.call(a,"before:show"),this.attachHtml(a),this.currentView=a,g&&this.triggerMethod("swap",a),this.triggerMethod("show",a),c.isFunction(a.triggerMethod)?a.triggerMethod("show"):this.triggerMethod.call(a,"show");return this},
_ensureElement:function(){c.isObject(this.el)||(this.$el=this.getEl(this.el),this.el=this.$el[0]);(!this.$el||0===this.$el.length)&&i('An "el" '+this.$el.selector+" must exist in DOM")},getEl:function(a){return f.$(a)},attachHtml:function(a){this.el.innerHTML="";this.el.appendChild(a.el)},empty:function(){var a=this.currentView;if(a)return this.triggerMethod("before:empty",a),this._destroyView(),this.triggerMethod("empty",a),delete this.currentView,this},_destroyView:function(){var a=this.currentView;
a.destroy&&!a.isDestroyed?a.destroy():a.remove&&a.remove()},attachView:function(a){this.currentView=a;return this},hasView:function(){return!!this.currentView},reset:function(){this.empty();this.$el&&(this.el=this.$el.selector);delete this.$el;return this},getOption:d.proxyGetOption,triggerMethod:d.triggerMethod});d.Region.extend=d.extend;g=d.Controller.extend({constructor:function(a){this._regions={};d.Controller.call(this,a)},addRegions:function(a,b){c.isFunction(a)&&(a=a.apply(this,arguments));
var e={};c.each(a,function(a,d){c.isString(a)&&(a={selector:a});a.selector&&(a=c.defaults({},a,b));var f=this.addRegion(d,a);e[d]=f},this);return e},addRegion:function(a,b){var e;e=c.isObject(b);var n=c.isString(b),f=!!b.selector;e=n||e&&f?d.Region.buildRegion(b,d.Region):c.isFunction(b)?d.Region.buildRegion(b,d.Region):b;this.triggerMethod("before:add:region",a,e);this._store(a,e);this.triggerMethod("add:region",a,e);return e},get:function(a){return this._regions[a]},getRegions:function(){return c.clone(this._regions)},
removeRegion:function(a){var b=this._regions[a];this._remove(a,b);return b},removeRegions:function(){var a=this.getRegions();c.each(this._regions,function(a,c){this._remove(c,a)},this);return a},emptyRegions:function(){var a=this.getRegions();c.each(a,function(a){a.empty()},this);return a},destroy:function(){this.removeRegions();return d.Controller.prototype.destroy.apply(this,arguments)},_store:function(a,b){this._regions[a]=b;this._setLength()},_remove:function(a,b){this.triggerMethod("before:remove:region",
a,b);b.empty();b.stopListening();delete this._regions[a];this._setLength();this.triggerMethod("remove:region",a,b)},_setLength:function(){this.length=c.size(this._regions)}});d.actAsCollection(g.prototype,"_regions");d.RegionManager=g;d.TemplateCache=function(a){this.templateId=a};c.extend(d.TemplateCache,{templateCaches:{},get:function(a){var b=this.templateCaches[a];b||(b=new d.TemplateCache(a),this.templateCaches[a]=b);return b.load()},clear:function(){var a,b=j.call(arguments),c=b.length;if(0<
c)for(a=0;a<c;a++)delete this.templateCaches[b[a]];else this.templateCaches={}}});c.extend(d.TemplateCache.prototype,{load:function(){if(this.compiledTemplate)return this.compiledTemplate;var a=this.loadTemplate(this.templateId);return this.compiledTemplate=this.compileTemplate(a)},loadTemplate:function(a){var b=f.$(a).html();(!b||0===b.length)&&i('Could not find template: "'+a+'"',"NoTemplateError");return b},compileTemplate:function(a){return c.template(a)}});d.Renderer={render:function(a,b){a||
i("Cannot render the template since its false, null or undefined.","TemplateNotFoundError");return("function"===typeof a?a:d.TemplateCache.get(a))(b)}};d.View=f.View.extend({constructor:function(a){c.bindAll(this,"render");this.options=c.extend({},c.result(this,"options"),c.isFunction(a)?a.call(this):a);this.events=this.normalizeUIKeys(c.result(this,"events"));c.isObject(this.behaviors)&&new d.Behaviors(this);f.View.apply(this,arguments);d.MonitorDOMRefresh(this);this.listenTo(this,"show",this.onShowCalled)},
getTemplate:function(){return this.getOption("template")},serializeModel:function(a){return a.toJSON.apply(a,j.call(arguments,1))},mixinTemplateHelpers:function(a){var a=a||{},b=this.getOption("templateHelpers");c.isFunction(b)&&(b=b.call(this));return c.extend(a,b)},normalizeUIKeys:function(a){var b=c.result(this,"ui"),e=c.result(this,"_uiBindings");return d.normalizeUIKeys(a,e||b)},configureTriggers:function(){if(this.triggers){var a={},b=this.normalizeUIKeys(c.result(this,"triggers"));c.each(b,
function(b,d){var f=c.isObject(b),g=f?b.event:b;a[d]=function(a){if(a){var c=a.preventDefault,d=a.stopPropagation,n=f?b.stopPropagation:d;(f?b.preventDefault:c)&&c&&c.apply(a);n&&d&&d.apply(a)}this.triggerMethod(g,{view:this,model:this.model,collection:this.collection})}},this);return a}},delegateEvents:function(a){this._delegateDOMEvents(a);this.bindEntityEvents(this.model,this.getOption("modelEvents"));this.bindEntityEvents(this.collection,this.getOption("collectionEvents"));return this},_delegateDOMEvents:function(a){a=
a||this.events;c.isFunction(a)&&(a=a.call(this));var a=this.normalizeUIKeys(a),b={},e=c.result(this,"behaviorEvents")||{},d=this.configureTriggers();c.extend(b,e,a,d);f.View.prototype.delegateEvents.call(this,b)},undelegateEvents:function(){var a=j.call(arguments);f.View.prototype.undelegateEvents.apply(this,a);this.unbindEntityEvents(this.model,this.getOption("modelEvents"));this.unbindEntityEvents(this.collection,this.getOption("collectionEvents"));return this},onShowCalled:function(){},_ensureViewIsIntact:function(){if(this.isDestroyed){var a=
Error("Cannot use a view thats already been destroyed.");a.name="ViewDestroyedError";throw a;}},destroy:function(){if(!this.isDestroyed){var a=j.call(arguments);this.triggerMethod.apply(this,["before:destroy"].concat(a));this.isDestroyed=!0;this.triggerMethod.apply(this,["destroy"].concat(a));this.unbindUIElements();this.remove();return this}},bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var a=c.result(this,"_uiBindings");this.ui={};c.each(c.keys(a),function(b){this.ui[b]=
this.$(a[b])},this)}},unbindUIElements:function(){this.ui&&this._uiBindings&&(c.each(this.ui,function(a,b){delete this.ui[b]},this),this.ui=this._uiBindings,delete this._uiBindings)},triggerMethod:d.triggerMethod,normalizeMethods:d.normalizeMethods,getOption:d.proxyGetOption,bindEntityEvents:d.proxyBindEntityEvents,unbindEntityEvents:d.proxyUnbindEntityEvents});d.ItemView=d.View.extend({constructor:function(){d.View.apply(this,arguments)},serializeData:function(){var a={};this.model?a=c.partial(this.serializeModel,
this.model).apply(this,arguments):this.collection&&(a={items:c.partial(this.serializeCollection,this.collection).apply(this,arguments)});return a},serializeCollection:function(a){return a.toJSON.apply(a,j.call(arguments,1))},render:function(){this._ensureViewIsIntact();this.triggerMethod("before:render",this);this._renderTemplate();this.bindUIElements();this.triggerMethod("render",this);return this},_renderTemplate:function(){var a=this.getTemplate();if(!1!==a){a||i("Cannot render the template since it is null or undefined.",
"UndefinedTemplateError");var b=this.serializeData(),b=this.mixinTemplateHelpers(b),a=d.Renderer.render(a,b,this);this.attachElContent(a);return this}},attachElContent:function(a){this.$el.html(a);return this},destroy:function(){if(!this.isDestroyed)return d.View.prototype.destroy.apply(this,arguments)}});d.CollectionView=d.View.extend({childViewEventPrefix:"childview",constructor:function(a){var b=a||{};this.sort=c.isUndefined(b.sort)?!0:b.sort;this._initChildViewStorage();d.View.apply(this,arguments);
this._initialEvents();this.initRenderBuffer()},initRenderBuffer:function(){this.elBuffer=document.createDocumentFragment();this._bufferedChildren=[]},startBuffering:function(){this.initRenderBuffer();this.isBuffering=!0},endBuffering:function(){this.isBuffering=!1;this._triggerBeforeShowBufferedChildren();this.attachBuffer(this,this.elBuffer);this._triggerShowBufferedChildren();this.initRenderBuffer()},_triggerBeforeShowBufferedChildren:function(){this._isShown&&c.invoke(this._bufferedChildren,"triggerMethod",
"before:show")},_triggerShowBufferedChildren:function(){this._isShown&&(c.each(this._bufferedChildren,function(a){c.isFunction(a.triggerMethod)?a.triggerMethod("show"):d.triggerMethod.call(a,"show")}),this._bufferedChildren=[])},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this._onCollectionAdd),this.listenTo(this.collection,"remove",this._onCollectionRemove),this.listenTo(this.collection,"reset",this.render),this.sort&&this.listenTo(this.collection,"sort",this._sortViews))},
_onCollectionAdd:function(a){this.destroyEmptyView();var b=this.getChildView(a),c=this.collection.indexOf(a);this.addChild(a,b,c)},_onCollectionRemove:function(a){a=this.children.findByModel(a);this.removeChildView(a);this.checkEmpty()},onShowCalled:function(){this.children.each(function(a){c.isFunction(a.triggerMethod)?a.triggerMethod("show"):d.triggerMethod.call(a,"show")})},render:function(){this._ensureViewIsIntact();this.triggerMethod("before:render",this);this._renderChildren();this.triggerMethod("render",
this);return this},resortView:function(){this.render()},_sortViews:function(){this.collection.find(function(a,b){var c=this.children.findByModel(a);return!c||c._index!==b},this)&&this.resortView()},_renderChildren:function(){this.destroyEmptyView();this.destroyChildren();this.isEmpty(this.collection)?this.showEmptyView():(this.triggerMethod("before:render:collection",this),this.startBuffering(),this.showCollection(),this.endBuffering(),this.triggerMethod("render:collection",this))},showCollection:function(){var a;
this.collection.each(function(b,c){a=this.getChildView(b);this.addChild(b,a,c)},this)},showEmptyView:function(){var a=this.getEmptyView();if(a&&!this._showingEmptyView){this.triggerMethod("before:render:empty");this._showingEmptyView=!0;var b=new f.Model;this.addEmptyView(b,a);this.triggerMethod("render:empty")}},destroyEmptyView:function(){this._showingEmptyView&&(this.destroyChildren(),delete this._showingEmptyView)},getEmptyView:function(){return this.getOption("emptyView")},addEmptyView:function(a,
b){var e=this.getOption("emptyViewOptions")||this.getOption("childViewOptions");c.isFunction(e)&&(e=e.call(this));e=this.buildChildView(a,b,e);this._isShown&&this.triggerMethod.call(e,"before:show");this.children.add(e);this.renderChildView(e,-1);this._isShown&&this.triggerMethod.call(e,"show")},getChildView:function(){var a=this.getOption("childView");a||i('A "childView" must be specified',"NoChildViewError");return a},addChild:function(a,b,e){var d=this.getOption("childViewOptions");c.isFunction(d)&&
(d=d.call(this,a,e));a=this.buildChildView(a,b,d);this._updateIndices(a,!0,e);this._addChildView(a,e);return a},_updateIndices:function(a,b,c){this.sort&&(b?(a._index=c,this.children.each(function(b){b._index>=a._index&&b._index++})):this.children.each(function(b){b._index>=a._index&&b._index--}))},_addChildView:function(a,b){this.proxyChildEvents(a);this.triggerMethod("before:add:child",a);this.children.add(a);this.renderChildView(a,b);this._isShown&&!this.isBuffering&&(c.isFunction(a.triggerMethod)?
a.triggerMethod("show"):d.triggerMethod.call(a,"show"));this.triggerMethod("add:child",a)},renderChildView:function(a,b){a.render();this.attachHtml(this,a,b);return a},buildChildView:function(a,b,e){a=c.extend({model:a},e);return new b(a)},removeChildView:function(a){a&&(this.triggerMethod("before:remove:child",a),a.destroy?a.destroy():a.remove&&a.remove(),this.stopListening(a),this.children.remove(a),this.triggerMethod("remove:child",a),this._updateIndices(a,!1));return a},isEmpty:function(){return!this.collection||
0===this.collection.length},checkEmpty:function(){this.isEmpty(this.collection)&&this.showEmptyView()},attachBuffer:function(a,b){a.$el.append(b)},attachHtml:function(a,b,c){a.isBuffering?(a.elBuffer.appendChild(b.el),a._bufferedChildren.push(b)):a._insertBefore(b,c)||a._insertAfter(b)},_insertBefore:function(a,b){var c;this.sort&&b<this.children.length-1&&(c=this.children.find(function(a){return a._index===b+1}));return c?(c.$el.before(a.el),!0):!1},_insertAfter:function(a){this.$el.append(a.el)},
_initChildViewStorage:function(){this.children=new u},destroy:function(){if(!this.isDestroyed)return this.triggerMethod("before:destroy:collection"),this.destroyChildren(),this.triggerMethod("destroy:collection"),d.View.prototype.destroy.apply(this,arguments)},destroyChildren:function(){var a=this.children.map(c.identity);this.children.each(this.removeChildView,this);this.checkEmpty();return a},proxyChildEvents:function(a){var b=this.getOption("childViewEventPrefix");this.listenTo(a,"all",function(){var d=
j.call(arguments),f=d[0],g=this.normalizeMethods(c.result(this,"childEvents"));d[0]=b+":"+f;d.splice(1,0,a);"undefined"!==typeof g&&c.isFunction(g[f])&&g[f].apply(this,d.slice(1));this.triggerMethod.apply(this,d)},this)}});d.CompositeView=d.CollectionView.extend({constructor:function(){d.CollectionView.apply(this,arguments)},_initialEvents:function(){this.once("render",function(){this.collection&&(this.listenTo(this.collection,"add",this._onCollectionAdd),this.listenTo(this.collection,"remove",this._onCollectionRemove),
this.listenTo(this.collection,"reset",this._renderChildren),this.sort&&this.listenTo(this.collection,"sort",this._sortViews))})},getChildView:function(){var a=this.getOption("childView")||this.constructor;a||i('A "childView" must be specified',"NoChildViewError");return a},serializeData:function(){var a={};this.model&&(a=c.partial(this.serializeModel,this.model).apply(this,arguments));return a},render:function(){this._ensureViewIsIntact();this.isRendered=!0;this.resetChildViewContainer();this.triggerMethod("before:render",
this);this._renderTemplate();this._renderChildren();this.triggerMethod("render",this);return this},_renderChildren:function(){this.isRendered&&d.CollectionView.prototype._renderChildren.call(this)},_renderTemplate:function(){var a={},a=this.serializeData(),a=this.mixinTemplateHelpers(a);this.triggerMethod("before:render:template");var b=this.getTemplate(),a=d.Renderer.render(b,a,this);this.attachElContent(a);this.bindUIElements();this.triggerMethod("render:template")},attachElContent:function(a){this.$el.html(a);
return this},attachBuffer:function(a,b){this.getChildViewContainer(a).append(b)},_insertAfter:function(a){this.getChildViewContainer(this).append(a.el)},getChildViewContainer:function(a){if("$childViewContainer"in a)return a.$childViewContainer;var b;(b=d.getOption(a,"childViewContainer"))?(b=c.isFunction(b)?b.call(a):b,b="@"===b.charAt(0)&&a.ui?a.ui[b.substr(4)]:a.$(b),0>=b.length&&i('The specified "childViewContainer" was not found: '+a.childViewContainer,"ChildViewContainerMissingError")):b=a.$el;
return a.$childViewContainer=b},resetChildViewContainer:function(){this.$childViewContainer&&delete this.$childViewContainer}});d.LayoutView=d.ItemView.extend({regionClass:d.Region,constructor:function(a){a=a||{};this._firstRender=!0;this._initializeRegions(a);d.ItemView.call(this,a)},render:function(){this._ensureViewIsIntact();this._firstRender?this._firstRender=!1:this._reInitializeRegions();return d.ItemView.prototype.render.apply(this,arguments)},destroy:function(){if(this.isDestroyed)return this;
this.regionManager.destroy();return d.ItemView.prototype.destroy.apply(this,arguments)},addRegion:function(a,b){this.triggerMethod("before:region:add",a);var c={};c[a]=b;return this._buildRegions(c)[a]},addRegions:function(a){this.regions=c.extend({},this.regions,a);return this._buildRegions(a)},removeRegion:function(a){this.triggerMethod("before:region:remove",a);delete this.regions[a];return this.regionManager.removeRegion(a)},getRegion:function(a){return this.regionManager.get(a)},getRegions:function(){return this.regionManager.getRegions()},
_buildRegions:function(a){var b=this,c={regionClass:this.getOption("regionClass"),parentEl:function(){return b.$el}};return this.regionManager.addRegions(a,c)},_initializeRegions:function(a){var b;this._initRegionManager();b=c.isFunction(this.regions)?this.regions(a):this.regions||{};var d=this.getOption.call(a,"regions");c.isFunction(d)&&(d=d.call(this,a));c.extend(b,d);this.addRegions(b)},_reInitializeRegions:function(){this.regionManager.emptyRegions();this.regionManager.each(function(a){a.reset()})},
getRegionManager:function(){return new d.RegionManager},_initRegionManager:function(){this.regionManager=this.getRegionManager();this.listenTo(this.regionManager,"before:add:region",function(a){this.triggerMethod("before:add:region",a)});this.listenTo(this.regionManager,"add:region",function(a,b){this[a]=b;this.triggerMethod("add:region",a,b)});this.listenTo(this.regionManager,"before:remove:region",function(a){this.triggerMethod("before:remove:region",a)});this.listenTo(this.regionManager,"remove:region",
function(a,b){delete this[a];this.triggerMethod("remove:region",a,b)})}});g=function(a,b){this.view=b;this.defaults=c.result(this,"defaults")||{};this.options=c.extend({},this.defaults,a);this.$=function(){return this.view.$.apply(this.view,arguments)};this.initialize.apply(this,arguments)};c.extend(g.prototype,f.Events,{initialize:function(){},destroy:function(){this.stopListening()},triggerMethod:d.triggerMethod,getOption:d.proxyGetOption,bindEntityEvents:d.proxyBindEntityEvents,unbindEntityEvents:d.proxyUnbindEntityEvents});
g.extend=d.extend;d.Behavior=g;var k=function(a,b){b=k.parseBehaviors(a,b||c.result(a,"behaviors"));k.wrap(a,b,c.keys(q))},q={setElement:function(a,b){a.apply(this,c.tail(arguments,2));c.each(b,function(a){a.$el=this.$el;a.el=this.el},this);return this},destroy:function(a,b){var d=c.tail(arguments,2);a.apply(this,d);c.invoke(b,"destroy",d);return this},bindUIElements:function(a,b){a.apply(this);c.invoke(b,a)},unbindUIElements:function(a,b){a.apply(this);c.invoke(b,a)},triggerMethod:function(a,b){var d=
c.tail(arguments,2);a.apply(this,d);c.each(b,function(b){a.apply(b,d)})},delegateEvents:function(a,b){var e=c.tail(arguments,2);a.apply(this,e);c.each(b,function(a){d.bindEntityEvents(a,this.model,d.getOption(a,"modelEvents"));d.bindEntityEvents(a,this.collection,d.getOption(a,"collectionEvents"))},this);return this},undelegateEvents:function(a,b){var e=c.tail(arguments,2);a.apply(this,e);c.each(b,function(a){d.unbindEntityEvents(a,this.model,d.getOption(a,"modelEvents"));d.unbindEntityEvents(a,this.collection,
d.getOption(a,"collectionEvents"))},this);return this},behaviorEvents:function(a,b){var e={},f=c.result(this,"ui");c.each(b,function(a,b){var g={},h=c.clone(c.result(a,"events"))||{},i=c.result(a,"ui"),i=c.extend({},f,i),h=d.normalizeUIKeys(h,i);c.each(c.keys(h),function(d){var e=Array(b+2).join(" "),e=d+e,d=c.isFunction(h[d])?h[d]:a[h[d]];g[e]=c.bind(d,a)});e=c.extend(e,g)});return e}};c.extend(k,{behaviorsLookup:function(){throw Error("You must define where your behaviors are stored.See https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.behaviors.md#behaviorslookup");
},getBehaviorClass:function(a,b){return a.behaviorClass?a.behaviorClass:c.isFunction(k.behaviorsLookup)?k.behaviorsLookup.apply(this,arguments)[b]:k.behaviorsLookup[b]},parseBehaviors:function(a,b){return c.chain(b).map(function(b,d){var f=new (k.getBehaviorClass(b,d))(b,a),g=k.parseBehaviors(a,c.result(f,"behaviors"));return[f].concat(g)}).flatten().value()},wrap:function(a,b,d){c.each(d,function(d){a[d]=c.partial(q[d],a[d],b)})}});d.Behaviors=k;d.AppRouter=f.Router.extend({constructor:function(a){f.Router.apply(this,
arguments);this.options=a||{};var b=this.getOption("appRoutes"),c=this._getController();this.processAppRoutes(c,b);this.on("route",this._processOnRoute,this)},appRoute:function(a,b){var c=this._getController();this._addAppRoute(c,a,b)},_processOnRoute:function(a,b){var d=c.invert(this.getOption("appRoutes"))[a];if(c.isFunction(this.onRoute))this.onRoute(a,d,b)},processAppRoutes:function(a,b){if(b){var d=c.keys(b).reverse();c.each(d,function(c){this._addAppRoute(a,c,b[c])},this)}},_getController:function(){return this.getOption("controller")},
_addAppRoute:function(a,b,d){var f=a[d];f||i('Method "'+d+'" was not found on the controller');this.route(b,d,c.bind(f,a))},getOption:d.proxyGetOption});d.Application=function(a){this._initializeRegions(a);this._initCallbacks=new d.Callbacks;this.submodules={};c.extend(this,a);this._initChannel()};c.extend(d.Application.prototype,f.Events,{execute:function(){this.commands.execute.apply(this.commands,arguments)},request:function(){return this.reqres.request.apply(this.reqres,arguments)},addInitializer:function(a){this._initCallbacks.add(a)},
start:function(a){this.triggerMethod("before:start",a);this._initCallbacks.run(a,this);this.triggerMethod("start",a)},addRegions:function(a){return this._regionManager.addRegions(a)},emptyRegions:function(){return this._regionManager.emptyRegions()},removeRegion:function(a){return this._regionManager.removeRegion(a)},getRegion:function(a){return this._regionManager.get(a)},getRegions:function(){return this._regionManager.getRegions()},module:function(a,b){var c=d.Module.getClass(b),f=j.call(arguments);
f.unshift(this);return c.create.apply(c,f)},getRegionManager:function(){return new d.RegionManager},_initializeRegions:function(a){var b=c.isFunction(this.regions)?this.regions(a):this.regions||{};this._initRegionManager();var e=d.getOption(a,"regions");c.isFunction(e)&&(e=e.call(this,a));c.extend(b,e);this.addRegions(b);return this},_initRegionManager:function(){this._regionManager=this.getRegionManager();this.listenTo(this._regionManager,"before:add:region",function(a){this.triggerMethod("before:add:region",
a)});this.listenTo(this._regionManager,"add:region",function(a,b){this[a]=b;this.triggerMethod("add:region",a,b)});this.listenTo(this._regionManager,"before:remove:region",function(a){this.triggerMethod("before:remove:region",a)});this.listenTo(this._regionManager,"remove:region",function(a,b){delete this[a];this.triggerMethod("remove:region",a,b)})},_initChannel:function(){this.channelName=c.result(this,"channelName")||"global";this.channel=c.result(this,"channel")||v.radio.channel(this.channelName);
this.vent=c.result(this,"vent")||this.channel.vent;this.commands=c.result(this,"commands")||this.channel.commands;this.reqres=c.result(this,"reqres")||this.channel.reqres},triggerMethod:d.triggerMethod,getOption:d.proxyGetOption});d.Application.extend=d.extend;d.Module=function(a,b,d){this.moduleName=a;this.options=c.extend({},this.options,d);this.initialize=d.initialize||this.initialize;this.submodules={};this._setupInitializersAndFinalizers();this.app=b;this.startWithParent=!0;c.isFunction(this.initialize)&&
this.initialize(a,b,this.options)};d.Module.extend=d.extend;c.extend(d.Module.prototype,f.Events,{initialize:function(){},addInitializer:function(a){this._initializerCallbacks.add(a)},addFinalizer:function(a){this._finalizerCallbacks.add(a)},start:function(a){this._isInitialized||(c.each(this.submodules,function(b){b.startWithParent&&b.start(a)}),this.triggerMethod("before:start",a),this._initializerCallbacks.run(a,this),this._isInitialized=!0,this.triggerMethod("start",a))},stop:function(){this._isInitialized&&
(this._isInitialized=!1,this.triggerMethod("before:stop"),c.each(this.submodules,function(a){a.stop()}),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),this.triggerMethod("stop"))},addDefinition:function(a,b){this._runModuleDefinition(a,b)},_runModuleDefinition:function(a,b){if(a){var e=c.flatten([this,this.app,f,d,f.$,c,b]);a.apply(this,e)}},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new d.Callbacks;this._finalizerCallbacks=
new d.Callbacks},triggerMethod:d.triggerMethod});c.extend(d.Module,{create:function(a,b,d){var f=a,g=j.call(arguments);g.splice(0,3);var b=b.split("."),h=[];h[b.length-1]=d;c.each(b,function(b,c){var i=f;f=this._getModule(i,b,a,d);this._addModuleDefinition(i,f,h[c],g)},this);return f},_getModule:function(a,b,d,f){var g=c.extend({},f),f=this.getClass(f),h=a[b];h||(h=new f(b,d,g),a[b]=h,a.submodules[b]=h);return h},getClass:function(a){var b=d.Module;return!a?b:a.prototype instanceof b?a:a.moduleClass||
b},_addModuleDefinition:function(a,b,c,d){var f=this._getDefine(c),c=this._getStartWithParent(c,b);f&&b.addDefinition(f,d);this._addStartWithParent(a,b,c)},_getStartWithParent:function(a,b){var e;return c.isFunction(a)&&a.prototype instanceof d.Module?(e=b.constructor.prototype.startWithParent,c.isUndefined(e)?!0:e):c.isObject(a)?(e=a.startWithParent,c.isUndefined(e)?!0:e):!0},_getDefine:function(a){return c.isFunction(a)&&!(a.prototype instanceof d.Module)?a:c.isObject(a)?a.define:null},_addStartWithParent:function(a,
b,c){b.startWithParent=b.startWithParent&&c;b.startWithParent&&!b.startWithParentIsConfigured&&(b.startWithParentIsConfigured=!0,a.addInitializer(function(a){b.startWithParent&&b.start(a)}))}});this.Marionette=d});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:marionette', location = 'jira-projects-module/sidebar/lib/backbone.marionette.adapter.js' */
define("jira/projects/libs/marionette",["backbone","underscore","atlassian/libs/factories/marionette-2.1.0"],function(e,r,t){"use strict";return t(r,e)}),AJS.namespace("JIRA.Projects.Libs.Marionette",null,require("jira/projects/libs/marionette"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:marionette', location = 'jira-projects-module/sidebar/lib/backbone.marionette.mixins.js' */
!function(){"use strict";function e(e,t){var i=this,r=_.defaults({},t||{},{isPrevented:!1,emitter:this,preventDefault:function(){this.isPrevented=!0,i.trigger(e+":prevented",this)}});return this.trigger(e,r),r}function t(e,t){var i=this.triggerPreventable(e,t);i.isPrevented&&t.preventDefault()}_.extend(JIRA.Projects.Libs.Marionette.View.prototype,{unwrapTemplate:function(){if(this.$el.parent().length){var e=this.$el.children();this.$el.replaceWith(e),this.setElement(e)}else this.setElement(this.$el.children())},triggerPreventable:e,retriggerPreventable:t}),_.extend(JIRA.Projects.Libs.Marionette.Controller.prototype,{triggerPreventable:e,retriggerPreventable:t}),JIRA.Projects.Libs.Marionette.ViewManager=JIRA.Projects.Libs.Marionette.Controller.extend({constructor:function(){JIRA.Projects.Libs.Marionette.Controller.apply(this,arguments),this.views={}},hideView:function(e){var t=this.views[e];t&&(this.stopListening(t),t.isDestroyed||t.destroy(),delete this.views[e])},showView:function(e,t){var i=this.buildView(e,t);i.render()},buildView:function(e,t){var i=this.views[e];return i||(i=t.call(this),this.listenTo(i,"destroy",function(){this.hideView(e)}),this.views[e]=i),i},getView:function(e){return this.views[e]}})}();;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:ajs-helper', location = 'jira-issue-navigator-components-module/util/ajshelper.js' */
define("jira/components/utils/ajshelper",[],function(){"use strict";function e(){return function(e,n){if(n){var r=n.data||{};r.searchSessionId=r.searchSessionId||t.Meta.get("search-session-id"),r.searchObjectId=r.searchObjectId||t.Meta.get("search-object-id"),r.searchContainerId=r.searchContainerId||t.Meta.get("search-container-id"),r.searchContentType=r.searchContentType||t.Meta.get("search-content-type"),n.data=r}t.trigger(e,n)}}var t=window.AJS;return{escapeHtml:t.escapeHtml.bind(t),LEFT:t.LEFT,Templates:t.Templates,HIDE_REASON:t.HIDE_REASON,trigger:e(),log:t.log.bind(t),extractBodyFromResponse:t.extractBodyFromResponse,whenIType:function(){return t.whenIType},activeShortcuts:function(){return t.activeShortcuts}}});
//# sourceMappingURL=ajshelper-min.js.map
;
;
/* module-key = 'com.atlassian.plugin.jslibs:underscore-1.5.2', location = 'libs/underscore/1.5.2/underscore-1.5.2.js' */
(function(l){define("atlassian/libs/underscore-1.5.2",function(){var o={};l.call(o);return"undefined"!==typeof exports?"undefined"!==typeof module&&module.exports?module.exports.noConflict():exports.noConflict():o._.noConflict()})})(function(){(function(){var l=this,o=l._,p={},k=Array.prototype,q=Object.prototype,t=k.push,i=k.slice,r=k.concat,m=q.toString,L=q.hasOwnProperty,A=k.forEach,B=k.map,C=k.reduce,D=k.reduceRight,E=k.filter,F=k.every,G=k.some,s=k.indexOf,H=k.lastIndexOf,q=Array.isArray,M=Object.keys,
u=Function.prototype.bind,b=function(a){if(a instanceof b)return a;if(!(this instanceof b))return new b(a);this._wrapped=a};"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=b),exports._=b):l._=b;b.VERSION="1.5.2";var j=b.each=b.forEach=function(a,c,d){if(a!=null)if(A&&a.forEach===A)a.forEach(c,d);else if(a.length===+a.length)for(var e=0,f=a.length;e<f;e++){if(c.call(d,a[e],e,a)===p)break}else for(var g=b.keys(a),e=0,f=g.length;e<f;e++)if(c.call(d,
a[g[e]],g[e],a)===p)break};b.map=b.collect=function(a,c,b){var e=[];if(a==null)return e;if(B&&a.map===B)return a.map(c,b);j(a,function(a,g,h){e.push(c.call(b,a,g,h))});return e};b.reduce=b.foldl=b.inject=function(a,c,d,e){var f=arguments.length>2;a==null&&(a=[]);if(C&&a.reduce===C){e&&(c=b.bind(c,e));return f?a.reduce(c,d):a.reduce(c)}j(a,function(a,b,N){if(f)d=c.call(e,d,a,b,N);else{d=a;f=true}});if(!f)throw new TypeError("Reduce of empty array with no initial value");return d};b.reduceRight=b.foldr=
function(a,c,d,e){var f=arguments.length>2;a==null&&(a=[]);if(D&&a.reduceRight===D){e&&(c=b.bind(c,e));return f?a.reduceRight(c,d):a.reduceRight(c)}var g=a.length;if(g!==+g)var h=b.keys(a),g=h.length;j(a,function(b,i,j){i=h?h[--g]:--g;if(f)d=c.call(e,d,a[i],i,j);else{d=a[i];f=true}});if(!f)throw new TypeError("Reduce of empty array with no initial value");return d};b.find=b.detect=function(a,c,b){var e;I(a,function(a,g,h){if(c.call(b,a,g,h)){e=a;return true}});return e};b.filter=b.select=function(a,
c,b){var e=[];if(a==null)return e;if(E&&a.filter===E)return a.filter(c,b);j(a,function(a,g,h){c.call(b,a,g,h)&&e.push(a)});return e};b.reject=function(a,c,d){return b.filter(a,function(a,b,g){return!c.call(d,a,b,g)},d)};b.every=b.all=function(a,c,d){c||(c=b.identity);var e=true;if(a==null)return e;if(F&&a.every===F)return a.every(c,d);j(a,function(a,b,h){if(!(e=e&&c.call(d,a,b,h)))return p});return!!e};var I=b.some=b.any=function(a,c,d){c||(c=b.identity);var e=false;if(a==null)return e;if(G&&a.some===
G)return a.some(c,d);j(a,function(a,b,h){if(e||(e=c.call(d,a,b,h)))return p});return!!e};b.contains=b.include=function(a,c){return a==null?false:s&&a.indexOf===s?a.indexOf(c)!=-1:I(a,function(a){return a===c})};b.invoke=function(a,c){var d=i.call(arguments,2),e=b.isFunction(c);return b.map(a,function(a){return(e?c:a[c]).apply(a,d)})};b.pluck=function(a,c){return b.map(a,function(a){return a[c]})};b.where=function(a,c,d){return b.isEmpty(c)?d?void 0:[]:b[d?"find":"filter"](a,function(a){for(var b in c)if(c[b]!==
a[b])return false;return true})};b.findWhere=function(a,c){return b.where(a,c,true)};b.max=function(a,c,d){if(!c&&b.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.max.apply(Math,a);if(!c&&b.isEmpty(a))return-Infinity;var e={computed:-Infinity,value:-Infinity};j(a,function(a,b,h){b=c?c.call(d,a,b,h):a;b>e.computed&&(e={value:a,computed:b})});return e.value};b.min=function(a,c,d){if(!c&&b.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.min.apply(Math,a);if(!c&&b.isEmpty(a))return Infinity;
var e={computed:Infinity,value:Infinity};j(a,function(a,b,h){b=c?c.call(d,a,b,h):a;b<e.computed&&(e={value:a,computed:b})});return e.value};b.shuffle=function(a){var c,d=0,e=[];j(a,function(a){c=b.random(d++);e[d-1]=e[c];e[c]=a});return e};b.sample=function(a,c,d){return arguments.length<2||d?a[b.random(a.length-1)]:b.shuffle(a).slice(0,Math.max(0,c))};var v=function(a){return b.isFunction(a)?a:function(c){return c[a]}};b.sortBy=function(a,c,d){var e=v(c);return b.pluck(b.map(a,function(a,c,b){return{value:a,
index:c,criteria:e.call(d,a,c,b)}}).sort(function(a,c){var b=a.criteria,d=c.criteria;if(b!==d){if(b>d||b===void 0)return 1;if(b<d||d===void 0)return-1}return a.index-c.index}),"value")};var w=function(a){return function(c,d,e){var f={},g=d==null?b.identity:v(d);j(c,function(b,d){var i=g.call(e,b,d,c);a(f,i,b)});return f}};b.groupBy=w(function(a,c,d){(b.has(a,c)?a[c]:a[c]=[]).push(d)});b.indexBy=w(function(a,c,b){a[c]=b});b.countBy=w(function(a,c){b.has(a,c)?a[c]++:a[c]=1});b.sortedIndex=function(a,
c,d,e){for(var d=d==null?b.identity:v(d),c=d.call(e,c),f=0,g=a.length;f<g;){var h=f+g>>>1;d.call(e,a[h])<c?f=h+1:g=h}return f};b.toArray=function(a){return!a?[]:b.isArray(a)?i.call(a):a.length===+a.length?b.map(a,b.identity):b.values(a)};b.size=function(a){return a==null?0:a.length===+a.length?a.length:b.keys(a).length};b.first=b.head=b.take=function(a,c,b){return a==null?void 0:c==null||b?a[0]:i.call(a,0,c)};b.initial=function(a,c,b){return i.call(a,0,a.length-(c==null||b?1:c))};b.last=function(a,
c,b){return a==null?void 0:c==null||b?a[a.length-1]:i.call(a,Math.max(a.length-c,0))};b.rest=b.tail=b.drop=function(a,b,d){return i.call(a,b==null||d?1:b)};b.compact=function(a){return b.filter(a,b.identity)};var J=function(a,c,d){if(c&&b.every(a,b.isArray))return r.apply(d,a);j(a,function(a){b.isArray(a)||b.isArguments(a)?c?t.apply(d,a):J(a,c,d):d.push(a)});return d};b.flatten=function(a,b){return J(a,b,[])};b.without=function(a){return b.difference(a,i.call(arguments,1))};b.uniq=b.unique=function(a,
c,d,e){if(b.isFunction(c)){e=d;d=c;c=false}var d=d?b.map(a,d,e):a,f=[],g=[];j(d,function(d,e){if(c?!e||g[g.length-1]!==d:!b.contains(g,d)){g.push(d);f.push(a[e])}});return f};b.union=function(){return b.uniq(b.flatten(arguments,true))};b.intersection=function(a){var c=i.call(arguments,1);return b.filter(b.uniq(a),function(a){return b.every(c,function(c){return b.indexOf(c,a)>=0})})};b.difference=function(a){var c=r.apply(k,i.call(arguments,1));return b.filter(a,function(a){return!b.contains(c,a)})};
b.zip=function(){for(var a=b.max(b.pluck(arguments,"length").concat(0)),c=Array(a),d=0;d<a;d++)c[d]=b.pluck(arguments,""+d);return c};b.object=function(a,b){if(a==null)return{};for(var d={},e=0,f=a.length;e<f;e++)b?d[a[e]]=b[e]:d[a[e][0]]=a[e][1];return d};b.indexOf=function(a,c,d){if(a==null)return-1;var e=0,f=a.length;if(d)if(typeof d=="number")e=d<0?Math.max(0,f+d):d;else{e=b.sortedIndex(a,c);return a[e]===c?e:-1}if(s&&a.indexOf===s)return a.indexOf(c,d);for(;e<f;e++)if(a[e]===c)return e;return-1};
b.lastIndexOf=function(a,b,d){if(a==null)return-1;var e=d!=null;if(H&&a.lastIndexOf===H)return e?a.lastIndexOf(b,d):a.lastIndexOf(b);for(d=e?d:a.length;d--;)if(a[d]===b)return d;return-1};b.range=function(a,b,d){if(arguments.length<=1){b=a||0;a=0}for(var d=arguments[2]||1,e=Math.max(Math.ceil((b-a)/d),0),f=0,g=Array(e);f<e;){g[f++]=a;a=a+d}return g};var x=function(){};b.bind=function(a,c){var d,e;if(u&&a.bind===u)return u.apply(a,i.call(arguments,1));if(!b.isFunction(a))throw new TypeError;d=i.call(arguments,
2);return e=function(){if(!(this instanceof e))return a.apply(c,d.concat(i.call(arguments)));x.prototype=a.prototype;var b=new x;x.prototype=null;var g=a.apply(b,d.concat(i.call(arguments)));return Object(g)===g?g:b}};b.partial=function(a){var b=i.call(arguments,1);return function(){return a.apply(this,b.concat(i.call(arguments)))}};b.bindAll=function(a){var c=i.call(arguments,1);if(c.length===0)throw Error("bindAll must be passed function names");j(c,function(c){a[c]=b.bind(a[c],a)});return a};b.memoize=
function(a,c){var d={};c||(c=b.identity);return function(){var e=c.apply(this,arguments);return b.has(d,e)?d[e]:d[e]=a.apply(this,arguments)}};b.delay=function(a,b){var d=i.call(arguments,2);return setTimeout(function(){return a.apply(null,d)},b)};b.defer=function(a){return b.delay.apply(b,[a,1].concat(i.call(arguments,1)))};b.throttle=function(a,b,d){var e,f,g,h=null,i=0;d||(d={});var j=function(){i=d.leading===false?0:new Date;h=null;g=a.apply(e,f)};return function(){var k=new Date;!i&&d.leading===
false&&(i=k);var K=b-(k-i);e=this;f=arguments;if(K<=0){clearTimeout(h);h=null;i=k;g=a.apply(e,f)}else!h&&d.trailing!==false&&(h=setTimeout(j,K));return g}};b.debounce=function(a,b,d){var e,f,g,h,i;return function(){g=this;f=arguments;h=new Date;var j=function(){var k=new Date-h;if(k<b)e=setTimeout(j,b-k);else{e=null;d||(i=a.apply(g,f))}},k=d&&!e;e||(e=setTimeout(j,b));k&&(i=a.apply(g,f));return i}};b.once=function(a){var b=false,d;return function(){if(b)return d;b=true;d=a.apply(this,arguments);a=
null;return d}};b.wrap=function(a,b){return function(){var d=[a];t.apply(d,arguments);return b.apply(this,d)}};b.compose=function(){var a=arguments;return function(){for(var b=arguments,d=a.length-1;d>=0;d--)b=[a[d].apply(this,b)];return b[0]}};b.after=function(a,b){return function(){if(--a<1)return b.apply(this,arguments)}};b.keys=M||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var c=[],d;for(d in a)b.has(a,d)&&c.push(d);return c};b.values=function(a){for(var c=b.keys(a),d=
c.length,e=Array(d),f=0;f<d;f++)e[f]=a[c[f]];return e};b.pairs=function(a){for(var c=b.keys(a),d=c.length,e=Array(d),f=0;f<d;f++)e[f]=[c[f],a[c[f]]];return e};b.invert=function(a){for(var c={},d=b.keys(a),e=0,f=d.length;e<f;e++)c[a[d[e]]]=d[e];return c};b.functions=b.methods=function(a){var c=[],d;for(d in a)b.isFunction(a[d])&&c.push(d);return c.sort()};b.extend=function(a){j(i.call(arguments,1),function(b){if(b)for(var d in b)a[d]=b[d]});return a};b.pick=function(a){var b={},d=r.apply(k,i.call(arguments,
1));j(d,function(d){d in a&&(b[d]=a[d])});return b};b.omit=function(a){var c={},d=r.apply(k,i.call(arguments,1)),e;for(e in a)b.contains(d,e)||(c[e]=a[e]);return c};b.defaults=function(a){j(i.call(arguments,1),function(b){if(b)for(var d in b)a[d]===void 0&&(a[d]=b[d])});return a};b.clone=function(a){return!b.isObject(a)?a:b.isArray(a)?a.slice():b.extend({},a)};b.tap=function(a,b){b(a);return a};var y=function(a,c,d,e){if(a===c)return a!==0||1/a==1/c;if(a==null||c==null)return a===c;if(a instanceof
b)a=a._wrapped;if(c instanceof b)c=c._wrapped;var f=m.call(a);if(f!=m.call(c))return false;switch(f){case "[object String]":return a==String(c);case "[object Number]":return a!=+a?c!=+c:a==0?1/a==1/c:a==+c;case "[object Date]":case "[object Boolean]":return+a==+c;case "[object RegExp]":return a.source==c.source&&a.global==c.global&&a.multiline==c.multiline&&a.ignoreCase==c.ignoreCase}if(typeof a!="object"||typeof c!="object")return false;for(var g=d.length;g--;)if(d[g]==a)return e[g]==c;var g=a.constructor,
h=c.constructor;if(g!==h&&(!b.isFunction(g)||!(g instanceof g&&b.isFunction(h)&&h instanceof h)))return false;d.push(a);e.push(c);g=0;h=true;if(f=="[object Array]"){g=a.length;if(h=g==c.length)for(;g--;)if(!(h=y(a[g],c[g],d,e)))break}else{for(var i in a)if(b.has(a,i)){g++;if(!(h=b.has(c,i)&&y(a[i],c[i],d,e)))break}if(h){for(i in c)if(b.has(c,i)&&!g--)break;h=!g}}d.pop();e.pop();return h};b.isEqual=function(a,b){return y(a,b,[],[])};b.isEmpty=function(a){if(a==null)return true;if(b.isArray(a)||b.isString(a))return a.length===
0;for(var c in a)if(b.has(a,c))return false;return true};b.isElement=function(a){return!!(a&&a.nodeType===1)};b.isArray=q||function(a){return m.call(a)=="[object Array]"};b.isObject=function(a){return a===Object(a)};j("Arguments Function String Number Date RegExp".split(" "),function(a){b["is"+a]=function(b){return m.call(b)=="[object "+a+"]"}});b.isArguments(arguments)||(b.isArguments=function(a){return!(!a||!b.has(a,"callee"))});"function"!==typeof/./&&(b.isFunction=function(a){return typeof a===
"function"});b.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))};b.isNaN=function(a){return b.isNumber(a)&&a!=+a};b.isBoolean=function(a){return a===true||a===false||m.call(a)=="[object Boolean]"};b.isNull=function(a){return a===null};b.isUndefined=function(a){return a===void 0};b.has=function(a,b){return L.call(a,b)};b.noConflict=function(){l._=o;return this};b.identity=function(a){return a};b.times=function(a,b,d){for(var e=Array(Math.max(0,a)),f=0;f<a;f++)e[f]=b.call(d,f);return e};
b.random=function(a,b){if(b==null){b=a;a=0}return a+Math.floor(Math.random()*(b-a+1))};var n={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};n.unescape=b.invert(n.escape);var O={escape:RegExp("["+b.keys(n.escape).join("")+"]","g"),unescape:RegExp("("+b.keys(n.unescape).join("|")+")","g")};b.each(["escape","unescape"],function(a){b[a]=function(b){return b==null?"":(""+b).replace(O[a],function(b){return n[a][b]})}});b.result=function(a,c){if(a!=null){var d=a[c];return b.isFunction(d)?
d.call(a):d}};b.mixin=function(a){j(b.functions(a),function(c){var d=b[c]=a[c];b.prototype[c]=function(){var a=[this._wrapped];t.apply(a,arguments);a=d.apply(b,a);return this._chain?b(a).chain():a}})};var P=0;b.uniqueId=function(a){var b=++P+"";return a?a+b:b};b.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var z=/(.)^/,Q={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},R=/\\|'|\r|\n|\t|\u2028|\u2029/g;b.template=
function(a,c,d){var e,d=b.defaults({},d,b.templateSettings),f=RegExp([(d.escape||z).source,(d.interpolate||z).source,(d.evaluate||z).source].join("|")+"|$","g"),g=0,h="__p+='";a.replace(f,function(b,c,d,e,f){h=h+a.slice(g,f).replace(R,function(a){return"\\"+Q[a]});c&&(h=h+("'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'"));d&&(h=h+("'+\n((__t=("+d+"))==null?'':__t)+\n'"));e&&(h=h+("';\n"+e+"\n__p+='"));g=f+b.length;return b});h=h+"';\n";d.variable||(h="with(obj||{}){\n"+h+"}\n");h="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+
h+"return __p;\n";try{e=new Function(d.variable||"obj","_",h)}catch(i){i.source=h;throw i;}if(c)return e(c,b);c=function(a){return e.call(this,a,b)};c.source="function("+(d.variable||"obj")+"){\n"+h+"}";return c};b.chain=function(a){return b(a).chain()};b.mixin(b);j("pop push reverse shift sort splice unshift".split(" "),function(a){var c=k[a];b.prototype[a]=function(){var d=this._wrapped;c.apply(d,arguments);(a=="shift"||a=="splice")&&d.length===0&&delete d[0];return this._chain?b(d).chain():d}});
j(["concat","join","slice"],function(a){var c=k[a];b.prototype[a]=function(){var a=c.apply(this._wrapped,arguments);return this._chain?b(a).chain():a}});b.extend(b.prototype,{chain:function(){this._chain=true;return this},value:function(){return this._wrapped}})}).call(this)});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:underscore', location = 'jira-issue-navigator-components-module/libs/underscore.js' */
define("jira/components/libs/underscore",["require"],function(e){"use strict";return e("atlassian/libs/underscore-1.5.2")});
//# sourceMappingURL=underscore-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:analytics-tracker', location = 'jira-issue-navigator-components-module/analytics-tracker/tracker.js' */
define("jira/components/analytics-tracker/tracker",["jira/components/libs/underscore","jira/issue","jira/components/utils/ajshelper","jquery","jira/customevents/trigger-custom-event"],function(e,t,n,r,i){"use strict";function o(){if(!h)try{h=require("jira/api/projects")}catch(e){h=null}}function a(){return g?g:(o(),h?h.getCurrentProjectId():void 0)}function c(){return j?j:(o(),h?h.getCurrentProjectType():void 0)}function s(){return k?k:t?t.getIssueId():void 0}function u(e){if(e.attr("class")||e.attr("id"))return e;var t=e.parent().closest("[class], [id]");return t.length?t:e}function d(e){var t=r(e.target).closest(p),n=u(t);v("viewissue","generic-action",{className:n.attr("class")||"no-element-className",id:n.attr("id")||"no-element-id"}),w=!1}function l(){r(".issue-container").off("click",p,d).on("click",p,d),r("#create_link").off("click",d).on("click",d),y&&clearTimeout(y),y=setTimeout(function(){w&&v("viewissue","inactive-timeout")},m)}function v(t,r,o){var u=f+"."+t+"."+r;I=I||Math.round(performance.now());var d=Math.round(performance.now())-I;o=o||{};var l={projectId:o.projectId||a(),projectType:o.projectType||c(),issueId:o.issueId||s(),userAgent:window.navigator.userAgent,timeSinceIssueLoaded:d},v=e.extend(l,o);n.trigger("analyticsEvent",{name:u,data:v}),i.trigger("legacy-gas-v2-event",u,v)}var f="jira.platform.fe.web",m=3e5,p="a, .editable-field, button",g=void 0,j=void 0,k=void 0,w=void 0,y=void 0,I=void 0,h=void 0;return{initialize:function(e,t,n){g=e,j=t,k=n,w=!0,I=Math.round(performance.now()),l()},trackEvent:v}});
//# sourceMappingURL=tracker-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-component', location = 'jira-projects-module/sidebar/component/component.js' */
define("jira/projects/sidebar/component",["underscore","jira/projects/data/WRM"],function(e,t){"use strict";var r=Boolean(t.data.claim("is-global-sidebar"));return JIRA.Projects.Libs.Marionette.CompositeView.extend({childEvents:{"before:select":function(e,t){this.hasASelectedItem()||(t.isInitial=!0),this.retriggerPreventable("before:select",t),t.isPrevented||this.deselectAllGroups()},select:function(e,t){this.trigger("select",t)},"before:deselect":function(e,t){this.retriggerPreventable("before:deselect",t)},deselect:function(e,t){this.trigger("deselect",t)},"before:navigate":function(e,t){this.retriggerPreventable("before:navigate",t)},"before:navigate:prevented":function(e,t){this.trigger("before:navigate:prevented",t)}},events:{"click .js-nav-project-title-link":"_clickProjectName","click .js-nav-project-avatar-link":"_clickProjectAvatar","click a[data-link-id='com.atlassian.jira.jira-projects-plugin:summary-page']":"_clickProjectSummary"},initialize:function(){this.render({force:!0});try{this.tracker=require("jira/components/analytics-tracker/tracker")}catch(e){}this.bindUIElements();var t=AJS.sidebar(".aui-sidebar");e.each(["expand-end","collapse-end","collapse-start"],function(e){t.on(e,function(){this.trigger(e)}.bind(this))}.bind(this))},render:function(t){t=e.defaults({},t,{force:!1});var r="el"in t,i=r||t.force===!0,n=this.children.length>0;if(!i)return this;var a=this.triggerPreventable("before:render");if(a.isPrevented)return this;if(n){var c=this.triggerPreventable("before:detach");if(c.isPrevented)return this;this.destroyChildren({checkEmpty:!1}),this.trigger("detach")}if(r){var o=jQuery(t.el);this.$el.replaceWith(o),this.setElement(o)}return this.$(".aui-sidebar-group").each(e.bind(function(e,t){var r=new JIRA.Projects.Sidebar.Component.NavigationGroup({el:t}),i=!!this.getGroup(r.id);i&&AJS.warn&&AJS.warn('Duplicated IDs detected. There are more than one NavigationGroup with id data-id="'+r.id+'"'),this.proxyChildEvents(r),this.children.add(r,r.id)},this)),this.trigger("render"),this},reflow:function(){AJS.sidebar(".aui-sidebar").reflow()},isCollapsed:function(){return AJS.sidebar(".aui-sidebar").isCollapsed()},deselectAllGroups:function(){this.children.call("deselect")},on:function(){return JIRA.Projects.Libs.Marionette.CompositeView.prototype.on.apply(this,arguments)},off:function(){return JIRA.Projects.Libs.Marionette.CompositeView.prototype.off.apply(this,arguments)},replaceGroup:function(e,t){var r=this.getGroup(e);r.$el.replaceWith(t.$el),t.cid=r.cid,this.children.remove(r),this.children.add(t,t.id)},getGroup:function(e){return this.children.findByCustom(e)},getGroupAt:function(e){return this.children.findByIndex(e)},getItem:function(e){return this.getDefaultGroup().getItem(e)},getElement:function(){return this._trackDeprecated("getElement"),this.el},getDefaultGroup:function(){return this.getGroup("sidebar-navigation-panel")},isProjectSidebar:function(){return!r},getSelectedScopeFilterId:function(){return this._trackDeprecated("getSelectedScopeFilterId"),this.$(".scope-filter a.scope-filter-trigger").attr("data-scope-filter-id")},setReportsItemLink:function(e){this._trackDeprecated("setReportsItemLink");var t=this.getGroup("sidebar-navigation-panel"),r=t.getItem("com.atlassian.jira.jira-projects-plugin:report-page");"undefined"==typeof r&&(r=t.getItem("com.pyxis.greenhopper.jira:global-sidebar-report")),r&&r.attr("href",e)},getAUISidebar:function(){return this._trackDeprecated("getAUISidebar"),AJS.sidebar(".aui-sidebar")},getContentContainer:function(){return this._trackDeprecated("getContentContainer"),this.$(".aui-sidebar-body .sidebar-content-container")},getSelectedNavigationItem:function(){return this.getDefaultGroup().getSelectedNavigationItem()},hasASelectedItem:function(){return this.getDefaultGroup().hasASelectedItem()},dim:function(){this._trackDeprecated("dim"),this.$el.attr({dimmed:"","aria-hidden":"true"})},undim:function(){this._trackDeprecated("undim"),this.$el.removeAttr("dimmed"),this.$el.removeAttr("aria-hidden")},_clickProjectName:function(){"undefined"!=typeof this.tracker&&this.tracker.trackEvent("project.sidebar","click.projectName")},_clickProjectAvatar:function(){"undefined"!=typeof this.tracker&&this.tracker.trackEvent("project.sidebar","click.avatar")},_clickProjectSummary:function(){"undefined"!=typeof this.tracker&&this.tracker.trackEvent("project.sidebar","click.projectSummary")},_trackDeprecated:function(e){AJS.warn("The Sidebar method "+e+" is going to be deprecated"),AJS.trigger("analyticsEvent",{name:"jira.project.centric.navigation.sidebar.method.deprecated",data:{method:e}})}})}),AJS.namespace("JIRA.Projects.Sidebar.Component",null,require("jira/projects/sidebar/component"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-component', location = 'jira-projects-module/sidebar/component/navigation-item.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.Sidebar.Component.NavigationItem"),JIRA.Projects.Sidebar.Component.NavigationItem=JIRA.Projects.Libs.Marionette.CompositeView.extend({ui:{link:"a.aui-nav-item"},events:{'simpleClick @ui.link:not([target="_blank"])':function(e){e.preventDefault(),this.navigate()}},initialize:function(){this.id=this.$el.find(">a").attr("data-link-id"),this.bindUIElements()},onDestroy:function(){this.unbind()},getElement:function(){return this._trackDeprecated("getElement"),this.el},navigate:function(){if(this.select()){var e=this.triggerPreventable("before:navigate");if(e.isPrevented)return!1;var t=this.ui.link.attr("href");return t&&require("jira/util/browser").reloadViaWindowLocation(t),!0}},select:function(){var e=this.triggerPreventable("before:select");return!e.isPrevented&&(this.$el.addClass("aui-nav-selected"),this.trigger("select",e),!0)},deselect:function(){if(!this.isSelected())return!0;var e=this.triggerPreventable("before:deselect");return!e.isPrevented&&(this.$el.removeClass("aui-nav-selected"),this.$el.find("a").blur(),this.trigger("deselect",e),!0)},isSelected:function(){return this.$el.hasClass("aui-nav-selected")},removeBadge:function(){this.$el.find(".aui-badge").remove()},getId:function(){return this.id},getSelectedNavigationItem:function(){if(this.isSelected())return this},hasASelectedItem:function(){return this.isSelected()},attr:function(e,t){var i=this.ui.link.attr(e,t);return t?i:this},_trackDeprecated:function(e){AJS.warn("The Sidebar item method "+e+" is going to be deprecated"),AJS.trigger("analyticsEvent",{name:"jira.project.centric.navigation.sidebar.item.method.deprecated",data:{method:e}})}})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-component', location = 'jira-projects-module/sidebar/component/navigation-group.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.Sidebar.Component.NavigationGroup"),JIRA.Projects.Sidebar.Component.NavigationGroup=JIRA.Projects.Libs.Marionette.CompositeView.extend({childEvents:{"before:select":function(e,t){if(this.retriggerPreventable("before:select",t),!t.isPrevented){var i=this.deselect();i||t.preventDefault()}},select:function(e,t){this.trigger("select",t)},"before:deselect":function(e,t){this.retriggerPreventable("before:deselect",t)},deselect:function(e,t){this.trigger("deselect",t)},"before:navigate":function(e,t){this.retriggerPreventable("before:navigate",t)},"before:navigate:prevented":function(e,t){this.trigger("before:navigate:prevented",t)}},initialize:function(){this.id=this.$el.attr("data-id"),this.$(">ul>li").each(_.bind(function(e,t){var i=JIRA.Projects.Sidebar.Component.NavigationGroup.build(t),n=!!this.getItem(i.id);n&&AJS.warn&&AJS.warn("Duplicated IDs detected. There are more than one NavigationItem with id data-link-id='"+i.id+"'"),this.proxyChildEvents(i),this.children.add(i,i.id)},this))},onDestroy:function(){this.unbind()},getElement:function(){return this._trackDeprecated("getElement"),this.el},deselect:function(){var e=this.triggerPreventable("before:deselect");if(e.isPrevented)return!1;var t=!0;return this.children.each(function(e){t=e.deselect()&&t}),t},getItem:function(e){return this.children.findByCustom(e)},getItemAt:function(e){return this.children.findByIndex(e)},getSelectedNavigationItem:function(){var e=this.children.find(function(e){return e.hasASelectedItem()});if(e)return e.getSelectedNavigationItem()},hasASelectedItem:function(){return this.children.any(function(e){return e.hasASelectedItem()})},_trackDeprecated:function(e){AJS.warn("The Sidebar group method "+e+" is going to be deprecated"),AJS.trigger("analyticsEvent",{name:"jira.project.centric.navigation.sidebar.group.method.deprecated",data:{method:e}})}},{build:function(e){var t;return t=AJS.$(e).find("ul").length?new JIRA.Projects.Sidebar.Component.NavigationSubgroup({el:e}):new JIRA.Projects.Sidebar.Component.NavigationItem({el:e})}})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-component', location = 'jira-projects-module/sidebar/component/navigation-subgroup.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.Sidebar.Component.NavigationSubgroup"),JIRA.Projects.Sidebar.Component.NavigationSubgroup=JIRA.Projects.Sidebar.Component.NavigationGroup.extend({childEvents:{"before:select":function(e,t){JIRA.Projects.Sidebar.Component.NavigationGroup.prototype.childEvents["before:select"].apply(this,arguments),t.isPrevented||this.expand()}},initialize:function(){this.childEvents=_.extend({},JIRA.Projects.Sidebar.Component.NavigationGroup.prototype.childEvents,this.childEvents),JIRA.Projects.Sidebar.Component.NavigationGroup.prototype.initialize.apply(this,arguments),this.id=this.$el.find(">a[data-link-id]").attr("data-link-id")},expand:function(){this.$el.attr("aria-expanded","true")},collapse:function(){this.$el.attr("aria-expanded","false")},isExpanded:function(){return"true"===this.$el.attr("aria-expanded")},isSelected:function(){return this.$el.hasClass("aui-nav-selected")},getId:function(){return this.id},getSelectedNavigationItem:function(){if(this.isSelected())return this;var e=this.children.find(function(e){return e.hasASelectedItem()});return e?e.getSelectedNavigationItem():void 0},hasASelectedItem:function(){return!!this.isSelected()||this.children.any(function(e){return e.hasASelectedItem()})}})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-api', location = 'jira-projects-module/sidebar/api.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.Sidebar"),AJS.namespace("JIRA.API");var e=AJS.$.Deferred();JIRA.API.getSidebar=JIRA.API.getSidebar||function(){return e.promise()},JIRA.Projects.Sidebar.initAPI=function(r){JIRA.API.Sidebar=r,e.resolve(JIRA.API.Sidebar)}}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = 'jira-projects-module/sidebar/project-shortcuts/templates.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Projects&&(JIRA.Projects={}),"undefined"==typeof JIRA.Projects.Sidebar&&(JIRA.Projects.Sidebar={}),"undefined"==typeof JIRA.Projects.Sidebar.ProjectShortcuts&&(JIRA.Projects.Sidebar.ProjectShortcuts={}),"undefined"==typeof JIRA.Projects.Sidebar.ProjectShortcuts.Templates&&(JIRA.Projects.Sidebar.ProjectShortcuts.Templates={}),JIRA.Projects.Sidebar.ProjectShortcuts.Templates.content=function(t,e){var o="";if(t.canManage||t.numberOfShortcuts>0){if(o+='<div class="aui-sidebar-group jira-sidebar-group-with-divider project-shortcuts-group'+(0==t.numberOfShortcuts?" project-shortcuts-group_empty":"")+'" data-id="project-shortcuts-group"><div class="aui-nav-heading">'+soy.$$escapeHtml("Project Shortcuts")+'</div><ul class="aui-nav project-shortcuts-list">',t.shortcuts)for(var s=t.shortcuts,a=s.length,i=0;i<a;i++){var r=s[i];o+=JIRA.Projects.Sidebar.ProjectShortcuts.Templates.shortcut({id:r.id,name:r.name,url:r.url,icon:r.icon,canManage:t.canManage,iconsMap:t.iconsMap,isWithIcon:t.isWithIcons})}o+=(t.canManage?'<li><a class="aui-nav-item project-shortcuts-group__add" href="#" data-link-id="project-shortcut-add"><span class="aui-icon aui-icon-large aui-iconfont-add-small"></span><span class="aui-nav-item-label">'+soy.$$escapeHtml("Add shortcut")+"</span></a></li>":"")+"</ul></div>"}return o},JIRA.Projects.Sidebar.ProjectShortcuts.Templates.shortcut=function(t,e){return'<li class="project-shortcut"><a class="aui-nav-item project-shortcuts-group__link" href="'+soy.$$escapeHtml(t.url)+'" title="'+soy.$$escapeHtml(t.name)+'" target="_blank" data-shortcut-id="'+soy.$$escapeHtml(t.id)+'" data-link-id="project-shortcut-'+soy.$$escapeHtml(t.id)+'">'+(t.isWithIcon?'<span class="aui-icon aui-icon-large '+JIRA.Projects.Sidebar.ProjectShortcuts.Templates.icon({iconId:t.icon,iconsMap:t.iconsMap})+'" data-project-shortcuts-icon-id="'+soy.$$escapeHtml(t.icon)+'">'+soy.$$escapeHtml("Project shortcut icon")+"</span>":"")+'<span class="aui-nav-item-label">'+soy.$$escapeHtml(t.name)+"</span></a>"+(t.canManage?'<a href="#project-shortcuts-dropdown_'+soy.$$escapeHtml(t.id)+'" aria-owns="project-shortcuts-dropdown_'+soy.$$escapeHtml(t.id)+'" aria-haspopup="true" class="aui-dropdown2-trigger project-shortcuts-group__actions"><span>'+soy.$$escapeHtml("Actions")+'</span></a><div id="project-shortcuts-dropdown_'+soy.$$escapeHtml(t.id)+'" class="aui-dropdown2 aui-style-default project-shortcuts-group__dropdown"><ul class="aui-list-truncate"><li><a class="project-shortcuts-group__actions__edit" href="#">'+soy.$$escapeHtml("Edit")+'</a></li><li><a class="project-shortcuts-group__actions__delete  " href="#">'+soy.$$escapeHtml("Delete")+"</a></li></ul></div>":"")+"</li>"},JIRA.Projects.Sidebar.ProjectShortcuts.Templates.icon=function(t,e){t=t||{};var o="";if(t.iconsMap){var s=t.iconId&&t.iconsMap[t.iconId]?t.iconId:"1";o+=t.iconsMap[s]?soy.$$escapeHtml(t.iconsMap[s].className):""}return o},JIRA.Projects.Sidebar.ProjectShortcuts.Templates.shortcutFormFields=function(t,e){return'<div class="project-shortcuts-field-group">'+aui.form.textField({name:"project-shortcuts-url-"+t.action,id:"project-shortcuts-url-"+t.action,labelContent:"Web address",placeholderText:"e.g. http://www.atlassian.com",extraClasses:"project-shortcuts-url",value:t.url?t.url:"",errorTexts:t.errors.urlError?[t.errors.urlError]:[]})+'<div class="field-group project-shortcuts-name">'+aui.form.label({forField:"project-shortcuts-name-"+t.action,content:"Name"})+'<div class="project-shortcuts-name-icon-block"><div class="project-shortcuts-icon-picker-block"></div>'+aui.form.input({name:"project-shortcuts-name-"+t.action,id:"project-shortcuts-name-"+t.action,placeholderText:"e.g. Atlassian website",extraClasses:"project-shortcuts-name-input"+(t.isWithIcon?" project-shortcuts-name-input-with-icon":""),value:t.name?t.name:"",type:"text"})+"</div>"+(t.errors.iconError?aui.form.fieldError({message:t.errors.iconError}):"")+(t.errors.nameError?aui.form.fieldError({message:t.errors.nameError}):"")+"</div></div>"},JIRA.Projects.Sidebar.ProjectShortcuts.Templates.iconsPicker=function(t,e){return"<span>"+JIRA.Projects.Sidebar.ProjectShortcuts.Templates.iconsList(t)+"</span>"+aui.dropdown2.trigger({menu:{id:"project-shortcuts-icons-list-"+t.cid},extraClasses:"aui-button project-shortcuts-icons-picker",iconClasses:"aui-icon aui-icon-large  "+soy.$$escapeHtml(t.icon.className),extraAttributes:{href:"#"}})},JIRA.Projects.Sidebar.ProjectShortcuts.Templates.iconsList=function(t,e){for(var o='<div id="project-shortcuts-icons-list-'+soy.$$escapeHtml(t.cid)+'" aria-hidden="true" class="aui-style-default aui-dropdown2 project-shortcuts-icons-list aui-dropdown2-section"><ul>',s=t.iconsList,a=s.length,i=0;i<a;i++){var r=s[i];o+='<li><a class="project-shortcuts-icons-icon" data-project-shortcuts-icons-id="'+soy.$$escapeHtml(r.name)+'"><span class="aui-icon aui-icon-large '+soy.$$escapeHtml(r.className)+'">'+soy.$$escapeHtml("Project shortcut icon")+"</span></a></li>"}return o+="</ul></div>"},JIRA.Projects.Sidebar.ProjectShortcuts.Templates.addDialog=function(t,e){return'<section role="dialog" id="add-shortcut-dialog" class="aui-layer aui-dialog2 aui-dialog2-medium" aria-hidden="false"><header class="aui-dialog2-header" id="add-shortcut-dialog-header"></header><div class="aui-dialog2-content"><div id="image-behind"><div id="image-behind-top"></div><div id="image-behind-bottom"></div></div><div id="add-shortcut-image-container"><div id="add-shortcut-dialog-image"></div></div><form action="" method="post" class="aui"><h1>'+soy.$$escapeHtml("Add shortcut")+"</h1><fieldset>"+JIRA.Projects.Sidebar.ProjectShortcuts.Templates.shortcutFormFields(soy.$$augmentMap(t,{action:"add"}))+'</fieldset><button type="submit" class="project-shortcuts-hidden-submit" tabindex="-1"></button></form></div><div class="aui-dialog2-footer"><div class="buttons-container"><div class="buttons"><button class="aui-button aui-button-primary project-shortcuts-submit">'+soy.$$escapeHtml("Add")+'</button><button class="aui-button aui-button-text aui-button-subtle project-shortcuts-cancel">'+soy.$$escapeHtml("Cancel")+"</button></div></div></div></section>"},JIRA.Projects.Sidebar.ProjectShortcuts.Templates.editDialogChrome=function(t,e){return'<section role="dialog" id="edit-project-shortcut-dialog" class="aui-layer aui-dialog2 aui-dialog2-small" aria-hidden="true" data-aui-remove-on-hide="true"><header class="aui-dialog2-header"><h2 class="aui-dialog2-header-main">'+soy.$$escapeHtml("Edit shortcut")+"</h2></header></section>"},JIRA.Projects.Sidebar.ProjectShortcuts.Templates.editDialog=function(t,e){return'<section role="dialog" id="add-shortcut-dialog" class="aui-layer aui-dialog2 aui-dialog2-medium" aria-hidden="false"><header class="aui-dialog2-header" id="add-shortcut-dialog-header"></header><div class="aui-dialog2-content"><div id="image-behind"><div id="image-behind-top"></div><div id="image-behind-bottom"></div></div><div id="add-shortcut-image-container"><div id="add-shortcut-dialog-image"></div></div><form class="aui" method="post"><h1>'+soy.$$escapeHtml("Edit shortcut")+"</h1>"+JIRA.Projects.Sidebar.ProjectShortcuts.Templates.shortcutFormFields(soy.$$augmentMap(t,{action:"edit"}))+'<button type="submit" class="project-shortcuts-hidden-submit" tabindex="-1"></button></form></div><footer class="aui-dialog2-footer"><div class="aui-dialog2-footer-actions"><button class="aui-button project-shortcuts-delete">'+soy.$$escapeHtml("Delete")+'</button><button class="aui-button aui-button-primary project-shortcuts-submit">'+soy.$$escapeHtml("Save")+'</button><button class="aui-button aui-button-link project-shortcuts-cancel aui-button-subtle">'+soy.$$escapeHtml("Cancel")+"</button></div></footer></section>"},JIRA.Projects.Sidebar.ProjectShortcuts.Templates.deleteDialog=function(t,e){return'<section role="dialog" id="delete-project-shortcut-dialog" class="aui-layer aui-dialog2 aui-dialog2-small" aria-hidden="true" data-aui-remove-on-hide="true"><header class="aui-dialog2-header"><h2 class="aui-dialog2-header-main">'+soy.$$escapeHtml("Delete shortcut")+'</h2></header><div class="aui-dialog2-content"><p>'+soy.$$escapeHtml("Are you sure you want to delete this shortcut?")+'</p></div><footer class="aui-dialog2-footer"><div class="aui-dialog2-footer-actions"><button class="aui-button aui-button-primary project-shortcuts-submit">'+soy.$$escapeHtml("Delete")+'</button><button class="aui-button aui-button-link project-shortcuts-cancel aui-button-subtle">'+soy.$$escapeHtml("Cancel")+"</button></div></footer></section>"};;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = 'jira-projects-module/sidebar/project-shortcuts/dialogs/Add.js' */
define("jira/projects/sidebar/projectShortcuts/dialogs/add",["underscore","jquery","jira/projects/libs/marionette","aui/flag"],function(e,t,i,o){return i.Controller.extend({initialize:function(t){e.bindAll(this,"hide","refresh","focusForm");var i=this;this.analyticsSave=!1,this.sidebarItem=t.sidebarItem,this.projectKey=t.projectKey,this.collection=t.collection,this.model=new JIRA.Projects.Sidebar.ProjectShortcuts.Entities.Shortcut(null,{projectKey:this.projectKey}),this.errorModel=new JIRA.Projects.Sidebar.ProjectShortcuts.Entities.ShortcutErrors(null,{model:this.model}),this.view=new JIRA.Projects.Sidebar.ProjectShortcuts.Views.AddDialogContent({model:this.model,errorModel:this.errorModel}),this.view.render(),this.dialog=AJS.dialog2(i.view.$el),this.dialog.show(),this.view.ui.url.focus(),this.dialog.on("hide",function(){i.trigger("dialog:close",i.analyticsSave)}),this.listenTo(this.view,"render",this.refresh),this.listenTo(this.view,"cancel",this.hideAndRender),this.listenTo(this.model,"save:success",function(){var e=new JIRA.Projects.Sidebar.ProjectShortcuts.Entities.Shortcut(this.model.toJSON(),{projectKey:this.projectKey});this.model.clear(),this.collection.add(e),this._addToADG3Sidebar(e),o({type:"success",title:"You have added the shortcut",body:"Nicely done! Your team is going to love this.",close:"auto"}),this.analyticsSave=!0,this.hide()})},_addToADG3Sidebar:function(e){JIRA.API.getSidebar().done(function(t){var i="sidebar-project-shortcuts",o="com.atlassian.jira.jira-projects-plugin:project.shortcut.default.link."+e.id,r={id:o,name:e.get("name"),url:e.get("url"),icon:"shortcut",canEdit:!0};t.addItem(i,r,!0)})},show:function(){this.dialog.show()},hide:function(){this.view.hideIconPicker(),this.dialog.hide()},refresh:function(){this.view.hideIconPicker()},hideAndRender:function(){this.hide()},focusForm:function(){this.view.ui.url.focus()}})}),AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Dialogs.Add",null,require("jira/projects/sidebar/projectShortcuts/dialogs/add"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = 'jira-projects-module/sidebar/project-shortcuts/services/AvailableIcons.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Services.AvailableIcons");var t=[],n={},e=!1;JIRA.Projects.Sidebar.ProjectShortcuts.Services.AvailableIcons={initialize:function(e){t=e||t,n={},_.each(e,function(t){n[t.name]=t})},getIconsList:function(){return t},getIconsMap:function(){return n},getAllIconsClasses:function(){return _.reduce(t,function(t,n){return t+n.className+" "},"")},getIconFromName:function(t){return this.getIconsMap()[t]?this.getIconsMap()[t]:this.getIconsList()[0]?this.getIconsList()[0]:{}},setWithIcons:function(t){e=t},isWithIcons:function(){return e}}}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = 'jira-projects-module/sidebar/project-shortcuts/entities/Shortcut.js' */
!function(){"use strict";function t(t){var e;try{e=JSON.parse(t.responseText)}catch(t){e={message:"We couldn\'t complete the action as there seems to be a communication issue."}}return e}AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Entities.Shortcut"),JIRA.Projects.Sidebar.ProjectShortcuts.Entities.Shortcut=Backbone.Model.extend({defaults:{url:"",name:"",icon:"",type:""},initialize:function(t,e){if(!e||!e.projectKey)throw"Project key is required";this.projectKey=e.projectKey},urlRoot:function(){return AJS.contextPath()+"/rest/projects/1.0/project/"+encodeURIComponent(this.projectKey)+"/shortcut"},clear:function(){this.unset("id"),this.set("url",this.defaults.url),this.set("name",this.defaults.name),this.set("icon",this.defaults.icon),this.set("type",this.defaults.type)},save:function(){if(1!=this.saving){this.saving=!0;var e=this;e.trigger("save:start");var s=this.isNew()?"create":"update";this.sync(s,e).always(function(){e.saving=!1,e.trigger("save:finish")}).done(function(t){e.set(t,{silent:!0}),JIRA.trace("jira.projects.shortcuts."+s+".success"),e.trigger("save:success")}).fail(function(r){var i=t(r);JIRA.trace("jira.projects.shortcuts."+s+".fail"),e.trigger("save:failure",i)})}},destroy:function(){if(1!=this.saving){this.saving=!0;var e=this;e.trigger("remove:start");var s=Backbone.Model.prototype.destroy.apply(this,arguments);return s.always(function(){e.saving=!1,e.trigger("remove:finish")}).done(function(){e.trigger("remove:success")}).fail(function(s){var r=t(s);e.trigger("remove:failure",r)}),s}}})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = 'jira-projects-module/sidebar/project-shortcuts/entities/ShortcutErrors.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Entities.ShortcutErrors"),JIRA.Projects.Sidebar.ProjectShortcuts.Entities.ShortcutErrors=Backbone.Model.extend({defaults:{urlError:"",nameError:"",iconError:"",generalError:""},initialize:function(r,e){var s=e.model;this.listenTo(s,"save:failure remove:failure",function(r){this.set({urlError:r.errors&&r.errors.url,nameError:r.errors&&r.errors.name,iconError:r.errors&&r.errors.icon,generalError:r.message||r.errorMessages&&r.errorMessages.length>0?r.message||r.errorMessages[0]:void 0})}),this.listenTo(s,"save:success remove:success",this.clear)}})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = 'jira-projects-module/sidebar/project-shortcuts/entities/Shortcuts.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Entities.Shortcuts"),JIRA.Projects.Sidebar.ProjectShortcuts.Entities.Shortcuts=Backbone.Collection.extend({model:JIRA.Projects.Sidebar.ProjectShortcuts.Entities.Shortcut,initialize:function(t,e){this.projectKey=e.projectKey}})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = 'jira-projects-module/sidebar/project-shortcuts/views/IconPickerContent.js' */
!function(i){"use strict";function c(i,c){var e,o=5,n=i.ui.iconList.find(".active"),s=i.ui.iconList.find("li").size();switch(c.keyCode){case AJS.keyCode.LEFT:e=-1;break;case AJS.keyCode.RIGHT:e=1;break;case AJS.keyCode.DOWN:e=o;break;case AJS.keyCode.UP:e=-o;break;default:e=0}var a=n.closest("li").index()+e;(a<0||a>=s)&&(a+=s,a%=s),n.removeClass(t),i.ui.icon.eq(a).addClass(t)}var e="projectShortcutsIconsId",t="active aui-dropdown2-active";AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Views.IconPickerContent"),JIRA.Projects.Sidebar.ProjectShortcuts.Views.IconPickerContent=JIRA.Projects.Libs.Marionette.ItemView.extend({template:JIRA.Projects.Sidebar.ProjectShortcuts.Templates.iconsPicker,ui:{icon:".project-shortcuts-icons-icon",iconList:".project-shortcuts-icons-list",iconPicker:".project-shortcuts-icons-picker"},modelEvents:{"change:icon":function(){var i=this._modelIcon(),c=this.ui.iconPicker.children();c.removeClass(this.iconFactory.getAllIconsClasses()),c.addClass(i.className),this.ui.iconPicker.data(e,i.name)},"save:start":function(){this.ui.iconPicker.attr("aria-disabled",!0)},"save:finish":function(){this.ui.iconPicker.attr("aria-disabled",!1)}},events:{"keydown @ui.iconPicker":function(i){if(this.isPickerActive())switch(i.keyCode){case AJS.keyCode.LEFT:case AJS.keyCode.RIGHT:case AJS.keyCode.DOWN:case AJS.keyCode.UP:c(this,i),i.stopPropagation(),i.preventDefault(),this.ui.iconList.trigger("aui-dropdown2-item-selected");break;case AJS.keyCode.ESCAPE:this.hideIconPicker(),i.stopPropagation(),i.preventDefault()}}},initialize:function(i){this.iconFactory=JIRA.Projects.Sidebar.ProjectShortcuts.Services.AvailableIcons,this.analytics=JIRA.Projects.Sidebar.ProjectShortcuts.Analytics},onRender:function(){var c=this;this.ui.icon.on("click",function(){var t=i(this).data(e);c.analytics.iconChangeConfirmed(c.model,t),c.analyticsOldIconId="",c.analyticsIconClicked=!0,c.model.set("icon",t),c.ui.iconPicker.focus()}),this.ui.iconList.on("aui-dropdown2-show",function(){c.ui.iconPicker.focus(),c.analyticsIconClicked=!1,c.analytics.iconPickerOpened(c.model)}),this.ui.iconList.on("aui-dropdown2-hide",function(){c.analytics.iconPickerClosed(c.model,c.analyticsIconClicked)}),this.analyticsOldIconId="",this.ui.iconList.on("aui-dropdown2-item-selected",function(i){var t=AJS.$(this).find(".active").data(e);c.analyticsOldIconId&&c.analyticsOldIconId!==t&&c.analytics.iconChanged(c.model,t,c.analyticsOldIconId),c.analyticsOldIconId=t}),this.ui.iconPicker.data(e,this.model.get("icon"))},hideIconPicker:function(){this.isPickerActive()&&this.ui.iconPicker.trigger("aui-button-invoke")},isPickerActive:function(){return this.ui.iconPicker.hasClass("active")},_modelIcon:function(){return this.iconFactory.getIconFromName(this.model.get("icon"))},onFormSubmit:function(){this.model.set("icon",this.ui.iconPicker.data(e)||"")},focus:function(){this.ui.iconPicker.focus()},serializeData:function(){return{iconsList:this.iconFactory.getIconsList(),icon:this._modelIcon(),cid:this.cid}}})}(AJS.$);;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = 'jira-projects-module/sidebar/project-shortcuts/views/DialogContent.js' */
!function(t){"use strict";AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Views.DialogContent"),JIRA.Projects.Sidebar.ProjectShortcuts.Views.DialogContent=JIRA.Projects.Libs.Marionette.LayoutView.extend({ui:{form:"form",inputs:"input, button",submit:".project-shortcuts-submit",cancel:".project-shortcuts-cancel",url:".project-shortcuts-url input",name:".project-shortcuts-name input"},regions:{iconPicker:".project-shortcuts-icon-picker-block"},events:{"click @ui.cancel":function(t){t.preventDefault(),this.model.clear(),this.setNameAutomagically=!0,this.errorModel.clear(),this.trigger("cancel")},"click @ui.submit":"formSubmit","submit @ui.form":"formSubmit","blur @ui.url":function(){this.ensureProtocolPrefix(),this.tryToAutomagicallyDeriveNameFromUrl()},"input @ui.url":function(){this.model.set("url",this.ui.url.val()),this.tryToAutomagicallyDeriveNameFromUrl()},"input @ui.name":function(){this.setNameAutomagically=!1,this.model.set("name",this.ui.name.val())},"keydown @ui.name":function(t){this.iconPickerContent&&t.shiftKey&&t.keyCode===AJS.keyCode.TAB&&(t.preventDefault(),this.iconPickerContent.focus())},"keydown @ui.url":function(t){this.iconPickerContent&&(t.shiftKey||t.keyCode!==AJS.keyCode.TAB||(t.preventDefault(),this.iconPickerContent.focus()))}},modelEvents:{"save:start":function(){this.ui.inputs.prop("disabled",!0),this.ui.submit.addClass("loading"),this.ui.submit.spin({className:"spinner"})},"save:finish":function(){this.ui.inputs.prop("disabled",!1),this.ui.submit.removeClass("loading"),this.ui.submit.spinStop({className:"spinner"})},"save:failure":function(){if(this.render(),this.errorModel.get("generalError")){var t=require("aui/flag");t({type:"error",title:"We couldn\'t save the shortcut for you",close:"auto",body:this.errorModel.get("generalError")})}return this.errorModel.get("nameError")&&this.ui.name.focus(),this.errorModel.get("urlError")&&this.ui.url.focus(),this},"save:success":function(){this.setNameAutomagically=!0}},initialize:function(t){this.errorModel=t.errorModel;var e=this.model.get("name");this.setNameAutomagically=0==e.length,this.iconFactory=JIRA.Projects.Sidebar.ProjectShortcuts.Services.AvailableIcons},serializeData:function(){return _.extend(this.model.toJSON(),{errors:this.errorModel.toJSON(),action:this.action,isWithIcon:this.iconFactory.isWithIcons()})},onRender:function(){this.iconFactory.isWithIcons()?(this.iconPickerContent=new JIRA.Projects.Sidebar.ProjectShortcuts.Views.IconPickerContent({model:this.model,action:this.action,observable:this}),this.getRegion("iconPicker").show(this.iconPickerContent)):delete this.iconPickerContent},hideIconPicker:function(){this.iconPickerContent&&this.iconPickerContent.hideIconPicker()},setName:function(t){this.ui.name.val(t),this.model.set("name",t)},setUrl:function(t){this.ui.url.val(t),this.model.set("url",t)},ensureProtocolPrefix:function(){var t=this.ui.url.val().trim();t.length>0&&!JIRA.Projects.Sidebar.ProjectShortcuts.Views.DialogContent.urlPattern.test(t)&&this.setUrl("http://"+t)},tryToAutomagicallyDeriveNameFromUrl:function(){var t=this.ui.url.val().trim();if(this.setNameAutomagically)if(JIRA.Projects.Sidebar.ProjectShortcuts.Views.DialogContent.urlOptionalProtocolPattern.test(t)){var e=JIRA.Projects.Sidebar.ProjectShortcuts.Views.DialogContent.urlOptionalProtocolPattern.exec(t);this.setName(e[3])}else this.setName(t)},formSubmit:function(t){t.preventDefault(),this.ensureProtocolPrefix(),this.tryToAutomagicallyDeriveNameFromUrl(),this.iconPickerContent&&this.iconPickerContent.onFormSubmit(),this.model.set({url:this.ui.url.val(),name:this.ui.name.val()}),this.model.save()}},{urlPattern:/^[a-zA-Z0-9]+:(\/\/)?([^\/]*).*/,urlOptionalProtocolPattern:/^([a-zA-Z0-9]+:(\/\/)?)?([^\/]*).*/})}(AJS.$);;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = 'jira-projects-module/sidebar/project-shortcuts/views/AddDialogContent.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Views.AddDialogContent"),JIRA.Projects.Sidebar.ProjectShortcuts.Views.AddDialogContent=JIRA.Projects.Sidebar.ProjectShortcuts.Views.DialogContent.extend({template:JIRA.Projects.Sidebar.ProjectShortcuts.Templates.addDialog})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = 'jira-projects-module/sidebar/project-shortcuts/views/EditDialogContent.js' */
define("jira/projects/sidebar/project-shortcuts/views/edit-dialog-content",["underscore"],function(e){"use strict";var t=JIRA.Projects.Sidebar.ProjectShortcuts.Views.DialogContent,r=t.extend({template:JIRA.Projects.Sidebar.ProjectShortcuts.Templates.editDialog});return r.extend({ui:e.extend({},t.prototype.ui,{delete:".project-shortcuts-delete"})})}),AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Views.EditDialogContent",null,require("jira/projects/sidebar/project-shortcuts/views/edit-dialog-content"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = 'jira-projects-module/sidebar/project-shortcuts/dialogs/Edit.js' */
define("jira/projects/sidebar/project-shortcuts/dialogs/edit",["jquery","jira/projects/sidebar/project-shortcuts/views/edit-dialog-content","jira/projects/libs/marionette","aui/flag","jira/api/projects"],function(e,t,o,i,s){"use strict";return o.Controller.extend({initialize:function(o){var r=this;_.bindAll(this,"hide"),this.model=new JIRA.Projects.Sidebar.ProjectShortcuts.Entities.Shortcut(o.model.toJSON(),{projectKey:o.model.projectKey||o.model.collection.projectKey}),this.errorModel=new JIRA.Projects.Sidebar.ProjectShortcuts.Entities.ShortcutErrors((void 0),{model:this.model}),this.view=new t({model:this.model,errorModel:this.errorModel}),this.analyticsSave=!1,this.view.render();var c=e(JIRA.Projects.Sidebar.ProjectShortcuts.Templates.editDialogChrome({}));this.view.$el.appendTo(c),this.dialog=AJS.dialog2(c),this.dialog.show(),this.view.ui.url.focus();var d=s.getCurrentProjectType(),l=s.getCurrentProjectId();this.view.ui.delete.on("click",function(e){r.hide(),e.preventDefault(),AJS.trigger("analyticsEvent",{name:"jira.projects.shortcut.delete.dialog.opened",data:{isSave:!1,shortcutId:r.model.get("id"),projectId:l,projectType:d}});var t=new JIRA.Projects.Sidebar.ProjectShortcuts.Dialogs.Delete({model:r.model});r.listenToOnce(t,"dialog:close",function(e){AJS.trigger("analyticsEvent",{name:"jira.projects.shortcut.delete.dialog.closed",data:{isSave:e,shortcutId:r.model.get("id"),projectId:l,projectType:d}})})}),this.listenTo(this.model,"remove:success",function(){o.model.collection&&o.model.collection.remove(r.model),i({type:"success",body:"Shortcut deleted.",close:"auto"})}),this._onResizeWindow=function(){r.hideIconPicker()},e(window).on("resize",this._onResizeWindow),this.listenTo(this.view,"cancel",this.hide),this.listenTo(this.model,"save:success",function(){i({type:"success",body:"You have updated the shortcut.",close:"auto"}),this.analyticsSave=!0,this.hide(),o.model.set(r.model.toJSON())}),this.dialog.on("hide",function(){r.trigger("dialog:close",r.analyticsSave)})},hideIconPicker:function(){this.view.hideIconPicker()},hide:function(){this.dialog.hide(),e(window).off("resize",this._onResizeWindow)}})}),AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Dialogs.Edit",null,require("jira/projects/sidebar/project-shortcuts/dialogs/edit"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = 'jira-projects-module/sidebar/project-shortcuts/views/Shortcut.js' */
!function(e){"use strict";AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Views.Shortcut");var o=require("jira/projects/sidebar/project-shortcuts/dialogs/edit");JIRA.Projects.Sidebar.ProjectShortcuts.Views.Shortcut=JIRA.Projects.Libs.Marionette.ItemView.extend({template:JIRA.Projects.Sidebar.ProjectShortcuts.Templates.shortcut,initialize:function(){_.bindAll(this,"toggleDropdown"),this.iconFactory=JIRA.Projects.Sidebar.ProjectShortcuts.Services.AvailableIcons},ui:{del:".project-shortcuts-group__actions__delete",edit:".project-shortcuts-group__actions__edit",trigger:".project-shortcuts-group__actions",dropdown:".project-shortcuts-group__dropdown",link:".project-shortcuts-group__link"},modelEvents:{change:"render"},events:{"click @ui.link":function(){this.trigger("click:link",this.model)}},onRender:function(){var t=this;this.unwrapTemplate();var i=e(window),r=e(".aui-sidebar-body");this.ui.trigger.on("click",function(e){t.trigger("dropdown:click",t.model)}),this.ui.edit.on("click",function(e){e.preventDefault(),t.ui.trigger.blur();var i=new o({model:t.model});t.trigger("edit:open",t.model),t.listenToOnce(i,"dialog:close",function(e){t.trigger("edit:close",t.model,e)})}),this.ui.del.on("click",function(e){e.preventDefault(),t.ui.trigger.blur();var o=new JIRA.Projects.Sidebar.ProjectShortcuts.Dialogs.Delete({model:t.model});t.trigger("delete:open",t.model),t.listenToOnce(o,"dialog:close",function(e){t.trigger("delete:close",t.model,e)})}),this.ui.dropdown.on({"aui-dropdown2-show":function(){t.$el.addClass("aui-nav-selected"),r.one("scroll",t.toggleDropdown),i.one("scroll",t.toggleDropdown),t.ui.trigger.focus()},"aui-dropdown2-hide":function(){t.$el.removeClass("aui-nav-selected"),r.off("scroll",t.toggleDropdown),i.off("scroll",t.toggleDropdown)}})},serializeData:function(){var e=_.extend(this.model.toJSON(),{canManage:!0,isWithIcon:this.iconFactory.isWithIcons()});return this.iconFactory.isWithIcons()&&(e=_.extend(e,{iconsMap:JIRA.Projects.Sidebar.ProjectShortcuts.Services.AvailableIcons.getIconsMap()})),e},toggleDropdown:function(){this.ui.trigger.trigger("aui-button-invoke")}})}(AJS.$);;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = 'jira-projects-module/sidebar/project-shortcuts/views/ShortcutsList.js' */
!function(t){"use strict";AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Views.List");var e=require("jira/projects/sidebar/projectShortcuts/dialogs/add");JIRA.Projects.Sidebar.ProjectShortcuts.Views.List=JIRA.Projects.Libs.Marionette.CompositeView.extend({template:JIRA.Projects.Sidebar.ProjectShortcuts.Templates.content,childView:JIRA.Projects.Sidebar.ProjectShortcuts.Views.Shortcut,ui:{itemsContainer:".aui-nav",description:".project-shortcuts-group__description",add:".project-shortcuts-group__add"},collectionEvents:{"add remove":function(){(0==this.collection.length&&0!=this.lastCollectionLength||0!=this.collection.length&&0==this.lastCollectionLength)&&(this.lastCollectionLength=this.collection.length,this.ui.description.toggleClass("hidden",this.collection.length>0),this.$el.toggleClass("project-shortcuts-group_empty",0==this.collection.length))}},initialize:function(){var e=this;JIRA.API.getSidebar().done(function(o){o.on("expand-end",function(){t(".aui-sidebar-submenu-dialog .project-shortcuts-group__dropdown").remove()},!0),o.on("collapse-start",function(){e.$(".project-shortcuts-group__actions.aui-dropdown2-active").trigger("aui-button-invoke")},!0)}),this.lastCollectionLength=this.collection.length},attachElContent:function(e){var o=new JIRA.Projects.Sidebar.Component.NavigationGroup({el:e});return JIRA.API.Sidebar.replaceGroup(this.options.targetGroup,o),this.$el=t(o.getElement()),this},onRender:function(){var t=new e({sidebarItem:JIRA.API.Sidebar.getGroup("project-shortcuts-group",!0).getItem("project-shortcut-add",!0),projectKey:this.collection.projectKey,collection:this.collection});this.listenTo(t,"dialog:open",function(){this.trigger("add:open")}),this.listenTo(t,"dialog:close",function(t){this.trigger("add:close",t)})},serializeData:function(){return{canManage:!0,numberOfShortcuts:this.collection.length}},attachBuffer:function(t,e){this.ui.itemsContainer.prepend(e)},onAddChild:function(t){this.ui.add.parent().before(t.$el)}})}(AJS.$);;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts', location = 'jira-projects-module/sidebar/project-shortcuts/dialogs/Delete.js' */
!function(e){"use strict";AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Dialogs.Delete"),JIRA.Projects.Sidebar.ProjectShortcuts.Dialogs.Delete=JIRA.Projects.Libs.Marionette.ItemView.extend({template:JIRA.Projects.Sidebar.ProjectShortcuts.Templates.deleteDialog,ui:{inputs:"input, button",submit:".project-shortcuts-submit",cancel:".project-shortcuts-cancel"},events:{"click @ui.cancel":function(e){e.preventDefault(),this.trigger("dialog:close",!1),this.dialog.hide()},"click @ui.submit":function(e){e.preventDefault(),this.trigger("dialog:close",!0),this.model.destroy({wait:!0})}},modelEvents:{"remove:start":function(){this.ui.inputs.prop("disabled",!0),this.ui.submit.addClass("loading"),this.ui.submit.spin({className:"spinner"})},"remove:finish":function(){this.ui.inputs.prop("disabled",!1),this.ui.submit.removeClass("loading"),this.ui.submit.spinStop({className:"spinner"}),this.dialog.hide(),JIRA.trace("jira.projects.shortcuts.deleted")},"remove:failure":function(e){if(e.message||e.errorMessages&&e.errorMessages.length>0){var t=require("aui/flag");t({type:"error",title:"We couldn\'t delete the shortcut for you",close:"auto",body:e.message||e.errorMessages[0]})}}},initialize:function(){this.render(),this.$el.appendTo("body"),this.dialog=AJS.dialog2(this.$el),this.dialog.show();var e=this;this.dialog.on("hide",function(){_.defer(function(){e.destroy()})})},onRender:function(){this.unwrapTemplate()}})}(AJS.$);;
;
/* module-key = 'com.atlassian.plugin.jslibs:bluebird-2.3.6', location = 'libs/bluebird/2.3.6/bluebird-2.3.6.js' */
/*
 The MIT License (MIT)

 Copyright (c) 2014 Petka Antonov

 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated documentation files (the "Software"), to deal
 in the Software without restriction, including without limitation the rights
 to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the Software is
 furnished to do so, subject to the following conditions:</p>

 The above copyright notice and this permission notice shall be included in
 all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 THE SOFTWARE.

*/
(function(r){define("atlassian/libs/bluebird-2.3.6",function(){var t={};r(t);return"undefined"!==typeof exports?module.exports.noConflict():t.Promise.noConflict()})})(function(r){var t=function(){return function d(o,b,a){function k(f,j){if(!b[f]){if(!o[f]){var l="function"==typeof require&&require;if(!j&&l)return l(f,!0);if(m)return m(f,!0);throw Error("Cannot find module '"+f+"'");}l=b[f]={exports:{}};o[f][0].call(l.exports,function(a){var h=o[f][1][a];return k(h?h:a)},l,l.exports,d,o,b,a)}return b[f].exports}
for(var m="function"==typeof require&&require,i=0;i<a.length;i++)k(a[i]);return k}({1:[function(d,o){o.exports=function(b){function a(a){var a=new k(a),b=a.promise();if(b.isRejected())return b;a.setHowMany(1);a.setUnwrap();a.init();return b}var k=b._SomePromiseArray;b.any=function(b){return a(b)};b.prototype.any=function(){return a(this)}}},{}],2:[function(d,o){function b(){this._isTickUsed=!1;this._schedule=a;this._length=0;this._lateBuffer=new k(16);this._functionBuffer=new k(65536);var b=this;
this.consumeFunctionBuffer=function(){b._consumeFunctionBuffer()}}var a=d("./schedule.js"),k=d("./queue.js"),m=d("./util.js").errorObj,i=d("./util.js").tryCatch1,f="undefined"!==typeof process?process:void 0;b.prototype.haveItemsQueued=function(){return 0<this._length};b.prototype.invokeLater=function(a,b,n){void 0!==f&&(null!=f.domain&&!a.domain)&&(a=f.domain.bind(a));this._lateBuffer.push(a,b,n);this._queueTick()};b.prototype.invoke=function(a,b,n){void 0!==f&&(null!=f.domain&&!a.domain)&&(a=f.domain.bind(a));
var h=this._functionBuffer;h.push(a,b,n);this._length=h.length();this._queueTick()};b.prototype._consumeFunctionBuffer=function(){for(var a=this._functionBuffer;0<a.length();){var b=a.shift(),n=a.shift(),h=a.shift();b.call(n,h)}this._reset();this._consumeLateBuffer()};b.prototype._consumeLateBuffer=function(){for(var a=this._lateBuffer;0<a.length();){var b=a.shift(),n=a.shift(),h=a.shift(),n=i(b,n,h);if(n===m)if(this._queueTick(),null!=b.domain)b.domain.emit("error",n.e);else throw n.e;}};b.prototype._queueTick=
function(){this._isTickUsed||(this._schedule(this.consumeFunctionBuffer),this._isTickUsed=!0)};b.prototype._reset=function(){this._isTickUsed=!1;this._length=0};o.exports=new b},{"./queue.js":25,"./schedule.js":28,"./util.js":35}],3:[function(d,o){var b=d("./promise.js")();o.exports=b},{"./promise.js":20}],4:[function(d,o){var b=Object.create;if(b){var a=b(null),k=b(null);a[" size"]=k[" size"]=0}o.exports=function(b){function i(a){return new Function("obj","                                             \n        'use strict'                                                         \n        var len = this.length;                                               \n        switch(len) {                                                        \n            case 1: return obj.methodName(this[0]);                          \n            case 2: return obj.methodName(this[0], this[1]);                 \n            case 3: return obj.methodName(this[0], this[1], this[2]);        \n            case 0: return obj.methodName();                                 \n            default: return obj.methodName.apply(obj, this);                 \n        }                                                                    \n        ".replace(/methodName/g,
a))}function f(a){return new Function("obj","                                             \n        'use strict';                                                        \n        return obj.propertyName;                                             \n        ".replace("propertyName",a))}function j(a,g,c){var b=c[a];if("function"!==typeof b){if(!q(a))return null;b=g(a);c[a]=b;c[" size"]++;if(512<c[" size"]){a=Object.keys(c);for(g=0;256>g;++g)delete c[a[g]];c[" size"]=a.length-256}}return b}function l(a){return a[this.pop()].apply(a,
this)}function n(a){return a[this]}function h(a){return a[this]}var c=d("./util.js"),e=c.canEvaluate,q=c.isIdentifier;b.prototype.call=function(p){for(var g=arguments.length,c=Array(g-1),b=1;b<g;++b)c[b-1]=arguments[b];if(e&&(g=j(p,i,a),null!==g))return this._then(g,void 0,void 0,c,void 0);c.push(p);return this._then(l,void 0,void 0,c,void 0)};b.prototype.get=function(a){var g;"number"!==typeof a?e?(g=j(a,f,k),g=null!==g?g:n):g=n:g=h;return this._then(g,void 0,void 0,a,void 0)}}},{"./util.js":35}],
5:[function(d,o){o.exports=function(b,a){var k=d("./errors.js"),m=k.canAttach,i=d("./async.js"),f=k.CancellationError;b.prototype._cancel=function(a){if(!this.isCancellable())return this;for(var b,n=this;void 0!==(b=n._cancellationParent)&&b.isCancellable();)n=b;n._attachExtraTrace(a);n._rejectUnchecked(a)};b.prototype.cancel=function(a){if(!this.isCancellable())return this;a=void 0!==a?m(a)?a:Error(a+""):new f;i.invokeLater(this._cancel,this,a);return this};b.prototype.cancellable=function(){if(this._cancellable())return this;
this._setCancellable();this._cancellationParent=void 0;return this};b.prototype.uncancellable=function(){var m=new b(a);m._propagateFrom(this,6);m._follow(this);m._unsetCancellable();return m};b.prototype.fork=function(a,b,n){a=this._then(a,b,n,void 0,void 0);a._setCancellable();a._cancellationParent=void 0;return a}}},{"./async.js":2,"./errors.js":10}],6:[function(d,o){o.exports=function(){function b(a){var b;if("function"===typeof a)b="[function "+(a.name||"anonymous")+"]";else{b=a.toString();if(/\[object [a-zA-Z0-9$_]+\]/.test(b))try{b=
JSON.stringify(a)}catch(c){}0===b.length&&(b="(empty array)")}a=41>b.length?b:b.substr(0,38)+"...";return"(<"+a+">, no stack trace)"}function a(b,h){this.captureStackTrace(a,h)}var k=d("./util.js").inherits,m=d("./es5.js").defineProperty,i=RegExp("\\b(?:[a-zA-Z0-9.]+\\$_\\w+|tryCatch(?:1|2|3|4|Apply)|new \\w*PromiseArray|\\w*PromiseArray\\.\\w*PromiseArray|setTimeout|CatchFilter\\$_\\w+|makeNodePromisified|processImmediate|process._tickCallback|nextTick|Async\\$\\w+)\\b"),f=null,j=null;k(a,Error);
a.prototype.captureStackTrace=function(a,b){l(this,a,b)};a.possiblyUnhandledRejection=function(a){"object"===typeof console&&(a="object"===typeof a||"function"===typeof a?"Possibly unhandled "+j(a.stack,a):"Possibly unhandled "+String(a),"function"===typeof console.error||"object"===typeof console.error?console.error(a):("function"===typeof console.log||"object"===typeof console.log)&&console.log(a))};a.combine=function(a,b){for(var c=a.length-1,e=b.length-1;0<=e;--e)if(a[c]===b[e])a.pop(),c--;else break;
a.push("From previous event:");for(var c=a.concat(b),q=[],e=0,p=c.length;e<p;++e)i.test(c[e])&&f.test(c[e])||0<e&&!f.test(c[e])&&"From previous event:"!==c[e]||q.push(c[e]);return q};a.protectErrorMessageNewlines=function(a){for(var b=0;b<a.length&&!f.test(a[b]);++b);if(!(1>=b)){for(var c=[],e=0;e<b;++e)c.push(a.shift());a.unshift(c.join("\u0002\x00\u0001"))}};a.isSupported=function(){return"function"===typeof l};var l=function h(){if("number"===typeof Error.stackTraceLimit&&"function"===typeof Error.captureStackTrace){f=
/^\s*at\s*/;j=function(a,g){return"string"===typeof a?a:void 0!==g.name&&void 0!==g.message?g.name+". "+g.message:b(g)};var a=Error.captureStackTrace;return function(b,g){a(b,g)}}var e=Error();if("string"===typeof e.stack&&"function"===typeof"".startsWith&&e.stack.startsWith("stackDetection@")&&"stackDetection"===h.name){m(Error,"stackTraceLimit",{writable:!0,enumerable:!1,configurable:!1,value:25});f=/@/;var q=/[@\n]/;j=function(a,g){return"string"===typeof a?g.name+". "+g.message+"\n"+a:void 0!==
g.name&&void 0!==g.message?g.name+". "+g.message:b(g)};return function(a){for(var b=Error().stack.split(q),c=b.length,e="",h=0;h<c;h+=2)e+=b[h],e+="@",e+=b[h+1],e+="\n";a.stack=e}}j=function(a,g){return"string"===typeof a?a:("object"===typeof g||"function"===typeof g)&&void 0!==g.name&&void 0!==g.message?g.name+". "+g.message:b(g)};return null}();return a}},{"./es5.js":12,"./util.js":35}],7:[function(d,o){o.exports=function(b){function a(a,b,c){this._instances=a;this._callback=b;this._promise=c}var k=
d("./util.js"),m=d("./errors.js"),i=k.tryCatch1,f=k.errorObj,j=d("./es5.js").keys,l=m.TypeError;a.prototype.doFilter=function(a){for(var h=this._callback,c=this._promise._boundTo,e=0,q=this._instances.length;e<q;++e){var p=this._instances[e],g=p===Error||null!=p&&p.prototype instanceof Error;if(g&&a instanceof p)return a=i(h,c,a),a===f?(b.e=a.e,b):a;if("function"===typeof p&&!g)if(g={},p=i(p,g,a),p!==f&&j(g).length&&(f.e=new l("Catch filter must inherit from Error or be a simple predicate function"),
p=f),p===f){a=m.canAttach(f.e)?f.e:Error(f.e+"");this._promise._attachExtraTrace(a);a=f.e;break}else if(p)return a=i(h,c,a),a===f?(b.e=a.e,b):a}b.e=a;return b};return a}},{"./errors.js":10,"./es5.js":12,"./util.js":35}],8:[function(d,o){var b=d("./util.js"),a=b.isPrimitive,k=b.wrapsPrimitiveReceiver;o.exports=function(b){var i=function(){return this},f=function(){throw this;},d=function(a,b){if(1===b)return function(){throw a;};if(2===b)return function(){return a}};b.prototype["return"]=b.prototype.thenReturn=
function(b){return k&&a(b)?this._then(d(b,2),void 0,void 0,void 0,void 0):this._then(i,void 0,void 0,b,void 0)};b.prototype["throw"]=b.prototype.thenThrow=function(b){return k&&a(b)?this._then(d(b,1),void 0,void 0,void 0,void 0):this._then(f,void 0,void 0,b,void 0)}}},{"./util.js":35}],9:[function(d,o){o.exports=function(b,a){var k=b.reduce;b.prototype.each=function(b){return k(this,b,null,a)};b.each=function(b,i){return k(b,i,null,a)}}},{}],10:[function(d,o){function b(a,b){function p(c){if(!(this instanceof
p))return new p(c);this.message="string"===typeof c?c:b;this.name=a;Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}i(p,Error);return p}function a(a){this.name="OperationalError";this.cause=this.message=a;this.isOperational=!0;a instanceof Error?(this.message=a.message,this.stack=a.stack):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}var k=d("./es5.js").freeze,m=d("./util.js"),i=m.inherits,f=m.notEnumerableProp,j,l,m=b("CancellationError","cancellation error"),
n=b("TimeoutError","timeout error"),h=b("AggregateError","aggregate error");try{j=TypeError,l=RangeError}catch(c){j=b("TypeError","type error"),l=b("RangeError","range error")}for(var e="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),q=0;q<e.length;++q)"function"===typeof Array.prototype[e[q]]&&(h.prototype[e[q]]=Array.prototype[e[q]]);h.prototype.length=0;h.prototype.isOperational=!0;var p=0;h.prototype.toString=function(){var a=
Array(4*p+1).join(" "),b="\n"+a+"AggregateError of:\n";p++;for(var a=Array(4*p+1).join(" "),c=0;c<this.length;++c){for(var e=this[c]===this?"[Circular AggregateError]":this[c]+"",e=e.split("\n"),h=0;h<e.length;++h)e[h]=a+e[h];e=e.join("\n");b+=e+"\n"}p--;return b};i(a,Error);e=Error.__BluebirdErrorTypes__;e||(e=k({CancellationError:m,TimeoutError:n,OperationalError:a,RejectionError:a,AggregateError:h}),f(Error,"__BluebirdErrorTypes__",e));o.exports={Error:Error,TypeError:j,RangeError:l,CancellationError:e.CancellationError,
OperationalError:e.OperationalError,TimeoutError:e.TimeoutError,AggregateError:e.AggregateError,originatesFromRejection:function(b){return b==null?false:b instanceof a||b.isOperational===true},markAsOriginatingFromRejection:function(a){try{f(a,"isOperational",true)}catch(b){}},canAttach:function(a){return a instanceof Error}}},{"./es5.js":12,"./util.js":35}],11:[function(d,o){o.exports=function(b){var a=d("./errors.js").TypeError;return function(k){var k=new a(k),m=b.rejected(k),i=m._peekContext();
null!=i&&i._attachExtraTrace(k);return m}}},{"./errors.js":10}],12:[function(d,o){var b=function(){return void 0===this}();if(b)o.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,keys:Object.keys,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:b};else{var a={}.hasOwnProperty,k={}.toString,m={}.constructor.prototype;o.exports={isArray:function(a){try{return"[object Array]"===k.call(a)}catch(b){return!1}},keys:function(b){var f=[],m;for(m in b)a.call(b,m)&&f.push(m);
return f},defineProperty:function(a,b,m){a[b]=m.value;return a},freeze:function(a){return a},getPrototypeOf:function(a){try{return Object(a).constructor.prototype}catch(b){return m}},isES5:b}}},{}],13:[function(d,o){o.exports=function(b,a){var k=b.map;b.prototype.filter=function(b,d){return k(this,b,d,a)};b.filter=function(b,d,f){return k(b,d,f,a)}}},{}],14:[function(d,o){o.exports=function(b,a,k){function m(){return this}function i(){throw this;}function f(a,b,g){g=h&&c(b)?g?function(){return b}:
function(){throw b;}:g?m:i;return a._then(g,e,void 0,b,void 0)}function j(c){var p=this.promise,g=this.handler,g=p._isBound()?g.call(p._boundTo):g();return void 0!==g&&(g=k(g,void 0),g instanceof b)?f(g,c,p.isFulfilled()):p.isRejected()?(a.e=c,a):c}function l(a){var c=this.promise,g=this.handler,c=c._isBound()?g.call(c._boundTo,a):g(a);return void 0!==c&&(c=k(c,void 0),c instanceof b)?f(c,a,!0):a}var n=d("./util.js"),h=n.wrapsPrimitiveReceiver,c=n.isPrimitive,e=n.thrower;b.prototype._passThroughHandler=
function(a,b){return"function"!==typeof a?this.then():this._then(b?j:l,b?j:void 0,void 0,{promise:this,handler:a},void 0)};b.prototype.lastly=b.prototype["finally"]=function(a){return this._passThroughHandler(a,!0)};b.prototype.tap=function(a){return this._passThroughHandler(a,!1)}}},{"./util.js":35}],15:[function(d,o){o.exports=function(b,a,k,m){function i(a,g){for(var h=c,q=b,n=g.length,l=0;l<n;++l){var f=e(g[l],void 0,a);if(f===h)return q.reject(h.e);f=m(f,i);if(f instanceof q)return f}return null}
function f(a,c,e){(this._promise=new b(k))._setTrace(void 0);this._generatorFunction=a;this._receiver=c;this._generator=void 0;this._yieldHandlers="function"===typeof e?[e].concat(q):q}var j=d("./errors.js"),l=j.TypeError,n=d("./util.js").deprecated,h=d("./util.js"),c=h.errorObj,e=h.tryCatch1,q=[];f.prototype.promise=function(){return this._promise};f.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver);this._receiver=this._generatorFunction=void 0;this._next(void 0)};
f.prototype._continue=function(a){if(a===c){this._generator=void 0;var e=j.canAttach(a.e)?a.e:Error(a.e+"");this._promise._attachExtraTrace(e);this._promise._reject(a.e,e)}else if(e=a.value,!0===a.done)this._generator=void 0,this._promise._tryFollow(e)||this._promise._fulfill(e);else{a=m(e,void 0);if(!(a instanceof b)&&(a=i(a,this._yieldHandlers),null===a)){this._throw(new l("A value was yielded that could not be treated as a promise"));return}a._then(this._next,this._throw,void 0,this,null)}};f.prototype._throw=
function(a){j.canAttach(a)&&this._promise._attachExtraTrace(a);this._continue(e(this._generator["throw"],this._generator,a))};f.prototype._next=function(a){this._continue(e(this._generator.next,this._generator,a))};b.coroutine=function(a,b){if("function"!==typeof a)throw new l("generatorFunction must be a function");var c=Object(b).yieldHandler;return function(){var b=a.apply(this,arguments),e=new f(void 0,void 0,c);e._generator=b;e._next(void 0);return e.promise()}};b.coroutine.addYieldHandler=function(a){if("function"!==
typeof a)throw new l("fn must be a function");q.push(a)};b.spawn=function(c){n("Promise.spawn is deprecated. Use Promise.coroutine instead.");if("function"!==typeof c)return a("generatorFunction must be a function");var c=new f(c,this),e=c.promise();c._run(b.spawn);return e}}},{"./errors.js":10,"./util.js":35}],16:[function(d,o){o.exports=function(b,a,k,m){var i=d("./util.js"),f=i.canEvaluate,j=i.tryCatch1,l=i.errorObj;if(f){for(var i=function(a){for(var b=[],c=1;c<=a;++c)b.push("holder.p"+c);return new Function("holder",
"                                      \n            'use strict';                                                    \n            var callback = holder.fn;                                        \n            return callback(values);                                         \n            ".replace(/values/g,b.join(", ")))},n=[],h=[void 0],c=1;5>=c;++c)n.push(new Function("value","holder","                             \n            'use strict';                                                    \n            holder.pIndex = value;                                           \n            holder.checkFulfillment(this);                                   \n            ".replace(/Index/g,
c))),h.push(i(c));var e=function(a,b){this.p1=this.p2=this.p3=this.p4=this.p5=null;this.fn=b;this.total=a;this.now=0};e.prototype.callers=h;e.prototype.checkFulfillment=function(a){var b=this.now;b++;var c=this.total;b>=c?(b=j(this.callers[c],void 0,this),b===l?a._rejectUnchecked(b.e):a._tryFollow(b)||a._fulfillUnchecked(b)):this.now=b}}b.join=function(){var c=arguments.length-1,h;if(0<c&&"function"===typeof arguments[c]&&(h=arguments[c],6>c&&f)){var g=new b(m);g._setTrace(void 0);h=new e(c,h);for(var l=
g._reject,d=n,i=0;i<c;++i){var j=k(arguments[i],void 0);j instanceof b?j.isPending()?j._then(d[i],l,void 0,g,h):j.isFulfilled()?d[i].call(g,j._settledValue,h):(g._reject(j._settledValue),j._unsetRejectionIsUnhandled()):d[i].call(g,j,h)}return g}c=arguments.length;g=Array(c);for(l=0;l<c;++l)g[l]=arguments[l];g=(new a(g)).promise();return void 0!==h?g.spread(h):g}}},{"./util.js":35}],17:[function(d,o){o.exports=function(b,a,k,m,i){function f(a,b,c,h){this.constructor$(a);this._callback=b;this._preservedValues=
h===i?Array(this.length()):null;this._limit=c;this._inFlight=0;this._queue=1<=c?[]:e;this._init$(void 0,-2)}function j(a,b,c,e){c="object"===typeof c&&null!==c?c.concurrency:0;c="number"===typeof c&&isFinite(c)&&1<=c?c:0;return new f(a,b,c,e)}var l=d("./util.js"),n=l.tryCatch3,h=l.errorObj,c={},e=[];l.inherits(f,a);f.prototype._init=function(){};f.prototype._promiseFulfilled=function(a,e){var g=this._values;if(null!==g){var l=this.length(),f=this._preservedValues,d=this._limit;if(g[e]===c){if(g[e]=
a,1<=d&&(this._inFlight--,this._drainQueue(),this._isResolved()))return}else{if(1<=d&&this._inFlight>=d){g[e]=a;this._queue.push(e);return}null!==f&&(f[e]=a);var k=n(this._callback,this._promise._boundTo,a,e,l);if(k===h)return this._reject(k.e);var i=m(k,void 0);if(i instanceof b){if(i.isPending())return 1<=d&&this._inFlight++,g[e]=c,i._proxyPromiseArray(this,e);if(i.isFulfilled())k=i.value();else return i._unsetRejectionIsUnhandled(),this._reject(i.reason())}g[e]=k}++this._totalResolved>=l&&(null!==
f?this._filter(g,f):this._resolve(g))}};f.prototype._drainQueue=function(){for(var a=this._queue,b=this._limit,c=this._values;0<a.length&&this._inFlight<b;){var e=a.pop();this._promiseFulfilled(c[e],e)}};f.prototype._filter=function(a,b){for(var c=b.length,e=Array(c),h=0,l=0;l<c;++l)a[l]&&(e[h++]=b[l]);e.length=h;this._resolve(e)};f.prototype.preservedValues=function(){return this._preservedValues};b.prototype.map=function(a,b){return"function"!==typeof a?k("fn must be a function"):j(this,a,b,null).promise()};
b.map=function(a,b,c,e){return"function"!==typeof b?k("fn must be a function"):j(a,b,c,e).promise()}}},{"./util.js":35}],18:[function(d,o){o.exports=function(b){function a(a){throw a;}function k(b,e){if(!f.isArray(b))return m(b,e);var l=f.tryCatchApply(this,[null].concat(b),e);l===h&&j.invokeLater(a,void 0,l.e)}function m(b,e){var f=void 0===b?n(this,e,null):l(this,e,null,b);f===h&&j.invokeLater(a,void 0,f.e)}function i(b,e){var l=n(this,e,b);l===h&&j.invokeLater(a,void 0,l.e)}var f=d("./util.js"),
j=d("./async.js"),l=f.tryCatch2,n=f.tryCatch1,h=f.errorObj;b.prototype.nodeify=function(a,b){if("function"==typeof a){var h=m;void 0!==b&&Object(b).spread&&(h=k);this._then(h,i,void 0,a,this._boundTo)}return this}}},{"./async.js":2,"./util.js":35}],19:[function(d,o){o.exports=function(b,a){var k=d("./util.js"),m=d("./async.js"),i=d("./errors.js"),f=k.tryCatch1,j=k.errorObj;b.prototype.progressed=function(a){return this._then(void 0,void 0,a,void 0,void 0)};b.prototype._progress=function(a){this._isFollowingOrFulfilledOrRejected()||
this._progressUnchecked(a)};b.prototype._clearFirstHandlerData$Base=b.prototype._clearFirstHandlerData;b.prototype._clearFirstHandlerData=function(){this._clearFirstHandlerData$Base();this._progressHandler0=void 0};b.prototype._progressHandlerAt=function(a){return 0===a?this._progressHandler0:this[(a<<2)+a-5+2]};b.prototype._doProgressWith=function(a){var n=a.promise,a=f(a.handler,a.receiver,a.value);if(a===j){if(null!=a.e&&"StopProgressPropagation"!==a.e.name){var h=i.canAttach(a.e)?a.e:Error(a.e+
"");n._attachExtraTrace(h);n._progress(a.e)}}else a instanceof b?a._then(n._progress,null,null,n,void 0):n._progress(a)};b.prototype._progressUnchecked=function(f){if(this.isPending())for(var n=this._length(),h=this._progress,c=0;c<n;c++){var e=this._progressHandlerAt(c),d=this._promiseAt(c);if(d instanceof b)"function"===typeof e?m.invoke(this._doProgressWith,this,{handler:e,promise:d,receiver:this._receiverAt(c),value:f}):m.invoke(h,d,f);else{var p=this._receiverAt(c);"function"===typeof e?e.call(p,
f,d):p instanceof b&&p._isProxied()?p._progressUnchecked(f):p instanceof a&&p._promiseProgressed(f,d)}}}}},{"./async.js":2,"./errors.js":10,"./util.js":35}],20:[function(d,o){var b;"undefined"!==typeof Promise&&(b=Promise);o.exports=function(){function a(b){if("function"!==typeof b)throw new s("the promise constructor requires a resolver function");if(this.constructor!==a)throw new s("the promise constructor cannot be invoked directly");this._bitField=0;this._boundTo=this._settledValue=this._receiver0=
this._promise0=this._rejectionHandler0=this._fulfillmentHandler0=void 0;b!==l&&this._resolveFromResolver(b)}function k(a){return a[0]}function m(){return new a.PromiseInspection(this)}var i=d("./util.js"),f=d("./async.js"),j=d("./errors.js"),l=function(){},n={},h={e:null},c=d("./thenables.js")(a,l),e=d("./promise_array.js")(a,l,c),q=d("./captured_trace.js")(),p=d("./catch_filter.js")(h),g=d("./promise_resolver.js"),o=i.isArray,u=i.errorObj,z=i.tryCatch1,D=i.tryCatch2,B=i.tryCatchApply,G=j.RangeError,
s=j.TypeError,H=j.CancellationError,I=j.TimeoutError,E=j.OperationalError,J=j.originatesFromRejection,F=j.markAsOriginatingFromRejection,x=j.canAttach,r=i.thrower,y=d("./errors_api_rejection")(a),t=function(){return new s("circular promise resolution chain")};a.prototype.bind=function(b){var e=c(b,void 0),h=new a(l);e instanceof a?(b=e.then(function(a){h._setBoundTo(a)}),b=a.all([this,b]).then(k),h._follow(b)):(h._follow(this),h._setBoundTo(b));h._propagateFrom(this,3);return h};a.prototype.toString=
function(){return"[object Promise]"};a.prototype.caught=a.prototype["catch"]=function(b){var c=arguments.length;if(1<c){var e=Array(c-1),h=0,g;for(g=0;g<c-1;++g){var f=arguments[g];if("function"===typeof f)e[h++]=f;else return c=new s("A catch filter must be an error constructor or a filter function"),this._attachExtraTrace(c),a.reject(c)}e.length=h;b=arguments[g];this._resetTrace();c=new p(e,b,this);return this._then(void 0,c.doFilter,void 0,c,void 0)}return this._then(void 0,b,void 0,void 0,void 0)};
a.prototype.reflect=function(){return this._then(m,m,void 0,this,void 0)};a.prototype.then=function(a,b,c){return this._then(a,b,c,void 0,void 0)};a.prototype.done=function(a,b,c){this._then(a,b,c,void 0,void 0)._setIsFinal()};a.prototype.spread=function(a,b){return this._then(a,b,void 0,n,void 0)};a.prototype.isCancellable=function(){return!this.isResolved()&&this._cancellable()};a.prototype.toJSON=function(){var a={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};this.isFulfilled()?
(a.fulfillmentValue=this._settledValue,a.isFulfilled=!0):this.isRejected()&&(a.rejectionReason=this._settledValue,a.isRejected=!0);return a};a.prototype.all=function(){return(new e(this)).promise()};a.is=function(b){return b instanceof a};a.all=function(a){return(new e(a)).promise()};a.prototype.error=function(a){return this.caught(J,a)};a.prototype._resolveFromSyncValue=function(b){if(b===u)this._cleanValues(),this._setRejected(),this._settledValue=b.e,this._ensurePossibleRejectionHandled();else{var e=
c(b,void 0);e instanceof a?this._follow(e):(this._cleanValues(),this._setFulfilled(),this._settledValue=b)}};a.method=function(b){if("function"!==typeof b)throw new s("fn must be a function");return function(){var c;switch(arguments.length){case 0:c=z(b,this,void 0);break;case 1:c=z(b,this,arguments[0]);break;case 2:c=D(b,this,arguments[0],arguments[1]);break;default:c=arguments.length;for(var e=Array(c),h=0;h<c;++h)e[h]=arguments[h];c=B(b,e,this)}e=new a(l);e._setTrace(void 0);e._resolveFromSyncValue(c);
return e}};a.attempt=a["try"]=function(b,c,e){if("function"!==typeof b)return y("fn must be a function");b=o(c)?B(b,c,e):z(b,e,c);c=new a(l);c._setTrace(void 0);c._resolveFromSyncValue(b);return c};a.defer=a.pending=function(){var b=new a(l);b._setTrace(void 0);return new g(b)};a.bind=function(b){var e=c(b,void 0),h=new a(l);h._setTrace(void 0);e instanceof a?(b=e.then(function(a){h._setBoundTo(a)}),h._follow(b)):(h._setBoundTo(b),h._setFulfilled());return h};a.cast=function(b){b=c(b,void 0);if(!(b instanceof
a)){var e=b,b=new a(l);b._setTrace(void 0);b._setFulfilled();b._cleanValues();b._settledValue=e}return b};a.resolve=a.fulfilled=a.cast;a.reject=a.rejected=function(b){var c=new a(l);c._setTrace(void 0);F(b);c._cleanValues();c._setRejected();c._settledValue=b;x(b)||c._setCarriedStackTrace(Error(b+""));c._ensurePossibleRejectionHandled();return c};a.onPossiblyUnhandledRejection=function(a){q.possiblyUnhandledRejection="function"===typeof a?a:void 0};var C;a.onUnhandledRejectionHandled=function(a){C=
"function"===typeof a?a:void 0};var v=!!("undefined"!==typeof process&&"string"===typeof process.execPath&&"object"===typeof process.env&&(process.env.BLUEBIRD_DEBUG||"development"===process.env.NODE_ENV));a.longStackTraces=function(){if(f.haveItemsQueued()&&!1===v)throw Error("cannot enable long stack traces after promises have been created");v=q.isSupported()};a.hasLongStackTraces=function(){return v&&q.isSupported()};a.prototype._then=function(b,c,e,h,g){var p=void 0!==g,g=p?g:new a(l);p||(v&&
(p=this._peekContext()===this._traceParent,g._traceParent=p?this._traceParent:this),g._propagateFrom(this,7));b=this._addCallbacks(b,c,e,g,h);this.isResolved()&&f.invoke(this._queueSettleAt,this,b);return g};a.prototype._length=function(){return this._bitField&262143};a.prototype._isFollowingOrFulfilledOrRejected=function(){return 0<(this._bitField&939524096)};a.prototype._isFollowing=function(){return 536870912===(this._bitField&536870912)};a.prototype._setLength=function(a){this._bitField=this._bitField&
-262144|a&262143};a.prototype._setFulfilled=function(){this._bitField|=268435456};a.prototype._setRejected=function(){this._bitField|=134217728};a.prototype._setFollowing=function(){this._bitField|=536870912};a.prototype._setIsFinal=function(){this._bitField|=33554432};a.prototype._isFinal=function(){return 0<(this._bitField&33554432)};a.prototype._cancellable=function(){return 0<(this._bitField&67108864)};a.prototype._setCancellable=function(){this._bitField|=67108864};a.prototype._unsetCancellable=
function(){this._bitField&=-67108865};a.prototype._setRejectionIsUnhandled=function(){this._bitField|=2097152};a.prototype._unsetRejectionIsUnhandled=function(){this._bitField&=-2097153;this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())};a.prototype._isRejectionUnhandled=function(){return 0<(this._bitField&2097152)};a.prototype._setUnhandledRejectionIsNotified=function(){this._bitField|=524288};a.prototype._unsetUnhandledRejectionIsNotified=
function(){this._bitField&=-524289};a.prototype._isUnhandledRejectionNotified=function(){return 0<(this._bitField&524288)};a.prototype._setCarriedStackTrace=function(a){this._bitField|=1048576;this._fulfillmentHandler0=a};a.prototype._unsetCarriedStackTrace=function(){this._bitField&=-1048577;this._fulfillmentHandler0=void 0};a.prototype._isCarryingStackTrace=function(){return 0<(this._bitField&1048576)};a.prototype._getCarriedStackTrace=function(){return this._isCarryingStackTrace()?this._fulfillmentHandler0:
void 0};a.prototype._receiverAt=function(a){a=0===a?this._receiver0:this[(a<<2)+a-5+4];return this._isBound()&&void 0===a?this._boundTo:a};a.prototype._promiseAt=function(a){return 0===a?this._promise0:this[(a<<2)+a-5+3]};a.prototype._fulfillmentHandlerAt=function(a){return 0===a?this._fulfillmentHandler0:this[(a<<2)+a-5+0]};a.prototype._rejectionHandlerAt=function(a){return 0===a?this._rejectionHandler0:this[(a<<2)+a-5+1]};a.prototype._addCallbacks=function(a,b,c,e,h){var g=this._length();262138<=
g&&(g=0,this._setLength(0));if(0===g){if(this._promise0=e,void 0!==h&&(this._receiver0=h),"function"===typeof a&&!this._isCarryingStackTrace()&&(this._fulfillmentHandler0=a),"function"===typeof b&&(this._rejectionHandler0=b),"function"===typeof c)this._progressHandler0=c}else{var f=(g<<2)+g-5;this[f+3]=e;this[f+4]=h;this[f+0]="function"===typeof a?a:void 0;this[f+1]="function"===typeof b?b:void 0;this[f+2]="function"===typeof c?c:void 0}this._setLength(g+1);return g};a.prototype._setProxyHandlers=
function(a,b){var c=this._length();262138<=c&&(c=0,this._setLength(0));if(0===c)this._promise0=b,this._receiver0=a;else{var e=(c<<2)+c-5;this[e+3]=b;this[e+4]=a;this[e+0]=this[e+1]=this[e+2]=void 0}this._setLength(c+1)};a.prototype._proxyPromiseArray=function(a,b){this._setProxyHandlers(a,b)};a.prototype._proxyPromise=function(a){a._setProxied();this._setProxyHandlers(a,-15)};a.prototype._setBoundTo=function(a){void 0!==a?(this._bitField|=8388608,this._boundTo=a):this._bitField&=-8388609};a.prototype._isBound=
function(){return 8388608===(this._bitField&8388608)};a.prototype._resolveFromResolver=function(a){var b=this;this._setTrace(void 0);this._pushContext();a=D(a,void 0,function(a){b._tryFollow(a)||b._fulfill(a)},function(a){var c=x(a)?a:Error(a+"");b._attachExtraTrace(c);F(a);b._reject(a,c===a?void 0:c)});this._popContext();if(void 0!==a&&a===u){var a=a.e,c=x(a)?a:Error(a+"");b._reject(a,c)}};a.prototype._spreadSlowCase=function(a,b,c,h){c=(new e(c)).promise()._then(function(){return a.apply(h,arguments)},
void 0,void 0,n,void 0);b._follow(c)};a.prototype._callSpread=function(b,e,h){var g=this._boundTo;if(o(h))for(var f=0,p=h.length;f<p;++f)if(c(h[f],void 0)instanceof a){this._spreadSlowCase(b,e,h,g);return}e._pushContext();return B(b,h,g)};a.prototype._callHandler=function(a,b,c,e){b===n&&!this.isRejected()?a=this._callSpread(a,c,e):(c._pushContext(),a=z(a,b,e));c._popContext();return a};a.prototype._settlePromiseFromHandler=function(b,e,g,f){f instanceof a?(b=this._callHandler(b,e,f,g),f._isFollowing()||
(b===u||b===f||b===h?(g=b===f?t():b.e,e=x(g)?g:Error(g+""),b!==h&&f._attachExtraTrace(e),f._rejectUnchecked(g,e)):(g=c(b,f),g instanceof a?(g.isRejected()&&(!g._isCarryingStackTrace()&&!x(g._settledValue))&&(e=Error(g._settledValue+""),f._attachExtraTrace(e),g._setCarriedStackTrace(e)),f._follow(g),f._propagateFrom(g,1)):f._fulfillUnchecked(b)))):b.call(e,g,f)};a.prototype._follow=function(a){this._setFollowing();a.isPending()?(this._propagateFrom(a,1),a._proxyPromise(this)):a.isFulfilled()?this._fulfillUnchecked(a._settledValue):
this._rejectUnchecked(a._settledValue,a._getCarriedStackTrace());a._isRejectionUnhandled()&&a._unsetRejectionIsUnhandled();v&&null==a._traceParent&&(a._traceParent=this)};a.prototype._tryFollow=function(b){if(this._isFollowingOrFulfilledOrRejected()||b===this)return!1;b=c(b,void 0);if(!(b instanceof a))return!1;this._follow(b);return!0};a.prototype._resetTrace=function(){v&&(this._trace=new q(void 0===this._peekContext()))};a.prototype._setTrace=function(a){if(v){var b=this._peekContext();this._traceParent=
b;this._trace=void 0!==a&&a._traceParent===b?a._trace:new q(void 0===b)}return this};a.prototype._attachExtraTrace=function(a){if(v){var b=this,c=a.stack,c="string"===typeof c?c.split("\n"):[];q.protectErrorMessageNewlines(c);for(var e=1;null!=b&&null!=b._trace;)c=q.combine(c,b._trace.stack.split("\n")),b=b._traceParent,e++;b=((Error.stackTraceLimit||10)+1)*e;e=c.length;e>b&&(c.length=b);0<e&&(c[0]=c[0].split("\u0002\x00\u0001").join("\n"));a.stack=1>=c.length?"(No stack trace)":c.join("\n")}};a.prototype._cleanValues=
function(){this._cancellable()&&(this._cancellationParent=void 0)};a.prototype._propagateFrom=function(a,b){0<(b&1)&&a._cancellable()&&(this._setCancellable(),this._cancellationParent=a);0<(b&4)&&this._setBoundTo(a._boundTo);0<(b&2)&&this._setTrace(a)};a.prototype._fulfill=function(a){this._isFollowingOrFulfilledOrRejected()||this._fulfillUnchecked(a)};a.prototype._reject=function(a,b){this._isFollowingOrFulfilledOrRejected()||this._rejectUnchecked(a,b)};a.prototype._settlePromiseAt=function(b){var c=
this.isFulfilled()?this._fulfillmentHandlerAt(b):this._rejectionHandlerAt(b),h=this._settledValue,g=this._receiverAt(b),f=this._promiseAt(b);if("function"===typeof c)this._settlePromiseFromHandler(c,g,h,f);else{var c=!1,p=this.isFulfilled();void 0!==g&&(g instanceof a&&g._isProxied()?(g._unsetProxied(),p?g._fulfillUnchecked(h):g._rejectUnchecked(h,this._getCarriedStackTrace()),c=!0):g instanceof e&&(p?g._promiseFulfilled(h,f):g._promiseRejected(h,f),c=!0));c||(p?f._fulfill(h):f._reject(h,this._getCarriedStackTrace()))}4<=
b&&this._queueGC()};a.prototype._isProxied=function(){return 4194304===(this._bitField&4194304)};a.prototype._setProxied=function(){this._bitField|=4194304};a.prototype._unsetProxied=function(){this._bitField&=-4194305};a.prototype._isGcQueued=function(){return-1073741824===(this._bitField&-1073741824)};a.prototype._setGcQueued=function(){this._bitField|=-1073741824};a.prototype._unsetGcQueued=function(){this._bitField&=1073741823};a.prototype._queueGC=function(){this._isGcQueued()||(this._setGcQueued(),
f.invokeLater(this._gc,this,void 0))};a.prototype._gc=function(){for(var a=5*this._length()-5,b=0;b<a;b++)delete this[b];this._clearFirstHandlerData();this._setLength(0);this._unsetGcQueued()};a.prototype._clearFirstHandlerData=function(){this._receiver0=this._promise0=this._rejectionHandler0=this._fulfillmentHandler0=void 0};a.prototype._queueSettleAt=function(a){this._isRejectionUnhandled()&&this._unsetRejectionIsUnhandled();f.invoke(this._settlePromiseAt,this,a)};a.prototype._fulfillUnchecked=
function(a){if(this.isPending()){if(a===this)return a=t(),this._attachExtraTrace(a),this._rejectUnchecked(a,void 0);this._cleanValues();this._setFulfilled();this._settledValue=a;a=this._length();0<a&&f.invoke(this._settlePromises,this,a)}};a.prototype._rejectUncheckedCheckError=function(a){var b=x(a)?a:Error(a+"");this._rejectUnchecked(a,b===a?void 0:b)};a.prototype._rejectUnchecked=function(a,b){if(this.isPending()){if(a===this){var c=t();this._attachExtraTrace(c);return this._rejectUnchecked(c)}this._cleanValues();
this._setRejected();this._settledValue=a;this._isFinal()?f.invokeLater(r,void 0,void 0===b?a:b):(c=this._length(),void 0!==b&&this._setCarriedStackTrace(b),0<c?f.invoke(this._rejectPromises,this,null):this._ensurePossibleRejectionHandled())}};a.prototype._rejectPromises=function(){this._settlePromises();this._unsetCarriedStackTrace()};a.prototype._settlePromises=function(){for(var a=this._length(),b=0;b<a;b++)this._settlePromiseAt(b)};a.prototype._ensurePossibleRejectionHandled=function(){this._setRejectionIsUnhandled();
void 0!==q.possiblyUnhandledRejection&&f.invokeLater(this._notifyUnhandledRejection,this,void 0)};a.prototype._notifyUnhandledRejectionIsHandled=function(){"function"===typeof C&&f.invokeLater(C,void 0,this)};a.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var a=this._settledValue,b=this._getCarriedStackTrace();this._setUnhandledRejectionIsNotified();void 0!==b&&(this._unsetCarriedStackTrace(),a=b);"function"===typeof q.possiblyUnhandledRejection&&q.possiblyUnhandledRejection(a,
this)}};var A=[];a.prototype._peekContext=function(){var a=A.length-1;if(0<=a)return A[a]};a.prototype._pushContext=function(){v&&A.push(this)};a.prototype._popContext=function(){v&&A.pop()};a.noConflict=function(){var c=a;try{Promise===c&&(Promise=b)}catch(e){}return c};a.setScheduler=function(a){if("function"!==typeof a)throw new s("fn must be a function");f._schedule=a};q.isSupported()||(a.longStackTraces=function(){},v=!1);a._makeSelfResolutionError=t;d("./finally.js")(a,h,c);d("./direct_resolve.js")(a);
d("./synchronous_inspection.js")(a);d("./join.js")(a,e,c,l);a.RangeError=G;a.CancellationError=H;a.TimeoutError=I;a.TypeError=s;a.OperationalError=E;a.RejectionError=E;a.AggregateError=j.AggregateError;i.toFastProperties(a);i.toFastProperties(a.prototype);a.Promise=a;d("./timers.js")(a,l,c);d("./race.js")(a,l,c);d("./call_get.js")(a);d("./generators.js")(a,y,l,c);d("./map.js")(a,e,y,c,l);d("./nodeify.js")(a);d("./promisify.js")(a,l);d("./props.js")(a,e,c);d("./reduce.js")(a,e,y,c,l);d("./settle.js")(a,
e);d("./some.js")(a,e,y);d("./progress.js")(a,e);d("./cancel.js")(a,l);d("./filter.js")(a,l);d("./any.js")(a,e);d("./each.js")(a,l);d("./using.js")(a,y,c);a.prototype=a.prototype;return a}},{"./any.js":1,"./async.js":2,"./call_get.js":4,"./cancel.js":5,"./captured_trace.js":6,"./catch_filter.js":7,"./direct_resolve.js":8,"./each.js":9,"./errors.js":10,"./errors_api_rejection":11,"./filter.js":13,"./finally.js":14,"./generators.js":15,"./join.js":16,"./map.js":17,"./nodeify.js":18,"./progress.js":19,
"./promise_array.js":21,"./promise_resolver.js":22,"./promisify.js":23,"./props.js":24,"./race.js":26,"./reduce.js":27,"./settle.js":29,"./some.js":30,"./synchronous_inspection.js":31,"./thenables.js":32,"./timers.js":33,"./using.js":34,"./util.js":35}],21:[function(d,o){o.exports=function(b,a,k){function m(a){switch(a){case -2:return[];case -3:return{}}}function i(f){var n=this._promise=new b(a),h=void 0;f instanceof b&&(h=f,n._propagateFrom(h,5));n._setTrace(h);this._values=f;this._totalResolved=
this._length=0;this._init(void 0,-2)}var f=d("./errors.js").canAttach,j=d("./util.js").isArray;i.prototype.length=function(){return this._length};i.prototype.promise=function(){return this._promise};i.prototype._init=function n(a,c){var e=k(this._values,void 0);if(e instanceof b)if(this._values=e,e._setBoundTo(this._promise._boundTo),e.isFulfilled()){if(e=e._settledValue,!j(e)){e=new b.TypeError("expecting an array, a promise or a thenable");this.__hardReject__(e);return}}else{e.isPending()?e._then(n,
this._reject,void 0,this,c):(e._unsetRejectionIsUnhandled(),this._reject(e._settledValue));return}else if(!j(e)){e=new b.TypeError("expecting an array, a promise or a thenable");this.__hardReject__(e);return}if(0===e.length)-5===c?this._resolveEmptyArray():this._resolve(m(c));else{for(var f=this.getActualLength(e.length),p=this.shouldCopyValues()?Array(f):this._values,g=!1,d=0;d<f;++d){var i=k(e[d],void 0);i instanceof b?i.isPending()?i._proxyPromiseArray(this,d):(i._unsetRejectionIsUnhandled(),g=
!0):g=!0;p[d]=i}this._values=p;this._length=f;g&&this._scanDirectValues(f)}};i.prototype._settlePromiseAt=function(a){var h=this._values[a];h instanceof b?h.isFulfilled()?this._promiseFulfilled(h._settledValue,a):h.isRejected()&&this._promiseRejected(h._settledValue,a):this._promiseFulfilled(h,a)};i.prototype._scanDirectValues=function(a){for(var b=0;b<a&&!this._isResolved();++b)this._settlePromiseAt(b)};i.prototype._isResolved=function(){return null===this._values};i.prototype._resolve=function(a){this._values=
null;this._promise._fulfill(a)};i.prototype.__hardReject__=i.prototype._reject=function(a){this._values=null;var b=f(a)?a:Error(a+"");this._promise._attachExtraTrace(b);this._promise._reject(a,b)};i.prototype._promiseProgressed=function(a,b){this._isResolved()||this._promise._progress({index:b,value:a})};i.prototype._promiseFulfilled=function(a,b){this._isResolved()||(this._values[b]=a,++this._totalResolved>=this._length&&this._resolve(this._values))};i.prototype._promiseRejected=function(a){this._isResolved()||
(this._totalResolved++,this._reject(a))};i.prototype.shouldCopyValues=function(){return!0};i.prototype.getActualLength=function(a){return a};return i}},{"./errors.js":10,"./util.js":35}],22:[function(d,o){function b(a){return function(b,e){if(null!==a){if(b){var d=k(b),d=d instanceof Error&&l.getPrototypeOf(d)===Error.prototype?new f(d):d;m.markAsOriginatingFromRejection(d);a._attachExtraTrace(d);a._reject(d)}else if(2<arguments.length){for(var d=arguments.length,p=Array(d-1),g=1;g<d;++g)p[g-1]=arguments[g];
a._fulfill(p)}else a._fulfill(e);a=null}}}var a=d("./util.js"),k=a.maybeWrapAsError,m=d("./errors.js"),i=m.TimeoutError,f=m.OperationalError,j=d("./async.js"),a=a.haveGetters,l=d("./es5.js"),n;n=a?function(a){this.promise=a}:function(a){this.promise=a;this.callback=this.asCallback=b(a)};a&&(a={get:function(){return b(this.promise)}},l.defineProperty(n.prototype,"asCallback",a),l.defineProperty(n.prototype,"callback",a));n._nodebackForPromise=b;n.prototype.toString=function(){return"[object PromiseResolver]"};
n.prototype.resolve=n.prototype.fulfill=function(a){if(!(this instanceof n))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.");var b=this.promise;b._tryFollow(a)||j.invoke(b._fulfill,b,a)};n.prototype.reject=function(a){if(!(this instanceof n))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.");
var b=this.promise;m.markAsOriginatingFromRejection(a);var e=m.canAttach(a)?a:Error(a+"");b._attachExtraTrace(e);j.invoke(b._reject,b,a);e!==a&&j.invoke(this._setCarriedStackTrace,this,e)};n.prototype.progress=function(a){if(!(this instanceof n))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.");j.invoke(this.promise._progress,this.promise,a)};n.prototype.cancel=function(){j.invoke(this.promise.cancel,
this.promise,void 0)};n.prototype.timeout=function(){this.reject(new i("timeout"))};n.prototype.isResolved=function(){return this.promise.isResolved()};n.prototype.toJSON=function(){return this.promise.toJSON()};n.prototype._setCarriedStackTrace=function(a){this.promise.isRejected()&&this.promise._setCarriedStackTrace(a)};o.exports=n},{"./async.js":2,"./errors.js":10,"./es5.js":12,"./util.js":35}],23:[function(d,o){o.exports=function(b,a){function k(a){try{return!0===a.__isPromisified__}catch(b){return!1}}
function m(a){return n.isIdentifier(a)?"."+a:"['"+a.replace(/(['\\])/g,"\\$1")+"']"}function i(g,f,d,p,i){for(var p=Math.max(0,("number"===typeof p.length?Math.max(Math.min(p.length,1024),0):0)-1),k=[p],j=Math.max(0,p-1-5),q=p-1;q>=j;--q)q!==p&&k.push(q);for(q=p+1;5>=q;++q)k.push(q);d="string"===typeof d&&n.isIdentifier(d)?d+i:"promisified";return(new Function("Promise","callback","receiver","withAppended","maybeWrapAsError","nodebackForPromise","INTERNAL","                                         \n        var ret = function FunctionName(Parameters) {                        \n            'use strict';                                                    \n            var len = arguments.length;                                      \n            var promise = new Promise(INTERNAL);                             \n            promise._setTrace(void 0);                                       \n            var fn = nodebackForPromise(promise);                            \n            try {                                                            \n                switch(len) {                                                \n                    [CodeForSwitchCase]                                      \n                }                                                            \n            } catch (e) {                                                    \n                var wrapped = maybeWrapAsError(e);                           \n                promise._attachExtraTrace(wrapped);                          \n                promise._reject(wrapped);                                    \n            }                                                                \n            return promise;                                                  \n        };                                                                   \n        ret.__isPromisified__ = true;                                        \n        return ret;                                                          \n        ".replace("FunctionName",
d).replace("Parameters",n.filledRange(p,"_arg","")).replace("[CodeForSwitchCase]",function(){for(var a="",b=0;b<k.length;++b){var c="case "+k[b]+":",e,h=k[b];e=n.filledRange(h,"arguments[","]").join(", ");var h=0<h?", ":"",d=void 0,d="string"===typeof g?"                                                          \n                this.method({{args}}, fn);                                   \n                break;                                                       \n            ".replace(".method",
m(g)):f===l?"                                                         \n                callback.call(this, {{args}}, fn);                           \n                break;                                                       \n            ":void 0!==f?"                                                         \n                callback.call(receiver, {{args}}, fn);                       \n                break;                                                       \n            ":"                                                         \n                callback({{args}}, fn);                                      \n                break;                                                       \n            ";
e=d.replace("{{args}}",e).replace(", ",h);a+=c+e}b="string"===typeof g?"                                                  \n                this.property.apply(this, args);                             \n            ".replace(".property",m(g)):f===l?"                                                  \n                callback.apply(this, args);                                  \n            ":"                                                  \n                callback.apply(receiver, args);                              \n            ";
return a+="                                                             \n        default:                                                             \n            var args = new Array(len + 1);                                   \n            var i = 0;                                                       \n            for (var i = 0; i < len; ++i) {                                  \n               args[i] = arguments[i];                                       \n            }                                                                \n            args[i] = fn;                                                    \n            [CodeForCall]                                                    \n            break;                                                           \n        ".replace("[CodeForCall]",
b)}())))(b,g,f,c,e,h,a)}function f(g,f){function d(){var p=f;f===l&&(p=this);"string"===typeof g&&(g=p[g]);var k=new b(a);k._setTrace(void 0);var i=h(k);try{g.apply(p,c(arguments,i))}catch(m){p=e(m),k._attachExtraTrace(p),k._reject(p)}return k}d.__isPromisified__=!0;return d}function j(a,b,c,e){for(var g=RegExp(b.replace(/([$])/,"\\$")+"$"),h=n.inheritedDataKeys(a),f=[],d=0;d<h.length;++d){var i=h[d],m=a[i],j;if(j="function"===typeof m)if(j=!k(m))j=n.getDataPropertyOrDefault(a,i+b,o),j=!(j&&k(j))&&
c(i,m,a);j&&f.push(i,m)}for(c=0;c<f.length;c+=2)if(h=f[c],g.test(h)){h=h.replace(g,"");for(d=0;d<f.length;d+=2)if(f[d]===h)throw new p("Cannot promisify an API that has normal methods with '"+b+"'-suffix");}g=0;for(c=f.length;g<c;g+=2)h=f[g],d=f[g+1],a[h+b]=e===u?u(h,l,h,d,b):e(d);n.toFastProperties(a);return a}var l={},n=d("./util.js"),h=d("./promise_resolver.js")._nodebackForPromise,c=n.withAppended,e=n.maybeWrapAsError,q=n.canEvaluate,p=d("./errors").TypeError,g=function(a,b){return n.isIdentifier(a)&&
"_"!==a.charAt(0)&&!n.isClass(b)},o={__isPromisified__:!0},u=q?i:f;b.promisify=function(a,b){if("function"!==typeof a)throw new p("fn must be a function");return k(a)?a:u(a,2>arguments.length?l:b,void 0,a)};b.promisifyAll=function(a,b){if("function"!==typeof a&&"object"!==typeof a)throw new p("the target of promisifyAll must be an object or a function");var b=Object(b),c=b.suffix;"string"!==typeof c&&(c="Async");var e=b.filter;"function"!==typeof e&&(e=g);var h=b.promisifier;"function"!==typeof h&&
(h=u);if(!n.isIdentifier(c))throw new RangeError("suffix must be a valid identifier");for(var f=n.inheritedDataKeys(a,{includeHidden:!0}),d=0;d<f.length;++d){var k=a[f[d]];"constructor"!==f[d]&&n.isClass(k)&&(j(k.prototype,c,e,h),j(k,c,e,h))}return j(a,c,e,h)}}},{"./errors":10,"./promise_resolver.js":22,"./util.js":35}],24:[function(d,o){o.exports=function(b,a,k){function m(a){for(var b=n.keys(a),e=b.length,f=Array(2*e),d=0;d<e;++d){var g=b[d];f[d]=a[g];f[d+e]=g}this.constructor$(f)}function i(a){var c=
k(a,void 0);if(l(c))a=c instanceof b?c._then(b.props,void 0,void 0,void 0,void 0):(new m(c)).promise();else return j("cannot await properties of a non-object");c instanceof b&&a._propagateFrom(c,4);return a}var f=d("./util.js"),j=d("./errors_api_rejection")(b),l=f.isObject,n=d("./es5.js");f.inherits(m,a);m.prototype._init=function(){this._init$(void 0,-3)};m.prototype._promiseFulfilled=function(a,b){if(!this._isResolved()&&(this._values[b]=a,++this._totalResolved>=this._length)){for(var e={},f=this.length(),
d=0,g=this.length();d<g;++d)e[this._values[d+f]]=this._values[d];this._resolve(e)}};m.prototype._promiseProgressed=function(a,b){this._isResolved()||this._promise._progress({key:this._values[b+this.length()],value:a})};m.prototype.shouldCopyValues=function(){return!1};m.prototype.getActualLength=function(a){return a>>1};b.prototype.props=function(){return i(this)};b.props=function(a){return i(a)}}},{"./errors_api_rejection":11,"./es5.js":12,"./util.js":35}],25:[function(d,o){function b(a,b,d,f,j){for(var l=
0;l<j;++l)d[l+f]=a[l+b]}function a(a){this._capacity=a;this._front=this._length=0;this._makeCapacity()}a.prototype._willBeOverCapacity=function(a){return this._capacity<a};a.prototype._pushOne=function(a){var b=this.length();this._checkCapacity(b+1);this[this._front+b&this._capacity-1]=a;this._length=b+1};a.prototype.push=function(a,b,d){var f=this.length()+3;if(this._willBeOverCapacity(f))this._pushOne(a),this._pushOne(b),this._pushOne(d);else{var j=this._front+f-3;this._checkCapacity(f);var l=this._capacity-
1;this[j+0&l]=a;this[j+1&l]=b;this[j+2&l]=d;this._length=f}};a.prototype.shift=function(){var a=this._front,b=this[a];this[a]=void 0;this._front=a+1&this._capacity-1;this._length--;return b};a.prototype.length=function(){return this._length};a.prototype._makeCapacity=function(){for(var a=this._capacity,b=0;b<a;++b)this[b]=void 0};a.prototype._checkCapacity=function(a){this._capacity<a&&this._resizeTo(this._capacity<<3)};a.prototype._resizeTo=function(a){var d=this._front,i=this._capacity,f=Array(i),
j=this.length();b(this,0,f,0,i);this._capacity=a;this._makeCapacity();this._front=0;d+j<=i?b(f,d,this,0,j):(a=j-(d+j&i-1),b(f,d,this,0,a),b(f,0,this,a,j-a))};o.exports=a},{}],26:[function(d,o){o.exports=function(b,a,k){function m(d,n){var h=k(d,void 0);if(h instanceof b)return h.then(function(a){return m(a,h)});if(!f(d))return i("expecting an array, a promise or a thenable");var c=new b(a);void 0!==n?c._propagateFrom(n,7):c._setTrace(void 0);for(var e=c._fulfill,q=c._reject,p=0,g=d.length;p<g;++p){var o=
d[p];(void 0!==o||j.call(d,p))&&b.cast(o)._then(e,q,void 0,c,null)}return c}var i=d("./errors_api_rejection.js")(b),f=d("./util.js").isArray,j={}.hasOwnProperty;b.race=function(a){return m(a,void 0)};b.prototype.race=function(){return m(this,void 0)}}},{"./errors_api_rejection.js":11,"./util.js":35}],27:[function(d,o){o.exports=function(b,a,k,m,i){function f(a,c,h,g){this.constructor$(a);this._preservedValues=g===i?[]:null;this._zerothIsAccum=void 0===h;this._gotAccum=!1;this._reducingIndex=this._zerothIsAccum?
1:0;this._valuesPhase=void 0;var a=m(h,void 0),g=!1,f=a instanceof b;f&&(a.isPending()?a._proxyPromiseArray(this,-1):a.isFulfilled()?(h=a.value(),this._gotAccum=!0):(a._unsetRejectionIsUnhandled(),this._reject(a.reason()),g=!0));!f&&!this._zerothIsAccum&&(this._gotAccum=!0);this._callback=c;this._accum=h;g||this._init$(void 0,-5)}function j(a,b,c,g){return"function"!==typeof b?k("fn must be a function"):(new f(a,b,c,g)).promise()}var l=d("./util.js"),n=l.tryCatch4,h=l.tryCatch3,c=l.errorObj;l.inherits(f,
a);f.prototype._init=function(){};f.prototype._resolveEmptyArray=function(){if(this._gotAccum||this._zerothIsAccum)this._resolve(null!==this._preservedValues?[]:this._accum)};f.prototype._promiseFulfilled=function(a,f){var d=this._values;if(null!==d){var g=this.length(),i=this._preservedValues,k=null!==i,j=this._gotAccum,l=this._valuesPhase,o;if(!l){l=this._valuesPhase=Array(g);for(o=0;o<g;++o)l[o]=0}o=l[f];0===f&&this._zerothIsAccum?(j||(this._accum=a,this._gotAccum=j=!0),l[f]=0===o?1:2):-1===f?
j||(this._accum=a,this._gotAccum=j=!0):0===o?l[f]=1:(l[f]=2,j&&(this._accum=a));if(j){for(var j=this._callback,t=this._promise._boundTo,s=this._reducingIndex;s<g;++s)if(o=l[s],2===o)this._reducingIndex=s+1;else{if(1!==o)return;a=d[s];if(a instanceof b)if(a.isFulfilled())a=a._settledValue;else{if(a.isPending())return;a._unsetRejectionIsUnhandled();return this._reject(a.reason())}k?(i.push(a),o=h(j,t,a,s,g)):o=n(j,t,this._accum,a,s,g);if(o===c)return this._reject(o.e);var r=m(o,void 0);if(r instanceof
b){if(r.isPending())return l[s]=4,r._proxyPromiseArray(this,s);if(r.isFulfilled())o=r.value();else return r._unsetRejectionIsUnhandled(),this._reject(r.reason())}this._reducingIndex=s+1;this._accum=o}this._reducingIndex<g||this._resolve(k?i:this._accum)}}};b.prototype.reduce=function(a,b){return j(this,a,b,null)};b.reduce=function(a,b,c,g){return j(a,b,c,g)}}},{"./util.js":35}],28:[function(d,o){var b;if("object"===typeof process&&"string"===typeof process.version)b=function(a){process.nextTick(a)};
else if("undefined"!==typeof MutationObserver&&(b=MutationObserver)||"undefined"!==typeof WebKitMutationObserver&&(b=WebKitMutationObserver)){var a=document.createElement("div"),k=void 0;(new b(function(){var a=k;k=void 0;a()})).observe(a,{attributes:!0});b=function(b){k=b;a.classList.toggle("foo")}}else if("undefined"!==typeof setTimeout)b=function(a){setTimeout(a,0)};else throw Error("no async scheduler available");o.exports=b},{}],29:[function(d,o){o.exports=function(b,a){function k(a){this.constructor$(a)}
var m=b.PromiseInspection;d("./util.js").inherits(k,a);k.prototype._promiseResolved=function(a,b){this._values[a]=b;++this._totalResolved>=this._length&&this._resolve(this._values)};k.prototype._promiseFulfilled=function(a,b){if(!this._isResolved()){var d=new m;d._bitField=268435456;d._settledValue=a;this._promiseResolved(b,d)}};k.prototype._promiseRejected=function(a,b){if(!this._isResolved()){var d=new m;d._bitField=134217728;d._settledValue=a;this._promiseResolved(b,d)}};b.settle=function(a){return(new k(a)).promise()};
b.prototype.settle=function(){return(new k(this)).promise()}}},{"./util.js":35}],30:[function(d,o){o.exports=function(b,a,k){function m(a){this.constructor$(a);this._howMany=0;this._initialized=this._unwrap=!1}function i(a,b){if((b|0)!==b||0>b)return k("expecting a positive integer");var e=new m(a),f=e.promise();if(f.isRejected())return f;e.setHowMany(b);e.init();return f}var f=d("./util.js"),j=d("./errors.js").RangeError,l=d("./errors.js").AggregateError,n=f.isArray;f.inherits(m,a);m.prototype._init=
function(){if(this._initialized)if(0===this._howMany)this._resolve([]);else{this._init$(void 0,-5);var a=n(this._values);!this._isResolved()&&(a&&this._howMany>this._canPossiblyFulfill())&&this._reject(this._getRangeError(this.length()))}};m.prototype.init=function(){this._initialized=!0;this._init()};m.prototype.setUnwrap=function(){this._unwrap=!0};m.prototype.howMany=function(){return this._howMany};m.prototype.setHowMany=function(a){this._isResolved()||(this._howMany=a)};m.prototype._promiseFulfilled=
function(a){this._isResolved()||(this._addFulfilled(a),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values)))};m.prototype._promiseRejected=function(a){if(!this._isResolved()&&(this._addRejected(a),this.howMany()>this._canPossiblyFulfill())){for(var a=new l,b=this.length();b<this._values.length;++b)a.push(this._values[b]);this._reject(a)}};m.prototype._fulfilled=function(){return this._totalResolved};
m.prototype._rejected=function(){return this._values.length-this.length()};m.prototype._addRejected=function(a){this._values.push(a)};m.prototype._addFulfilled=function(a){this._values[this._totalResolved++]=a};m.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()};m.prototype._getRangeError=function(a){return new j("Input array must contain at least "+this._howMany+" items but contains only "+a+" items")};m.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))};
b.some=function(a,b){return i(a,b)};b.prototype.some=function(a){return i(this,a)};b._SomePromiseArray=m}},{"./errors.js":10,"./util.js":35}],31:[function(d,o){o.exports=function(b){function a(a){void 0!==a?(this._bitField=a._bitField,this._settledValue=a.isResolved()?a._settledValue:void 0):(this._bitField=0,this._settledValue=void 0)}a.prototype.isFulfilled=b.prototype.isFulfilled=function(){return 0<(this._bitField&268435456)};a.prototype.isRejected=b.prototype.isRejected=function(){return 0<(this._bitField&
134217728)};a.prototype.isPending=b.prototype.isPending=function(){return 0===(this._bitField&402653184)};a.prototype.value=b.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise");return this._settledValue};a.prototype.error=a.prototype.reason=b.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise");return this._settledValue};a.prototype.isResolved=b.prototype.isResolved=
function(){return 0<(this._bitField&402653184)};b.PromiseInspection=a}},{}],32:[function(d,o){o.exports=function(b,a){var k=d("./util.js"),m=d("./errors.js").canAttach,i=k.errorObj,f=k.isObject,j={}.hasOwnProperty;return function(d,k){if(f(d)){if(d instanceof b)return d;if(j.call(d,"_promise0")){var h=new b(a);h._setTrace(void 0);d._then(h._fulfillUnchecked,h._rejectUncheckedCheckError,h._progressUnchecked,h,null);h._setFollowing();return h}try{h=d.then}catch(c){i.e=c,h=i}if(h===i)return void 0!==
k&&m(h.e)&&k._attachExtraTrace(h.e),b.reject(h.e);if("function"===typeof h){var e=function(a){w||(w=!0,d===a?(a=b._makeSelfResolutionError(),void 0!==k&&k._attachExtraTrace(a),g.promise._reject(a,void 0)):g.resolve(a))},o=function(a){if(!w){w=!0;var b=m(a)?a:Error(a+"");void 0!==k&&k._attachExtraTrace(b);g.promise._reject(a,b)}},p=function(a){if(!w){var b=g.promise;"function"===typeof b._progress&&b._progress(a)}},g=b.defer(),w=!1;try{h.call(d,e,o,p)}catch(u){w||(w=!0,h=m(u)?u:Error(u+""),void 0!==
k&&k._attachExtraTrace(h),g.promise._reject(u,h))}return g.promise}}return d}}},{"./errors.js":10,"./util.js":35}],33:[function(d,o){var b=function(a,b){var d=arguments[2],i=arguments[3],f=5<=arguments.length?arguments[4]:void 0;setTimeout(function(){a(d,i,f)},b|0)};o.exports=function(a,k,m){d("./util.js");var i=d("./errors.js");d("./errors_api_rejection")(a);var f=a.TimeoutError,j=function(a,b,e){a.isPending()&&("string"!==typeof b&&(b="operation timed out after "+e+" ms"),b=new f(b),i.markAsOriginatingFromRejection(b),
a._attachExtraTrace(b),a._cancel(b))},l=function(a,b){b._fulfill(a)},n=a.delay=function(d,c){void 0===c&&(c=d,d=void 0);var c=+c,e=m(d,void 0),f=new a(k);if(e instanceof a)return f._propagateFrom(e,7),f._follow(e),f.then(function(b){return a.delay(b,c)});f._setTrace(void 0);b(l,c,d,f);return f};a.prototype.delay=function(a){return n(this,a)};a.prototype.timeout=function(d,c){var d=+d,e=new a(k);e._propagateFrom(this,7);e._follow(this);b(j,d,e,c,d);return e.cancellable()}}},{"./errors.js":10,"./errors_api_rejection":11,
"./util.js":35}],34:[function(d,o){o.exports=function(b,a,k){function m(a){for(var c=a.length,e=0;e<c;++e){var d=a[e];if(d.isRejected())return b.reject(d.error());a[e]=d.value()}return a}function i(a){setTimeout(function(){throw a;},0)}function f(a,c){function e(){if(d>=f)return h.resolve();var j;j=a[d++];var l=k(j,void 0);l!==j&&("function"===typeof j._isDisposable&&"function"===typeof j._getDisposer&&j._isDisposable())&&l._setDisposable(j._getDisposer());j=l;if(j instanceof b&&j._isDisposable()){try{j=
k(j._getDisposer().tryDispose(c),void 0)}catch(m){return i(m)}if(j instanceof b)return j._then(e,i,null,null,null)}e()}var d=0,f=a.length,h=b.defer();e();return h.promise}function j(a){var b=new o;b._settledValue=a;b._bitField=268435456;return f(this,b).thenReturn(a)}function l(a){var b=new o;b._settledValue=a;b._bitField=134217728;return f(this,b).thenThrow(a)}function n(a,b){this._data=a;this._promise=b}function h(a,b){this.constructor$(a,b)}var c=d("./errors.js").TypeError,e=d("./util.js").inherits,
o=b.PromiseInspection;n.prototype.data=function(){return this._data};n.prototype.promise=function(){return this._promise};n.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():null};n.prototype.tryDispose=function(a){var b=this.resource(),a=null!==b?this.doDispose(b,a):null;this._promise._unsetDisposable();this._data=this._promise=null;return a};n.isDisposer=function(a){return null!=a&&"function"===typeof a.resource&&"function"===typeof a.tryDispose};e(h,n);h.prototype.doDispose=
function(a,b){return this.data().call(a,a,b)};b.using=function(){var c=arguments.length;if(2>c)return a("you must pass at least 2 arguments to Promise.using");var e=arguments[c-1];if("function"!==typeof e)return a("fn must be a function");c--;for(var d=Array(c),f=0;f<c;++f){var h=arguments[f];if(n.isDisposer(h)){var i=h,h=h.promise();h._setDisposable(i)}d[f]=h}return b.settle(d).then(m).spread(e)._then(j,l,void 0,d,void 0)};b.prototype._setDisposable=function(a){this._bitField|=262144;this._disposer=
a};b.prototype._isDisposable=function(){return 0<(this._bitField&262144)};b.prototype._getDisposer=function(){return this._disposer};b.prototype._unsetDisposable=function(){this._bitField&=-262145;this._disposer=void 0};b.prototype.disposer=function(a){if("function"===typeof a)return new h(a,this);throw new c;}}},{"./errors.js":10,"./util.js":35}],35:[function(d,o){function b(a){return"string"===typeof a?a:""+a}function a(a){return null==a||!0===a||!1===a||"string"===typeof a||"number"===typeof a}
var k=d("./es5.js"),m;try{var i={};k.defineProperty(i,"f",{get:function(){return 3}});m=3===i.f}catch(f){m=!1}var i="undefined"==typeof navigator,j={e:{}},l=function(){return"string"!==this}.call("string"),n;n=k.isES5?function(a,b){for(var d=[],f=Object.create(null),g=Object(b).includeHidden?Object.getOwnPropertyNames:Object.keys;null!=a;){var h;try{h=g(a)}catch(j){break}for(var i=0;i<h.length;++i){var l=h[i];if(!f[l]){f[l]=!0;var m=Object.getOwnPropertyDescriptor(a,l);null!=m&&(null==m.get&&null==
m.set)&&d.push(l)}}a=k.getPrototypeOf(a)}return d}:function(a){var b=[],d;for(d in a)b.push(d);return b};var h=/^[a-z$_][a-z$_0-9]*$/i;o.exports={isClass:function(a){try{if("function"===typeof a){var b=k.keys(a.prototype);return 0<b.length&&!(1===b.length&&"constructor"===b[0])}return!1}catch(d){return!1}},isIdentifier:function(a){return h.test(a)},inheritedDataKeys:n,getDataPropertyOrDefault:function(a,b,d){if(k.isES5){if(a=Object.getOwnPropertyDescriptor(a,b),null!=a)return null==a.get&&null==a.set?
a.value:d}else return{}.hasOwnProperty.call(a,b)?a[b]:void 0},thrower:function(a){throw a;},isArray:k.isArray,haveGetters:m,notEnumerableProp:function(b,e,d){if(a(b))return b;k.defineProperty(b,e,{value:d,configurable:!0,enumerable:!1,writable:!0});return b},isPrimitive:a,isObject:function(b){return!a(b)},canEvaluate:i,errorObj:j,tryCatch1:function(a,b,d){try{return a.call(b,d)}catch(f){return j.e=f,j}},tryCatch2:function(a,b,d,f){try{return a.call(b,d,f)}catch(g){return j.e=g,j}},tryCatch3:function(a,
b,d,f,g){try{return a.call(b,d,f,g)}catch(h){return j.e=h,j}},tryCatch4:function(a,b,d,f,g,h){try{return a.call(b,d,f,g,h)}catch(i){return j.e=i,j}},tryCatchApply:function(a,b,d){try{return a.apply(d,b)}catch(f){return j.e=f,j}},inherits:function(a,b){function d(){this.constructor=a;this.constructor$=b;for(var g in b.prototype)f.call(b.prototype,g)&&"$"!==g.charAt(g.length-1)&&(this[g+"$"]=b.prototype[g])}var f={}.hasOwnProperty;d.prototype=b.prototype;a.prototype=new d;return a.prototype},withAppended:function(a,
b){var d=a.length,f=Array(d+1),g;for(g=0;g<d;++g)f[g]=a[g];f[g]=b;return f},asString:b,maybeWrapAsError:function(c){return!a(c)?c:Error(b(c))},wrapsPrimitiveReceiver:l,toFastProperties:function(a){function b(){}b.prototype=a;return b},filledRange:function(a,b,d){for(var f=Array(a),g=0;g<a;++g)f[g]=b+g+d;return f}}},{"./es5.js":12}]},{},[3])(3)};"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define(t):"undefined"!=typeof r?r.Promise=t():"undefined"!=typeof global?
global.Promise=t():"undefined"!=typeof self&&(self.Promise=t());!0;"undefined"!==typeof r&&null!==r?r.P=r.Promise:"undefined"!==typeof self&&null!==self&&(self.P=self.Promise)});;
;
/* module-key = 'com.atlassian.jira.jira-onboarding-assets-plugin:promise', location = 'jira-onboarding-assets-module/lib/bluebird-promise-amd.js' */
define('bluebird/Promise', ["atlassian/libs/bluebird-2.3.6"], function(bluebird) {
    return bluebird;
});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-backbone-define', location = 'js/util/DevStatusBackboneDefine.js' */
"use strict";Backbone&&!Backbone.define&&(Backbone.define=function(name,ctor){eval("Backbone['Class: "+name+"'] = function() { Backbone['Class: "+name+"'].__ctor.apply(this, arguments); }");var cls=Backbone["Class: "+name];cls.__ctor=ctor,ctor.prototype.name=name,cls.prototype=ctor.prototype,_.extend(cls,ctor),_.each(ctor.prototype,function(t,e){"function"==typeof t&&(t.displayName=name+"."+e)});var context=window,parts=name.split(".");return _.each(parts,function(t,e){e===parts.length-1?context[t]=cls:context=null==context[t]?context[t]={}:context[t]}),cls});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:event-publisher', location = 'js/util/EventPublisher.js' */
"use strict";define("jira-development-status/util/event-publisher",function(){return{trigger:AJS.trigger}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-wrm', location = 'js/util/DevStatusWRM.js' */
"use strict";define("jira-development-status/util/WRM",["underscore","jira-development-status/util/event-publisher"],function(e,r){var n="wrc!com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-dialog-resources-ctx",i="jira.devsummary.dialog-resources.wrm.load",t=function(){return window.performance.now()},a=function(e){var r=t();WRM.require([n],function(){o(r),e&&e()})},u=function(e){var n=Math.round(t()-e);r.trigger("analyticsEvent",{name:i,data:{durationInMillis:n}})},o=e.once(u);return{ANALYTIC_EVENT:i,requireDetailDialogResources:a}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:utils', location = 'js/util/DateUtils.js' */
"use strict";define("jira/dev-status/util/date",["jquery"],function(t){return{addTooltip:function(a){var e=a.find("time.livestamp");e.livestamp(),e.each(function(){var a=t(this),e=a.attr("datetime"),i=isNaN(e)?e:+e,r=moment(i);a.attr("title",r.format(JIRA.DevStatus.Date.format))})},format:"LLL"}}),function(t){AJS.namespace("JIRA.DevStatus.Date",null,t)}(require("jira/dev-status/util/date"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:utils', location = 'js/util/dev-status-console.js' */
"use strict";define("jira-development-status/util/console",[],function(){if(console)return console;var e=function(){};return{log:e,info:e,warn:e,debug:e,error:e}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:utils', location = 'js/util/dev-status-constants.js' */
"use strict";define("jira-development-status/util/constants",function(){return{PLUGIN_KEY:"com.atlassian.jira.plugins.jira-development-integration-plugin",RELEASE_REPORT_SELECTED_TAB:"release-report-selected-tab"}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:utils', location = 'js/util/LocalStorage.js' */
"use strict";define("jira-development-status/util/local-storage",[],function(){return localStorage?localStorage:{setItem:function(){},getItem:function(){},removeItem:function(){},clear:function(){}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:utils', location = 'js/util/ApplinksUtils.js' */
"use strict";define("jira-development-status/util/applinks-utils",[],function(){return ApplinksUtils});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:utils', location = 'js/util/DevStatusLocalStorage.js' */
"use strict";define("jira-development-status/util/dev-status-local-storage",["underscore","jira-development-status/util/console","jira-development-status/util/local-storage"],function(e,t,r){var o=e.extend({},r);return o.setItem=function(e,o){try{r.setItem(e,o)}catch(a){var l="";(22===a.code||1014===a.code&&"NS_ERROR_DOM_QUOTA_REACHED"===a.name)&&(l=". Browser local storage is full. For more information please follow https://confluence.atlassian.com/jirakb/functionality-in-jira-fails-due-to-exceeding-chrome-quota-762874705.html"),t.error("Couldn't store '"+e+"' & '"+o+"' key-value pair locally: "+a.name+l)}},o.getItem=function(e){try{return r.getItem(e)}catch(o){t.error("Couldn't retrieve locally stored value for key '"+e+"': "+o.name)}},o.removeItem=function(e){try{r.removeItem(e)}catch(o){t.error("Couldn't remove locally stored value for key '"+e+"': "+o.name)}},o.clear=function(){try{r.clear()}catch(e){t.error("Couldn't clear local storage: "+e.name)}},o});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:utils', location = 'js/util/Listeners.js' */
"use strict";define("jira/devstatus/util/listeners",["underscore"],function(t){return Class.extend({init:function(){this._listening=[]},startListening:function(t,i,n,s){var e={start:function(){return t.on(i,n,s),this},stop:function(){return t.off(i,n,s),this}};this._listening.push(e.start())},stopListening:function(){t.each(this._listening,function(t){t.stop()}),this._listening=[]}})}),Backbone.define("JIRA.DevStatus.Util.Listeners",require("jira/devstatus/util/listeners"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:utils', location = 'js/util/DevStatusNavigation.js' */
"use strict";define("jira-development-status/util/navigate",["underscore"],function(n){return{getUrl:function(){return window.location.href},reload:function(){n.defer(function(){window.location.reload()})},navigate:function(t){n.defer(function(){window.location=t})},redirectToLogin:function(){this.navigate(AJS.contextPath()+"/login.jsp?permissionViolation=true&os_destination="+encodeURIComponent(window.location.href))}}}),function(n){AJS.namespace("JIRA.DevStatus.Navigate",null,n)}(require("jira-development-status/util/navigate"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:utils', location = 'js/util/DevStatusURLUtils.js' */
"use strict";define("jira/dev-status/util/url",["jquery","underscore"],function(e,t){return{getDetailDialogParam:function(){var e=this._removeKickAssIHashFromUrl(JIRA.DevStatus.Navigate.getUrl()),t=parseUri(e);return t&&t.queryKey&&t.queryKey.devStatusDetailDialog},getUrlWithDetailDialogParam:function(e){var t=this._removeKickAssIHashFromUrl(JIRA.DevStatus.Navigate.getUrl()),r=parseUri(t);return r.queryKey.devStatusDetailDialog=encodeURIComponent(e),this.createUrlFromParsedUri(r)},getCreateReviewDetailUrl:function(e){return this.getUrlWithDetailDialogParam("create-review-"+e)},isCreateReviewDetailDialogLink:function(e){return e&&e.lastIndexOf&&0===e.lastIndexOf("create-review-",0)},getCreateReviewDetailDialogApplicationType:function(e){return e.substring("create-review-".length)},_removeKickAssIHashFromUrl:function(e){return e.replace("i#","")},createUrlFromParsedUri:function(r){var a=[];e.each(r.queryKey,function(r,i){t.isObject(i)?e.each(i,function(e,t){a.push(r+"="+t)}):a.push(r+"="+i)});var i="";return r.protocol&&(i+=r.protocol+"://"),r.authority&&(i+=r.authority),r.path&&(i+=r.path),a.length>0&&(i+="?"+a.join("&")),r.anchor&&(i+="#"+r.anchor),i}}}),function(e){AJS.namespace("JIRA.DevStatus.URL",null,e)}(require("jira/dev-status/util/url"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:utils', location = 'js/util/Sanitize.js' */
"use strict";define("jira-development-status/util/sanitize",["underscore"],function(t){function n(t){return c.indexOf(t[0])>-1}function r(t){if(!t)return"about:blank";var r,e,i=t.replace(u,"").trim();return n(i)?i:(e=i.match(o))?(r=e[0],a.test(r)?"about:blank":i):"about:blank"}function e(n,e){for(var i=t.clone(n),a=e||[],u=0;u<a.length;u++){var o=a[u];n.hasOwnProperty(o)&&"string"==typeof i[o]&&(i[o]=r(i[o]))}return i}function i(n,r){return t.map(n,function(t){return e(t,r)})}var a=/^(%20|\s)*(javascript|data)/im,u=/[^\x20-\x7E]/gim,o=/^([^:]+):/gm,c=[".","/"];return{sanitizeUrl:r,sanitizeObject:e,sanitizeCollection:i}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:utils', location = 'js/util/ES6Utils.js' */
"use strict";define("jira/dev-status/util/es6",["exports"],function(e){e.stringStartsWith=function(e,t){return e.slice(0,0+t.length)===t},e.findIndex=function(e,t){for(var n=0;n<e.length;++n)if(t(e[n]))return n;return-1},e.requestIdleCallback=function(e){"requestIdleCallback"in window?window.requestIdleCallback(e):setTimeout(e)}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts', location = 'templates/repository-shortcuts/repository-shortcuts.soy' */
// This file was automatically generated from repository-shortcuts.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Software.RepositoryShortcuts.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Software == 'undefined') { JIRA.Software = {}; }
if (typeof JIRA.Software.RepositoryShortcuts == 'undefined') { JIRA.Software.RepositoryShortcuts = {}; }
if (typeof JIRA.Software.RepositoryShortcuts.Templates == 'undefined') { JIRA.Software.RepositoryShortcuts.Templates = {}; }


JIRA.Software.RepositoryShortcuts.Templates.content = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.canManageShortcuts || opt_data.numberOfShortcuts > 0) {
    output += '<div class="aui-sidebar-group jira-sidebar-group-with-divider repo-shortcuts-group' + ((opt_data.numberOfShortcuts == 0) ? ' repo-shortcuts-group_empty' : '') + '" data-id="repo-shortcuts-group"><div class="aui-nav-heading">' + soy.$$escapeHtml('Source code') + '</div><ul class="aui-nav repo-shortcuts-list">';
    if (opt_data.shortcuts) {
      var shortcutList14 = opt_data.shortcuts;
      var shortcutListLen14 = shortcutList14.length;
      for (var shortcutIndex14 = 0; shortcutIndex14 < shortcutListLen14; shortcutIndex14++) {
        var shortcutData14 = shortcutList14[shortcutIndex14];
        output += JIRA.Software.RepositoryShortcuts.Templates.shortcut({canManageShortcuts: opt_data.canManageShortcuts, canManageDVCS: opt_data.canManageDVCS, id: shortcutData14.id, name: shortcutData14.name, url: shortcutData14.url, dvcsType: shortcutData14.dvcsType, shouldWarnPotentialConnection: shortcutData14.shouldWarnPotentialConnection, isFirstSyncRunning: shortcutData14.isFirstSyncRunning});
      }
    }
    output += ((opt_data.canManageShortcuts) ? '<li><a class="aui-nav-item repo-shortcuts-group__add" href="#" data-link-id="repo-shortcut-add">' + aui.icons.icon({useIconFont: true, size: 'large', icon: 'add-small'}) + '<span class="aui-nav-item-label">' + soy.$$escapeHtml('Add source code') + '</span></a></li>' : '') + '</ul></div>';
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Software.RepositoryShortcuts.Templates.content.soyTemplateName = 'JIRA.Software.RepositoryShortcuts.Templates.content';
}


JIRA.Software.RepositoryShortcuts.Templates.shortcut = function(opt_data, opt_ignored) {
  var output = '';
  var imgBaseUrl__soy37 = "" + '/download/resources/com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts/images';
  output += '<li class="repo-shortcut"><a class="aui-nav-item repo-shortcuts-group__link" href="' + soy.$$escapeHtml(opt_data.url) + '" title="' + soy.$$escapeHtml(opt_data.name) + '" target="_blank" data-shortcut-id="' + soy.$$escapeHtml(opt_data.id) + '" data-link-id="repo-shortcut-' + soy.$$escapeHtml(opt_data.id) + '">' + ((opt_data.dvcsType == 'bitbucket') ? '<span class="aui-icon aui-icon-large aui-iconfont-bitbucket">' + soy.$$escapeHtml('Bitbucket source code link') + '</span>' : (opt_data.dvcsType == 'github') ? '<img class="aui-icon" src="' + soy.$$escapeHtml(imgBaseUrl__soy37) + '/octocat-icon.svg" alt="' + soy.$$escapeHtml('GitHub source code link') + '" />' : '<span class="aui-icon aui-icon-large aui-iconfont-link">' + soy.$$escapeHtml('Unknown source code link') + '</span>') + '<span class="aui-nav-item-label">' + soy.$$escapeHtml(opt_data.name) + '</span></a>' + ((opt_data.canManageShortcuts) ? '<a href="#repo-shortcuts-dropdown_' + soy.$$escapeHtml(opt_data.id) + '" aria-owns="repo-shortcuts-dropdown_' + soy.$$escapeHtml(opt_data.id) + '" aria-haspopup="true" class="aui-dropdown2-trigger repo-shortcuts-group__actions" style="' + ((opt_data.isFirstSyncRunning || opt_data.shouldWarnPotentialConnection) ? 'right: 40px' : '') + '"><span>' + soy.$$escapeHtml('Actions') + '</span></a><div id="repo-shortcuts-dropdown_' + soy.$$escapeHtml(opt_data.id) + '" class="aui-dropdown2 aui-style-default repo-shortcuts-group__dropdown"><ul class="aui-list-truncate">' + ((opt_data.shouldWarnPotentialConnection) ? '' : '') + '<li><a class="repo-shortcuts-group__actions__edit" href="#">' + soy.$$escapeHtml('Edit') + '</a></li><li><a class="repo-shortcuts-group__actions__delete" href="#">' + soy.$$escapeHtml('Delete') + '</a></li></ul></div>' : '') + ((opt_data.isFirstSyncRunning) ? '<a class="repo-shortcuts-group__warning syncing-trigger" href="#syncing-dialog-' + soy.$$escapeHtml(opt_data.id) + '" data-aui-trigger aria-controls="syncing-dialog-' + soy.$$escapeHtml(opt_data.id) + '"><span class="aui-icon aui-icon-small aui-iconfont-warning" original-title="warning">$' + soy.$$escapeHtml('Sync in progress') + '</span></a>' + JIRA.Software.RepositoryShortcuts.Templates.syncInProgressDialog(opt_data) : '') + ((opt_data.shouldWarnPotentialConnection) ? '<a class="repo-shortcuts-group__warning suggest-connection-trigger" href="#suggest-connection-dialog-' + soy.$$escapeHtml(opt_data.id) + '" data-aui-trigger aria-controls="suggest-connection-dialog-' + soy.$$escapeHtml(opt_data.id) + '"><span class="aui-icon aui-icon-small aui-iconfont-warning" original-title="warning">$' + soy.$$escapeHtml('Sync in progress') + '</span></a>' : '') + '</li>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Software.RepositoryShortcuts.Templates.shortcut.soyTemplateName = 'JIRA.Software.RepositoryShortcuts.Templates.shortcut';
}


JIRA.Software.RepositoryShortcuts.Templates.shortcutFormFields = function(opt_data, opt_ignored) {
  return '<div class="repo-shortcuts-field-group">' + aui.form.textField({name: 'repo-shortcuts-url-' + opt_data.action, id: 'repo-shortcuts-url-' + opt_data.action, labelContent: opt_data.urlLabel ? opt_data.urlLabel : 'Repo link', placeholderText: 'e.g. https://bitbucket.org/org/projectrepository', extraClasses: 'repo-shortcuts-url', value: opt_data.url ? opt_data.url : '', errorTexts: opt_data.errors.urlError ? [opt_data.errors.urlError] : []}) + '<div class="field-group repo-shortcuts-name">' + aui.form.label({forField: 'repo-shortcuts-name-' + opt_data.action, content: opt_data.nameLabel ? opt_data.nameLabel : 'Label'}) + '<div class="repo-shortcuts-name-icon-block"><div class="repo-shortcuts-icon-picker-block"></div>' + aui.form.input({name: 'repo-shortcuts-name-' + opt_data.action, id: 'repo-shortcuts-name-' + opt_data.action, placeholderText: 'e.g. Project repository', extraClasses: 'repo-shortcuts-name-input' + (opt_data.isWithIcon ? ' repo-shortcuts-name-input-with-icon' : ''), value: opt_data.name ? opt_data.name : '', type: 'text'}) + '</div>' + ((opt_data.errors.iconError) ? aui.form.fieldError({message: opt_data.errors.iconError}) : '') + ((opt_data.errors.nameError) ? aui.form.fieldError({message: opt_data.errors.nameError}) : '') + '</div></div>';
};
if (goog.DEBUG) {
  JIRA.Software.RepositoryShortcuts.Templates.shortcutFormFields.soyTemplateName = 'JIRA.Software.RepositoryShortcuts.Templates.shortcutFormFields';
}


JIRA.Software.RepositoryShortcuts.Templates.addDialog = function(opt_data, opt_ignored) {
  return '<div class="repo-shortcuts-header-image add-repo"></div><form action="" method="post" class="aui"><h3>' + soy.$$escapeHtml('Create a repo link') + '</h3><p>' + soy.$$escapeHtml('Add a link to this project\x27s repo so your team can easily find their code.') + '</p><fieldset>' + JIRA.Software.RepositoryShortcuts.Templates.shortcutFormFields(soy.$$augmentMap(opt_data, {action: 'add'})) + '<div class="buttons-container"><div class="buttons repo-shortcuts-buttons">' + aui.buttons.button({text: 'Link repo', type: 'primary', extraClasses: 'repo-shortcuts-submit'}) + aui.buttons.button({text: 'Cancel', type: 'link', extraClasses: 'repo-shortcuts-cancel'}) + '</div></div></fieldset></form>';
};
if (goog.DEBUG) {
  JIRA.Software.RepositoryShortcuts.Templates.addDialog.soyTemplateName = 'JIRA.Software.RepositoryShortcuts.Templates.addDialog';
}


JIRA.Software.RepositoryShortcuts.Templates.adg3ManageShortcutDialog = function(opt_data, opt_ignored) {
  return '<section role="dialog" id="' + soy.$$escapeHtml(opt_data.isAddDialog ? 'add-repository-dialog' : 'edit-repository-dialog') + '" class="aui-layer aui-dialog2 aui-dialog2-medium" aria-hidden="false"><header class="aui-dialog2-header" id="manage-shortcut-dialog-header"></header><div class="aui-dialog2-content"><div id="image-behind"><div id="image-behind-top"></div><div id="image-behind-bottom"></div></div><div id="manage-repository-image-container"><div id="manage-repository-dialog-image"></div></div><form action="" method="post" class="aui"><h1 id="manage-repository-dialog-title">' + soy.$$escapeHtml(opt_data.isAddDialog ? 'Connect a repository' : 'Edit repository') + '</h1><p id="manage-repository-dialog-description">' + soy.$$escapeHtml('Linking a repository will show information about your branches, commits and pull requests in Jira issues.') + '</p><fieldset>' + JIRA.Software.RepositoryShortcuts.Templates.shortcutFormFields(soy.$$augmentMap(opt_data, {action: opt_data.isAddDialog ? 'add' : 'edit', urlLabel: 'Repository link', nameLabel: 'Name'})) + '</fieldset><button type="submit" class="repo-shortcuts-hidden-submit" tabindex="-1"></button></form></div><div class="aui-dialog2-footer"><div class="buttons-container"><div class="buttons">' + ((! opt_data.isAddDialog) ? '<button class="aui-button repo-shortcuts-delete">' + soy.$$escapeHtml('Delete') + '</button>' : '') + '<button class="aui-button aui-button-primary repo-shortcuts-submit">' + soy.$$escapeHtml(opt_data.isAddDialog ? 'Connect' : 'Update') + '</button><button class="aui-button aui-button-text aui-button-subtle repo-shortcuts-cancel">' + soy.$$escapeHtml('Cancel') + '</button></div></div></div></section>';
};
if (goog.DEBUG) {
  JIRA.Software.RepositoryShortcuts.Templates.adg3ManageShortcutDialog.soyTemplateName = 'JIRA.Software.RepositoryShortcuts.Templates.adg3ManageShortcutDialog';
}


JIRA.Software.RepositoryShortcuts.Templates.adg3AddDialog = function(opt_data, opt_ignored) {
  return '' + JIRA.Software.RepositoryShortcuts.Templates.adg3ManageShortcutDialog(soy.$$augmentMap(opt_data, {isAddDialog: true}));
};
if (goog.DEBUG) {
  JIRA.Software.RepositoryShortcuts.Templates.adg3AddDialog.soyTemplateName = 'JIRA.Software.RepositoryShortcuts.Templates.adg3AddDialog';
}


JIRA.Software.RepositoryShortcuts.Templates.adg3EditDialog = function(opt_data, opt_ignored) {
  return '' + JIRA.Software.RepositoryShortcuts.Templates.adg3ManageShortcutDialog(soy.$$augmentMap(opt_data, {isAddDialog: false}));
};
if (goog.DEBUG) {
  JIRA.Software.RepositoryShortcuts.Templates.adg3EditDialog.soyTemplateName = 'JIRA.Software.RepositoryShortcuts.Templates.adg3EditDialog';
}


JIRA.Software.RepositoryShortcuts.Templates.suggestConnectionDialog = function(opt_data, opt_ignored) {
  return '<div class="repo-shortcuts-header-image connection-request"></div><h3 class="repo-shortcuts-connectionRequestHeading">' + soy.$$escapeHtml('Linked but not integrated') + '</h3><p class="repo-shortcuts-connectionRequestDescription">' + soy.$$escapeHtml(AJS.format('Your repo is now linked, but your team can get visibility of development progress in their issues when {0} and Jira are integrated.',opt_data.dvcsName)) + '</p>' + ((opt_data.isIntegration) ? aui.buttons.button({text: AJS.format('Integrate Jira with {0}',opt_data.dvcsName), type: 'primary', extraClasses: 'repo-connection-start'}) : aui.buttons.button({text: 'Sync repository with Jira', type: 'primary', extraClasses: 'repo-connection-start'})) + aui.buttons.button({text: 'No thanks', type: 'link', extraClasses: 'repo-connection-cancel'});
};
if (goog.DEBUG) {
  JIRA.Software.RepositoryShortcuts.Templates.suggestConnectionDialog.soyTemplateName = 'JIRA.Software.RepositoryShortcuts.Templates.suggestConnectionDialog';
}


JIRA.Software.RepositoryShortcuts.Templates.syncInProgressDialog = function(opt_data, opt_ignored) {
  return '<aui-inline-dialog id="syncing-dialog-' + soy.$$escapeHtml(opt_data.id) + '" class="repo-shortcuts-syncing-dialog" responds-to="hover"><div class="repo-shortcuts-syncing-dialog-header"></div><h3>' + soy.$$escapeHtml(AJS.format('Syncing Jira with {0}',opt_data.dvcsType)) + '</h3><p>' + soy.$$escapeHtml(AJS.format('We\x27re busy syncing Jira with {0} \xe2\x80\x93 larger repos will take an hour or two. Once done, your team will',opt_data.dvcsType)) + '&nbsp;<a href="https://confluence.atlassian.com/display/JIRASOFTWARECLOUD/Using+JIRA+applications+with+Bitbucket+Cloud">' + soy.$$escapeHtml('enjoy greater confidence') + '</a>&nbsp;' + soy.$$escapeHtml('in their development process, and they can start') + '&nbsp;<a href="https://confluence.atlassian.com/display/BITBUCKET/Processing+JIRA+Software+issues+with+Smart+Commit+messages">' + soy.$$escapeHtml('using issue keys') + '</a>&nbsp;' + soy.$$escapeHtml('in commit messages right now!') + '</p>' + ((opt_data.canManageDVCS) ? aui.buttons.button({text: 'See syncing progress', type: 'link', href: '/secure/admin/ConfigureDvcsOrganizations!default.jspa'}) : '') + '</aui-inline-dialog>';
};
if (goog.DEBUG) {
  JIRA.Software.RepositoryShortcuts.Templates.syncInProgressDialog.soyTemplateName = 'JIRA.Software.RepositoryShortcuts.Templates.syncInProgressDialog';
}


JIRA.Software.RepositoryShortcuts.Templates.editDialogChrome = function(opt_data, opt_ignored) {
  return '<section role="dialog" id="edit-repo-shortcuts-dialog" class="aui-layer aui-dialog2 aui-dialog2-small" aria-hidden="true" data-aui-remove-on-hide="true"><header class="aui-dialog2-header"><h2 class="aui-dialog2-header-main">' + soy.$$escapeHtml('Edit repo link') + '</h2></header></section>';
};
if (goog.DEBUG) {
  JIRA.Software.RepositoryShortcuts.Templates.editDialogChrome.soyTemplateName = 'JIRA.Software.RepositoryShortcuts.Templates.editDialogChrome';
}


JIRA.Software.RepositoryShortcuts.Templates.editDialog = function(opt_data, opt_ignored) {
  return '<div class="aui-dialog2-content"><form class="aui" method="post">' + JIRA.Software.RepositoryShortcuts.Templates.shortcutFormFields(soy.$$augmentMap(opt_data, {action: 'edit'})) + '<button type="submit" class="repo-shortcuts-hidden-submit" tabindex="-1"></button></form></div><footer class="aui-dialog2-footer"><div class="aui-dialog2-footer-actions">' + aui.buttons.button({text: 'Save', type: 'primary', extraClasses: 'repo-shortcuts-submit'}) + aui.buttons.button({text: 'Cancel', type: 'link', extraClasses: 'repo-shortcuts-cancel'}) + '</div></footer>';
};
if (goog.DEBUG) {
  JIRA.Software.RepositoryShortcuts.Templates.editDialog.soyTemplateName = 'JIRA.Software.RepositoryShortcuts.Templates.editDialog';
}


JIRA.Software.RepositoryShortcuts.Templates.deleteDialog = function(opt_data, opt_ignored) {
  return '<section role="dialog" id="delete-repo-shortcuts-dialog" class="aui-layer aui-dialog2 aui-dialog2-small" aria-hidden="true" data-aui-remove-on-hide="true"><header class="aui-dialog2-header"><h2 class="aui-dialog2-header-main">' + soy.$$escapeHtml('Delete repo link') + '</h2></header><div class="aui-dialog2-content"><p>' + soy.$$escapeHtml('Are you sure you want to delete this repo link?') + '</p></div><footer class="aui-dialog2-footer"><div class="aui-dialog2-footer-actions">' + aui.buttons.button({text: 'Delete', type: 'primary', extraClasses: 'repo-shortcuts-submit'}) + aui.buttons.button({text: 'Cancel', type: 'link', extraClasses: 'repo-shortcuts-cancel'}) + '</div></footer></section>';
};
if (goog.DEBUG) {
  JIRA.Software.RepositoryShortcuts.Templates.deleteDialog.soyTemplateName = 'JIRA.Software.RepositoryShortcuts.Templates.deleteDialog';
}


JIRA.Software.RepositoryShortcuts.Templates.modalValuePropContent = function(opt_data, opt_ignored) {
  var output = '';
  var imgBaseUrl__soy267 = "" + '/download/resources/com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts/images';
  output += '<div class="aui-dialog2-content"><img src="' + soy.$$escapeHtml(imgBaseUrl__soy267) + '/integrate-product-with-jira.svg" style="width: 100%" /><div class="description-container">' + ((opt_data.canUserManageDVCSAccounts && ! opt_data.isIntegration) ? '<p>' + soy.$$escapeHtml(AJS.format('A shortcut to your {0} repository has been created.',opt_data.dvcsName)) + '</p><p>' + soy.$$escapeHtml(AJS.format('Next, sync your Jira Cloud and {0} repository.',opt_data.dvcsName)) + '</p>' : '') + '</div></div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Software.RepositoryShortcuts.Templates.modalValuePropContent.soyTemplateName = 'JIRA.Software.RepositoryShortcuts.Templates.modalValuePropContent';
}


JIRA.Software.RepositoryShortcuts.Templates.integrationModalContent = function(opt_data, opt_ignored) {
  return '<header class="aui-dialog2-header"><h2 class="aui-dialog2-header-main" style="overflow: visible">' + ((opt_data.isIntegration) ? soy.$$escapeHtml(AJS.format('Integrate Jira with {0}',opt_data.dvcsName)) : soy.$$escapeHtml('Sync repository with Jira')) + '</h2></header>' + JIRA.Software.RepositoryShortcuts.Templates.modalValuePropContent(opt_data) + '<footer class="aui-dialog2-footer"><div class="aui-dialog2-footer-actions">' + ((opt_data.canUserManageDVCSAccounts && opt_data.isIntegration) ? aui.buttons.button({text: AJS.format('Integrate with {0}',opt_data.dvcsName), type: 'primary', extraClasses: 'repo-connect-start'}) : (opt_data.canUserManageDVCSAccounts && ! opt_data.isIntegration) ? aui.buttons.button({text: 'Start syncing', type: 'primary', extraClasses: 'repo-connect-start'}) : '<div></div>') + ((opt_data.canUserManageDVCSAccounts) ? aui.buttons.button({text: 'Edit repository', type: 'link', extraClasses: 'repo-connect-edit aui-button-subtle'}) : aui.buttons.button({text: 'Maybe later', type: 'link', extraClasses: 'repo-connect-cancel'})) + '</div></footer>';
};
if (goog.DEBUG) {
  JIRA.Software.RepositoryShortcuts.Templates.integrationModalContent.soyTemplateName = 'JIRA.Software.RepositoryShortcuts.Templates.integrationModalContent';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts', location = 'js/repository-shortcuts/services/URLMatcher.js' */
"use strict";define("repository-shortcuts/services/url-matcher",[],function(){return{parseUrl:function(t){function s(t,s,e){if(t&&t[1]&&s.indexOf(t[1])===-1&&e.indexOf(t[2])===-1)return{dvcsOrg:t[1],dvcsRepo:t[2]}}function e(){var e=/https:\/\/bitbucket\.org(?:\/([^\/\?#]+)(?:\/([^\/\?#]+))?)?/,r=t.match(e),c=["snippets","account","dashboard"],i=["profile"];return s(r,c,i)}function r(){var e=/https:\/\/github\.com(?:\/([^\/\?#]+)(?:\/([^\/\?#]+))?)?/,r=t.match(e),c=["pulls","issues","notifications","explore","integrations","settings","blog","about","site","security"],i=[];return s(r,c,i)}if("string"!=typeof t)throw new Error("parseUrl expects URLs to be strings");return e()?{dvcsType:"bitbucket",dvcsOrg:e().dvcsOrg,dvcsRepo:e().dvcsRepo}:r()?{dvcsType:"github",dvcsOrg:r().dvcsOrg,dvcsRepo:r().dvcsRepo}:{dvcsType:"unsupported"}}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts', location = 'js/repository-shortcuts/services/DVCSAccountMatcher.js' */
"use strict";define("repository-shortcuts/services/dvcs-account-matcher",["jquery","underscore","bluebird/Promise","wrm/context-path","repository-shortcuts/services/url-matcher"],function(e,t,r,n,s){return{matchUrlAgainstNetwork:function(c){function i(s){var c=n()+"/rest/bitbucket/1.0/repository/summary/find?type="+s.dvcsType+"&orgName="+s.dvcsOrg+"&repoSlug="+s.dvcsRepo;return r.resolve(e.get(c)).then(function(e){return t.extend({},s,e)})["catch"](function(e){return e&&404===e.status?u(s):s})}function u(t){var s=n()+"/rest/bitbucket/1.0/organization/find?name="+t.dvcsOrg+"&type="+t.dvcsType;return r.resolve(e.get(s)).then(function(e){var r=e.dvcsType,n=e.name,s=e.approvalState,c=r===t.dvcsType,i=n===t.dvcsOrg,u="APPROVED"===s;return t.isOrganisationLinked=c&&i&&u,t})["catch"](function(e){return t})}function o(t){var s=n()+"/rest/devinfoadmin/1.0/githubAppDetails";return r.resolve(e.get(s)).then(function(e){var r=e.githubAppInstalled;return r&&(t.isOrganisationLinked=!0,t.isRepositoryLinked=!0),t.githubAppInstalled=r,t})["catch"](function(e){return t})}try{var a=s.parseUrl(c);return"unsupported"===a.dvcsType?r.resolve(a):"github"===a.dvcsType?o(a):a.dvcsRepo?i(a):u(a)}catch(p){return r.reject(p)}}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts', location = 'js/repository-shortcuts/services/DVCSIntegrator.js' */
"use strict";define("repository-shortcuts/services/dvcs-integrator",["jquery","bluebird/Promise","wrm/context-path","aui/flag"],function(t,e,o,n){function r(r){var i=r.dvcsRepoId,a=r.dvcsRepo;return e.resolve(t.ajax({type:"POST",contentType:"application/json",url:o()+"/rest/bitbucket/1.0/repo/"+i+"/autolink",data:JSON.stringify({payload:!0})})).then(function(){t.ajax({type:"POST",url:o()+"/rest/bitbucket/1.0/repository/"+i+"/softsync"}),n({type:"success",title:"You have added the repository",body:"Nicely done! Your team is going to love this.",close:"auto"})})["catch"](function(t){return n({type:"error",body:AJS.format("Failed to link \u003cstrong\u003e{0}\u003c/strong\u003e repo with Jira",a)}),e.reject(t)})}function i(t){if(void 0===t)return"";var e=t.length;if(0===e)return"";if(1===e)return"/"===t?"":t;var o="/"===t.charAt(0),n="/"===t.charAt(e-1);return t.substring(o?1:0,n?e-1:e)}function a(t,e,o,n,r){var a=i(n),c=t+"//"+i(e)+"/"+i(o),s=i(c);return s+"/"+a+"?atl_token="+r}function c(t){var e=""+o(),n=window.location.host,r=window.location.protocol,i=a(r,n,e,s,t);window.location.href=i}var s="/plugins/servlet/upm/marketplace/plugins/com.github.integration.production";return{startBBOrganisationLink:function(t){var e=""+window.location.origin+o(),n=e+"/rest/aci/1.0/installation/jira-bitbucket-connector-plugin/descriptor",r=document.getElementById("atlassian-token").getAttribute("content"),i=e+"/secure/BitbucketPostInstallApprovalAction.jspa?jiraInitiated=true&customReturnUrl="+(window.location.href+"&atl_token="+r),a="https://bitbucket.org/site/addons/authorize";window.location.href=a+"?account="+t+"&descriptor_uri="+encodeURIComponent(n)+"&redirect_uri="+encodeURIComponent(i)},startBBRepositoryLink:function(t){var e=t.dvcsRepoId,o=t.dvcsRepo;return r({dvcsRepoId:e,dvcsRepo:o})},startGithubOrganisationLink:function(){var t=document.getElementById("atlassian-token").getAttribute("content");c(t)},startGithubRepositoryLink:function(t){var e=(t.dvcsRepoId,t.dvcsRepo,document.getElementById("atlassian-token").getAttribute("content"));c(e)},normalize:function(t){return i(t)},buildAbsoluteAddOnMarketplaceUrl:function(t,e,o,n,r){return a(t,e,o,n,r)}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts', location = 'js/repository-shortcuts/services/RepoShortcutUpdateHandler.js' */
"use strict";define("repository-shortcuts/services/repo-shortcut-update-handler",["repository-shortcuts/views/connection-modal","aui/flag"],function(e,t){return function(t,r){t.attributes;if(!t.hasLinkedAllComponents()){var o={repoShortcutModel:t,canUserManageDVCSAccounts:r},n=new e(o);r&&n.render()}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts', location = 'js/repository-shortcuts/models/RepositoryShortcut.js' */
"use strict";define("repository-shortcuts/models/repository-shortcut",[],function(){return JIRA.Projects.Sidebar.ProjectShortcuts.Entities.Shortcut.extend({defaults:{url:"",name:"",icon:"",type:"source.code.link",dvcsType:"unsupported",isPendingApproval:!1,dvcsOrg:void 0,dvcsRepo:void 0,dvcsRepoId:void 0,isOrganisationLinked:void 0,isRepositoryLinked:void 0,isFirstSyncRunning:void 0,githubAppInstalled:!1},clear:function(){this.unset("id"),this.set(this.defaults)},hasLinkedOrg:function(){var t=this.attributes;return t.dvcsOrg&&t.isOrganisationLinked},hasNotLinkedOrg:function(){var t=this.attributes;return t.dvcsOrg&&!t.isOrganisationLinked},hasLinkedOrgAndNotRepo:function(){var t=this.attributes;return this.hasLinkedOrg()&&t.dvcsRepo&&!t.isRepositoryLinked},isGithub:function(){var t=this.attributes;return"github"===t.dvcsType},hasLinkedAllComponents:function(){function t(){return s.dvcsRepo&&s.isRepositoryLinked}function i(){return!s.dvcsRepo}var s=this.attributes;return this.isGithub()?s.githubAppInstalled:this.hasLinkedOrg()&&(t()||i())}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts', location = 'js/repository-shortcuts/models/RepositoryShortcuts.js' */
"use strict";define("repository-shortcuts/models/repository-shortcuts",["repository-shortcuts/models/repository-shortcut"],function(t){return JIRA.Projects.Sidebar.ProjectShortcuts.Entities.Shortcuts.extend({model:t,initialize:function(t,e){var i=this;this.projectKey=e.projectKey,this.canUserManageDVCSAccounts=e.canUserManageDVCSAccounts,this.listenTo(this,"dvcsremote:change",function(t){i._handleRepoLinkChangeOrAdd(t)})},_handleRepoLinkChangeOrAdd:function(t){var e=function(t,e){return t.get("dvcsType")===e.get("dvcsType")&&t.get("dvcsOrg")===e.get("dvcsOrg")},i=function(t,i){return e(t,i)&&t.get("dvcsRepo")===i.get("dvcsRepo")};this.forEach(function(n){t.id!==n.id&&(i(t,n)?n.set({isOrganisationLinked:t.get("isOrganisationLinked"),isRepositoryLinked:t.get("isRepositoryLinked"),dvcsRepoId:t.get("dvcsRepoId"),isFirstSyncRunning:t.get("isFirstSyncRunning")}):e(t,n)&&n.set({isOrganisationLinked:t.get("isOrganisationLinked")}))})}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts', location = 'js/repository-shortcuts/views/RepositoryShortcutsList.js' */
"use strict";define("repository-shortcuts/views/repository-shortcut-list",["jquery","repository-shortcuts/views/repository-shortcut","repository-shortcuts/dialogs/add"],function(t,e,o){return JIRA.Projects.Sidebar.ProjectShortcuts.Views.List.extend({template:JIRA.Software.RepositoryShortcuts.Templates.content,childView:e,ui:{itemsContainer:".aui-nav",add:".repo-shortcuts-group__add"},collectionEvents:{add:function(){0!==this.collection.length&&this.$el.hasClass("repo-shortcuts-group_empty")&&this.$el.removeClass("repo-shortcuts-group_empty")},remove:function(){0!==this.collection.length||this.$el.hasClass("repo-shortcuts-group_empty")||this.$el.addClass("repo-shortcuts-group_empty")}},initialize:function(){var e=this;JIRA.API.getSidebar().done(function(o){var r=o.getAUISidebar(!0);r.on("expand-end",function(){t(".aui-sidebar-submenu-dialog .repo-shortcuts-group__dropdown").remove(),t(".aui-sidebar-submenu-dialog .repo-shortcuts-syncing-dialog").remove()}),r.on("collapse-start",function(){e.$(".repo-shortcuts-group__actions.aui-dropdown2-active").trigger("aui-button-invoke"),e._addConnectionsAvailableMarkerOnSidebarIcon()})})},onRender:function(){var t=this,e=new o({sidebarItem:JIRA.API.Sidebar.getGroup(this.options.targetGroup,!0).getItem("repo-shortcut-add"),projectKey:this.collection.projectKey,collection:this.collection}),r=JIRA.API.Projects.getCurrentProjectId();this.listenTo(e,"dialog:open",function(){t.trigger("add:open"),AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.sidebar.connect-repo.add-link.click",data:{projectId:r}})}),this.listenTo(e,"dialog:close",function(e){t.trigger("add:close",e),AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.connect-repo.add-link.close",data:{projectId:r,isSave:e}})}),this._addConnectionsAvailableMarkerOnSidebarIcon()},serializeData:function(){return{canManageShortcuts:!0,numberOfShortcuts:this.collection.length}},_addConnectionsAvailableMarkerOnSidebarIcon:function(){var t=this.collection.some(function(t){return t.hasNotLinkedOrg()||t.hasLinkedOrgAndNotRepo()});t&&this.$el.addClass("connections-available")}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts', location = 'js/repository-shortcuts/views/RepositoryShortcut.js' */
"use strict";define("repository-shortcuts/views/repository-shortcut",["jquery","underscore","repository-shortcuts/dialogs/connection","repository-shortcuts/dialogs/edit","repository-shortcuts/services/dvcs-integrator"],function(e,t,o,r,i){function n(e){return"bitbucket"===e||"github"===e}return JIRA.Projects.Sidebar.ProjectShortcuts.Views.Shortcut.extend({template:JIRA.Software.RepositoryShortcuts.Templates.shortcut,initialize:function(){t.bindAll(this,"toggleDropdown")},ui:{integrate:".repo-shortcuts-group__actions__integrate",del:".repo-shortcuts-group__actions__delete",edit:".repo-shortcuts-group__actions__edit",trigger:".repo-shortcuts-group__actions",dropdown:".repo-shortcuts-group__dropdown",link:".repo-shortcuts-group__link",connectionDialogTrigger:".suggest-connection-trigger"},templateHelpers:function(){var e=this.model.attributes,t=this.model.collection.canUserManageDVCSAccounts,o=n(e.dvcsType);if(t&&this.model.isGithub()){var r=e.githubAppInstalled;return{warnOnGithubConnection:r}}var i=!(!e.isOrganisationLinked||e.dvcsRepo&&!e.isRepositoryLinked),s=t&&o&&!i;return{shouldWarnPotentialConnection:s}},onRender:function(){this.unwrapTemplate();var t=this,n=e(window),s=e(".aui-sidebar-body");new o({$trigger:this.ui.connectionDialogTrigger,repoShortcutModel:this.model}),this.ui.integrate.on("click",function(e){var o=t.model.attributes;if(e.preventDefault(),t.ui.trigger.blur(),"bitbucket"===o.dvcsType&&t.model.hasNotLinkedOrg())i.startBBOrganisationLink(o.dvcsOrg);else if("bitbucket"===o.dvcsType&&t.model.hasLinkedOrgAndNotRepo())i.startBBRepositoryLink(t.model.attributes).then(function(){t.model.set({isRepositoryLinked:!0}),t.model.trigger("dvcsremote:change",t.model)});else{if("github"!==o.dvcsType)throw"Unsupported DVCS Type";o.githubAppInstalled||i.startGithubOrganisationLink()}}),this.ui.edit.on("click",function(e){e.preventDefault(),t.ui.trigger.blur();var o=new r({repoShortcutModel:t.model,canUserManageDVCSAccounts:t.model.collection.canUserManageDVCSAccounts});t.trigger("edit:open",t.model),t.listenToOnce(o,"dialog:close",function(e){t.trigger("edit:close",t.model,e)})}),this.ui.del.on("click",function(e){e.preventDefault(),t.ui.trigger.blur(),new JIRA.Projects.Sidebar.ProjectShortcuts.Dialogs.Delete({model:t.model})}),this.ui.dropdown.on({"aui-dropdown2-show":function(){t.$el.addClass("aui-nav-selected"),s.one("scroll",t.toggleDropdown),n.one("scroll",t.toggleDropdown),t.ui.trigger.focus()},"aui-dropdown2-hide":function(){t.$el.removeClass("aui-nav-selected"),s.off("scroll",t.toggleDropdown),n.off("scroll",t.toggleDropdown)}}),this.ui.connectionDialogTrigger.on("click",function(){AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.sidebar.connect-repo.warning.click",data:{projectId:JIRA.API.Projects.getCurrentProjectId(),shortcutId:t.model.id}})}),this.ui.link.on("click",function(){AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.sidebar.connect-repo.shortcut.click",data:{projectId:JIRA.API.Projects.getCurrentProjectId(),shortcutId:t.model.id,shortcutType:t.model.dvcsType}})})},serializeData:function(){var e=t.extend(this.model.toJSON(),{canManageShortcuts:!0,canManageDVCS:this.model.collection.canUserManageDVCSAccounts});return e}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts', location = 'js/repository-shortcuts/views/DialogContent.js' */
"use strict";define("repository-shortcuts/views/dialog-content",["repository-shortcuts/services/url-matcher","repository-shortcuts/services/dvcs-account-matcher"],function(t,e){var r=JIRA.Projects.Sidebar.ProjectShortcuts.Views.DialogContent;return r.extend({ui:{form:"form",inputs:"input, button",submit:".repo-shortcuts-submit",cancel:".repo-shortcuts-cancel",url:".repo-shortcuts-url input",name:".repo-shortcuts-name input"},events:{"click @ui.cancel":function(t){t.preventDefault(),this.model.clear(),this.setNameAutomagically=!0,this.errorModel.clear(),this.trigger("cancel")},"click @ui.submit":"_handleFormSubmit","submit @ui.form":"_handleFormSubmit","blur @ui.url":function(){this.ensureProtocolPrefix(),this.tryToAutomagicallyDeriveNameFromUrl()},"input @ui.url":function(){this.model.set("url",this.ui.url.val()),this.tryToAutomagicallyDeriveNameFromUrl()},"input @ui.name":function(){this.setNameAutomagically=!1,this.model.set("name",this.ui.name.val())}},initialize:function(t){var e=t.errorModel,r=t.canUserManageDVCSAccounts;this.canUserManageDVCSAccounts=r,this.errorModel=e;var i=this.model.get("name");this.setNameAutomagically=0===i.length},serializeData:function(){return _.extend(this.model.toJSON(),{errors:this.errorModel.toJSON(),action:this.action})},onRender:function(){},hideIconPicker:function(){},_handleFormSubmit:function(r){var i=this,o=function(t){i.model.set({url:i.ui.url.val(),name:i.ui.name.val()}),i.model.set(t),i.model.save()};r.preventDefault(),this.ensureProtocolPrefix(),this.tryToAutomagicallyDeriveNameFromUrl(),this.model.set(this.model.defaults);var s=this.ui.url.val();if(this.canUserManageDVCSAccounts)e.matchUrlAgainstNetwork(s).then(function(t){return o(t)})["catch"](function(){return o({})});else{var a=t.parseUrl(s);o(a)}},tryToAutomagicallyDeriveNameFromUrl:function(){var e=this.ui.url.val().trim();if(this.setNameAutomagically){var i=t.parseUrl(e);if(i.dvcsRepo)this.setName(i.dvcsRepo);else{if(!i.dvcsOrg)return r.prototype.tryToAutomagicallyDeriveNameFromUrl.call(this);this.setName(i.dvcsOrg)}}}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts', location = 'js/repository-shortcuts/views/AddDialogContent.js' */
"use strict";define("repository-shortcuts/views/add-dialog-content",["repository-shortcuts/views/dialog-content"],function(t){var e=JIRA.Software.RepositoryShortcuts.Templates.adg3AddDialog;return t.extend({template:e})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts', location = 'js/repository-shortcuts/views/EditDialogContent.js' */
"use strict";define("repository-shortcuts/views/edit-dialog-content",["repository-shortcuts/views/dialog-content"],function(t){return t.extend({template:JIRA.Software.RepositoryShortcuts.Templates.adg3EditDialog,ui:_.extend({},t.prototype.ui,{"delete":".repo-shortcuts-delete"})})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts', location = 'js/repository-shortcuts/views/ConnectionDialogContent.js' */
"use strict";define("repository-shortcuts/views/connection-dialog-content",["repository-shortcuts/services/dvcs-integrator"],function(t){return JIRA.Projects.Libs.Marionette.ItemView.extend({template:JIRA.Software.RepositoryShortcuts.Templates.suggestConnectionDialog,ui:{start:".repo-connection-start",cancel:".repo-connection-cancel"},events:{"click @ui.start":function(t){t.preventDefault(),this.triggerSubmitAnalyticEvent(),this.startConnection(),this.trigger("connection:start")},"click @ui.cancel":function(t){t.preventDefault(),this.triggerCancelAnalyticEvent(),this.trigger("connection:cancel")}},triggerSubmitAnalyticEvent:function(){this.isIntegration?AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.connect-repo.inline-integrate.click",data:{projectId:JIRA.API.Projects.getCurrentProjectId(),shortcutType:this.dvcsName}}):AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.connect-repo.inline-sync.click",data:{projectId:JIRA.API.Projects.getCurrentProjectId(),shortcutType:this.dvcsName}})},triggerCancelAnalyticEvent:function(){this.isIntegration?AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.connect-repo.inline-integrate.cancel",data:{projectId:JIRA.API.Projects.getCurrentProjectId(),shortcutType:this.dvcsName}}):AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.connect-repo.inline-sync.cancel",data:{projectId:JIRA.API.Projects.getCurrentProjectId(),shortcutType:this.dvcsName}})},templateHelpers:function(){return{dvcsName:this.dvcsName,isIntegration:this.isIntegration}},initialize:function(e){var n=e.repoShortcutModel,i=function(t){t.set({isRepositoryLinked:!0}),t.trigger("dvcsremote:change",t)},r=n.attributes;if(this.dvcsName="bitbucket"===r.dvcsType?"Bitbucket":"GitHub",this.isIntegration=n.hasNotLinkedOrg(),"bitbucket"===r.dvcsType&&n.hasNotLinkedOrg())this.startConnection=function(){return t.startBBOrganisationLink(r.dvcsOrg)};else if("bitbucket"===r.dvcsType&&n.hasLinkedOrgAndNotRepo())this.startConnection=function(){t.startBBRepositoryLink(n.attributes).then(function(){return i(n)})};else{if("github"!==r.dvcsType)throw"Unsupported DVCS Type";r.githubAppInstalled||(this.startConnection=function(){t.startGithubOrganisationLink()})}}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts', location = 'js/repository-shortcuts/views/modal-dialogs/ConnectionModal.js' */
"use strict";define("repository-shortcuts/views/connection-modal",["underscore","aui/flag","repository-shortcuts/services/dvcs-integrator"],function(t,e,i){var n="aui-dialog2-small";return JIRA.Projects.Libs.Marionette.ItemView.extend({template:JIRA.Software.RepositoryShortcuts.Templates.integrationModalContent,tagName:"section",attributes:{role:"dialog","class":"aui-layer aui-dialog2 "+n+" repo-integration-dialog","aria-hidden":"true","data-aui-modal":"false","data-aui-focus-selector":".aui-dialog2-content .repo-connect-start"},ui:{submit:".repo-connect-start",cancel:".repo-connect-cancel",edit:".repo-connect-edit"},events:{"click @ui.submit":function(t){t.preventDefault(),this.triggerSubmitAnalyticEvent(),this.handleSubmit()},"click @ui.cancel":function(t){t.preventDefault(),this.triggerCancelAnalyticEvent(),this._removeAndHide()},"click @ui.edit":function(t){t.preventDefault(),this._removeAndHide(),this.triggerEditAnalyticEvent(),this.repoShortcutModel.trigger("edit:start",this.repoShortcutModel.id)}},templateHelpers:function(){return{dvcsName:this.dvcsName,canUserManageDVCSAccounts:this.canUserManageDVCSAccounts,isIntegration:this.isIntegration}},_removeAndHide:function(){var t=this;AJS.dialog2(this.$el).hide(),setTimeout(function(){return t.destroy()})},triggerSubmitAnalyticEvent:function(){this.canUserManageDVCSAccounts&&(this.isIntegration?AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.connect-repo.integrate.click",data:{projectId:JIRA.API.Projects.getCurrentProjectId(),shortcutType:this.dvcsName}}):AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.connect-repo.sync.click",data:{projectId:JIRA.API.Projects.getCurrentProjectId(),shortcutType:this.dvcsName}}))},triggerEditAnalyticEvent:function(){this.canUserManageDVCSAccounts&&(this.isIntegration?AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.connect-repo.integrate.edit",data:{projectId:JIRA.API.Projects.getCurrentProjectId(),shortcutType:this.dvcsName}}):AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.connect-repo.sync.edit",data:{projectId:JIRA.API.Projects.getCurrentProjectId(),shortcutType:this.dvcsName}}))},triggerCancelAnalyticEvent:function(){this.canUserManageDVCSAccounts&&(this.isIntegration?AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.connect-repo.integrate.cancel",data:{projectId:JIRA.API.Projects.getCurrentProjectId(),shortcutType:this.dvcsName}}):AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.connect-repo.sync.cancel",data:{projectId:JIRA.API.Projects.getCurrentProjectId(),shortcutType:this.dvcsName}}))},initialize:function(t){var e=this,n=t.repoShortcutModel,r=t.canUserManageDVCSAccounts;this.repoShortcutModel=n;var a=function(t){t.set({isRepositoryLinked:!0}),t.trigger("dvcsremote:change",t),e._removeAndHide()},c=n.attributes;if(this.dvcsName="bitbucket"===c.dvcsType?"Bitbucket":"GitHub",this.canUserManageDVCSAccounts=r,this.isIntegration=n.hasNotLinkedOrg(),"bitbucket"===c.dvcsType&&n.hasNotLinkedOrg()&&r)this.handleSubmit=function(){return i.startBBOrganisationLink(c.dvcsOrg)};else if("bitbucket"===c.dvcsType&&n.hasLinkedOrgAndNotRepo()&&r)this.handleSubmit=function(){i.startBBRepositoryLink(n.attributes).then(function(){return a(n)})["catch"](function(){return e._removeAndHide()})};else{if("github"!==c.dvcsType)throw"Unsupported DVCS Type";c.githubAppInstalled||(this.handleSubmit=function(){i.startGithubOrganisationLink()})}},onRender:function(){AJS.dialog2(this.$el).show()}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts', location = 'js/repository-shortcuts/dialogs/Add.js' */
"use strict";define("repository-shortcuts/dialogs/add",["jquery","repository-shortcuts/models/repository-shortcut","repository-shortcuts/views/add-dialog-content","repository-shortcuts/services/repo-shortcut-update-handler"],function(e,t,s,i){return JIRA.Projects.Sidebar.ProjectShortcuts.Dialogs.Add.extend({initialize:function(r){_.bindAll(this,"hide","refresh","focusForm");var o=this;this.analyticsSave=!1,this.sidebarItem=r.sidebarItem,this.projectKey=r.projectKey,this.collection=r.collection,this.model=new t(null,{projectKey:this.projectKey}),this.errorModel=new JIRA.Projects.Sidebar.ProjectShortcuts.Entities.ShortcutErrors(null,{model:this.model}),this.view=new s({model:this.model,errorModel:this.errorModel,canUserManageDVCSAccounts:this.collection.canUserManageDVCSAccounts}),this.view.render();var c=e(window),n=e(document),a=e(".aui-sidebar-body");this.dialog=AJS.InlineDialog(this.sidebarItem.ui.link,"repo-shortcuts-group__add-dialog",function(e,t,s){return o.sidebarItem.$el.addClass("aui-nav-selected"),o.view.render(),o.view.$el.appendTo(e),o.view.ui.url.focus(),c.on("scroll.repo-shortcuts",function(){o.refresh()}),a.on("scroll.repo-shortcuts",function(){o.hide()}),n.on("showLayer",o.focusForm),c.on("resize",o.refresh),s(),!1},{gravity:"w",autoWidth:!0,initCallback:function(){o.trigger("dialog:open"),o.analyticsSave=!1},hideCallback:function(){o.sidebarItem.$el.removeClass("aui-nav-selected"),o.sidebarItem.ui.link.blur(),c.off("scroll.repo-shortcuts"),a.off("scroll.repo-shortcuts"),n.off("showLayer",o.focusForm),o.trigger("dialog:close",o.analyticsSave)},persistent:!0,closeOnTriggerClick:!0}),this.listenTo(this.view,"render",this.refresh),this.listenTo(this.view,"cancel",this.hideAndRender),this.listenTo(this.model,"save:success",function(){var e=new t(this.model.toJSON(),{projectKey:this.projectKey});this.collection.add(e),this.model.clear(),this.analyticsSave=!0,this.hide(),"bitbucket"!==e.attributes.dvcsType&&"github"!==e.attributes.dvcsType||i(e,this.collection.canUserManageDVCSAccounts),AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.sidebar.connect-repo.link-repo.click",data:{projectId:JIRA.API.Projects.getCurrentProjectId(),dvcsType:e.attributes.dvcsType}})}),this.listenTo(this.sidebarItem,"before:select",function(e){return e.preventDefault()}),AJS.sidebar(".aui-sidebar").on("collapse-start",this.hide),e(".repo-shortcuts-group").on("click","li",this.hide)}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts', location = 'js/repository-shortcuts/dialogs/AddModal.js' */
"use strict";define("repository-shortcuts/dialogs/add-modal",["jquery","repository-shortcuts/models/repository-shortcut","repository-shortcuts/views/add-dialog-content","repository-shortcuts/services/repo-shortcut-update-handler","aui/flag"],function(t,e,o,s,i){return JIRA.Projects.Libs.Marionette.Controller.extend({initialize:function(t){this.collection=t.collection,this.projectKey=t.projectKey,this.projectId=t.projectId,this.analyticsSave=!1,this.model=new e(null,{projectKey:this.projectKey}),this.errorModel=new JIRA.Projects.Sidebar.ProjectShortcuts.Entities.ShortcutErrors(null,{model:this.model}),this.view=new o({model:this.model,errorModel:this.errorModel,canUserManageDVCSAccounts:this.collection.canUserManageDVCSAccounts}),this.view.render(),this.dialog=AJS.dialog2(this.view.$el),this.listenTo(this.model,"save:success",function(){var t=new e(this.model.toJSON(),{projectKey:this.projectKey});this.collection.add(t),this.model.clear(),AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.sidebar.connect-repo.link-repo.click",data:{projectId:this.projectId,dvcsType:t.attributes.dvcsType}}),this.analyticsSave=!0,this._closeDialog(),"bitbucket"===t.attributes.dvcsType||"github"===t.attributes.dvcsType?(s(t,this.collection.canUserManageDVCSAccounts),t.hasLinkedAllComponents()&&i({type:"success",title:"You have added the repository",body:"Nicely done! Your team is going to love this.",close:"auto"})):i({type:"success",title:"You have added the shortcut",body:"Nicely done! Your team is going to love this.",close:"auto"})}),this.listenTo(this.view,"cancel",this._closeDialog),this.listenTo(this.dialog,"hide",this._cleanUpDialog)},show:function(){this.dialog.show(),this.view.ui.url.focus(),AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.sidebar.connect-repo.add-link.click",data:{projectId:this.projectId}})},_closeDialog:function(){this.dialog.hide()},_cleanUpDialog:function(){AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.connect-repo.add-link.close",data:{projectId:this.projectId,isSave:this.analyticsSave}}),t("#add-repository-dialog").parent().remove()}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts', location = 'js/repository-shortcuts/dialogs/Edit.js' */
"use strict";define("repository-shortcuts/dialogs/edit",["jquery","repository-shortcuts/models/repository-shortcut","repository-shortcuts/views/edit-dialog-content","repository-shortcuts/services/repo-shortcut-update-handler","aui/flag"],function(e,t,o,r,s){return JIRA.Projects.Sidebar.ProjectShortcuts.Dialogs.Edit.extend({initialize:function(i){var c=this,d=i.repoShortcutModel,n=i.canUserManageDVCSAccounts;_.bindAll(this,"hide"),this.model=new t(d.toJSON(),{projectKey:d.projectKey||d.collection.projectKey}),this.errorModel=new JIRA.Projects.Sidebar.ProjectShortcuts.Entities.ShortcutErrors((void 0),{model:this.model}),this.view=new o({model:this.model,errorModel:this.errorModel,canUserManageDVCSAccounts:n}),this.view.render();var a=e(JIRA.Software.RepositoryShortcuts.Templates.editDialogChrome({}));this.view.$el.appendTo(a),this.dialog=AJS.dialog2(a),this.dialog.show(),this.view.ui.url.focus();var l=JIRA.API.Projects.getCurrentProjectId();this.view.ui["delete"].on("click",function(e){AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.sidebar.connect-repo.delete-link.click",data:{projectId:l,shortcutId:c.model.id}}),e.preventDefault(),c.hide();var t=new JIRA.Projects.Sidebar.ProjectShortcuts.Dialogs.Delete({model:c.model});c.listenToOnce(t,"dialog:close",function(e){e?AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.sidebar.connect-repo.delete-link.confirm",data:{projectId:l,shortcutId:c.model.id}}):AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.sidebar.connect-repo.delete-link.cancel",data:{projectId:l,shortcutId:c.model.id}})})}),this.listenTo(this.model,"remove:success",function(){AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.sidebar.connect-repo.delete-link.success",data:{projectId:l,shortcutId:c.model.id}}),d.collection.remove(d),s({type:"success",body:"Shortcut deleted.",close:"auto"})}),this.listenTo(this.model,"save:start",function(){AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.sidebar.connect-repo.edit.save",data:{projectId:JIRA.API.Projects.getCurrentProjectId(),shortcutId:c.model.id}})}),this.listenTo(this.view,"cancel",function(){AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.sidebar.connect-repo.edit.cancel",data:{projectId:JIRA.API.Projects.getCurrentProjectId(),shortcutId:d.id}}),c.hide()}),this.listenTo(this.model,"save:success",function(){AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.sidebar.connect-repo.edit.success",data:{projectId:JIRA.API.Projects.getCurrentProjectId(),shortcutId:c.model.id}}),c.hide(),d.set(c.model.toJSON()),"bitbucket"===d.get("dvcsType")||"github"===d.get("dvcsType")?(r(d,n),d.hasLinkedAllComponents()&&s({type:"success",body:"You have updated the repository",close:"auto"})):s({type:"success",body:"You have updated the shortcut",close:"auto"})}),this.dialog.on("hide",function(){return c.trigger("dialog:close",c.analyticsSave)})}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts', location = 'js/repository-shortcuts/dialogs/Connection.js' */
"use strict";define("repository-shortcuts/dialogs/connection",["jquery","underscore","repository-shortcuts/views/connection-dialog-content"],function(i,e,o){return JIRA.Projects.Libs.Marionette.Controller.extend({initialize:function(t){var r=this,s=t.$trigger,n=t.repoShortcutModel;e.bindAll(this,"hide");var c=this,l={gravity:"w",persistent:!0,closeOnTriggerClick:!0,initCallback:function(){c.trigger("dialog:open"),c.analyticsSave=!1},hideCallback:function(){i(window).off("scroll.repo-shortcuts"),i(".aui-sidebar-body").off("scroll.repo-shortcuts"),i(document).off("showLayer",c.focusForm),c.trigger("syncDialog:close")}},a=function(e,o,t){var s=i(window),n=i(".aui-sidebar-body");return e.addClass("connection-dialog"),r.view.render(),r.view.$el.appendTo(e),s.on("resize",r.refresh),s.on("scroll.repo-shortcuts",r.refresh),n.on("scroll.repo-shortcuts",r.hide),t(),!1},d="suggest-connection-dialog-"+n.id;this.view=new o({repoShortcutModel:n}),this.listenTo(this.view,"connection:start",this.hide),this.listenTo(this.view,"connection:cancel",this.hide),this.dialog=AJS.InlineDialog(s,d,a,l),AJS.sidebar(".aui-sidebar").on("collapse-start",this.hide)},hide:function(){this.dialog.hide()},refresh:function(){this.dialog.refresh()}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts-shortcut-utils', location = 'js/repository-shortcuts/utils/ShortcutUtils.js' */
"use strict";define("repository-shortcuts/utils/repository-shortcut-utils",["exports"],function(t){t.mapDvcsTypeToIcon=function(t){switch(t){case"bitbucket":return"bitbucket";case"github":return"repos";default:return"shortcut"}},t.shouldShowSync=function(t,e){var s=t.attributes,i="bitbucket"===s.dvcsType||"github"===s.dvcsType,o=Boolean(s.isOrganisationLinked&&(!s.dvcsRepo||s.isRepositoryLinked));return e&&i&&!o}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts-navigation-next', location = 'js/repository-shortcuts/integration/navigation-next.js' */
"use strict";define("repository-shortcuts/navigation-next",["jquery","underscore","bluebird/Promise","jira/dev-status/util/es6","repository-shortcuts/models/repository-shortcuts","repository-shortcuts/dialogs/add-modal","repository-shortcuts/dialogs/edit","repository-shortcuts/views/connection-modal","repository-shortcuts/utils/repository-shortcut-utils","repository-shortcuts/services/dvcs-account-matcher","jira/featureflags/feature-manager"],function(t,e,n,r,o,i,c,a,s,u,d){var l="com.atlassian.jira.jira-projects-plugin:source.code.link.",f="com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts-navigation-next.repository-shortcuts-data",p="com.pyxis.greenhopper.jira:project-sidebar-simple-add-repo",g=WRM.data.claim(f),h=g.canManageDVCS,m="endeavour.performance.shortcuts-optimization",v=d.isFeatureEnabled(m);return function(d){var f=d.shortcuts,g=d.onAdd,m=d.onEdit,y=d.onDelete,j=d.onBulkEdit,E=d.projectKey,A=void 0===E?"":E,I=d.projectId,w=void 0===I?"":I,S=d.isAdmin,C=void 0!==S&&S,b=d.canUserManageDVCSAccounts,D=void 0===b?h:b,M=A||JIRA.API.Projects.getCurrentProjectKey(),P=w||JIRA.API.Projects.getCurrentProjectId(),k=C||D,x=new o([],{canUserManageDVCSAccounts:k,projectKey:M}),J=!1,K=function(t){if(!J){var e=t.get("icon");if(e)return e}return s.mapDvcsTypeToIcon(t.get("dvcsType"))},R=function(t){return s.shouldShowSync(t,k)},U=function(t){return l+t.id},V=function(t,n){return e.extend({},n,{name:t.get("name"),url:t.get("url"),type:t.get("type"),id:U(t),icon:K(t),showSync:R(t),onEditClick:function(){return F(t.id,"sidebar")},onSyncClick:function(){return N(t.id)}})},T=function(t){return{name:t.text,url:t.href,id:t.id,icon:t.icon}},q=function(){return new i({collection:x,projectKey:M,projectId:P}).show()},F=function(t,e){AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.sidebar.connect-repo.edit",data:{projectId:P,shortcutId:t,referrer:e}}),new c({repoShortcutModel:x.get(t),canUserManageDVCSAccounts:k})},N=function(t){return new a({repoShortcutModel:x.get(t),canUserManageDVCSAccounts:k}).render()},W=function(t){return g(V(t,{canEdit:!0}))},z=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.canEdit,r=[].concat(t);v?j(r.map(function(t){return V(t,{canEdit:n})})):r.forEach(function(t){return m(V(t,{canEdit:n}))})},B=function(t){return y(U(t))};x.add(f.map(T),{projectKey:M}),f._collection=x,f.length&&!v&&z(x.models,{canEdit:f[0].canEdit}),x.on("add",function(t){return W(t)}).on("change",function(t,e){var n=e.canEdit,r=void 0===n||n;return z(t,{canEdit:r})}).on("remove",function(t){return B(t)}).on("edit:start",function(t){return F(t,"integrationDialog")});var O=f.map(function(t){return u.matchUrlAgainstNetwork(t.href)});return n.all(O).then(function(t){J=!0,t.forEach(function(t,e){var n=f[e],r=x.get(n.id);r&&r.set(t,{silent:v,canEdit:n.canEdit})}),v&&r.requestIdleCallback(function(){f.length&&z(x.models,{canEdit:f[0].canEdit})})})["catch"](function(t){AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.notifications.connect-repo.shortcut-data-retrieve-fail",errorMessage:t&&t.message})}),(JIRA.API.getNavigationApi||t.Deferred)().then(function(t){t.onItemClick(t.viewIds.SOFTWARE,p,q)}),{add:q}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devsummarycf-resources-init', location = 'js/customfields/devsummary/dev-summary-custom-field-init.js' */
"use strict";require(["jira/skate","jquery"],function(e,t){var i="wrc!com.atlassian.jira.plugins.jira-development-integration-plugin:devsummarycf-resources";e("fusion-devsummary-cf",{type:e.type.CLASS,created:function(e){WRM.require([i],function(){var i=require("jira-development-status/customfields/dev-summary-custom-field-column-view"),r=require("jira-development-status/component/tooltip"),o=t(e);new i({el:o}),r.tipsify({selector:".fusion-widget-tooltip",context:o,html:!0})})}})});;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:import-issues', location = 'js/form/import-issues/import-issues.js' */
define("quick-edit/form/import-issues",["jira/container-api"],function(t){"use strict";var e=function(){},i=AJS.contextPath();return e.setForm=function(t){this.form=t},e.bindImportIssueUrl=function(){var n=e.getImportIssue();n.click(function(){var e="/secure/BulkCreateSetupPage!default.jspa?externalSystem=com.atlassian.jira.plugins.jim-plugin:bulkCreateCsv";t.navigate(e,function(){window.location=i+e},{replace:!1})})},e.getImportIssue=function(){return this.form.$element.find("#import-issues")},e});;
;
/* module-key = 'jira.webresources:calendar', location = '/includes/lib/calendar/Calendar.js' */
Calendar=function(e,t,a,n,r){if(this.activeDiv=null,this.currentDateEl=null,this.getDateStatus=null,this.getDateToolTip=null,this.getDateText=null,this.timeout=null,this.onSelected=n||null,this.onClose=r||null,this.dragging=!1,this.hidden=!1,this.minYear=1970,this.maxYear=2050,this.dateFormat=Calendar._TT.DEF_DATE_FORMAT,this.ttDateFormat=Calendar._TT.TT_DATE_FORMAT,this.isPopup=!0,this.weekNumbers=!0,this.firstDayOfWeek="number"==typeof e?e:Calendar._FD,this.showsOtherMonths=!1,this.dateStr=t,this.todayDateStr=a,this.ar_days=null,this.showsTime=!1,this.time24=!0,this.yearStep=2,this.hiliteToday=!0,this.multiple=null,this.table=null,this.element=null,this.tbody=null,this.firstdayname=null,this.monthsCombo=null,this.yearsCombo=null,this.hilitedMonth=null,this.activeMonth=null,this.hilitedYear=null,this.activeYear=null,this.dateClicked=!1,"undefined"==typeof Calendar._SDN){"undefined"==typeof Calendar._SDN_len&&(Calendar._SDN_len=3);for(var l=new Array,i=8;i>0;)l[--i]=Calendar._DN[i].substr(0,Calendar._SDN_len);Calendar._SDN=l,"undefined"==typeof Calendar._SMN_len&&(Calendar._SMN_len=3),l=new Array;for(var i=12;i>0;)l[--i]=Calendar._MN[i].substr(0,Calendar._SMN_len);Calendar._SMN=l}},Calendar._C=null,Calendar.is_ie=/msie/i.test(navigator.userAgent)&&!/opera/i.test(navigator.userAgent),Calendar.is_ie5=Calendar.is_ie&&/msie 5\.0/i.test(navigator.userAgent),Calendar.is_ie6=Calendar.is_ie&&/msie 6\.0/i.test(navigator.userAgent),Calendar.is_opera=/opera/i.test(navigator.userAgent),Calendar.is_khtml=/Konqueror|Safari|KHTML/i.test(navigator.userAgent),Calendar.setFullYearAndFixFebruary=function(e,t){var a=require("jira/util/safe-logger"),n=new Date(e),r={from:n.getFullYear(),to:t,fixedFeb:!1};n.setFullYear(t),n.getMonth()!==e.getMonth()&&(r.fixedFeb=!0,e.setDate(28)),e.setFullYear(t),a.safeInfo("jscalendar","Setting full year",r)},Calendar.getAbsolutePos=function(e){var t=jQuery(e).offset();return t.x=t.left,t.y=t.top,t},Calendar.isRelated=function(e,t){var a=t.relatedTarget;if(!a){var n=t.type;"mouseover"==n?a=t.fromElement:"mouseout"==n&&(a=t.toElement)}for(;a;){if(a==e)return!0;a=a.parentNode}return!1},Calendar.removeClass=function(e,t){if(e&&e.className){for(var a=e.className.split(" "),n=new Array,r=a.length;r>0;)a[--r]!=t&&(n[n.length]=a[r]);e.className=n.join(" ")}},Calendar.addClass=function(e,t){Calendar.removeClass(e,t),e.className+=" "+t},Calendar.getElement=function(e){for(var t=Calendar.is_ie?window.event.srcElement:e.currentTarget;1!=t.nodeType||/^div$/i.test(t.tagName);)t=t.parentNode;return t},Calendar.getTargetElement=function(e){for(var t=Calendar.is_ie?window.event.srcElement:e.target;1!=t.nodeType;)t=t.parentNode;return t},Calendar.stopEvent=function(e){return e||(e=window.event),e.stopPropagation?(e.preventDefault(),e.stopPropagation()):(e.cancelBubble=!0,e.returnValue=!1),!1},Calendar.addEvent=function(e,t,a){e.attachEvent?e.attachEvent("on"+t,a):e.addEventListener?e.addEventListener(t,a,!0):e["on"+t]=a},Calendar.removeEvent=function(e,t,a){e.detachEvent?e.detachEvent("on"+t,a):e.removeEventListener?e.removeEventListener(t,a,!0):e["on"+t]=null},Calendar.createElement=function(e,t){var a=null;return a=document.createElementNS?document.createElementNS("http://www.w3.org/1999/xhtml",e):document.createElement(e),"undefined"!=typeof t&&t.appendChild(a),a},Calendar._add_evs=function(e){Calendar.addEvent(e,"mouseover",Calendar.dayMouseOver),Calendar.addEvent(e,"mousedown",Calendar.dayMouseDown),Calendar.addEvent(e,"mouseout",Calendar.dayMouseOut),Calendar.is_ie&&(Calendar.addEvent(e,"dblclick",Calendar.dayMouseDblClick),e.setAttribute("unselectable",!0))},Calendar.findMonth=function(e){return"undefined"!=typeof e.month?e:"undefined"!=typeof e.parentNode.month?e.parentNode:null},Calendar.findYear=function(e){return"undefined"!=typeof e.year?e:"undefined"!=typeof e.parentNode.year?e.parentNode:null},Calendar.showMonthsCombo=function(){var e=Calendar._C;if(!e)return!1;var e=e,t=e.activeDiv,a=e.monthsCombo;e.hilitedMonth&&Calendar.removeClass(e.hilitedMonth,"hilite"),e.activeMonth&&Calendar.removeClass(e.activeMonth,"active");var n=e.monthsCombo.getElementsByTagName("div")[e.date.getMonth()];Calendar.addClass(n,"active"),e.activeMonth=n;var r=a.style;if(r.display="block",t.navtype<0)r.left=t.offsetLeft+"px";else{var l=a.offsetWidth;"undefined"==typeof l&&(l=50),r.left=t.offsetLeft+t.offsetWidth-l+"px"}r.top=t.offsetTop+t.offsetHeight+"px"},Calendar.showYearsCombo=function(e){var t=Calendar._C;if(!t)return!1;var t=t,a=t.activeDiv,n=t.yearsCombo;t.hilitedYear&&Calendar.removeClass(t.hilitedYear,"hilite"),t.activeYear&&Calendar.removeClass(t.activeYear,"active"),t.activeYear=null;for(var r=t.date.getFullYear()+(e?1:-1),l=n.firstChild,i=!1,s=12;s>0;--s)r>=t.minYear&&r<=t.maxYear?(l.innerHTML=r,l.year=r,l.style.display="block",i=!0):l.style.display="none",l=l.nextSibling,r+=e?t.yearStep:-t.yearStep;if(i){var d=n.style;if(d.display="block",a.navtype<0)d.left=a.offsetLeft+"px";else{var o=n.offsetWidth;"undefined"==typeof o&&(o=50),d.left=a.offsetLeft+a.offsetWidth-o+"px"}d.top=a.offsetTop+a.offsetHeight+"px"}},Calendar.tableMouseUp=function(e){var t=Calendar._C;if(!t)return!1;t.timeout&&clearTimeout(t.timeout);var a=t.activeDiv;if(!a)return!1;var n=Calendar.getTargetElement(e);e||(e=window.event),Calendar.removeClass(a,"active"),n!=a&&n.parentNode!=a||Calendar.cellClick(a,e);var r=Calendar.findMonth(n),l=null;if(r)l=new Date(t.date),r.month!=l.getMonth()&&(l.setMonth(r.month),t.setDate(l),t.dateClicked=!1,t.callHandler());else{var i=Calendar.findYear(n);i&&(l=new Date(t.date),i.year!=l.getFullYear()&&(Calendar.setFullYearAndFixFebruary(l,i.year),t.setDate(l),t.dateClicked=!1,t.callHandler()))}return Calendar.removeEvent(document,"mouseup",Calendar.tableMouseUp),Calendar.removeEvent(document,"mouseover",Calendar.tableMouseOver),Calendar.removeEvent(document,"mousemove",Calendar.tableMouseOver),t._hideCombos(),Calendar._C=null,Calendar.stopEvent(e)},Calendar.tableMouseOver=function(e){var t=Calendar._C;if(t){var a=t.activeDiv,n=Calendar.getTargetElement(e);if(n==a||n.parentNode==a?(Calendar.addClass(a,"hilite active"),Calendar.addClass(a.parentNode,"rowhilite")):(("undefined"==typeof a.navtype||50!=a.navtype&&(0==a.navtype||Math.abs(a.navtype)>2))&&Calendar.removeClass(a,"active"),Calendar.removeClass(a,"hilite"),Calendar.removeClass(a.parentNode,"rowhilite")),e||(e=window.event),50==a.navtype&&n!=a){var r,l=Calendar.getAbsolutePos(a),i=a.offsetWidth,s=e.clientX,d=!0;s>l.x+i?(r=s-l.x-i,d=!1):r=l.x-s,r<0&&(r=0);for(var o=a._range,u=a._current,h=Math.floor(r/10)%o.length,C=o.length;--C>=0&&o[C]!=u;);for(;h-- >0;)d?--C<0&&(C=o.length-1):++C>=o.length&&(C=0);var c=o[C];a.innerHTML=c,t.onUpdateTime()}var m=Calendar.findMonth(n);if(m)m.month!=t.date.getMonth()?(t.hilitedMonth&&Calendar.removeClass(t.hilitedMonth,"hilite"),Calendar.addClass(m,"hilite"),t.hilitedMonth=m):t.hilitedMonth&&Calendar.removeClass(t.hilitedMonth,"hilite");else{t.hilitedMonth&&Calendar.removeClass(t.hilitedMonth,"hilite");var p=Calendar.findYear(n);p&&p.year!=t.date.getFullYear()?(t.hilitedYear&&Calendar.removeClass(t.hilitedYear,"hilite"),Calendar.addClass(p,"hilite"),t.hilitedYear=p):t.hilitedYear&&Calendar.removeClass(t.hilitedYear,"hilite")}return Calendar.stopEvent(e)}},Calendar.tableMouseDown=function(e){if(Calendar.getTargetElement(e)==Calendar.getElement(e))return Calendar.stopEvent(e)},Calendar.calDragIt=function(e){var t=Calendar._C;if(!t||!t.dragging)return!1;var a,n;Calendar.is_ie?(n=window.event.clientY+document.body.scrollTop,a=window.event.clientX+document.body.scrollLeft):(a=e.pageX,n=e.pageY);var r=t.element.style;return r.left=a-t.xOffs+"px",r.top=n-t.yOffs+"px",Calendar.stopEvent(e)},Calendar.calDragEnd=function(e){var t=Calendar._C;return!!t&&(t.dragging=!1,Calendar.removeEvent(document,"mousemove",Calendar.calDragIt),Calendar.removeEvent(document,"mouseup",Calendar.calDragEnd),void Calendar.tableMouseUp(e))},Calendar.dayMouseDown=function(e){var t=Calendar.getElement(e);if(t.disabled)return!1;var a=t.calendar;return a.activeDiv=t,Calendar._C=a,300!=t.navtype?(50==t.navtype?(t._current=t.innerHTML,Calendar.addEvent(document,"mousemove",Calendar.tableMouseOver)):Calendar.addEvent(document,Calendar.is_ie5?"mousemove":"mouseover",Calendar.tableMouseOver),Calendar.addClass(t,"hilite active"),Calendar.addEvent(document,"mouseup",Calendar.tableMouseUp)):a.isPopup&&a._dragStart(e),t.navtype==-1||1==t.navtype?(a.timeout&&clearTimeout(a.timeout),a.timeout=setTimeout("Calendar.showMonthsCombo()",250)):t.navtype==-2||2==t.navtype?(a.timeout&&clearTimeout(a.timeout),a.timeout=setTimeout(t.navtype>0?"Calendar.showYearsCombo(true)":"Calendar.showYearsCombo(false)",250)):a.timeout=null,Calendar.stopEvent(e)},Calendar.dayMouseDblClick=function(e){Calendar.cellClick(Calendar.getElement(e),e||window.event),Calendar.is_ie&&document.selection.empty()},Calendar.dayMouseOver=function(e){var t=Calendar.getElement(e);return!(Calendar.isRelated(t,e)||Calendar._C||t.disabled)&&(t.ttip&&("_"==t.ttip.substr(0,1)&&(t.ttip=t.caldate.print(t.calendar.ttDateFormat)+t.ttip.substr(1)),t.calendar.tooltips.innerHTML=t.ttip),300!=t.navtype&&(Calendar.addClass(t,"hilite"),t.caldate&&Calendar.addClass(t.parentNode,"rowhilite")),Calendar.stopEvent(e))},Calendar.dayMouseOut=function(e){var t=Calendar.getElement(e);return!(Calendar.isRelated(t,e)||Calendar._C||t.disabled)&&(Calendar.removeClass(t,"hilite"),t.caldate&&Calendar.removeClass(t.parentNode,"rowhilite"),t.calendar&&(t.calendar.tooltips.innerHTML=Calendar._TT.SEL_DATE),Calendar.stopEvent(e))},Calendar.cellClick=function(e,t){function a(e){var t=i.getDate(),a=i.getMonthDays(e);t>a&&i.setDate(a),i.setMonth(e)}var n=e.calendar,r=!1,l=!1,i=null;if("undefined"==typeof e.navtype){n.currentDateEl&&(Calendar.removeClass(n.currentDateEl,"selected"),Calendar.addClass(e,"selected"),r=n.currentDateEl==e,r||(n.currentDateEl=e)),n.date.setDateOnly(e.caldate),i=n.date;var s=!(n.dateClicked=!e.otherMonth);s||n.currentDateEl?l=!e.disabled:n._toggleMultipleDate(new Date(i)),s&&n._init(n.firstDayOfWeek,i)}else{if(200==e.navtype)return Calendar.removeClass(e,"hilite"),void n.callCloseHandler();i=new Date(n.date),0==e.navtype&&(n.todayDateStr?i=new Date(n.todayDateStr):i.setDateOnly(new Date)),n.dateClicked=!1;var d=i.getFullYear(),o=i.getMonth();switch(e.navtype){case 400:Calendar.removeClass(e,"hilite");var u=Calendar._TT.ABOUT;return"undefined"!=typeof u?u+=n.showsTime?Calendar._TT.ABOUT_TIME:"":u='Help and about box text is not translated into this language.\nIf you know this language and you feel generous please update\nthe corresponding file in "lang" subdir to match calendar-en.js\nand send it back to <mihai_bazon@yahoo.com> to get it into the distribution  ;-)\n\nThank you!\nhttp://dynarch.com/mishoo/calendar.epl\n',void alert(u);case-2:d>n.minYear&&Calendar.setFullYearAndFixFebruary(i,d-1);break;case-1:o>0?a(o-1):d-- >n.minYear&&(i.setFullYear(d),a(11));break;case 1:o<11?a(o+1):d<n.maxYear&&(i.setFullYear(d+1),a(0));break;case 2:d<n.maxYear&&Calendar.setFullYearAndFixFebruary(i,d+1);break;case 100:return void n.setFirstDayOfWeek(e.fdow);case 50:for(var h=e._range,C=e.innerHTML,c=h.length;--c>=0&&h[c]!=C;);t&&t.shiftKey?--c<0&&(c=h.length-1):++c>=h.length&&(c=0);var m=h[c];return e.innerHTML=m,void n.onUpdateTime();case 0:if("function"==typeof n.getDateStatus&&n.getDateStatus(i,i.getFullYear(),i.getMonth(),i.getDate()))return!1}i.equalsTo(n.date)?0==e.navtype&&(l=r=!0):(n.setDate(i),l=!0)}l&&t&&n.callHandler(),r&&(Calendar.removeClass(e,"hilite"),t&&n.callCloseHandler())},Calendar.prototype.create=function(e){var t=null;e?(t=e,this.isPopup=!1):(t=document.getElementsByTagName("body")[0],this.isPopup=!0),this.dateStr&&(this.date=new Date(this.dateStr)),this.date&&!isNaN(this.date)||(this.date=new Date);var a=Calendar.createElement("table");this.table=a,a.cellSpacing=0,a.cellPadding=0,a.calendar=this,Calendar.addEvent(a,"mousedown",Calendar.tableMouseDown);var n=Calendar.createElement("div");this.element=n,n.className="calendar",this.isPopup&&(n.style.position="absolute",n.style.display="none"),n.appendChild(a);var r=Calendar.createElement("thead",a),l=null,i=null,s=this,d=function(e,t,a){return l=Calendar.createElement("td",i),l.colSpan=t,l.className="button",0!=a&&Math.abs(a)<=2&&(l.className+=" nav"),Calendar._add_evs(l),l.calendar=s,l.navtype=a,l.innerHTML="<div unselectable='on'>"+e+"</div>",l};i=Calendar.createElement("tr",r);var o=6;this.isPopup&&--o,this.weekNumbers&&++o,d("?",1,400).ttip=Calendar._TT.INFO,this.title=d("",o,300),this.title.className="title",this.isPopup&&(this.title.ttip=Calendar._TT.DRAG_TO_MOVE,this.title.style.cursor="move",d("&#x00d7;",1,200).ttip=Calendar._TT.CLOSE),i=Calendar.createElement("tr",r),i.className="headrow",this._nav_py=d("&#x00ab;",1,-2),this._nav_py.ttip=Calendar._TT.PREV_YEAR,this._nav_pm=d("&#x2039;",1,-1),this._nav_pm.ttip=Calendar._TT.PREV_MONTH,this._nav_now=d(Calendar._TT.TODAY,this.weekNumbers?4:3,0),this._nav_now.ttip=Calendar._TT.GO_TODAY,this._nav_nm=d("&#x203a;",1,1),this._nav_nm.ttip=Calendar._TT.NEXT_MONTH,this._nav_ny=d("&#x00bb;",1,2),this._nav_ny.ttip=Calendar._TT.NEXT_YEAR,i=Calendar.createElement("tr",r),i.className="daynames",this.weekNumbers&&(l=Calendar.createElement("td",i),l.className="name wn",l.innerHTML=Calendar._TT.WK);for(var u=7;u>0;--u)l=Calendar.createElement("td",i),u||(l.navtype=100,l.calendar=this,Calendar._add_evs(l));this.firstdayname=this.weekNumbers?i.firstChild.nextSibling:i.firstChild,this._displayWeekdays();var h=Calendar.createElement("tbody",a);for(this.tbody=h,u=6;u>0;--u){i=Calendar.createElement("tr",h),this.weekNumbers&&(l=Calendar.createElement("td",i));for(var C=7;C>0;--C)l=Calendar.createElement("td",i),l.calendar=this,Calendar._add_evs(l)}this.showsTime?(i=Calendar.createElement("tr",h),i.className="time",l=Calendar.createElement("td",i),l.className="time",l.colSpan=2,l.innerHTML=Calendar._TT.TIME||"&nbsp;",l=Calendar.createElement("td",i),l.className="time",l.colSpan=this.weekNumbers?4:3,function(){function e(e,t,a,n){var r=Calendar.createElement("span",l);if(r.className=e,r.innerHTML=t,r.calendar=s,r.ttip=Calendar._TT.TIME_PART,r.navtype=50,r._range=[],"number"!=typeof a)r._range=a;else for(var i=a;i<=n;++i){var d;d=i<10&&n>=10?"0"+i:""+i,r._range[r._range.length]=d}return Calendar._add_evs(r),r}var t=s.date.getHours(),a=s.date.getMinutes(),n=!s.time24,r=t>12;n&&r&&(t-=12);var d=e("hour",t,n?1:0,n?12:23),o=Calendar.createElement("span",l);o.innerHTML=":",o.className="colon";var u=e("minute",a,0,59),h=null;l=Calendar.createElement("td",i),l.className="time",l.colSpan=2,n?h=e("ampm",r?Calendar._TT.PM:Calendar._TT.AM,[Calendar._TT.am,Calendar._TT.pm]):l.innerHTML="&nbsp;",s.onSetTime=function(){var e,t=this.date.getHours(),a=this.date.getMinutes();n&&(e=t>=12,e&&(t-=12),0==t&&(t=12),h.innerHTML=e?Calendar._TT.pm:Calendar._TT.am),d.innerHTML=t<10?"0"+t:t,u.innerHTML=a<10?"0"+a:a},s.onUpdateTime=function(){var e=this.date,t=parseInt(d.innerHTML,10);n&&(new RegExp(Calendar._TT.pm,"i").test(h.innerHTML)&&t<12?t+=12:new RegExp(Calendar._TT.am,"i").test(h.innerHTML)&&12==t&&(t=0));var a=e.getDate(),r=e.getMonth(),l=e.getFullYear();e.setHours(t),e.setMinutes(parseInt(u.innerHTML,10)),e.setFullYear(l),e.setMonth(r),e.setDate(a),this.dateClicked=!1,this.callHandler()}}()):this.onSetTime=this.onUpdateTime=function(){};var c=Calendar.createElement("tfoot",a);for(i=Calendar.createElement("tr",c),i.className="footrow",l=d(Calendar._TT.SEL_DATE,this.weekNumbers?8:7,300),l.className="ttip",this.isPopup&&(l.ttip=Calendar._TT.DRAG_TO_MOVE,l.style.cursor="move"),this.tooltips=l,n=Calendar.createElement("div",this.element),this.monthsCombo=n,n.className="combo",u=0;u<Calendar._MN.length;++u){var m=Calendar.createElement("div");m.className=Calendar.is_ie?"label-IEfix":"label",m.month=u,m.innerHTML=Calendar._SMN[u],n.appendChild(m)}for(n=Calendar.createElement("div",this.element),this.yearsCombo=n,n.className="combo",u=12;u>0;--u){var p=Calendar.createElement("div");p.className=Calendar.is_ie?"label-IEfix":"label",n.appendChild(p)}this._init(this.firstDayOfWeek,this.date),t.appendChild(this.element),Calendar.addEvent(this.element,"mousedown",function(e){e.preventDefault?e.preventDefault():e.returnValue=!1})},Calendar._upkeyEvent=function(e){27===e.keyCode&&window.setTimeout(function(){var e=window._dynarch_popupCalendar;return!(!e||e.multiple)&&void e.callCloseHandler()},0)},Calendar._keyEvent=function(e){function t(){h=r.currentDateEl;var e=h.pos;d=15&e,o=e>>4,u=r.ar_days[o][d]}function a(){var e=new Date(r.date);e.setDate(e.getDate()-C),r.setDate(e)}function n(){var e=new Date(r.date);e.setDate(e.getDate()+C),r.setDate(e)}var r=window._dynarch_popupCalendar;if(!r||r.multiple)return!1;var l=Calendar.is_ie||"keydown"==e.type,i=e.keyCode;if(e.ctrlKey)switch(i){case 37:l&&Calendar.cellClick(r._nav_pm);break;case 38:l&&Calendar.cellClick(r._nav_py);break;case 39:l&&Calendar.cellClick(r._nav_nm);break;case 40:l&&Calendar.cellClick(r._nav_ny)}else switch(i){case 32:Calendar.cellClick(r._nav_now);break;case 37:case 38:case 39:case 40:if(l){var s,d,o,u,h,C;for(s=37==i||38==i,C=37==i||39==i?1:7,t();;){switch(i){case 37:if(!(--d>=0)){d=6,i=38;continue}u=r.ar_days[o][d];break;case 38:--o>=0?u=r.ar_days[o][d]:(a(),t());break;case 39:if(!(++d<7)){d=0,i=40;continue}u=r.ar_days[o][d];break;case 40:++o<r.ar_days.length?u=r.ar_days[o][d]:(n(),t())}break}u&&(u.disabled?s?a():n():Calendar.cellClick(u))}break;case 13:l&&Calendar.cellClick(r.currentDateEl,e)}return Calendar.stopEvent(e)},Calendar.prototype._init=function(e,t){var a=new Date(t);a.setHours(13);var n=new Date,r=n.getFullYear(),l=n.getMonth(),i=n.getDate();this.table.style.visibility="hidden";var s=a.getFullYear();s<this.minYear?(s=this.minYear,a.setFullYear(s)):s>this.maxYear&&(s=this.maxYear,a.setFullYear(s)),this.firstDayOfWeek=e;var d=a.getMonth(),o=a.getDate();a.getMonthDays();a.setDate(1);var u=(a.getDay()-this.firstDayOfWeek)%7;u<0&&(u+=7),a.setDate(-u),a.setDate(a.getDate()+1);for(var h=this.tbody.firstChild,C=(Calendar._SMN[d],this.ar_days=new Array),c=Calendar._TT.WEEKEND,m=this.multiple?this.datesCells={}:null,p=0;p<6;++p,h=h.nextSibling){var v=h.firstChild;if(this.weekNumbers){v.className="day wn";var f=a;0==d&&0==p&&0==Date.useISO8601WeekNumbers&&(f=new Date(s,d,1)),v.innerHTML=f.getWeekNumber(this.firstDayOfWeek),v=v.nextSibling}h.className="daysrow";for(var y,g=!1,_=C[p]=[],D=0;D<7;++D,v=v.nextSibling,a.setDate(y+1)){y=a.getDate();var b=a.getDay();v.className="day day-"+y,v.pos=p<<4|D,_[D]=v;var T=a.getMonth()==d;if(T)v.otherMonth=!1,g=!0;else{if(!this.showsOtherMonths){v.className="emptycell",v.innerHTML="&nbsp;",v.disabled=!0;continue}v.className+=" othermonth",v.otherMonth=!0}if(v.disabled=!1,v.innerHTML=this.getDateText?this.getDateText(a,y):y,m&&(m[a.print("%Y%m%d")]=v),this.getDateStatus){var w=this.getDateStatus(a,s,d,y);if(this.getDateToolTip){var M=this.getDateToolTip(a,s,d,y);M&&(v.title=M)}w===!0?(v.className+=" disabled",v.disabled=!0):(/disabled/i.test(w)&&(v.disabled=!0),v.className+=" "+w)}v.disabled||(v.caldate=new Date(a),v.ttip="_",!this.multiple&&T&&y==o&&this.hiliteToday&&(v.className+=" selected",this.currentDateEl=v),a.getFullYear()==r&&a.getMonth()==l&&y==i&&(v.className+=" today",v.ttip+=Calendar._TT.PART_TODAY),c.indexOf(b.toString())!=-1&&(v.className+=v.otherMonth?" oweekend":" weekend"))}g||this.showsOtherMonths||(h.className="emptyrow")}this.date=new Date(t),this.onSetTime(),this.title.innerHTML=Calendar._MN[d]+", "+s,this.table.style.visibility="visible",this._initMultipleDates()},Calendar.prototype._initMultipleDates=function(){if(this.multiple)for(var e in this.multiple){var t=this.datesCells[e],a=this.multiple[e];a&&t&&(t.className+=" selected")}},Calendar.prototype._toggleMultipleDate=function(e){if(this.multiple){var t=e.print("%Y%m%d"),a=this.datesCells[t];if(a){var n=this.multiple[t];n?(Calendar.removeClass(a,"selected"),delete this.multiple[t]):(Calendar.addClass(a,"selected"),this.multiple[t]=e)}}},Calendar.prototype.setDateToolTipHandler=function(e){this.getDateToolTip=e},Calendar.prototype.setDate=function(e){e.equalsTo(this.date)||this._init(this.firstDayOfWeek,e)},Calendar.prototype.refresh=function(){this._init(this.firstDayOfWeek,this.date)},Calendar.prototype.setFirstDayOfWeek=function(e){this._init(e,this.date),this._displayWeekdays()},Calendar.prototype.setDateStatusHandler=Calendar.prototype.setDisabledHandler=function(e){this.getDateStatus=e},Calendar.prototype.setRange=function(e,t){this.minYear=e,this.maxYear=t},Calendar.prototype.callHandler=function(){this.onSelected&&this.onSelected(this,this.date.print(this.dateFormat))},Calendar.prototype.callCloseHandler=function(){this.onClose&&this.onClose(this)},Calendar.prototype.destroy=function(){var e=this.element.parentNode;e.removeChild(this.element),Calendar._C=null,window._dynarch_popupCalendar=null},Calendar.prototype.reparent=function(e){var t=this.element;t.parentNode.removeChild(t),e.appendChild(t)},Calendar._checkCalendar=function(e){var t=window._dynarch_popupCalendar;if(!t)return!1;for(var a=Calendar.is_ie?Calendar.getElement(e):Calendar.getTargetElement(e);null!=a&&a!=t.element;a=a.parentNode);return null==a?(window._dynarch_popupCalendar.callCloseHandler(),Calendar.stopEvent(e)):void 0},Calendar.prototype.show=function(){if(!this.params.inputField.disabled){for(var e=this.table.getElementsByTagName("tr"),t=e.length;t>0;){var a=e[--t];Calendar.removeClass(a,"rowhilite");for(var n=a.getElementsByTagName("td"),r=n.length;r>0;){var l=n[--r];Calendar.removeClass(l,"hilite"),Calendar.removeClass(l,"active")}}Calendar.current=this,this.element.style.display="block",this.element.className+=" active",this.hidden=!1,this.isPopup&&(window._dynarch_popupCalendar=this,Calendar.addEvent(document,"keyup",Calendar._upkeyEvent),Calendar.addEvent(document,"keydown",Calendar._keyEvent),Calendar.addEvent(document,"mousedown",Calendar._checkCalendar))}},Calendar.prototype.hide=function(){this.isPopup&&(Calendar.removeEvent(document,"keyup",Calendar._upkeyEvent),Calendar.removeEvent(document,"keydown",Calendar._keyEvent),Calendar.removeEvent(document,"mousedown",Calendar._checkCalendar)),Calendar.current=null,this.element.style.display="none",this.element.className=this.element.className.replace(/active/gi,""),this.hidden=!0},Calendar.prototype.showAt=function(e,t){var a=this.element.style;a.left=e+"px",a.top=t+"px",this.show()},Calendar.prototype.showAtElement=function(e,t){function a(e){e.x<0&&(e.x=0),e.y<0&&(e.y=0);var t=document.createElement("div"),a=t.style;a.position="absolute",a.right=a.bottom=a.width=a.height="0px",document.body.appendChild(t);var n=Calendar.getAbsolutePos(t);document.body.removeChild(t),n.y+=jQuery(window).scrollTop(),n.x+=jQuery(window).scrollLeft();var r=e.x+e.width-n.x;r>0&&(e.x-=r),r=e.y+e.height-n.y,r>0&&(e.y-=r)}var n=this,r=Calendar.getAbsolutePos(e);return t&&"string"==typeof t?(this.element.style.display="block",Calendar.continuation_for_the_khtml_browser=function(){var l=jQuery(n.element).outerWidth(),i=jQuery(n.element).outerHeight();n.element.style.display="none";var s=t.substr(0,1),d="l";switch(t.length>1&&(d=t.substr(1,1)),s){case"T":r.y-=i;break;case"B":r.y+=jQuery(e).outerHeight();break;case"C":r.y+=(jQuery(e).outerHeight()-i)/2;break;case"t":r.y+=jQuery(e).outerHeight()-i;break;case"b":}switch(d){case"L":r.x-=l;break;case"R":r.x+=jQuery(e).outerWidth();break;case"C":r.x+=(jQuery(e).outerWidth()-l)/2;break;case"l":r.x+=jQuery(e).outerWidth()-l;break;case"r":}r.width=l,r.height=i+40,n.monthsCombo.style.display="none",a(r),n.showAt(r.x,r.y)},void Calendar.continuation_for_the_khtml_browser()):(this.showAt(r.x,r.y+e.offsetHeight),!0)},Calendar.prototype.setDateFormat=function(e){this.dateFormat=e},Calendar.prototype.setTtDateFormat=function(e){this.ttDateFormat=e},Calendar.prototype.parseDate=function(e,t){t||(t=this.dateFormat),this.setDate(Date.parseDate(e,t))},Calendar.prototype._displayWeekdays=function(){for(var e=this.firstDayOfWeek,t=this.firstdayname,a=Calendar._TT.WEEKEND,n=0;n<7;++n){t.className="day name";var r=(n+e)%7;n&&(t.ttip=Calendar._TT.DAY_FIRST.replace("%s",Calendar._DN[r]),t.navtype=100,t.calendar=this,t.fdow=r,Calendar._add_evs(t)),a.indexOf(r.toString())!=-1&&Calendar.addClass(t,"weekend"),t.innerHTML=Calendar._SDN[(n+e)%7],t=t.nextSibling}},Calendar.prototype._hideCombos=function(){this.monthsCombo.style.display="none",this.yearsCombo.style.display="none"},Calendar.prototype._dragStart=function(e){if(!this.dragging){this.dragging=!0;var t,a;Calendar.is_ie?(a=window.event.clientY+document.body.scrollTop,t=window.event.clientX+document.body.scrollLeft):(a=e.clientY+window.scrollY,t=e.clientX+window.scrollX);var n=this.element.style;this.xOffs=t-parseInt(n.left),this.yOffs=a-parseInt(n.top),Calendar.addEvent(document,"mousemove",Calendar.calDragIt),Calendar.addEvent(document,"mouseup",Calendar.calDragEnd)}},Date._MD=new Array(31,28,31,30,31,30,31,31,30,31,30,31),Date.SECOND=1e3,Date.MINUTE=60*Date.SECOND,Date.HOUR=60*Date.MINUTE,Date.DAY=24*Date.HOUR,Date.WEEK=7*Date.DAY,Date._multisplit=function(e,t){if(null==e)return null;null==t&&(t="");var a=[],n=e.length,r="",l=!1;for(i=0;i<n;i++){var s=e.charAt(i);t.indexOf(s)==-1?(l=!0,r+=s):l&&(a[a.length]=r,r="",l=!1)}return r.length>0&&(a[a.length]=r),0==a.length&&(a[a.length]=""),a},Date._parseNonDateFormatChars=function(e){var t="aAbBCdeHIJklmMnpPRSstUWVuwyY%",a="",n=e.length;for(i=0;i<n;i++){var r=e.charAt(i);if("%"==r){var l="";if(i+1<n&&(l=e.charAt(i+1)),i+=1,l.length>0&&t.indexOf(l)!=-1)continue;a.indexOf(r)==-1&&(a+=r),l.length>0&&a.indexOf(l)==-1&&(a+=l)}else a.indexOf(r)==-1&&(a+=r)}return a},Date.splitDate=function(e,t){var a=0,n=-1,r=0,l=Date._parseNonDateFormatChars(t),i=Date._multisplit(e,l),s=t.match(/%./g),d=0,o=0,u=0,h=0;for(d=0;d<i.length;++d)if(i[d])switch(s[d]){case"%d":case"%e":r=Number(i[d]);break;case"%m":n=Number(i[d])-1;break;case"%Y":case"%y":a=Number(i[d]),a<100&&(a+=a>29?1900:2e3);break;case"%b":case"%B":var C=i[d].toLowerCase(),c=!1;if("%b"==s[d])for(o=0;o<12;++o)if(Calendar._SMN[o].substr(0,C.length).toLowerCase()==C){n=o,c=!0;break}if(!c)for(o=0;o<12;++o)if(Calendar._MN[o].substr(0,C.length).toLowerCase()==C){n=o;break}break;case"%H":case"%I":case"%k":case"%l":u=Number(i[d]);break;case"%P":case"%p":/pm/i.test(i[d])&&u<12?u+=12:/am/i.test(i[d])&&u>=12&&(u-=12);break;case"%M":h=Number(i[d]);break;case"%R":var m=i[d],p=m.indexOf(":"),v=m.substring(0,p),f=p==-1?0:m.substring(p+1);u=Number(v),h=Number(f)}return{parts:i,year:a,month:n,day:r,hour:u,minute:h}},Date.parseDate=function(e,t){var a=new Date,n=Date.splitDate(e,t),r=n.parts,l=n.year,i=n.month,s=n.day,d=n.hour,o=n.minute,u=0,h=0;if(isNaN(l)&&(l=a.getFullYear()),isNaN(i)&&(i=a.getMonth()),isNaN(s)&&(s=a.getDate()),isNaN(d)&&(d=a.getHours()),isNaN(o)&&(o=a.getMinutes()),0!=l&&i!=-1&&0!=s)return new Date(l,i,s,d,o,0);for(l=0,i=-1,s=0,u=0;u<r.length;++u)if(r[u].search(/[a-zA-Z]+/)!=-1){var C=-1;for(h=0;h<12;++h)if(Calendar._MN[h].substr(0,r[u].length).toLowerCase()==r[u].toLowerCase()){C=h;break}C!=-1&&(i!=-1&&(s=i+1),i=C)}else Number(r[u])<=12&&i==-1?i=r[u]-1:Number(r[u])>31&&0==l?(l=Number(r[u]),l<100&&(l+=l>29?1900:2e3)):0==s&&(s=r[u]);return 0==l&&(l=a.getFullYear()),i!=-1&&0!=s?new Date(l,i,s,d,o,0):a},Date.prototype.getMonthDays=function(e){var t=this.getFullYear();return"undefined"==typeof e&&(e=this.getMonth()),0!=t%4||0==t%100&&0!=t%400||1!=e?Date._MD[e]:29},Date.prototype.getDayOfYear=function(){var e=new Date(this.getFullYear(),this.getMonth(),this.getDate(),13,0,0),t=new Date(this.getFullYear(),0,0,13,0,0),a=e-t;return Math.floor(a/Date.DAY)},Date.prototype.getWeekNumber=function(e){return Date.useISO8601WeekNumbers?this.getISO8601WeekNumber():this.getSimpleWeekNumber(e)},Date.prototype.getISO8601WeekNumber=function(){function e(e,t,a){return y=e,m=t,t<3&&(y-=1),t<3&&(m+=12),Math.floor(365.25*y)-Math.floor(y/100)+Math.floor(y/400)+Math.floor(30.6*(m+1))+a-62}function t(t){return year=t.getFullYear(),month=t.getMonth(),day=t.getDate(),wday=t.getDay(),weekday=(wday+6)%7+1,isoyear=year,d0=e(year,1,0),weekday0=(d0+4)%7+1,d=e(year,month+1,day),isoweeknr=Math.floor((d-d0+weekday0+6)/7)-Math.floor((weekday0+3)/7),11==month&&day-weekday>27&&(isoweeknr=1,isoyear+=1),0==month&&weekday-day>3&&(d0=e(year-1,1,0),weekday0=(d0+4)%7+1,isoweeknr=Math.floor((d-d0+weekday0+6)/7)-Math.floor((weekday0+3)/7),isoyear-=1),isoweeknr}return t(this)},Date.prototype.getSimpleWeekNumber=function(e){function t(e,t,a){var n,r=e.getFullYear(),l=new Date(r,0,1);return n=Math.round((e-l)/864e5),null!=t&&(n-=(7+t-l.getDay())%7),null!=a&&(n+=a),[r,1+n/7|0,1+(7+n)%7]}return t(this,e?e:6,6)[1]},Date.prototype.equalsTo=function(e){return this.getFullYear()==e.getFullYear()&&this.getMonth()==e.getMonth()&&this.getDate()==e.getDate()&&this.getHours()==e.getHours()&&this.getMinutes()==e.getMinutes()},Date.prototype.setDateOnly=function(e){var t=new Date(e);this.setDate(1),this.setFullYear(t.getFullYear()),this.setMonth(t.getMonth()),this.setDate(t.getDate())},Date.prototype.print=function(e){var t=this.getMonth(),a=this.getDate(),n=this.getFullYear(),r=this.getWeekNumber(),l=this.getDay(),i={},s=this.getHours(),d=s>=12,o=d?s-12:s,u=this.getDayOfYear();0==o&&(o=12);var h=this.getMinutes(),C=this.getSeconds();i["%a"]=Calendar._SDN[l],i["%A"]=Calendar._DN[l],i["%b"]=Calendar._SMN[t],i["%B"]=Calendar._MN[t],i["%C"]=1+Math.floor(n/100),i["%d"]=a<10?"0"+a:a,i["%e"]=a,i["%H"]=s<10?"0"+s:s,i["%I"]=o<10?"0"+o:o,i["%j"]=u<100?u<10?"00"+u:"0"+u:u,i["%k"]=s,i["%l"]=o,i["%m"]=t<9?"0"+(1+t):1+t,i["%M"]=h<10?"0"+h:h,i["%n"]="\n",i["%p"]=d?Calendar._TT.PM:Calendar._TT.AM,i["%P"]=d?Calendar._TT.PM:Calendar._TT.AM,i["%R"]=i["%k"]+":"+i["%M"],i["%s"]=Math.floor(this.getTime()/1e3),i["%S"]=C<10?"0"+C:C,i["%t"]="\t",i["%U"]=i["%W"]=i["%V"]=r<10?"0"+r:r,i["%u"]=l+1,i["%w"]=l,i["%y"]=(""+n).slice(-2),i["%Y"]=n,i["%%"]="%";var c=/%./g;if(!Calendar.is_ie5&&!Calendar.is_khtml)return e.replace(c,function(e){return i[e]||e});for(var m=e.match(c),p=0;p<m.length;p++){var v=i[m[p]];v&&(c=new RegExp(m[p],"g"),e=e.replace(c,v))}return e},window._dynarch_popupCalendar=null;;
;
/* module-key = 'jira.webresources:calendar', location = '/includes/lib/calendar/Calendar.setup.js' */
Calendar.setup=function(e){function t(t,a){"undefined"==typeof e[t]&&(e[t]=a)}function a(e){var t=e.params,a=e.dateClicked||t.electric;a&&t.inputField&&(t.inputField.value=e.date.print(t.ifFormat),jQuery(t.inputField).change()),a&&t.displayArea&&(t.displayArea.innerHTML=e.date.print(t.daFormat)),a&&"function"==typeof t.onUpdate&&t.onUpdate(e),a&&t.flat&&"function"==typeof t.flatCallback&&t.flatCallback(e),"true"===t.singleClick?t.singleClick=!0:"false"===t.singleClick&&(t.singleClick=!1),a&&t.singleClick&&e.dateClicked&&e.callCloseHandler()}function n(){if(Calendar._UNSUPPORTED===!0)return void alert("The JIRA Calendar does not currently support your language.");var t=e.inputField||e.displayArea,n=e.inputField?e.ifFormat:e.daFormat,l=!1,i=window.calendar;if(i&&i.hide(),t&&(t.value||t.innerHTML)&&(e.date=Date.parseDate(t.value||t.innerHTML,n)),i&&e.cache?(e.date&&i.setDate(e.date),i.hide()):(window.calendar=i=new Calendar(e.firstDay,e.date,e.todayDate,e.onSelect||a,e.onClose||function(e){e.hide()}),i.showsTime=e.showsTime,i.time24="24"==e.timeFormat,i.weekNumbers=e.weekNumbers,Date.useISO8601WeekNumbers=e.useISO8601WeekNumbers,e.useISO8601WeekNumbers&&(i.firstDayOfWeek=1),l=!0),e.multiple){i.multiple={};for(var r=e.multiple.length;--r>=0;){var u=e.multiple[r],s=u.print("%Y%m%d");i.multiple[s]=u}}return i.showsOtherMonths=e.showOthers,i.yearStep=e.step,i.setRange(e.range[0],e.range[1]),i.params=e,i.setDateStatusHandler(e.dateStatusFunc),i.getDateText=e.dateText,i.setDateFormat(n),l&&i.create(),i.refresh(),e.position?i.showAt(e.position[0],e.position[1]):i.showAtElement(e.button||e.displayArea||e.inputField,e.align),!1}function l(){var t=jQuery(e.inputField);e.button&&jQuery(e.button).mousedown(function(e){e.preventDefault(),!t.is(":focus")&&t.is(":enabled")&&t.focus()}),t.keydown(function(e){var t=window.calendar;40===e.keyCode&&(t&&!t.hidden||setTimeout(function(){n()},1))})}e=e||{},t("inputField",null),t("context",null),t("displayArea",null),t("button",null),t("eventName","click"),t("ifFormat","%Y/%m/%d"),t("daFormat","%Y/%m/%d"),t("singleClick",!0),t("disableFunc",null),t("dateStatusFunc",e.disableFunc),t("dateText",null),t("firstDay",null),t("align","Br"),t("range",[1900,2999]),t("weekNumbers",!0),t("useISO8601WeekNumbers",!1),t("flat",null),t("flatCallback",null),t("onSelect",null),t("onClose",null),t("onUpdate",null),t("date",null),t("todayDate",null),t("showsTime",!1),t("timeFormat","24"),t("electric",!0),t("step",1),t("position",null),t("cache",!1),t("showOthers",!1),t("multiple",null);var i,r,u=["context","inputField","button","displayArea"];for(i in u)r=u[i],e[r]instanceof jQuery&&(e[r]=e[r][0]);var s=["inputField","displayArea","button"];for(i in s)if(r=s[i],"string"==typeof e[r]){var o="#"+e[r].escapejQuerySelector(),d=jQuery(e.context||document.body).find(o);e[r]=d[0]}if(!(e.flat||e.multiple||e.inputField||e.displayArea||e.button))return AJS.log("Calendar.setup:\n  Nothing to setup (no fields found).  Please check your code"),!1;if(e.firstDay&&null!==e.firstDay&&(e.firstDay=+e.firstDay),null!=e.flat){if("string"==typeof e.flat&&(e.flat=document.getElementById(e.flat)),!e.flat)return AJS.log("Calendar.setup:\n  Flat specified but can't find parent."),!1;var p=new Calendar(e.firstDay,e.date,e.todayDate,e.onSelect||a);return p.showsOtherMonths=e.showOthers,p.showsTime=e.showsTime,p.time24="24"==e.timeFormat,p.params=e,p.weekNumbers=e.weekNumbers,p.setRange(e.range[0],e.range[1]),p.setDateStatusHandler(e.dateStatusFunc),p.getDateText=e.dateText,e.ifFormat&&p.setDateFormat(e.ifFormat),e.inputField&&"string"==typeof e.inputField.value&&p.parseDate(e.inputField.value),p.create(e.flat),p.show(),!1}var f=e.button||e.displayArea||e.inputField;return jQuery(f).bind(e.eventName,function(e){e.preventDefault(),n()}),e.inputField&&l(),p};;
;
/* module-key = 'jira.webresources:autocomplete', location = '/includes/jira/dropdown/Dropdown.js' */
define("jira/dropdown",["require"],function(i){function o(){try{return Boolean(n.require("jira/dialog/dialog").current)}catch(i){}return!1}var n=i("jira/util/top-same-origin-window")(window),t=i("jquery"),d=[];return{current:null,addInstance:function(){d.push(this)},hideInstances:function(){var i=this;t(d).each(function(){i!==this&&this.hideDropdown()})},getHash:function(){return this.hash||(this.hash={container:this.dropdown,hide:this.hideDropdown,show:this.displayDropdown}),this.hash},displayDropdown:function(i){if(this.current!==this){this.hideInstances(),this.current=this,this.dropdown.css({display:"block"}),this.displayed=!0;var n=this.dropdown;o()||i||setTimeout(function(){var i=t(window),o=n.offset().top+n.prop("offsetHeight")-i.height()+10;i.scrollTop()<o&&t("html,body").animate({scrollTop:o},300,"linear")},100)}},hideDropdown:function(){this.displayed!==!1&&(this.current=null,this.dropdown.css({display:"none"}),this.displayed=!1)},init:function(i,o){var n=this;this.addInstance(this),this.dropdown=t(o),this.dropdown.css({display:"none"}),t(document).keydown(function(i){9===i.keyCode&&n.hideDropdown()}),i.target?t.aop.before(i,function(){n.displayed||n.displayDropdown()}):(n.dropdown.css("top",t(i).outerHeight()+"px"),i.click(function(i){n.displayed?n.hideDropdown():(n.displayDropdown(),i.stopPropagation()),i.preventDefault()})),t(document.body).click(function(){n.displayed&&n.hideDropdown()})}}}),AJS.namespace("JIRA.Dropdown",null,require("jira/dropdown")),AJS.namespace("jira.widget.dropdown",null,require("jira/dropdown"));;
;
/* module-key = 'jira.webresources:autocomplete', location = '/includes/jira/autocomplete/AutoComplete.js' */
define("jira/autocomplete/autocomplete",["jira/ajs/ajax/smart-ajax","jira/util/objects","jquery","jira/featureflags/feature-manager"],function(e,t,o,n){return function(){var i,s=function(e,t){s.t&&(clearTimeout(s.t),s.t=void 0),s.t=setTimeout(e,1e3*t)},r={9:!0,13:!0,14:!0,25:!0,27:!0,38:!0,40:!0,224:!0};return{dispatcher:function(){},getSavedResponse:function(){},saveResponse:function(){},renderSuggestions:function(){},disable:function(){this.disabled=!0},enable:function(){this.disabled=!1},set:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t])},completeInputField:function(e,t){e&&t&&(this.field.val(t).focus(),this.hiddenField&&(this.hiddenField.val(e),this.hiddenField.trigger("change")),this.field.trigger("change"))},textToSuggestionCursorPosition:function(){return this.field.val()},_makeRequest:function(o){var n=this,i=t.copyObject(o);return this.pendingRequest&&this.pendingRequest.abort(),i.complete=function(){n.pendingRequest=null},i.error=function(e){!e.aborted&&0!==e.status&&o.error&&o.error.apply(this,arguments)},this.pendingRequest=e.makeRequest(i)},addSuggestionControls:function(e){function t(e){d.dropdownController.displayed&&a(e.data.index)}function s(e){0===e.data.index&&(d.selectedIndex=-1),o(this).removeClass("active")}function r(e){var t=d.suggestionNodes[e.data.index],o=Array.isArray(t)&&t.length>2;if(d.strictModeEnabledForUserPickers){var n=d.suggestionNodes[e.data.index];d.completeInputField(n[1],n[3])}else if(o){var i=t.length>3?t[3]:void 0;d.completeInputField(t[1],i)}else d.completeField(d.suggestionNodes[d.selectedIndex][1])}var d=this,l=function(e,t){var o=d.autoSelectFirst===!1?-1:0;return d.allowArrowCarousel?e>t?o:e<o?t:e:e>t?t:e<o?(d.responseContainer.scrollTop(0),o):e},a=function(e){void 0!==d.selectedIndex&&d.selectedIndex>-1&&d.suggestionNodes[d.selectedIndex][0].removeClass("active"),d.selectedIndex=l(e,d.suggestionNodes.length-1),d.selectedIndex>-1&&d.suggestionNodes[d.selectedIndex][0].addClass("active")},u=function(){return d.suggestionNodes&&d.suggestionNodes[d.selectedIndex]&&d.suggestionNodes[d.selectedIndex][0].hasClass("active")},p=function(){return n.isFeatureEnabled("jira.jql.autoselectfirst")},c=function(e){if(d.responseContainer.is(":visible")&&13===e.keyCode){if(u()&&!d.pendingRequest){var t=d.suggestionNodes[d.selectedIndex][1],o=Array.isArray(t)&&t.length>2;if(d.strictModeEnabledForUserPickers){var n=d.suggestionNodes[d.selectedIndex];d.completeInputField(n[1],n[3])}else if(o){var i=t.length>3?t[3]:void 0;d.completeInputField(t[1],i)}else d.completeField(d.suggestionNodes[d.selectedIndex][1]);p()&&d.dispatcher(d.field.val())}e.preventDefault(),e.stopPropagation()}},h=function(e){if(d.responseContainer.is(":visible"))if(d.field[0]!==document.activeElement&&d.field.focus(),40===e.keyCode){if(a(d.selectedIndex+1),d.selectedIndex>=0){var t=d.responseContainer.height(),o=d.suggestionNodes[d.selectedIndex][0].position().top+d.suggestionNodes[d.selectedIndex][0].outerHeight();o-t>0&&d.responseContainer.scrollTop(d.responseContainer.scrollTop()+o-t+2)}else d.responseContainer.scrollTop(0);e.preventDefault()}else if(38===e.keyCode){if(a(d.selectedIndex-1),d.selectedIndex>=0){var n=d.suggestionNodes[d.selectedIndex][0].position().top;n<0&&d.responseContainer.scrollTop(d.responseContainer.scrollTop()+n-2)}e.preventDefault()}else if(9===e.keyCode)if(u()){var i=d.suggestionNodes[d.selectedIndex][1],s=Array.isArray(i)&&i.length>2;if(d.strictModeEnabledForUserPickers){var r=d.suggestionNodes[d.selectedIndex];d.completeInputField(r[1],r[3])}else if(s){var l=i.length>3?i[3]:void 0;d.completeInputField(i[1],l)}else d.completeField(d.suggestionNodes[d.selectedIndex][1]);e.preventDefault()}else d.dropdownController.hideDropdown()};if(e.length){this.selectedIndex=0,this.suggestionNodes=e;for(var f=0;f<d.suggestionNodes.length;f++){var g={instance:this,index:f};this.suggestionNodes[f][0].bind("mouseover",g,t).bind("mouseout",g,s).bind("click",g,r).bind("mousedown",function(e){e.preventDefault()})}this.keyboardHandlerBinded||(o(this.field).keypress(c),o(this.field).keydown(h),this.keyboardHandlerBinded=!0),a(d.autoSelectFirst===!1?-1:0),i=this}},clearResponseContainer:function(){this.responseContainer.empty(),this.suggestionNodes=void 0},delay:s,buildResponseContainer:function(){var e=this.field.parent().addClass("atlassian-autocomplete");this.responseContainer=o(document.createElement("div")),this.responseContainer.addClass("suggestions medium-long-field"),this.positionResponseContainer(),this.responseContainer.appendTo(e)},positionResponseContainer:function(){this.responseContainer.css({top:this.field.outerHeight()})},keyUpHandler:function(){function e(){this.responseContainer||this.buildResponseContainer(),this.dispatcher(this.field.val())}return function(t){return this.field.val().length>=this.minQueryLength&&(t.keyCode in r&&(!this.responseContainer||this.responseContainer.is(":visible")||38!==t.keyCode&&40!==t.keyCode)||e.call(this)),t}}(),addMultiSelectAdvice:function(e){var t=this,n=function(e){if(!n.isAlerting){n.isAlerting=!0;var i=o(document.createElement("div")).css({float:"left",display:"none"}).addClass("warningBox").html("Oops! You have already entered the value <em>"+e+"</em>").appendTo(t.field.parent()).show("fast",function(){t.delay(function(){i.hide("fast",function(){i.remove(),n.isAlerting=!1})},4)})}};o.aop.before({target:this,method:"dispatcher"},function(t){var n=this.field.val();return t[0]=o.trim(n.slice(n.lastIndexOf(e)+1)),t}),o.aop.before({target:this,method:"completeInputField"},function(t){var i=t[0],s=this.field.val().split(e),r=o(s).map(function(){return o.trim(this)}).get();return!this.allowDuplicates&&new RegExp("(?:^|[\\s"+e+"])"+i+"\\s*"+e).test(this.field.val())?(n(i),r[r.length-1]=""):(r[r.length-1]=i,r[r.length]=""),t[0]=r.join(e.replace(/([^\s]$)/,"$1 ")),t})},addDropdownAdvice:function(){o.aop.after({target:this,method:"buildResponseContainer"},function(e){return this.dropdownController=JIRA.Dropdown.AutoComplete({target:this,method:"renderSuggestions"},this.responseContainer),o.aop.after({target:this.dropdownController,method:"hideDropdown"},function(){this.dropdown.removeClass("dropdown-ready")}),e}),o.aop.after({target:this,method:"renderSuggestions"},function(e){return e&&e.length>0?(this.dropdownController.displayDropdown(),this.maxHeight&&this.dropdownController.dropdown.prop("scrollHeight")>this.maxHeight?this.dropdownController.dropdown.css({height:this.maxHeight,overflowX:"visible",overflowY:"scroll"}):this.maxHeight&&this.dropdownController.dropdown.css({height:"",overflowX:"",overflowY:""}),this.dropdownController.dropdown.addClass("dropdown-ready")):this.dropdownController.hideDropdown(),e}),o.aop.after({target:this,method:"completeInputField"},function(e){return this.dropdownController.hideDropdown(),e}),o.aop.after({target:this,method:"completeField"},function(e){return this.dropdownController.hideDropdown(),e}),o.aop.after({target:this,method:"keyUpHandler"},function(e){return this.field.val().length>=this.minQueryLength&&27!==e.keyCode||!this.dropdownController||!this.dropdownController.displayed||(this.dropdownController.hideDropdown(),27===e.keyCode&&e.stopPropagation()),e})},init:function(e){var t=this,n=13,s=9;this.set(e),this.field=this.field||o("#"+this.fieldID);var r=this.field.val();this.field.attr("autocomplete","off").keyup(function(e){t.disabled||(e.keyCode!==n&&e.keyCode!==s&&t.strictModeEnabledForUserPickers&&!t.field.val()&&t.hiddenField.val(""),t.keyUpHandler(e))}).keydown(function(e){r=t.field.val();var o=27;e.keyCode===o&&t.responseContainer&&t.responseContainer.is(":visible")&&e.preventDefault()}).click(function(e){i===t&&e.stopPropagation()}).blur(function(){t.pendingRequest&&t.pendingRequest.abort()}),this.addDropdownAdvice(),e.delimChar&&this.addMultiSelectAdvice(e.delimChar)}}}()}),AJS.namespace("jira.widget.autocomplete",null,require("jira/autocomplete/autocomplete")),AJS.namespace("JIRA.AutoComplete",null,require("jira/autocomplete/autocomplete"));;
;
/* module-key = 'jira.webresources:autocomplete', location = '/includes/jira/autocomplete/RESTAutoComplete.js' */
define("jira/autocomplete/rest-autocomplete",["jira/autocomplete/autocomplete","jira/util/objects"],function(e,t){return function(){var s=t.begetObject(e);return s.dispatcher=function(e){var t=this;e.length<this.minQueryLength||(this.getSavedResponse(e)?(t.renderSuggestions(t.getSavedResponse(e)),t.responseContainer.scrollTop(0)):this.delay(function(){var s=t.getAjaxParams();s.data.query=e,s.success=function(s){t.saveResponse(e,s),t.responseContainer.scrollTop(0),t.renderSuggestions(s)},t._makeRequest(s)},t.queryDelay))},s.getAjaxParams=function(){},s.getSavedResponse=function(e){return this.requested||(this.requested={}),this.requested[e]},s.saveResponse=function(e,t){"string"==typeof e&&"object"==typeof t&&(this.requested||(this.requested={}),this.requested[e]=t)},s}()}),AJS.namespace("jira.widget.autocomplete.REST",null,require("jira/autocomplete/rest-autocomplete")),AJS.namespace("JIRA.RESTAutoComplete",null,require("jira/autocomplete/rest-autocomplete"));;
;
/* module-key = 'jira.webresources:autocomplete', location = '/includes/jira/autocomplete/IssueAutoComplete.js' */
define("jira/autocomplete/issue-autocomplete",["jira/data/parse-options-from-fieldset","jira/field/issue-picker","jira/autocomplete/rest-autocomplete","jira/util/objects","wrm/context-path","jquery"],function(e,t,s,a,i,n){var r=i(),d=function(e){var t=a.begetObject(s);return t.getAjaxParams=function(){return{url:r+"/rest/api/2/issue/picker",data:e.ajaxData,dataType:"json",type:"GET"}},t.renderSuggestions=function(s){var a,i=[];if(this.clearResponseContainer(),s&&s.sections&&s.sections.length>0)return a=n("<ul/>").appendTo(this.responseContainer),n(s.sections).each(function(){var t=this,s=n("<div/>").attr("id",e.fieldID+"_s_"+t.id).addClass("yag").text(t.label);if(t.sub&&s.append(n("<span/>").addClass("yagt").text("("+t.sub+")")),a.append(n("<li/>").append(s).mouseover(function(){n(this).addClass("active")}).mouseout(function(){n(this).removeClass("active")})),t.msg){var d=n("<div/>").attr("id",e.fieldID+"_i_"+t.id+"_n").addClass("yad").text(t.msg);a.append(n("<li/>").append(d).mouseover(function(){n(this).addClass("active")}).mouseout(function(){n(this).removeClass("active")}))}t.issues&&t.issues.length>0&&n(t.issues).each(function(){var s;s=/^http/.test(this.img)?this.img:r+this.img;var d=n("<li/>").append(n("<div/>").attr("id",e.fieldID+"_i_"+t.id+"_"+this.key).addClass("yad").append(n("<table/>").addClass("yat").attr({cellpadding:"0",cellspacing:"0"}).append(n("<tr/>").append(n("<td/>").append(n("<img/>").attr("src",s))).append(n("<td/>").append(n("<div/>").addClass("yak").html(this.keyHtml))).append(n("<td/>").css("width","100%").html(this.summary)))));a.append(d),i.push([d,this.key])})}),t.addSuggestionControls(i),i},e.minQueryLength=1,e.queryDelay=.25,t.init(e),t};return d.init=function(){n("fieldset.issue-picker-params").each(function(){var s=e(n(this)),a=n("#"+s.fieldId+"-container").add("#"+s.fieldName+"_container");a.find("a.popup-trigger").click(function(e){var a=r+"/secure/popups/IssuePicker.jspa?";a+="currentIssue="+s.currentIssueKey+"&",a+="singleSelectOnly="+s.singleSelectOnly+"&",a+="showSubTasks="+s.showSubTasks+"&",a+="showSubTasksParent="+s.showSubTaskParent,s.currentProjectId&&""!==s.currentProjectId&&(a+="&selectedProjectId="+s.currentProjectId),t.callback=function(e){var t,a=[];e=JSON.parse(e),s.fieldId&&a&&(t=n("#"+s.fieldId),t&&(n.each(e,function(){a.push(this.value)}),t.val(a.join(", "))))};var i=window.open(a,"IssueSelectorPopup","status=no,resizable=yes,top=100,left=200,width=620,height=500,scrollbars=yes,resizable");i.opener=self,i.focus(),e.preventDefault()}),s.fieldId||(s.fieldId=s.fieldName),s.issuePickerEnabled===!0&&d({fieldID:s.fieldId,delimChar:s.singleSelectOnly===!0?void 0:",",ajaxData:s})})},d}),AJS.namespace("jira.widget.autocomplete.Issues",null,require("jira/autocomplete/issue-autocomplete")),AJS.namespace("JIRA.IssueAutoComplete",null,require("jira/autocomplete/issue-autocomplete"));;
;
/* module-key = 'jira.webresources:autocomplete', location = '/includes/jira/autocomplete/UserAutoComplete.js' */
define("jira/autocomplete/user-autocomplete",["jira/autocomplete/rest-autocomplete","jira/data/parse-options-from-fieldset","jira/util/browser","jira/util/elements","jira/util/objects","jquery"],function(e,t,i,r,a,o){var s=function(t){function s(e){var t=!1,i=e.closest("form");return i.length&&i.hasClass("submitting")&&(t=!0),t}var n=a.begetObject(e),l=!0;return n.getAjaxParams=function(){var e={url:contextPath+"/rest/api/1.0/users/picker",data:{fieldName:t.fieldID,fieldConfigId:t.fieldConfigID,projectId:t.projectId},dataType:"json",type:"GET"};return l&&(e.headers={"x-atlassian-force-account-id":"true"}),e},n.renderSuggestions=function(e){if(s(this.field)||!i.isSelenium()&&!r.elementIsFocused(this.field))return!1;var t,a=[];return this.clearResponseContainer(),e&&e.users&&e.users.length>0&&(t=o("<ul/>").appendTo(this.responseContainer),o(e.users).each(function(){l?a.push([o("<li/>").html(this.html).appendTo(t),this.accountId,this.accountId,this.displayName]):a.push([o("<li/>").html(this.html).appendTo(t),null!=this.name?this.name:"",this.accountId,this.displayName])})),e.footer&&this.responseContainer.append(o("<div/>").addClass("yui-ac-ft").html(e.footer).css("display","block")),a.length>0&&(n.addSuggestionControls(a),o(".atlassian-autocomplete div.yad, .atlassian-autocomplete .labels li").textOverflow({autoUpdate:!0})),a},t.minQueryLength=2,t.queryDelay=.25,n.init(t),n};return s.init=function(e){o("fieldset.user-picker-params",e).each(function(){var i=t(o(this)),r=i.fieldId||i.fieldName,a=o("#"+r+"_container");a.find("a.popup-trigger").click(function(e){var t,s=contextPath;if(e.preventDefault(),i.formName||(i.formName=a.find("#"+r).parents("form").attr("name")),s+=i.actionToOpen?i.actionToOpen:"/secure/popups/UserPickerBrowser.jspa",s+="?formName="+i.formName+"&",s+="multiSelect="+i.multiSelect+"&",s+="decorator=popup&",s+="element="+r,i.fieldConfigId&&(s+="&fieldConfigId="+i.fieldConfigId),i.projectId)if(o.isArray(i.projectId))for(var n in i.projectId)s+="&projectId="+n;else s+="&projectId="+i.projectId;t=window.open(s,"UserPicker","status=yes,resizable=yes,top=100,left=100,width=800,height=750,scrollbars=yes"),t.opener=self,t.focus()});var n=e?e.find("#"+r):null,l=e?e.find("#hidden-"+r):null,d=i["enable-strict-mode-for-this-user-picker"];i.userPickerEnabled===!0&&s({field:n,hiddenField:l,fieldID:r,fieldConfigID:i.fieldConfigId,projectId:i.projectId,delimChar:i.multiSelect===!1?void 0:",",ajaxData:{fieldName:i.fieldName},strictModeEnabledForUserPickers:d})})},s}),AJS.namespace("jira.widget.autocomplete.Users",null,require("jira/autocomplete/user-autocomplete")),AJS.namespace("JIRA.UserAutoComplete",null,require("jira/autocomplete/user-autocomplete"));;
;
/* module-key = 'jira.webresources:autocomplete', location = '/includes/jira/autocomplete/initAutoCompleteFields.js' */
!function(){JIRA.bind(JIRA.Events.NEW_CONTENT_ADDED,function(e,t,i){i!==JIRA.CONTENT_ADDED_REASON.panelRefreshed&&(JIRA.UserAutoComplete.init(t),JIRA.IssueAutoComplete.init(t))}),JIRA.bind(JIRA.Events.NEW_CONTENT_ADDED,function(e,t,i){i!==JIRA.CONTENT_ADDED_REASON.panelRefreshed&&AJS.$("fieldset.user-searcher-params",t).each(function(){var e=JIRA.parseOptionsFromFieldset(AJS.$(this)),i=AJS.$("#"+e.fieldId+"_container",t);if(e.userPickerEnabled===!0)var r=JIRA.UserAutoComplete({fieldID:e.fieldId,delimChar:e.multiSelect===!0?",":void 0,ajaxData:{fieldName:e.fieldName}});var s=function(i){var s=AJS.$("#"+e.fieldId,t),o=AJS.$("#"+e.fieldId+"Image",t),l=AJS.$("#"+e.fieldId+"GroupImage",t),a=AJS.$("#"+e.fieldId+"_desc",t);"select.list.none"===i?(s.val("").attr("disabled","true"),o.hide(),l.hide(),a.hide()):(s.removeAttr("disabled"),"select.list.group"===i?(o.hide(),l.show(),e.userPickerEnabled===!0&&(r.disable(),a.hide())):(o.show(),l.hide(),e.userPickerEnabled===!0&&(r.enable(),a.show())))};AJS.$("#"+e.userSelect,t).change(function(){var e=AJS.$(this).find("option:selected").attr("rel");s(e)}).find("option:selected").each(function(){s(AJS.$(this).attr("rel"))}),i.find("a.user-popup-trigger").click(function(t){var i=contextPath+"/secure/popups/UserPickerBrowser.jspa?";i+="formName="+e.formName+"&",i+="multiSelect="+e.multiSelect+"&",i+="decorator=popup&",i+="element="+e.fieldId;var r=window.open(i,"UserPicker","status=yes,resizable=yes,top=100,left=100,width=800,height=750,scrollbars=yes");r.opener=self,r.focus(),t.preventDefault()}),i.find("a.group-popup-trigger").click(function(t){var i=contextPath+"/secure/popups/GroupPickerBrowser.jspa?";i+="formName="+e.formName+"&",i+="multiSelect="+e.multiSelect+"&",i+="decorator=popup&",i+="element="+e.fieldId;var r=window.open(i,"GroupPicker","status=yes,resizable=yes,top=100,left=100,width=800,height=750,scrollbars=yes");r.opener=self,r.focus(),t.preventDefault()})})})}();;
;
/* module-key = 'jira.webresources:group-label-lozenge', location = '/includes/jira/admin/group-browser/group-label-lozenge.js' */
define("jira/admin/group-browser/group-label-lozenge",["jquery","jira/skate"],function(e,t){t("group-label-lozenge",{type:t.type.CLASSNAME,attached:function(t){e(t).tooltip({gravity:"w",html:!0})}})});;
;
/* module-key = 'jira.webresources:group-label-lozenge', location = 'includes/jira/admin/group-browser/group-label-lozenge.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),JIRA.Templates.groupLabelLozenge=function(e,l){return""+aui.lozenges.lozenge({text:e.label.text,title:e.label.title,isSubtle:!0,extraClasses:"group-label-lozenge"})};;
;
/* module-key = 'jira.webresources:groupbrowser', location = '/includes/jira/admin/group-browser/group-browser.js' */
require(["jquery","jira/admin/group-browser/group-label-lozenge"],function(i){i(function(){i(".operations-list .aui-button[disabled]").tooltip({gravity:"e",html:!1})})});;
;
/* module-key = 'jira.webresources:group-pickers', location = 'includes/jira/field/templates/groupPickerUtil.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.GroupPickerUtil&&(JIRA.Templates.GroupPickerUtil={}),JIRA.Templates.GroupPickerUtil.formatResponseWithLabels=function(e,s){return""+JIRA.Templates.GroupPickerUtil.formatResponse(soy.$$augmentMap(e,{showLabels:!0}))},JIRA.Templates.GroupPickerUtil.formatResponse=function(e,s){var t='<div class="group-suggestion-item"><span class="group-suggestion-item__name">'+soy.$$filterNoAutoescape(e.html)+"</span>";if(e.showLabels){t+='<span class="group-suggestion-item__labels group-labels-lozenges">';for(var a=e.labels,o=a.length,l=0;l<o;l++){var p=a[l];t+=JIRA.Templates.groupLabelLozenge({label:p})+" "}t+="</span>"}return t+="</div>"};;
;
/* module-key = 'jira.webresources:group-pickers', location = '/includes/jira/field/templates/group-picker-util-template-wrapper.js' */
define("jira/field/group-picker-util/templates",[],function(){"use strict";return window.JIRA.Templates.GroupPickerUtil});;
;
/* module-key = 'jira.webresources:group-pickers', location = '/includes/jira/field/groupPickerUtil.js' */
define("jira/field/group-picker-util",["jira/ajs/list/item-descriptor","jira/ajs/list/group-descriptor","jquery","jira/field/group-picker-util/templates"],function(e,i,r,t){var a=function(a,n){var s=[],u=n?t.formatResponseWithLabels:t.formatResponse;return r(a).each(function(t,a){var n=new i({weight:t,label:a.header});r(a.groups).each(function(){n.addItem(new e({value:this.name,label:this.name,title:this.name,html:u(this),highlighted:!0}))}),s.push(n)}),s};return{formatResponseWithLabels:function(e){return a(e,!0)},formatResponse:function(e,i){return a(e,i)}}}),AJS.namespace("JIRA.GroupPickerUtil",null,require("jira/field/group-picker-util"));;
;
/* module-key = 'jira.webresources:group-pickers', location = '/includes/jira/field/initMultiGroupPickers.js' */
define("jira/field/init-multi-group-pickers",["jquery","jira/ajs/select/multi-select","jira/util/events/reasons","jira/util/events/types","jira/util/events","jira/field/group-picker-util"],function(e,t,i,a,r,n){function s(i){i.find(".js-default-multi-group-picker").each(function(){var i=e(this),a=i.data("show-labels")===!0,r=i.data("user-name");new t({element:this,itemAttrDisplayed:"label",showDropdownButton:!1,ajaxOptions:{data:function(e){return{userName:r,query:e,exclude:i.val()}},url:contextPath+"/rest/api/2/groups/picker",query:!0,formatResponse:a?n.formatResponseWithLabels:n.formatResponse}})})}r.bind(a.NEW_CONTENT_ADDED,function(e,t,a){a!==i.panelRefreshed&&s(t)})});;
;
/* module-key = 'jira.webresources:group-pickers', location = '/includes/jira/field/initSingleGroupPickers.js' */
define("jira/field/init-single-group-pickers",["jira/ajs/select/single-select","jquery","jira/ajs/list/item-descriptor","jira/util/events/reasons","jira/util/events/types","jira/util/events","jira/field/group-picker-util"],function(e,t,i,a,n,r,s){function l(a){a.find(".js-default-single-group-picker").each(function(){var a=t(this),n=a.find("option[data-empty]"),r=a.data("show-labels")===!0,l=a.data("user-name");new e({element:this,itemAttrDisplayed:"label",revertOnInvalid:!0,ajaxOptions:{data:function(e){return{userName:l,query:e,exclude:a.val()}},url:contextPath+"/rest/api/2/groups/picker",query:!0,formatResponse:function(e){var t=s.formatResponse(e,r);return n.length&&""!==a.val()&&t.push(new i({value:"",label:n.text(),highlighted:!0})),t}}})})}r.bind(n.NEW_CONTENT_ADDED,function(e,t,i){i!==a.panelRefreshed&&l(t)})});;
;
/* module-key = 'jira.webresources:group-pickers', location = '/includes/jira/field/init/init-group-pickers-webresource.js' */
require("jira/field/init-multi-group-pickers"),require("jira/field/init-single-group-pickers");;
;
/* module-key = 'jira.webresources:user-pickers', location = '/includes/jira/field/userPickerUtil.js' */
define("jira/field/user-picker-util",["jira/ajs/list/item-descriptor","jira/ajs/list/group-descriptor","jquery"],function(e,t,i){function a(t,a){i(t).each(function(){a.addItem(new e({value:this.accountId,label:this.displayName,html:this.html,icon:this.avatarUrl,allowDuplicate:!1,highlighted:!0}))})}return{formatResponse:function(a){var r=[];return i(a).each(function(a,n){var l=new t({weight:a,label:n.footer});i(n.users).each(function(){l.addItem(new e({value:this.name,label:this.displayName,html:this.html,icon:this.avatarUrl,allowDuplicate:!1,highlighted:!0}))}),r.push(l)}),r},formatResponseByAccountId:function(e){var r=[];return i(e).each(function(e,i){var n=new t({weight:e,label:i.footer});a(i.users,n),r.push(n)}),r},inviteCapableFormatResponseByAccountId:function(e){var r=[];return i(e).each(function(e,i){var n=new t({weight:e,label:i.footer,showLabel:i.total>0});a(i.users,n),r.push(n)}),r}}}),AJS.namespace("JIRA.UserPickerUtil",null,require("jira/field/user-picker-util"));;
;
/* module-key = 'jira.webresources:user-pickers', location = '/includes/jira/field/rolePickerUtils.js' */
define("jira/field/role-picker-utils",["jira/ajs/list/item-descriptor","jira/analytics/web-client","jquery"],function(e,i,s){return{formatResponse:function(r){r&&i.sendUIEvent({source:"createIssueModal",actionSubjectId:"restrictIssueDropDown",actionSubject:"dropdown",action:"clicked"});var t=[];return s(r).each(function(){var i="";this.currentUserRole&&(i='<div class="flex-row"><div class="current-user">'+"You"+"</div></div>");var s='<div class="add-issue-restriction-flex-body"><div class="add-issue-restriction-role-picker flex-column"><div><span class="add-issue-restriction-name">'+this.name+'</span></div><div><span class="add-issue-restriction-description">'+this.description+"</span></div></div> "+i+"</div>";t.push(new e({value:this.id,label:this.name,allowDuplicate:!1,html:s}))}),t}}}),AJS.namespace("JIRA.RolePickerUtils",null,require("jira/field/role-picker-utils"));;
;
/* module-key = 'jira.webresources:user-pickers', location = '/includes/jira/field/initSingleUserPickers.js' */
define("jira/field/init-single-user-pickers",["jquery","jira/ajs/select/single-select","jira/ajs/select/suggestions/invite-capable-suggest-handler","jira/util/events/reasons","jira/util/events/types","jira/util/events","jira/field/user-picker-util","jira/util/formatter"],function(e,t,a,s,n,r,i,u){function o(s){var n="/rest/api/1.0/users/picker";e(".js-default-user-picker",s).each(function(){var a=e(this);if(!a.data("aui-ss")){var s={showAvatar:!0,excludeConnectUsers:a.data("exclude-connect-users")},r=a.data("inputValue");new t({element:a,submitInputVal:!0,showDropdownButton:!!a.data("show-dropdown-button"),errorMessage:u.format("There is no user \'\'{0}\'\'.","'{0}'"),ajaxOptions:{url:contextPath+n,query:!0,data:s,formatResponse:i.formatResponse},inputText:r})}}),e(".js-default-user-picker-by-account-id",s).each(function(){var a=e(this);if(!a.data("aui-ss")){var s={showAvatar:!0,excludeConnectUsers:a.data("exclude-connect-users")},r=a.data("inputValue");new t({element:a,submitInputVal:!0,showDropdownButton:!!a.data("show-dropdown-button"),errorMessage:u.format("There is no user \'\'{0}\'\'.","'{0}'"),ajaxOptions:{url:contextPath+n,query:!0,headers:{"x-atlassian-force-account-id":!0},data:s,formatResponse:i.formatResponseByAccountId},inputText:r})}}),e(".js-invite-capable-user-picker-by-account-id",s).each(function(){var s=e(this);if(!s.data("aui-ss")){var r={showAvatar:!0,excludeConnectUsers:s.data("exclude-connect-users")},o=s.data("inputValue");new t({element:s,submitInputVal:!0,showDropdownButton:!!s.data("show-dropdown-button"),errorMessage:u.format("There is no user \'\'{0}\'\'.","'{0}'"),ajaxOptions:{url:contextPath+n,query:!0,headers:{"x-atlassian-force-account-id":!0},data:r,formatResponse:i.inviteCapableFormatResponseByAccountId},inputText:o,suggestionsHandler:a})}})}r.bind(n.NEW_CONTENT_ADDED,function(e,t,a){a!==s.panelRefreshed&&o(t)})});;
;
/* module-key = 'jira.webresources:user-pickers', location = '/includes/jira/field/NoBrowseUserNamePicker.js' */
define("jira/field/no-browser-user-name-picker",["require"],function(e){var t=e("jquery"),r=e("jira/ajs/list/item-descriptor"),a=e("jira/ajs/select/multi-select"),i=e("jira/util/formatter");return a.extend({_getDefaultOptions:function(){return t.extend(!0,this._super(),{errorMessage:"The requested user does not exist.",showDropdownButton:!1,removeOnUnSelect:!0,itemAttrDisplayed:"label"})},_handleCharacterInput:function(){},_setSuggestions:function(){},_handleServerError:function(e){404===e.status?this.showErrorMessage():this._super()},_deactivate:function(){this.validateAndAdd()},validateAndAdd:function(){var e=this;""===t.trim(this.$field.val())?this.hideErrorMessage():t.ajax({url:contextPath+"/rest/api/2/user",data:{username:t.trim(e.getQueryVal())},success:function(t){e.hideErrorMessage(),e.$field.val(""),e.addItem(new r({label:t.displayName,value:t.name}))},error:function(){e.showErrorMessage()}})},_handleSpace:function(){this.validate()},_handleServerSuggestions:function(){this.hideErrorMessage(),this.handleFreeInput()},handleFreeInput:function(){var e=t.trim(this.$field.val());""!==e&&(this.addItem({value:e,label:e}),this.model.$element.trigger("change")),this.$field.val("")},keys:{Return:function(e){e.preventDefault(),this.validateAndAdd()},Spacebar:function(e){e.preventDefault(),this.validateAndAdd()}}})}),AJS.namespace("AJS.NoBrowseUserNamePicker",null,require("jira/field/no-browser-user-name-picker"));;
;
/* module-key = 'jira.webresources:user-pickers', location = '/includes/jira/field/initMultiUserPickers.js' */
define("jira/field/init-multi-user-pickers",["jquery","jira/ajs/select/multi-select","jira/util/events/reasons","jira/util/events/types","jira/util/events","jira/field/no-browser-user-name-picker","jira/field/user-picker-util"],function(e,t,i,n,r,s,a){function u(i){i.find(".js-default-multi-user-picker").each(function(){e(this);new t({element:this,itemAttrDisplayed:"label",showDropdownButton:!1,removeOnUnSelect:!0,submitInputVal:!0,ajaxOptions:{url:contextPath+"/rest/api/1.0/users/picker",query:!0,data:function(e){return{showAvatar:!0,query:e}},formatResponse:a.formatResponse}})}),i.find(".js-default-multi-user-picker-by-accountId").each(function(){e(this);new t({element:this,itemAttrDisplayed:"label",showDropdownButton:!1,removeOnUnSelect:!0,submitInputVal:!0,ajaxOptions:{url:contextPath+"/rest/api/1.0/users/picker",query:!0,headers:{"x-atlassian-force-account-id":!0},data:function(e){return{showAvatar:!0,query:e}},formatResponse:a.formatResponseByAccountId}})})}r.bind(n.NEW_CONTENT_ADDED,function(e,t,n){n!==i.panelRefreshed&&u(t)})});;
;
/* module-key = 'jira.webresources:user-pickers', location = '/includes/jira/field/initMultiRolePickers.js' */
define("jira/field/init-multi-role-pickers",["jquery","jira/ajs/select/multi-select","jira/util/events/reasons","jira/util/events/types","jira/util/events","jira/field/role-picker-utils","jira/analytics/web-client"],function(e,t,i,s,n,c,o){function r(e){e.find(".js-default-multi-role-picker").each(function(){AJS.$(".js-default-multi-role-picker").each(function(){const e=this.getAttribute("data-project-key")||null;e&&(o.sendScreenEvent({name:"issueRestrictionsDropDown",attributes:{projectKey:e,projectType:"software"}}),new AJS.MultiSelect({element:this,itemAttrDisplayed:"label",showDropdownButton:!0,ajaxOptions:{data:function(e){return{query:e}},error:function(t){o.sendOperationalEvent({source:"issueRestrictionsDropDown",actionSubject:"issueRestrictionRoleDetailsFailure",action:"clicked",attributes:{location:"global-issue-create",projectKey:e,error:t}})}.bind(this),url:contextPath+"/rest/api/3/project/"+e+"/internal/roledetails",query:!1,headers:{"x-atlassian-force-account-id":!0},formatResponse:c.formatResponse,removeOnUnSelect:!0,allowDuplicate:!1}}),this.selected=function(){o.sendUIEvent({source:"createIssueModal",actionSubjectId:"restrictIssueDropDownRestrictionsAdded",actionSubject:"dropdown",action:"clicked",attributes:{location:"global-issue-create",projectKey:e}})},this.unselect=function(){o.sendUIEvent({source:"createIssueModal",actionSubjectId:"restrictIssueDropDownRestrictionsRemoved",actionSubject:"dropdown",action:"clicked",attributes:{location:"global-issue-create",projectKey:e}})},this.$select=AJS.$("#issuerestriction-multi-select"),this.$select.bind("selected",this.selected),this.$select.bind("unselect",this.unselect)),AJS.$(this).attr("select2","true")})})}n.bind(s.NEW_CONTENT_ADDED,function(e,t,s){s!==i.panelRefreshed&&r(t)})});;
;
/* module-key = 'jira.webresources:user-pickers', location = '/includes/jira/field/init/init-user-pickers-webresource.js' */
require("jira/field/init-multi-user-pickers"),require("jira/field/init-single-user-pickers"),require("jira/field/init-multi-role-pickers");;
;
/* module-key = 'jira.webresources:team-pickers', location = '/includes/jira/field/team/utils.js' */
define("jira/field/team/utils",["jquery","jira/ajs/list/item-descriptor","jira/ajs/list/group-descriptor"],function(e,i,a){return{formatResponse:function(e){const t=new a({weight:1,label:"Suggestions"});return e.forEach(function(e){t.addItem(new i({value:e.id,label:e.displayName,html:e.displayName,icon:e.smallAvatarImageUrl,allowDuplicate:!1,highlighted:!0}))}),[t]}}});;
;
/* module-key = 'jira.webresources:team-pickers', location = '/includes/jira/field/team/initPickers.js' */
define("jira/field/team/init-pickers",["jquery","jira/ajs/select/single-select","jira/ajs/select/multi-select","jira/util/events/reasons","jira/util/events/types","jira/util/events","jira/field/team/utils"],function(e,t,i,n,s,a,l){function r(n){const s={url:"/gateway/api/teams/v2/search",query:!0,data:function(e){return{limit:20,q:e}},formatResponse:l.formatResponse},a={itemAttrDisplayed:"label",showDropdownButton:!1,removeOnUnSelect:!0,submitInputVal:!0,ajaxOptions:s};n.find(".js-default-team-picker").each(function(){const n=this;e(this).is("[multiple]")?new i(Object.assign({element:n},a)):new t(Object.assign({element:n},a))})}a.bind(s.NEW_CONTENT_ADDED,function(e,t,i){i!==n.panelRefreshed&&r(t)})});;
;
/* module-key = 'jira.webresources:ie-imitation-placeholder', location = '/includes/jira/field/IEImitationPlaceholder.js' */
require(["jquery"],function(e){e.fn.ieImitationPlaceholder=function(){function a(){var a=e(this);""===a.val()&&(a.val(a.attr("placeholder")),a.addClass("input-placeholder"))}function l(){var a=e(this);a.val()===a.attr("placeholder")&&(a.val(""),a.removeClass("input-placeholder"))}function i(){t.each(l)}if(e.browser.msie){var r=this,t=r.find("[placeholder]");t.focus(l),t.blur(a),r.submit(i),t.each(a)}}});;
;
/* module-key = 'jira.webresources:jira-project-issuetype-fields', location = '/includes/jira/field/ProjectIssueTypeSelect.js' */
define("jira/field/project-issue-type-select",["jira/lib/class"],function(e){return e.extend({init:function(e){var s,t=this;this.$project=e.project,this.issueTypeSelect=e.issueTypeSelect,this.$projectIssueTypesSchemes=e.projectIssueTypesSchemes,this.$issueTypeSchemeIssueDefaults=e.issueTypeSchemeIssueDefaults,this.$defaultIssueTypes=e.defaultIssueTypes,this.projectIssueTypeSchemes=JSON.parse(this.$projectIssueTypesSchemes.html()),this.issueTypesSchemeDefaults=JSON.parse(this.$issueTypeSchemeIssueDefaults.html()||"[]"),this.defaultIssueTypes=JSON.parse(this.$defaultIssueTypes.html()||"[]"),t.$project.length>0&&(s=t.$project.val(),0===t.$projectIssueTypesSchemes.length?t.setIssueTypeForProject(s):t.setIssueTypeScheme(t.getIssueTypeSchemeForProject(s)),this.$project.change(function(){var e=t.$project.val();0===t.$projectIssueTypesSchemes.length?t.setIssueTypeForProject(e):t.setIssueTypeScheme(t.getIssueTypeSchemeForProject(e))}))},getIssueTypeSchemeForProject:function(e){return this.projectIssueTypeSchemes[e]},getDefaultIssueTypeForProject:function(e){return this.defaultIssueTypes[e]},getDefaultIssueTypeForProjectWithSchemeId:function(e){return this.issueTypesSchemeDefaults[e]},setIssueTypeForProject:function(e){var s=this.issueTypeSelect.model.getValue();this.issueTypeSelect.model.setFilterGroup(e),this.issueTypeSelect.model.setSelected(s,!1)||this.setDefaultIssueTypeWithProjectId(e),this.issueTypeSelect.model.$element.data("project",this.$project.val())},setIssueTypeScheme:function(e){var s=this.issueTypeSelect.model.getValue();this.issueTypeSelect.model.setFilterGroup(e),this.issueTypeSelect.model.setSelected(s,!1)||this.setDefaultIssueType(e),this.issueTypeSelect.model.$element.data("project",this.$project.val())},setDefaultIssueTypeWithProjectId:function(e){var s=this.getDefaultIssueTypeForProject(e),t=this.issueTypeSelect.model.getDescriptor(s);t||(t=this.issueTypeSelect.model.getAllDescriptors()[0]),this.issueTypeSelect.setSelection(t,!1)},setDefaultIssueType:function(e){var s=this.getDefaultIssueTypeForProjectWithSchemeId(e),t=this.issueTypeSelect.model.getDescriptor(s);t||(t=this.issueTypeSelect.model.getAllDescriptors()[0]),this.issueTypeSelect.setSelection(t,!1)}})}),AJS.namespace("JIRA.ProjectIssueTypeSelect",null,require("jira/field/project-issue-type-select"));;
;
/* module-key = 'jira.webresources:jira-project-issuetype-fields', location = '/includes/jira/field/initProjectIssueTypeSelect.js' */
define("jira/field/init-project-issue-type-select",["jira/ajs/select/suggestion-collection-model","jquery","jira/ajs/select/single-select","jira/util/events/reasons","jira/util/events/types","jira/util/events","jira/field/project-issue-type-select"],function(e,t,s,i,l,r,d){function n(i){var l=i||t("body");l.find(".issuetype-field").each(function(i){var r=l.find(".project-field, .project-field-readonly"),n=t(this),a=l.find("#"+n.attr("id")+"-projects"),o=l.find("#"+n.attr("id")+"-defaults"),p=l.find(".qf-field.qf-field-issuetype"),u=l.find("input#request-or-issue-type-field"),f=l.find("div#request-or-issue-type-field-options");if(u.length){var c=new s({element:u,revertOnInvalid:!0,model:e});p.hide(),u.data("options",f.data("suggestions"));var y=l.find("input.request-type-field"),j=c.model.selectedDescriptors&&c.model.selectedDescriptors[0];j&&(y.attr("value",j.properties.payload.requestTypeKey),n.attr("value",j.properties.payload.issueTypeId))}else{var v=new s({element:n,revertOnInvalid:!0,model:e});v.model.remove(""),r.length>0&&new d({project:r.eq(i),issueTypeSelect:v,projectIssueTypesSchemes:a,issueTypeSchemeIssueDefaults:o,defaultIssueTypes:o})}})}r.bind(l.NEW_CONTENT_ADDED,function(e,t,s){s!==i.panelRefreshed&&n(t)})});;
;
/* module-key = 'jira.webresources:jira-project-issuetype-fields', location = '/includes/jira/field/initIssueTypePickers.js' */
;
;
/* module-key = 'jira.webresources:jira-project-issuetype-fields', location = '/includes/jira/field/initProjectPickers.js' */
define("jira/field/init-project-pickers",["jira/ajs/select/scrollable-single-select","jira/ajs/select/suggestion-collection-model","jira/util/events/reasons","jira/util/events/types","jira/util/events"],function(e,i,n,t,l){function s(n){n.find(".project-field").each(function(){new e({element:this,revertOnInvalid:!0,pageSize:50,pagingThreshold:100,model:i})})}l.bind(t.NEW_CONTENT_ADDED,function(e,i,t){t!==n.panelRefreshed&&s(i)})});;
;
/* module-key = 'jira.webresources:jira-project-issuetype-fields', location = '/includes/jira/field/init/init-jira-project-issuetype-fields-webresource.js' */
require("jira/field/init-project-issue-type-select"),require("jira/field/init-project-pickers");;
;
/* module-key = 'jira.webresources:jira-fields', location = 'includes/jira/field/field-templates.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.Fields&&(JIRA.Templates.Fields={}),JIRA.Templates.Fields.username=function(e,s){return""+(e.escape?soy.$$escapeHtml(e.displayName):soy.$$filterNoAutoescape(e.displayName))},JIRA.Templates.Fields.recipientUsername=function(e,s){return'<li data-username="'+soy.$$escapeHtml(e.username)+'" title='+soy.$$escapeHtml(e.username)+'><span><span class="user-hover" rel="'+soy.$$escapeHtml(e.username)+'"><img alt="" src="'+soy.$$escapeHtml(e.icon)+'" title="'+JIRA.Templates.Fields.username(e)+'"><span title="'+JIRA.Templates.Fields.username(e)+'">'+JIRA.Templates.Fields.username(e)+"</span></span>"+(e.readOnly?"":'<button type="button" class="remove-recipient item-delete"><span class="icon-default aui-icon aui-icon-small aui-iconfont-delete">'+soy.$$escapeHtml(AJS.format("Remove watcher: {0}",e.username))+"</span></button>")+"</span></li>"},JIRA.Templates.Fields.recipientEmail=function(e,s){return'<li data-email="'+soy.$$escapeHtml(e.email)+'" title='+soy.$$escapeHtml(e.email)+'><span><img src="'+soy.$$escapeHtml(e.icon)+'" title="'+soy.$$escapeHtml(e.email)+'"><span title="'+soy.$$escapeHtml(e.email)+'">'+soy.$$escapeHtml(e.email)+'</span><span class="remove-recipient item-delete"><span class="icon-default aui-icon aui-icon-small aui-iconfont-delete"></span></span></span></li>'};;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/LabelPicker.js' */
define("jira/field/label-picker",["jira/util/formatter","jira/ajs/select/multi-select","jira/ajs/list/group-descriptor","jira/ajs/list/item-descriptor","wrm/context-path","jquery"],function(e,t,i,s,a,l){var n=a();return t.extend({_getDefaultOptions:function(){return l.extend(!0,this._super(),{ajaxOptions:{url:n+"/includes/js/ajs/layer/labeldata.js",query:!0,formatResponse:this._formatResponse},removeDuplicates:!0,removeOnUnSelect:!0,userEnteredOptionsMsg:"New Label"})},isValidItem:function(e){return!/\s/.test(e)},_handleServerSuggestions:function(e){e&&e.token&&l.trim(this.$field.val())!==e.token||this._super(e)},_handleSpace:function(){""!==l.trim(this.$field.val())&&this.handleFreeInput()&&this.hideSuggestions()},keys:{Spacebar:function(e){this._handleSpace(),e.preventDefault()}},_formatResponse:function(t){var a=new i({label:"Suggestions",type:"optgroup",styleClass:"labels-suggested"});return t&&t.suggestions&&l.each(t.suggestions,function(){a.addItem(new s({value:this.label,label:this.label,html:this.html,highlighted:!0}))}),[a]},handleFreeInput:function(){var e=l.trim(this.$field.val()).match(/\S+/g);if(e){for(var t,i=0;t=e[i];i++)this.addItem({value:t,label:t});this.model.$element.trigger("change")}this.$field.val("")}})}),AJS.namespace("AJS.LabelPicker",null,require("jira/field/label-picker")),AJS.namespace("JIRA.LabelPicker",null,require("jira/field/label-picker"));;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/LabelPickerFactory.js' */
define("jira/field/label-picker-factory",["jira/field/label-picker","jira/data/parse-options-from-fieldset","jquery","exports"],function(e,i,t,a){a.createPicker=function(a,r){var s=i(a),d=t("#"+s.id,r),l=s.issueId,c={};/customfield_\d/.test(s.id)&&(c.customFieldId=parseInt(s.id.replace("customfield_",""),10)),new e({element:d,ajaxOptions:{url:contextPath+"/rest/api/1.0/labels"+(l?"/"+l:"")+"/suggest",data:c}})}});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/MultiUserListPicker.Item.js' */
define("jira/field/multi-user-list-picker/item",["jira/util/data/meta","jira/ajs/control","jquery"],function(e,t,i){return t.extend({init:function(e){this._setOptions(e),this.$lozenge=this._render("item"),this.$removeButton=this.$lozenge.find(".remove-recipient"),this._assignEvents("instance",this),this._assignEvents("lozenge",this.$lozenge),this._assignEvents("removeButton",this.$removeButton),this.$lozenge.prependTo(this.options.container)},_getDefaultOptions:function(){return{label:null,title:null,container:null,focusClass:"focused"}},_renders:{item:function(){var t,n=this.options.descriptor;return n.noExactMatch()!==!0?(t={escape:!1,username:n.value(),icon:n.icon(),displayName:AJS.escapeHtml(n.label())},i(JIRA.Templates.Fields.recipientUsername(t))):(t={email:n.value(),icon:e.get("default-avatar-url")},i(JIRA.Templates.Fields.recipientEmail(t)))}},_events:{instance:{remove:function(){this.$lozenge.remove()}},removeButton:{click:function(e){e.stopPropagation(),this.trigger("remove")}}}})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/MultiUserListPicker.js' */
define("jira/field/multi-user-list-picker",["jira/util/formatter","jira/field/multi-user-list-picker/item","jira/ajs/select/suggestions/user-list-suggest-handler","jira/ajs/select/multi-select","jira/ajs/list/item-descriptor","jira/ajs/list/group-descriptor","jira/ajs/group","jquery"],function(e,t,i,r,s,n,a,l){return r.extend({init:function(r){function u(e){var t=[];return l(e).each(function(e,i){var r=new n({weight:e,label:i.footer});l(i.users).each(function(){r.addItem(new s({value:this.accountId,label:this.displayName,html:this.html,icon:this.avatarUrl,allowDuplicate:!1,highlighted:!0}))}),t.push(r)}),t}var o="/rest/api/1.0/users/picker";l.extend(r,{itemAttrDisplayed:"label",userEnteredOptionsMsg:"Email address",showDropdownButton:!1,removeOnUnSelect:!0,ajaxOptions:{url:contextPath+o,query:!0,headers:{"x-atlassian-force-account-id":!0},data:{showAvatar:!0},formatResponse:u},suggestionsHandler:i,itemGroup:new a,itemBuilder:function(e){return new t({descriptor:e,container:this.$selectedItemsContainer})}}),this._super(r)},_createFurniture:function(e){this._super(e),this.options.description&&this._render("description",this.options.description).insertAfter(this.$field)},updateItemsIndent:l.noop,_renders:{selectedItemsWrapper:function(){return l('<div class="recipients" />')},selectedItemsContainer:function(){return l("<ol />")},description:function(e){return l("<div />").addClass("description").text(e)}}})}),AJS.namespace("JIRA.MultiUserListPicker",null,require("jira/field/multi-user-list-picker")),AJS.namespace("JIRA.MultiUserListPicker.Item",null,require("jira/field/multi-user-list-picker/item"));;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initCascadingSelects.js' */
define("jira/field/init-cascading-selects",["jquery","jira/util/events/reasons","jira/util/events/types","jira/util/events"],function(e,i,n,t){function a(i){e(i||document.body).find("div.aui-field-cascadingselect").add("tr.aui-field-cascadingselect").add("td.aui-field-cascadingselect").each(function(){function i(){var i,n=t.find("option:selected").attr("class");n!==a&&(i=e("<span />").insertAfter(d),d.detach(),d.find("option").each(function(e,i){i.parentNode.removeChild(this)}),d.insertAfter(i),i.remove(),c.filter("."+t.find("option:selected").attr("class")).appendTo(d),s.hasClass(t.find("option:selected").attr("class"))?d.val(s.val()):d.val(d.find("option:first").val()),a=n)}var n=e(this),t=n.find(".cascadingselect-parent"),a=(t.find("option"),""),d=n.find(".cascadingselect-child"),c=d.find("option"),s=d.find(":selected");t.bind("cascadingSelectChanged",i).change(function(){e(this).trigger("cascadingSelectChanged")}).trigger("cascadingSelectChanged")})}t.bind(n.NEW_CONTENT_ADDED,function(e,n,t){t!==i.panelRefreshed&&a(n)})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/ComponentPicker.js' */
define("jira/field/component-picker",["jira/util/formatter","jira/util/events","jira/ajs/select/suggestions/only-new-items-suggest-handler","jira/ajs/select/multi-select","underscore","jquery"],function(e,t,n,s,i,r){return s.extend({init:function(e){this._super(e),this.suggestionsHandler=new n(this.options,this.model)},_getDefaultOptions:function(t){var n=!1;return t&&t.element&&(n=r(t.element).data("create-permission")),n?r.extend(!0,this._super(),{userEnteredOptionsMsg:"New Component"}):this._super(t)},_selectionHandler:function(e,n){var s=this.model.getDisplayableSelectedDescriptors().concat(this.model.getDisplayableUnSelectedDescriptors()),r=e.data("descriptor"),o=i.find(s,function(e){return e.label()===r.label()});o||(r.properties.value="nv_"+r.value(),t.trigger("Issue.Component.new.selected",[r.value()])),this._super(e,n)}})}),AJS.namespace("JIRA.ComponentPicker",null,require("jira/field/component-picker"));;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initComponentPickers.js' */
define("jira/field/init-component-pickers",["jira/field/component-picker","jira/util/formatter","jira/util/events","jira/util/events/types","jira/util/events/reasons","jquery"],function(e,n,r,t,i,o){function l(r){new e({element:r,itemAttrDisplayed:"label",errorMessage:"{0} is not a valid component.",maxInlineResultsDisplayed:15,expandAllResults:!0})}function a(e){var n,r=o(e);return n=r.is("select")?r:r.find("select")}function c(e,n){n=n||s.join(", "),o(n,e).each(function(){var e=a(this);e.length&&l(e)})}var s=["div.aui-field-componentspicker.frother-control-renderer","td.aui-field-componentspicker.frother-control-renderer","tr.aui-field-componentspicker.frother-control-renderer"];r.bind(t.NEW_CONTENT_ADDED,function(e,n,r){r!==i.panelRefreshed&&c(n)})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initMultiselectPickers.js' */
define("jira/field/init-multi-select-pickers",["jquery","jira/ajs/select/multi-select","jira/util/events/reasons","jira/util/events/types","jira/util/events","jira/util/formatter"],function(e,t,i,n,l,r){function s(e){new t({element:e,itemAttrDisplayed:"label",errorMessage:"{0} is not a valid value.",maxInlineResultsDisplayed:15,submitInputVal:!0,expandAllResults:!0})}function a(t){var i,n=e(t);return i=n.is("select")?n:n.find("select")}function u(t,i){i=i||c.join(", "),e(i,t).each(function(){var e=a(this);e.length&&s(e)})}var c=["div.aui-field-multiselectpicker.frother-control-renderer"];l.bind(n.NEW_CONTENT_ADDED,function(e,t,n){n!==i.panelRefreshed&&u(t)})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initDatePickers.js' */
define("jira/field/init-date-pickers",["jquery","jira/data/parse-options-from-fieldset","jira/util/events/reasons","jira/util/events/types","jira/util/events"],function(e,i,t,d,n){function a(t){e(t||document.body).find("div.aui-field-datepicker").add("tr.aui-field-datepicker").add("td.aui-field-datepicker").each(function(){function d(){a.prop("disabled",r.is(":checked"))}var n=e(this),a=n.find("input:text"),r=n.find("#useCurrentDate"),f=i(n.find("fieldset.datepicker-params"));f.context=t,Calendar.setup(f),r.length&&(d(),r.click(d))})}n.bind(d.NEW_CONTENT_ADDED,function(e,i,d){d!==t.panelRefreshed&&a(i)})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initLegacyGroupPickers.js' */
define("jira/field/init-legacy-group-pickers",["jquery","jira/util/events/reasons","jira/util/events/types","jira/util/events"],function(e,i,r,t){function n(i){e(i||document.body).find("div.aui-field-grouppicker").add("tr.aui-field-grouppicker").add("td.aui-field-grouppicker").each(function(){function i(e){e.preventDefault(),window.open(n,"GroupPicker","status=yes,resizable=yes,top=100,left=100,width=800,height=750,scrollbars=yes")}var r=e(this),t=r.find("a.grouppicker-trigger"),n=t.attr("href");t.click(i)})}t.bind(r.NEW_CONTENT_ADDED,function(e,r,t){t!==i.panelRefreshed&&n(r)})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initIssuePickers.js' */
define("jira/field/init-issue-pickers",["jira/field/issue-picker","jira/util/events","jira/util/events/types","jira/util/events/reasons","jquery","jira/util/formatter"],function(e,i,n,t,s,r){function u(i){s(i||document.body).find(".aui-field-issuepicker").each(function(){new e({element:s(this),userEnteredOptionsMsg:"Enter issue key",uppercaseUserEnteredOnSelect:!0})})}i.bind(n.NEW_CONTENT_ADDED,function(e,i,n){n!==t.panelRefreshed&&u(i)})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initLabelPickers.js' */
define("jira/field/init-label-pickers",["jira/field/label-picker-factory","jira/util/events","jira/util/events/types","jira/util/events/reasons","jquery"],function(e,i,n,r,a){function t(e){var i,n=a(e);return i=n.is(c)?n:n.find(c)}function l(i,n){n=n||".aui-field-labelpicker",a(n,i).each(function(){var n=t(this);n.length>0&&e.createPicker(n,i)})}var c="fieldset.labelpicker-params";i.bind(n.NEW_CONTENT_ADDED,function(e,i,n){n!==r.panelRefreshed&&l(i)})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/VersionPicker.js' */
define("jira/field/version-picker",["jira/util/formatter","jira/util/events","jira/ajs/select/suggestions/only-new-items-suggest-handler","jira/ajs/select/multi-select","underscore","jquery"],function(e,t,s,i,n,r){return i.extend({init:function(e){this._super(e),this.suggestionsHandler=new s(this.options,this.model)},_getDefaultOptions:function(t){var s=!1;return t&&t.element&&(s=r(t.element).data("create-permission")),s?r.extend(!0,this._super(),{userEnteredOptionsMsg:"New Version"}):this._super(t)},_selectionHandler:function(e,s){var i=this.model.getDisplayableSelectedDescriptors().concat(this.model.getDisplayableUnSelectedDescriptors()),r=e.data("descriptor"),l=n.find(i,function(e){return e.label()===r.label()});l||(r.properties.value="nv_"+r.value(),t.trigger("Issue.Version.new.selected",[r.value()])),this._super(e,s)}})}),AJS.namespace("JIRA.VersionPicker",null,require("jira/field/version-picker"));;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initVersionPickers.js' */
define("jira/field/init-version-pickers",["jira/field/version-picker","jira/util/formatter","jira/util/events","jira/util/events/types","jira/util/events/reasons","jquery"],function(e,i,n,r,t,s){function l(n){new e({element:n,itemAttrDisplayed:"label",removeOnUnSelect:!1,submitInputVal:!0,errorMessage:"{0} is not a valid version.",maxInlineResultsDisplayed:15,expandAllResults:!0})}function a(e){var i,n=s(e);return i=n.is("select")?n:n.find("select")}function o(e,i){i=i||".aui-field-versionspicker.frother-control-renderer",s(i,e).each(function(){var e=a(this);e.length&&l(e)})}n.bind(r.NEW_CONTENT_ADDED,function(e,i,n){n!==t.panelRefreshed&&o(i)})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initCommentControls.js' */
define("jira/field/init-comment-controls",["jira/skate","jira/ajs/select/security-level-select","jira/wikipreview/wiki-preview"],function(e,i,t){e("jira-wikifield",{type:e.type.CLASSNAME,created:function(e){var i={fieldId:e.getAttribute("field-id"),trigger:e.querySelector(".wiki-preview").id,issueKey:e.getAttribute("issue-key"),rendererType:e.getAttribute("renderer-type")};t(i,e).init()}}),e("security-level",{type:e.type.CLASSNAME,created:function(e){var t=e.querySelector("#commentLevel");t&&new i(t)}})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initLogWorkControls.js' */
define("jira/field/init-log-work-controls",["jira/util/events","jira/util/events/types","jira/util/events/reasons","jquery"],function(e,t,a,i){function n(e,t){var a=i(e).find("#worklog-logworkcontainer"),n=i(e).find("#worklog-timetrackingcontainer"),d=i(e).find("#log-work-activate");t?(a.removeClass("hidden"),n.addClass("hidden"),d.prop("checked",!0)):(a.addClass("hidden"),n.removeClass("hidden"),d.prop("checked",!1))}function d(e){i("#log-work-adjust-estimate-new-value, #log-work-adjust-estimate-manual-value",e).attr("disabled","disabled"),i("#log-work-adjust-estimate-"+i("input[name=worklog_adjustEstimate]:checked,input[name=adjustEstimate]:checked",e).val()+"-value",e).removeAttr("disabled"),i("input[name=worklog_adjustEstimate],input[name=adjustEstimate]",e).change(function(){i("#log-work-adjust-estimate-new-value,#log-work-adjust-estimate-manual-value",e).attr("disabled","disabled"),i("#log-work-adjust-estimate-"+i(this).val()+"-value",e).removeAttr("disabled")}),i("#delete-log-work-adjust-estimate-new-value").change(function(){i("#delete-log-work-adjust-estimate-new").prop("checked",!0)}),i("#delete-log-work-adjust-estimate-manual-value").change(function(){i("#delete-log-work-adjust-estimate-manual").prop("checked",!0)}),i(e).find("#log-work-activate").change(function(){n(e,i(this).is(":checked"))})}e.bind(t.VALIDATE_TIMETRACKING,function(e,t){n(t,!0)}),e.bind(t.NEW_CONTENT_ADDED,function(e,t,i){i!==a.panelRefreshed&&d(t)})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initPriorityPickers.js' */
define("jira/field/init-priority-pickers",["jira/ajs/select/single-select","jira/util/events/reasons","jira/util/events/types","jira/util/events"],function(e,i,n,t){function r(i){i.find("select#priority").each(function(i,n){new e({element:n,revertOnInvalid:!0})})}t.bind(n.NEW_CONTENT_ADDED,function(e,n,t){t!==i.panelRefreshed&&r(n)})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initParentPickers.js' */
define("jira/field/init-parent-pickers",["jira/ajs/select/single-select","jira/util/events/reasons","jira/util/events/types","jira/util/events"],function(e,n,i,t){function s(n){n.find("select#parent").each(function(n,i){new e({element:i,revertOnInvalid:!0})})}t.bind(i.NEW_CONTENT_ADDED,function(e,i,t){t!==n.panelRefreshed&&s(i)})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/initInlineAttach.js' */
define("jira/field/init-inline-attach",["jquery","jira/util/events","jira/util/events/types","jira/util/events/reasons","jira/analytics","jira/jquery/plugins/attachment/inline-attach"],function(i,n,e,t,a){function r(i){i.find("input[type=file]:not('.ignore-inline-attach')").inlineAttach()}n.bind(e.NEW_CONTENT_ADDED,function(i,n,e){if(e!==t.panelRefreshed)try{r(n)}catch(i){a.send({name:"field.inline.attach.error",properties:{reason:i}})}})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/issue/initIssueFields.js' */
require(["jira/skate","jira/ajs/select/single-select","jira/ajs/select/multi-select","jira/util/formatter","jquery"],function(e,t,l,s,a){e("single-select-issue-field",{type:e.type.CLASSNAME,attached:function(e){a(e).hasClass("aui-ss-select")||new t({element:e,revertOnInvalid:!0})}}),e("multi-select-issue-field",{type:e.type.CLASSNAME,attached:function(e){a(e).hasClass("multi-select-select")||new l({element:e,itemAttrDisplayed:"label",removeOnUnSelect:!1,submitInputVal:!0,errorMessage:"{0} is not a valid value.",maxInlineResultsDisplayed:15,expandAllResults:!0})}})});;
;
/* module-key = 'jira.webresources:jira-fields', location = '/includes/jira/field/init/init-jira-fields-webresource.js' */
require("jira/field/init-cascading-selects"),require("jira/field/init-component-pickers"),require("jira/field/init-multi-select-pickers"),require("jira/field/init-date-pickers"),require("jira/field/init-legacy-group-pickers"),require("jira/field/init-issue-pickers"),require("jira/field/init-label-pickers"),require("jira/field/init-version-pickers"),require("jira/field/init-comment-controls"),require("jira/field/init-log-work-controls"),require("jira/field/init-priority-pickers"),require("jira/field/init-parent-pickers"),require("jira/field/init-inline-attach");try{const featureManager=require("jira/featureflags/feature-manager");featureManager.isFeatureEnabled("jira.teams.enable-new-custom-field-types")&&require("jira/field/team/init-pickers")}catch(i){const logger=require("jira/util/safe-logger");logger.safeError("webapp-webresources.init-jira-fields","Failed to require jira/field/team/init-pickers")};
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form-templates', location = 'soy/quickform.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.QuickForm&&(JIRA.Templates.QuickForm={}),JIRA.Templates.QuickForm.field=function(e,i){return""+soy.$$filterNoAutoescape(e.editHtml)},JIRA.Templates.QuickForm.fieldPicker=function(e,i){return'<div class="qf-picker"><div class="qf-picker-header"><dl><dt>'+soy.$$escapeHtml("Show Fields:")+"</dt>"+(e.isConfigurable?'<dd><a class="qf-unconfigurable" href="#">'+soy.$$escapeHtml("All")+"</a></dd><dd>"+soy.$$escapeHtml("Custom")+"</dd>":"<dd>"+soy.$$escapeHtml("All")+'</dd><dd><a class="qf-configurable" href="#">'+soy.$$escapeHtml("Custom")+"</a></dd>")+'<div class="whereismycf-qfpicker-link" id="qf-picker-custom-link"></div></dl></div><div class="qf-picker-content '+(e.isConfigurable?"":"qf-picker-unconfigurable")+'"></div><div class="qf-picker-footer"></div></div>'},JIRA.Templates.QuickForm.configurablePickerButton=function(e,i){return'<a title="'+soy.$$escapeHtml(e.label)+'" data-field-id="'+soy.$$escapeHtml(e.fieldId)+'" class="qf-picker-button'+(e.isActive?" qf-active":"")+'" href="#">'+soy.$$escapeHtml(e.label)+(e.required?'<span class="aui-icon icon-required"></span>':"")+"</a>"},JIRA.Templates.QuickForm.unconfigurablePickerButton=function(e,i){return'<span title="'+soy.$$escapeHtml(e.label)+'" data-field-id="'+soy.$$escapeHtml(e.fieldId)+'" class="qf-picker-button'+(e.isActive?" qf-active":"")+'" href="#">'+soy.$$escapeHtml(e.label)+(e.required?'<span class="aui-icon icon-required"></span>':"")+"</span>"},JIRA.Templates.QuickForm.errorMessage=function(e,i){return""+aui.message.error({closeable:"true",content:e.message})};;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form-templates', location = 'soy/issue.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.Issue&&(JIRA.Templates.Issue={}),JIRA.Templates.Issue.editIssueError=function(e,t){return"<h2>"+soy.$$escapeHtml("Edit issue")+'</h2><div class="form-body">'+soy.$$filterNoAutoescape(e.errorHtml)+"</div>"},JIRA.Templates.Issue.editIssueForm=function(e,t){return'<form action="#" name="jiraform" class="aui"><h2>'+(e.showFieldConfigurationToolBar?JIRA.Templates.Issue.fieldConfigurationToolbar(null):"")+soy.$$filterNoAutoescape(e.title)+'</h2><div class="form-body"><input type="hidden" name="id" value="'+soy.$$escapeHtml(e.issueId)+'"/><input type="hidden" name="atl_token" value="'+soy.$$escapeHtml(e.atlToken)+'"/><input type="hidden" name="formToken" value="'+soy.$$escapeHtml(e.formToken)+'"/><input type="hidden" name="pid" value="'+soy.$$escapeHtml(e.pid)+'"/><div class="content">'+(e.fieldsHtml?soy.$$filterNoAutoescape(e.fieldsHtml):"")+(e.commentField?soy.$$filterNoAutoescape(e.commentField.editHtml):"")+'<!-- fields inserted here via javascript --></div></div><div class="buttons-container form-footer"><div class="buttons"><input accesskey="'+soy.$$escapeHtml("s")+'" title="'+soy.$$escapeHtml(AJS.format("Press {1}+{0} to submit this form","s",e.modifierKey))+'" class="aui-button aui-button-primary" id="edit-issue-submit" name="Edit" type="submit" value="'+soy.$$escapeHtml("Update")+'"/><a href="#" accesskey="'+soy.$$escapeHtml("`")+'" title="'+soy.$$escapeHtml(AJS.format("Press {1}+{0} to cancel","`",e.modifierKey))+'" class="cancel">'+soy.$$escapeHtml("Cancel")+"</a></div></div></form>"},JIRA.Templates.Issue.fieldConfigurationToolbar=function(e,t){return""+aui.toolbar2.toolbar2({extraClasses:"qf-form-operations",content:""+aui.toolbar2.item({item:"secondary",content:""+aui.buttons.button({text:" "+soy.$$escapeHtml("Configure fields"),id:"qf-field-picker-trigger",extraClasses:"toolbar-trigger",iconText:"Configure fields",iconType:"aui",iconClass:"aui-icon-small aui-iconfont-configure"})})})},JIRA.Templates.Issue.issueFields=function(e,t){var s="";if(e.hasTabs){s+='<div class="aui-tabs horizontal-tabs" id="horizontal"><ul class="tabs-menu">';for(var o=e.tabs,a=o.length,i=0;i<a;i++){var l=o[i];s+=l?'<li class="menu-item '+(l.isFirst?"first active-tab":"")+' "><a href="#tab-'+soy.$$escapeHtml(l.position)+'"><strong>'+soy.$$escapeHtml(l.label)+"</strong></a></li>":""}s+="</ul>";for(var n=e.tabs,r=n.length,c=0;c<r;c++){var u=n[c];if(u){s+='<div class="tabs-pane '+(u.isFirst?"active-pane":"")+'" id="tab-'+soy.$$escapeHtml(u.position)+'">';for(var m=u.fields,d=m.length,f=0;f<d;f++){var p=m[f];s+=p.editHtml?soy.$$filterNoAutoescape(p.editHtml):""}s+="</div>"}}s+="</div>"}else for(var $=e.fields,y=$.length,I=0;I<y;I++){var v=$[I];s+=v.editHtml?soy.$$filterNoAutoescape(v.editHtml):""}return s},JIRA.Templates.Issue.createIssueForm=function(e,t){var s='<form name="jiraform" action="#" class="aui"><h2>'+(e.showFieldConfigurationToolBar?JIRA.Templates.Issue.fieldConfigurationToolbar(null):"")+'<button class="aui-button" id="import-issues">'+soy.$$escapeHtml("Import issues")+"</button>"+soy.$$escapeHtml(e.title)+'</h2><div class="form-body">';if(e.issueSetupFields){s+='<div class="issue-setup-fields">';for(var o=e.issueSetupFields,a=o.length,i=0;i<a;i++){var l=o[i];s+='<div class="qf-field qf-field-'+soy.$$escapeHtml(l.id)+' qf-required" data-field-id="'+soy.$$escapeHtml(l.id)+'">'+soy.$$filterNoAutoescape(l.editHtml)+"</div>"}s+="</div>"}return s+=(e.parentIssueId?'<input type="hidden" name="parentIssueId" value="'+soy.$$escapeHtml(e.parentIssueId)+'"/>':"")+'<input type="hidden" name="atl_token" value="'+soy.$$escapeHtml(e.atlToken)+'"/><input type="hidden" name="formToken" value="'+soy.$$escapeHtml(e.formToken)+'"/><div class="content">'+(e.fieldsHtml?soy.$$filterNoAutoescape(e.fieldsHtml):"")+'<!-- fields inserted here via javascript --></div></div><div class="buttons-container form-footer"><div class="buttons">'+(e.disallowCreateAnother?"":'<label for="qf-create-another" class="qf-create-another"><input id="qf-create-another" type="checkbox"'+(e.multipleMode?'checked="checked"':"")+" />"+soy.$$escapeHtml("Create another")+"</label>")+'<input accesskey="'+soy.$$escapeHtml("s")+'" title="'+soy.$$escapeHtml(AJS.format("Press {1}+{0} to submit this form","s",e.modifierKey))+'" class="aui-button aui-button-primary" id="create-issue-submit" name="Edit" type="submit" value="'+soy.$$escapeHtml("Create")+'"/><a href="#" accesskey="'+soy.$$escapeHtml("`")+'" title="'+soy.$$escapeHtml(AJS.format("Press {1}+{0} to cancel","`",e.modifierKey))+'" class="cancel">'+soy.$$escapeHtml("Cancel")+"</a></div></div></form>"},JIRA.Templates.Issue.checkBoxField=function(e,t){return'<fieldset class="group"><legend><span></span></legend><div class="checkbox"><input class="checkbox" type="checkbox" name="'+soy.$$escapeHtml(e.name)+'" id="'+soy.$$escapeHtml(e.name)+'" value="true" '+(e.checked?"checked":"")+'><label for="'+soy.$$escapeHtml(e.name)+'">'+soy.$$escapeHtml(e.label)+"</label></div></fieldset>"},JIRA.Templates.Issue.createIssueError=function(e,t){return"<h2>"+soy.$$escapeHtml("Create issue")+'</h2><div class="form-footer">'+soy.$$filterNoAutoescape(e.errorHtml)+"</div>"},JIRA.Templates.Issue.undealtErrors=function(e,t){for(var s="<div>"+soy.$$escapeHtml("There were some errors when trying to create this issue")+"</div><ul>",o=e.errors,a=o.length,i=0;i<a;i++){var l=o[i];s+="<li>"+soy.$$escapeHtml(l)+"</li>"}return s+="</ul>"};;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/templates/form.js' */
define("quick-edit/templates/form",function(){return JIRA.Templates.QuickForm});;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/templates/issue.js' */
define("quick-edit/templates/issue",function(){return JIRA.Templates.Issue});;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/util/extension-mixin.js' */
define("quick-edit/util/extension-mixin",["jquery"],function(e){"use strict";var t=function(t,i,n){return e(this).trigger(t,i),n&&this.globalEventNamespaces&&e.each(this.globalEventNamespaces,function(n,r){e(document).trigger(r+"."+t,i)}),this};return{triggerEvent:t}});;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/util/class.js' */
define("quick-edit/util/class",["quick-edit/util/extension-mixin","jira/lib/class"],function(i,e){return e.extend(i)});;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/util/control.js' */
define("quick-edit/util/control",["quick-edit/util/extension-mixin","jira/ajs/control"],function(i,n){return n.extend(i)});;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/util/dialog.js' */
define("quick-edit/util/dialog",["jira/dialog/dialog","jira/issue","jira/issuenavigator/issue-navigator"],function(e,i,t){"use strict";var u=JIRA.Issues,s=function(i){var t=e.current,u=t.$activeTrigger;if(u)return u.attr(i)},r=function(){var e=s("data-issueKey");return!e&&i.getIssueKey()&&(e=i.getIssueKey()),!e&&t.getSelectedIssueKey()&&(e=t.getSelectedIssueKey()),!e&&u&&(e=u.Api.getSelectedIssueKey()),e},a=function(e){var i=r();return i?e+": "+i:e},g=function(){return u||t.isNavigator()||s("data-issueKey")};return{getActionIssueKey:r,getAttrFromActiveTrigger:s,getIssueActionTitle:a,shouldShowIssueKeyInTitle:g}}),AJS.namespace("JIRA.Dialog.getActionIssueKey",null,require("quick-edit/util/dialog").getActionIssueKey),AJS.namespace("JIRA.Dialog.getAttrFromActiveTrigger",null,require("quick-edit/util/dialog").getAttrFromActiveTrigger),AJS.namespace("JIRA.Dialog.getIssueActionTitle",null,require("quick-edit/util/dialog").getIssueActionTitle),AJS.namespace("JIRA.Dialog.shouldShowIssueKeyInTitle",null,require("quick-edit/util/dialog").shouldShowIssueKeyInTitle);;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/util/jira.js' */
define("quick-edit/util/jira",["quick-edit/templates/issue","jira/util/data/meta","aui/message","jquery"],function(e,r,t,a){"use strict";var i=function(e){var r,t,a,i=e.closest(".tabs-pane");i.length&&(t=i.closest(".aui-tabs"),r=i.attr("id"),a=t.find("a[href='#"+r+"']"),a.click())},s=function(e,r){u("error",e,AJS.escapeHtml(r),!1)},n=function(e,r){u("error",e,r,!1)},o=function(r,t){var s,o=[];a.each(t,function(e,t){var i,n,u=r.find(":input[name='"+e+"']").last();1===u.length?(s||(s=u),n=a("<div class='error' />").attr("data-field",e).text(t),i=u.closest(".field-group, .group"),i.find(".error").remove(),i.append(n)):0===u.length&&o.push(t)}),o.length>0&&n(r,e.undealtErrors({errors:o})),i(r.find(".error:first")),s&&s.focus()},u=function(e,r,i,s){var n=r.find(".aui-message-context");n.length||(n=a("<div class='aui-message-context' />"),n.prependTo(r.find(".form-body"))),n.empty(),t[e](n,{shadowed:!1,closeable:s,body:i})},c=function(e,r){return u("success",e,r,!0)},l=function(e){var r=a(e);return{html:r.not("script"),scripts:r.filter("script")}},p=function(e){return a.isFunction(e)?e:function(){return e}},d=function(){return r.get("keyboard-accesskey-modifier")},m=function(e){var r=JSON.parse(a('meta[name="ajs-product-editions"]').attr("content"));switch(r[e]){case"f":return"jedi";case"s":return"standard";case"p":return"premium";default:return"unlicensed"}},f=function(e){switch(e){case"business":return"jira-core";case"software":return"jira-software";case"service_desk":return"jira-servicedesk";default:return"unknown"}};return{activateTabWithChild:i,applyErrorMessageToForm:s,applyErrorMessageWithHTMLToForm:n,applyErrorsToForm:o,applyMessageToForm:u,applySuccessMessageToForm:c,getModifierKey:d,extractScripts:l,makePropertyFunc:p,getEdition:m,getApplication:f}}),AJS.namespace("JIRA.activateTabWithChild",null,require("quick-edit/util/jira").activateTabWithChild),AJS.namespace("JIRA.applyErrorMessageWithHTMLToForm",null,require("quick-edit/util/jira").applyErrorMessageWithHTMLToForm),AJS.namespace("JIRA.applyErrorMessageToForm",null,require("quick-edit/util/jira").applyErrorMessageToForm),AJS.namespace("JIRA.applyErrorsToForm",null,require("quick-edit/util/jira").applyErrorsToForm),AJS.namespace("JIRA.applyMessageToForm",null,require("quick-edit/util/jira").applyMessageToForm),AJS.namespace("JIRA.applySuccessMessageToForm",null,require("quick-edit/util/jira").applySuccessMessageToForm),AJS.namespace("JIRA.extractScripts",null,require("quick-edit/util/jira").extractScripts),AJS.namespace("JIRA.makePropertyFunc",null,require("quick-edit/util/jira").makePropertyFunc);;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/util/hierarchy.js' */
define("quick-edit/util/hierarchy",[],function(){"use strict";var e=function(e){return{id:Number(e.id),aboveLevelId:e.aboveLevelId?Number(e.aboveLevelId):null,belowLevelId:e.belowLevelId?Number(e.belowLevelId):null}},l=function(l){return l.reduce(function(l,u){return l[u.id]=e(u),l},{})},u=function(e){var u=e.baseLevelId||null,n=e.sameLevelId||null,r=l(e.levels);if(!n||!u||void 0===r[n]||void 0===r[u])return null;if(n===u)return 0;for(var v=0,i=r[n].aboveLevelId,d=r[n].belowLevelId;null!==i||null!==d;){if(v+=1,i===u)return-v;if(d===u)return v;if(i=null!==i&&r[i]?r[i].aboveLevelId:null,d=null!==d&&r[d]?r[d].belowLevelId:null,i===n||d===n)return null}return null};return{getIssueTypeLevel:u}});;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/field/configurable.js' */
define("quick-edit/form/field/configurable",["quick-edit/util/jira","quick-edit/util/control","quick-edit/templates/form","jira/util/events","jira/util/events/types","jquery"],function(e,t,i,r,n,s){"use strict";return t.extend({init:function(e){this.descriptor=e,this.$element=s("<div />").attr("id","qf-field-"+this.getId())},focus:function(){this.$element.find(":input:first").focus()},highlight:function(){var e=this;this.$element.css("backgroundColor","#fff").animate({backgroundColor:"lightyellow"},function(){e.$element.animate({backgroundColor:"#fff"},function(){e.$element.css("backgroundColor","")})})},getLabel:function(){return this.descriptor.label},getId:function(){return this.descriptor.id},activate:function(e){var t;this.active=!0,this.$element.addClass("qf-field-active").show(),this.$element.find("textarea").trigger("refreshInputHeight"),e||(t=this.render(),this.$element.append(t.scripts),this.focus(),r.trigger(n.NEW_CONTENT_ADDED,[this.$element]),this.$element.scrollIntoView(),this.triggerEvent("activated"))},hasVisibilityFeature:function(){return!!this.descriptor.hasVisibilityFeature},hasRetainFeature:function(){return!!this.descriptor.hasRetainFeature},isActive:function(){return this.active},disable:function(e){this.render(),this.active=!1,this.$element.removeClass("qf-field-active").hide(),e||this.triggerEvent("disabled")},render:function(){var t=i.field(this.descriptor),r=e.extractScripts(t);return this.$element.html(r.html).addClass("qf-field").data("model",this),{element:this.$element,scripts:r.scripts}}})}),AJS.namespace("JIRA.Forms.ConfigurableField",null,require("quick-edit/form/field/configurable"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/model/model.js' */
define("quick-edit/form/model",["quick-edit/util/class","jira/util/data/meta","jira/util/objects","jira/ajs/ajax/smart-ajax","jquery"],function(e,i,t,r,s){"use strict";return e.extend({init:function(e){this.userFieldsResource=e.userFieldsResource,this.fieldsResource=e.fieldsResource,this.retainedFields=[],this._hasRetainFeature=!1,this._hasVisibilityFeature=!0},getFieldsResource:function(){return this.fieldsResource},getAtlToken:function(){return this.atlToken},getPid:function(){return this.pid},isSimplified:function(){return this.simplified},getFormToken:function(){return this.formToken},getActiveFieldIds:function(){return this.getUserFields()},addFieldToRetainValue:function(e){if(!this._hasRetainFeature)throw new Error("getFieldsWithRetainedValues: cannot be called. Must enable retain feature first by specifiying [_hasRetainFeature=true]");this.removeFieldToRetainValue(e),this.retainedFields.push(e)},serializePreFilledFields:function(e){return s.param(s.extend(e,{preFillFields:!0}))},clearRetainedFields:function(){this.retainedFields=[]},removeFieldToRetainValue:function(e){if(!this._hasRetainFeature)throw new Error("getFieldsWithRetainedValues: cannot be called. Must enable retain feature first by specifiying [_hasRetainFeature=true]");var i=s.inArray(e,this.retainedFields);i!=-1&&this.retainedFields.splice(i,1)},getFieldsWithRetainedValues:function(){if(this._hasRetainFeature)return this.retainedFields;throw new Error("getFieldsWithRetainedValues: cannot be called. Must enable retain feature first by specifiying [_hasRetainFeature=true]")},hasRetainedValue:function(e){if(this._hasRetainFeature)return s.inArray(e.id,this.retainedFields)!==-1;throw new Error("HasRetainedValue: cannot be called. Must enable retain feature first by specifiying [_hasRetainFeature=true]")},refresh:function(e){var i,t=this,n=s.Deferred();return e&&(i=e+"&retainValues=true"),!i&&this.preFilledFields&&(i=this.serializePreFilledFields(this.preFilledFields)),r.makeRequest({url:this.getFieldsResource(),type:"POST",data:i,success:function(e){t._update(e)},complete:function(e,i,r){r.successful?n.resolveWith(t,arguments):(t.triggerEvent("serverError",[r]),n.rejectWith(t,[r]))}}),n.promise()},_update:function(e){this.atlToken=e.atl_token,this.formToken=e.formToken,this.pid=e.pid,this.simplified=e.simplified,this.fields=e.fields,this.sortedTabs=e.sortedTabs,this.userPreferences=e.userPreferences},setFields:function(e){this.fields=e},getConfigurableFields:function(){return this.getFields()},getFields:function(){var e=this,i=s.Deferred();return this.fields?i.resolve(e.fields):this.refresh().done(function(){i.resolve(e.fields)}),i.promise()},_mungeTabs:function(e){var i=0,r=[];return s.each(e,function(e,s){i++,s.tab&&(r[s.tab.position]||(r[s.tab.position]=t.copyObject(s.tab)),0===s.tab.position&&(r[s.tab.position].isFirst=!0),r[s.tab.position].fields||(r[s.tab.position].fields=[]),r[s.tab.position].fields.push(t.copyObject(s)))}),r},getTabs:function(){var e=this,i=s.Deferred();return this.getFields().done(function(t){var r=e._mungeTabs(t);i.resolve(r)}),i.promise()},getSortedTabs:function(){var e=s.Deferred();return this.sortedTabs?e.resolve(this.sortedTabs):this.refresh().done(function(){e.resolve(this.sortedTabs)}),e.promise()},getUserFields:function(){var e=this,i=s.Deferred();return this.userPreferences?i.resolve(e.userPreferences.fields):this.refresh().done(function(){i.resolve(e.userPreferences.fields)}),i.promise()},setUserFields:function(e){var i={};return i.fields=e,this.updateUserPrefs(i)},hasRetainFeature:function(){return!!this._hasRetainFeature},hasVisibilityFeature:function(){return!!this._hasVisibilityFeature},getUseConfigurableForm:function(){var e=this,i=s.Deferred();return this.userPreferences?i.resolve(e.userPreferences.useQuickForm):this.refresh().done(function(){i.resolve(e.userPreferences.useQuickForm)}).fail(function(){i.reject()}),i.promise()},setUseConfigurableForm:function(e){var i={};return i.useQuickForm=e,this.updateUserPrefs(i)},updateUserPrefs:function(e){var t=s.Deferred(),n=this;return""===i.get("remote-user")?(t.done(),t.promise()):this.userPreferences?(e.fields||(e.fields=this.userPreferences.fields),"undefined"==typeof e.showWelcomeScreen&&(e.showWelcomeScreen=this.userPreferences.showWelcomeScreen),"undefined"==typeof e.useQuickForm&&(e.useQuickForm=this.userPreferences.useQuickForm),r.makeRequest({url:this.userFieldsResource,type:"POST",data:JSON.stringify(e),dataType:"json",contentType:"application/json",complete:function(i,t,r){r.successful?n.userPreferences=e:n.triggerEvent("serverError",[r])}})):(t.reject(),t.promise())}})}),AJS.namespace("JIRA.Forms.Model",null,require("quick-edit/form/model"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/model/create-issue.js' */
define("quick-edit/form/model/create-issue",["quick-edit/form/model","wrm/context-path","jira/featureflags/feature-manager","underscore","jquery"],function(e,i,t,s,n){"use strict";return e.extend({DEFAULT_NON_RETAINED_FIELDS:["summary","description","timetracking","timetracking_originalestimate","timetracking_remainingestimate","worklog","worklog_startDate","worklog_timeLogged","worklog_newEstimate","worklog_adjustmentAmount","attachment"],CUSTOMFIELD_PATTERN:/^(customfield_(\d+))(?:|\:(?:\d+))$/,TIMETRACKING_PATTERN:/^timetracking_/,init:function(e){e=e||{},this.userFieldsResource=i()+"/rest/quickedit/1.0/userpreferences/create",this._hasRetainFeature=!0,this._hasVisibilityFeature=!0,this.retainedFields=[],this.dirtyFields=[],this.initIssueType=e.issueType,this.initProjectId=e.projectId,this.parentIssueId=e.parentIssueId,this.itsmCategory=e.itsmCategory,this.preFilledFields=e.fields,this.nonRetainedFields=this.DEFAULT_NON_RETAINED_FIELDS,e.nonRetainedFields&&(this.nonRetainedFields=s.union(e.nonRetainedFields,this.DEFAULT_NON_RETAINED_FIELDS))},getParentIssueId:function(){return this.parentIssueId},isInMultipleMode:function(){return this.multipleMode},setIsMultipleMode:function(e){this.multipleMode=e},getActiveFieldIds:function(){var e=this,i=n.Deferred(),t=[];return this.getUserFields().done(function(s){n.each(s,function(e,i){t.push(i)}),e.getRequiredFields().done(function(e){n.each(e,function(e,i){n.inArray(i.id,t)===-1&&t.push(i.id)}),i.resolve(t)})}),i.promise()},hasVisibilityFeature:function(e){return!e.required},getFieldsResource:function(){var e=i()+"/secure/QuickCreateIssue!default.jspa?decorator=none";return this.parentIssueId?e+"&parentIssueId="+this.parentIssueId:(this.initIssueType&&(e=e+"&issuetype="+this.initIssueType,delete this.initIssueType),this.itsmCategory&&(e=e+"&itsmCategory="+this.itsmCategory,delete this.itsmCategory),this.initProjectId&&(e=e+"&pid="+this.initProjectId,delete this.initProjectId),e)},addFieldToRetainValue:function(e,i){var t=!s.contains(this.nonRetainedFields,e),n=null!==e.match(/^filetoconvert/);(t||n||i)&&this._super(e)},getRequiredFields:function(){var e=n.Deferred(),i=[];return this.getFields().done(function(t){n.each(t,function(e,t){t.required&&i.push(t)}),e.resolve(i)}),e.promise()},getConfigurableFields:function(){var e=n.Deferred(),i=[];return this.getFields().done(function(t){n.each(t,function(e,t){"project"!==t.id&&"issuetype"!==t.id&&"com.atlassian.servicedesk:vp-origin"!==t.fieldType&&i.push(t)}),e.resolve(i)}),e.promise()},getIssueSetupFields:function(){var e=n.Deferred(),i=[];return this.getFields().done(function(t){n.each(t,function(e,t){"project"!==t.id&&"issuetype"!==t.id&&"com.atlassian.servicedesk:vp-origin"!==t.fieldType||i.push(t)}),e.resolve(i)}),e.promise()},markFieldAsDirty:function(e){e=this.normalizeCustomFieldId(e),this.fieldIsDirty(e)||this.dirtyFields.push(e)},unmarkFieldAsDirty:function(e){e=this.normalizeCustomFieldId(e),this.dirtyFields=this.dirtyFields.filter(function(i){return i!==e})},fieldIsDirty:function(e){return s.contains(this.dirtyFields,e)},isCustomFieldId:function(e){return e&&!!e.match(this.CUSTOMFIELD_PATTERN)},doesFieldSupportDefaultValue:function(e){var i=["description","environment"];return!!(this.isSimplified()&&i.indexOf(e)>-1)||this.isCustomFieldId(e)},isTimetrackingFieldId:function(e){return e&&!!e.match(this.TIMETRACKING_PATTERN)},normalizeCustomFieldId:function(e){return this.isCustomFieldId(e)?e.match(this.CUSTOMFIELD_PATTERN)[1]:e},normalizeFieldParam:function(e,i){return"filetoconvert"==e?e+"-"+i:this.isCustomFieldId(e)?this.normalizeCustomFieldId(e):this.isTimetrackingFieldId(e)?"timetracking":e}})}),AJS.namespace("JIRA.Forms.CreateIssueModel",null,require("quick-edit/form/model/create-issue"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/model/edit-issue.js' */
define("quick-edit/form/model/edit-issue",["quick-edit/form/model","underscore","jquery"],function(e,i,r){"use strict";return e.extend({getUnconfigurableTabs:function(){var e=this,i=r.Deferred();return e.getTabs().done(function(e){var n=e.slice(0);n[0].fields=n[0].fields.slice(0),r.each(n[0].fields,function(e,i){if("comment"===i.id)return n[0].fields.splice(e,1),!1}),i.resolve(n)}),i.promise()},getCommentField:function(){var e=r.Deferred();return this.getFields().done(function(i){r.each(i,function(i,r){"comment"===r.id&&e.resolve(r)}),e.reject()}),e.promise()}})}),AJS.namespace("JIRA.Forms.EditIssueModel",null,require("quick-edit/form/model/edit-issue"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/model/factory/edit-issue.js' */
define("quick-edit/form/model/factory/edit-issue",["quick-edit/form/model/edit-issue","wrm/context-path"],function(e,i){"use strict";return function(s){return new e({fieldsResource:i()+"/secure/QuickEditIssue!default.jspa?issueId="+s+"&decorator=none",userFieldsResource:i()+"/rest/quickedit/1.0/userpreferences/edit"})}}),AJS.namespace("JIRA.Forms.Model.createQuickEditIssueModel",null,require("quick-edit/form/model/factory/edit-issue"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/helper/helper.js' */
define("quick-edit/form/helper/helper",["quick-edit/util/jira","quick-edit/form/model","quick-edit/util/class","jira/jquery/plugins/isdirty","jira/util/events","jira/dialog/dialog","underscore","jquery","jira/ajs/ajax/smart-ajax","wrm/context-path","jira/analytics/web-client"],function(e,t,i,r,n,s,o,a,u,l,c){"use strict";var d=AJS.escapeHTML;return i.extend({init:function(e){this.form=e},handleSubmitSuccess:function(t){function i(e,t,i){var r='<a href="'+i+'">'+e+" - "+d(t)+"</a>";return AJS.format("Issue {0} has been successfully created",r)}var r=this,n=this.form.$element.find("#summary").val();t.summary=n,this.form.triggerEvent("submitted",[t,this]),this.form.triggerEvent("issueCreated",[t,this],!0),r.form.model.isInMultipleMode()?(r.form.model.unmarkFieldAsDirty("description"),this.form.render().done(function(){var s=i(t.issueKey,n,l()+"/browse/"+t.issueKey);e.applySuccessMessageToForm(r.form.getForm(),s)})):this.form.triggerEvent("sessionComplete")},sendEvent:function(e,t,i,r,n){e>=500?c.sendOperationalEvent({source:"ui",actionSubject:"ui",action:"taskFail",attributes:Object.assign({task:"createIssue",edition:i,application:t,analyticsSource:"QuickCreateForm",errorMessage:r?e.toString()+" - "+r:e.toString()},n)}):e>=400&&e<500&&c.sendOperationalEvent({source:"ui",actionSubject:"ui",action:"taskSuccess",attributes:Object.assign({task:"createIssue",isCreated:!1,edition:i,application:t,analyticsSource:"QuickCreateForm"},n)})},sendExperienceEventOnSubmitError:function(t){var i,r=this,n={};try{if(t&&t.responseText&&t.getResponseHeader){const s=t.getResponseHeader("Content-Type");if(s.includes("json")){var o=JSON.parse(t.responseText);o&&(i=o.errorMessages&&o.errorMessages[0])}else if(s.includes("html")){const c=t.responseText.match(/^.+Log reference: <strong>(.+)<\/strong><\/li>.+$/);null!=c&&2===c.length?(i="html response",n.log_reference=c[1]):i="error parsing html response (likely HTTP 429 or connection dropped)"}else i=s+" response"}}catch(e){i=e.message}u.makeRequest({type:"GET",contentType:"application/json",url:l()+"/rest/api/2/project/"+a('[data-field-id="project"] input.project-field[name="pid"]').val(),success:function(s){var o=e.getApplication(s.projectTypeKey),a=e.getEdition(o);r.sendEvent(t.status,o,a,i,n)},error:function(){r.sendEvent(t.status,"unknown","unknown",i,n)}})},getCreateAnotherCheckbox:function(){return this.form.$element.find("#qf-create-another")},isInMultipleMode:function(){return this.getCreateAnotherCheckbox().is(":checked")},getProjectField:function(){return this.form.$element.find(".issue-setup-fields #project")},getIssueTypeField:function(){return this.form.$element.find(".issue-setup-fields #issuetype")},getRequestOrIssueTypeField:function(){return this.form.$element.find("#request-or-issue-type-field")},getRequestTypeField:function(){return this.form.$element.find(".issue-setup-fields .request-type-field")},serializeForToggle:function(e){if(!this.form.model.hasRetainFeature())return this.form.getForm().serialize();var t=this.form.model.prevActiveFields||[],i=this.form.getForm().serializeArray(),r=function(e){return this.form.model.normalizeFieldParam(e.name,e.value)}.bind(this),n=this.form.getActiveFieldIds(),s=a.grep(i,function(e){return a.inArray(r(e),n)!==-1}),o=a.grep(t,function(e){return a.inArray(r(e),n)===-1}),u=a.map(o,function(e){return r(e)}),l=a.merge(s,o),c=a.merge(n,u);this.form.model.prevActiveFields=a.extend(!0,[],l),e&&(c=this.executeProjectChangedSecuritySettingAction(c)),c=c.filter(function(e){return!this.form.model.doesFieldSupportDefaultValue(e)||this.form.model.fieldIsDirty(e)}.bind(this));var d=a.merge([{name:"retainValues",value:!0}],l);return a.each(i,function(e,t){"pid"!==t.name&&"issuetype"!==t.name||d.push(t)}),d.push({name:"toggle",value:!0}),a.each(c,function(e,t){d.push({name:"fieldsToRetain",value:t})}),d.push({name:"formToken",value:this.form.model.getFormToken()}),a.param(d)},executeProjectChangedSecuritySettingAction:function(e){return o.reject(e,function(e){return"security"===e})},prepareFieldsToRetain:function(e,t){return a.each(e,function(e,i){t.push({name:"fieldsToRetain",value:i})}),t},setIssueType:function(){var e=this,t=this.serializeForToggle();this.form.invalidateFieldsCache(),this.form.disable(),this.form.render(t).done(function(){e.form.enable()})},setProjectId:function(){var e=this,t=this.serializeForToggle(!0);this.form.invalidateFieldsCache(),this.form.disable(),this.form.render(t).done(function(){e.form.enable()})},setRequestType:function(e,t){var i=this.getRequestTypeField(),r=this.getIssueTypeField();i.length&&(i.attr("value",e),this.form.model.markFieldAsDirty(i.attr("id"))),r.attr("value")!==t&&(r.attr("value",t),r.change())},saveFormDirtyStatus:function(){this.form.isDirty=this.form.getForm().isDirty()},restoreFormDirtyStatus:function(){this.form.isDirty&&this.form.getForm().addClass(r.ClassNames.BY_DEFAULT)},decorate:function(){var e=this;this.getProjectField().change(function(){e.saveFormDirtyStatus(),n.trigger("dialogBeforeContentChange",["projectId",this.value,s.current.options.id]),e.setProjectId(this.value)}),this.getIssueTypeField().change(function(){e.saveFormDirtyStatus(),n.trigger("dialogBeforeContentChange",["issueType",this.value,s.current.options.id]),e.setIssueType(this.value)}),this.getCreateAnotherCheckbox().change(function(){e.form.model.setIsMultipleMode(this.checked)});var t=this.getRequestOrIssueTypeField();t.length&&t.change(function(){var t=this,i=a(t),r=o.flatten(o.map(i.data("options"),function(e){return e.items||e})),n=o.find(r,function(e){return e.value===t.value});n&&e.setRequestType(n.payload.requestTypeKey,n.payload.issueTypeId)})},decorateFields:function(){var e=this;this.form.$element.find('*[id^="customfield_"]').off("change.customField").on("change.customField",function(){e.form.model.isCustomFieldId(this.name)&&e.form.model.markFieldAsDirty(this.name)}),this.form.$element.find("textarea#description").on("change",function(){e.form.model.markFieldAsDirty(this.name)}),this.form.$element.find("textarea#environment").on("change",function(){e.form.model.markFieldAsDirty(this.name)})},sendQuickEditAnalyticsEvent:function(e){var t,i,r=e.instance,n=e.name,s=e.actionSubjectId,o=e.action,a=e.source,u=e.actionSubject,l=e.fieldAction,d=r.model.fields.map(function(e){return{id:e.id,required:e.required}});e.field&&(i={id:e.field.descriptor.id,required:e.field.descriptor.required}),r.model.getActiveFieldIds().then(function(r){t=d.filter(function(e){return r.some(function(t){return t===e.id})});var f={allFieldsShown:e.allFieldsShown,field:JSON.stringify(i),allFields:JSON.stringify(d),displayedFields:e.allFieldsShown?JSON.stringify(d):JSON.stringify(t),fieldAction:l};AJS.trigger("analyticsEvent",{name:n,data:f}),c.sendUIEvent({source:a,actionSubjectId:s,actionSubject:u,action:o,attributes:f})})}})}),AJS.namespace("JIRA.Forms.CreateIssueHelper",null,require("quick-edit/form/helper/helper"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/abstract/abstract.js' */
define("quick-edit/form/abstract",["quick-edit/util/jira","quick-edit/util/control","jira/ajs/ajax/smart-ajax","jira/dialog/form-dialog","jira/dialog/dialog","jira/util/events/types","jira/util/events","jira/util/browser","jquery","underscore"],function(e,t,i,r,n,s,a,o,d,l){"use strict";var u=AJS.extractBodyFromResponse,c=AJS.log;return t.extend({submit:function(){var e=this;return e.getForm().addClass("submitting"),this.triggerEvent("submitting",[],!0),i.makeRequest({url:this.getAction(),type:"POST",beforeSend:function(){e.disable()},data:this.serialize(),complete:function(t,i,n){var s=n.data;if(e.getForm().find(".aui-message-context").remove(),e.enable(),e.getForm().find(".error").remove(),n.successful)if(e.performAnalytics(),s&&s.fields&&(e.invalidateFieldsCache(),e.model.setFields(s.fields)),"string"==typeof s){var a=d(u(s)),o=a.find("#atl_token").val();o&&(e.model.atlToken=o,e.getForm().find('input[name="atl_token"]').val(o));var l=new r({offsetTarget:"body",content:a});l._handleServerSuccess=function(){l.prev&&(l.prev._removeStackState(),l.prev._resetWindowTitle(),l._removeStackState()),l.hide(),e.triggerEvent("sessionComplete",[],!0),e.handleSubmitSuccess()},l._handleServerError=function(t){l.hide(),e.handleSubmitError(t)},l.show()}else e.handleSubmitSuccess(n.data);else e.handleSubmitError(t);e.getForm().removeClass("submitting")}})},disable:function(){this.getForm().find(":input").attr("disabled","disabled").trigger("disable"),this.getForm().find(":submit").attr("disabled","disabled")},enable:function(){this.getForm().find(":input").removeAttr("disabled").trigger("enable"),this.getForm().find(":submit").removeAttr("disabled")},getActiveFieldIds:function(){throw new Error("getActiveFieldIds: Abstract, must be implemented by sub class")},serialize:function(e){var t=this,i=this.getForm().serialize();return this.model.isInMultipleMode&&this.model.isInMultipleMode()&&(i+="&multipleMode=true"),this.model.hasRetainFeature()&&(this.model.clearRetainedFields(),d.each(this.getActiveFieldIds(),function(i,r){t.model.addFieldToRetainValue(r,e)}),d.each(this.model.getFieldsWithRetainedValues(),function(e,t){i=i+"&fieldsToRetain="+t})),i},invalidateFieldsCache:function(){delete this.fields},setInitialFocus:function(){this.getFormContent().find(":input:first").focus()},handleSubmitSuccess:function(){this.triggerEvent("submitted"),o.reloadViaWindowLocation()},performAnalytics:function(){var e=function(e,t){var i="***** Analytics log ["+e+"]";t&&(i+="["+JSON.stringify(t)+"]"),c(i),AJS.EventQueue&&AJS.EventQueue.push({name:e,properties:t||{}})},t=function(e){var t={},i=l.filter(e,function(e){return!l.contains(["isCreateIssue","isEditIssue","atl_token","hasWorkStarted"],e.name)}),r=l.filter(i,function(e){return""!=e.value});return l.each(r,function(e){var i=e.name;l.has(t,i)||(t[i]=[]),t[i].push(e.value)}),t};this.previousAnalytics=function(i,r){var s=t(i),a=l.keys(s),o=l.keys(r.data),d=l.difference(a,o),u=l.difference(o,a),c=l.intersection(o,a),m=l.filter(c,function(e){return l.isEqual(r.data[e],s[e])}),f=l.difference(c,m),h=r.count+1,g="edit-issue-dialog"===n.current.options.id,v={"atlassian.numCreates":h,"edit.form":g};return l.each(d,function(e){v[e]="added"}),l.each(u,function(e){v[e]="removed"}),l.each(m,function(e){v[e]="same"}),l.each(f,function(e){v[e]="changed"}),e("quick.create.fields",v),{data:s,count:h}}(this.getForm().serializeArray(),this.previousAnalytics||{data:{},count:0})},addErrorMessage:function(t){e.applyErrorMessageToForm(this.getForm(),[t])},handleSubmitError:function(t){var r,n=this;if(t.responseText){try{r=JSON.parse(t.responseText)}catch(e){}if(r){r.errorMessages&&r.errorMessages.length&&e.applyErrorMessageToForm(this.getForm(),r.errorMessages[0]),r&&r.errors&&400===t.status&&(this.getFieldById&&d.each(r.errors,function(e){/^timetracking/.test(e)?n.getFieldById("timetracking").done(function(e){a.trigger(s.VALIDATE_TIMETRACKING,[n.$element]),e.activate(!0)}):/^worklog/.test(e)?n.getFieldById("worklog").done(function(e){a.trigger(s.VALIDATE_TIMETRACKING,[n.$element]),e.activate(!0)}):n.getFieldById(e).done(function(e){e.activate(!0)})}),e.applyErrorsToForm(this.getForm(),r.errors),this.triggerEvent("validationError",[this,r.errors],!0));var o=n.$element.find(".error");o.length&&o[0].scrollIntoView(!1)}}else{var l=i.SmartAjaxResult(t,void 0,t.statusText,"",!1,void 0),u=i.buildSimpleErrorContent(l);n.addErrorMessage(u)}},getAction:function(){return this.action},getFormContent:function(){return this.$element.find("div.content")},getForm:function(){return this.$element.find("form")},createField:function(){throw new Error("AbstractForm: You must implement [createField] method in subclass.")},_getActiveAttachments:function(e){var t=[];if(!e)return t;for(var i=e.split("&"),r=0;r<i.length;r++){var n=i[r].split("=");"filetoconvert"==n[0]&&t.push(n[1])}return t},_setActiveAttachments:function(e){var t=this.$element.find("input[name=filetoconvert]");t.each(function(){var t=d(this),i=l.contains(e,t.attr("value"));t.prop("checked",i)})},render:function(e){var t=d.Deferred(),i=this,r=i._getActiveAttachments(e);return e?(this.invalidateFieldsCache(),this.model.refresh(e).done(function(){i._render().done(function(e,r){i.triggerEvent("rendered",[i.$element]),t.resolveWith(i,[i.$element,r])})})):i._render().done(function(e,r){i.triggerEvent("rendered",[i.$element]),t.resolveWith(i,[i.$element,r])}),t.always(function(){i._setActiveAttachments(r)}),t.promise()}})}),AJS.namespace("JIRA.Forms.AbstractForm",null,require("quick-edit/form/abstract"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/abstract/configurable.js' */
define("quick-edit/form/abstract/configurable",["quick-edit/form/abstract","quick-edit/form/field/configurable","quick-edit/form/helper/helper","jquery"],function(e,i,t,n){"use strict";return e.extend({getFields:function(){var e=n.Deferred(),i=this;return this.fields?e.resolveWith(this,[this.fields]):(this.fields=[],this.model.getConfigurableFields().done(function(t){n.each(t,function(e,t){var n=i.createField(t);i.fields.push(n)}),e.resolveWith(i,[i.fields])})),e.promise()},getActiveFieldIds:function(){var e=[],i=this.$element.find(".qf-field.qf-field-active:not(.qf-required), .qf-field.qf-required:not(.qf-field-active)");return n.each(i,function(i,t){var d=n(t),r=d.data("model"),c=d.data("field-id")||r&&r.getId();null!=c&&e.push(c),"attachment"===c&&d.find("input[name=filetoconvert]").each(function(){e.push(this.id)})}),e},createField:function(e){e.hasVisibilityFeature=this.model.hasVisibilityFeature(e),this.model.hasRetainFeature(e)&&(e.hasRetainFeature=!0,e.retainValue=this.model.hasRetainedValue(e));var n=this,d=new i(e),r=new t(n),c=n&&n.globalEventNamespaces&&n.globalEventNamespaces.length>0?n.globalEventNamespaces[0]:null;return e.hasVisibilityFeature&&d.bind("activated",function(){n.model.setUserFields(n.getActiveFieldIds()),d.highlight(),n.triggerEvent("QuickForm.fieldAdded",[d]);try{r.sendQuickEditAnalyticsEvent({name:"quickeditform.custom.added",action:"changed",actionSubject:"checkbox",actionSubjectId:"toggleField",fieldAction:"added",source:c,field:d,instance:n})}catch(e){}}).bind("disabled",function(){n.model.setUserFields(n.getActiveFieldIds()),n.triggerEvent("QuickForm.fieldRemoved",[d]);try{r.sendQuickEditAnalyticsEvent({name:"quickeditform.custom.removed",action:"changed",actionSubject:"checkbox",actionSubjectId:"toggleField",fieldAction:"removed",source:c,field:d,instance:n})}catch(e){}}),d},getFieldById:function(e){var i=this,t=n.Deferred();return this.getFields().done(function(d){n.each(d,function(n,d){d.getId()===e&&t.resolveWith(i,[d])}),t.rejectWith(i,[])}),t.promise()},hasNoVisibleFields:function(){var e=n.Deferred();return e.resolve(0===this.getActiveFieldIds().length),e.promise()},renderFormContents:function(){var e=n.Deferred(),i=n(),t=this;return t.getFields().done(function(d){var r=t.reorderFieldsToRender(d);t.model.getActiveFieldIds().done(function(d){n.each(r,function(){var e=this.render();i=i.add(e.scripts),t.getFormContent().append(e.element)}),n.each(d,function(e,i){n.each(r,function(){this.getId()===i&&this.activate(!0)})}),n.each(r,function(){this.isActive()||this.disable(!0)}),t.hasNoVisibleFields().done(function(n){if(n===!0)for(var d=0;d<3;d++)r[d]&&r[d].activate(!0);e.resolveWith(this,[t.$element,i])})})}),e.promise()},reorderFieldsToRender:function(e){return e}})}),AJS.namespace("JIRA.Forms.AbstractConfigurableForm",null,require("quick-edit/form/abstract/configurable"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/abstract/unconfigurable.js' */
define("quick-edit/form/abstract/unconfigurable",["quick-edit/form/abstract","quick-edit/templates/issue","jquery"],function(e,t,i){"use strict";return e.extend({getFieldsHtml:function(){var e=this,s=i.Deferred(),n={};return this.model.getTabs().done(function(i){1===i.length?n.fields=i[0].fields:(n.tabs=i,n.hasTabs=!0),s.resolveWith(e,[t.issueFields(n)])}),s.promise()},getActiveFieldIds:function(){var e=[];if(this.model.getFields().done(function(t){i.each(t,function(t,i){e.push(i.id)})}),e.indexOf("attachment")){var t=this.$element.find("input[name=filetoconvert]").map(function(e,t){return t.id}).toArray();e.push.apply(e,t)}return e},getFields:function(){var e=i.Deferred(),t=this;return this.fields?e.resolveWith(this,[this.fields]):(this.fields=[],this.model.getFields().done(function(s){i.each(s,function(e,i){var s=t.createField(i);t.fields.push(s)}),e.resolveWith(t,[t.fields])})),e.promise()}})}),AJS.namespace("JIRA.Forms.AbstractUnconfigurableForm",null,require("quick-edit/form/abstract/unconfigurable"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/configurable/create-issue.js' */
define("quick-edit/form/configurable/create-issue",["quick-edit/form/abstract/configurable","quick-edit/form/helper/helper","quick-edit/templates/issue","quick-edit/util/jira","jira/util/users/logged-in-user","wrm/context-path","jquery"],function(e,t,i,r,s,o,n){"use strict";return e.extend({init:function(e){this.model=e.model,this.helper=new t(this),this.globalEventNamespaces=e.globalEventNamespaces||[],this.issueId=e.issueId,this.title=e.title,this._serialization={},this.action=o()+"/secure/QuickCreateIssue.jspa?decorator=none",this.$element=n("<div />").addClass("qf-form qf-configurable-form")},handleSubmitSuccess:function(e){return this.helper.handleSubmitSuccess(e)},handleSubmitError:function(t){e.prototype.handleSubmitError.call(this,t),this.helper.sendExperienceEventOnSubmitError(t)},_render:function(){var e=n.Deferred(),t=this;return t.model.getIssueSetupFields().done(function(o){var n=i.createIssueForm({issueSetupFields:o,atlToken:t.model.getAtlToken(),formToken:t.model.getFormToken(),isConfigurable:!0,title:t.title,parentIssueId:t.model.getParentIssueId(),multipleMode:t.model.isInMultipleMode(),showFieldConfigurationToolBar:!s.isAnonymous(),modifierKey:r.getModifierKey()});t.$element.html(n),t.helper.decorate(),t.renderFormContents().done(function(i,r){t.helper.decorateFields(),e.resolveWith(t,[t.$element,r])}),t.bind("QuickForm.fieldAdded",function(){t.helper.decorateFields()})}),e.promise()}})}),AJS.namespace("JIRA.Forms.ConfigurableCreateIssueForm",null,require("quick-edit/form/configurable/create-issue"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/configurable/edit-issue.js' */
define("quick-edit/form/configurable/edit-issue",["quick-edit/form/abstract/configurable","quick-edit/util/jira","quick-edit/templates/issue","jira/util/users/logged-in-user","wrm/context-path","jquery"],function(e,t,i,s,n,o){"use strict";return e.extend({init:function(e){this.model=e.model,this.globalEventNamespaces=e.globalEventNamespaces||[],this.issueId=e.issueId,this.title=e.title,this.action=n()+"/secure/QuickEditIssue.jspa?issueId="+e.issueId+"&decorator=none",this.$element=o("<div />").addClass("qf-form qf-configurable-form")},handleSubmitSuccess:function(e){this.triggerEvent("submitted",[e]),this.triggerEvent("issueEdited",[e],!0),this.triggerEvent("sessionComplete")},hasNoVisibleFields:function(){var e=o.Deferred(),t=this.getActiveFieldIds();return this.model.getUserFields().done(function(i){1===i.length&&"comment"===i[0]?e.resolve(!1):0===t.length||1===t.length&&"comment"===t[0]?e.resolve(!0):e.resolve(!1)}),e.promise()},_render:function(){var e=o.Deferred(),n=this,r=i.editIssueForm({issueId:this.issueId,title:this.title,atlToken:n.model.getAtlToken(),formToken:n.model.getFormToken(),pid:n.model.getPid(),isConfigurable:!0,modifierKey:t.getModifierKey(),showFieldConfigurationToolBar:!s.isAnonymous()});return this.$element.html(r),n.renderFormContents().done(function(t,i){n.getFieldById("comment").done(function(e){n.getFormContent().append(e.$element)}),e.resolveWith(n,[n.$element,i])}),e.promise()}})}),AJS.namespace("JIRA.Forms.ConfigurableEditIssueForm",null,require("quick-edit/form/configurable/edit-issue"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/field-picker/button/configurable.js' */
define("quick-edit/form/field-picker/button/configurable",["quick-edit/util/control","quick-edit/templates/form"],function(e,i){"use strict";return e.extend({init:function(e){var i=this;this.field=e.field,this.field.bind("disabled",function(){i.$element.removeClass("qf-active")}).bind("activated",function(){i.$element.addClass("qf-active")})},toggle:function(){this.field.isActive()?this.field.disable():this.field.activate()},getId:function(){return this.field.getId()},render:function(){return this.$element=jQuery(i.configurablePickerButton({required:this.field.descriptor.required,label:this.field.getLabel(),fieldId:this.field.getId(),isActive:this.field.isActive()})),this._assignEvents("button",this.$element),this.$element},_events:{button:{click:function(e){this.toggle(),e.preventDefault()}}}})}),AJS.namespace("JIRA.Forms.FieldPicker.ConfigurableButton",null,require("quick-edit/form/field-picker/button/configurable"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/field-picker/button/unconfigurable.js' */
define("quick-edit/form/field-picker/button/unconfigurable",["quick-edit/util/control","quick-edit/templates/form","jquery"],function(e,i,t){"use strict";return e.extend({init:function(e){this.descriptor=e},render:function(){return this.$element=t(i.unconfigurablePickerButton({required:this.descriptor.required,label:this.descriptor.label,fieldId:this.descriptor.id,isActive:!0})),this.$element}})}),AJS.namespace("JIRA.Forms.FieldPicker.UnconfigurableButton",null,require("quick-edit/form/field-picker/button/unconfigurable"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/field-picker/field-picker.js' */
define("quick-edit/form/field-picker",["quick-edit/form/field-picker/button/configurable","quick-edit/form/field-picker/button/unconfigurable","quick-edit/templates/form","quick-edit/util/control","aui/inline-dialog","jquery"],function(i,e,n,t,o,l){"use strict";return t.extend({INLINE_DIALOG_ID:"field_picker_popup",init:function(){this.buttons=[]},switchToAll:function(i){this.isConfigurable=!1,i!==!0&&(this.hideCallback=function(){this.remove()},this.inlineDialog.hide(),this.triggerEvent("switchedToAll"))},setForm:function(i){this.form=i},switchToCustom:function(i){this.isConfigurable=!0,i!==!0&&(this.hideCallback=function(){this.remove()},this.inlineDialog.hide(),this.triggerEvent("switchedToCustom"))},hideCallback:function(){},bindInlineDialog:function(){function i(i,t,o){e.render().done(function(e){0===i.find(".qf-picker").length&&(i.html(e),i.click(function(i){i.stopPropagation()}));var t=n.offset().top-l(window).scrollTop(),s=l(window).height(),r=s-t-110;i.find(".qf-picker-content").css("maxHeight",r),this.form.model.isSimplified()?i.find("#qf-picker-custom-link").hide():i.find("#qf-picker-custom-link").show(),o()})}var e=this,n=this.getInlineDialogTrigger();return this.inlineDialog&&this.inlineDialog.remove(),this.inlineDialog=o(n,this.INLINE_DIALOG_ID,i,{width:450,upfrontCallback:function(){n.parent().addClass("active")},hideCallback:function(){n.parent().removeClass("active")},nobind:!0}),n.click(function(i){l("#inline-dialog-"+e.INLINE_DIALOG_ID).is(":visible")?e.inlineDialog.hide():e.inlineDialog.show()}),this.inlineDialog},getInlineDialogTrigger:function(){return this.form.$element.find("#qf-field-picker-trigger")},renderButtons:function(n){var t=this,o=l('<ul class="qf-picker-buttons" />').appendTo(this.$content);l.each(n,function(n,s){var r,c;t.isConfigurable?t.form.getFieldById(s.id).done(function(e){if(e&&e.hasVisibilityFeature()){var n=l("<li />").appendTo(o),s=new i({field:e});s.render().appendTo(n),t.buttons.push(s)}}):(c=new e(s),r=l("<li />").appendTo(o),c.render().appendTo(r))}),0===o.children().length&&o.addClass("qf-no-fields").append("<li><em>"+"No fields can be configured for this tab"+"</em></li>")},renderContents:function(){var i=this,e=l.Deferred();return this.form.model.getSortedTabs().done(function(n){1===n.length?i.renderButtons(n[0].fields):l.each(n,function(e,n){n.fields.length>0&&(l("<h4><span></span></h4>").appendTo(i.$content).find("span").text(n.label),i.renderButtons(n.fields))}),e.resolveWith(i,[i.$element])}),e.promise()},show:function(){this.inlineDialog.show()},render:function(){return this.$element=l(n.fieldPicker({isConfigurable:this.isConfigurable})),this.$content=this.$element.find(".qf-picker-content"),this._assignEvents("switchToCustom",this.$element.find(".qf-configurable")),this._assignEvents("switchToAll",this.$element.find(".qf-unconfigurable")),this.renderContents()},_events:{switchToCustom:{click:function(i){this.switchToCustom(),i.preventDefault()}},switchToAll:{click:function(i){this.switchToAll(),i.preventDefault()}}}})}),AJS.namespace("JIRA.Forms.FieldPicker",null,require("quick-edit/form/field-picker"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/container/container.js' */
define("quick-edit/form/container",["quick-edit/form/field-picker","quick-edit/form/import-issues","quick-edit/util/jira","quick-edit/util/control","quick-edit/form/helper/helper","jira/dialog/form-dialog","jira/dialog/dialog","jira/util/navigator","jira/issue","jira/issuenavigator/issue-navigator","jquery","wrm/require"],function(e,i,t,n,r,o,s,c,a,l,u,d){"use strict";return n.extend({init:function(i){this.$element=u("<div />").addClass("qf-container"),this.options=t.makePropertyFunc(i),this.fieldPicker=new e,this.successData=[],this.helper=new r(this);var n=this;d(["wr!com.atlassian.plugins.browser.metrics.browser-metrics-plugin:api"]).then(function(){n.metrics=require("internal/browser-metrics")})},decorateRenderers:function(){var e=this,t=e.globalEventNamespaces&&e.globalEventNamespaces.length>0?e.globalEventNamespaces[0]:null;this.fieldPicker.decorated||(this.fieldPicker.bind("switchedToAll",function(){e.unconfigurableForm.render(e.currentView.serialize(!0)).done(function(){e.fieldPicker.show()}),e.helper.sendQuickEditAnalyticsEvent({actionSubject:"switchAllButton",action:"clicked",source:t,name:"quickeditform.switched.all",allFieldsShown:!0,instance:e})}),this.fieldPicker.bind("switchedToCustom",function(){e.configurableForm.render(e.currentView.serialize(!0)).done(function(){e.fieldPicker.show()}),e.helper.sendQuickEditAnalyticsEvent({actionSubject:"switchCustomButton",action:"clicked",source:t,name:"quickeditform.switched.custom",allFieldsShown:!1,instance:e})}),this.fieldPicker.decorated=!0),this.configurableForm.decorated||(this.configurableForm.bind("rendered",function(t,n){e.currentView=e.configurableForm,e.fieldPicker.switchToCustom(!0),e.fieldPicker.setForm(e.configurableForm),e.fieldPicker.bindInlineDialog(),i.setForm(e.configurableForm),i.bindImportIssueUrl(),e.applyGlobalDecorator(n),e.model.setUseConfigurableForm(!0),e.triggerEvent("configurableFormRendered")}),this.configurableForm.bind("submitted",function(i,n){e.successData.push(n),e.triggerEvent("configurableFormSubmitted"),e.helper.sendQuickEditAnalyticsEvent({actionSubject:"submit",action:"clicked",source:t,name:"quickeditform.submit.success",allFieldsShown:!1,instance:e})}),this.configurableForm.bind("issueCreated",function(i,t){e.triggerEvent("issueCreated",t),e.metrics&&e.metrics.end({key:"jira.create.issue.dialog.submit"})}),this.configurableForm.decorated=!0),this.unconfigurableForm.decorated||(this.unconfigurableForm.bind("rendered",function(t,n){e.fieldPicker.switchToAll(!0),e.fieldPicker.setForm(e.unconfigurableForm),e.fieldPicker.bindInlineDialog(),i.setForm(e.unconfigurableForm),i.bindImportIssueUrl(),e.currentView=e.unconfigurableForm,e.applyGlobalDecorator(n),e.model.setUseConfigurableForm(!1),e.triggerEvent("unconfigurableFormRendered")}),this.unconfigurableForm.bind("submitted",function(i,n){e.successData.push(n),e.triggerEvent("unconfigurableFormSubmitted"),e.helper.sendQuickEditAnalyticsEvent({actionSubject:"submit",action:"clicked",source:t,name:"quickeditform.submit.success",allFieldsShown:!0,instance:e})}),this.unconfigurableForm.bind("issueCreated",function(i,t){e.triggerEvent("issueCreated",t),e.metrics&&e.metrics.end({key:"jira.create.issue.dialog.submit"})}),this.unconfigurableForm.decorated=!0)},applyGlobalDecorator:function(e){function i(){t.currentView.setInitialFocus&&t.currentView.setInitialFocus()}var t=this;e.detach(),this.$element.html(e),this.triggerEvent("contentRefreshed",[this.$element]),c.isIE()?window.setTimeout(i,0):i()},asDialog:function(e){e=u.extend(!0,{},e);var i,t=this,n=!!e.modeless;return this.dialog=i=new o({id:e.id,trigger:e.trigger,windowTitle:void 0!==e.windowTitle?e.windowTitle:!n,width:n?s.WIDTH_PRESETS.medium:s.WIDTH_PRESETS.large,defineResources:function(){this.requireContext("jira.create.issue")},content:function(e){t.render().done(function(){t.triggerEvent("dialogRendered"),e(t.$element)}),t.triggerEvent("dialogShown")},submitHandler:function(e,i){e.preventDefault(),t.metrics&&t.metrics.start({isInitial:!1,key:"jira.create.issue.dialog.submit"}),t.currentView.submit().then(i,i)},stacked:!0,modeless:n,shouldLoadHeritageFormDialogContext:!!e.shouldLoadHeritageFormDialogContext}),"edit-issue-dialog"===e.id&&u(this.dialog).on("beforeShow",function(e){a.getIssueKey()||l.isRowSelected()||e.preventDefault()}),this.dialog._focusFirstField=function(){o.prototype._focusFirstField.apply(this,["div.content :input:visible:first"])},this.bind("initialized",function(){this.unconfigurableForm.bind("sessionComplete",function(){i.hide()}),this.configurableForm.bind("sessionComplete",function(){i.hide()})}).bind("contentRefreshed",function(){i.notifyOfNewContent()}),i.bind("Dialog.hide",function(){t.successData.length&&(t.triggerEvent("sessionComplete",[t.successData],!0),t.successData=[])}),t.$element.ajaxStart(function(){i.showFooterLoadingIndicator()}).ajaxStop(function(){i.hideFooterLoadingIndicator()}),i.getQuickForm=function(){return t},i.dirtyFormWarning(),i},lazyInit:function(){var e=this,i=this.options.call(this);this.model=i.model,this.errorHandler=i.errorHandler,this.globalEventNamespaces=i.globalEventNamespaces,this.configurableForm=i.configurableForm,this.unconfigurableForm=i.unconfigurableForm,this.sessionComplete=i.sessionComplete,this.model.clearRetainedFields(),this.configurableForm.invalidateFieldsCache(),this.model.bind("serverError",function(i,t){e.$element.html(e.errorHandler.render(t)),e.triggerEvent("contentRefreshed",[this.$element])}),this.triggerEvent("initialized"),this.decorateRenderers()},render:function(){var e=this,i=u.Deferred();return this.lazyInit(),e.model.getUseConfigurableForm().done(function(t){t===!0?e.configurableForm.render().done(function(t,n){i.resolveWith(e,[e.$element]),e.$element.append(n)}):e.unconfigurableForm.render().done(function(t,n){i.resolveWith(e,[e.$element,n]),e.$element.append(n)})}).fail(function(){i.resolveWith(e,[e.$element])}),i.promise()}})}),AJS.namespace("JIRA.Forms.Container",null,require("quick-edit/form/container"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/error/error.js' */
define("quick-edit/form/error",["quick-edit/util/control","quick-edit/templates/form","jira/ajs/ajax/smart-ajax"],function(r,e,t){"use strict";return r.extend({getErrorMessageFromSmartAjax:function(r){var a,s;if(r.hasData&&401!==r.status)try{s=JSON.parse(r.data),a=s.errorMessages&&s.errorMessages.length>0?e.errorMessage({message:s.errorMessages[0]}):t.buildDialogErrorContent(r,!0).html()}catch(e){a=t.buildDialogErrorContent(r,!0).html()}else a=t.buildDialogErrorContent(r,!0).html();return a},render:function(r){var e=this.getErrorMessageFromSmartAjax(r);return this._render(e)}})}),AJS.namespace("JIRA.Forms.Error",null,require("quick-edit/form/error"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/error/create-issue.js' */
define("quick-edit/form/error/create-issue",["quick-edit/form/error","quick-edit/templates/issue","jquery"],function(e,r,t){"use strict";return e.extend({_render:function(e){return t(r.createIssueError({errorHtml:e}))}})}),AJS.namespace("JIRA.Forms.CreateIssueError",null,require("quick-edit/form/error/create-issue"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/error/edit-issue.js' */
define("quick-edit/form/error/edit-issue",["quick-edit/form/error","quick-edit/templates/issue","jquery"],function(e,r,i){"use strict";return e.extend({_render:function(e){return i(r.editIssueError({errorHtml:e}))}})}),AJS.namespace("JIRA.Forms.EditIssueError",null,require("quick-edit/form/error/edit-issue"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/unconfigurable/create-issue.js' */
define("quick-edit/form/unconfigurable-create-issue",["quick-edit/form/abstract/unconfigurable","quick-edit/form/helper/helper","quick-edit/templates/issue","quick-edit/util/jira","jira/util/users/logged-in-user","wrm/context-path","jquery"],function(e,t,i,r,s,n,o){"use strict";return e.extend({init:function(e){this._serialization={},this.globalEventNamespaces=e.globalEventNamespaces||[],this.model=e.model,this.helper=new t(this),this.title=e.title,this.action=n()+"/secure/QuickCreateIssue.jspa?decorator=none",this.$element=o("<div class='qf-unconfigurable-form' />")},handleSubmitSuccess:function(e){this.helper.handleSubmitSuccess(e)},handleSubmitError:function(t){e.prototype.handleSubmitError.call(this,t),this.helper.sendExperienceEventOnSubmitError(t)},_render:function(){var e=o.Deferred(),t=this;return this.getFieldsHtml().done(function(n){t.model.getIssueSetupFields().done(function(o){var l=i.createIssueForm({issueSetupFields:o,fieldsHtml:n,parentIssueId:t.model.getParentIssueId(),atlToken:t.model.getAtlToken(),formToken:t.model.getFormToken(),title:t.title,multipleMode:t.model.isInMultipleMode(),showFieldConfigurationToolBar:!s.isAnonymous(),modifierKey:r.getModifierKey()}),u=r.extractScripts(l);t.$element.empty().append(u.html),t.helper.restoreFormDirtyStatus(),t.helper.decorate(),t.helper.decorateFields(),e.resolveWith(t,[t.$element,u.scripts])})}),e.promise()}})}),AJS.namespace("JIRA.Forms.UnconfigurableCreateIssueForm",null,require("quick-edit/form/unconfigurable-create-issue"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/unconfigurable/edit-issue.js' */
define("quick-edit/form/unconfigurable-edit-issue",["quick-edit/form/abstract/unconfigurable","quick-edit/util/jira","quick-edit/templates/issue","jira/util/users/logged-in-user","wrm/context-path","jquery"],function(e,t,i,s,n,r){"use strict";return e.extend({init:function(e){this.globalEventNamespaces=e.globalEventNamespaces||[],this.model=e.model,this.issueId=e.issueId,this.title=e.title,this.action=n()+"/secure/QuickEditIssue.jspa?issueId="+e.issueId+"&decorator=none",this.$element=r("<div class='qf-unconfigurable-form' />")},getFieldsHtml:function(){var e=this,t=r.Deferred(),s={};return this.model.getUnconfigurableTabs().done(function(n){1===n.length?s.fields=n[0].fields:(s.tabs=n,s.hasTabs=!0),t.resolveWith(e,[i.issueFields(s)])}),t.promise()},handleSubmitSuccess:function(e){this.triggerEvent("submitted",[e]),this.triggerEvent("issueEdited",[e],!0),this.triggerEvent("sessionComplete")},_render:function(){var e=r.Deferred(),n=this;return this.getFieldsHtml().done(function(r){var o={fieldsHtml:r,title:n.title,issueId:n.issueId,atlToken:n.model.getAtlToken(),formToken:n.model.getFormToken(),pid:n.model.getPid(),modifierKey:t.getModifierKey(),showFieldConfigurationToolBar:!s.isAnonymous()};this.model.getCommentField().then(function(s){var r,l;o.commentField=s,r=i.editIssueForm(o),l=t.extractScripts(r),n.$element.html(l.html),e.resolveWith(n,[n.$element,l.scripts])},function(){var s=i.editIssueForm(o),r=t.extractScripts(s);n.$element.html(r.html),e.resolveWith(n,[n.$element,r.scripts])})}),e.promise()}})}),AJS.namespace("JIRA.Forms.UnconfigurableEditIssueForm",null,require("quick-edit/form/unconfigurable-edit-issue"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/factory/create-issue.js' */
define("quick-edit/form/factory/create-issue",["quick-edit/form/container","quick-edit/form/configurable/create-issue","quick-edit/form/unconfigurable-create-issue","quick-edit/form/error/create-issue","quick-edit/form/model/create-issue"],function(e,r,a,t,s){"use strict";function i(e,r){if(e&&r)for(var a=0;a<e.length;a++)r.markFieldAsDirty(e[a])}return function(o){return o=o||{},new e(function(){o.globalEventNamespaces=o.globalEventNamespaces||["QuickCreateIssue"];var e="Create issue",n=new s({projectId:o.pid,issueType:o.issueType,itsmCategory:o.itsmCategory,fields:o.fields});i(o.customFieldsToPreserveOnFormRecreation,n);var c=new r({model:n,title:e,globalEventNamespaces:o.globalEventNamespaces}),u=new a({model:n,title:e,globalEventNamespaces:o.globalEventNamespaces});return{globalEventNamespaces:o.globalEventNamespaces,model:n,errorHandler:new t,configurableForm:c,unconfigurableForm:u}})}}),AJS.namespace("JIRA.Forms.createCreateIssueForm",null,require("quick-edit/form/factory/create-issue"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/factory/create-subtask.js' */
define("quick-edit/form/factory/create-subtask",["quick-edit/form/container","quick-edit/form/configurable/create-issue","quick-edit/form/error/create-issue","quick-edit/form/model/create-issue","quick-edit/form/unconfigurable-create-issue","quick-edit/util/dialog","jira/issue","jira/issuenavigator/issue-navigator"],function(e,t,s,a,r,i,u,n){"use strict";function c(e){return e.parentIssueId||u.getIssueId()||n.getSelectedIssueId()}return function(u){return u=u||{},new e(function(){u.globalEventNamespaces=u.globalEventNamespaces||["QuickCreateSubtask"];var e=c(u),n=i.getIssueActionTitle("Create Subtask"),o=new a({parentIssueId:e,projectId:u.pid,issueType:u.issueType,fields:u.fields}),l=new t({model:o,title:n,globalEventNamespaces:u.globalEventNamespaces}),d=new r({model:o,title:n,globalEventNamespaces:u.globalEventNamespaces});return{globalEventNamespaces:u.globalEventNamespaces,model:o,errorHandler:new s,configurableForm:l,unconfigurableForm:d}})}}),AJS.namespace("JIRA.Forms.createSubtaskForm",null,require("quick-edit/form/factory/create-subtask"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-form', location = 'js/form/factory/edit-issue.js' */
define("quick-edit/form/factory/edit-issue",["quick-edit/form/container","quick-edit/form/configurable/edit-issue","quick-edit/form/error/edit-issue","quick-edit/util/dialog","quick-edit/form/model/factory/edit-issue","quick-edit/form/unconfigurable-edit-issue","jira/issue","jira/issuenavigator/issue-navigator","jquery"],function(e,i,t,s,u,r,n,o,d){"use strict";function a(e){var i=s.getAttrFromActiveTrigger("data-issueId");return d.isFunction(e.issueId)?e.issueId(e):e.issueId?e.issueId:i?i:n.getIssueId()||o.getSelectedIssueId()}function c(){var e="Edit issue";return s.shouldShowIssueKeyInTitle()?s.getIssueActionTitle(e):e}return function(s){return s=s||{},new e(function(){var e=a(s),n=c(),o=u(e),d=new i({title:n,model:o,issueId:e,globalEventNamespaces:["QuickEdit"]}),l=new r({title:n,model:o,issueId:e,globalEventNamespaces:["QuickEdit"]});return{globalEventNamespaces:["QuickEdit"],model:o,errorHandler:new t,configurableForm:d,unconfigurableForm:l}})}}),AJS.namespace("JIRA.Forms.createEditIssueForm",null,require("quick-edit/form/factory/edit-issue"));;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-create-calendar-init', location = 'js/init/calendar.js' */
define("quick-edit/init/calendar",["wrm/require"],function(a){function e(e){var c,n=r();switch(n){case"cs_CZ":c="calendar-cs";break;case"da_DK":c="calendar-da";break;case"de_DE":c="calendar-de";break;case"en_UK":c="calendar-en";break;case"en_US":c="calendar-en";break;case"es_ES":c="calendar-es";break;case"et_EE":c="calendar-en";break;case"fi_FI":c="calendar-fi";break;case"fr_FR":c="calendar-fr";break;case"hu_HU":c="calendar-hu";break;case"is_IS":c="calendar-en";break;case"it_IT":c="calendar-it";break;case"ja_JP":c="calendar-jp";break;case"ko_KR":c="calendar-ko";break;case"nb_NO":c="calendar-no";break;case"nl_NL":c="calendar-nl";break;case"pl_PL":c="calendar-pl";break;case"pt_BR":c="calendar-pt";break;case"pt_PT":c="calendar-pt";break;case"ro_RO":c="calendar-ro";break;case"ru_RU":c="calendar-ru";break;case"sk_SK":c="calendar-sk";break;case"sv_SE":c="calendar-sv";break;case"zh_CN":c="calendar-zh";break;default:c="calendar-en"}a("wrc!jira.webresources:"+c,e)}var r=function(){return AJS.Meta.get("user-locale")};return function(a){e(a)}});;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:loading-indicator', location = 'js/util/loading-indicator.js' */
define("quick-edit/util/loading-indicator",["jira/loading/loading","jira/flag"],function(i,n){var o=AJS.dim,a=AJS.undim;return{showLoadingIndicator:function(){o(),i.showLoadingIndicator()},hideLoadingIndicator:function(o){a(),i.hideLoadingIndicator(),o&&n.showErrorMsg(null,"The Jira server could not be contacted. This may be a temporary glitch or the server may be down.")}}});;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-create-issue-bootstrap', location = 'js/init/create-dialogs.js' */
define("quick-edit/init/create-dialogs",["wrm/require","quick-edit/util/loading-indicator","jira/ajs/keyboardshortcut/keyboard-shortcut-toggle","quick-edit/init/calendar"],function(i,e,a,t){var n=function(){a.disable(),e.showLoadingIndicator()},r=function(){e.hideLoadingIndicator(!0),a.enable()},u=!1,c=function(e){if(!u){u=!0,n();var c="wr!com.atlassian.jira.jira-quick-edit-plugin:quick-create-issue",o=i([c]);o.then(function(){var i=require("quick-edit/init/create");i.initIssueDialog(e),a.enable(),u=!1},function(){r(),u=!1}),t()}},o=!1,d=function(e){if(!o){o=!0,n();var u="wr!com.atlassian.jira.jira-quick-edit-plugin:quick-create-issue",c=i([u]);c.then(function(){var i=require("quick-edit/init/create");i.initSubtaskDialog(e),a.enable(),o=!1},function(){r(),o=!1}),t()}};return{showCreateDialog:c,showCreateSubtaskDialog:d}});;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-create-issue-bootstrap', location = 'js/init/create-bootstrap-wrm.js' */
require(["jquery","quick-edit/init/create-dialogs"],function(e,t){JIRA.API.getSidebar().then(function(e){e.on(e.events.JIRA_SUMMON_CREATE_ISSUE_DIALOG,function(e){t.showCreateDialog(e)},!0)}),e(function(){var e=document.getElementById("stqc_show");e&&(e.onclick=null)}),e(document).on("simpleClick",".create-issue, .create-issue-type",function(e){e.preventDefault(),t.showCreateDialog(e)}),e(document).on("simpleClick",".issueaction-create-subtask",function(e){e.preventDefault(),t.showCreateSubtaskDialog(e)})});;
;
/* module-key = 'com.atlassian.teams:teams-wr-custom-field-scripts-common', location = '/teams/scripts-plugin/field-common.min.js' */
(function(){define("com/atlassian/rm/common/customfields/common",[],function(){var a,b,c,d,e,f,g,h,i,j;return c=window.JIRA,a=AJS.$,d=AJS.SingleSelect,b=AJS.ItemDescriptor,j=AJS.escapeHTML,f=function(a){return c.bind(c.Events.NEW_CONTENT_ADDED,function(b,d,e){if(e!==c.CONTENT_ADDED_REASON.panelRefreshed)return a({context:d})})},g=function(a){var b,c,d;return d=a.url,b=a.createQueryData,c=a.formatResponse,{url:d,type:"POST",query:!0,data:function(a){return b({query:a})},dataType:"json",contentType:"application/json",formatResponse:c,keyInputPeriod:200}},i=function(a){var c,d;return d=a.text,c=a.additionalStyles,new b({label:d,html:j(d),highlighted:!0,styleClass:"jpo-dropdown-item-unselectable "+c,unselectableItem:!0})},e=function(a){var b;if(b=a.items,0===b.length)return b.push(i({text:"No Matches",additionalStyles:"jpo-dropdown-item-italic"}))},h=function(b){var c,e;return c=b.ajaxOptions,e=b.getNoMatchingValueMessage,d.extend({init:function(b){return a.extend(b,{submitInputVal:!0,showDropdownButton:!0,ajaxOptions:c}),this._super(b)},setSelection:function(a){if(!a.properties.unselectableItem)return this._super.apply(this,arguments)},handleFreeInput:function(b){var c,d;if(this._super.apply(this,arguments),null==b&&(b=a.trim(this.$field.val())),d=this.model.getDescriptor(b),null==d&&this.$container.hasClass("aui-ss-editing"))return c=null!=b&&b.length>0,c?(this.options.errorMessage=e(b),this.showErrorMessage(b),this.clear(),this.model.removeFreeInputVal()):this.hideErrorMessage()}})},{bindInitializationCallback:f,createDropdownAjaxOptions:g,createInfoMessageListItem:i,addNoMatchesItemIfEmpty:e,createDropdownClass:h}})}).call(this);;
;
/* module-key = 'com.atlassian.jpo:jpo-wr-custom-field-scripts-parent', location = '/jpo2/scripts-plugin/field-parent.min.js' */
(function(){require(["com/atlassian/rm/common/customfields/common"],function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L;if(j=window.JIRA,b=AJS.$,i=AJS.ItemDescriptor,d=AJS.GroupDescriptor,p=AJS.contextPath,w=AJS.escapeHTML,k=100,l=".jpo-parent-selection-dropdown",f=".jpo-initial-issue-type-name",e=".jpo-initial-epic-link",g=".jpo-initial-issue-project",c=".jpo-client-error-message-container",h="#issuetype-field",m=p()+"/rest/jpo/1.0/parent/suggest",B="",E=void 0,v=void 0,F=void 0,z=function(a){var b,c,d,e;for(b={},d=0,e=a.length;d<e;d++)c=a[d],b[c.id]=c;return b},I=function(){return B=b(f).val()},D=function(){return b(h).change(function(a){var b;if(b=a.target.value,null!=b&&b.length>0)return B=b})},A=function(){return null!=v&&v.length>0},H=function(){return v=b(e).val()},J=function(){return F=b(g).val()},C=function(a){return a.$field.change(function(a){return v=a.target.value,o()})},o=function(){return A()?L("Cannot use parent link when epic link is set."):y()},K=function(a){if(null!=E)return E.$container.toggle(a)},L=function(a){return K(!1),b(c).html("<span class='error'>"+w(a)+"</span>")},y=function(){return K(!0),b(c).empty()},x=function(a){var b,c,e,f,g;return e=a.issues,c=a.issueTypes,g=a.projects,b=new d({weight:0,showLabel:!1,items:[q()]}),f=new d({weight:1,items:u({issues:e,issueTypes:c,projects:g})}),[b,f]},t=function(a){var b,c,d,e,f,g,h;return d=a.issue,g=a.issueType,h=a.project,e=d.issueKey,f=d.issueSummary,b=h.key+"-"+e,c=b+" "+f,new i({value:b,fieldText:c,label:c,icon:g.iconUrl})},u=function(b){var c,d,e,f,g,h,i;return f=b.issues,d=b.issueTypes,h=b.projects,e=z(d),i=z(h),g=function(){var a,b,d;for(d=[],a=0,b=f.length;a<b;a++)c=f[a],d.push(t({issue:c,issueType:e[c.issueTypeId],project:i[c.projectId]}));return d}(),a.addNoMatchesItemIfEmpty({items:g}),g},q=function(){return a.createInfoMessageListItem({text:"To set an epic as the parent, use the epic link instead",additionalStyles:"jpo-dropdown-item-italic"})},r=function(a){var b;return b=a.query,JSON.stringify({query:b,issueTypeName:B,maxResults:k,projectId:F})},n=a.createDropdownClass({ajaxOptions:a.createDropdownAjaxOptions({url:m,createQueryData:r,formatResponse:x}),getNoMatchingValueMessage:function(a){return AJS.format("No valid parent matching \'\'{0}\'\' was found.",a)}}),s=function(a){return b(l,a).each(function(){return E=new n({element:b(this)}),o()})},a.bindInitializationCallback(function(a){var b;return b=a.context,H(),I(),J(),D(),s(b)}),null!=(null!=(G=j.EpicPicker)?G.READY_EVENT:void 0))return j.bind(j.EpicPicker.READY_EVENT,function(a,b){return C(b)})})}).call(this);;
;
/* module-key = 'com.atlassian.teams:teams-wr-custom-field-team', location = '/teams/scripts-plugin/field-team.min.js' */
(function(){require(["com/atlassian/rm/common/customfields/common"],function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p;return b=AJS.$,e=AJS.ItemDescriptor,d=AJS.GroupDescriptor,j=AJS.contextPath,f=100,g=".jpo-team-selection-dropdown",h=j()+"/rest/teams/1.0/teams/find",c=j()+"/download/resources/com.atlassian.teams:jpo-wr-images-and-fonts/images/teams/default-avatar.svg",p=function(a){var b,c,e;return e=a.teams,b=new d({weight:0,items:[k()]}),c=new d({weight:1,label:"Shared teams",items:o({teams:e})}),[b,c]},n=function(a){var b,d,f;return d=a.id,f=a.title,b=a.avatarUrl,new e({value:""+d,fieldText:f,label:f,icon:b||c})},o=function(b){var c,d,e;return e=b.teams,c=function(){var a,b,c;for(c=[],a=0,b=e.length;a<b;a++)d=e[a],c.push(n(d));return c}(),a.addNoMatchesItemIfEmpty({items:c}),c},k=function(){return a.createInfoMessageListItem({text:"Plan-specific teams can only be selected through a plan",additionalStyles:"jpo-dropdown-item-italic"})},l=function(a){var b;return b=a.query,JSON.stringify({query:b,excludedIds:[],maxResults:f})},i=a.createDropdownClass({ajaxOptions:a.createDropdownAjaxOptions({url:h,createQueryData:l,formatResponse:p}),getNoMatchingValueMessage:function(a){return AJS.format("No team matching query \'\'{0}\'\' was found.",a)}}),m=function(a){return b(g,a).each(function(){return new i({element:b(this)})})},a.bindInitializationCallback(function(a){var b;return b=a.context,m(b)})})}).call(this);;
;
/* module-key = 'com.atlassian.jira.plugins.jira-admin-helper-plugin:dialog-resources', location = 'jira-admin-helper-module/js/dialog.js' */
define('jira/admin-helper/dialog', [
    'jquery',
    'jira/dialog/dialog',
    'jira/focus/set-focus'
], function (
    $,
    Dialog,
    setFocus
) {

    return Dialog.extend({

        _getDefaultOptions: function () {
            return $.extend(this._super(), {
                cached: false,
                widthClass: "large",
                stacked: true
            });
        },

        defineResources: function() {
            this._super();
            this.requireResource("com.atlassian.jira.plugins.jira-admin-helper-plugin:whereismycf-resources");
        },

        decorateContent: function () {

            var instance = this;

            // init the close link
            this.get$popupContent().find(".cancel").click(function (e) {
                instance.hide();
                e.preventDefault();
            });
        },

        _onShowContent: function () {
            this._super();
            if (Dialog.current === this) {
                var triggerConfig = new setFocus.FocusConfiguration();
                triggerConfig.context = this.get$popup()[0];
                triggerConfig.parentElementSelectors = ['.form-body'];
                setFocus.pushConfiguration(triggerConfig);
                setFocus.triggerFocus();
            }
        },

        hide: function (undim) {

            if (this._super(undim) === false) {
                return false;
            }
            setFocus.popConfiguration();
        }
    });
});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-admin-helper-plugin:dialog-resources', location = 'jira-admin-helper-module/js/notification-helper-init.js' */
require([
    'jquery',
    'jira/admin-helper/dialog',
    'jira/util/data/meta'
], function (
    $,
    Dialog,
    Meta
) {
    if (Meta.get("is-admin")) {

        $(document).delegate(".notificationhelper-trigger", "click", function (event) {
            event.preventDefault();
            new Dialog({
                id: "notification-helper-dialog",
                content: function content(callback) {
                    var dialog = this;
                    require(['jira/admin-helper/notification-helper/content-loader'],
                        function (ContentLoader) {
                            ContentLoader.loadContent(dialog, callback);
                        });
                }
            }).show();
        });
    }
});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-admin-helper-plugin:dialog-resources', location = 'jira-admin-helper-module/js/permission-helper-init.js' */
require([
    'jquery',
    'jira/admin-helper/dialog',
    'jira/util/data/meta'
], function (
    $,
    Dialog,
    Meta
) {
    if (Meta.get("is-admin")) {

        $(document).delegate(".permissionhelper-trigger", "click", function (event) {
            event.preventDefault();

            new Dialog({
                id: "permission-helper-dialog",
                widthClass: "medium",
                content: function content(callback) {
                    var dialog = this;
                    require(['jira/admin-helper/permission-helper/content-loader'],
                        function (ContentLoader) {
                            ContentLoader.loadContent(dialog, callback);
                        });
                }
            }).show();
        });
    }
});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-admin-helper-plugin:dialog-resources', location = 'jira-admin-helper-module/js/whereismycf-init.js' */
require([
    'jquery',
    'jira/admin-helper/dialog',
    'jira/util/data/meta',
    'jira/dialog/dialog'
], function (
    $,
    Dialog,
    Meta,
    JiraDialog
) {
    if (Meta.get("is-admin")) {
        var LABEL = "Where is my field?";

        $(document).delegate(".whereismycf-trigger", "click", function (event) {
            event.preventDefault();
            new Dialog({
                id: "whereismycf-dialog",
                widthClass: "small",
                content: function content(callback) {
                    var dialog = this;
                    require(['jira/admin-helper/whereismycf/content-loader'],
                        function (ContentLoader) {
                            ContentLoader.loadContentForView(dialog, callback);
                        });
                }
            }).show();

        });
        // hook into the quick-edit
        $(document).bind("showLayer", function (event, control, hash) {
            if (control == "inlineDialog" && hash.popup.attr("id") == "inline-dialog-field_picker_popup") {
                if (hash.popup.find("#whereismycf-qfpicker-link-id").length == 0) {
                    var thelink = $("<a href='#' id='whereismycf-qfpicker-link-id'>" + LABEL + "</a>").appendTo(hash.popup.find("#qf-picker-custom-link"));
                    thelink.click(function (event) {
                        event.preventDefault();
                        hash.hide();
                        eventsAndDecouplingInJavaScriptAreSoooAwesome();
                        var currentDialog = JiraDialog.current;
                        new Dialog({
                            id: "whereismycf-dialog",
                            widthClass: "small",
                            content: function content(callback) {
                                var dialog = this;
                                require(['jira/admin-helper/whereismycf/content-loader'],
                                    function (ContentLoader) {
                                        ContentLoader.loadContentForEditAndCreate(dialog, currentDialog, callback);
                                    });
                            }
                        }).show();

                    });
                }
            }
        });

        function eventsAndDecouplingInJavaScriptAreSoooAwesome() {
            // we're doing this because LayerManager wants to outsmart the world by deciding what to hide and what not...
            // and InlineDialog (and everything else in AUI) wants to outsmart the world by applying stupid timeouts to everything...
            // but ultimately you can outsmart every smartass in the JS land just by setting global variables to null! BUAHAHAHAHAHAHA
            AJS.InlineDialog.current = null;
        }
    }
});;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-create-issue', location = 'js/init/create.js' */
define("quick-edit/init/create",["quick-edit/form/factory/create-issue","quick-edit/form/factory/create-subtask","quick-edit/util/dialog","jira/analytics/web-client","jira/analytics/transformers/issue-type","jira/featureflags/feature-manager","jquery","quick-edit/util/jira","quick-edit/util/hierarchy","jira/util/events"],function(e,t,i,a,s,r,n,o,c,d){"use strict";var u=function(t){var i=n(t.target),u=i.is("a")?i:i.find("a"),p=parseUri(u.attr("href")).queryKey,g={pid:p.pid,issueType:p.issuetype,itsmCategory:p.itsmCategory};g=n.extend(g,{pid:i.attr("data-pid"),issueType:i.attr("data-issue-type"),itsmCategory:i.attr("data-itsm-category")});var y=e(g);n(y).on("dialogRendered",function(){JIRA.trace("create.issue.dialog.rendered"),a.sendPageEvent("createIssueModal"),d.trigger("createIssueDialogRendered")}),n(y).on("issueCreated",function(e,t){JIRA.trace("create.issue.dialog.issue.created");var i=t.createdIssueDetails.fields,n=String(i.project.id),u=i.project.projectTypeKey,p=String(t.createdIssueDetails.id),g=s.map(i.issuetype.name),y=String(i.issuetype.id),f={issueType:g,issueTypeId:y,projectType:u};i&&i.issuerestriction&&i.issuerestriction.issuerestrictions&&i.issuerestriction.issuerestrictions.projectrole&&i.issuerestriction.issuerestrictions.projectrole.length>0&&(f={issueType:g,issueTypeId:y,projectType:u,restrictIssue:!0});var m=i.project.simplified,j=t.hierarchy;f.nextGenProject=m,m&&j&&(f.issueTypeLevel=c.getIssueTypeLevel(j));var w="other";"software"===u&&(window.location.pathname.indexOf("roadmap")>-1?w="roadmap":window.location.pathname.indexOf("RapidBoard.jspa")>-1&&window.location.search.indexOf("view=planning")>-1||window.location.pathname.indexOf("backlog")>-1?w="backlog":(window.location.pathname.indexOf("RapidBoard.jspa")>-1||window.location.pathname.indexOf("board")>-1)&&(w="board")),f.location=w,r.isFeatureEnabled("jsd-add-request-type-to-global-create-analytics")&&"service_desk"===u&&(f.hasRequestType=l(i));var T={containerType:"project",containerId:n,source:"createIssueModal",objectType:"issue",objectId:p,actionSubject:"issue",action:"created",attributes:f};a.sendTrackEvent(T),d.trigger("legacyIssueCreated",T);var I=o.getApplication(u),b=o.getEdition(I);a.sendOperationalEvent({source:"ui",actionSubject:"ui",action:"taskSuccess",attributes:{task:"createIssue",isCreated:!0,application:I,edition:b,analyticsSource:"QuickCreateForm"}})}),y.asDialog({trigger:document.createElement("a"),id:"create-issue-dialog",windowTitle:"Create issue"}).show()},l=function(e){var t=!1;return n.each(e,function(e,i){i&&i.hasOwnProperty("requestType")&&(t=!0)}),t},p=function(e){var s=n(e.target),r=s.is("a")?s:s.find("a"),o=r.attr("data-issueid");o=o||n("#fallback-subtask-dialog-issueid").data("issueid");var c={parentIssueId:o},d=t(c);n(d).on("dialogRendered",function(){a.sendPageEvent("createSubTaskModal")}),d.asDialog({windowTitle:function(){return i.getIssueActionTitle("Create Subtask")},trigger:document.createElement("a"),id:"create-subtask-dialog"}).show()};return{initIssueDialog:u,initSubtaskDialog:p}});;
;
/* module-key = 'com.atlassian.plugin.jslibs:moment-2.6.0', location = 'libs/moment/2.6.0/moment-2.6.0.js' */
(function(A){define("atlassian/libs/moment-2.6.0",function(){var z={};A.call(z);return z.moment})})(function(){for(var A=function(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}},z=function(a,b){var c=!0;return l(function(){c&&(!1===e.suppressDeprecationWarnings&&("undefined"!==typeof console&&console.warn)&&console.warn("Deprecation warning: "+a),c=!1);return b.apply(this,arguments)},b)},X=function(a,
b){return function(c){return j(a.call(this,c),b)}},ua=function(a,b){return function(c){return this.lang().ordinal(a.call(this,c),b)}},Y=function(){},F=function(a){Z(a);l(this,a)},G=function(a){var a=$(a),b=a.year||0,c=a.quarter||0,d=a.month||0,g=a.week||0,e=a.day||0;this._milliseconds=+(a.millisecond||0)+1E3*(a.second||0)+6E4*(a.minute||0)+36E5*(a.hour||0);this._days=+e+7*g;this._months=+d+3*c+12*b;this._data={};this._bubble()},l=function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);b.hasOwnProperty("toString")&&
(a.toString=b.toString);b.hasOwnProperty("valueOf")&&(a.valueOf=b.valueOf);return a},v=function(a){return 0>a?Math.ceil(a):Math.floor(a)},j=function(a,b,c){for(var d=""+Math.abs(a);d.length<b;)d="0"+d;return(0<=a?c?"+":"":"-")+d},I=function(a,b,c,d){var g=b._milliseconds,f=b._days,b=b._months,d=null==d?!0:d;g&&a._d.setTime(+a._d+g*c);f&&aa(a,"Date",H(a,"Date")+f*c);b&&ba(a,H(a,"Month")+b*c);d&&e.updateOffset(a,f||b)},J=function(a){return"[object Array]"===Object.prototype.toString.call(a)},ca=function(a,
b,c){var d=Math.min(a.length,b.length),g=Math.abs(a.length-b.length),e=0,h;for(h=0;h<d;h++)(c&&a[h]!==b[h]||!c&&i(a[h])!==i(b[h]))&&e++;return e+g},r=function(a){if(a)var b=a.toLowerCase().replace(/(.)s$/,"$1"),a=va[a]||wa[b]||b;return a},$=function(a){var b={},c,d;for(d in a)a.hasOwnProperty(d)&&(c=r(d))&&(b[c]=a[d]);return b},xa=function(a){var b,c;if(0===a.indexOf("week"))b=7,c="day";else if(0===a.indexOf("month"))b=12,c="month";else return;e[a]=function(d,g){var f,h,i=e.fn._lang[a],j=[];"number"===
typeof d&&(g=d,d=void 0);h=function(a){a=e().utc().set(c,a);return i.call(e.fn._lang,a,d||"")};if(null!=g)return h(g);for(f=0;f<b;f++)j.push(h(f));return j}},i=function(a){var a=+a,b=0;0!==a&&isFinite(a)&&(b=0<=a?Math.floor(a):Math.ceil(a));return b},K=function(a,b){return(new Date(Date.UTC(a,b+1,0))).getUTCDate()},da=function(a,b,c){return B(e([a,11,31+b-c]),b,c).week},L=function(a){return 0===a%4&&0!==a%100||0===a%400},Z=function(a){var b;if(a._a&&-2===a._pf.overflow){b=0>a._a[s]||11<a._a[s]?s:
1>a._a[o]||a._a[o]>K(a._a[p],a._a[s])?o:0>a._a[m]||23<a._a[m]?m:0>a._a[w]||59<a._a[w]?w:0>a._a[C]||59<a._a[C]?C:0>a._a[D]||999<a._a[D]?D:-1;if(a._pf._overflowDayOfYear&&(b<p||b>o))b=o;a._pf.overflow=b}},ea=function(a){null==a._isValid&&(a._isValid=!isNaN(a._d.getTime())&&0>a._pf.overflow&&!a._pf.empty&&!a._pf.invalidMonth&&!a._pf.nullInput&&!a._pf.invalidFormat&&!a._pf.userInvalidated,a._strict&&(a._isValid=a._isValid&&0===a._pf.charsLeftOver&&0===a._pf.unusedTokens.length));return a._isValid},M=
function(a){return a?a.toLowerCase().replace("_","-"):a},N=function(a,b){return b._isUTC?e(a).zone(b._offset||0):e(a).local()},q=function(a){var b=0,c,d,g,f,h=function(a){if(!x[a]&&ya)try{require("./lang/"+a)}catch(b){}return x[a]};if(!a)return e.fn._lang;if(!J(a)){if(d=h(a))return d;a=[a]}for(;b<a.length;){f=M(a[b]).split("-");c=f.length;for(g=(g=M(a[b+1]))?g.split("-"):null;0<c;){if(d=h(f.slice(0,c).join("-")))return d;if(g&&g.length>=c&&ca(f,g,!0)>=c-1)break;c--}b++}return e.fn._lang},P=function(a,
b){if(!a.isValid())return a.lang().invalidDate();b=fa(b,a.lang());if(!O[b]){var c=O,d=b,g=b,e=g.match(ga),h,i;h=0;for(i=e.length;h<i;h++)e[h]=t[e[h]]?t[e[h]]:e[h].match(/\[[\s\S]/)?e[h].replace(/^\[|\]$/g,""):e[h].replace(/\\/g,"");c[d]=function(a){var b="";for(h=0;h<i;h++)b+=e[h]instanceof Function?e[h].call(a,g):e[h];return b}}return O[b](a)},fa=function(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(E.lastIndex=0;0<=d&&E.test(a);)a=a.replace(E,c),E.lastIndex=0,d-=1;return a},Ka=function(a,
b){var c=b._strict;switch(a){case "Q":return ha;case "DDDD":return ia;case "YYYY":case "GGGG":case "gggg":return c?za:Aa;case "Y":case "G":case "g":return Ba;case "YYYYYY":case "YYYYY":case "GGGGG":case "ggggg":return c?Ca:Da;case "S":if(c)return ha;case "SS":if(c)return ja;case "SSS":if(c)return ia;case "DDD":return Ea;case "MMM":case "MMMM":case "dd":case "ddd":case "dddd":return Fa;case "a":case "A":return q(b._l)._meridiemParse;case "X":return Ga;case "Z":case "ZZ":return Q;case "T":return Ha;
case "SSSS":return Ia;case "MM":case "DD":case "YY":case "GG":case "gg":case "HH":case "hh":case "mm":case "ss":case "ww":case "WW":return c?ja:ka;case "M":case "D":case "d":case "H":case "h":case "m":case "s":case "w":case "W":case "e":case "E":return ka;case "Do":return Ja;default:var c=RegExp,d;d=a.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");return c(d)}},la=function(a){var a=(a||"").match(Q)||[],
a=((a[a.length-1]||[])+"").match(La)||["-",0,0],b=+(60*a[1])+i(a[2]);return"+"===a[0]?-b:b},S=function(a){var b,c=[],d,g,f,h,j;if(!a._d){d=new Date;d=a._useUTC?[d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()]:[d.getFullYear(),d.getMonth(),d.getDate()];a._w&&(null==a._a[o]&&null==a._a[s])&&(b=function(b){var c=parseInt(b,10);return b?3>b.length?68<c?1900+c:2E3+c:c:null==a._a[p]?e().weekYear():a._a[p]},g=a._w,null!=g.GG||null!=g.W||null!=g.E?b=ma(b(g.GG),g.W||1,g.E,4,1):(f=q(a._l),h=null!=g.d?na(g.d,
f):null!=g.e?parseInt(g.e,10)+f._week.dow:0,j=parseInt(g.w,10)||1,null!=g.d&&h<f._week.dow&&j++,b=ma(b(g.gg),j,h,f._week.doy,f._week.dow)),a._a[p]=b.year,a._dayOfYear=b.dayOfYear);if(a._dayOfYear){b=null==a._a[p]?d[p]:a._a[p];if(a._dayOfYear>(L(b)?366:365))a._pf._overflowDayOfYear=!0;b=R(b,0,a._dayOfYear);a._a[s]=b.getUTCMonth();a._a[o]=b.getUTCDate()}for(b=0;3>b&&null==a._a[b];++b)a._a[b]=c[b]=d[b];for(;7>b;b++)a._a[b]=c[b]=null==a._a[b]?2===b?1:0:a._a[b];c[m]+=i((a._tzm||0)/60);c[w]+=i((a._tzm||
0)%60);a._d=(a._useUTC?R:Ma).apply(null,c)}},T=function(a){a._a=[];a._pf.empty=!0;var b=q(a._l),c=""+a._i,d,g,f,h,j=c.length,k=0;g=fa(a._f,b).match(ga)||[];for(b=0;b<g.length;b++){f=g[b];if(d=(c.match(Ka(f,a))||[])[0])h=c.substr(0,c.indexOf(d)),0<h.length&&a._pf.unusedInput.push(h),c=c.slice(c.indexOf(d)+d.length),k+=d.length;if(t[f]){d?a._pf.empty=!1:a._pf.unusedTokens.push(f);h=a;var l=void 0,n=h._a;switch(f){case "Q":null!=d&&(n[s]=3*(i(d)-1));break;case "M":case "MM":null!=d&&(n[s]=i(d)-1);break;
case "MMM":case "MMMM":l=q(h._l).monthsParse(d);null!=l?n[s]=l:h._pf.invalidMonth=d;break;case "D":case "DD":null!=d&&(n[o]=i(d));break;case "Do":null!=d&&(n[o]=i(parseInt(d,10)));break;case "DDD":case "DDDD":null!=d&&(h._dayOfYear=i(d));break;case "YY":n[p]=e.parseTwoDigitYear(d);break;case "YYYY":case "YYYYY":case "YYYYYY":n[p]=i(d);break;case "a":case "A":h._isPm=q(h._l).isPM(d);break;case "H":case "HH":case "h":case "hh":n[m]=i(d);break;case "m":case "mm":n[w]=i(d);break;case "s":case "ss":n[C]=
i(d);break;case "S":case "SS":case "SSS":case "SSSS":n[D]=i(1E3*("0."+d));break;case "X":h._d=new Date(1E3*parseFloat(d));break;case "Z":case "ZZ":h._useUTC=!0;h._tzm=la(d);break;case "w":case "ww":case "W":case "WW":case "d":case "dd":case "ddd":case "dddd":case "e":case "E":f=f.substr(0,1);case "gg":case "gggg":case "GG":case "GGGG":case "GGGGG":f=f.substr(0,2),d&&(h._w=h._w||{},h._w[f]=d)}}else a._strict&&!d&&a._pf.unusedTokens.push(f)}a._pf.charsLeftOver=j-k;0<c.length&&a._pf.unusedInput.push(c);
a._isPm&&12>a._a[m]&&(a._a[m]+=12);!1===a._isPm&&12===a._a[m]&&(a._a[m]=0);S(a);Z(a)},Ma=function(a,b,c,d,e,f,h){b=new Date(a,b,c,d,e,f,h);1970>a&&b.setFullYear(a);return b},R=function(a){var b=new Date(Date.UTC.apply(null,arguments));1970>a&&b.setUTCFullYear(a);return b},na=function(a,b){if("string"===typeof a)if(isNaN(a)){if(a=b.weekdaysParse(a),"number"!==typeof a)return null}else a=parseInt(a,10);return a},Na=function(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)},B=function(a,b,c){b=c-b;c-=
a.day();c>b&&(c-=7);c<b-7&&(c+=7);a=e(a).add("d",c);return{week:Math.ceil(a.dayOfYear()/7),year:a.year()}},ma=function(a,b,c,d,e){var f=R(a,0,1).getUTCDay(),b=7*(b-1)+((null!=c?c:e)-e)+(e-f+(f>d?7:0)-(f<e?7:0))+1;return{year:0<b?a:a-1,dayOfYear:0<b?b:(L(a-1)?366:365)+b}},pa=function(a){var b=a._i,c=a._f;if(null===b||void 0===c&&""===b)return e.invalid({nullInput:!0});"string"===typeof b&&(a._i=b=q().preparse(b));if(e.isMoment(b)){var a=b,d={},g;for(g in a)a.hasOwnProperty(g)&&oa.hasOwnProperty(g)&&
(d[g]=a[g]);a=d;a._d=new Date(+b._d)}else if(c)if(J(c)){var b=a,f,h;if(0===b._f.length)b._pf.invalidFormat=!0,b._d=new Date(NaN);else{for(g=0;g<b._f.length;g++)if(c=0,d=l({},b),d._pf=A(),d._f=b._f[g],T(d),ea(d)&&(c+=d._pf.charsLeftOver,c+=10*d._pf.unusedTokens.length,d._pf.score=c,null==h||c<h))h=c,f=d;l(b,f||d)}}else T(a);else if(d=a,f=d._i,h=Oa.exec(f),void 0===f)d._d=new Date;else if(h)d._d=new Date(+h[1]);else if("string"===typeof f)if(b=d._i,g=Pa.exec(b)){d._pf.iso=!0;f=0;for(h=U.length;f<h;f++)if(U[f][1].exec(b)){d._f=
U[f][0]+(g[6]||" ");break}f=0;for(h=V.length;f<h;f++)if(V[f][1].exec(b)){d._f+=V[f][0];break}b.match(Q)&&(d._f+="Z");T(d)}else e.createFromInputFallback(d);else J(f)?(d._a=f.slice(0),S(d)):"[object Date]"===Object.prototype.toString.call(f)||f instanceof Date?d._d=new Date(+f):"object"===typeof f?d._d||(f=$(d._i),d._a=[f.year,f.month,f.day,f.hour,f.minute,f.second,f.millisecond],S(d)):"number"===typeof f?d._d=new Date(f):e.createFromInputFallback(d);return new F(a)},ba=function(a,b){var c;if("string"===
typeof b&&(b=a.lang().monthsParse(b),"number"!==typeof b))return a;c=Math.min(a.date(),K(a.year(),b));a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c);return a},H=function(a,b){return a._d["get"+(a._isUTC?"UTC":"")+b]()},aa=function(a,b,c){return"Month"===b?ba(a,c):a._d["set"+(a._isUTC?"UTC":"")+b](c)},u=function(a,b){return function(c){return null!=c?(aa(this,a,c),e.updateOffset(this,b),this):H(this,a)}},Qa=function(a){e.duration.fn[a]=function(){return this._data[a]}},qa=function(a,b){e.duration.fn["as"+
a]=function(){return+this/b}},e,Ra="undefined"!==typeof global?global:this,y=Math.round,k,p=0,s=1,o=2,m=3,w=4,C=5,D=6,x={},oa={_isAMomentObject:null,_i:null,_f:null,_l:null,_strict:null,_isUTC:null,_offset:null,_pf:null,_lang:null},ya="undefined"!==typeof module&&module.exports,Oa=/^\/?Date\((\-?\d+)/i,Sa=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Ta=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,ga=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,
E=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,ka=/\d\d?/,Ea=/\d{1,3}/,Aa=/\d{1,4}/,Da=/[+\-]?\d{1,6}/,Ia=/\d+/,Fa=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Q=/Z|[\+\-]\d\d:?\d\d/gi,Ha=/T/i,Ga=/[\+\-]?\d+(\.\d{1,3})?/,Ja=/\d{1,2}/,ha=/\d/,ja=/\d\d/,ia=/\d{3}/,za=/\d{4}/,Ca=/[+-]?\d{6}/,Ba=/[+-]?\d+/,Pa=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,
U=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],V=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],La=/([\+\-]|\d\d)/gi,W={Milliseconds:1,Seconds:1E3,Minutes:6E4,Hours:36E5,Days:864E5,Months:2592E6,Years:31536E6},va={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",
M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},wa={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},O={},ra="DDD w W M D d".split(" "),sa="MDHhmswW".split(""),t={M:function(){return this.month()+1},MMM:function(a){return this.lang().monthsShort(this,a)},MMMM:function(a){return this.lang().months(this,a)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},
dd:function(a){return this.lang().weekdaysMin(this,a)},ddd:function(a){return this.lang().weekdaysShort(this,a)},dddd:function(a){return this.lang().weekdays(this,a)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return j(this.year()%100,2)},YYYY:function(){return j(this.year(),4)},YYYYY:function(){return j(this.year(),5)},YYYYYY:function(){var a=this.year();return(0<=a?"+":"-")+j(Math.abs(a),6)},gg:function(){return j(this.weekYear()%100,2)},gggg:function(){return j(this.weekYear(),
4)},ggggg:function(){return j(this.weekYear(),5)},GG:function(){return j(this.isoWeekYear()%100,2)},GGGG:function(){return j(this.isoWeekYear(),4)},GGGGG:function(){return j(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},
s:function(){return this.seconds()},S:function(){return i(this.milliseconds()/100)},SS:function(){return j(i(this.milliseconds()/10),2)},SSS:function(){return j(this.milliseconds(),3)},SSSS:function(){return j(this.milliseconds(),3)},Z:function(){var a=-this.zone(),b="+";0>a&&(a=-a,b="-");return b+j(i(a/60),2)+":"+j(i(a)%60,2)},ZZ:function(){var a=-this.zone(),b="+";0>a&&(a=-a,b="-");return b+j(i(a/60),2)+j(i(a)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},
Q:function(){return this.quarter()}},ta=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];ra.length;)k=ra.pop(),t[k+"o"]=ua(t[k],k);for(;sa.length;)k=sa.pop(),t[k+k]=X(t[k],2);t.DDDD=X(t.DDD,3);l(Y.prototype,{set:function(a){var b,c;for(c in a)b=a[c],"function"===typeof b?this[c]=b:this["_"+c]=b},_months:"January February March April May June July August September October November December".split(" "),months:function(a){return this._months[a.month()]},_monthsShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),
monthsShort:function(a){return this._monthsShort[a.month()]},monthsParse:function(a){var b,c;this._monthsParse||(this._monthsParse=[]);for(b=0;12>b;b++)if(this._monthsParse[b]||(c=e.utc([2E3,b]),c="^"+this.months(c,"")+"|^"+this.monthsShort(c,""),this._monthsParse[b]=RegExp(c.replace(".",""),"i")),this._monthsParse[b].test(a))return b},_weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),weekdays:function(a){return this._weekdays[a.day()]},_weekdaysShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),
weekdaysShort:function(a){return this._weekdaysShort[a.day()]},_weekdaysMin:"Su Mo Tu We Th Fr Sa".split(" "),weekdaysMin:function(a){return this._weekdaysMin[a.day()]},weekdaysParse:function(a){var b,c;this._weekdaysParse||(this._weekdaysParse=[]);for(b=0;7>b;b++)if(this._weekdaysParse[b]||(c=e([2E3,1]).day(b),c="^"+this.weekdays(c,"")+"|^"+this.weekdaysShort(c,"")+"|^"+this.weekdaysMin(c,""),this._weekdaysParse[b]=RegExp(c.replace(".",""),"i")),this._weekdaysParse[b].test(a))return b},_longDateFormat:{LT:"h:mm A",
L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(a){var b=this._longDateFormat[a];!b&&this._longDateFormat[a.toUpperCase()]&&(b=this._longDateFormat[a.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a]=b);return b},isPM:function(a){return"p"===(a+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(a,b,c){return 11<a?c?"pm":"PM":c?"am":"AM"},_calendar:{sameDay:"[Today at] LT",
nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(a,b){var c=this._calendar[a];return"function"===typeof c?c.apply(b):c},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(a,b,c,d){var e=this._relativeTime[c];return"function"===typeof e?e(a,b,c,
d):e.replace(/%d/i,a)},pastFuture:function(a,b){var c=this._relativeTime[0<a?"future":"past"];return"function"===typeof c?c(b):c.replace(/%s/i,b)},ordinal:function(a){return this._ordinal.replace("%d",a)},_ordinal:"%d",preparse:function(a){return a},postformat:function(a){return a},week:function(a){return B(a,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}});e=function(a,b,c,d){var e;"boolean"===typeof c&&(d=c,c=
void 0);e={_isAMomentObject:!0};e._i=a;e._f=b;e._l=c;e._strict=d;e._isUTC=!1;e._pf=A();return pa(e)};e.suppressDeprecationWarnings=!1;e.createFromInputFallback=z("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(a){a._d=new Date(a._i)});e.utc=function(a,b,c,d){var e;"boolean"===typeof c&&(d=c,c=void 0);e={_isAMomentObject:!0,_useUTC:!0,_isUTC:!0};e._l=
c;e._i=a;e._f=b;e._strict=d;e._pf=A();return pa(e).utc()};e.unix=function(a){return e(1E3*a)};e.duration=function(a,b){var c=a,d=null,g;if(e.isDuration(a))c={ms:a._milliseconds,d:a._days,M:a._months};else if("number"===typeof a)c={},b?c[b]=a:c.milliseconds=a;else if(d=Sa.exec(a))g="-"===d[1]?-1:1,c={y:0,d:i(d[o])*g,h:i(d[m])*g,m:i(d[w])*g,s:i(d[C])*g,ms:i(d[D])*g};else if(d=Ta.exec(a))g="-"===d[1]?-1:1,c=function(a){a=a&&parseFloat(a.replace(",","."));return(isNaN(a)?0:a)*g},c={y:c(d[2]),M:c(d[3]),
d:c(d[4]),h:c(d[5]),m:c(d[6]),s:c(d[7]),w:c(d[8])};d=new G(c);e.isDuration(a)&&a.hasOwnProperty("_lang")&&(d._lang=a._lang);return d};e.version="2.6.0";e.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";e.momentProperties=oa;e.updateOffset=function(){};e.lang=function(a,b){if(!a)return e.fn._lang._abbr;if(b){var c=M(a);b.abbr=c;x[c]||(x[c]=new Y);x[c].set(b)}else null===b?(delete x[a],a="en"):x[a]||q(a);return(e.duration.fn._lang=e.fn._lang=q(a))._abbr};e.langData=function(a){a&&(a._lang&&a._lang._abbr)&&(a=
a._lang._abbr);return q(a)};e.isMoment=function(a){return a instanceof F||null!=a&&a.hasOwnProperty("_isAMomentObject")};e.isDuration=function(a){return a instanceof G};for(k=ta.length-1;0<=k;--k)xa(ta[k]);e.normalizeUnits=function(a){return r(a)};e.invalid=function(a){var b=e.utc(NaN);null!=a?l(b._pf,a):b._pf.userInvalidated=!0;return b};e.parseZone=function(){return e.apply(null,arguments).parseZone()};e.parseTwoDigitYear=function(a){return i(a)+(68<i(a)?1900:2E3)};l(e.fn=F.prototype,{clone:function(){return e(this)},
valueOf:function(){return+this._d+6E4*(this._offset||0)},unix:function(){return Math.floor(+this/1E3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var a=e(this).utc();return 0<a.year()&&9999>=a.year()?P(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):P(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){return[this.year(),this.month(),this.date(),this.hours(),this.minutes(),
this.seconds(),this.milliseconds()]},isValid:function(){return ea(this)},isDSTShifted:function(){return this._a?this.isValid()&&0<ca(this._a,(this._isUTC?e.utc(this._a):e(this._a)).toArray()):!1},parsingFlags:function(){return l({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){this.zone(0);this._isUTC=!1;return this},format:function(a){a=P(this,a||e.defaultFormat);return this.lang().postformat(a)},add:function(a,b){var c;c="string"===
typeof a?e.duration(+b,a):e.duration(a,b);I(this,c,1);return this},subtract:function(a,b){var c;c="string"===typeof a?e.duration(+b,a):e.duration(a,b);I(this,c,-1);return this},diff:function(a,b,c){var a=N(a,this),d=6E4*(this.zone()-a.zone()),g,b=r(b);"year"===b||"month"===b?(g=432E5*(this.daysInMonth()+a.daysInMonth()),d=12*(this.year()-a.year())+(this.month()-a.month()),d+=(this-e(this).startOf("month")-(a-e(a).startOf("month")))/g,d-=6E4*(this.zone()-e(this).startOf("month").zone()-(a.zone()-e(a).startOf("month").zone()))/
g,"year"===b&&(d/=12)):(g=this-a,d="second"===b?g/1E3:"minute"===b?g/6E4:"hour"===b?g/36E5:"day"===b?(g-d)/864E5:"week"===b?(g-d)/6048E5:g);return c?d:v(d)},from:function(a,b){return e.duration(this.diff(a)).lang(this.lang()._abbr).humanize(!b)},fromNow:function(a){return this.from(e(),a)},calendar:function(){var a=N(e(),this).startOf("day"),a=this.diff(a,"days",!0);return this.format(this.lang().calendar(-6>a?"sameElse":-1>a?"lastWeek":0>a?"lastDay":1>a?"sameDay":2>a?"nextDay":7>a?"nextWeek":"sameElse",
this))},isLeapYear:function(){return L(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=na(a,this.lang()),this.add({d:a-b})):b},month:u("Month",!0),startOf:function(a){a=r(a);switch(a){case "year":this.month(0);case "quarter":case "month":this.date(1);case "week":case "isoWeek":case "day":this.hours(0);case "hour":this.minutes(0);case "minute":this.seconds(0);
case "second":this.milliseconds(0)}"week"===a?this.weekday(0):"isoWeek"===a&&this.isoWeekday(1);"quarter"===a&&this.month(3*Math.floor(this.month()/3));return this},endOf:function(a){a=r(a);return this.startOf(a).add("isoWeek"===a?"week":a,1).subtract("ms",1)},isAfter:function(a,b){b="undefined"!==typeof b?b:"millisecond";return+this.clone().startOf(b)>+e(a).startOf(b)},isBefore:function(a,b){b="undefined"!==typeof b?b:"millisecond";return+this.clone().startOf(b)<+e(a).startOf(b)},isSame:function(a,
b){b=b||"ms";return+this.clone().startOf(b)===+N(a,this).startOf(b)},min:function(a){a=e.apply(null,arguments);return a<this?this:a},max:function(a){a=e.apply(null,arguments);return a>this?this:a},zone:function(a,b){var c=this._offset||0;if(null!=a)"string"===typeof a&&(a=la(a)),16>Math.abs(a)&&(a*=60),this._offset=a,this._isUTC=!0,c!==a&&(!b||this._changeInProgress?I(this,e.duration(c-a,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,e.updateOffset(this,!0),this._changeInProgress=null));
else return this._isUTC?c:this._d.getTimezoneOffset();return this},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){this._tzm?this.zone(this._tzm):"string"===typeof this._i&&this.zone(this._i);return this},hasAlignedHourOffset:function(a){a=a?e(a).zone():0;return 0===(this.zone()-a)%60},daysInMonth:function(){return K(this.year(),this.month())},dayOfYear:function(a){var b=y((e(this).startOf("day")-e(this).startOf("year"))/
864E5)+1;return null==a?b:this.add("d",a-b)},quarter:function(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)},weekYear:function(a){var b=B(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==a?b:this.add("y",a-b)},isoWeekYear:function(a){var b=B(this,1,4).year;return null==a?b:this.add("y",a-b)},week:function(a){var b=this.lang().week(this);return null==a?b:this.add("d",7*(a-b))},isoWeek:function(a){var b=B(this,1,4).week;return null==a?b:this.add("d",
7*(a-b))},weekday:function(a){var b=(this.day()+7-this.lang()._week.dow)%7;return null==a?b:this.add("d",a-b)},isoWeekday:function(a){return null==a?this.day()||7:this.day(this.day()%7?a:a-7)},isoWeeksInYear:function(){return da(this.year(),1,4)},weeksInYear:function(){var a=this._lang._week;return da(this.year(),a.dow,a.doy)},get:function(a){a=r(a);return this[a]()},set:function(a,b){a=r(a);if("function"===typeof this[a])this[a](b);return this},lang:function(a){if(void 0===a)return this._lang;this._lang=
q(a);return this}});e.fn.millisecond=e.fn.milliseconds=u("Milliseconds",!1);e.fn.second=e.fn.seconds=u("Seconds",!1);e.fn.minute=e.fn.minutes=u("Minutes",!1);e.fn.hour=e.fn.hours=u("Hours",!0);e.fn.date=u("Date",!0);e.fn.dates=z("dates accessor is deprecated. Use date instead.",u("Date",!0));e.fn.year=u("FullYear",!0);e.fn.years=z("years accessor is deprecated. Use year instead.",u("FullYear",!0));e.fn.days=e.fn.day;e.fn.months=e.fn.month;e.fn.weeks=e.fn.week;e.fn.isoWeeks=e.fn.isoWeek;e.fn.quarters=
e.fn.quarter;e.fn.toJSON=e.fn.toISOString;l(e.duration.fn=G.prototype,{_bubble:function(){var a=this._milliseconds,b=this._days,c=this._months,d=this._data;d.milliseconds=a%1E3;a=v(a/1E3);d.seconds=a%60;a=v(a/60);d.minutes=a%60;a=v(a/60);d.hours=a%24;b+=v(a/24);d.days=b%30;c+=v(b/30);d.months=c%12;b=v(c/12);d.years=b},weeks:function(){return v(this.days()/7)},valueOf:function(){return this._milliseconds+864E5*this._days+2592E6*(this._months%12)+31536E6*i(this._months/12)},humanize:function(a){var b=
+this,c;c=!a;var d=this.lang(),e=y(Math.abs(b)/1E3),f=y(e/60),h=y(f/60),i=y(h/24),j=y(i/365),e=45>e&&["s",e]||1===f&&["m"]||45>f&&["mm",f]||1===h&&["h"]||22>h&&["hh",h]||1===i&&["d"]||25>=i&&["dd",i]||45>=i&&["M"]||345>i&&["MM",y(i/30)]||1===j&&["y"]||["yy",j];e[2]=c;e[3]=0<b;e[4]=d;c=Na.apply({},e);a&&(c=this.lang().pastFuture(b,c));return this.lang().postformat(c)},add:function(a,b){var c=e.duration(a,b);this._milliseconds+=c._milliseconds;this._days+=c._days;this._months+=c._months;this._bubble();
return this},subtract:function(a,b){var c=e.duration(a,b);this._milliseconds-=c._milliseconds;this._days-=c._days;this._months-=c._months;this._bubble();return this},get:function(a){a=r(a);return this[a.toLowerCase()+"s"]()},as:function(a){a=r(a);return this["as"+a.charAt(0).toUpperCase()+a.slice(1)+"s"]()},lang:e.fn.lang,toIsoString:function(){var a=Math.abs(this.years()),b=Math.abs(this.months()),c=Math.abs(this.days()),d=Math.abs(this.hours()),e=Math.abs(this.minutes()),f=Math.abs(this.seconds()+
this.milliseconds()/1E3);return!this.asSeconds()?"P0D":(0>this.asSeconds()?"-":"")+"P"+(a?a+"Y":"")+(b?b+"M":"")+(c?c+"D":"")+(d||e||f?"T":"")+(d?d+"H":"")+(e?e+"M":"")+(f?f+"S":"")}});for(k in W)W.hasOwnProperty(k)&&(qa(k,W[k]),Qa(k.toLowerCase()));qa("Weeks",6048E5);e.duration.fn.asMonths=function(){return(+this-31536E6*this.years())/2592E6+12*this.years()};e.lang("en",{ordinal:function(a){var b=a%10,b=1===i(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+b}});"undefined"===typeof ender&&
(Ra.moment=e)});;
;
/* module-key = 'jira.webresources:momentjs', location = '/static/lib/moment/moment.lib.js' */
define("jira/moment/moment.lib",["atlassian/libs/moment-2.6.0"],function(n){return n});;
;
/* module-key = 'jira.webresources:momentjs', location = '/static/lib/moment/moment.jira.formatter.js' */
define("jira/moment/moment.jira.formatter",["underscore","exports"],function(t,e){"use strict";function r(e){return u[e]||t.reduce(e,function(t,e){return t+(u[e]||e)},"")}function n(e){var n=!1,u=!1,a="",o=t.reduce(e,function(t,e,o,i){return u?u=!1:"'"===e?(a&&(t+=r(a),a=""),"'"===i[o+1]?(t+=e,u=!0):(t+=n?"]":"[",n=!n)):n?t+=e:/[a-zA-Z]/.test(e)?a&&a[a.length-1]!==e?(t+=r(a),a=e):a+=e:(a&&(t+=r(a),a=""),t+=e),t},"");return a&&(o+=r(a)),o}var u={d:"D",y:"Y",a:"A",E:"d",u:"d",Z:"ZZ",z:"[GMT]ZZ",XX:"ZZ",XXX:"Z"};e.translateSimpleDateFormat=n});;
;
/* module-key = 'jira.webresources:momentjs', location = '/static/lib/moment/moment.jira.i18n.js' */
define("jira/moment/moment.jira.i18n",["jira/moment/moment.lib","jira/moment/moment.jira.formatter","jira/util/formatter","jira/util/data/meta","wrm/data"],function(e,t,a,m,o){"use strict";var r=o.claim("jira.webresources:dateFormatProvider.dateFormat");e.lang("jira",{months:r.months,monthsShort:r.monthsShort,weekdays:r.weekdays,weekdaysShort:r.weekdaysShort,weekdaysMin:r.weekdaysShort,longDateFormat:{LT:t.translateSimpleDateFormat(m.get("date-time")),L:t.translateSimpleDateFormat(m.get("date-day")),LL:t.translateSimpleDateFormat(m.get("date-dmy")),LLL:t.translateSimpleDateFormat(m.get("date-complete"))},meridiem:function(e){return r.meridiem[+(e>11)]},calendar:{sameDay:"LLL",nextDay:"LLL",nextWeek:"LLL",lastDay:"LLL",lastWeek:"LLL",sameElse:"LLL"},relativeTime:{future:a.format("in {0}","%s"),past:a.format("{0} ago","%s"),s:"a few seconds",m:"a minute",mm:a.format("{0} minutes","%d"),h:"an hour",hh:a.format("{0} hours","%d"),d:"a day",dd:a.format("{0} days","%d"),M:"a month",MM:a.format("{0} months","%d"),y:"a year",yy:a.format("{0} years","%d")}})});;
;
/* module-key = 'jira.webresources:momentjs', location = '/static/lib/moment/moment.js' */
define("jira/moment",["jira/moment/moment.lib","jira/moment/moment.jira.i18n"],function(t,n){return t.splitDate=function(t,n){return Date.splitDate(t,n)},t});;
;
/* module-key = 'jira.webresources:momentjs', location = '/static/lib/moment/moment.legacy.js' */
!function(){AJS.namespace("JIRA.translateSimpleDateFormat",null,require("jira/moment/moment.jira.formatter").translateSimpleDateFormat),AJS.namespace("window.moment",null,require("jira/moment"))}();;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:shared-utility', location = 'jira-dnd-attachment-module/js/ctrlv/time.js' */
define("dndattachment/ctrlv/time",[],function(){"use strict";return moment});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:shared-utility', location = 'jira-dnd-attachment-module/js/ctrlv/base64decode.js' */
define("dndattachment/ctrlv/base64decode",["exports"],function(e){"use strict";function n(e){return e>64&&e<91?e-65:e>96&&e<123?e-71:e>47&&e<58?e+4:43===e?62:47===e?63:0}var r=function(e){for(var r,t,a=e.replace(/[^A-Za-z0-9\+\/]/g,""),c=a.length,i=3*c+1>>2,d=new Uint8Array(i),o=0,s=0,f=0;f<c;f++)if(t=3&f,o|=n(a.charCodeAt(f))<<18-6*t,3===t||c-f===1){for(r=0;r<3&&s<i;r++,s++)d[s]=o>>>(16>>>r&24)&255;o=0}return d};e.base64decode=r,e.decodeBase64DataUri=function(e){var n=";base64,",t=e.slice(0,e.indexOf(n))+n,a=e.substring(t.length);return r(a)}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:shared-utility', location = 'jira-dnd-attachment-module/js/ctrlv/utility.js' */
define("dndattachment/ctrlv/utility",["jquery","underscore","dndattachment/ctrlv/base64decode","dndattachment/ctrlv/time","jira/flag","jira/util/navigator","exports"],function(t,e,n,a,i,r,o){"use strict";o.isKeyPasteEvent=function(t,e){var n=86,a=(e||"").indexOf("Mac")!==-1||r.isMac();return t.which===n&&(a?t.metaKey:t.ctrlKey)},o.isImagePasteEvent=function(t){if(t&&t.clipboardData){var n=e.union(e.toArray(t.clipboardData.items),e.toArray(t.clipboardData.files)),a=n.some(function(t){return t.type.indexOf("image")!==-1}),i=n.some(function(t){return t.type.indexOf("rtf")!==-1});return a&&!i}};var s=function(t){if(t.clipboardData&&t.clipboardData.types&&e.contains(t.clipboardData.types,"text/html")){var n=t.clipboardData.getData("text/html"),a=new DOMParser,i=a.parseFromString(n,"text/html"),r=i.body.querySelectorAll("img");return 1===r.length?r[0].getAttribute("src"):null}};o.getHtmlImagePaste=s,o.isHtmlImagePasteEvent=function(t){return null!=s(t)},o.isTextPasteEvent=function(t){return t.clipboardData.types&&(e.contains(t.clipboardData.types,"text/plain")||e.contains(t.clipboardData.types,"text/html"))},o.isContentEditable=function(e){return"true"==e.contentEditable||""==e.contentEditable||"inherit"==e.contentEditable&&t(e).parents().is("[contenteditable=true]")},o.isValidFileName=function(t){return!e(["\\","/",'"',":","?","*","<","|",">","!"]).any(function(e){return t.indexOf(e)>-1})},o.getTextPasteContent=function(t){return t.clipboardData.types&&e.contains(t.clipboardData.types,"text/plain")&&t.clipboardData.getData("text/plain")||""},o.getTextContent=function(e){return e?r.isIE()&&"undefined"!=typeof e.innerText?e.innerText:t(e).text():""},o.normalizePasteEvent=function(t){return t&&t.originalEvent&&t.originalEvent.clipboardData&&(t.clipboardData=t.originalEvent.clipboardData),t&&!t.clipboardData&&window.clipboardData&&(t.clipboardData={files:window.clipboardData.files,types:{contains:function(t){if("text/plain"==t)return!!window.clipboardData.getData("Text")}},getData:function(t){if("text/plain"==t)return window.clipboardData.getData("Text")}}),t},o.browserIsSupported=function(e){var n=(e||"").indexOf("Mac")!==-1||r.isMac(),a=r.isSafari(),i=r.isIE();if(n&&a)return!1;if(i&&!r.isEdge()){var o=document.documentElement.className.split(/\s+/),s=t.inArray("msie-gt-10",o)>-1,l=t.inArray("msie-gt-11",o)>-1,u=i&&s&&!l;return u}return!0},o.browserIsNativePaste=function(){return r.isChrome()||r.isSafari()},o.isWikiTextfield=function(t){return t.is(":input")&&t.hasClass("wiki-textfield")};var l=function(t){return t.is("input#summary")},u=function(n,a,i,r){var s=t(a);if((o.isWikiTextfield(s)||l(s))&&n){s.is(":focus")||s.one("focus",function(){var t=s[0];t.selectionStart=t.selectionEnd=i+n.length});var u=s.val(),c=u.substring(0,i),d=u.substring(r,u.length),f=s.data("wikiEditor");f&&f.undoRedoEl&&e.isFunction(f.undoRedoEl.recordHistoryItem)&&f.undoRedoEl.recordHistoryItem(),s.val(c+n+d),s.trigger("input"),a.selectionStart=a.selectionEnd=i+n.length,f&&f.undoRedoEl&&e.isFunction(f.undoRedoEl.updateCurrent)&&f.undoRedoEl.updateCurrent()}};o.insertToInput=u,o.getMarkup=function(t){var n=["gif"],a=["bmp","jpeg","jpg","png"],i=t.split("."),r=i[i.length-1].toLowerCase();return e.contains(n,r)?"!"+t+"!":e.contains(a,r)?"!"+t+"|thumbnail!":"[^"+t+"]"},o.insertWikiMarkup=function(t,e,n,a){var i=o.getMarkup(t);i&&(i=" "+i+" ",u(i,e,n,a))},o.loadImage=function(e){var n=new t.Deferred,a=new Image;return a.setAttribute("crossOrigin","anonymous"),a.onload=function(){n.resolve(a)},a.onerror=n.reject.bind(n),a.src=e,a.width>0&&a.height>0&&n.resolve(a),n},o.convertImageToBlob=function(e){var a=t("<canvas>").attr("width",e.width).attr("height",e.height)[0];a.getContext("2d").drawImage(e,0,0);try{if(a.mozGetAsFile)return a.mozGetAsFile("image/png");if(a.toDataURL)return new Blob([n.decodeBase64DataUri(a.toDataURL("image/png"))],{type:"image/png"})}catch(t){return null}},o.convertBlobToImage=function(t,e){var n=new Blob([t.slice()],{type:t.type});return n.lastModifiedDate=new Date,n.name=e,n},o.dropFileToElement=function(e,n){var a=e.name;a||(a=this.generateFileName(),e.name=a+".png");var i=t.Event("drop",{dataTransfer:{files:[e]},isPasteEvent:!0}),r=!1;return t(document).on("dropHandled.dropFileToElement",function(){r=!0}),n.trigger(i),t(document).off(".dropFileToElement"),r},o.generateFileName=function(){return"image-"+a().format("YYYY-MM-DD-HH-mm-ss-SSS")},o.getCurrentIssueId=function(){return JIRA.Issues.Api.getSelectedIssueId()},o.showErrorMsg=function(t,e){i.showErrorMsg(t,e)},o.createBlobFromFile=function(t){var e=new Blob([t.slice()],{type:t.type});return e.name=t.name,e},o.dragEventContainsFiles=function(t){if(!t.dataTransfer||!t.dataTransfer.types)return!0;var n=t.dataTransfer.types;return r.isMozilla()?e.contains(n,"application/x-moz-file"):e.contains(n,"Files")}});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-issue-type-whitelist', location = 'jira-agile-module/includes/js/rapid/analytics/register-software-issue-types.js' */
function _defineProperty(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}require(["jira/analytics/transformers/issue-type"],function(e){var r,t=(r={},_defineProperty(r,"Story","Story"),_defineProperty(r,"Epic","Epic"),r);e.registerAll(t)});;
;
/* module-key = 'com.atlassian.plugin.jslibs:keymaster-1.6.2', location = 'libs/keymaster/1.6.2/keymaster-1.6.2.js' */
(function(e){define("atlassian/libs/keymaster-1.6.2",function(){var j={};e(j);return"undefined"!==typeof module?module.exports.noConflict():j.key.noConflict()})})(function(e){function j(a,b){for(var d=a.length;d--;)if(a[d]===b)return d;return-1}function v(a){var b,d,c,e,o,r;b=a.keyCode;-1==j(l,b)&&l.push(b);if(93==b||224==b)b=91;if(b in f)for(c in f[b]=!0,k)k[c]==b&&(m[c]=!0);else{for(g in f)f[g]=a[w[g]];if(m.filter.call(this,a)&&b in h){r=p();for(e=0;e<h[b].length;e++)if(d=h[b][e],d.scope==r||"all"==
d.scope){o=0<d.mods.length;for(c in f)if(!f[c]&&-1<j(d.mods,+c)||f[c]&&-1==j(d.mods,+c))o=!1;if((0==d.mods.length&&!f[16]&&!f[18]&&!f[17]&&!f[91]||o)&&!1===d.method(a,d))a.preventDefault?a.preventDefault():a.returnValue=!1,a.stopPropagation&&a.stopPropagation(),a.cancelBubble&&(a.cancelBubble=!0)}}}}function m(a,b,d){var c,e;c=s(a);void 0===d&&(d=b,b="all");for(var f=0;f<c.length;f++)e=[],a=c[f].split("+"),1<a.length&&(e=t(a),a=[a[a.length-1]]),a=a[0],a=n[a]||a.toUpperCase().charCodeAt(0),a in h||
(h[a]=[]),h[a].push({shortcut:c[f],scope:b,method:d,key:c[f],mods:e})}function p(){return u||"all"}function s(a){a=a.replace(/\s/g,"");a=a.split(",");""==a[a.length-1]&&(a[a.length-2]+=",");return a}function t(a){for(var a=a.slice(0,a.length-1),b=0;b<a.length;b++)a[b]=k[a[b]];return a}function q(a,b,d){a.addEventListener?a.addEventListener(b,d,!1):a.attachEvent&&a.attachEvent("on"+b,function(){d(window.event)})}var g,h={},f={16:!1,18:!1,17:!1,91:!1},u="all",k={"\u21e7":16,shift:16,"\u2325":18,alt:18,
option:18,"\u2303":17,ctrl:17,control:17,"\u2318":91,command:91},n={backspace:8,tab:9,clear:12,enter:13,"return":13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,"delete":46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},l=[];for(g=1;20>g;g++)n["f"+g]=111+g;var w={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};for(g in k)m[g]=!1;q(document,"keydown",function(a){v(a)});q(document,"keyup",function(a){var a=
a.keyCode,b,d=j(l,a);0<=d&&l.splice(d,1);if(93==a||224==a)a=91;if(a in f)for(b in f[a]=!1,k)k[b]==a&&(m[b]=!1)});q(window,"focus",function(){for(g in f)f[g]=!1;for(g in k)m[g]=!1});var x=e.key;e.key=m;e.key.setScope=function(a){u=a||"all"};e.key.getScope=p;e.key.deleteScope=function(a){var b,d,c;for(b in h){d=h[b];for(c=0;c<d.length;)d[c].scope===a?d.splice(c,1):c++}};e.key.filter=function(a){a=(a.target||a.srcElement).tagName;return!("INPUT"==a||"SELECT"==a||"TEXTAREA"==a)};e.key.isPressed=function(a){"string"==
typeof a&&(a=n[a]||a.toUpperCase().charCodeAt(0));return-1!=j(l,a)};e.key.getPressedKeyCodes=function(){return l.slice(0)};e.key.noConflict=function(){var a=e.key;e.key=x;return a};e.key.unbind=function(a,b){var d,c,e=[],f,g;d=s(a);for(g=0;g<d.length;g++){c=d[g].split("+");1<c.length&&(e=t(c),a=c[c.length-1]);a=n[a]||a.toUpperCase().charCodeAt(0);void 0===b&&(b=p());if(!h[a])break;for(f in h[a]){c=h[a][f];var i;if(i=c.scope===b)a:if(c=c.mods,c.length!=e.length)i=!1;else{for(i=0;i<c.length;i++)if(c[i]!==
e[i]){i=!1;break a}i=!0}i&&(h[a][f]={})}}};"undefined"!==typeof module&&(module.exports=e.key)});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-utility', location = 'jira-dnd-attachment-module/js/util/Configuration.js' */
define("dndattachment/util/Configuration",["underscore"],function(n){function t(t){return n.isFunction(WRM.data)?WRM.data(t):WRM.data.claim(t)}var a="com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone.";return{getWRM:n.memoize(function(n){return t(a+n)})}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-utility', location = 'jira-dnd-attachment-module/js/util/DataTransfer.js' */
define("dndattachment/util/DataTransfer",["jquery"],function(e){return Class.extend({init:function(e){this._dataTransfer=e},getFiles:function(){var n=this._dataTransfer.files,r=this._dataTransfer.items;return r&&r.length>0&&_.any(r,function(e){return!!e.webkitGetAsEntry})?this.readEntries(r):n&&n.length>0?this.readFiles(this._dataTransfer.files):(new e.Deferred).reject()},readFiles:function(n){var r=new e.Deferred;return e.when.apply(window,_.map(n,function(r){var t=new e.Deferred,i=!r.name.match(/\.([a-z0-9]+)$/i);return i&&r.size<=8192||8192==r.size||4096==r.size||r.size<=1024?this.readFileAsText(r).fail(function(){n=_(n).without(r)}).always(t.resolve.bind(t)):t.resolve(),t}.bind(this))).always(function(){r.resolve(n)}),r},readFileAsText:function(n){var r=new e.Deferred,t=new FileReader;return t.onload=function(){r.resolve(this.result)},t.onerror=function(){r.reject(this.error)},t.readAsText(n),r},readEntries:function(n){var r=new e.Deferred;return n=_.filter(n,function(e){return"file"===e.kind}),e.when.apply(window,_.map(n,function(e){return this.readEntry(e.webkitGetAsEntry(),e)}.bind(this))).then(function(){r.resolve(_.union.apply(_,arguments))},r.reject.bind(r)),r},readEntry:function(n,r){var t=new e.Deferred;return n.isFile?r&&r.getAsFile?t.resolve([r.getAsFile()]):n.file(function(e){t.resolve([e])}):n.isDirectory&&n.createReader().readEntries(function(n){var r=[];e.when.apply(window,_.map(n,function(e){return this.readEntry(e).then(function(e){return r.push.apply(r,e)})}.bind(this))).always(function(){t.resolve(r)})}.bind(this)),t}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-utility', location = 'jira-dnd-attachment-module/js/util/FileSizeUtil.js' */
define("dndattachment/util/FileSizeUtil",function(){function n(n){return n>u?t(n):n>i?r(n):e(n)}function t(n){var t=n/u;return t.toFixed(2)+a}function r(n){var t=Math.round(n/i);return t+o}function e(n){var t=n/i;return t.toFixed(1)+o}var i=1024,u=i*i,o=" kB",a=" MB";return{format:n}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-utility', location = 'jira-dnd-attachment-module/js/util/AttachmentEvents.js' */
define("dndattachment/util/events/types",{ATTACHMENT_FOR_PAGE_RECEIVED:"attachmentForPageReceived"});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-upload', location = 'jira-dnd-attachment-module/js/upload/UploadHandler.js' */
define("dndattachment/upload/handler",["jira/util/events","dndattachment/util/events/types","underscore","jquery","dndattachment/ctrlv/utility","exports","dndattachment/upload/default/executor"],function(e,t,n,i,a,r,o){var u,l,s=[],c=function(e,t){return n.find(s,function(n){return n.isValid(e,t)})},f=function(e,t){var r=i.Deferred(),o=JIRA.Dialog.current;if(o){AJS.trigger("analytics",{name:"attach.screenshot.html5.dialogPaste",data:{}});var l=a.createBlobFromFile(t.files[0]);a.dropFileToElement(l,o.$form)&&r.resolve([t.files[0].name])}else{var s=c(e,t);s&&(r=s.processFiles(t.files,u),t.successCallback&&r.done(t.successCallback),t.failureCallback&&r.fail(t.failureCallback),t.alwaysCallback&&r.always(t.alwaysCallback))}r.done(function(e,r){if(!r&&t.isWikiTextfieldFocused){var u=t.wikiTextfield;n.each(e,function(e){a.insertWikiMarkup(e,u,u.selectionStart,u.selectionStart)}),o&&t.isPaste&&AJS.trigger("analytics",{name:"attach.screenshot.html5.dialogPaste.insertWikiMarkup",data:{}}),i(t.wikiTextfield).is(":focus")||setTimeout(function(){t.wikiTextfield.focus()},0)}})},d=function(e){if(e){var t="undefined"!=typeof e.isValid,n="undefined"!=typeof e.processFiles,i="undefined"!=typeof e.weight,a="undefined"!=typeof e.name;return t&&n&&i&&a}return!1};r.registerExecutor=function(e){var t=d(e);if(t){var i=n.reject(s,function(t){return t.name===e.name});i.push(e),s=n.sortBy(i,function(e){return-e.weight})}return t},r.unregisterExecutor=function(e){s=n.reject(s,function(t){return t.name===e.name})},r.initialize=function(){e.bind(t.ATTACHMENT_FOR_PAGE_RECEIVED,f)},r.disable=function(){e.unbind(t.ATTACHMENT_FOR_PAGE_RECEIVED,f)},r.setAttachmentDropZone=function(e){u=e,this.setCurrentDropZone(e)},r.isDefaultExecutor=function(e){var t=c(null,e);return t&&t.name===o.name},r.setCurrentDropZone=function(e){l=e},r.doUpload=function(e){return!(!l||!l.browseFilesAndUpload)&&l.browseFilesAndUpload(i.Event("upload"),e)},r.disconnectCurrentDropZone=function(){l=u}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-upload', location = 'jira-dnd-attachment-module/js/upload/DefaultUploadExecutor.js' */
define("dndattachment/upload/default/executor",["jquery","underscore","dndattachment/ctrlv/utility","exports"],function(t,e,n,u){u.name="Default attachment executor",u.weight=0,u.isValid=function(t,e){return!0},u.processFiles=function(t,e){return e.uploadFiles(t)}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:attachments-api', location = 'jira-dnd-attachment-module/js/AttachmentsAPI.js' */
define("jira/attachments/api",["dndattachment/upload/handler"],function(n){return{doUpload:function(a){return n.doUpload(a)}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = 'jira-wiki-editor-module/js/wrappers/aui.js' */
define('wiki-edit/aui', function () {
    return AJS;
});
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = 'jira-wiki-editor-module/js/wrappers/jira.js' */
define('wiki-edit/JIRA', function () {
    return JIRA;
});
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = 'jira-wiki-editor-module/js/wrappers/keymaster.js' */
define('wiki-edit/keymaster', ["wiki-edit/aui", "atlassian/libs/keymaster-1.6.2"], function (AJS, keymaster) {
    if (AJS.Meta.get("keyboard-shortcuts-enabled") === false) {
        return function keyMasterNoop() {};
    }
    return keymaster;
});
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = 'jira-wiki-editor-module/templates/wiki-editor.soy' */
// This file was automatically generated from wiki-editor.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.Plugins.WikiEditor.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.Plugins == 'undefined') { JIRA.Templates.Plugins = {}; }
if (typeof JIRA.Templates.Plugins.WikiEditor == 'undefined') { JIRA.Templates.Plugins.WikiEditor = {}; }


JIRA.Templates.Plugins.WikiEditor.renderEditor = function(opt_data, opt_ignored) {
  var output = '<div id="wiki-edit-dropdown2-text-style-' + soy.$$escapeHtml(opt_data.editorId) + '" class="aui-dropdown2 aui-style-default wiki-edit-dropdown"><div class="aui-dropdown2-section"><ul class="aui-list-truncate"><li><a href="#" class="wiki-edit-operation" data-operation="paragraph" title="' + soy.$$escapeHtml('Paragraph') + '">' + soy.$$escapeHtml('Paragraph') + '</a></li><li><a href="#" class="wiki-edit-operation wiki-edit-operation-h1" data-operation="h1" title="' + soy.$$escapeHtml('Heading 1') + '">' + soy.$$escapeHtml('Heading 1') + '</a></li><li><a href="#" class="wiki-edit-operation wiki-edit-operation-h2" data-operation="h2" title="' + soy.$$escapeHtml('Heading 2') + '">' + soy.$$escapeHtml('Heading 2') + '</a></li><li><a href="#" class="wiki-edit-operation wiki-edit-operation-h3" data-operation="h3" title="' + soy.$$escapeHtml('Heading 3') + '">' + soy.$$escapeHtml('Heading 3') + '</a></li><li><a href="#" class="wiki-edit-operation wiki-edit-operation-h4" data-operation="h4" title="' + soy.$$escapeHtml('Heading 4') + '">' + soy.$$escapeHtml('Heading 4') + '</a></li><li><a href="#" class="wiki-edit-operation wiki-edit-operation-h5" data-operation="h5" title="' + soy.$$escapeHtml('Heading 5') + '">' + soy.$$escapeHtml('Heading 5') + '</a></li><li><a href="#" class="wiki-edit-operation wiki-edit-operation-h6" data-operation="h6" title="' + soy.$$escapeHtml('Heading 6') + '">' + soy.$$escapeHtml('Heading 6') + '</a></li><li><a href="#" class="wiki-edit-operation wiki-edit-operation-monospace" data-operation="monospace" title="' + soy.$$escapeHtml('Preformatted') + '">' + soy.$$escapeHtml('Preformatted') + '</a></li><li><a href="#" class="wiki-edit-operation" data-operation="paragraph-quote" title="' + soy.$$escapeHtml('Paragraph quote') + '">' + soy.$$escapeHtml('Paragraph quote') + '</a></li><li><a href="#" class="wiki-edit-operation" data-operation="block-quote" title="' + soy.$$escapeHtml('Block quote') + '">' + soy.$$escapeHtml('Block quote') + '</a></li></ul></div></div><div id="wiki-edit-dropdown2-more-' + soy.$$escapeHtml(opt_data.editorId) + '" class="aui-dropdown2 aui-style-default wiki-edit-dropdown"><div class="aui-dropdown2-section"><ul class="aui-list-truncate"><li><a href="#" class="wiki-edit-operation" data-operation="delete" data-shortcut="ctrl+shift+s, command+shift+s" title="' + soy.$$escapeHtml('Strikethrough') + ' (' + soy.$$escapeHtml(opt_data.controlKey) + '+Shift+S)">' + soy.$$escapeHtml('Strikethrough') + '</a></li><li><a href="#" class="wiki-edit-operation" data-operation="superscript">' + soy.$$escapeHtml('Superscript') + '</a></li><li><a href="#" class="wiki-edit-operation" data-operation="subscript">' + soy.$$escapeHtml('Subscript') + '</a></li><li><a href="#" class="wiki-edit-operation" data-operation="cite">' + soy.$$escapeHtml('Citation') + '</a></li></ul></div></div><div id="wiki-edit-dropdown2-link-' + soy.$$escapeHtml(opt_data.editorId) + '" class="aui-dropdown2 aui-style-default wiki-edit-dropdown wiki-edit-dropdown-link"><div class="aui-dropdown2-section"><ul class="aui-list-truncate"><li><a href="#" class="wiki-edit-operation" data-operation="link" data-shortcut="ctrl+k, command+k" title="' + soy.$$escapeHtml('External link') + ' (' + soy.$$escapeHtml(opt_data.controlKey) + '+K)">' + soy.$$escapeHtml('External link') + '</a></li><li><a href="#" class="wiki-edit-operation" data-operation="link-mail">' + soy.$$escapeHtml('Mail link') + '</a></li><li><a href="#" class="wiki-edit-operation" data-operation="link-anchor">' + soy.$$escapeHtml('Anchor link') + '</a></li></ul></div></div><div id="wiki-edit-dropdown2-attachment-' + soy.$$escapeHtml(opt_data.editorId) + '" class="aui-dropdown2 aui-style-default wiki-edit-dropdown wiki-edit-dropdown-attachment"><div class="aui-dropdown2-section wiki-edit-insert-attachment"><ul class="aui-list-truncate"><li><a href="#"></a></li></ul></div><div class="aui-dropdown2-section wiki-edit-browse-image"><ul class="aui-list-truncate"><li><a href="#" class="wiki-attachment-browse"><span class="aui-icon aui-icon-small aui-iconfont-add"></span>&nbsp;&nbsp;' + soy.$$escapeHtml('Browse') + '</a></li></ul></div></div><div id="wiki-edit-color-picker-' + soy.$$escapeHtml(opt_data.editorId) + '" class="aui-dropdown2 aui-style-default wiki-edit-picker wiki-edit-color-picker">';
  var colors__soy78 = ['333333', '707070', 'cccccc', '205081', '59afe1', '14892c', '8eb021', 'd04437', 'f79232', 'f6c342', '654982', 'f691b2'];
  output += '<div class="aui-dropdown2-section"><ul>';
  var colorList80 = colors__soy78;
  var colorListLen80 = colorList80.length;
  for (var colorIndex80 = 0; colorIndex80 < colorListLen80; colorIndex80++) {
    var colorData80 = colorList80[colorIndex80];
    output += '<li><a href="#" style="background-color: #' + soy.$$escapeHtml(colorData80) + '" data-operation="color" data-color="#' + soy.$$escapeHtml(colorData80) + '">&nbsp;</a></li>';
  }
  output += '</ul></div></div><div id="wiki-edit-dropdown2-icon-picker-' + soy.$$escapeHtml(opt_data.editorId) + '" class="aui-dropdown2 aui-style-default wiki-edit-picker wiki-edit-icon-picker"><div class="aui-dropdown2-section"><ul><li><a href="#" class="wiki-edit-operation" title=":)" data-operation=":)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/smile.gif" alt="' + soy.$$escapeHtml('smile') + '" /></a></li><li><a href="#" class="wiki-edit-operation" title=":(" data-operation=":("><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/sad.gif" alt="' + soy.$$escapeHtml('sad') + '" /></a></li><li><a href="#" class="wiki-edit-operation" title=":P" data-operation=":P"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/tongue.gif" alt="' + soy.$$escapeHtml('tongue') + '" /></a></li><li><a href="#" class="wiki-edit-operation" title=":D" data-operation=":D"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/biggrin.gif" alt="' + soy.$$escapeHtml('biggrin') + '" /></a></li><li><a href="#" class="wiki-edit-operation" title=";)" data-operation=";)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/wink.gif" alt="' + soy.$$escapeHtml('wink') + '" /></a></li><li><a href="#" class="wiki-edit-operation" title="(y)" data-operation="(y)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/thumbs_up.gif" alt="' + soy.$$escapeHtml('thumbs up') + '" /></a></li><li><a href="#" class="wiki-edit-operation" title="(n)" data-operation="(n)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/thumbs_down.gif" alt="' + soy.$$escapeHtml('thumbs down') + '" /></a></li><li><a href="#" class="wiki-edit-operation" title="(i)" data-operation="(i)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/information.gif" alt="' + soy.$$escapeHtml('information') + '" /></a></li><li><a href="#" class="wiki-edit-operation" title="(/)" data-operation="(/)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/check.gif" alt="' + soy.$$escapeHtml('check') + '" /></a></li><li><a href="#" class="wiki-edit-operation" title="(x)" data-operation="(x)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/error.gif" alt="' + soy.$$escapeHtml('error') + '" /></a></li><li><a href="#" class="wiki-edit-operation" title="(!)" data-operation="(!)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/warning.gif" alt="' + soy.$$escapeHtml('warning') + '" /></a></li><li><a href="#" class="wiki-edit-operation" title="(+)" data-operation="(+)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/add.gif" alt="' + soy.$$escapeHtml('add') + '" /></a></li><li><a href="#" class="wiki-edit-operation" title="(-)" data-operation="(-)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/forbidden.gif" alt="' + soy.$$escapeHtml('forbidden') + '" /></a></li><li><a href="#" class="wiki-edit-operation" title="(?)" data-operation="(?)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/help_16.gif" alt="' + soy.$$escapeHtml('help') + '" /></a></li><li><a href="#" class="wiki-edit-operation" title="(on)" data-operation="(on)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/lightbulb_on.gif" alt="' + soy.$$escapeHtml('lightbulb on') + '" /></a></li><li><a href="#" class="wiki-edit-operation" title="(off)" data-operation="(off)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/lightbulb.gif" alt="' + soy.$$escapeHtml('lightbulb') + '" /></a></li><li><a href="#" class="wiki-edit-operation" title="(*)" data-operation="(*)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/star_yellow.gif" alt="' + soy.$$escapeHtml('star yellow') + '" /></a></li><li><a href="#" class="wiki-edit-operation" title="(*r)" data-operation="(*r)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/star_red.gif" alt="' + soy.$$escapeHtml('star red') + '" /></a></li><li><a href="#" class="wiki-edit-operation" title="(*g)" data-operation="(*g)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/star_green.gif" alt="' + soy.$$escapeHtml('star green') + '" /></a></li><li><a href="#" class="wiki-edit-operation" title="(*b)" data-operation="(*b)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/star_blue.gif" alt="' + soy.$$escapeHtml('star blue') + '" /></a></li><li><a href="#" class="wiki-edit-operation" title="(*y)" data-operation="(*y)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/star_yellow.gif" alt="' + soy.$$escapeHtml('star yellow') + '" /></a></li><li><a href="#" class="wiki-edit-operation" title="(flag)" data-operation="(flag)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/flag.gif" alt="' + soy.$$escapeHtml('flag') + '" /></a></li><li><a href="#" class="wiki-edit-operation" title="(flagoff)" data-operation="(flagoff)"><img src="' + soy.$$escapeHtml("") + '/images/icons/emoticons/flag_grey.gif" alt="' + soy.$$escapeHtml('flag off') + '" /></a></li></ul></div></div><div id="wiki-edit-dropdown2-other-' + soy.$$escapeHtml(opt_data.editorId) + '" class="aui-dropdown2 aui-style-default wiki-edit-dropdown"><div class="aui-dropdown2-section"><ul class="aui-list-truncate"><li><a href="#" class="wiki-edit-operation" data-operation="mention">' + soy.$$escapeHtml('User mention') + '</a></li><li><a href="#" class="wiki-edit-operation" data-operation="table">' + soy.$$escapeHtml('Table') + '</a></li><li><a href="#" class="wiki-edit-operation" data-operation="code">' + soy.$$escapeHtml('Code') + '</a></li><li><a href="#" class="wiki-edit-operation" data-operation="noformat">' + soy.$$escapeHtml('Preformatted') + '</a></li><li><a href="#" class="wiki-edit-operation" data-operation="panel">' + soy.$$escapeHtml('Panel') + '</a></li><li><a href="#" class="wiki-edit-operation" data-operation="hr">' + soy.$$escapeHtml('Horizontal ruler') + '</a></li><li class="wiki-edit-speech-item hidden"><a href="#" class="wiki-edit-operation" data-operation="speech">' + soy.$$escapeHtml('Speech recognition') + '</a></li></ul></div></div><div class="wiki-edit-toolbar" id="wiki-edit-' + soy.$$escapeHtml(opt_data.editorId) + '"><div class="aui-toolbar2"><div class="aui-toolbar2-inner"><div class="aui-toolbar2-primary"><div class="aui-buttons"><a href="#" tabindex="-1" class="aui-button aui-button-subtle aui-dropdown2-trigger wiki-edit-style-picker-trigger" aria-owns="wiki-edit-dropdown2-text-style-' + soy.$$escapeHtml(opt_data.editorId) + '" aria-haspopup="true" aria-controls="wiki-edit-dropdown2-text-style-' + soy.$$escapeHtml(opt_data.editorId) + '">' + soy.$$escapeHtml('Style') + '</a></div><div class="aui-buttons wiki-edit-toolbar-section"><a href="#" tabindex="-1" class="aui-button aui-button-subtle wiki-edit-operation" data-operation="bold" data-shortcut="ctrl+b, command+b" title="' + soy.$$escapeHtml('Bold') + ' (' + soy.$$escapeHtml(opt_data.controlKey) + '+B)"><span class="aui-icon aui-icon-small aui-iconfont-editor-bold">' + soy.$$escapeHtml('Bold') + '</span></a><a href="#" tabindex="-1" class="aui-button aui-button-subtle wiki-edit-operation" data-operation="italic" data-shortcut="ctrl+i, command+i" title="' + soy.$$escapeHtml('Italic') + ' (' + soy.$$escapeHtml(opt_data.controlKey) + '+I)"><span class="aui-icon aui-icon-small aui-iconfont-editor-italic">' + soy.$$escapeHtml('Italic') + '</span></a><a href="#" tabindex="-1" class="aui-button aui-button-subtle wiki-edit-operation" data-operation="underline" data-shortcut="ctrl+u, command+u" title="' + soy.$$escapeHtml('Underline') + ' (' + soy.$$escapeHtml(opt_data.controlKey) + '+U)"><span class="aui-icon aui-icon-small aui-iconfont-editor-underline">' + soy.$$escapeHtml('Underline') + '</span></a><a href="#" tabindex="-1" class="aui-button aui-button-subtle wiki-edit-operation wiki-edit-operation-color" data-operation="color" data-color="red" title="' + soy.$$escapeHtml('Text color') + '"><span class="aui-icon aui-icon-small aui-iconfont-editor-color">' + soy.$$escapeHtml('Text color') + '</span><span class="wiki-edit-color-indicator"></span></a><a href="#" tabindex="-1" class="aui-button aui-button-subtle aui-dropdown2-trigger wiki-edit-color-picker-trigger" data-operation="color-parameter" aria-owns="wiki-edit-color-picker-' + soy.$$escapeHtml(opt_data.editorId) + '" aria-haspopup="true" title="' + soy.$$escapeHtml('More colors') + '"><span>' + soy.$$escapeHtml('More colors') + '</span></a><a href="#" tabindex="-1" class="aui-button aui-button-subtle aui-dropdown2-trigger wiki-edit-more-picker-trigger" aria-owns="wiki-edit-dropdown2-more-' + soy.$$escapeHtml(opt_data.editorId) + '" aria-haspopup="true" aria-controls="wiki-edit-dropdown2-more-' + soy.$$escapeHtml(opt_data.editorId) + '" title="' + soy.$$escapeHtml('More') + '"><span class="aui-icon aui-icon-small aui-iconfont-editor-styles">' + soy.$$escapeHtml('More') + '</span></a></div><div class="aui-buttons"><a href="#" tabindex="-1" class="aui-button aui-button-subtle aui-dropdown2-trigger wiki-edit-link-picker-trigger" aria-owns="wiki-edit-dropdown2-link-' + soy.$$escapeHtml(opt_data.editorId) + '" aria-haspopup="true" aria-controls="wiki-edit-dropdown2-link-' + soy.$$escapeHtml(opt_data.editorId) + '" title="' + soy.$$escapeHtml('Link') + ' (' + soy.$$escapeHtml(opt_data.controlKey) + '+K)"><span class="aui-icon aui-icon-small aui-iconfont-link">' + soy.$$escapeHtml('Link') + '</span></a><a href="#" tabindex="-1" class="aui-button aui-button-subtle aui-dropdown2-trigger wiki-edit-attachment-picker-trigger" aria-owns="wiki-edit-dropdown2-attachment-' + soy.$$escapeHtml(opt_data.editorId) + '" aria-haspopup="true" aria-controls="wiki-edit-dropdown2-attachment-' + soy.$$escapeHtml(opt_data.editorId) + '" title="' + soy.$$escapeHtml('Attachment') + '"><span class="aui-icon aui-icon-small aui-iconfont-file-generic">' + soy.$$escapeHtml('Attachment') + '</span></a></div><div class="aui-buttons wiki-edit-toolbar-section"><a href="#" tabindex="-1" class="aui-button aui-button-subtle wiki-edit-operation" data-operation="bullet-list" data-shortcut="ctrl+shift+b, command+shift+b" title="' + soy.$$escapeHtml('Bullet list') + ' (' + soy.$$escapeHtml(opt_data.controlKey) + '+Shift+B)"><span class="aui-icon aui-icon-small aui-iconfont-editor-list-bullet">' + soy.$$escapeHtml('Bullet list') + '</span></a><a href="#" tabindex="-1" class="aui-button aui-button-subtle wiki-edit-operation" data-operation="numbered-list" data-shortcut="ctrl+shift+n, command+shift+n" title="' + soy.$$escapeHtml('Numbered list') + ' (' + soy.$$escapeHtml(opt_data.controlKey) + '+Shift+N)"><span class="aui-icon aui-icon-small aui-iconfont-editor-list-number">' + soy.$$escapeHtml('Numbered list') + '</span></a></div><div class="aui-buttons"><a href="#" tabindex="-1" class="aui-button aui-button-subtle aui-dropdown2-trigger wiki-edit-icon-picker-trigger wiki-edit-tooltip" aria-owns="wiki-edit-dropdown2-icon-picker-' + soy.$$escapeHtml(opt_data.editorId) + '" aria-haspopup="true" aria-controls="wiki-edit-dropdown2-icon-picker-' + soy.$$escapeHtml(opt_data.editorId) + '" title="' + soy.$$escapeHtml('Icons') + '"><span class="aui-icon aui-icon-small aui-iconfont-editor-emoticon">' + soy.$$escapeHtml('Icons') + '</span></a><a href="#" tabindex="-1" class="aui-button aui-button-subtle aui-dropdown2-trigger wiki-edit-other-picker-trigger wiki-edit-tooltip" aria-owns="wiki-edit-dropdown2-other-' + soy.$$escapeHtml(opt_data.editorId) + '" aria-haspopup="true" aria-controls="wiki-edit-dropdown2-other-' + soy.$$escapeHtml(opt_data.editorId) + '" title="' + soy.$$escapeHtml('Other') + '"><span class="aui-icon aui-icon-small aui-iconfont-add">' + soy.$$escapeHtml('Other') + '</span></a></div><div class="aui-buttons wiki-edit-toolbar-last"><a href="#" tabindex="-1" class="aui-button aui-button-subtle wiki-edit-visible-toggle wiki-edit-tooltip" title="' + soy.$$escapeHtml('Toggle visibility') + '"><span class="aui-icon icon-toolbartoggle">Lock / Unlock</span></a></div></div></div><!-- .aui-toolbar-inner --></div></div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.Plugins.WikiEditor.renderEditor.soyTemplateName = 'JIRA.Templates.Plugins.WikiEditor.renderEditor';
}


JIRA.Templates.Plugins.WikiEditor.renderListItem = function(opt_data, opt_ignored) {
  return '<li><a href="#" ' + soy.$$escapeHtml(opt_data.attachmentType ? 'data-attachment-type=' + opt_data.attachmentType : '') + '><span class="wiki-edit-attachment-type-icon aui-icon aui-icon-small ' + soy.$$escapeHtml(((opt_data.attachmentTypeIcon == null) ? null : opt_data.attachmentTypeIcon.cssClass) != null ? ((opt_data.attachmentTypeIcon == null) ? null : opt_data.attachmentTypeIcon.cssClass) : 'aui-iconfont-file-txt') + '" title="' + soy.$$escapeHtml(((opt_data.attachmentTypeIcon == null) ? null : opt_data.attachmentTypeIcon.title) != null ? ((opt_data.attachmentTypeIcon == null) ? null : opt_data.attachmentTypeIcon.title) : 'File') + '"></span>&nbsp;&nbsp;<span class="wiki-edit-attachment-name">' + soy.$$escapeHtml(opt_data.text) + '</span></a></li>';
};
if (goog.DEBUG) {
  JIRA.Templates.Plugins.WikiEditor.renderListItem.soyTemplateName = 'JIRA.Templates.Plugins.WikiEditor.renderListItem';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = 'jira-wiki-editor-module/js/Analytics.js' */
define('wiki-edit/analytics', [
    'wiki-edit/aui'
], function (AJS) {

    var triggerEvent = (AJS.Analytics && AJS.Analytics.triggerPrivacyPolicySafeEvent) ?
        (function triggerEvent(name, props) {
            AJS.Analytics.triggerPrivacyPolicySafeEvent('jira.wikieditor.' + name, props || {});
        }) :
        (function triggerEvent(name, props) {
            AJS.trigger("analytics", {name: 'jira.wikieditor.' + name, data: props || {}});
        });

    function hashCode(string) {
        var charCode;
        var hash = 0;
        if (!string) {
            return "";
        }

        for (var i = 0; i < string.length; i += 1) {
            charCode = string.charCodeAt(i);
            hash = ((hash * 32) - hash) + charCode;
            hash |= 0; // force 32-bit representation
        }

        return hash;
    }

    return {
        trigger: triggerEvent,
        hashCode: hashCode
    };
});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = 'jira-wiki-editor-module/js/KeyTester.js' */
define('wiki-edit/KeyTester', function () {

    return {
        getActionType: function (keyCode) {
            if (this.isNavigation(keyCode)) {
                return "navigating";
            } else if (this.isDeleting(keyCode)) {
                return "deleting";
            } else if (this.isReturn(keyCode)) {
                return "newline";
            } else if (this.isEscape(keyCode)) {
                return "escape";
            } else if (this.isTyping(keyCode)) {
                return "typing";
            }
        },
        isNavigation: function (keyCode) {
            // 33 - 40: page up/dn and arrow keys
            // 63232 - 63235: page up/dn and arrow keys on safari
            return (keyCode >= 33 && keyCode <= 40) || (keyCode >= 63232 && keyCode <= 63235);
        },
        isDeleting: function (keyCode) {
            // 8 - backspace
            // 46 - delete
            // 127 - delete
            return (keyCode == 8 || keyCode == 46 || keyCode == 127);
        },
        isReturn: function (keyCode) {
            return (keyCode == 13);
        },
        isEscape: function (keyCode) {
            return (keyCode == 27);
        },
// not needed at this stage but left for possible later use
//        isSpacebar: function(keyCode) {
//            return keyCode == 32; // spacebar
//        },
        isTyping: function (keyCode) {
            return (keyCode > 47 && keyCode < 58) || // numbers
                (keyCode > 95 && keyCode < 112) || // numpad
                (keyCode > 64 && keyCode < 91) || // letters
                (keyCode > 185 && keyCode < 193) || // ;=,-./`
                (keyCode > 218 && keyCode < 223) || // [\]'
                keyCode == 32 || // spacebar
                keyCode == 13;                     // return

        }
    };

});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = 'jira-wiki-editor-module/js/UndoManager.js' */
define('wiki-edit/UndoManager', function () {

    /**
     * Simple undo/redo manager.
     * Basically the structure is like [---undoList---][CURRENT][---redoList---].
     * All operations move the current element on that "concatenated" list.
     */
    var UndoManager = function () {
        this._undoStack = [];
        this._redoStack = [];
        this._current = undefined;
    };

    UndoManager.prototype.MAX_STACK = 1000;
    /**
     * Sets the current state of the manager
     * @param {Anything} current - state
     * @param {Boolean} preserveRedo - if set to true existing redo entries will be preserved
     */
    UndoManager.prototype.updateCurrent = function (current, preserveRedo) {
        if (current != this._current) {
            this._current = current;
            if (!preserveRedo) {
                this._redoStack.length = 0; // reset the redo stack
            }
        }
    };

    /**
     * Add val to the undo stack and make it undoable
     * @param {Anything} val - state to be made undoable
     */
    UndoManager.prototype.push = function (val) {
        this._redoStack.length = 0; // reset the redo stack
        if (!this._undoStack.length || !_.isEqual(val, this._undoStack[this._undoStack.length - 1])) {
            this._undoStack.push(val);
            this._current = val;
        }
        if (this._undoStack.length > this.MAX_STACK) {
            this._undoStack.splice(0, this._undoStack.length - this.MAX_STACK)
        }
    };

    /**
     * Undo a value. Set it to be the current element and push the current element to the redo stack
     * @return {Anything} current value after the undo operation
     */
    UndoManager.prototype.undo = function () {
        if (!this.canUndo()) {
            return;
        }
        var val;
        do {
            val = this._undoStack.pop();
        } while (_.isEqual(val, this._current) && this.canUndo());
        this._redoStack.push(this._current);
        this._current = val;
        return val;
    };

    /**
     * Redo a value. Set it to be the current element and push the current element to the undo stack
     * @return {Anything} current value after the redo operation
     */
    UndoManager.prototype.redo = function () {
        if (!this.canRedo()) {
            return;
        }

        var val = this._redoStack.pop();
        this._undoStack.push(this._current);
        this._current = val;
        return val;
    };

    /**
     * Check if it is possible to undo
     * @return {Boolean}
     */
    UndoManager.prototype.canUndo = function () {
        return !!this._undoStack.length;
    };

    /**
     * Check if it is possible to redo
     * @return {Boolean}
     */
    UndoManager.prototype.canRedo = function () {
        return !!this._redoStack.length;
    };

    return UndoManager;
});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = 'jira-wiki-editor-module/js/UndoableTextarea.js' */
define('wiki-edit/UndoableTextarea', [
    'wiki-edit/UndoManager',
    'wiki-edit/KeyTester',
    'jquery'
], function (UndoManager,
             KeyTester,
             $) {

    var CUT_PASTE_MODE = "cut-paste";
    var _lastEditMode = "";

    function _setEditMode(context, newMode) {
        if (newMode === CUT_PASTE_MODE || _lastEditMode != newMode) {
            if (_lastEditMode != "newline") {
                context.recordHistoryItem();
            }
            _lastEditMode = newMode;
        }
    }

    function _manipulateHistory(context, stateName) {
        if (context.undoManager["can" + stateName[0].toUpperCase() + stateName.substring(1)]()) {
            var state = context.undoManager[stateName]();
            context.element.value = state.value;
            context.element.selectionStart = state.selectionStart;
            context.element.selectionEnd = state.selectionEnd;
        }
    }

    var UndoableTextarea = function UndoableTextarea(element) {
        this.element = element;
        this.$el = $(element);
        this.undoManager = new UndoManager();
        this.undoManager.updateCurrent(this.getValue());
        this.undoManager.push(this.getValue());

        var handleKeyboardInput = (function handleChange(e) {
            var keyCode = e.keyCode;
            var keyCodeChar = String.fromCharCode(keyCode);

            if (keyCode) {
                if (!e.ctrlKey && !e.metaKey) {
                    this.undoManager.updateCurrent(this.getValue());
                    _setEditMode(this, KeyTester.getActionType(keyCode));
                } else if ((e.ctrlKey || e.metaKey) && !e.altKey) {
                    switch (keyCodeChar.toLowerCase()) {
                        case "y":
                            this.undoManager.updateCurrent(this.getValue(), true);
                            this.redo();
                            e.preventDefault();
                            break;

                        case "z":
                            this.undoManager.updateCurrent(this.getValue(), true);
                            if (!e.shiftKey) {
                                this.undo();
                            } else {
                                this.redo();
                            }
                            e.preventDefault();
                            break;
                    }
                }
            } else {
                this.undoManager.updateCurrent(this.getValue());
                _setEditMode(this, "other");
            }
        }).bind(this);

        this.$el.on("keydown", handleKeyboardInput);

        this.$el.on("paste cut", function handleCutAndPaste() {
            this.undoManager.updateCurrent(this.getValue());
            _setEditMode(this, CUT_PASTE_MODE);
        }.bind(this));
    };

    UndoableTextarea.prototype.getValue = function () {
        return {
            value: this.element.value,
            selectionStart: this.element.selectionStart,
            selectionEnd: this.element.selectionEnd
        };
    };

    UndoableTextarea.prototype.updateCurrent = function () {
        this.undoManager.updateCurrent(this.getValue());
    };

    UndoableTextarea.prototype.recordHistoryItem = function () {
        this.undoManager.push(this.getValue());
    };

    UndoableTextarea.prototype.undo = function () {
        _setEditMode(this, "undo");
        _manipulateHistory(this, "undo");
        this.element.scrollTop = this.element.scrollHeight;
    };

    UndoableTextarea.prototype.redo = function () {
        _manipulateHistory(this, "redo");
        this.element.scrollTop = this.element.scrollHeight;
    };

    return UndoableTextarea;
});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = 'jira-wiki-editor-module/js/TextareaManipulator.js' */
define('wiki-edit/TextareaManipulator', function () {

    var TextareaManipulator = function (element) {
        this.el = element;
    };

    TextareaManipulator.prototype.NEW_LINE_TOKEN = "\n";

    /**
     * Gets object containing selection info
     * @returns {{position: number, start: number, end: number, length: number, text: string}}
     */
    TextareaManipulator.prototype.getSelection = function () {
        return {
            start: this.el.selectionStart,
            end: this.el.selectionEnd,
            length: this.el.selectionEnd - this.el.selectionStart,
            text: this.el.value.substring(this.el.selectionStart, this.el.selectionEnd)
        };
    };

    /**
     * Sets selection
     * @param start {number} index in the string, start of the selection
     * @param end {number} index in the string, end of the selection
     */
    TextareaManipulator.prototype.setSelection = function (start, end) {
        if (arguments.length === 1) {
            end = start;
        }
        this.el.selectionStart = start;
        this.el.selectionEnd = end;
    };

    /**
     * Replaces selected text with a parameter, if no text is selected
     * it's inserted where the cursor is
     * @param text {string} text to replace selection with
     * @param selectReplaced {Boolean} indicates if inserted text should be selected
     */
    TextareaManipulator.prototype.replaceSelectionWith = function (text, selectReplaced) {
        var start = this.el.selectionStart;
        var val = this.el.value;
        this.el.value = val.substring(0, this.el.selectionStart) + text + val.substring(this.el.selectionEnd, val.length);

        this.el.selectionEnd = start + text.length;
        this.el.selectionStart = (selectReplaced) ? start : this.el.selectionEnd;
    };

    /**
     * Wraps selection with a prefix and a suffix but only if it isn't already wrapped
     * @param prefix {string}
     * @param suffix {string}
     * @param placeholder {string} text to put between prefix and suffix if no selection was made
     */
    TextareaManipulator.prototype.wrapSelectionWith = function (prefix, suffix, placeholder) {
        if (arguments.length < 3) {
            placeholder = "";
        }
        if (arguments.length === 1) {
            suffix = prefix;
        }
        var selection = this.getSelection();
        var val = this.el.value;

        if (val.substring(selection.start - prefix.length, selection.start) === prefix &&
            val.substring(selection.end, selection.end + suffix.length) === suffix) {
            return;
        }

        var middle = val.substring(selection.start, selection.end);
        if (middle.length == 0) {
            middle = placeholder;
        }
        this.el.value = val.substring(0, selection.start) + prefix + middle + suffix + val.substring(selection.end, val.length);
        var newSelectionStart = selection.start + prefix.length;
        this.setSelection(newSelectionStart, newSelectionStart + middle.length);
    };

    /**
     * Finds selected lines within the textarea and returns an object containing full contents of the object
     * as an array of lines and start and end indexes of the selected lines
     * @returns {{lines: Array, start: number, end: number}}
     * @private
     */
    TextareaManipulator.prototype._getSelectedLines = function () {
        var val = this.el.value;
        var selection = this.getSelection();
        var startLine = val.substring(0, selection.start).split(this.NEW_LINE_TOKEN).length - 1; // 0-based index
        var endLine = startLine + val.substring(selection.start, selection.end).split(this.NEW_LINE_TOKEN).length - 1; // 0-based index
        var lines = val.split(this.NEW_LINE_TOKEN);
        return {
            lines: lines,
            start: startLine,
            end: endLine
        }
    };

    /**
     * Returns line at which cursor is (or end of the selection)
     * @returns {string}
     */
    TextareaManipulator.prototype.getLineAtCursor = function () {
        var linesSelection = this._getSelectedLines();
        return linesSelection.lines[linesSelection.end];
    };

    /**
     * Return regexp match of the fist line in the selection
     * @param pattern {regexp} prefix to check against
     * @returns {string} matched string or {undefined}
     */
    TextareaManipulator.prototype.getFirstLineMatch = function (pattern) {
        var linesSelection = this._getSelectedLines();
        var match = linesSelection.lines[linesSelection.start].match(pattern);
        if (match) {
            return match[0];
        }
    };

    /**
     * Checks if any of the selected lines is prefixed with a given string
     * @param prefix {string} prefix to check against
     * @returns {boolean}
     */
    TextareaManipulator.prototype.areSelectedLinesPrefixed = function (prefix) {
        var linesSelection = this._getSelectedLines();
        var currentLine;

        for (currentLine = linesSelection.start; currentLine <= linesSelection.end; currentLine++) {
            if (linesSelection.lines[currentLine].indexOf(prefix) == 0) {
                return true;
            }
        }
        return false;
    };

    /**
     * Prefixes selected lines with a given parameter. Lines already containing the prefix remain unchanged
     * @param prefix {string}
     */
    TextareaManipulator.prototype.prefixSelectedLines = function (prefix) {
        var selection = this.getSelection();
        var linesSelection = this._getSelectedLines();
        var currentLine;
        var prefixedLines = 0;
        var firstLinePrefixed = true;
        for (currentLine = linesSelection.start; currentLine <= linesSelection.end; currentLine++) {
            if (linesSelection.lines[currentLine].indexOf(prefix) == 0) {
                if (currentLine == linesSelection.start) {
                    firstLinePrefixed = false;
                }
                continue; //don't prefix lines which already have ie
            }
            prefixedLines += 1;
            linesSelection.lines[currentLine] = prefix + linesSelection.lines[currentLine];
        }
        this.el.value = linesSelection.lines.join(this.NEW_LINE_TOKEN);

        var prefixesLength = prefix.length * prefixedLines;
        this.setSelection(selection.start + ((firstLinePrefixed) ? prefix.length : 0), selection.end + prefixesLength);
    };

    /**
     * Removes prefix from selected lines
     * @param prefix {string}
     */
    TextareaManipulator.prototype.unprefixSelectedLines = function (prefix) {
        var selection = this.getSelection();
        var linesSelection = this._getSelectedLines();
        var currentLine;
        var firstLinePrefix = false;
        var prefixedLines = 0;

        for (currentLine = linesSelection.start; currentLine <= linesSelection.end; currentLine++) {
            if (linesSelection.lines[currentLine].indexOf(prefix) == 0) {
                prefixedLines += 1;
                linesSelection.lines[currentLine] = linesSelection.lines[currentLine].substring(prefix.length);
                if (currentLine == linesSelection.start) {
                    firstLinePrefix = true;
                }
            }
        }
        this.el.value = linesSelection.lines.join(this.NEW_LINE_TOKEN);

        var prefixesLength = prefix.length * prefixedLines;
        this.setSelection(selection.start - ((firstLinePrefix) ? prefix.length : 0), selection.end - prefixesLength);
    };

    return TextareaManipulator;
});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = 'jira-wiki-editor-module/js/keymaster-setup.js' */
define('wiki-edit/keymaster-setup', [
    'jquery',
    'wiki-edit/keymaster'
], function ($, key) {
    return {
        init: function () {
            // Set-up library handling key bindings to correctly set scopes for wiki editor
            key.filter = function (event) {
                var element = event.target || event.srcElement || false;
                var editor;
                if (element && (' ' + element.className + ' ').indexOf(' wiki-textfield ') > -1) {
                    editor = $(element).data("wikiEditor");
                    if (editor) {
                        key.setScope(editor.id);
                        return true;
                    }
                }
                return false;
            };
        }
    }
});


;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = 'jira-wiki-editor-module/js/WikiEnabledTextarea.js' */
define('wiki-edit/WikiEnabledTextarea', [
    'wiki-edit/TextareaManipulator',
    'wiki-edit/UndoableTextarea',
    'wiki-edit/keymaster',
    'wiki-edit/keymaster-setup',
    'wiki-edit/SpeechRecognition',
    'jquery'
], function (TextareaManipulator, UndoableTextarea, onKey, keymasterSetup, speechRecognition, $) {
    keymasterSetup.init();

    var editorCount = 0;
    // matches any combination of "*" and "#" followed by space which is any list, no matter how deeply nested
    var autocontinuingPrefixMarkupRegexp = /^[#\*]+ /;

    var WikiEnabledTextarea = function (element) {
        this.el = element;
        this.$el = $(element);
        if (this.$el.data("wikiEditor")) {
            // this will be very rare so defensive caching of this value doesn't seem to make much sense
            return this.$el.data("wikiEditor");
        }

        this.id = "wikiEdit" + editorCount;
        editorCount += 1;
        this.manipulationEngine = new TextareaManipulator(this.el);
        this.undoRedoEl = new UndoableTextarea(element);

        var wikiEditor = this;
        // on enter, continue list if possible or discontinue it if current list item is empty
        onKey("enter", wikiEditor.id, function onEnterKey(e) {
            var selection = wikiEditor.manipulationEngine.getSelection();
            var prefix = wikiEditor.manipulationEngine.getFirstLineMatch(autocontinuingPrefixMarkupRegexp);
            if (prefix) {
                if (selection.length == 0 && wikiEditor.manipulationEngine.getLineAtCursor() === prefix) {
                    wikiEditor.manipulationEngine.unprefixSelectedLines(prefix);
                } else {
                    wikiEditor.manipulationEngine.replaceSelectionWith("\n" + prefix);
                }
                e.preventDefault();
            }
        });

        this.$el.data("wikiEditor", this);
    };

    /**
     * Standard wiki markup in the form of <prefix>text<suffix> like *bold*, _italic_ or [mailto:someone@example.com].
     * Every time such markup is inserted:
     *     - if user didn't select any text, the placeholder text will be inserted and selected,
     *     - if user selected some text, this text will be wrapped with prefix and suffix.
     *
     * Each of this properties gets a function on the prototype with the same name
     * that changes value of textarea to apply the markup.
     */
    var wrapperMarkup = {
        'bold': ["*", "*", "strong text"],
        'italic': ["_", "_", "emphasized text"],
        'underline': ["+", "+", "underlined text"],
        'delete': ["-", "-", "deleted text"],
        'superscript': ["^", "^", "superscript text"],
        'subscript': ["~", "~", "subscript text"],
        'monospace': ["{{", "}}", "monospaced text"],
        'cite': ["??", "??", "citation"],
        'block-quote': ["{quote}", "{quote}", "quoted text"],
        'color': ["{color:$1}", "{color}", "colored text", "red"], // 4th parameter is a default value to replace $
        'link': ["[", "|http://example.com]", "link title"],
        'link-anchor': ["[#", "]", "anchor"],
        'link-mail': ["[mailto:", "]", "mail@example.com"],
        'image': ["!", "!", "http://example.com/image.png"],
        'mention': ["@", "", "Mention someone by typing their name..."],
        'code': ["\n{code:java}\n", "\n{code}\n", "// Some comments here\npublic String getFoo()\n{\n    return foo;\n}"],
        'noformat': ["\n{noformat}\n", "\n{noformat}\n", "*no* further _formatting_ is done here"],
        'panel': ["\n{panel:title=" + "My title" + "}\n", "\n{panel}\n", "Some text with a title"],
        'table': ["\n||" + "Heading" + " 1||" + "Heading" + " 2||\n|", "|" + "Col" + " A2|\n", "Col" + " A1"]
    };

    for (var key in wrapperMarkup) {
        WikiEnabledTextarea.prototype[key] = (function (args, operationKey) {
            var paramsNumber = 0;
            if (args.length > 3) {
                paramsNumber = args.length - 3;
            }
            return function () {

                var prefix = args[0];
                var suffix = args[1];
                var placeholder = args[2];

                var i;
                for (i = 1; i <= paramsNumber; i++) {
                    prefix = prefix.replace("$" + i, arguments[i - 1] || args[2 + i]);
                    suffix = suffix.replace("$" + i, arguments[i - 1] || args[2 + i]);
                }

                var value = this.el.value;
                var selection = this.manipulationEngine.getSelection();

                this.undoRedoEl.recordHistoryItem();

                // unwrap selection if needed
                if (value.substring(selection.start - prefix.length, selection.start) === prefix &&
                    value.substring(selection.end, selection.end + suffix.length) === suffix) {

                    this.el.value = value.substring(0, selection.start - prefix.length) +
                        value.substring(selection.start, selection.end) +
                        value.substring(selection.end + suffix.length, value.length);

                    this.manipulationEngine.setSelection(selection.start - prefix.length, selection.end - prefix.length);

                    // wrap selection with markup
                } else {
                    this.manipulationEngine.wrapSelectionWith.call(this.manipulationEngine, prefix, suffix, placeholder);
                }
                this.undoRedoEl.recordHistoryItem();
                this.$el.trigger("input");
            };
        })(wrapperMarkup[key], key);
    }

    /**
     * Markup that is always a prefix for entire line, like h1. or bullet lists "* ".
     * Those prefixes are mutually exclusive, which means each line can be only prefixed with one of them
     * and applying one of them will remove any other.
     *
     * Each of this properties gets a function on the prototype with the same name
     * that changes value of textarea to apply the markup.
     */
    var excludingLinePrefixMarkup = {
        'paragraph': "",
        'bullet-list': "* ",
        'numbered-list': "# ",
        'h1': 'h1. ',
        'h2': 'h2. ',
        'h3': 'h3. ',
        'h4': 'h4. ',
        'h5': 'h5. ',
        'h6': 'h6. ',
        'paragraph-quote': 'bq. '
    };

    for (var key in excludingLinePrefixMarkup) {
        WikiEnabledTextarea.prototype[key] = (function (prefix) {
            return function () {
                this.undoRedoEl.recordHistoryItem();
                // check if line is already prefixed with one of the prefixes there
                for (var prefixToRemove in excludingLinePrefixMarkup) {
                    if (this.manipulationEngine.areSelectedLinesPrefixed(excludingLinePrefixMarkup[prefixToRemove])) {
                        this.manipulationEngine.unprefixSelectedLines(excludingLinePrefixMarkup[prefixToRemove]);
                    }
                }

                this.manipulationEngine.prefixSelectedLines.call(this.manipulationEngine, prefix);
                this.undoRedoEl.recordHistoryItem();
                this.$el.trigger("input");
            };
        })(excludingLinePrefixMarkup[key]);
    }

    /**
     * Markup that is just inserted in place of cursor or selection. The cursor is then placed at the end of inserted text.
     *
     * Each of this properties gets a function on the prototype with the same name
     * that changes value of textarea to apply the markup.
     */
    var insertMarkupWithoutSelecting = {
        'hr': "\n----\n",
        ':)': ':)',
        ':(': ':(',
        ':P': ':P',
        ':D': ':D',
        ';)': ';)',
        '(y)': '(y)',
        '(n)': '(n)',
        '(i)': '(i)',
        '(/)': '(/)',
        '(x)': '(x)',
        '(!)': '(!)',
        '(+)': '(+)',
        '(-)': '(-)',
        '(?)': '(?)',
        '(on)': '(on)',
        '(off)': '(off)',
        '(*)': '(*)',
        '(*r)': '(*r)',
        '(*g)': '(*g)',
        '(*b)': '(*b)',
        '(*y)': '(*y)',
        '(flag)': '(flag)',
        '(flagoff)': '(flagoff)',
        'image-attachment': [" !$1|thumbnail! ", "attachment-name.jpg"],
        'image-attachment-full': [" !$1! ", "attachment-name.gif"],
        'link-attachment': [" [^$1] ", "attachment-name.zip"]
    };

    for (var key in insertMarkupWithoutSelecting) {
        WikiEnabledTextarea.prototype[key] = (function (toInsert) {
            var paramsNumber = 0;
            var defaultValues;
            if (_.isArray(toInsert)) {
                paramsNumber = toInsert.length - 1;
                defaultValues = toInsert.slice(1);
                toInsert = toInsert[0];
            }
            return function () {
                var i;
                var result = toInsert;
                for (i = 1; i <= paramsNumber; i++) {
                    result = toInsert.replace("$" + i, arguments[i - 1] || defaultValues[i - 1]);
                }
                this.undoRedoEl.recordHistoryItem();
                this.manipulationEngine.replaceSelectionWith.call(this.manipulationEngine, result, false);
                this.undoRedoEl.recordHistoryItem();
                this.$el.trigger("input");
            };
        })(insertMarkupWithoutSelecting[key]);
    }

    WikiEnabledTextarea.prototype.speech = function () {
        speechRecognition.start(this);
    };

    return WikiEnabledTextarea;
});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = 'jira-wiki-editor-module/js/WikiEditor.js' */
define('wiki-edit/WikiEditor', [
    'wiki-edit/WikiEnabledTextarea',
    'jquery',
    'underscore',
    'wiki-edit/JIRA',
    'wiki-edit/keymaster',
    'wiki-edit/analytics',
    'wiki-edit/WikiEditorUtil',
    'jira/util/events',
    'jira/attachments/api',
    'jira/featureflags/feature-manager'
], function (WikiEnabledTextarea,
             $,
             _,
             JIRA,
             key,
             analytics,
             WikiEditorUtil,
             JIRAEvents,
             attachmentsAPI,
             featureFlagManager) {

    var controlKey = 'Ctrl';
    if (navigator.platform.indexOf('Mac') != -1) {
        controlKey = '';
    }

    var determineFileType = function (fileName) {
        return fileName.match(/\.(bmp|gif|jpg|jpeg|png|tiff|webp)$/i) ? 'image' : 'file';
    };

    var insertMarkup = function (wikiEditor, fileName, fileType) {
        // Gif attachments are rendered without thumbnail (eg: !lolcat.gif!) so they can animate properly
        if (fileType == "image") {
            if (fileName.match(/\.gif$/i)) {
                wikiEditor["image-attachment-full"](fileName);
            } else {
                wikiEditor["image-attachment"](fileName);
            }

            analytics.trigger("operation.attachment.image");
        } else {
            wikiEditor["link-attachment"](fileName);
            analytics.trigger("operation.attachment.link");
        }
    };


    function _closeDropDown(eventTarget) {
        var $theContainer = AJS.$(eventTarget).closest(".aui-dropdown2");
        if ($theContainer.length) {
            $theContainer[0].hide();
        }
    }

    return {
        create: function (element) {
            // disable plugin in IE <=8
            if (typeof element.selectionStart == "undefined") {
                return;
            }

            var $editorElement = $(element);

            if ($editorElement.data("wikiEditor")) {
                return;
            }

            // todo editor should initialize all html and events by itself
            var wikiEditor = new WikiEnabledTextarea(element);
            this.wikiEditor = wikiEditor;

            var $editorHtml = $(JIRA.Templates.Plugins.WikiEditor.renderEditor({
                editorId: wikiEditor.id,
                controlKey: controlKey
            }));
            var $editorToolbar = $editorHtml.filter(".wiki-edit-toolbar");

            // speech-capable browser?
            if ("webkitSpeechRecognition" in window) {
                $editorHtml.find(".wiki-edit-speech-item").removeClass("hidden");
            }

            $editorElement.parent().before($editorHtml);

            // detect if we are dealing with dialog
            var isDialog = $editorElement.closest(".jira-dialog").length > 0 || $editorElement.closest("form#issue-create").length > 0;
            var isCreateDialog = $editorElement.closest("#create-issue-dialog").length > 0;
            // detect if we are on view issue page
            var isViewIssue = $("#issue-content").length > 0;
            var isComment = $editorElement.closest("#addcomment").length > 0;

            var elementsWithTooltips = $editorHtml.find(".wiki-edit-operation[title], .aui-dropdown2-trigger, .wiki-edit-tooltip");
            var onWikiEditorHideEventName;
            if (isDialog) {
                onWikiEditorHideEventName = 'Dialog.beforeHide';
            } else {
                onWikiEditorHideEventName = JIRA.Events.BEFORE_INLINE_EDIT_CANCEL;
            }
            elementsWithTooltips.each(function () {
                var $this = $(this);
                var config = {
                    aria: true,
                    hideOnClick: true,
                    hoverable: false
                };
                if ($this.parent().is('li')) {
                    config.gravity = 'w';
                }
                $this.tooltip(config);
            });
            var hideAllTooltips = function () {
                elementsWithTooltips.each(function () {
                    $(this).tooltip('hide');
                });
            };
            JIRA.bind(onWikiEditorHideEventName, hideAllTooltips);

            var isDropdownEnabled = false;
            var $wikiDropdown = $editorHtml.filter(".aui-dropdown2");
            $wikiDropdown.on({
                'aui-dropdown2-show': function () {
                    isDropdownEnabled = true;

                    // focus on editorElement when dropdown opens so
                    // it can handle keyboard event (especially in dialogs)
                    $editorElement.focus();
                },
                'aui-dropdown2-hide': function () {
                    isDropdownEnabled = false;

                    hideAllTooltips();
                }
            });
            $editorElement.on('keydown', function checkEscapePressWhenDropdownIsEnabled(e) {
                if (isDropdownEnabled && e.keyCode === AJS.keyCode.ESCAPE) {
                    if (isDialog) {
                        JIRA.one("Dialog.beforeHide", function (e) {
                            e.preventDefault();
                        });
                    } else if (isViewIssue && !isComment) {
                        JIRA.one(JIRA.Events.BEFORE_INLINE_EDIT_CANCEL, function preventInlineEditCloseIfAnyDropdownIsEnabled(e) {
                            e.preventDefault();
                        });
                    }
                }
            });


            var $attachmentDropdown = $editorHtml.filter(
                ".wiki-edit-dropdown-image, " +
                ".wiki-edit-dropdown-attachment"
            );

            var $attachmentListContainer = $attachmentDropdown.find(
                ".wiki-edit-insert-image, " +
                ".wiki-edit-insert-attachment"
            );

            var $attachmentList = $attachmentDropdown.find(
                ".wiki-edit-insert-image ul, " +
                ".wiki-edit-insert-attachment ul"
            );

            // Attachment dropdown link click handler
            $attachmentList.on("click", "a", function (e) {
                e.preventDefault();
                _closeDropDown(e.target);
                var fileType = $(this).attr("data-attachment-type");
                if (typeof fileType === "undefined") {
                    fileType = "file";
                }

                var fileName = $(this).find('.wiki-edit-attachment-name').text();

                insertMarkup(wikiEditor, fileName, fileType);
            });

            // Build attachment links when attachment button is pressed
            $attachmentDropdown.on("aui-dropdown2-show", function () {

                // At the moment this will be filled with DOM elements of the attachments. Ideally this should be array of structured JSON object
                // so regardless what shape the DOM is (eg: SD and Agile renders attachments differently) the structure of the array is consistent
                var genericAttachments = [];

                // A list of attachments displayed on the issue. At the moment this is only used by Agile board and backlog view
                // Ideally this should be used everywhere editor can show up.
                //
                // The structure of elements dumped into this array is:
                // {
                //   name: "my-attachment-file-name.pdf",
                //   type: "file",             // or "image"
                //   icon: { cssClass : "aui-iconfont-file-pdf", title : "PDF File" }  // To easily create this use WikiEditorUtil.translateMimeTypeToAttachmentTypeIcon or WikiEditorUtil.translateFileExtensionToAttachmentTypeIcon
                // }
                var genericAttachmentsStructured = [];

                // Add temporary attachments (those added before dialog is saved such as in create/edit dialog)
                if (isDialog) {
                    $(".upload-progress-bar:not(.upload-progress-bar__upload-error) span.upload-progress-bar__file-name").each(function (i, v) {
                        genericAttachments.push(v);
                    });
                }

                // Add permanent attachments
                if (!isCreateDialog && isViewIssue) {
                    $("#attachment_thumbnails li.attachment-content, " +
                        "#file_attachments li.attachment-content").each(function (i, v) {
                        genericAttachments.push(v);
                    });
                }

                // Add agile / greenhopper attachments -- for when editor pops up in agile board / backlog
                var buildAgileAttachmentObject = function (fileName, attachmentType) {
                    if (!fileName) {
                        return null;
                    }
                    var fileExtension = WikiEditorUtil.getFileExtension(fileName);
                    return {
                        name: fileName,
                        type: attachmentType,
                        icon: WikiEditorUtil.translateFileExtensionToAttachmentTypeIcon(fileExtension)
                    };
                };
                var $agileAttachmentsContainer = $("#ghx-tab-attachments .ghx-container");
                $agileAttachmentsContainer.find("#file_attachments li.attachment-content > dl dt.attachment-title a, #file_attachments div.verbose dt.attachment-title a").each(function (i, e) {
                    var attachmentObj = buildAgileAttachmentObject(e.textContent, "file");
                    if (attachmentObj) {
                        genericAttachmentsStructured.push(attachmentObj);
                    }
                });
                $agileAttachmentsContainer.find("#attachment_thumbnails a.attachment-title").each(function (i, e) {
                    var attachmentObj = buildAgileAttachmentObject(e.textContent, "image");
                    if (attachmentObj) {
                        genericAttachmentsStructured.push(attachmentObj);
                    }
                });

                $attachmentList.empty();
                $attachmentListContainer.addClass("hidden");

                // This if block attempts to populate attachment list based on <li> element of each attachment displayed in issue view
                // This works for JIRA and SD view but not for Agile because Agile renders the attachment differently
                // Ideally the genericAttachment should be a list of structured JSON object instead (see genericAttachmentStructured array above)
                if ((isDialog || isViewIssue) && genericAttachments.length) {
                    $attachmentListContainer.removeClass("hidden");

                    /**
                     * Contents of $genericAttachments (ie: "this") could be:
                     * - A thumbnails (gallery) view item
                     * - A list view item
                     * - Create / edit dialog entry
                     */
                    $(genericAttachments).each(function () {
                        // Handle various form of DOM structure a file name can appear in (create issue dialog,
                        // edit issue - list view, edit issue - thumbnail view
                        var fileName = $(this).is('span.upload-progress-bar__file-name') ?
                            $(this).text() :
                            $(this).find('a.attachment-title, .attachment-title a').first().text();

                        // Determine file type by 'data-attachment-type' attribute, or fall back by checking
                        // popular image file extension
                        var fileType = $(this).attr('data-attachment-type');
                        if (fileType === undefined) {
                            fileType = determineFileType(fileName);
                        }

                        // Try to figure out the attachment type icon using mime type. On thumbnail / list view mime-type
                        // can be looked up using data-downloadurl attribute. If mime-type not available let's fall back
                        // using file extension. And if that still doesn't work use aui-iconfont-file-txt.
                        var typeIcon = WikiEditorUtil.defaultAttachmentTypeIcon;
                        var dataDownloadUrl = $(this).attr('data-downloadurl');
                        if (dataDownloadUrl === undefined) {
                            dataDownloadUrl = $(this).find('[data-downloadurl]').attr('data-downloadurl');
                        }
                        if (dataDownloadUrl !== undefined && typeof dataDownloadUrl === 'string') {
                            var attrs = dataDownloadUrl.split(':');
                            if (attrs.length > 0) {
                                var mimeType = attrs[0];
                                typeIcon = WikiEditorUtil.translateMimeTypeToAttachmentTypeIcon(mimeType);
                            }
                        } else if (fileName !== undefined && typeof fileName === 'string') {
                            var matches = fileName.match(/\.(\w{1,5})$/i); // regex match exts such as .gz,.jpg,.docx,.3gp and discard the dot prefix
                            if (matches && matches.length > 1) {
                                var fileExtension = matches[1];
                                typeIcon = WikiEditorUtil.translateFileExtensionToAttachmentTypeIcon(fileExtension);
                            }
                        }

                        $attachmentList.append(
                            $(JIRA.Templates.Plugins.WikiEditor.renderListItem({
                                text: fileName,
                                attachmentType: fileType,
                                attachmentTypeIcon: typeIcon
                            }))
                        );
                    });

                } else if (!isCreateDialog && genericAttachmentsStructured.length > 0) {
                    // A fallback if block if above is false. At the moment only used to ensure attachment lists are shown in Agile view.
                    // Ideally the above if block should be removed
                    $attachmentListContainer.removeClass("hidden");

                    genericAttachmentsStructured.forEach(function (e) {
                        if (e == null || e.name == null) {
                            return;
                        }

                        var fileName = e.name;
                        var type = e.type ? e.type : "file";
                        var icon = e.icon ? e.icon : {cssClass: "aui-iconfont-devtools-file", title: ""};

                        $attachmentList.append(
                            $(JIRA.Templates.Plugins.WikiEditor.renderListItem({
                                text: fileName,
                                attachmentType: type,
                                attachmentTypeIcon: icon
                            }))
                        );
                    });
                }
            });

            // dropdown2 fix so when item is selected using keyboard the container div scrolls
            // properly. This bug was fixed on AUI 5.8+ so only do this for older AUI versions
            if (WikiEditorUtil.compareVersion(AJS.version, '5.8.0') < 0) {
                $attachmentDropdown.on('aui-dropdown2-item-selected', function scrollContainerDivIfActiveItemIsOutOfView() {
                    var $active = $(this).find('.aui-dropdown2-active');
                    if (typeof $active !== 'object') {
                        return;
                    }
                    var $container = $active.closest('div');
                    if (typeof $container !== 'object') {
                        return;
                    }

                    // top/bottom limits are extreme points above/below which element will not / only be partially visible
                    var containerTopLimit = $container.offset().top;
                    var containerBottomLimit = containerTopLimit + $container.height();

                    var elementTop = $active.offset().top;
                    var elementBottom = elementTop + $active.height();

                    // Active element is (partially) above the container viewport, scroll up
                    if (elementTop < containerTopLimit) {
                        $container.scrollTop($container.scrollTop() - (containerTopLimit - elementTop));
                    }

                    // Active element is (partially) below the container viewport, scroll down
                    if (elementBottom > containerBottomLimit) {
                        $container.scrollTop($container.scrollTop() + (elementBottom - containerBottomLimit));
                    }
                });
            }

            $editorHtml.filter(".wiki-edit-dropdown, .wiki-edit-picker").on("mousedown", function (e) {
                e.preventDefault(); // prevent blurring textarea, needed for inline mode
            });

            // attach keyboard shortcuts
            $editorHtml.find(".wiki-edit-operation:not(.wiki-edit-operation-color)").each(function () {
                var $this = $(this);
                var handler = function (e) {
                    if (!e) {
                        return;
                    }
                    e.preventDefault && e.preventDefault();
                    _closeDropDown(e.target);
                    $editorElement.focus();
                    wikiEditor[$this.data("operation")]();
                    analytics.trigger("operation", {
                        name: $this.data("operation"),
                        nameHash: analytics.hashCode($this.data("operation")),
                        trigger: e.type
                    });
                    analytics.trigger("operation." + $this.data("operation"), {trigger: e.type});
                };

                // todo event delegation, fool!
                $this.click(handler);
                if ($this.data("shortcut")) {
                    // todo shortcuts should be binded once, globally
                    key($this.data("shortcut"), wikiEditor.id, handler);
                }
            });

            // text color
            $editorHtml.find(".wiki-edit-operation-color").each(function () {
                var $this = $(this);
                var handler = function (e) {
                    if (!e) {
                        return;
                    }
                    e.preventDefault && e.preventDefault();
                    _closeDropDown(e.target);
                    $editorElement.focus();
                    wikiEditor[$this.data("operation")]($this.data("color"));
                    analytics.trigger("operation", {
                        name: $this.data("operation"),
                        nameHash: analytics.hashCode($this.data("operation")),
                        trigger: e.type
                    });
                    analytics.trigger("operation." + $this.data("operation"), {trigger: e.type});
                };

                // todo event delegation, fool!
                $this.click(handler);
                if ($this.data("shortcut")) {
                    // todo shortcuts should be binded once, globally
                    key($this.data("shortcut"), wikiEditor.id, handler);
                }

            });

            var defaultColor = (window.localStorage.getItem("jira.wikieditor.last.color")) ? window.localStorage.getItem("jira.wikieditor.last.color") : "red";
            var $colorOperation = $editorHtml.find(".wiki-edit-operation-color");
            $colorOperation.data("color", defaultColor);
            var $colorIndicator = $editorToolbar.find(".wiki-edit-color-indicator");
            $colorIndicator.css("background-color", defaultColor);

            $editorHtml.filter(".wiki-edit-color-picker").on("click", "a", function (e) {
                e.preventDefault();
                _closeDropDown(e.target);
                $editorElement.focus();
                var color = $(this).data("color");
                wikiEditor.color(color);
                analytics.trigger("operation", {name: "color"});
                analytics.trigger("operation.color.picked", {color: color});
                $colorOperation.data("color", color);
                $colorIndicator.css("background-color", color);
                window.localStorage.setItem("jira.wikieditor.last.color", color);
            });

            var $visibilityToggle = $editorHtml.find('.wiki-edit-visible-toggle');
            var hideToolbar = (localStorage.getItem("jira.wikieditor.visibility" + element.name + '.' + element.id) === "true") ? true : false;
            if (hideToolbar) {
                $visibilityToggle.addClass("active");
                $editorToolbar.addClass("wiki-edit-toolbar-compact");
            }

            function toggleEditor(e) {
                e.preventDefault();
                e.stopPropagation();
                hideToolbar = !hideToolbar;
                $visibilityToggle.toggleClass("active", hideToolbar);
                $editorToolbar.toggleClass("wiki-edit-toolbar-compact", hideToolbar);
                localStorage.setItem("jira.wikieditor.visibility" + element.name + '.' + element.id, (hideToolbar) ? "true" : "false");
                analytics.trigger((hideToolbar) ? "hide" : "show")
            }

            $visibilityToggle.on("click", toggleEditor);
            $editorToolbar.parent().on("click", ".wiki-edit-toolbar-compact", toggleEditor);

            $(document).on("showWikiPreview", function (e, el) {
                if ($(el).find(element).length) {
                    $editorToolbar.addClass("hidden");
                }
            });
            $(document).on("showWikiInput", function (e, el) {
                if ($(el).find(element).length) {
                    $editorToolbar.removeClass("hidden");
                }
            });
        },

        initBrowseLink: function (element) {
            var wikiEditor = this.wikiEditor;

            var $editorElement = $(element);

            var $browseButton = $editorElement.parent().siblings().find(".wiki-attachment-browse");
            var canAttach = $("#dnd-metadata-webpanel").data("can-attach");

            var isDialog = $editorElement.closest(".jira-dialog").length > 0 || $editorElement.closest("form#issue-create").length > 0;

            if (isDialog) {
                // These are the dialogs we want to show the browse link in.
                // The dialogs have an attachment dropzone that we can use to simulate a drop.
                var supportedDialogSelectors = ['#create-issue-dialog:visible', '#create-subtask-dialog:visible', '#edit-issue-dialog:visible', '#create-linked-issue-dialog:visible'];
                var supportedDialog = $(supportedDialogSelectors.join(","));
                var isSupportedDialog = supportedDialog.length > 0;
                canAttach = $(".jira-dialog fieldset span:contains('Attachment')").length > 0;

                // If we did not find a dialog that we know can receive files, we search
                // for other dialogs that explicitly state that they can receive files.
                if (!isSupportedDialog) {
                    supportedDialog = $editorElement.closest(".dialog-can-receive-files:visible");
                    isSupportedDialog = supportedDialog.length > 0;
                    // If we do find such a dialog, we consume its can-attach (boolean) data attribute.
                    // If the dialog does not have that attribute, canAttach will be undefined and the
                    // browse link will not be shown.
                    canAttach = supportedDialog.data("can-attach");
                }
                var insertMarkupInDialog = supportedDialog.data("insert-markup-on-browse");
            }

            var $attachmentsDropdown = $editorElement.parent().siblings().find(".wiki-edit-attachment-picker-trigger");

            if (canAttach && (isDialog ? isSupportedDialog : true)) {
                $browseButton.closest("div").removeClass("hidden");
                $attachmentsDropdown.removeClass("hidden");
                if (!$browseButton.data("initialised")) {
                    $browseButton.on('click', function (e) {
                        e.preventDefault();
                        _closeDropDown(e.target);

                        var uploadWithoutMediaSupport = function () {
                            var $tempFileInput = $("<input type=\"file\" multiple />");
                            $tempFileInput.change(function (event) {
                                var files = $tempFileInput[0].files;
                                if (isDialog) {
                                    var dropEvent = $.Event("drop");
                                    dropEvent.dataTransfer = {files: files};
                                    supportedDialog.find('.issue-drop-zone__target').trigger(dropEvent);
                                }
                                else {
                                    // This event comes from the JIRA Drag and Drop Plugin.
                                    JIRAEvents.trigger("attachmentForPageReceived", {
                                        files: files,
                                        isWikiTextfieldFocused: true
                                    });
                                }
                                if (isDialog ? insertMarkupInDialog : true) {
                                    for (var i = 0; i < files.length; i++) {
                                        var fileName = files[i].name;
                                        insertMarkup(wikiEditor, fileName, determineFileType(fileName));
                                    }
                                }
                            });
                            $tempFileInput.click();

                            analytics.trigger("attachment.dropdown.button.clicked.browse");
                        };

                        var uploadSettings = {
                            onFileUploadStarted: function (file) {
                                insertMarkup(wikiEditor, file.name, determineFileType(file.name));
                            },
                            blockWikiEditorMarkupInsert: true
                        };

                        if (!attachmentsAPI.doUpload(uploadSettings)) {
                            analytics.trigger("issue.wiki-editor.browse-link.fallback");
                            uploadWithoutMediaSupport();
                        } else {
                            analytics.trigger("issue.wiki-editor.browse-link.media-picker");
                        }

                    });
                    $browseButton.data("initialised", true);
                }
            }
            else {
                $browseButton.closest("div").addClass("hidden");

                // Here we know the browse button will be hidden. If we will
                // not show an attachments list, the attachment dropdown will be empty
                // so we want to hide the attachment dropdown altogether.
                var $genericAttachments = $("#attachment_thumbnails li.attachment-content, #file_attachments li.attachment-content");
                var currentIssueHasAttachments = $genericAttachments.length > 0;

                // Create issue/Create subtask dialogs are special because even if the current issue has attachments,
                // we are not supposed to show these attachments in those two dialogs (because attachments are per issue).
                var isCreateIssueOrSubtaskDialog = isDialog && isSupportedDialog &&
                    (supportedDialog.attr("id") === "create-issue-dialog" || supportedDialog.attr("id") === "create-subtask-dialog");

                var willShowAttachmentsList = currentIssueHasAttachments && !isCreateIssueOrSubtaskDialog;

                if (!willShowAttachmentsList) {
                    $attachmentsDropdown.addClass("hidden");
                }
            }

        }
    }
});

;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = 'jira-wiki-editor-module/js/WikiEditorUtil.js' */
define('wiki-edit/WikiEditorUtil', [
    'jquery',
    'underscore'
], function ($,
             _) {

    var _defaultAttachmentTypeIcon = {
        cssClass: 'aui-iconfont-devtools-file',
        title: "File"
    };

    var _fileExtToAttachmentTypeIconCssClass = {
        'pdf': 'aui-iconfont-file-pdf',

        'gif': 'aui-iconfont-image',
        'png': 'aui-iconfont-image',
        'jpeg': 'aui-iconfont-image',
        'jpg': 'aui-iconfont-image',

        'xml': 'aui-iconfont-file-code',
        'html': 'aui-iconfont-file-code',
        'htm': 'aui-iconfont-file-code',
        'txt': 'aui-iconfont-file-txt',

        'zip': 'aui-iconfont-file-zip',
        'gz': 'aui-iconfont-file-zip',
        'tar': 'aui-iconfont-file-zip',
        'rar': 'aui-iconfont-file-zip',
        '7z': 'aui-iconfont-file-zip',

        'doc': 'aui-iconfont-file-doc',
        'docx': 'aui-iconfont-file-doc',
        'xls': 'aui-iconfont-file-xls',
        'xlsx': 'aui-iconfont-file-xls',
        'xlsm': 'aui-iconfont-file-xls',
        'ppt': 'aui-iconfont-file-ppt',
        'pptx': 'aui-iconfont-file-ppt',

        'java': 'aui-iconfont-file-code',
        'c': 'aui-iconfont-file-code',
        'h': 'aui-iconfont-file-code',
        'cpp': 'aui-iconfont-file-code',
        'hpp': 'aui-iconfont-file-code',
        'scala': 'aui-iconfont-file-code',
        'php': 'aui-iconfont-file-code',
        'css': 'aui-iconfont-file-code',
        'less': 'aui-iconfont-file-code',
        'soy': 'aui-iconfont-file-code',
        'js': 'aui-iconfont-file-code',
        'jar': 'aui-iconfont-file-zip',
        'war': 'aui-iconfont-file-zip',
        'obr': 'aui-iconfont-file-zip'
    };

    var _fileExtToAttachmentTypeIconTitle = {
        'pdf': "PDF File",

        'gif': "GIF File",
        'png': "PNG File",
        'jpeg': "JPEG File",
        'jpg': "JPEG File",

        'xml': "XML File",
        'html': "HTML File",
        'htm': "HTML File",
        'txt': "Text File",

        'zip': "Zip Archive",
        'gz': "GZip Archive",

        'doc': "Microsoft Word",
        'docx': "Microsoft Word",
        'xls': "Microsoft Excel",
        'xlsx': "Microsoft Excel",
        'xlsm': "Microsoft Excel",
        'ppt': "Microsoft PowerPoint",
        'pptx': "Microsoft PowerPoint",

        'java': "Java Source File",
        'jar': "Java Archive File",
        'war': "Java Archive File"
    };

    return {

        /**
         * Default attachment type icon, used as a fallback if type couldn't be determined
         */
        defaultAttachmentTypeIcon: _defaultAttachmentTypeIcon,

        /**
         * Used by attachments dropdown to determine what icon to put to the left of attachment name
         * Icon is decided by attachment mime type
         *
         * @param {string} mimeType attachment mime type (eg: image/jpg)
         *
         * @returns Object with cssClass and title attributes.
         *  If translation fails cssClass is aui-iconfont-devtools-file and title is empty string.
         */
        translateMimeTypeToAttachmentTypeIcon: function (mimeType) {
            return {
                cssClass: JIRA.Templates.ViewIssue.matchFileClass({mimetype: mimeType}),
                title: JIRA.Templates.ViewIssue.matchFileIconAlt({mimetype: mimeType})
            };
        },

        /**
         * Used by attachments dropdown to determine what icon to put to the left of attachment name
         * Icon is decided by file extension
         *
         * @param extension extension name, with or without dot prefix (eg: .pdf, doc)
         *
         * @returns Object with cssClass and title attributes.
         *  If translation fails cssClass is aui-iconfont-devtools-file and title is empty string.
         */
        translateFileExtensionToAttachmentTypeIcon: function (extension) {
            var result = _.clone(_defaultAttachmentTypeIcon);

            if (typeof extension !== 'string') {
                return result;
            }

            extension = extension.toLowerCase();
            extension = extension.replace(/^\.+/, '');

            var cssClass = _fileExtToAttachmentTypeIconCssClass[extension];
            if (typeof cssClass === 'string') {
                result.cssClass = cssClass;
            }

            var title = _fileExtToAttachmentTypeIconTitle[extension];
            if (typeof title === 'string') {
                result.title = title;
            }

            return result;
        },

        /**
         * Perform version number comparison. Returns a number less than 0 if version A is lower than B, greater than 0
         * if A is higher than B, 0 if both equals.
         *
         * Example:
         * - compareVersion('5.7.10', '5.8.0') // returns -1
         * - compareVersion('5.8.0', '5.8.0') // returns 0
         * - compareVersion('5.8.1', '5.8.0') // returns 1
         * - compareVersion('5.10.0', '5.8.0') // returns 1
         * - compareVersion('5.8', '5.8.0') // returns -1
         * - compareVersion('5.8', '5.8.0') // returns -1
         * - compareVersion('5.0a', '5.0') // returns NaN
         *
         * @param verA (string) version number (eg: 5.7.10)
         * @param verB (string) version number (eg: 5.7.10)
         *
         * @return (number) A number less than 0 if version A is lower than B, greater than 0 if A is higher than B,
         * 0 if both equals, NaN if version comparison can't be performed
         */
        compareVersion: function (verA, verB) {
            var partsA = verA.split('.');
            var partsB = verB.split('.');
            var result = NaN;

            $(partsA).each(function (i, e) {
                if (i >= partsB.length) {
                    return false;
                }
                var partA = Number(e);
                var partB = Number(partsB[i]);
                if (isNaN(partA) || isNaN(partB)) {
                    //noinspection JSUnusedAssignment
                    result = NaN;
                    return false;
                }
                if (partA < partB) {
                    //noinspection JSUnusedAssignment
                    result = -1;
                    return false;
                } else if (partA > partB) {
                    //noinspection JSUnusedAssignment
                    result = 1;
                    return false;
                }
                result = 0;
            });

            if (result == 0 && partsA.length != partsB.length) {
                return (partsA.length > partsB.length) ? 1 : -1;
            }

            return result;
        },

        /**
         * Returns the file extension (without dot prefix) of a given file name, or an empty string if unable to do so
         * @param fileName
         */
        getFileExtension: function (fileName) {
            if (typeof fileName !== "string") {
                return "";
            }

            var matches = fileName.match(/\.(\w{1,5})$/i); // regex match exts such as .gz,.jpg,.docx,.3gp and discard the dot prefix
            if (matches && matches.length > 1) {
                return matches[1];
            }

            return "";
        }
    }
});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources', location = 'jira-wiki-editor-module/js/SpeechRecognition.js' */
define('wiki-edit/SpeechRecognition', [
    'jquery',
    'aui/flag'
], function ($, auiFlag) {
    function getIsFinal(results) {
        return results && results[0] && results[0].isFinal;
    }

    function getTranscript(results) {
        return results && results[0] && results[0][0] && results[0][0].transcript || '';
    }

    return {
        start: function (textareaInstance) {
            var self = this;
            var recognition = new webkitSpeechRecognition();
            recognition.continuous = false;
            recognition.interimResults = true;
            // if lang is converted into something that Chrome does not understand, it defaults to the system language
            recognition.lang = AJS.Meta.get("user-locale").replace("_", "-");
            // stops any recognition in progress to start a new session
            recognition.stop();
            recognition.start();

            recognition.onstart = function () {
                self.showTimedMessage({title: "You can start speaking now :)"}, "info", 10);
                self.selectionStart = textareaInstance.manipulationEngine.getSelection().start;
            }
            recognition.onresult = function (event) {
                self.dismissCurrentMessage();
                var isFinal = getIsFinal(event.results);
                var speechResult = getTranscript(event.results);
                // capitalise first letter
                speechResult = speechResult.charAt(0).toUpperCase() + speechResult.slice(1);

                if (isFinal) {
                    textareaInstance.undoRedoEl.recordHistoryItem();
                }
                textareaInstance.manipulationEngine.replaceSelectionWith.call(textareaInstance.manipulationEngine, speechResult, false);
                var selectionEnd = self.selectionStart + speechResult.length;
                if (isFinal) {
                    // clears the selection
                    textareaInstance.manipulationEngine.setSelection(selectionEnd);
                    textareaInstance.undoRedoEl.recordHistoryItem();
                    textareaInstance.$el.trigger("input");
                    recognition.stop();
                }
                else {
                    textareaInstance.manipulationEngine.setSelection(self.selectionStart, selectionEnd);
                }
            }
            recognition.onerror = function (event) {
                recognition.stop();

                // this is a generic error message in case no specific error is raised
                var message = {
                    title: "Sorry, I can\'t hear you :(",
                    body: ''
                }
                switch (event.error) {
                    case "not-allowed":
                        message.title = "Speech recognition is currently disabled";
                        message.body = "Click the camera icon in the browser\'s address bar to enable it.";
                        break;
                    case "network":
                        message.title = "No internet connection";
                        message.body = "You need a working internet connection to use speech recognition.";
                        break;
                    case "no-speech":
                        message.title = "Sorry, I couldn\'t hear anything :(";
                        message.body = "Is your microphone working and unmuted?";
                        break;
                    // this only happens by user interaction, so there is no need to display a message
                    case "aborted":
                        return;
                }
                self.showTimedMessage(message, "warning", 5);
            }
            recognition.onend = function () {
                recognition.stop();
            }
        },

        /**
         * Shows a specific auiFlag and automatically hides it after the specified timeout
         *
         * @param message
         * @param flagType
         * @param duration in seconds
         */
        showTimedMessage: function (message, flagType, duration) {
            this.dismissCurrentMessage();
            this.speakFlag = auiFlag({
                type: flagType,
                title: message.title,
                body: message.body,
                persistent: true
            });

            clearTimeout(this.flagTimer);
            this.flagTimer = setTimeout(this.dismissCurrentMessage.bind(this), duration * 1000);
        },
        dismissCurrentMessage: function () {
            if (this.speakFlag && this.speakFlag.close) {
                this.speakFlag.close();
                this.speakFlag = null;
            }
        }
    }
})
;;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:skate', location = 'jira-wiki-editor-module/js/lib/skate.js' */
define('wiki-edit/skate', ['jira/skate'], function (skate) {
    return skate;
});
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-wiki-editor:wiki-editor-resources-init', location = 'jira-wiki-editor-module/js/wiki-editor-init.js' */
require([
    'wiki-edit/WikiEditor',
    'wiki-edit/JIRA',
    'wiki-edit/skate',
    'jquery',
    'underscore'
], function (WikiEditor, JIRA, skate, $, _) {

    function createWikiTextfield(element) {
        var el = (this instanceof Element) ? this : element;
        var create = function (elem) {
            WikiEditor.create(elem);
            WikiEditor.initBrowseLink(elem);
            elem.wikiEnabled = true;
        };

        if (el.wikiEnabled === false) {
            if ($(el).is(':hidden')) {
                _.defer(create, el);
            } else {
                create(el);
            }
        }
    }

    function wikiEditorDefinition() {
        return {
            type: skate.type.CLASSNAME,
            attached: createWikiTextfield,
            prototype: {
                wikiEnabled: false
            }
        };
    }

    skate('wiki-textfield', wikiEditorDefinition());

    skate('wiki-enabled-textfield', wikiEditorDefinition());

    $(function () {
        if ($("#gh").length > 0) {
            JIRA.Dialogs.comment.options.width = 810;
            JIRA.Dialogs.assignIssue.options.width = 810;
            JIRA.Dialogs.attachFile.options.width = 810;
            JIRA.Dialogs.logWork.options.width = 810;
            JIRA.Dialogs.logWork.options.width = 810;
        }
    });

});
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-analytics-tracker', location = 'jira-agile-module/includes/js/rapid/AnalyticsTracker.js' */
define("jira-agile/rapid/analytics-tracker",["require"],function(e){function a(e,a,r){if(i.isUndefined(e))throw new Error("You must specify a category");this.params={},this.params.category=e;var t=0;i.isUndefined(a)||(this.params.action=a,t++,i.isUndefined(r)||(this.params.label=r,t++)),this.requiredArgumentNames=["action","label","value"].slice(t),this.useAsync=!0}var i=e("underscore");return a.prototype.setAsync=function(e){return this.useAsync=e,this},a.prototype.trigger=function(){for(var e=i.clone(this.params),a=0;a<arguments.length&&!i.isUndefined(this.requiredArgumentNames[a]);a++)e[this.requiredArgumentNames[a]]=arguments[a];this._validateParams(e);var r="gh.analytics.async";AJS.$(AJS).trigger(r,e)},a.prototype._validateParams=function(e){var a=["category","action","label"];i.each(a,function(a){i.isUndefined(e[a])||i.isString(e[a])?i.isUndefined(e[a])&&(e[a]=""):e[a]=e[a].toString()}),i.each(["category","action"],function(a){e[a]=e[a].replace(/\s+/g,"")}),i.isUndefined(e.value)||(e.value=parseInt(e.value,10),isNaN(e.value)&&(e.value=void 0))},a}),AJS.namespace("GH.AnalyticsTracker",null,require("jira-agile/rapid/analytics-tracker"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-globalissueoperations', location = 'jira-agile-module/includes/js/gh-globalissueoperations.js' */
!function(){var r=require("jira-agile/rapid/analytics-tracker"),i=new r("gh.issueaction.gotorapidboard").setAsync(!1),e=require("jira/dialog/form-dialog"),a=require("jira/dialog/dialog-register"),o=e.extend({_performRedirect:function(r){i.trigger("direct"),window.location.href=r}}),n=new o({id:"gh-rapidboard-dialog",trigger:"a.issueaction-greenhopper-rapidboard-operation",ajaxOptions:function(){return a.getDefaultAjaxOptions.apply(this,arguments)}}),t=function(r,i){var e="",a=AJS.$(r);return a.hasClass("js-rapidboard-operation-sprint")?e="sprint.":a.hasClass("js-rapidboard-operation-issue")&&(e="issue."),e+=i};AJS.$(function(){AJS.$(document).on("simpleClick",".issueaction-greenhopper-rapidboard-operation",function(r){r.preventDefault();var e=t(r.currentTarget,"open");i.trigger(e),n.show()}),AJS.$(document).on("simpleClick",".js-select-rapidboard",function(r){var e=t(r.currentTarget,"chosen");i.trigger(e)})})}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-custom-field-pickers', location = 'jira-agile-module/includes/js/field/initFieldPickers.js' */
!function(e){function i(i){e(".js-epic-picker",i).each(function(){var i=e(this),n=new JIRA.EpicPicker({element:i});e(document).trigger(JIRA.EpicPicker.READY_EVENT,n)})}function n(i){e(".js-sprint-picker",i).each(function(){var i=e(this),n=new JIRA.SprintPicker({element:i});e(document).trigger(JIRA.SprintPicker.READY_EVENT,n)})}var r=require("jira/util/events/types");JIRA.bind(r.NEW_CONTENT_ADDED,function(e,r,t){t!==JIRA.CONTENT_ADDED_REASON.panelRefreshed&&(i(r),n(r))})}(AJS.$);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-custom-field-pickers', location = 'jira-agile-module/includes/js/field/EpicPicker.js' */
!function(){"use strict";var e=require("jira/ajs/select/single-select");JIRA.EpicPicker=e.extend({init:function(e){function r(e){var r=!l();return{query:e,projectKey:AJS.$(h).attr("data-project-key"),maxResults:20,excludeDone:r}}function t(e,r,t,i){e=AJS.escapeHTML(String(e)),r=AJS.escapeHTML(String(r)),t=t,i=AJS.escapeHTML(String(i));var n,a=i.toUpperCase(),o=e.toUpperCase(),s=r.toUpperCase(),a=(a+"").replace(/([\\\.\+\*\?\[\^\]\$\(\)\{\}\=\!\<\>\|\:])/g,"\\$1"),c=new RegExp("("+a+")","gi"),l=o.search(c);l>-1&&(n=e.slice(l,l+i.length),e=e.replace(n,"<em>"+n+"</em>")),l=s.search(c),l>-1&&(n=r.slice(l,l+i.length),r=r.replace(n,"<em>"+n+"</em>"));var p=t?" &#8226; "+"Done":"";return e+" - <span class='epic-menu-metadata'>("+r+p+")</span>"}function i(e){if(!e||!e.values)return[];var r=g.getQueryVal(),t=new AJS.GroupDescriptor({weight:0,showLabel:!1,items:[new AJS.ItemDescriptor({label:r,highlighted:!0,styleClass:"ghx-epic-menu-header",customItem:!0,html:"<li><label for='chkShowDoneEpic'><input type='checkbox' id='chkShowDoneEpic'"+(l()?" checked":"")+">"+"Show done epics"+"</label></li>"})],replace:!0});return _.each(e.values,function(e){t.addItem(n(e,r))}),[t]}function n(e,r){var i=e.key,n=e.name,a=e.isDone,o=t(n,i,a,r);return new AJS.ItemDescriptor({value:"key:"+i,fieldText:n,label:o,html:o,allowDuplicate:!1,highlighted:!0})}function a(e,r,t){var i=AJS.$(h);i.siblings(".ghx-error").remove(),i.before(GH.tpl.rapid.notification.renderAuiMessage({message:"Error"+": "+t,type:"error",className:"ghx-error aui-ss"}))}function o(e){var r="",t=!1;return e&&e.length>0&&(r=AJS.format("Epic with key \'\'{0}\'\' does not exist.",e),t=!0),{isError:t,message:r}}function s(e){var r,t;u.apply(g,[e]),e=e||AJS.$.trim(g.$field.val()),t=g.model.getDescriptor(e),!t&&g.$container.hasClass("aui-ss-editing")&&(r=o(e),r.isError?(g.options.errorMessage=r.message,g.showErrorMessage(e)):g.hideErrorMessage())}function c(){g._super(e),u=g.handleFreeInput,g.handleFreeInput=s;var r=require("jira/ajs/layer/inline-layer");g.dropdownController.bind(r.EVENTS.show,function(e,r){r.off("click",'.ghx-epic-menu-header label[for="chkShowDoneEpic"]',p),r.on("click",'.ghx-epic-menu-header label[for="chkShowDoneEpic"]',p)})}function l(){return"true"===localStorage.getItem("gh.epicpicker.showdone")}function p(e){e.preventDefault();var r=!l();return localStorage.setItem("gh.epicpicker.showdone",r),g.$field.click(),!1}var u,h=e.element,g=this;AJS.$.extend(e,{submitInputVal:!0,showDropdownButton:!0,removeDuplicates:!0,ajaxOptions:{url:contextPath+"/rest/agile/1.0/epic/search",query:!0,data:r,formatResponse:i,error:a}});var d=this.setSelection;this.setSelection=function(e,r){e.properties.customItem||d.apply(this,arguments)},c()}}),JIRA.EpicPicker.READY_EVENT="gh.epic-picker.ready"}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-custom-field-pickers', location = 'jira-agile-module/includes/js/field/SprintPicker.js' */
JIRA.SprintPicker=AJS.SingleSelect.extend({init:function(e){function n(e){var n=h.apply(this,arguments);return n.find("a").append(GH.tpl.customfields.sprintpicker.renderSuggestionMeta(e.properties)),n}function t(e){var n,t=this.getSelectedDescriptor();e||t||p(null),o(),this.hideErrorMessage(),n=t?r(t):i(e),n.message&&(this.options.errorMessage=n.message,f.apply(this,arguments),this.$errorMessage.addClass("inline-edit-error")),n.needsScopeChangeWarning&&s()}function i(e){var n=null,t=!1;return e&&e.length>0?v?(n=AJS.format("{0} is not a valid sprint name. This issue will be returned to the backlog.",e),v===m.ACTIVE&&(t=!0)):n=AJS.format("{0} is not a valid sprint name.",e):v===m.ACTIVE&&(t=!0),{message:n,needsScopeChangeWarning:t}}function r(e){var n=!1;return v===m.ACTIVE?n=!!u()||x!=e.properties.value:v===m.FUTURE?e.properties.stateKey===m.ACTIVE&&(n=!0):v||e.properties.stateKey===m.ACTIVE&&(n=!0),{message:null,needsScopeChangeWarning:n}}function s(){if(!S){u()||(S=AJS.$(GH.tpl.rapid.notification.renderAuiMessage({type:"warning",className:"ghx-sprint-picker-scope-warning",icon:!0,title:"Sprint scope will be affected by this action."})));var e=I.$container.closest(".inline-edit-fields");e.size()>0?u()?(S=AJS.$('<div class="ghx-estimate-scope-warning"></div>'),S.text("Sprint scope will be affected by this action."),0===e.find(".field-group .ghx-estimate-scope-warning").length&&e.find(".field-group").append(S)):0===e.find(".field-group .ghx-estimate-scope-warning").length&&e.closest(".editable-field").append(S):(u()&&(S=AJS.$(GH.tpl.rapid.notification.renderAuiMessage({type:"warning",className:"ghx-sprint-picker-scope-warning",icon:!0,title:"Sprint scope will be affected by this action."}))),0===I.$container.closest(".field-group .ghx-sprint-picker-scope-warning").length&&I.$container.closest(".field-group").append(S))}S.show()}function o(){S&&(S.remove(),S=null)}function a(e){if(!e.suggestions&&!e.allMatches)return[];var n=new AJS.GroupDescriptor({weight:0,label:"Suggestions"}),t=new AJS.GroupDescriptor({weight:1,label:"All sprints"});return _.each(l(e.suggestions),function(e){n.addItem(g(e,!0))}),_.each(l(e.allMatches),function(e){t.addItem(g(e,!1))}),[n,t]}function g(e,n){var t=AJS.escapeHTML(String(e.name));return new AJS.ItemDescriptor({value:e.id.toString(),label:e.name,html:t,stateKey:e.stateKey,boardName:e.boardName,allowDuplicate:!1,isSuggestion:n})}function l(e){return _.sortBy(e,function(e){return e.name.toLowerCase()})}function p(e){GH.SprintConfig&&AJS.$(GH).trigger("QuickEdit.fieldChange",{fieldId:GH.SprintConfig.getSprintFieldId(),fieldChangeData:{original:x,updated:e?e.properties.value:null}})}function d(){if(I._super(e),h=I.listController._renders.suggestion,f=I.showErrorMessage,I.listController._renders.suggestion=n,I.showErrorMessage=t,u()){var i=I.$container.closest(".inline-edit-fields"),r=i.size()>0;if(r){var s=w.parent().find("input");s.on("focus",function(){I.showErrorMessage()})}}w.bind("selected",function(e,n,t){u()&&r||t.showErrorMessage(t.getQueryVal()),p(n),I.showErrorMessage()}),I.suggestionsHandler=new J(I.options,I.model)}function c(e,n,t){var i=AJS.$(w);i.siblings(".ghx-error").remove(),i.before(GH.tpl.rapid.notification.renderAuiMessage({message:"Error"+": "+t,type:"error",className:"ghx-error aui-ss"}))}function u(){return GH&&GH.DetailsView}var h,f,S,m={ACTIVE:"ACTIVE",FUTURE:"FUTURE",CLOSED:"CLOSED"},A=10,w=e.element,v=w.data("saved-state"),x=w.data("saved-id"),I=this,J=AJS.SelectSuggestHandler.extend({formatSuggestions:function(e,n){return e=this._super(e,n),0===n.length&&e[e.length-1].footerText("Start typing for sprints."),e}});AJS.$.extend(e,{submitInputVal:!1,showDropdownButton:!0,removeOnUnSelect:!1,maxInlineResultsDisplayed:A,ajaxOptions:{url:contextPath+"/rest/greenhopper/1.0/sprint/picker",query:!0,formatResponse:a,error:c}}),d()}}),JIRA.SprintPicker.READY_EVENT="gh.sprint-picker.ready";;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-custom-field-pickers', location = 'jira-agile-module/includes/js/field/SprintPicker.soy' */
// This file was automatically generated from SprintPicker.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.customfields.sprintpicker.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.customfields == 'undefined') { GH.tpl.customfields = {}; }
if (typeof GH.tpl.customfields.sprintpicker == 'undefined') { GH.tpl.customfields.sprintpicker = {}; }


GH.tpl.customfields.sprintpicker.renderSuggestionMeta = function(opt_data, opt_ignored) {
  return '' + ((opt_data.boardName && ! opt_data.isSuggestion) ? '<span class=\'ghx-sprint-picker-meta\'> (' + GH.tpl.customfields.sprintpicker.renderMetaWithBoardName(opt_data) + ')</span>' : '<span class=\'ghx-sprint-picker-meta\'> (' + GH.tpl.customfields.sprintpicker.renderMetaWithoutBoardName(opt_data) + ')</span>');
};
if (goog.DEBUG) {
  GH.tpl.customfields.sprintpicker.renderSuggestionMeta.soyTemplateName = 'GH.tpl.customfields.sprintpicker.renderSuggestionMeta';
}


GH.tpl.customfields.sprintpicker.renderMetaWithoutBoardName = function(opt_data, opt_ignored) {
  return '' + ((opt_data.stateKey == 'ACTIVE') ? soy.$$escapeHtml('Active sprint') : (opt_data.stateKey == 'FUTURE') ? soy.$$escapeHtml('Future sprint') : '');
};
if (goog.DEBUG) {
  GH.tpl.customfields.sprintpicker.renderMetaWithoutBoardName.soyTemplateName = 'GH.tpl.customfields.sprintpicker.renderMetaWithoutBoardName';
}


GH.tpl.customfields.sprintpicker.renderMetaWithBoardName = function(opt_data, opt_ignored) {
  return '' + ((opt_data.stateKey == 'ACTIVE') ? soy.$$escapeHtml(AJS.format('Active sprint in {0}',opt_data.boardName)) : (opt_data.stateKey == 'FUTURE') ? soy.$$escapeHtml(AJS.format('Future sprint in {0}',opt_data.boardName)) : '');
};
if (goog.DEBUG) {
  GH.tpl.customfields.sprintpicker.renderMetaWithBoardName.soyTemplateName = 'GH.tpl.customfields.sprintpicker.renderMetaWithBoardName';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-custom-field-pickers', location = 'jira-agile-module/includes/js/rapid/ui/notification/Notification.js' */
!function(){var e=require("jira/util/top-same-origin-window"),i=function(){return e(window).document};AJS.namespace("GH.Notification"),GH.Notification.autoHideEnabled=!0;var t=Object.freeze({INFO:"info",SUCCESS:"success"});GH.Notification.showErrors=function(e,i){var t=GH.Notification.prepareNotificationDiv(),o=GH.tpl.rapid.notification.renderErrorMessages(e);"undefined"==typeof i&&(i=!0),AJS.messages.error(t,{title:"Error",body:o,closeable:i}),GH.Notification._divStyle(t)&&t.css(GH.Notification._divStyle(t)),t.show()},GH.Notification.showError=function(e,i,t){var o=GH.Notification.prepareNotificationDiv();"undefined"==typeof t&&(t=!0),AJS.messages.error(o,{title:e,body:i,closeable:t}),GH.Notification._divStyle(o)&&o.css(GH.Notification._divStyle(o)),o.show()},GH.Notification.showWarnings=function(e,i){var t={autoHide:!0,autoHideDelay:5e3,preRendered:!1,showTitle:!1};i=_.extend({},t,i);var o,a=GH.Notification.prepareNotificationDiv();o=i.preRendered?e:GH.tpl.rapid.notification.renderErrorMessages({errors:e});var n={body:o,closeable:!0};i.showTitle&&(n.title="Warning"),AJS.messages.warning(a,n),GH.Notification._divStyle(a)&&a.css(GH.Notification._divStyle(a)),a.show(),i.autoHide&&GH.Notification.autoHideEnabled&&setTimeout(function(){a.hide()},i.autoHideDelay)},GH.Notification.showWarning=function(e){var i=GH.Notification.prepareNotificationDiv();AJS.messages.warning(i,{body:e,closeable:!0}),GH.Notification._divStyle(i)&&i.css(GH.Notification._divStyle(i)),i.show()},GH.Notification.clear=function(){GH.Notification.prepareNotificationDiv().hide()},GH.Notification.handleDateFormatMismatchError=function(e){var i='<a href="'+GH.Ajax.CONTEXT_PATH+'/secure/admin/AdvancedApplicationProperties.jspa">';i+="Advanced Settings",i+="</a>";var t=AJS.format("It appears your Jira date format settings are misconfigured. Please check the {0} and ensure that \'\'jira.date.time.picker.java.format\'\' and \'\'jira.date.time.picker.javascript.format\'\' have matching output.",i);GH.Notification.showWarnings(t,{autoHide:!1,preRendered:!0})},GH.Notification.auiMessage=function(e){var i=_.extend({type:"generic",icon:!0,messageHtml:!1},e);return GH.tpl.rapid.notification.renderAuiMessage({type:i.type,title:i.title,icon:i.icon,messageHtml:i.messageHtml,message:i.message})},GH.Notification.Handler={_defaultNotificationHandler:function(){var e=AJS.$("<div/>").addClass("global-msg");return AJS.$(".global-msg",i()).remove(),AJS.$("body",i()).append(e),e},_defaultDivStyleHandler:function(e){return{marginLeft:-e.outerWidth()/2,top:20}},setCustomDivStyleHandler:function(e){this._customDivStyleHandler=e,this._useDefault=!1},_useDefault:!0,setCustomNotificationHandler:function(e){this._customNotificationHandler=e,this._useDefault=!1},removeCustomHandlers:function(){this._useDefault=!0},getNotificationHandler:function(){return this._useDefault||null==this._customNotificationHandler?this._defaultNotificationHandler:this._customNotificationHandler},getDivStyleHandler:function(){return this._useDefault||null==this._customDivStyleHandler?this._defaultDivStyleHandler:this._customDivStyleHandler}},GH.Notification._divStyle=function(e){var i=GH.Notification.Handler.getDivStyleHandler();return i(e)},GH.Notification.prepareNotificationDiv=function(){var e=GH.Notification.Handler.getNotificationHandler();return e()},GH.Notification.showSuccess=function(e,i){o(t.SUCCESS,e,i)},GH.Notification.showInfo=function(e,i){o(t.INFO,e,i)};var o=function(e,t,o){clearTimeout(GH.Notification.current);var a={timeout:5e3,closeable:!0,shadowed:!0};o=_.extend(a,o,{body:t});var n=GH.Notification.prepareNotificationDiv();AJS.messages[e](n,o),GH.Notification._divStyle(n)&&n.css(GH.Notification._divStyle(n)),n.show(),GH.Notification.autoHideEnabled&&(GH.Notification.current=setTimeout(function(){AJS.$(".global-msg",i()).hide()},o.timeout))};GH.Notification.showIssueMessage=function(e){var i=JIRA.SessionStorage,t=null,o=null;e||(e=i.getItem("selectedIssueId")),e&&(o=i.getItem("selectedIssueKey"),t=i.getItem("selectedIssueMsg"),GH.Notification.showIssueMessageImpl(e,t,o)),i.removeItem("selectedIssueId"),i.removeItem("selectedIssueKey"),i.removeItem("selectedIssueMsg")},GH.Notification.showIssueMessageImpl=function(e,i,t){i||(i="thanks_issue_updated");var o=AJS.params[i];o&&t&&(o=AJS.format(o,t),GH.Notification.showSuccess(o))},GH.Notification.addPageLoadMessage=function(e,i){var t=GH.storage.get("gh.pageloadmessages",!0)||[];t.push({message:e,type:i||"success"}),GH.storage.put("gh.pageloadmessages",t,!0)},GH.Notification._displayPageLoadMessages=function(){var e=GH.storage.get("gh.pageloadmessages",!0);if(e){var i=e[0].type,t="";switch(_.each(e,function(e){t.length>0&&(t+="<br>"),t+=e.message}),i){case"warning":GH.Notification.showWarning(t);break;case"success":default:GH.Notification.showSuccess(t)}GH.storage.put("gh.pageloadmessages",null,!0)}};var a=null;GH.Notification.showBoardUpdatedMessage=function(){var e=void 0,i=AJS.$.Deferred();if(0===AJS.$(".aui-flag[aria-hidden=false]").length){var t=GH.tpl.rapid.notification.renderGHtvMessage({showIgnore:!1});a=AJS.flag({type:"info",body:t}),e=AJS.$(t)}var o=function(e){e.preventDefault(),GH.Notification.clearBoardUpdatedMessage(),i.resolve()};return AJS.$(".js-refresh-now").off("click",o).click(o),i.promise()},GH.Notification.clearBoardUpdatedMessage=function(){a&&a.close()},GH.Notification.isBoardUpdatedMessageVisible=function(){var e=AJS.$("#ghx-update-message");return e.length>0},AJS.$(document).ready(function(){GH.Notification.showIssueMessage(),GH.storage&&GH.Notification._displayPageLoadMessages()})}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-custom-field-pickers', location = 'jira-agile-module/includes/js/rapid/ui/notification/Notification.soy' */
// This file was automatically generated from Notification.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.rapid.notification.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.rapid == 'undefined') { GH.tpl.rapid = {}; }
if (typeof GH.tpl.rapid.notification == 'undefined') { GH.tpl.rapid.notification = {}; }


GH.tpl.rapid.notification.renderErrorMessages = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.errors.length > 1) {
    output += '<ul>';
    var errorList6 = opt_data.errors;
    var errorListLen6 = errorList6.length;
    for (var errorIndex6 = 0; errorIndex6 < errorListLen6; errorIndex6++) {
      var errorData6 = errorList6[errorIndex6];
      output += '<li>' + ((errorData6.noAutoescape) ? soy.$$filterNoAutoescape(errorData6.message) : soy.$$escapeHtml(errorData6.message)) + '</li>';
    }
    output += '</ul>';
  } else {
    var errorList18 = opt_data.errors;
    var errorListLen18 = errorList18.length;
    for (var errorIndex18 = 0; errorIndex18 < errorListLen18; errorIndex18++) {
      var errorData18 = errorList18[errorIndex18];
      output += '<p>' + ((errorData18.noAutoescape) ? soy.$$filterNoAutoescape(errorData18.message) : soy.$$escapeHtml(errorData18.message)) + '</p>';
    }
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.notification.renderErrorMessages.soyTemplateName = 'GH.tpl.rapid.notification.renderErrorMessages';
}


GH.tpl.rapid.notification.renderContextualErrors = function(opt_data, opt_ignored) {
  var output = '';
  var errorList29 = opt_data.errors;
  var errorListLen29 = errorList29.length;
  for (var errorIndex29 = 0; errorIndex29 < errorListLen29; errorIndex29++) {
    var errorData29 = errorList29[errorIndex29];
    output += '<div class="ghx-error">' + soy.$$escapeHtml(errorData29.message) + '</div>';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.notification.renderContextualErrors.soyTemplateName = 'GH.tpl.rapid.notification.renderContextualErrors';
}


GH.tpl.rapid.notification.renderMessageHolder = function(opt_data, opt_ignored) {
  return '<div class="ghx-body-warning">' + soy.$$escapeHtml(AJS.format('This version of {0} is not a supported browser.',opt_data.browser)) + ' <a href="' + soy.$$escapeHtml(opt_data.docsUrl) + '">' + soy.$$escapeHtml('See our documentation for the list of supported browsers.') + '</a></div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.notification.renderMessageHolder.soyTemplateName = 'GH.tpl.rapid.notification.renderMessageHolder';
}


GH.tpl.rapid.notification.renderAuiMessage = function(opt_data, opt_ignored) {
  return '<div id="ghx-global-message" class="aui-message ' + soy.$$escapeHtml(opt_data.type) + ((opt_data.className) ? ' ' + soy.$$escapeHtml(opt_data.className) : '') + '">' + ((opt_data.title) ? '<p class="title">' + ((opt_data.icon) ? '<span class="aui-icon icon-' + soy.$$escapeHtml(opt_data.type) + '"></span>' : '') + '<strong>' + soy.$$escapeHtml(opt_data.title) + '</strong></p>' : '') + ((opt_data.message) ? '<p>' + ((! opt_data.title && opt_data.icon) ? '<span class="aui-icon icon-' + soy.$$escapeHtml(opt_data.type) + '"></span>' : '') + ((opt_data.messageHtml) ? soy.$$filterNoAutoescape(opt_data.message) : soy.$$escapeHtml(opt_data.message)) + '</p>' : '') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.notification.renderAuiMessage.soyTemplateName = 'GH.tpl.rapid.notification.renderAuiMessage';
}


GH.tpl.rapid.notification.renderGHtvMessage = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div id="ghx-update-message" class="ghx-tv-message"><p>' + soy.$$escapeHtml('This board has been updated') + ': <a href="" class="js-refresh-now">' + soy.$$escapeHtml('Refresh') + '</a>' + ((opt_data.showIgnore) ? '<span class="ghx-divider">&bull;</span><a href="" class="js-ignore-refresh">' + soy.$$escapeHtml('Ignore') + '</a>' : '') + '</p></div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.notification.renderGHtvMessage.soyTemplateName = 'GH.tpl.rapid.notification.renderGHtvMessage';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-custom-field-pickers', location = 'jira-agile-module/includes/js/field/SprintMultiselect.js' */
!function(){"use strict";var e=require("jira/util/events/types");JIRA.bind(e.NEW_CONTENT_ADDED,function(e,t){function n(e){var t=new AJS.GroupDescriptor({weight:0,label:"Suggestions",items:_.map(e.suggestions,s)}),n=new AJS.GroupDescriptor({weight:1,label:"All sprints",items:_.map(e.allMatches,s)});return[t,n]}function s(e){e.date=moment(e.date,"YYYY-MM-DDTHH:mm:ssZ").format("LL");var t=GH.tpl.customfields.sprintmultiselect.renderSuggestionMeta(e);return new AJS.ItemDescriptor({value:e.id,label:e.name,html:t,title:GH.tpl.customfields.sprintmultiselect.renderTooltip(e),date:e.date,boardName:e.boardName,stateKey:e.stateKey,highlighted:!0,allowDuplicate:!1})}AJS.$(".js-sprint-checkboxmultiselect",t).each(function(){var e=new AJS.CheckboxMultiSelect({element:this,maxInlineResultsDisplayed:5,content:"ajax",removeOnUnSelect:!0,ajaxOptions:{url:AJS.contextPath()+"/rest/greenhopper/1.0/sprint/picker",error:function(){e._setSuggestions([])},data:{excludeCompleted:!1},query:!0,formatResponse:n},suggestionsHandler:GH.SprintSuggestHandler})})})}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-custom-field-pickers', location = 'jira-agile-module/includes/js/field/SprintMultiselect.soy' */
// This file was automatically generated from SprintMultiselect.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.customfields.sprintmultiselect.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.customfields == 'undefined') { GH.tpl.customfields = {}; }
if (typeof GH.tpl.customfields.sprintmultiselect == 'undefined') { GH.tpl.customfields.sprintmultiselect = {}; }


GH.tpl.customfields.sprintmultiselect.renderSuggestionMeta = function(opt_data, opt_ignored) {
  return '<div>' + soy.$$escapeHtml(opt_data.name) + '</div><div><span class=\'ghx-sprint-multiselect-meta\'> ' + ((opt_data.boardName) ? GH.tpl.customfields.sprintmultiselect.renderMetaWithBoardName(opt_data) : GH.tpl.customfields.sprintmultiselect.renderMetaWithoutBoardName(opt_data)) + '</span></div>';
};
if (goog.DEBUG) {
  GH.tpl.customfields.sprintmultiselect.renderSuggestionMeta.soyTemplateName = 'GH.tpl.customfields.sprintmultiselect.renderSuggestionMeta';
}


GH.tpl.customfields.sprintmultiselect.renderMetaWithoutBoardName = function(opt_data, opt_ignored) {
  return '' + ((opt_data.stateKey == 'ACTIVE') ? soy.$$escapeHtml('Active') : (opt_data.stateKey == 'FUTURE') ? soy.$$escapeHtml('Future') : (opt_data.stateKey == 'CLOSED') ? soy.$$escapeHtml('Closed') : '');
};
if (goog.DEBUG) {
  GH.tpl.customfields.sprintmultiselect.renderMetaWithoutBoardName.soyTemplateName = 'GH.tpl.customfields.sprintmultiselect.renderMetaWithoutBoardName';
}


GH.tpl.customfields.sprintmultiselect.renderMetaWithBoardName = function(opt_data, opt_ignored) {
  return '' + ((opt_data.stateKey == 'ACTIVE') ? soy.$$escapeHtml(AJS.format('Active \xb7 {0}',opt_data.boardName)) : (opt_data.stateKey == 'FUTURE') ? soy.$$escapeHtml(AJS.format('Future \xb7 {0}',opt_data.boardName)) : (opt_data.stateKey == 'CLOSED') ? soy.$$escapeHtml(AJS.format('Closed \xb7 {0}',opt_data.boardName)) : '');
};
if (goog.DEBUG) {
  GH.tpl.customfields.sprintmultiselect.renderMetaWithBoardName.soyTemplateName = 'GH.tpl.customfields.sprintmultiselect.renderMetaWithBoardName';
}


GH.tpl.customfields.sprintmultiselect.renderTooltip = function(opt_data, opt_ignored) {
  return '' + ((opt_data.stateKey == 'ACTIVE') ? soy.$$escapeHtml(AJS.format('Started on {0}',opt_data.date)) : (opt_data.stateKey == 'FUTURE') ? soy.$$escapeHtml('Future') : (opt_data.stateKey == 'CLOSED') ? soy.$$escapeHtml(AJS.format('Closed on {0}',opt_data.date)) : '');
};
if (goog.DEBUG) {
  GH.tpl.customfields.sprintmultiselect.renderTooltip.soyTemplateName = 'GH.tpl.customfields.sprintmultiselect.renderTooltip';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-custom-field-pickers', location = 'jira-agile-module/includes/js/field/SprintSuggestHandler.js' */
function prepareSelectedDescriptors(e){_.each(e,function(e){var t=JSON.parse(e.properties.meta);t.date=moment(t.date).format("LL"),e.properties.title=GH.tpl.customfields.sprintmultiselect.renderTooltip(t),e.properties.html=GH.tpl.customfields.sprintmultiselect.renderSuggestionMeta(t)})}define("includes/js/field/sprint-suggest-handler",["jira/ajs/select/suggestions/checkbox-multi-select-suggest-handler"],function(e){return e.extend({formatSuggestions:function(e,t){var r=this.model.getDisplayableSelectedDescriptors();prepareSelectedDescriptors(r);var s=function(e){var t;for(t in r)if(r[t].properties.value===e.properties.value.toString())return!1;return!0};return e=_.map(e,function(e){var t=_.filter(e.properties.items,s);return e.properties.items=t,e}),this._super(e,t)}})}),AJS.namespace("GH.SprintSuggestHandler",null,require("includes/js/field/sprint-suggest-handler"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-custom-field-pickers', location = 'jira-agile-module/includes/js/field/EpicLinkMultiselect.js' */
require(["require"],function(e){function t(e){return 0!==e.indexOf("project")?"":i(e).trim()}function i(e){function t(e){var t=e.match(/\bproject\s*=\s*(\S+)/i);return t?t[1]:null}function i(e){var t=e.match(/\bproject\s+in\s+\((.*?)\)/i);return t?t[1]:null}return t(e)||i(e)}var n=e("jquery"),r=e("underscore"),s=e("jira/util/events/types");JIRA.bind(s.NEW_CONTENT_ADDED,function(e,i){var s=n("#jql",this).val();i.find(".js-epiclink-checkboxmultiselect").each(function(){var e=new AJS.CheckboxMultiSelect({element:this,matchingStrategy:"(^|.*?(.*))({0})(.*)",maxInlineResultsDisplayed:5,content:"ajax",removeOnUnSelect:!0,ajaxOptions:{url:AJS.contextPath()+"/rest/greenhopper/1.0/epics",error:function(){e._setSuggestions([])},data:{searchQuery:"",projectKey:t(s),filterEpicsByGivenProjects:!0,maxResults:100},query:!0,minQueryLength:0,formatResponse:function(e){var t=[];if(t.push(new AJS.GroupDescriptor({weight:1,items:[new AJS.ItemDescriptor({highlighted:!0,label:"No Epic Link",value:"EMPTY",title:"EMPTY"})]})),!e||!e.epicLists||0===e.total)return t;for(var i=0;i<e.epicLists.length;i++){var n=e.epicLists[i],s=n.epicNames,c=new AJS.GroupDescriptor({label:n.listDescriptor,weight:i});s.length>0&&(r.each(s,function(e){c.addItem(new AJS.ItemDescriptor({highlighted:!0,label:e.name+" - ("+e.key+")",value:e.key,title:e.key}))}),t.push(c))}return t}},suggestionsHandler:GH.EpicLinkSuggestHandler})})})});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-custom-field-pickers', location = 'jira-agile-module/includes/js/field/EpicLinkSuggestHandler.js' */
define("includes/js/field/epic-link-suggest-handler",["jira/ajs/select/suggestions/checkbox-multi-select-suggest-handler"],function(e){return e.extend({formatSuggestions:function(e,r){var i=this.model.getDisplayableSelectedDescriptors(),t=function(e){var r;for(r in i)if(i[r].properties.value===e.properties.value.toString())return!1;return!0};return e=_.map(e,function(e){var r=_.filter(e.properties.items,t);return e.properties.items=r,e}),this._super(e,r)}})}),AJS.namespace("GH.EpicLinkSuggestHandler",null,require("includes/js/field/epic-link-suggest-handler"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-create-board-adg3-no-condition', location = 'jira-agile-module/includes/js/sidebar/create-board-adg3.js' */
define("jira-agile/sidebar/create-board-adg3",["wrm/require","jira/analytics","jira/featureflags/feature-manager"],function(e,a,r){"use strict";function t(e,a){var r=a.actionId;if(r===d)return e.preventDefault(),i(!0)}function i(){function t(){o?GH.StartWizardView.startWizardWithoutProjectCreate():GH.StartWizardView.startWizardWithUserConfigCheck(),a.send({name:"jira.frontend.fe.navigation.scope-switcher.action.click",properties:{actionId:d,pageMode:n()}}),r.isFeatureEnabled("jsw.classic.lightweight.frontend")&&AJS.$(GH).unbind("WizardViewLoaded",t)}function i(){return GH.StartWizardView?t:void AJS.$(GH).bind("WizardViewLoaded",t)}var o=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return AJS.dim(),r.isFeatureEnabled("jsw.classic.lightweight.frontend")?e(["wr!com.pyxis.greenhopper.jira:gh-create-board"],i()):e(["wr!com.pyxis.greenhopper.jira:gh-create-board"],t)}function n(){var e=GH&&GH.RapidBoard&&GH.RapidBoard.State&&GH.RapidBoard.State.getMode&&GH.RapidBoard.State.getMode();return e||"other"}var d="gh.rapid.board.create";return{handleCreateBoardAction:t,openCreateBoardModal:i}}),function(){var e=require("jira-agile/sidebar/create-board-adg3");AJS.$(function(){JIRA&&JIRA.API&&JIRA.API.getSidebar().done(function(a){a.on(a.events.SCOPE_SWITCHER_SELECT_ACTION,e.handleCreateBoardAction,!0)})})}();;
;
/* module-key = 'com.atlassian.analytics.analytics-client:js-events', location = 'js/node_modules/@atlassian/cloud-analytics-js/store-1.3.1.js' */
(function(){var l={},h=window,k=h.document,c="localStorage",n="globalStorage",d="__storejs__",g;l.disabled=false;l.set=function(e,o){};l.get=function(e){};l.remove=function(e){};l.clear=function(){};l.transact=function(e,o){var p=l.get(e);if(typeof p=="undefined"){p={}}o(p);l.set(e,p)};l.serialize=function(e){return JSON.stringify(e)};l.deserialize=function(e){if(typeof e!="string"){return undefined}return JSON.parse(e)};function b(){try{return(c in h&&h[c])}catch(e){return false}}function m(){try{return(n in h&&h[n]&&h[n][h.location.hostname])}catch(e){return false}}if(b()){g=h[c];l.set=function(e,o){if(o===undefined){return l.remove(e)}g.setItem(e,l.serialize(o))};l.get=function(e){return l.deserialize(g.getItem(e))};l.remove=function(e){g.removeItem(e)};l.clear=function(){g.clear()}}else{if(m()){g=h[n][h.location.hostname];l.set=function(e,o){if(o===undefined){return l.remove(e)}g[e]=l.serialize(o)};l.get=function(e){return l.deserialize(g[e]&&g[e].value)};l.remove=function(e){delete g[e]};l.clear=function(){for(var e in g){delete g[e]}}}else{if(k.documentElement.addBehavior){var j,f;try{f=new ActiveXObject("htmlfile");f.open();f.write('<script>document.w=window<\/script><iframe src="/favicon.ico"></frame>');f.close();j=f.w.frames[0].document;g=j.createElement("div")}catch(i){g=k.createElement("div");j=k.body}function a(e){return function(){var p=Array.prototype.slice.call(arguments,0);p.unshift(g);j.appendChild(g);g.addBehavior("#default#userData");g.load(c);var o=e.apply(l,p);j.removeChild(g);return o}}l.set=a(function(p,e,o){if(o===undefined){return l.remove(e)}p.setAttribute(e,l.serialize(o));p.save(c)});l.get=a(function(o,e){return l.deserialize(o.getAttribute(e))});l.remove=a(function(o,e){o.removeAttribute(e);o.save(c)});l.clear=a(function(q){var o=q.XMLDocument.documentElement.attributes;q.load(c);for(var p=0,e;e=o[p];p++){q.removeAttribute(e.name)}q.save(c)})}}}try{l.set(d,d);if(l.get(d)!=d){l.disabled=true}l.remove(d)}catch(i){l.disabled=true}if(typeof module!="undefined"){module.exports=l}else{if(typeof define==="function"&&define.amd){define(l)}else{this.store=l}}})();;
;
/* module-key = 'com.atlassian.analytics.analytics-client:js-events', location = 'js/node_modules/@atlassian/cloud-analytics-js/page-visibility.js' */
define("atlassian/analytics/page-visibility",function(){var a=(document.hidden!==undefined);var b={supported:a,isHidden:function(){return a?document.hidden:false}};return b});;
;
/* module-key = 'com.atlassian.analytics.analytics-client:js-events', location = 'js/node_modules/@atlassian/cloud-analytics-js/atlassian-analytics.js' */
(function(d){function e(x){var B=250*1024;var z="atlassian-analytics."+x;var y=z+".lock";var D="null";var A=(window.localStorage[z]||"").length;var C=(window.localStorage[y]||D)!==D;if(C&&A>B){window.localStorage[z]=JSON.stringify([{name:"grow0.event.queue.cleared",time:new Date().valueOf(),properties:{queueSize:A}}]);window.localStorage[y]=D}}["jira","confluence","unknown"].forEach(function(x){try{e(x)}catch(y){}});var q=AJS.$.ajax;var l="atlassian-analytics";var j=typeof AJS.contextPath=="function"?AJS.contextPath():typeof AJS.Confluence!="undefined"?AJS.Confluence.getContextPath():window.contextPath!=null?window.contextPath:"";var p=null;var m=null;var g=null;var r="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(z){var y=Math.random()*16|0,x=z=="x"?y:(y&3|8);return x.toString(16)});var t=function(){var x="unknown";if(document.body.id=="jira"){x="jira"}else{if(document.body.id=="com-atlassian-confluence"){x="confluence"}}m=l+"."+x;g=m+".lock"};var f=function(){if(store.get(g)){return false}store.set(g,r);return(store.get(g)===r)};var u=function(){store.set(g,null)};var i=function(){var y=[],A,B,x,z;if(AJS.EventQueue.length==0){return}y=store.get(m)||y;for(x=0,z=AJS.EventQueue.length;x<z;++x){B=AJS.EventQueue[x];if(B.name){A={name:B.name,properties:B.properties,time:B.time||0};y.push(A)}}AJS.EventQueue.length=0;store.set(m,y)};var v=0;var a=function(x){return Math.min(5000*Math.pow(2,x),5*60*1000)};var h=function(){var A;function y(){setTimeout(h,a(v=0))}function x(){setTimeout(h,a(++v))}if(!f()){return y()}i();A=store.get(m);if(!A||!A.length){u();return y()}store.remove(m);u();if(!o(A)){return y()}var B=new Date().getTime();for(var z=0;z<A.length;z++){if(A[z].time>0){A[z].timeDelta=A[z].time-B}else{A[z].timeDelta=z-A.length}delete A[z].time}p=q({type:"POST",url:j+"/rest/analytics/1.0/publish/bulk",data:JSON.stringify(A),contentType:"application/json",dataType:"json"});p.fail(function(){AJS.EventQueue.concat(A);i();x()});p.done(function(){y()})};var o=function(z){for(var y=z.length-1;y>=0;y--){var B="";var A=z[y];var x=A.properties;if(typeof A.name==="undefined"){B="you must provide a name for the event."}else{if(typeof x!=="undefined"&&x!==null){if(x.constructor!==Object){B="properties must be an object with key value pairs."}else{b(x)}}}if(B!==""){AJS.log("WARN: Invalid analytics event detected and ignored, "+B+"\nEvent: "+JSON.stringify(A));z.splice(y,1)}}return z.length};var b=function(z){for(var y in z){if(z.hasOwnProperty(y)){var x=z[y];if(c(x)&&k(x)){}else{if(c(x)&&x.toString){z[y]=x.toString()}else{z[y]=""}}}}};function c(x){return typeof x!=="undefined"&&x!==null}function k(x){return typeof x==="number"||typeof x==="string"||typeof x==="boolean"}var n=function(){if(p&&!(p.state()==="resolved"||p.state()==="rejected")){p.abort()}};AJS.EventQueue=AJS.EventQueue||[];var s=Array.prototype.push;AJS.EventQueue.push=function(x){x.time=new Date().getTime();s.call(AJS.EventQueue,x)};AJS.toInit(function(){t();setTimeout(h,500);w()});d(window).unload(function(){n();i()});AJS.Analytics={triggerPrivacyPolicySafeEvent:function(x,y){AJS.log("WARN: 'triggerPrivacyPolicySafeEvent' has been deprecated");AJS.EventQueue.push({name:x,properties:y})}};AJS.bind("analytics",function(x,y){AJS.EventQueue.push({name:y.name,properties:y.data})});AJS.bind("analyticsEvent",function(x,y){AJS.EventQueue.push({name:y.name,properties:y.data})});var w=function(){if(window.location.pathname.indexOf("/secure/admin/ViewApplicationProperties")>-1){AJS.$("[data-property-id='analytics-enabled']").remove()}else{if(window.location.pathname.indexOf("/secure/admin/EditApplicationProperties")>-1){var y=AJS.$(":contains(Enable Atlassian analytics)");if(y.size()>0){var x=y[y.size()-2];if(x){x.remove()}}}}}}(AJS.$));;
;
/* module-key = 'com.atlassian.jira.jira-atlaskit-plugin:global-cache', location = 'jira-atlaskit-module/js/cache-api.js' */
!function(){var n,e=new Promise(function(e){n=e});AJS.namespace("JIRA.API"),JIRA.API.getCache=function(){return e},define("jira/cache",function(){return function(e){n(e)}})}();;
;
/* module-key = 'com.atlassian.crowd.user-provisioning-vertigo-plugin:common-flag-resources', location = 'user-provisioning-vertigo-module/js/atlassian/aui-polyfill/flag.js' */
/*
 * Polyfill for aui/flag for use in products that don't provide a version (due to using an ancient AUI version).
 */
(function() {
    try {
        require('aui/flag')
    } catch (e) {
        define('aui/flag', [], displayFlagAsMessage);
    }

    function displayFlagAsMessage(args) {
        var type = (args.type || "").toLowerCase();
        var message = typeof AJS.messages[type] == 'function' ? AJS.messages[type] : AJS.messages.generic;

        // for some reason we display info messages as warnings... keeping that for backward compatibility
        message(".notifications", { body: args.message });
    }
})();
;
;
/* module-key = 'com.atlassian.crowd.user-provisioning-vertigo-plugin:common-flag-resources', location = 'user-provisioning-vertigo-module/js/atlassian/flag.js' */
/**
 * This is a wrapper around AUI Flag which will escape the body text of the Flag unless explicitly told not to.
 *
 * The body will NOT be escaped iff the passed in object has an attribute 'isHtml' and it is set to true.
 */
define('user-management-common/flag', [
    'aui/flag',
    'underscore',
    'jquery'
], function(
    flag,
    _,
    $
) {
    return function(options){
        var createdFlag;
        // If not explicitly HTML, escape the body
        if(!options.isHtml) {
            options.body = _.escape(options.body);
        }

        createdFlag = flag(options);
        $(createdFlag).on('aui-flag-close', function(){
            createdFlag.dispatchEvent(new CustomEvent('um-flag-close', { bubbles: true }));
        });
        return createdFlag;
    };
});
;
;
/* module-key = 'com.atlassian.crowd.user-provisioning-vertigo-plugin:impersonation-resources', location = 'user-provisioning-vertigo-module/js/atlassian/helpers/cookies.js' */
define('user-management-common/helpers/cookies', [], function() {
    return {
        readCookie: function (name) {
            //document.cookie lists cookies in the format "name1=value1; name2=value2" etc
            //see https://developer.mozilla.org/en-US/docs/Web/API/Document/cookie
            var nameEQ = name + "=";
            var cookieList = document.cookie.split(';');
            for (var i = 0; i < cookieList.length; i++) {
                var cookie = cookieList[i];

                //Remove any leading spaces (normally 1, but I don't want to make assumptions)
                while (cookie.charAt(0) == ' ') {
                    cookie = cookie.substring(1, cookie.length);
                }

                //Remove the name1= part and return what is left
                if (cookie.indexOf(nameEQ) === 0) {
                    return decodeURIComponent(cookie.substring(nameEQ.length, cookie.length));
                }
            }
            return null;
        }
    };
});
;
;
/* module-key = 'com.atlassian.crowd.user-provisioning-vertigo-plugin:impersonation-resources', location = 'user-provisioning-vertigo-module/js/atlassian/impersonation/impersonation.js' */
/**
 * This module displays an informational message with a link to drop the impersonation, if the current user is
 * being impersonated. This script is used in both user management and user provisioning plugins.
 */
define('user-management-common/impersonation/impersonation', [
    'jquery',
    'underscore',
    'user-management-common/flag',
    'user-management-common/helpers/cookies'
], function(
    $,
    _,
    flag,
    cookies
) {
    var showImpersonationMessaging = function(username){
        var message = AJS.format("You\'\'re temporarily logged in as {0}. When you\'\'re done, {1}switch back{2} to your account.",
            _.escape(impersonation.getDisplayName()),
            '<a id="impersonation-dismiss-trigger" href="#">', '</a>');

        var messageFlag = flag({ type: 'info', isHtml: true, body: message });

        $(messageFlag).find("#impersonation-dismiss-trigger").click(function (e) {
            e.preventDefault();
            impersonation.dropImpersonation().then(function () {
                if (username) {
                    window.open("/admin/users/view?username=" + encodeURIComponent(username), "_top");
                } else {
                    window.open("/admin/users", "_top");
                }
            });
        });
    };

    function showImpersonationFlag() {
        var message = AJS.format("You\'\'re temporarily logged in as another user. When you\'\'re done, {0}switch back{1} to your account.",
            '<a id="impersonation-dismiss-trigger" href="#">', '</a>');

        var messageFlag = flag({ type: 'info', isHtml: true, body: message });

        $(messageFlag).find('#impersonation-dismiss-trigger').click(function (e) {
            e.preventDefault();
            impersonation.getReleaseImpersonationLink().then(function (data) {
                window.open(data.link, '_top');
            });
        });
    }

    var impersonation = {
        init: function () {
            if (impersonation.isImpersonated()) {
                showImpersonationMessaging(impersonation.getUsername());
            } else if (impersonation.getUserId()) {
                showImpersonationFlag();
            }
        },

        getUserId: function () {
            return cookies.readCookie('um.user.impersonated.userid');
        },

        getUsername: function () {
            return cookies.readCookie("um.user.impersonated.username");
        },

        getDisplayName: function () {
            return cookies.readCookie("um.user.impersonated.displayname");
        },

        getReleaseImpersonationLink: function () {
            var userId = impersonation.getUserId();
            var cloudId = AJS.Meta.get('cloud-id');
            return $.ajax({
                type: 'POST',
                url: '/gateway/api/adminhub/um/site/' + cloudId + '/users/' + userId + '/impersonate/release',
                dataType: 'json'
            });
        },

        dropImpersonation: function () {
            return $.ajax({
                type: "POST",
                contentType: 'application/json',
                url: "/admin/rest/um/1/impersonate/release"
            });
        },

        isImpersonated: function () {
            return !!impersonation.getUsername();
        }
    };
    return impersonation;
});
;
;
/* module-key = 'com.atlassian.crowd.user-provisioning-vertigo-plugin:impersonation-resources', location = 'user-provisioning-vertigo-module/js/atlassian/impersonation-init.js' */
require(['jquery', 'user-management-common/impersonation/impersonation'],
function($, impersonation) {
    $(impersonation.init);
});;
;
/* module-key = 'com.atlassian.pas:pas-everypage-static', location = 'public-announcement-module/js/ajs-amd.js' */
define('pas/ajs', [], function () {
    'use strict';

    return AJS;
});;
;
/* module-key = 'com.atlassian.pas:pas-everypage-static', location = 'public-announcement-module/js/store_js/store.js' */
//
// store.js by Frank Kohlhepp
// Copyright (c) 2011 - 2012 Frank Kohlhepp
// https://github.com/frankkohlhepp/store-js
// License: MIT-license
//
(function () {
    var has = function (object, key) {
        return Object.prototype.hasOwnProperty.call(object, key);
    };

    var objectGetLength = function (object) {
        var count = 0;
        for (var key in object) {
            if (has(object, key)) {
                count++;
            }
        }

        return count;
    };

    var arrayIndexOf = function (array, item, from) {
        var length = array.length >>> 0;
        for (var i = (from < 0) ? Math.max(0, length + from) : from || 0; i < length; i++) {
            if (array[i] === item) {
                return i;
            }
        }

        return -1;
    };

    var arrayContains = function (array, item, from) {
        return arrayIndexOf(array, item, from) !== -1;
    };

    var arrayInclude = function (array, item) {
        if (!arrayContains(array, item)) {
            array.push(item);
        }
        return array;
    };

    var Store = this.Store = function (name, defaults, watcherSpeed) {
        this.name = name;
        this.defaults = defaults || {};
        this.watcherSpeed = watcherSpeed || 500;
        this.listeners = {};

        // Apply defaults
        this.applyDefaults();
    };

    Store.clear = function () {
        localStorage.clear();
    };

    Store.prototype.applyDefaults = function () {
        for (var key in this.defaults) {
            if (has(this.defaults, key) && this.get(key) === undefined) {
                this.set(key, this.defaults[key]);
            }
        }

        return this;
    };

    Store.prototype.watcher = function (force) {
        if (this.watcherTimer) {
            clearTimeout(this.watcherTimer);
        }

        if (objectGetLength(this.listeners) || force) {
            this.newObject = this.toObject();

            if (this.oldObject) {
                for (var key in this.newObject) {
                    if (has(this.newObject, key) && this.newObject[key] !== this.oldObject[key]) {
                        this.fireEvent(key, this.newObject[key]);
                    }
                }

                for (var key in this.oldObject) {
                    if (has(this.oldObject, key) && !has(this.newObject, key)) {
                        this.fireEvent(key, this.newObject[key]);
                    }
                }
            }

            this.oldObject = this.newObject;
            var that = this;
            this.watcherTimer = setTimeout(function () {
                that.watcher();
            }, this.watcherSpeed);
        }

        return this;
    };

    Store.prototype.get = function (name) {
        var value = localStorage.getItem("store." + this.name + "." + name);
        if (value === null) {
            return undefined;
        }
        try {
            return JSON.parse(value);
        } catch (e) {
            return null;
        }
    };

    Store.prototype.set = function (name, value) {
        if (value === undefined) {
            this.remove(name);
        } else {
            if (typeof value === "function") {
                value = null;
            }
            try {
                value = JSON.stringify(value);
            } catch (e) {
                value = null;
            }
            localStorage.setItem("store." + this.name + "." + name, value);
        }

        return this;
    };

    Store.prototype.remove = function (name) {
        localStorage.removeItem("store." + this.name + "." + name);
        return this.applyDefaults();
    };

    Store.prototype.reset = function () {
        var name = "store." + this.name + ".";
        for (var i = (localStorage.length - 1); i >= 0; i--) {
            if (localStorage.key(i).substring(0, name.length) === name) {
                localStorage.removeItem(localStorage.key(i));
            }
        }

        return this.applyDefaults();
    };

    Store.prototype.toObject = function () {
        var values = {};
        var name = "store." + this.name + ".";
        for (var i = (localStorage.length - 1); i >= 0; i--) {
            if (localStorage.key(i).substring(0, name.length) === name) {
                var key = localStorage.key(i).substring(name.length);
                var value = this.get(key);
                if (value !== undefined) {
                    values[key] = value;
                }
            }
        }

        return values;
    };

    Store.prototype.fromObject = function (values, merge) {
        if (!merge) {
            this.reset();
        }
        for (var key in values) {
            if (has(values, key)) {
                this.set(key, values[key]);
            }
        }

        return this;
    };

    Store.prototype.addEvent = function (selector, callback) {
        this.watcher(true);
        if (!this.listeners[selector]) {
            this.listeners[selector] = [];
        }
        arrayInclude(this.listeners[selector], callback);
        return this;
    };

    Store.prototype.removeEvent = function (selector, callback) {
        for (var i = (this.listeners[selector].length - 1); i >= 0; i--) {
            if (this.listeners[selector][i] === callback) {
                this.listeners[selector].splice(i, 1);
            }
        }

        if (!this.listeners[selector].length) {
            delete this.listeners[selector];
        }
        return this;
    };

    Store.prototype.fireEvent = function (name, value) {
        var selectors = [name, "*"];
        for (var i = 0; i < selectors.length; i++) {
            var selector = selectors[i];
            if (this.listeners[selector]) {
                for (var j = 0; j < this.listeners[selector].length; j++) {
                    this.listeners[selector][j](value, name, this.name);
                }
            }
        }

        return this;
    };
}());;
;
/* module-key = 'com.atlassian.pas:pas-everypage-static', location = 'public-announcement-module/js/store_js/store-amd.js' */
define("pas/js/store_js/store", function () {
    return Store;
});;
;
/* module-key = 'com.atlassian.pas:pas-everypage-static', location = 'public-announcement-module/js/pasConfig.js' */
define("pas/js/pas-config", [
    "jquery",
    "pas/ajs",
    "pas/js/store_js/store"
], function ($,
             AJS,
             Store) {
    "use strict";

    var MINUTE = 60 * 1000;

    return {
        timeUpdateInterval: MINUTE,
        pollingInterval: 15 * MINUTE,
        url: AJS.contextPath() + "/rest/pas/latest/announcement",
        store: new Store("Atlassian.PAS.Announcements." + document.location.hostname + AJS.contextPath() + "." + $("meta[name='ajs-remote-user']").attr('content')),
        nextAnnouncementKey: "nextAnnouncement",
        timeStampKey: "timeStamp",
        config: {
            url: AJS.contextPath() + "/rest/pas/latest/settings",
            timeStampKey: "configTimeStampKey",
            pollingInterval: 30 * 60 * 1000,
            currentConfigKey: "currentConfigKey"
        },
        cookieKey: AJS.contextPath().replace('/', '') + "_pas.dismiss"
    };
});;
;
/* module-key = 'com.atlassian.pas:pas-everypage-static', location = 'public-announcement-module/js/pas.js' */
require([
    "jquery",
    "aui/flag",
    "pas/ajs",
    "pas/js/pas-config"
], function ($,
             flag,
             AJS,
             PAS) {
    "use strict";

    AJS.toInit(function () {
        var showTimeout = null;
        var hideTimeout = null;
        var updateTimeout = null;
        var timeLeft = 0;

        var announcementSource;
        var projectKey;
        var issueNumber;

        var friendlyFormatDate = function (delay) {
            var padString = function (s, c, len) {
                s = "" + s; // ensure it's a string
                while (s.length < len) {
                    s = c + s;
                }
                return s;
            };
            var pluralize = function (val, unit) {
                var result = val + " " + unit;
                if (val != 1) {
                    result += "s";
                }
                return result;
            };

            var oneMinute = 60000;
            var oneHour = 3600000;
            var oneDay = 86400000;

            if (delay < oneMinute) {
                return "in less than a minute";
            }
            else if (delay < oneHour) {
                return "in " + pluralize(Math.round(delay / oneMinute), "min");
            }
            else if (delay < oneDay) {
                return "in " + pluralize(Math.round(delay / oneHour), "hour") + " " + pluralize(Math.round((delay % oneHour) / oneMinute), "minute");
            }
            else {
                var d = new Date();
                d.setSeconds(d.getSeconds() + Math.round(delay / 1000));
                return (
                    padString(d.getFullYear(), '0', 4) +
                    "/" +
                    padString(d.getMonth() + 1, '0', 2) +
                    "/" +
                    padString(d.getDate(), '0', 2) +
                    " " +
                    padString(d.getHours(), '0', 2) +
                    ":" +
                    padString(d.getMinutes(), '0', 2)
                );
            }
        };

        var clearState = function () {
            if (showTimeout != null) {
                clearTimeout(showTimeout);
            }
            if (hideTimeout != null) {
                clearTimeout(hideTimeout);
            }
            if (updateTimeout != null) {
                clearInterval(updateTimeout);
            }
            document.getElementById("pas-announcement").close();
        };

        var showAnnouncement = function () {
            var announcementContent = PAS.announcementText;
            var announcementUrl = PAS.announcementUrl || "";
            var announcementTime = PAS.announcementTime;
            var announcementId = PAS.announcementId;

            var announcementTicket = PAS.announcementTicket;
            announcementSource = PAS.announcementSource;

            var projectKeyPattern = /([A-Z])\w+/g;
            var issueNumberPattern = /\d+/g;

            projectKey = projectKeyPattern.exec(announcementTicket);
            issueNumber = issueNumberPattern.exec(announcementTicket);

            function escapeRegExp(str) {
                return str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&");
            }

            var announcementTargetPath = escapeRegExp(PAS.announcementTargetPath) || "";
            var announcementTargetPathRegex = new RegExp(announcementTargetPath);

            var announcementFlag;

            if (location.href.match(announcementTargetPathRegex) !== null) {
                announcementFlag = flag({
                    type: "info",
                    title: "Public service announcement",
                    body: announcementContent + announcementUrl + announcementTime,
                    close: "manual"
                });

                if (announcementSource == "alertr") {
                    triggerPasAlertrAnalytics({
                        name: "pas.alertr.announcement.display"
                    });
                }
            }

            if (announcementFlag !== undefined) {
                announcementFlag.setAttribute("id", "pas-announcement");
                announcementFlag.setAttribute("announcementId", announcementId);

                announcementFlag.addEventListener("aui-flag-close", function () {
                    dismissAnnouncement();
                });
            }

            addUrlClickedEventHandler();
        };

        var addUrlClickedEventHandler = function () {
            AJS.$("#more-info").on('click', function () {
                if (announcementSource == "alertr") {
                    triggerPasAlertrAnalytics({
                        name: "pas.alertr.announcement.url.clicked"
                    });
                }
            });
        };

        var dismissAnnouncement = function () {
            var announcementId = PAS.announcementId;
            var expiry = new Date();
            var cookieValue;

            expiry.setMonth(expiry.getMonth() + 1);
            cookieValue = announcementId + "; expires=" + expiry.toUTCString();
            document.cookie = PAS.cookieKey + "=" + cookieValue + "; path=/";
            AJS.trigger('analyticsEvent', {
                name: 'com.atlassian.plugins.pas.dismiss-announcement.click',
                data: {message: $("#pas-announcement span:first").text()}
            });

            if (announcementSource == "alertr") {
                triggerPasAlertrAnalytics({
                    name: "pas.alertr.announcement.dismissed"
                });
            }
        };

        var checkDismissed = function (announcementId, cookieKey) {
            var cookies = document.cookie.split(";");
            for (var i = 0; i < cookies.length; i++) {
                var cookie = cookies[i];
                var pos = cookie.indexOf("=");
                var key = cookie.substr(0, pos).trim();
                var value = cookie.substr(pos + 1).trim();
                if (key == cookieKey) {
                    return value == announcementId;
                }
            }
            return false;
        };

        var updateTimeLeft = function () {
            if (timeLeft > 0) {
                var newTimeLeft = timeLeft - PAS.timeUpdateInterval;
                timeLeft = newTimeLeft;
                PAS.announcementTime = Atlassian.PAS.Templates.pasTime({
                    time: friendlyFormatDate(newTimeLeft)
                });
            }
            else {
                clearInterval(updateTimeout);
                updateTimeout = null;
            }
        };

        var triggerPasAlertrAnalytics = function (event) {
            var key = projectKey[0];
            AJS.trigger('analyticsEvent', {
                name: event.name,
                data: {issueNumber: issueNumber, project: key}
            });
        };

        var scheduleAnnouncementToAppear = function () {
            function adjustTimeToStart() {
                return data.timeToStart - getTimeSinceLastPoll();
            }

            var data = getFromLocalStorage(PAS.nextAnnouncementKey);

            // Do nothing if no announcement or if the user dismissed it
            if (data == null || data.message == null || checkDismissed(data.id, PAS.cookieKey)) {
                return;
            }

            timeLeft = data.timeLeft;

            PAS.announcementText = data.message;
            PAS.announcementTime = Atlassian.PAS.Templates.pasTime({
                time: friendlyFormatDate(timeLeft)
            });
            updateTimeout = setInterval(updateTimeLeft, PAS.timeUpdateInterval);
            if (data.url) {
                PAS.announcementUrl = Atlassian.PAS.Templates.pasUrl({
                    url: data.url
                });
            }

            PAS.announcementTargetPath = data.targetPath;
            PAS.announcementId = data.id;

            var timeToHide = data.duration;
            data.timeToStart = adjustTimeToStart();

            if (data.source) {
                PAS.announcementSource = data.source;
            }
            if (data.incidentTicket) {
                PAS.announcementTicket = data.incidentTicket;
            }

            if (data.timeToStart > 0) {
                timeToHide += data.timeToStart;
                showTimeout = setTimeout(function () {
                    showAnnouncement();
                }, data.timeToStart);
            } else {
                showAnnouncement();
            }

            if (timeToHide > 0) {
                hideTimeout = setTimeout(function () {
                    clearState();
                }, timeToHide);
            }
        };

        function pollForMessage(callback) {
            $.ajax({
                type: "GET",
                contentType: "application/json",
                url: PAS.url,
                cache: false,
                global: false,
                timeout: 5000,
                success: function (json, resultStatus) {
                    setInLocalStorage(PAS.timeStampKey, nowInMs());
                    setInLocalStorage(PAS.nextAnnouncementKey, json);
                    callback();
                }, error: function (xhr, resultStatus, e) {
                    AJS.log("Could not get announcement from server: " + e);
                }

            });
        }

        var nowInMs = function () {
            return new Date().getTime();
        };

        var getTimeSinceLastPoll = function () {
            return (nowInMs() - getFromLocalStorage(PAS.timeStampKey));
        };

        function getFromLocalStorage(key) {
            return PAS.store.get(key);
        }

        function setInLocalStorage(key, value) {
            return PAS.store.set(key, value);
        }

        function isStale(timeStampKey, pollingInterval) {
            var previousPollTimeStamp = getFromLocalStorage(timeStampKey);
            var timeSinceLastPoll = nowInMs() - previousPollTimeStamp;
            return previousPollTimeStamp == undefined || timeSinceLastPoll > pollingInterval
        }

        function announcementCacheIsStale() {
            return isStale(PAS.timeStampKey, PAS.pollingInterval);
        }

        function configurationCacheIsStale() {
            return isStale(PAS.config.timeStampKey, PAS.config.pollingInterval);
        }

        function setupAnalyticsEvents() {
            $("#more-info").live("click", function (event) {
                AJS.trigger('analyticsEvent', {
                    name: 'com.atlassian.plugins.pas.more-info.click',
                    data: {message: $("#pas-announcement span:first").text()}
                });
            });
        }

        function pollForMessageIfNecessary() {
            if (announcementCacheIsStale()) {
                pollForMessage(scheduleAnnouncementToAppear);
            } else {
                scheduleAnnouncementToAppear();
            }
        }

        setupAnalyticsEvents();

        pollForMessageIfNecessary();
    });
});

;
;
/* module-key = 'com.atlassian.pas:pas-everypage-static', location = 'public-announcement-module/templates/soy/pas.soy' */
// This file was automatically generated from pas.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace Atlassian.PAS.Templates.
 */

if (typeof Atlassian == 'undefined') { var Atlassian = {}; }
if (typeof Atlassian.PAS == 'undefined') { Atlassian.PAS = {}; }
if (typeof Atlassian.PAS.Templates == 'undefined') { Atlassian.PAS.Templates = {}; }


Atlassian.PAS.Templates.pasTime = function(opt_data, opt_ignored) {
  return '<span class="pas-announcement-time">' + soy.$$escapeHtml(opt_data.time) + '</span>';
};
if (goog.DEBUG) {
  Atlassian.PAS.Templates.pasTime.soyTemplateName = 'Atlassian.PAS.Templates.pasTime';
}


Atlassian.PAS.Templates.pasUrl = function(opt_data, opt_ignored) {
  return '<p><a id="more-info" target="_blank" href=\'' + soy.$$escapeHtml(opt_data.url) + '\'>' + soy.$$escapeHtml('More information') + '</a></p>';
};
if (goog.DEBUG) {
  Atlassian.PAS.Templates.pasUrl.soyTemplateName = 'Atlassian.PAS.Templates.pasUrl';
}
;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:dialog-options-v5', location = 'v5/js/iframe/host/dialog-options.js' */
(function(){window._AP=window._AP||{};var a;a=WRM.data.claim("com.atlassian.plugins.atlassian-connect-plugin:dialog-options.data");for(var b in a)a.hasOwnProperty(b)&&(window._AP[b]=a[b])})();;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:iframe-host-utils-v5', location = 'v5/js/iframe/host/util.js' */
window._AP=window._AP||{};
_AP.util={escapeSelector:function(a){if(!a)throw Error("No selector to escape");return a.replace(/[!"#$%&'()*+,.\/:;<=>?@[\\\]^`{|}~]/g,"\\$\x26")},isGlobalDefined:function(a){return"undefined"!==typeof window[a]},awaitGlobal:function(a,b,c){c=c||100;if(_AP.util.isGlobalDefined(a))b(window[a]);else var d=setInterval(function(){_AP.util.isGlobalDefined(a)&&(clearInterval(d),b(window[a]))},c)},getBooleanFeatureFlag:function(a){if(AJS&&AJS.DarkFeatures&&AJS.DarkFeatures.isEnabled&&AJS.DarkFeatures.isEnabled(a))return!0;
var b=document.querySelector('meta[name\x3d"ajs-fe-feature-flags"]');if(!b)return!1;b=b.getAttribute("content");if(!b)return!1;var c={};try{c=JSON.parse(b)}catch(d){return!1}return c[a]&&"boolean"===typeof c[a].value?c[a].value:!1}};;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:connect-promise-v5', location = 'v5/js/core/promise-polyfill.js' */
(function(v,w){"object"===typeof exports&&"undefined"!==typeof module?module.exports=w():"function"===typeof define&&define.amd?define(w):v.ES6Promise=w()})(this,function(){function v(a){return"function"===typeof a}function w(){return function(){return process.nextTick(l)}}function R(){return"undefined"!==typeof B?function(){B(l)}:C()}function S(){var a=0,b=new J(l),c=document.createTextNode("");b.observe(c,{characterData:!0});return function(){c.data=a=++a%2}}function T(){var a=new MessageChannel;
a.port1.onmessage=l;return function(){return a.port2.postMessage(0)}}function C(){var a=setTimeout;return function(){return a(l,1)}}function l(){for(var a=0;a<p;a+=2)(0,q[a])(q[a+1]),q[a]=void 0,q[a+1]=void 0;p=0}function U(){try{var a=Function("return this")().require("vertx");B=a.runOnLoop||a.runOnContext;return R()}catch(b){return C()}}function D(a,b){var c=this,e=new this.constructor(r);void 0===e[z]&&K(e);var d=c._state;if(d){var f=arguments[d-1];k(function(){return L(d,e,f,c._result)})}else E(c,
e,a,b);return e}function F(a){if(a&&"object"===typeof a&&a.constructor===this)return a;var b=new this(r);x(b,a);return b}function r(){}function M(a){try{return a.then}catch(b){return n.error=b,n}}function V(a,b,c,e){try{a.call(b,c,e)}catch(d){return d}}function W(a,b,c){k(function(a){var d=!1,e=V(c,b,function(c){d||(d=!0,b!==c?x(a,c):m(a,c))},function(b){d||(d=!0,g(a,b))},"Settle: "+(a._label||" unknown promise"));!d&&e&&(d=!0,g(a,e))},a)}function X(a,b){b._state===y?m(a,b._result):b._state===t?g(a,
b._result):E(b,void 0,function(b){return x(a,b)},function(b){return g(a,b)})}function N(a,b,c){b.constructor===a.constructor&&c===D&&b.constructor.resolve===F?X(a,b):c===n?(g(a,n.error),n.error=null):void 0===c?m(a,b):v(c)?W(a,b,c):m(a,b)}function x(a,b){if(a===b)g(a,new TypeError("You cannot resolve a promise with itself"));else{var c=typeof b;null===b||"object"!==c&&"function"!==c?m(a,b):N(a,b,M(b))}}function Y(a){a._onerror&&a._onerror(a._result);G(a)}function m(a,b){a._state===u&&(a._result=b,
a._state=y,0!==a._subscribers.length&&k(G,a))}function g(a,b){a._state===u&&(a._state=t,a._result=b,k(Y,a))}function E(a,b,c,e){var d=a._subscribers,f=d.length;a._onerror=null;d[f]=b;d[f+y]=c;d[f+t]=e;0===f&&a._state&&k(G,a)}function G(a){var b=a._subscribers,c=a._state;if(0!==b.length){for(var e,d,f=a._result,g=0;g<b.length;g+=3)e=b[g],d=b[g+c],e?L(c,e,d,f):d(f);a._subscribers.length=0}}function L(a,b,c,e){var d=v(c),f=void 0,h=void 0,k=void 0,l=void 0;if(d){try{f=c(e)}catch(Z){n.error=Z,f=n}f===
n?(l=!0,h=f.error,f.error=null):k=!0;if(b===f){g(b,new TypeError("A promises callback cannot return that same promise."));return}}else f=e,k=!0;b._state===u&&(d&&k?x(b,f):l?g(b,h):a===y?m(b,f):a===t&&g(b,f))}function aa(a,b){try{b(function(b){x(a,b)},function(b){g(a,b)})}catch(c){g(a,c)}}function K(a){a[z]=O++;a._state=void 0;a._result=void 0;a._subscribers=[]}var H=void 0,P=H=Array.isArray?Array.isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},p=0,B=void 0,I=void 0,
k=function(a,b){q[p]=a;q[p+1]=b;p+=2;2===p&&(I?I(l):Q())},A=(H="undefined"!==typeof window?window:void 0)||{},J=A.MutationObserver||A.WebKitMutationObserver,A="undefined"===typeof self&&"undefined"!==typeof process&&"[object process]"==={}.toString.call(process),ba="undefined"!==typeof Uint8ClampedArray&&"undefined"!==typeof importScripts&&"undefined"!==typeof MessageChannel,q=Array(1E3),Q=void 0,Q=A?w():J?S():ba?T():void 0===H&&"function"===typeof require?U():C(),z=Math.random().toString(36).substring(2),
u=void 0,y=1,t=2,n={error:null},O=0,ca=function(){function a(a,c){this._instanceConstructor=a;this.promise=new a(r);this.promise[z]||K(this.promise);P(c)?(this._remaining=this.length=c.length,this._result=Array(this.length),0===this.length?m(this.promise,this._result):(this.length=this.length||0,this._enumerate(c),0===this._remaining&&m(this.promise,this._result))):g(this.promise,Error("Array Methods must be provided an Array"))}a.prototype._enumerate=function(a){for(var b=0;this._state===u&&b<a.length;b++)this._eachEntry(a[b],
b)};a.prototype._eachEntry=function(a,c){var b=this._instanceConstructor,d=b.resolve;d===F?(d=M(a),d===D&&a._state!==u?this._settledAt(a._state,c,a._result):"function"!==typeof d?(this._remaining--,this._result[c]=a):b===h?(b=new b(r),N(b,a,d),this._willSettleAt(b,c)):this._willSettleAt(new b(function(b){return b(a)}),c)):this._willSettleAt(d(a),c)};a.prototype._settledAt=function(a,c,e){var b=this.promise;b._state===u&&(this._remaining--,a===t?g(b,e):this._result[c]=e);0===this._remaining&&m(b,this._result)};
a.prototype._willSettleAt=function(a,c){var b=this;E(a,void 0,function(a){return b._settledAt(y,c,a)},function(a){return b._settledAt(t,c,a)})};return a}(),h=function(){function a(b){this[z]=O++;this._result=this._state=void 0;this._subscribers=[];if(r!==b){if("function"!==typeof b)throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(this instanceof a)aa(this,b);else throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");
}}a.prototype["catch"]=function(a){return this.then(null,a)};a.prototype["finally"]=function(a){var b=this.constructor;return v(a)?this.then(function(c){return b.resolve(a()).then(function(){return c})},function(c){return b.resolve(a()).then(function(){throw c;})}):this.then(a,a)};return a}();h.prototype.then=D;h.all=function(a){return(new ca(this,a)).promise};h.race=function(a){var b=this;return P(a)?new b(function(c,e){for(var d=a.length,f=0;f<d;f++)b.resolve(a[f]).then(c,e)}):new b(function(a,
b){return b(new TypeError("You must pass an array to race."))})};h.resolve=F;h.reject=function(a){var b=new this(r);g(b,a);return b};h._setScheduler=function(a){I=a};h._setAsap=function(a){k=a};h._asap=k;h.polyfill=function(){var a=void 0;if("undefined"!==typeof global)a=global;else if("undefined"!==typeof self)a=self;else try{a=Function("return this")()}catch(e){throw Error("polyfill failed because global object is unavailable in this environment");}var b=a.Promise;if(b){var c=null;try{c=Object.prototype.toString.call(b.resolve())}catch(e){}if("[object Promise]"===
c&&!b.cast)return}a.Promise=h};return h.Promise=h});;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:ap-core-v5', location = 'v5/js/core/connect-host.js' */
(function(v,m){"object"===typeof exports&&"undefined"!==typeof module?module.exports=m():"function"===typeof define&&define.amd?define(m):(v=v||self,v.connectHost=m())})(this,function(){function v(){}function m(){m.init.call(this)}function Da(a,c,b,d){var e,g;if("function"!==typeof b)throw new TypeError('"listener" argument must be a function');(e=a._events)?(e.newListener&&(a.emit("newListener",c,b.listener?b.listener:b),e=a._events),g=e[c]):(e=a._events=new v,a._eventsCount=0);g?("function"===typeof g?
g=e[c]=d?[b,g]:[g,b]:d?g.unshift(b):g.push(b),g.warned||(b=void 0===a._maxListeners?m.defaultMaxListeners:a._maxListeners)&&0<b&&g.length>b&&(g.warned=!0,b=Error("Possible EventEmitter memory leak detected. "+g.length+" "+c+" listeners added. Use emitter.setMaxListeners() to increase limit"),b.name="MaxListenersExceededWarning",b.emitter=a,b.type=c,b.count=g.length,"function"===typeof console.warn?console.warn(b):console.log(b))):(e[c]=b,++a._eventsCount);return a}function Ea(a,c,b){function d(){a.removeListener(c,
d);e||(e=!0,b.apply(a,arguments))}var e=!1;d.listener=b;return d}function Fa(a){var c=this._events;if(c){a=c[a];if("function"===typeof a)return 1;if(a)return a.length}return 0}function O(a,c){for(var b=Array(c);c--;)b[c]=a[c];return b}function ka(a,c){return c={exports:{}},a(c,c.exports),c.exports}function Ga(a){if(!a)throw Error("No selector to escape");return a.replace(/[!"#$%&'()*+,.\/:;<=>?@[\\\]^`{|}~]/g,"\\$\x26")}function jb(a){switch(a.arrayFormat){case "index":return function(c,b,d){return null===
b?[u(c,a),"[",d,"]"].join(""):[u(c,a),"[",u(d,a),"]\x3d",u(b,a)].join("")};case "bracket":return function(c,b){return null===b?u(c,a):[u(c,a),"[]\x3d",u(b,a)].join("")};default:return function(c,b){return null===b?u(c,a):[u(c,a),"\x3d",u(b,a)].join("")}}}function kb(a){var c;switch(a.arrayFormat){case "index":return function(b,a,e){c=/\[(\d*)\]$/.exec(b);b=b.replace(/\[\d*\]$/,"");c?(void 0===e[b]&&(e[b]={}),e[b][c[1]]=a):e[b]=a};case "bracket":return function(b,a,e){c=/(\[\])$/.exec(b);b=b.replace(/\[\]$/,
"");e[b]=c?void 0===e[b]?[a]:[].concat(e[b],a):a};default:return function(b,a,c){c[b]=void 0===c[b]?a:[].concat(c[b],a)}}}function u(a,c){return c.encode?c.strict?lb(a):encodeURIComponent(a):a}function Ha(a){return Array.isArray(a)?a.sort():"object"===typeof a?Ha(Object.keys(a)).sort(function(a,b){return Number(a)-Number(b)}).map(function(c){return a[c]}):a}function mb(a){var c=4-a.length%4;1===c?a+="\x3d":2===c&&(a+="\x3d\x3d");return nb.prototype.decode(ob(a))}function la(a){if(null===a||""===a)throw"Invalid JWT: must be neither null nor empty-string.";
var c=a.indexOf("."),b=a.indexOf(".",c+1);if(0>c||b<=c)throw'Invalid JWT: must contain 2 period (".") characters.';a=a.substring(c+1,b);if(null===a||""===a)throw"Invalid JWT: encoded claims must be neither null nor empty-string.";a=mb.call(window,a);return JSON.parse(a)}function ma(a){return X.parse(X.extract(a)).jwt}function Ia(a){return{addon_key:a.addon_key,key:a.key,url:a.url,options:a.options}}function Y(a){a=(a=a.attr("class"))?a.match(/ap-plugin-key-([^\s]*)/):null;return Array.isArray(a)?
a[1]:!1}function na(a){a=(a=a.attr("class"))?a.match(/ap-module-key-([^\s]*)/):null;return Array.isArray(a)?a[1]:!1}function Ja(a){return Y(a)+"__"+na(a)}function Ka(a,c,b){a+="Modules";if(window._AP&&window._AP[a]&&window._AP[a][c]&&window._AP[a][c][b])return k.extend({},window._AP[a][c][b].options)}function La(a,c){var b=Y(c),d;d=(d=c.attr("class"))?d.match(/ap-target-key-([^\s]*)/):null;d=Array.isArray(d)?d[1]:!1;return Ka(a,b,d)}function Ma(a){var c=a.attr("href"),b={},d;c||(c=a.find("a").attr("href"));
if(c){var e=c.indexOf("#");if(0<=e){a=c.substring(e+1);try{d=JSON.parse(decodeURI(a))}catch(g){console.error("ACJS: cannot decode webitem anchor")}d&&window._AP&&window._AP._convertConnectOptions?b=window._AP._convertConnectOptions(d):console.error("ACJS: cannot convert webitem url to connect iframe options")}else d=Ja(a),e=a.hasClass("ap-inline-dialog")?"inlineDialog":"dialog",b=La(e,a),!b&&window._AP&&window._AP[e+"Options"]&&(b=k.extend({},window._AP[e+"Options"][d])||{}),b||(b={},console.warn("no webitem "+
e+"Options for "+d)),b.productContext=b.productContext||{},c=X.parse(X.extract(c)),k.extend(b.productContext,c),b={addon_key:Y(a),key:na(a),options:b}}return b}function Na(a){if(AJS&&AJS.DarkFeatures&&AJS.DarkFeatures.isEnabled&&AJS.DarkFeatures.isEnabled(a))return!0;var c=document.querySelector('meta[name\x3d"ajs-fe-feature-flags"]');if(!c)return!1;c=c.getAttribute("content");if(!c)return!1;var b={};try{b=JSON.parse(c)}catch(d){return!1}return b[a]&&"boolean"===typeof b[a].value?b[a].value:!1}function D(){var a=
AJS.LayerManager.global.getTopLayer();if(a&&pb.test(a.attr("id")))return a=AJS.dialog2(a),a._id=a.$el.attr("id").replace("ap-dialog-",""),a}function Oa(a){var c=a.find(".header-control-panel");c.length||(c=a.find(".aui-dialog2-footer-actions"));return c}function Z(a,c){return Oa(c).find(".aui-button").filter(function(){return w.getIdentifier(this)===a})}function qb(a){var c={},b=["closeable","fadeout","delay","duration","id"];"object"===typeof a&&b.forEach(function(b){b in a&&(c[b]=a[b])});return c}
function rb(){h(document).on("aui-message-close",function(a,c){var b=c.attr("id").replace("ap-message-","");if(F[b]){if(h.isFunction(F[b].onCloseTrigger))F[b].onCloseTrigger();F[b]._destroy()}})}function J(a){return{constructor:function(c,b,d,e){e=k.last(arguments);var g=e._id;"string"!==typeof c&&(c="");"string"!==typeof b&&(b="");"object"!==typeof d&&(d={});d.id="ap-message-"+g;var l=c,E=b,f=d,t=e,aa="AP.messages."+a;console.warn("DEPRECATED API - AP.messages."+a+" has been deprecated since ACJS 5.0 and will be removed in a future release. Use AP.flag.create instead.");
P.trackDeprecatedMethodUsed(aa,t._context.extension);if(t=p.getFrameworkAdaptor().getProviderByModuleName("messages"))aa=t[a],aa||(t[a]=t.generic),aa(l,E,f);else{Pa||(rb(),Pa=!0);t=h("#ac-message-container");1>t.length&&(t=h('\x3cdiv id\x3d"ac-message-container" /\x3e').appendTo("body"));f=qb(f);h.extend(f,{title:l,body:AJS.escapeHtml(E)});if(0>Qa.indexOf(a))throw"Invalid message type. Must be: "+Qa.join(", ");Ra.test(f.id)&&(AJS.messages[a](t,f),t.css("margin-left","-"+t.innerWidth()/2+"px"))}F[g]=
this}}}function sb(){Sa||(h(document).on("aui-flag-close",function(a){a=oa.cleanKey(a.target.id);Q.closed(a)}),h(document).on("click",".ac-flag-actions",function(a){var c=h(a.target);a=c.data("key");c=c.data("flag_id");Q.actionInvoked(a,c)}),Sa=!0)}function Ta(a,c,b){if(R[a]){var d=R[a].extension;b=b||{};b.flagIdentifier=a;q.broadcast(c,{extension_id:d.extension_id},b)}}function Ua(){window.removeEventListener("scroll",Va);ba=pa=void 0}function Va(){var a=document.documentElement.scrollHeight,c=window.innerHeight,
b=.1*a;window.pageYOffset<=b?Wa("nearTop"):c+window.pageYOffset+b>=a?Wa("nearBottom"):ba=void 0}function Wa(a){ba!==a&&(q.broadcast("scroll."+a,{id:pa},{}),ba=a)}function tb(a){return a.map(function(a){if(a.list&&Array.isArray(a.list)){var b={heading:a.heading};b.items=a.list.map(function(b){var a={};if("string"===typeof b)a.content=b;else if(b.text&&"string"===typeof b.text)a.content=b.text,"boolean"===typeof b.disabled&&(a.disabled=b.disabled),"undefined"!==typeof b.itemId&&(a.itemId=b.itemId);
else throw Error("Unknown dropdown list item format.");return a});return b}})}var Xa=function(a,c){a.prototype=Object.create(c.prototype);a.prototype.constructor=a;a.__proto__=c};v.prototype=Object.create(null);m.EventEmitter=m;m.usingDomains=!1;m.prototype.domain=void 0;m.prototype._events=void 0;m.prototype._maxListeners=void 0;m.defaultMaxListeners=10;m.init=function(){this.domain=null;this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new v,this._eventsCount=0);this._maxListeners=
this._maxListeners||void 0};m.prototype.setMaxListeners=function(a){if("number"!==typeof a||0>a||isNaN(a))throw new TypeError('"n" argument must be a positive number');this._maxListeners=a;return this};m.prototype.getMaxListeners=function(){return void 0===this._maxListeners?m.defaultMaxListeners:this._maxListeners};m.prototype.emit=function(a){var c,b,d,e,g;e="error"===a;if(c=this._events)e=e&&null==c.error;else if(!e)return!1;b=this.domain;if(e){c=arguments[1];if(b)c||(c=Error('Uncaught, unspecified "error" event')),
c.domainEmitter=this,c.domain=b,c.domainThrown=!1,b.emit("error",c);else{if(c instanceof Error)throw c;b=Error('Uncaught, unspecified "error" event. ('+c+")");b.context=c;throw b;}return!1}b=c[a];if(!b)return!1;c="function"===typeof b;d=arguments.length;switch(d){case 1:if(c)b.call(this);else for(c=b.length,b=O(b,c),e=0;e<c;++e)b[e].call(this);break;case 2:e=arguments[1];if(c)b.call(this,e);else for(c=b.length,b=O(b,c),d=0;d<c;++d)b[d].call(this,e);break;case 3:e=arguments[1];d=arguments[2];if(c)b.call(this,
e,d);else for(c=b.length,b=O(b,c),g=0;g<c;++g)b[g].call(this,e,d);break;case 4:e=arguments[1];d=arguments[2];g=arguments[3];if(c)b.call(this,e,d,g);else{c=b.length;b=O(b,c);for(var l=0;l<c;++l)b[l].call(this,e,d,g)}break;default:e=Array(d-1);for(g=1;g<d;g++)e[g-1]=arguments[g];if(c)b.apply(this,e);else for(c=b.length,b=O(b,c),d=0;d<c;++d)b[d].apply(this,e)}return!0};m.prototype.addListener=function(a,c){return Da(this,a,c,!1)};m.prototype.on=m.prototype.addListener;m.prototype.prependListener=function(a,
c){return Da(this,a,c,!0)};m.prototype.once=function(a,c){if("function"!==typeof c)throw new TypeError('"listener" argument must be a function');this.on(a,Ea(this,a,c));return this};m.prototype.prependOnceListener=function(a,c){if("function"!==typeof c)throw new TypeError('"listener" argument must be a function');this.prependListener(a,Ea(this,a,c));return this};m.prototype.removeListener=function(a,c){var b,d,e,g,l;if("function"!==typeof c)throw new TypeError('"listener" argument must be a function');
d=this._events;if(!d)return this;b=d[a];if(!b)return this;if(b===c||b.listener&&b.listener===c)0===--this._eventsCount?this._events=new v:(delete d[a],d.removeListener&&this.emit("removeListener",a,b.listener||c));else if("function"!==typeof b){e=-1;for(g=b.length;0<g--;)if(b[g]===c||b[g].listener&&b[g].listener===c){l=b[g].listener;e=g;break}if(0>e)return this;if(1===b.length){b[0]=void 0;if(0===--this._eventsCount)return this._events=new v,this;delete d[a]}else{g=e+1;for(var E=b.length;g<E;e+=1,
g+=1)b[e]=b[g];b.pop()}d.removeListener&&this.emit("removeListener",a,l||c)}return this};m.prototype.removeAllListeners=function(a){var c;c=this._events;if(!c)return this;if(!c.removeListener)return 0===arguments.length?(this._events=new v,this._eventsCount=0):c[a]&&(0===--this._eventsCount?this._events=new v:delete c[a]),this;if(0===arguments.length){c=Object.keys(c);for(var b=0,d;b<c.length;++b)d=c[b],"removeListener"!==d&&this.removeAllListeners(d);this.removeAllListeners("removeListener");this._events=
new v;this._eventsCount=0;return this}c=c[a];if("function"===typeof c)this.removeListener(a,c);else if(c){do this.removeListener(a,c[c.length-1]);while(c[0])}return this};m.prototype.listeners=function(a){var c=this._events;if(c)if(a=c[a])if("function"===typeof a)a=[a.listener||a];else{for(var c=Array(a.length),b=0;b<c.length;++b)c[b]=a[b].listener||a[b];a=c}else a=[];else a=[];return a};m.listenerCount=function(a,c){return"function"===typeof a.listenerCount?a.listenerCount(c):Fa.call(a,c)};m.prototype.listenerCount=
Fa;m.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]};var f=new (function(a){function c(){var b;b=a.call(this)||this;b.setMaxListeners(20);return b}Xa(c,a);var b=c.prototype;b.dispatch=function(b){for(var a=arguments.length,c=Array(1<a?a-1:0),d=1;d<a;d++)c[d-1]=arguments[d];this.emit.apply(this,["before:"+b].concat(c));this.emit.apply(this,arguments);this.emit.apply(this,["after:"+b].concat(c))};b.registerOnce=function(b,a){if("string"===typeof b)this.once(b,
a);else throw"ACJS: event name must be string";};b.register=function(b,a){if("string"===typeof b)this.on(b,a);else throw"ACJS: event name must be string";};b.unregister=function(b,a){if("string"===typeof b)this.removeListener(b,a);else throw"ACJS: event name must be string";};return c}(m)),h=window.AJS&&window.AJS.$||function(){},Ya=Function.prototype.bind,r={locationOrigin:function(){return window.location.origin?window.location.origin:window.location.protocol+"//"+window.location.hostname+(window.location.port?
":"+window.location.port:"")},randomString:function(){return Math.floor(1E9*Math.random()).toString(16)},isString:function(a){return"string"===typeof a||a instanceof String},argumentsToArray:function(a){return Array.prototype.slice.call(a)},argumentNames:function(a){return a.toString().replace(/((\/\/.*$)|(\/\*[^]*?\*\/))/mg,"").replace(/[^(]+\(([^)]*)[^]+/,"$1").match(/([^\s,]+)/g)||[]},hasCallback:function(a){var c=a.length;return 0<c&&"function"===typeof a[c-1]},error:function(a){if(window.console&&
window.console.error){var c=[];"string"===typeof a?(c.push("[Simple-XDM] "+a),c=c.concat(Array.prototype.slice.call(arguments,1))):(c.push("[Simple-XDM] "),c=c.concat(Array.prototype.slice.call(arguments)));window.console.error.apply(null,c)}},warn:function(a){window.console&&console.warn("[Simple-XDM] "+a)},log:function(a){window.console&&window.console.log("[Simple-XDM] "+a)},_bind:function(a,c){return Ya&&c.bind===Ya?c.bind(a):function(){return c.apply(a,arguments)}},throttle:function(a,c,b){var d=
0;return function(){var e=Date.now();e-d>c&&(d=e,a.apply(b,arguments))}},each:function(a,c){var b,d;if(a)if(b=a.length,null!=b&&"function"!==typeof a)for(d=0;d<b&&!1!==c.call(a[d],d,a[d]);)d+=1;else for(d in a)if(a.hasOwnProperty(d)&&!1===c.call(a[d],d,a[d]))break},extend:function(a){var c=arguments;[].slice.call(c,1,c.length).forEach(function(b){"object"===typeof b&&Object.getOwnPropertyNames(b).forEach(function(c){a[c]=b[c]})});return a},sanitizeStructuredClone:function(a){function c(a){if("function"===
typeof a)return e("A function was detected and removed from the message."),null;if(d.some(function(b){return a instanceof b?(e(b.name+" object was detected and removed from the message."),!0):!1}))return{};if(a&&"object"===typeof a&&b.every(function(b){return!(a instanceof b)})){var l;if(Array.isArray(a))l=a.map(function(b){return c(b)});else{if(-1<g.indexOf(a))return e("A circular reference was detected and removed from the message."),null;g.push(a);l={};for(var f in a)if(a.hasOwnProperty(f)){var h=
c(a[f]);null!==h&&(l[f]=h)}g.pop()}return l}return a}var b=[Boolean,String,Date,RegExp,Blob,File,FileList,ArrayBuffer],d=[Error,Node],e=r.warn,g=[];return c(a)},getOrigin:function(a,c){if("function"===typeof URL)try{return(new URL(a,c)).origin}catch(e){}var b=document.implementation.createHTMLDocument("");if(c){var d=b.createElement("base");d.href=c;b.head.appendChild(d)}d=b.createElement("a");d.href=a;b.body.appendChild(d);b=d.protocol+"//"+d.hostname;a.match(/\/\/[^/]+:[0-9]+\//)&&(b+=d.port?":"+
d.port:"");return b}},ca=[],da,Za=function(a){ca=ca.filter(function(c){var b=c.callback;return c.element===a?(b(),!1):!0})};if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window){var qa=new IntersectionObserver(function(a){a.forEach(function(a){var b=a.target;0<a.intersectionRatio&&(qa.unobserve(b),Za(b))})},{threshold:.25});da=qa.observe.bind(qa)}else{da=function(a){var c;a:{c=document.documentElement;if(c.contains(a)&&"none"!==getComputedStyle(a).display){var b=a.getBoundingClientRect(),
d=a.parentNode,e=b;do{var g=getComputedStyle(d);if("none"===g.display){c=void 0;break a}var l=void 0;d===document.body?l={top:0,left:0,right:c.clientWidth,bottom:c.clientHeight}:"visible"!==g.overflow&&(l=d.getBoundingClientRect());if(l){var g=Math.max(l.top,e.top),f=Math.max(l.left,e.left),h=Math.min(l.right,e.right),e=Math.min(l.bottom,e.bottom),l=h-f,t=e-g;if(0>=l||0>=t){c=void 0;break a}e={top:g,left:f,right:h,bottom:e,width:l,height:t}}d=d.parentNode}while(d!==c);if(e){c=e.width*e.height/(b.width*
b.height);break a}}c=void 0}.25<=c&&Za(a)};var ra=r.throttle(function(){ca.forEach(function(a){return da(a.element)})},500);window.addEventListener("resize",ra);document.addEventListener("scroll",ra);"MutationObserver"in window&&document.addEventListener("DOMContentLoaded",function(){(new MutationObserver(ra)).observe(document.body,{attributes:!0,childList:!0,characterData:!0,subtree:!0})})}var ub=function(a,c){"function"===typeof c&&a instanceof Element&&(ca.push({element:a,callback:c}),da(a))},
x=new (function(){function a(){this._addons={}}var c=a.prototype;c._track=function(b,a){var c=window,d="connect.addon."+b;a=a||{};a.version=c._AP&&c._AP.version?c._AP.version:void 0;a.userAgent=c.navigator.userAgent;if(!c.AJS)return!1;if(c.AJS.Analytics)c.AJS.Analytics.triggerPrivacyPolicySafeEvent(d,a);else if(c.AJS.trigger)AJS.trigger("analyticsEvent",{name:d,data:a});else return!1;return!0};c._time=function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()};
c.trackLoadingStarted=function(b){this._addons&&b&&b.id?(b.startLoading=this._time(),this._addons[b.id]=b):console.error("ACJS: cannot track loading analytics",this._addons,b)};c.trackLoadingEnded=function(b){var a=this;if(this._addons&&b&&this._addons[b.id]){var c=b.url,c=void 0!==c&&-1===c.indexOf("xdm_e\x3d"),g=this._time()-this._addons[b.id].startLoading,l=this.getIframeLoadApdex(g),f={addonKey:b.addon_key,moduleKey:b.key,moduleType:b.options?b.options.moduleType:void 0,moduleLocation:b.options?
b.options.moduleLocation:void 0,pearApp:b.options&&"true"===b.options.pearApp?"true":"false",iframeLoadMillis:g,iframeLoadApdex:l,iframeIsCacheable:c,value:2E4<g?"x":Math.ceil(g/100)};"function"===typeof window.requestIdleCallback?window.requestIdleCallback(function(){return a._track("iframe.performance.load",f)},{timeout:100}):this._track("iframe.performance.load",f)}else console.error("ACJS: cannot track loading end analytics",this._addons,b)};c.getIframeLoadApdex=function(b){return 300>=b?1:1200>=
b?.5:0};c.trackLoadingTimeout=function(b){var a=window.navigator.onLine;"boolean"!==typeof a&&(a="not-supported");this._track("iframe.performance.timeout",{addonKey:b.addon_key,moduleKey:b.key,moduleType:b.options?b.options.moduleType:void 0,moduleLocation:b.options?b.options.moduleLocation:void 0,pearApp:b.options&&"true"===b.options.pearApp?"true":"false",connectedStatus:a.toString()});this.trackLoadingEnded(b)};c.trackLoadingCancel=function(b){this._track("iframe.performance.cancel",{addonKey:b.addon_key,
moduleKey:b.key,moduleType:b.options?b.options.moduleType:void 0,moduleLocation:b.options?b.options.moduleLocation:void 0,pearApp:b.options&&"true"===b.options.pearApp?"true":"false"})};c.trackUseOfDeprecatedMethod=function(b,a){this._track("jsapi.deprecated",{addonKey:a.addon_key,moduleKey:a.key,methodUsed:b})};c.trackMultipleDialogOpening=function(b,a){this._track("jsapi.dialog.multiple",{addonKey:a.addon_key,moduleKey:a.key,dialogType:b})};c.trackVisible=function(b){this._track("iframe.is_visible",
{addonKey:b.addon_key,moduleKey:b.key,moduleType:b.options?b.options.moduleType:void 0,pearApp:b.options&&"true"===b.options.pearApp?"true":"false"})};c.dispatch=function(b,a){this._track(b,a)};c.trackExternal=function(b,a){this._track(b,a)};return a}());h.fn&&f.register("iframe-create",function(a){x.trackLoadingStarted(a.extension)});f.register("iframe-bridge-start",function(a){x.trackLoadingStarted(a.extension)});f.register("iframe-bridge-established",function(a){x.trackLoadingEnded(a.extension);
ub(document.getElementById(a.extension.id),function(){x.trackVisible(a.extension)})});f.register("iframe-bridge-timeout",function(a){x.trackLoadingTimeout(a.extension)});f.register("iframe-bridge-cancelled",function(a){x.trackLoadingCancel(a.extension)});f.register("analytics-deprecated-method-used",function(a){x.trackUseOfDeprecatedMethod(a.methodUsed,a.extension)});f.register("iframe-destroyed",function(a){delete x._addons[a.extension.extension_id]});f.register("analytics-external-event-track",
function(a){x.trackExternal(a.eventName,a.values)});var $a={timeout:function(a,c){f.dispatch("iframe-bridge-timeout",{$el:a,extension:c})},cancelled:function(a,c){f.dispatch("iframe-bridge-cancelled",{$el:a,extension:c})}},sa={loading:'\x3cdiv class\x3d"ap-loading"\x3e\x3cdiv class\x3d"small-spinner"\x3e\x3c/div\x3eLoading app...\x3c/div\x3e',"load-timeout":'\x3cdiv class\x3d"ap-load-timeout"\x3e\x3cdiv class\x3d"small-spinner"\x3e\x3c/div\x3eApp is not responding. Wait or \x3ca href\x3d"#" class\x3d"ap-btn-cancel"\x3ecancel\x3c/a\x3e?\x3c/div\x3e',
"load-error":"App failed to load."},S=new (function(){function a(){this._stateRegistry={}}var c=a.prototype;c._loadingContainer=function(b){return b.find(".ap-status-indicator")};c.render=function(){var b=document.createElement("div");b.classList.add("ap-status-indicator");b.innerHTML=sa.loading;b=h(b);this._startSpinner(b);return b};c._startSpinner=function(b){setTimeout(function(){var a=b.find(".small-spinner");a.length&&a.spin&&a.spin({lines:12,length:3,width:2,radius:3,trail:60,speed:1.5,zIndex:1})},
10)};c.hide=function(b,a){clearTimeout(this._stateRegistry[a]);delete this._stateRegistry[a];this._loadingContainer(b)[0].style.display="none"};c.cancelled=function(b,a){var c=sa["load-error"];this._loadingContainer(b).empty().text(c)};c._setupTimeout=function(b,a){this._stateRegistry[a.id]=setTimeout(function(){$a.timeout(b,a)},12E3)};c.timeout=function(b,a){var c=h(sa["load-timeout"]),d=this._loadingContainer(b);d.empty().append(c);this._startSpinner(d);h("a.ap-btn-cancel",d).click(function(){$a.cancelled(b,
a)});delete this._stateRegistry[a];return d};return a}());f.register("iframe-create",function(a){a.extension.options.noDom||S._setupTimeout(a.$el.parents(".ap-iframe-container"),a.extension)});f.register("iframe-bridge-established",function(a){a.extension.options.noDom||S.hide(a.$el.parents(".ap-iframe-container"),a.extension.id)});f.register("iframe-bridge-timeout",function(a){a.extension.options.noDom||S.timeout(a.$el,a.extension.id)});f.register("iframe-bridge-cancelled",function(a){a.extension.options.noDom||
S.cancelled(a.$el,a.extension.id)});for(var vb=ka(function(a){function c(b,d){a.exports=c=Object.setPrototypeOf||function(b,a){b.__proto__=a;return b};return c(b,d)}a.exports=c}),wb=ka(function(a){function c(){if("undefined"===typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(d){return!1}}function b(d,e,g){c()?a.exports=b=Reflect.construct:a.exports=b=function(b,
a,c){var d=[null];d.push.apply(d,a);b=new (Function.bind.apply(b,d));c&&vb(b,c.prototype);return b};return b.apply(null,arguments)}a.exports=b}),xb=function(a){function c(b){var c;b=b||{};c=a.call(this,b)||this;c._registeredExtensions=b.extensions||{};c._registeredAPIModules={};c._registeredAPIModules._globals={};c._pendingCallbacks={};c._keycodeCallbacks={};c._clickHandler=null;c._pendingEvents={};c._messageHandlers={init:c._handleInit,req:c._handleRequest,resp:c._handleResponse,broadcast:c._handleBroadcast,
event_query:c._handleEventQuery,key_triggered:c._handleKeyTriggered,addon_clicked:c._handleAddonClick,get_host_offset:c._getHostOffset,unload:c._handleUnload,sub:c._handleSubInit};return c}Xa(c,a);var b=c.prototype;b._padUndefinedArguments=function(b,a){return b.length>=a?b:b.concat(Array(a-b.length))};b._verifyAPI=function(b,a){function c(b,a){Object.getOwnPropertyNames(a).forEach(function(d){"object"===typeof a[d]&&b[d]?c(b[d],a[d]):"parent"===a[d]&&b[d]&&(f=!0)})}var d=b.data.targets;if(d){var e=
this.getApiSpec(),f=!1;c(e,d);b.source.postMessage({type:"api_tamper",tampered:f},a.extension.url)}};b._handleInit=function(b,a){b.source.postMessage({type:"init_received"},a.extension.url);this._registeredExtensions[a.extension_id].source=b.source;a.initCallback&&(a.initCallback(b.data.eid),delete a.initCallback);b.data.targets&&this._verifyAPI(b,a)};b._handleSubInit=function(b,a){var c=a.extension.options.noSub||this._getBooleanFeatureFlag&&this._getBooleanFeatureFlag("com.atlassian.connect.resolve_inner_iframe_url"),
d=b.data;c?r.error("Sub-Extension requested by ["+a.extension.addon_key+"] but feature is disabled"):this.registerExtension(d.ext.id,{extension:d.ext});this._registeredRequestNotifier&&this._registeredRequestNotifier.call(null,{sub:d.ext,type:d.type,addon_key:a.extension.addon_key,key:a.extension.key,extension_id:a.extension_id,blocked:c})};b._getHostOffset=function(b,a){var c=b.source,d=null,e=a||window;e===e.top&&"function"===typeof e.getHostOffsetFunctionOverride&&(d=e.getHostOffsetFunctionOverride(c));
if("number"!==typeof d)for(d=0;!this._hasSameOrigin(c);)d++,c=c.parent;b.source.postMessage({hostFrameOffset:d},b.origin)};b._hasSameOrigin=function(b){if(b===b.top)return!0;try{var a="test_var_"+Math.random().toString(16).substr(2);b[a]=!0;return b[a]}catch(g){}return!1};b._handleResponse=function(b){b=b.data;var a=this._pendingCallbacks[b.mid];a&&(delete this._pendingCallbacks[b.mid],a.apply(window,b.args))};b.registerRequestNotifier=function(b){this._registeredRequestNotifier=b};b._handleRequest=
function(b,a){function c(){var c=r.sanitizeStructuredClone(r.argumentsToArray(arguments));b.source.postMessage({mid:b.data.mid,type:"resp",forPlugin:!0,args:c},a.extension.url)}var d=b.data,e=this._registeredAPIModules[d.mod],f=this.getRegisteredExtensions(a.extension)[0];if(e){var h=d.fn;if(d._cls){var k=e[d._cls],m=d.mod+"-"+d._cls+"-";c._id=d._id;"constructor"===h?(k._construct||(k.constructor.prototype._destroy=function(){delete this._context._proxies[m+this._id]},k._construct=function(){for(var b=
arguments.length,a=Array(b),c=0;c<b;c++)a[c]=arguments[c];b=wb(k.constructor,a);a=a[a.length-1];b._id=a._id;b._context=a._context;return b._context._proxies[m+b._id]=b}),e=k,h="_construct"):e=f._proxies[m+d._id]}var n=e[h];if(n){var p=d.args,q=n.length-1;"_construct"===h&&(q=e.constructor.length-1);c._context=f;p=this._padUndefinedArguments(p,q);p.push(c);e=n.apply(e,p);n.returnsPromise&&("object"!==typeof e&&"function"!==typeof e||"function"!==typeof e.then?c("Defined module method did not return a promise."):
e.then(function(b){c(void 0,b)})["catch"](function(b){b=b instanceof Error?b.message:b;c(b)}));this._registeredRequestNotifier&&this._registeredRequestNotifier.call(null,{module:d.mod,fn:d.fn,type:d.type,addon_key:a.extension.addon_key,key:a.extension.key,extension_id:a.extension_id})}}};b._handleBroadcast=function(b,a){var c=b.data;this.dispatch(c.etyp,function(b){return b.extension.addon_key===a.extension.addon_key&&b.extension_id!==a.extension_id},c.evnt,null,null)};b._handleKeyTriggered=function(b,
a){var c=b.data,d=this._keycodeKey(c.keycode,c.modifiers,a.extension_id);(d=this._keycodeCallbacks[d])&&d.forEach(function(b){b.call(null,{addon_key:a.extension.addon_key,key:a.extension.key,extension_id:a.extension_id,keycode:c.keycode,modifiers:c.modifiers})},this)};b.defineAPIModule=function(b,a){a=a||"_globals";this._registeredAPIModules[a]=r.extend({},this._registeredAPIModules[a]||{},b);return this._registeredAPIModules};b.isAPIModuleDefined=function(b){return"undefined"!==typeof this._registeredAPIModules[b]};
b._pendingEventKey=function(b,a){var c=b.addon_key||"global";b.key&&(c=c+"@@"+b.key);return c+"@@"+a};b.queueEvent=function(b,a,c,l){if(this._findRegistrations(a).some(function(b){return void 0!==b.registered_events},this))this.dispatch(b,a,c,l);else{this._cleanupInvalidEvents();var d=(new Date).getTime();this._pendingEvents[this._pendingEventKey(a,d)]={type:b,targetSpec:a,event:c,callback:l,time:d,uid:r.randomString()}}};b._cleanupInvalidEvents=function(){var b=this,a=(new Date).getTime();Object.keys(this._pendingEvents).forEach(function(c){3E4>=
a-b._pendingEvents[c].time||delete b._pendingEvents[c]})};b._handleEventQuery=function(b,a){var c=this,d={},e=(new Date).getTime();Object.keys(this._pendingEvents).forEach(function(g){var l=c._pendingEvents[g],f=3E4>=e-l.time,E=!l.targetSpec||0!==c._findRegistrations(l.targetSpec).length;E&&l.targetSpec.key&&(E=l.targetSpec.addon_key===a.extension.addon_key&&l.targetSpec.key===a.extension.key);f&&E?(d[g]=l,l.targetSpec=l.targetSpec||{},c.dispatch(l.type,l.targetSpec,l.event,l.callback,b.source)):
f||delete c._pendingEvents[g]});this._registeredExtensions[a.extension_id].registered_events=b.data.args;return d};b._handleUnload=function(b,a){a&&(a.extension_id&&this._registeredExtensions[a.extension_id]&&delete this._registeredExtensions[a.extension_id].source,a.unloadCallback&&a.unloadCallback(b.data.eid))};b.dispatch=function(b,a,c,l,f){function d(a,c){if(a.source&&a.source.postMessage){var d;l&&(d=r.randomString(),this._pendingCallbacks[d]=l);a.source.postMessage({type:"evt",mid:d,etyp:b,
evnt:c},a.extension.url)}}this._findRegistrations(a||{}).forEach(function(b){f&&!b.source&&(b.source=f);b.source&&r._bind(this,d)(b,c)},this)};b._findRegistrations=function(b){var a=this;if(0===this._registeredExtensions.length)return r.error("no registered extensions",this._registeredExtensions),[];var c=Object.getOwnPropertyNames(b),d=Object.getOwnPropertyNames(this._registeredExtensions).map(function(b){return a._registeredExtensions[b]});return b instanceof Function?d.filter(b):d.filter(function(a){return c.every(function(c){return a.extension[c]===
b[c]})})};b.registerExtension=function(b,a){a._proxies={};a.extension_id=b;this._registeredExtensions[b]=a};b._keycodeKey=function(b,a,c){var d=b;a&&("string"===typeof a&&(a=[a]),a.sort(),a.forEach(function(b){d+="$$"+b},this));return d+"__"+c};b.registerKeyListener=function(b,a,c,l){"string"===typeof c&&(c=[c]);var d=this._registeredExtensions[b];b=this._keycodeKey(a,c,b);this._keycodeCallbacks[b]||(this._keycodeCallbacks[b]=[],d.source.postMessage({type:"key_listen",keycode:a,modifiers:c,action:"add"},
d.extension.url));this._keycodeCallbacks[b].push(l)};b.unregisterKeyListener=function(b,a,c,l){var d=this._keycodeKey(a,c,b),e=this._keycodeCallbacks[d];b=this._registeredExtensions[b];e&&(l?(l=e.indexOf(l),this._keycodeCallbacks[d].splice(l,1)):delete this._keycodeCallbacks[d],b.source&&b.source.postMessage&&b.source.postMessage({type:"key_listen",keycode:a,modifiers:c,action:"remove"},b.extension.url))};b.registerClickHandler=function(b){if("function"!==typeof b)throw Error("callback must be a function");
if(null!==this._clickHandler)throw Error("ClickHandler already registered");this._clickHandler=b};b._handleAddonClick=function(b,a){"function"===typeof this._clickHandler&&this._clickHandler({addon_key:a.extension.addon_key,key:a.extension.key,extension_id:a.extension_id})};b.unregisterClickHandler=function(){this._clickHandler=null};b.getApiSpec=function(b){function a(b){return Object.getOwnPropertyNames(b).reduce(function(c,d){var e=b[d];switch(typeof e){case "function":c[d]={args:r.argumentNames(e),
returnsPromise:e.returnsPromise||!1};break;case "object":e.hasOwnProperty("constructor")&&(c[d]=a(e))}return c},{})}var c=this;return Object.getOwnPropertyNames(this._registeredAPIModules).reduce(function(d,e){var g=c._registeredAPIModules[e];if("undefined"===typeof g.addonKey||g.addonKey===b)d[e]=a(g);return d},{})};b._originEqual=function(b,a){function c(b){return"string"===typeof b&&0<b.length}var d=r.getOrigin(b);return c(b)&&c(a)&&c(d)?a===d:!1};b._checkOrigin=function(b,a){var c=["init"],d=
a&&!a.source&&-1<c.indexOf(b.data.type),c=a&&b.source===a.source,d=a&&this._originEqual(a.extension.url,b.origin)&&(d||c);"get_host_offset"===b.data.type&&window===window.top&&(d=!0);"unload"!==b.data.type||!c&&void 0!==b.source||(d=!0);return d};b.getRegisteredExtensions=function(b){return b?this._findRegistrations(b):this._registeredExtensions};b.unregisterExtension=function(b){b=this._findRegistrations(b);0!==b.length&&b.forEach(function(b){var a=this;Object.keys(this._pendingEvents).forEach(function(c){var d=
a._pendingEvents[c].targetSpec||{};d.addon_key===b.extension.addon_key&&d.key===b.extension.key&&delete a._pendingEvents[c]});delete this._registeredExtensions[b.extension_id]},this)};b.setFeatureFlagGetter=function(b){this._getBooleanFeatureFlag=b};return c}(function(){function a(b){this._registerListener((b||{}).listenOn)}var c=a.prototype;c._registerListener=function(b){b&&b.addEventListener||(b=window);b.addEventListener("message",r._bind(this,this._receiveMessage),!1)};c._receiveMessage=function(b){var a=
this._messageHandlers[b.data.type],c=b.data.eid,g;c&&this._registeredExtensions&&(g=this._registeredExtensions[c]);if(!a||!this._checkOrigin(b,g))return!1;a.call(this,b,g)};return a}()),n=new (function(){function a(){this._xdm=new xb}var c=a.prototype;c.dispatch=function(b,a,c,g){this._xdm.queueEvent(b,a,c,g);return this.getExtensions(a)};c.broadcast=function(b,a,c){this._xdm.dispatch(b,a,c,null,null);return this.getExtensions(a)};c._createId=function(b){if(!b.addon_key||!b.key)throw Error("Extensions require addon_key and key");
return b.addon_key+"__"+b.key+"__"+r.randomString()};c.create=function(b,a,c){a=this.registerExtension(b,a,c);c=b.options||{};c={extension_id:a,api:this._xdm.getApiSpec(b.addon_key),origin:r.locationOrigin(),options:c};return{id:a,name:JSON.stringify(c),src:b.url}};c.registerRequestNotifier=function(b){this._xdm.registerRequestNotifier(b)};c.registerExtension=function(b,a,c){var d=this._createId(b);this._xdm.registerExtension(d,{extension:b,initCallback:a,unloadCallback:c});return d};c.registerKeyListener=
function(b,a,c,g){this._xdm.registerKeyListener(b,a,c,g)};c.unregisterKeyListener=function(b,a,c,g){this._xdm.unregisterKeyListener(b,a,c,g)};c.registerClickHandler=function(b){this._xdm.registerClickHandler(b)};c.unregisterClickHandler=function(){this._xdm.unregisterClickHandler()};c.defineModule=function(b,a,c){this._xdm.defineAPIModule(a,b,c)};c.isModuleDefined=function(b){return this._xdm.isAPIModuleDefined(b)};c.defineGlobals=function(b){this._xdm.defineAPIModule(b)};c.getExtensions=function(b){return this._xdm.getRegisteredExtensions(b)};
c.unregisterExtension=function(b){return this._xdm.unregisterExtension(b)};c.returnsPromise=function(b){b.returnsPromise=!0};c.setFeatureFlagGetter=function(b){this._xdm.setFeatureFlagGetter(b)};return a}()),q={broadcast:function(a,c,b){n.dispatch(a,c,b);f.dispatch("event-dispatch",{type:a,targetSpec:c,event:b})},broadcastPublic:function(a,c,b){f.dispatch("event-public-dispatch",{type:a,event:c,sender:b});var d;d=b.options||{};var e=["contextJwt","url"];if(null==d)d={};else{var g={},l=Object.keys(d),
h,k;for(k=0;k<l.length;k++)h=l[k],0<=e.indexOf(h)||(g[h]=d[h]);d=g}n.dispatch(a,{},{sender:{addonKey:b.addon_key,key:b.key,options:r.sanitizeStructuredClone(d)},event:c})}},ab=Object.getOwnPropertySymbols,yb=Object.prototype.hasOwnProperty,zb=Object.prototype.propertyIsEnumerable,ea=function(){try{if(!Object.assign)return!1;var a=new String("abc");a[5]="de";if("5"===Object.getOwnPropertyNames(a)[0])return!1;for(var c={},a=0;10>a;a++)c["_"+String.fromCharCode(a)]=a;if("0123456789"!==Object.getOwnPropertyNames(c).map(function(b){return c[b]}).join(""))return!1;
var b={};"abcdefghijklmnopqrst".split("").forEach(function(a){b[a]=a});return"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},b)).join("")?!1:!0}catch(d){return!1}}()?Object.assign:function(a,c){var b,d;if(null===a||void 0===a)throw new TypeError("Object.assign cannot be called with null or undefined");d=Object(a);for(var e,g=1;g<arguments.length;g++){b=Object(arguments[g]);for(var f in b)yb.call(b,f)&&(d[f]=b[f]);if(ab){e=ab(b);for(var h=0;h<e.length;h++)zb.call(b,e[h])&&(d[e[h]]=b[e[h]])}}return d},
k={escapeSelector:Ga,stringToDimension:function(a){var c,b="px";"string"===typeof a&&(c=a.indexOf("%")===a.length-1,a=parseInt(a,10),c&&(b="%"));if(!isNaN(a))return a+b},getIframeByExtensionId:function(a){return h("iframe#"+Ga(a))},first:function(a,c){return c?a.slice(0,c):a[0]},last:function(a){return a[a.length-1]},pick:function(a,c){return"object"!==typeof a?{}:Object.keys(a).filter(function(b){return 0<=c.indexOf(b)}).reduce(function(b,c){var d;return ea(b,(d={},d[c]=a[c],d))},{})},debounce:function(a,
c){var b;return function(){var d=this,e=[].slice.call(arguments);b&&clearTimeout(b);b=setTimeout(function(){b=null;a.apply(d,e)},c||50)}},isSupported:function(a,c,b,d){return a&&a[c]&&a[c].supports?a[c].supports(b):d},extend:ea},T={open:function(a,c){f.dispatch("dialog-extension-open",{extension:a,options:c})},close:function(){f.dispatch("dialog-close-active",{})},addUserButton:function(a,c){f.dispatch("dialog-button-add",{button:{text:a.text,identifier:a.identifier,data:{userButton:!0}},extension:c})}},
z={close:function(a){f.dispatch("dialog-close",{dialog:a.dialog,extension:a.extension,customData:a.customData})},closeActive:function(a){f.dispatch("dialog-close-active",a)},clickButton:function(a,c,b){f.dispatch("dialog-button-click",{identifier:a,$el:c,extension:b})},toggleButton:function(a){f.dispatch("dialog-button-toggle",a)},toggleButtonVisibility:function(a){f.dispatch("dialog-button-toggle-visibility",a)}},G={registerKeyEvent:function(a){n.registerKeyListener(a.extension_id,a.key,a.modifiers,
a.callback);f.dispatch("dom-event-register",a)},unregisterKeyEvent:function(a){n.unregisterKeyListener(a.extension_id,a.key,a.modifiers,a.callback);f.dispatch("dom-event-unregister",a)},registerWindowKeyEvent:function(a){window.addEventListener("keydown",function(c){c.keyCode===a.keyCode&&a.callback()})},registerClickHandler:function(a){n.registerClickHandler(function(c){(c=document.getElementById(c.extension_id))&&a(c)})},unregisterClickHandler:function(){n.unregisterClickHandler()}},bb=new (function(){function a(){}
a.prototype.randomIdentifier=function(){return Math.random().toString(16).substring(7)};return a}()),A=new (function(){function a(){}var c=a.prototype;c._maxDimension=function(b,a){var c=k.stringToDimension(b),d=parseInt(c,10),f=parseInt(a,10);return-1<c.indexOf("%")&&100<=d||d>f?"100%":c};c._closeOnEscape=function(b){return!1===b.closeOnEscape?!1:!0};c._size=function(b){var a=b.size;"x-large"===b.size&&(a="xlarge");"maximum"!==b.size&&"100%"===b.width&&"100%"===b.height&&(a="fullscreen");return a};
c._header=function(b){var a="";switch(typeof b){case "string":a=b;break;case "object":a=b.value}return a};c._hint=function(b){return"string"===typeof b?b:""};c._chrome=function(b){var a=!1;"boolean"===typeof b.chrome&&(a=b.chrome);"fullscreen"===b.size&&(a=!0);"maximum"===b.size&&(a=!1);return a};c._width=function(b){if(!b.size)return b.width?this._maxDimension(b.width,h(window).width()):"50%"};c._height=function(b){if(!b.size)return b.height?this._maxDimension(b.height,h(window).height()):"50%"};
c._actions=function(b){var a=[];b=b||{};b.actions||(a=[{name:"submit",identifier:"submit",text:b.submitText||"Submit",type:"primary",disabled:!0},{name:"cancel",identifier:"cancel",text:b.cancelText||"Cancel",type:"link",immutable:!0}]);b.buttons&&(a=a.concat(this._buttons(b)));return a};c._id=function(b){"string"!==typeof b&&(b=Math.random().toString(36).substring(2,8));return b};c._buttons=function(b){var a=[];b.buttons&&Array.isArray(b.buttons)&&b.buttons.forEach(function(b){var c,d,e=!1;b.text&&
"string"===typeof b.text&&(c=b.text);d=b.identifier&&"string"===typeof b.identifier?b.identifier:bb.randomIdentifier();b.disabled&&!0===b.disabled&&(e=!0);a.push({text:c,identifier:d,type:"secondary",custom:!0,disabled:e})});return a};c._onHide=function(b){return"function"===typeof b.onHide?b.onHide:function(){}};c.sanitizeOptions=function(b){b=b||{};b={chrome:this._chrome(b),header:this._header(b.header),hint:this._hint(b.hint),width:this._width(b),height:this._height(b),$content:b.$content,extension:b.extension,
actions:this._actions(b),id:this._id(b.id),size:b.size,closeOnEscape:this._closeOnEscape(b),onHide:this._onHide(b)};b.size=this._size(b);return b};c.moduleOptionsFromGlobal=function(b,a){var c={chrome:!0};return window._AP&&window._AP.dialogModules&&window._AP.dialogModules[b]&&window._AP.dialogModules[b][a]?k.extend({},c,window._AP.dialogModules[b][a].options):!1};c.trackMultipleDialogOpening=function(b,a){var c;c=this._size(a);h(".ap-aui-dialog2:visible").length&&(c=h("#macro-browser-dialog").length||
AJS.Confluence&&AJS.Confluence.Editor&&AJS.Confluence.Editor.currentEditMode?"fullscreen"===c?"connect-macro-multiple-fullscreen":"connect-macro-multiple":"connect-multiple",x.trackMultipleDialogOpening(c,b))};c.assertActiveDialogOrThrow=function(b,a){if(!b.isActiveDialog(a))throw Error("Failed to find an active dialog for: "+a);};return a}()),fa={notifyIframeCreated:function(a,c){f.dispatch("iframe-create",{$el:a,extension:c})},notifyBridgeEstablished:function(a,c){f.dispatch("iframe-bridge-established",
{$el:a,extension:c})},notifyIframeDestroyed:function(a){"string"===typeof a&&(a={id:a});n.getExtensions(a).forEach(function(a){f.dispatch("iframe-destroyed",{extension:a});n.unregisterExtension({id:a.extension_id})},this)},notifyUnloaded:function(a,c){f.dispatch("iframe-unload",{$el:a,extension:c})}},lb=function(a){return encodeURIComponent(a).replace(/[!'()*]/g,function(a){return"%"+a.charCodeAt(0).toString(16).toUpperCase()})},X={extract:function(a){return a.split("?")[1]||""},parse:function(a,
c){c=ea({arrayFormat:"none"},c);var b=kb(c),d=Object.create(null);if("string"!==typeof a)return d;a=a.trim().replace(/^(\?|#|&)/,"");if(!a)return d;a.split("\x26").forEach(function(a){var c=a.replace(/\+/g," ").split("\x3d");a=c.shift();c=0<c.length?c.join("\x3d"):void 0;c=void 0===c?null:decodeURIComponent(c);b(decodeURIComponent(a),c,d)});return Object.keys(d).sort().reduce(function(b,a){var c=d[a];c&&"object"===typeof c&&!Array.isArray(c)?b[a]=Ha(c):b[a]=c;return b},Object.create(null))},stringify:function(a,
c){c=ea({encode:!0,strict:!0,arrayFormat:"none"},c);var b=jb(c);return a?Object.keys(a).sort().map(function(d){var e=a[d];if(void 0===e)return"";if(null===e)return u(d,c);if(Array.isArray(e)){var g=[];e.slice().forEach(function(a){void 0!==a&&g.push(b(d,a,g.length))});return g.join("\x26")}return u(d,c)+"\x3d"+u(e,c)}).filter(function(b){return 0<b.length}).join("\x26"):""}},ob=function(a){var c,b;b=a.length;if(0<b%4)throw Error("Invalid string. Length must be a multiple of 4");var d=a.indexOf("\x3d");
-1===d&&(d=b);b=[d,d===b?0:4-d%4];c=b[0];b=b[1];for(var d=new Ab(3*(c+b)/4-b),e=0,g=0<b?c-4:c,f=0;f<g;f+=4)c=y[a.charCodeAt(f)]<<18|y[a.charCodeAt(f+1)]<<12|y[a.charCodeAt(f+2)]<<6|y[a.charCodeAt(f+3)],d[e++]=c>>16&255,d[e++]=c>>8&255,d[e++]=c&255;2===b&&(c=y[a.charCodeAt(f)]<<2|y[a.charCodeAt(f+1)]>>4,d[e++]=c&255);1===b&&(c=y[a.charCodeAt(f)]<<10|y[a.charCodeAt(f+1)]<<4|y[a.charCodeAt(f+2)]>>2,d[e++]=c>>8&255,d[e++]=c&255);return d},y=[],Ab="undefined"!==typeof Uint8Array?Uint8Array:Array,ga=0;64>
ga;++ga)y["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(ga)]=ga;y[45]=62;y[95]=63;var nb=ka(function(a){function c(){}function b(){}(function(){function a(b,a){a=a||Infinity;for(var c,d=b.length,e=null,g=[],f=0;f<d;f++){c=b.charCodeAt(f);if(55295<c&&57344>c)if(e)if(56320>c){-1<(a-=3)&&g.push(239,191,189);e=c;continue}else c=e-55296<<10|c-56320|65536,e=null;else{56319<c?-1<(a-=3)&&g.push(239,191,189):f+1===d?-1<(a-=3)&&g.push(239,191,189):e=c;continue}else e&&(-1<(a-=
3)&&g.push(239,191,189),e=null);if(128>c){if(0>--a)break;g.push(c)}else if(2048>c){if(0>(a-=2))break;g.push(c>>6|192,c&63|128)}else if(65536>c){if(0>(a-=3))break;g.push(c>>12|224,c>>6&63|128,c&63|128)}else if(2097152>c){if(0>(a-=4))break;g.push(c>>18|240,c>>12&63|128,c>>6&63|128,c&63|128)}else throw Error("Invalid code point");}return g}function e(b){try{return decodeURIComponent(b)}catch(l){return String.fromCharCode(65533)}}c.prototype.encode=function(b){return"undefined"===typeof Uint8Array?a(b):
new Uint8Array(a(b))};b.prototype.decode=function(b){for(var a=b.length,c="",d="",a=Math.min(b.length,a||Infinity),g=0;g<a;g++)127>=b[g]?(c+=e(d)+String.fromCharCode(b[g]),d=""):d+="%"+b[g].toString(16);return c+e(d)}})();a&&(a.exports.TextDecoderLite=b,a.exports.TextEncoderLite=c)}).TextDecoderLite,cb=60;f.register("jwt-skew-set",function(a){cb=a.skew});var db={parseJwtIssuer:function(a){return la(a).iss},parseJwtClaims:la,isJwtExpired:function(a,c){void 0===c&&(c=cb);var b=la(a),d=0,e=Math.floor(Date.now()/
1E3);b&&b.exp&&(d=b.exp);return d-c<e?!0:!1}},K={hasJwt:function(a){return ma(a)&&0!==ma(a).length},isJwtExpired:function(a){a=ma(a);return db.isJwtExpired(a)}},ta={registerContentResolver:function(a){f.dispatch("content-resolver-register-by-extension",a)},requestRefreshUrl:function(a){if(!a.resolver)throw Error("ACJS: No content resolver supplied");var c=a.resolver.call(null,k.extend({classifier:"json"},a.extension));c.fail(function(b,c){f.dispatch("jwt-url-refreshed-failed",{extension:a.extension,
$container:a.$container,errorText:c.text})});c.done(function(b){var c={};if("object"===typeof b)c=b;else if("string"===typeof b)try{c=JSON.parse(b)}catch(e){console.error("ACJS: invalid response from content resolver")}a.extension.url=c.url;k.extend(a.extension.options,c.options);f.dispatch("jwt-url-refreshed",{extension:a.extension,$container:a.$container,url:a.extension.url})});f.dispatch("jwt-url-refresh-request",{data:a})},setClockSkew:function(a){"number"===typeof a?f.dispatch("jwt-skew-set",
{skew:a}):console.error("ACJS: invalid JWT clock skew set")}},Bb={optionsToAttributes:function(a){var c={};if(a&&"object"===typeof a&&(a.width&&(c.width=k.stringToDimension(a.width)),a.height&&(c.height=k.stringToDimension(a.height)),"string"===typeof a.sandbox)){var b=document.createElement("iframe");c.sandbox=a.sandbox.split(" ").filter(function(a){return k.isSupported(b,"sandbox",a,!0)}).join(" ")}return c}},ua=new (function(){function a(){this.store={}}var c=a.prototype;c.set=function(b,a){if(a){var c=
{};c[b]=a}else c=b;k.extend(this.store,c)};c.get=function(b){return b?this.store[b]:k.extend({},this.store)};return a}()),va={createSimpleXdmExtension:function(a){var c=Ia(a),b=ua.get();a.options=c.options=k.extend({},c.options);a.options.globalOptions=b;b=n.create(c,function(){a.options.noDOM||(a.$el=h(document.getElementById(a.id)));fa.notifyBridgeEstablished(a.$el,a)},function(){fa.notifyUnloaded(a.$el,a)});c.id=b.id;a.id=b.id;k.extend(b,Bb.optionsToAttributes(a.options));return{iframeAttributes:b,
extension:a}},extensionConfigSanitizer:Ia},H=new (function(){function a(){this._contentResolver=!1}var c=a.prototype;c.setContentResolver=function(b){this._contentResolver=b};c.resize=function(b,a,c){b=k.stringToDimension(b);a=k.stringToDimension(a);c.css({width:b,height:a});c.trigger("resized",{width:b,height:a})};c.simpleXdmExtension=function(b,a){!b.url||K.hasJwt(b.url)&&K.isJwtExpired(b.url)?this._contentResolver?ta.requestRefreshUrl({extension:b,resolver:this._contentResolver,$container:a}):
console.error("JWT is expired and no content resolver was specified"):this._appendExtension(a,this._simpleXdmCreate(b))};c._simpleXdmCreate=function(b){var a=va.createSimpleXdmExtension(b);b.id=a.iframeAttributes.id;b.$el=this.render(a.iframeAttributes);return b};c._appendExtension=function(b,a){var c=b.find("iframe");0<c.length&&c.destroy();a.options.hideIframeUntilLoad&&a.$el.css({visibility:"hidden"}).load(function(){a.$el.css({visibility:""})});b.prepend(a.$el);fa.notifyIframeCreated(a.$el,a)};
c._appendExtensionError=function(b,a){var c=h('\x3cdiv class\x3d"connect-resolve-error"\x3e\x3c/div\x3e'),d=h("\x3cp /\x3e").text(a);c.append('\x3cp class\x3d"error"\x3eError: The content resolver threw the following error:\x3c/p\x3e');c.append(d);b.prepend(c)};c.resolverResponse=function(b){var a=this._simpleXdmCreate(b.extension);this._appendExtension(b.$container,a)};c.resolverFailResponse=function(b){this._appendExtensionError(b.$container,b.errorText)};c.render=function(b){b=b||{};b.referrerpolicy=
"no-referrer";return h("\x3ciframe /\x3e").attr(b).addClass("ap-iframe")};return a}());f.register("iframe-resize",function(a){H.resize(a.width,a.height,a.$el)});f.register("content-resolver-register-by-extension",function(a){H.setContentResolver(a.callback)});f.register("jwt-url-refreshed",function(a){H.resolverResponse(a)});f.register("jwt-url-refreshed-failed",function(a){H.resolverFailResponse(a)});f.register("after:iframe-bridge-established",function(a){a.extension.options.noDom?a.extension.options.bridgeEstablished=
!0:a.$el[0].bridgeEstablished=!0});var wa={clicked:function(a){f.dispatch("button-clicked",{$el:a})},toggle:function(a,c){f.dispatch("button-toggle",{$el:a,disabled:c})},toggleVisibility:function(a,c){f.dispatch("button-toggle-visibility",{$el:a,hidden:c})}},Cb=["primary","link","secondary"],eb=0,w=new (function(){function a(){this.AP_BUTTON_CLASS="ap-aui-button"}var c=a.prototype;c.setType=function(b,a){a&&0<=Cb.indexOf(a)&&b.addClass("aui-button-"+a);return b};c.setDisabled=function(b,a){"undefined"===
typeof a||b.data("immutable")||b.attr("aria-disabled",a);return b};c.setHidden=function(b,a){"undefined"===typeof a||b.data("immutable")||b.toggle(!a);return b};c._setId=function(b,a){a||(a="ap-button-"+eb,eb++);b.attr("id",a);return b};c._additionalClasses=function(b,a){a&&("string"!==typeof a&&(a=a.join(" ")),b.addClass(a));return b};c.getName=function(b){return h(b).data("name")};c.getText=function(b){return h(b).text()};c.getIdentifier=function(b){return h(b).data("identifier")};c.isVisible=function(b){return h(b).is(":visible")};
c.isEnabled=function(b){return"true"!==h(b).attr("aria-disabled")};c.render=function(b){var a=h("\x3cbutton /\x3e");b=b||{};a.addClass("aui-button "+this.AP_BUTTON_CLASS);a.text(b.text);a.data(b.data);a.data({name:b.name||b.identifier,identifier:b.identifier||bb.randomIdentifier(),immutable:b.immutable||!1});this._additionalClasses(a,b.additionalClasses);this.setType(a,b.type);this.setDisabled(a,b.disabled||!1);this._setId(a,b.id);return a};return a}());h(function(){h("body").on("click","."+w.AP_BUTTON_CLASS,
function(a){a=h(a.target).closest("."+w.AP_BUTTON_CLASS);"true"!==a.attr("aria-disabled")&&wa.clicked(a)})});f.register("button-toggle",function(a){w.setDisabled(a.$el,a.disabled)});f.register("button-toggle-visibility",function(a){w.setHidden(a.$el,a.hidden)});var Db=["ap-iframe-container"],xa=new (function(){function a(){}var c=a.prototype;c.createExtension=function(b,a){var c=this._renderContainer();a&&!1===a.loadingIndicator||c.append(this._renderLoadingIndicator());H.simpleXdmExtension(b,c);
return c};c._renderContainer=function(b){b=h("\x3cdiv /\x3e").attr(b||{});b.addClass(Db.join(" "));return b};c._renderLoadingIndicator=function(){return S.render()};return a}());f.register("iframe-create",function(a){var c="embedded-"+a.extension.id;a.extension.$el.parents(".ap-iframe-container").attr("id",c)});var Eb={defineCustomModule:function(a,c){var b={};c?(b.methods=c,b.name=a):b.methods=a;f.dispatch("module-define-custom",b)}},P={trackDeprecatedMethodUsed:function(a,c){f.dispatch("analytics-deprecated-method-used",
{methodUsed:a,extension:c})},trackIframeBridgeStart:function(a){f.dispatch("iframe-bridge-start",{extension:a})},trackExternalEvent:function(a,c){f.dispatch("analytics-external-event-track",{eventName:a,values:c})}},B={sanitizeTriggers:function(a){var c;Array.isArray(a)?c=a.join(" "):"string"===typeof a&&(c=a.trim());return c},uniqueId:function(){return"webitem-"+Math.floor(1E9*Math.random()).toString(16)},getExtensionKey:Y,getKey:na,getOptionsForWebItem:function(a){var c=Ja(a),b=a.hasClass("ap-inline-dialog")?
"inlineDialog":"dialog",d=La(b,a);!d&&window._AP&&window._AP[b+"Options"]&&(d=k.extend({},window._AP[b+"Options"][c])||{});d||(d={},console.warn("no webitem "+b+"Options for "+c));d.productContext=d.productContext||{};d.structuredContext=d.structuredContext||{};(a=Ma(a))&&a.options&&(k.extend(d.productContext,a.options.productContext),k.extend(d.structuredContext,a.options.structuredContext),d.contextJwt=a.options.contextJwt);return d},getModuleOptionsByAddonAndModuleKey:Ka,getConfigFromTarget:Ma},
L=new function(){var a=this;this._providers={};this.registerProvider=function(c,b){a._providers[c]=b};this.getProvider=function(c){return a._providers[c]}},Fb=new (function(){function a(){this.moduleNamesToModules=new Map}a.prototype.registerModule=function(a,b){var c=a.getModuleRegistrationName();this.moduleNamesToModules.set(c,a)};a.prototype.getModuleByName=function(a){return this.moduleNamesToModules.get(a)};a.prototype.getProviderByModuleName=function(a){if((a=this.moduleNamesToModules.get(a))&&
a.isEnabled())return a.getProvider()};return a}()),p=new (function(){function a(){var b=this;this.create=function(b){return xa.createExtension(va.extensionConfigSanitizer(b))};this.dialog={create:function(b,a){var c=B.getModuleOptionsByAddonAndModuleKey("dialog",b.addon_key,b.key),c=k.extend({},c||{},a);T.open(b,c)},close:function(a,c){var d=b.getFrameworkAdaptor().getProviderByModuleName("dialog");d?(A.assertActiveDialogOrThrow(d,a),q.broadcast("dialog.close",{addon_key:a},c),d.close()):T.close()}};
this.registerContentResolver={resolveByExtension:function(a){b._contentResolver=a;ta.registerContentResolver({callback:a})}};this.getContentResolver=function(){return b._contentResolver};this.registerProvider=function(b,a){L.registerProvider(b,a)};this.getProvider=function(b){return L.getProvider(b)};this.frameworkAdaptor=Fb}var c=a.prototype;c.createExtension=function(b){b.options=b.options||{};b.options.noDom=!0;b=va.createSimpleXdmExtension(b);P.trackIframeBridgeStart(b.extension);return b};c.setFrameworkAdaptor=
function(b){this.frameworkAdaptor=b};c.getFrameworkAdaptor=function(){return this.frameworkAdaptor};c._cleanExtension=function(b){return k.pick(b,["id","addon_key","key","options","url"])};c.onIframeEstablished=function(b){b._wrapper=function(a){b.call({},{$el:a.$el,extension:this._cleanExtension(a.extension)})}.bind(this);f.register("after:iframe-bridge-established",b._wrapper)};c.offIframeEstablished=function(b){if(b._wrapper)f.unregister("after:iframe-bridge-established",b._wrapper);else throw Error("cannot unregister event dispatch listener without _wrapper reference");
};c.onIframeUnload=function(b){var a=this;f.register("after:iframe-unload",function(c){b.call({},{$el:c.$el,extension:a._cleanExtension(c.extension)})})};c.onPublicEventDispatched=function(b){b._wrapper=function(a){b.call({},{type:a.type,event:a.event,extension:this._cleanExtension(a.sender)})}.bind(this);f.register("after:event-public-dispatch",b._wrapper)};c.offPublicEventDispatched=function(b){if(b._wrapper)f.unregister("after:event-public-dispatch",b._wrapper);else throw Error("cannot unregister event dispatch listener without _wrapper reference");
};c.onKeyEvent=function(b,a,c,g){G.registerKeyEvent({extension_id:b,key:a,modifiers:c,callback:g})};c.offKeyEvent=function(b,a,c,g){G.unregisterKeyEvent({extension_id:b,key:a,modifiers:c,callback:g})};c.onFrameClick=function(b){if("function"!==typeof b)throw Error("handleIframeClick must be a function");G.registerClickHandler(b)};c.offFrameClick=function(){G.unregisterClickHandler()};c.destroy=function(b){fa.notifyIframeDestroyed({id:b})};c.defineModule=function(b,a){Eb.defineCustomModule(b,a)};c.isModuleDefined=
function(b){return n.isModuleDefined(b)};c.broadcastEvent=function(b,a,c){q.broadcast(b,a,c)};c.getExtensions=function(b){return n.getExtensions(b)};c.trackDeprecatedMethodUsed=function(b,a){P.trackDeprecatedMethodUsed(b,a)};c.trackAnalyticsEvent=function(b,a){P.trackExternalEvent(b,a)};c.setJwtClockSkew=function(a){ta.setClockSkew(a)};c.isJwtExpired=function(a,c){return c?db.isJwtExpired(a):K.isJwtExpired(a)};c.hasJwt=function(a){return K.hasJwt(a)};c.getBooleanFeatureFlag=function(a){return Na(a)};
c.setExtensionConfigurationOptions=function(a,c){ua.set(a,c)};c.getExtensionConfigurationOption=function(a){return ua.get(a)};return a}()),pb=/^ap-dialog-[0-9A-Za-z]+$/,Gb="small medium large xlarge fullscreen maximum".split(" "),I=new (function(){function a(){}var c=a.prototype;c._renderHeaderCloseBtn=function(){var a=h("\x3ca /\x3e").addClass("aui-dialog2-header-close"),c=h("\x3cspan /\x3e").addClass("aui-icon aui-icon-small aui-iconfont-close-dialog").text("Close");a.append(c);return a};c._renderFullScreenHeader=
function(a,c){var b=h("\x3cdiv /\x3e").addClass("header-title-container aui-item expanded"),d=h("\x3cdiv /\x3e").append(h("\x3cspan /\x3e").addClass("header-title").text(c.header||""));b.append(d);a.append(b).append(this._renderHeaderActions(c.actions,c.extension));return a};c._renderHeader=function(a){var b=h("\x3cheader /\x3e").addClass("aui-dialog2-header");if("fullscreen"===a.size)return this._renderFullScreenHeader(b,a);a.header&&(a=h("\x3ch2 /\x3e").addClass("aui-dialog2-header-main").text(a.header),
b.append(a));b.append(this._renderHeaderCloseBtn());return b};c._renderHeaderActions=function(a,c){var b=h("\x3cdiv /\x3e").addClass("aui-item header-control-panel");a[0].additionalClasses=["aui-icon","aui-icon-small","aui-iconfont-success"];a[1].additionalClasses=["aui-icon","aui-icon-small","aui-iconfont-close-dialog"];this._renderActionButtons(a,c).forEach(function(a){b.append(a)});return b};c._renderContent=function(a){var b=h("\x3cdiv /\x3e").addClass("aui-dialog2-content");a&&b.append(a);return b};
c._renderFooter=function(a){var b=h("\x3cfooter /\x3e").addClass("aui-dialog2-footer");if("fullscreen"!==a.size){var c=this._renderFooterActions(a.actions,a.extension);b.append(c)}a.hint&&(a=h("\x3cdiv /\x3e").addClass("aui-dialog2-footer-hint").text(a.hint),b.append(a));return b};c._renderActionButtons=function(a,c){var b=this,d=[];[].concat(a).forEach(function(a){d.push(b._renderDialogButton({text:a.text,name:a.name,type:a.type,additionalClasses:a.additionalClasses,custom:a.custom||!1,identifier:a.identifier,
immutable:a.immutable,disabled:a.disabled||!1},c))});return d};c._renderFooterActions=function(a,c){var b=h("\x3cdiv /\x3e").addClass("aui-dialog2-footer-actions");this._renderActionButtons(a,c).forEach(function(a){b.append(a)});return b};c._renderDialogButton=function(a,c){a.additionalClasses=a.additionalClasses||[];a.additionalClasses.push("ap-aui-dialog-button");a.custom&&a.additionalClasses.push("ap-dialog-custom-button");var b=w.render(a);b.extension=c;return b};c.render=function(a){var b=k.extend({},
a);a=A.sanitizeOptions(a);var c=h("\x3csection /\x3e").attr({role:"dialog",id:"ap-dialog-"+a.id});c.attr("data-aui-modal","true");c.data({"aui-remove-on-hide":!0,extension:a.extension});c.addClass("aui-layer aui-dialog2 ap-aui-dialog2");0<=Gb.indexOf(a.size)&&c.addClass("aui-dialog2-"+a.size);if("fullscreen"===a.size||"maximum"===a.size)a.chrome&&c.addClass("ap-header-controls"),c.addClass("aui-dialog2-maximum");c.append(this._renderContent(a.$content));a.chrome?(c.prepend(this._renderHeader({header:a.header,
actions:a.actions,size:a.size})),c.append(this._renderFooter({extension:a.extension,actions:a.actions,hint:a.hint,size:a.size}))):c.addClass("aui-dialog2-chromeless");var g=AJS.dialog2(c);g._id=a.id;"fullscreen"===a.size&&(a.height=a.width="100%");a.size&&"fullscreen"!==a.size||AJS.layer(c).changeSize(a.width,a.height);if(a.onHide)g.on("hide",a.onHide);g.show();g.$el.data("extension",a.extension);g.$el.data("originalOptions",b);return c};c.setIframeDimensions=function(a){H.resize("100%","100%",a)};
c.getActive=function(){return D()};c.buttonIsEnabled=function(a){var b=D();if(b)return a=Z(a,b.$el),w.isEnabled(a)};c.buttonIsVisible=function(a){var b=D();if(b)return a=Z(a,b.$el),w.isVisible(a)};c.getByExtension=function(a){var b;if("function"===typeof a)b=a;else{var c=Object.getOwnPropertyNames(a);b=function(b){var d=h(b).data("extension");return c.every(function(b){return d[b]===a[b]})}}return h(".ap-aui-dialog2").toArray().filter(b).map(function(a){return AJS.dialog2(a)})};c.addButton=function(a,
c){c.custom=!0;var b=this._renderDialogButton(c,a),d=this.getByExtension({addon_key:a.addon_key,key:a.key})[0].$el;Oa(d).append(b);return d};return a}());f.register("iframe-bridge-established",function(a){if(a.extension.options.isDialog){var c,b=p.getFrameworkAdaptor().getProviderByModuleName("dialog");b?(c=b.close,b.setButtonDisabled("submit",!1)):(z.toggleButton({identifier:"submit",enabled:!0}),c=function(){z.close({dialog:D(),extension:a.extension})});a.extension.options.preventDialogCloseOnEscape||
(G.registerKeyEvent({extension_id:a.extension.id,key:27,callback:c}),f.registerOnce("dialog-close",function(b){G.unregisterKeyEvent({extension_id:a.extension.id,key:27})}))}});f.register("dialog-close-active",function(a){var c=D();c&&z.close({customData:a.customData,dialog:c,extension:a.extension})});f.register("dialog-close",function(a){a.dialog&&a.dialog.hide()});f.register("dialog-button-toggle",function(a){var c=D();c&&(c=Z(a.identifier,c.$el),wa.toggle(c,!a.enabled))});f.register("dialog-button-toggle-visibility",
function(a){var c=D();c&&(c=Z(a.identifier,c.$el),wa.toggleVisibility(c,a.hidden))});f.register("button-clicked",function(a){a=a.$el;if(a.hasClass("ap-aui-dialog-button")){var c=a.parents(".ap-aui-dialog2"),b=c.find("iframe");b.length&&b[0].bridgeEstablished?z.clickButton(w.getIdentifier(a),a,c.data("extension")):z.close({dialog:D(),extension:a.extension})}});h.fn&&(f.register("iframe-create",function(a){a.extension.options&&a.extension.options.isDialog&&I.setIframeDimensions(a.extension.$el)}),f.register("dialog-button-add",
function(a){I.addButton(a.extension,a.button)}),f.register("host-window-resize",k.debounce(function(){h(".ap-aui-dialog2").each(function(a,c){var b=h(c),b=A.sanitizeOptions(b.data("originalOptions"));c.style.width=b.width;c.style.height=b.height})},100)));G.registerWindowKeyEvent({keyCode:27,callback:function(){z.closeActive({customData:{},extension:null})}});var M=new (function(){function a(){}var c=a.prototype;c.render=function(a,c){a.options=a.options||{};c=c||{};a.options.isDialog=!0;a.options.dialogId=
c.id;a.options.preventDialogCloseOnEscape=!1===c.closeOnEscape;a.options.hostFrameOffset=c.hostFrameOffset;a.options.hideIframeUntilLoad=!0;var b=xa.createExtension(a);return I.render({extension:a,$content:b,chrome:c.chrome,width:c.width,height:c.height,size:c.size,header:c.header,hint:c.hint,submitText:c.submitText,cancelText:c.cancelText,buttons:c.buttons,onHide:c.onHide})};c.getActiveDialog=function(){return I.getActive()};c.buttonIsEnabled=function(a){return I.buttonIsEnabled(a)};c.buttonIsVisible=
function(a){return I.buttonIsVisible(a)};c.getByExtension=function(a){"string"===typeof a&&(a={id:a});return I.getByExtension(a)};return a}());f.register("dialog-extension-open",function(a){var c=a.extension,b=A.sanitizeOptions(a.options),d=p.getFrameworkAdaptor().getProviderByModuleName("dialog");if(d){var e=function(a){var b=c.key,d=c.addon_key,e={button:{identifier:a.identifier,name:a.identifier,text:a.text}};0<=["submit","cancel"].indexOf(a.identifier)&&q.broadcast("dialog."+a.identifier,{addon_key:d,
key:b},e);q.broadcast("dialog.button.click",{addon_key:d,key:b},e)};c.options.preventDialogCloseOnEscape=!1===b.closeOnEscape;b.actions.map(function(a){return a.onClick=e.bind(null,a)});d.create(b,c)}else M.render(a.extension,a.options)});var fb={};f.register("dialog-close",function(a){a.dialog&&a.extension&&q.broadcast("dialog.close",{addon_key:a.extension.addon_key},a.customData)});f.register("dialog-button-click",function(a){var c={button:{name:w.getName(a.$el),identifier:w.getIdentifier(a.$el),
text:w.getText(a.$el)}},b={addon_key:a.extension.addon_key,key:a.extension.key};window.AJS&&window.AJS.DarkFeatures&&window.AJS.DarkFeatures.isEnabled&&window.AJS.DarkFeatures.isEnabled("connect.js.dialog.idfilter")&&(b.id=a.extension.id);a.$el.hasClass("ap-dialog-custom-button")||q.broadcast("dialog."+c.button.name,b,c);q.broadcast("dialog.button.click",b,c)});var C=function(){function a(a,c){c=k.last(arguments);var b=p.getFrameworkAdaptor().getProviderByModuleName("dialog");if(b)A.assertActiveDialogOrThrow(b,
c._context.extension.addon_key),this.identifier=this.name=a;else{if(!M.getActiveDialog())throw Error("Failed to find an active dialog.");this.identifier=this.name=a;this.enabled=M.buttonIsEnabled(a);this.hidden=!M.buttonIsVisible(a)}}var c=a.prototype;c.enable=function(){this.setState({enabled:!0})};c.disable=function(){this.setState({enabled:!1})};c.isEnabled=function(a){a=k.last(arguments);var b=p.getFrameworkAdaptor().getProviderByModuleName("dialog");b?a(!b.isButtonDisabled(this.identifier)):
a(this.enabled)};c.toggle=function(){var a=p.getFrameworkAdaptor().getProviderByModuleName("dialog");a?a.toggleButton(this.identifier):this.setState({enabled:!this.enabled})};c.setState=function(a){var b=p.getFrameworkAdaptor().getProviderByModuleName("dialog");b?b.setButtonDisabled(this.identifier,!a.enabled):(this.enabled=a.enabled,z.toggleButton({identifier:this.identifier,enabled:this.enabled}))};c.trigger=function(a){a=k.last(arguments);this.enabled&&z.dialogMessage({name:this.name,extension:a._context.extension})};
c.isHidden=function(a){a=k.last(arguments);var b=p.getFrameworkAdaptor().getProviderByModuleName("dialog");b?a(b.isButtonHidden(this.identifier)):a(this.hidden)};c.hide=function(){this.setHidden(!0)};c.show=function(){this.setHidden(!1)};c.setHidden=function(a){var b=p.getFrameworkAdaptor().getProviderByModuleName("dialog");b?b.setButtonHidden(this.identifier,a):(this.hidden=a,z.toggleButtonVisibility({identifier:this.identifier,hidden:this.hidden}))};return a}(),Hb={create:{constructor:function(a,
c){c=k.last(arguments);var b=c._id,d=c._context.extension,d={addon_key:d.addon_key,key:a.key,options:k.pick(d.options,["customData","productContext"])};d.options.customData=a.customData;var e=A.moduleOptionsFromGlobal(d.addon_key,d.key);"number"===typeof(e||{}).hostFrameOffset&&(d.options.hostFrameOffset=e.hostFrameOffset);a=k.extend({},e||{},a);a.id=b;A.trackMultipleDialogOpening(d,a);T.open(d,a);this.customData=a.customData;fb[b]=this}},close:function(a,c){c=k.last(arguments);var b=p.getFrameworkAdaptor().getProviderByModuleName("dialog");
b?(A.assertActiveDialogOrThrow(b,c._context.extension.addon_key),q.broadcast("dialog.close",{addon_key:c._context.extension.addon_key},a),b.close()):(b=c._context.extension.options.isDialog?M.getByExtension(c._context.extension.id)[0]:M.getActiveDialog(),z.close({customData:a,dialog:b,extension:c._context.extension}))},getCustomData:function(a){a=k.last(arguments);var c=fb[a._context.extension.options.dialogId];c?a(c.customData):a(void 0)},getButton:{constructor:C,enable:C.prototype.enable,disable:C.prototype.disable,
toggle:C.prototype.toggle,isEnabled:C.prototype.isEnabled,trigger:C.prototype.trigger,hide:C.prototype.hide,show:C.prototype.show,isHidden:C.prototype.isHidden},createButton:{constructor:function(a,c){c=k.last(arguments);var b=p.getFrameworkAdaptor().getProviderByModuleName("dialog");b?(A.assertActiveDialogOrThrow(b,c._context.extension.addon_key),b.createButton({identifier:a.identifier,text:a.text,hidden:!1,disabled:a.disabled||!1,onClick:function(){q.broadcast("dialog.button.click",{addon_key:c._context.extension.addon_key,
key:c._context.extension.key},{button:{identifier:a.identifier,text:a.text}})}})):T.addUserButton({identifier:a.identifier,text:a.text},c._context.extension)}}};f.register("iframe-resize",function(a){H.resize(a.width,a.height,a.$el)});f.register("iframe-size-to-parent",function(a){var c=k.getIframeByExtensionId(a.extensionId);a=h(window).height()-c.offset().top-1;f.dispatch("iframe-resize",{width:"100%",height:a+"px",$el:c})});f.register("hide-footer",function(a){a&&h("#footer").css({display:"none"})});
window.addEventListener("resize",function(a){f.dispatch("host-window-resize",a)},!0);var ha={iframeResize:function(a,c,b){var d;d=b.extension_id?k.getIframeByExtensionId(b.extension_id):b;f.dispatch("iframe-resize",{width:a,height:c,$el:d,extension:b.extension})},sizeToParent:function(a,c){f.dispatch("iframe-size-to-parent",{hideFooter:c,extensionId:a})},hideFooter:function(a){f.dispatch("hide-footer",a)}},gb=k.debounce,ia={},N=[],ja={},Ib={getLocation:function(a){a=k.last(arguments);var c=L.getProvider("get-location");
"function"===typeof c?a(c()):a(window.location.href)},resize:function(a,c,b){b=k.last(arguments);var d=L.getProvider("addon");if(d)d.resize(a,c,b._context);else{var d=b._context.extension.id,e=b._context.extension.options;if(-1!==N.indexOf(d)||e&&e.isDialog)return!1;ia[d]||(ia[d]=gb(function(a,b,c){ha.iframeResize(a,b,c._context)},50));ia[d](a,c,b)}return!0},sizeToParent:gb(function(a,c){c=k.last(arguments);var b=L.getProvider("addon");b?b.sizeToParent(a,c._context):c._context.extension.options.isFullPage?
(k.getIframeByExtensionId(c._context.extension_id).addClass("full-size-general-page"),ha.sizeToParent(c._context.extension_id,a),ja[c._context.extension_id]={hideFooter:a}):k.getIframeByExtensionId(c._context.extension_id).addClass("full-size-general-page-fail")}),hideFooter:function(a){a&&ha.hideFooter(a)}};f.register("host-window-resize",function(a){Object.getOwnPropertyNames(ja).forEach(function(a){ha.sizeToParent(a,ja[a].hideFooter)})});f.register("after:iframe-unload",function(a){delete ia[a.extension.id];
delete ja[a.extension.id];-1!==N.indexOf(a.extension.id)&&N.splice(N.indexOf(a.extension.id),1)});f.register("before:iframe-size-to-parent",function(a){-1===N.indexOf(a.extensionId)&&N.push(a.extensionId)});var ya={hide:function(a){f.dispatch("inline-dialog-hide",{$el:a})},refresh:function(a){f.dispatch("inline-dialog-refresh",{$el:a})},hideTriggered:function(a,c){f.dispatch("inline-dialog-hidden",{extension_id:a,$el:c})},close:function(){f.dispatch("inline-dialog-close",{})},created:function(a){f.dispatch("inline-dialog-opened",
{$el:a.$el,trigger:a.trigger,extension:a.extension})}},Qa="generic error warning success info hint".split(" "),Ra=/^ap-message-[0-9A-fa-f]+$/,F={},Pa=!1,Jb={clear:function(a){a="ap-message-"+a._id;if(Ra.test(a)){var c=p.getFrameworkAdaptor().getProviderByModuleName("messages");c?c.clear(a):h("#"+a).closeMessage()}},onClose:function(a,c){c=k.last(arguments);var b=a._id,d=p.getFrameworkAdaptor().getProviderByModuleName("messages");if(d)d.onClose("ap-message-"+a._id,c);else F[b]&&(F[b].onCloseTrigger=
c)},generic:J("generic"),error:J("error"),warning:J("warning"),success:J("success"),info:J("info"),hint:J("hint")},Q={actionInvoked:function(a,c){f.dispatch("flag-action-invoked",{id:c,actionId:a})},open:function(a){f.dispatch("flag-open",{id:a})},close:function(a){f.dispatch("flag-close",{id:a})},closed:function(a){f.dispatch("flag-closed",{id:a})}},oa=new (function(){function a(){}var c=a.prototype;c.cleanKey=function(a){return(a=a.match(/^ap-flag-(.+)$/))&&a[1]?a[1]:null};c._toHtmlString=function(a){if("string"===
h.type(a))return a;if("object"===h.type(a)&&a instanceof h)return a.html()};c._renderBody=function(a){a=this._toHtmlString(a);a=h("\x3cdiv /\x3e").html(a);h("\x3cp /\x3e").addClass("ac-flag-actions").appendTo(a);return a.html()};c._renderActions=function(a,c,e){var b=a.find(".ac-flag-actions");e=e||{};var d;Object.getOwnPropertyNames(e).forEach(function(a){d=h("\x3ca /\x3e").attr("href","#").data({key:a,flag_id:c}).text(e[a]);b.append(d)},this);return a};c.render=function(a){sb();var b="ap-flag-"+
a.id,c=AJS.flag({type:a.type,title:a.title,body:this._renderBody(a.body),close:a.close});c.setAttribute("id",b);b=h(c);this._renderActions(b,a.id,a.actions);b.addClass("ac-aui-flag");b.close=c.close;return b};c.close=function(a){document.getElementById(a).close()};return a}()),Sa=!1;f.register("flag-close",function(a){oa.close(a.id)});var R={},hb=function(){function a(a,b){b=k.last(arguments);if("object"===typeof a){var c=b._id,e=p.getFrameworkAdaptor().getProviderByModuleName("flag");if(e){var f=
[];"object"===typeof a.actions&&(f=Object.getOwnPropertyNames(a.actions).map(function(b){return{actionKey:b,actionText:a.actions[b],executeAction:Q.actionInvoked.bind(null,b,c)}}));f={id:c,title:a.title,body:a.body,actions:f,onClose:Q.closed,close:a.close,type:(a.type||"info").toLowerCase()};this.flag=e.create(f);(e=L.getProvider("addon"))&&e.registerUnmountCallback&&e.registerUnmountCallback(this.close.bind(this),b._context)}else this.flag=oa.render({type:a.type,title:a.title,body:AJS.escapeHtml(a.body),
actions:a.actions,close:a.close,id:c}),Q.open(this.flag.attr("id"));this.onTriggers={};this.extension=b._context.extension;R[b._id]=this;b.call(null,b._id)}}a.prototype.close=function(){this.flag.close()};return a}();f.register("flag-closed",function(a){Ta(a.id,"flag.close");R[a.id]&&delete R[a.id]});f.register("flag-action-invoked",function(a){Ta(a.id,"flag.action",{actionIdentifier:a.actionId})});var Kb={create:{constructor:hb,close:hb.prototype.close}},pa,ba;f.register("iframe-bridge-established",
function(a){a.extension.options.isFullPage&&(window.addEventListener("scroll",Va),pa=a.extension.id)});f.register("iframe-destroyed",function(a){Ua()});f.register("iframe-unload",function(a){Ua()});var ib={itemSelected:function(a,c,b){f.dispatch("dropdown-item-selected",{id:a,item:c,extension:b})}};f.register("dropdown-item-selected",function(a){q.broadcast("dropdown-item-selected",{addon_key:a.extension.addon_key,key:a.extension.key},{dropdownId:a.id,item:a.item})});f.register("iframe-destroyed",
function(a){var c=p.getFrameworkAdaptor().getProviderByModuleName("dropdown");c&&c.destroyByExtension(a.extension.extension_id)});f.register("after:iframe-unload",function(a){var c=p.getFrameworkAdaptor().getProviderByModuleName("dropdown");c&&c.destroyByExtension(a.extension.extension_id)});var U=new (function(){function a(){this._webitems={};this._contentResolver=function(){}}var c=a.prototype;c.setContentResolver=function(a){this._contentResolver=a};c.requestContent=function(a){if(a.addon_key&&
a.key)return this._contentResolver.call(null,k.extend({classifier:"json"},a))};c.getWebItemsBySelector=function(a){var b=this,c;Object.getOwnPropertyNames(this._webitems).some(function(d){d=b._webitems[d];return d.selector&&d.selector.trim()===a.trim()?(c=d,!0):!1});return c};c.setWebItem=function(a){return this._webitems[a.name]={name:a.name,selector:a.selector,triggers:a.triggers}};c._removeTriggers=function(a){var b=this,c=B.sanitizeTriggers(a.triggers);h(function(){h("body").off(c,a.selector,
b._webitems[a.name]._on)});delete this._webitems[a.name]._on};c._addTriggers=function(a){var b=B.sanitizeTriggers(a.triggers);a._on=function(b){b.preventDefault();var c=h(b.target).closest(a.selector),d=B.getConfigFromTarget(c),d=d&&d.url?d.url:void 0,c={addon_key:B.getExtensionKey(c),key:B.getKey(c),options:B.getOptionsForWebItem(c),url:d};za.webitemInvoked(a,b,c)};h(function(){h("body").on(b,a.selector,a._on)})};return a}());f.register("webitem-added",function(a){U._addTriggers(a.webitem)});f.register("content-resolver-register-by-extension",
function(a){U.setContentResolver(a.callback)});document.addEventListener("aui-responsive-menu-item-created",function(a){var c=a.detail.originalItem.querySelector('a[class*\x3d"ap-"]');if(c){var b=a.detail.newItem.querySelector("a");[].slice.call(c.classList).forEach(function(a){/^ap-/.test(a)&&b.classList.add(a)})}});var za={addWebItem:function(a){if(U.getWebItemsBySelector(a.selector))return!1;a=U.setWebItem(a);f.dispatch("webitem-added",{webitem:a})},webitemInvoked:function(a,c,b){f.dispatch("webitem-invoked:"+
a.name,{webitem:a,event:c,extension:b})}},Lb={addExtension:function(a){f.dispatch("inline-dialog-extension",{$el:a.$el,extension:a.extension})}},V=new (function(){function a(){}var c=a.prototype;c.resize=function(a){var b=k.stringToDimension(a.width),c=k.stringToDimension(a.height),f=a.$el.find(".contents");1===f.length&&(f.css({width:b,height:c}),ya.refresh(a.$el))};c.refresh=function(a){a[0].popup.reset()};c._getInlineDialog=function(a){return AJS.InlineDialog(a)};c._renderContainer=function(){return h("\x3cdiv /\x3e").addClass("aui-inline-dialog-contents")};
c._displayInlineDialog=function(a){ya.created({$el:a.$el,trigger:a.trigger,extension:a.extension})};c.hideInlineDialog=function(a){a.hide()};c.closeInlineDialog=function(){h(".aui-inline-dialog").filter(function(){return 0<h(this).find(".ap-iframe-container").length}).hide()};c.render=function(a){var b=this,c=h(document.getElementById("inline-dialog-"+a.id));0!==c.length&&c.remove();return AJS.InlineDialog(a.bindTo,a.id,function(c,d,e){c.append(a.$content);b._displayInlineDialog({extension:a.extension,
$el:c,trigger:d});e()},a.inlineDialogOptions)};return a}());f.register("iframe-resize",function(a){var c=a.$el.parents(".aui-inline-dialog");1===c.length&&V.resize({width:a.width,height:a.height,$el:c})});f.register("inline-dialog-refresh",function(a){V.refresh(a.$el)});f.register("inline-dialog-hide",function(a){V.hideInlineDialog(a.$el)});f.register("inline-dialog-close",function(a){V.closeInlineDialog()});var Mb=["mouseover","click"],W=new (function(){function a(){this._inlineDialogWebItemSpec=
{name:"inline-dialog",selector:".ap-inline-dialog",triggers:Mb};this._inlineDialogWebItems={}}var c=a.prototype;c.getWebItem=function(){return this._inlineDialogWebItemSpec};c._createInlineDialog=function(a){return V.render({extension:a.extension,id:a.id,bindTo:a.$target,$content:h("\x3cdiv /\x3e"),inlineDialogOptions:a.extension.options})};c.triggered=function(a){if("click"===a.event.type||a.extension.options.onHover){var b=h(a.event.currentTarget),c=b.data("inline-dialog-target-uid");this._createInlineDialog({id:c,
extension:a.extension,$target:b,options:a.extension.options||{}}).show()}};c.opened=function(a){var b=a.$el.find("iframe");if(b&&1===b.length&&(b=b.attr("src"),0<b.length)){var c=K.hasJwt(b);if(c&&!K.isJwtExpired(b)||!c)return!1}b=U.requestContent(a.extension);if(!b)return console.warn("no content resolver found"),!1;b.then(function(b){b.options=b.options||{};k.extend(b.options,{autoresize:!0,widthinpx:!0});Lb.addExtension({$el:a.$el,extension:b})});return!0};c.addExtension=function(a){var b=xa.createExtension(a.extension);
a.$el.empty().append(b)};c.createIfNotExists=function(a){a=h(a.event.currentTarget);var b=a.data("inline-dialog-target-uid");b||(b=B.uniqueId(),a.data("inline-dialog-target-uid",b))};return a}()),Aa=W.getWebItem();f.register("before:webitem-invoked:"+Aa.name,function(a){W.createIfNotExists(a)});f.register("webitem-invoked:"+Aa.name,function(a){W.triggered(a)});f.register("inline-dialog-opened",function(a){W.opened(a)});f.register("inline-dialog-extension",function(a){W.addExtension(a)});za.addWebItem(Aa);
var Nb=["click"],Ob={chrome:!0},Ba=new (function(){function a(){this._dialogWebItem={name:"dialog",selector:".ap-dialog",triggers:Nb}}var c=a.prototype;c.getWebItem=function(){return this._dialogWebItem};c._dialogOptions=function(a){return k.extend({},Ob,a||{})};c.triggered=function(a){var b=h(a.event.currentTarget).data("dialog-target-uid"),c=this._dialogOptions(a.extension.options);c.id=b;T.open(a.extension,c)};c.createIfNotExists=function(a){a=h(a.event.currentTarget);var b=a.data("dialog-target-uid");
b||(b=B.uniqueId(),a.data("dialog-target-uid",b))};return a}()),Ca=Ba.getWebItem();f.register("webitem-invoked:"+Ca.name,function(a){Ba.triggered(a)});f.register("before:webitem-invoked:"+Ca.name,Ba.createIfNotExists);za.addWebItem(Ca);window._AP||(window._AP={});window._AP.version||(window._AP.version="5.3.6");n.defineModule("messages",Jb);n.defineModule("flag",Kb);n.defineModule("dialog",Hb);n.defineModule("inlineDialog",{hide:function(a){a=k.last(arguments);var c=p.getFrameworkAdaptor().getProviderByModuleName("inlineDialog");
c?c.hide(a._context):ya.close()}});n.defineModule("env",Ib);n.defineModule("events",{emit:function(a){for(var c=arguments.length,b=Array(1<c?c-1:0),d=1;d<c;d++)b[d-1]=arguments[d];c=k.last(b);b=k.first(b,-1);q.broadcast(a,{addon_key:c._context.extension.addon_key},b)},emitPublic:function(a){for(var c=arguments.length,b=Array(1<c?c-1:0),d=1;d<c;d++)b[d-1]=arguments[d];c=k.last(b)._context.extension;b=k.first(b,-1);q.broadcastPublic(a,b,c)}});n.defineModule("_analytics",{trackDeprecatedMethodUsed:function(a,
c){c=k.last(arguments);P.trackDeprecatedMethodUsed(a,c._context.extension)}});n.defineModule("scrollPosition",{getPosition:function(a){a=k.last(arguments);if(a._context.extension.options.isFullPage){var c=k.getIframeByExtensionId(a._context.extension_id).offset(),b=h(window);a({scrollY:b.scrollTop()-c.top,scrollX:b.scrollLeft()-c.left,width:window.innerWidth,height:window.innerHeight})}},setVerticalPosition:function(a,c){c=k.last(arguments);if(c._context.extension.options&&c._context.extension.options.isFullPage){var b=
k.getIframeByExtensionId(c._context.extension_id).offset();"number"===typeof a&&(document.documentElement.scrollTop=b.top+a)}}});n.defineModule("dropdown",{create:function(a,c){c=k.last(arguments);if("object"===typeof a){var b=p.getFrameworkAdaptor().getProviderByModuleName("dropdown");if(b){var d=tb(a.list),d={dropdownId:a.dropdownId,dropdownGroups:d,dropdownItemNotifier:function(a){ib.itemSelected(a.dropdownId,a.item,c._context.extension)}};b.create(d,c._context);return d}}},showAt:function(a,c,
b,d){var e=k.last(arguments),f={left:0,top:0},h=document.getElementById(e._context.extension_id);h?f=h.getBoundingClientRect():console.error("ACJS: no iframe found for dropdown");(h=p.getFrameworkAdaptor().getProviderByModuleName("dropdown"))&&h.showAt({dropdownId:a,x:c,y:b,width:d},{iframeDimensions:f,onItemSelection:function(a,b){ib.itemSelected(a,b,e._context.extension)}})},hide:function(a){var c=p.getFrameworkAdaptor().getProviderByModuleName("dropdown");c&&c.hide(a)},itemDisable:function(a,c){var b=
p.getFrameworkAdaptor().getProviderByModuleName("dropdown");b&&b.itemDisable(a,c)},itemEnable:function(a,c){var b=p.getFrameworkAdaptor().getProviderByModuleName("dropdown");b&&b.itemEnable(a,c)}});n.defineModule("host",{focus:function(){window.document.querySelector("a").focus({preventScroll:!0});window.document.querySelector("a").blur()},getSelectedText:function(a){var c="",b=window.document.getSelection();b&&b.anchorNode&&3===b.anchorNode.nodeType&&(c=b.toString());a(c)}});f.register("module-define-custom",
function(a){n.defineModule(a.name,a.methods)});n.registerRequestNotifier(function(a){var c=function(){"req"===a.type?x.dispatch("bridge.invokemethod",{module:a.module,fn:a.fn,addonKey:a.addon_key,moduleKey:a.key}):"sub"===a.type&&x.dispatch("bridge.register-sub",{subAddonKey:a.sub.addon_key,subModuleKey:a.sub.key,addonKey:a.addon_key,moduleKey:a.key,blocked:a.blocked})};"function"===typeof window.requestIdleCallback?window.requestIdleCallback(c,{timeout:1E3}):c()});n.setFeatureFlagGetter(Na);return p});;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:ap-spa-context-v5', location = 'v5/js/spa-context/main.js' */
define("ac/spa-context",function(){var a=null,b=null;return{provideContainerApi:function(b){a=b},provideNavigationApi:function(a){b=a},isInIframe:function(){return null!==a},canSpaTransition:function(){return null!==b},getContainerApi:function(){return a},getNavigationApi:function(){return b}}});;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:ap-navigator-v5', location = 'v5/js/iframe/host/_uritemplate.js' */
(function(x){function n(a){var b;if(null===a||void 0===a)return!1;if(e.isArray(a))return 0<a.length;if("string"===typeof a||"number"===typeof a||"boolean"===typeof a)return!0;for(b in a)if(a.hasOwnProperty(b)&&n(a[b]))return!0;return!1}var m=function(){function a(b){this.options=b}a.prototype.toString=function(){return JSON&&JSON.stringify?JSON.stringify(this.options):this.options};return a}(),e=function(){function a(b){if("function"===typeof Object.freeze&&"object"===typeof b&&null!==b){Object.freeze(b);
var c,k;for(k in b)b.hasOwnProperty(k)&&(c=b[k],"object"===typeof c&&a(c))}return b}return{isArray:function(b){return"[object Array]"===Object.prototype.toString.apply(b)},isString:function(b){return"[object String]"===Object.prototype.toString.apply(b)},isNumber:function(b){return"[object Number]"===Object.prototype.toString.apply(b)},isBoolean:function(b){return"[object Boolean]"===Object.prototype.toString.apply(b)},join:function(b,c){var a="",d=!0,f;for(f=0;f<b.length;f+=1)d?d=!1:a+=c,a+=b[f];
return a},map:function(b,c){for(var a=[],d=0;d<b.length;d+=1)a.push(c(b[d]));return a},filter:function(b,c){for(var a=[],d=0;d<b.length;d+=1)c(b[d])&&a.push(b[d]);return a},deepFreeze:a}}(),t=function(){function a(b){return"0"<=b&&"9">=b}return{isAlpha:function(b){return"a"<=b&&"z">=b||"A"<=b&&"Z">=b},isDigit:a,isHexDigit:function(b){return a(b)||"a"<=b&&"f">=b||"A"<=b&&"F">=b}}}(),u=function(){function a(b,a){return"%"===b.charAt(a)&&t.isHexDigit(b.charAt(a+1))&&t.isHexDigit(b.charAt(a+2))}var b=
{encode:function(b){return unescape(encodeURIComponent(b))},numBytes:function(b){return 127>=b?1:194<=b&&223>=b?2:224<=b&&239>=b?3:240<=b&&244>=b?4:0},isValidFollowingCharCode:function(b){return 128<=b&&191>=b}};return{encodeCharacter:function(a){var c="";a=b.encode(a);var d,f;for(f=0;f<a.length;f+=1)d=a.charCodeAt(f),c+="%"+(16>d?"0":"")+d.toString(16).toUpperCase();return c},isPctEncoded:function(c){if(!a(c,0))return!1;var k=parseInt(c.substr(1,2),16),k=b.numBytes(k);if(0===k)return!1;for(var d=
1;d<k;d+=1)if(!a(c,3*d)||!b.isValidFollowingCharCode(parseInt(c.substr(3*d+1,2),16)))return!1;return!0},pctCharAt:function(c,k){var d=c.charAt(k);if(!a(c,k))return d;var f=parseInt(c.substr(k+1,2),16),f=b.numBytes(f);if(0===f)return d;for(var e=1;e<f;e+=1)if(!a(c,k+3*e)||!b.isValidFollowingCharCode(parseInt(c.substr(k+3*e+1,2),16)))return d;return c.substr(k,3*f)}}}(),v=function(){return{isVarchar:function(a){return t.isAlpha(a)||t.isDigit(a)||"_"===a||u.isPctEncoded(a)},isUnreserved:function(a){return t.isAlpha(a)||
t.isDigit(a)||"-"===a||"."===a||"_"===a||"~"===a},isReserved:function(a){return":"===a||"/"===a||"?"===a||"#"===a||"["===a||"]"===a||"@"===a||"!"===a||"$"===a||"\x26"===a||"("===a||")"===a||"*"===a||"+"===a||","===a||";"===a||"\x3d"===a||"'"===a}}}(),w=function(){function a(b,a){var c="",d,f;if("number"===typeof b||"boolean"===typeof b)b=b.toString();for(d=0;d<b.length;d+=f.length)f=b.charAt(d),c+=v.isUnreserved(f)||a&&v.isReserved(f)?f:u.encodeCharacter(f);return c}return{encode:a,encodePassReserved:function(b){return a(b,
!0)},encodeLiteral:function(b){var a="",k,d;for(k=0;k<b.length;k+=d.length)d=u.pctCharAt(b,k),a=1<d.length?a+d:a+(v.isReserved(d)||v.isUnreserved(d)?d:u.encodeCharacter(d));return a},encodeLiteralCharacter:function(b,a){var c=u.pctCharAt(b,a);return 1<c.length?c:v.isReserved(c)||v.isUnreserved(c)?c:u.encodeCharacter(c)}}}(),A=function(){function a(a){b[a]={symbol:a,separator:"?"===a?"\x26":""===a||"+"===a||"#"===a?",":a,named:";"===a||"\x26"===a||"?"===a,ifEmpty:"\x26"===a||"?"===a?"\x3d":"",first:"+"===
a?"":a,encode:"+"===a||"#"===a?w.encodePassReserved:w.encode,toString:function(){return this.symbol}}}var b={};a("");a("+");a("#");a(".");a("/");a(";");a("?");a("\x26");return{valueOf:function(a){return b[a]?b[a]:0<="\x3d,!@|".indexOf(a)?null:b[""]}}}(),y=function(){function a(a){this.literal=w.encodeLiteral(a)}a.prototype.expand=function(){return this.literal};a.prototype.toString=a.prototype.expand;return a}(),C=function(){function a(a){function b(){var b=a.substring(q,g);if(0===b.length)throw new m({expressionText:a,
message:"a varname must be specified",position:g});e={varname:b,exploded:!1,maxLength:null};q=null}function k(){if(p===g)throw new m({expressionText:a,message:"after a ':' you have to specify the length",position:g});e.maxLength=parseInt(a.substring(p,g),10);p=null}var d,f=[],e=null,q=null,p=null,g,h="";d=function(b){var c=A.valueOf(b);if(null===c)throw new m({expressionText:a,message:"illegal use of reserved operator",position:g,operator:b});return c}(a.charAt(0));for(q=g=d.symbol.length;g<a.length;g+=
h.length){h=u.pctCharAt(a,g);if(null!==q){if("."===h){if(q===g)throw new m({expressionText:a,message:"a varname MUST NOT start with a dot",position:g});continue}if(v.isVarchar(h))continue;b()}if(null!==p){if(g===p&&"0"===h)throw new m({expressionText:a,message:"A :prefix must not start with digit 0",position:g});if(t.isDigit(h)){if(4<=g-p)throw new m({expressionText:a,message:"A :prefix must have max 4 digits",position:g});continue}k()}if(":"===h){if(null!==e.maxLength)throw new m({expressionText:a,
message:"only one :maxLength is allowed per varspec",position:g});if(e.exploded)throw new m({expressionText:a,message:"an exploeded varspec MUST NOT be varspeced",position:g});p=g+1}else if("*"===h){if(null===e)throw new m({expressionText:a,message:"exploded without varspec",position:g});if(e.exploded)throw new m({expressionText:a,message:"exploded twice",position:g});if(e.maxLength)throw new m({expressionText:a,message:"an explode (*) MUST NOT follow to a prefix",position:g});e.exploded=!0}else if(","===
h)f.push(e),e=null,q=g+1;else throw new m({expressionText:a,message:"illegal character",character:h,position:g});}null!==q&&b();null!==p&&k();f.push(e);return new B(a,d,f)}return function(b){var c,e,d=[],f=null,n=0;for(c=0;c<b.length;c+=1)if(e=b.charAt(c),null!==n){if("}"===e)throw new m({templateText:b,message:"unopened brace closed",position:c});"{"===e&&(n<c&&d.push(new y(b.substring(n,c))),n=null,f=c)}else if(null!==f){if("{"===e)throw new m({templateText:b,message:"brace already opened",position:c});
if("}"===e){if(f+1===c)throw new m({templateText:b,message:"empty braces",position:f});try{d.push(a(b.substring(f+1,c)))}catch(q){if(q.prototype===m.prototype)throw new m({templateText:b,message:q.options.message,position:f+q.options.position,details:q.options});throw q;}f=null;n=c+1}}else throw Error("reached unreachable code");if(null!==f)throw new m({templateText:b,message:"unclosed brace",position:f});n<b.length&&d.push(new y(b.substr(n)));return new z(b,d)}}(),B=function(){function a(a){if(!n(a))return!0;
if(e.isString(a))return""===a;if(e.isNumber(a)||e.isBoolean(a))return!1;if(e.isArray(a))return 0===a.length;for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}function b(a){var b=[],c;for(c in a)a.hasOwnProperty(c)&&b.push({name:c,value:a[c]});return b}function c(a,b,c){this.templateText=a;this.operator=b;this.varspecs=c}function k(a,b,c){var d="";c=c.toString();if(b.named){d+=w.encodeLiteral(a.varname);if(""===c)return d+=b.ifEmpty;d+="\x3d"}null!==a.maxLength&&(c=c.substr(0,a.maxLength));return d+=
b.encode(c)}function d(a){return n(a.value)}function f(c,g,f){var h=[],l="";if(g.named){l+=w.encodeLiteral(c.varname);if(a(f))return l+=g.ifEmpty;l+="\x3d"}e.isArray(f)?(h=e.filter(f,n),h=e.map(h,g.encode)):(h=b(f),h=e.filter(h,d),h=e.map(h,function(a){return g.encode(a.name)+","+g.encode(a.value)}));return l+=e.join(h,",")}function m(c,g,f){var h=[];e.isArray(f)?(h=e.filter(f,n),h=e.map(h,function(b){var d=w.encodeLiteral(c.varname);return d=a(b)?d+g.ifEmpty:d+("\x3d"+g.encode(b))})):(h=b(f),h=e.filter(h,
d),h=e.map(h,function(b){var c=w.encodeLiteral(b.name);return c=a(b.value)?c+g.ifEmpty:c+("\x3d"+g.encode(b.value))}));return e.join(h,g.separator)}function q(a,c){var d=[],f="";e.isArray(c)?(d=e.filter(c,n),d=e.map(d,a.encode)):(d=b(c),d=e.filter(d,function(a){return n(a.value)}),d=e.map(d,function(b){return a.encode(b.name)+"\x3d"+a.encode(b.value)}));return f+=e.join(d,a.separator)}c.prototype.toString=function(){return this.templateText};c.prototype.expand=function(b){var c=[],d,p,l,r=this.operator;
for(d=0;d<this.varspecs.length;d+=1)if(p=this.varspecs[d],l=b[p.varname],null!==l&&void 0!==l)if(e.isArray(l),"string"===typeof l||"number"===typeof l||"boolean"===typeof l)c.push(k(p,r,l));else{if(p.maxLength&&n(l))throw b=Error,l=JSON&&JSON.stringify?JSON.stringify(l):l,new b("Prefix modifiers are not applicable to variables that have composite values. You tried to expand "+this+" with "+l);p.exploded?n(l)&&(r.named?c.push(m(p,r,l)):c.push(q(r,l))):!r.named&&a(l)||c.push(f(p,r,l))}return 0===c.length?
"":r.first+e.join(c,r.separator)};return c}(),z=function(){function a(a,c){this.templateText=a;this.expressions=c;e.deepFreeze(this)}a.prototype.toString=function(){return this.templateText};a.prototype.expand=function(a){var b,e="";for(b=0;b<this.expressions.length;b+=1)e+=this.expressions[b].expand(a);return e};a.parse=C;a.UriTemplateError=m;return a}();x(z)})(function(x){"function"===typeof define?define("_uritemplate",[],function(){return x}):"undefined"!==typeof window?window.UriTemplate=x:global.UriTemplate=
x});;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:ap-navigator-v5', location = 'v5/js/navigator/context.js' */
define("ac/navigator/context",function(){var a;return{setContextFunction:function(b){a=b},getContextFunction:function(){return a}}});;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:ap-navigator-v5', location = 'v5/js/navigator/module.js' */
define("ac/navigator/module",["ac/navigator/utils","ac/navigator/routes","ac/navigator/context","ac/spa-context"],function(b,e,f,g){return{getLocation:function(a){var c=f.getContextFunction();"function"!==typeof c?console.error("no context function defined"):(context=c(),"object"!==typeof context||Array.isArray(context)||null===context?console.error("navigator context callback did not return an object"):a(context))},go:function(a,c,d){a=a.toLowerCase();c=c||{};c.addonKey||(c.addonKey=d._context.extension.addon_key);
if(b.isApiEnabled())if(d=e.getRoutes(),e.hasRoutes()&&a in d)if("function"===typeof d[a])d[a](c,b.goToUrl);else b.goToUrl(b.buildUrl(d[a],c));else console.error("The URL target "+a+" is not available. Valid targets are: "+Object.keys(d).toString());else console.error("connect navigation api not yet implemented for this product")},_shouldThrottle:function(a,c){var d=Number(window.localStorage.getItem("lastReloadTimestamp")),b=Number(window.localStorage.getItem("reloadAttempts")),e=Date.now();e-d>a&&
(b=0);if(b>=c)return console.error("Reloads must be "+a+"ms apart after "+b+" reload attempts."),!0;b+=1;window.localStorage.setItem("lastReloadTimestamp",e);window.localStorage.setItem("reloadAttempts",b);return!1},reload:function(){this._shouldThrottle(12E4,5)||(g.isInIframe()?b.getTopmostSameOriginWindow(window).location.reload():window.location.reload())}}});;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:ap-navigator-v5', location = 'v5/js/navigator/routes.js' */
define("ac/navigator/routes",function(){function g(a){return Object.keys(a).map(function(c){return["ac."+c,a[c]].map(encodeURIComponent).join("\x3d")}).join("\x26")}var e={addonmodule:function(a,c){var b=a&&a.addonKey,d=a&&a.moduleKey;if(!b)throw Error("Missing addonKey parameter in the context.");if(!d)throw Error("Missing moduleKey parameter in the context.");var f=[b,d].map(encodeURIComponent).join("/"),f=AJS.contextPath()+"/plugins/servlet/ac/"+f;void 0!=a.context&&(console.warn("DEPRECATED API - The context field has been deprecated in favor of customData."),
connectHost.trackDeprecatedMethodUsed("AP.navigate-context",{addon_key:b,moduleKey:d}));b=AJS.$.extend({},a.context||{},a.customData||{});b=g(b);c.apply(this,[""!=b?f+"?"+b:f])},site:function(a,c){function b(a){if(-1!==a.indexOf("plugins/servlet/ac-redirect"))throw Error("Cannot use legacy redirect filter in Navigator API");}if(a.relativeUrl){if("string"!==typeof a.relativeUrl||"/"!==a.relativeUrl[0])throw Error("Invalid relativeUrl passed in context");b(a.relativeUrl);var d=0===a.relativeUrl.indexOf(AJS.contextPath())?
"":AJS.contextPath();c.apply(this,[window.location.protocol+"//"+window.location.hostname+d+a.relativeUrl])}else if(a.absoluteUrl){d=window.location.protocol+"//"+window.location.hostname+"/";if("string"!==typeof a.absoluteUrl||0!==a.absoluteUrl.indexOf(d))throw Error("Invalid absoluteUrl passed in context");b(a.absoluteUrl);c.apply(this,[a.absoluteUrl])}else throw Error("No context supplied to Navigator API");}};return{hasRoutes:function(){return e&&0!==Object.getOwnPropertyNames(e).length},addRoutes:function(a){e=
AJS.$.extend(e,a)},getRoutes:function(){return e}}});;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:ap-navigator-v5', location = 'v5/js/navigator/utils.js' */
define("ac/navigator/utils",["_uritemplate","ac/spa-context"],function(e,c){var d=!1;return{enableApi:function(){d=!0},disableApi:function(){d=!1},isApiEnabled:function(){return d},buildUrl:function(a,b){"/"!==a[0]&&(a="/"+a);return AJS.contextPath()+e.parse(a).expand(b)},goToUrl:function(a){var b=function(){window.location.href=a};c.isInIframe()?c.getContainerApi().navigate(a,b):c.canSpaTransition()?c.getNavigationApi().navigate(a):b()},hasContext:function(a,b){return a[b]?!0:(AJS.error("Missing "+
b+" in navigator context"),!1)},appendQueryParam:function(a,b,c){return a+(-1<a.indexOf("?")?"\x26":"?")+b+"\x3d"+encodeURIComponent(c)},getTopmostSameOriginWindow:function(a){function b(a){try{if(null==a.location.href)return!1}catch(f){return!1}return!0}for(;a!==a.parent&&b(a.parent);)a=a.parent;return a}}});;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:ap-extensions-v5', location = 'v5/js/core/connect-host-cookie.js' */
(function(n){"object"===typeof exports&&"undefined"!==typeof module?module.exports=n():"function"===typeof define&&define.amd?define([],n):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).connectHostCookie=n()})(function(){return function q(k,d,g){function e(f,h){if(!d[f]){if(!k[f]){var c="function"==typeof require&&require;if(!h&&c)return c(f,!0);if(l)return l(f,!0);c=Error("Cannot find module '"+f+"'");throw c.code="MODULE_NOT_FOUND",c;
}c=d[f]={exports:{}};k[f][0].call(c.exports,function(c){var d=k[f][1][c];return e(d?d:c)},c,c.exports,q,k,d,g)}return d[f].exports}for(var l="function"==typeof require&&require,h=0;h<g.length;h++)e(g[h]);return e}({1:[function(q,k,d){function g(a){if("string"!==typeof a)return a;if(-1!==a.indexOf("**PIPE**")||-1!==a.indexOf("**PIPE_PERCENT_ENCODED_UPPER**")||-1!==a.indexOf("**PIPE_PERCENT_ENCODED_LOWER**"))throw Error("Cannot use cookies that contain **PIPE** or **PIPE_PERCENT_ENCODED_UPPER****PIPE_PERCENT_ENCODED_LOWER**");
if(-1!==a.indexOf("**PERCENT**"))throw Error("Cannot use cookies that contain **PERCENT**");if(-1!==a.indexOf("**EQUALS**"))throw Error("Cannot use cookies that contain **EQUALS**");a=a.replace(new RegExp(e("|"),"g"),"**PIPE**");a=a.replace(new RegExp(r,"g"),"**PIPE_PERCENT_ENCODED_UPPER**");a=a.replace(new RegExp(t,"g"),"**PIPE_PERCENT_ENCODED_LOWER**");a=a.replace(RegExp("%","g"),"**PERCENT**");return a=a.replace(RegExp("\x3d","g"),"**EQUALS**")}function e(a){return a.replace(w,"\\$\x26")}function l(a){a=
new RegExp("\\b"+e(a)+"\x3d((?:[^\\\\;]+|\\\\.)*)(?:;|$)");return(a=document.cookie.match(a))&&a[1].replace(c,"")}function h(a,m,c){var b=l("AJS.conglomerate.cookie"),f=new RegExp("(\\s|\\|)*\\b"+e(a)+"\x3d[^|]*[|]*"),b=(b||"").replace(f,"|");""!==m&&(a=a+"\x3d"+m,4020>b.length+a.length&&(b+="|"+a));b=b.replace(u,"|");c=c||365;a="";m='"'+b.replace(v,'\\"')+'"';c&&(a=new Date,a.setTime(+a+864E5*c),a="; expires\x3d"+a.toGMTString());document.cookie="AJS.conglomerate.cookie\x3d"+m+a+";path\x3d/"}function f(a,
c){if(!a||0===a.length)throw Error("addon key must be defined on cookies");if(!c||0===c.length)throw Error("Name must be defined");return a+"$$"+c}function p(a){if(a&&a._context)return a._context.extension.addon_key;throw Error("addon key not found in callback");}Object.defineProperty(d,"__esModule",{value:!0});var c=/(\\|^"|"$)/g,u=/\|\|+/g,v=/"/g,w=/[.*+?|^$()[\]{\\]/g,r=encodeURIComponent("|"),t=encodeURIComponent("|").toLowerCase();d["default"]={save:function(a,c,e){var b=arguments[arguments.length-
1],d=f(p(b),g(a));b._context&&h(d,g(c),e)},read:function(a,c){c=arguments[arguments.length-1];var d=f(p(c),g(a)),b;b=(b=l("AJS.conglomerate.cookie"))||"";d=new RegExp(e(d)+"\x3d([^|]+)");b=(b=b.match(d))&&b[1];b=null!=b?b:void 0;"string"===typeof b&&(b=b.replace(new RegExp(e("**PIPE**"),"g"),"|"),b=b.replace(new RegExp(e("**PIPE_PERCENT_ENCODED_UPPER**"),"g"),r),b=b.replace(new RegExp(e("**PIPE_PERCENT_ENCODED_LOWER**"),"g"),t),b=b.replace(new RegExp(e("**PERCENT**"),"g"),"%"),b=b.replace(new RegExp(e("**EQUALS**"),
"g"),"\x3d"));c(b);return b},erase:function(a){var c=f(p(arguments[arguments.length-1]),g(a));h(c,"")}};k.exports=d["default"]},{}]},{},[1])(1)});;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:ap-extensions-v5', location = 'v5/js/core/connect-host-history.js' */
(function(C){"object"===typeof exports&&"undefined"!==typeof module?module.exports=C():"function"===typeof define&&define.amd?define([],C):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).connectHostHistory=C()})(function(){return function q(v,c,l){function h(g,b){if(!c[g]){if(!v[g]){var e="function"==typeof require&&require;if(!b&&e)return e(g,!0);if(n)return n(g,!0);e=Error("Cannot find module '"+g+"'");throw e.code="MODULE_NOT_FOUND",e;
}e=c[g]={exports:{}};v[g][0].call(e.exports,function(a){var b=v[g][1][a];return h(b?b:a)},e,e.exports,q,v,c,l)}return c[g].exports}for(var n="function"==typeof require&&require,r=0;r<l.length;r++)h(l[r]);return h}({1:[function(q,v,c){function l(a,p){(0,e.callConnectHost)(function(x){(0,e.values)(x.getExtensions()).forEach(function(e){e=e.extension.addon_key;var g=new b.Current({url:window.location.href,state:p.state}),g=new b.Route(g);x.broadcastEvent(a,{addon_key:e},g.render(e))})})}function h(){a||
(window.addEventListener("popstate",function(a){var b=(0,e.createEvent)("ap_popstate");b.state=(0,e.unwrapState)(a.state);window.dispatchEvent(b)}),window.addEventListener("ap_popstate",function(a){var b=(0,e.createEvent)("ap_changestate");b.state=a.state;window.dispatchEvent(b);l(g.HISTORY_POPSTATE,a)}),window.addEventListener("ap_pushstate",function(a){var b=(0,e.createEvent)("ap_changestate");b.state=a.state;window.dispatchEvent(b);l(g.HISTORY_PUSHSTATE,a)}),window.addEventListener("ap_replacestate",
function(a){var b=(0,e.createEvent)("ap_changestate");b.state=a.state;window.dispatchEvent(b);l(g.HISTORY_REPLACESTATE,a)}),window.addEventListener("ap_changestate",function(a){l(g.HISTORY_CHANGESTATE,a)}),a=!0)}function n(a){var b=a.state.render();a=a.url.render();window.history.pushState((0,e.wrapState)(b),a.title,a.url)}function r(a){var b=a.state.render();a=a.url.render();window.history.replaceState((0,e.wrapState)(b),a.title,a.url)}Object.defineProperty(c,"__esModule",{value:!0});var g=q("./constants"),
b=q("./models"),e=q("./utils"),a=!1;c["default"]={_registerWindowListeners:function(){h()},back:function(a){a=arguments[arguments.length-1];this.go(-1,a)},forward:function(a){a=arguments[arguments.length-1];this.go(1,a)},go:function(a){arguments[arguments.length-1]._context.extension.options.isFullPage?window.history.go(a):(0,e.log)("History is only available to page modules")},getState:function(a,g){g=arguments[arguments.length-1];var c=g._context.extension.addon_key,f=new b.Current({url:window.location.href,
state:(0,e.unwrapState)(window.history.state)}),c=(new b.Route(f)).render(c);a=a?"string"===typeof a?a:"hash":"hash";if("hash"===a)g(c.hash);else if("all"===a)g(c);else throw Error("invalid type for getState");},pushState:function(a,g){g=arguments[arguments.length-1];var c=g._context.extension.addon_key,f=new b.Current({url:window.location.href,state:(0,e.unwrapState)(window.history.state)}),f=new b.Route(f),c=new b.Change(a,c),c=new b.Route(c);g._context.extension.options.isFullPage?(c.url.isURLEqual(f.url)?
(f.merge(c),r(f)):c.url.isPathnameEqual(f.url)?(f.merge(c),n(f)):n(c),f=(0,e.createEvent)("ap_pushstate"),f.state=(0,e.unwrapState)(window.history.state),window.dispatchEvent(f)):(0,e.log)("History is only available to page modules")},replaceState:function(a,g){g=arguments[arguments.length-1];var c=g._context.extension.addon_key,f=new b.Current({url:window.location.href,state:(0,e.unwrapState)(window.history.state)}),f=new b.Route(f),c=new b.Change(a,c),c=new b.Route(c);g._context.extension.options.isFullPage?
(c.url.isURLEqual(f.url)?(f.merge(c),r(f)):c.url.isPathnameEqual(f.url)?(f.merge(c),r(f)):r(c),f=(0,e.createEvent)("ap_replacestate"),f.state=(0,e.unwrapState)(window.history.state),window.dispatchEvent(f)):(0,e.log)("History is only available to page modules")}};v.exports=c["default"]},{"./constants":7,"./models":8,"./utils":9}],2:[function(q,v,c){(function(l){(function(h){function n(a){throw RangeError(d[a]);}function r(a,d){for(var k=a.length;k--;)a[k]=d(a[k]);return a}function g(a,d){return r(a.split(y),
d).join(".")}function b(a){for(var d=[],k=0,b=a.length,e,c;k<b;)e=a.charCodeAt(k++),55296<=e&&56319>=e&&k<b?(c=a.charCodeAt(k++),56320==(c&64512)?d.push(((e&1023)<<10)+(c&1023)+65536):(d.push(e),k--)):d.push(e);return d}function e(a){return r(a,function(a){var d="";65535<a&&(a-=65536,d+=A(a>>>10&1023|55296),a=56320|a&1023);return d+=A(a)}).join("")}function a(a,d){return a+22+75*(26>a)-((0!=d)<<5)}function x(a,d,k){var b=0;a=k?z(a/700):a>>1;for(a+=z(a/d);455<a;b+=36)a=z(a/35);return z(b+36*a/(a+38))}
function p(a){var d=[],k=a.length,b,c=0,g=128,f=72,u,p,h,m,l;u=a.lastIndexOf("-");0>u&&(u=0);for(p=0;p<u;++p)128<=a.charCodeAt(p)&&n("not-basic"),d.push(a.charCodeAt(p));for(u=0<u?u+1:0;u<k;){p=c;b=1;for(h=36;;h+=36){u>=k&&n("invalid-input");m=a.charCodeAt(u++);m=10>m-48?m-22:26>m-65?m-65:26>m-97?m-97:36;(36<=m||m>z((2147483647-c)/b))&&n("overflow");c+=m*b;l=h<=f?1:h>=f+26?26:h-f;if(m<l)break;m=36-l;b>z(2147483647/m)&&n("overflow");b*=m}b=d.length+1;f=x(c-p,b,0==p);z(c/b)>2147483647-g&&n("overflow");
g+=z(c/b);c%=b;d.splice(c++,0,g)}return e(d)}function t(d){var k,e,c,g,f,u,m,p,h,l=[],y,t,r;d=b(d);y=d.length;k=128;e=0;f=72;for(u=0;u<y;++u)h=d[u],128>h&&l.push(A(h));for((c=g=l.length)&&l.push("-");c<y;){m=2147483647;for(u=0;u<y;++u)h=d[u],h>=k&&h<m&&(m=h);t=c+1;m-k>z((2147483647-e)/t)&&n("overflow");e+=(m-k)*t;k=m;for(u=0;u<y;++u)if(h=d[u],h<k&&2147483647<++e&&n("overflow"),h==k){p=e;for(m=36;;m+=36){h=m<=f?1:m>=f+26?26:m-f;if(p<h)break;r=p-h;p=36-h;l.push(A(a(h+r%p,0)));p=z(r/p)}l.push(A(a(p,
0)));f=x(e,t,c==g);e=0;++c}++e;++k}return l.join("")}var f="object"==typeof c&&c,q="object"==typeof v&&v&&v.exports==f&&v,w="object"==typeof l&&l;if(w.global===w||w.window===w)h=w;var B=/^xn--/,k=/[^ -~]/,y=/\x2E|\u3002|\uFF0E|\uFF61/g,d={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input \x3e\x3d 0x80 (not a basic code point)","invalid-input":"Invalid input"},z=Math.floor,A=String.fromCharCode,m,w={version:"1.2.4",ucs2:{decode:b,encode:e},decode:p,encode:t,toASCII:function(a){return g(a,
function(a){return k.test(a)?"xn--"+t(a):a})},toUnicode:function(a){return g(a,function(a){return B.test(a)?p(a.slice(4).toLowerCase()):a})}};if(f&&!f.nodeType)if(q)q.exports=w;else for(m in w)w.hasOwnProperty(m)&&(f[m]=w[m]);else h.punycode=w})(this)}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],3:[function(q,v,c){function l(){this.href=this.path=this.pathname=this.query=this.search=this.hash=this.hostname=this.port=this.host=
this.auth=this.slashes=this.protocol=null}function h(a,b,d){if(a&&n(a)&&a instanceof l)return a;var k=new l;k.parse(a,b,d);return k}function n(a){return"object"===typeof a&&null!==a}var r=q("punycode");c.parse=h;c.resolve=function(a,b){return h(a,!1,!0).resolve(b)};c.resolveObject=function(a,b){return a?h(a,!1,!0).resolveObject(b):b};c.format=function(a){"string"===typeof a&&(a=h(a));return a instanceof l?a.format():l.prototype.format.call(a)};c.Url=l;var g=/^([a-z0-9.+-]+:)/i,b=/:[0-9]*$/;v="{}|\\^`".split("").concat('\x3c\x3e"` \r\n\t'.split(""));
var e=["'"].concat(v),a=["%","/","?",";","#"].concat(e),x=["/","?","#"],p=/^[a-z0-9A-Z_-]{0,63}$/,t=/^([a-z0-9A-Z_-]{0,63})(.*)$/,f={javascript:!0,"javascript:":!0},D={javascript:!0,"javascript:":!0},w={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},B=q("querystring");l.prototype.parse=function(b,c,d){if("string"!==typeof b)throw new TypeError("Parameter 'url' must be a string, not "+typeof b);b=b.trim();var k=g.exec(b);if(k){var k=k[0],h=k.toLowerCase();
this.protocol=h;b=b.substr(k.length)}if(d||k||b.match(/^\/\/[^@\/]+@[^@\/]+/)){var m="//"===b.substr(0,2);!m||k&&D[k]||(b=b.substr(2),this.slashes=!0)}if(!D[k]&&(m||k&&!w[k])){m=-1;for(d=0;d<x.length;d++)k=b.indexOf(x[d]),-1!==k&&(-1===m||k<m)&&(m=k);m=-1===m?b.lastIndexOf("@"):b.lastIndexOf("@",m);-1!==m&&(d=b.slice(0,m),b=b.slice(m+1),this.auth=decodeURIComponent(d));m=-1;for(d=0;d<a.length;d++)k=b.indexOf(a[d]),-1!==k&&(-1===m||k<m)&&(m=k);-1===m&&(m=b.length);this.host=b.slice(0,m);b=b.slice(m);
this.parseHost();this.hostname=this.hostname||"";m="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!m){var u=this.hostname.split(/\./);d=0;for(k=u.length;d<k;d++){var l=u[d];if(l&&!l.match(p)){for(var n="",y=0,q=l.length;y<q;y++)n=127<l.charCodeAt(y)?n+"x":n+l[y];if(!n.match(p)){k=u.slice(0,d);d=u.slice(d+1);if(l=l.match(t))k.push(l[1]),d.unshift(l[2]);d.length&&(b="/"+d.join(".")+b);this.hostname=k.join(".");break}}}}this.hostname=255<this.hostname.length?"":this.hostname.toLowerCase();
if(!m){l=this.hostname.split(".");u=[];for(d=0;d<l.length;++d)k=l[d],u.push(k.match(/[^A-Za-z0-9_-]/)?"xn--"+r.encode(k):k);this.hostname=u.join(".")}d=this.port?":"+this.port:"";this.host=(this.hostname||"")+d;this.href+=this.host;m&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==b[0]&&(b="/"+b))}if(!f[h])for(d=0,k=e.length;d<k;d++)m=e[d],l=encodeURIComponent(m),l===m&&(l=escape(m)),b=b.split(m).join(l);d=b.indexOf("#");-1!==d&&(this.hash=b.substr(d),b=b.slice(0,d));d=b.indexOf("?");
-1!==d?(this.search=b.substr(d),this.query=b.substr(d+1),c&&(this.query=B.parse(this.query)),b=b.slice(0,d)):c&&(this.search="",this.query={});b&&(this.pathname=b);w[h]&&this.hostname&&!this.pathname&&(this.pathname="/");if(this.pathname||this.search)d=this.pathname||"",k=this.search||"",this.path=d+k;this.href=this.format();return this};l.prototype.format=function(){var a=this.auth||"";a&&(a=encodeURIComponent(a),a=a.replace(/%3A/i,":"),a+="@");var b=this.protocol||"",d=this.pathname||"",e=this.hash||
"",c=!1,g="";this.host?c=a+this.host:this.hostname&&(c=a+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(c+=":"+this.port));this.query&&n(this.query)&&Object.keys(this.query).length&&(g=B.stringify(this.query));a=this.search||g&&"?"+g||"";b&&":"!==b.substr(-1)&&(b+=":");this.slashes||(!b||w[b])&&!1!==c?(c="//"+(c||""),d&&"/"!==d.charAt(0)&&(d="/"+d)):c||(c="");e&&"#"!==e.charAt(0)&&(e="#"+e);a&&"?"!==a.charAt(0)&&(a="?"+a);d=d.replace(/[?#]/g,function(a){return encodeURIComponent(a)});
a=a.replace("#","%23");return b+c+d+a+e};l.prototype.resolve=function(a){return this.resolveObject(h(a,!1,!0)).format()};l.prototype.resolveObject=function(a){if("string"===typeof a){var b=new l;b.parse(a,!1,!0);a=b}var d=new l;Object.keys(this).forEach(function(a){d[a]=this[a]},this);d.hash=a.hash;if(""===a.href)return d.href=d.format(),d;if(a.slashes&&!a.protocol)return Object.keys(a).forEach(function(b){"protocol"!==b&&(d[b]=a[b])}),w[d.protocol]&&d.hostname&&!d.pathname&&(d.path=d.pathname="/"),
d.href=d.format(),d;if(a.protocol&&a.protocol!==d.protocol){if(!w[a.protocol])return Object.keys(a).forEach(function(b){d[b]=a[b]}),d.href=d.format(),d;d.protocol=a.protocol;if(a.host||D[a.protocol])d.pathname=a.pathname;else{for(var e=(a.pathname||"").split("/");e.length&&!(a.host=e.shift()););a.host||(a.host="");a.hostname||(a.hostname="");""!==e[0]&&e.unshift("");2>e.length&&e.unshift("");d.pathname=e.join("/")}d.search=a.search;d.query=a.query;d.host=a.host||"";d.auth=a.auth;d.hostname=a.hostname||
a.host;d.port=a.port;if(d.pathname||d.search)d.path=(d.pathname||"")+(d.search||"");d.slashes=d.slashes||a.slashes;d.href=d.format();return d}var b=d.pathname&&"/"===d.pathname.charAt(0),c=a.host||a.pathname&&"/"===a.pathname.charAt(0),g=b=c||b||d.host&&a.pathname,f=d.pathname&&d.pathname.split("/")||[],e=a.pathname&&a.pathname.split("/")||[],h=d.protocol&&!w[d.protocol];h&&(d.hostname="",d.port=null,d.host&&(""===f[0]?f[0]=d.host:f.unshift(d.host)),d.host="",a.protocol&&(a.hostname=null,a.port=null,
a.host&&(""===e[0]?e[0]=a.host:e.unshift(a.host)),a.host=null),b=b&&(""===e[0]||""===f[0]));if(c)d.host=a.host||""===a.host?a.host:d.host,d.hostname=a.hostname||""===a.hostname?a.hostname:d.hostname,d.search=a.search,d.query=a.query,f=e;else if(e.length)f||(f=[]),f.pop(),f=f.concat(e),d.search=a.search,d.query=a.query;else if(null!=a.search){h&&(d.hostname=d.host=f.shift(),h=d.host&&0<d.host.indexOf("@")?d.host.split("@"):!1)&&(d.auth=h.shift(),d.host=d.hostname=h.shift());d.search=a.search;d.query=
a.query;if(null!==d.pathname||null!==d.search)d.path=(d.pathname?d.pathname:"")+(d.search?d.search:"");d.href=d.format();return d}if(!f.length)return d.pathname=null,d.path=d.search?"/"+d.search:null,d.href=d.format(),d;for(var c=f.slice(-1)[0],e=(d.host||a.host)&&("."===c||".."===c)||""===c,k=0,p=f.length;0<=p;p--)c=f[p],"."==c?f.splice(p,1):".."===c?(f.splice(p,1),k++):k&&(f.splice(p,1),k--);if(!b&&!g)for(;k--;k)f.unshift("..");!b||""===f[0]||f[0]&&"/"===f[0].charAt(0)||f.unshift("");e&&"/"!==f.join("/").substr(-1)&&
f.push("");g=""===f[0]||f[0]&&"/"===f[0].charAt(0);h&&(d.hostname=d.host=g?"":f.length?f.shift():"",h=d.host&&0<d.host.indexOf("@")?d.host.split("@"):!1)&&(d.auth=h.shift(),d.host=d.hostname=h.shift());(b=b||d.host&&f.length)&&!g&&f.unshift("");f.length?d.pathname=f.join("/"):(d.pathname=null,d.path=null);if(null!==d.pathname||null!==d.search)d.path=(d.pathname?d.pathname:"")+(d.search?d.search:"");d.auth=a.auth||d.auth;d.slashes=d.slashes||a.slashes;d.href=d.format();return d};l.prototype.parseHost=
function(){var a=this.host,e=b.exec(a);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),a=a.substr(0,a.length-e.length));a&&(this.hostname=a)}},{punycode:2,querystring:6}],4:[function(q,v,c){v.exports=function(c,n,r,g){r=r||"\x3d";var b={};if("string"!==typeof c||0===c.length)return b;var e=/\+/g;c=c.split(n||"\x26");n=1E3;g&&"number"===typeof g.maxKeys&&(n=g.maxKeys);g=c.length;0<n&&g>n&&(g=n);for(n=0;n<g;++n){var a=c[n].replace(e,"%20"),h=a.indexOf(r),p;0<=h?(p=a.substr(0,h),a=a.substr(h+1)):(p=a,a=
"");p=decodeURIComponent(p);a=decodeURIComponent(a);Object.prototype.hasOwnProperty.call(b,p)?l(b[p])?b[p].push(a):b[p]=[b[p],a]:b[p]=a}return b};var l=Array.isArray||function(c){return"[object Array]"===Object.prototype.toString.call(c)}},{}],5:[function(q,v,c){function l(c,b){if(c.map)return c.map(b);for(var e=[],a=0;a<c.length;a++)e.push(b(c[a],a));return e}var h=function(c){switch(typeof c){case "string":return c;case "boolean":return c?"true":"false";case "number":return isFinite(c)?c:"";default:return""}};
v.exports=function(c,b,e,a){b=b||"\x26";e=e||"\x3d";null===c&&(c=void 0);return"object"===typeof c?l(r(c),function(a){var g=encodeURIComponent(h(a))+e;return n(c[a])?l(c[a],function(a){return g+encodeURIComponent(h(a))}).join(b):g+encodeURIComponent(h(c[a]))}).join(b):a?encodeURIComponent(h(a))+e+encodeURIComponent(h(c)):""};var n=Array.isArray||function(c){return"[object Array]"===Object.prototype.toString.call(c)},r=Object.keys||function(c){var b=[],e;for(e in c)Object.prototype.hasOwnProperty.call(c,
e)&&b.push(e);return b}},{}],6:[function(q,v,c){c.decode=c.parse=q("./decode");c.encode=c.stringify=q("./encode")},{"./decode":4,"./encode":5}],7:[function(q,v,c){Object.defineProperty(c,"__esModule",{value:!0});c.STATE_AP_KEY="_AP";c.QUERY_KEY_PREFIX="ac";c.QUERY_KEY_DELIMITER=".";c.ANCHOR_PREFIX="!";c.HISTORY_POPSTATE="history_popstate";c.HISTORY_PUSHSTATE="history_pushstate";c.HISTORY_REPLACESTATE="history_replacestate";c.HISTORY_CHANGESTATE="history_changestate"},{}],8:[function(q,v,c){function l(a){a=
a||{};if(!a.key)throw Error("missing key for addon");this.key=a.key;this.state=a.state;this.query=a.query||{};return this}function h(a){a=a||{};a.models=a.models||[];a.models instanceof Array||(a.models=[a.models]);a.models=a.models.map(function(a){return a instanceof l?a:new l(a)});this.models=a.models;return this}function n(a){a=a||{};a.addons=a.addons||[];a.addons instanceof h||(a.addons=new h(a.addons));this.addons=a.addons;return this}function r(a){a=a||{};a.addons=a.addons||[];a.global=a.global||
[];a.parsed instanceof b["default"].Url||(a.parsed=b["default"].parse(a.url));a.addons instanceof h||(a.addons=new h(a.addons));this.parsed=a.parsed;this.addons=a.addons;this.global=a.global;this.title=a.title||window.document.title}function g(a){a=a||{};if(!a.url)throw Error("missing url option");a.url instanceof r||(a.url=new r(a.url));if(!a.state)throw Error("missing state option");a.state instanceof n||(a.state=new n(a.state));this.url=a.url;this.state=a.state}Object.defineProperty(c,"__esModule",
{value:!0});c.Addon=l;c.Addons=h;c.Current=function(a){a=a||{};if(!a.url)throw Error("missing url");var c=b["default"].parse(a.url),g=new h,c=(0,e.parseQuery)(c.query).map(e.stripAddonQueryPrefix),t=(0,e.normalizeQueryByAddons)(c),c=t.filter(function(a){return a.key}),t=t.filter(function(a){return!a.key});c.forEach(function(a){a=new l(a);g.add(a)});this.url=new r({url:a.url,addons:g,global:t});this.state=new n(a.state);return this};c.Change=function(a,c){var g=typeof a,t=b["default"].parse(window.location.href),
f={},x,q;if("string"===g)f.protocol=t.protocol,f.slashes=t.slashes,f.hostname=t.hostname,f.pathname=t.pathname,f.port=t.port,f.search=t.search,f.query=t.query,f.hash=(0,e.addHash)((0,e.addHashPrefix)(a));else if("object"===g)q=a.href?b["default"].parse(a.href):t,f.protocol=t.protocol,f.slashes=t.slashes,f.hostname=t.hostname,f.port=t.port,f.pathname=q.pathname||t.pathname,f.search=null,f.query=null,f.hash=a.hash?(0,e.addHash)((0,e.addHashPrefix)(a.hash)):null,x=a.state,q=a.query;else throw Error("invalid option type");
g=new h;t=new h;x&&(x=new l({key:c,state:x}),g.add(x));q&&(q=new l({key:c,query:q}),t.add(q));q=new n({addons:g});f=new r({url:b["default"].format(f),addons:t});this.state=q;this.url=f;return this};c.State=n;c.URL=r;c.Route=g;var b=(v=q("url"))&&v.__esModule?v:{"default":v},e=q("./utils");h.prototype.add=function(a){this.models.push(a)};h.prototype.remove=function(a){this.models.splice(this.models.indexOf(a),1)};h.prototype.find=function(a){return(0,e.find)(this.models,function(b){return b.key===
a})};h.prototype.merge=function(a){var b=this.find(a.key);b&&this.remove(b);this.add(a)};n.prototype.merge=function(a){var b=this;a.addons.models.forEach(function(a){b.addons.merge(a)})};n.prototype.render=function(){return(0,e.deepCopy)(this)};r.prototype.isURLEqual=function(a){return this.render().url===a.render().url};r.prototype.isPathnameEqual=function(a){var b=this.parsed.slashes===a.parsed.slashes,c=this.parsed.hostname===a.parsed.hostname,e=this.parsed.pathname===a.parsed.pathname;return this.parsed.protocol===
a.parsed.protocol&&b&&c&&e};r.prototype.merge=function(a){var b=this;b.parsed.hash=a.parsed.hash;a.addons.models.forEach(function(a){b.addons.merge(a)})};r.prototype.render=function(){var a=(0,e.deepCopy)(this),c=a.parsed,g=(0,e.denormalizeQueryByAddons)(this.addons.models),h=(0,e.denormalizeQueryByAddons)(this.global),g=g.concat(h).map(e.addAddonQueryPrefix),g=(0,e.formatQuery)(g);c.query=g;c.search=c.query?"?"+c.query:null;a.url=b["default"].format(c);return a};g.prototype.merge=function(a){this.url.merge(a.url);
this.state.merge(a.state)};g.prototype.render=function(a){return(0,e.deepCopy)({key:a,hash:(0,e.stripHashPrefix)((0,e.stripHash)(this.url.parsed.hash)),query:this.url.addons.find(a)?this.url.addons.find(a).query:null,title:this.url.title,href:this.url.parsed.href,state:this.state.addons.find(a)?this.state.addons.find(a).state:null})}},{"./utils":9,url:3}],9:[function(q,v,c){function l(b,c,a){c in b?Object.defineProperty(b,c,{value:a,enumerable:!0,configurable:!0,writable:!0}):b[c]=a;return b}function h(b){return void 0===
b||null===b||""===b?"":b.toString().replace(new RegExp("^"+g.ANCHOR_PREFIX),"")}function n(b){b=b?b.split("\x3d"):[];return 2===b.length?{key:b[0],value:b[1]}:null}function r(b){return"key"in b&&"value"in b?[b.key,"\x3d",b.value].join(""):null}Object.defineProperty(c,"__esModule",{value:!0});c.find=function(b,c){for(var a=0,e=b.length;a<e;a+=1)if(c(b[a]))return b[a]};c.values=function(b){var c=[];if(!b)return c;for(var a in b)c.push(b[a]);return c};c.stripHash=function(b){return b?b.slice(b.search("#")+
1):null};c.stripHashPrefix=h;c.addHash=function(b){return"#"+b};c.addHashPrefix=function(b){if(void 0===b||null===b)throw"You must supply text to prefix";return g.ANCHOR_PREFIX+h(b)};c.splitQueryParam=n;c.joinQueryParam=r;c.parseQuery=function(b){return(b?b.split("\x26"):[]).map(function(b){return n(b)}).filter(function(b){return b})};c.formatQuery=function(b){b=b.map(function(b){return r(b)}).filter(function(b){return b});return b.length?b.join("\x26"):null};c.stripAddonQueryPrefix=function(b){var c=
b.key?b.key.split(g.QUERY_KEY_DELIMITER):[],a=g.QUERY_KEY_PREFIX;return 3<=c.length&&a===c[0]?(a=c.slice(1,c.length-1).join(g.QUERY_KEY_DELIMITER),c=c.slice(c.length-1).join(g.QUERY_KEY_DELIMITER),{addonKey:a,key:c,value:b.value}):b};c.addAddonQueryPrefix=function(b){var c=g.QUERY_KEY_PREFIX;return"addonKey"in b&&b.addonKey?{key:[c,b.addonKey,b.key].join(g.QUERY_KEY_DELIMITER),value:b.value}:b};c.normalizeQueryByAddons=function(b){var c=[];b.forEach(function(a){var b=a.key,e=a.value,g=a.addonKey;
(a=c.filter(function(a){return a.key===g}))&&a.length?a[0].query[b]=e:c.push({key:g,query:l({},b,e)})});return c};c.denormalizeQueryByAddons=function(b){var c=[];b.forEach(function(a){var b=a.key;Object.keys(a.query).forEach(function(e){c.push({addonKey:b,key:e,value:a.query[e]})})});return c};c.deepCopy=function(b){return JSON.parse(JSON.stringify(b))};c.wrapState=function(b){var c={};c[g.STATE_AP_KEY]=b;return c};c.unwrapState=function(b){return b&&b[g.STATE_AP_KEY]?b[g.STATE_AP_KEY]:null};c.createEvent=
function(b){if("function"===typeof Event)var c=new Event(b);else c=document.createEvent("Event"),c.initEvent(b,!1,!1);return c};c.callConnectHost=function(b){q&&q.amd?q(["connect-host"],function(c){b(c)}):b(window.connectHost)};c.log=function(b,c){c||(c="log");console[c].call(null,"Atlassian Connect JS History: ",b)};var g=q("./constants")},{"./constants":7}]},{},[1])(1)});;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:ap-extensions-v5', location = 'v5/js/core/connect-host-request.js' */
(function(t){"object"===typeof exports&&"undefined"!==typeof module?module.exports=t():"function"===typeof define&&define.amd?define([],t):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).connectHostRequest=t()})(function(){return function v(m,d,p){function n(k,l){if(!d[k]){if(!m[k]){var e="function"==typeof require&&require;if(!l&&e)return e(k,!0);if(q)return q(k,!0);e=Error("Cannot find module '"+k+"'");throw e.code="MODULE_NOT_FOUND",e;
}e=d[k]={exports:{}};m[k][0].call(e.exports,function(e){var d=m[k][1][e];return n(d?d:e)},e,e.exports,v,m,d,p)}return d[k].exports}for(var q="function"==typeof require&&require,l=0;l<p.length;l++)n(p[l]);return n}({1:[function(v,m,d){function p(){if(window.AJS&&window.AJS.contextPath)return window.AJS.contextPath();var a=document.querySelector("meta[name\x3dajs-context-path]");return a?a.getAttribute("content"):""}function n(a){return a.replace(/(http[s]?:\/\/[^"]*?&jwt=[A-Za-z0-9-_=]+\.[A-Za-z0-9-_=]+\.?[A-Za-z0-9-_.+/=]*.*?)\\"/gi,
'\\"')}function q(a){var f={headers:{}};w.forEach(function(b,g){f[b]=a[b];if("responseText"===b)try{JSON.parse(a[b]),f[b]=n(a[b])}catch(y){}},this);e.forEach(function(b,g){f.headers[b]=a.getResponseHeader(b)},this);return f}function l(a,f,b){b._isBlob&&b.blob&&b.name?a.append(f,b.blob,b.name):a.append(f,b);return a}function k(a){a.contentType=!1;a.processData=!1;if(a.data&&"object"===typeof a.data){var f=new FormData;Object.keys(a.data).forEach(function(b){var g=a.data[b];Array.isArray(g)?g.forEach(function(a,
g){f=l(f,b+"["+g+"]",a)}):f=l(f,b,g)});a.data=f;a.headers["X-Atlassian-Token"]="no-check"}else throw Error("For a Multipart request, data must to be an Object");return a}Object.defineProperty(d,"__esModule",{value:!0});var w=["status","statusText","responseText"],e=["Content-Type","ETag"],x=["If-Match","If-None-Match","X-Atlassian-Force-Account-ID"],r;d.stripJWTUrls=n;d.addRequestMarshal=function(a){if("function"===typeof a)r=a;else throw Error("ACJS request marshal must be a function");};d.removeRequestMarshal=
function(){r=void 0};d["default"]={request:function(a,f){function b(a,c,b){f(b,q(a),b)}var g=p(),e={};f=arguments[arguments.length-1];var d=f._context.extension,l=d.addon_key,n=d.key,d=d.options.allowPathTraversal;"string"===typeof a&&(a={url:a});var m=g+a.url;if(!d&&!(new URL(m,document.baseURI)).pathname.startsWith(g))return window.connectHost&&window.connectHost.trackAnalyticsEvent&&window.connectHost.trackAnalyticsEvent("jsapi.request.prevent-path-traversal",{addonKey:l,moduleKey:n,url:m}),f("Request url must include context path '"+
g+"'",{});a.headers=a.headers||{};Object.getOwnPropertyNames(a.headers).forEach(function(b){e[b.toLowerCase()]=a.headers[b]},this);var c={url:m,type:a.type||"GET",data:a.data,dataType:"text",contentType:a.contentType,cache:"undefined"!==typeof a.cache?!!a.cache:void 0,headers:{Accept:e.accept||"*/*","AP-Client-Key":l}};"multipart/form-data"===c.contentType&&(c=k(c));c.data&&"object"===typeof c.data&&"GET"===c.type.toUpperCase()&&Object.keys(c.data).forEach(function(a){c.url+=(0<=c.url.indexOf("?")?
"\x26":"?")+encodeURIComponent(a)+"\x3d"+encodeURIComponent(c.data[a])});!0===a.experimental&&(c.headers["X-ExperimentalApi"]="opt-in");x.forEach(function(a,b){e[a.toLowerCase()]&&(c.headers[a]=e[a.toLowerCase()])},this);c.cache||(c.url+=(0<=c.url.indexOf("?")?"\x26":"?")+"_r\x3d"+(new Date).getTime());var h=new XMLHttpRequest;h.open(c.type,c.url,!0);c.contentType&&(c.headers["Content-type"]=c.contentType);Object.getOwnPropertyNames(c.headers).forEach(function(a){h.setRequestHeader(a,c.headers[a])});
h.onload=function(){if(200<=this.status&&300>this.status){var a=h.responseText;f(!1,q(h),a)}else b(h,h.statusText,h.responseText)};h.onerror=function(){b(h,h.statusText,h.responseText)};try{g=!0,r&&(g=r.call(null,c)),!0===g?h.send(c.data||null):(h.abort(),b(h,"string"===typeof g?g:void 0,g))}catch(u){h.abort(),b(h,void 0,u),console.error("ACJS Request: ",u.message,u)}}}},{}]},{},[1])(1)});;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:ap-user-v5', location = 'v5/js/iframe/host/user.js' */
define("ac/user",function(){return{getUser:function(a){var b=a._context.extension.options.user,c="undefined"===typeof b.uid&&"undefined"===typeof b.ukey?null:AJS.Meta.get("remote-user-fullname")||AJS.Meta.get("current-user-fullname")||null;a({fullName:c,id:b.uid,key:b.ukey})},getCurrentUser:function(a){var b=AJS.Meta.get("atlassian-account-id")||null,c=AJS.Meta.get("account-type")||null;a({atlassianAccountId:b,accountType:c})},getTimeZone:function(a){a(a._context.extension.options.user.timeZone)},
getLocale:function(a){a(AJS.Meta.get("user-locale"))}}});;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:content-resolver-v5', location = 'v5/js/iframe/host/content-resolver.js' */
(function(){function h(a,b){return AJS.contextPath()+"/plugins/servlet/ac/"+encodeURIComponent(a)+"/"+encodeURIComponent(b)}function k(a){var b={};_.keys(a).forEach(function(c){b["ac."+c]=a[c]});return b}function l(a,b){var c={};_.keys(a).forEach(function(d){b(d,a[d])&&(c[d]=a[d])});return c}function f(a){a=a.getResponseHeader("Date");a=Math.round(Date.parse(a)/1E3);var b=Math.round(Date.now()/1E3);isNaN(a)||(a=Math.abs(b-a),window.connectHost.setJwtClockSkew(a+60))}function m(a){a=a.addon_key+"__"+
a.key;if(window._AP&&window._AP.cacheableIframeUrls&&window._AP.cacheableIframeUrls[a])return window._AP.cacheableIframeUrls[a]}function e(a,b){return AJS.$.Deferred(function(c){var d=m(a);if(d&&!b)c.resolve(window._AP._convertConnectOptions({addon_key:a.addon_key,key:a.key,url:d,productCtx:JSON.stringify(a.options.productContext||{})}));else{d={"plugin-key":a.addon_key,"product-context":JSON.stringify(a.options.productContext||{}),key:a.key,width:a.width||"100%",height:a.height||"100%",classifier:a.classifier||
"raw"};a.options.contentClassifier&&(d.classifier=[a.options.contentClassifier,d.classifier]);var e=l(a.options.customData||{},function(a,b){return _.isObject(b)?!1:"string"===typeof b||b instanceof String?255>b.length:!0});AJS.$.ajax(h(a.addon_key,a.key),{dataType:"json"===a.classifier?"json":"html",data:AJS.$.extend({},d,k(e)),type:"POST"}).then(function(a,d,e){f(e);b?c.resolve(window._AP._convertConnectOptions(a)):require(["ac/create"],function(b){c.resolve(window._AP._convertConnectOptions(a))})}).fail(function(b,
d,e){f(b);c.reject({addon_key:a.addon_key,key:a.key,options:a.options},{text:"Unable to retrieve addon module URL. Please check your specified module key."})})}}).promise()}function g(a){return function(b){if("set_inner_iframe_url"===b.data.type){if(a&&a.getBooleanFeatureFlag&&a.getBooleanFeatureFlag("com.atlassian.connect.resolve_inner_iframe_url"))return b.data.iframeData.classifier="json",e(b.data.iframeData,!0).then(function(c){a.createExtension(c);b.source.location=c.url});b.data.iframeData.url&&
0===b.data.iframeData.url.indexOf("http")&&(b.source.location=b.data.iframeData.url)}}}define("ac/content-resolver",function(){return{resolveByExtension:e,getIframeUrlSetter:g}});_AP.util.awaitGlobal("connectHost",function(a){a.registerContentResolver.resolveByExtension(e);window.addEventListener("message",g(a))})})();;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:ap-context-v5', location = 'v5/js/context/util.js' */
define("ac/context/util",function(){return{isValidExtensionOptionsForCache:function(a){var b=(!a.contextJwt||!connectHost.isJwtExpired(a.contextJwt,!0))&&!!a.structuredContext;if(b){var c=a.productContext&&0<Object.getOwnPropertyNames(a.productContext).length;a=0<Object.getOwnPropertyNames(a.structuredContext).length;c&&!a&&(b=!1)}return b}}});;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:ap-context-v5', location = 'v5/js/context/main.js' */
define("ac/context",["ac/content-resolver","ac/context/util"],function(l,m){function f(a){if(a.id&&1<a.id.length)return a.id;throw Error("ACJS: cannot generate cache key for extension");}function n(a){a=3E4+a;var b=Date.now();return a<b}function h(a,b){return{cachedAt:Date.now(),contextJwt:b,contextObj:a}}function g(a){var b=f(a);if(!c[b]||!c[b].promise&&c[b].context&&n(c[b].context.cachedAt))a.classifier="json",c[b]=c[b]||{},c[b].promise=l.resolveByExtension(a,!0).done(function(a){a&&(c[b].context=
h(a.options.structuredContext,a.options.contextJwt))})}function k(a){if(!a||2>a.length)throw Error("ACJS: Cannot get token. Add-on does not support JWT authentication");}function p(a){if(m.isValidExtensionOptionsForCache(a.extension.options)){var b=f(a.extension);c[b]={context:h(a.extension.options.structuredContext,a.extension.options.contextJwt)}}else g(a.extension)}var c={};_AP.util.awaitGlobal("connectHost",function(a){a.onIframeEstablished(p);a.onIframeUnload(function(a){delete c[f(a.extension)]})});
var e={getToken:function(a){return new window.ES6Promise.Promise(function(b,e){var d=f(a._context.extension);g(a._context.extension);c[d].promise?c[d].promise.done(function(a){k(a.options.contextJwt);try{b(a.options.contextJwt)}catch(q){}}.bind(this)).fail(function(){console.error("ACJS: content resolver failed to get context jwt token")}).always(function(){delete c[d].promise}.bind(this)):(k(c[d].context.contextJwt),b(c[d].context.contextJwt))})},getContext:function(a){return new window.ES6Promise.Promise(function(b,
e){var d=f(a._context.extension);g(a._context.extension);c[d].promise?c[d].promise.done(function(a){try{b(c[d].context.contextObj)}catch(q){}}.bind(this)).fail(function(){e("ACJS: content resolver failed to get context")}).always(function(){delete c[d].promise}.bind(this)):b(c[d].context.contextObj)})}};e.getContext.returnsPromise=!0;e.getToken.returnsPromise=!0;return e});;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:module-loader-v5', location = 'v5/js/iframe/host/module-loader.js' */
_AP.util.awaitGlobal("connectHost",function(a){a.defineModule("cookie",connectHostCookie);a.defineModule("history",connectHostHistory);a.defineModule(connectHostRequest["default"]);a.defineModule("navigator",require("ac/navigator/module"));a.defineModule("user",require("ac/user"));a.defineModule("context",require("ac/context"))});;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:iframe-insertion-v5', location = 'v5/js/iframe/combined/iframe-insertion.js' */
(function(){function k(a){var b;if("string"===typeof a&&1<a.length)try{b=JSON.parse(a)}catch(c){console.error("ACJS: failed to decode context",a)}"object"!==typeof b&&(b={});return b}function n(a,b){var c=a.contentDocument,d="(function(){ var w \x3d window; for (var i\x3d0; i\x3c"+b.options.hostFrameOffset+"; i++){w \x3d w.parent; } w.postMessage("+JSON.stringify({type:"set_inner_iframe_url",iframeData:b})+', "*");}());';c.open();c.write("\x3cscript\x3e"+d+"\x3c/script\x3e");c.close()}function p(a,
b){if("number"!==typeof a)return window.top;for(var c=b||window,d=0;d<a;d++)c=c.parent;return c}function g(a,b,c){c=c||100;if("undefined"!==typeof window[a])b(window[a]);else var d=setInterval(function(){"undefined"!==typeof window[a]&&(clearInterval(d),b(window[a]))},c)}function f(a){window._AP.isSubHost=p(a.hostFrameOffset)!==window;var b=window._AP._convertConnectOptions(a);window._AP.addonAttemptCounter[b.containerId]=0;var c;window._AP.isSubHost?(window.AP&&window.AP._data&&window.AP._data.options&&
window.AP._data.options.globalOptions&&(b.options.globalOptions=window.AP._data.options.globalOptions),c=window._AP._createSub(b),h(c,b)):g("connectHost",function(a){q(a,{addon_key:b.addon_key,key:b.key}).forEach(function(c){if(c.extension.options.uniqueKey===b.options.uniqueKey){var d=document.getElementById(c.extension_id);a.destroy(c.extension_id);d&&AJS.$(d).closest(".ap-iframe-container").remove()}},this);c=a.create(b);h(c,b)})}function h(a,b){var c=document.getElementById(b.containerId);window._AP.addonAttemptCounter[b.containerId]++;
if(c)if(delete window._AP.addonAttemptCounter[b.containerId],window._AP.isSubHost)c.appendChild(a),n(a,b);else{var d=c.querySelector(".ap-iframe-container");d&&(d.parentNode.removeChild(d),AJS.log&&AJS.log("AJS: duplicate iframe removed",b,c));a.appendTo(c);a.data("addon-key",b.addon_key);a.data("key",b.key)}else 10>=window._AP.addonAttemptCounter[b.containerId]&&r(function(){h(a,b)})}var r=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||
function(a){window.setTimeout(a,50)}}(),q=function(a,b){return a.getExtensions(b).filter(function(a){return!!document.getElementById(a.extension_id)})},l=function(a,b,c){try{var d=require(a);b(d)}catch(e){0>=c?(console.error("Unable to load module: "+a),b(null)):setTimeout(function(){l(a,b,c-1)},500)}},m=function(a,b,c,d,e){"undefined"===typeof d&&(d=20);e=e||200;!a.isModuleDefined||0>=d?c():a.isModuleDefined(b)?c(!0):setTimeout(function(){m(a,b,c,d-1,e)},e)};window._AP=window._AP||{};window._AP.addonAttemptCounter=
window._AP.addonAttemptCounter||{};window._AP._convertConnectOptions=function(a){var b={url:a.url,ns:a.uniqueKey,addon_key:a.addon_key,key:a.key,containerId:"embedded-"+a.uniqueKey,options:{history:{state:""},uniqueKey:a.uniqueKey,origin:a.origin,hostOrigin:a.hostOrigin,moduleType:a.moduleType,moduleLocation:a.moduleLocation,isFullPage:"1"===a.general,autoresize:!0,user:{timeZone:a.timeZone,fullName:a.fullName,uid:a.uid,ukey:a.ukey},productContext:k(a.productCtx),structuredContext:k(a.structuredContext),
contextJwt:a.contextJwt,contextPath:a.cp,width:a.w||a.width,height:a.h||a.height,sandbox:a.sandbox,pearApp:a.pearApp,noSub:a.noSub,allowPathTraversal:a.allowPathTraversal,targets:{env:{resize:"both"}}}};"string"===typeof a.contentClassifier&&(b.options.contentClassifier=a.contentClassifier);"number"===typeof a.hostFrameOffset&&(b.options.hostFrameOffset=a.hostFrameOffset+1);window._AP.isSubHost||(b.options.history.state=window.location.hash?window.location.hash.substr(2):"");return b};window._AP._createSub=
function(a){var b=document.createElement("iframe"),c=(window.connectHost||window.AP).subCreate(a);c.width=a.options.width||"";c.height=a.options.height||"";c.style="border:0;";c["class"]="ap-iframe";c["data-addon-key"]=a.addon_key;c["data-key"]=a.key;delete c.src;Object.getOwnPropertyNames(c).forEach(function(a){b.setAttribute(a,c[a])});return b};window._AP.appendConnectAddon=function(a){var b=!1;try{window.top.karma&&(b=!0)}catch(d){}if(window===window.top||b)/^com\.atlassian\.(jira|confluence)\.emcee($|\.local|\.staging|\.development\..*)/g.test(a.addon_key)?
l("ac/marketplace",function(b){b&&g("connectHost",function(a){a.defineModule("marketplace",b)});f(a)},20):"com.addonengine.analytics"===a.addon_key?g("connectHost",function(b){m(b,"analytics",function(){f(a)})}):f(a);else{var c=function(b){b.source===window.top&&b.data&&void 0!==b.data.hostFrameOffset&&(window.removeEventListener("message",c),a.hostFrameOffset=b.data.hostFrameOffset,f(a))};window.addEventListener("message",c);window.top.postMessage({type:"get_host_offset"},"*")}}})();;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:iframe-host-js-v5', location = 'v5/js/iframe/host/main.js' */
_AP.addonAttemptCounter={};_AP.util.awaitGlobal("connectHost",function(a){a.setExtensionConfigurationOptions("crev",window._AP.allJsVersion);a.setExtensionConfigurationOptions("resolve_inner_iframe_url",a.getBooleanFeatureFlag&&a.getBooleanFeatureFlag("com.atlassian.connect.resolve_inner_iframe_url"));a.onIframeEstablished(function(a){a.$el.closest(".ap-iframe-container").addClass("iframe-init")});a.onFrameClick(function(a){a.click()})});define("ac/create",function(){return{appendConnectAddon:function(a){return window._AP.appendConnectAddon(a)}}});;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:jira-workflow-post-function-v5', location = 'v5/js/jira/workflow-post-function/workflow-post-function.js' */
define("ac/jira/workflow-post-function",["ac/jira/workflow-post-function-utils"],function(a){var d=function(){};connectHost.onIframeEstablished(function(b){if(a.isOnWorkflowElementPage()&&a.isWorkflowElementExtension(b.extension)){var c=a.getWorkflowElementId();"string"===typeof c&&a.registerSubmissionButton(c,function(a){d=a;connectHost.broadcastEvent("jira_workflow_post_function_submit",{id:b.extension.id})})}});return{getWorkflowConfiguration:function(b){if(!a.isOnWorkflowElementPage()||"function"!==
typeof b)return!1;var c=a.workflowElementConfigInput(b._context.extension.options.productContext[a.getWorkflowElementName()+".id"]);b&&b(c)},_submitWorkflowConfigurationResponse:function(a,c){d(a)}}});;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:jira-workflow-post-function-v5', location = 'v5/js/jira/workflow-post-function/workflow-post-function-utils.js' */
(function(c,h){h("ac/jira/workflow-post-function-utils",function(){function g(a,d){var f=c("#"+b()+"-config-"+a);d&&f.val(d);return f.val()}function e(){return b()&&!0||!1}function b(){return 0<c("input[name\x3d'postFunction.id']").length?"postFunction":0<c("input[name\x3d'condition.id']").length?"condition":0<c("input[name\x3d'validator.id']").length?"validator":null}return{workflowElementConfigInput:g,isOnWorkflowElementPage:e,registerSubmissionButton:function(a,b,f){if(!e())throw"Not on a workflow configuration page";
var d=!1;c(document).delegate("#add_submit, #update_submit","click",function(e){if(!d||f)e.preventDefault(),b(function(b){b.valid&&(g(a,b.value),d=!0,c(e.target).click())})})},getWorkflowElementId:function(){return c("input[name\x3d'"+b()+".id']").val()},isWorkflowElementExtension:function(a){return a&&a.options&&a.options.productContext&&(a=a.options.productContext,a[b()+".id"]&&5<a[b()+".id"].length)?!0:!1},getWorkflowElementName:b}})})(AJS.$,define);;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:jira-date-picker-widget-v5', location = 'v5/js/jira/date-picker/date-picker.js' */
(function(e,b){b("ac/jira/date-picker",["ac/jira/date-picker-utils"],function(b){var d={_options:function(a,c){a.onSelect=function(a,b){connectHost.broadcastEvent("jira_date_selected",{id:c._context.extension_id},{isoDate:a.date.toISOString(),date:b});a.dateClicked&&a.callCloseHandler()}.bind(this);var b=document.getElementById(c._context.extension_id).getBoundingClientRect();a.position=a.position||{top:0,left:0};a.position.top+=b.top;a.position.left+=b.left;return a},openDatePicker:function(a,c){a=
d._options(a,c);b.show(a);return a}};return d})})(AJS.$,define);;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:jira-date-picker-widget-v5', location = 'v5/js/jira/date-picker/date-picker-utils.js' */
define("ac/jira/date-picker-utils",["quick-edit/init/calendar","underscore"],function(c,d){function e(){return new Promise(function(a){c(a)})}function f(a){var b=window.calendar,c=Calendar._FD?void 0:1;b&&b.hide();a=a||{};a=d.extend(a,g,{singleClick:"true",inputField:{}});window.calendar=b=new Calendar(a.useISO8601WeekNumbers?1:c,a.date,(new Date).toISOString(),a.onSelect||function(){},function(a){a.hide();a.destroy()});b.weekNumbers=!0;b.showsOtherMonths=!1;b.params=a;b.showsTime=a.showTime;b.time24=
"24"==a.timeFormat;b.setDateFormat(a.showTime?a.dateTimeFormat:a.dateFormat);b.create();b.refresh();b.showAt(a.position.left||0,a.position.top||0);return b}var g=WRM.data.claim("com.atlassian.plugins.atlassian-connect-plugin:jira-date-picker-widget.config");return{show:function(a){e().then(f.bind(this,a))["catch"](console.error)}}});;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:jira-events-v5', location = 'v5/js/jira/events/events.js' */
(function(d,c){c("ac/jira/events",function(){return{refreshIssuePage:function(){try{JIRA.trigger(JIRA.Events.REFRESH_ISSUE_PAGE,[JIRA.Issue.getIssueId(),{mergeIntoCurrent:!1}])}catch(a){throw Error("Failed to refresh the issue page");}},updateIssueGlance:function(a,b){try{JIRA.trigger(JIRA.Events.UPDATE_ISSUE_GLANCE,[JIRA.Issue.getIssueId(),{addonKey:b._context.extension.addon_key,moduleKey:b._context.extension.key,data:a}])}catch(e){throw Error("Failed to update issue glance");}}}})})(AJS.$,define);;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:jira-create-issue-dialog-v5', location = 'v5/js/jira/issue/issue.js' */
define("ac/jira/issue",function(){return{openCreateIssueDialog:function(e,b){WRM.require(["wr!com.atlassian.jira.jira-quick-edit-plugin:quick-create-issue"]).then(function(){if(!JIRA||!JIRA.Forms||!JIRA.Forms.createCreateIssueForm)return console&&console.warn&&console.warn("Connect: Create issue form is not available"),!1;var a=JIRA.Forms.createCreateIssueForm(e).asDialog({trigger:document.createElement("a"),id:"create-issue-dialog",windowTitle:AJS.I18n.getText("admin.issue.operations.create"),shouldLoadHeritageFormDialogContext:!0});
a.show();var c=[];JIRA.one("QuickCreateIssue.sessionComplete",function(b,a){var d;c=[];for(d in a)c.push(a[d].createdIssueDetails)});a.bind("Dialog.hide",function(){"function"===typeof b&&b.call({},c)})}.bind(this))}}});;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:jira-dashboard-item-v5', location = 'v5/js/jira/dashboard-item/dashboard-item.js' */
define("ac/jira/dashboard-item",[],function(){function d(b,a){if(window.__SPA__&&window.dashboardSpaBridge){var c=AJS.$(b).closest("[data-gadget-id]");if(c&&a){var d=c.attr("data-gadget-id");window.dashboardSpaBridge.setGadgetHeight(d,a.replace(/[^0-9.]/g,""))}}else{var e=AJS.$(b).parents(".gadget-inline");if(0<e.length){var e=e.first(),d=e.attr("id"),c=new AG.InlineGadgetAPI(e),c=AG.DashboardManager.getLayout(),f=c.getGadgets().filter(function(a){return"gadget-".concat(a.getId())==d});a&&e.find("iframe").css("height",
a);f[0].resize();c.refresh()}}}connectHost.onIframeEstablished(function(b){d(b.$el)});AJS.$(document).ready(function(){AJS.$("body").on("resized",".ap-container",function(b,a){d(b.target,a.height)})});return{setDashboardItemTitle:function(b,a){if(window.__SPA__&&window.dashboardSpaBridge){var c=document.getElementById(a._context.extension_id);if(c=AJS.$(c).closest("[data-gadget-id]"))c=c.attr("data-gadget-id"),window.dashboardSpaBridge.setGadgetTitle(c,b)}else c=document.getElementById(a._context.extension_id),
$(c).parents(".gadget-container").find("h3.dashboard-item-title").text(b)},isDashboardItemEditable:function(b){if(window.__SPA__&&window.dashboardSpaBridge){var a=document.getElementById(b._context.extension_id);if(a=AJS.$(a).closest("[data-gadget-id]"))a=a.attr("data-gadget-id"),a=window.dashboardSpaBridge.isGadgetConfigurable(a),b(a)}else a=document.getElementById(b._context.extension_id),a=AJS.$(a).parents(".gadget-container").find("li.configure"),b(0!==a.length)}}});
define("atlassian-connect/connect-dashboard-item",function(){return function(){return{render:function(){},renderEdit:function(d){d=d.find("iframe");1===d.parent().length&&connectHost.broadcastEvent("jira_dashboard_item_edit",{id:d.attr("id")})}}}});;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:jira-navigator-routes-v5', location = 'v5/js/jira/navigator/routes.js' */
(function(h,b){b(["ac/navigator/routes","ac/navigator/utils","jira/featureflags/feature-manager"],function(b,f,g){var d=f.hasContext,e=f.appendQueryParam;g=g.isFeatureEnabled("kitkat.spa-navigate-in-atlassian-connect")?{filters:"/secure/ManageFilters.jspa",projects:"/secure/BrowseProjects.jspa",boards:"/secure/ManageRapidViews.jspa",dashboards:"/secure/ConfigurePortalPages!default.jspa",dashboard:"/secure/Dashboard.jspa?selectPageId\x3d{dashboardId}",issue:"/browse/{issueKey}",userprofile:function(a,
b){var c;c=d(a,"userAccountId")?e("/secure/admin/user/ViewProfile.jspa","accountId",a.userAccountId):d(a,"username")?e("/secure/admin/user/ViewProfile.jspa","username",a.username):"/secure/admin/user/ViewProfile.jspa?name\x3d";b(c)},projectadminsummary:"/plugins/servlet/project-config/{projectKey}/summary",projectadmintabpanel:"/plugins/servlet/ac/{addonKey}/{adminPageKey}?project.key\x3d{projectKey}\x26project.id\x3d{projectId}"}:{dashboard:"/secure/Dashboard.jspa?selectPageId\x3d{dashboardId}",
issue:"/browse/{issueKey}",userprofile:function(a,b){var c;c=d(a,"userAccountId")?e("/secure/admin/user/ViewProfile.jspa","accountId",a.userAccountId):d(a,"username")?e("/secure/admin/user/ViewProfile.jspa","username",a.username):"/secure/admin/user/ViewProfile.jspa?name\x3d";b(c)},projectadminsummary:"/plugins/servlet/project-config/{projectKey}/summary",projectadmintabpanel:"/plugins/servlet/ac/{addonKey}/{adminPageKey}?project.key\x3d{projectKey}\x26project.id\x3d{projectId}"};b.addRoutes(g);f.enableApi()})})(AJS.$,
require);;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:jira-request-marshal-v5', location = 'v5/js/jira/request-marshal/request-marshal.js' */
define("ac/jira/request-marshal",function(){var a=["/rest/","/secure/"];return{getWhitelist:function(){return a},marshal:function(b){var c=!1;a.forEach(function(a){0===b.url.indexOf(AJS.contextPath()+a)&&(c=!0)},this);window.connectHost.trackAnalyticsEvent("jsapi.request.filter",{value:c,url:b.url});return!0}}});;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:jira-request-marshal-v5', location = 'v5/js/jira/request-marshal/request-marshal-loader.js' */
require(["ac/jira/request-marshal"],function(a){connectHostRequest.addRequestMarshal(a.marshal)});;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:jira-jql-editor-v5', location = 'v5/js/jira/jql-editor/jql-editor.soy' */
// This file was automatically generated from jql-editor.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Connect.JQLEditor.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Connect == 'undefined') { JIRA.Connect = {}; }
if (typeof JIRA.Connect.JQLEditor == 'undefined') { JIRA.Connect.JQLEditor = {}; }


JIRA.Connect.JQLEditor.dialog = function(opt_data, opt_ignored) {
  return '<section id="' + soy.$$escapeHtml(opt_data.sectionId) + '" class="aui-dialog2 aui-dialog2-xlarge aui-layer" data-aui-remove-on-hide="true" role="dialog" aria-hidden="true"><header class="aui-dialog2-header"><h2>' + soy.$$escapeHtml(opt_data.header) + '</h2></header><div class="aui-dialog2-content"><p>' + soy.$$escapeHtml(opt_data.descriptionText) + '</p><iframe src="' + soy.$$escapeHtml(opt_data.src) + '" id="' + soy.$$escapeHtml(opt_data.frameId) + '"></iframe></div><footer class="aui-dialog2-footer"><div class="aui-dialog2-footer-actions"><button id="' + soy.$$escapeHtml(opt_data.submitButtonId) + '" class="aui-button aui-button-primary">' + soy.$$escapeHtml(opt_data.submitText) + '</button><button id="' + soy.$$escapeHtml(opt_data.cancelButtonId) + '" class="aui-button aui-button-link">' + soy.$$escapeHtml(opt_data.cancelText) + '</button></div></footer></section>';
};
if (goog.DEBUG) {
  JIRA.Connect.JQLEditor.dialog.soyTemplateName = 'JIRA.Connect.JQLEditor.dialog';
}
;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:jira-jql-editor-v5', location = 'v5/js/jira/jql-editor/jql-editor.js' */
define("ac/jira/jql-editor",[],function(){function c(){if(AJS&&AJS.contextPath)return AJS.contextPath();var a=document.querySelector("meta[name\x3dajs-context-path]");return a?a.getAttribute("content"):""}return{init:function(){},show:function(a,d){var e=c()+"/issues/?app\x3dtrue\x26jql\x3d"+(a.jql||""),b=document.createElement("div");b.innerHTML=JIRA.Connect.JQLEditor.dialog({src:e,frameId:"connect-app-jql-editor-frame-id",sectionId:"connect-app-jql-editor-section-id",submitButtonId:"connect-app-jql-editor-submit-id",
cancelButtonId:"connect-app-jql-editor-cancel-id",header:a.header||"JQL Editor",submitText:a.submitText||"Submit",cancelText:a.cancelText||"Cancel",descriptionText:(a.descriptionText||"").substring(0,512)});document.body.appendChild(b.firstChild);AJS.dialog2("#connect-app-jql-editor-section-id").show();document.getElementById("connect-app-jql-editor-cancel-id").addEventListener("click",function(a){a.preventDefault();AJS.dialog2("#connect-app-jql-editor-section-id").hide()});document.getElementById("connect-app-jql-editor-submit-id").addEventListener("click",
function(a){a.preventDefault();a=document.getElementById("connect-app-jql-editor-frame-id").contentWindow.document;a.querySelector(".search-button").click();a=(new URLSearchParams(a.location.search)).get("jql");AJS.dialog2("#connect-app-jql-editor-section-id").hide();d({jql:a})})}}});;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:jira-platform-v5', location = 'v5/js/jira/platform/platform.js' */
define("ac/jira/platform",[],function(){return{isNativeApp:function(c){var a=window.navigator.userAgent,b=!1,d=/iPhone|iPod|iPad/i.test(a),e=/Safari/i.test(a),f=/Android/i.test(a),a=/wv/i.test(a);d&&!e?b=!0:f&&a&&(b=!0);c(b)}}});;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:jira-product-extensions-v5', location = 'v5/js/jira/main.js' */
define("ac/jira","ac/jira/events ac/jira/workflow-post-function ac/jira/dashboard-item ac/jira/date-picker ac/jira/issue ac/jira/jql-editor ac/jira/platform".split(" "),function(a,b,c,e,f,d,g){return{refreshIssuePage:a.refreshIssuePage,updateIssueGlance:a.updateIssueGlance,getWorkflowConfiguration:b.getWorkflowConfiguration,_submitWorkflowConfigurationResponse:b._submitWorkflowConfigurationResponse,isDashboardItemEditable:c.isDashboardItemEditable,openCreateIssueDialog:f.openCreateIssueDialog,setDashboardItemTitle:c.setDashboardItemTitle,
openDatePicker:e.openDatePicker,initJQLEditor:d.init,showJQLEditor:d.show,isNativeApp:g.isNativeApp}});;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:jira-dropdown-list-v5', location = 'v5/js/jira/dropdown-list/dropdown-list-component.js' */
define("ac/jira/dropdown-list/component",["jira/ajs/layer/inline-layer-factory","jira/ajs/list/list","jira/ajs/layer/layer-constants","jira/ajs/list/item-descriptor","jquery"],function(f,g,h,k,d){var e=JIRA.Connect.Suggestions,b=function(a){a=a||{};a.maxInlineResultsDisplayed=a.maxInlineResultsDisplayed||5;a.expandAllResults=a.expandAllResults||!1;this.$container=d(e.container({id:a.id}));this.$target=d(e.target()).appendTo(d("body"));this.listController=new g({containerSelector:this.$container,maxInlineResultsDisplayed:a.maxInlineResultsDisplayed,
expandAllResults:a.expandAllResults,selectionHandler:function(){var a=this.getCurrent();this.onSelected(a);this.hide()}.bind(this)});this.inlineLayer=f.createInlineLayers({alignment:h.LEFT,offsetTarget:this.$target,maxInlineResultsDisplayed:a.maxInlineResultsDisplayed,content:this.$container});this.inlineLayer.onhide(function(){this.hide()}.bind(this));this.visible=!1};b.prototype.showAt=function(a,b,l){var c=arguments[arguments.length-1];this.visible||(c=document.getElementById(c._context.extension_id).getBoundingClientRect(),
a+=c.left,b+=c.top,this.$target.css({left:a+"px",top:b+"px"}),this.listController.enable(),this.inlineLayer.show(),this.inlineLayer.setPosition(),this.inlineLayer.setWidth(l),this.visible=!0)};b.prototype.setItems=function(a,b){b="string"===typeof b||"";this.suggestions=a.map(function(a){return new k({value:a.value,label:a.label,icon:a.iconUrl})});this.listController.generateListFromJSON(this.suggestions,b)};b.prototype.hide=function(){this.visible&&(this.visible=!1,this.listController.disable(),
this.inlineLayer.hide(),this.onHidden())};b.prototype.moveUp=function(){this.listController.moveToPrevious()};b.prototype.moveDown=function(){this.listController.moveToNext()};b.prototype.query=function(a){this.listController.generateListFromJSON(this.suggestions,a)};b.prototype.select=function(){var a=this.listController.getFocused();0!==a.length&&a.is(":visible")&&this.listController._acceptSuggestion(a)};b.prototype.isVisible=function(a){a(this.visible)};b.prototype.getSelected=function(a){a(this.getCurrent())};
b.prototype.getCurrent=function(){var a=this.listController.getFocused();return 0!==a.length&&a.is(":visible")?(a=a.data("descriptor"),{value:a.value(),label:a.label(),iconUrl:a.icon()}):null};b.prototype.onSelected=function(a){connectHost.broadcastEvent("dropdown_list_select",{addon_key:this._context.extension.addon_key,key:this._context.extension.key},{id:this._id,data:a})};b.prototype.onHidden=function(){connectHost.broadcastEvent("dropdown_list_hide",{addon_key:this._context.extension.addon_key,
key:this._context.extension.key},{id:this._id})};return b});;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:jira-dropdown-list-v5', location = 'v5/js/jira/dropdown-list/dropdown-list.soy' */
// This file was automatically generated from dropdown-list.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Connect.Suggestions.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Connect == 'undefined') { JIRA.Connect = {}; }
if (typeof JIRA.Connect.Suggestions == 'undefined') { JIRA.Connect.Suggestions = {}; }


JIRA.Connect.Suggestions.container = function(opt_data, opt_ignored) {
  return '<div class="aui-list ac-suggestions-container" ' + ((opt_data.id) ? 'id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + '></div>';
};
if (goog.DEBUG) {
  JIRA.Connect.Suggestions.container.soyTemplateName = 'JIRA.Connect.Suggestions.container';
}


JIRA.Connect.Suggestions.target = function(opt_data, opt_ignored) {
  return '<div class="ac-suggestions-target"></div>';
};
if (goog.DEBUG) {
  JIRA.Connect.Suggestions.target.soyTemplateName = 'JIRA.Connect.Suggestions.target';
}
;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:jira-dropdown-list-v5', location = 'v5/js/jira/dropdown-list/dropdown-list.js' */
define("ac/dropdown-list",["ac/jira/dropdown-list/component"],function(a){return{create:{constructor:a,showAt:a.prototype.showAt,setItems:a.prototype.setItems,hide:a.prototype.hide,moveUp:a.prototype.moveUp,moveDown:a.prototype.moveDown,query:a.prototype.query,select:a.prototype.select,isVisible:a.prototype.isVisible,getSelected:a.prototype.getSelected,onHide:function(){},onSelect:function(){}}}});;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:jira-module-loader-v5', location = 'v5/js/jira/module-loader.js' */
connectHost.defineModule("jira",require("ac/jira"));connectHost.defineModule("dropdownList",require("ac/dropdown-list"));;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:jira-spa-inlinedialog-cleanup', location = 'v5/js/iframe/host/spa-inline-dialog-cleanup.js' */
require(["skate"],function(a){a("ap-inline-dialog",{type:function(){var b;(b=a&&a.types&&a.types.CLASS)||(b=a&&a.type&&a.type.CLASSNAME);return b}(),detached:function(a){a=document.querySelectorAll('iframe[id^\x3d"'+window._AP.util.escapeSelector(a.id)+'"]');[].forEach.call(a,function(a){AJS.$(a).parents(".aui-inline-dialog").remove()})}})});;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:jira-spa-iframe-api-v5', location = 'v5/js/jira/spa-iframe/offset-overrides.js' */
define("ac/jira/spa-iframe/offset-overrides",[],function(){function c(){window._AP&&([window._AP.dialogOptions,window._AP.inlineDialogOptions].filter(function(a){return"object"===typeof a}).forEach(function(a){for(var b in a)a.hasOwnProperty(b)&&(a[b].hostFrameOffset=1)}),Object.keys(window._AP.dialogModules||{}).forEach(function(a){Object.keys(window._AP.dialogModules[a]).forEach(function(b){(b=window._AP.dialogModules[a][b])&&b.options&&(b.options.hostFrameOffset=1)})}))}return function(){c()}});;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:jira-spa-iframe-api-v5', location = 'v5/js/jira/spa-iframe/providers/get-location.js' */
define("ac/jira/spa-iframe/providers/get-location",["ac/navigator/utils"],function(a){return function(){return a.getTopmostSameOriginWindow(window).location.href}});;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:jira-spa-iframe-api-v5', location = 'v5/js/jira/spa-iframe/main.js' */
require(["ac/spa-context","ac/jira/spa-iframe/providers/get-location","ac/jira/spa-iframe/offset-overrides","jira/container-api"],function(b,c,d,a){a.getIsIframe()&&(b.provideContainerApi(a),d(),connectHost.registerProvider("get-location",c))});;
;
/* module-key = 'com.atlassian.plugins.atlassian-connect-plugin:jira-spa-api-v5', location = 'v5/js/jira/navigator/spa.js' */
require(["ac/spa-context","jira/container-api","jira/featureflags/feature-manager"],function(b,a,c){c.isFeatureEnabled("kitkat.spa-navigate-in-atlassian-connect")&&a&&a.APIs&&a.APIs.getNavigationAPI()&&a.APIs.getNavigationAPI().then(function(a){b.provideNavigationApi(a)})});;
;
/* module-key = 'com.atlassian.jira.jira-atlaskit-plugin:spa-iframe-bindings', location = 'jira-atlaskit-module/js/spa-iframe/handlers/modal-dialog/bindings.js' */
!function(){define("jira/spa-iframe/handlers/modal-dialog/bindings",["jquery","jira/util/events","aui/dialog2"],function(n,o,i){function d(n){return["dialog","backdrop","loading"].indexOf(n)>-1}function a(n){const o=n.originalEvent.detail.layer;return o===t||o===e}const t="modal",e="spotlight";return function(t){function e(){t.onOpen()}function u(){t.onClose()}function l(n){d(n.namespace)&&e()}function r(n){d(n.namespace)&&u()}function c(n){a(n)&&e()}function w(n){a(n)&&u()}function f(){n(window).bind("show.dialog show.backdrop show.loading",l),n(window).bind("AkModalMount",e),n(window).bind("AkOnboardingStart",e),n(window).bind("akPortalMount",c),o.bind("beforeShow",e),i.on("show",e)}function b(){n(window).bind("hide.dialog remove.dialog hide.backdrop hide.loading",r),n(window).bind("AkModalUnmount",u),n(window).bind("AkOnboardingEnd",u),n(window).bind("akPortalUnmount",w),o.bind("Dialog.hide",u),i.on("hide",u)}function g(){f(),b()}g()}})}();;
;
/* module-key = 'com.atlassian.jira.jira-atlaskit-plugin:spa-iframe-host', location = 'jira-atlaskit-module/js/spa-iframe/handlers/modal-dialog/host.js' */
!function(){define("jira/spa-iframe/handlers/modal-dialog/host",["jquery","jira/spa-iframe/handlers/modal-dialog/bindings"],function(n,o){return function(a){n(function(){o({onOpen:a.onModalOpen,onClose:a.onModalClose})})}})}();;
;
/* module-key = 'com.atlassian.plugin.jslibs:uri-1.14.1', location = 'libs/uri/1.14.1/uri-1.14.1.js' */
(function(n){define("atlassian/libs/uri-1.14.1",function(){var q={};n.call(q);return q.URI.noConflict()})})(function(){var n=this.punycode,q=this.IPv6,p=this.SecondLevelDomains,k=this,e=function(a,b){if(!(this instanceof e))return new e(a,b);void 0===a&&(a="undefined"!==typeof location?location.href+"":"");this.href(a);return void 0!==b?this.absoluteTo(b):this},o=function(a){return a.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")},t=function(a){return void 0===a?"Undefined":String(Object.prototype.toString.call(a)).slice(8,
-1)},j=function(a){return"Array"===t(a)},s=function(a,b){var c,e;if(j(b)){c=0;for(e=b.length;c<e;c++)if(!s(a,b[c]))return!1;return!0}var h=t(b);c=0;for(e=a.length;c<e;c++)if("RegExp"===h){if("string"===typeof a[c]&&a[c].match(b))return!0}else if(a[c]===b)return!0;return!1},w=function(a,b){if(!j(a)||!j(b)||a.length!==b.length)return!1;a.sort();b.sort();for(var c=0,e=a.length;c<e;c++)if(a[c]!==b[c])return!1;return!0},A=function(a){return escape(a)},u=function(a){return encodeURIComponent(a).replace(/[!'()*]/g,
A).replace(/\*/g,"%2A")},r=function(a){return function(b,c){if(void 0===b)return this._parts[a]||"";this._parts[a]=b||null;this.build(!c);return this}},x=function(a,b){return function(c,e){if(void 0===c)return this._parts[a]||"";null!==c&&(c+="",c.charAt(0)===b&&(c=c.substring(1)));this._parts[a]=c;this.build(!e);return this}},B=k&&k.URI;e.version="1.14.1";var d=e.prototype,m=Object.prototype.hasOwnProperty;e._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,
port:null,path:null,query:null,fragment:null,duplicateQueryParameters:e.duplicateQueryParameters,escapeQuerySpace:e.escapeQuerySpace}};e.duplicateQueryParameters=!1;e.escapeQuerySpace=!0;e.protocol_expression=/^[a-z][a-z0-9.+-]*$/i;e.idn_expression=/[^a-z0-9\.-]/i;e.punycode_expression=/(xn--)/i;e.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/;e.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/;
e.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?\u00ab\u00bb\u201c\u201d\u2018\u2019]))/ig;e.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?\u00ab\u00bb\u201c\u201d\u201e\u2018\u2019]+$/};e.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"};e.invalid_hostname_characters=
/[^a-zA-Z0-9\.-]/;e.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src",audio:"src",video:"src"};e.getDomAttribute=function(a){if(a&&a.nodeName){var b=a.nodeName.toLowerCase();return"input"===b&&"image"!==a.type?void 0:e.domAttributes[b]}};e.encode=u;e.decode=decodeURIComponent;e.iso8859=function(){e.encode=escape;e.decode=unescape};e.unicode=function(){e.encode=u;e.decode=
decodeURIComponent};e.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/ig,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/ig,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",",
"%3B":";","%3D":"="}}}};e.encodeQuery=function(a,b){var c=e.encode(a+"");void 0===b&&(b=e.escapeQuerySpace);return b?c.replace(/%20/g,"+"):c};e.decodeQuery=function(a,b){a+="";void 0===b&&(b=e.escapeQuerySpace);try{return e.decode(b?a.replace(/\+/g,"%20"):a)}catch(c){return a}};e.recodePath=function(a){for(var a=(a+"").split("/"),b=0,c=a.length;b<c;b++)a[b]=e.encodePathSegment(e.decode(a[b]));return a.join("/")};e.decodePath=function(a){for(var a=(a+"").split("/"),b=0,c=a.length;b<c;b++)a[b]=e.decodePathSegment(a[b]);
return a.join("/")};var y={encode:"encode",decode:"decode"},v,z=function(a,b){return function(c){try{return e[b](c+"").replace(e.characters[a][b].expression,function(c){return e.characters[a][b].map[c]})}catch(f){return c}}};for(v in y)e[v+"PathSegment"]=z("pathname",y[v]);e.encodeReserved=z("reserved","encode");e.parse=function(a,b){var c;b||(b={});c=a.indexOf("#");-1<c&&(b.fragment=a.substring(c+1)||null,a=a.substring(0,c));c=a.indexOf("?");-1<c&&(b.query=a.substring(c+1)||null,a=a.substring(0,
c));"//"===a.substring(0,2)?(b.protocol=null,a=a.substring(2),a=e.parseAuthority(a,b)):(c=a.indexOf(":"),-1<c&&(b.protocol=a.substring(0,c)||null,b.protocol&&!b.protocol.match(e.protocol_expression)?b.protocol=void 0:"//"===a.substring(c+1,c+3)?(a=a.substring(c+3),a=e.parseAuthority(a,b)):(a=a.substring(c+1),b.urn=!0)));b.path=a;return b};e.parseHost=function(a,b){var c=a.indexOf("/"),e;-1===c&&(c=a.length);"["===a.charAt(0)?(e=a.indexOf("]"),b.hostname=a.substring(1,e)||null,b.port=a.substring(e+
2,c)||null,"/"===b.port&&(b.port=null)):a.indexOf(":")!==a.lastIndexOf(":")?(b.hostname=a.substring(0,c)||null,b.port=null):(e=a.substring(0,c).split(":"),b.hostname=e[0]||null,b.port=e[1]||null);b.hostname&&"/"!==a.substring(c).charAt(0)&&(c++,a="/"+a);return a.substring(c)||"/"};e.parseAuthority=function(a,b){a=e.parseUserinfo(a,b);return e.parseHost(a,b)};e.parseUserinfo=function(a,b){var c=a.indexOf("/"),f=a.lastIndexOf("@",-1<c?c:a.length-1);-1<f&&(-1===c||f<c)?(c=a.substring(0,f).split(":"),
b.username=c[0]?e.decode(c[0]):null,c.shift(),b.password=c[0]?e.decode(c.join(":")):null,a=a.substring(f+1)):(b.username=null,b.password=null);return a};e.parseQuery=function(a,b){if(!a)return{};a=a.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,"");if(!a)return{};for(var c={},f=a.split("&"),h=f.length,d,i,l=0;l<h;l++)d=f[l].split("="),i=e.decodeQuery(d.shift(),b),d=d.length?e.decodeQuery(d.join("="),b):null,m.call(c,i)?("string"===typeof c[i]&&(c[i]=[c[i]]),c[i].push(d)):c[i]=d;return c};e.build=function(a){var b=
"";a.protocol&&(b+=a.protocol+":");if(!a.urn&&(b||a.hostname))b+="//";b+=e.buildAuthority(a)||"";"string"===typeof a.path&&("/"!==a.path.charAt(0)&&"string"===typeof a.hostname&&(b+="/"),b+=a.path);"string"===typeof a.query&&a.query&&(b+="?"+a.query);"string"===typeof a.fragment&&a.fragment&&(b+="#"+a.fragment);return b};e.buildHost=function(a){var b="";if(a.hostname)b=e.ip6_expression.test(a.hostname)?b+("["+a.hostname+"]"):b+a.hostname;else return"";a.port&&(b+=":"+a.port);return b};e.buildAuthority=
function(a){return e.buildUserinfo(a)+e.buildHost(a)};e.buildUserinfo=function(a){var b="";a.username&&(b+=e.encode(a.username),a.password&&(b+=":"+e.encode(a.password)),b+="@");return b};e.buildQuery=function(a,b,c){var f="",h,d,i,l;for(d in a)if(m.call(a,d)&&d)if(j(a[d])){h={};i=0;for(l=a[d].length;i<l;i++)void 0!==a[d][i]&&void 0===h[a[d][i]+""]&&(f+="&"+e.buildQueryParameter(d,a[d][i],c),!0!==b&&(h[a[d][i]+""]=!0))}else void 0!==a[d]&&(f+="&"+e.buildQueryParameter(d,a[d],c));return f.substring(1)};
e.buildQueryParameter=function(a,b,c){return e.encodeQuery(a,c)+(null!==b?"="+e.encodeQuery(b,c):"")};e.addQuery=function(a,b,c){if("object"===typeof b)for(var f in b)m.call(b,f)&&e.addQuery(a,f,b[f]);else if("string"===typeof b)void 0===a[b]?a[b]=c:("string"===typeof a[b]&&(a[b]=[a[b]]),j(c)||(c=[c]),a[b]=(a[b]||[]).concat(c));else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");};e.removeQuery=function(a,b,c){var f;if(j(b)){c=0;for(f=b.length;c<f;c++)a[b[c]]=
void 0}else if("object"===typeof b)for(f in b)m.call(b,f)&&e.removeQuery(a,f,b[f]);else if("string"===typeof b)if(void 0!==c)if(a[b]===c)a[b]=void 0;else{if(j(a[b])){f=a[b];var d={},g,i;if(j(c)){g=0;for(i=c.length;g<i;g++)d[c[g]]=!0}else d[c]=!0;g=0;for(i=f.length;g<i;g++)void 0!==d[f[g]]&&(f.splice(g,1),i--,g--);a[b]=f}}else a[b]=void 0;else throw new TypeError("URI.addQuery() accepts an object, string as the first parameter");};e.hasQuery=function(a,b,c,f){if("object"===typeof b){for(var d in b)if(m.call(b,
d)&&!e.hasQuery(a,d,b[d]))return!1;return!0}if("string"!==typeof b)throw new TypeError("URI.hasQuery() accepts an object, string as the name parameter");switch(t(c)){case "Undefined":return b in a;case "Boolean":return a=Boolean(j(a[b])?a[b].length:a[b]),c===a;case "Function":return!!c(a[b],b,a);case "Array":return!j(a[b])?!1:(f?s:w)(a[b],c);case "RegExp":return!j(a[b])?Boolean(a[b]&&a[b].match(c)):!f?!1:s(a[b],c);case "Number":c=String(c);case "String":return!j(a[b])?a[b]===c:!f?!1:s(a[b],c);default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter");
}};e.commonPath=function(a,b){var c=Math.min(a.length,b.length),e;for(e=0;e<c;e++)if(a.charAt(e)!==b.charAt(e)){e--;break}if(1>e)return a.charAt(0)===b.charAt(0)&&"/"===a.charAt(0)?"/":"";if("/"!==a.charAt(e)||"/"!==b.charAt(e))e=a.substring(0,e).lastIndexOf("/");return a.substring(0,e+1)};e.withinString=function(a,b,c){c||(c={});var f=c.start||e.findUri.start,d=c.end||e.findUri.end,g=c.trim||e.findUri.trim,i=/[a-z0-9-]=["']?$/i;for(f.lastIndex=0;;){var l=f.exec(a);if(!l)break;l=l.index;if(c.ignoreHtml){var j=
a.slice(Math.max(l-3,0),l);if(j&&i.test(j))continue}var j=l+a.slice(l).search(d),k=a.slice(l,j).replace(g,"");if(!c.ignore||!c.ignore.test(k))j=l+k.length,k=b(k,l,j,a),a=a.slice(0,l)+k+a.slice(j),f.lastIndex=l+k.length}f.lastIndex=0;return a};e.ensureValidHostname=function(a){if(a.match(e.invalid_hostname_characters)){if(!n)throw new TypeError('Hostname "'+a+'" contains characters other than [A-Z0-9.-] and Punycode.js is not available');if(n.toASCII(a).match(e.invalid_hostname_characters))throw new TypeError('Hostname "'+
a+'" contains characters other than [A-Z0-9.-]');}};e.noConflict=function(a){if(a)return a={URI:this.noConflict()},k.URITemplate&&"function"===typeof k.URITemplate.noConflict&&(a.URITemplate=k.URITemplate.noConflict()),k.IPv6&&"function"===typeof k.IPv6.noConflict&&(a.IPv6=k.IPv6.noConflict()),k.SecondLevelDomains&&"function"===typeof k.SecondLevelDomains.noConflict&&(a.SecondLevelDomains=k.SecondLevelDomains.noConflict()),a;k.URI===this&&(k.URI=B);return this};d.build=function(a){if(!0===a)this._deferred_build=
!0;else if(void 0===a||this._deferred_build)this._string=e.build(this._parts),this._deferred_build=!1;return this};d.clone=function(){return new e(this)};d.valueOf=d.toString=function(){return this.build(!1)._string};d.protocol=r("protocol");d.username=r("username");d.password=r("password");d.hostname=r("hostname");d.port=r("port");d.query=x("query","?");d.fragment=x("fragment","#");d.search=function(a,b){var c=this.query(a,b);return"string"===typeof c&&c.length?"?"+c:c};d.hash=function(a,b){var c=
this.fragment(a,b);return"string"===typeof c&&c.length?"#"+c:c};d.pathname=function(a,b){if(void 0===a||!0===a){var c=this._parts.path||(this._parts.hostname?"/":"");return a?e.decodePath(c):c}this._parts.path=a?e.recodePath(a):"/";this.build(!b);return this};d.path=d.pathname;d.href=function(a,b){var c;if(void 0===a)return this.toString();this._string="";this._parts=e._parts();var f=a instanceof e,d="object"===typeof a&&(a.hostname||a.path||a.pathname);a.nodeName&&(d=e.getDomAttribute(a),a=a[d]||
"",d=!1);!f&&(d&&void 0!==a.pathname)&&(a=a.toString());if("string"===typeof a||a instanceof String)this._parts=e.parse(String(a),this._parts);else if(f||d)for(c in f=f?a._parts:a,f)m.call(this._parts,c)&&(this._parts[c]=f[c]);else throw new TypeError("invalid input");this.build(!b);return this};d.is=function(a){var b=!1,c=!1,f=!1,d=!1,g=!1,i=!1,j=!1,k=!this._parts.urn;this._parts.hostname&&(k=!1,c=e.ip4_expression.test(this._parts.hostname),f=e.ip6_expression.test(this._parts.hostname),b=c||f,g=
(d=!b)&&p&&p.has(this._parts.hostname),i=d&&e.idn_expression.test(this._parts.hostname),j=d&&e.punycode_expression.test(this._parts.hostname));switch(a.toLowerCase()){case "relative":return k;case "absolute":return!k;case "domain":case "name":return d;case "sld":return g;case "ip":return b;case "ip4":case "ipv4":case "inet4":return c;case "ip6":case "ipv6":case "inet6":return f;case "idn":return i;case "url":return!this._parts.urn;case "urn":return!!this._parts.urn;case "punycode":return j}return null};
var C=d.protocol,D=d.port,E=d.hostname;d.protocol=function(a,b){if(void 0!==a&&a&&(a=a.replace(/:(\/\/)?$/,""),!a.match(e.protocol_expression)))throw new TypeError('Protocol "'+a+"\" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]");return C.call(this,a,b)};d.scheme=d.protocol;d.port=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0!==a&&(0===a&&(a=null),a&&(a+="",":"===a.charAt(0)&&(a=a.substring(1)),a.match(/[^0-9]/))))throw new TypeError('Port "'+a+'" contains characters other than [0-9]');
return D.call(this,a,b)};d.hostname=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0!==a){var c={};e.parseHost(a,c);a=c.hostname}return E.call(this,a,b)};d.host=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a)return this._parts.hostname?e.buildHost(this._parts):"";e.parseHost(a,this._parts);this.build(!b);return this};d.authority=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a)return this._parts.hostname?e.buildAuthority(this._parts):
"";e.parseAuthority(a,this._parts);this.build(!b);return this};d.userinfo=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a){if(!this._parts.username)return"";var c=e.buildUserinfo(this._parts);return c.substring(0,c.length-1)}"@"!==a[a.length-1]&&(a+="@");e.parseUserinfo(a,this._parts);this.build(!b);return this};d.resource=function(a,b){var c;if(void 0===a)return this.path()+this.search()+this.hash();c=e.parse(a);this._parts.path=c.path;this._parts.query=c.query;this._parts.fragment=
c.fragment;this.build(!b);return this};d.subdomain=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a){if(!this._parts.hostname||this.is("IP"))return"";var c=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,c)||""}c=this._parts.hostname.length-this.domain().length;c=this._parts.hostname.substring(0,c);c=RegExp("^"+o(c));a&&"."!==a.charAt(a.length-1)&&(a+=".");a&&e.ensureValidHostname(a);this._parts.hostname=this._parts.hostname.replace(c,
a);this.build(!b);return this};d.domain=function(a,b){if(this._parts.urn)return void 0===a?"":this;"boolean"===typeof a&&(b=a,a=void 0);if(void 0===a){if(!this._parts.hostname||this.is("IP"))return"";var c=this._parts.hostname.match(/\./g);if(c&&2>c.length)return this._parts.hostname;c=this._parts.hostname.length-this.tld(b).length-1;c=this._parts.hostname.lastIndexOf(".",c-1)+1;return this._parts.hostname.substring(c)||""}if(!a)throw new TypeError("cannot set domain empty");e.ensureValidHostname(a);
!this._parts.hostname||this.is("IP")?this._parts.hostname=a:(c=RegExp(o(this.domain())+"$"),this._parts.hostname=this._parts.hostname.replace(c,a));this.build(!b);return this};d.tld=function(a,b){if(this._parts.urn)return void 0===a?"":this;"boolean"===typeof a&&(b=a,a=void 0);if(void 0===a){if(!this._parts.hostname||this.is("IP"))return"";var c=this._parts.hostname.lastIndexOf("."),c=this._parts.hostname.substring(c+1);return!0!==b&&p&&p.list[c.toLowerCase()]?p.get(this._parts.hostname)||c:c}if(a)if(a.match(/[^a-zA-Z0-9-]/))if(p&&
p.is(a))c=RegExp(o(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(c,a);else throw new TypeError('TLD "'+a+'" contains characters other than [A-Z0-9]');else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");c=RegExp(o(this.tld())+"$");this._parts.hostname=this._parts.hostname.replace(c,a)}else throw new TypeError("cannot set TLD empty");this.build(!b);return this};d.directory=function(a,b){if(this._parts.urn)return void 0===a?
"":this;if(void 0===a||!0===a){if(!this._parts.path&&!this._parts.hostname)return"";if("/"===this._parts.path)return"/";var c=this._parts.path.length-this.filename().length-1,c=this._parts.path.substring(0,c)||(this._parts.hostname?"/":"");return a?e.decodePath(c):c}c=this._parts.path.length-this.filename().length;c=this._parts.path.substring(0,c);c=RegExp("^"+o(c));this.is("relative")||(a||(a="/"),"/"!==a.charAt(0)&&(a="/"+a));a&&"/"!==a.charAt(a.length-1)&&(a+="/");a=e.recodePath(a);this._parts.path=
this._parts.path.replace(c,a);this.build(!b);return this};d.filename=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a||!0===a){if(!this._parts.path||"/"===this._parts.path)return"";var c=this._parts.path.lastIndexOf("/"),c=this._parts.path.substring(c+1);return a?e.decodePathSegment(c):c}c=!1;"/"===a.charAt(0)&&(a=a.substring(1));a.match(/\.?\//)&&(c=!0);var f=RegExp(o(this.filename())+"$"),a=e.recodePath(a);this._parts.path=this._parts.path.replace(f,a);c?this.normalizePath(b):
this.build(!b);return this};d.suffix=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a||!0===a){if(!this._parts.path||"/"===this._parts.path)return"";var c=this.filename(),f=c.lastIndexOf(".");if(-1===f)return"";c=c.substring(f+1);c=/^[a-z0-9%]+$/i.test(c)?c:"";return a?e.decodePathSegment(c):c}"."===a.charAt(0)&&(a=a.substring(1));if(c=this.suffix())f=a?RegExp(o(c)+"$"):RegExp(o("."+c)+"$");else{if(!a)return this;this._parts.path+="."+e.recodePath(a)}f&&(a=e.recodePath(a),
this._parts.path=this._parts.path.replace(f,a));this.build(!b);return this};d.segment=function(a,b,c){var e=this._parts.urn?":":"/",d=this.path(),g="/"===d.substring(0,1),d=d.split(e);void 0!==a&&"number"!==typeof a&&(c=b,b=a,a=void 0);if(void 0!==a&&"number"!==typeof a)throw Error('Bad segment "'+a+'", must be 0-based integer');g&&d.shift();0>a&&(a=Math.max(d.length+a,0));if(void 0===b)return void 0===a?d:d[a];if(null===a||void 0===d[a])if(j(b))for(var d=[],a=0,i=b.length;a<i;a++){if(b[a].length||
d.length&&d[d.length-1].length)d.length&&!d[d.length-1].length&&d.pop(),d.push(b[a])}else{if(b||"string"===typeof b)""===d[d.length-1]?d[d.length-1]=b:d.push(b)}else b?d[a]=b:d.splice(a,1);g&&d.unshift("");return this.path(d.join(e),c)};d.segmentCoded=function(a,b,c){var d,h;"number"!==typeof a&&(c=b,b=a,a=void 0);if(void 0===b){a=this.segment(a,b,c);if(j(a)){d=0;for(h=a.length;d<h;d++)a[d]=e.decode(a[d])}else a=void 0!==a?e.decode(a):void 0;return a}if(j(b)){d=0;for(h=b.length;d<h;d++)b[d]=e.decode(b[d])}else b=
"string"===typeof b||b instanceof String?e.encode(b):b;return this.segment(a,b,c)};var F=d.query;d.query=function(a,b){if(!0===a)return e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("function"===typeof a){var c=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace),d=a.call(this,c);this._parts.query=e.buildQuery(d||c,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);this.build(!b);return this}return void 0!==a&&"string"!==typeof a?(this._parts.query=e.buildQuery(a,
this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!b),this):F.call(this,a,b)};d.setQuery=function(a,b,c){var d=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("string"===typeof a||a instanceof String)d[a]=void 0!==b?b:null;else if("object"===typeof a)for(var h in a)m.call(a,h)&&(d[h]=a[h]);else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");this._parts.query=e.buildQuery(d,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);
"string"!==typeof a&&(c=b);this.build(!c);return this};d.addQuery=function(a,b,c){var d=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);e.addQuery(d,a,void 0===b?null:b);this._parts.query=e.buildQuery(d,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);"string"!==typeof a&&(c=b);this.build(!c);return this};d.removeQuery=function(a,b,c){var d=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);e.removeQuery(d,a,b);this._parts.query=e.buildQuery(d,this._parts.duplicateQueryParameters,
this._parts.escapeQuerySpace);"string"!==typeof a&&(c=b);this.build(!c);return this};d.hasQuery=function(a,b,c){var d=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return e.hasQuery(d,a,b,c)};d.setSearch=d.setQuery;d.addSearch=d.addQuery;d.removeSearch=d.removeQuery;d.hasSearch=d.hasQuery;d.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()};
d.normalizeProtocol=function(a){"string"===typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!a));return this};d.normalizeHostname=function(a){this._parts.hostname&&(this.is("IDN")&&n?this._parts.hostname=n.toASCII(this._parts.hostname):this.is("IPv6")&&q&&(this._parts.hostname=q.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!a));return this};d.normalizePort=function(a){"string"===typeof this._parts.protocol&&
this._parts.port===e.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!a));return this};d.normalizePath=function(a){if(this._parts.urn||!this._parts.path||"/"===this._parts.path)return this;var b,c=this._parts.path,d="",h,g;"/"!==c.charAt(0)&&(b=!0,c="/"+c);c=c.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/");b&&(d=c.substring(1).match(/^(\.\.\/)+/)||"")&&(d=d[0]);for(;;){h=c.indexOf("/..");if(-1===h)break;else if(0===h){c=c.substring(3);continue}g=c.substring(0,h).lastIndexOf("/");
-1===g&&(g=h);c=c.substring(0,g)+c.substring(h+3)}b&&this.is("relative")&&(c=d+c.substring(1));c=e.recodePath(c);this._parts.path=c;this.build(!a);return this};d.normalizePathname=d.normalizePath;d.normalizeQuery=function(a){"string"===typeof this._parts.query&&(this._parts.query.length?this.query(e.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!a));return this};d.normalizeFragment=function(a){this._parts.fragment||(this._parts.fragment=null,this.build(!a));
return this};d.normalizeSearch=d.normalizeQuery;d.normalizeHash=d.normalizeFragment;d.iso8859=function(){var a=e.encode,b=e.decode;e.encode=escape;e.decode=decodeURIComponent;this.normalize();e.encode=a;e.decode=b;return this};d.unicode=function(){var a=e.encode,b=e.decode;e.encode=u;e.decode=unescape;this.normalize();e.encode=a;e.decode=b;return this};d.readable=function(){var a=this.clone();a.username("").password("").normalize();var b="";a._parts.protocol&&(b+=a._parts.protocol+"://");a._parts.hostname&&
(a.is("punycode")&&n?(b+=n.toUnicode(a._parts.hostname),a._parts.port&&(b+=":"+a._parts.port)):b+=a.host());a._parts.hostname&&(a._parts.path&&"/"!==a._parts.path.charAt(0))&&(b+="/");b+=a.path(!0);if(a._parts.query){for(var c="",d=0,h=a._parts.query.split("&"),g=h.length;d<g;d++){var i=(h[d]||"").split("="),c=c+("&"+e.decodeQuery(i[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"));void 0!==i[1]&&(c+="="+e.decodeQuery(i[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}b+="?"+c.substring(1)}return b+=
e.decodeQuery(a.hash(),!0)};d.absoluteTo=function(a){var b=this.clone(),c=["protocol","username","password","hostname","port"],d,h;if(this._parts.urn)throw Error("URNs do not have any generally defined hierarchical components");a instanceof e||(a=new e(a));b._parts.protocol||(b._parts.protocol=a._parts.protocol);if(this._parts.hostname)return b;for(d=0;h=c[d];d++)b._parts[h]=a._parts[h];b._parts.path?".."===b._parts.path.substring(-2)&&(b._parts.path+="/"):(b._parts.path=a._parts.path,b._parts.query||
(b._parts.query=a._parts.query));"/"!==b.path().charAt(0)&&(a=a.directory(),b._parts.path=(a?a+"/":"")+b._parts.path,b.normalizePath());b.build();return b};d.relativeTo=function(a){var b=this.clone().normalize(),c,d,h,g;if(b._parts.urn)throw Error("URNs do not have any generally defined hierarchical components");a=(new e(a)).normalize();c=b._parts;d=a._parts;h=b.path();g=a.path();if("/"!==h.charAt(0))throw Error("URI is already relative");if("/"!==g.charAt(0))throw Error("Cannot calculate a URI relative to another relative URI");
c.protocol===d.protocol&&(c.protocol=null);if(!(c.username!==d.username||c.password!==d.password)&&!(null!==c.protocol||null!==c.username||null!==c.password)&&c.hostname===d.hostname&&c.port===d.port)c.hostname=null,c.port=null;else return b.build();if(h===g)return c.path="",b.build();a=e.commonPath(b.path(),a.path());if(!a)return b.build();d=d.path.substring(a.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");c.path=d+c.path.substring(a.length);return b.build()};d.equals=function(a){var b=this.clone(),
a=new e(a),c={},d={},h={},g;b.normalize();a.normalize();if(b.toString()===a.toString())return!0;c=b.query();d=a.query();b.query("");a.query("");if(b.toString()!==a.toString()||c.length!==d.length)return!1;c=e.parseQuery(c,this._parts.escapeQuerySpace);d=e.parseQuery(d,this._parts.escapeQuerySpace);for(g in c)if(m.call(c,g)){if(j(c[g])){if(!w(c[g],d[g]))return!1}else if(c[g]!==d[g])return!1;h[g]=!0}for(g in d)if(m.call(d,g)&&!h[g])return!1;return!0};d.duplicateQueryParameters=function(a){this._parts.duplicateQueryParameters=
!!a;return this};d.escapeQuerySpace=function(a){this._parts.escapeQuerySpace=!!a;return this};this.URI=e});;
;
/* module-key = 'com.atlassian.jira.jira-fileviewer-plugin:fileviewer', location = 'jira-fileviewer-module/file-service.js' */
define("jira/fileviewer/file-service",["jira/featureflags/feature-manager","jquery"],function(e,n){"use strict";function i(){return Object.keys(r).map(function(e){return r[e].join(", ")}).join(", ")}function t(e,n){Array.isArray(n)?e.push.apply(e,n):e.push(n)}var r={image:["a[file-preview-type=image]"],video:["a[file-preview-type=video]"],document:["a[file-preview-type=document]"]};return{findFiles:function(e){return n(e||document.body).find(i())},getFileSelector:i,getImageSelector:function(){return r.image.join(", ")},addImageSelector:function(e){t(r.image,e)},getVideoSelector:function(){return r.video.join(", ")},getDocumentSelector:function(){return r.document.join(", ")},addDocumentSelector:function(e){t(r.document,e)}}});;
;
/* module-key = 'com.atlassian.jira.jira-fileviewer-plugin:fileviewer', location = 'jira-fileviewer-module/fileviewer.js' */
define("jira/fileviewer",["wrm/require","jira/fileviewer/file-service","jira/loading/loading","jira/ajs/keyboardshortcut/keyboard-shortcut-toggle","jira/components/analytics-tracker/tracker","jira/util/navigator","atlassian/libs/uri-1.14.1","jquery","underscore"],function(e,i,t,r,n,a,o,l,c){"use strict";function d(){var e=l.Deferred();return s().done(function(){e.resolve(FileViewer)}),e.promise()}function u(e){var i=o(e.data("download-url")||e.attr("href"));return a.isIE()&&a.majorVersion()<12&&i.addSearch("stream","true"),i.toString()}function f(e){return e.data("download-url")||e.attr("href")}function s(){return m||(m=e(["wr!com.atlassian.jira.jira-fileviewer-plugin:atlassian-fileviewer"]),m.done(function(){g=new FileViewer({enableMiniMode:!0,viewers:["image","document","video"],moduleBackend:require("jira/fileviewer/module-backend/asynchronous"),analyticsBackend:require("jira/fileviewer/module-backend/analytics")}),g.on("fv.open",function(){r.disable,n.trackEvent("viewissue.attachment.view","click")}),g.on("fv.close",r.enable)})),m}function v(){g&&g.close()}function p(){var e=[],t=i.getImageSelector(),r=i.getDocumentSelector(),n=i.getVideoSelector(),a=l(t+", "+r+", "+n);a.each(function(){var i=l(this).closest("a");i.is(t)&&e.push({type:"image/png",id:i.attr("file-preview-id"),src:f(i),title:i.attr("file-preview-title"),thumbnail:i.attr("file-preview-url")||i.attr("data-download-url")||i.find("img").attr("src")}),i.is(r)&&e.push({type:"application/pdf",id:i.attr("file-preview-id"),src:u(i),title:i.attr("file-preview-title")}),i.is(n)&&e.push({type:i.attr("file-preview-mime-type"),id:i.attr("file-preview-id"),src:f(i),title:i.attr("file-preview-title"),thumbnail:i.attr("file-preview-url")||i.attr("data-download-url")||i.find("img").attr("src")})});var o=c.uniq(e,!1,function(e){return e.id});g.setFiles(o),a.off("simpleClick.fvOpen").on("simpleClick.fvOpen",function(e){e.preventDefault(),g.open({id:l(this).attr("file-preview-id")})})}function w(e){if(g)p();else{var r=i.findFiles(e);r.off("simpleClick.fvInit").on("simpleClick.fvInit",function(e){e.preventDefault();var i=l(this);t.showLoadingIndicator(),AJS.dim(),s().done(function(){p(),g.open({id:i.attr("file-preview-id")})}).fail(function(){window.location=f(i)}).always(function(){r.off("simpleClick.fvInit"),AJS.undim(),l(".aui-blanket").remove(),t.hideLoadingIndicator()})})}}var m,g;return{attachToElements:w,closeViewer:v,addImageSelector:function(e){i.addImageSelector(e)},addDocumentSelector:function(e){i.addDocumentSelector(e)},getFileViewerConstructor:d}});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:events', location = 'jira-issue-navigator-components-module/util/Events.js' */
define("jira/components/util/events",["require"],function(e){"use strict";var n=e("jira/util/events/types"),t=e("jira/components/libs/underscore");return t.extend({},n,{LAYOUT_RENDERED:"layoutRendered"})}),AJS.namespace("JIRA.Events",null,require("jira/util/events/types"));
//# sourceMappingURL=Events-min.js.map
;
;
/* module-key = 'com.atlassian.plugin.jslibs:jquery.fancybox-1.3.4', location = 'jquery-plugins/jquery.fancybox/1.3.4/jquery.fancybox-1.3.4.js' */
(function(r){define("atlassian/jquery-plugins/jquery.fancybox-1.3.4",function(){return function(t){r(window,document,t);return t}})})(function(r,t,R){var a=R,n,u,v,e,B,l,C,i,y,z,q=0,d={},o=[],p=0,b={},j=[],E=null,m=new Image,H=/\.(jpg|gif|png|bmp|jpeg)(.*)?$/i,T=/[^\.]\.(swf)\s*$/i,I,J=1,x=0,w="",s,g,k=!1,A=a.extend(a("<div/>")[0],{prop:0}),K=a.browser.msie&&7>a.browser.version&&!r.XMLHttpRequest,L=function(){u.hide();m.onerror=m.onload=null;E&&E.abort();n.empty()},M=function(){!1===d.onError(o,q,
d)?(u.hide(),k=!1):(d.titleShow=!1,d.width="auto",d.height="auto",n.html('<p id="fancybox-error">The requested content cannot be loaded.<br />Please try again later.</p>'),D())},G=function(){var c=o[q],b,f,e,g,j,i;L();d=a.extend({},a.fn.fancybox.defaults,"undefined"==typeof a(c).data("fancybox")?d:a(c).data("fancybox"));i=d.onStart(o,q,d);if(!1===i)k=!1;else{"object"==typeof i&&(d=a.extend(d,i));e=d.title||(c.nodeName?a(c).attr("title"):c.title)||"";c.nodeName&&!d.orig&&(d.orig=a(c).children("img:first").length?
a(c).children("img:first"):a(c));""===e&&(d.orig&&d.titleFromAlt)&&(e=d.orig.attr("alt"));b=d.href||(c.nodeName?a(c).attr("href"):c.href)||null;if(/^(?:javascript)/i.test(b)||"#"==b)b=null;d.type?(f=d.type,b||(b=d.content)):d.content?f="html":b&&(f=b.match(H)?"image":b.match(T)?"swf":a(c).hasClass("iframe")?"iframe":0===b.indexOf("#")?"inline":"ajax");if(f)switch("inline"==f&&(c=b.substr(b.indexOf("#")),f=0<a(c).length?"inline":"ajax"),d.type=f,d.href=b,d.title=e,d.autoDimensions&&("html"==d.type||
"inline"==d.type||"ajax"==d.type?(d.width="auto",d.height="auto"):d.autoDimensions=!1),d.modal&&(d.overlayShow=!0,d.hideOnOverlayClick=!1,d.hideOnContentClick=!1,d.enableEscapeButton=!1,d.showCloseButton=!1),d.padding=parseInt(d.padding,10),d.margin=parseInt(d.margin,10),n.css("padding",d.padding+d.margin),a(".fancybox-inline-tmp").unbind("fancybox-cancel").bind("fancybox-change",function(){a(this).replaceWith(l.children())}),f){case "html":n.html(d.content);D();break;case "inline":if(!0===a(c).parent().is("#fancybox-content")){k=
!1;break}a('<div class="fancybox-inline-tmp" />').hide().insertBefore(a(c)).bind("fancybox-cleanup",function(){a(this).replaceWith(l.children())}).bind("fancybox-cancel",function(){a(this).replaceWith(n.children())});a(c).appendTo(n);D();break;case "image":k=!1;a.fancybox.showActivity();m=new Image;m.onerror=function(){M()};m.onload=function(){k=true;m.onerror=m.onload=null;d.width=m.width;d.height=m.height;a("<img />").attr({id:"fancybox-img",src:m.src,alt:d.title}).appendTo(n);N()};m.src=b;break;
case "swf":d.scrolling="no";g='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+d.width+'" height="'+d.height+'"><param name="movie" value="'+b+'"></param>';j="";a.each(d.swf,function(a,c){g=g+('<param name="'+a+'" value="'+c+'"></param>');j=j+(" "+a+'="'+c+'"')});g+='<embed src="'+b+'" type="application/x-shockwave-flash" width="'+d.width+'" height="'+d.height+'"'+j+"></embed></object>";n.html(g);D();break;case "ajax":k=!1;a.fancybox.showActivity();d.ajax.win=d.ajax.success;
E=a.ajax(a.extend({},d.ajax,{url:b,data:d.ajax.data||{},error:function(a){a.status>0&&M()},success:function(a,c,f){if((typeof f=="object"?f:E).status==200){if(typeof d.ajax.win=="function"){i=d.ajax.win(b,a,c,f);if(i===false){u.hide();return}if(typeof i=="string"||typeof i=="object")a=i}n.html(a);D()}}}));break;case "iframe":N()}else M()}},D=function(){var c=d.width,b=d.height,c=-1<c.toString().indexOf("%")?parseInt((a(r).width()-2*d.margin)*parseFloat(c)/100,10)+"px":"auto"==c?"auto":c+"px",b=-1<
b.toString().indexOf("%")?parseInt((a(r).height()-2*d.margin)*parseFloat(b)/100,10)+"px":"auto"==b?"auto":b+"px";n.wrapInner('<div style="width:'+c+";height:"+b+";overflow: "+("auto"==d.scrolling?"auto":"yes"==d.scrolling?"scroll":"hidden")+';position:relative;"></div>');d.width=n.width();d.height=n.height();N()},N=function(){var c,h;u.hide();if(e.is(":visible")&&!1===b.onCleanup(j,p,b))a.event.trigger("fancybox-cancel"),k=!1;else{k=!0;a(l.add(v)).unbind();a(r).unbind("resize.fb scroll.fb");a(t).unbind("keydown.fb");
e.is(":visible")&&"outside"!==b.titlePosition&&e.css("height",e.height());j=o;p=q;b=d;if(b.overlayShow){if(v.css({"background-color":b.overlayColor,opacity:b.overlayOpacity,cursor:b.hideOnOverlayClick?"pointer":"auto",height:a(t).height()}),!v.is(":visible")){if(K)a("select:not(#fancybox-tmp select)").filter(function(){return"hidden"!==this.style.visibility}).css({visibility:"hidden"}).one("fancybox-cleanup",function(){this.style.visibility="inherit"});v.show()}}else v.hide();c=O();var f={},F=b.autoScale,
m=2*b.padding;f.width=-1<b.width.toString().indexOf("%")?parseInt(c[0]*parseFloat(b.width)/100,10):b.width+m;f.height=-1<b.height.toString().indexOf("%")?parseInt(c[1]*parseFloat(b.height)/100,10):b.height+m;if(F&&(f.width>c[0]||f.height>c[1]))if("image"==d.type||"swf"==d.type){if(F=b.width/b.height,f.width>c[0]&&(f.width=c[0],f.height=parseInt((f.width-m)/F+m,10)),f.height>c[1])f.height=c[1],f.width=parseInt((f.height-m)*F+m,10)}else f.width=Math.min(f.width,c[0]),f.height=Math.min(f.height,c[1]);
f.top=parseInt(Math.max(c[3]-20,c[3]+0.5*(c[1]-f.height-40)),10);f.left=parseInt(Math.max(c[2]-20,c[2]+0.5*(c[0]-f.width-40)),10);g=f;w=b.title||"";x=0;i.empty().removeAttr("style").removeClass();if(!1!==b.titleShow&&(w=a.isFunction(b.titleFormat)?b.titleFormat(w,j,p,b):w&&w.length?"float"==b.titlePosition?'<table id="fancybox-title-float-wrap" cellpadding="0" cellspacing="0"><tr><td id="fancybox-title-float-left"></td><td id="fancybox-title-float-main">'+w+'</td><td id="fancybox-title-float-right"></td></tr></table>':
'<div id="fancybox-title-'+b.titlePosition+'">'+w+"</div>":!1)&&""!==w)switch(i.addClass("fancybox-title-"+b.titlePosition).html(w).appendTo("body").show(),b.titlePosition){case "inside":i.css({width:g.width-2*b.padding,marginLeft:b.padding,marginRight:b.padding});x=i.outerHeight(!0);i.appendTo(B);g.height+=x;break;case "over":i.css({marginLeft:b.padding,width:g.width-2*b.padding,bottom:b.padding}).appendTo(B);break;case "float":i.css("left",-1*parseInt((i.width()-g.width-40)/2,10)).appendTo(e);break;
default:i.css({width:g.width-2*b.padding,paddingLeft:b.padding,paddingRight:b.padding}).appendTo(e)}i.hide();e.is(":visible")?(a(C.add(y).add(z)).hide(),c=e.position(),s={top:c.top,left:c.left,width:e.width(),height:e.height()},h=s.width==g.width&&s.height==g.height,l.fadeTo(b.changeFade,0.3,function(){var c=function(){l.html(n.contents()).fadeTo(b.changeFade,1,P)};a.event.trigger("fancybox-change");l.empty().removeAttr("filter").css({"border-width":b.padding,width:g.width-2*b.padding,height:d.autoDimensions?
"auto":g.height-x-2*b.padding});h?c():(A.prop=0,a(A).animate({prop:1},{duration:b.changeSpeed,easing:b.easingChange,step:Q,complete:c}))})):(e.removeAttr("style"),l.css("border-width",b.padding),"elastic"==b.transitionIn?(s=S(),l.html(n.contents()),e.show(),b.opacity&&(g.opacity=0),A.prop=0,a(A).animate({prop:1},{duration:b.speedIn,easing:b.easingIn,step:Q,complete:P})):("inside"==b.titlePosition&&0<x&&i.show(),l.css({width:g.width-2*b.padding,height:d.autoDimensions?"auto":g.height-x-2*b.padding}).html(n.contents()),
e.css(g).fadeIn("none"==b.transitionIn?0:b.speedIn,P)))}},P=function(){a.support.opacity||(l.get(0).style.removeAttribute("filter"),e.get(0).style.removeAttribute("filter"));d.autoDimensions&&l.css("height","auto");e.css("height","auto");w&&w.length&&i.show();b.showCloseButton&&C.show();(b.enableEscapeButton||b.enableKeyboardNav)&&a(t).bind("keydown.fb",function(c){if(c.keyCode==27&&b.enableEscapeButton){c.preventDefault();a.fancybox.close()}else if((c.keyCode==37||c.keyCode==39)&&b.enableKeyboardNav&&
c.target.tagName!=="INPUT"&&c.target.tagName!=="TEXTAREA"&&c.target.tagName!=="SELECT"){c.preventDefault();a.fancybox[c.keyCode==37?"prev":"next"]()}});b.showNavArrows?((b.cyclic&&1<j.length||0!==p)&&y.show(),(b.cyclic&&1<j.length||p!=j.length-1)&&z.show()):(y.hide(),z.hide());b.hideOnContentClick&&l.bind("click",a.fancybox.close);b.hideOnOverlayClick&&v.bind("click",a.fancybox.close);a(r).bind("resize.fb",a.fancybox.resize);b.centerOnScroll&&a(r).bind("scroll.fb",a.fancybox.center);"iframe"==b.type&&
a('<iframe id="fancybox-frame" name="fancybox-frame'+(new Date).getTime()+'" frameborder="0" hspace="0" '+(a.browser.msie?'allowtransparency="true""':"")+' scrolling="'+d.scrolling+'" src="'+b.href+'"></iframe>').appendTo(l);e.show();k=!1;a.fancybox.center();b.onComplete(j,p,b);var c,h;j.length-1>p&&(c=j[p+1].href,"undefined"!==typeof c&&c.match(H)&&(h=new Image,h.src=c));0<p&&(c=j[p-1].href,"undefined"!==typeof c&&c.match(H)&&(h=new Image,h.src=c))},Q=function(a){var d={width:parseInt(s.width+(g.width-
s.width)*a,10),height:parseInt(s.height+(g.height-s.height)*a,10),top:parseInt(s.top+(g.top-s.top)*a,10),left:parseInt(s.left+(g.left-s.left)*a,10)};"undefined"!==typeof g.opacity&&(d.opacity=0.5>a?0.5:a);e.css(d);l.css({width:d.width-2*b.padding,height:d.height-x*a-2*b.padding})},O=function(){return[a(r).width()-2*b.margin,a(r).height()-2*b.margin,a(t).scrollLeft()+b.margin,a(t).scrollTop()+b.margin]},S=function(){var c=d.orig?a(d.orig):!1,h={};c&&c.length?(h=c.offset(),h.top+=parseInt(c.css("paddingTop"),
10)||0,h.left+=parseInt(c.css("paddingLeft"),10)||0,h.top+=parseInt(c.css("border-top-width"),10)||0,h.left+=parseInt(c.css("border-left-width"),10)||0,h.width=c.width(),h.height=c.height(),h={width:h.width+2*b.padding,height:h.height+2*b.padding,top:h.top-b.padding-20,left:h.left-b.padding-20}):(c=O(),h={width:2*b.padding,height:2*b.padding,top:parseInt(c[3]+0.5*c[1],10),left:parseInt(c[2]+0.5*c[0],10)});return h},U=function(){u.is(":visible")?(a("div",u).css("top",-40*J+"px"),J=(J+1)%12):clearInterval(I)};
a.fn.fancybox=function(c){if(!a(this).length)return this;a(this).data("fancybox",a.extend({},c,a.metadata?a(this).metadata():{})).unbind("click.fb").bind("click.fb",function(c){c.preventDefault();k||(k=!0,a(this).blur(),o=[],q=0,c=a(this).attr("rel")||"",!c||""==c||"nofollow"===c?o.push(this):(o=a("a[rel="+c+"], area[rel="+c+"]"),q=o.index(this)),G())});return this};a.fancybox=function(c,b){var d;if(!k){k=!0;d="undefined"!==typeof b?b:{};o=[];q=parseInt(d.index,10)||0;if(a.isArray(c)){for(var e=0,
g=c.length;e<g;e++)"object"==typeof c[e]?a(c[e]).data("fancybox",a.extend({},d,c[e])):c[e]=a({}).data("fancybox",a.extend({content:c[e]},d));o=R.merge(o,c)}else"object"==typeof c?a(c).data("fancybox",a.extend({},d,c)):c=a({}).data("fancybox",a.extend({content:c},d)),o.push(c);if(q>o.length||0>q)q=0;G()}};a.fancybox.showActivity=function(){clearInterval(I);u.show();I=setInterval(U,66)};a.fancybox.hideActivity=function(){u.hide()};a.fancybox.next=function(){return a.fancybox.pos(p+1)};a.fancybox.prev=
function(){return a.fancybox.pos(p-1)};a.fancybox.pos=function(a){k||(a=parseInt(a),o=j,-1<a&&a<j.length?(q=a,G()):b.cyclic&&1<j.length&&(q=a>=j.length?0:j.length-1,G()))};a.fancybox.cancel=function(){k||(k=!0,a.event.trigger("fancybox-cancel"),L(),d.onCancel(o,q,d),k=!1)};a.fancybox.close=function(){function c(){v.fadeOut("fast");i.empty().hide();e.hide();a.event.trigger("fancybox-cleanup");l.empty();b.onClosed(j,p,b);j=d=[];p=q=0;b=d={};k=!1}if(!k&&!e.is(":hidden"))if(k=!0,b&&!1===b.onCleanup(j,
p,b))k=!1;else if(L(),a(C.add(y).add(z)).hide(),a(l.add(v)).unbind(),a(r).unbind("resize.fb scroll.fb"),a(t).unbind("keydown.fb"),l.find("iframe").attr("src",K&&/^https/i.test(r.location.href||"")?"javascript:void(false)":"about:blank"),"inside"!==b.titlePosition&&i.empty(),e.stop(),"elastic"==b.transitionOut){s=S();var h=e.position();g={top:h.top,left:h.left,width:e.width(),height:e.height()};b.opacity&&(g.opacity=1);i.empty().hide();A.prop=1;a(A).animate({prop:0},{duration:b.speedOut,easing:b.easingOut,
step:Q,complete:c})}else e.fadeOut("none"==b.transitionOut?0:b.speedOut,c)};a.fancybox.resize=function(){v.is(":visible")&&v.css("height",a(t).height());a.fancybox.center(!0)};a.fancybox.center=function(a){var d,f;if(!k&&(f=!0===a?1:0,d=O(),f||!(e.width()>d[0]||e.height()>d[1])))e.stop().animate({top:parseInt(Math.max(d[3]-20,d[3]+0.5*(d[1]-l.height()-40)-b.padding)),left:parseInt(Math.max(d[2]-20,d[2]+0.5*(d[0]-l.width()-40)-b.padding))},"number"==typeof a?a:200)};a.fancybox.init=function(){a("#fancybox-wrap").length||
(a("body").append(n=a('<div id="fancybox-tmp"></div>'),u=a('<div id="fancybox-loading"><div></div></div>'),v=a('<div id="fancybox-overlay"></div>'),e=a('<div id="fancybox-wrap"></div>')),B=a('<div id="fancybox-outer"></div>').append('<div class="fancybox-bg" id="fancybox-bg-n"></div><div class="fancybox-bg" id="fancybox-bg-ne"></div><div class="fancybox-bg" id="fancybox-bg-e"></div><div class="fancybox-bg" id="fancybox-bg-se"></div><div class="fancybox-bg" id="fancybox-bg-s"></div><div class="fancybox-bg" id="fancybox-bg-sw"></div><div class="fancybox-bg" id="fancybox-bg-w"></div><div class="fancybox-bg" id="fancybox-bg-nw"></div>').appendTo(e),
B.append(l=a('<div id="fancybox-content"></div>'),C=a('<a id="fancybox-close"></a>'),i=a('<div id="fancybox-title"></div>'),y=a('<a href="javascript:;" id="fancybox-left"><span class="fancy-ico" id="fancybox-left-ico"></span></a>'),z=a('<a href="javascript:;" id="fancybox-right"><span class="fancy-ico" id="fancybox-right-ico"></span></a>')),C.click(a.fancybox.close),u.click(a.fancybox.cancel),y.click(function(c){c.preventDefault();a.fancybox.prev()}),z.click(function(c){c.preventDefault();a.fancybox.next()}),
a.fn.mousewheel&&e.bind("mousewheel.fb",function(c,b){if(k)c.preventDefault();else if(0==a(c.target).get(0).clientHeight||a(c.target).get(0).scrollHeight===a(c.target).get(0).clientHeight)c.preventDefault(),a.fancybox[0<b?"prev":"next"]()}),a.support.opacity||e.addClass("fancybox-ie"),K&&(u.addClass("fancybox-ie6"),e.addClass("fancybox-ie6"),a('<iframe id="fancybox-hide-sel-frame" src="'+(/^https/i.test(r.location.href||"")?"javascript:void(false)":"about:blank")+'" scrolling="no" border="0" frameborder="0" tabindex="-1"></iframe>').prependTo(B)))};
a.fn.fancybox.defaults={padding:10,margin:40,opacity:!1,modal:!1,cyclic:!1,scrolling:"auto",width:560,height:340,autoScale:!0,autoDimensions:!0,centerOnScroll:!1,ajax:{},swf:{wmode:"transparent"},hideOnOverlayClick:!0,hideOnContentClick:!1,overlayShow:!0,overlayOpacity:0.7,overlayColor:"#777",titleShow:!0,titlePosition:"float",titleFormat:null,titleFromAlt:!1,transitionIn:"fade",transitionOut:"fade",speedIn:300,speedOut:300,changeSpeed:300,changeFade:"fast",easingIn:"swing",easingOut:"swing",showCloseButton:!0,
showNavArrows:!0,enableEscapeButton:!0,enableKeyboardNav:!0,onStart:function(){},onCancel:function(){},onComplete:function(){},onCleanup:function(){},onClosed:function(){},onError:function(){}};a(t).ready(function(){a.fancybox.init()})});;
;
/* module-key = 'jira.webresources:jquery-fancybox', location = '/includes/jquery/plugins/fancybox/jquery.fancybox.jira.js' */
require(["jquery","atlassian/jquery-plugins/jquery.fancybox-1.3.4"],function(t,i){i(t),t.fn.fancybox.defaults.titleFormat=function(t){if(t&&t.length)return t=AJS.escapeHtml(t),"float"===this.titlePosition?'<table id="fancybox-title-float-wrap" cellpadding="0" cellspacing="0"><tr><td id="fancybox-title-float-left"></td><td id="fancybox-title-float-main">'+t+'</td><td id="fancybox-title-float-right"></td></tr></table>':'<div id="fancybox-title-'+this.titlePosition+'">'+t+"</div>"}});;
;
/* module-key = 'jira.webresources:jquery-livestamp', location = '/includes/jquery/plugins/livestamp/time.js' */
define("jira/jquery/plugins/livestamp/time",["jira/util/formatter","jira/moment","jira/util/data/meta"],function(e,t,n){"use strict";function o(e,t){this.key=e,this.isAge=t}function r(t,n,o){return t in y?e.format(y[t],o):null}function a(e){switch(e.key){case"short":case"shortAge":return"ll";case"long":case"longAge":return"LL";case"full":case"fullAge":return"LLL";case"timestamp":return"LLL";default:return null}}function i(e){return e.clone().hours(0).minutes(0).seconds(0).milliseconds(0)}function u(e,t){var n=i(e),o=n.clone().subtract("d",1);return o<=t&&t<n}function l(e,t){var n=i(e).add("d",1),o=n.clone().add("d",1);return n<=t&&t<o}function m(e,t){return Math.floor(t.diff(e,"minutes",!0))}function s(e,t){var n=t.diff(e,"hours",!0);return Math.round(n)}function c(e,t){return Math.floor(t.diff(e,"days",!0))}function d(e,t){var n=a(t);return e.format(n)}function g(e,n,o){if(o=o||t(),e<=o){if(e>o.clone().subtract("m",1))return r("aMomentAgo",n);if(e>o.clone().subtract("m",2))return r("oneMinuteAgo",n);if(e>o.clone().subtract("m",50))return r("xMinutesAgo",n,m(e,o));if(e>o.clone().subtract("m",90))return r("oneHourAgo",n);if(u(o,e)&&e<o.clone().subtract("h",5))return r("oneDayAgo",n);if(e>o.clone().subtract("d",1))return r("xHoursAgo",n,s(e,o));if(e>o.clone().subtract("d",7))return r("xDaysAgo",n,Math.max(c(e,o),2));if(e>o.clone().subtract("d",8))return r("oneWeekAgo",n)}else{if(e<o.clone().add("m",1))return r("inAMoment",n);if(e<o.clone().add("m",2))return r("inOneMinute",n);if(e<o.clone().add("m",50))return r("inXMinutes",n,m(o,e));if(e<o.clone().add("m",90))return r("inOneHour",n);if(l(o,e)&&e>o.clone().add("h",5))return r("inOneDay",n);if(e<o.clone().add("d",1))return r("inXHours",n,s(o,e));if(e<o.clone().add("d",7))return r("inXDays",n,Math.max(c(o,e),2));if(e<o.clone().add("d",8))return r("inOneWeek",n)}return d(e,n)}var f={},v=n.getBoolean("date-relativize");o.types={};for(var x,A=["shortAge","longAge","fullAge","short","long","full","timestamp"],h=0,T=A.length;h<T;h++)x=A[h],o.types[x]=new o(x,x.toLowerCase().indexOf("age")!==-1);var y={};return f.FormatType=o,f.formatDate=function(e,t,n){return e&&t?(v||n)&&t.isAge?g(e,t):d(e,t):null},f.setRelativeTranslations=function(e){for(var t in e)y[t]=e[t]},f.restoreDefaultRelativeTranslations=function(){this.setRelativeTranslations({inAMoment:"Now",inOneMinute:"In 1 minute",inXMinutes:"In {0} minutes",inOneHour:"In 1 hour",inXHours:"In {0} hours",inOneDay:"Tomorrow",inXDays:"In {0} days",inOneWeek:"In 1 week",aMomentAgo:"Just now",oneMinuteAgo:"1 minute ago",xMinutesAgo:"{0} minutes ago",oneHourAgo:"1 hour ago",xHoursAgo:"{0} hours ago",oneDayAgo:"Yesterday",xDaysAgo:"{0} days ago",oneWeekAgo:"1 week ago"})},f.restoreDefaultRelativeTranslations(),f.formatDateWithRelativeAge=g,f.formatDateWithFormatString=d,f}),AJS.namespace("JIRA.Time",null,require("jira/jquery/plugins/livestamp/time"));;
;
/* module-key = 'jira.webresources:jquery-livestamp', location = '/includes/jquery/plugins/livestamp/livestamp.js' */
define("jira/jquery/plugins/livestamp/livestamp",["jquery","jira/skate","jira/moment","jira/util/data/meta","jira/jquery/plugins/livestamp/time"],function(t,e,i,a,r){"use strict";var n=6e3,u=a.getBoolean("date-relativize");e("livestamp",{type:e.type.CLASSNAME,prototype:{update:function(){var e=t(this),a=e.data("relativize"),n=e.attr("datetime");if(n&&(n=isNaN(n)?i(n).zone(n):i(parseInt(n,10)),i.isMoment(n)&&n.isValid())){var m=e.data("datetime-format");m=m?m:"fullAge",u||a||(m=m.replace("Age",""));var o=r.formatDate(n,r.FormatType.types[m],a);return e.text()!==o&&e.text(o),!0}return!1},onTimeout:function(){this.timerId&&(clearTimeout(this.timerId),this.timerId=!1);var t=this.update();t&&(this.timerId=setTimeout(this.onTimeout.bind(this),n))}},attributes:function(t){t.onTimeout()},attached:function(t){t.onTimeout()},detached:function(t){clearTimeout(t.timerId),t.timerId=!1}}),t.fn.livestamp=function(){return this}}),function(){require("jira/jquery/plugins/livestamp/livestamp")}();;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = 'includes/jira/viewissue/issuecomponents.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.Issue&&(JIRA.Templates.Issue={}),JIRA.Templates.Issue.watchersWithBrowse=function(e,s){for(var a='<form action="#" method="post" class="aui recipients-form"><a href="#" class="cancel" role="button"><span class="icon-default aui-icon aui-icon-small aui-iconfont-close-dialog">'+soy.$$escapeHtml("Close")+'</span></a><fieldset><label class="js-add-watchers-label">'+soy.$$escapeHtml("Add Watchers")+'</label><div class="autocomplete-user-target"><select id="watchers" name="watchers" data-description="'+soy.$$escapeHtml("Start Typing for Users")+'" class="watchers-user-picker hidden" multiple="multiple">',t=e.watchers,l=t.length,c=0;c<l;c++){var o=t[c];a+="<option style=\"background-image:url('"+soy.$$escapeHtml(o.avatarUrls["16x16"])+'\')" selected="selected" value="'+soy.$$escapeHtml(o.accountId)+'">'+soy.$$escapeHtml(o.displayName)+"</option>"}return a+="</select></div></fieldset></form>"},JIRA.Templates.Issue.watchersNoBrowse=function(e,s){for(var a='<form action="#" method="post" class="aui recipients-form"><a href="#" class="cancel" role="button"><span class="icon-default aui-icon aui-icon-small aui-iconfont-close-dialog">'+soy.$$escapeHtml("Close")+'</span></a><fieldset><label for="watchers-multi-select">'+soy.$$escapeHtml("Add Watchers")+'</label><div><input type="text" class="text" id="watchers-nosearch" /><div class="description">'+soy.$$escapeHtml("Type username and press enter.")+'</div></div><div class="recipients"><ol class="watchers">',t=e.watchers,l=t.length,c=0;c<l;c++){var o=t[c];a+=JIRA.Templates.Fields.recipientUsername({username:o.name,icon:o.avatarUrls["16x16"],displayName:o.displayName,escape:!0})}return a+="</ol></div></fieldset></form>"},JIRA.Templates.Issue.error=function(e,s){for(var a="<p>"+soy.$$escapeHtml(e.msg)+"</p><ul>",t=e.errors,l=t.length,c=0;c<l;c++){var o=t[c];a+="<li>"+soy.$$escapeHtml(o)+"</li>"}return a+="</ul>"},JIRA.Templates.Issue.usersListReadOnly=function(e,s){for(var a='<form class="aui recipients-form"><a href="#" class="cancel" role="button"><span class="icon-default aui-icon aui-icon-small aui-iconfont-close-dialog">'+soy.$$escapeHtml("Close")+'</span></a><fieldset><div class="recipients"><ol class="voters">',t=e.users,l=t.length,c=0;c<l;c++){var o=t[c];a+=JIRA.Templates.Fields.recipientUsername({username:o.name,icon:o.avatarUrls["16x16"],displayName:o.displayName,readOnly:!0,escape:!0})}return a+="</ol></div></fieldset></form>"};;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/entities/user-collection.js' */
define("jira/viewissue/watchers-voters/entities/user-collection",["require"],function(e){var r=e("jira/message"),s=e("backbone"),t=e("underscore"),o=e("jquery"),n=e("wrm/context-path"),i=e("jira/util/formatter"),a=JIRA.Templates.Issue,u=s.Model.extend({idAttribute:"key"});return s.Collection.extend({model:u,initialize:function(e){if(void 0===e)throw new Error("Must supply options");if(!e.issueKey)throw new Error("Must supply issue key");if(this.issueKey=e.issueKey,!e.endpoint)throw new Error("Must supply an endpoint");if(this.endpoint=e.endpoint,!e.modelKey)throw new Error("Must supply an model key");this.modelKey=e.modelKey},url:function(){return[n(),"rest/api/2/issue",this.issueKey,this.endpoint].join("/")},parse:function(e){return e&&e[this.modelKey]?e[this.modelKey]:[]},ajax:function(e){return e=t.extend({url:this.url(),headers:{"Content-Type":"application/json"},success:t.bind(function(){this.fetch()},this),error:t.bind(function(e){404!==e.status&&this.handleErrorResponse(e,"There was an error adding watcher")},this)},e),o.ajax(e)},getUser:function(e){return o.ajax({url:n()+"/rest/api/2/user?username="+encodeURIComponent(e),error:t.bind(function(e){404!==e.status&&this.handleErrorResponse(e,"There was an error adding watcher")},this)})},handleErrorResponse:function(e,s){var t=this._parseResponse(e.responseText);if(t.errorMessages){var o=a.error({msg:s,errors:t.errorMessages});r.showErrorMsg(o,{closeable:!0})}this.trigger("errorOccurred")},_parseResponse:function(e){try{return JSON.parse(e)}catch(e){return this._showFatalErrorMessage(),null}},_showFatalErrorMessage:function(){var e="<p>"+"Communications Breakdown"+"</p><p>"+"Close this dialog and press refresh in your browser"+"</p>";r.showErrorMsg(e,{closeable:!0})}})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/entities/voters-user-collection.js' */
define("jira/viewissue/watchers-voters/entities/voters-user-collection",["jira/viewissue/watchers-voters/entities/user-collection"],function(e){return e.extend({initialize:function(t){var i={issueKey:t,endpoint:"votes",modelKey:"voters"};e.prototype.initialize.apply(this,[i])},vote:function(){return this.ajax({type:"POST"})},unvote:function(){return this.ajax({type:"DELETE"})}})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/entities/watchers-user-collection.js' */
define("jira/viewissue/watchers-voters/entities/watchers-user-collection",["jira/viewissue/watchers-voters/entities/user-collection","jira/util/data/meta"],function(e,t){return e.extend({initialize:function(i){this.canBrowseUsers=t.get("can-search-users"),this.isReadOnly=!t.get("can-edit-watchers");var a={issueKey:i,endpoint:"watchers",modelKey:"watchers"};e.prototype.initialize.apply(this,[a])},addWatcher:function(e){return this.ajax({type:"POST",data:'"'+e+'"'})},removeWatcher:function(e){return this.ajax({type:"DELETE",url:this.url()+"?accountId="+e})}})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/views/voters-view.js' */
define("jira/viewissue/watchers-voters/views/voters-view",["require"],function(e){var t=e("aui/message"),i=e("backbone"),r=(e("underscore"),e("jquery"),e("jira/jquery/deferred"),e("jira/util/formatter")),s=JIRA.Templates.Issue;return i.View.extend({$empty:void 0,initialize:function(e){this.collection=e.collection,this.collection.bind("replace reset add remove",this.render,this)},renderNoWatchers:function(){0===this.$(".recipients li").length?(this.$empty=t.info({closeable:!1,body:"There are no voters for this issue"}),this.$("fieldset").append(this.$empty)):this.$empty&&this.$empty.remove()},render:function(){return this.$el.html(s.usersListReadOnly({users:this.collection.toJSON()})),this.renderNoWatchers(),this.$el}})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/views/abstract-watchers-view.js' */
define("jira/viewissue/watchers-voters/views/abstract-watchers-view",["require"],function(e){var t=e("aui/message"),i=e("backbone"),n=e("underscore"),r=e("jquery"),s=e("jira/jquery/deferred"),a=e("jira/util/formatter");return i.View.extend({$empty:void 0,renderNoWatchers:function(){0===this.$(".recipients li").length?(this.$empty=t.info({closeable:!1,body:"There are no watchers."}),this.$("fieldset").append(this.$empty)):this.$empty&&this.$empty.remove()},render:function(){var e=s();return this.collection.fetch().done(n.bind(function(){this._render(),this.renderNoWatchers(),e.resolve(this.$el),setTimeout(n.bind(function(){this.focus()},this),0)},this)),e.promise()},watch:function(){r("#watching-toggle").text("Stop watching this issue")},unwatch:function(){r("#watching-toggle").text("Start watching this issue")},focus:r.noop,_incrementWatcherCount:function(){var e=r("#watcher-data"),t=parseInt(e.text(),10);e.text(t+1),this.renderNoWatchers()},_decrementWatcherCount:function(){var e=r("#watcher-data"),t=parseInt(e.text(),10);e.text(t-1),this.renderNoWatchers()}})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/views/watchers-view.js' */
define("jira/viewissue/watchers-voters/views/watchers-view",["require"],function(e){var t=e("jira/viewissue/watchers-voters/views/abstract-watchers-view"),r=e("jira/util/data/meta"),i=e("underscore"),a=e("jira/util/logger"),s=e("jira/field/multi-user-list-picker"),c=JIRA.Templates.Issue;return t.extend({events:{selected:"addWatcherToModel",unselect:"removeWatcherFromModel"},_render:function(){this.$el.html(c.watchersWithBrowse({watchers:this.collection.toJSON()}));var e=new s({element:this.$el.find(".watchers-user-picker"),width:220});this.$el.find(".js-add-watchers-label").attr("for",e.$field.attr("id"))},focus:function(){this.$el.find("#watchers-textarea").focus()},addWatcherToModel:function(e,t){e.preventDefault(),this.collection.addWatcher(t.value()).done(i.bind(function(){this._incrementWatcherCount(),t.value()===r.get("remote-user")&&this.watch()},this))},removeWatcherFromModel:function(e,t){this.collection.removeWatcher(t.value()).done(i.bind(function(){this._decrementWatcherCount(),t.value()===r.get("remote-user")&&(this.unwatch(),a.trace("jira.issue.watcher.deleted"))},this))}})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/views/watchers-no-browse-view.js' */
define("jira/viewissue/watchers-voters/views/watchers-no-browse-view",["require"],function(e){var t=e("jira/viewissue/watchers-voters/views/abstract-watchers-view"),r=e("jira/util/data/meta"),a=e("underscore"),i=e("jquery"),s=e("jira/util/logger"),n=e("jira/util/formatter"),o=JIRA.Templates.Issue;return t.extend({events:{"click .remove-recipient":"removeWatcher",submit:"addWatcher"},addWatcher:function(e){e.preventDefault(),this.removeInlineError();var t=i("#watchers-nosearch"),s=i.trim(t.val());t.attr("disabled","disabled"),this.hasUsername(s)?(t.removeAttr("disabled"),this.showInlineError(n.format("User {0} is already watching this issue",s)),t.val("")):this.collection.getUser(s).done(a.bind(function(e){var a=JIRA.Templates.Fields.recipientUsername({icon:e.avatarUrls["16x16"],username:e.name,displayName:e.displayName});s===r.get("remote-user")&&this.watch(),t.val(""),this.$(".watchers").append(a),this.collection.addWatcher(e.name),this._incrementWatcherCount()},this)).fail(a.bind(function(e){404===e.status&&this.showInlineError("User does not exist")},this)).always(function(){t.removeAttr("disabled").focus()})},hasUsername:function(e){var t=!1;return this.$(".watchers li").each(function(){if(i(this).attr("data-username")===e)return t=!0,!1}),t},removeInlineError:function(){this.$(".error").remove()},showInlineError:function(e){i("<div />").addClass("error").text(e).insertAfter(this.$(".description"))},focus:function(){i("#watchers-nosearch").focus()},removeWatcher:function(e){e.preventDefault();var t=i(e.target).closest("li"),a=t.attr("data-username");a&&(t.remove(),this.collection.removeWatcher(a),this._decrementWatcherCount(),a===r.get("remote-user")&&this.unwatch()),s.trace("jira.issue.watcher.deleted")},_render:function(){this.$el.html(o.watchersNoBrowse({watchers:this.collection.toJSON()}))}})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/views/watchers-read-only-view.js' */
define("jira/viewissue/watchers-voters/views/watchers-read-only-view",["require"],function(e){var s=e("jira/viewissue/watchers-voters/views/abstract-watchers-view"),r=JIRA.Templates.Issue;return s.extend({_render:function(){this.$el.html(r.usersListReadOnly({users:this.collection.toJSON()}))}})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/views/watchers-inline-dialog-view.js' */
define("jira/viewissue/watchers-voters/views/watchers-inline-dialog-view",["require"],function(e){var i=e("backbone"),t=e("jira/skate"),n=i.View.prototype.setElement;return i.View.extend({id:"inline-dialog-watchers",events:{"click .cancel":function(e){e.preventDefault(),this.hide()}},setElement:function(e){var s=e instanceof i.$?e.get(0):e;if(s)return this.el&&this.el.parentNode&&this.el!==s&&this.el.parentNode.removeChild(this.el),n.call(this,s),t.init(this.el),this},contents:function(e){var i=this.$el.find(".aui-inline-dialog-contents");0===i.length&&(i=AJS.$("<div/>",{class:"aui-inline-dialog-contents"}),this.$el.append(i)),i.html(e)},show:function(){this.el.setAttribute("open","")},hide:function(){this.el.removeAttribute("open")},isVisible:function(){return!!this.el.hasAttribute("open")}})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/watchers.js' */
define("jira/viewissue/watchers-voters/watchers",["require"],function(e){"use strict";function i(){return h||(h=new a({el:d("#inline-dialog-watchers").get(0)})),h}function s(e){return e.isReadOnly?n:e.canBrowseUsers?r:t}var n=e("jira/viewissue/watchers-voters/views/watchers-read-only-view"),t=e("jira/viewissue/watchers-voters/views/watchers-no-browse-view"),r=e("jira/viewissue/watchers-voters/views/watchers-view"),o=e("jira/viewissue/watchers-voters/entities/watchers-user-collection"),a=e("jira/viewissue/watchers-voters/views/watchers-inline-dialog-view"),c=e("jira/util/events"),l=e("jira/util/events/types"),w=e("jira/util/events/reasons"),u=e("jira/issue"),v=e("aui/inline-dialog"),d=e("jquery"),h=null;d(document).on("click","#view-watcher-list",function(e){e.preventDefault();var n=i(),t=d("#watching-toggle").next(".icon"),r=new o(u.getIssueKey());t.addClass("loading");var a=s(r);new a({collection:r}).render().done(function(e){t.removeClass("loading"),n.contents(e),n.show()}),r.on("errorOccurred",function(){n.hide()})}),d(document).on("keydown",function(e){h&&27===e.keyCode&&v.current!==h.el&&h.isVisible()&&(v.current&&v.current.hide(),h.hide())}),d(document).on("click",function(e){if(h){var i=d(e.target).closest("#inline-dialog-watchers, #watchers-suggestions").length;0===i&&h.isVisible()&&h.hide()}}),c.bind(l.NEW_CONTENT_ADDED,function(e,s,n){n===w.panelRefreshed&&s.is("#peoplemodule")&&i().setElement(s.find("#inline-dialog-watchers").get(0))})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/voters.js' */
define("jira/viewissue/watchers-voters/voters",["require"],function(e){"use strict";var i=e("jira/viewissue/watchers-voters/entities/voters-user-collection"),r=e("jira/viewissue/watchers-voters/views/voters-view"),t=e("jira/issue"),n=e("jira/ajs/layer/inline-layer"),s=e("aui/inline-dialog"),o=e("jquery"),c=s("#view-voter-list","voters",function(e,n,s){var a=o("#vote-toggle").next(".icon");a.addClass("loading");var u=new i(t.getIssueKey()),v=new r({collection:u}),l=u.fetch();l.done(function(){var i=v.render();e.html(i),e.find(".cancel").click(function(e){c.hide(),e.preventDefault()}),a.removeClass("loading"),s()}),u.on("errorOccurred",function(){c.hide()})},{width:240,useLiveEvents:!0,items:"#view-voters-list",preHideCallback:function(){return!n.current}});o(document).bind("keydown",function(e){27===e.keyCode&&s.current!==c&&c.is(":visible")&&(s.current&&s.current.hide(),c.hide())}),o(document).click(function(e){var i=s.current;i&&"voters"===i.id&&(o(e.target).closest("#inline-dialog-voters").length||i.hide())})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/watchers-voters/toggler.js' */
define("jira/viewissue/watchers-voters/toggler",["require"],function(t){var e=t("jira/components/analytics-tracker/tracker"),a=t("jira/ajs/ajax/smart-ajax"),o=t("jira/flag"),n=t("jquery"),s=t("wrm/context-path"),i=t("jira/util/formatter"),r=function(t,o,i,r,c){var u,f=o+"-on",g=o+"-off",d="/voters",x=t.next(".icon"),p="POST",v=t.hasClass(f)?"on":"off";t.hasClass(f)&&(p="DELETE"),o.indexOf("watch")!==-1&&(d="/watchers"),t.removeClass(f).removeClass(g),"POST"===p&&(u={dummy:!0}),e.trackEvent("viewissue."+o+"."+v,"click"),n(a.makeRequest({url:s()+"/rest/api/1.0/issues/"+t.attr("rel")+d,type:p,dataType:"json",data:u,contentType:"application/json",complete:function(e,a,o){var n="POST"===p;o.successful?(n?(t.addClass(f),t.text(c.titleOn),r.attr("title",c.titleOn).text(c.textOn)):(t.addClass(g),t.text(c.titleOff),r.attr("title",c.titleOff).text(c.textOff)),i.text(o.data.count),i[n?"addClass":"removeClass"](f),i[n?"removeClass":"addClass"](g)):(o.aborted||l(o),n?(t.addClass(g),t.text(c.titleOff),r.attr("title",c.titleOff).text(c.textOff)):(t.addClass(f),t.text(c.titleOn),r.attr("title",c.titleOn).text(c.textOn)))}})).throbber({target:x})},l=function(t){var e=a.buildSimpleErrorContent(t,{alert:!0});if(t.hasData){var n=JSON.parse(t.data);n.errorMessages&&(e=n.errorMessages[0])}o.showErrorMsg(e,{closeable:!0})};n(document).delegate("#toggle-vote-issue","click",function(t){t.preventDefault(),n("#vote-toggle").click()}),n(document).delegate("#toggle-watch-issue","click",function(t){t.preventDefault(),n("#watching-toggle").click()});var c=function(t){n("input[type=hidden][id|=error]").each(function(e,a){var o=a.id.replace("error-","");t[o]=a.value})};n(document).delegate("#vote-toggle","click",function(t){t.preventDefault();var e={titleOn:"Remove vote for this issue",titleOff:"Vote for this issue",textOn:"Remove vote",textOff:"Add vote",actionTextOff:"Vote",actionTextOn:"Voted"},a=n(this),o=n(document.querySelectorAll("#vote-data")),s=n(document.querySelectorAll("#toggle-vote-issue"));c(e),r(a,"vote-state",o,s,e)}),n(document).delegate("#watching-toggle","click",function(t){t.preventDefault();var e={titleOn:"Stop watching this issue",titleOff:"Start watching this issue",textOn:"Stop watching",textOff:"Watch issue",actionTextOff:"Watch",actionTextOn:"Watching"},a=n(this),o=n(document.querySelectorAll("#watcher-data")),s=n(document.querySelectorAll("#toggle-watch-issue"));c(e),r(a,"watch-state",o,s,e)})});;
;
/* module-key = 'jira.webresources:viewissue-watchers-and-voters', location = '/includes/jira/viewissue/initWatchersAndVoters.js' */
AJS.namespace("JIRA.VotersUsersCollection",null,require("jira/viewissue/watchers-voters/entities/voters-user-collection")),AJS.namespace("JIRA.WatchersUsersCollection",null,require("jira/viewissue/watchers-voters/entities/watchers-user-collection")),AJS.namespace("JIRA.VotersView",null,require("jira/viewissue/watchers-voters/views/voters-view")),AJS.namespace("JIRA.WatchersView",null,require("jira/viewissue/watchers-voters/views/watchers-view")),AJS.namespace("JIRA.WatchersNoBrowseView",null,require("jira/viewissue/watchers-voters/views/watchers-no-browse-view")),AJS.namespace("JIRA.WatchersReadOnly",null,require("jira/viewissue/watchers-voters/views/watchers-read-only-view"));;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/AnalyticsUtils.js' */
define("jira/viewissue/analytics-utils",["jira/util/data/meta","jira/issuenavigator/issue-navigator","jira/util/strings","wrm/context-path","jquery","exports"],function(n,t,e,i,r,s){function a(){return r(document.body).hasClass("navigator-issue-only")}function u(){return!!n.get("is-servicedesk-rendered")}function o(){return t.isNavigator()}function c(){return a()&&e.contains(location.search,"jql=")}function l(){return e.startsWith(location.pathname,i()+"/projects/")}s.context=function(){return c()?"fullscreen-issuenav":a()?"fullscreen":u()?"sd-queue":o()?"issuenav":l()?"project":"unknown"}});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/slideshow/slideshow-configuration.js' */
define("jira/viewissue/slideshow/slideshow-configuration",["jira/ajs/keyboardshortcut/keyboard-shortcut-toggle","jquery"],function(e,t){var i={type:"image",centerOnScroll:!0,onStart:e.disable,onClosed:e.enable},n="elastic";return t.extend({},i,{transitionIn:n,transitionOut:n})});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/element/image-wrap.js' */
define("jira/viewissue/element/image-wrap",["jira/fileviewer","jira/skate","jira/featureflags/feature-manager","underscore"],function(e,a,i,t){a("file-preview-type",{type:a.type.ATTRIBUTE,attached:t.debounce(function(){e.attachToElements()},0),detached:function(){e.closeViewer()}})});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/ajs/shorten/shortener.js' */
define("jira/ajs/shorten/shortener",["jira/util/formatter","jira/ajs/control","jira/data/local-storage","jquery"],function(t,e,i,n){return e.extend({_getDefaultOptions:function(){return{items:"a, span",numRows:1,shortenText:"hide",shortenOnInit:!0,persist:!0,expandButtonTooltip:"Click to view {0} more",collapseButtonTooltip:"Hide"}},init:function(t){"string"==typeof t&&(t={element:t}),t=t||{},this.options=n.extend(this._getDefaultOptions(),t),this._timerId=0,this.expanded=!1,this.$container=n(this.options.element),this._cleanupOldButtons(),this.$container.css("height","auto"),this._assignEvents("body",document.body),this._ready()},_isValid:function(){return!this.initialized&&this.$container.is(":visible")&&this.$container.children().length>0},_cleanupOldButtons:function(){this.$container.find("a.ellipsis.shortener-expand").remove(),this.$container.find("a.shortener-collapse").remove(),this.$container.find("br.shortener-expand-line-break").remove()},_ready:function(){this._isValid()&&(this.$items=this.$container.children(this.options.items),this.$expandButton=this._render("expandButton"),this.$collapseButton=this._render("collapseButton"),this._assignEvents("expand-button",".shortener-expand"),this._assignEvents("collapse-button",".shortener-collapse"),(!n.browser.msie||n.browser.version>="9")&&this._assignEvents("resize-region",window),this._isCollapsedOnInit()?this.collapse():this.expand(),this.initialized=!0)},_renders:{expandButton:function(){return n("<a href='#' class='ellipsis shortener-expand'></a>").attr("title",this.options.expandButtonTooltip).add("<br class='shortener-expand-line-break'>")},collapseButton:function(){return n("<a href='#' title='Hide' class='icon icon-hide shortener-collapse'></a>").append(n("<span>").text(this.options.collapseButtonTooltip))}},_events:{"expand-button":{click:function(t){t.currentTarget===this.$expandButton[0]&&(t.preventDefault(),this.expand(),this._saveState("expanded"))}},"collapse-button":{click:function(t){t.currentTarget===this.$collapseButton[0]&&(t.preventDefault(),this.collapse(),this._saveState("collapsed"),this.$container.scrollIntoView())}},"resize-region":{resize:function(){if(clearTimeout(this._timerId),!this.expanded){var t=this;this._timerId=setTimeout(function(){t.collapse()},400)}}},body:{tabSelect:function(){this._ready()}}},_saveState:function(t){try{i.setItem("AJS.Shortener#"+this.$container.closest("[id]").attr("id"),t)}catch(t){}},_loadState:function(){return i.getItem("AJS.Shortener#"+this.$container.closest("[id]").attr("id"))},_isCollapsedOnInit:function(){var t=this._loadState();return null!==t?"expanded"!==t:this.options.shortenOnInit},_removeButtons:function(){this.$expandButton.remove(),this.$collapseButton.remove()},_getOverflowIndex:function(){if(this.$items.length>1)for(var t=1,e=-1,i=0;i<this.$items.length;i++){var n=this.$items.eq(i).offset().left;if(n<=e&&(t++,t>this.options.numRows))return i;e=n}return-1},expand:function(){this._removeButtons(),this._getOverflowIndex()>0&&(this.$collapseButton=this._render("collapseButton"),this.$container.append(this.$collapseButton),this.$container.css("height","auto"),n.browser.msie&&n.browser.version<"9"&&n("body").toggleClass("reflow")),this.expanded=!0},collapse:function(){this._removeButtons();var e=this._getOverflowIndex();if(e>0){this.$container.css({position:"absolute",visibility:"hidden",width:this.$container[0].clientWidth+"px"});var i=this.$expandButton.first();do{var s=this.$items.length-e;i.text("("+s+")"),this.$expandButton.insertBefore(this.$items[e]),e--;var o=this.$items.eq(e).offset(),r=this.$expandButton.offset();if(o.left<r.left&&r.top<o.top+10)break}while(e>0);var a=e<this.$items.length-1?this.$items.eq(e+1).offset().top-this.$container.offset().top+"px":"auto";this.$container.css({height:a,position:"static",visibility:"visible",width:"auto"}),i.attr("title",t.format(this.options.expandButtonTooltip,s)),n.browser.msie&&n.browser.version<"9"&&n("body").toggleClass("reflow")}else this.$container.css("height","auto");this.expanded=!1}})});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/ajs/shorten/namespace.js' */
AJS.namespace("AJS.Shortener",null,require("jira/ajs/shorten/shortener"));;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jquery/plugins/shorten/shortener.js' */
define("jira/jquery/plugins/shorten/shorten",["jira/ajs/shorten/shortener","jquery"],function(n,e){e.fn.shorten=function(e){var r=[];return e=e||{},this.each(function(){e.element=this,r.push(new n(e))}),r}});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jquery/plugins/shorten/install.js' */
!function(){require("jira/jquery/plugins/shorten/shorten")}();;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/element/shorten.js' */
define("jira/viewissue/element/shorten",["jira/ajs/shorten/shortener","jira/skate"],function(e,t){return t("shorten",{type:t.type.CLASSNAME,attached:function(t){var n={};n.element=t,new e(n)}})});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/initToggleBlock.js' */
define("jira/viewissue/init-toggle-block",["jira/util/events","jira/util/events/types","jira/toggleblock/toggle-block"],function(e,t,i){new i({blockSelector:".toggle-wrap",triggerSelector:".issue-container .mod-header .toggle-title",storageCollectionName:"block-states"}),t.ISSUE_REFRESHED&&e.bind(t.ISSUE_REFRESHED,function(){t.REFRESH_TOGGLE_BLOCKS&&e.trigger(t.REFRESH_TOGGLE_BLOCKS)})});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/comment/comment-form.js' */
define("jira/viewissue/comment/comment-form",["jira/util/formatter","jira/util/events","jira/util/events/types","jira/ajs/ajax/smart-ajax","jira/issue","jira/dialog/form-dialog","wrm/context-path","jira/jquery/deferred","jquery"],function(e,t,i,n,r,o,s,a,m){var l=s(),d={setCaretAtEndOfCommentField:function(){var e,t=this.getField(),i=t[0];t.length&&(e=t.val().length,t.scrollTop(t.attr("scrollHeight")),i.setSelectionRange&&e>0&&i.setSelectionRange(e,e))},disable:function(){this.getForm().find("textarea").attr("readonly","readonly"),this.getForm().find("input[type=submit]").attr("disabled","disabled")},isDirty:function(){var e=this.getField();return!!e.length&&e[0].value!==e[0].defaultValue},handleBrowseAway:function(){if(d.isDirty()){var t=d.getForm(),i=t.length&&t.is(":visible");return i?"You have entered a comment on this issue. If you navigate away from this page without first saving, the comment will be lost.":void 0}},isVisibilityAvailble:function(){return"none"!=this.getForm().find("#commentLevel :selected").val()},setSubmitState:function(){m.trim(this.getField().val()).length>0&&this.isVisibilityAvailble()?this.getForm().find("#issue-comment-add-submit").removeAttr("disabled"):this.getForm().find("#issue-comment-add-submit").attr("disabled","disabled")},enable:function(){this.getForm().find("textarea").removeAttr("readonly"),this.getForm().find("input[type=submit]").removeAttr("disabled")},getCommentVisibility:function(){var e=this.getForm().find("#commentLevel :selected").val();if(e){var t=e.split(":");return{type:t[0],value:this.getForm().find("#commentLevel :selected").text()}}return null},ajaxSubmit:function(){var s=m('<span class="icon throbber loading"></span>'),u=r.getIssueId(),c=r.getIssueKey(),g=l+"/rest/api/2/issue/"+c+"/comment",f={body:this.getField()[0].value.replace(/\r?\n/g,"\r\n")},h=this.getCommentVisibility();h&&(f.visibility=h);var v=a(),b=m.ajax({url:g,type:"POST",contentType:"application/json",data:JSON.stringify(f),success:function(e){t.trigger(i.UNLOCK_PANEL_REFRESHING,["addcommentmodule"]),t.trigger(i.REFRESH_ISSUE_PAGE,[u,{complete:function(){var t="comment-"+e.id;m("#"+t).scrollIntoView({marginBottom:200,marginTop:200});var i=m("#issue_actions_container > .issue-data-block.focused");i.removeClass("focused");var n=m("#"+t);n.addClass("focused"),s.remove(),d.enable(),v.resolve()}}])},error:function(t){function i(t){var i="<h2>"+"Error"+'</h2><div class="ajaxerror"><div class="aui-message error"><span class="aui-icon icon-warning"/>'+t+"</div></div>";return m(i)}var r,a=m.parseJSON(t.responseText);r=a&&a.errors&&a.errors.comment?i(a.errors.comment):n.buildDialogErrorContent(t),new o({content:r}).show(),s.remove(),d.enable(),v.reject()}});return s.appendTo(this.getForm().find("input[type=submit]").parent()),m.when(b,v)},getForm:function(){var e=m("form#issue-comment-add");return 1===e.length&&(this.$form=e),this.$form||m()},getField:function(){return this.getForm().find("#comment")},getSubmitButton:function(){return this.getForm().find("#issue-comment-add-submit")},hide:function(e){e&&this.cancel(),this.getForm().detach(),i.UNLOCK_PANEL_REFRESHING&&t.trigger(i.UNLOCK_PANEL_REFRESHING,["addcommentmodule"])},show:function(){this.focus(),i.LOCK_PANEL_REFRESHING&&t.trigger(i.LOCK_PANEL_REFRESHING,["addcommentmodule"])},focus:function(){this.focusField(),this.setCaretAtEndOfCommentField()},focusField:function(){this.getField().focus().trigger("keyup"),this.getSubmitButton().scrollIntoView({marginBottom:200})},showNoCommentMsg:function(e){if(""===this.getField().val())return m("#emptyCommentErrMsg").show(),!0},cancel:function(){var e=this;setTimeout(function(){e.getField().val("")},100),m("#comment-preview_link.selected").click()}};return d});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/comment/footer-comment.js' */
define("jira/viewissue/comment/footer-comment",["jira/viewissue/comment/comment-form","jquery"],function(e,t){var i=!1,n=!1,o={getModule:function(){return t("#addcomment")},isActive:function(){return this.getModule().hasClass("active")},hide:function(t){if(this.isActive()){var o=e.handleBrowseAway();(n||i||!o||confirm(o))&&(this.getModule().removeClass("active"),e.hide(t))}},ajaxSubmit:function(){i=!0,e.ajaxSubmit().then(function(){o.hide(!0)})},show:function(){this.isActive()?e.focusField():(i=!1,this.getModule().addClass("active"),this.appendForm(),e.show())},appendForm:function(){this.getModule().find(".mod-content").append(e.getForm())}};return o.setPreviewMode=function(e){n=Boolean(e)},o});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/init-comment-areas.js' */
define("jira/viewissue/init-comment-areas",["require"],function(e){var t=e("jira/viewissue/comment/comment-form"),n=e("jira/viewissue/comment/footer-comment"),i=e("jira/issue"),o=e("jquery"),a=e("jira/libs/parse-uri"),m=window.onbeforeunload,u={};u.openFooterComment=function(){n.show(),t.getForm().find("#commentLevel").bind("change",function(){t.setSubmitState()}),t.setSubmitState()},o(document).delegate("#addcomment #issue-comment-add","submit",function(e){n.ajaxSubmit(),e.preventDefault()}).delegate(".issue-header #comment-issue","click",function(e){n.show(),e.preventDefault()}).delegate("#footer-comment-button","click",function(e){u.openFooterComment(),e.preventDefault()}).delegate("#addcomment .cancel","click",function(e){e.preventDefault(),n.hide(!0)}).delegate("#issue-comment-add","submit",function(){window.setTimeout(function(){t.disable()},0)}).delegate("#issue-comment-add #comment","input",function(){t.setSubmitState()}).delegate("#issue-comment-add input[type='submit']","click",function(e){t.showNoCommentMsg()&&e.preventDefault()}).bind("showWikiInput",function(){n.setPreviewMode(!1);var e=t.getField();e.is(":visible:enabled")&&(i.getStalker().trigger("stalkerHeightUpdated"),e.length>0&&e.focus(),t.setCaretAtEndOfCommentField())}).bind("showWikiPreview",function(){n.setPreviewMode(!0),i.getStalker().trigger("stalkerHeightUpdated")}),window.onbeforeunload=function(){var e=void 0;return o.isFunction(m)&&(e=m.apply(this,arguments)),e||t.handleBrowseAway.apply(this,arguments)},o(function(){"add-comment"===a(window.location.href).anchor&&u.openFooterComment()})});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/invoke-comment-trigger.js' */
define("jira/viewissue/invoke-comment-trigger",["jquery"],function(e){return function(){var i=e(".add-issue-comment");if(0!==i.length){var r=i.filter(".toolbar-trigger");r.length>0?r.click():i.click()}}});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/namespace.js' */
AJS.namespace("JIRA.Issue.CommentForm",null,require("jira/viewissue/comment/comment-form")),AJS.namespace("JIRA.Issue.getDirtyCommentWarning",null,require("jira/viewissue/comment/comment-form").handleBrowseAway),AJS.namespace("JIRA.Issue.invokeCommentTrigger",null,require("jira/viewissue/invoke-comment-trigger"));;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/initCustomFieldTabs.js' */
define("jira/viewissue/init-custom-field-tabs",["jira/util/logger","jira/util/events","jira/util/events/types","aui/tabs","jquery"],function(t,i,e,n,a){var r="#customfieldmodule",l=function(i){var e;"string"!=typeof i&&i.length>0||("#"!==i[0]&&(i="#"+i),t.log("activating tab",i),e=a("a[href='"+i+"']",r),e.length&&n.change(e))},u=function(t){var i=a(t.target).closest(".tabs-pane");i.length>0&&l(i.attr("id"))};a(function(){e.NEW_CONTENT_ADDED&&i.bind(e.NEW_CONTENT_ADDED,function(t,i){var e=i.find(r);e.unbind("reveal"),e.bind("reveal",u),n.setup()}),e.PANEL_REFRESHED&&i.bind(e.PANEL_REFRESHED,function(t,i,e,n){if("details-module"===i){var a=n.find(r).find(".active-tab");1===a.length&&l(a.find("a").attr("href"))}}),a(r).bind("reveal",u)})});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/initSubtaskTimeLogging.js' */
define("jira/viewissue/init-subtask-time-logging",["jquery"],function(i){i(document).delegate("#tt_include_subtasks input","click",function(t){i(this).is(":checked")?(i("#tt_info_single").hide(),i("#tt_info_aggregate").show()):(i("#tt_info_aggregate").hide(),i("#tt_info_single").show())})});;
;
/* module-key = 'jira.webresources:viewissue', location = 'includes/jira/viewissue/ViewIssueTabs.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.Issue&&(JIRA.Templates.Issue={}),"undefined"==typeof JIRA.Templates.Issue.Tabs&&(JIRA.Templates.Issue.Tabs={}),JIRA.Templates.Issue.Tabs.label=function(e,s){return"<strong>"+soy.$$escapeHtml(e.text)+"</strong>"},JIRA.Templates.Issue.Tabs.tab=function(e,s){return'<a id="'+soy.$$escapeHtml(e.id)+'" href="'+soy.$$escapeHtml(e.href)+'" class="'+soy.$$escapeHtml(e.linkClass)+'">'+JIRA.Templates.Issue.Tabs.label(e)+"</a>"};;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/ViewIssueTabsAnalytics.js' */
define("jira/viewissue/tabs/analytics",["jquery","jira/analytics","jira/util/strings","jira/viewissue/analytics-utils","jira/components/analytics-tracker/tracker","underscore"],function(e,t,a,n,i,s){function r(e){return m.indexOf(e)>-1?e:a.hashCode(e)}function c(e){return{tab:r(e.attr("data-key")),tabPosition:e.index()}}function l(e,t){return{inNewWindow:e,keyboard:t,context:n.context()}}function o(e){var t=e.attr("id");return!!t&&/\d+_thumb/.test(t)}function u(e){return e.hasClass("issue-link")?"issue":e.hasClass("external-link")?"external":o(e)?"attachment":"unknown"}function d(e,t,a,n){var r=e.closest(".mod-content").find("#issue-tabs li.active"),o=l(a,n);s.extend(o,c(r)),s.extend(o,{linkType:t}),i.trackEvent("viewissue","tab.link.clicked",o)}var m=["com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel","com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel","com.atlassian.jira.plugin.system.issuetabpanels:worklog-tabpanel","com.atlassian.jira.plugin.system.issuetabpanels:changehistory-tabpanel","com.atlassian.streams.streams-jira-plugin:activity-stream-issue-tab"];return{tabClicked:function(e,a,n){var r=e.parent(),o=s.extend({},l(a,n),c(r));t.send({name:"jira.viewissue.tab.clicked",data:o}),i.trackEvent("viewissue","tab.clicked",o)},buttonClicked:function(e,a,n){if(e.is("[data-tab-sort]")){var i=e.data("order"),r=e.parents(".tabwrap").find("li.active");t.send({name:"jira.viewissue.tabsort.clicked",data:s.extend({},l(a,n),c(r),{order:i})})}},permalinkClicked:function(e,t){i.trackEvent("viewissue","comment.permalink.click",{commentId:e,keyboard:t})},permalinkContextMenuOpened:function(e,t){i.trackEvent("viewissue","comment.permalink.contextmenu.opened",{commentId:e,keyboard:t})},tabItemDetailsLinkClicked:function(e,t,a){d(e,"profile",t,a)},tabItemBodyLinkClicked:function(e,t,a){d(e,u(e),t,a)}}});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/ViewIssueTabs.js' */
define("jira/viewissue/tabs",["jira/util/logger","jira/util/formatter","jquery","jira/jquery/deferred","jira/util/data/meta","jira/dialog/form-dialog","jira/ajs/ajax/smart-ajax","jira/userhover/userhover","jira/viewissue/tabs/analytics","jira/featureflags/feature-manager"],function(e,t,i,a,n,r,s,o,u,c){function l(e){e=e||document,i.each(M,function(t,i){i(e)})}function f(e){var t=i(e).find(".issuePanelWrapper"),a=i(e).find("#issue_actions_container");L=a.length?a:L,q=t.length?t:q}function d(e,t){var i=new r({id:"issue-tab-error-dialog",widthClass:"small",content:s.buildDialogErrorContent(e,!1)});h(t),L.show(),i.show()}function h(e){i("#issue-tabs li").each(function(){var t=i(this),a=t.data("key"),n=t.data("label");if(a==e)t.addClass("active"),t.html(R.label({text:n}));else{t.removeClass("active");var r=t.data("id"),s=t.data("href");t.html(R.tab({id:r,href:s,linkClass:J,text:n}))}}),k(i("#issue-tabs"))}function v(e){h(e)}function m(e,t){var i=e.pageX,a=e.pageY,n=t.offset(),r=t.outerWidth(),s=t.outerHeight();return 0==i&&0==a||!(i>=n.left&&i<=n.left+r&&a>=n.top&&a<=n.top+s)}function p(){var e=i("#issue_actions_container");b(e,"action-details","viewIssueTabDetailsLink",u.tabItemDetailsLinkClicked),b(e,"action-body","viewIssueTabBodyLink",u.tabItemBodyLinkClicked)}function b(e,t,a,n){var r="."+t+" a";e.find(r).off("click."+a).on("click."+a,function(e){var t=i(this),a=e.metaKey,r=m(e,t);n(t,a,r)})}function g(){var e=i('[id^="permlink_comment"]');e.off("click").on("click",function(e){var t=y(e.target),a=i(this),n=m(e,a);u.permalinkClicked(t,n)}),e.off("contextmenu").on("contextmenu",function(e){var t=y(e.target),a=i(this),n=m(e,a);u.permalinkContextMenuOpened(t,n)})}function y(e){var t=i(e).closest('[id^="permlink_comment"]').attr("id"),a=t.split("_").pop();return a}function k(e){var t=i(e).find("li.active").data("key");i(e).find(H).off("click.viewIssueTabs").on("click.viewIssueTabs",function(e){var a=i(this),n=m(e,a),r=a.parent().data("key"),s=e.metaKey;r?u.tabClicked(a,s,n):u.buttonClicked(a,s,n),s||(e.preventDefault(),r&&v(r),j(t,a.attr("href")).done(function(e){n&&(r?e.find("#"+a.attr("id")+" > :first-child").focus():e.find(".sortwrap  > :first-child").focus())}).done(l))})}function j(t,r){var o=a();D&&D.abort(),E&&(F=n.get("viewissue-use-history-api")!==!1);var u=s.makeRequest({jqueryAjaxFn:F?i.pjax:i.ajax,headers:{"X-PJAX":!0},container:S,url:r,timeout:null,complete:function(a,n,r){if("abort"!=n){if(D=null,!r.successful)return void((r.status<300||r.status>=400)&&d(r,t));var s=i(this.container),u=document.createElement("div");u.innerHTML=r.data;var c=document.createDocumentFragment().appendChild(u);F||w(s,c),e.trace("jira.issue.tab.loaded"),o.resolve(s)}}});return i(u).throbber({target:q}),D=u,o}function w(e,t){var a=t.querySelectorAll(".tabwrap"),n=e.find(".tabwrap"),r=i(t.querySelectorAll("#issue_actions_container")).contents(),s=L.contents();if(a.length&&n.length&&r.length&&s.length){n.replaceWith(a),L.stop(!0,!0);var o=L.height();L.append(r);var u=L.height()-o,c=o-u;c>0?(L.css("height",u+c),s.remove(),x(u,c)):L.empty().append(r),i(t.querySelectorAll("script")).each(function(){i.globalEval(this.text||this.textContent||this.innerHTML||"")})}else e.empty().append(t)}function x(e,t){var i=150,a=800,n=t/a*1e3;setTimeout(function(){L.animate({height:e+1},n,"easeOutQuart",function(){L.css("height","auto")})},i)}function C(e){i(e).find(H).each(function(){var e=i(this);e.attr("href",e.attr("href")+"#issue-tabs")})}function T(e){E&&(F=n.get("viewissue-use-history-api")!==!1),!F||i.support.pjax?k(e):C(e)}function I(e){i(e).bind("moveToFinished",function(e,t){i("a.twixi:visible",t).focus()})}function A(e){e.find("time.livestamp").livestamp()}function _(e){i.inArray(e,M)<0&&M.push(e)}var q,L,D,R=JIRA.Templates.Issue.Tabs,E=c.isFeatureEnabled("empanada.gin-in-spa"),F=n.get("viewissue-use-history-api")!==!1,J="ajax-activity-content",S="#activitymodule div.mod-content",H=t.format("a.{0}",J),M=[];return _(f),_(T),_(I),_(o),_(A),_(p),_(g),{onTabReady:_,domReady:l}}),AJS.namespace("JIRA.ViewIssueTabs",null,require("jira/viewissue/tabs"));;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/initViewIssueTabs.js' */
define("jira/viewissue/init-view-issue-tabs",["require"],function(i){var e=i("jquery"),n=i("jira/util/events"),s=i("jira/util/events/types"),t=i("jira/viewissue/tabs");e(function(){s.PANEL_REFRESHED&&n.bind(s.PANEL_REFRESHED,function(i,e,n,s){if("activitymodule"===e){var t=s.find("#issue_actions_container > .issue-data-block.focused");1===t.length&&n.find("#"+t.attr("id")).addClass("focused")}})}),n.bind(s.NEW_CONTENT_ADDED,function(i,e){t.domReady(e)})});;
;
/* module-key = 'jira.webresources:viewissue', location = '/includes/jira/viewissue/initViewissue.js' */
require(["jira/viewissue/element/shorten","jira/viewissue/element/image-wrap","jira/viewissue/watchers-voters/watchers","jira/viewissue/watchers-voters/voters","jira/viewissue/watchers-voters/toggler","jira/viewissue/init-comment-areas","jira/viewissue/init-subtask-time-logging","jira/viewissue/init-toggle-block","jira/viewissue/init-custom-field-tabs","jira/viewissue/init-view-issue-tabs"],function(){});;
;
/* module-key = 'com.atlassian.plugin.jslibs:marionette-1.4.1-factory', location = 'factories/marionette/1.4.1/marionette-1.4.1-factory.js' */
(function(e){define("atlassian/libs/factories/marionette-1.4.1",function(){return function(d,k){var g=k.Marionette;e.call({_:d,Backbone:k});var h=k.Marionette;h.VERSION="1.4.1";k.Marionette=g;return h}})})(function(){var e=this.Backbone,d=this._,k=function(a){this._views={};this._indexByModel={};this._indexByCustom={};this._updateLength();d.each(a,this.add,this)};d.extend(k.prototype,{add:function(a,b){var f=a.cid;this._views[f]=a;a.model&&(this._indexByModel[a.model.cid]=f);b&&(this._indexByCustom[b]=
f);this._updateLength()},findByModel:function(a){return this.findByModelCid(a.cid)},findByModelCid:function(a){return this.findByCid(this._indexByModel[a])},findByCustom:function(a){return this.findByCid(this._indexByCustom[a])},findByIndex:function(a){return d.values(this._views)[a]},findByCid:function(a){return this._views[a]},remove:function(a){var b=a.cid;a.model&&delete this._indexByModel[a.model.cid];d.any(this._indexByCustom,function(a,c){if(a===b)return delete this._indexByCustom[c],!0},this);
delete this._views[b];this._updateLength()},call:function(a){this.apply(a,d.tail(arguments))},apply:function(a,b){d.each(this._views,function(f){d.isFunction(f[a])&&f[a].apply(f,b||[])})},_updateLength:function(){this.length=d.size(this._views)}});d.each("forEach each map find detect filter select reject every all some any include contains invoke toArray first initial rest last without isEmpty pluck".split(" "),function(a){k.prototype[a]=function(){var b=[d.values(this._views)].concat(d.toArray(arguments));
return d[a].apply(d,b)}});var g={},h=function(a){this.options=a;this._wreqrHandlers={};d.isFunction(this.initialize)&&this.initialize(a)};h.extend=e.Model.extend;d.extend(h.prototype,e.Events,{setHandlers:function(a){d.each(a,function(a,f){var c=null;d.isObject(a)&&!d.isFunction(a)&&(c=a.context,a=a.callback);this.setHandler(f,a,c)},this)},setHandler:function(a,b,f){this._wreqrHandlers[a]={callback:b,context:f};this.trigger("handler:add",a,b,f)},hasHandler:function(a){return!!this._wreqrHandlers[a]},
getHandler:function(a){var b=this._wreqrHandlers[a];if(!b)throw Error("Handler not found for '"+a+"'");return function(){var a=Array.prototype.slice.apply(arguments);return b.callback.apply(b.context,a)}},removeHandler:function(a){delete this._wreqrHandlers[a]},removeAllHandlers:function(){this._wreqrHandlers={}}});g.Handlers=h;h=function(a){this.options=a;this._commands={};d.isFunction(this.initialize)&&this.initialize(a)};d.extend(h.prototype,e.Events,{getCommands:function(a){var b=this._commands[a];
b||(b={command:a,instances:[]},this._commands[a]=b);return b},addCommand:function(a,b){this.getCommands(a).instances.push(b)},clearCommands:function(a){this.getCommands(a).instances=[]}});g.CommandStorage=h;h=g.Handlers.extend({storageType:g.CommandStorage,constructor:function(a){this.options=a||{};this._initializeStorage(this.options);this.on("handler:add",this._executeCommands,this);var b=Array.prototype.slice.call(arguments);g.Handlers.prototype.constructor.apply(this,b)},execute:function(a,b){a=
arguments[0];b=Array.prototype.slice.call(arguments,1);this.hasHandler(a)?this.getHandler(a).apply(this,b):this.storage.addCommand(a,b)},_executeCommands:function(a,b,f){var c=this.storage.getCommands(a);d.each(c.instances,function(a){b.apply(f,a)});this.storage.clearCommands(a)},_initializeStorage:function(a){a=a.storageType||this.storageType;this.storage=d.isFunction(a)?new a:a}});g.Commands=h;g.RequestResponse=g.Handlers.extend({request:function(){var a=arguments[0],b=Array.prototype.slice.call(arguments,
1);return this.getHandler(a).apply(this,b)}});h=function(){};h.extend=e.Model.extend;d.extend(h.prototype,e.Events);g.EventAggregator=h;var l=function(a,b){var f=Error(a);f.name=b||"Error";throw f;},c={};e.Marionette=c;c.$=e.$;var i=Array.prototype.slice;c.extend=e.Model.extend;c.getOption=function(a,b){if(a&&b)return a.options&&b in a.options&&void 0!==a.options[b]?a.options[b]:a[b]};var p=function(a,b,f){return f.toUpperCase()},q=/(^|:)(\w)/gi;c.triggerMethod=function(a){var b=this["on"+a.replace(q,
p)];d.isFunction(this.trigger)&&this.trigger.apply(this,arguments);if(d.isFunction(b))return b.apply(this,d.tail(arguments))};var m=function(a){a._isShown&&a._isRendered&&d.isFunction(a.triggerMethod)&&a.triggerMethod("dom:refresh")};c.MonitorDOMRefresh=function(a){a.listenTo(a,"show",function(){a._isShown=!0;m(a)});a.listenTo(a,"render",function(){a._isRendered=!0;m(a)})};var r=function(a,b,f,c){c=c.split(/\s+/);d.each(c,function(c){var d=a[c];d||l("Method '"+c+"' was configured as an event handler, but does not exist.");
a.listenTo(b,f,d,a)})},s=function(a,b,c,d){a.listenTo(b,c,d,a)},t=function(a,b,c,j){j=j.split(/\s+/);d.each(j,function(d){a.stopListening(b,c,a[d],a)})},u=function(a,b,c,d){a.stopListening(b,c,d,a)},n=function(a,b,c,j,e){b&&c&&(d.isFunction(c)&&(c=c.call(a)),d.each(c,function(c,f){d.isFunction(c)?j(a,b,f,c):e(a,b,f,c)}))};c.bindEntityEvents=function(a,b,c){n(a,b,c,s,r)};c.unbindEntityEvents=function(a,b,c){n(a,b,c,u,t)};c.Callbacks=function(){this._deferred=c.$.Deferred();this._callbacks=[]};d.extend(c.Callbacks.prototype,
{add:function(a,b){this._callbacks.push({cb:a,ctx:b});this._deferred.done(function(c,d){b&&(c=b);a.call(c,d)})},run:function(a,b){this._deferred.resolve(b,a)},reset:function(){var a=this._callbacks;this._deferred=c.$.Deferred();this._callbacks=[];d.each(a,function(a){this.add(a.cb,a.ctx)},this)}});c.Controller=function(a){this.triggerMethod=c.triggerMethod;this.options=a||{};d.isFunction(this.initialize)&&this.initialize(this.options)};c.Controller.extend=c.extend;d.extend(c.Controller.prototype,
e.Events,{close:function(){this.stopListening();this.triggerMethod("close");this.unbind()}});c.Region=function(a){this.options=a||{};this.el=c.getOption(this,"el");if(!this.el){var b=Error("An 'el' must be specified for a region.");b.name="NoElError";throw b;}this.initialize&&(b=Array.prototype.slice.apply(arguments),this.initialize.apply(this,b))};d.extend(c.Region,{buildRegion:function(a,b){var c="string"===typeof a,j="string"===typeof a.selector,e="undefined"===typeof a.regionType,g="function"===
typeof a;if(!g&&!c&&!j)throw Error("Region must be specified as a Region type, a selector string or an object with selector property");var h,i;c&&(h=a);a.selector&&(h=a.selector);g&&(i=a);!g&&e&&(i=b);a.regionType&&(i=a.regionType);c=new i({el:h});a.parentEl&&(c.getEl=function(b){var c=a.parentEl;d.isFunction(c)&&(c=c());return c.find(b)});return c}});d.extend(c.Region.prototype,e.Events,{show:function(a){this.ensureEl();var b=a.isClosed||d.isUndefined(a.$el),f=a!==this.currentView;f&&this.close();
a.render();(f||b)&&this.open(a);this.currentView=a;c.triggerMethod.call(this,"show",a);c.triggerMethod.call(a,"show")},ensureEl:function(){if(!this.$el||0===this.$el.length)this.$el=this.getEl(this.el)},getEl:function(a){return c.$(a)},open:function(a){this.$el.empty().append(a.el)},close:function(){var a=this.currentView;a&&!a.isClosed&&(a.close?a.close():a.remove&&a.remove(),c.triggerMethod.call(this,"close"),delete this.currentView)},attachView:function(a){this.currentView=a},reset:function(){this.close();
delete this.$el}});c.Region.extend=c.extend;var o=c.Controller.extend({constructor:function(a){this._regions={};c.Controller.prototype.constructor.call(this,a)},addRegions:function(a,b){var c={};d.each(a,function(a,e){"string"===typeof a&&(a={selector:a});a.selector&&(a=d.defaults({},a,b));var g=this.addRegion(e,a);c[e]=g},this);return c},addRegion:function(a,b){var f;f=d.isObject(b);var j=d.isString(b),e=!!b.selector;f=j||f&&e?c.Region.buildRegion(b,c.Region):d.isFunction(b)?c.Region.buildRegion(b,
c.Region):b;this._store(a,f);this.triggerMethod("region:add",a,f);return f},get:function(a){return this._regions[a]},removeRegion:function(a){this._remove(a,this._regions[a])},removeRegions:function(){d.each(this._regions,function(a,b){this._remove(b,a)},this)},closeRegions:function(){d.each(this._regions,function(a){a.close()},this)},close:function(){this.removeRegions();var a=Array.prototype.slice.call(arguments);c.Controller.prototype.close.apply(this,a)},_store:function(a,b){this._regions[a]=
b;this._setLength()},_remove:function(a,b){b.close();delete this._regions[a];this._setLength();this.triggerMethod("region:remove",a,b)},_setLength:function(){this.length=d.size(this._regions)}});d.each("forEach each map find detect filter select reject every all some any include contains invoke toArray first initial rest last without isEmpty pluck".split(" "),function(a){o.prototype[a]=function(){var b=[d.values(this._regions)].concat(d.toArray(arguments));return d[a].apply(d,b)}});c.RegionManager=
o;c.TemplateCache=function(a){this.templateId=a};d.extend(c.TemplateCache,{templateCaches:{},get:function(a){var b=this.templateCaches[a];b||(b=new c.TemplateCache(a),this.templateCaches[a]=b);return b.load()},clear:function(){var a,b=i.call(arguments),c=b.length;if(0<c)for(a=0;a<c;a++)delete this.templateCaches[b[a]];else this.templateCaches={}}});d.extend(c.TemplateCache.prototype,{load:function(){if(this.compiledTemplate)return this.compiledTemplate;var a=this.loadTemplate(this.templateId);return this.compiledTemplate=
this.compileTemplate(a)},loadTemplate:function(a){var b=c.$(a).html();(!b||0===b.length)&&l("Could not find template: '"+a+"'","NoTemplateError");return b},compileTemplate:function(a){return d.template(a)}});c.Renderer={render:function(a,b){if(!a){var d=Error("Cannot render the template since it's false, null or undefined.");d.name="TemplateNotFoundError";throw d;}return("function"===typeof a?a:c.TemplateCache.get(a))(b)}};c.View=e.View.extend({constructor:function(a){d.bindAll(this,"render");var b=
Array.prototype.slice.apply(arguments);this.options=d.extend({},this.options,a);this.events=this.normalizeUIKeys(d.result(this,"events"));e.View.prototype.constructor.apply(this,b);c.MonitorDOMRefresh(this);this.listenTo(this,"show",this.onShowCalled,this)},triggerMethod:c.triggerMethod,getTemplate:function(){return c.getOption(this,"template")},mixinTemplateHelpers:function(a){var a=a||{},b=c.getOption(this,"templateHelpers");d.isFunction(b)&&(b=b.call(this));return d.extend(a,b)},normalizeUIKeys:function(a){if("undefined"!==
typeof a)return d.each(d.keys(a),function(b){var c=b.split("@ui.");2===c.length&&(a[c[0]+this.ui[c[1]]]=a[b],delete a[b])},this),a},configureTriggers:function(){if(this.triggers){var a={},b=this.normalizeUIKeys(d.result(this,"triggers"));d.each(b,function(b,c){var e=d.isObject(b),g=e?b.event:b;a[c]=function(a){if(a){var c=a.preventDefault,d=a.stopPropagation,j=e?b.stopPropagation:d;(e?b.preventDefault:c)&&c&&c.apply(a);j&&d&&d.apply(a)}this.triggerMethod(g,{view:this,model:this.model,collection:this.collection})}},
this);return a}},delegateEvents:function(a){this._delegateDOMEvents(a);c.bindEntityEvents(this,this.model,c.getOption(this,"modelEvents"));c.bindEntityEvents(this,this.collection,c.getOption(this,"collectionEvents"))},_delegateDOMEvents:function(a){a=a||this.events;d.isFunction(a)&&(a=a.call(this));var b={},c=this.configureTriggers();d.extend(b,a,c);e.View.prototype.delegateEvents.call(this,b)},undelegateEvents:function(){var a=Array.prototype.slice.call(arguments);e.View.prototype.undelegateEvents.apply(this,
a);c.unbindEntityEvents(this,this.model,c.getOption(this,"modelEvents"));c.unbindEntityEvents(this,this.collection,c.getOption(this,"collectionEvents"))},onShowCalled:function(){},close:function(){!this.isClosed&&!1!==this.triggerMethod("before:close")&&(this.isClosed=!0,this.triggerMethod("close"),this.unbindUIElements(),this.remove())},bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var a=d.result(this,"_uiBindings");this.ui={};d.each(d.keys(a),function(b){this.ui[b]=
this.$(a[b])},this)}},unbindUIElements:function(){this.ui&&this._uiBindings&&(d.each(this.ui,function(a,b){delete this.ui[b]},this),this.ui=this._uiBindings,delete this._uiBindings)}});c.ItemView=c.View.extend({constructor:function(){c.View.prototype.constructor.apply(this,i.call(arguments))},serializeData:function(){var a={};this.model?a=this.model.toJSON():this.collection&&(a={items:this.collection.toJSON()});return a},render:function(){this.isClosed=!1;this.triggerMethod("before:render",this);
this.triggerMethod("item:before:render",this);var a=this.serializeData(),a=this.mixinTemplateHelpers(a),b=this.getTemplate(),a=c.Renderer.render(b,a);this.$el.html(a);this.bindUIElements();this.triggerMethod("render",this);this.triggerMethod("item:rendered",this);return this},close:function(){this.isClosed||(this.triggerMethod("item:before:close"),c.View.prototype.close.apply(this,i.call(arguments)),this.triggerMethod("item:closed"))}});c.CollectionView=c.View.extend({itemViewEventPrefix:"itemview",
constructor:function(a){this._initChildViewStorage();c.View.prototype.constructor.apply(this,i.call(arguments));this._initialEvents();this.initRenderBuffer()},initRenderBuffer:function(){this.elBuffer=document.createDocumentFragment()},startBuffering:function(){this.initRenderBuffer();this.isBuffering=!0},endBuffering:function(){this.appendBuffer(this,this.elBuffer);this.initRenderBuffer();this.isBuffering=!1},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView,
this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this.render,this))},addChildView:function(a){this.closeEmptyView();var b=this.getItemView(a),c=this.collection.indexOf(a);this.addItemView(a,b,c)},onShowCalled:function(){this.children.each(function(a){c.triggerMethod.call(a,"show")})},triggerBeforeRender:function(){this.triggerMethod("before:render",this);this.triggerMethod("collection:before:render",this)},triggerRendered:function(){this.triggerMethod("render",
this);this.triggerMethod("collection:rendered",this)},render:function(){this.isClosed=!1;this.triggerBeforeRender();this._renderChildren();this.triggerRendered();return this},_renderChildren:function(){this.startBuffering();this.closeEmptyView();this.closeChildren();this.collection&&0<this.collection.length?this.showCollection():this.showEmptyView();this.endBuffering()},showCollection:function(){var a;this.collection.each(function(b,c){a=this.getItemView(b);this.addItemView(b,a,c)},this)},showEmptyView:function(){var a=
this.getEmptyView();if(a&&!this._showingEmptyView){this._showingEmptyView=!0;var b=new e.Model;this.addItemView(b,a,0)}},closeEmptyView:function(){this._showingEmptyView&&(this.closeChildren(),delete this._showingEmptyView)},getEmptyView:function(){return c.getOption(this,"emptyView")},getItemView:function(){var a=c.getOption(this,"itemView");a||l("An `itemView` must be specified","NoItemViewError");return a},addItemView:function(a,b,f){var e=c.getOption(this,"itemViewOptions");d.isFunction(e)&&(e=
e.call(this,a,f));a=this.buildItemView(a,b,e);this.addChildViewEventForwarding(a);this.triggerMethod("before:item:added",a);this.children.add(a);this.renderItemView(a,f);this._isShown&&c.triggerMethod.call(a,"show");this.triggerMethod("after:item:added",a)},addChildViewEventForwarding:function(a){var b=c.getOption(this,"itemViewEventPrefix");this.listenTo(a,"all",function(){var d=i.call(arguments);d[0]=b+":"+d[0];d.splice(1,0,a);c.triggerMethod.apply(this,d)},this)},renderItemView:function(a,b){a.render();
this.appendHtml(this,a,b)},buildItemView:function(a,b,c){a=d.extend({model:a},c);return new b(a)},removeItemView:function(a){a=this.children.findByModel(a);this.removeChildView(a);this.checkEmpty()},removeChildView:function(a){a&&(this.stopListening(a),a.close?a.close():a.remove&&a.remove(),this.children.remove(a));this.triggerMethod("item:removed",a)},checkEmpty:function(){(!this.collection||0===this.collection.length)&&this.showEmptyView()},appendBuffer:function(a,b){a.$el.append(b)},appendHtml:function(a,
b){a.isBuffering?a.elBuffer.appendChild(b.el):a.$el.append(b.el)},_initChildViewStorage:function(){this.children=new k},close:function(){this.isClosed||(this.triggerMethod("collection:before:close"),this.closeChildren(),this.triggerMethod("collection:closed"),c.View.prototype.close.apply(this,i.call(arguments)))},closeChildren:function(){this.children.each(function(a){this.removeChildView(a)},this);this.checkEmpty()}});c.CompositeView=c.CollectionView.extend({constructor:function(){c.CollectionView.prototype.constructor.apply(this,
i.call(arguments))},_initialEvents:function(){this.once("render",function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView,this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this._renderChildren,this))})},getItemView:function(){var a=c.getOption(this,"itemView")||this.constructor;a||l("An `itemView` must be specified","NoItemViewError");return a},serializeData:function(){var a={};this.model&&(a=this.model.toJSON());
return a},render:function(){this.isRendered=!0;this.isClosed=!1;this.resetItemViewContainer();this.triggerBeforeRender();var a=this.renderModel();this.$el.html(a);this.bindUIElements();this.triggerMethod("composite:model:rendered");this._renderChildren();this.triggerMethod("composite:rendered");this.triggerRendered();return this},_renderChildren:function(){this.isRendered&&(c.CollectionView.prototype._renderChildren.call(this),this.triggerMethod("composite:collection:rendered"))},renderModel:function(){var a=
{},a=this.serializeData(),a=this.mixinTemplateHelpers(a),b=this.getTemplate();return c.Renderer.render(b,a)},appendBuffer:function(a,b){this.getItemViewContainer(a).append(b)},appendHtml:function(a,b){a.isBuffering?a.elBuffer.appendChild(b.el):this.getItemViewContainer(a).append(b.el)},getItemViewContainer:function(a){if("$itemViewContainer"in a)return a.$itemViewContainer;var b;(b=c.getOption(a,"itemViewContainer"))?(b=d.isFunction(b)?b():b,b=a.$(b),0>=b.length&&l("The specified `itemViewContainer` was not found: "+
a.itemViewContainer,"ItemViewContainerMissingError")):b=a.$el;return a.$itemViewContainer=b},resetItemViewContainer:function(){this.$itemViewContainer&&delete this.$itemViewContainer}});c.Layout=c.ItemView.extend({regionType:c.Region,constructor:function(a){a=a||{};this._firstRender=!0;this._initializeRegions(a);c.ItemView.prototype.constructor.call(this,a)},render:function(){this.isClosed&&this._initializeRegions();this._firstRender?this._firstRender=!1:this.isClosed||this._reInitializeRegions();
var a=Array.prototype.slice.apply(arguments);return c.ItemView.prototype.render.apply(this,a)},close:function(){if(!this.isClosed){this.regionManager.close();var a=Array.prototype.slice.apply(arguments);c.ItemView.prototype.close.apply(this,a)}},addRegion:function(a,b){var c={};c[a]=b;return this._buildRegions(c)[a]},addRegions:function(a){this.regions=d.extend({},this.regions,a);return this._buildRegions(a)},removeRegion:function(a){delete this.regions[a];return this.regionManager.removeRegion(a)},
_buildRegions:function(a){var b=this,d={regionType:c.getOption(this,"regionType"),parentEl:function(){return b.$el}};return this.regionManager.addRegions(a,d)},_initializeRegions:function(a){this._initRegionManager();a=d.isFunction(this.regions)?this.regions(a):this.regions||{};this.addRegions(a)},_reInitializeRegions:function(){this.regionManager.closeRegions();this.regionManager.each(function(a){a.reset()})},_initRegionManager:function(){this.regionManager=new c.RegionManager;this.listenTo(this.regionManager,
"region:add",function(a,b){this[a]=b;this.trigger("region:add",a,b)});this.listenTo(this.regionManager,"region:remove",function(a,b){delete this[a];this.trigger("region:remove",a,b)})}});c.AppRouter=e.Router.extend({constructor:function(a){e.Router.prototype.constructor.apply(this,i.call(arguments));this.options=a||{};var b=c.getOption(this,"appRoutes"),d=this._getController();this.processAppRoutes(d,b)},appRoute:function(a,b){var c=this._getController();this._addAppRoute(c,a,b)},processAppRoutes:function(a,
b){if(b){var c=d.keys(b).reverse();d.each(c,function(c){this._addAppRoute(a,c,b[c])},this)}},_getController:function(){return c.getOption(this,"controller")},_addAppRoute:function(a,b,c){var e=a[c];if(!e)throw Error("Method '"+c+"' was not found on the controller");this.route(b,c,d.bind(e,a))}});c.Application=function(a){this._initRegionManager();this._initCallbacks=new c.Callbacks;this.vent=new g.EventAggregator;this.commands=new g.Commands;this.reqres=new g.RequestResponse;this.submodules={};d.extend(this,
a);this.triggerMethod=c.triggerMethod};d.extend(c.Application.prototype,e.Events,{execute:function(){var a=Array.prototype.slice.apply(arguments);this.commands.execute.apply(this.commands,a)},request:function(){var a=Array.prototype.slice.apply(arguments);return this.reqres.request.apply(this.reqres,a)},addInitializer:function(a){this._initCallbacks.add(a)},start:function(a){this.triggerMethod("initialize:before",a);this._initCallbacks.run(a,this);this.triggerMethod("initialize:after",a);this.triggerMethod("start",
a)},addRegions:function(a){return this._regionManager.addRegions(a)},closeRegions:function(){this._regionManager.closeRegions()},removeRegion:function(a){this._regionManager.removeRegion(a)},getRegion:function(a){return this._regionManager.get(a)},module:function(a,b){var d=i.call(arguments);d.unshift(this);return c.Module.create.apply(c.Module,d)},_initRegionManager:function(){this._regionManager=new c.RegionManager;this.listenTo(this._regionManager,"region:add",function(a,b){this[a]=b});this.listenTo(this._regionManager,
"region:remove",function(a){delete this[a]})}});c.Application.extend=c.extend;c.Module=function(a,b){this.moduleName=a;this.submodules={};this._setupInitializersAndFinalizers();this.app=b;this.startWithParent=!0;this.triggerMethod=c.triggerMethod};d.extend(c.Module.prototype,e.Events,{addInitializer:function(a){this._initializerCallbacks.add(a)},addFinalizer:function(a){this._finalizerCallbacks.add(a)},start:function(a){this._isInitialized||(d.each(this.submodules,function(b){b.startWithParent&&b.start(a)}),
this.triggerMethod("before:start",a),this._initializerCallbacks.run(a,this),this._isInitialized=!0,this.triggerMethod("start",a))},stop:function(){this._isInitialized&&(this._isInitialized=!1,c.triggerMethod.call(this,"before:stop"),d.each(this.submodules,function(a){a.stop()}),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),c.triggerMethod.call(this,"stop"))},addDefinition:function(a,b){this._runModuleDefinition(a,b)},_runModuleDefinition:function(a,
b){if(a){var f=d.flatten([this,this.app,e,c,c.$,d,b]);a.apply(this,f)}},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=new c.Callbacks;this._finalizerCallbacks=new c.Callbacks}});d.extend(c.Module,{create:function(a,b,c){var e=a,g=i.call(arguments);g.splice(0,3);var b=b.split("."),h=[];h[b.length-1]=c;d.each(b,function(b,c){var d=e;e=this._getModule(d,b,a);this._addModuleDefinition(d,e,h[c],g)},this);return e},_getModule:function(a,b,d){var e=a[b];e||(e=new c.Module(b,d),a[b]=
e,a.submodules[b]=e);return e},_addModuleDefinition:function(a,b,c,e){var g;d.isFunction(c)?(g=c,c=!0):d.isObject(c)?(g=c.define,c=c.startWithParent):c=!0;g&&b.addDefinition(g,e);b.startWithParent=b.startWithParent&&c;b.startWithParent&&!b.startWithParentIsConfigured&&(b.startWithParentIsConfigured=!0,a.addInitializer(function(a){b.startWithParent&&b.start(a)}))}});c.Wreqr=g;c.ChildViewContainer=k});;
;
/* module-key = 'com.atlassian.plugin.jslibs:backbone-1.0.0-factory', location = 'factories/backbone/1.0.0/backbone-1.0.0-factory.js' */
(function(k){define("atlassian/libs/factories/backbone-1.0.0",function(){return function(t,i){var p={_:t,$:i};k.call(p);return"undefined"!==typeof exports?exports.noConflict():p.Backbone.noConflict()}})})(function(){var k=this,t=k.Backbone,i=[],p=i.push,u=i.slice,C=i.splice,g;g="undefined"!==typeof exports?exports:k.Backbone={};g.VERSION="1.0.0";var e=k._;!e&&"undefined"!==typeof require&&(e=require("underscore"));g.$=k.jQuery||k.Zepto||k.ender||k.$;g.noConflict=function(){k.Backbone=t;return this};
g.emulateHTTP=!1;g.emulateJSON=!1;var h=g.Events={on:function(a,b,c){if(!q(this,"on",a,[b,c])||!b)return this;this._events||(this._events={});(this._events[a]||(this._events[a]=[])).push({callback:b,context:c,ctx:c||this});return this},once:function(a,b,c){if(!q(this,"once",a,[b,c])||!b)return this;var d=this,f=e.once(function(){d.off(a,f);b.apply(this,arguments)});f._callback=b;return this.on(a,f,c)},off:function(a,b,c){var d,f,v,g,j,w,l,h;if(!this._events||!q(this,"off",a,[b,c]))return this;if(!a&&
!b&&!c)return this._events={},this;g=a?[a]:e.keys(this._events);j=0;for(w=g.length;j<w;j++)if(a=g[j],v=this._events[a]){this._events[a]=d=[];if(b||c){l=0;for(h=v.length;l<h;l++)f=v[l],(b&&b!==f.callback&&b!==f.callback._callback||c&&c!==f.context)&&d.push(f)}d.length||delete this._events[a]}return this},trigger:function(a){if(!this._events)return this;var b=u.call(arguments,1);if(!q(this,"trigger",a,b))return this;var c=this._events[a],d=this._events.all;c&&x(c,b);d&&x(d,arguments);return this},stopListening:function(a,
b,c){var d=this._listeners;if(!d)return this;var f=!b&&!c;"object"===typeof b&&(c=this);a&&((d={})[a._listenerId]=a);for(var e in d)d[e].off(b,c,this),f&&delete this._listeners[e];return this}},y=/\s+/,q=function(a,b,c,d){if(!c)return!0;if("object"===typeof c){for(var f in c)a[b].apply(a,[f,c[f]].concat(d));return!1}if(y.test(c)){c=c.split(y);f=0;for(var e=c.length;f<e;f++)a[b].apply(a,[c[f]].concat(d));return!1}return!0},x=function(a,b){var c,d=-1,f=a.length,e=b[0],g=b[1],j=b[2];switch(b.length){case 0:for(;++d<
f;)(c=a[d]).callback.call(c.ctx);break;case 1:for(;++d<f;)(c=a[d]).callback.call(c.ctx,e);break;case 2:for(;++d<f;)(c=a[d]).callback.call(c.ctx,e,g);break;case 3:for(;++d<f;)(c=a[d]).callback.call(c.ctx,e,g,j);break;default:for(;++d<f;)(c=a[d]).callback.apply(c.ctx,b)}};e.each({listenTo:"on",listenToOnce:"once"},function(a,b){h[b]=function(b,d,f){var g=this._listeners||(this._listeners={}),o=b._listenerId||(b._listenerId=e.uniqueId("l"));g[o]=b;"object"===typeof d&&(f=this);b[a](d,f,this);return this}});
h.bind=h.on;h.unbind=h.off;e.extend(g,h);var n=g.Model=function(a,b){var c,d=a||{};b||(b={});this.cid=e.uniqueId("c");this.attributes={};e.extend(this,e.pick(b,D));b.parse&&(d=this.parse(d,b)||{});if(c=e.result(this,"defaults"))d=e.defaults({},d,c);this.set(d,b);this.changed={};this.initialize.apply(this,arguments)},D=["url","urlRoot","collection"];e.extend(n.prototype,h,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return e.clone(this.attributes)},
sync:function(){return g.sync.apply(this,arguments)},get:function(a){return this.attributes[a]},escape:function(a){return e.escape(this.get(a))},has:function(a){return null!=this.get(a)},set:function(a,b,c){var d,f,g,o,j,h,l;if(null==a)return this;"object"===typeof a?(f=a,c=b):(f={})[a]=b;c||(c={});if(!this._validate(f,c))return!1;g=c.unset;o=c.silent;a=[];j=this._changing;this._changing=!0;j||(this._previousAttributes=e.clone(this.attributes),this.changed={});l=this.attributes;h=this._previousAttributes;
this.idAttribute in f&&(this.id=f[this.idAttribute]);for(d in f)b=f[d],e.isEqual(l[d],b)||a.push(d),e.isEqual(h[d],b)?delete this.changed[d]:this.changed[d]=b,g?delete l[d]:l[d]=b;if(!o){a.length&&(this._pending=!0);b=0;for(d=a.length;b<d;b++)this.trigger("change:"+a[b],this,l[a[b]],c)}if(j)return this;if(!o)for(;this._pending;)this._pending=!1,this.trigger("change",this,c);this._changing=this._pending=!1;return this},unset:function(a,b){return this.set(a,void 0,e.extend({},b,{unset:!0}))},clear:function(a){var b=
{},c;for(c in this.attributes)b[c]=void 0;return this.set(b,e.extend({},a,{unset:!0}))},hasChanged:function(a){return null==a?!e.isEmpty(this.changed):e.has(this.changed,a)},changedAttributes:function(a){if(!a)return this.hasChanged()?e.clone(this.changed):!1;var b,c=!1,d=this._changing?this._previousAttributes:this.attributes,f;for(f in a)if(!e.isEqual(d[f],b=a[f]))(c||(c={}))[f]=b;return c},previous:function(a){return null==a||!this._previousAttributes?null:this._previousAttributes[a]},previousAttributes:function(){return e.clone(this._previousAttributes)},
fetch:function(a){a=a?e.clone(a):{};void 0===a.parse&&(a.parse=!0);var b=this,c=a.success;a.success=function(d){if(!b.set(b.parse(d,a),a))return false;c&&c(b,d,a);b.trigger("sync",b,d,a)};r(this,a);return this.sync("read",this,a)},save:function(a,b,c){var d,f=this.attributes;null==a||"object"===typeof a?(d=a,c=b):(d={})[a]=b;if(d&&(!c||!c.wait)&&!this.set(d,c))return!1;c=e.extend({validate:!0},c);if(!this._validate(d,c))return!1;d&&c.wait&&(this.attributes=e.extend({},f,d));void 0===c.parse&&(c.parse=
!0);var g=this,h=c.success;c.success=function(a){g.attributes=f;var b=g.parse(a,c);c.wait&&(b=e.extend(d||{},b));if(e.isObject(b)&&!g.set(b,c))return false;h&&h(g,a,c);g.trigger("sync",g,a,c)};r(this,c);a=this.isNew()?"create":c.patch?"patch":"update";"patch"===a&&(c.attrs=d);a=this.sync(a,this,c);d&&c.wait&&(this.attributes=f);return a},destroy:function(a){var a=a?e.clone(a):{},b=this,c=a.success,d=function(){b.trigger("destroy",b,b.collection,a)};a.success=function(e){(a.wait||b.isNew())&&d();c&&
c(b,e,a);b.isNew()||b.trigger("sync",b,e,a)};if(this.isNew())return a.success(),!1;r(this,a);var f=this.sync("delete",this,a);a.wait||d();return f},url:function(){var a=e.result(this,"urlRoot")||e.result(this.collection,"url")||z();return this.isNew()?a:a+("/"===a.charAt(a.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(a){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(a){return this._validate({},e.extend(a||
{},{validate:!0}))},_validate:function(a,b){if(!b.validate||!this.validate)return!0;var a=e.extend({},this.attributes,a),c=this.validationError=this.validate(a,b)||null;if(!c)return!0;this.trigger("invalid",this,c,e.extend(b||{},{validationError:c}));return!1}});e.each("keys values pairs invert pick omit".split(" "),function(a){n.prototype[a]=function(){var b=u.call(arguments);b.unshift(this.attributes);return e[a].apply(e,b)}});var s=g.Collection=function(a,b){b||(b={});b.url&&(this.url=b.url);b.model&&
(this.model=b.model);void 0!==b.comparator&&(this.comparator=b.comparator);this._reset();this.initialize.apply(this,arguments);a&&this.reset(a,e.extend({silent:!0},b))},E={add:!0,remove:!0,merge:!0},F={add:!0,merge:!1,remove:!1};e.extend(s.prototype,h,{model:n,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return g.sync.apply(this,arguments)},add:function(a,b){return this.set(a,e.defaults(b||{},F))},remove:function(a,b){a=e.isArray(a)?
a.slice():[a];b||(b={});var c,d,f,g;c=0;for(d=a.length;c<d;c++)if(g=this.get(a[c]))delete this._byId[g.id],delete this._byId[g.cid],f=this.indexOf(g),this.models.splice(f,1),this.length--,b.silent||(b.index=f,g.trigger("remove",g,this,b)),this._removeReference(g);return this},set:function(a,b){b=e.defaults(b||{},E);b.parse&&(a=this.parse(a,b));e.isArray(a)||(a=a?[a]:[]);var c,d,f,g,h,j=b.at,k=this.comparator&&null==j&&!1!==b.sort,l=e.isString(this.comparator)?this.comparator:null,i=[],m=[],n={};c=
0;for(d=a.length;c<d;c++)if(f=this._prepareModel(a[c],b))(g=this.get(f))?(b.remove&&(n[g.cid]=!0),b.merge&&(g.set(f.attributes,b),k&&(!h&&g.hasChanged(l))&&(h=!0))):b.add&&(i.push(f),f.on("all",this._onModelEvent,this),this._byId[f.cid]=f,null!=f.id&&(this._byId[f.id]=f));if(b.remove){c=0;for(d=this.length;c<d;++c)n[(f=this.models[c]).cid]||m.push(f);m.length&&this.remove(m,b)}i.length&&(k&&(h=!0),this.length+=i.length,null!=j?C.apply(this.models,[j,0].concat(i)):p.apply(this.models,i));h&&this.sort({silent:!0});
if(b.silent)return this;c=0;for(d=i.length;c<d;c++)(f=i[c]).trigger("add",f,this,b);h&&this.trigger("sort",this,b);return this},reset:function(a,b){b||(b={});for(var c=0,d=this.models.length;c<d;c++)this._removeReference(this.models[c]);b.previousModels=this.models;this._reset();this.add(a,e.extend({silent:!0},b));b.silent||this.trigger("reset",this,b);return this},push:function(a,b){a=this._prepareModel(a,b);this.add(a,e.extend({at:this.length},b));return a},pop:function(a){var b=this.at(this.length-
1);this.remove(b,a);return b},unshift:function(a,b){a=this._prepareModel(a,b);this.add(a,e.extend({at:0},b));return a},shift:function(a){var b=this.at(0);this.remove(b,a);return b},slice:function(a,b){return this.models.slice(a,b)},get:function(a){return null==a?void 0:this._byId[null!=a.id?a.id:a.cid||a]},at:function(a){return this.models[a]},where:function(a,b){return e.isEmpty(a)?b?void 0:[]:this[b?"find":"filter"](function(b){for(var d in a)if(a[d]!==b.get(d))return!1;return!0})},findWhere:function(a){return this.where(a,
!0)},sort:function(a){if(!this.comparator)throw Error("Cannot sort a set without a comparator");a||(a={});e.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(e.bind(this.comparator,this));a.silent||this.trigger("sort",this,a);return this},sortedIndex:function(a,b,c){b||(b=this.comparator);var d=e.isFunction(b)?b:function(a){return a.get(b)};return e.sortedIndex(this.models,a,d,c)},pluck:function(a){return e.invoke(this.models,"get",
a)},fetch:function(a){a=a?e.clone(a):{};void 0===a.parse&&(a.parse=!0);var b=a.success,c=this;a.success=function(d){c[a.reset?"reset":"set"](d,a);b&&b(c,d,a);c.trigger("sync",c,d,a)};r(this,a);return this.sync("read",this,a)},create:function(a,b){b=b?e.clone(b):{};if(!(a=this._prepareModel(a,b)))return!1;b.wait||this.add(a,b);var c=this,d=b.success;b.success=function(e){b.wait&&c.add(a,b);d&&d(a,e,b)};a.save(null,b);return a},parse:function(a){return a},clone:function(){return new this.constructor(this.models)},
_reset:function(){this.length=0;this.models=[];this._byId={}},_prepareModel:function(a,b){if(a instanceof n)return a.collection||(a.collection=this),a;b||(b={});b.collection=this;var c=new this.model(a,b);return!c._validate(a,b)?(this.trigger("invalid",this,a,b),!1):c},_removeReference:function(a){this===a.collection&&delete a.collection;a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){("add"===a||"remove"===a)&&c!==this||("destroy"===a&&this.remove(b,d),b&&a==="change:"+b.idAttribute&&
(delete this._byId[b.previous(b.idAttribute)],null!=b.id&&(this._byId[b.id]=b)),this.trigger.apply(this,arguments))}});e.each("forEach each map collect reduce foldl inject reduceRight foldr find detect filter select reject every all some any include contains invoke max min toArray size first head take initial rest tail drop last without indexOf shuffle lastIndexOf isEmpty chain".split(" "),function(a){s.prototype[a]=function(){var b=u.call(arguments);b.unshift(this.models);return e[a].apply(e,b)}});
e.each(["groupBy","countBy","sortBy"],function(a){s.prototype[a]=function(b,c){var d=e.isFunction(b)?b:function(a){return a.get(b)};return e[a](this.models,d,c)}});var i=g.View=function(a){this.cid=e.uniqueId("view");this._configure(a||{});this._ensureElement();this.initialize.apply(this,arguments);this.delegateEvents()},G=/^(\S+)\s*(.*)$/,H="model collection el id attributes className tagName events".split(" ");e.extend(i.prototype,h,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},
render:function(){return this},remove:function(){this.$el.remove();this.stopListening();return this},setElement:function(a,b){this.$el&&this.undelegateEvents();this.$el=a instanceof g.$?a:g.$(a);this.el=this.$el[0];!1!==b&&this.delegateEvents();return this},delegateEvents:function(a){if(!a&&!(a=e.result(this,"events")))return this;this.undelegateEvents();for(var b in a){var c=a[b];e.isFunction(c)||(c=this[a[b]]);if(c){var d=b.match(G),f=d[1],d=d[2],c=e.bind(c,this),f=f+(".delegateEvents"+this.cid);
if(""===d)this.$el.on(f,c);else this.$el.on(f,d,c)}}return this},undelegateEvents:function(){this.$el.off(".delegateEvents"+this.cid);return this},_configure:function(a){this.options&&(a=e.extend({},e.result(this,"options"),a));e.extend(this,e.pick(a,H));this.options=a},_ensureElement:function(){if(this.el)this.setElement(e.result(this,"el"),!1);else{var a=e.extend({},e.result(this,"attributes"));this.id&&(a.id=e.result(this,"id"));this.className&&(a["class"]=e.result(this,"className"));a=g.$("<"+
e.result(this,"tagName")+">").attr(a);this.setElement(a,!1)}}});g.sync=function(a,b,c){var d=I[a];e.defaults(c||(c={}),{emulateHTTP:g.emulateHTTP,emulateJSON:g.emulateJSON});var f={type:d,dataType:"json"};c.url||(f.url=e.result(b,"url")||z());if(null==c.data&&b&&("create"===a||"update"===a||"patch"===a))f.contentType="application/json",f.data=JSON.stringify(c.attrs||b.toJSON(c));c.emulateJSON&&(f.contentType="application/x-www-form-urlencoded",f.data=f.data?{model:f.data}:{});if(c.emulateHTTP&&("PUT"===
d||"DELETE"===d||"PATCH"===d)){f.type="POST";c.emulateJSON&&(f.data._method=d);var h=c.beforeSend;c.beforeSend=function(a){a.setRequestHeader("X-HTTP-Method-Override",d);if(h)return h.apply(this,arguments)}}"GET"!==f.type&&!c.emulateJSON&&(f.processData=!1);if("PATCH"===f.type&&window.ActiveXObject&&(!window.external||!window.external.msActiveXFilteringEnabled))f.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")};a=c.xhr=g.ajax(e.extend(f,c));b.trigger("request",b,a,c);return a};var I=
{create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};g.ajax=function(){return g.$.ajax.apply(g.$,arguments)};var A=g.Router=function(a){a||(a={});a.routes&&(this.routes=a.routes);this._bindRoutes();this.initialize.apply(this,arguments)},J=/\((.*?)\)/g,K=/(\(\?)?:\w+/g,L=/\*\w+/g,M=/[\-{}\[\]+?.,\\\^$|#\s]/g;e.extend(A.prototype,h,{initialize:function(){},route:function(a,b,c){e.isRegExp(a)||(a=this._routeToRegExp(a));e.isFunction(b)&&(c=b,b="");c||(c=this[b]);var d=this;g.history.route(a,
function(e){e=d._extractParameters(a,e);c&&c.apply(d,e);d.trigger.apply(d,["route:"+b].concat(e));d.trigger("route",b,e);g.history.trigger("route",d,b,e)});return this},navigate:function(a,b){g.history.navigate(a,b);return this},_bindRoutes:function(){if(this.routes){this.routes=e.result(this,"routes");for(var a,b=e.keys(this.routes);null!=(a=b.pop());)this.route(a,this.routes[a])}},_routeToRegExp:function(a){a=a.replace(M,"\\$&").replace(J,"(?:$1)?").replace(K,function(a,c){return c?a:"([^/]+)"}).replace(L,
"(.*?)");return RegExp("^"+a+"$")},_extractParameters:function(a,b){var c=a.exec(b).slice(1);return e.map(c,function(a){return a?decodeURIComponent(a):null})}});var m=g.History=function(){this.handlers=[];e.bindAll(this,"checkUrl");"undefined"!==typeof window&&(this.location=window.location,this.history=window.history)},B=/^[#\/]|\s+$/g,N=/^\/+|\/+$/g,O=/msie [\w.]+/,P=/\/$/;m.started=!1;e.extend(m.prototype,h,{interval:50,getHash:function(a){return(a=(a||this).location.href.match(/#(.*)$/))?a[1]:
""},getFragment:function(a,b){if(null==a)if(this._hasPushState||!this._wantsHashChange||b){var a=this.location.pathname,c=this.root.replace(P,"");a.indexOf(c)||(a=a.substr(c.length))}else a=this.getHash();return a.replace(B,"")},start:function(a){if(m.started)throw Error("Backbone.history has already been started");m.started=!0;this.options=e.extend({},{root:"/"},this.options,a);this.root=this.options.root;this._wantsHashChange=!1!==this.options.hashChange;this._wantsPushState=!!this.options.pushState;
this._hasPushState=!(!this.options.pushState||!this.history||!this.history.pushState);var a=this.getFragment(),b=document.documentMode,b=O.exec(navigator.userAgent.toLowerCase())&&(!b||7>=b);this.root=("/"+this.root+"/").replace(N,"/");b&&this._wantsHashChange&&(this.iframe=g.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(a));if(this._hasPushState)g.$(window).on("popstate",this.checkUrl);else if(this._wantsHashChange&&"onhashchange"in window&&
!b)g.$(window).on("hashchange",this.checkUrl);else this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval));this.fragment=a;a=this.location;b=a.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!b)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._wantsPushState&&(this._hasPushState&&b&&a.hash)&&(this.fragment=this.getHash().replace(B,
""),this.history.replaceState({},document.title,this.root+this.fragment+a.search));if(!this.options.silent)return this.loadUrl()},stop:function(){g.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl);clearInterval(this._checkUrlInterval);m.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(){var a=this.getFragment();a===this.fragment&&this.iframe&&(a=this.getFragment(this.getHash(this.iframe)));if(a===this.fragment)return!1;this.iframe&&
this.navigate(a);this.loadUrl()||this.loadUrl(this.getHash())},loadUrl:function(a){var b=this.fragment=this.getFragment(a);return e.any(this.handlers,function(a){if(a.route.test(b))return a.callback(b),!0})},navigate:function(a,b){if(!m.started)return!1;if(!b||!0===b)b={trigger:b};a=this.getFragment(a||"");if(this.fragment!==a){this.fragment=a;var c=this.root+a;if(this._hasPushState)this.history[b.replace?"replaceState":"pushState"]({},document.title,c);else if(this._wantsHashChange)this._updateHash(this.location,
a,b.replace),this.iframe&&a!==this.getFragment(this.getHash(this.iframe))&&(b.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,a,b.replace));else return this.location.assign(c);b.trigger&&this.loadUrl(a)}},_updateHash:function(a,b,c){c?(c=a.href.replace(/(javascript:|#).*$/,""),a.replace(c+"#"+b)):a.hash="#"+b}});g.history=new m;n.extend=s.extend=A.extend=i.extend=m.extend=function(a,b){var c=this,d;d=a&&e.has(a,"constructor")?a.constructor:function(){return c.apply(this,
arguments)};e.extend(d,c,b);var f=function(){this.constructor=d};f.prototype=c.prototype;d.prototype=new f;a&&e.extend(d.prototype,a);d.__super__=c.prototype;return d};var z=function(){throw Error('A "url" property or function must be specified');},r=function(a,b){var c=b.error;b.error=function(d){c&&c(a,d,b);a.trigger("error",a,d,b)}}});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:backbone', location = 'jira-issue-navigator-components-module/libs/backbone.js' */
define("jira/components/libs/backbone",["require"],function(e){"use strict";var n=e("atlassian/libs/factories/backbone-1.0.0"),r=e("jira/components/libs/underscore"),i=e("jquery");return n(r,i)});
//# sourceMappingURL=backbone-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'jira-issue-navigator-components-module/libs/marionette-1.4.1.js' */
define("jira/components/libs/marionette-1.4.1",["require"],function(e){"use strict";var i=e("atlassian/libs/factories/marionette-1.4.1"),n=e("jira/components/libs/backbone"),r=e("jira/components/libs/underscore");return i(r,n)});
//# sourceMappingURL=marionette-1.4.1-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'jira-issue-navigator-components-module/libs/mariontte-1.4.1-mixins/Mixins.js' */
define("jira/components/libs/marionette-1.4.1/mixins",["require"],function(e){"use strict";var t=e("jira/components/libs/underscore");return{listenAndRethrow:function(e,i){i=[].concat(i),t.each(i,function(i){this.listenTo(e,i,function(){this.trigger.apply(this,[i].concat(t.toArray(arguments)))},this)},this)},triggerPreventable:function(e,i){var n=t.defaults({},i||{},{isPrevented:!1,emitter:this,preventDefault:function(){this.isPrevented=!0}});return this.trigger(e,n),n}}}),AJS.namespace("JIRA.Marionette.Mixins",null,require("jira/components/libs/marionette-1.4.1/mixins"));
//# sourceMappingURL=Mixins-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'jira-issue-navigator-components-module/libs/mariontte-1.4.1-mixins/LinkRegion.js' */
define("jira/components/libs/marionette-1.4.1/linkregion",["require"],function(e){"use strict";var n=e("jira/components/libs/marionette-1.4.1");return n.Region.extend({open:function(e){this.$el.append(e.$el.children()),e.setElement(this.$el)}})}),AJS.namespace("JIRA.Marionette.LinkRegion",null,require("jira/components/libs/marionette-1.4.1/linkregion"));
//# sourceMappingURL=LinkRegion-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'jira-issue-navigator-components-module/libs/mariontte-1.4.1-mixins/ReplaceRegion.js' */
define("jira/components/libs/marionette-1.4.1/replaceregion",["require"],function(e){"use strict";var n=e("jira/components/libs/marionette-1.4.1");return n.Region.extend({open:function(e){this.$el.replaceWith(e.el)}})}),AJS.namespace("JIRA.Marionette.ReplaceRegion",null,require("jira/components/libs/marionette-1.4.1/replaceregion"));
//# sourceMappingURL=ReplaceRegion-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'jira-issue-navigator-components-module/libs/mariontte-1.4.1-mixins/Controller.js' */
define("jira/components/libs/marionette-1.4.1/controller",["require"],function(e){"use strict";var n=e("jira/components/libs/underscore"),r=e("jira/components/libs/marionette-1.4.1"),o=e("jira/components/libs/marionette-1.4.1/mixins"),t=r.Controller.extend({});return n.extend(t.prototype,o),t}),AJS.namespace("JIRA.Marionette.Controller",null,require("jira/components/libs/marionette-1.4.1/controller"));
//# sourceMappingURL=Controller-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'jira-issue-navigator-components-module/libs/mariontte-1.4.1-mixins/ItemView.js' */
define("jira/components/libs/marionette-1.4.1/itemview",["require"],function(e){"use strict";var t=e("jira/components/libs/marionette-1.4.1");return t.ItemView.extend({renderTemplate:function(){var e=this.serializeData();e=this.mixinTemplateHelpers(e);var i=this.getTemplate(),n=t.Renderer.render(i,e);return t.$(n)},applyToDom:function(){this.delegateEvents(),this.bindUIElements(),this.triggerMethod("applyToDom")},unwrapTemplate:function(){if(this.$el.parent().length){var e=this.$el.children();this.$el.replaceWith(e),this.setElement(e)}else this.setElement(this.$el.children())}})}),AJS.namespace("JIRA.Marionette.ItemView",null,require("jira/components/libs/marionette-1.4.1/itemview"));
//# sourceMappingURL=ItemView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'jira-issue-navigator-components-module/libs/mariontte-1.4.1-mixins/CollectionView.js' */
define("jira/components/libs/marionette-1.4.1/collectionview",["require"],function(e){"use strict";var n=e("jira/components/libs/marionette-1.4.1"),t=e("jira/components/libs/marionette-1.4.1/itemview");return n.CollectionView.extend({_appendHtmlWithIndex:function(e,n,t){var i=e.children(),o=i.length;t<=0?e.prepend(n.$el):!o||t>=o?e.append(n.$el):n.$el.insertBefore(i.eq(t))},appendHtml:function(e,n,t){this._appendHtmlWithIndex(e.$el,n,t)},unwrapTemplate:function(){t.prototype.unwrapTemplate.call(this)}})}),AJS.namespace("JIRA.Marionette.CollectionView",null,require("jira/components/libs/marionette-1.4.1/collectionview"));
//# sourceMappingURL=CollectionView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'jira-issue-navigator-components-module/libs/mariontte-1.4.1-mixins/CompositeView.js' */
define("jira/components/libs/marionette-1.4.1/compositeview",["require"],function(e){"use strict";var t=e("jira/components/libs/marionette-1.4.1"),i=e("jira/components/libs/marionette-1.4.1/collectionview"),n=e("jira/components/libs/marionette-1.4.1/itemview");return t.CompositeView.extend({appendHtml:function(e,t,n){i.prototype._appendHtmlWithIndex(this.getItemViewContainer(e),t,n)},unwrapTemplate:function(){n.prototype.unwrapTemplate.call(this)}})}),AJS.namespace("JIRA.Marionette.CompositeView",null,require("jira/components/libs/marionette-1.4.1/compositeview"));
//# sourceMappingURL=CompositeView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'jira-issue-navigator-components-module/libs/mariontte-1.4.1-mixins/Layout.js' */
define("jira/components/libs/marionette-1.4.1/layout",["require"],function(e){"use strict";var t=e("jira/components/libs/underscore"),i=e("jira/components/libs/marionette-1.4.1"),n=e("jira/components/libs/marionette-1.4.1/mixins"),o=i.Layout.extend({applyToDom:function(){this.delegateEvents(),this.bindUIElements(),this._reInitializeRegions(),this.triggerMethod("applyToDom")}});return t.extend(o.prototype,n),o}),AJS.namespace("JIRA.Marionette.Layout",null,require("jira/components/libs/marionette-1.4.1/layout"));
//# sourceMappingURL=Layout-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'jira-issue-navigator-components-module/libs/mariontte-1.4.1-mixins/Application.js' */
define("jira/components/libs/marionette-1.4.1/application",["require"],function(t){"use strict";var i=t("jira/components/libs/underscore"),n=t("jira/components/libs/marionette-1.4.1");return n.Application.extend({constructor:function(t){n.Application.call(this,t)},start:function(t){t&&t.forceStop===!1||this.stop(),n.Application.prototype.start.call(this,t)},stop:function(){i.invoke(this.submodules,"stop")}})}),AJS.namespace("JIRA.Marionette.Application",null,require("jira/components/libs/marionette-1.4.1/application"));
//# sourceMappingURL=Application-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'jira-issue-navigator-components-module/libs/mariontte-1.4.1-mixins/AppModule.js' */
define("jira/components/libs/marionette-1.4.1/appmodule",["require"],function(e){"use strict";var n=e("jira/components/libs/underscore"),t=e("jira/components/libs/marionette-1.4.1"),i=e("jira/components/libs/marionette-1.4.1/mixins"),r=function(){this.definition=this.definition.bind(this)};return r.extend=t.extend,n.extend(r.prototype,{create:function(){throw new Error("create() must be implemented by AppModules")},generateMasterRequest:!1,name:"",commands:{},requests:{},events:[],definition:function(e,t){var i=this.name,r=this;if(!i)throw new Error("'name' must be defined by AppModules");e.addInitializer(function(){function e(e){n.isFunction(e)&&(e=e(s));var t={};return n.each(e,function(e,n){e===!0&&(e=s[n].bind(s)),n=n&&i?i+":"+n:i,t[n]=e}),t}function o(e,t){n.isFunction(t)&&(t=t(s)),n.each(t,function(t){var r=i+":"+t;e.listenTo(s,t,function(){this.trigger.apply(this,[r].concat(n.toArray(arguments)))})})}var s=r.create.apply(r,n.toArray(arguments)),a=e(r.commands),u=e(r.requests);r.generateMasterRequest&&n.extend(u,e({"":function(){return s}})),t.commands.setHandlers(a),t.reqres.setHandlers(u),o(t,r.events)})}}),n.extend(r.prototype,i),r}),AJS.namespace("JIRA.Marionette.AppModule",null,require("jira/components/libs/marionette-1.4.1/appmodule"));
//# sourceMappingURL=AppModule-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'jira-issue-navigator-components-module/libs/mariontte-1.4.1-mixins/DialogView.js' */
define("jira/components/libs/marionette-1.4.1/dialogview",["require"],function(i){"use strict";var e=i("jira/components/libs/underscore"),t=i("jira/components/libs/marionette-1.4.1"),o=i("jira/components/libs/marionette-1.4.1/itemview"),s=i("aui/message"),r=i("jira/dialog/form-dialog"),a=i("jquery"),n=i("jira/ajs/ajax/smart-ajax"),d=i("jira/dialog/dialog"),l=i("jira/components/utils/ajshelper");return o.extend({dialog:null,template:a.noop,_generateDialog:function(){var i=this.serializeData(),o=this.getTemplate(),s={id:this.id,content:function(e){e(o(i))},submitHandler:this._generateSubmissionXHR.bind(this)},a=t.getOption(this,"dialogOptions");return e.isFunction(a)&&(a=a.apply(this)),new r(e.extend(s,a))},render:function(){return this.isClosed=!1,this.triggerMethod("before:render",this),this.dialog=this._generateDialog(),this.dialog.show(),this.$el=this.dialog.get$popup(),a(this.dialog).on("Dialog.hide",function(i,e,t){t!==d.HIDE_REASON.cancel&&t!==d.HIDE_REASON.escape||this.close()}.bind(this)),this.triggerMethod("render",this),this},close:function(){if(!this.isClosed){var i=this.triggerMethod("before:close");i!==!1&&(a(this.dialog).off("Dialog.hide"),this.dialog.hide(!0),this.dialog.destroy(),this.isClosed=!0,this.triggerMethod("close"),this.remove())}},_generateSubmissionXHR:function(i,o){i.preventDefault();var s=this.dialog.$form,r=t.getOption(this,"formToRequestData");e.isFunction(r)&&(r=r.call(this,s));var a=n.makeRequest({type:s.attr("method"),url:s.attr("action"),contentType:"application/json",dataType:"json",processData:!1,data:JSON.stringify(r)}).done(o).done(this._onSubmitSuccess.bind(this)).fail(this._onSubmitError.bind(this));return a},_onSubmitSuccess:function(i){this.triggerMethod("submit:success",i),this.close()},_onSubmitError:function(i){this.dialog.getButtonsContainer().find("input").removeAttr("disabled"),this.dialog.hideFooterLoadingIndicator(),this.dialog.$form.removeClass("submitting"),this._showErrorFromXHR(i),this.triggerMethod("submit:error")},_displayFieldErrors:function(i){var t=this.dialog.$popup;e.each(i,function(i,e){t.find("#"+e).after("<div class='error'>"+l.escapeHtml(i)+"</div>")})},_displayGenericErrors:function(i){var t=this.dialog.$popup.find(".aui-messages");e.each(i,function(i){var e={closeable:!0,timeout:5};e.body=l.escapeHtml(i),e.shadowed=!1,s.error(t,e)})},_displayXHRErrors:function(i){var e=this.dialog.$popup.find(".aui-messages");e.append(n.buildDialogErrorContent(i,!0))},_showErrorFromXHR:function(i){this._removeErrorMessages();var e;try{e=JSON.parse(i.responseText)}catch(t){e=null}e?(this._displayFieldErrors(e.errors),this._displayGenericErrors(e.errorMessages)):this._displayXHRErrors(i)},_removeErrorMessages:function(){this.dialog.$popup.find(".error").remove(),this.dialog.$popup.find(".aui-messages").empty()}})}),AJS.namespace("JIRA.Marionette.DialogView",null,require("jira/components/libs/marionette-1.4.1/dialogview"));
//# sourceMappingURL=DialogView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-1.4.1', location = 'jira-issue-navigator-components-module/libs/mariontte-1.4.1-mixins/InlineDialogView.js' */
define("jira/components/libs/marionette-1.4.1/inlinedialogview",["require"],function(i){"use strict";var e=i("jira/components/libs/underscore"),t=i("jira/components/libs/marionette-1.4.1"),n=i("jira/components/libs/marionette-1.4.1/itemview"),o=i("jquery"),s=i("aui/inline-dialog");return n.extend({dialog:null,template:o.noop,_getDialogOptions:function(){var i={noBind:!0},n=t.getOption(this,"dialogOptions")||{};return e.isFunction(n)&&(n=n.apply(this)),n=e.extend({},i,n),n.hideCallback=function(){this.close()}.bind(this),n},_getTrigger:function(){var i=t.getOption(this,"trigger");return e.isFunction(i)&&(i=i.apply(this)),i},_generateDialog:function(){var i=this.serializeData(),e=this.getTemplate(),t=this._getDialogOptions(),n=this._getTrigger();return new s(n,this.id,function(t,n,o){t.html(e(i)),o()},t)},render:function(){return this.isClosed=!1,this.triggerMethod("before:render",this),this.dialog=this._generateDialog(),this.$el=this.dialog,this.id=this.dialog.id,this.dialog.show(),this.triggerMethod("render",this),this},close:function(){if(!this.isClosed){var i=this.triggerMethod("before:close");i!==!1&&(this.dialog.hide(),this.isClosed=!0,this.triggerMethod("close"),this.remove())}}})}),AJS.namespace("JIRA.Marionette.InlineDialogView",null,require("jira/components/libs/marionette-1.4.1/inlinedialogview"));
//# sourceMappingURL=InlineDialogView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:lib', location = 'jira-issue-navigator-components-module/namespaces.js' */
JIRA.Components=JIRA.Components||{},JIRA.Issues=JIRA.Issues||{},JIRA.Events=JIRA.Events||{};
//# sourceMappingURL=namespaces-min.js.map
;
;
/* module-key = 'com.atlassian.plugin.jslibs:brace-2014.09.03-factory', location = 'factories/brace/2014.09.03/brace-2104.09.03-factory.js' */
(function(j){define("atlassian/libs/factories/brace-2014.09.03",function(){return function(n,g){var c={_:n,Backbone:g};j.call(c);c=c.Brace.noConflict();c.VERSION="2014.09.03";return c}})})(function(){var j=this,n=j.Brace,g,c=j._,i=j.Backbone,o=function(a){return c.isArray(a)?c.reduce(a,function(b,a){b[a]=null;return b},{}):a},m=function(a,b){if(!a||null==b||a===String&&c.isString(b)||a===Number&&c.isNumber(b)||a===Boolean&&c.isBoolean(b))return b;if("string"===typeof a||a instanceof String){if(typeof b!==
""+a)throw"The typeof "+b+" is "+typeof b+" but expected it to be "+a;return b}if(c.isArray(a)||a===Array){if(!c.has(b,"length")||b instanceof String||c.has({string:1,"function":1},typeof b)||b instanceof i.Collection)throw"Array type expected, but nonnull, non-Array value provided.";return a===Array||!a[0]?b:c.map(b,c.bind(m,null,a[0]))}if("function"!==typeof a)throw"Invalid expected type "+a+". Should be falsy, String, Array, Backbone.Collection constructor, or function.";return b instanceof a?
b:p(a)?new a(m([a.model],b)):new a(b)},p=function(a,b){return a&&(a.__super__ instanceof(b||i.Collection)||a.__super__===(b||i.Collection).prototype||a===(b||i.Collection))},x=function(a,b){var d={};c.each(a,function(a,c){if(!b[c]||q(a,b[c]))d[c]=a;else if(a&&!q(b[c],a))throw c+" has conflicted type descriptors.";});return d},q=function(a,b){return!b||b===a?!0:!a||"string"===typeof a?!1:a instanceof Array?b===Array||b instanceof Array&&q(a[0],b[0]):"function"!==typeof b?!1:p(b)?p(a,b):a.prototype instanceof
b};g=function(a){var b=a.extend(),d=a.extend;b.extend=function w(a,b){var h,g=c.extend({},a),i;a&&a.mixins&&(i=a.mixins,delete g.mixins);h=d.call(this,g,b);this.prototype.namedEvents&&f.Mixins.applyMixin(h,{namedEvents:this.prototype.namedEvents});this.prototype.namedAttributes&&f.Mixins.applyMixin(h,{namedAttributes:this.prototype.namedAttributes});i&&c.each(a.mixins,function(a){f.Mixins.applyMixin(h,a)});h.prototype.namedEvents&&f.Mixins.applyMixin(h,f.EventsMixinCreator.create(h.prototype.namedEvents));
h.prototype.namedAttributes&&(h.prototype.namedAttributes=o(h.prototype.namedAttributes),f.Mixins.applyMixin(h,f.AttributesMixinCreator.create(h.prototype.namedAttributes,h.prototype.idAttribute)));if(h.prototype.toJSON){var j=h.prototype.toJSON;h.prototype.toJSON=function(){var a;a=j.call(this);a=c.isObject(a)?c.reduce(a,function(a,b,d){b&&c.isFunction(b.toJSON)?a[d]=b.toJSON():c.isArray(b)&&(a[d]=c.map(b,function(a){return a&&c.isFunction(a.toJSON)?a.toJSON():a}));return a},a):a;return a}}h.extend=
w;return h};return b};var f={Mixins:{createMethodName:function(a,b){return a+b.charAt(0).toUpperCase()+b.substr(1)},applyMixin:function(a,b){c.forEach(c.keys(b),function(d){var e=a.prototype;if("initialize"===d){var f=e.initialize;e.initialize=function(){f&&f.apply(this,arguments);b.initialize.apply(this,arguments)}}else if("validate"===d){var g=e.validate;e.validate=function(){if(g){var a=g.apply(this,arguments);if(a)return a}return b.validate.apply(this,arguments)}}else if("defaults"===d){var e=
e.defaults||(e.defaults={}),d=b[d],k;for(k in d){if(e.hasOwnProperty(k))throw"Mixin error: class already has default '"+k+"' defined";e[k]=d[k]}}else if("namedAttributes"===d)k=o(e.namedAttributes)||{},d=o(b[d]),e.namedAttributes=c.extend(k,x(d,k));else if("namedEvents"===d){if(!c.isArray(b[d]))throw"Expects events member on mixin to be an array";e.namedEvents||(e.namedEvents=[]);e.namedEvents=c.uniq(e.namedEvents.concat(b[d]))}else{if(e.hasOwnProperty(d))throw"Mixin error: class already has property '"+
d+"' defined";e[d]=b[d]}},this)}}};f.AttributesMixinCreator={create:function(a,b){var d={};a||(a={});c.has(a,"id")||(a.id=null);c.each(a,function(a,b){var c=f.Mixins.createMethodName("set",b);d[c]=function(a,c){return this.set(b,a,c)};c=f.Mixins.createMethodName("get",b);d[c]=function(){return this.get(b)}});if("string"===typeof b&&"undefined"!==typeof a[b]&&"id"!==b){a.id=a[b];var e=f.Mixins.createMethodName("get",b),g=f.Mixins.createMethodName("set",b);d.getId=function(){return this[e]()};d.setId=
function(a,b){return this[g](a,b)}}return d},ensureType:m};f.EventsMixinCreator={create:function(a){var b={};c.each(a,c.bind(function(a){var e=f.Mixins.createMethodName("on",a);b[e]=function(){return this.on.apply(this,[a].concat(c.toArray(arguments)))};e=f.Mixins.createMethodName("trigger",a);b[e]=function(){return this.trigger.apply(this,[a].concat(c.toArray(arguments)))}},this));return b}};var l=f,r=i.Model,s=g(r),t=r.prototype,u=s.prototype,v=t.set;u.set=function(a,b,d){var e,f=this.namedAttributes;
if(!f||null==a)return v.apply(this,arguments);c.isObject(a)?(e=c.clone(a),d=b):(e={},e[a]=b);for(var g in e)if(c.has(e,g)){if(!c.has(f,g))throw"Attribute '"+g+"' does not exist";e[g]=m(f[g],e[g])}return v.call(this,e,d)};var y=t.get;u.get=function(a){if(this.namedAttributes&&!c.has(this.namedAttributes,a))throw"Attribute '"+a+"' does not exist";return y.apply(this,arguments)};var z=r.prototype.parse;s.prototype.parse=function(a,b){return c.pick(z(a,b),c.keys(this.namedAttributes))};l.Model=s;f.Collection=
g(i.Collection);f.View=g(i.View);f.Router=g(i.Router);l=function(){this.initialize.apply(this,arguments)};c.extend(l.prototype,i.Events,{initialize:function(){}});l.extend=i.Model.extend;f.Evented=g(l);g=f;g.noConflict=function(){j.Brace=n;return this};j.Brace=g});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:brace', location = 'jira-issue-navigator-components-module/libs/brace.js' */
define("jira/components/libs/brace",["require"],function(e){"use strict";var r=e("atlassian/libs/factories/brace-2014.09.03"),s=e("jira/components/libs/backbone"),n=e("jira/components/libs/underscore");return r(n,s)}),AJS.namespace("JIRA.Issues.Brace",null,require("jira/components/libs/brace"));
//# sourceMappingURL=brace-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:tipsy', location = 'jira-issue-navigator-components-module/lib/jquery.hoverIntent.min.js' */
// jshint ignore: start
/*eslint-disable*/
/**
* hoverIntent r6 // 2011.02.26 // jQuery 1.5.1+
* <http://cherne.net/brian/resources/jquery.hoverIntent.html>
* 
* @param  f  onMouseOver function || An object with configuration options
* @param  g  onMouseOut function  || Nothing (use configuration options object)
* @author    Brian Cherne brian(at)cherne(dot)net
*/
(function ($) {
  $.fn.hoverIntent = function (f, g) {
    var cfg = { sensitivity: 7, interval: 100, timeout: 0 };cfg = $.extend(cfg, g ? { over: f, out: g } : f);var cX, cY, pX, pY;var track = function track(ev) {
      cX = ev.pageX;cY = ev.pageY;
    };var compare = function compare(ev, ob) {
      ob.hoverIntent_t = clearTimeout(ob.hoverIntent_t);if (Math.abs(pX - cX) + Math.abs(pY - cY) < cfg.sensitivity) {
        $(ob).unbind("mousemove", track);ob.hoverIntent_s = 1;return cfg.over.apply(ob, [ev]);
      } else {
        pX = cX;pY = cY;ob.hoverIntent_t = setTimeout(function () {
          compare(ev, ob);
        }, cfg.interval);
      }
    };var delay = function delay(ev, ob) {
      ob.hoverIntent_t = clearTimeout(ob.hoverIntent_t);ob.hoverIntent_s = 0;return cfg.out.apply(ob, [ev]);
    };var handleHover = function handleHover(e) {
      var ev = jQuery.extend({}, e);var ob = this;if (ob.hoverIntent_t) {
        ob.hoverIntent_t = clearTimeout(ob.hoverIntent_t);
      }if (e.type == "mouseenter") {
        pX = ev.pageX;pY = ev.pageY;$(ob).bind("mousemove", track);if (ob.hoverIntent_s != 1) {
          ob.hoverIntent_t = setTimeout(function () {
            compare(ev, ob);
          }, cfg.interval);
        }
      } else {
        $(ob).unbind("mousemove", track);if (ob.hoverIntent_s == 1) {
          ob.hoverIntent_t = setTimeout(function () {
            delay(ev, ob);
          }, cfg.timeout);
        }
      }
    };return this.bind('mouseenter', handleHover).bind('mouseleave', handleHover);
  };
})(jQuery);;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:tipsy', location = 'jira-issue-navigator-components-module/util/TipsyView.js' */
define("jira/issues/tipsy",["require"],function(t){"use strict";var i=t("jira/components/libs/underscore"),n=t("jira/components/libs/brace"),s=t("jquery");s.fn.tooltip||(s.fn.tooltip=s.noop,s.fn.tipsy=s.noop);var o=n.View.extend({events:{click:"hide"},initialize:function(t){i.isFunction(t.showCondition)?this.shouldShow=t.showCondition:t.showCondition?this.shouldShow=function(){return this.$el.filter(t.showCondition).length>0}.bind(this):this.shouldShow=function(){return!0},this.tipsy=this.$el.tooltip(i.extend({trigger:"manual"},t.tipsy)),this.hoverIntent(t.intents)},hoverIntent:function(t){return this.tipsy&&this.tipsy.hoverIntent(i.extend({interval:200,over:this.show.bind(this),out:this.hide.bind(this)},t)),this},show:function(){this.shouldShow()&&this.tipsy&&this.$el.tipsy("show")},hide:function(){this.tipsy&&this.$el.tipsy("hide")},remove:function(){this.hide(),this.$el.removeData("tipsy")}});return o.revalidate=function(){return s.fn.tipsy.revalidate()},o.autoBounds=function(){return s.fn.tipsy.autoBounds.apply(s.fn.tipsy,arguments)},o});
//# sourceMappingURL=TipsyView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:tipsy', location = 'jira-issue-navigator-components-module/util/namespace.js' */
AJS.namespace("JIRA.Issues.Tipsy",null,require("jira/issues/tipsy"));
//# sourceMappingURL=namespace-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:jqueryutils', location = 'jira-issue-navigator-components-module/util/jquery/CatchExceptions.js' */
!function(n){"use strict";var t=function(n){return function(){try{n.apply(this,arguments)}catch(t){}return this}};n.fn.htmlCatchExceptions=t(n.fn.html),n.fn.appendCatchExceptions=t(n.fn.append),n.fn.prependCatchExceptions=t(n.fn.prepend),n.catchExceptions=function(t){return n("<div>").htmlCatchExceptions(t).children()}}(AJS.$);
//# sourceMappingURL=CatchExceptions-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:jqueryutils', location = 'jira-issue-navigator-components-module/util/jquery/RecurringPromise.js' */
!function(){"use strict";jQuery.RecurringPromise=function(i){return this instanceof jQuery.RecurringPromise?(this._parent=i,this._doneCallbacks=new jQuery.Callbacks,this._failCallbacks=new jQuery.Callbacks,void(this._alwaysCallbacks=new jQuery.Callbacks)):new jQuery.RecurringPromise},jQuery.RecurringPromise.prototype={add:function(i){var n=new jQuery.Deferred;n.original=i;var t=this._getPending();return this._abortIfPending(t),this._setPending(n),i.done(function(){n===this._getPending()&&(n.resolveWith(this,arguments),this._doneCallbacks.fireWith(this,arguments))}.bind(this)),i.fail(function(){n===this._getPending()&&(n.rejectWith(this,arguments),this._failCallbacks.fireWith(this,arguments))}.bind(this)),i.always(function(){n===this._getPending()&&this._alwaysCallbacks.fireWith(this,arguments)}.bind(this)),n.promise()},done:function(i){return this._doneCallbacks.add(i),this},fail:function(i){return this._failCallbacks.add(i),this},always:function(i){return this._alwaysCallbacks.add(i),this},reset:function(){this._abortIfPending(this._getPending()),this._setPending(null)},sub:function(){return new jQuery.RecurringPromise(this)},_getPending:function(){return this._parent?this._parent._getPending():this._pending},_setPending:function(i){this._parent?this._parent._setPending(i):this._pending=i},_abortIfPending:function(i){i&&"pending"===i.state()&&(i.reject("abort"),jQuery.isFunction(i.original.abort)&&i.original.abort())}}}();
//# sourceMappingURL=RecurringPromise-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:jqueryutils', location = 'jira-issue-navigator-components-module/util/jquery/ConcurrentDeferred.js' */
jQuery.ConcurrentDeferred=function(n){"use strict";var e,r=new jQuery.Deferred,t=function(n){e=n,n.done(function(){e===n&&r.resolve.apply(r,arguments)}).fail(function(){e===n&&r.reject.apply(r,arguments)})};return t(n),jQuery.extend(r,{update:function(n){if(!this.isPending())throw"Cannot update non-pending ConcurrentDeferred";var r=e;return t(n),jQuery.isFunction(r.abort)&&r.abort(),this},isPending:function(){return"pending"===this.state()}}),r};
//# sourceMappingURL=ConcurrentDeferred-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:jqueryutils', location = 'jira-issue-navigator-components-module/util/jquery/ScrollLock.js' */
!function(e){"use strict";var l=30;e.fn.scrollLock=function(i,n){"string"!=typeof i&&(n=i,i=null),n||(n=l),this.on("DOMMouseScroll mousewheel",i,function(l){l.preventDefault();var i;l.originalEvent.wheelDelta&&(i=l.originalEvent.wheelDelta/120),l.originalEvent.detail&&(i=-l.originalEvent.detail/3),e.isNumeric(i)&&(this.scrollTop-=i*n)})}}(AJS.$);
//# sourceMappingURL=ScrollLock-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:uri', location = 'jira-issue-navigator-components-module/libs/uri.js' */
define("jira/components/libs/uri",["require"],function(i){"use strict";return i("atlassian/libs/uri-1.14.1")});
//# sourceMappingURL=uri-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:scrollintoview', location = 'jira-issue-navigator-components-module/lib/scrollintoview-1.8.js' */
!function(t){var e={vertical:{x:!1,y:!0},horizontal:{x:!0,y:!1},both:{x:!0,y:!0},x:{x:!0,y:!1},y:{x:!1,y:!0}},o={duration:0,direction:"y"},r=/^(?:html)$/i,l=function(e,o){o=o||(document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(e,null):e.currentStyle);var r=!(!document.defaultView||!document.defaultView.getComputedStyle),l={top:parseFloat(r?o.borderTopWidth:t.css(e,"borderTopWidth"))||0,left:parseFloat(r?o.borderLeftWidth:t.css(e,"borderLeftWidth"))||0,bottom:parseFloat(r?o.borderBottomWidth:t.css(e,"borderBottomWidth"))||0,right:parseFloat(r?o.borderRightWidth:t.css(e,"borderRightWidth"))||0};return{top:l.top,left:l.left,bottom:l.bottom,right:l.right,vertical:l.top+l.bottom,horizontal:l.left+l.right}},i=function(e){var o=t(window),i=r.test(e[0].nodeName);return{border:i?{top:0,left:0,bottom:0,right:0}:l(e[0]),scroll:{top:(i?o:e).scrollTop(),left:(i?o:e).scrollLeft()},scrollbar:{right:i?0:e.innerWidth()-e[0].clientWidth,bottom:i?0:e.innerHeight()-e[0].clientHeight},rect:function(){var t=e[0].getBoundingClientRect();return{top:i?0:t.top,left:i?0:t.left,bottom:i?e[0].clientHeight:t.bottom,right:i?e[0].clientWidth:t.right}}()}};t.fn.extend({scrollIntoViewForAuto:function(l){l=t.extend({},o,l),l.direction=e["string"==typeof l.direction&&l.direction.toLowerCase()]||e.both;var c="";l.direction.x===!0&&(c="horizontal"),l.direction.y===!0&&(c=c?"both":"vertical");var n=this.eq(0),s=n.closest(":scrollable("+c+")");if(s.length>0){s=s.eq(0);var d={e:i(n),s:i(s)},h={top:d.e.rect.top-(d.s.rect.top+d.s.border.top),bottom:d.s.rect.bottom-d.s.border.bottom-d.s.scrollbar.bottom-d.e.rect.bottom,left:d.e.rect.left-(d.s.rect.left+d.s.border.left),right:d.s.rect.right-d.s.border.right-d.s.scrollbar.right-d.e.rect.right},a={};l.direction.y===!0&&(h.top<0?a.scrollTop=d.s.scroll.top+h.top-30:h.top>0&&h.bottom<0&&(a.scrollTop=d.s.scroll.top+Math.min(h.top,-h.bottom)+30)),l.direction.x===!0&&(h.left<0?a.scrollLeft=d.s.scroll.left+h.left:h.left>0&&h.right<0&&(a.scrollLeft=d.s.scroll.left+Math.min(h.left,-h.right))),t.isEmptyObject(a)?t.isFunction(l.complete)&&l.complete.call(s[0]):(r.test(s[0].nodeName)&&(s=t("html,body")),s.animate(a,l.duration).eq(0).queue(function(e){t.isFunction(l.complete)&&l.complete.call(s[0]),e()}))}return this}});var c={auto:!0,scroll:!0,visible:!1,hidden:!1};t.extend(t.expr[":"],{scrollable:function(t,o,l,i){var n=e["string"==typeof l[3]&&l[3].toLowerCase()]||e.both,s=document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(t,null):t.currentStyle,d={x:c[s.overflowX.toLowerCase()]||!1,y:c[s.overflowY.toLowerCase()]||!1,isRoot:r.test(t.nodeName)};if(!d.x&&!d.y&&!d.isRoot)return!1;var h={height:{scroll:t.scrollHeight,client:t.clientHeight},width:{scroll:t.scrollWidth,client:t.clientWidth},scrollableX:function(){return(d.x||d.isRoot)&&this.width.scroll>this.width.client},scrollableY:function(){return(d.y||d.isRoot)&&this.height.scroll>this.height.client}};return n.y&&h.scrollableY()||n.x&&h.scrollableX()}})}(jQuery);
//# sourceMappingURL=scrollintoview-1.8-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:browser', location = 'jira-issue-navigator-components-module/util/Browser.js' */
define("jira/components/util/browser",function(){"use strict";return{locationReload:function(o){window.location.reload(o)}}});
//# sourceMappingURL=Browser-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/entities/PanelModel.js' */
define("jira/components/issueviewer/entities/panel",["require"],function(t){"use strict";var e=t("jira/components/libs/brace"),i=t("jira/util/events"),n=t("jira/components/issueviewer/eventtypes");return e.Model.extend({namedAttributes:["entity","updateLocked"],initialize:function(){i.bind(n.LOCK_PANEL_REFRESHING,function(t,e){e===this.getEntity().id&&this.set("updateLocked",!0)}.bind(this)),i.bind(n.UNLOCK_PANEL_REFRESHING,function(t,e){e===this.getEntity().id&&this.set("updateLocked",!1)}.bind(this))},update:function(t,e,i){this.getUpdateLocked()||(this.set("entity",t),this.trigger("updated",e,i))}})});
//# sourceMappingURL=PanelModel-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/entities/PanelsCollection.js' */
define("jira/components/issueviewer/entities/panels",["require"],function(e){"use strict";var i=e("jira/components/libs/underscore"),n=e("jira/components/libs/brace"),t=e("jira/components/issueviewer/entities/panel");return n.Collection.extend({model:t,update:function(e,n){this.each(function(n){var t=n.id,s=i.any(e,function(e){return e.id===t});s||this.remove(n)},this),i.each(e,function(e,i){var t=this.get(e.id);t?t.update(e,n.fieldsInProgress,n.fieldsSaved):this.add({id:e.id,entity:e},{at:i})},this)}})});
//# sourceMappingURL=PanelsCollection-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/entities/PanelsGroupModel.js' */
define("jira/components/issueviewer/entities/panelsgroup",["require"],function(e){"use strict";var n=e("jira/components/libs/brace"),t=e("jira/components/issueviewer/entities/panels");return n.Model.extend({namedAttributes:["leftPanels","rightPanels","infoPanels"],defaults:function(){return{leftPanels:new t([]),rightPanels:new t([]),infoPanels:new t([])}},update:function(e,n){this.get("leftPanels").update(e.leftPanels,n),this.get("rightPanels").update(e.rightPanels,n),this.get("infoPanels").update(e.infoPanels,n)}})});
//# sourceMappingURL=PanelsGroupModel-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/entities/IssueModel.js' */
define("jira/components/issueviewer/entities/issue",["require"],function(e){"use strict";var t=e("jira/components/libs/brace"),s=e("jira/components/issueviewer/entities/panelsgroup");return t.Model.extend({namedEvents:["updated"],namedAttributes:["entity","id","key","panels","projectKey","projectType","projectId"],defaults:function(){return{entity:{},panels:new s}},update:function(e,t){var s=!1;e.issue&&(this.updateFromEntity(e.issue),s=!0),e.panels&&(this.getPanels().update(e.panels,t),s=!0),s&&this.trigger("updated",t)},resetToDefault:function(){this.clear(),this.set(this.defaults())},updateFromEntity:function(e){this.set({id:e.id,key:e.key,entity:e,projectKey:e.project?e.project.key:null,projectType:e.project?e.project.projectType:null,projectId:e.project?e.project.id:null})},isCurrentIssue:function(e){return this.get("id")===e},hasIssue:function(){return this.has("id")},updateIssueQuery:function(e){this.hasIssue()&&(this.getEntity().viewIssueQuery=e)},getIssueInfo:function(){return{issueId:this.getId(),issueKey:this.getKey(),projectId:this.getProjectId(),projectKey:this.getProjectKey(),projectType:this.getProjectType()}}})});
//# sourceMappingURL=IssueModel-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/views/issue/IssuePanelView.js' */
define("jira/components/issueviewer/views/issuepanel",["require"],function(e){"use strict";var i=e("jira/components/libs/underscore"),t=e("jira/components/issueviewer/legacy/issuefieldutil"),n=e("jquery"),r=e("jira/components/libs/marionette-1.4.1/itemview"),l=e("jira/components/issueviewer/templates");return r.extend({template:l.Body.issuePanel,modelEvents:{updated:"update"},update:function(e,r){function l(){return i.any(e,function(e){return 1===o.find(t.getFieldSelector(e)).length})}function s(){var e=o.find(document.activeElement).length>0,i=!!n.browser.msie&&n.browser.version<=8;if(i){var t=o[0].nextSibling,r=o[0].parentNode;o.remove(),t?n(t).before(d):n(r).append(d)}else o.replaceWith(d);e&&u.trigger("replacedFocusedPanel"),u.setElement(d)}function a(e){var t=u.model.id,n=u.$el;u.trigger("panelRendered",t,n,o),i.each(e,function(e){u.trigger("individualPanelRendered",e)})}var d=this.renderTemplate(),o=this.$el,u=this;if(0!==o.find("iframe").length||d.text()!==o.text()){if(l()){var c=[];i.each(r,function(e){var i=o.find(t.getFieldSelector(e));if(1===i.length){var n=d.find(t.getFieldSelector(e));1===n.length?(i.replaceWith(n),c.push(n)):i.closest("li, dl").remove()}}),a(c)}else s(),a([u.$el]);this.bindUIElements()}},onRender:function(){this.setElement(this.$el.children());var e=this.model.getEntity().styleClass;e&&this.$el.addClass(e),this.trigger("individualPanelRendered",this.$el)},applyToDom:function(){this.trigger("individualPanelRendered",this.$el)},serializeData:function(){return this.model.getEntity()}})});
//# sourceMappingURL=IssuePanelView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/views/issue/IssuePanelsView.js' */
define("jira/components/issueviewer/views/issuepanels",["require"],function(e){"use strict";var i=e("jira/components/libs/marionette-1.4.1/collectionview"),t=e("jira/components/issueviewer/views/issuepanel"),n=e("jira/components/issueviewer/entities/panel");return i.extend({itemView:t,_updatingFromDom:!1,appendHtml:function(e,i,t){var n=e.$el.children(),o=n.length;t<=0?e.$el.prepend(i.$el):!o||t>=o?e.$el.append(i.$el):i.$el.insertBefore(n.eq(t))},applyToDom:function(){var e=this;this._updatingFromDom=!0,this.$el.children().filter(".module").each(function(){var i=this.id;"addcomment"===i&&(i="addcommentmodule"),e.collection.add(new n({id:i,entity:{id:i}}))}),this._updatingFromDom=!1},renderItemView:function(e){this._updatingFromDom?e.applyToDom():i.prototype.renderItemView.apply(this,arguments)},buildItemView:function(e){var t=i.prototype.buildItemView.apply(this,arguments);return this._updatingFromDom&&t.setElement(document.getElementById(e.id)),t}})});
//# sourceMappingURL=IssuePanelsView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/views/issue/IssueBodyView.js' */
define("jira/components/issueviewer/views/issuebody",["require"],function(e){"use strict";var s=e("jira/components/libs/marionette-1.4.1/layout"),i=e("jira/components/libs/marionette-1.4.1/linkregion"),n=e("jira/components/issueviewer/templates");return s.extend({tagName:"div",className:"issue-body-content",regions:{leftPanels:{selector:".issue-main-column",regionType:i},rightPanels:{selector:".issue-side-column",regionType:i},infoPanels:{selector:".issue-body",regionType:i}},template:n.Body.issueBody})});
//# sourceMappingURL=IssueBodyView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/views/issue/IssueOpsbarView.js' */
define("jira/components/issueviewer/views/issueopsbar",["require"],function(e){"use strict";var i=e("jira/components/libs/marionette-1.4.1/itemview"),t=e("jira/components/issueviewer/templates"),n=e("jira/issues/tipsy"),s=e("jira/components/issueviewer/analytics/issueopsbar"),o=e("jira/featureflags/feature-manager"),r=e("jira/components/issueviewer/services/optinnewissueviewservice"),a=function(){return AJS.$('meta[name="ajs-new-jira-issue-view-toggle-value"]').attr("content")};return i.extend({template:t.IssueOpsbar.simpleOpsbar,ui:{shareButton:".viewissue-share",exportButton:"#viewissue-export",loginButton:"#ops-login-lnk",commentButton:"#comment-issue",operationsMoreDropDown:"#opsbar-operations_more_drop"},serializeData:function(){return{issue:this.model.getEntity()}},onApplyToDom:function(){this.onRender()},onRender:function(){new s(this),this.ui.loginButton.hide(),this.ui.commentButton.addClass("inline-comment"),new n({el:this.ui.shareButton,showCondition:":not(.active)"}),new n({el:this.ui.exportButton,showCondition:":not(.active)",tipsy:{gravity:"ne"}});var e=o.isFeatureEnabled("issue.details.opt-back-in"),i=a();e&&"OFF"===i&&(this.ui.operationsMoreDropDown.append(t.IssueOpsbar.newIssueViewItem()),this.$el.find("#turn-on-new-issue-view").on("click",function(e){e.preventDefault(),r.optIn()}))}})});
//# sourceMappingURL=IssueOpsbarView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/views/issue/IssueHeaderView.js' */
define("jira/components/issueviewer/views/issueheader",["require"],function(e){"use strict";var i=e("jira/components/libs/marionette-1.4.1/layout"),s=e("jira/components/issueviewer/templates"),t=e("jira/components/libs/underscore"),r=e("jira/components/issueviewer/views/issueopsbar"),n=e("jira/util/data/meta"),a=e("jquery");return i.extend({className:"issue-header js-stalker",id:"stalker",tagName:"header",template:s.Header.issueHeader,modelEvents:{updated:"update"},regions:{opsbar:".command-bar",pager:"#issue-header-pager"},serializeData:function(){return{issue:this.model.getEntity(),isNewIssueViewEnabled:JIRA.Issues.Api.isNewIssueViewEnabled()}},update:function(e){if(e.initialize)this._updateWindowTitle();else{var i=t.include(e.fieldsInProgress,"summary");i?this.renderOpsBar():this.render()}this.trigger("updated")},onApplyToDom:function(){var e=new r({model:this.model});e.setElement(this.opsbar.el),this.opsbar.attachView(e),this.opsbar.currentView.applyToDom(),this._updateWindowTitle()},onBeforeRender:function(){this.previousElement=this.$el},onRender:function(){this.renderOpsBar(),this._updateWindowTitle(),this.trigger("panelRendered","header",this.$el,this.previousElement||a(""))},renderOpsBar:function(){this.opsbar.show(new r({model:this.model})),this.trigger("individualPanelRendered",this.$el)},_updateWindowTitle:function(){var e=this.model.getEntity(),i=e.key,s=e.summary,t=n.get("app-title");t&&s&&i&&(document.title="["+i+"] "+s+" - "+t)},focus:function(){this.$el.find("a").eq(0).focus()},initialFocus:function(){this.$el.focus()}})});
//# sourceMappingURL=IssueHeaderView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/views/issue/IssueView.js' */
define("jira/components/issueviewer/views/issue",["require"],function(e){"use strict";var t=e("jira/components/libs/marionette-1.4.1/layout"),i=e("jira/components/issueviewer/templates"),s=e("jira/components/libs/marionette-1.4.1/replaceregion"),n=e("jira/components/issueviewer/actions"),o=e("jquery");return t.extend({template:i.layout,className:"issue-container",regions:{header:{selector:".issue-header-container",regionType:s},body:{selector:".issue-body-container",regionType:s}},modelEvents:{updated:"update"},showLoading:function(){this.$el.addClass("loading")},hideLoading:function(){this.$el.removeClass("loading")},focusComment:function(e){this.$("#activitymodule .focused").removeClass("focused"),this.$("#comment-"+e).addClass("focused"),this.$(".js-stalker").trigger("refresh")},serializeData:function(){return{isNewIssueViewEnabled:JIRA.Issues.Api.isNewIssueViewEnabled()}},update:function(e){this._closeDropdowns(),e.initialize&&!e.stopRendering&&this.render(),e.reason&&e.reason.action===n.EDIT_COMMENT&&this.focusComment(e.reason.meta.commentId),this._bringViewIssueElementIntoView()},remove:function(){return this.stopListening(),this.$el.empty(),this},onRender:function(){this.$el.addClass(this.className),this.$el.attr("tabindex","-1"),this._bringViewIssueElementIntoView()},onApplyToDom:function(){this._bringViewIssueElementIntoView(),this.trigger("render")},_bringViewIssueElementIntoView:function(){var e=this.model.get("entity").viewIssueQuery;if(e){var t;e.focusedCommentId?t="#comment-"+e.focusedCommentId:(e.attachmentSortBy||e.attachmentOrder||e.attachmentViewMode)&&(t="#attachmentmodule"),t&&o(t).scrollIntoView({marginBottom:200,marginTop:200})}},_closeDropdowns:function(){this.$el.find(".aui-dropdown2-trigger.active").trigger("aui-button-invoke")}})});
//# sourceMappingURL=IssueView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/views/error/ErrorView.js' */
define("jira/components/issueviewer/views/error",["require"],function(e){"use strict";var s=e("jira/components/libs/marionette-1.4.1/layout");return s.extend({className:"issue-container",regions:{pager:"#issue-header-pager"},remove:function(){return this.stopListening(),this.$el.empty(),this},onRender:function(){this.$el.addClass(this.className),this.$el.attr("tabindex","-1")}})});
//# sourceMappingURL=ErrorView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/views/error/ErrorGenericView.js' */
define("jira/components/issueviewer/views/errorgeneric",["require"],function(e){"use strict";var r=e("jira/components/issueviewer/views/error"),i=e("jira/components/issueviewer/templates"),n=e("jira/components/util/browser");return r.extend({template:i.Error.Generic,events:{"click #issue-error-reload-button":function(){n.locationReload()}}})});
//# sourceMappingURL=ErrorGenericView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/views/error/ErrorNotFoundView.js' */
define("jira/components/issueviewer/views/errornotfound",["require"],function(r){"use strict";var e=r("jira/components/issueviewer/views/error"),i=r("jira/components/issueviewer/templates"),n=r("jira/components/libs/underscore");return e.extend({template:i.Error.DoesNotExist,initialize:function(r){r=r||{},this.showReturnToSearchOnError=r.showReturnToSearchOnError},triggers:{"click #return-to-search":"returnToSearch"},serializeData:function(){var r=this.showReturnToSearchOnError;return n.isFunction(r)&&(r=r()),{hideReturnToSearch:!r}}})});
//# sourceMappingURL=ErrorNotFoundView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/controllers/IssueController.js' */
define("jira/components/issueviewer/controllers/issue",["require"],function(e){"use strict";var i=e("jira/issue"),s=e("jira/components/issueviewer/views/issuebody"),t=e("jira/components/issueviewer/views/issueheader"),n=e("jira/components/issueviewer/views/issuepanels"),o=e("jira/components/issueviewer/views/issue"),r=e("jira/components/libs/marionette-1.4.1/controller"),d=e("jira/components/libs/underscore"),a=e("jquery"),h=e("jira/components/issueviewer/services/breadcrumbs-project-hider"),l=i.CommentForm;return r.extend({initialize:function(e){this.model=e.model,this.shouldRenderIssueHeader="undefined"==typeof e.shouldRenderIssueHeader||e.shouldRenderIssueHeader},_createViews:function(){this.view=this._createMainView(),this.bodyView=this._createBodyView(),this.headerView=this._createHeaderView(),this.leftPanelsView=this._createPanelsView(this.model.getPanels().getLeftPanels()),this.rightPanelsView=this._createPanelsView(this.model.getPanels().getRightPanels()),this.infoPanelsView=this._createPanelsView(this.model.getPanels().getInfoPanels())},_createMainView:function(){var e=new o({model:this.model,el:this.$el});return this.listenTo(e,{render:function(){this.trigger("renderMainView",e.$el)}}),e},_createBodyView:function(){return new s({model:this.model})},_createHeaderView:function(){var e=new t({model:this.model});return this.listenAndRethrow(e,"panelRendered"),this.listenTo(e,{updated:function(){this.trigger("render",{pager:this.view.$(this.headerView.pager.el)},this.model.getIssueInfo()),this._replaceBreadcrumbsView()},individualPanelRendered:function(e){this.trigger("individualPanelRendered",e)}}),this._replaceBreadcrumbsView(),e},_replaceBreadcrumbsView:function(){var e=function(e,i){h.bindToSidebarEvents(e,a(".issue-header-content"),i)};JIRA.API.getSidebar().done(function(i){e(i,!1)}),JIRA.API.getNavigationApi().then(function(i){e(i,!0)})},_createPanelsView:function(e){var i=new n({collection:e});return this.listenTo(i,{"itemview:replacedFocusedPanel":function(){this.trigger("replacedFocusedPanel")},"itemview:panelRendered":function(e,i,s,t){this.trigger("panelRendered",i,s,t)},"itemview:individualPanelRendered":function(e,i){this.trigger("individualPanelRendered",i)}}),i},createView:function(){this._createViews(),this.listenTo(this.view,"render",function(){var e=JIRA.Issues.Api.isNewIssueViewEnabled();this.shouldRenderIssueHeader&&(this.view.header.show(this.headerView),this.trigger("render",{pager:this.view.$(this.headerView.pager.el)},d.extend(this.model.getIssueInfo(),{loadedFromDom:!1}))),e?AJS.$("body").trigger("new-issue-body-container-for-gin-rendered"):(this.view.body.show(this.bodyView),this.bodyView.leftPanels.show(this.leftPanelsView),this.bodyView.rightPanels.show(this.rightPanelsView),this.bodyView.infoPanels.show(this.infoPanelsView))})},createViewFromDom:function(){this._createViews(),this.listenTo(this.view,"applyToDom",function(){function e(e,i,s){i.setElement(s),i.applyToDom(),e.attachView(i)}e(this.view.body,this.bodyView,this.view.$el.find(".issue-body-content")),e(this.view.body,this.headerView,this.view.$el.find("#stalker")),e(this.bodyView.leftPanels,this.leftPanelsView,this.bodyView.$el.find(this.bodyView.leftPanels.el)),e(this.bodyView.rightPanels,this.rightPanelsView,this.bodyView.$el.find(this.bodyView.rightPanels.el)),e(this.bodyView.infoPanels,this.infoPanelsView,this.bodyView.$el.find(this.bodyView.infoPanels.el)),this.trigger("render",{pager:this.view.$(this.headerView.pager.el)},d.extend(this.model.getIssueInfo(),{loadedFromDom:!0}))})},setElement:function(e){this.$el=e,this.view&&this.view.setElement(e)},applyToDom:function(e){e.id=+e.id,this.model.updateFromEntity(e),this.createViewFromDom(),this.view.applyToDom()},show:function(){this.view?this.trigger("render",{pager:this.view.$(this.headerView.pager.el)},d.extend(this.model.getIssueInfo(),{loadedFromDom:!1})):(this.createView(),this.view.render()),this.view.hideLoading()},close:function(){this.view&&this.view.close(),this.hideLoading(),delete this.view},hideLoading:function(){this.view&&this.view.hideLoading()},showLoading:function(){this.view&&this.view.showLoading()},canDismissComment:function(){var e,i=l;if(!i.getForm().data("dismissed")&&(e=i.handleBrowseAway())){if(!confirm(e))return i.focus(),!1;i.getForm().data("dismissed",!0)}return!0},applyResponsiveDesign:function(){if(this.$el){var e=this.$el.width();this.$el.toggleClass("skinny",e<900),this.$el.toggleClass("very-skinny",e<600)}},focus:function(){this.view&&this.headerView.focus()},initialFocus:function(){this.view&&this.headerView.initialFocus()}})});
//# sourceMappingURL=IssueController-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/controllers/ErrorController.js' */
define("jira/components/issueviewer/controllers/error",["require"],function(e){"use strict";var r=e("jira/components/issueviewer/views/errorgeneric"),i=e("jira/components/issueviewer/views/errornotfound"),t=e("jira/components/libs/marionette-1.4.1/controller"),o=e("jira/components/issueviewer/utils");return t.extend({initialize:function(e){this.contextPath=e.contextPath,this.showReturnToSearchOnError=e.showReturnToSearchOnError},render:function(e,t){switch(e){case"auth":this._renderErrorAuth(t);break;case"forbidden":case"notfound":this._renderErrorView(new i({showReturnToSearchOnError:this.showReturnToSearchOnError}));break;case"generic":default:this._renderErrorView(new r)}},applyToDom:function(e,t){switch(e){case"auth":this._renderErrorAuth(t);break;case"forbidden":case"notfound":this._renderErrorViewFromDom(new i({showReturnToSearchOnError:this.showReturnToSearchOnError}));break;case"generic":default:this._renderErrorViewFromDom(new r)}},close:function(){this.view&&(this.view.close(),delete this.view)},setElement:function(e){this._$el=e,this.view&&this.view.setElement(e)},_renderErrorAuth:function(e){var r=this.contextPath+"/login.jsp?os_destination="+encodeURIComponent("/browse/"+e);window.location.replace(r)},_renderErrorView:function(e){this.trigger("before:render"),o.hideDropdown(),this.view=e,this.view.setElement(this._$el),this.view.render(),this.listenAndRethrow(this.view,"returnToSearch"),this.trigger("render",{pager:this.view.$(this.view.pager.el),isError:!0},{loadedFromDom:!1,issueId:null})},_renderErrorViewFromDom:function(e){this.trigger("before:render"),o.hideDropdown(),this.view=e,this.view.setElement(this._$el),this.view.applyToDom(),this.listenAndRethrow(this.view,"returnToSearch"),this.trigger("render",{pager:this.view.$(this.view.pager.el),isError:!0},{loadedFromDom:!0,issueId:null})},isRendered:function(){return Boolean(this.view)}})});
//# sourceMappingURL=ErrorController-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/services/IssueLoaderService.js' */
define("jira/components/issueviewer/services/issueloader",["require"],function(e){"use strict";var i=e("jira/components/libs/marionette-1.4.1/controller"),t=e("jquery"),n=e("jira/components/issueviewer/legacy/issuefieldutil");return i.extend({initialize:function(){this._promiseManager=new t.RecurringPromise,this._updatingPromise=this._promiseManager.sub(),this._updatingPromise.done(this._onUpdatingDone.bind(this)).fail(this._onUpdatingError.bind(this)),this._loadingPromise=this._promiseManager.sub(),this._loadingPromise.done(this._onLoadingDone.bind(this)).fail(this._onLoadingError.bind(this))},cancel:function(){this._promiseManager.reset()},update:function(e){function i(e){return function(){return{taskKey:e,data:arguments,startIssueLoad:new Date}}}var n,r=e.issueEntity,s=e.mergeIntoCurrent,a=e.viewIssueData,o=!!e.detailView,d=new t.Deferred;return n=this._updatingPromise.add(a.get(r.key,!0,{issueEntity:r,loadingDeferred:d,mergeIntoCurrent:s,startIssueLoad:new Date,detailView:o}).pipe(i("issue"),i("issue"))),n.fail(function(){d.reject.apply(d,arguments)}),d.promise()},load:function(e){var i=e.issueEntity,n=e.viewIssueData,r=!!i.detailView;this._currentlyLoading=!0;var s=new t.Deferred;return this._loadingPromise.add(n.get(i.key,!1,{issueEntity:i,loadFields:!1,loadingDeferred:s,startIssueLoad:new Date,detailView:r})),s.promise()},isLoading:function(){return this._currentlyLoading},_onLoadingDone:function(e,i,t){var r=t.issueEntity;r.id=e.issue.id,r.key=e.issue.key,e.pager||(e.pager=r.pager),n.transformFieldHtml(e),this._currentlyLoading=!1,i.loadDuration=new Date-t.startIssueLoad,this.trigger("issueLoaded",e,i,t),t.loadingDeferred.resolve(e,i,t)},_onUpdatingDone:function(e){var i=e.data[1];i&&(i.isUpdate=!0),this._onLoadingDone.apply(this,e.data)},_onLoadingError:function(e,i,t){var n=t.issueEntity,r={issueId:n.id,issueKey:n.key,response:e};this._currentlyLoading=!1;var s;switch(e.status){case 401:s="auth";break;case 403:s="forbidden";break;case 404:s="notfound";break;default:s="generic"}this.trigger("error",s,r),t.loadingDeferred.reject()},_onUpdatingError:function(e){this._onLoadingError.apply(this,e.data)}})});
//# sourceMappingURL=IssueLoaderService-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/services/MetadataService.js' */
define("jira/components/issueviewer/services/metadataservice",["require"],function(e){"use strict";var t=e("jira/util/data/meta"),a=e("jira/components/libs/underscore");return{removeIssueMetadata:function(e){var s=e.getEntity();s.metadata?a.each(s.metadata,function(e,a){t.set(a,null)}):t.get("issue-key")&&t.set("issue-key",null)},addIssueMetadata:function(e){var s=e.getEntity();a.each(s.metadata,function(e,a){t.set(a,e)})}}});
//# sourceMappingURL=MetadataService-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/services/LinksCapturer.js' */
define("jira/components/issueviewer/linkscapturer",["require"],function(e){"use strict";var i=e("jira/components/libs/underscore"),t=e("jira/util/events"),n=e("jira/ajs/layer/inline-layer"),s=e("jquery"),o=e("jira/components/libs/marionette-1.4.1/controller"),a=e("jira/message"),r=e("jira/ajs/ajax/smart-ajax"),u=e("jira/components/libs/uri");return o.extend({initialize:function(){i.bindAll(this,"_onRefineViewEvents","_offRefineViewEvents","_handleReviewViewEvents")},capture:function(e){e!==this.el&&(this.el=e,this.linksToOtherIssues(),this.linksToReorderSubtasks(),this.viewOptionsForCurrentIssue())},linksToOtherIssues:function(){this._isRapidBoardPage()||s(this.el).on("simpleClick","a.issue-link[data-issue-key]",function(i){i.preventDefault();var t=s(i.target).closest("a").data("issue-key"),n=t.split("-")[0];JIRA.API.getSidebar().done(function(e){e.updateData({projectKey:n},!0)}),e("jira/navigation").then(function(e){e.setProjectRootView()}),this.trigger("linkToIssue",{issueKey:t})}.bind(this))},linksToReorderSubtasks:function(){s(this.el).on("simpleClick",".subtask-reorder a",function(e){e.target.href&&(e.preventDefault(),s.ajax({type:"GET",data:{disableRedirect:!0},url:e.target.href}).done(function(){this.trigger("reorderSubtasks")}.bind(this)).fail(function(e){a.showErrorMsg(r.buildSimpleErrorContent(e),{closeable:!0})}))}.bind(this))},_handleReviewViewEvents:function(e){var i=e.currentTarget;s(i).parents("ul").find("a.aui-checked").removeClass("aui-checked"),s(i).addClass("aui-checked");var t=new u(i.href).query(!0),n=this.triggerPreventable("refineViewer",{query:t});n.isPrevented&&e.preventDefault()},_onRefineViewEvents:function(e,i){s(i).on("simpleClick",["#attachment-sorting-options a","#attachment-sorting-order-options a","#attachment-view-mode-options a","#subtasks-show-all","#subtasks-show-open"].join(","),this._handleReviewViewEvents)},_offRefineViewEvents:function(e,i){s(i).off("simpleClick",["#attachment-sorting-options a","#attachment-sorting-order-options a","#attachment-view-mode-options a","#subtasks-show-all","#subtasks-show-open"].join(","),this._handleReviewViewEvents)},_location:function(){return window.location},_isRapidBoardPage:function(){return this._location().href.indexOf("RapidBoard.jspa")>=0},viewOptionsForCurrentIssue:function(){t.bind(n.EVENTS.show,this._onRefineViewEvents),t.bind(n.EVENTS.hide,this._offRefineViewEvents)},destroy:function(){t.unbind(n.EVENTS.show,this._onRefineViewEvents),t.unbind(n.EVENTS.hide,this._offRefineViewEvents)}})});
//# sourceMappingURL=LinksCapturer-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/services/BreadcrumbsProjectHider.js' */
define("jira/components/issueviewer/services/breadcrumbs-project-hider",["require"],function(e){function n(e,n){var o=n?e.isCollapsed():e.isCollapsed(!0);o?i():r()}function r(){var e=d.find(t);e.length>0&&(a=e.detach())}function i(){var e=d.find(s);a&&0===e.find(t).length&&a.prependTo(e)}var o=(e("jquery"),{}),t=".breadcrumbs-project-name",s=".aui-nav-breadcrumbs",a=null,d=null;return o.bindToSidebarEvents=function(e,o,t){if(t){if(!e.isInProjectContext())return}else if(!e.isProjectSidebar(!0))return;d=o,n(e,t),t?(e.onCollapseEnd(i),e.onExpandEnd(r)):(e.off(e.events.SIDEBAR_COLLAPSE_END,i,!0),e.on(e.events.SIDEBAR_COLLAPSE_END,i,!0),e.off(e.events.SIDEBAR_EXPAND_END,r,!0),e.on(e.events.SIDEBAR_EXPAND_END,r,!0))},o});
//# sourceMappingURL=BreadcrumbsProjectHider-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/services/OptInNewIssueViewService.js' */
define("jira/components/issueviewer/services/optinnewissueviewservice",["require"],function(e){"use strict";var t=e("jira/ajs/ajax/smart-ajax"),a=e("jira/util/users/logged-in-user"),n=e("wrm/context-path"),s=n(),r={"Content-Type":"application/json",Accept:["application/json","text/javascript","*/*"]},i=function(){var e=function(){return t.makeRequest({type:"PUT",dataType:"json",data:JSON.stringify({isEnabled:!0}),processData:!1,credentials:"same-origin",headers:r,url:s+"/rest/greenhopper/1.0/profile/labs-panel/issue-details-popup"})},n=a.accountId(),i="jira.user.issue.should.show.welcome.message",o=s+"/rest/api/latest/user/properties/"+i+"?accountId="+encodeURIComponent(n),u=function(){return t.makeRequest({type:"PUT",dataType:"json",data:"true",processData:!1,credentials:"same-origin",headers:r,url:o})};return Promise.all([e(),u()]).then(function(){})["catch"](function(){})["finally"](function(){window.location.reload()})};return{optIn:i}});
//# sourceMappingURL=OptInNewIssueViewService-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/legacy/IssueEventBus.js' */
define("jira/components/issueviewer/legacy/issueeventbus",["require"],function(e){"use strict";var s=e("jira/components/libs/brace");return s.Model.extend({namedAttributes:["issueId"],namedEvents:["save","saveSuccess","savingStarted","saveError","panelRendered","replacedFocusedPanel","fieldSubmitted","dismiss","refreshIssue","issueRefreshed","updateFromDom","updateStatusColor","quickEditKeyPressed","openFocusShifter"]})});
//# sourceMappingURL=IssueEventBus-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/legacy/AsyncData.js' */
define("jira/components/issueviewer/legacy/asyncdata",["require"],function(e){"use strict";var t=e("jira/components/libs/brace"),n=e("jira/components/libs/underscore"),i=e("jquery");return t.Evented.extend({namedEvents:["change"],initialize:function(e){this.data={},this.pendings={},this.accessIndex=0,e&&(this.disableCache=e.disableCache,this.maxCacheSize=e.maxCacheSize)},get:function(e,t,a){var r=new i.Deferred,s=this.disableCache?{}:this.data,h=function(t,i){var h=this._set(s,e,n.defaults(t,{accessIndex:this.accessIndex++}),!0,a),d=n.defaults({changed:h},i,s[e]);a&&a.mergeIntoCurrent&&(d.mergeIntoCurrent=!0),s[e]&&!s[e].error?r.resolve(s[e].value,d,a):r.reject(s[e]&&s[e].value,d,a)}.bind(this),d=function(t){var n=this.fetch(e,a);this.setPending(e,n,function(e){h({value:e,error:!1,updated:new Date},{initialLoad:t})},function(e){var n={error:!0,updated:new Date};void 0!==e&&(n.value=e),h(n,{initialLoad:t,error:!0})})}.bind(this),u=function(){h({},{fromCache:!0})},c=function(){this.pendings[e].always(n.bind(h,this,{},{initialLoad:!0}))}.bind(this);return t||this.disableCache?d(!1):this.hasCached(e)?u():this.hasPending(e)?c():d(!0),r.promise()},setPending:function(e,t,n,a){return this.hasPending(e)?this.pendings[e].update(t):this.pendings[e]=new i.ConcurrentDeferred(t),this.pendings[e].done(function(e){n(e)}).fail(function(e){a(e)})},getIdByValue:function(e){var t;for(t in this.data)if(this.data[t].value===e)return t;return null},getMeta:function(e){return this.data[e]||{}},getAllCached:function(){var e={};return n.each(this.data,function(t,n){e[n]=t.value}),e},hasCached:function(e){var t=this.getMeta(e);return void 0!==t.value||t.error===!0},hasError:function(e){var t=this.getMeta(e);return t.error===!0},hasPending:function(e){var t=this.pendings[e];return!!t&&t.isPending()},set:function(e,t){return this._set(this.data,e,{value:t,updated:new Date},!0)},remove:function(e){return!!this.data[e]&&(delete this.data[e],this.triggerChange(),!0)},setError:function(e,t){var n={error:!0,updated:new Date};return void 0!==t&&(n.value=t),this._set(this.data,e,n,!0)},setMultiple:function(e){var t=new Date,i=!1;return n.each(e,function(e,a){e=n.pick(e,"value","error"),e.updated=t,this._set(this.data,a,e,!1)&&(i=!0)}.bind(this)),i&&this.triggerChange(),i},reset:function(e){this.data={},this.pendings={},this.accessIndex=0,e?this.setMultiple(e):this.triggerChange()},_set:function(e,t,i,a,r){this.disableCache&&e===this.data&&(e={});var s=e[t]?n.clone(e[t]):{},h=this.mergeFetchedAndCached(s,i,r?r:{},e[t]);return!a||e[t]&&!h&&e[t].error===s.error||e!==this.data||this.triggerChange(),!e[t]&&this.maxCacheSize&&n.keys(e).length===this.maxCacheSize?i.accessIndex&&(this._dropItem(e),e[t]=s):e[t]=s,h},_dropItem:function(e){var t=null;for(var n in e){if(!e[n].accessIndex){t=n;break}(null===t||e[n].accessIndex<e[t].accessIndex)&&(t=n)}null!==t&&delete e[t]},fetch:function(e){var t=this.getMeta(e),n=new i.Deferred;return!this.hasCached(e)||t.error?n.reject(t.value):n.resolve(t.value),n.promise()},mergeFetchedAndCached:function(e,t,i,a){return n.extend(e,t),!a||a.value!==e.value||a.error!==e.error}})});
//# sourceMappingURL=AsyncData-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/legacy/ViewIssueData.js' */
define("jira/components/issueviewer/legacy/viewissuedata",["require"],function(e){"use strict";var s=e("jira/components/libs/underscore"),i=e("jira/components/issueviewer/legacy/asyncdata"),n=e("jira/util/data/meta"),t=e("jquery"),u=window.AJS.contextPath(),a=e("jira/featureflags/feature-manager"),r=a.isFeatureEnabled("empanada.gin.enable-frontend-operational-events-for-sli");return i.extend({initialize:function(e){e=e||{},i.prototype.initialize.call(this,s.defaults(e||{},{disableCache:!1,maxCacheSize:n.get("viewissue-max-cache-size")}))},fetch:function(e,i){var n={issueKey:e,decorator:"none",prefetch:!!i.prefetch};if(n.shouldUpdateCurrentProject=!i.detailView,i.mergeIntoCurrent&&this.data&&this.data[e]&&this.data[e].value&&this.data[e].value.issue){n.lastReadTime=this.data[e].value.readTime,n.fields=[],s.each(this.data[e].value.fields,function(e){n.fields.push(e.id+":"+e.contentId)}),n.issue=["summary:"+this.data[e].value.issue.summaryContentId],n.links=[];var a=function h(e){s.each(e.links,function(e){n.links.push(e.id+":"+e.contentId)}),s.each(e.groups,function(e){h(e)})};s.each(this.data[e].value.issue.operations.linkGroups,function(e){a(e)}),n.panels=[];var o=this,d=function(i){s.each(o.data[e].value.panels[i],function(e){n.panels.push(e.completeKey+":"+e.contentId)})};d("leftPanels"),d("rightPanels"),d("infoPanels")}"loadFields"in i&&(n.loadFields=i.loadFields),i.issueEntity&&s.defaults(n,i.issueEntity.viewIssueQuery);var l="true"===t('meta[name="ajs-new-jira-issue-view-gin-enabled"]').attr("content");if(l&&i.detailView){var p=t.Deferred();return p.resolve({issue:{id:void 0,key:n.issueKey,status:{name:void 0}}})}var c=t.ajax({url:u+"/secure/AjaxIssueAction!default.jspa",headers:{"X-SITEMESH-OFF":!0},data:n,type:i.mergeIntoCurrent?"POST":"GET"}),p=c.pipe(function(e){return r&&JIRA&&JIRA.Issues&&JIRA.Issues.Application&&JIRA.Issues.Application.fireSuccessSlaEvent&&JIRA.Issues.Application.fireSuccessSlaEvent("getLegacyIssueViewData"),e},function(e){return r&&JIRA&&JIRA.Issues&&JIRA.Issues.Application&&JIRA.Issues.Application.fireFailSlaEvent&&e.status>=500&&JIRA.Issues.Application.fireFailSlaEvent("getLegacyIssueViewData",{reason:"get-legacy-issue-view-data-failed-with-status-code",statusCode:e.status}),s.pick(e,"status","responseText","statusText")});return p.abort=function(){c.abort.apply(c,arguments)},p},mergeFetchedAndCached:function(e,i,n){if(this._skipMerging(e,i,n))return s.extend(e,i),null;s.each(s.pairs(i),function(s){"value"!==s[0]&&(e[s[0]]=s[1])});var t=i.value,u=[],a=[],r=[];s.each(t.removedContentIds,function(e,i){var n;"fields"===i?n=u:"panels"===i?n=a:"links"===i&&(n=r),n&&s.each(e,function(e){n.push(e)})});var o=t.fields,d=t.issue.operations.linkGroups,l=t.panels,p=t.issue.summary,c=t.issue.primaryActions,h=t.issue.transitions;if(this._nothingChanged(u,a,r,o,l,d,p))return null;var g={updated:{},added:{},deleted:{}},f=e.value,v=this._comparator;return(u.length>0||o.length>0)&&this._mergeFields(o,f,g,u),(a.length>0||l.leftPanels.length>0||l.rightPanels.length>0||l.infoPanels.length>0)&&this._mergePanels(l,f,g,a,v),(r.length>0||d.length>0)&&this._mergeLinks(d,f,g,r,v),p&&this._mergeSummary(t,f,g),c&&this._mergePrimaryActions(t,f,g),h&&this._mergeTransitions(t,f,g),f.issue.status=t.issue.status,g},_skipMerging:function(e,i,n){return s.isEmpty(e)||!n.mergeIntoCurrent||!e.value||!e.value.issue||i.error===!0},_nothingChanged:function(e,s,i,n,t,u,a){return 0===e.length&&0===s.length&&0===i.length&&0===n.length&&0===u.length&&0===t.leftPanels.length&&0===t.rightPanels.length&&0===t.infoPanels.length&&!a},_mergeFields:function(e,i,n,t){n.added.fields=[],n.updated.fields=[],n.deleted.fields=[],s.each(e,function(e){var t=s.find(i.fields,function(s){return s.id===e.id});t?n.updated.fields.push(e.id):n.added.fields.push(e.id)});var u=e;s.each(i.fields,function(e){s.contains(t,e.id)?n.deleted.fields.push(e.id):s.contains(n.updated.fields,e.id)||u.push(e)}),i.fields=u},_mergeSummary:function(e,s,i){i.updated.issue=["summary"],s.issue.summary=e.issue.summary,s.issue.summaryContentId=e.issue.summaryContentId},_mergePrimaryActions:function(e,s,i){i.updated.issue=["primaryActions"],s.issue.primaryActions=e.issue.primaryActions},_mergeTransitions:function(e,s,i){i.updated.issue=["transitions"],s.issue.transitions=e.issue.transitions},_mergePanels:function(e,i,n,t,u){n.added.panels={},n.updated.panels={},n.deleted.panels={};var a=function(a){n.added.panels[a]=[],n.updated.panels[a]=[],n.deleted.panels[a]=[],s.each(e[a],function(e){var t=s.find(i.panels[a],function(s){return s.id===e.id});t?n.updated.panels[a].push(e.id):n.added.panels[a].push(e.id)});var r=e[a];s.each(i.panels[a],function(e){s.contains(t,e.completeKey)?n.deleted.panels[a].push(e.id):s.contains(n.updated.panels[a],e.id)||r.push(e)}),r.sort(u),i.panels[a]=r};a("leftPanels"),a("rightPanels"),a("infoPanels")},_mergeLinks:function(e,s,i,n,t){i.added.groups={},i.updated.groups={},i.deleted.groups={};var u=[];this._mergeOperationsLinks(e,s,u,i,n,t),this._mergeToolsLinks(e,s,u,i,n,t),s.issue.operations.linkGroups=u},_mergeOperationsLinks:function(e,i,n,t,u,a){t.added.groups["view.issue.opsbar"]=[],t.updated.groups["view.issue.opsbar"]=[],t.deleted.groups["view.issue.opsbar"]=[];var r=s.find(i.issue.operations.linkGroups,function(e){return"view.issue.opsbar"===e.id}),o=s.find(e,function(e){return"view.issue.opsbar"===e.id}),d={},l={};if(o&&s.each(o.groups,function(e){var i=s.find(r.groups,function(s){return e.id===s.id});if(i?t.updated.groups["view.issue.opsbar"].push(e.id):t.added.groups["view.issue.opsbar"].push(e.id),s.each(e.links,function(s){d[s.id]=s,l[s.id]=e.id}),e.groups&&e.groups.length>0){var n=e.groups[0];s.each(n.groups,function(e){s.each(e.links,function(s){d[s.id]=s,l[s.id]=e.id})})}}),r){var p=[];o&&s.each(o.groups,function(e){s.contains(t.added.groups["view.issue.opsbar"],e.id)&&p.push(e)}),s.each(r.groups,function(e){var i=[],n=null;o&&(n=s.find(o.groups,function(s){return e.id===s.id}),n&&s.each(n.links,function(n){var t=s.find(e.links,function(e){return n.id===e.id});t||i.push(n)}));var r=!1,c=function(e,i){s.each(e.links,function(n){var t=l[n.id];t&&t!==e.id?r=!0:d[n.id]?i.push(d[n.id]):s.contains(u,n.id)?r=!0:i.push(n)})};c(e,i),i.sort(a),e.links=i;var h=null;n&&n.groups&&n.groups.length>0&&(h=n.groups[0]);var g=null;if(e.groups&&e.groups.length>0){g=e.groups[0];var f=[];h&&s.each(h.groups,function(e){var i=s.find(g.groups,function(s){return e.id===s.id});i||f.push(e)}),s.each(g.groups,function(e){var i=[];if(h){var n=s.find(h.groups,function(s){return s.id===e.id});n&&s.each(n.links,function(n){var t=s.find(e.links,function(e){return n.id===e.id});t||i.push(n)})}c(e,i),i.length>0&&(i.sort(a),e.links=i,f.push(e))}),f.length>0?(f.sort(a),g.groups=f):(g=null,r=!0)}else h&&(g=n.groups[0]);e.groups=[],g&&(e.groups[0]=g),i.length>0||g?(p.push(e),r&&!s.contains(t.updated.groups["view.issue.opsbar"],e.id)&&t.updated.groups["view.issue.opsbar"].push(e.id)):t.deleted.groups["view.issue.opsbar"].push(e.id)}),p.length>0&&(p.sort(a),r.groups=p,n.push(r))}else o&&n.push(o);t.added.groups["view.issue.opsbar"].sort(),t.deleted.groups["view.issue.opsbar"].sort(),t.updated.groups["view.issue.opsbar"].sort()},_updatedLinks:function(e,i,n,t){function u(e){return!s.contains(n,e.id)}function a(i){return!s.findWhere(e,{id:i.id})}var r=s.chain(i).filter(a).union(e).filter(u).value();return r.sort(t),r},_collectAllLinks:function(e){var i=e.links||[],n=e.groups||[];return s.chain(n).map(this._collectAllLinks.bind(this)).flatten().union(i).value()},_mergeGroupLinks:function(e,i,n,t,u){s.map(e.groups||[],this._mergeGroupLinks.bind(this));var a=[],r=null;i&&i.groups&&i.groups.length>0&&(r=s.find(i.groups,function(s){return e.id===s.id})),r&&s.each(r.links,function(i){var n=s.find(e.links,function(e){return i.id===e.id});n||a.push(i)}),s.each(e.links,function(e){n[e.id]?a.push(n[e.id]):s.contains(t,e.id)||a.push(e)}),a.length>0&&(a.sort(u),e.links=a)},_mergeToolsLinks:function(e,i,n,u,a,r){u.updated.groups["jira.issue.tools"]=!1;var o=s.find(i.issue.operations.linkGroups,function(e){return"jira.issue.tools"===e.id}),d=s.find(e,function(e){return"jira.issue.tools"===e.id}),l={};if(d&&(u.updated.groups["jira.issue.tools"]=!0,l=s.indexBy(this._collectAllLinks(d),"id")),o){var p=d&&d.links||[],c=o.links||[];o.links=this._updatedLinks(p,c,a,r),o.groups&&o.groups.length>0?s.each(o.groups,function(e){this._mergeGroupLinks(e,d,l,a,r)}.bind(this)):d.groups&&d.groups.length>0&&(o.groups=t.extend(!0,{},d.groups)),n.push(o)}else d&&n.push(d)},_comparator:function(e,s){return e.weight&&s.weight?e.weight>s.weight?1:e.weight<s.weight?-1:0:e.weight&&!s.weight?1:!e.weight&&s.weight?-1:0},updateIssue:function(e,s){var i=this.getMeta(e);i&&i.value&&(i.value.fields=s.fields||{})}})});
//# sourceMappingURL=ViewIssueData-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/legacy/IssueFieldUtil.js' */
define("jira/components/issueviewer/legacy/issuefieldutil",["require"],function(e){"use strict";var t=e("jira/components/libs/underscore"),i=e("jquery"),r={getFieldSelector:function(e){return"issuetype"===e?"#type-val":"fixVersions"===e?"#fixfor-val":"summary"===e?"#summary-val":"labels"===e?"#wrap-labels .value":"duedate"===e?"#due-date":"#"+e+"-val"},matchesFieldSelector:function(e){return 1===i(r.getFieldSelector(e)).length},transformFieldHtml:function(e){return e.fields=t.map(e.fields,function(e){var t=i("<div />").htmlCatchExceptions(e.editHtml);return 0!==t.find("input.radio,input.checkbox").length?t.find("legend").eq(0).remove():t.find("label").eq(0).remove(),{id:e.id,label:e.label,editHtml:t.html(),required:e.required,contentId:e.contentId}}),e},getAccessKeyModifier:function(){var e=i("#home_link_drop").attr("title"),t=/\(([\w\+]+)\+\w\)/i;return t.test(e)?t.exec(e)[1]:"Alt"}};return r});
//# sourceMappingURL=IssueFieldUtil-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/Utils.js' */
define("jira/components/issueviewer/utils",["require"],function(e){"use strict";var i=e("aui/inline-dialog"),r=e("jira/ajs/layer/inline-layer"),n=e("jquery");return{hideLightbox:function(){n.fancybox.close()},hideDropdown:function(){if(i.current&&"column-picker-dialog"!==i.current.id&&i.current.hide(),r.current){var e=r.current.options.offsetTarget();e instanceof n&&(e.is(":visible")||r.current.hide())}}}});
//# sourceMappingURL=Utils-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/actions.js' */
define("jira/components/issueviewer/actions",["require"],function(e){"use strict";var n=e("jira/components/libs/underscore");return n.extend(AJS.namespace("JIRA.Issues.Actions"),{EDIT_COMMENT:"editComment"})});
//# sourceMappingURL=actions-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/eventtypes.js' */
define("jira/components/issueviewer/eventtypes",["require"],function(e){"use strict";var s=e("jira/util/events/types");return s.ISSUE_REFRESHED="issueRefreshed",s.PANEL_REFRESHED="panelRefreshed",s});
//# sourceMappingURL=eventtypes-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/analytics/IssueOpsbar.js' */
define("jira/components/issueviewer/analytics/issueopsbar",["require"],function(t){"use strict";var i=t("jira/components/libs/underscore"),e=t("jquery"),n=t("jira/viewissue/analytics-utils"),r=t("jira/components/utils/ajshelper"),s=t("jira/components/analytics-tracker/tracker"),a=function(t){this.issueId=t.model.get("id"),this.$el=t.$el,this.bindEventsToOpsbar()};return a.prototype.triggerEvent=function(t){s.trackEvent("viewissue","opsbar.operation",t),r.trigger("analyticsEvent",{name:"kickass.opsbar.operation",data:t})},a.prototype._getParamsButtonMain=function(t,e,n){return i.extend(this._getParamsCommon(t),{issueId:this.issueId,id:e.attr("id"),idx:n})},a.prototype._getParamsButtonSubmenu=function(t,e,n,r,s){return i.extend(this._getParamsCommon(t),{issueId:this.issueId,id:e.attr("id"),idx:n,parentId:r.attr("id"),parentIdx:s})},a.prototype._getParamsCommon=function(){return{context:n.context()}},a.prototype.bindEventsToOpsbar=function(){var t=this.$el.find(".toolbar-analytics");t.each(function(t,i){var n=e(i),r=n.find("a.toolbar-trigger");r.click(function(i){this.triggerEvent(this._getParamsButtonMain(i,r,t))}.bind(this));var s=n.find("li.aui-list-item a");s.length>=1&&s.each(function(i,n){var s=e(n);s.click(function(e){this.triggerEvent(this._getParamsButtonSubmenu(e,s,i,r,t))}.bind(this))}.bind(this))}.bind(this))},a});
//# sourceMappingURL=IssueOpsbar-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/analytics/IssueUxMetrics.js' */
define("jira/components/issueviewer/analytics/issue-uxmetrics",["jquery","jira/components/analytics-tracker/tracker"],function(t,e){"use strict";return{trackPageMetrics:function(){var s=t("#assignee-val").text().trim().search("Unassigned")===-1,n=0!==t("#reporter-val").text().trim().length,i=t("#opsbar-opsbar-transitions .issueaction-workflow-transition").length,o=t("#description-val"),l=o.text().trim().length,a=o.height(),u=t("#details-module ul#issuedetails>li").length,r=t("#customfield-tabs ul.property-list>li.item").length,c=t("#customfield-tabs ul.property-list").length,m=t("#details-module #wrap-labels ul>li").length,d=m>0?m-1:0,h=t("#details-module ul#issuedetails>li li").length,p=t("#customfield-tabs ul.property-list>li.item li").length,g=t("ol#attachment_thumbnails>li").length,C=t(".issue-body-content .module.toggle-wrap"),b=C.not(":has(.ap-container)").length,v=C.has(".ap-container").length,y=t("#opsbar-operations_more_drop .aui-dropdown2-section .aui-list-item").length,w=t("#peoplemodule ul dl").length,f=t("#datesmodule ul dl").length,F={isAssigned:s,hasReporter:n,transitionsCount:i,descriptionCharacterCount:l,descriptionBlockHeight:a,customFieldTabsCount:c,systemFieldsCount:u,customFieldsCount:r,labelsCount:d,systemFieldChildItemsCount:h,customFieldChildItemsCount:p,attachmentsCount:g,nonConnectWebPanelsCount:b,connectWebPanelsCount:v,moreMenuItemCount:y,peopleModuleFieldsCount:w,datesModuleFieldsCount:f},_=t("#comment-tabpanel.active").length>0;_&&(F.visibleCommentsCount=t("#issue_actions_container .activity-comment").length,F.collapsedCommentsCount=t("#issue_actions_container .show-more-comments").attr("data-collapsed-count")||0),e.trackEvent("viewissue","uxmetrics",F)}}});
//# sourceMappingURL=IssueUxMetrics-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/IssueViewer.js' */
define("jira/components/issueviewer",["require"],function(e){"use strict";var s=e("jira/components/libs/underscore"),i=e("jira/components/issueviewer/actions"),r=e("jira/components/issueviewer/controllers/error"),t=e("jira/util/events"),o=e("jira/components/issueviewer/controllers/issue"),n=e("jira/components/issueviewer/legacy/issueeventbus"),u=e("jira/components/issueviewer/services/issueloader"),a=e("jira/components/issueviewer/entities/issue"),d=e("jquery"),l=e("jira/components/issueviewer/linkscapturer"),h=e("jira/components/libs/marionette-1.4.1/controller"),c=e("jira/util/data/meta"),m=e("jira/components/issueviewer/services/metadataservice"),g=e("jira/util/events/reasons"),p=window.JIRA,f=e("jira/components/issueviewer/eventtypes"),I=e("jira/components/issueviewer/utils"),C=e("jira/components/issueviewer/legacy/viewissuedata"),v=e("wrm/data"),w=e("jira/components/issueviewer/analytics/issue-uxmetrics"),E=(e("jira/featureflags/feature-manager"),window.AJS.contextPath()),R=function(){p.trace.apply(p,arguments)};return h.extend({namedEvents:["loadComplete","loadError","close","replacedFocusedPanel","linkToIssue"],initialize:function(e){var i=this;e=e||{},e.useJIRAEvents=e.useJIRAEvents!==!1,this.shouldRenderIssueHeader=e.shouldRenderIssueHeader,this.model=new a,this.eventBus=new n,this.viewIssueData=new C,this._buildIssueLoader(),this._buildLinksCapturer(),this._buildErrorController({showReturnToSearchOnError:e.showReturnToSearchOnError}),this._buildIssueController(),t.bind(f.REFRESH_ISSUE_PAGE,function(e,s,i){this.model.isCurrentIssue(s)&&this.refreshIssue(i)}.bind(this)),this.memoizedUxMetricsTracker=s.memoize(w.trackPageMetrics,function(){return i.model.getId()})},_buildIssueLoader:function(){this.issueLoader=new u,this.listenTo(this.issueLoader,"error",function(e,s){this.trigger("loadError",s),this.errorController.render(e,s.issueKey),this.removeIssueMetadata(),R("jira.issue.refreshed",{id:s.issueId}),this.options.useJIRAEvents&&t.trigger(f.ISSUE_REFRESHED,[s.issueId])}),this.listenTo(this.issueLoader,"issueLoaded",this._onIssueLoaded)},_buildLinksCapturer:function(){this.linksCapturer=new l,this.listenTo(this.linksCapturer,{linkToIssue:function(e){this.trigger("linkToIssue",e)},refineViewer:function(e){this.trigger("refineViewer",e)},reorderSubtasks:function(){this.issueController.showLoading(),this.refreshIssue({reason:i.UPDATE}).always(function(){this.issueController.hideLoading()}.bind(this))}})},_buildErrorController:function(e){e=e||{},this.errorController=new r({contextPath:E,showReturnToSearchOnError:e.showReturnToSearchOnError}),this.listenTo(this.errorController,"before:render",function(){this.issueController.close()}),this.listenTo(this.errorController,"returnToSearch",function(){this.trigger("close")}),this.listenAndRethrow(this.errorController,"render")},_buildIssueController:function(){this.issueController=new o({shouldRenderIssueHeader:this.shouldRenderIssueHeader,model:this.model}),this.listenAndRethrow(this.issueController,"replacedFocusedPanel"),this.listenTo(this.issueController,{render:function(e,s){I.hideDropdown(),this.errorController.close(),this.trigger("render",e,s),R("jira.psycho.issue.refreshed",{id:this.model.getId()}),this.memoizedUxMetricsTracker()},renderMainView:function(e){this.options.useJIRAEvents&&(t.trigger(f.NEW_CONTENT_ADDED,[e,g.pageLoad]),t.trigger(f.REFRESH_TOGGLE_BLOCKS,[this.model.getId()])),this.trigger("renderMainView",e,this.model.getId())},panelRendered:function(e,s,i){this.eventBus.triggerPanelRendered(e,s),this.options.useJIRAEvents&&t.trigger(f.PANEL_REFRESHED,[e,s,i]),this.trigger("panelRendered",e,s,i)},close:function(){I.hideDropdown()},individualPanelRendered:function(e){this.options.useJIRAEvents&&t.trigger(f.NEW_CONTENT_ADDED,[e,g.panelRefreshed]),this.trigger("individualPanelRendered",e)}})},_updateModel:function(e,s){this.model.update(e,s)},_onIssueLoaded:function(e,s,i){var r=i.issueEntity,o=!s.mergeIntoCurrent&&i.initialize!==!1,n=!this.model.isCurrentIssue(r.id),u=!!r.detailView,a=!JIRA.Issues.Api.isNewIssueViewEnabled();s.isUpdate&&!o||(this.model.resetToDefault(),this.errorController.close()),this._updateModel(e,{initialize:o,changed:s.changed,mergeIntoCurrent:s.mergeIntoCurrent,stopRendering:a}),s.isUpdate&&!o||this.issueController.close(),this.issueController.show(),s.fromCache&&this.refreshIssue(r,{fromCache:!0,mergeIntoCurrent:!s.error,detailView:u}),m.addIssueMetadata(this.model),r.bringToFocus&&r.bringToFocus(),this._triggerLoadComplete(n,s,r);var d={id:r.id};s.fromCache?R("jira.issue.loadFromCache",d):R("jira.issue.loadFromServer",d),R("jira.issue.refreshed",d),this.options.useJIRAEvents&&t.trigger(f.ISSUE_REFRESHED,[r.id])},_triggerLoadComplete:function(e,s,i){this.trigger("loadComplete",this.model,{isNewIssue:e,issueId:i.id,issueKey:i.key,duration:s.loadDuration,loadReason:s.fromCache?"issues-cache-refresh":void 0,fromCache:s.fromCache,issueRefreshedEvent:!!this.options.useJIRAEvents})},abortPending:function(){this.issueLoader.cancel()},canDismissComment:function(){return this.issueController.canDismissComment()},beforeHide:function(){I.hideLightbox(),I.hideDropdown(),this.abortPending(),this.removeIssueMetadata()},beforeShow:function(){m.addIssueMetadata(this.model)},getIssueId:function(){return this.model.getEntity().id||null},getIssueKey:function(){return this.model.getEntity().key||null},getProjectKey:function(){return this.model.get("projectKey")||null},getProjectType:function(){return this.model.get("projectType")||null},getProjectId:function(){return this.model.get("projectId")||null},_loadIssueFromDom:function(e){e.id&&e.id!==-1?this.issueController.applyToDom(s.extend({id:-1},e)):(this.errorController.applyToDom("notfound",e.key),this.trigger("loadError")),c.set("serverRenderedViewIssue",null);var i={id:this.getIssueId()};R("jira.issue.refreshed",i)},loadIssue:function(e){var s=c.get("serverRenderedViewIssue");return s?(e.project={id:v.claim("projectId"),key:v.claim("projectKey"),projectType:v.claim("projectType")},this.loadIssueRenderedByTheServer(e)):this.canDismissComment()&&e.key?(this.issueController.showLoading(),this.issueLoader.load({issueEntity:e,viewIssueData:this.viewIssueData})):(new d.Deferred).reject()},loadIssueRenderedByTheServer:function(e){var s=d("#key-val"),i=d("#summary-val");return e.id=s.attr("rel")||-1,e.summary=i.text(),this._loadIssueFromDom(e),this.trigger("loadComplete",this.model,{isNewIssue:!1,issueId:e.id,issueKey:e.key,duration:0,loadReason:void 0,fromCache:!1}),(new d.Deferred).resolve().promise()},refreshIssue:function(e){var i;return e=s.defaults({},e,{mergeIntoCurrent:!0}),this.model.hasIssue()?(i=this.issueLoader.update({viewIssueData:this.viewIssueData,issueEntity:this.model.getEntity(),mergeIntoCurrent:e.mergeIntoCurrent,detailView:e.detailView}),e.complete&&(i=i.done(e.complete).fail(e.complete)),this.issueController.showLoading()):i=(new d.Deferred).resolve().promise(),i},removeIssueMetadata:function(){m.removeIssueMetadata(this.model)},setContainer:function(e){this.linksCapturer.capture(e),this.errorController.setElement(e),this.issueController.setElement(e)},isCurrentlyLoading:function(){return this.issueLoader.isLoading()},updateIssueWithQuery:function(e){this.model.updateIssueQuery(e),this.issueLoader.update({viewIssueData:this.viewIssueData,issueEntity:this.model.getEntity(),mergeIntoCurrent:!0})},dismiss:function(){this.model.resetToDefault(),this.errorController.close(),this.issueController.close(),this.linksCapturer.destroy()},close:function(){this.canDismissComment()&&(this.dismiss(),this.trigger("close"))},applyResponsiveDesign:function(){this.issueController.applyResponsiveDesign()},isShowingError:function(){return this.errorController.isRendered()},focus:function(){this.issueController.focus()},initialFocus:function(){this.issueController.initialFocus()}})});
//# sourceMappingURL=IssueViewer-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/IssueViewerAppModule.js' */
define("jira/components/issueviewer/appmodule",["require"],function(e){"use strict";var r=e("jira/components/libs/underscore"),n=e("jira/components/issueviewer"),s=e("jira/components/libs/marionette-1.4.1/appmodule");return s.extend({name:"issueViewer",generateMasterRequest:!0,create:function(e){return e=r.defaults({},e,{showReturnToSearchOnError:function(){return!1}}),new n({showReturnToSearchOnError:e.showReturnToSearchOnError})},commands:function(){return{abortPending:!0,beforeHide:!0,beforeShow:!0,removeIssueMetadata:!0,updateIssueWithQuery:!0,close:!0,setContainer:!0,dismiss:!0}},requests:function(){return{loadIssue:!0,canDismissComment:!0,getIssueId:!0,getIssueKey:!0,refreshIssue:!0,isCurrentlyLoading:!0}},events:function(){return["loadComplete","loadError","close","render","replacedFocusedPanel","linkToIssue","refineViewer"]}})});
//# sourceMappingURL=IssueViewerAppModule-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/templates/Issue.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Components&&(JIRA.Components={}),"undefined"==typeof JIRA.Components.IssueViewer&&(JIRA.Components.IssueViewer={}),"undefined"==typeof JIRA.Components.IssueViewer.Templates&&(JIRA.Components.IssueViewer.Templates={}),JIRA.Components.IssueViewer.Templates.layout=function(e,s){return'<div id="issue-content" class="issue-edit-form">'+(e.serverRenderedViewIssue?'<header id="stalker" class="issue-header js-stalker" tabindex="-1">'+JIRA.Components.IssueViewer.Templates.Header.issueHeader(e)+'</header><div class="issue-body-content">'+JIRA.Components.IssueViewer.Templates.Body.issueBodyWithPanels(e)+"</div>":'<div class="issue-header-container"></div>'+(e.isNewIssueViewEnabled?'<div id="new-issue-body-container"></div>':'<div class="issue-body-container" id="legacy-issue-body-container"></div>'))+"</div>"};;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/templates/IssueHeader.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Components&&(JIRA.Components={}),"undefined"==typeof JIRA.Components.IssueViewer&&(JIRA.Components.IssueViewer={}),"undefined"==typeof JIRA.Components.IssueViewer.Templates&&(JIRA.Components.IssueViewer.Templates={}),"undefined"==typeof JIRA.Components.IssueViewer.Templates.Header&&(JIRA.Components.IssueViewer.Templates.Header={}),JIRA.Components.IssueViewer.Templates.Header.issueHeader=function(e,s){return'<div class="issue-header-content">'+aui.page.pageHeader({content:""+(e.issue.project?aui.page.pageHeaderImage({content:""+JIRA.Templates.Headers.projectAvatar({id:""+soy.$$escapeHtml(e.issue.project.id),projectKey:""+soy.$$escapeHtml(e.issue.project.key),projectName:""+soy.$$escapeHtml(e.issue.project.name),avatarUrl:""+soy.$$escapeHtml(e.issue.project.avatarUrls["48x48"]),avatarAlt:""+soy.$$escapeHtml(e.issue.project.name),isSystemAvatar:e.issue.project.systemAvatar})})+(e.isNewIssueViewEnabled?aui.page.pageHeaderMain({content:'<div id="key-val" rel="'+soy.$$escapeHtml(e.issue.id)+'" class="hidden">'+soy.$$escapeHtml(e.issue.key)+"</div>"}):aui.page.pageHeaderMain({content:'<ol class="aui-nav aui-nav-breadcrumbs"><li class="breadcrumbs-project-name"><a id="project-name-val" href="'+soy.$$escapeHtml(AJS.contextPath())+"/browse/"+soy.$$escapeHtml(e.issue.project.key)+'">'+soy.$$escapeHtml(e.issue.project.name)+"</a></li>"+(e.issue.parent&&e.issue.parent.id?'<li><a class="issue-link" data-issue-key="'+soy.$$escapeHtml(e.issue.parent.key)+'" href="'+soy.$$escapeHtml(AJS.contextPath())+"/browse/"+soy.$$escapeHtml(e.issue.parent.key)+'" id="parent_issue_summary" title="'+soy.$$escapeHtml(e.issue.parent.summary)+'">'+soy.$$escapeHtml(e.issue.parent.key)+" "+soy.$$escapeHtml(e.issue.parent.summary)+"</a></li>":"")+'<li><a class="issue-link" data-issue-key="'+soy.$$escapeHtml(e.issue.key)+'" href="'+soy.$$escapeHtml(AJS.contextPath())+"/browse/"+soy.$$escapeHtml(e.issue.key)+'" id="key-val" rel="'+soy.$$escapeHtml(e.issue.id)+'">'+soy.$$escapeHtml(e.issue.key)+'</a></li></ol><h1 id="summary-val">'+soy.$$escapeHtml(e.issue.summary)+"</h1>"})):"")+aui.page.pageHeaderActions({content:'<div id="issue-header-pager">'+(e.pager?JIRA.Components.IssueViewer.Templates.Header.pager(e.pager):"")+"</div>"})})+(e.isNewIssueViewEnabled?"":'<div class="command-bar">'+(e.serverRenderedViewIssue?JIRA.Components.IssueViewer.Templates.IssueOpsbar.simpleOpsbar(e):"")+"</div>")+"</div>"},JIRA.Components.IssueViewer.Templates.Header.titleAttr=function(e,s){return""+(e.title?'title="'+soy.$$escapeHtml(e.title)+'"':e.label&&e.label.length&&e.label.length>25?'title="'+soy.$$escapeHtml(e.label)+'"':"")};;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/templates/IssueBody.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Components&&(JIRA.Components={}),"undefined"==typeof JIRA.Components.IssueViewer&&(JIRA.Components.IssueViewer={}),"undefined"==typeof JIRA.Components.IssueViewer.Templates&&(JIRA.Components.IssueViewer.Templates={}),"undefined"==typeof JIRA.Components.IssueViewer.Templates.Body&&(JIRA.Components.IssueViewer.Templates.Body={}),JIRA.Components.IssueViewer.Templates.Body.issueBody=function(e,s){return""+JIRA.Components.IssueViewer.Templates.Body.issueBodyWithPanels({panels:!1,serverRenderedViewIssue:!1})},JIRA.Components.IssueViewer.Templates.Body.issueBodyWithPanels=function(e,s){var i='<div class="aui-group issue-body"><div class="aui-item issue-main-column">';if(e.serverRenderedViewIssue)for(var a=e.panels.leftPanels,l=a.length,o=0;o<l;o++){var n=a[o];i+=JIRA.Components.IssueViewer.Templates.Body.issuePanel(n)}if(i+='</div><div id="viewissuesidebar" class="aui-item issue-side-column">',e.serverRenderedViewIssue)for(var t=e.panels.rightPanels,r=t.length,d=0;d<r;d++){var u=t[d];i+=JIRA.Components.IssueViewer.Templates.Body.issuePanel(u)}return i+="</div></div>"},JIRA.Components.IssueViewer.Templates.Body.issuePanel=function(e,s){var i="";if(e.renderHeader){i+="<div id="+soy.$$escapeHtml(e.id)+' class="module toggle-wrap"><div id="'+soy.$$escapeHtml(e.id)+'_heading" class="mod-header"><ul class="ops">';for(var a=e.headerLinks.links,l=a.length,o=0;o<l;o++){var n=a[o];i+="<li>"+JIRA.Components.IssueViewer.Templates.Body.simpleLink({link:n})+"</li>"}if(e.headerLinks.groups.length>0){i+='<li class="drop"><div class="aui-dd-parent"><a href="#" class="more-menu aui-button aui-button-subtle aui-icon aui-icon-small aui-iconfont-more js-default-dropdown" title="'+soy.$$escapeHtml("Options")+'"><span>'+soy.$$escapeHtml("Options")+'</span></a><div class="aui-dropdown-content aui-list">';for(var t=e.headerLinks.groups,r=t.length,d=0;d<r;d++){var u=t[d];i+=(u.header&&u.header.label?"<h5>"+soy.$$escapeHtml(u.header.label)+"</h5>":"")+"<ul "+(u.header&&u.header.id?'id="'+soy.$$escapeHtml(u.header.id)+'"':"")+'class="aui-list-section'+(u.header&&u.header.styleClass?" "+soy.$$escapeHtml(u.header.styleClass):"")+(0==d?" aui-first":"")+(d==r-1?" aui-last":"")+'">';for(var m=u.links,p=m.length,c=0;c<p;c++){var f=m[c];i+='<li class="aui-list-item">'+JIRA.Components.IssueViewer.Templates.Body.simpleLink({link:f,additionalStyleClass:"aui-list-item-link"})+"</li>"}i+="</ul>"}i+="</div></div></li>"}if(i+="</ul>",e.subpanelHtmls.length>0){i+='<div class="mod-header-panels">';for(var y=e.subpanelHtmls,v=y.length,I=0;I<v;I++){var h=y[I];i+='<div class="mod-header-panel">'+soy.$$filterNoAutoescape(h)+"</div>"}i+="</div>"}i+='<h2 class="toggle-title">'+soy.$$escapeHtml(e.label)+'</h2></div><div class="mod-content">'+soy.$$filterNoAutoescape(e.html)+"</div></div>"}else i+=soy.$$filterNoAutoescape(e.html);return i},JIRA.Components.IssueViewer.Templates.Body.errorsLoading=function(e,s){e=e||{};var i=""+(e.isTimeout?soy.$$escapeHtml("The Jira server could not be contacted. This may be a temporary glitch or the server may be down."):soy.$$escapeHtml("There were errors loading the issue."));if(e.errorMessages){i+="<ul>";for(var a=e.errorMessages,l=a.length,o=0;o<l;o++){var n=a[o];i+="<li>"+soy.$$escapeHtml(n)+"</li>"}i+="</ul>"}return i},JIRA.Components.IssueViewer.Templates.Body.focusShifter=function(e,s){return'<div class="aui-message closeable" id="focus-shifter"><label><span>'+soy.$$escapeHtml("viewissue.focusshifter")+'</span><div id="focus-shifter-content"></div></label><span class="aui-icon icon-close"></span></div>'},JIRA.Components.IssueViewer.Templates.Body.simpleLink=function(e,s){return"<a "+(e.link.id?' id="'+soy.$$escapeHtml(e.link.id)+'"':"")+'href="'+(e.link.href?soy.$$escapeHtml(e.link.href):"#")+'"'+(e.link.styleClass||e.additionalStyleClass?'class="'+soy.$$escapeHtml(e.link.styleClass)+(e.additionalStyleClass?" "+soy.$$escapeHtml(e.additionalStyleClass):"")+'"':"")+(e.link.title?'title="'+soy.$$escapeHtml(e.link.title)+'"':"")+"><span>"+soy.$$escapeHtml(e.link.label)+"</span></a>"};;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/templates/IssueError.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Components&&(JIRA.Components={}),"undefined"==typeof JIRA.Components.IssueViewer&&(JIRA.Components.IssueViewer={}),"undefined"==typeof JIRA.Components.IssueViewer.Templates&&(JIRA.Components.IssueViewer.Templates={}),"undefined"==typeof JIRA.Components.IssueViewer.Templates.Error&&(JIRA.Components.IssueViewer.Templates.Error={}),JIRA.Components.IssueViewer.Templates.Error.NoPermission=function(e,s){return""+JIRA.Components.IssueViewer.Templates.Error.Generic(null)},JIRA.Components.IssueViewer.Templates.Error.DoesNotExist=function(e,s){return""+JIRA.Components.IssueViewer.Templates.Error.fancyViewIssueError({title:"This issue can\'t be viewed",body:"The issue you\'re trying to view can\'t be displayed.",bodyAfter:"It may have been deleted or you don\'t have permission to view it right now.",error:"canNotBeViewed",showReloadButton:!1})},JIRA.Components.IssueViewer.Templates.Error.Generic=function(e,s){return""+JIRA.Components.IssueViewer.Templates.Error.fancyViewIssueError({title:"This issue can\'t be displayed right now",body:"It could be for a variety of reasons, like a network or application error.",bodyAfter:"Try reloading the page.",error:"genericError",showReloadButton:!0})},JIRA.Components.IssueViewer.Templates.Error.fancyViewIssueError=function(e,s){return""+JIRA.Components.IssueViewer.Templates.Error.baseViewIssueError({header:'<header class="aui-page-header"><div class="aui-page-header-inner"><div class="aui-page-header-actions"><div id="issue-header-pager"></div></div></div></header>',body:'<div class="issue-error"><span class="error-image error-image-'+soy.$$escapeHtml(e.error)+'"></span><h1>'+soy.$$escapeHtml(e.title)+"</h1><p>"+soy.$$escapeHtml(e.body)+"<br />"+soy.$$escapeHtml(e.bodyAfter)+"</p>"+(e.showReloadButton?'<p><button id="issue-error-reload-button" class="aui-button aui-button-primary">Reload</button></p>':"")+"</div>"})},JIRA.Components.IssueViewer.Templates.Error.viewIssueError=function(e,s){return""+JIRA.Components.IssueViewer.Templates.Error.baseViewIssueError({header:'<header class="aui-page-header"><div class="aui-page-header-inner"><div class="aui-page-header-main"><h1>'+soy.$$escapeHtml(e.title)+'</h1></div><div class="aui-page-header-actions"><div id="issue-header-pager"></div></div></div></header>',body:'<div class="aui-message '+soy.$$escapeHtml(e.error)+'"><span class="aui-icon icon-'+soy.$$escapeHtml(e.error)+'"></span><p>'+soy.$$escapeHtml(e.body)+"</p><p>"+soy.$$escapeHtml("If you think this message is wrong, please contact your")+' <a href="'+soy.$$escapeHtml(AJS.contextPath())+'/secure/ContactAdministrators!default.jspa">'+soy.$$escapeHtml("Jira administrators")+"</a>.</p>"+(e.returnToSearch?'<p><a id="return-to-search" class="push-state" href="'+soy.$$escapeHtml(AJS.contextPath())+'/issues/" title="'+soy.$$escapeHtml("Return to search")+'">'+soy.$$escapeHtml("Return to search")+"</a></p>":"")+"</div>"})},JIRA.Components.IssueViewer.Templates.Error.baseViewIssueError=function(e,s){return'<div id="issue-content"><header class="issue-header issue-error-header"><div class="issue-header-content">'+soy.$$filterNoAutoescape(e.header)+'</div></header><div class="issue-body-content issue-error-content">'+soy.$$filterNoAutoescape(e.body)+"</div></div>"};;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/templates/IssueOpsbar.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Components&&(JIRA.Components={}),"undefined"==typeof JIRA.Components.IssueViewer&&(JIRA.Components.IssueViewer={}),"undefined"==typeof JIRA.Components.IssueViewer.Templates&&(JIRA.Components.IssueViewer.Templates={}),"undefined"==typeof JIRA.Components.IssueViewer.Templates.IssueOpsbar&&(JIRA.Components.IssueViewer.Templates.IssueOpsbar={}),JIRA.Components.IssueViewer.Templates.IssueOpsbar.opsbar=function(e,s){var o='<div class="ops-cont"><div class="ops-menus aui-toolbar">';if(e.issue.operations)for(var a=e.issue.operations.linkGroups,l=a.length,r=0;r<l;r++){var t=a[r];if(t.id&&"view.issue.opsbar"==t.id){o+='<div class="toolbar-split toolbar-split-left">';for(var i=t.groups,n=i.length,p=0;p<n;p++){var u=i[p];o+=JIRA.Components.IssueViewer.Templates.IssueOpsbar.linkGroup({group:u,parentGroup:t})}o+="</div>"}else t.id&&"jira.issue.tools"==t.id&&(o+='<div class="toolbar-split toolbar-split-right">'+JIRA.Components.IssueViewer.Templates.IssueOpsbar.linkGroup({group:t})+"</div>")}return o+="</div></div>"},JIRA.Components.IssueViewer.Templates.IssueOpsbar.simpleOpsbar=function(e,s){var o='<div class="ops-cont"><div class="ops-menus aui-toolbar">';if(e.issue.operations)for(var a=e.issue.operations.linkGroups,l=a.length,r=0;r<l;r++){var t=a[r];if(t.id&&"view.issue.opsbar"==t.id){o+='<div class="toolbar-split toolbar-split-left">';for(var i=t.groups,n=i.length,p=0;p<n;p++){var u=i[p];o+=JIRA.Components.IssueViewer.Templates.IssueOpsbar.linkGroup({group:u,parentGroup:t})}o+="</div>"}else t.id&&"jira.issue.tools"==t.id&&(o+='<div class="toolbar-split toolbar-split-right">'+JIRA.Components.IssueViewer.Templates.IssueOpsbar.separatedLinks({group:t})+"</div>")}return o+="</div></div>"},JIRA.Components.IssueViewer.Templates.IssueOpsbar.linkGroup=function(e,s){var o="";if(e.group.header&&(e.group.links.length>0||e.group.groups.length>0))o+=JIRA.Components.IssueViewer.Templates.IssueOpsbar.dropdownLink(e.group);else{o+="<ul "+(e.group.id?'id="opsbar-'+soy.$$escapeHtml(e.group.id)+'" ':"")+'class="toolbar-group pluggable-ops">';for(var a=e.group.links,l=a.length,r=0;r<l;r++){var t=a[r];o+=JIRA.Components.IssueViewer.Templates.IssueOpsbar.toolbarItem({link:t})}if(1==e.group.groups.length&&0==e.group.groups[0].links.length&&1==e.group.groups[0].groups.length&&1==e.group.groups[0].groups[0].links.length)o+=JIRA.Components.IssueViewer.Templates.IssueOpsbar.toolbarItem({link:e.group.groups[0].groups[0].links[0]});else for(var i=e.group.groups,n=i.length,p=0;p<n;p++){var u=i[p];o+=JIRA.Components.IssueViewer.Templates.IssueOpsbar.linkGroup({group:u})}o+="</ul>"}return o},JIRA.Components.IssueViewer.Templates.IssueOpsbar.separatedLinks=function(e,s){for(var o="",a=e.group.links,l=a.length,r=0;r<l;r++){var t=a[r];o+='<ul class="toolbar-group pluggable-ops">'+JIRA.Components.IssueViewer.Templates.IssueOpsbar.toolbarItem({link:t})+"</ul>"}for(var i=e.group.groups,n=i.length,p=0;p<n;p++){var u=i[p];o+=u.groups.length>0||u.links.length>0?'<ul class="toolbar-group pluggable-ops">'+JIRA.Components.IssueViewer.Templates.IssueOpsbar.dropdownLink(soy.$$augmentMap(u,{shouldHideLabel:!0}))+"</ul>":""}return o},JIRA.Components.IssueViewer.Templates.IssueOpsbar.dropdownLink=function(e,s){var o='<li class="toolbar-item toolbar-analytics"><div><a href="#"'+(e.header.id?'id="'+soy.$$escapeHtml(e.header.id)+'"':"")+'aria-owns="'+(e.header.id?soy.$$escapeHtml(e.header.id)+"_drop":"")+'" aria-haspopup="true"'+JIRA.Components.IssueViewer.Templates.Header.titleAttr({title:e.header.title,label:e.header.label})+'class="toolbar-trigger aui-button aui-style-default'+(e.links.length>0||e.groups.length>0?" aui-dropdown2-trigger":"")+(e.header.styleClass?" "+soy.$$escapeHtml(e.header.styleClass):"")+'">'+(e.header.iconClass?'<span class="icon '+soy.$$escapeHtml(e.header.iconClass)+'"></span> ':"")+'<span class="dropdown-text">'+(!e.shouldHideLabel&&e.header.label?soy.$$truncate(soy.$$escapeHtml(e.header.label),25,!0):"")+"</span></a><div "+(e.header.id?'id="'+soy.$$escapeHtml(e.header.id)+'_drop"':"")+' class="aui-style-default aui-dropdown2">';if(e.links.length>0){o+="<ul>";for(var a=e.links,l=a.length,r=0;r<l;r++){var t=a[r];o+=JIRA.Components.IssueViewer.Templates.IssueOpsbar.dropdownItem(t)}o+="</ul>"}for(var i=e.groups,n=i.length,p=0;p<n;p++){var u=i[p];if(u.links.length>0){o+='<div class="aui-dropdown2-section"><ul>';for(var d=u.links,m=d.length,I=0;I<m;I++){var g=d[I];o+=JIRA.Components.IssueViewer.Templates.IssueOpsbar.dropdownItem(g)}o+="</ul></div>"}}return o+="</div></div></li>"},JIRA.Components.IssueViewer.Templates.IssueOpsbar.dropdownItem=function(e,s){return'<li class="aui-list-item"><a  href="'+(e.href?soy.$$escapeHtml(e.href):"#")+'"'+(e.styleClass?'class="'+soy.$$escapeHtml(e.styleClass)+'"':"")+JIRA.Components.IssueViewer.Templates.Header.titleAttr(e)+(e.id?'id="'+soy.$$escapeHtml(e.id)+'"':"")+'><span class="trigger-label">'+soy.$$truncate(soy.$$escapeHtml(e.label),25,!0)+"</span></a></li>"},JIRA.Components.IssueViewer.Templates.IssueOpsbar.toolbarItem=function(e,s){return'<li class="toolbar-item toolbar-analytics"><a id="'+soy.$$escapeHtml(e.link.id)+'"'+JIRA.Components.IssueViewer.Templates.Header.titleAttr({title:e.link.title,label:e.link.label})+'class="toolbar-trigger'+(e.link.styleClass?" "+soy.$$escapeHtml(e.link.styleClass):"")+'" href="'+(e.link.href?soy.$$escapeHtml(e.link.href):"#")+'">'+(e.link.iconClass?'<span class="icon '+soy.$$escapeHtml(e.link.iconClass)+'"></span> <span class="trigger-label">'+soy.$$truncate(soy.$$escapeHtml(e.link.label),25,!0)+"</span>":'<span class="trigger-label">'+soy.$$truncate(soy.$$escapeHtml(e.link.label),25,!0)+"</span>")+"</a></li>"},JIRA.Components.IssueViewer.Templates.IssueOpsbar.newIssueViewItem=function(e,s){return'<div class="aui-dropdown2-section" id="opsbar-more-new-issue-view-items"><ul><li class="aui-list-item"><span class="group-title">'+soy.$$escapeHtml("New Jira issue view")+'</span></li><li class="aui-list-item"><a href="https://support.atlassian.com/jira-core-cloud/docs/what-is-the-new-jira-issue-view/" target="_blank">'+soy.$$escapeHtml("Learn more")+'</a></li><li class="aui-list-item"><a href="#" id="turn-on-new-issue-view">'+soy.$$escapeHtml("Turn on the new issue view")+"</a></li></ul></div>"};;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/templates/IssueActionsBar.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Components&&(JIRA.Components={}),"undefined"==typeof JIRA.Components.IssueViewer&&(JIRA.Components.IssueViewer={}),"undefined"==typeof JIRA.Components.IssueViewer.Templates&&(JIRA.Components.IssueViewer.Templates={}),"undefined"==typeof JIRA.Components.IssueViewer.Templates.IssueActionsBar&&(JIRA.Components.IssueViewer.Templates.IssueActionsBar={}),JIRA.Components.IssueViewer.Templates.IssueActionsBar.container=function(s,e){for(var t='<div class="actions-bar"><div class="ops-menus">'+(s.issue.transitions.length?JIRA.Components.IssueViewer.Templates.IssueActionsBar.statusDropdown({workflowName:s.issue.workflowName,status:s.issue.status,transitions:s.issue.transitions}):""),n=s.issue.primaryActions,a=n.length,o=0;o<a;o++)for(var i=n[o],r=i.links,l=r.length,u=0;u<l;u++){var p=r[u];t+=JIRA.Components.IssueViewer.Templates.IssueActionsBar.topLevelLink({link:p})}return t+="</div></div>"},JIRA.Components.IssueViewer.Templates.IssueActionsBar.statusDropdown=function(s,e){for(var t='<button class="actions-bar-status-trigger aui-button aui-dropdown2-trigger aui-dropdown2-trigger-arrowless status-lozenge-'+soy.$$escapeHtml(s.status.statusColor)+'" aria-owns="actions-bar-status-dropdown">'+soy.$$escapeHtml(s.status.name)+'<span class="aui-icon aui-icon-small aui-iconfont-expanded"></span></button><div id="actions-bar-status-dropdown" class="aui-style-default aui-dropdown2"><div class="aui-dropdown2-section"><div class="actions-bar-status-list">',n=s.transitions,a=n.length,o=0;o<a;o++){var i=n[o];t+=JIRA.Components.IssueViewer.Templates.IssueActionsBar.statusItem({transitionName:i.transitionName,statusName:i.destinationStatusName,statusColor:i.destinationStatusColor,link:i.url})}return t+='</div></div><div class="aui-dropdown2-section"><ul><li><a href="'+soy.$$escapeHtml(AJS.contextPath())+"/secure/admin/workflows/ViewWorkflowSteps.jspa?workflowMode=live&workflowName="+soy.$$escapeHtml(s.workflowName)+'" class="issueaction-viewworkflow jira-workflow-designer-link new-workflow-designer">'+soy.$$escapeHtml("View workflow")+"</a></li></ul></div></div>"},JIRA.Components.IssueViewer.Templates.IssueActionsBar.statusItem=function(s,e){return'<a href="'+(s.link.href?soy.$$escapeHtml(s.link.href):"#")+'" class="actions-bar-status-item issueaction-workflow-transition"><span>'+soy.$$escapeHtml(s.transitionName)+'</span><span><span class="aui-icon aui-icon-small aui-iconfont-up"></span></span><span>'+JIRA.Components.IssueViewer.Templates.IssueActionsBar.statusLozenge({name:s.statusName,color:null!=s.statusColor?s.statusColor:"medium-gray"})+"</span></a>"},JIRA.Components.IssueViewer.Templates.IssueActionsBar.statusLozenge=function(s,e){return'<span class="jira-issue-status-lozenge aui-lozenge status-lozenge-'+soy.$$escapeHtml(s.color)+'">'+soy.$$escapeHtml(s.name)+"</span>"},JIRA.Components.IssueViewer.Templates.IssueActionsBar.topLevelLink=function(s,e){return'<a id="'+soy.$$escapeHtml(s.link.id)+'"'+JIRA.Components.IssueViewer.Templates.Header.titleAttr({title:s.link.title,label:s.link.label})+'class="aui-button '+soy.$$escapeHtml(s.link.styleClass)+'" href="'+(s.link.href?soy.$$escapeHtml(s.link.href):"#")+'" ><span class="trigger-label">'+soy.$$truncate(soy.$$escapeHtml(s.link.label),25,!0)+"</span></a>"};;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/templates/amd-wrapper.js' */
define("jira/components/issueviewer/templates",function(){"use strict";return JIRA.Components.IssueViewer.Templates}),AJS.namespace("JIRA.Components.IssueViewer.Templates",null,require("jira/components/issueviewer/templates"));
//# sourceMappingURL=amd-wrapper-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueviewer', location = 'jira-issue-navigator-components-module/issueviewer/js/namespace.js' */
AJS.namespace("JIRA.Components.IssueViewer",null,require("jira/components/issueviewer")),AJS.namespace("JIRA.Components.IssueViewer.AppModule",null,require("jira/components/issueviewer/appmodule")),AJS.namespace("JIRA.Components.IssueViewer.Utils",null,require("jira/components/issueviewer/utils")),AJS.namespace("JIRA.Components.IssueViewer.Controllers.Error",null,require("jira/components/issueviewer/controllers/error")),AJS.namespace("JIRA.Components.IssueViewer.Controllers.Issue",null,require("jira/components/issueviewer/controllers/issue")),AJS.namespace("JIRA.Components.IssueViewer.Models.Issue",null,require("jira/components/issueviewer/entities/issue")),AJS.namespace("JIRA.Components.IssueViewer.Models.Panel",null,require("jira/components/issueviewer/entities/panel")),AJS.namespace("JIRA.Components.IssueViewer.Collections.Panels",null,require("jira/components/issueviewer/entities/panels")),AJS.namespace("JIRA.Components.IssueViewer.Models.PanelsGroup",null,require("jira/components/issueviewer/entities/panelsgroup")),AJS.namespace("JIRA.Components.IssueViewer.Legacy.AsyncData",null,require("jira/components/issueviewer/legacy/asyncdata")),AJS.namespace("JIRA.Components.IssueViewer.Legacy.IssueEventBus",null,require("jira/components/issueviewer/legacy/issueeventbus")),AJS.namespace("JIRA.Components.IssueViewer.Legacy.IssueFieldUtil",null,require("jira/components/issueviewer/legacy/issuefieldutil")),AJS.namespace("JIRA.Components.IssueViewer.Legacy.ViewIssueData",null,require("jira/components/issueviewer/legacy/viewissuedata")),AJS.namespace("JIRA.Components.IssueViewer.Services.IssueLoader",null,require("jira/components/issueviewer/services/issueloader")),AJS.namespace("JIRA.Components.IssueViewer.Services.Metadata",null,require("jira/components/issueviewer/services/metadataservice")),AJS.namespace("JIRA.Components.IssueViewer.Services.OptInNewIssueView",null,require("jira/components/issueviewer/services/optinnewissueviewservice")),AJS.namespace("JIRA.Components.IssueViewer.Views.ErrorGeneric",null,require("jira/components/issueviewer/views/errorgeneric")),AJS.namespace("JIRA.Components.IssueViewer.Views.ErrorNotFound",null,require("jira/components/issueviewer/views/errornotfound")),AJS.namespace("JIRA.Components.IssueViewer.Views.Error",null,require("jira/components/issueviewer/views/error")),AJS.namespace("JIRA.Components.IssueViewer.Views.IssueBody",null,require("jira/components/issueviewer/views/issuebody")),AJS.namespace("JIRA.Components.IssueViewer.Views.IssueHeader",null,require("jira/components/issueviewer/views/issueheader")),AJS.namespace("JIRA.Components.IssueViewer.Views.IssueOpsbar",null,require("jira/components/issueviewer/views/issueopsbar")),AJS.namespace("JIRA.Components.IssueViewer.Views.IssuePanels",null,require("jira/components/issueviewer/views/issuepanels")),AJS.namespace("JIRA.Components.IssueViewer.Views.IssuePanel",null,require("jira/components/issueviewer/views/issuepanel")),AJS.namespace("JIRA.Components.IssueViewer.Views.Issue",null,require("jira/components/issueviewer/views/issue")),AJS.namespace("JIRA.Components.IssueViewer.Templates",null,require("jira/components/issueviewer/templates"));
//# sourceMappingURL=namespace-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'jira-issue-navigator-components-module/issueeditor/js/IssueEditor.js' */
define("jira/components/issueeditor",["require"],function(e){"use strict";var s=e("jira/components/libs/underscore"),i=e("jira/components/issueeditor/controllers/editissue"),t=e("jira/util/events"),r=e("jira/components/issueeditor/eventtypes"),o=e("jira/components/issueeditor/controllers/fields"),n=e("jira/components/issueeditor/services/fieldsloader"),d=e("jira/components/issueeditor/services/issuesaver"),l=e("jira/components/issueviewer"),u=e("jira/util/data/meta"),a=e("jira/components/issueeditor/views/modalfield"),h=e("jira/components/issueeditor/views/saveerror"),v=e("jira/components/issueeditor/services/saveinprogressmanager"),c=window.JIRA,f=e("jira/components/issueeditor/services/unloadinterceptor"),I=window.AJS.contextPath(),g=function(){c.trace.apply(c,arguments)};return l.extend({namedEvents:["loadComplete","loadError","returnToSearch","saveSuccess","saveError","editField","editFieldCancel","fieldSubmitted","replacedFocusedPanel","fieldsLoaded"],initialize:function(e){l.prototype.initialize.call(this,e),this._buildFieldsLoader(),this._buildIssueSaver(),this._buildEditIssueController(),this._buildFieldsController(),this._handleUnload(),this.listenAndRethrow(this.eventBus,"fieldSubmitted")},_buildFieldsLoader:function(){this.fieldsLoader=new n({contextPath:I}),this.listenTo(this.fieldsLoader,"fieldsLoaded",function(e){this.viewIssueData.updateIssue(e.issueKey,e),e.issueId=Number(e.issueId);var s=e.fields&&e.fields.length;s?this.editIssueController.update(e):this.editIssueController.reset(),this.trigger("fieldsLoaded"),g("jira.issue.fields.loaded",{id:e.issueId})}),this.listenTo(this.fieldsLoader,"fieldsError",function(e){this.fieldsController.showError(e.errorCollection,e.isTimeout),g("jira.issue.fields.loaded",{id:e.issueId})})},_buildIssueSaver:function(){this.saveInProgressManager=new v,this.issueSaver=new d({saveInProgressManager:this.saveInProgressManager,model:this.model}),this.listenTo(this.issueSaver,"error",function(e){var s=e.issueId,i=e.attemptedSavedIds,t=e.response,r=e.duration;if(!this.model.isCurrentIssue(s))return void this._showSaveError({issueId:s,issueKey:e.issueKey,response:t});this.eventBus.triggerSaveError(s,i,t);var o=t&&t.fields&&t.fields.length;!o&&t&&(this.editIssueController.reset(),this.model.update(t,{fieldsSaved:[],fieldsInProgress:[]})),this.trigger("saveError",{issueId:s,duration:r,deferred:!1}),g("jira.issue.refreshed",{id:s})}),this.listenTo(this.issueSaver,"saveStarted",function(e,s){this.eventBus.triggerSavingStarted(s)}),this.listenTo(this.issueSaver,"save",function(e){var s=e.issueId,i=e.issueKey,t=e.savedFieldIds,r=e.savedFieldTypes,o=e.response,n=e.shouldSkipSaveIssueSuccessHandler,d=e.duration;if(this.model.isCurrentIssue(s)&&!n){this.eventBus.triggerSaveSuccess(s,i,t,o),this.viewIssueData.set(i,o),this.model.update(o,{fieldsSaved:t,fieldsInProgress:this.editIssueController.getEditsInProgress()}),g("jira.psycho.issue.refreshed",{id:s});var l=o.fields&&o.fields.length;l&&this.editIssueController.update({fields:o.fields,issueId:s,issueKey:i},{editable:!0,editIssueController:this.editIssueController,issueModel:this.model,issueId:s,fieldsSaved:t,initialize:!1,fieldsInProgress:this.editIssueController.getEditsInProgress()}),g("jira.issue.refreshed",{id:s})}this.trigger("saveSuccess",{issueId:s,issueKey:i,savedFieldIds:t,savedFieldTypes:r,duration:d})})},_buildEditIssueController:function(){this.editIssueController=new i({issueEventBus:this.eventBus}),this.listenTo(this.editIssueController,"save",function(e,s,i,t,r,o){this.issueSaver.setSkipSaveIssueSuccessHandler(!1),this.issueSaver.save(e,s,i,t,r,o)}),this.listenAndRethrow(this.editIssueController,"editField"),this.listenAndRethrow(this.editIssueController,"editFieldCancel")},_buildFieldsController:function(){this.fieldsController=new o},_onIssueLoaded:function(e,s,i){e.issue.isEditable&&(s.error||s.fromCache||this.fieldsLoader.load({viewIssueData:this.viewIssueData,issueEntity:i.issueEntity}));var t=!s.mergeIntoCurrent&&i.initialize!==!1;s.isUpdate&&!t||this.editIssueController.reset(),l.prototype._onIssueLoaded.call(this,e,s,i),e.fields&&(this.editIssueController.update({fields:e.fields,issueId:e.issue.id,issueKey:e.issue.key}),g("jira.issue.fields.loaded",{id:e.issue.id}))},_handleUnload:function(){var e=function(){var e;return this.editIssueController.getDirtyEditsInProgress().length>0&&(e="You are still editing this page. Are you sure you want to leave?"),e}.bind(this);this.unloadInterceptor=new f,this.unloadInterceptor.addAfterEvent(e),this.on("destroy",function(){this.unloadInterceptor.removeAfterEvent(e)})},_updateModel:function(e,i){var t=e.fields&&e.fields.length;t&&this.editIssueController.update(e.fields,{fieldsInProgress:this.editIssueController.getEditsInProgress(),changed:i.changed}),i=s.extend({},i,{fieldsInProgress:this.editIssueController.getEditsInProgress()}),l.prototype._updateModel.call(this,e,i)},_loadIssueFromDom:function(e){u.get("server-view-issue-is-editable")&&(this.editIssueController.setIssueId(e.id),this.editIssueController.setIssueKey(e.key),this.fieldsLoader.load({viewIssueData:this.viewIssueData,issueEntity:e}),u.set("server-view-issue-is-editable",null)),l.prototype._loadIssueFromDom.call(this,e)},editField:function(e){if(e.isEditable()){var s=this.model.getEntity(),i=function(){e.matchesFieldSelector()?e.edit():new a({issueEventBus:this.eventBus,model:e,issue:s}).show()}.bind(this);e.getSaving()?t.one(r.ISSUE_REFRESHED,function(){i()}):i()}},abortPending:function(){this.fieldsLoader.cancel(),l.prototype.abortPending.call(this)},beforeHide:function(){this.issueSaver.setSkipSaveIssueSuccessHandler(!0),l.prototype.beforeHide.call(this)},setContainer:function(e){this.editIssueController.setIssueViewContext(e),l.prototype.setContainer.call(this,e)},dismiss:function(){this.editIssueController.reset(),l.prototype.dismiss.call(this)},getFields:function(){return this.editIssueController.getFields()},hasSavesInProgress:function(){return this.saveInProgressManager.hasSavesInProgress()},_showSaveError:function(e){var i,t;i=new h(e).render(),t=s.partial(this.stopListening,i),this.listenTo(i,{close:t,issueLinkClick:function(e){var s={isPrevented:!1,preventDefault:function(){this.isPrevented=!0},isDefaultPrevented:function(){return this.isPrevented===!0},issueData:e};this.trigger("linkInErrorMessage",s),s.isDefaultPrevented()||this.loadIssue(e)}})}})});
//# sourceMappingURL=IssueEditor-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'jira-issue-navigator-components-module/issueeditor/js/IssueEditorAppModule.js' */
define("jira/components/issueeditor/appmodule",["require"],function(e){"use strict";var r=e("jira/components/libs/underscore"),t=e("jira/components/issueeditor"),n=e("jira/components/issueviewer/appmodule");return n.extend({name:"issueEditor",generateMasterRequest:!0,create:function(e){return e=r.defaults({},e,{showReturnToSearchOnError:function(){return!1}}),new t({showReturnToSearchOnError:e.showReturnToSearchOnError})},commands:function(e){var t=n.prototype.commands.call(this,e);return r.extend(t,{editField:!0})},requests:function(e){var t=n.prototype.requests.call(this,e);return r.extend(t,{fields:function(){return e.getFields()},hasSavesInProgress:!0})},events:function(e){var r=n.prototype.events.call(this,e);return r.concat(["saveSuccess","saveError","editField","editFieldCancel","fieldSubmitted","fieldsLoaded"])}})});
//# sourceMappingURL=IssueEditorAppModule-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'jira-issue-navigator-components-module/issueeditor/js/NoInlineAppModule.js' */
define("jira/components/issueeditor/noinlineappmodule",["require"],function(e){"use strict";var n=e("jira/components/libs/underscore"),r=e("jira/components/issueviewer/appmodule");return r.extend({name:"issueEditor",requests:function(e){var s=r.prototype.requests.call(this,e);return n.extend(s,{fields:function(){return[]},hasSavesInProgress:function(){return!1}})}})});
//# sourceMappingURL=NoInlineAppModule-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'jira-issue-navigator-components-module/issueeditor/templates/Fields.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.IssueEditor&&(JIRA.Templates.IssueEditor={}),"undefined"==typeof JIRA.Templates.IssueEditor.Fields&&(JIRA.Templates.IssueEditor.Fields={}),JIRA.Templates.IssueEditor.Fields.saveErrorMessage=function(e,s){var t="",o='<a class="issue" href="'+soy.$$escapeHtml(AJS.contextPath())+"/browse/"+soy.$$escapeHtml(e.issueKey)+'">'+soy.$$escapeHtml(e.issueKey)+"</a>";if(t+=soy.$$filterNoAutoescape(AJS.format("Saving of \u003cstrong\u003e{0}\u003c/strong\u003e failed!",o)),e.errors.length>0){t+="<ul>";for(var a=e.errors,i=a.length,l=0;l<i;l++){var n=a[l];t+="<li>"+soy.$$escapeHtml(n)+"</li>"}t+="</ul>"}return t},JIRA.Templates.IssueEditor.Fields.field=function(e,s){return'<form id="'+soy.$$escapeHtml(e.issue.id)+'-form" class="ajs-dirty-warning-exempt aui" action= "#"><div class="inline-edit-fields">'+soy.$$filterNoAutoescape(e.issue.editHtml)+'</div><span class="overlay-icon throbber"></span><div class="save-options"><button type="submit" class="aui-button submit" accessKey="'+soy.$$escapeHtml("s")+'" title="'+soy.$$escapeHtml(AJS.format("Press {1}+{0} to submit this form","s",e.accessKey))+'"><span class="aui-icon aui-icon-small aui-iconfont-success">'+soy.$$escapeHtml("Save")+'</span></button><button type="cancel" class="aui-button cancel" accessKey="'+soy.$$escapeHtml("`")+'" title="'+soy.$$escapeHtml(AJS.format("Press {1}+{0} to cancel","`",e.accessKey))+'"><span class="aui-icon aui-icon-small aui-iconfont-close-dialog">'+soy.$$escapeHtml("Cancel")+"</span></button></div></form>"},JIRA.Templates.IssueEditor.Fields.modalField=function(e,s){return'<div class="aui-dialog-content"><h2 class="dialog-title">'+soy.$$escapeHtml(AJS.format("Edit {0} for {1}",e.field.label,e.issue.key))+'</h2><form action="" class="aui" method="post"><div class="form-body">'+soy.$$filterNoAutoescape(e.field.editHtml)+'</div><div class="buttons-container form-footer"><div class="buttons"><input class="button" type="submit" value="'+soy.$$escapeHtml("Submit")+'"/><a class="cancel" href="#">'+soy.$$escapeHtml("Cancel")+"</a></div></div></form></div>"},JIRA.Templates.IssueEditor.Fields.modalFieldGeneralErrors=function(e,s){var t='<div class="error">';if(1==e.messages.length)t+=soy.$$escapeHtml(e.messages[0]);else if(e.messages.length>0){t+="<ul>";for(var o=e.messages,a=o.length,i=0;i<a;i++){var l=o[i];t+="<li>"+soy.$$escapeHtml(l)+"</li>"}t+="</ul>"}return t+="</div>"},JIRA.Templates.IssueEditor.Fields.errorsLoading=function(e,s){var t=""+(e.isTimeout?soy.$$escapeHtml("The Jira server could not be contacted. This may be a temporary glitch or the server may be down."):soy.$$escapeHtml("There were errors loading the issue."));if(e.errorMessages){t+="<ul>";for(var o=e.errorMessages,a=o.length,i=0;i<a;i++){var l=o[i];t+="<li>"+soy.$$escapeHtml(l)+"</li>"}t+="</ul>"}return t};;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'jira-issue-navigator-components-module/issueeditor/templates/amd-wrapper.js' */
define("jira/components/issueeditor/templates",function(){"use strict";return JIRA.Templates.IssueEditor.Fields}),AJS.namespace("JIRA.Templates.IssueEditor.Fields",null,require("jira/components/issueeditor/templates"));
//# sourceMappingURL=amd-wrapper-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'jira-issue-navigator-components-module/issueeditor/js/entities/FieldModel.js' */
define("jira/components/issueeditor/entities/field",["require"],function(t){"use strict";var i=t("jira/components/libs/underscore"),e=t("jira/components/libs/brace"),s=t("jira/util/events"),r=t("jira/components/issueviewer/legacy/issuefieldutil"),n=t("jquery"),a=t("jira/skate"),h=t("jira/components/issueeditor/templates"),o=t("jira/components/issueeditor/eventtypes");return e.Model.extend({namedEvents:["editingStarted","focusRequested","editingCancelled","save","saveError","savingStarted","saveComplete","saveSuccess","updateRequired","validationError","modelDestroyed"],namedAttributes:["id","initParams","params","editHtml","viewHtml","required","fieldType","editing","saving","error","label","contentId"],initialize:function(){if(this.collection){var t=this;this.collection.on("reset",function(){t.triggerModelDestroyed()})}this.on("change:viewHtml",function(){var t=this.previous("viewHtml");t&&n.cleanData(t)}),this.onModelDestroyed(function(){var t=this.getViewHtml();t&&n.cleanData(t)})},blurEdit:function(){this.getEditing()&&(this.isDirty()||this.hasValidationError()?this.save():this.cancelEdit())},setValidationError:function(t,i,e){this.setSaving(!1),this.setError(i),this.edit({ignoreBlur:!0}),this.triggerSaveError(),this.triggerValidationError(t,e)},handleSaveError:function(){this.setSaving(!1),this.triggerSaveError()},cancelEdit:function(t){if(!this.cancelLocked){var i=new n.Event(o.BEFORE_INLINE_EDIT_CANCEL);s.trigger(i,[this.getId(),this.getFieldType(),t]),i.isDefaultPrevented()||(this.cancelLocked=!0,(this.getEditing()||this.getSaving())&&(this.setEditing(!1),this.setSaving(!1),this.unset("params"),this.unset("initParams"),this.triggerEditingCancelled(),this.unset("viewHtml")),delete this.cancelLocked)}},edit:function(t){this.getEditing()?t&&t.ignoreBlur||this.triggerFocusRequested(this,t):(this.setEditing(!0),this.triggerEditingStarted(this,t))},getCurrentParams:function(){this.triggerUpdateRequired();var t={};if(this.getParams())t=this.getParams();else if(this.getInitParams())t=this.getInitParams();else{var e=n("<div />").html(this.getEditHtml());this.setInitParams(this._serializeObject(e)),t=this.getInitParams()}var s={};return i.each(t,function(t,i){s[i]=t}),s},isEditable:function(){return!!this.getEditHtml()&&0!==n(this.getEditHtml()).find("textarea, :text,:radio,:checkbox, select").length},hasValidationError:function(){return!!this.getError()},switchElToEdit:function(t){this.getViewHtml()||this.setViewHtml(t.contents()),t.contents().detach(),t.html(h.field({issue:this.toJSON(),accessKey:r.getAccessKeyModifier()})),t.each(function(){a.init(this)}),this.getInitParams()||this.setInitParams(this._serializeObject(t)),this.setEditing(!0)},update:function(t){this.getEditing()&&this.setParams(this._serializeObject(t))},handleSaveSuccess:function(){this.setSaving(!1),this.setEditing(!1),this.unset("viewHtml"),this.unset("initParams"),this.setError(null),this.triggerSaveSuccess()},handleSaveStarted:function(){this.setSaving(!0),this.triggerSavingStarted()},save:function(){this.getSaving()||(this.triggerUpdateRequired(),this.triggerSave(this))},isDirty:function(){return this.triggerUpdateRequired(),this._isDirty(this.getCurrentParams())},_isDirty:function(t){return JSON.stringify(t)!==JSON.stringify(this.getInitParams())},matchesFieldSelector:function(){return r.matchesFieldSelector(this.id)},_serializeObject:function(t){var i={},e=n(t).find(":input").serializeArray();return n.each(e,function(){i[this.name]?(i[this.name].push||(i[this.name]=[i[this.name]]),i[this.name].push(this.value||"")):i[this.name]=this.value||""}),i}},{IS_EDITABLE:function(t){return t.isEditable()}})});
//# sourceMappingURL=FieldModel-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'jira-issue-navigator-components-module/issueeditor/js/entities/FieldCollection.js' */
define("jira/components/issueeditor/entities/fields",["require"],function(i){"use strict";var t=i("jira/components/libs/underscore"),e=i("jira/components/libs/brace"),n=i("jira/components/issueeditor/entities/field");return e.Collection.extend({model:n,initialize:function(){this.on("editingStarted",this._handleEditingStarted,this)},_handleEditingStarted:function(i,t){t=t||{},t.ignoreBlur||this.each(function(t){i!==t&&t.getEditing()&&t.blurEdit()})},update:function(i,e){var n=this;if(e&&e.changed){var d=e.changed,r=d.updated?d.updated.fields:[],a=d.added?d.added.fields:[];t.each(i,function(i){if(t.contains(r,i.id)){var e=n.get(i.id);e?(e.hasValidationError()&&delete i.editHtml,e.set(i,{silent:!0}),n.trigger("updated",e)):n.add(i)}else t.contains(a,i.id)&&n.add(i)})}else t.each(i,function(i){var t=n.get(i.id);t?(t.hasValidationError()&&delete i.editHtml,t.set(i,{silent:!0}),n.trigger("updated",t)):n.add(i)})},cancelEdit:function(){this.each(function(i){i.cancelEdit()})},isDirty:function(){return this.any(function(i){return i.isDirty()})},getDirtyFields:function(){return this.filter(function(i){return i.isDirty()})}})});
//# sourceMappingURL=FieldCollection-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'jira-issue-navigator-components-module/issueeditor/js/views/FieldView.js' */
define("jira/components/issueeditor/views/field",["require"],function(e){"use strict";var t=e("jira/components/issueeditor/cancelreasons"),i=e("jira/util/events"),s=e("jira/components/issueviewer/legacy/issuefieldutil"),n=e("jquery"),l=e("jira/components/libs/marionette-1.4.1/itemview"),o=e("jira/util/events/reasons"),d=e("jira/components/issueeditor/templates"),a=e("jira/components/issueeditor/eventtypes"),r=e("jira/components/issueeditor/analytics/viewissue");return l.extend({events:{"click .cancel":"onClickCancel",keyup:"onKeyCancel","click .submit":"onSubmit",click:"onEdit",mousedown:"saveSelectedText","submit form":"onSubmit",'keydown select[multiple="multiple"]':"_enterToSubmitMultiSelect","keypress select":"_enterToSubmitSelect","keypress textarea.no-line-break":"_enterToSubmitSelect","beforeBlurInput *":"_preventBlurByEsc"},initialize:function(e){this.model.on("validationError",this.handleValidationError,this),this.model.on("editingStarted",this.switchToEdit,this),this.model.on("focusRequested",this.focus,this),this.model.on("editingCancelled",this.switchToRead,this),this.model.on("saveError",this.handleSaveError,this),this.model.on("updateRequired",this.updateModel,this),this.model.on("savingStarted",this.handleSavingStarted,this),this.model.on("modelDestroyed",this.destroy,this),this.decorate(),this.issueEventBus=e.issueEventBus,this.issueEventBus.on("panelRendered",this.handlePanelRendered,this),this.model.setFieldType(this.$el.data("fieldtypecompletekey")),this._editDelay=0;var t=this.$el.children("shorten");t.length&&t.shorten();var s=this;i.bind(a.INLINE_EDIT_BLURRED,function(e,t){t===s.model.getId()&&s._onPossibleBlur()}),i.bind(a.INLINE_EDIT_REQUESTED,function(e,t){t!==s.model.getId()&&0!==s._editDelay&&(clearTimeout(s._editDelay),s._editDelay=0)})},destroy:function(){this.issueEventBus.off("panelRendered",this.handlePanelRendered)},decorate:function(){this.model.isEditable()&&!this.model.getEditing()&&(this.$el.addClass("editable-field inactive"),this.$el.append('<span class="overlay-icon aui-icon aui-icon-small aui-iconfont-edit" />'),this._addToolTip())},getEditElements:function(){return this.$el.find(".inline-edit-fields")},_addToolTip:function(){this.$el.attr("title","Click to edit"),n("a:not([title]):not([original-title])",this.$el).attr("title","Follow link")},_removeToolTip:function(){this.$el.removeAttr("title")},_stealAccessKeys:function(){n("[accessKey='"+"s"+"']").attr("accessKey","_s"),n("[accessKey='"+"`"+"']").attr("accessKey","_x")},_returnAccessKeys:function(){n("[accessKey=_s]").attr("accessKey","s"),n("[accessKey=_x]").attr("accessKey","`")},_handleEditingStarted:function(e){var t=this.$el.find(".field-tools");i.trigger(a.NEW_CONTENT_ADDED,[this.$el,o.inlineEditStarted]),i.trigger(a.INLINE_EDIT_STARTED,[this.model.getId(),this.model.getFieldType(),this.getEditElements(),this.$el]),this.$el.find(".textarea").css("height",Math.max(this._originalHeight,60)).expandOnInput(window.innerHeight-n("#stalker").height()-100),this.$el.find("textarea.initial-height").css("height",this._originalHeight).expandOnInput(window.innerHeight-n("#stalker").height()-100),e&&this.$el.find(":input:visible:first").focus(),this.$el.find(".error").size()||this.$el.find("select.aui-ss-select").each(function(){var e=n(this);e.data("static-suggestions")&&e.trigger("showSuggestions")}),this.$el.find(".save-options").attr("tabindex",1).prepend(t)},handleValidationError:function(e,t){this.$el.html(d.field({issue:{id:this.model.id,editHtml:e},accessKey:s.getAccessKeyModifier()})),this.$el.find(".error").addClass("inline-edit-error").attr("data-field",this.model.id),this._handleEditingStarted(t)},handlePanelRendered:function(e,t){var i=n(s.getFieldSelector(this.model.id),t);1===i.length&&(this.$el=i,this.el=this.$el[0],this.decorate(),this.delegateEvents())},handleSaveError:function(){this.$el.find(":input").removeAttr("disabled").trigger("enable"),this.$el.removeClass("saving saving-"+this.model.id)},handleSavingStarted:function(){this.$el.find(":input").attr("disabled","disabled").trigger("disable"),this.$el.find(".overlay-icon.throbber").spin(),this.$el.addClass("saving saving-"+this.model.id)},updateModel:function(){this.model.update(this.$el)},reveal:function(){var e=40;this.$el.scrollIntoView({direction:"y",marginBottom:e,marginTop:n("#stalker").outerHeight(!0)+e}),this.$el.trigger("reveal")},focus:function(){if(this.reveal(),this.$el.find(":input").removeAttr("disabled"),0===n(".aui-blanket[aria-hidden='false']").length){var e=this.$el.find(":input:visible:first");e.focus(),this.$el.hasClass("field-ignore-highlight")||e.select()}},switchToEdit:function(){this.trigger("editField",{fieldId:this.model.getId()}),this._stealAccessKeys(),this._removeToolTip(),this.$el.removeClass("inactive saving").addClass("active"),this._originalHeight=this.$el.height(),this.model.switchElToEdit(this.$el),this._handleEditingStarted(),this.focus()},switchToRead:function(){this.trigger("editFieldCancel",{fieldId:this.model.getId()}),this._addToolTip(),this.$el.addClass("inactive").removeClass("active"),this.$el.html(this.model.getViewHtml()),this.$el.closest("form").unbind("submit",this.onSubmit),this._returnAccessKeys()},onKeyCancel:function(e){27===e.keyCode&&(this.model.cancelEdit(t.escPressed),e.preventDefault())},onClickCancel:function(e){this.model.cancelEdit(),e.preventDefault(),e.stopPropagation()},onSubmit:function(e){var t=new n.Event("before-submit");this.$el.find("form").trigger(t),t.isDefaultPrevented()||(this.$el.find(":focus").blur(),this.issueEventBus.triggerFieldSubmitted(),this.model.save(),this._returnAccessKeys()),e.preventDefault()},onEdit:function(e){var t=n(e.target).is(".overlay-icon.aui-iconfont-edit"),s=0===n(e.target).closest("a, .uneditable").length&&this.$el.hasClass("inactive"),l=""===this._getCurrentlySelectedText()&&!this._previouslySelectedText,o=s&&(t||l),d=this.model.getId(),c=this.model.getFieldType();if(0!==this._editDelay)r.triggerEditableFieldDoubleClick(d,c),clearTimeout(this._editDelay),this._editDelay=0;else if(o){i.trigger(a.INLINE_EDIT_REQUESTED,[d]);var h=this;t?(r.triggerEditableFieldClickPencilIcon(d,c),n(document).one("click",function(e){e.isDefaultPrevented()||h.model.edit()})):this._editDelay=setTimeout(function(){!e.isDefaultPrevented()&&h.$el.hasClass("inactive")&&""===h._getCurrentlySelectedText()&&(r.triggerEditableFieldSingleClick(d,c),h.model.edit()),h._editDelay=0},250)}},_onPossibleBlur:function(){this.model.getSaving()||n(".aui-blanket[aria-hidden='false']").length>0||this.model.blurEdit()},_preventBlurByEsc:function(e){e.preventDefault()},_getCurrentlySelectedText:function(){return n(document.activeElement).is(":input")?"":document.selection&&document.selection.createRange?document.selection.createRange().text||"":window.getSelection?window.getSelection().toString():""},_enterToSubmitSelect:function(e){e.isDefaultPrevented()||13===e.which&&(e.preventDefault(),n(e.target).closest("form").submit())},_enterToSubmitMultiSelect:function(e){e.isDefaultPrevented()||13===e.which&&n(e.target).blur()},saveSelectedText:function(){this._previouslySelectedText=this._getCurrentlySelectedText()}})});
//# sourceMappingURL=FieldView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'jira-issue-navigator-components-module/issueeditor/js/views/ModalFieldView.js' */
define("jira/components/issueeditor/views/modalfield",["require"],function(e){"use strict";var i=e("jira/components/libs/underscore"),o=e("jira/util/events"),t=e("jira/dialog/form-dialog"),s=e("jira/components/libs/marionette-1.4.1/itemview"),r=e("jira/components/issueeditor/templates");return s.extend({errorsTemplate:r.modalFieldGeneralErrors,template:r.modalField,initialize:function(e){i.bindAll(this,"_onHide","_onSubmit","_remove","_showGeneralError","_showValidationError","_updateModel"),o.bind("Dialog.hide",this._onHide),this.issueEventBus=e.issueEventBus,this.issueEventBus.on("saveError",this._showGeneralError),this.model.onSaveSuccess(this._remove),this.model.onUpdateRequired(this._updateModel),this.model.onValidationError(this._showValidationError)},_enable:function(){var e=this._getDialog();e.hideFooterLoadingIndicator();var i=e.$popup;i.find(":input").removeAttr("disabled").trigger("enable"),i.find(":input:first").focus().select(),i.find(":submit").removeAttr("disabled")},_getDialog:function(){return this._dialog||(this._dialog=new t({id:"modal-field-view",submitHandler:this._onSubmit,content:function(e){e(this.template({field:this.model.toJSON(),issue:this.options.issue}))}.bind(this)}),this._dialog.get$popup().data("field-id",this.model.getId())),this._dialog},_onHide:function(e,i){i===this._getDialog().get$popup()&&this._remove()},_onSubmit:function(e,i){e.preventDefault(),this.model.save(),i();var o=this._getDialog();o.showFooterLoadingIndicator(),o.$popup.find(":input").attr("disabled","disabled").trigger("disable")},close:function(){this._remove()},_remove:function(){var e=this._getDialog();e.get$popup().is(":visible")&&e.hide(),e.destroy(),this.model.cancelEdit(),o.unbind("Dialog.hide",this._onHide),this.issueEventBus.off("saveError",this._showGeneralError),this.model.off("saveSuccess",this._remove),this.model.off("updateRequired",this._updateModel),this.model.off("validationError",this._showValidationError)},show:function(){this.model.edit(),this._getDialog().show()},_showGeneralError:function(e,o,t){this._enable();var s=this._getDialog().$popup,r=t&&t.errorCollection;if(r){var n=!i.isEmpty(r.errors),d=!i.isEmpty(r.errorMessages);!n&&d&&s.find(".form-body").append(this.errorsTemplate({messages:r.errorMessages}))}},_showValidationError:function(e){this._enable(),this._getDialog().$popup.find(".form-body").html(e)},_updateModel:function(){this.model.update(this._getDialog().$popup)}})});
//# sourceMappingURL=ModalFieldView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'jira-issue-navigator-components-module/issueeditor/js/views/LoadingError.js' */
define("jira/components/issueeditor/views/loadingerror",["require"],function(e){"use strict";var i=e("jira/components/libs/marionette-1.4.1/itemview"),s=e("jira/message"),t=e("jira/components/issueeditor/templates");return i.extend({template:t.errorsLoading,initialize:function(e,i){this.errorMessages=e,this.isTimeout=i},serializeData:function(){return{errorMessages:this.errorMessages,isTimeout:this.isTimeout}},onRender:function(){this.setElement(s.showErrorMsg(this.$el.html(),{closeable:!0,timeout:0}))}})});
//# sourceMappingURL=LoadingError-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'jira-issue-navigator-components-module/issueeditor/js/views/SaveError.js' */
define("jira/components/issueeditor/views/saveerror",["require"],function(e){"use strict";var s=e("jira/components/libs/underscore"),i=e("jira/components/libs/marionette-1.4.1/itemview"),r=e("jira/message"),t=e("jira/components/issueeditor/templates");return i.extend({events:{"simpleClick .issue":"onIssueLinkClick"},template:t.saveErrorMessage,getErrorMessages:function(){var e,i=[];return e=this.options.response.errorCollection,e&&(i=e.errorMessages.concat(s.values(e.errors))),i},onIssueLinkClick:function(e){var s;s={id:this.options.issueId,key:this.options.issueKey},e.preventDefault(),this.trigger("issueLinkClick",s),this.close()},onRender:function(){this.setElement(r.showErrorMsg(this.$el.html(),{closeable:!0,timeout:0}))},serializeData:function(){return{errors:this.getErrorMessages(),issueKey:this.options.issueKey}}})});
//# sourceMappingURL=SaveError-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'jira-issue-navigator-components-module/issueeditor/js/controllers/EditIssueController.js' */
define("jira/components/issueeditor/controllers/editissue",["require"],function(e){"use strict";var i=e("jira/components/libs/underscore"),t=e("jira/components/libs/brace"),s=e("jira/components/issueeditor/entities/fields"),n=e("jira/components/issueeditor/views/field"),r=e("jira/components/issueviewer/legacy/issuefieldutil"),d=e("jquery"),a=e("jira/message"),l=e("jira/components/issueeditor/templates");return t.Model.extend({namedAttributes:["issueId","issueKey","issueViewContext","fields","issueEventBus"],namedEvents:["save","editField","editFieldCancel"],initialize:function(){i.bindAll(this,"_handleSaveError","_handleSaveSuccess","_handleSavingStarted","cancelUneditedFields","createFieldView","handleFieldUpdate","save"),this.set({fields:new s},{silent:!0}),this.getFields().bind("add",this.createFieldView).bind("updated",this.handleFieldUpdate).bind("save",this.save),this.getIssueEventBus().onSavingStarted(this._handleSavingStarted),this.getIssueEventBus().onSaveSuccess(this._handleSaveSuccess),this.getIssueEventBus().onSaveError(this._handleSaveError),this.getIssueEventBus().onSave(this.save),this.getIssueEventBus().onSave(this.cancelUneditedFields)},_saveById:function(e){var i=this.getFields().get(e);i&&i.blurEdit()},_handleSaveError:function(e,t,s){var n=this;s?this.applyErrors(s):i.each(t,function(e){var i=n.getFields().get(e);i&&i.handleSaveError()})},_handleSavingStarted:function(e){this.getFields().each(function(t){i.include(e,t.id)&&t.handleSaveStarted()})},handleFieldUpdate:function(e){var i=d(r.getFieldSelector(e.id));i.hasClass("editable-field")||this.createFieldView(e)},applyErrors:function(e,t){var s=e.errorCollection;if(s&&s.errors&&this.getFields().each(function(n){if(s.errors[n.id]){var r=i.find(e.fields,function(e){return e.id===n.id});r&&(n.setValidationError(r.editHtml,s.errors[n.id],t),t=!1)}}),s.errorMessages&&s.errorMessages.length){var n=l.saveErrorMessage({errors:s.errorMessages,issueKey:this.getIssueKey()});a.showErrorMsg(n,{closeable:!0})}},reset:function(){this.getFields().reset()},cancelEdit:function(){this.getFields().each(function(e){e.cancelEdit()})},_handleSaveSuccess:function(e,t,s){var n=this.getFields().filter(function(e){return i.indexOf(s,e.id)>=0});i.each(n,function(e){e.handleSaveSuccess()})},getDirtyEditsInProgress:function(){return i.pluck(this.getFields().filter(function(e){return e.getEditing()&&e.isDirty()}),"id")},getEditsInProgress:function(){return i.pluck(this.getFields().filter(function(e){return e.getEditing()}),"id")},save:function(e,t){var s={},n=[],r=[],d=[e];if(e){if(!e.getEditing()||e.getSaving())return}else d=this.getFields().filter(function(e){return!e.getSaving()&&e.getEditing()&&e.isDirty()});i.each(d,function(e){n.push(e.getId()),r.push(e.getFieldType()||""),i.extend(s,e.getCurrentParams())}),n.length>0&&this.triggerSave(this.getIssueId(),this.getIssueKey(),n,s,t,r)},cancelUneditedFields:function(){this.getFields().each(function(e){!e.getEditing()||e.isDirty()||e.hasValidationError()||e.cancelEdit()})},update:function(e,t){e.fields&&(t&&t.fieldsInProgress&&i.each(e.fields,function(e){i.contains(t.fieldsInProgress,e.id)&&(e.editing=!0)}),this.getFields().update(e.fields,t)),e.issueId&&this.setIssueId(e.issueId),e.issueKey&&this.setIssueKey(e.issueKey)},createFieldView:function(e){var t=d(r.getFieldSelector(e.id),this.getIssueViewContext());if(1===t.length){var s=new n({model:e,el:t,issueEventBus:this.getIssueEventBus()}),a=function(t){var s={issueId:this.getIssueId(),issueKey:this.getIssueKey(),fieldId:e.getId(),fieldType:e.attributes.fieldType};return t=i.extend(s,t)}.bind(this);s.on("editField",function(e){this.trigger("editField",a(e))}.bind(this)),s.on("editFieldCancel",function(e){this.trigger("editFieldCancel",a(e))}.bind(this))}}})});
//# sourceMappingURL=EditIssueController-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'jira-issue-navigator-components-module/issueeditor/js/controllers/FieldsController.js' */
define("jira/components/issueeditor/controllers/fields",["require"],function(e){"use strict";var i=e("jira/components/issueeditor/views/loadingerror"),t=e("jira/components/libs/marionette-1.4.1/controller");return t.extend({showError:function(e,t){(e||t)&&(this.close(),this.triggerMethod("before:render"),this.view=new i(e,t),this.view.render(),this.listenTo(this.view,"close",this.close),this.triggerMethod("render"))},close:function(){this.view&&(this.view.close(),this.stopListening(this.view),delete this.view)}})});
//# sourceMappingURL=FieldsController-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'jira-issue-navigator-components-module/issueeditor/js/services/FieldsLoaderService.js' */
define("jira/components/issueeditor/services/fieldsloader",["require"],function(e){"use strict";var i=e("jira/components/issueviewer/legacy/issuefieldutil"),s=e("jquery"),t=e("jira/components/libs/marionette-1.4.1/controller"),r=e("jira/featureflags/feature-manager"),a=r.isFeatureEnabled("empanada.gin.enable-frontend-operational-events-for-sli");return t.extend({initialize:function(e){this.recurringPromise=(new s.RecurringPromise).sub(),this.recurringPromise.done(function(e){this.trigger("fieldsLoaded",e)}.bind(this)).fail(function(e){this.trigger("fieldsError",e)}.bind(this)),this.contextPath=e.contextPath},load:function(e){var i=this._buildUpdateTask(e);this.recurringPromise.add(i)},cancel:function(){this.recurringPromise.reset()},_getFieldsData:function(e,t){var r=s.ajax({url:this.contextPath+"/secure/AjaxIssueEditAction!default.jspa?decorator=none",headers:{"X-SITEMESH-OFF":!0},data:{issueId:e}}),n=r.pipe(function(s){a&&JIRA&&JIRA.Issues&&JIRA.Issues.Application&&JIRA.Issues.Application.fireSuccessSlaEvent&&JIRA.Issues.Application.fireSuccessSlaEvent("getLegacyIssueViewEditFields");var r=i.transformFieldHtml(s);return{issueId:e,issueKey:t,fields:r.fields}},function(i){var s,t={};switch(a&&JIRA&&JIRA.Issues&&JIRA.Issues.Application&&JIRA.Issues.Application.fireFailSlaEvent&&i.status>=500&&JIRA.Issues.Application.fireFailSlaEvent("getLegacyIssueViewEditFields",{reason:"get-legacy-issue-view-edit-fields-failed-with-status-code",statusCode:i.status}),i.status){case 400:s=!1;try{var r=JSON.parse(i.responseText)||{};t=r.errorCollection}catch(n){}break;case 401:s=!1,t=null;break;default:s=!0,t={}}return{issueId:e,fields:null,errorCollection:t,isTimeout:"timeout"===i.statusText,fatalError:s}});return n.abort=function(){r.abort.apply(r,arguments)},n},_buildUpdateTask:function(e){var i=e.viewIssueData,t=e.issueEntity,r=new s.Deferred;return i.setPending(t.id,this._getFieldsData(t.id,t.key),function(e){r.resolve(e)},function(e){e.fatalError?r.reject(e):r.resolve(e)}),r.promise()}})});
//# sourceMappingURL=FieldsLoaderService-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'jira-issue-navigator-components-module/issueeditor/js/services/IssueSaverService.js' */
define("jira/components/issueeditor/services/issuesaver",["require"],function(e){"use strict";var s=e("jira/components/issueviewer/legacy/issuefieldutil"),i=e("jira/components/libs/marionette-1.4.1/controller");return i.extend({initialize:function(e){this.saveInProgressManager=e.saveInProgressManager,this.model=e.model,this._saveStarted=[],this.saveInProgressManager.onSavingStarted(function(e,s){this._saveStarted.push((new Date).getTime()),this.trigger("saveStarted",e,s)}.bind(this)),this.saveInProgressManager.onSaveSuccess(function(e,i,t,r,a){r&&r.fields&&s.transformFieldHtml(r),this.trigger("save",{issueId:e,issueKey:i,savedFieldIds:t,savedFieldTypes:a,response:r,shouldSkipSaveIssueSuccessHandler:this._shouldSkipSaveIssueSuccessHandler,duration:(new Date).getTime()-this._saveStarted.shift()})}.bind(this)),this.saveInProgressManager.onSaveError(function(e,i,t,r){r&&r.fields&&s.transformFieldHtml(r),this.trigger("error",{issueId:e,issueKey:i,attemptedSavedIds:t,response:r,duration:(new Date).getTime()-this._saveStarted.shift()})}.bind(this))},setSkipSaveIssueSuccessHandler:function(e){this._shouldSkipSaveIssueSuccessHandler=e},save:function(e,s,i,t,r,a){this.saveInProgressManager.saveIssue(e,s,i,t,r,a)}})});
//# sourceMappingURL=IssueSaverService-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'jira-issue-navigator-components-module/issueeditor/js/services/SaveInProgressManager.js' */
define("jira/components/issueeditor/services/saveinprogressmanager",["require"],function(e){"use strict";var r=e("jira/components/libs/underscore"),s=e("jira/components/libs/brace"),t=window.AJS.contextPath(),a=e("jira/util/events"),n=e("jira/components/issueviewer/legacy/issuefieldutil"),o=e("jira/dialog/form-dialog"),i=e("jquery"),g=e("jira/message"),c=e("jira/ajs/ajax/smart-ajax"),v=e("jira/components/issueeditor/eventtypes"),l=e("jira/components/utils/ajshelper");return s.Model.extend({namedAttributes:["savesInProgress"],namedEvents:["beforeSaving","savingStarted","saveSuccess","saveError"],initialize:function(){this.setSavesInProgress([])},saveIssue:function(e,s,o,i,g,l){this.triggerBeforeSaving();var d,u,S=this;u=r.extend(i,{issueId:e,atl_token:atl_token(),singleFieldEdit:!0,fieldsToForcePresent:o});var h=r.extend({type:"POST",url:t+"/secure/AjaxIssueAction.jspa?decorator=none",headers:{"X-SITEMESH-OFF":!0},error:function(r){S._handleSaveError(e,s,o,r)},success:function(r,t,a,i){var g=i.data;"string"==typeof g?S._handleHtmlResponse(e,s,o,g,l):(n.transformFieldHtml(g),S.triggerSaveSuccess(e,s,o,g,l))},complete:function(){S.removeSaveInProgress(d),a.trigger(v.INLINE_EDIT_SAVE_COMPLETE)},data:u},g);d=c.makeRequest(h),this.addSaveInProgress(d),this.triggerSavingStarted(e,o,i)},hasSavesInProgress:function(){return this.getSavesInProgress().length>0},removeSaveInProgress:function(e){this.setSavesInProgress(r.without(this.getSavesInProgress(),e))},addSaveInProgress:function(e){var r=this.getSavesInProgress();r.push(e),this.setSavesInProgress(r)},_handleHtmlResponse:function(e,r,s,t,a){var g=this,c=i(l.extractBodyFromResponse(t)),v=c.find("#atl_token").val();v&&i("#atlassian-token").attr("content",v);var d=new o({offsetTarget:"body",content:c});this.triggerSaveError(e,r,s),d._handleServerSuccess=function(t){d.hide();var o=g._parseResponse(t);o&&(n.transformFieldHtml(o),g.triggerSaveSuccess(e,r,s,o,a))},d._handleServerError=function(t){d.hide();var a=g._parseResponse(t.responseText);a&&(n.transformFieldHtml(a),g.triggerSaveError(e,r,s,a))},d.show()},_handleSaveError:function(e,r,s,t){var a=this._parseResponse(t.responseText);a&&(n.transformFieldHtml(a),this.triggerSaveError(e,r,s,a))},_parseResponse:function(e){try{return JSON.parse(e)}catch(r){return this._showFatalErrorMessage(),null}},_showFatalErrorMessage:function(){var e="<p>"+"Communications Breakdown"+"</p><p>"+"Close this dialog and press refresh in your browser"+"</p>";g.showErrorMsg(e,{closeable:!0})}})});
//# sourceMappingURL=SaveInProgressManager-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'jira-issue-navigator-components-module/issueeditor/js/services/UnloadInterceptor.js' */
define("jira/components/issueeditor/services/unloadinterceptor",["require"],function(e){"use strict";var n=e("jira/components/libs/underscore"),t=e("jira/components/libs/marionette-1.4.1/controller");return t.extend({initialize:function(){this._afterEventHandlers=[],this.originalBeforeUnload=window.onbeforeunload,window.onbeforeunload=this.onBeforeUnload.bind(this)},addAfterEvent:function(e){this._afterEventHandlers.push(e)},removeAfterEvent:function(e){this._afterEventHandlers=n.without(this._afterEventHandlers,e)},onBeforeUnload:function(){var e,t=arguments;return n.isFunction(this.originalBeforeUnload)&&(e=this.originalBeforeUnload.apply(window,t)),e||(e=n.reduce(this._afterEventHandlers,function(e,n){return e?e:n.apply(window,t)},e)),e}})});
//# sourceMappingURL=UnloadInterceptor-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'jira-issue-navigator-components-module/issueeditor/js/InlineEditUtils.js' */
define("jira/components/issueeditor/inlineeditutils",["require"],function(e){"use strict";function s(e){var s=document.activeElement;return e.find(s).length>0||e.filter(s).length>0||r()}function r(){var e=i(".mediaPickerPopup");return e.length>0&&"block"===e.css("display")}var i=e("jquery"),t=e("jira/util/events"),l=e("jira/components/issueeditor/eventtypes"),u={};return u.BLUR_FOCUS_TIMEOUT=50,u.BlurTriggers={Default:function(e,r){function i(){s(r)||(n=!1,t.trigger(l.INLINE_EDIT_BLURRED,[e]))}r=r.nextAll(".save-options").andSelf();var a,g=":input, a[href], [tabindex]",n=s(r),o={focus:function(){n||(n=!0,t.trigger(l.INLINE_EDIT_FOCUSED,[e]))},blur:function(){a&&clearTimeout(a),a=setTimeout(i,u.BLUR_FOCUS_TIMEOUT)}};r.attr("tabindex",1).bind(o).delegate(g,o)}},u.BlurTriggerMapping={system:{summary:u.BlurTriggers.Default,priority:u.BlurTriggers.Default,issuetype:u.BlurTriggers.Default,components:u.BlurTriggers.Default,versions:u.BlurTriggers.Default,fixVersions:u.BlurTriggers.Default,assignee:u.BlurTriggers.Default,reporter:u.BlurTriggers.Default,environment:u.BlurTriggers.Default,description:u.BlurTriggers.Default,labels:u.BlurTriggers.Default,duedate:u.BlurTriggers.Default},custom:{"com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect":u.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:datepicker":u.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:datetime":u.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:float":u.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:grouppicker":u.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:labels":u.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes":u.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:multigrouppicker":u.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:multiselect":u.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker":u.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:multiversion":u.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:project":u.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:select":u.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons":u.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:textarea":u.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:textfield":u.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:url":u.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:userpicker":u.BlurTriggers.Default,"com.atlassian.jira.plugin.system.customfieldtypes:version":u.BlurTriggers.Default}},t.bind(l.INLINE_EDIT_STARTED,function(e,s,r,i){var t;if(r){if(t=u.BlurTriggerMapping.custom[r],!t){var l=r.replace(/.+:(.+)/,"$1");t=u.BlurTriggerMapping.custom[l]}}else t=u.BlurTriggerMapping.system[s];t&&t(s,i)}),u});
//# sourceMappingURL=InlineEditUtils-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'jira-issue-navigator-components-module/issueeditor/js/eventtypes.js' */
define("jira/components/issueeditor/eventtypes",["require"],function(e){"use strict";var E=e("jira/components/issueviewer/eventtypes");return E.INLINE_EDIT_SAVE_COMPLETE="inlineEditSaveComplete",E.INLINE_EDIT_STARTED="inlineEditStarted",E.BEFORE_INLINE_EDIT_CANCEL="inlineEditCancelled",E.INLINE_EDIT_BLURRED="inlineEditBlurred",E.INLINE_EDIT_FOCUSED="inlineEditFocused",E.INLINE_EDIT_REQUESTED="inlineEditRequested",E.LOCK_PANEL_REFRESHING="lockPanelRefreshing",E.UNLOCK_PANEL_REFRESHING="unlockPanelRefreshing",E});
//# sourceMappingURL=eventtypes-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'jira-issue-navigator-components-module/issueeditor/js/cancelreasons.js' */
define("jira/components/issueeditor/cancelreasons",function(){"use strict";return{escPressed:"escPressed"}});
//# sourceMappingURL=cancelreasons-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'jira-issue-navigator-components-module/issueeditor/js/analytics/ViewIssue.js' */
define("jira/components/issueeditor/analytics/viewissue",["require"],function(e){"use strict";function i(e,i){l.trigger("analyticsEvent",{name:e,data:{fieldId:i}})}var l=e("jira/components/utils/ajshelper"),t=e("jira/components/analytics-tracker/tracker");return{triggerEditableFieldDoubleClick:function(e,l){i("jira.viewissue.editable-field.double-click",e),t.trackEvent("viewissue.editable-field","double-click",{fieldId:e,fieldType:l})},triggerEditableFieldSingleClick:function(e,l){i("jira.viewissue.editable-field.single-click",e),t.trackEvent("viewissue.editable-field","single-click",{fieldId:e,fieldType:l})},triggerEditableFieldClickPencilIcon:function(e,l){i("jira.viewissue.editable-field.click.pencil-icon",e),t.trackEvent("viewissue.editable-field","click.pencil-icon",{fieldId:e,fieldType:l})}}});
//# sourceMappingURL=ViewIssue-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issueeditor', location = 'jira-issue-navigator-components-module/issueeditor/js/namespace.js' */
AJS.namespace("JIRA.Components.IssueEditor",null,require("jira/components/issueeditor")),AJS.namespace("JIRA.Components.IssueEditor.AppModule",null,require("jira/components/issueeditor/appmodule")),AJS.namespace("JIRA.Components.IssueEditor.NoInlineAppModule",null,require("jira/components/issueeditor/noinlineappmodule")),AJS.namespace("JIRA.Components.IssueEditor.Controllers.EditIssue",null,require("jira/components/issueeditor/controllers/editissue")),AJS.namespace("JIRA.Components.IssueEditor.Controllers.Fields",null,require("jira/components/issueeditor/controllers/fields")),AJS.namespace("JIRA.Components.IssueEditor.Collections.Fields",null,require("jira/components/issueeditor/entities/fields")),AJS.namespace("JIRA.Components.IssueEditor.Models.Field",null,require("jira/components/issueeditor/entities/field")),AJS.namespace("JIRA.Components.IssueEditor.Services.FieldsLoader",null,require("jira/components/issueeditor/services/fieldsloader")),AJS.namespace("JIRA.Components.IssueEditor.Services.IssueSaver",null,require("jira/components/issueeditor/services/issuesaver")),AJS.namespace("JIRA.Components.IssueEditor.Services.SaveInProgressManager",null,require("jira/components/issueeditor/services/saveinprogressmanager")),AJS.namespace("JIRA.Components.IssueEditor.Services.UnloadInterceptor",null,require("jira/components/issueeditor/services/unloadinterceptor")),AJS.namespace("JIRA.Components.IssueEditor.Views.FieldView",null,require("jira/components/issueeditor/views/field")),AJS.namespace("JIRA.Components.IssueEditor.Views.LoadingError",null,require("jira/components/issueeditor/views/loadingerror")),AJS.namespace("JIRA.Components.IssueEditor.Views.ModalFieldView",null,require("jira/components/issueeditor/views/modalfield")),AJS.namespace("JIRA.Components.IssueEditor.Views.SaveError",null,require("jira/components/issueeditor/views/saveerror")),AJS.namespace("JIRA.Components.IssueEditor.InlineEditUtils",null,require("jira/components/issueeditor/inlineeditutils")),AJS.namespace("JIRA.Issues.InlineEdit.BlurTriggers",null,require("jira/components/issueeditor/inlineeditutils").BlurTriggers),AJS.namespace("JIRA.Issues.InlineEdit.BlurTriggerMapping",null,require("jira/components/issueeditor/inlineeditutils").BlurTriggerMapping),AJS.namespace("JIRA.Issues.CANCEL_REASON",null,require("jira/components/issueeditor/cancelreasons"));
//# sourceMappingURL=namespace-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:inline-edit-feature', location = 'jira-issue-navigator-components-module/util/InlineEditFeature.js' */
define("jira/components/util/inline-edit-feature",["require"],function(n){"use strict";function e(){var n=i.claim("com.atlassian.jira.jira-issue-nav-components:inline-edit-feature.enabled");a=void 0===n||Boolean(n)}var i=n("wrm/data"),a=null;return{isEnabled:function(){return null===a&&e(),a}}});
//# sourceMappingURL=InlineEditFeature-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:issuecomponentresolver', location = 'jira-issue-navigator-components-module/issuecomponentresolver/IssueComponentResolver.js' */
define("jira/components/issuecomponentresolver",["require"],function(e){"use strict";var n=e("jira/components/util/inline-edit-feature"),i=e("jira/components/issueviewer"),r=e("jira/components/issueeditor");return{resolve:function(){return n.isEnabled()?r:i}}});
//# sourceMappingURL=IssueComponentResolver-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:marionette-2.1.0', location = 'jira-issue-navigator-components-module/libs/marionette-2.1.0.js' */
define("jira/components/libs/marionette-2.1.0",["require"],function(e){"use strict";function t(e,t){var i=s.defaults({},t||{},{isPrevented:!1,emitter:this,preventDefault:function(){this.isPrevented=!0}});return this.trigger(e,i),i}function i(e,t){var i=this.triggerPreventable(e,t);i.isPrevented&&t.preventDefault()}var n=e("atlassian/libs/factories/marionette-2.1.0"),r=e("jira/components/libs/backbone"),s=e("jira/components/libs/underscore"),o=n(s,r);return s.extend(o.View.prototype,{unwrapTemplate:function(e){if(!e||this.$el.hasClass(e))if(this.$el.parent().length){var t=this.$el.children();this.$el.replaceWith(t),this.setElement(t)}else this.setElement(this.$el.children())},triggerPreventable:t,retriggerPreventable:i}),s.extend(o.Controller.prototype,{triggerPreventable:t,retriggerPreventable:i}),o.ViewManager=o.Object.extend({constructor:function(){this.views={},o.Controller.apply(this,arguments)},hideView:function(e){var t=this.views[e];t&&(this.stopListening(t),t.isDestroyed||t.destroy(),delete this.views[e])},showView:function(e,t){var i=this.buildView(e,t);i.render()},buildView:function(e,t){var i=this.views[e];return i||(i=t.call(this),this.listenTo(i,"destroy",function(){this.hideView(e)}),this.views[e]=i),i},getView:function(e){return this.views[e]},onDestroy:function(){s.each(this.views,function(e,t){this.hideView(t)},this)}}),o}),define("jira/components/lib/marionette-2.1.0",["require"],function(e){"use strict";return e("jira/components/libs/marionette-2.1.0")});
//# sourceMappingURL=marionette-2.1.0-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:functional-utils', location = 'jira-issue-navigator-components-module/util/FunctionalUtils.js' */
define("jira/components/util/functionalutils",["require"],function(n){"use strict";var i=n("jira/components/libs/underscore");return{lambda:function(n){return function(){return n}},isNotBlank:function(n){return!!n},bindObjectTo:function(n,t){i.map(n,function(u,r){i.isFunction(u)&&(n[r]=u.bind(t))})}}});
//# sourceMappingURL=FunctionalUtils-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-plugin:issue-utils', location = 'content/js/util/actions.js' */
!function(){"use strict";AJS.namespace("JIRA.Issues.Actions"),JIRA.Issues.Actions.DELETE="delete",JIRA.Issues.Actions.UPDATE="update",JIRA.Issues.Actions.INLINE_EDIT="inlineEdit",JIRA.Issues.Actions.ROW_UPDATE="rowUpdate"}();
//# sourceMappingURL=actions-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-plugin:issue-utils', location = 'content/js/util/Utils.js' */
define("jira/issue/utils",["require"],function(e){"use strict";var i=e("jira/dialog/dialog-register"),t=e("underscore");return{isIssueDialog:function(e){return!!e.issueId||t.include(i,e)},isDeleteDialog:function(e){return"delete-issue-dialog"===e.options.id},isEditCommentDialog:function(e){return"edit-comment"===e.options.id},getEffectiveIssueKeyForDialog:function(e){var i=e&&e.$activeTrigger&&e.$activeTrigger.data("issuekey");return i?i:JIRA.Issues.Api.getSelectedIssue().getKey()},getEffectiveIssueIdForDialog:function(e){return e.issueId?e.issueId:JIRA.Issues.Api.getSelectedIssue().getId()},getAction:function(e){return this.isDeleteDialog(e)?JIRA.Issues.Actions.DELETE:this.isEditCommentDialog(e)?JIRA.Issues.Actions.EDIT_COMMENT:JIRA.Issues.Actions.UPDATE},getMessage:function(e){if(!this.isEditCommentDialog(e))return e.options.issueMsg||"thanks_issue_updated"},getMeta:function(e){return this.isEditCommentDialog(e)?{commentId:e.$activeTrigger.attr("id").replace("edit_comment_","")}:{}},getUpdateCommandForDialog:function(e){var i=this;if(this.isIssueDialog(e))return{key:i.getEffectiveIssueKeyForDialog(e),id:i.getEffectiveIssueIdForDialog(e),action:i.getAction(e),message:i.getMessage(e),meta:i.getMeta(e)}},debounce:function(e,i){var s=Array.prototype.slice.call(arguments,2);e||console.error("JIRA.Issues.Utils.debounce: ctx must be defined"),clearTimeout(e[i+"DebounceTimeout"]),e[i].apply(e,s),e[i+"DebounceTimeout"]||(e[i+"Original"]=e[i],e[i]=t.debounce(function(){return e[i+"Original"].apply(e,arguments)},300)),e[i+"DebounceTimeout"]=setTimeout(function(){e[i]=e[i+"Original"],e[i+"DebounceTimeout"]=null},500)},waitForDeferreds:function(e,i,s){s=s||window;var n=[],o=new jQuery.Deferred;return t.each(e,function(){var e=i.apply(s,arguments);e&&e.promise&&n.push(e)}),n.length?jQuery.when.apply(jQuery,n).then(function(){o.resolveWith(s)}):o.resolveWith(s),o.promise()},resolvedPromise:function(){return(new jQuery.Deferred).resolve().promise()},patch:function(e,i,t){var s=e.hasOwnProperty(i),n=e[i];return e[i]=t,function(){s?e[i]=n:delete e[i]}}}});
//# sourceMappingURL=Utils-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-plugin:issue-utils', location = 'content/js/util/xsrf-token-header.js' */
define("jira/issue/utils/xsrf-token-header",[],function(){"use strict";return{"X-Atlassian-Token":"no-check"}});
//# sourceMappingURL=xsrf-token-header-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-plugin:issue-utils', location = 'content/js/util/namespace.js' */
AJS.namespace("JIRA.Issues.XsrfTokenHeader",null,require("jira/issue/utils/xsrf-token-header")),AJS.namespace("JIRA.Issues.Utils",null,require("jira/issue/utils"));
//# sourceMappingURL=namespace-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-plugin:backbone-ext', location = 'content/js/base/AttributesMixinCreator.js' */
define("jira/issues/attributesmixincreator",["require"],function(e){"use strict";var t=e("underscore"),r=e("jira/issues/mixins");return{create:function(e){var i={};return t.indexOf(e,"id")===-1&&e.unshift("id"),t.each(e,function(e){var t=r.createMethodName("set",e);i[t]=function(t,r){var i={};return i[e]=t,this.set(i,r),this};var n=r.createMethodName("get",e);i[n]=function(){return this.get(e)}}),i}}});
//# sourceMappingURL=AttributesMixinCreator-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-plugin:backbone-ext', location = 'content/js/base/EventsMixinCreator.js' */
define("jira/issues/eventsmixincreator",["require"],function(t){"use strict";var r=t("underscore"),n=t("jira/issues/mixins");return{create:function(t){var e={},i=function(t){var i=n.createMethodName("bind",t);e[i]=function(){return this.bind.apply(this,[t].concat(r.toArray(arguments)))};var a=n.createMethodName("unbind",t);e[a]=function(){return this.unbind.apply(this,[t].concat(r.toArray(arguments)))};var c=n.createMethodName("trigger",t);e[c]=function(){return this.trigger.apply(this,[t].concat(r.toArray(arguments)))};var o=n.createMethodName("one",t);e[o]=function(){var n=this,e=arguments[0],i=function c(){n.unbind(t,c),e(arguments)},a=r.toArray(arguments).slice(1);return this.bind.apply(this,[t,i].concat(a))}};return r.each(t,i.bind(this)),e}}});
//# sourceMappingURL=EventsMixinCreator-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-plugin:backbone-ext', location = 'content/js/base/Extensions.js' */
define("jira/issue/extensions",["require"],function(e){"use strict";function t(e,t){c.forEach(c.keys(t),function(i){var r=e.prototype;if("initialize"===i){var n=r.initialize;return void(r.initialize=function(){t.initialize.apply(this,arguments),n&&n.apply(this,arguments)})}if("validate"===i){var o=r.validate;return void(r.validate=function(){var e=t.validate.apply(this,arguments);return e?e:o?o.apply(this,arguments):void 0})}if("defaults"!==i){if("properties"===i){if(!c.isArray(t[i]))throw"Expects properties member on mixin to be an array";return r.properties||(r.properties=[]),void(r.properties=r.properties.concat(t[i]))}if("namedEvents"===i){if(!c.isArray(t[i]))throw"Expects events member on mixin to be an array";return r.namedEvents||(r.namedEvents=[]),void(r.namedEvents=r.namedEvents.concat(t[i]))}if(r.hasOwnProperty(i))throw"Mixin error: object "+e+" already has property "+i+" for mixin "+t;r[i]=t[i]}else{var s=r.defaults||(r.defaults={}),a=t[i];for(var p in a){if(s.hasOwnProperty(p))throw"Mixin error: object "+e+" already has default "+p+" defined for mixin "+t;s[p]=a[p]}}},this)}function i(e){return function i(r,n){var o,s,a=c.extend({},r);return r&&r.mixins&&(s=r.mixins,delete a.mixins),o=e.call(this,a,n),s&&c.each(r.mixins,function(e){t(o,e)}),o.prototype.namedEvents&&t(o,u.create(o.prototype.namedEvents)),o.prototype.properties&&t(o,d.create(o.prototype.properties)),o.extend=i,o}}function r(e,t){var i=e.prototype,r=t.prototype;r.set=function(e,t){var r,n=this.properties;if(n){c.isObject(e)||null==e?r=e:(r={},r[e]=t);for(var o in r)if(c.indexOf(n,o)<0)throw"Property '"+o+"' does not exist"}return i.set.apply(this,arguments)},r.get=function(e){if(this.properties&&c.indexOf(this.properties,e)<0)throw"Property '"+e+"' does not exist";return i.get.apply(this,arguments)}}function n(e){var t=e.prototype;t.cleanup=function(){this.unbind(),this.off()}}function o(e,t){var i=t.prototype;i.addListener=function(e,t,i,r){if(arguments.length<3)throw"The 'other', 'event', and 'callback' arguments are mandatory";var n,o,s=t.charAt(0).toUpperCase()+t.slice(1),a="on"+s,p="off"+s,f="bind"+s,c="unbind"+s;if(e[a]){if(n=a,o=p||c,"function"!=typeof e[n])throw"object does not have method "+a+"'";if("function"!=typeof e[o])throw"object does not have method "+p+"'"}else if(n=f,o=c,"function"!=typeof e[n])throw"object does not have event ["+t+"] registered'";e[n](i,r),this._cleanerUppers=this._cleanerUppers||[],this._cleanerUppers.push(function(){e[o](i,r)})},i.removeListeners=function(){this._cleanerUppers&&c.each(this._cleanerUppers,function(e){e()})}}function s(e,t){var i=t.prototype,r=e.prototype.remove;i.remove=function(){return this.removeListeners(),r.apply(this,arguments)},i.deactivate=function(){this.undelegateEvents(),this.removeListeners()},i.cleanup=function(){this.off(),this.unbind(),this.remove()}}function a(e){var t=e.extend(),r=e.extend;return t.extend=i(r),n(t),t}function p(e){var t=a(e);return r(e,t),t}function f(e){var t=a(e);return o(e,t),s(e,t),t}var c=e("underscore"),u=e("jira/issues/eventsmixincreator"),d=e("jira/issues/attributesmixincreator");return{applyModelExtensions:p,applyExtensions:a,applyViewExtensions:f}});
//# sourceMappingURL=Extensions-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-plugin:backbone-ext', location = 'content/js/base/BaseCollection.js' */
define("jira/issues/basecollection",["require"],function(e){"use strict";var i=e("backbone"),s=e("jira/issue/extensions");return s.applyExtensions(i.Collection)});
//# sourceMappingURL=BaseCollection-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-plugin:backbone-ext', location = 'content/js/base/BaseEvented.js' */
define("jira/issues/baseevented",["require"],function(e){"use strict";var i=e("backbone"),n=e("underscore"),t=e("jira/issue/extensions"),s=function(){this.initialize.apply(this,arguments)};return n.extend(s.prototype,i.Events,{initialize:function(){}}),s.extend=i.Model.extend,t.applyExtensions(s)});
//# sourceMappingURL=BaseEvented-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-plugin:backbone-ext', location = 'content/js/base/BaseModel.js' */
define("jira/issues/basemodel",["require"],function(e){"use strict";var s=e("backbone"),i=e("jira/issue/extensions");return i.applyModelExtensions(s.Model)});
//# sourceMappingURL=BaseModel-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-plugin:backbone-ext', location = 'content/js/base/BaseRouter.js' */
define("jira/issues/baserouter",["require"],function(e){"use strict";var s=e("backbone"),r=e("jira/issue/extensions");return r.applyExtensions(s.Router)});
//# sourceMappingURL=BaseRouter-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-plugin:backbone-ext', location = 'content/js/base/BaseView.js' */
define("jira/issues/baseview",["require"],function(e){"use strict";var i=e("backbone"),s=e("jira/issue/extensions");return s.applyViewExtensions(i.View)});
//# sourceMappingURL=BaseView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-plugin:backbone-ext', location = 'content/js/base/Mixins.js' */
define("jira/issues/mixins",function(){"use strict";return{createMethodName:function(e,t){return e+t.charAt(0).toUpperCase()+t.substr(1)}}});
//# sourceMappingURL=Mixins-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-plugin:backbone-ext', location = 'content/js/base/ModelUtils.js' */
define("jira/issues/modelutils",["require"],function(t){"use strict";function n(){this.modelEvents={}}function e(t){var n=this;"change"===t||0===t.indexOf("change:")?i.log.captureEvent(n,r.toArray(arguments)):o.Events.trigger.apply(n,arguments)}var i,r=t("underscore"),o=t("backbone"),c=t("jira/issue/utils");n.prototype.captureEvent=function(t,n){var e=n[0];this.modelEvents[t.cid]||(this.modelEvents[t.cid]={model:t,events:{}}),this.modelEvents[t.cid].events[e]=n},n.prototype.replayEvents=function(){r.each(this.modelEvents,function(t){r.each(t.events,function(n){o.Events.trigger.apply(t.model,n)})})};var a=function(){if(i)return{commit:function(){}};i={log:new n};var t=c.patch(o.Model.prototype,"trigger",e);return{commit:function(){t(),i.log.replayEvents(),i=null}}},s={transaction:function(t,n){var e=a();try{return t.apply(n)}finally{e.commit()}},makeTransactional:function(t){var n=function(t){return function(){var n=arguments;return s.transaction(function(){return t.apply(this,n)},this)}},e=Array.prototype.slice.call(arguments,1);0===e.length&&(e=r.functions(t)),r.each(e,function(e){0!==e.indexOf("_")&&(t[e]=n(t[e]))})}};return s});
//# sourceMappingURL=ModelUtils-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-plugin:backbone-ext', location = 'content/js/base/namespace.js' */
AJS.namespace("JIRA.Issues.AttributesMixinCreator",null,require("jira/issues/attributesmixincreator")),AJS.namespace("JIRA.Issues.BaseCollection",null,require("jira/issues/basecollection")),AJS.namespace("JIRA.Issues.BaseEvented",null,require("jira/issues/baseevented")),AJS.namespace("JIRA.Issues.BaseModel",null,require("jira/issues/basemodel")),AJS.namespace("JIRA.Issues.BaseRouter",null,require("jira/issues/baserouter")),AJS.namespace("JIRA.Issues.BaseView",null,require("jira/issues/baseview")),AJS.namespace("JIRA.Issues.EventsMixinCreator",null,require("jira/issues/eventsmixincreator")),AJS.namespace("JIRA.Issues.Mixins",null,require("jira/issues/mixins")),AJS.namespace("JIRA.Issues.ModelUtils",null,require("jira/issues/modelutils"));
//# sourceMappingURL=namespace-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-plugin:backbone-ext', location = 'content/js/base/init.js' */
!function(){"use strict";var i=require("jira/components/util/functionalutils"),n=require("underscore");n.mixin({lambda:i.lambda,isNotBlank:i.isNotBlank,bindObjectTo:i.bindObjectTo})}();
//# sourceMappingURL=init-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:orderby', location = 'jira-issue-navigator-components-module/orderby/orderby.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.OrderBy&&(JIRA.Templates.OrderBy={}),JIRA.Templates.OrderBy.orderBy=function(e,s){return(e.sortBy&&e.sortBy.fieldId?'<a class="order-by '+("ASC"==e.sortBy.order?"ascending":"descending")+'" data-field-id="'+soy.$$escapeHtml(e.sortBy.fieldId)+'" data-direction="'+soy.$$escapeHtml(e.sortBy.order)+'" href="#" title="'+soy.$$escapeHtml(AJS.format("Order by {0}",e.sortBy.fieldName))+'"><span>'+soy.$$escapeHtml(AJS.format("Order by {0}",e.sortBy.fieldName))+'</span><span class="aui-icon aui-icon-small aui-iconfont-'+("ASC"==e.sortBy.order?"up":"down")+'"></span></a>':'<a class="order-by" title="'+soy.$$escapeHtml("Order by")+'"><span>'+soy.$$escapeHtml("Order by")+"</span></a>")+'<a class="order-options" title="'+soy.$$escapeHtml("Select the field that issues are ordered by.")+'">'+soy.$$escapeHtml("Select the field that issues are ordered by.")+"</a>"},JIRA.Templates.OrderBy.orderByOptions=function(e,s){for(var t='<select id="order-by-options" multiple="multiple" class="hidden"><optgroup data-footer-text="'+soy.$$escapeHtml(e.footer)+'">',o=e.options,n=o.length,r=0;r<n;r++){var a=o[r];t+='<option title="'+soy.$$escapeHtml(a.fieldName)+'" value="'+soy.$$escapeHtml(a.fieldId)+'" data-meta="'+soy.$$escapeHtml(a.meta)+'">'+soy.$$escapeHtml(a.fieldName)+"</option>"}return t+="</optgroup></select>"};;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:orderby', location = 'jira-issue-navigator-components-module/orderby/OrderByModel.js' */
define("jira/components/orderby/orderbymodel",["require"],function(t){"use strict";var e=t("jira/components/libs/brace"),i=t("jquery"),r=t("wrm/context-path");return e.Model.extend({namedEvents:["sort"],namedAttributes:["sortBy","jql"],initialize:function(){this.on("change:jql",this.updateSelectedSort,this)},updateSelectedSort:function(){i.ajax({type:"POST",url:r()+"/rest/orderbycomponent/latest/orderByOptions/primary",data:JSON.stringify({jql:this.getJql()}),contentType:"application/json",success:function(t){this.setSortBy(t)}.bind(this)})},toggleSort:function(){this.setJql(this.getSortBy().toggleJql),this.triggerSort(this.getJql())},doSort:function(t){this.setJql(t),this.triggerSort(this.getJql())}})});
//# sourceMappingURL=OrderByModel-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:orderby', location = 'jira-issue-navigator-components-module/orderby/OrderByView.js' */
define("jira/components/orderby/orderbyview",["require"],function(e){"use strict";var r=e("jira/components/libs/brace"),t=e("jquery"),o=e("jira/util/events"),n=e("jira/components/orderby/eventtypes"),i=e("jira/components/orderby/templates"),d=e("jira/components/orderby/orderbydropdownview");return r.View.extend({template:i.orderBy,events:{"click a.order-by":"_onClickOrderBy","click a.order-options":"_toggleShowDropDown"},initialize:function(){this.model.on("change:sortBy",this.render,this)},render:function(){return this.$el.html(this.template(this.model.toJSON())),this},deactivate:function(){this.orderByDropDown&&this.orderByDropDown.deactivate(),this.undelegateEvents()},_onClickOrderBy:function(e){var r=new t.Event(n.ISSUE_TABLE_REORDER);if(o.trigger(r),!r.isDefaultPrevented()){var i=t(e.currentTarget).data("field-id");i&&this.model.toggleSort()}e.preventDefault()},_toggleShowDropDown:function(e){this.orderByDropDown||(this.orderByDropDown=new d({model:this.model,offsetTarget:this.$("a.order-by"),onHideCallback:function(){this.orderByDropDown=null}.bind(this)})),this.orderByDropDown.toggle(),e.preventDefault()}})});
//# sourceMappingURL=OrderByView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:orderby', location = 'jira-issue-navigator-components-module/orderby/OrderByDropDownView.js' */
define("jira/components/orderby/orderbydropdownview",["require"],function(e){"use strict";var t=e("jira/components/libs/underscore"),i=e("jira/components/libs/brace"),n=e("jquery"),r=e("jira/util/events"),o=e("jira/components/orderby/eventtypes"),s=e("jira/components/orderby/templates"),a=e("jira/ajs/layer/inline-layer"),d=e("jira/ajs/select/checkbox-multi-select"),l=e("jira/ajs/select/suggestions/select-suggest-handler"),u=e("jira/ajs/list/group-descriptor"),h=e("jira/ajs/list/item-descriptor"),c=e("jira/issues/baseview"),f=e("jira/issues/tipsy"),p=e("wrm/context-path");return i.View.extend({initialize:function(e){t.bindAll(this,"_onDropdownHidden","_onDropdownShown"),this.offsetTarget=e.offsetTarget,this._onHideCallback=e.onHideCallback,this._pending=null,this._inlineLayer=null},deactivate:function(){this._inlineLayer&&this._inlineLayer.hide(),c.prototype.deactivate.apply(this,arguments)},toggle:function(){this._inlineLayer?this._inlineLayer.hide():(this._pending=n.ajax(this._ajaxDefaults()),this._inlineLayer=this._createInlineLayer(this._pending),this._inlineLayer.bind(a.EVENTS.show,this._onDropdownShown),this._inlineLayer.bind(a.EVENTS.hide,this._onDropdownHidden),this._inlineLayer.show())},_createInlineLayer:function(e){var t=function(e){return this._deferredAddTipsyToFooter(e),this._renderInitialContent(e)}.bind(this),i=new a({offsetTarget:this.offsetTarget,content:function(){return e.pipe(t)},width:218});return this._onHideCallback&&i.bind(a.EVENTS.hide,this._onHideCallback),i},_initSingleSelect:function(e){var i=e.find("select");i.bind("selected",this._onFieldSelected.bind(this)),this.selectControl=new d({element:i,itemAttrDisplayed:"label",suggestionsHandler:l,ajaxOptions:this._ajaxDefaults({data:function(e){return JSON.stringify(this._ajaxOptionsData(e))}.bind(this),query:!0,minQueryLength:0,formatResponse:function(e){this._removeTipsy();var i=new u;t.each(e.fields,function(e){i.addItem(new h({title:e.fieldName,value:e.fieldId,label:e.fieldName,meta:{sortJql:e.sortJql}}))});var n=this._getFooterText(e);return n&&(i.footerText(n),this._deferredAddTipsyToFooter(e)),[i]}.bind(this)})});var n=e.find("#order-by-options-input");n.focus()},_ajaxDefaults:function(e){var i={url:p()+"/rest/orderbycomponent/latest/orderByOptions",type:"POST",contentType:"application/json",data:JSON.stringify(this._ajaxOptionsData())};return t.extend(i,e)},_ajaxOptionsData:function(e){var t=this.model.getJql(),i=this.model.getSortBy();return{query:e,jql:t?t:void 0,sortBy:i?i.fieldId:void 0}},_renderInitialContent:function(e){var i=t.map(e.fields,function(e){return t.extend({},e,{meta:JSON.stringify({sortJql:e.sortJql})})});return n("<div></div>").addClass("order-dropdown").html(s.orderByOptions({options:i,footer:this._getFooterText(e)}))},_onDropdownShown:function(e,t){this._initSingleSelect(t)},_onDropdownHidden:function(){this._removeTipsy(),n("div.order-dropdown").remove(),this._inlineLayer=null},_onFieldSelected:function(e,i){var s=new n.Event(o.ISSUE_TABLE_REORDER);r.trigger(s),s.isDefaultPrevented()||t.defer(function(){this.selectControl.outstandingRequest&&this.selectControl.outstandingRequest.reject(),a.current.hide();var e=i.meta();this.model.doSort(e.sortJql)}.bind(this))},_getFooterText:function(e){if("number"==typeof e.matchesCount&&"number"==typeof e.maxResults){var t=e.matchesCount-e.maxResults;if(t>0)return AJS.format("{0} more fields...",t)}return""},_deferredAddTipsyToFooter:function(e){if(this._inlineLayer){var i=e.matchesCount,n=Math.min(e.matchesCount,e.maxResults),r=AJS.format("Showing {0} of {1} matching fields. Find more fields by typing in the search box.",n,i),o=this;t.defer(function(){o._tipsyTrigger=new f({el:o._inlineLayer.$layer.find(".aui-list-section-footer"),tipsy:{title:function(){return r},className:"tipsy-front"}})})}},_removeTipsy:function(){this._tipsyTrigger&&(this._tipsyTrigger.hide(),this._tipsyTrigger=null)}})});
//# sourceMappingURL=OrderByDropDownView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:orderby', location = 'jira-issue-navigator-components-module/orderby/OrderBy.js' */
define("jira/components/orderby",["require"],function(r){"use strict";var t=r("jira/components/orderby/orderbyview"),e=r("jira/components/orderby/orderbymodel");return{create:function(r){var n,o;return r=r||{},n=new e({sortBy:r.sortBy,jql:r.jql}),o=new t({model:n}),{onSort:function(){return n.onSort.apply(n,arguments),this},offSort:function(r){return n.off("sort",r),this},render:function(){return o.render(),this},setElement:function(r){return o.setElement(r),this},setJql:function(r){return n.setJql(r),this},setSortBy:function(r){return n.setSortBy(r),this}}}}});
//# sourceMappingURL=OrderBy-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:orderby', location = 'jira-issue-navigator-components-module/orderby/eventtypes.js' */
define("jira/components/orderby/eventtypes",[],function(){"use strict";return{ISSUE_TABLE_REORDER:"issueTableReorder"}});
//# sourceMappingURL=eventtypes-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:orderby', location = 'jira-issue-navigator-components-module/orderby/amd-wrapper.js' */
define("jira/components/orderby/templates",function(){"use strict";return JIRA.Templates.OrderBy}),AJS.namespace("JIRA.Templates.OrderBy",null,require("jira/components/orderby/templates"));
//# sourceMappingURL=amd-wrapper-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:orderby', location = 'jira-issue-navigator-components-module/orderby/namespace.js' */
AJS.namespace("JIRA.Components.OrderBy",null,require("jira/components/orderby")),AJS.namespace("JIRA.Issues.OrderByDropDownView",null,require("jira/components/orderby/orderbydropdownview")),AJS.namespace("JIRA.Issues.OrderByView",null,require("jira/components/orderby/orderbyview")),AJS.namespace("JIRA.Issues.OrderByModel",null,require("jira/components/orderby/orderbymodel"));
//# sourceMappingURL=namespace-min.js.map
;
;
/* module-key = 'com.atlassian.plugin.jslibs:backbone.paginator-2.0.2-factory', location = 'factories/backbone.paginator/2.0.2/backbone.paginator-2.0.2-factory.js' */
(function(m){define("atlassian/libs/factories/backbone.paginator-2.0.2",function(){return function(v,i){m.call({_:v,Backbone:i});var l=i.PageableCollection.noConflict();l.VERSION="2.0.2";return l}})})(function(){var m=this.Backbone,v=m.PageableCollection,i=this._,l=function(a,b){if(!i.isNumber(a)||i.isNaN(a)||!i.isFinite(a)||~~a!==a)throw new TypeError("`"+b+"` must be a finite integer");return a},D=function(a,b,d){if((a=a._events[b])&&a.length){var c=a[a.length-1],e=c.callback;c.callback=function(){try{e.apply(this,
arguments),d()}catch(a){throw a;}finally{c.callback=e}}}else d()},n=i.extend,o=i.omit,t=i.clone,p=i.each,H=i.pick,I=i.contains,E=i.isEmpty,F=i.pairs,N=i.invert,z=i.isArray,A=i.isFunction,J=i.isObject,x=i.keys,y=i.isUndefined,u=Math.ceil,K=Math.floor,G=Math.max,B=m.Collection.prototype,L=/[\s'"]/g,O=/[<>\s'"]/g,M=m.PageableCollection=m.Collection.extend({state:{firstPage:1,lastPage:null,currentPage:null,pageSize:25,totalPages:null,totalRecords:null,sortKey:null,order:-1},mode:"server",queryParams:{currentPage:"page",
pageSize:"per_page",totalPages:"total_pages",totalRecords:"total_entries",sortKey:"sort_by",order:"order",directions:{"-1":"asc",1:"desc"}},constructor:function(a,b){B.constructor.apply(this,arguments);var b=b||{},d=this.mode=b.mode||this.mode||w.mode,c=n({},w.queryParams,this.queryParams,b.queryParams||{});c.directions=n({},w.queryParams.directions,this.queryParams.directions,c.directions||{});this.queryParams=c;c=this.state=n({},w.state,this.state,b.state||{});c.currentPage=null==c.currentPage?
c.firstPage:c.currentPage;z(a)||(a=a?[a]:[]);a=a.slice();"server"!=d&&(null==c.totalRecords&&!E(a))&&(c.totalRecords=a.length);this.switchMode(d,n({fetch:!1,resetState:!1,models:a},b));var e=b.comparator;c.sortKey&&!e&&this.setSorting(c.sortKey,c.order,b);if("server"!=d&&(d=this.fullCollection,e&&b.full&&(this.comparator=null,d.comparator=e),b.full&&d.sort(),a&&!E(a)))this.reset(a,n({silent:!0},b)),this.getPage(c.currentPage),a.splice.apply(a,[0,a.length].concat(this.models));this._initState=t(this.state)},
_makeFullCollection:function(a,b){var d=["url","model","sync","comparator"],c=this.constructor.prototype,e,f,h,g={};e=0;for(f=d.length;e<f;e++)h=d[e],y(c[h])||(g[h]=c[h]);g=new (m.Collection.extend(g))(a,b);e=0;for(f=d.length;e<f;e++)h=d[e],this[h]!==c[h]&&(g[h]=this[h]);return g},_makeCollectionEventHandler:function(a,b){return function(d,c,e,f){var h=a._handlers;p(x(h),function(d){var c=h[d];a.off(d,c);b.off(d,c)});var g=t(a.state),r=g.firstPage,j=g.pageSize,k=(0===r?g.currentPage:g.currentPage-
1)*j,q=k+j;if("add"==d){var i,m,l,s,f=f||{};e==b?(m=b.indexOf(c),m>=k&&m<q&&(s=a,i=l=m-k)):(i=a.indexOf(c),s=b,l=!y(f.at)?f.at+k:k+i);f.onRemove||(++g.totalRecords,delete f.onRemove);a.state=a._checkState(g);if(s){s.add(c,n({},f||{},{at:l}));var o=i>=j?c:!y(f.at)&&l<q&&a.length>j?a.at(j):null;o&&D(e,d,function(){a.remove(o,{onAdd:true})})}}if("remove"==d)if(f.onAdd)delete f.onAdd;else{--g.totalRecords?(i=g.totalPages=u(g.totalRecords/j),g.lastPage=0===r?i-1:i||r,g.currentPage>i&&(g.currentPage=g.lastPage)):
(g.totalRecords=null,g.totalPages=null);a.state=a._checkState(g);var C,r=f.index;e==a?((C=b.at(q))?D(a,d,function(){a.push(C,{onRemove:true})}):!a.length&&g.totalRecords&&a.reset(b.models.slice(k-j,q-j),n({},f,{parse:!1})),b.remove(c)):r>=k&&r<q&&((C=b.at(q-1))&&D(a,d,function(){a.push(C,{onRemove:true})}),a.remove(c),!a.length&&g.totalRecords&&a.reset(b.models.slice(k-j,q-j),n({},f,{parse:!1})))}if("reset"==d)if(f=e,e=c,e==a&&null==f.from&&null==f.to)g=b.models.slice(0,k),j=b.models.slice(k+a.models.length),
b.reset(g.concat(a.models).concat(j),f);else if(e==b){if(!(g.totalRecords=b.models.length))g.totalRecords=null,g.totalPages=null;"client"==a.mode&&(g.lastPage=g.currentPage=g.firstPage);a.state=a._checkState(g);a.reset(b.models.slice(k,q),n({},f,{parse:!1}))}"sort"==d&&(f=e,c===b&&a.reset(b.models.slice(k,q),n({},f,{parse:!1})));p(x(h),function(d){var c=h[d];p([a,b],function(a){a.on(d,c);a=a._events[d]||[];a.unshift(a.pop())})})}},_checkState:function(a){var b=this.mode,d=this.links,c=a.totalRecords,
e=a.pageSize,f=a.currentPage,h=a.firstPage,g=a.totalPages;if(null!=c&&null!=e&&null!=f&&null!=h&&("infinite"==b?d:1)){c=l(c,"totalRecords");e=l(e,"pageSize");f=l(f,"currentPage");h=l(h,"firstPage");if(1>e)throw new RangeError("`pageSize` must be >= 1");g=a.totalPages=u(c/e);if(0>h||1<h)throw new RangeError("`firstPage must be 0 or 1`");a.lastPage=0===h?G(0,g-1):g||h;if("infinite"==b){if(!d[f+""])throw new RangeError("No link found for page "+f);}else if(f<h||0<g&&(h?f>g:f>=g))throw new RangeError("`currentPage` must be firstPage <= currentPage "+
(h?">":">=")+" totalPages if "+h+"-based. Got "+f+".");}return a},setPageSize:function(a,b){var a=l(a,"pageSize"),b=b||{first:!1},d=this.state,c=u(d.totalRecords/a),e=c?G(d.firstPage,K(c*d.currentPage/d.totalPages)):d.firstPage,d=this.state=this._checkState(n({},d,{pageSize:a,currentPage:b.first?d.firstPage:e,totalPages:c}));return this.getPage(d.currentPage,o(b,["first"]))},switchMode:function(a,b){if(!I(["server","client","infinite"],a))throw new TypeError('`mode` must be one of "server", "client" or "infinite"');
var b=b||{fetch:!0,resetState:!0},d=this.state=b.resetState?t(this._initState):this._checkState(n({},this.state));this.mode=a;var c=this,e=this.fullCollection,f=this._handlers=this._handlers||{},h;if("server"!=a&&!e){e=this._makeFullCollection(b.models||[],b);e.pageableCollection=this;this.fullCollection=e;var g=this._makeCollectionEventHandler(this,e);p(["add","remove","reset","sort"],function(a){f[a]=h=i.bind(g,{},a);c.on(a,h);e.on(a,h)});e.comparator=this._fullComparator}else"server"==a&&e&&(p(x(f),
function(a){h=f[a];c.off(a,h);e.off(a,h)}),delete this._handlers,this._fullComparator=e.comparator,delete this.fullCollection);if("infinite"==a)for(var r=this.links={},j=d.firstPage,k=u(d.totalRecords/d.pageSize),j=0===j?G(0,k-1):k||j,d=d.firstPage;d<=j;d++)r[d]=this.url;else this.links&&delete this.links;return b.fetch?this.fetch(o(b,"fetch","resetState")):this},hasPreviousPage:function(){var a=this.state,b=a.currentPage;return"infinite"!=this.mode?b>a.firstPage:!!this.links[b-1]},hasNextPage:function(){var a=
this.state,b=this.state.currentPage;return"infinite"!=this.mode?b<a.lastPage:!!this.links[b+1]},getFirstPage:function(a){return this.getPage("first",a)},getPreviousPage:function(a){return this.getPage("prev",a)},getNextPage:function(a){return this.getPage("next",a)},getLastPage:function(a){return this.getPage("last",a)},getPage:function(a,b){var d=this.mode,c=this.fullCollection,b=b||{fetch:!1},e=this.state,f=e.firstPage,h=e.currentPage,g=e.lastPage,i=e.pageSize,j=a;switch(a){case "first":j=f;break;
case "prev":j=h-1;break;case "next":j=h+1;break;case "last":j=g;break;default:j=l(a,"index")}this.state=this._checkState(n({},e,{currentPage:j}));b.from=h;b.to=j;e=(0===f?j:j-1)*i;c=c&&c.length?c.models.slice(e,e+i):[];if(("client"==d||"infinite"==d&&!E(c))&&!b.fetch)return this.reset(c,o(b,"fetch")),this;"infinite"==d&&(b.url=this.links[j]);return this.fetch(o(b,"fetch"))},getPageByOffset:function(a,b){if(0>a)throw new RangeError("`offset must be > 0`");var a=l(a),d=K(a/this.state.pageSize);0!==
this.state.firstPage&&d++;d>this.state.lastPage&&(d=this.state.lastPage);return this.getPage(d,b)},sync:function(a,b,d){var c=this;if("infinite"==c.mode){var e=d.success,f=c.state.currentPage;d.success=function(a,b,i){var j=c.links,k=c.parseLinks(a,n({xhr:i},d));k.first&&(j[c.state.firstPage]=k.first);k.prev&&(j[f-1]=k.prev);k.next&&(j[f+1]=k.next);e&&e(a,b,i)}}return(B.sync||m.sync).call(c,a,b,d)},parseLinks:function(a,b){var d={},c=b.xhr.getResponseHeader("Link");if(c){var e=["first","prev","next"];
p(c.split(","),function(a){var a=a.split(";"),b=a[0].replace(O,""),a=a.slice(1);p(a,function(a){var c=a.split("="),a=c[0].replace(L,""),c=c[1].replace(L,"");"rel"==a&&I(e,c)&&(d[c]=b)})})}return d},parse:function(a,b){var d=this.parseState(a,t(this.queryParams),t(this.state),b);d&&(this.state=this._checkState(n({},this.state,d)));return this.parseRecords(a,b)},parseState:function(a,b,d){if(a&&2===a.length&&J(a[0])&&z(a[1])){var c=t(d),e=a[0];p(F(o(b,"directions")),function(a){var b=a[0],a=a[1],d=
e[a];!y(d)&&!i.isNull(d)&&(c[b]=e[a])});e.order&&(c.order=1*N(b.directions)[e.order]);return c}},parseRecords:function(a){return a&&2===a.length&&J(a[0])&&z(a[1])?a[1]:a},fetch:function(a){var a=a||{},b=this._checkState(this.state),d=this.mode;"infinite"==d&&!a.url&&(a.url=this.links[b.currentPage]);var c=a.data||{},e=a.url||this.url||"";A(e)&&(e=e.call(this));var f=e.indexOf("?");if(-1!=f){for(var h=e.slice(f+1),g,i,j={},k=decodeURIComponent,m=h.split("&"),l=0,p=m.length;l<p;l++)g=m[l].split("="),
h=g[0],g=g[1]||!0,h=k(h),g=k(g),i=j[h],z(i)?i.push(g):j[h]=i?[i,g]:g;n(c,j);e=e.slice(0,f)}a.url=e;a.data=c;h="client"==this.mode?H(this.queryParams,"sortKey","order"):o(H(this.queryParams,x(w.queryParams)),"directions");l=F(h);e=t(this);for(f=0;f<l.length;f++)j=l[f],m=j[0],k=j[1],k=A(k)?k.call(e):k,null!=b[m]&&null!=k&&(c[k]=b[m]);b.sortKey&&b.order?(f=A(h.order)?h.order.call(e):h.order,c[f]=this.queryParams.directions[b.order+""]):b.sortKey||delete c[h.order];b=F(o(this.queryParams,x(w.queryParams)));
for(f=0;f<b.length;f++)j=b[f],k=j[1],k=A(k)?k.call(e):k,null!=k&&(c[j[0]]=k);if("server"!=d){var u=this,s=this.fullCollection,v=a.success;a.success=function(b,c,e){e=e||{};y(a.silent)?delete e.silent:e.silent=a.silent;var f=b.models;if(d=="client")s.reset(f,e);else{s.add(f,n({at:s.length},n(e,{parse:false})));u.trigger("reset",u,e)}v&&v(b,c,e)};return B.fetch.call(this,n({},a,{silent:!0}))}return B.fetch.call(this,a)},_makeComparator:function(a,b,d){var c=this.state,a=a||c.sortKey,b=b||c.order;if(a&&
b)return d||(d=function(a,b){return a.get(b)}),function(c,f){var h=d(c,a),g=d(f,a),i;1===b&&(i=h,h=g,g=i);return h===g?0:h<g?-1:1}},setSorting:function(a,b,d){var c=this.state;c.sortKey=a;c.order=b=b||c.order;var c=this.fullCollection,e=!1,f=!1;a||(e=f=!0);var h=this.mode,d=n({side:"client"==h?h:"server",full:!0},d),a=this._makeComparator(a,b,d.sortValue),b=d.full,d=d.side;"client"==d?b?(c&&(c.comparator=a),e=!0):(this.comparator=a,f=!0):"server"==d&&!b&&(this.comparator=a);e&&(this.comparator=null);
f&&c&&(c.comparator=null);return this}}),w=M.prototype;m.PageableCollection.noConflict=function(){m.PageableCollection=v;return M}});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:backbone.paginator', location = 'jira-issue-navigator-components-module/libs/backbone.paginator.js' */
define("jira/components/libs/backbone.paginator",["require"],function(n){"use strict";var a=n("atlassian/libs/factories/backbone.paginator-2.0.2"),e=n("jira/components/libs/backbone"),i=n("jira/components/libs/underscore");return a(i,e)});
//# sourceMappingURL=backbone.paginator-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-plugin:issue-nav-render-state', location = 'content/js/util/IssueNavRenderState.js' */
define("jira/issues/utils/issue-nav-render-state",["require"],function(e){"use strict";var t=e("jquery"),s=e("wrm/context-path"),a=e("jira/featureflags/feature-manager"),n="gin-new-render-approach",i="gin-new-render-approach-log-routes",r=1,o=2,u=4,c=8;return{_state:void 0,init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location,r=a.getFlagValue(n),h=!!e.pathname.match(/^\/projects\/.*\/issues.*/),l="server"===r&&!h;this._state=l?o:0,"client"!==r&&"server"!==r||(this._state|=u),h&&(this._state|=c),a.isFeatureEnabled(i)&&!e.pathname.match(/^\/projects\/.*\/issues.*|^\/browse\/.*|\/issues($|\?|\/).*/)&&t.ajax({type:"POST",url:s()+"/rest/internal/2/log/unsafe/frontend-exception",data:JSON.stringify({sentFrom:"jira.legacy.GlobalIssueNavigator",message:"IssueNavRenderState unexpected use from route "+e.pathname,event:{},buildKey:"N/A",logTime:(new Date).toISOString()}),contentType:"application/json"})},get state(){if("undefined"==typeof this._state&&this.init(),~this._state&r){this._state|=r;var e=document.querySelector("#global-issue-navigator-container .navigator-content");this.computeNext({hasInitiallyLoadedWithData:null!=e&&e.childElementCount>0})}return this._state},computeNext:function(e){(e.hasInitiallyLoadedWithData===!1||e.hasStartedRenderingEmptyView||e.hasStartedTransitioningBetweenViews)&&this._state&o&&(this._state^=o)},shouldUseServerRenderedIssueTableJson:function(){return!!(this.state&u)},shouldUseServerRenderedIssueListHtml:function(){return!!(this.state&o)&&!this.isRouteLegacyPIN()},isRouteLegacyPIN:function(){return!!(this.state&c)}}});
//# sourceMappingURL=IssueNavRenderState-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:search', location = 'jira-issue-navigator-components-module/search/Search.js' */
define("jira/components/search",["require"],function(e){"use strict";var s=e("wrm/context-path"),t=e("jira/components/libs/backbone"),r=e("jira/components/libs/underscore"),a=e("jquery"),n=e("jira/components/search/results");return t.Collection.extend({url:function(){return s()+"/rest/issueNav/1/issueTable"},searchParams:{jql:"",filterId:null,columnConfig:"explicit",columns:[],layoutKey:"split-view",startIndex:0},sync:function(){var e=r.toArray(arguments),s=e[2];return s.type="POST",s.headers={"X-Atlassian-Token":"no-check"},s.data={},r.each(r.keys(this.searchParams),function(e){null!==this.searchParams[e]&&(s.data[e]=this.searchParams[e])},this),t.Collection.prototype.sync.apply(this,e)},parse:function(e){var s=e&&e.issueTable;return s&&s.issueIds?r.map(s.issueIds,function(e,t){return{id:e,key:s.issueKeys[t]}}):[]},update:function(e){this.set(this.parse(e))},setPreloadedData:function(e){return this.preloadedData=e,this.reset(e.response,{parse:!0}),this.parseResults(e.jql,e.response)},parseResults:function(e,s){return new n([],{issues:this.toJSON(),pageSize:s.issueTable.pageSize,totalRecordsInDB:s.issueTable.total,totalRecordsInSearch:this.length,jql:e})},search:function(e){this.searchParams.jql=e;var s=new a.Deferred;return this.preloadedData&&this.preloadedData.jql===e?(this.reset(this.preloadedData.response,{parse:!0}),s.resolve(this.parseResults(e,this.preloadedData.response)),delete this.preloadedData):this.fetch({reset:!0,success:function(e,t){s.resolve(this.parseResults(e.searchParams.jql,t))}.bind(this),error:function(e,t){s.reject(t)}}),s.promise()}})});
//# sourceMappingURL=Search-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:search', location = 'jira-issue-navigator-components-module/search/SearchResult.js' */
define("jira/components/search/result",["require"],function(e){"use strict";var s=e("wrm/context-path"),i=e("jira/components/libs/backbone");return i.Model.extend({initialize:function(){this.url=function(){return s()+"/rest/api/2/issue/"+this.id+"?fields=summary,status,issuetype"}},parse:function(e){var s={};return e.inaccessible?(s.id=parseInt(e.id,10),s.key=e.key,s.inaccessible=!0):(s.id=parseInt(e.id,10),s.key=e.key,e.fields?(s.summary=e.fields.summary,s.status=e.fields.status.name,s.type={description:e.fields.issuetype.description,iconUrl:e.fields.issuetype.iconUrl,name:e.fields.issuetype.name}):(s.status=e.status,s.summary=e.summary,s.type=e.type)),s}})});
//# sourceMappingURL=SearchResult-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:search', location = 'jira-issue-navigator-components-module/search/SearchResults.js' */
define("jira/components/search/results",["require"],function(e){"use strict";var t=e("wrm/context-path"),s=e("jira/components/libs/backbone.paginator"),i=e("jira/components/libs/underscore"),a=e("jquery"),n=e("jira/components/search/result"),r=e("jira/legacy/deprecator"),l=e("jira/featureflags/feature-manager"),o=e("jira/issues/utils/issue-nav-render-state"),u=l.isFeatureEnabled("empanada.gin.enable-frontend-operational-events-for-sli"),h=l.isFeatureEnabled("gin-analytics-to-support-tti-definition"),c=s.extend({initialize:function(e,t){t=t||{},this.allIssues=t.issues,this.state.pageSize=t.pageSize,this.state.totalRecords=t.totalRecordsInSearch,this.totalRecordsInDB=t.totalRecordsInDB,this.allowNoSelection=t.allowNoSelection,this.jql=t.jql,this.hasLoadedTotalCountFromServer=void 0===t.hasLoadedTotalCountFromServer||t.hasLoadedTotalCountFromServer},model:n,url:function(){return t()+"/rest/issueNav/1/issueTable/stable"},state:{firstPage:0,currentPage:0},queryParams:{currentPage:null,pageSize:null,totalPages:null,totalRecords:null,sortKey:null,directions:null},sync:function(){var e=i.toArray(arguments),t=e[2];return t.type="POST",t.headers={"X-Atlassian-Token":"no-check"},t.data.layoutKey="split-view",t.data.id=this._getStableKeys(),s.prototype.sync.apply(this,e)},isAtTheEndOfStableSearch:function(){var e=this.state.currentPage===this.state.lastPage,t=this.totalRecordsInDB>this.state.totalRecords;return e&&t},setPreloadedData:function(e){this.preloadedData=e,this.reset(e.response,{parse:!0})},_getStableKeys:function(e){var t="undefined"==typeof e?this._getStartIndex():e;return i.pluck(this.allIssues,"id").slice(t,t+this.state.pageSize)},_getStartIndex:function(){return this.state.pageSize*this.state.currentPage},_loadPageAndSelect:function(e,t,s){var i=new a.Deferred,n={fetch:!0,reset:!0};return this.trigger("before:loadpage",{pageToLoad:e}),this.getPage(e,n).done(function(){u&&JIRA&&JIRA.Issues&&JIRA.Issues.Application&&JIRA.Issues.Application.fireSuccessSlaEvent&&JIRA.Issues.Application.fireSuccessSlaEvent("retrieveIssueTableForGivenStableIds"),h?this.select(t,s||{systemSelect:!0}):this.select(t),i.resolve(this.length)}.bind(this)).fail(function(e){u&&JIRA&&JIRA.Issues&&JIRA.Issues.Application&&JIRA.Issues.Application.fireFailSlaEvent&&e.status>=500&&JIRA.Issues.Application.fireFailSlaEvent("retrieveIssueTableForGivenStableIds",{reason:"retrieve-issue-table-for-given-stable-ids-failed-with-status-code",statusCode:resp.status}),i.reject(e),this.trigger("error:loadpage",e)}.bind(this)),i.promise()},fetch:function(e){var t,n=o.shouldUseServerRenderedIssueTableJson(),r=this.preloadedData;return n&&r&&i.isEqual(r.ids.sort(),this._getStableKeys(this.state.pageSize*e.to).sort())||r&&i.isEqual(r.ids,this._getStableKeys(this.state.pageSize*e.to))?(this.reset(this.preloadedData.response,{parse:!0}),t=(new a.Deferred).resolve().promise(),delete this.preloadedData):t=s.prototype.fetch.call(this,e),t},jumpToPage:function(e){var t=new a.Deferred;return this._loadPageAndSelect(e,"first").done(t.resolve).fail(t.reject),t.promise()},jumpToPageForIssue:function(e){for(var t,s,i=new a.Deferred,r="number"==typeof e,l="string"==typeof e,o=0,u=this.allIssues.length;o<u&&!s;o++)(r&&this.allIssues[o].id===e||l&&this.allIssues[o].key===e)&&(s=this.allIssues[o],t=Math.floor(o/this.state.pageSize));return"number"==typeof t&&isFinite(t)?this._loadPageAndSelect(t,s.id).done(i.resolve):this.allowNoSelection?this._loadPageAndSelect("first",null).done(function(){this.trigger("selectIssueNotInList",new n({id:r?e:void 0,key:l?e:void 0}))}.bind(this)).done(i.resolve):this._loadPageAndSelect("first","first").done(i.resolve),i.promise()},parse:function(e,t){var a=t.data,n=e&&e.issueTable,r=this.allIssues;return i.each(n.table,function(e,t){if(null===e){var s=a.id[t],l=i.findWhere(r,{id:s});l&&(n.table[t]={id:l.id,key:l.key,inaccessible:!0})}}),s.prototype.parse.call(this,n)},parseState:function(){return{}},parseRecords:function(e){return e.table?e.table:[]},select:function(e,t){if("string"==typeof e)switch(e){case"first":e=this.at(0);break;case"last":e=this.at(this.length-1);break;default:e=this.findWhere({key:e})}else"number"==typeof e&&(e=this.get(e));this.selected!==e&&this.unselect(),e&&(this.selected=e,h?this.selected.trigger("select",this.selected,t):this.selected.trigger("select",this.selected))},unselect:function(){this.selected&&this.selected.trigger("unselect",this.selected),this.selected=null},navigate:function(e,t){var s,i=this.indexOf(this.selected),a=i+e,n=this.at(a);return h?(e>0?s="nextIssue":e<0&&(s="previousIssue"),t=t||{},Object.assign(t,{direction:s}),n?this.select(n,t):e>0&&this.hasNextPage()?this._loadPageAndSelect("next","first",t):e<0&&this.hasPreviousPage()&&this._loadPageAndSelect("prev","last",t)):n?this.select(n):e>0&&this.hasNextPage()?this._loadPageAndSelect("next","first"):e<0&&this.hasPreviousPage()&&this._loadPageAndSelect("prev","last"),{current:a,total:this.length}},selectNext:function(e){return h?this.navigate(1,e):this.navigate(1)},selectPrev:function(e){return h?this.navigate(-1,e):this.navigate(-1)},_getIssueByNavigation:function(e){var t=this.indexOf(this.selected),s=t+e,i=this.at(s),n=new a.Deferred;return i?(this.select(i),n.resolve(i)):e>0&&this.hasNextPage()?this._loadPageAndSelect("next","first").done(function(){n.resolve(this.selected)}.bind(this)):e<0&&this.hasPreviousPage()?this._loadPageAndSelect("prev","last").done(function(){n.resolve(this.selected)}.bind(this)):n.reject(),n.promise()},getNextIssue:function(){return this._getIssueByNavigation(1)},getPreviousIssue:function(){return this._getIssueByNavigation(-1)},updateSelectedIssue:function(){this.selected&&this.selected.fetch()},updateIssue:function(e){var t=this.get(e);t&&t.fetch()},hasIssueInSearch:function(e){return!!i.where(this.allIssues,{key:e}).length},isEmptySearch:function(){return!this.allIssues.length},removeAndUpdateSelectionIfNeeded:function(e){var t,s=e.get("key"),n=i.chain(this.allIssues).map(function(e){return e.key}).value(),r=i.indexOf(n,s),l=r+1<n.length,o=r-1>=0;t=l?n[r+1]:o?n[r-1]:null;for(var u=0;u<this.allIssues.length;u++){var h=this.allIssues[u];if(h.key===s){this.allIssues.splice(u,1);break}}return this.state.totalRecords=this.state.totalRecords-1,this.totalRecordsInDB=this.totalRecordsInDB-1,this.unselect(),this.remove(e),t?this.jumpToPageForIssue(t).done(function(){this.trigger("issueDeleted")}.bind(this)):(new a.Deferred).resolve(0).promise().done(function(){this.trigger("issueDeleted")}.bind(this))},getIssueKeyForIndex:function(e){var t=this.allIssues[e];if(t)return t.key},getIssueAtGlobalIndex:function(e){return this.allIssues[e]},getPositionOfIssueInSearchResults:function(e){var t=i.indexOf(i.pluck(this.allIssues,"id"),e);return t>-1?t:null},getPositionOfIssueInPage:function(e){var t=this.get(e),s=this.indexOf(t);return s>-1?s:null},getTotalIssues:function(){return this.getTotalIssuesInSearch()},getTotalIssuesInSearch:function(){return this.allIssues.length},getTotalIssuesInDb:function(){return this.totalRecordsInDB},hasLoadedTotalCount:function(){return this.hasLoadedTotalCountFromServer}});return r.prop(c.prototype,"getTotalIssues",{removeInVersion:"8.0",alternativeName:"jira/components/search/results#getTotalIssuesInSearch()",sinceVersion:"7.1",displayName:"Method jira/components/search/results#getTotalIssues()"}),c});
//# sourceMappingURL=SearchResults-min.js.map
;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:brace', location = '/inline-issue-create/lib/backbone.brace/backbone.brace-amd.js' */
define("jira/inline-issue-create/lib/backbone",["atlassian/libs/factories/backbone-1.0.0","atlassian/libs/underscore-1.5.2","jquery"],function(e,i,a){return e(i,a)}),define("jira/inline-issue-create/lib/brace",["jira/inline-issue-create/lib/backbone","atlassian/libs/underscore-1.5.2","atlassian/libs/factories/brace-2014.09.03"],function(e,i,a){"use strict";return a(i,Backbone)});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:marionette', location = '/inline-issue-create/lib/backbone.marionette/backbone.marionette-amd.js' */
define("jira/inline-issue-create/lib/marionette",["jquery","jira/inline-issue-create/lib/backbone","atlassian/libs/underscore-1.5.2","atlassian/libs/factories/marionette-2.1.0"],function(e,t,i,n){"use strict";var r=n(i,t),a={unwrapTemplate:function(){var t=this.$el.children();t.length>1&&AJS.warn("[IIC] Unwrapping template with more than one child - some content will be lost");var i=e(t.get(0));this.$el.parent().length?(this.$el.replaceWith(i),this.setElement(i)):this.setElement(i)}};return i.extend(r.ItemView.prototype,a),i.extend(r.CompositeView.prototype,a),i.extend(r.CollectionView.prototype,a),i.extend(r.LayoutView.prototype,a),r});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:placeholder', location = '/inline-issue-create/lib/jquery-placeholder.js' */
/*! MIT License - https://github.com/mathiasbynens/jquery-placeholder/blob/master/LICENSE-MIT.txt */
/*! http://mths.be/placeholder v2.0.8 by @mathias */
!function(e,a,t){function l(e){var a={},l=/^jQuery\d+$/;return t.each(e.attributes,function(e,t){t.specified&&!l.test(t.name)&&(a[t.name]=t.value)}),a}function r(e,a){var l=this,r=t(l);if(l.value==r.attr("placeholder")&&r.hasClass("placeholder"))if(r.data("placeholder-password")){if(r=r.hide().next().show().attr("id",r.removeAttr("id").data("placeholder-id")),e===!0)return r[0].value=a;r.focus()}else l.value="",r.removeClass("placeholder"),l==d()&&l.select()}function o(){var e,a=this,o=t(a),d=this.id;if(""==a.value){if("password"==a.type){if(!o.data("placeholder-textinput")){try{e=o.clone().attr({type:"text"})}catch(a){e=t("<input>").attr(t.extend(l(this),{type:"text"}))}e.removeAttr("name").data({"placeholder-password":o,"placeholder-id":d}).bind("focus.placeholder",r),o.data({"placeholder-textinput":e,"placeholder-id":d}).before(e)}o=o.removeAttr("id").hide().prev().attr("id",d).show()}o.addClass("placeholder"),o[0].value=o.attr("placeholder")}else o.removeClass("placeholder")}function d(){try{return a.activeElement}catch(e){}}var c,n,i="[object OperaMini]"==Object.prototype.toString.call(e.operamini),p="placeholder"in a.createElement("input")&&!i,u="placeholder"in a.createElement("textarea")&&!i,h=t.fn,s=t.valHooks,v=t.propHooks;p&&u?(n=h.placeholder=function(){return this},n.input=n.textarea=!0):(n=h.placeholder=function(){var e=this;return e.filter((p?"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":r,"blur.placeholder":o}).data("placeholder-enabled",!0).trigger("blur.placeholder"),e},n.input=p,n.textarea=u,c={get:function(e){var a=t(e),l=a.data("placeholder-password");return l?l[0].value:a.data("placeholder-enabled")&&a.hasClass("placeholder")?"":e.value},set:function(e,a){var l=t(e),c=l.data("placeholder-password");return c?c[0].value=a:l.data("placeholder-enabled")?(""==a?(e.value=a,e!=d()&&o.call(e)):l.hasClass("placeholder")?r.call(e,!0,a)||(e.value=a):e.value=a,l):e.value=a}},p||(s.input=c,v.value=c),u||(s.textarea=c,v.value=c),t(function(){t(a).delegate("form","submit.placeholder",function(){var e=t(".placeholder",this).each(r);setTimeout(function(){e.each(o)},10)})}),t(e).bind("beforeunload.placeholder",function(){t(".placeholder").each(function(){this.value=""})}))}(this,document,jQuery);;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:util', location = '/inline-issue-create/util/util.js' */
define("jira/inline-issue-create/util",["jquery"],function(o){"use strict";var n,t=(document.body||document.documentElement).style,i=["oAnimationEnd","MSAnimationEnd","mozAnimationEnd","webkitAnimationEnd","animationend"];return{cssAnimationsSupport:void 0!==t.transition||void 0!==t.WebkitTransition||void 0!==t.MozTransition||void 0!==t.MsTransition||void 0!==t.OTransition,addClassAndRemoveOnAnimationEnd:function(n,t,e){function s(){for(r=0;r<i.length;r++)n.off(i[r],s);n.removeClass(t)}var r;if(n=o(n),this.cssAnimationsSupport)for(r=0;r<i.length;r++)n.on(i[r],s);else setTimeout(function(){n.removeClass(t)},e||1e3);n.addClass(t)},scrollElementToView:function(o,n){var t=o[0].getBoundingClientRect(),i=n[0].getBoundingClientRect(),e=o.scrollTop(),s=0;i.top<t.top?s=i.top-t.top:t.bottom<i.bottom&&(s=i.bottom-t.bottom),0!==s&&o.scrollTop(e+s)},keyCode:{ENTER:13,ESC:27},after:function(o,n,t){if(!_.isFunction(t))throw"Body is not a function";o[n]=_.wrap(o[n],function(n){var i=Array.prototype.slice.call(arguments,1),e=n.apply(o,i);return t.apply(this,_.union([e],i)),e})},error:function(o){if(console&&console.error){var n=Array.prototype.slice.call(arguments,1);_.isString(n[0])&&(n[0]="[IIC]"+n[0]),console.error.apply(console,n)}},debug:function(o){if(this.shouldDisplay(o)&&console&&console.debug){var n=Array.prototype.slice.call(arguments,1);_.isString(n[0])&&(n[0]="[IIC]"+n[0]),console.debug.apply(console,n)}},trace:function(o){if(this.shouldDisplay(o)&&console&&console.debug){var n=Array.prototype.slice.call(arguments,1);_.isString(n[0])&&(n[0]="[IIC]"+n[0]),console.debug.apply(console,n)}},shouldDisplay:function(o){return"all"===n||o===n},showLogsFor:function(o){n=o}}});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-preffilable-create-issue-dialog', location = '/inline-issue-create/components/prefillable-create-issue-dialog/custom-form-container-factory.js' */
define("jira/inline-issue-create/prefillable-create-issue-dialog/custom-form-container-factory",["jquery","underscore"],function(e,i){"use strict";var r=function(){var r=JIRA.Forms.Container;return r.extend({lazyInit:function(){var r=this.options.call(this);return this.prefilledValues=r.prefilledValues,this.prefilledValues.fieldsToRetain=i.keys(r.prefilledValues),this.prefilledValues=e.param(r.prefilledValues),this.options=function(){return r},this._super()},render:function(){var r=this,n=e.Deferred();return this.lazyInit(),i.isFunction(r.model.markFieldAsDirty)&&Object.keys(this.options().prefilledValues).forEach(function(e){r.model.markFieldAsDirty(e)}),r.model.getUseConfigurableForm().done(function(e){e===!0?r.configurableForm.render(r.prefilledValues).done(function(e,i){n.resolveWith(r,[r.$element]),r.$element.append(i)}):r.unconfigurableForm.render(r.prefilledValues).done(function(e,i){n.resolveWith(r,[r.$element,i]),r.$element.append(i)})}).fail(function(){n.resolveWith(r,[r.$element])}),n.promise()}})};return{build:r}});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-preffilable-create-issue-dialog', location = '/inline-issue-create/components/prefillable-create-issue-dialog/prefillable-create-issue-dialog-init-form.js' */
define("jira/inline-issue-create/prefillable-create-issue-dialog/init-form",["underscore","jira/inline-issue-create/prefillable-create-issue-dialog/custom-form-container-factory"],function(e,r){"use strict";return function(s,o){if(!e.isObject(o))throw new Error("You must provide promise that will resolve with fieldValues to create this form. Use standard create issue form if you have none.");var i,a=JIRA.Forms.CreateIssueModel,l=JIRA.Forms.ConfigurableCreateIssueForm,t=JIRA.Forms.UnconfigurableCreateIssueForm,n=JIRA.Forms.CreateIssueError,u=JIRA.applyErrorsToForm,d=JIRA.applyErrorMessageToForm;o.done(function(e){i=e,i.prefilledFields=i.prefilledFields||{},i.errors=i.errors||{},i.errorMessages=i.errorMessages||{}}).fail(function(){i={prefilledFields:{},errors:{},errorMessages:{}}});var c=r.build(),f=new c(function(){var e={title:"Create issue",id:"prefillable-create-issue-dialog",globalEventNamespaces:["PrefillableCreateIssueDialog"],issueType:void 0},r=new a({projectId:void 0,issueType:void 0}),s=new l({model:r,title:e.title,globalEventNamespaces:e.globalEventNamespaces}),o=new t({model:r,title:e.title,globalEventNamespaces:e.globalEventNamespaces});return{globalEventNamespaces:e.globalEventNamespaces,model:r,errorHandler:new n,configurableForm:s,unconfigurableForm:o,prefilledValues:i.prefilledFields}}),g=f.asDialog({windowTitle:"Create issue",id:"prefillable-create-issue-dialog"});g.options.delayShowUntil=function(){return o},f.asDialog=function(){return f.dialog},g.onContentReady(function(){e.keys(i.errors).length&&(i.errorMessages.unshift("Please fix the fields marked below."),u(f.$element,i.errors)),i.errorMessages.length&&d(f.$element,i.errorMessages.join("<br/>"))}),s.resolve(f)}});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-preffilable-create-issue-dialog', location = '/inline-issue-create/components/prefillable-create-issue-dialog/prefillable-create-issue-dialog.js' */
define("jira/inline-issue-create/prefillable-create-issue-dialog",["wrm/require","jquery","underscore","jira/inline-issue-create/lib/marionette","jira/loading/loading","jira/flag","jira/inline-issue-create/prefillable-create-issue-dialog/init-form"],function(e,r,i,s,n,o,l){"use strict";var a=AJS.dim,t=AJS.undim,u=function(){a(),n.showLoadingIndicator()},d=function(){t(),n.hideLoadingIndicator()},c=function(i,s){var n=new r.Deferred;return s&&u(),e(["wr!com.atlassian.jira.jira-quick-edit-plugin:quick-create-issue"],l.bind(void 0,n,i)).fail(function(){s&&d(),o.showErrorMsg(null,"The Jira server could not be contacted. This may be a temporary glitch or the server may be down.")}),n.promise()};return{createPrefillableCreateIssueForm:c}}),define("jira/inline-issue-create/prefillable-create-issue-dialog/custom-form-container-factory",["jquery","underscore"],function(e,r){"use strict";var i=JIRA.Forms.Container,s=function(){return i.extend({lazyInit:function(){var i=this.options.call(this);return this.prefilledValues=i.prefilledValues,this.prefilledValues.fieldsToRetain=r.keys(i.prefilledValues),this.prefilledValues=e.param(i.prefilledValues),this.options=function(){return i},this._super()},render:function(){var i=this,s=e.Deferred();return this.lazyInit(),r.isFunction(i.model.markFieldAsDirty)&&Object.keys(this.options().prefilledValues).forEach(function(e){i.model.markFieldAsDirty(e)}),i.model.getUseConfigurableForm().done(function(e){e===!0?i.configurableForm.render(i.prefilledValues).done(function(e,r){s.resolveWith(i,[i.$element]),i.$element.append(r)}):i.unconfigurableForm.render(i.prefilledValues).done(function(e,r){s.resolveWith(i,[i.$element,r]),i.$element.append(r)})}).fail(function(){s.resolveWith(i,[i.$element])}),s.promise()}})};return{build:s}}),define("jira/inline-issue-create/prefillable-create-issue-dialog/ondone",["underscore","jira/inline-issue-create/prefillable-create-issue-dialog/custom-form-container-factory"],function(e,r){"use strict";var i=JIRA.Forms.CreateIssueModel,s=JIRA.Forms.ConfigurableCreateIssueForm,n=JIRA.Forms.UnconfigurableCreateIssueForm,o=JIRA.Forms.CreateIssueError,l=JIRA.applyErrorsToForm,a=JIRA.applyErrorMessageToForm;return function(t,u){if(!e.isObject(u))throw new Error("You must provide promise that will resolve with fieldValues to create this form. Use standard create issue form if you have none.");var d;u.done(function(e){d=e,d.prefilledFields=d.prefilledFields||{},d.errors=d.errors||{},d.errorMessages=d.errorMessages||{}}).fail(function(){d={prefilledFields:{},errors:{},errorMessages:{}}});var c=r.build(),f=new c(function(){var e={title:"Create issue",id:"prefillable-create-issue-dialog",globalEventNamespaces:["PrefillableCreateIssueDialog"],issueType:void 0},r=new i({projectId:void 0,issueType:void 0}),l=new s({model:r,title:e.title,globalEventNamespaces:e.globalEventNamespaces}),a=new n({model:r,title:e.title,globalEventNamespaces:e.globalEventNamespaces});return{globalEventNamespaces:e.globalEventNamespaces,model:r,errorHandler:new o,configurableForm:l,unconfigurableForm:a,prefilledValues:d.prefilledFields}}),m=f.asDialog({windowTitle:"Create issue",id:"prefillable-create-issue-dialog"});m.options.delayShowUntil=function(){return u},f.asDialog=function(){return f.dialog},m.onContentReady(function(){e.keys(d.errors).length&&(d.errorMessages.unshift("Please fix the fields marked below."),l(f.$element,d.errors)),d.errorMessages.length&&a(f.$element,d.errorMessages.join("<br/>"))}),t.resolve(f)}});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = 'inline-issue-create/components/inline-issue-create-widget/inline-issue-create-widget.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.InlineIssueCreate&&(JIRA.Templates.InlineIssueCreate={}),JIRA.Templates.InlineIssueCreate.trigger=function(A,i){return A=A||{},'<div class="iic'+(A.cssClass?" "+soy.$$escapeHtml(A.cssClass):"")+(A.isAgility?" agility-backlog-iic":"")+'"><div class="iic-trigger"><button type="button">'+soy.$$escapeHtml("Create issue")+"</button></div></div>"},JIRA.Templates.InlineIssueCreate.widget=function(A,i){return A=A||{},'<div class="iic-widget'+(A.cssClass?" "+soy.$$escapeHtml(A.cssClass):"")+'"><form action="#" method="POST" class="iic-widget__form aui"><div class="iic-widget__issue-type-selector-container"></div><div class='+(A.isAgility?'"iic-widget__summary-container"':"")+'><textarea name="summary" rows="1" cols="50" maxlength="255" class="iic-widget__summary" placeholder="'+soy.$$escapeHtml("What needs to be done?")+'">'+(A.summary?soy.$$escapeHtml(A.summary):"")+"</textarea>"+(A.isAgility?'<div class="iic-widget__create-container"><button type="button" class="aui-button aui-button-primary iic-widget__create" type="button">'+soy.$$escapeHtml("Create")+'</button></div><div class="iic-widget__description-container iic-widget__more iic-widget__cancel" style="display:none;"></div>':'<div class="iic-widget__footer"><div class="iic-widget__description-container"></div><button type="button" class="aui-button aui-button-subtle iic-widget__more" title="'+soy.$$escapeHtml("Open create dialog")+'"><span class="aui-icon aui-icon-small aui-iconfont-more">'+soy.$$escapeHtml("More")+'</span></button><button type="button" class="aui-button aui-button-link iic-widget__cancel">'+soy.$$escapeHtml("Cancel")+'</button><div class="iic-widget__create" style="display:none;"></div></div>')+"</div></form></div>"},JIRA.Templates.InlineIssueCreate.issueTypeSelector=function(A,i){return'<div class="iic-widget__issue-type-selector">'+(A.isAgility?'<div class="iic-widget__issue-type-container">'+(A.isLocked?'<img src="data:image/gif;base64,R0lGODlhEAAQAMQAAP///+7u7t3d3bu7u6qqqpmZmYiIiHd3d2ZmZlVVVURERDMzMyIiIhEREQARAAAAAP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQFBwAQACwAAAAAEAAQAAAFdyAkQgGJJOWoQgIjBM8jkKsoPEzgyMGsCjPDw7ADpkQBxRDmSCRetpRA6Rj4kFBkgLC4IlUGhbNQIwXOYYWCXDufzYPDMaoKGBoKb886OjAKdgZAAgQkfCwzAgsDBAUCgl8jAQkHEAVkAoA1AgczlyIDczUDA2UhACH5BAUHABAALAAAAAAPABAAAAVjICSO0IGIATkqIiMKDaGKC8Q49jPMYsE0hQdrlABCGgvT45FKiRKQhWA0mPKGPAgBcTjsspBCAoH4gl+FmXNEUEBVAYHToJAVZK/XWoQQDAgBZioHaX8igigFKYYQVlkCjiMhACH5BAUHABAALAAAAAAQAA8AAAVgICSOUGGQqIiIChMESyo6CdQGdRqUENESI8FAdFgAFwqDISYwPB4CVSMnEhSej+FogNhtHyfRQFmIol5owmEta/fcKITB6y4choMBmk7yGgSAEAJ8JAVDgQFmKUCCZnwhACH5BAUHABAALAAAAAAQABAAAAViICSOYkGe4hFAiSImAwotB+si6Co2QxvjAYHIgBAqDoWCK2Bq6A40iA4yYMggNZKwGFgVCAQZotFwwJIF4QnxaC9IsZNgLtAJDKbraJCGzPVSIgEDXVNXA0JdgH6ChoCKKCEAIfkEBQcAEAAsAAAAABAADgAABUkgJI7QcZComIjPw6bs2kINLB5uW9Bo0gyQx8LkKgVHiccKVdyRlqjFSAApOKOtR810StVeU9RAmLqOxi0qRG3LptikAVQEh4UAACH5BAUHABAALAAAAAAQABAAAAVxICSO0DCQKBQQonGIh5AGB2sYkMHIqYAIN0EDRxoQZIaC6bAoMRSiwMAwCIwCggRkwRMJWKSAomBVCc5lUiGRUBjO6FSBwWggwijBooDCdiFfIlBRAlYBZQ0PWRANaSkED1oQYHgjDA8nM3kPfCmejiEAIfkEBQcAEAAsAAAAABAAEAAABWAgJI6QIJCoOIhFwabsSbiFAotGMEMKgZoB3cBUQIgURpFgmEI0EqjACYXwiYJBGAGBgGIDWsVicbiNEgSsGbKCIMCwA4IBCRgXt8bDACkvYQF6U1OADg8mDlaACQtwJCEAIfkEBQcAEAAsAAABABAADwAABV4gJEKCOAwiMa4Q2qIDwq4wiriBmItCCREHUsIwCgh2q8MiyEKODK7ZbHCoqqSjWGKI1d2kRp+RAWGyHg+DQUEmKliGx4HBKECIMwG61AgssAQPKA19EAxRKz4QCVIhACH5BAUHABAALAAAAAAQABAAAAVjICSOUBCQqHhCgiAOKyqcLVvEZOC2geGiK5NpQBAZCilgAYFMogo/J0lgqEpHgoO2+GIMUL6p4vFojhQNg8rxWLgYBQJCASkwEKLC17hYFJtRIwwBfRAJDk4ObwsidEkrWkkhACH5BAUHABAALAAAAQAQAA8AAAVcICSOUGAGAqmKpjis6vmuqSrUxQyPhDEEtpUOgmgYETCCcrB4OBWwQsGHEhQatVFhB/mNAojFVsQgBhgKpSHRTRxEhGwhoRg0CCXYAkKHHPZCZRAKUERZMAYGMCEAIfkEBQcAEAAsAAABABAADwAABV0gJI4kFJToGAilwKLCST6PUcrB8A70844CXenwILRkIoYyBRk4BQlHo3FIOQmvAEGBMpYSop/IgPBCFpCqIuEsIESHgkgoJxwQAjSzwb1DClwwgQhgAVVMIgVyKCEAIfkECQcAEAAsAAAAABAAEAAABWQgJI5kSQ6NYK7Dw6xr8hCw+ELC85hCIAq3Am0U6JUKjkHJNzIsFAqDqShQHRhY6bKqgvgGCZOSFDhAUiWCYQwJSxGHKqGAE/5EqIHBjOgyRQELCBB7EAQHfySDhGYQdDWGQyUhADs="/>':'<img src="'+soy.$$escapeHtml(A.issueTypeIconUrl)+'"/>')+'</div><div class="iic-widget__issue-type-selector__trigger iic-widget__issue-type-selector__dropdown aui-list-truncate" style="display:none;"></div>':'<button type="button" class="iic-widget__issue-type-selector__trigger aui-dropdown2-trigger" aria-owns="iic-issue-type-dropdown-'+soy.$$escapeHtml(A.widgetId)+'" aria-haspopup="true">'+(A.isLocked?'<img src="data:image/gif;base64,R0lGODlhEAAQAMQAAP///+7u7t3d3bu7u6qqqpmZmYiIiHd3d2ZmZlVVVURERDMzMyIiIhEREQARAAAAAP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQFBwAQACwAAAAAEAAQAAAFdyAkQgGJJOWoQgIjBM8jkKsoPEzgyMGsCjPDw7ADpkQBxRDmSCRetpRA6Rj4kFBkgLC4IlUGhbNQIwXOYYWCXDufzYPDMaoKGBoKb886OjAKdgZAAgQkfCwzAgsDBAUCgl8jAQkHEAVkAoA1AgczlyIDczUDA2UhACH5BAUHABAALAAAAAAPABAAAAVjICSO0IGIATkqIiMKDaGKC8Q49jPMYsE0hQdrlABCGgvT45FKiRKQhWA0mPKGPAgBcTjsspBCAoH4gl+FmXNEUEBVAYHToJAVZK/XWoQQDAgBZioHaX8igigFKYYQVlkCjiMhACH5BAUHABAALAAAAAAQAA8AAAVgICSOUGGQqIiIChMESyo6CdQGdRqUENESI8FAdFgAFwqDISYwPB4CVSMnEhSej+FogNhtHyfRQFmIol5owmEta/fcKITB6y4choMBmk7yGgSAEAJ8JAVDgQFmKUCCZnwhACH5BAUHABAALAAAAAAQABAAAAViICSOYkGe4hFAiSImAwotB+si6Co2QxvjAYHIgBAqDoWCK2Bq6A40iA4yYMggNZKwGFgVCAQZotFwwJIF4QnxaC9IsZNgLtAJDKbraJCGzPVSIgEDXVNXA0JdgH6ChoCKKCEAIfkEBQcAEAAsAAAAABAADgAABUkgJI7QcZComIjPw6bs2kINLB5uW9Bo0gyQx8LkKgVHiccKVdyRlqjFSAApOKOtR810StVeU9RAmLqOxi0qRG3LptikAVQEh4UAACH5BAUHABAALAAAAAAQABAAAAVxICSO0DCQKBQQonGIh5AGB2sYkMHIqYAIN0EDRxoQZIaC6bAoMRSiwMAwCIwCggRkwRMJWKSAomBVCc5lUiGRUBjO6FSBwWggwijBooDCdiFfIlBRAlYBZQ0PWRANaSkED1oQYHgjDA8nM3kPfCmejiEAIfkEBQcAEAAsAAAAABAAEAAABWAgJI6QIJCoOIhFwabsSbiFAotGMEMKgZoB3cBUQIgURpFgmEI0EqjACYXwiYJBGAGBgGIDWsVicbiNEgSsGbKCIMCwA4IBCRgXt8bDACkvYQF6U1OADg8mDlaACQtwJCEAIfkEBQcAEAAsAAABABAADwAABV4gJEKCOAwiMa4Q2qIDwq4wiriBmItCCREHUsIwCgh2q8MiyEKODK7ZbHCoqqSjWGKI1d2kRp+RAWGyHg+DQUEmKliGx4HBKECIMwG61AgssAQPKA19EAxRKz4QCVIhACH5BAUHABAALAAAAAAQABAAAAVjICSOUBCQqHhCgiAOKyqcLVvEZOC2geGiK5NpQBAZCilgAYFMogo/J0lgqEpHgoO2+GIMUL6p4vFojhQNg8rxWLgYBQJCASkwEKLC17hYFJtRIwwBfRAJDk4ObwsidEkrWkkhACH5BAUHABAALAAAAQAQAA8AAAVcICSOUGAGAqmKpjis6vmuqSrUxQyPhDEEtpUOgmgYETCCcrB4OBWwQsGHEhQatVFhB/mNAojFVsQgBhgKpSHRTRxEhGwhoRg0CCXYAkKHHPZCZRAKUERZMAYGMCEAIfkEBQcAEAAsAAABABAADwAABV0gJI4kFJToGAilwKLCST6PUcrB8A70844CXenwILRkIoYyBRk4BQlHo3FIOQmvAEGBMpYSop/IgPBCFpCqIuEsIESHgkgoJxwQAjSzwb1DClwwgQhgAVVMIgVyKCEAIfkECQcAEAAsAAAAABAAEAAABWQgJI5kSQ6NYK7Dw6xr8hCw+ELC85hCIAq3Am0U6JUKjkHJNzIsFAqDqShQHRhY6bKqgvgGCZOSFDhAUiWCYQwJSxGHKqGAE/5EqIHBjOgyRQELCBB7EAQHfySDhGYQdDWGQyUhADs=" width="16" height="16"/>':'<img src="'+soy.$$escapeHtml(A.issueTypeIconUrl)+'" width="16" height="16"/>')+'</button><div id="iic-issue-type-dropdown-'+soy.$$escapeHtml(A.widgetId)+'" data-aui-alignment="top left" class="aui-dropdown2 aui-style-default iic-widget__issue-type-selector__dropdown"><div class="aui-dropdown2-section"><ul class="aui-list-truncate"></ul></div></div>')+"</div>"},JIRA.Templates.InlineIssueCreate.issueTypeSelectorItem=function(A,i){return'<li><a href="#" class="aui-icon-container" data-id="'+soy.$$escapeHtml(A.id)+'" style="background-image: url(\''+soy.$$escapeHtml(A.iconUrl)+"');\">"+soy.$$escapeHtml(A.name)+"</a></li>"},JIRA.Templates.InlineIssueCreate.description=function(A,i){return'<div class="iic-widget__description'+(A.issueTypeName?"":" iic-widget__description_invisible")+'">'+soy.$$escapeHtml("New")+' <span class="iic-widget__description__selected-issue-type-name">'+(A.issueTypeName?soy.$$escapeHtml(A.issueTypeName):"")+"</span></div>"};;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/entities/possibleValues.js' */
define("jira/inline-issue-create/entities/possible-values",["backbone","jira/inline-issue-create/lib/brace"],function(t,i){"use strict";return i.Collection.extend({url:function(){var t=_.map(this.jqls,function(t){return"query="+encodeURIComponent(t)+"&"});return AJS.contextPath()+"/rest/inline-create/1.0/context/possibleValues/"+this.getEntityName()+"?".concat.apply("?",t)},getEntityName:void 0,initialize:function(t,i){this._initializeState(t,i)},_initializeState:function(t,i){i&&i.jqls?this.jqls=i.jqls:this.jqls=void 0,this.fetching=!1,this.initialized=!1},parse:function(t){return t.values},setJQLs:function(t){_.isEqual(this.jqls,t)||(this.jqls=t,this.fetch({reset:!0}))},reset:function(){return this.fetching=!1,this.initialized=!0,t.Collection.prototype.reset.apply(this,arguments)},fetch:function(i){function e(){n.fetching=!1,n.initialized=!0,n.trigger("fetch:finished")}var n=this;return i=i||{},i.success?i.success=_.wrap(i.success,function(t){return e(),t.apply(n,Array.prototype.slice.call(arguments,1))}):i.success=e,this.trigger("fetch:started"),this.fetching=!0,t.Collection.prototype.fetch.call(this,i)},isInitialized:function(){return this.initialized},isFetching:function(){return this.fetching}})});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/entities/issueType.js' */
define("jira/inline-issue-create/entities/issue-type",["jira/inline-issue-create/lib/brace"],function(e){"use strict";var i=e.Model.extend({namedAttributes:{id:"string",name:"string",description:"string",iconUrl:"string",subtask:"boolean"}});return i});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/entities/issueTypes.js' */
define("jira/inline-issue-create/entities/issue-types",["jira/inline-issue-create/entities/possible-values","jira/inline-issue-create/entities/issue-type"],function(e,i){"use strict";return e.extend({model:i,getEntityName:function(){return"issuetype"}})});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/entities/project.js' */
define("jira/inline-issue-create/entities/project",["jira/inline-issue-create/lib/brace"],function(e){"use strict";return e.Model.extend({namedAttributes:{id:"number",type:"string"}})});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/entities/projects.js' */
define("jira/inline-issue-create/entities/projects",["jira/inline-issue-create/entities/possible-values","jira/inline-issue-create/entities/project"],function(e,t){"use strict";return e.extend({model:t,comparator:function(e){return e.getId()},getEntityName:function(){return"project"}})});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/entities/inlineIssue.js' */
define("jira/inline-issue-create/entities/inline-issue",["jquery","underscore","jira/inline-issue-create/lib/brace","internal/browser-metrics","jira/featureflags/feature-manager"],function(i,e,n,t,a){"use strict";return n.Model.extend({initialize:function(){this._isSaving=!1},save:function(){t.start({key:"jira.agile.create.inline.issue.submit",isInitial:!1});var e=this,n=i.ajax(AJS.contextPath()+"/rest/inline-create/1.0/issue",{data:JSON.stringify(this.toJSON()),contentType:"application/json",type:"POST"});return this._isSaving=!0,n.always(function(){e._isSaving=!1})},isSaving:function(){return this._isSaving}})});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/entities/inlineBootstrap.js' */
define("jira/inline-issue-create/entities/inline-bootstrap",["backbone","jira/inline-issue-create/lib/brace","jira/inline-issue-create/entities/projects","jira/inline-issue-create/entities/issue-types"],function(e,i,t,s){"use strict";return i.Model.extend({issueTypesCollectionType:s,projectsCollectionType:t,namedAttributes:{hasCreateIssuePermission:"boolean",hasScheduleIssuePermission:"boolean"},initialize:function(){this.issueTypes=new this.issueTypesCollectionType,this.projects=new this.projectsCollectionType},url:function(){var e=_.map(this.jqls,function(e){return"query="+encodeURIComponent(e)+"&"});return AJS.contextPath()+"/rest/inline-create/1.0/context/bootstrap"+"?".concat.apply("?",e)},_initializeState:function(e,i){i&&i.jqls?this.jqls=i.jqls:this.jqls=void 0,this.fetching=!1,this.initialized=!1},setJQLs:function(e){_.isEqual(this.jqls,e)||(this.jqls=e,this.fetch({reset:!0}))},parse:function(e){var i=this,t=_.map(e.issueTypes.values,function(e){return _.pick(e,_.keys(i.issueTypes.model.prototype.namedAttributes))});this.issueTypes.reset(t);var s=_.map(e.projects.values,function(e){return _.pick(e,_.keys(i.projects.model.prototype.namedAttributes))});return this.projects.reset(s),_.pick(e,"hasCreateIssuePermission","hasScheduleIssuePermission")},fetch:function(i){function t(){s.fetching=!1,s.initialized=!0,JIRA.trace("inline.create.bootstrap.fetched")}var s=this;return i=i||{},i.success?i.success=_.wrap(i.success,function(e){return t(),e.apply(s,Array.prototype.slice.call(arguments,1))}):i.success=t,this.fetching=!0,JIRA.trace("inline.create.bootstrap.fetching"),e.Model.prototype.fetch.call(this,i)},isInitialized:function(){return this.initialized},isFetching:function(){return this.fetching},fireWhenInitialized:function(e){this.isInitialized()&&!this.isFetching()?e():this.listenToOnce(this,"sync",e)}})});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/views/description.js' */
define("jira/inline-issue-create/views/description",["jquery","jira/inline-issue-create/lib/marionette"],function(e,i){"use strict";var t=i.ItemView.extend({template:JIRA.Templates.InlineIssueCreate.description,ui:{selectedIssueTypeName:".iic-widget__description__selected-issue-type-name"},modelEvents:{"change:selectedIssueType":function(){var e=this.model.getSelectedIssueType()&&this.model.getSelectedIssueType().getName()||"";e?(this.$el.removeClass("iic-widget__description_invisible"),this.ui.selectedIssueTypeName.text(e)):this.$el.addClass("iic-widget__description_invisible")}},serializeData:function(){var e={};return this.model.getSelectedIssueType()&&(e=this.model.getSelectedIssueType().toJSON()),{issueTypeName:e.name}},onRender:function(){this.unwrapTemplate()}});return t});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/views/issueTypeDropdown.js' */
define("jira/inline-issue-create/views/issue-type-dropdown",["jquery","jira/inline-issue-create/lib/marionette","jira/inline-issue-create/views/issue-type-dropdown-item"],function(e,i,t){"use strict";var s=i.CompositeView.extend({childView:t,childViewOptions:function(e,i){return{model:e,dropdownModel:this.model}},template:JIRA.Templates.InlineIssueCreate.issueTypeSelector,childViewContainer:".aui-list-truncate",ui:{trigger:".iic-widget__issue-type-selector__trigger",issueTypeIcon:".iic-widget__issue-type-selector__trigger img",issueTypeDropdown:".iic-widget__issue-type-selector__dropdown"},modelEvents:{"change:selectedIssueType":function(){this.model.getSelectedIssueType()&&this.ui.issueTypeIcon.attr("src",this.model.getSelectedIssueType().getIconUrl())},"change:lockState":function(e,i){this.render(),i===this.model.constants.STATE_LOCK_SENDING?this.ui.trigger.attr("aria-disabled",!0):this.ui.trigger.attr("aria-disabled",!1)}},initialize:function(){this.isDropdownShown=!1,_.bindAll(this,"onDropdownShow")},serializeData:function(){var e={};return this.model.getSelectedIssueType()&&(e=this.model.getSelectedIssueType().toJSON()),{widgetId:this.options.widgetId,isLocked:this.model.getLockState()!==this.model.constants.STATE_LOCK_UNLOCKED,issueTypeIconUrl:e.iconUrl,isAgility:this.options.isAgility}},onRender:function(){this.unwrapTemplate(),this.ui.issueTypeDropdown.on("aui-dropdown2-show",this.onDropdownShow)},onDropdownShow:function(){var i=this.ui.issueTypeDropdown;i.appendTo(this.$el);var t=this.ui.issueTypeIcon.offset(),s=this.ui.issueTypeIcon.position(),o=this.ui.issueTypeIcon.outerHeight(),n=i.height(),r=e("body").outerHeight(!0)<t.top+o+n;i.css({left:s.left,top:(r?s.top-n:s.top+o)+"px"});var d=i.find("li a");this.trigger("dropdownOpened",{numIssueTypes:d.length})},onChildviewSelected:function(e){this.trigger("issueTypeSelected",e.model)}});return s});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/views/issueTypeDropdownItem.js' */
define("jira/inline-issue-create/views/issue-type-dropdown-item",["jquery","jira/inline-issue-create/lib/marionette"],function(e,i){"use strict";var t=i.ItemView.extend({template:JIRA.Templates.InlineIssueCreate.issueTypeSelectorItem,initialize:function(e){this.dropdownModel=e.dropdownModel},events:{"click a":function(e){this.trigger("selected")}},onRender:function(){this.unwrapTemplate()}});return t});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/views/defaultTrigger.js' */
define("jira/inline-issue-create/views/default-trigger",["jquery","jira/inline-issue-create/lib/marionette"],function(i,e){"use strict";var t=e.ItemView.extend({template:JIRA.Templates.InlineIssueCreate.trigger,ui:{trigger:" .iic-trigger"},events:{"click @ui.trigger":function(i){i.preventDefault(),this.trigger("selected")}},initialize:function(i){this.widget=i.widget,this.listenTo(this.widget,"activated",this.hide),this.listenTo(this.widget,"deactivated",this.show)},onRender:function(){this.unwrapTemplate(),this.widget.model.getState()===this.widget.model.constants.STATE_ACTIVE&&this.hide()},hide:function(){this.ui.trigger.addClass("iic-trigger_hidden")},show:function(){this.ui.trigger.removeClass("iic-trigger_hidden")}});return t});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/entities/widget.js' */
define("jira/inline-issue-create/entities/widget-constants",[],function(){"use strict";var e={STATE_CLOSED:"STATE_CLOSED",STATE_ACTIVE:"STATE_ACTIVE",STATE_LOCK_TEMP_INACTIVE:"STATE_LOCK_TEMP_INACTIVE",STATE_LOCK_SENDING:"STATE_LOCK_SENDING",STATE_LOCK_PERM_INACTIVE:"STATE_LOCK_PERM_INACTIVE",STATE_LOCK_UNLOCKED:"STATE_LOCK_UNLOCKED"};return Object.freeze(e),e}),define("jira/inline-issue-create/entities/widget",["jira/inline-issue-create/lib/brace","jira/inline-issue-create/entities/issue-types","jira/inline-issue-create/entities/issue-type","jira/inline-issue-create/entities/widget-constants"],function(e,t,s,i){"use strict";var T="iic.slectedIssueType",a=i,n=e.Model.extend({constants:a,defaults:{state:a.STATE_CLOSED,lockState:a.STATE_LOCK_UNLOCKED},namedAttributes:{summary:"",selectedIssueType:s,issueTypes:t,state:"",lastState:"",lockState:""},initialize:function(e){var t,s;e&&e.selectedIssueType||(localStorage&&(t=JSON.parse(localStorage.getItem(T))||{},t=t||{},s=this.getIssueTypes()&&this.getIssueTypes().find(function(e){return e.getId()===t.id})),s?this.setSelectedIssueType(s):this.getIssueTypes()&&this.setSelectedIssueType(this.getIssueTypes().at(0))),this.on("change:selectedIssueType",function(e){var t=this.getSelectedIssueType();t&&localStorage.setItem(T,JSON.stringify(t.toJSON()))}),this.listenTo(this.getIssueTypes(),"reset",function(){var e,s=this.getSelectedIssueType()&&this.getSelectedIssueType().getId();s||(s=t.id),void 0!==s?(e=this.getIssueTypes().get(s),e?this.setSelectedIssueType(e):this.setSelectedIssueType(this.getIssueTypes().at(0))):this.setSelectedIssueType(this.getIssueTypes().at(0))})},changeState:function(e){e!==this.getState()&&(this.setLastState(this.getState()),this.setState(e))},setSelectedIssueTypeIfAvailable:function(e){if(e){var t=this.getIssueTypes().get(e.getId());t&&this.setSelectedIssueType(t)}},toIssueData:function(){return{summary:this.getSummary(),issueTypeId:this.getSelectedIssueType()&&this.getSelectedIssueType().getId()}}});return n});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/views/widget.js' */
define("jira/inline-issue-create/views/widget",["jquery","underscore","jira/inline-issue-create/lib/marionette","jira/inline-issue-create/util"],function(i,t,e,s){"use strict";var a=500,n=e.LayoutView.extend({template:JIRA.Templates.InlineIssueCreate.widget,regions:{issueTypeSelector:".iic-widget__issue-type-selector-container",description:".iic-widget__description-container"},ui:{summary:".iic-widget__summary",more:".iic-widget__more",cancel:".iic-widget__cancel",create:".iic-widget__create",form:".iic-widget__form",withTitle:"[title]"},events:{"input @ui.summary":"onSummaryChange","change @ui.summary":"onSummaryChange","keyup @ui.summary":function(i){var t=this.ui.summary.val();t.length>255&&this.ui.summary.val(t.substr(0,255)),this.onSummaryChange(i)},"keydown @ui.summary":function(i){i.keyCode===s.keyCode.ENTER?(i.preventDefault(),this.onSubmit(i)):i.keyCode===s.keyCode.ESC&&this.trigger("deactivate",{reason:"keypress"})},"click @ui.cancel":function(i){i.preventDefault(),this.model.getLockState()!==this.model.constants.STATE_LOCK_SENDING&&this.trigger("deactivate",{reason:"cancel"})},"click @ui.more":function(i){i.preventDefault(),this.model.getLockState()!==this.model.constants.STATE_LOCK_SENDING&&this.trigger("openFullIssueDialog")},"click @ui.create":function(i){this.onSubmit(i)}},modelEvents:{"change:summary":function(){this.ui.summary.val(this.model.getSummary()),this.adjustSummarySize()},"change:state":function(i,t){t===this.model.constants.STATE_ACTIVE?this.activate():t===this.model.constants.STATE_CLOSED&&this.deactivate()},"change:lockState":function(i,t){this.ui.summary.prop&&(t===this.model.constants.STATE_LOCK_SENDING?this.ui.summary.prop("disabled",!0):this.ui.summary.prop("disabled",!1))}},initialize:function(i){this.cssClass=i.cssClass||"",this.listenTo(this.issueTypeSelector,"show",function(){this.listenTo(this.issueTypeSelector.currentView,"issueTypeSelected",function(){this.focusSummary()})}),t.bindAll(this,"adjustSummarySize","onBodyClick")},onSubmit:function(i){var t=this.ui.summary.val();""!==t&&t.length<=255?this.model.getLockState()===this.model.constants.STATE_LOCK_UNLOCKED?(this.ui.summary.blur(),this.disableCreate(),this.trigger("createIssue")):s.addClassAndRemoveOnAnimationEnd(this.$(".issue-type-selector"),"iic-error",a):s.addClassAndRemoveOnAnimationEnd(this.ui.summary,"iic-error",a)},onClose:function(){i(document).off("click.iic",this.onBodyClick)},onBodyClick:function(i){this.$el.is(i.target)||0!==this.$el.has(i.target).length||(""===this.ui.summary.val()?this.trigger("deactivate",{reason:"cancel"}):this.ui.summary.is(":focus")&&this.ui.summary.blur())},serializeData:function(){return{summary:this.model.getSummary(),cssClass:this.cssClass,isAgility:this.options.isAgility}},onRender:function(){this.unwrapTemplate(),this.ui.withTitle.tooltip({aria:!0});var i=this;this.ui.summary.on("change cut paste drop keydown input",function(){t.defer(i.adjustSummarySize)}),t.defer(i.adjustSummarySize),this.ui.summary.placeholder(),this.model.getState()===this.model.constants.STATE_ACTIVE?this.activate():this.deactivate()},adjustSummarySize:function(){this.ui.summary.css("height","auto");var i=this.ui.summary.outerHeight(),t=Math.max(i+this.ui.summary.prop("scrollHeight")-this.ui.summary.prop("clientHeight"),i);t&&this.ui.summary.height(t+"px")},reset:function(){this.ui.summary.attr("style","")},hide:function(){this.$el.addClass("iic-widget_hidden"),i(document).off("click.iic",this.onBodyClick)},show:function(){this.$el.removeClass("iic-widget_hidden"),this.adjustSummarySize();var e=this;t.defer(function(){i(document).off("click.iic",e.onBodyClick),i(document).on("click.iic",e.onBodyClick)})},focusSummary:function(){this.ui.summary.focus()},activate:function(){this.show(),this.trigger("activated")},focus:function(){this.focusSummary(),this.trigger("focused")},deactivate:function(){this.hide(),this.trigger("deactivated")},onSummaryChange:function(i){this.trigger("summaryChanged",this.ui.summary.val())},enableCreate:function(){this.ui.create.attr("aria-disabled",!1)},disableCreate:function(){this.ui.create.attr("aria-disabled",!0)}});return n});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/inline-issue-create-widget.js' */
define("jira/inline-issue-create/widget",["jquery","underscore","jira/inline-issue-create/lib/marionette","jira/inline-issue-create/util","jira/inline-issue-create/entities/widget","jira/inline-issue-create/entities/issue-types","jira/inline-issue-create/entities/projects","jira/inline-issue-create/entities/inline-issue","jira/inline-issue-create/views/widget","jira/inline-issue-create/views/issue-type-dropdown","jira/inline-issue-create/views/description","jira/inline-issue-create/prefillable-create-issue-dialog","jira/inline-issue-create/analytics","jira/analytics/web-client","jira/featureflags/feature-manager"],function(e,t,i,s,r,n,a,o,c,l,d,u,h,p,m){"use strict";function I(e){t.isFunction(e.parameter)?e.context[e.fieldName]=new e.parameter(e.defaultOptions):t.isObject(e.parameter)?e.context[e.fieldName]=e.parameter:void 0===e.parameter&&(e.context[e.fieldName]=new e.defaultConstructor(e.defaultOptions))}var g=i.Controller.extend({initialize:function(e){this._initializeComponents(e),e.jqls&&this.setCurrentJQLs(e.jqls),e.container&&this.attach(e.container),this._initializeEvents(e)},_initializeComponents:function(e){t.isFunction(e.issueTypes)?this.issueTypes=new e.issueTypes((void 0),{jqls:e.jqls}):t.isObject(e.issueTypes)?this.issueTypes=e.issueTypes:this.issueTypes=new n((void 0),{jqls:e.jqls}),t.isFunction(e.projects)?this.projects=new e.projects((void 0),{jqls:e.jqls}):t.isObject(e.projects)?this.projects=e.projects:this.projects=new a((void 0),{jqls:e.jqls}),I({context:this,fieldName:"model",defaultOptions:{issueTypes:this.issueTypes},parameter:e.model,defaultConstructor:r}),I({context:this,fieldName:"dropdownView",defaultOptions:{model:this.model,collection:this.issueTypes,widgetId:this.model.cid},parameter:e.dropdownView,defaultConstructor:l}),I({context:this,fieldName:"descriptionView",defaultOptions:{model:this.model,widgetId:this.model.cid},parameter:e.descriptionView,defaultConstructor:d}),this.view=new c({model:this.model,cssClass:e.cssClass,isAgility:e.isAgility&&e.isAgility()||!1}),this.analytics=new h({widget:this}),this._currentInlineIssue=void 0},_initializeEvents:function(e){this.listenTo(this.view,"summaryChanged",function(e){this.model.setSummary(e)}),this.listenTo(this.view,"createIssue",this.createIssue),this.listenTo(this.view,"deactivate",this.deactivate),this.listenTo(this.view,"openFullIssueDialog",function(){this.trigger("openCreateIssueDialog",{reason:"manual"}),this.openCreateIssueDialog()}),this.listenTo(this.model,"change:state",this.onStateChange),this.listenTo(this.model,"change:lockState",this.onLockStateChange),this.listenTo(this.issueTypes,"reset",this.checkWidgetLocked),this.listenTo(this.projects,"reset",this.checkWidgetLocked),this.on("issueCreated",function(){this.model.setSummary("")}),this.checkWidgetLocked()},render:function(){this.view.issueTypeSelector.attachView(void 0),this.view.description.attachView(void 0),this.view.render(),this.view.issueTypeSelector.show(this.dropdownView),this.view.description.show(this.descriptionView),this.listenTo(this.dropdownView,"issueTypeSelected",function(e){this.model.setSelectedIssueType(e)})},onStateChange:function(e,t){t===this.model.constants.STATE_ACTIVE?this.trigger("activated"):t===this.model.constants.STATE_CLOSED&&this.trigger("deactivated")},onLockStateChange:function(e,t){t===this.model.constants.STATE_LOCK_PERM_INACTIVE&&this.model.getState()===this.model.constants.STATE_ACTIVE&&this.deactivate()},activate:function(){return this.model.getLockState()!==this.model.constants.STATE_LOCK_PERM_INACTIVE&&(this.model.changeState(this.model.constants.STATE_ACTIVE),!0)},deactivate:function(){this.model.changeState(this.model.constants.STATE_CLOSED)},checkWidgetLocked:function(){return this.issueTypes.isFetching()||!this.issueTypes.isInitialized()?this.model.setLockState(this.model.constants.STATE_LOCK_TEMP_INACTIVE):this.projects.isFetching()||!this.projects.isInitialized()?this.model.setLockState(this.model.constants.STATE_LOCK_TEMP_INACTIVE):this._currentInlineIssue&&this._currentInlineIssue.isSaving()?this.model.setLockState(this.model.constants.STATE_LOCK_SENDING):this.issueTypes.length?1!==this.projects.length?this.model.setLockState(this.model.constants.STATE_LOCK_PERM_INACTIVE):void this.model.setLockState(this.model.constants.STATE_LOCK_UNLOCKED):this.model.setLockState(this.model.constants.STATE_LOCK_PERM_INACTIVE)},focus:function(){this.view.focus()},reset:function(){this.model.setSummary(""),this.view.reset()},attach:function(t){var i=e(t);i.append(this.view.el)},setCurrentJQLs:function(e){this.jqls=e},setSummary:function(e){this.model.setSummary(e)},getSummary:function(){return this.model.getSummary()},setSelectedIssueTypeIfAvailable:function(e){this.model.setSelectedIssueTypeIfAvailable(e)},getSelectedIssueType:function(){return this.model.getSelectedIssueType()},setOverrides:function(e){this.overrides=e},createIssue:function(){var e=this,i={summary:this.model.getSummary(),contexts:this.jqls,issueTypeId:this.model.getSelectedIssueType().getId(),overrides:t.clone(this.overrides)};this.trigger("beforeIssueCreated",e,i),this._currentInlineIssue=new o(i),this._currentInlineIssue.save().done(function(t){if(m.isFeatureEnabled("moonwalk.eventually-consistent.backlog.polling"))try{GH.ECX.markUserInteraction(GH.ECX.INTERACTION_TYPE.BACKLOG.ISSUE_CREATE_INLINE)}catch(e){AJS.trigger("analyticsEvent",{name:"jira.agile.board.InlineIssueCreate.issueCreated.MarkUserInteractionError",data:{errorMsg:e.toString()}})}e.trigger("issueCreated",t.issue,t.prefilledFields,e,{source:"inline"}),JIRA.trace("inline.create.issue.created"),e.fireIssueCreatedTrackEvent(e,t),m.isFeatureEnabled("jsw.iic.sla.metric")&&e.fireIssueCreatedOperationalEvent("taskSuccess")}).fail(function(t){var i=new jQuery.Deferred;e.openCreateIssueDialog(i);var r=[];try{var n=JSON.parse(t.responseText);void 0!==n.errors&&(r=Object.values(n.errors)),i.resolve({errors:n.errors,errorMessages:n.generalErrors,prefilledFields:n.prefilledFields})}catch(r){s.error(e,"Could not parse response: "+r,t);var a="Unfortunately, there is an internal communication error, so you must use the full dialog to create the issue. Please contact your administrator if this error keeps appearing.";i.resolve({errors:{},errorMessages:[a],prefilledFields:{}})}e.trigger("openCreateIssueDialog",{reason:"createFailed",requiredFields:r.filter(function(e){return e.includes("is required.")}).length}),e.view.enableCreate(),m.isFeatureEnabled("jsw.iic.sla.metric")&&(t&&(void 0===t.status||null===t.status||429===t.status||t.status>=500)?e.fireIssueCreatedOperationalEvent("taskFail",t.status,t.statusText):e.fireIssueCreatedOperationalEvent("taskSuccess"))}).always(function(){window.performance&&window.performance.mark("inline_issue_create_api_done"),e.checkWidgetLocked()}),this.checkWidgetLocked()},fireIssueCreatedTrackEvent:function(e,t){if(p&&"undefined"!=typeof GH&&GH.RapidBoard&&GH.RapidBoard.State){var i=t.issue.issueType,s=t.issue.issueId,r={objectType:"issue",objectId:s,containerType:GH.RapidViewConfig.currentData.data.locationType,attributes:{issueTypeId:i,boardId:GH.RapidBoard.State.getRapidViewId(),boardType:GH.RapidBoard.State.getBoardTypeForAnalytics(),projectType:"software"},action:"created",actionSubject:"issue",actionSubjectId:s,source:"backlogScreen"};"project"===r.containerType&&JIRA.API&&JIRA.API.Projects&&(r.containerId=JIRA.API.Projects.getCurrentProjectId()),p.sendTrackEvent(r)}},fireIssueCreatedOperationalEvent:function(e,t,i){if(p&&"undefined"!=typeof GH&&GH.RapidBoard&&GH.RapidBoard.State&&GH.Util){var s={task:"createInlineIssue",analyticsSource:"backlog",application:"jira-software",edition:GH.Util.getEdition("jira-software"),boardType:GH.RapidBoard.State.getBoardTypeForAnalytics(),isClassic:!0,responseStatus:t,responseStatusText:i},r={source:"ui",actionSubject:"ui",action:e,attributes:s};p.sendOperationalEvent(r)}},openCreateIssueDialog:function(e){var i=this,s=this.model.toIssueData();1===this.projects.size()&&(s.project=this.projects.at(0).toJSON());var r={summary:s.summary,contexts:this.jqls,issueTypeId:this.model.getSelectedIssueType()?this.model.getSelectedIssueType().getId():void 0,overrides:t.clone(this.overrides)};this.trigger("beforeIssueCreated",i,r),e||(e=this._resolveInlineContext(r,i));var n=u.createPrefillableCreateIssueForm(e.promise(),!0);return n.pipe(function(e){function t(e,t){if(m.isFeatureEnabled("moonwalk.eventually-consistent.backlog.polling"))try{GH.ECX.markUserInteraction(GH.ECX.INTERACTION_TYPES.BACKLOG.ISSUE_CREATE_DIALOG)}catch(e){AJS.trigger("analyticsEvent",{name:"jira.agile.board.InlineIssueCreate.issueCreatedDialog.MarkUserInteractionError",data:{errorMsg:e.toString()}})}i.trigger("issueCreated",t,t.fields,i,{source:"dialog"}),JIRA.trace("inline.create.issue.created")}var s=e.asDialog();return e.bind("initialized",function(){this.unconfigurableForm.bind("issueCreated",t),this.configurableForm.bind("issueCreated",t)}),s.show(),s})},_resolveInlineContext:function(t,i){var s=new jQuery.Deferred,r=e.ajax(AJS.contextPath()+"/rest/inline-create/1.0/context/resolve",{data:JSON.stringify(t),contentType:"application/json",type:"POST"});return r.done(function(e){s.resolve({prefilledFields:e.createIssueInput})}).fail(function(){s.resolve({prefilledFields:{summary:t.summary?t.summary:"",issuetype:i.model.getSelectedIssueType()?i.model.getSelectedIssueType().getId():void 0}})}),s}});return g});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/inline-issue-create-analytics.js' */
define("jira/inline-issue-create/analytics",["jira/inline-issue-create/lib/marionette"],function(e){"use strict";return e.Controller.extend({initialize:function(e){this.loadTimestamp=(new Date).getTime();var t=e.widget;this.widgetId=t.model.cid.substring(1),this.projects=t.projects,this.listenTo(t,"issueCreated",this.onIssueCreated),this.listenTo(t,"openCreateIssueDialog",this.onOpenCreateIssueDialog),this.listenTo(t,"activated",this.onActivated),this.listenTo(t,"deactivated",this.onDeactivated),this.listenTo(t,"dropdownOpened",this.onDropdownOpened),this.listenTo(t,"issueTypeSelected",this.onIssueTypeSelected)},triggerAnalytics:function(e,t){var i="",s="";if(this.projects&&this.projects.size()>0){var n=this.projects.first();i=n.get("id"),s=n.get("type")}var a=_.defaults({},t,{instance:this.widgetId,timestarted:this.loadTimestamp,projectId:i,projectType:s});AJS.trigger("analyticsEvent",{name:"jira.inlinecreate."+e,data:a})},onOpenCreateIssueDialog:function(e){this.triggerAnalytics("openDialog",{reason:e.reason,requiredFields:e.requiredFields})},onIssueCreated:function(e,t,i,s){"inline"===s.source?this.triggerAnalytics("issueCreatedInline"):this.triggerAnalytics("issueCreatedDialog")},onDeactivated:function(){this.triggerAnalytics("deactivated")},onActivated:function(){this.triggerAnalytics("activated")},onDropdownOpened:function(e){this.triggerAnalytics("dropdown.opened",{numIssueTypes:e.numIssueTypes})},onIssueTypeSelected:function(){this.triggerAnalytics("dropdown.issueTypeSelected")}})});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:component-widget', location = '/inline-issue-create/components/inline-issue-create-widget/inline-issue-create-widget-group.js' */
define("jira/inline-issue-create/widget-group",["jquery","jira/inline-issue-create/lib/marionette","jira/inline-issue-create/widget","jira/inline-issue-create/entities/inline-bootstrap"],function e(t,i,s,r){"use strict";var e=i.Controller.extend({initialize:function(e){this.TriggerView=e.TriggerView,this.Widget=s,this.widgets={},this.currentJQLs=void 0,this.createdCallback=e.createdCallback,this.activeWidget=void 0,this.inlineBootstrap=e.inlineBootstrap||new r,this.widgetOptions=_.defaults(e.widgetOptions||{},{issueTypes:this.inlineBootstrap.issueTypes,projects:this.inlineBootstrap.projects,isAgility:function(){return!1}})},getWidget:function(e){return this.widgets[e]||(this.widgets[e]=this._createNewWidget(e)),this.widgets[e]},setCurrentJqls:function(e){this.currentJQLs=e,_.each(this.widgets,function(t){t.widget.setCurrentJQLs(e)}),this.inlineBootstrap.setJQLs(e)},activateWidget:function(e){if(this.activeWidget===e)return void e.focus();var t=this.activeWidget;this.activeWidget=void 0,_.each(this.widgets,function(t){t!==e&&t.widget.deactivate()});var i=e.activate();return i&&(e.focus(),this.activeWidget=e,this.trigger("widget:activated",e,t),t&&(e.setSummary(t.getSummary()),e.setSelectedIssueTypeIfAvailable(t.getSelectedIssueType()),t.reset())),i},_createNewWidget:function(e){var t=this,i=new this.Widget(this.widgetOptions);i.on("deactivated",function(){t.activeWidget===i&&(t.activeWidget=void 0,i.reset())}),this.createdCallback&&this.createdCallback(i,e),this.currentJQLs&&i.setCurrentJQLs(this.currentJQLs);var s=new t.TriggerView({widget:i});return s.on("selected",function(){t.activateWidget(i)}),{widget:i,trigger:s,render:function(e){s.render(),e.append(s.$el),i.attach(s.$el),i.render(),t.trigger("widget:rendered",i,s,e)}}}});return e});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:inline-issue-create', location = 'jira-issue-navigator-components-module/inline-issue-create/InlineIssueCreate.js' */
define("jira/components/inline-issue-create",["require"],function(t){"use strict";var i=t("jira/components/libs/marionette-2.1.0"),e=t("jira/inline-issue-create/widget"),s=t("jira/inline-issue-create/views/default-trigger"),n=t("jira/inline-issue-create/entities/inline-bootstrap");return i.Object.extend({_buildBootstrap:function(){this.bootstrap=new n,this.listenTo(this.bootstrap,{sync:function(){this.widget.setCurrentJQLs(this.bootstrap.jqls)}})},_buildWidget:function(){this.widget=new e({issueTypes:this.bootstrap.issueTypes,projects:this.bootstrap.projects}),this.listenTo(this.widget,{issueCreated:function(t,i){this.trigger("issueCreated",{issue:t,fields:i})},activated:function(){this.trigger("activated")},deactivated:function(){this.trigger("deactivated")}})},_buildTrigger:function(){this.widgetTrigger=new s({widget:this.widget}),this.listenTo(this.widgetTrigger,{selected:function(){this.activate(),this.trigger("inlineIssueCreateOpened")}})},initialize:function(){this._buildBootstrap(),this._buildWidget(),this._buildTrigger(),this.render()},setJQL:function(t){this.bootstrap.setJQLs([t])},render:function(){this.widgetTrigger.render(),this.widget.render()},show:function(t){this.render(),t.append(this.widgetTrigger.$el),this.widget.attach(t)},activate:function(){if(this.bootstrap.projects.length){var t=this.widget.activate();t&&this.widget.focus()}else this.widget.openCreateIssueDialog()},activateWithJQL:function(t){this.bootstrap.jqls=[t],this.bootstrap.fetch({reset:!0}).done(function(){if(this.bootstrap.projects.length){var t=this.widget.activate();t&&this.widget.focus()}}.bind(this))}})});
//# sourceMappingURL=InlineIssueCreate-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:simpleissuelist', location = 'jira-issue-navigator-components-module/simpleissuelist/SimpleIssueList.js' */
define("jira/components/simpleissuelist",["require"],function(e){"use strict";var s=e("jira/components/simpleissuelist/controllers/list"),t=e("jira/components/simpleissuelist/services/api"),i=e("jira/components/simpleissuelist/services/inline-issue-create"),n=e("jira/components/libs/marionette-2.1.0"),r=e("jira/components/libs/underscore"),u=e("jquery"),a=e("jira/featureflags/feature-manager"),l=a.isFeatureEnabled("gin-analytics-to-support-tti-definition");return n.Object.extend({initialize:function(){this.options.displayInlineIssueCreate&&(this.inlineIssueCreate=new i,this.listenTo(this.inlineIssueCreate,{issueCreated:function(e){this.trigger("issueCreated",e)},"activated deactivated":function(){r.defer(function(){this.list.adjustSize()}.bind(this))}})),this.list=new s({baseURL:this.options.baseURL,inlineIssueCreate:this.inlineIssueCreate}),this.listenTo(this.list,{goToPreviousPage:function(){this.trigger("list:pagination"),this.searchResults.jumpToPage("prev")},goToNextPage:function(){this.trigger("list:pagination"),this.searchResults.jumpToPage("next")},goToPage:function(e){this.trigger("list:pagination"),this.searchResults.jumpToPage(e)},refresh:function(){this.trigger("refresh")},selectIssue:function(e){this.trigger("list:select",{id:e.id,key:e.key,absolutePosition:this.searchResults.getPositionOfIssueInSearchResults(e.id),relativePosition:this.searchResults.getPositionOfIssueInPage(e.id)}),l?this.searchResults.select(e.id,{manualSelect:!0}):this.searchResults.select(e.id)},sort:function(e){this.trigger("sort",e)},update:function(){this.trigger("update")}});var e=r.extend({},AJS.namespace("JIRA.API.Issues"),t.init(this));AJS.namespace("JIRA.API.Issues",null,e)},load:function(e,s,t){this.searchResults&&(this.stopListening(this.searchResults),delete this.searchResults),this.searchResults=e,this.options.displayInlineIssueCreate&&this.inlineIssueCreate.setJQL(this.searchResults.jql),this.listenTo(this.searchResults,{"before:loadpage":function(){this.trigger("before:loadpage")},"error:loadpage":function(e){this.trigger("error:loadpage",e)},reset:function(){this.list.update(this.searchResults)},unselect:function(e){this.list.unselectIssue(e.get("id"))},select:function(e,s){var i=e.get("id")||null;i&&this.list.selectIssue(e.get("id"));var n={id:i,key:e.get("key")};t&&(n.updateActiveView=!0),l?this.trigger("select",n,s):this.trigger("select",n)},change:function(e){this.list.updateIssue(e)}}),s?e.jumpToPageForIssue(s):e.jumpToPage("first")},show:function(e){this.list.render({el:e})},selectNext:function(e){if(this.searchResults)return l?this.searchResults.selectNext(e):this.searchResults.selectNext()},selectPrevious:function(e){if(this.searchResults)return l?this.searchResults.selectPrev(e):this.searchResults.selectPrev()},selectIssue:function(e){this.searchResults.select(e)},_getIssueById:function(e){if(this.searchResults)return this.searchResults.get(e)},refreshIssue:function(e){var s=this._getIssueById(e);s&&s.fetch()},updateIssue:function(e,s){var t=this._getIssueById(e);t&&t.set(s)},adjustSize:function(){this.list.adjustSize()},disableIssue:function(e){var s=this._getIssueById(e);s&&s.set("inaccessible",!0)},removeIssue:function(e){var s=this._getIssueById(e);return s?this.searchResults.removeAndUpdateSelectionIfNeeded(s):(new u.Deferred).reject().promise()},onDestroy:function(){this.list.destroy()},focus:function(){this.list.focus()}})});
//# sourceMappingURL=SimpleIssueList-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:simpleissuelist', location = 'jira-issue-navigator-components-module/simpleissuelist/controllers/List.js' */
define("jira/components/simpleissuelist/controllers/list",["require"],function(e){"use strict";var t=e("jira/components/simpleissuelist/views/pagination"),i=e("jira/components/simpleissuelist/views/issuelist"),s=e("jira/components/simpleissuelist/views/endstablesearch"),n=e("jira/components/simpleissuelist/views/layout"),r=e("jira/components/simpleissuelist/views/loading"),o=e("jira/components/simpleissuelist/views/refresh"),u=e("jira/components/libs/marionette-2.1.0"),l=e("jira/components/orderby"),a=e("jira/featureflags/feature-manager"),h=e("jira/issues/utils/issue-nav-render-state"),g="server"===a.getFlagValue("gin-new-render-approach");return u.ViewManager.extend({_buildPagination:function(){return this.buildView("pagination",function(){var e=new t({baseURL:this.baseURL});return this.listenTo(e,{prev:function(){this.trigger("goToPreviousPage")},next:function(){this.trigger("goToNextPage")},"goto":function(e){this.trigger("goToPage",e)}}),e})},_buildList:function(){return this.buildView("list",function(){var e=new i;return this.listenTo(e,{"childview:select":function(e){var t=e.model;this.trigger("selectIssue",{id:t.get("id"),key:t.get("key")})},update:function(){this.trigger("update")}}),e})},_buildEndStableSearch:function(){return this.buildView("endOfStableSearch",function(){return new s})},_buildRefresh:function(){return this.buildView("refresh",function(){var e=new o;return this.listenTo(e,{refresh:function(){this.trigger("refresh")}}),e})},_buildLayout:function(){return this.buildView("layout",function(){var e=new n;return this.listenTo(e,{render:function(){this.getView("layout").getRegion("pagination").show(this.getView("pagination")),h.shouldUseServerRenderedIssueListHtml()?this.getView("list").setElement(this.getView("layout").getRegion("searchResults").$el):this.getView("layout").getRegion("searchResults").show(this.getView("list")),this.getView("layout").getRegion("refresh").show(this.getView("refresh")),this.getView("layout").getRegion("orderBy")._ensureElement(),this.orderBy.setElement(this.getView("layout").getRegion("orderBy").$el),this.orderBy.render(),this.inlineIssueCreate&&(this.getView("layout").inlineIssueCreateContainer._ensureElement(),this.inlineIssueCreate.show(this.getView("layout").inlineIssueCreateContainer.$el))}}),e})},_buildOrderBy:function(){return this.orderBy=l.create(),this.orderBy.onSort(function(e){this.trigger("sort",e)},this),this.orderBy},_buildViews:function(){this._buildLayout(),this._buildPagination(),this._buildList(),this._buildRefresh(),this._buildEndStableSearch(),this.getView("layout").render()},initialize:function(e){this._buildOrderBy(),this.baseURL=e.baseURL,this.inlineIssueCreate=e.inlineIssueCreate,this._buildViews()},render:function(e){e=e||{};var t=e.el;t.append(this.getView("layout").$el),this.getView("layout").setElement(t)},onDestroy:function(){this.hideView("layout")},update:function(e){e.isAtTheEndOfStableSearch()?this.getView("layout").getRegion("endOfStableMessageContainer").show(this.getView("endOfStableSearch")):this.getView("layout").getRegion("endOfStableMessageContainer").empty(),this.getView("list").update(e),this.getView("refresh").render(),this.getView("pagination").update(e),this.orderBy.setElement(this.getView("layout").getRegion("orderBy").$el),this.orderBy.render(),this.orderBy.setJql(e.jql),this.inlineIssueCreate&&this.inlineIssueCreate.render(),this.adjustSize()},hideLoading:function(){this.hideView("loading")},showLoading:function(){this.showView("loading",function(){var e=new r;return this.listenTo(e,{render:function(){this.getView("layout").$el.prepend(e.$el)}}),e})},updateIssue:function(e){this.getView("list").updateIssue(e)},unselectIssue:function(e){this.getView("list").unselectIssue(e)},selectIssue:function(e){this.getView("list").selectIssue(e)},adjustSize:function(){if(this.getView("layout")&&this.getView("list")){if(!g||h.isRouteLegacyPIN()){var e=this.getView("layout").ui.listPanel,t=this.getView("list").$el,i=this.getView("layout").getRegion("pagination").$el,s=t.offset().top+e.scrollTop(),n=i?i.outerHeight():0,r=window.innerHeight,o=this.getView("endOfStableSearch")?this.getView("endOfStableSearch").$el.outerHeight():0,u=this.getView("layout").inlineIssueCreateContainer.$el.outerHeight()||0;e.css("height",r-s-o-n-u)}this.getView("list").scrollSelectedIssueIntoView()}},focus:function(){this.getView("list")&&this.getView("list").focus()}})});
//# sourceMappingURL=List-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:simpleissuelist', location = 'jira-issue-navigator-components-module/simpleissuelist/services/API.js' */
define("jira/components/simpleissuelist/services/api",function(){"use strict";return{init:function(e){return{nextIssue:function(){e.selectNext()},previousIssue:function(){e.selectPrevious()}}}}});
//# sourceMappingURL=API-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:simpleissuelist', location = 'jira-issue-navigator-components-module/simpleissuelist/services/InlineIssueCreate.js' */
define("jira/components/simpleissuelist/services/inline-issue-create",["require"],function(e){"use strict";return e("jira/components/inline-issue-create")});
//# sourceMappingURL=InlineIssueCreate-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:simpleissuelist', location = 'jira-issue-navigator-components-module/simpleissuelist/templates/endofstablesearch.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Components&&(JIRA.Components={}),"undefined"==typeof JIRA.Components.SimpleIssueList&&(JIRA.Components.SimpleIssueList={}),"undefined"==typeof JIRA.Components.SimpleIssueList.Templates&&(JIRA.Components.SimpleIssueList.Templates={}),JIRA.Components.SimpleIssueList.Templates.endStableSearch=function(e,s){return'<div class="end-of-stable-message"><p>'+soy.$$escapeHtml("Too many search results to display. Refine your search criteria and try again.")+"</p></div>"};;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:simpleissuelist', location = 'jira-issue-navigator-components-module/simpleissuelist/templates/issue.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Components&&(JIRA.Components={}),"undefined"==typeof JIRA.Components.SimpleIssueList&&(JIRA.Components.SimpleIssueList={}),"undefined"==typeof JIRA.Components.SimpleIssueList.Templates&&(JIRA.Components.SimpleIssueList.Templates={}),JIRA.Components.SimpleIssueList.Templates.issue=function(e,s){return'<li title="'+soy.$$escapeHtml(e.summary)+'" data-key="'+soy.$$escapeHtml(e.key)+'"><a class="splitview-issue-link" href="'+soy.$$escapeHtml(AJS.contextPath())+"/browse/"+soy.$$escapeHtml(e.key)+'"><span class="issue-link-key"><img height="16" width="16" alt="'+soy.$$escapeHtml(e.typeName)+'" title="'+soy.$$escapeHtml(e.typeName)+" - "+soy.$$escapeHtml(e.typeDescription)+'" src="'+soy.$$escapeHtml(e.typeIcon)+'" />&nbsp;'+soy.$$escapeHtml(e.key)+'</span><span class="issue-link-summary">'+soy.$$escapeHtml(e.summary)+"</span></a></li>"},JIRA.Components.SimpleIssueList.Templates.inaccessibleIssue=function(e,s){return'<li class="inaccessible-issue" data-key="'+soy.$$escapeHtml(e.key)+'">'+soy.$$escapeHtml("This issue can no longer be opened")+"</li>"};;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:simpleissuelist', location = 'jira-issue-navigator-components-module/simpleissuelist/templates/issuelist.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Components&&(JIRA.Components={}),"undefined"==typeof JIRA.Components.SimpleIssueList&&(JIRA.Components.SimpleIssueList={}),"undefined"==typeof JIRA.Components.SimpleIssueList.Templates&&(JIRA.Components.SimpleIssueList.Templates={}),JIRA.Components.SimpleIssueList.Templates.issueList=function(e,s){return'<div class="list-content"><ol class="issue-list"></ol></div>'};;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:simpleissuelist', location = 'jira-issue-navigator-components-module/simpleissuelist/templates/layout.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Components&&(JIRA.Components={}),"undefined"==typeof JIRA.Components.SimpleIssueList&&(JIRA.Components.SimpleIssueList={}),"undefined"==typeof JIRA.Components.SimpleIssueList.Templates&&(JIRA.Components.SimpleIssueList.Templates={}),JIRA.Components.SimpleIssueList.Templates.layout=function(i,s){return""+(i.isGinServerRenderApproachEnabled&&!i.isRouteLegacyPIN?'<div class="list-results-panel-nested"><div><div class="simple-issue-list"><div class="list-panel"><div class="list-ordering"></div><div class="search-results"></div></div></div></div><div class="end-of-stable-message-container"></div><div class="inline-issue-create-container"></div><div class="aui-group pagination-view count-pagination"><div class="refresh-container aui-item"></div><div class="pagination-container aui-item"></div></div></div>':'<div class="simple-issue-list"><div class="list-panel"><div class="list-ordering"></div><div class="search-results"></div></div><div class="end-of-stable-message-container"></div><div class="inline-issue-create-container"></div><div class="aui-group pagination-view count-pagination"><div class="refresh-container aui-item"></div><div class="pagination-container aui-item"></div></div></div>')},JIRA.Components.SimpleIssueList.Templates.loading=function(i,s){return'<div class="loading"></div>'};;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:simpleissuelist', location = 'jira-issue-navigator-components-module/simpleissuelist/templates/pagination.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Components&&(JIRA.Components={}),"undefined"==typeof JIRA.Components.SimpleIssueList&&(JIRA.Components.SimpleIssueList={}),"undefined"==typeof JIRA.Components.SimpleIssueList.Templates&&(JIRA.Components.SimpleIssueList.Templates={}),JIRA.Components.SimpleIssueList.Templates.pagination=function(e,a){var t='<div class="pagination" data-displayable-total="'+soy.$$escapeHtml(e.displayableTotal)+'">',s=5,n=Math.floor((e.displayableTotal-1)/e.pageSize),o=Math.floor(e.startIndex/e.pageSize),p=""+(e.hasQueryString?soy.$$filterNoAutoescape(e.searchQuery)+"&startIndex=":soy.$$filterNoAutoescape(e.searchQuery)+"?startIndex="),l=e.startIndex-e.pageSize;t+=(l>=0?'<a href="'+soy.$$escapeHtml(p)+soy.$$escapeHtml(l)+'" data-start-index="'+soy.$$escapeHtml(l)+'" class="icon icon-previous" title="'+soy.$$escapeHtml(AJS.format("Go to page {0} of {1}",o,n+1))+'"><span>&lt;&lt; '+soy.$$escapeHtml("Previous")+"</span></a>":"")+JIRA.Components.SimpleIssueList.Templates.numberLinksLogicBranch({startPage:o-Math.floor(s/2),endPage:o+Math.floor(s/2),lastPage:n,urlFragment:p,currentPage:o+1,maxPagesDisplayed:s,pageSize:e.pageSize,displayableTotal:e.displayableTotal});var i=Math.min(e.startIndex+e.pageSize,e.displayableTotal);return t+=(i<e.displayableTotal?'<a href="'+soy.$$escapeHtml(p)+soy.$$escapeHtml(i)+'" data-start-index="'+soy.$$escapeHtml(i)+'" class="icon icon-next" title="'+soy.$$escapeHtml(AJS.format("Go to page {0} of {1}",o+2,n+1))+'"><span>'+soy.$$escapeHtml("Next")+" &gt;&gt;</span></a>":"")+"</div>"},JIRA.Components.SimpleIssueList.Templates.numberLinksLogicBranch=function(e,a){return""+(e.lastPage<e.maxPagesDisplayed?JIRA.Components.SimpleIssueList.Templates.numberLinks(soy.$$augmentMap(e,{startPage:0,endPage:e.lastPage})):e.startPage<0?JIRA.Components.SimpleIssueList.Templates.numberLinks(soy.$$augmentMap(e,{startPage:0,endPage:e.endPage-e.startPage})):e.endPage>e.lastPage?JIRA.Components.SimpleIssueList.Templates.numberLinks(soy.$$augmentMap(e,{startPage:e.startPage-(e.endPage-e.lastPage),endPage:e.lastPage})):JIRA.Components.SimpleIssueList.Templates.numberLinks(e))},JIRA.Components.SimpleIssueList.Templates.numberLinks=function(e,a){var t="",s=e.endPage-e.startPage+1;if(s>1)for(var n=Math.round(s),o=0;o<n;o++){var p=o+e.startPage,l=p+1,i=p*e.pageSize,m=Math.min(i+e.pageSize,e.displayableTotal),r=""+soy.$$escapeHtml(AJS.format("Issues {0} - {1}",i+1,m));t+=" "+(l==e.currentPage?'<strong title="'+soy.$$escapeHtml(r)+'">'+soy.$$escapeHtml(l)+"</strong>":'<a href="'+soy.$$escapeHtml(e.urlFragment)+soy.$$escapeHtml(i)+'" data-page="'+soy.$$escapeHtml(l)+'" data-start-index="'+soy.$$escapeHtml(i)+'" title="'+soy.$$escapeHtml(r)+'">'+soy.$$escapeHtml(l)+"</a>")}return t};;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:simpleissuelist', location = 'jira-issue-navigator-components-module/simpleissuelist/templates/refresh.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Components&&(JIRA.Components={}),"undefined"==typeof JIRA.Components.SimpleIssueList&&(JIRA.Components.SimpleIssueList={}),"undefined"==typeof JIRA.Components.SimpleIssueList.Templates&&(JIRA.Components.SimpleIssueList.Templates={}),JIRA.Components.SimpleIssueList.Templates.refresh=function(e,s){return'<a href="#" class="refresh-table" title="'+soy.$$escapeHtml("Refresh results")+'"><span class="aui-icon aui-icon-small aui-iconfont-refresh-small">'+soy.$$escapeHtml("Refresh results")+"</span></a>"};;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:simpleissuelist', location = 'jira-issue-navigator-components-module/simpleissuelist/templates/amd-wrapper.js' */
define("jira/components/simpleissuelist/templates",function(){"use strict";return JIRA.Components.SimpleIssueList.Templates}),AJS.namespace("JIRA.Components.SimpleIssueList.Templates",null,require("jira/components/simpleissuelist/templates"));
//# sourceMappingURL=amd-wrapper-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:simpleissuelist', location = 'jira-issue-navigator-components-module/simpleissuelist/views/EndStableSearch.js' */
define("jira/components/simpleissuelist/views/endstablesearch",["require"],function(e){"use strict";var t=e("jira/components/libs/marionette-2.1.0"),s=e("jira/components/simpleissuelist/templates");return t.ItemView.extend({template:s.endStableSearch})});
//# sourceMappingURL=EndStableSearch-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:simpleissuelist', location = 'jira-issue-navigator-components-module/simpleissuelist/views/Issue.js' */
define("jira/components/simpleissuelist/views/issue",["require"],function(e){"use strict";var t=e("jira/components/libs/marionette-2.1.0"),i=e("jira/components/simpleissuelist/templates"),s=e("jira/issues/utils/issue-nav-render-state");return t.ItemView.extend({template:i.issue,ui:{link:"a"},events:{simpleClick:function(e){e.preventDefault(),this.trigger("select")}},serializeData:function(){var e=this.model;return{id:e.get("id"),key:e.get("key"),summary:e.get("summary"),typeName:e.get("type").name,typeDescription:e.get("type").description,typeIcon:e.get("type").iconUrl}},onRender:function(){s.shouldUseServerRenderedIssueListHtml()&&"boolean"==typeof this.template||this.unwrapTemplate()},highlight:function(){this.$el.addClass("focused"),this.focus(),this.scrollIntoView()},unhighlight:function(){this.$el.removeClass("focused")},scrollIntoView:function(){this.$el.scrollIntoViewForAuto()},focus:function(){this.ui.link.focus()}})});
//# sourceMappingURL=Issue-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:simpleissuelist', location = 'jira-issue-navigator-components-module/simpleissuelist/views/InaccessibleIssue.js' */
define("jira/components/simpleissuelist/views/inaccessibleissue",["require"],function(e){"use strict";var s=e("jira/components/simpleissuelist/views/issue"),i=e("jira/components/simpleissuelist/templates");return s.extend({template:i.inaccessibleIssue,triggers:{click:"select"},serializeData:function(){var e=this.model;return{key:e.get("key")}}})});
//# sourceMappingURL=InaccessibleIssue-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:simpleissuelist', location = 'jira-issue-navigator-components-module/simpleissuelist/views/IssueList.js' */
define("jira/components/simpleissuelist/views/issuelist",["require"],function(e){"use strict";function i(){return o.shouldUseServerRenderedIssueListHtml()?new d(arguments):new r(arguments)}var t=e("jira/components/libs/marionette-2.1.0"),s=e("jira/components/simpleissuelist/views/inaccessibleissue"),n=e("jira/components/simpleissuelist/views/issue"),l=e("jira/components/simpleissuelist/templates"),o=(e("jira/components/libs/underscore"),e("jira/issues/utils/issue-nav-render-state")),r=t.CompositeView.extend({template:l.issueList,onRender:function(){this.unwrapTemplate()},childViewContainer:"ol",getChildView:function(e){return e.get("inaccessible")?s:n},_initialEvents:function(){},onUpdate:function(){if(this.collection.selected){var e=this.children.findByModel(this.collection.selected);e&&e.highlight()}},update:function(e){this.collection=e,this.render(),this.triggerMethod("update")},updateIssue:function(e){var i=this.children.findByModel(e);if(i){this.removeChildView(i);var t=this.getChildView(e),s=this.collection.indexOf(e);this.addChild(e,t,s),this.triggerMethod("update")}},unselectIssue:function(e){if(this.collection){var i=this.collection.get(e);if(i){var t=this.children.findByModel(i);t&&t.unhighlight()}}},selectIssue:function(e){if(this.collection){var i=this.collection.get(e);if(i){var t=this.children.findByModel(i);t&&t.highlight()}}},scrollSelectedIssueIntoView:function(){if(this.collection){var e=this.collection.selected;if(e){var i=this.children.findByModel(e);i&&i.scrollIntoView()}}},focus:function(){!this.children||this.children.length<1||this.children.findByIndex(0).focus()}}),d=r.extend({template:void 0,el:".simple-issue-list .search-results",skipRender:!0,getTemplate:function(){return!this.skipRender&&l.issueList},initialize:function(){var e=this;this.$el=this.el="string"==typeof this.el?jQuery(this.el):this.el,this.$el.find("li").each(function(i){var t=jQuery(this),s=n.extend({el:t,template:!1});e.addChild({get:function(e){return this.attributes[e]},attributes:{id:parseInt(t.find("a.splitview-issue-link").attr("data-issue-id")),key:t.find("a.splitview-issue-link").attr("data-issue-key"),summary:t.find("span.issue-link-summary").text()}},s,i)})},onRender:function(){this.unwrapTemplate()},update:function(e){this.collection=e,o.shouldUseServerRenderedIssueListHtml()||(this.skipRender=!1),this.skipRender?this.skipRender=!1:this.render(),this.triggerMethod("update")},setElement:function(e){this.$el=e},findViewByIssueId:function(e){return this.children.find(function(i){return i.model.get("id")===e})},updateIssue:function(e){var i=this.findViewByIssueId(e.get("id"));if(i){this.removeChildView(i);var t=this.getChildView(e),s=this.collection.indexOf(e);this.addChild(e,t,s),this.triggerMethod("update")}},unselectIssue:function(e){if(this.collection){var i=this.collection.get(e);if(i){var t=this.findViewByIssueId(e);t&&t.unhighlight()}}},selectIssue:function(e){if(this.collection){var i=this.collection.get(e);if(i){var t=this.findViewByIssueId(e);t&&t.highlight()}}},scrollSelectedIssueIntoView:function(){if(this.collection){var e=this.collection.selected;if(e){var i=this.findViewByIssueId(e.get("id"));i&&i.scrollIntoView()}}}});return"undefined"!=typeof Proxy?new Proxy(i,{get:function(e,i){var t=o.shouldUseServerRenderedIssueListHtml()?d:r;return"function"==typeof t[i]?t[i].bind(t):t[i]}}):i});
//# sourceMappingURL=IssueList-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:simpleissuelist', location = 'jira-issue-navigator-components-module/simpleissuelist/views/Layout.js' */
define("jira/components/simpleissuelist/views/layout",["require"],function(e){"use strict";function n(){return r.shouldUseServerRenderedIssueListHtml()?new u(arguments):new o(arguments)}var t=e("jira/components/libs/marionette-2.1.0"),s=e("jira/components/simpleissuelist/templates"),i=e("jira/featureflags/feature-manager"),r=e("jira/issues/utils/issue-nav-render-state"),a="server"===i.getFlagValue("gin-new-render-approach"),o=t.LayoutView.extend({template:s.layout,regions:{pagination:".pagination-container",refresh:".refresh-container",searchResults:".search-results",orderBy:".list-ordering",endOfStableMessageContainer:".end-of-stable-message-container",inlineIssueCreateContainer:".inline-issue-create-container"},ui:{listPanel:".list-panel"},serializeData:function(){return{isGinServerRenderApproachEnabled:a,isRouteLegacyPIN:r.isRouteLegacyPIN()}},onRender:function(){a&&!r.isRouteLegacyPIN()&&this.unwrapTemplate()},showLoading:function(){this.ui.listPanel.addClass("loading")},hideLoading:function(){this.ui.listPanel.removeClass("loading")}}),u=o.extend({template:void 0,el:jQuery(".list-results-panel-nested"),getTemplate:function(){return!r.shouldUseServerRenderedIssueListHtml()&&s.layout},onRender:function(){}});return"undefined"!=typeof Proxy?new Proxy(n,{get:function(e,n){var t=r.shouldUseServerRenderedIssueListHtml()?u:o;return"function"==typeof t[n]?t[n].bind(t):t[n]}}):n});
//# sourceMappingURL=Layout-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:simpleissuelist', location = 'jira-issue-navigator-components-module/simpleissuelist/views/Loading.js' */
define("jira/components/simpleissuelist/views/loading",["require"],function(e){"use strict";var i=e("jira/components/libs/marionette-2.1.0"),t=e("jira/components/simpleissuelist/templates");return i.ItemView.extend({template:t.loading,onRender:function(){this.unwrapTemplate()}})});
//# sourceMappingURL=Loading-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:simpleissuelist', location = 'jira-issue-navigator-components-module/simpleissuelist/views/Pagination.js' */
define("jira/components/simpleissuelist/views/pagination",["require"],function(e){"use strict";var t=e("jira/components/libs/marionette-2.1.0"),i=e("jira/components/libs/uri"),n=e("jira/components/simpleissuelist/templates");return t.ItemView.extend({template:n.pagination,ui:{prev:".icon-previous",next:".icon-next",page:"a[data-page]"},triggers:{"click @ui.prev":"prev","click @ui.next":"next"},onRender:function(){this.unwrapTemplate()},events:{"click @ui.page":function(e){var t=e.target.getAttribute("data-page");e.preventDefault(),this.trigger("goto",parseInt(t,10)-1)}},update:function(e){this.collection=e,this.render()},serializeData:function(){if(this.collection){var e=new i(this.options.baseURL),t=e.query().length>0;return{startIndex:this.collection.state.pageSize*this.collection.state.currentPage,pageSize:this.collection.state.pageSize,searchQuery:e.toString(),hasQueryString:t,displayableTotal:this.collection.state.totalRecords}}}})});
//# sourceMappingURL=Pagination-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:simpleissuelist', location = 'jira-issue-navigator-components-module/simpleissuelist/views/Refresh.js' */
define("jira/components/simpleissuelist/views/refresh",["require"],function(e){"use strict";var i=e("jira/components/libs/marionette-2.1.0"),s=e("jira/components/simpleissuelist/templates");return i.ItemView.extend({template:s.refresh,triggers:{click:"refresh"},onRender:function(){this.unwrapTemplate()}})});
//# sourceMappingURL=Refresh-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:pager', location = 'jira-issue-navigator-components-module/pager/templates/pager.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Components&&(JIRA.Components={}),"undefined"==typeof JIRA.Components.Pager&&(JIRA.Components.Pager={}),"undefined"==typeof JIRA.Components.Pager.Templates&&(JIRA.Components.Pager.Templates={}),JIRA.Components.Pager.Templates.Pager=function(e,s){return'<ul class="pager"><li class="previous">'+(e.previousIssue&&1!=e.position?'<a data-id="'+soy.$$escapeHtml(e.previousIssue.id)+'" data-key="'+soy.$$escapeHtml(e.previousIssue.key)+'" href="'+soy.$$escapeHtml(AJS.contextPath())+"/browse/"+soy.$$escapeHtml(e.previousIssue.key)+'" rel="'+soy.$$escapeHtml(e.previousIssue.key)+'" title="'+soy.$$escapeHtml("Previous Issue")+" '"+soy.$$escapeHtml(e.previousIssue.key)+'\'"><span class="icon icon-page-prev"><span>'+soy.$$escapeHtml("Previous Issue")+" '"+soy.$$escapeHtml(e.previousIssue.key)+"'</span></span></a>":e.position&&e.resultCount?'<span class="icon icon-page-prev-deactivated" title="'+soy.$$escapeHtml("Not available - this is the first issue")+'"></span>':"")+'</li><li class="showing">'+(e.position&&e.resultCount?e.hasLoadedTotalCountFromServer?soy.$$escapeHtml(AJS.format("{0} of {1}",e.position,e.resultCount)):soy.$$escapeHtml(AJS.format("{0} of {1}+",e.position,e.resultCount)):"")+'</li><li class="next">'+(e.nextIssue&&e.position!=e.resultCount?'<a data-id="'+soy.$$escapeHtml(e.nextIssue.id)+'" data-key="'+soy.$$escapeHtml(e.nextIssue.key)+'" href="'+soy.$$escapeHtml(AJS.contextPath())+"/browse/"+soy.$$escapeHtml(e.nextIssue.key)+'" id="next-issue" rel="'+soy.$$escapeHtml(e.nextIssue.key)+'" title="'+soy.$$escapeHtml("Next Issue")+" '"+soy.$$escapeHtml(e.nextIssue.key)+'\'"><span class="icon icon-page-next"><span>'+soy.$$escapeHtml("Next Issue")+" '"+soy.$$escapeHtml(e.nextIssue.key)+"'</span></span></a>":e.position&&e.resultCount?e.isAtTheEndOfStableSearch?'<span class="icon icon-page-next-deactivated" title="'+soy.$$escapeHtml(AJS.format("Whoa, you\'\'ve got quite a few issues there. We can show you the first {0}, but you should refine your search to return fewer issues.",e.stableSearchCount))+'"></span>':'<span class="icon icon-page-next-deactivated" title="'+soy.$$escapeHtml("Not available - this is the last issue")+'"></span>':"")+"</li></ul>"};;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:pager', location = 'jira-issue-navigator-components-module/pager/templates/amd-wrapper.js' */
define("jira/components/pager/templates",function(){"use strict";return JIRA.Components.Pager.Templates}),AJS.namespace("JIRA.Components.Pager.Templates",null,require("jira/components/pager/templates"));
//# sourceMappingURL=amd-wrapper-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:pager', location = 'jira-issue-navigator-components-module/pager/views/PagerView.js' */
define("jira/components/pager/views/pager",["require"],function(e){"use strict";var s=e("jira/components/libs/marionette-2.1.0"),t=e("jira/components/pager/templates"),i=e("jira/components/utils/ajshelper");return s.ItemView.extend({getTemplate:function(){return!(!this.searchResults||!this.searchResults.selected)&&t.Pager},ui:{next:".next a",previous:".previous a",nextIcon:".next span.icon"},triggers:{"simpleClick @ui.next":"next","simpleClick @ui.previous":"previous"},update:function(e){this.searchResults=e,this.undelegateEvents(),this.render(),this.delegateEvents()},onRender:function(){if(this.searchResults&&this.searchResults.selected){var e=this.searchResults.getIssueAtGlobalIndex(this.searchResults.allIssues.length-1);e.id===this.searchResults.selected.id&&this.searchResults.isAtTheEndOfStableSearch()&&this.ui.nextIcon.tooltip({gravity:"ne"})}var s=i.activeShortcuts();s&&(s.j&&this.ui.next.length&&s.j._addShortcutTitle(this.ui.next),s.k&&this.ui.previous.length&&s.k._addShortcutTitle(this.ui.previous))},serializeData:function(){var e=this.searchResults,s=e.selected;if(s){var t=this.searchResults.getPositionOfIssueInSearchResults(this.searchResults.selected.id),i={position:t+1,resultCount:this.searchResults.getTotalIssuesInDb(),hasLoadedTotalCountFromServer:this.searchResults.hasLoadedTotalCount()},a=this.searchResults.getIssueAtGlobalIndex(t+1);a?i.nextIssue={id:a.id,key:a.key}:this.searchResults.isAtTheEndOfStableSearch()&&(i.isAtTheEndOfStableSearch=!0,i.stableSearchCount=this.searchResults.allIssues.length);var r=this.searchResults.getIssueAtGlobalIndex(t-1);return r&&(i.previousIssue={id:r.id,key:r.key}),i}}})});
//# sourceMappingURL=PagerView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:pager', location = 'jira-issue-navigator-components-module/pager/Pager.js' */
define("jira/components/pager",["require"],function(e){"use strict";var t=e("jira/components/pager/views/pager"),i=e("jira/components/libs/marionette-2.1.0");return i.ViewManager.extend({_buildSearchResults:function(e){this._destroySearchResults(),this.searchResults=e,this.listenTo(this.searchResults,{"select reset":function(){this.getView("view").update(this.searchResults)}})},_destroySearchResults:function(){this.searchResults&&(this.stopListening(this.searchResults),delete this.searchResults)},_buildView:function(){this.buildView("view",function(){var e=new t({el:this.el});return this.listenTo(e,{next:function(){this.trigger("next")},previous:function(){this.trigger("previous")}}),e})},initialize:function(e){this.el=e.el,this._buildView()},onDestroy:function(){i.ViewManager.prototype.onDestroy.call(this),this._destroySearchResults()},load:function(e){this._buildSearchResults(e)},update:function(e){this.load(e),this.getView("view").update(e)},show:function(e){this.hideView("view"),this.showView("view",function(){var i=new t({el:e});return this.listenTo(i,{next:function(){this.trigger("next")},previous:function(){this.trigger("previous")}}),i})}})});
//# sourceMappingURL=Pager-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-plugin:details-view-browser-metrics', location = 'content/js/views/details/services/Metrics.js' */
define("jira/issues/views/details/metrics",["internal/browser-metrics","jira/featureflags/feature-manager"],function(e,i){"use strict";function r(e){var i=window.performance.getEntriesByName(e);if(i.length>0){var r=i[0];return r}}var s=i.isFeatureEnabled("empanada.gin-in-spa"),a=i.getFlagValue("gin-new-render-approach"),n=i.isFeatureEnabled("add-feature-flag-variant-to-gin-detail-view-browser-metric"),t=i.isFeatureEnabled("gin-detail-view-enable-tti-before-legacy-issue-view"),u=i.isFeatureEnabled("gin.performance.quick-search.use-faster-default-query");return{viewIssue:function(){e.start({isInitial:!0,key:"jira.issue.view",ready:["#key-val",".issue-body-content"]})},startImprovedBrowserMetrics:function(i){var d=[];if(d.push(function(){return{isNewIssueViewEnabled:JIRA.Issues.Api.isNewIssueViewEnabled()}}),i&&!s){var o=r("issue-list-created");o&&d.push(function(){return{ttr:o.startTime}}),n&&d.push(function(){return{ginRenderApproachVariant:a}}),d.push(function(){return{isGinDetailViewTTIEventFiredBeforeLegacyIssueView:t}}),d.push(function(){return{pageVisible:!(window&&window.document&&window.document.hidden)}}),d.push(function(){return{isFasterDefaultQueryEnabled:u}}),e.start({isInitial:!0,key:"jira.issue.nav-detail-improved",reporters:d})}},endImprovedBrowserMetrics:function(){e.end({key:"jira.issue.nav-detail-improved"})},startLegacyIssueViewBrowserMetrics:function(){e.start({isInitial:!0,key:"jira.issue.nav-detail-legacy-issue-view"})},endLegacyIssueViewBrowserMetrics:function(){e.end({key:"jira.issue.nav-detail-legacy-issue-view"})}}});
//# sourceMappingURL=Metrics-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:detailslayout', location = 'jira-issue-navigator-components-module/lib/jquery.ui.sidebar.js' */
!function(t){t.widget("ui.sidebar",{version:"0.1",options:{minWidth:function(t){return 50},maxWidth:function(t){return window.innerWidth},resize:t.noop,easeOff:0},_create:function(){_.bindAll(this,"_handleDrag","_persist","_setContainment","_setHandlePosition","updatePosition"),this.options.easeOff&&(this.updatePosition=_.debounce(this.updatePosition,this.options.easeOff)),this.options.id||console.error("ui.sidebar: You must specify an id"),this._addHandle(),this._restore(),t(window).resize(_.debounce(this.updatePosition,30))},_restore:function(){if(window.localStorage){var t=localStorage.getItem("ui.sidebar."+this.options.id);t&&this._setWidth(t)}},_persist:function(){window.localStorage&&localStorage.setItem("ui.sidebar."+this.options.id,this.element.outerWidth())},_setContainment:function(){var t=window.innerHeight;this._elementLeft=this.element.offset().left,this._minLeft=this._elementLeft+this.options.minWidth(this),this._maxLeft=Math.max(this._minLeft,this._elementLeft+this.options.maxWidth(this)),this.handle.draggable({containment:[this._minLeft,t,this._maxLeft,t]})},_handleDrag:function(t,e){var i=e.position.left-this._elementLeft;this._setWidth(i,!0)},_setWidth:function(t,e){if(!e){var i=this.options.maxWidth(this),s=this.options.minWidth(this);t>i?t=i:t<s&&(t=s)}t-=this.element.outerWidth()-this.element.width(),this.element.width(t),this.options.resize(t)},_addHandle:function(){var e=document.createElement("div");e.setAttribute("class","ui-sidebar"),this.handle=t(e).appendTo(this.element),this.handle.draggable({axis:"x",drag:this._handleDrag,stop:this._persist}),this.handle.mousedown(this._setContainment),_.defer(this._setHandlePosition)},_setHandlePosition:function(){if(this._setContainment(),this._minLeft===this._maxLeft)this.handle.hide();else{var t=this.element.offset(),e=t.left+this.element.outerWidth();this.handle.css({top:t.top,left:e,height:this.element.outerHeight()}).show()}},updatePosition:function(){this._setHandlePosition(),this._setWidth(this.handle.offset().left-this._elementLeft),this._persist()}})}(jQuery);
//# sourceMappingURL=jquery.ui.sidebar-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:detailslayout', location = 'jira-issue-navigator-components-module/detailslayout/templates/detailslayout.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Components&&(JIRA.Components={}),"undefined"==typeof JIRA.Components.DetailsLayout&&(JIRA.Components.DetailsLayout={}),"undefined"==typeof JIRA.Components.DetailsLayout.Templates&&(JIRA.Components.DetailsLayout.Templates={}),JIRA.Components.DetailsLayout.Templates.container=function(e,s){return'<div class="details-layout"></div>'},JIRA.Components.DetailsLayout.Templates.layout=function(e,s){return'<div class="aui-group split-view"><div class="aui-item list-results-panel"></div>'+(e.isNewIssueViewEnabled?'<div class="aui-item detail-panel detail-panel-new-issue-view">':'<div class="aui-item detail-panel">')+'<div class="issue-container"></div><div class="tools-container"></div></div></div>'},JIRA.Components.DetailsLayout.Templates.empty=function(e,s){return'<div><div class="navigator-content empty-results"><div class="jira-adbox jira-adbox-medium no-results no-results-message"><h3>'+soy.$$escapeHtml("No issues were found to match your search")+'</h3><p class="no-results-hint">'+soy.$$filterNoAutoescape(AJS.format("Try modifying your search criteria or {0}creating a new issue{1}",'<a class="create-issue" href="'+AJS.contextPath()+'/secure/CreateIssue!default.jspa">',"</a>"))+"</p></div></div></div>"},JIRA.Components.DetailsLayout.Templates.loading=function(e,s){return'<div class="loading"></div>'},JIRA.Components.DetailsLayout.Templates.tools=function(e,s){return'<div class="issue-tools"><div class="pager-container"></div>'+(e.showExpand?'<button title="'+soy.$$escapeHtml(AJS.format("Expand issue ( {0} )",e.expandShortcutKey))+'" class="aui-button aui-button-subtle expand"><span class="aui-icon aui-icon-small aui-iconfont-focus">'+soy.$$escapeHtml(AJS.format("Expand issue ( {0} )",e.expandShortcutKey))+"</span></button>":"")+"</div>"};;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:detailslayout', location = 'jira-issue-navigator-components-module/detailslayout/templates/amd-wrapper.js' */
define("jira/components/detailslayout/templates",function(){"use strict";return JIRA.Components.DetailsLayout.Templates}),AJS.namespace("JIRA.Components.DetailsLayout.Templates",null,require("jira/components/detailslayout/templates"));
//# sourceMappingURL=amd-wrapper-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:detailslayout', location = 'jira-issue-navigator-components-module/detailslayout/controllers/Tools.js' */
define("jira/components/detailslayout/controllers/tools",["require"],function(t){"use strict";var e=t("jira/components/libs/marionette-2.1.0"),i=t("jira/components/pager"),o=t("jira/components/detailslayout/views/tools");return e.ViewManager.extend({initialize:function(t){this.showExpand=t.showExpand,this._buildTools(),this._buildPager()},show:function(t){this.toolsView.setElement(t),this.toolsView.render()},load:function(t){this.pager.update(t)},onDestroy:function(){this.pager.destroy(),e.ViewManager.prototype.onDestroy.call(this)},shiftTools:function(){this.toolsView.shiftTools()},_buildTools:function(){this.toolsView=this.buildView("toolsView",function(){var t=new o({showExpand:this.showExpand});return this.listenTo(t,{render:function(){t.pager._ensureElement(),this.pager.show(t.pager.$el)},expand:function(){this.trigger("expand")}}),t})},_buildPager:function(){this.pager=new i,this.listenTo(this.pager,{next:function(){this.trigger("pager:next")},previous:function(){this.trigger("pager:previous")}})}})});
//# sourceMappingURL=Tools-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:detailslayout', location = 'jira-issue-navigator-components-module/detailslayout/views/Container.js' */
define("jira/components/detailslayout/views/container",["require"],function(e){"use strict";function t(){return s.shouldUseServerRenderedIssueListHtml()?new r(arguments):new o(arguments)}var n=e("jira/components/libs/marionette-2.1.0"),i=e("jira/components/detailslayout/templates"),s=e("jira/issues/utils/issue-nav-render-state"),o=n.ItemView.extend({template:i.container,onRender:function(){this.unwrapTemplate()},showView:function(e){this.$el.append(e.$el)},showLoading:function(e){this.$el.prepend(e.$el)},hideLoading:function(e){e.$el.detach()}}),r=o.extend({template:!1,el:".details-layout",skipLoadingOverlay:!0,onRender:function(){},showLoading:function(e){s.shouldUseServerRenderedIssueListHtml()||(this.skipLoadingOverlay=!1),this.skipLoadingOverlay||this.$el.prepend(e.$el)},hideLoading:function(e){this.skipLoadingOverlay?this.skipLoadingOverlay=!1:e.$el.detach()}});return"undefined"!=typeof Proxy?new Proxy(t,{get:function(e,t){if("prototype"===t)return s.shouldUseServerRenderedIssueListHtml()?r.prototype:o.prototype}}):t});
//# sourceMappingURL=Container-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:detailslayout', location = 'jira-issue-navigator-components-module/detailslayout/views/Empty.js' */
define("jira/components/detailslayout/views/empty",["require"],function(e){"use strict";var t=e("jira/components/libs/marionette-2.1.0"),n=e("jira/components/detailslayout/templates");return t.ItemView.extend({template:n.empty,onRender:function(){this.unwrapTemplate()}})});
//# sourceMappingURL=Empty-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:detailslayout', location = 'jira-issue-navigator-components-module/detailslayout/views/Tools.js' */
define("jira/components/detailslayout/views/tools",["require"],function(t){"use strict";var e=t("jira/components/libs/marionette-2.1.0"),i=t("jira/components/detailslayout/templates"),o=t("jira/ajs/keyboardshortcut/keyboard-shortcut");return e.LayoutView.extend({initialize:function(t){this.showExpand=t.showExpand},template:i.tools,regions:{pager:".pager-container"},ui:{issueTools:".issue-tools",expand:".expand"},triggers:{"click @ui.expand":"expand"},serializeData:function(){return{showExpand:this.showExpand||!1,expandShortcutKey:o.getKeyboardShortcutKeys("fullscreen.issue")}},onRender:function(){this.showExpand&&this.ui.expand.tooltip({gravity:"e"})},shiftTools:function(){this.ui.issueTools.css("margin","8px 24px 0px 0px")},onDestroy:function(){this.showExpand&&this.ui.expand.tooltip&&this.ui.expand.tooltip("hide")}})});
//# sourceMappingURL=Tools-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:detailslayout', location = 'jira-issue-navigator-components-module/detailslayout/views/Layout.js' */
var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e};define("jira/components/detailslayout/views/layout",["require"],function(e){"use strict";function t(){return r.shouldUseServerRenderedIssueListHtml()?new u(arguments):new o(arguments)}var i=e("jira/components/libs/marionette-2.1.0"),n=e("jira/components/detailslayout/templates"),s=e("jquery"),a=e("jira/featureflags/feature-manager"),r=e("jira/issues/utils/issue-nav-render-state"),o=i.LayoutView.extend(_extends({template:n.layout,onRender:function(){this.issuesList._ensureElement()},regions:{issuesList:".list-results-panel",issueComponent:".issue-container",tools:".tools-container"},ui:{detailPanel:".detail-panel"}},"server"===a.getFlagValue("gin-new-render-approach")&&{serializeData:function(){return{isNewIssueViewEnabled:JIRA.Issues.Api.isNewIssueViewEnabled()}}},{maximizeDetailPanelContents:function(){this.issueComponent.$el.css("maxWidth","none"),this.ui.detailPanel.css("margin","0")},maximizeDetailPanelHeight:function(){var e=this.ui.detailPanel.offset().top;this.ui.detailPanel.css("height",window.innerHeight-e)},showDraggable:function(){var e=0;this.issuesList.$el.sidebar({id:"layoutview-draggable",minWidth:function(){return 250},maxWidth:function(){return this.$el.width()-500}.bind(this),resize:function(t){t!==e&&(e=t,this.trigger("resize"))}.bind(this)})},updateDraggable:function(){this.issuesList.$el.sidebar("updatePosition")}})),u=o.extend({el:s(".details-layout > div > .split-view"),template:!1,onRender:function(){}});return"undefined"!=typeof Proxy?new Proxy(t,{get:function(e,t){if("prototype"===t)return r.shouldUseServerRenderedIssueListHtml()?u.prototype:o.prototype}}):t});
//# sourceMappingURL=Layout-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:detailslayout', location = 'jira-issue-navigator-components-module/detailslayout/views/Loading.js' */
define("jira/components/detailslayout/views/loading",["require"],function(e){"use strict";var t=e("jira/components/libs/marionette-2.1.0"),n=e("jira/components/detailslayout/templates");return t.ItemView.extend({template:n.loading,onRender:function(){this.unwrapTemplate()}})});
//# sourceMappingURL=Loading-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:detailslayout', location = 'jira-issue-navigator-components-module/detailslayout/DetailsLayout.js' */
define("jira/components/detailslayout",["require"],function(e){"use strict";function i(e,i,s){var t,n=i;return function(){var o=arguments;clearTimeout(t),t=setTimeout(function(){e.apply(this,o),n=i},n),n=s}}var s=e("jira/components/libs/underscore"),t=e("jira/components/issuecomponentresolver"),n=e("jira/components/libs/marionette-2.1.0"),o=e("jira/components/simpleissuelist"),r=e("jira/components/detailslayout/views/container"),u=e("jira/components/detailslayout/views/empty"),a=e("jira/components/detailslayout/views/layout"),d=e("jira/components/detailslayout/views/loading"),l=e("jira/components/detailslayout/controllers/tools"),h=e("jquery"),c=e("jira/featureflags/feature-manager"),g=e("jira/issues/views/details/metrics"),p=e("jira/issues/utils/issue-nav-render-state"),w="gin-new-render-approach",m=c.isFeatureEnabled("gin-detail-view-enable-tti-before-legacy-issue-view"),f=c.isFeatureEnabled("gin-analytics-to-support-tti-definition"),I=e("jira/analytics/web-client");return n.ViewManager.extend({isFirstPageLoad:!0,_buildIssueComponent:function(){var e=t.resolve(),s=this.options,n={};JIRA.Issues.Api.isNewIssueViewEnabled()&&(n.shouldRenderIssueHeader=!1);var o=this.issueComponent=new e(n);this._loadIssueInViewerComponent=i(function(e){o.loadIssue({id:e.id,key:e.key,detailView:!s.shouldUpdateCurrentProject}).always(function(){m&&this.isFirstPageLoad?(this.trigger("hideLoading",{triggerLegacyIssueViewTTI:!JIRA.Issues.Api.isNewIssueViewEnabled()}),this.isFirstPageLoad=!1):this.hideLoading()}.bind(this))}.bind(this),100,500),this.listenTo(o,{loadError:function(e){this.simpleIssueList.disableIssue(e.issueId),this.trigger("editorError")},loadComplete:function(e,i){this.adjustSize(),this.simpleIssueList.updateIssue(e.id,{key:e.get("entity").key,summary:e.get("entity").summary,status:e.get("entity").status.name});var s=JIRA.Issues.Api.isNewIssueViewEnabled();if(!s){var t={issueKey:e.get("entity").key,issueId:e.id,issueEditorOptions:i,projectId:e.get("projectId"),projectKey:e.get("projectKey"),projectType:e.get("projectType"),newIssueToggleValue:JIRA.Issues.Api.getNewIssueViewToggleValue()};i&&"issues-cache-refresh"===i.loadReason?this.trigger("editorLoadedFromCache",t):this.trigger("editorLoaded",t)}},fieldsLoaded:function(){this.trigger("editorFieldsLoaded")},saveSuccess:function(e){this.simpleIssueList.refreshIssue(e.issueId),this.trigger("editor:saveSuccess",{event:e.issueId,savedFieldIds:e.savedFieldIds,savedFieldTypes:e.savedFieldTypes,duration:e.duration})},editField:function(e){this.trigger("editor:editField",e)},editFieldCancel:function(e){this.trigger("editor:editFieldCancel",e)},linkToIssue:function(e){this.trigger("linkToIssue",e)},refineViewer:function(e){e.preventDefault(),this.updateIssueComponent(e.query)},linkInErrorMessage:function(e){e.preventDefault(),this.simpleIssueList.selectIssue(e.issueData.id)},individualPanelRendered:function(e){this.trigger("individualPanelRendered",e)}})},_buildSimpleIssueList:function(){this.simpleIssueList=new o({baseURL:this.baseURL,displayInlineIssueCreate:this.options.displayInlineIssueCreate}),this.listenTo(this.simpleIssueList,{select:function(e,i){if(f&&i&&!i.systemSelect){var s=this.searchResults.state.currentPage,t=this.searchResults.getPositionOfIssueInPage(e.id);i&&(i.manualSelect||i.usedKeyboardShortcut)?I.sendUIEvent({action:"selected",actionSubject:"card",actionSubjectId:"issueCard",source:"globalIssueNavigatorScreen",attributes:{navigatorScope:"global",currentPage:s,issueIndex:t,keyboardShortcut:!!i.usedKeyboardShortcut,direction:i.direction}}):i&&I.sendUIEvent({action:"clicked",actionSubject:"button",actionSubjectId:"issueViewNavigationButton",source:"globalIssueNavigatorScreen",attributes:{currentPage:s,issueIndex:t,direction:i.direction,viewLayout:"detail"}})}this.trigger("select",e)},update:function(){this.trigger("list:update")},refresh:function(){this.trigger("list:refresh")},sort:function(e){this.trigger("list:sort",e)},"list:select":function(e){this.trigger("list:select",{id:e.id,key:e.key,absolutePosition:e.absolutePosition,relativePosition:e.relativePosition})},"list:pagination":function(){this.trigger("list:pagination")},"before:loadpage":function(){this.showLoading()},"error:loadpage":function(e){this.hideLoading(),this.trigger("error:loadpage",e)},issueCreated:function(e){this.trigger("issueCreated",e)}})},_buildContainerView:function(){this.containerView=this.buildView("containerView",function(){var e=new r;return this.listenTo(e,{render:function(){p.shouldUseServerRenderedIssueListHtml()||this.getView("layoutView").render(),this.getView("emptyView").render(),this.getView("loadingView").render(),p.shouldUseServerRenderedIssueListHtml()||e.$el.prepend(this.getView("layoutView").$el)}}),e})},_buildEmptyView:function(){this.emptyView=this.buildView("emptyView",function(){var e;return e="function"==typeof this.options.emptyViewFactory?this.options.emptyViewFactory():new u,this.listenTo(e,{render:function(){this.containerView.$el.append(e.$el),this.adjustSize(),this.trigger("empty")}}),e})},_showEmptyView:function(e){p.computeNext({hasStartedRenderingEmptyView:!0}),this.layoutView.$el.detach(),this.containerView.$el.empty(),this.containerView.showView(this.emptyView),this.adjustSize();var i=e?{updateActiveView:!0}:void 0;this.trigger("empty",i),m&&this.isFirstPageLoad&&(this.isFirstPageLoad=!1),h("body").removeClass("page-type-split"),h("body").removeClass("with-individual-scrolling-enabled")},_buildTools:function(){this.tools=new l({showExpand:this.useExpand}),this.listenTo(this.tools,{expand:function(){this.trigger("expand")},"pager:next":function(){var e=this.selectNext();this.trigger("pager:next",e)},"pager:previous":function(){var e=this.selectPrevious();this.trigger("pager:previous",e)}})},_buildLayoutView:function(){this.layoutView=this.buildView("layoutView",function(){var e=new a;return p.shouldUseServerRenderedIssueListHtml()?(this.issueComponent.setContainer(e.issueComponent.$el),this.simpleIssueList.show(e.issuesList.$el),e.tools._ensureElement(),this.tools.show(e.tools.$el),this.listenTo(e,{resize:function(){this.adjustSize()}})):this.listenTo(e,{render:function(){e.issueComponent._ensureElement(),this.issueComponent.setContainer(e.issueComponent.$el),e.issuesList._ensureElement(),this.simpleIssueList.show(e.issuesList.$el),e.tools._ensureElement(),this.tools.show(e.tools.$el)},resize:function(){this.adjustSize()}}),e})},_buildLoadingView:function(){this.loadingView=this.buildView("loadingView",function(){return new d})},_buildComponents:function(){this._buildIssueComponent(),this._buildSimpleIssueList(),this._buildTools()},_buildViews:function(){this._buildLayoutView(),this._buildEmptyView(),this._buildLoadingView(),this._buildContainerView(),this.containerView.render()},initialize:function(e){this.baseURL=e.baseURL,this.useExpand=e.useExpand||!1,this._buildComponents(),this._buildViews(),this.listenToFrontendGlobalIssueNavIssueRemoval()},_showLoadingView:function(){this.containerView.showLoading(this.loadingView)},_hideLoadingView:function(){this.containerView.hideLoading(this.loadingView)},_showLayoutView:function(){this.emptyView.$el.detach(),p.shouldUseServerRenderedIssueListHtml()||this.containerView.showView(this.layoutView),this.layoutView.showDraggable(),this.adjustSize(),window.scrollTo(0,0),h("body").addClass("page-type-split"),h("body").addClass("with-individual-scrolling-enabled")},show:function(e){return p.shouldUseServerRenderedIssueListHtml()||e.replaceWith(this.containerView.$el),this.containerView.$el},onDestroy:function(){JIRA.Issues.Api.isNewIssueViewEnabled()&&AJS.$("body").off("remove-issue-from-search-list"),this.tools.destroy(),this.issueComponent.close(),this.simpleIssueList.destroy(),n.ViewManager.prototype.onDestroy.call(this)},showLoading:function(){this._showLoadingView()},hideLoading:function(){this.trigger("hideLoading"),this._hideLoadingView()},load:function(e,i,s){this.searchResults&&(this.stopListening(this.searchResults),delete this.searchResults),this.searchResults=e,this.listenTo(this.searchResults,{issueDeleted:function(){this.searchResults.length||this._showEmptyView()},"select selectIssueNotInList":function(e){this.showLoading(),m&&this.isFirstPageLoad&&(g.endImprovedBrowserMetrics(),this._hideLoadingView()),this._loadIssueInViewerComponent({id:e.id,key:e.get("key")})}}),this.searchResults.isEmptySearch()?this._showEmptyView(!!s):(this.simpleIssueList.load(this.searchResults,i,!!s),this.tools.load(this.searchResults),this._showLayoutView()),this.trigger("list:render")},listenToFrontendGlobalIssueNavIssueRemoval:function(){if(JIRA.Issues.Api.isNewIssueViewEnabled()){var e=this.simpleIssueList,i=AJS.$("body");i.on("remove-issue-from-search-list",function(i,s){e.removeIssue(s.issueId)})}},adjustSize:function(){s.defer(function(){var e="server"===c.getFlagValue(w),i=this.getView("layoutView");i&&(this.simpleIssueList.adjustSize(),e&&!p.isRouteLegacyPIN()||i.maximizeDetailPanelHeight(),this.issueComponent.applyResponsiveDesign(),i.updateDraggable(),!JIRA.Issues.Api.isNewIssueViewEnabled()||e&&!p.isRouteLegacyPIN()||i.maximizeDetailPanelContents());var s=this.tools.getView("toolsView");if(s&&JIRA.Issues.Api.isNewIssueViewEnabled()&&s.shiftTools(),this.getView("emptyView")){var t=this.getView("emptyView").$el,n=t.length&&t.offset().top;t.css("height",window.innerHeight-n)}}.bind(this))},refreshIssue:function(e){return this.simpleIssueList.refreshIssue(e),this.issueComponent.refreshIssue()},removeIssue:function(e){return this.showLoading(),this.simpleIssueList.removeIssue(e).always(function(){this.hideLoading()}.bind(this)).done(function(e){0===e&&this._showEmptyView()}.bind(this))},getActiveIssueId:function(){return this.issueComponent.getIssueId()},getActiveIssueKey:function(){return this.issueComponent.getIssueKey()},getActiveProjectId:function(){return this.issueComponent.getProjectId()},getActiveProjectKey:function(){return this.issueComponent.getProjectKey()},getActiveProjectType:function(){return this.issueComponent.getProjectType()},selectNext:function(e){return f?this.simpleIssueList.selectNext(e):this.simpleIssueList.selectNext()},selectPrevious:function(e){return f?this.simpleIssueList.selectPrevious(e):this.simpleIssueList.selectPrevious()},updateIssueComponent:function(e){this.showLoading(),this.listenToOnce(this.issueComponent,"loadComplete",function(){this.hideLoading()}),this.issueComponent.updateIssueWithQuery(e)},isLoading:function(){return this.issueComponent.isCurrentlyLoading()},hasSavesInProgress:function(){return"hasSavesInProgress"in this.issueComponent&&this.issueComponent.hasSavesInProgress()},canDismissComment:function(){return this.issueComponent.canDismissComment()},getEditorFields:function(){return"getFields"in this.issueComponent?this.issueComponent.getFields():void 0},abortPending:function(){return this.issueComponent.abortPending()},beforeHide:function(){return this.issueComponent.beforeHide()},beforeShow:function(){return this.issueComponent.beforeShow()},removeIssueMetadata:function(){return this.issueComponent.removeIssueMetadata()},editField:function(e){if("editField"in this.issueComponent)return this.issueComponent.editField(e)},focusList:function(){this.simpleIssueList.focus()},focusEditor:function(){this.issueComponent.focus()}})});
//# sourceMappingURL=DetailsLayout-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:browser-metrics', location = 'jira-issue-navigator-components-module/browser-metrics/reporters/performance-mark.js' */
define("jira/components/browser-metrics/reporters/performance-mark",function(){"use strict";return function(r){return function(e){var t={};if(!window.performance.mark)return t;if(!e.isInitial)return t;var n=window.performance.getEntriesByName(r);if(!(n.length>0))return t;var i=n[0];if(i.startTime<e.start||i.startTime>e.end)return t;var a,s=i.startTime-e.start,o=e.threshold,f=4*e.threshold;return a=s<=o?1:s<=f?.5:0,{readyForUser:s,apdex:a}}}});
//# sourceMappingURL=performance-mark-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:subnavigator', location = 'jira-projects-module/static/components/subnavigator/Subnavigator.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.Subnavigator"),JIRA.Projects.Subnavigator=JIRA.Projects.Libs.Marionette.Controller.extend({_shouldShow:function(){return!this.model.isEmpty()},_shouldShowTriggerView:function(){if(this.triggerView&&this.triggerView.isHidden)return!1;if(this.options.changeViewText){var i=this.model.getAllItems().length;return i>1}return!0},_sanitizeItems:function(){var i=this.options.itemGroups;return i&&i[0]&&!_.isArray(i[0])?[i]:i},_buildModel:function(){this.model=new JIRA.Projects.Subnavigator.Entities.Items({itemGroups:this._sanitizeItems()}),this.model.selectItem(this.options.selectedItem),this.listenTo(this.model,"change:selectedItem",this.show)},_buildTitleView:function(){"summary-options"===this.options.id?this.titleView=new JIRA.Projects.Subnavigator.Views.Title({model:this.model,fixedTitle:"Summary"}):this.titleView=new JIRA.Projects.Subnavigator.Views.Title({model:this.model}),this.titleView.setElement(AJS.$(this.options.titlePlaceholder))},_buildTriggerView:function(){"summary-options"===this.options.id?this.triggerView=new JIRA.Projects.Subnavigator.Views.SummaryTrigger({model:this.model,id:this.options.id,itemGroups:this.options.itemGroups,label:this.options.changeViewText}):this.options.changeViewText?(this.triggerView=new JIRA.Projects.Subnavigator.Views.StaticTrigger({model:this.model,id:this.options.id,label:this.options.changeViewText}),this.triggerView.isHidden="report"===this.options.id):this.triggerView=new JIRA.Projects.Subnavigator.Views.Trigger({model:this.model,id:this.options.id}),this.triggerView.setElement(AJS.$(this.options.triggerPlaceholder))},_buildContentView:function(){this.contentView=new JIRA.Projects.Subnavigator.Views.Content({model:this.model,id:this.options.id,hideSelectedItem:this.options.hideSelectedItem}),this.contentView.setElement(AJS.$(this.options.contentPlaceholder)),this.listenTo(this.contentView,"click",function(i){setTimeout(function(){this.model.selectItem(i);var t=this.model.get("selectedItem"),e=this.triggerPreventable("itemSelected",{item:t});e.isPrevented||t.link&&require("jira/util/browser").reloadViaWindowLocation(t.link)}.bind(this),0)}.bind(this))},initialize:function(){this._buildModel(),this._shouldShow()&&(this._buildTriggerView(),this._buildContentView(),this.options.titlePlaceholder&&this._buildTitleView())},show:function(){this._shouldShow()&&(this._shouldShowTriggerView()&&(this.triggerView.render(),this.contentView.render()),this.titleView&&this.titleView.render())},selectItem:function(i){this._shouldShow()&&this.model.selectItem(i)}})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:subnavigator', location = 'jira-projects-module/static/components/subnavigator/templates/templates.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Projects&&(JIRA.Projects={}),"undefined"==typeof JIRA.Projects.Subnavigator&&(JIRA.Projects.Subnavigator={}),"undefined"==typeof JIRA.Projects.Subnavigator.Templates&&(JIRA.Projects.Subnavigator.Templates={}),JIRA.Projects.Subnavigator.Templates.content=function(e,t){for(var a='<div id="subnav-opts'+(e.idSuffix?"-"+soy.$$escapeHtml(e.idSuffix):"")+'" class="subnav-opts subnavigator-content aui-dropdown2 aui-style-default">',i=e.itemGroups,s=i.length,r=0;r<s;r++){var o=i[r];a+=JIRA.Projects.Subnavigator.Templates.itemSection({items:o})}return a+="</div>"},JIRA.Projects.Subnavigator.Templates.itemSection=function(e,t){var a="";if(e.items.length>0){a+='<div class="aui-dropdown2-section"><ul class="aui-list-truncate">';for(var i=e.items,s=i.length,r=0;r<s;r++){var o=i[r];a+=JIRA.Projects.Subnavigator.Templates.item({item:o})}a+="</ul></div>"}return a},JIRA.Projects.Subnavigator.Templates.item=function(e,t){return"<li"+(e.item.description?' title="'+soy.$$escapeHtml(e.item.description)+'"':"")+">"+(e.item.link?'<a data-item-id="'+soy.$$escapeHtml(e.item.id)+'" href="'+soy.$$escapeHtml(e.item.link)+'">'+soy.$$escapeHtml(e.item.label)+"</a>":'<a class="aui-dropdown2-radio'+(e.item.selected?" checked":"")+'" data-item-id="'+soy.$$escapeHtml(e.item.id)+'">'+soy.$$escapeHtml(e.item.label)+"</a>")+"</li>"},JIRA.Projects.Subnavigator.Templates.tabbedTrigger=function(e,t){for(var a='<div class="aui-tabs horizontal-tabs aui-tabs-disabled"><ul class="tabs-menu summary-trigger">',i=e.itemGroups,s=i.length,r=0;r<s;r++){var o=i[r];a+='<li class="menu-item subnav-trigger subnavigator-trigger '+(e.selectedItem==o.id?" active-tab ":"")+'"><a href="summary/'+soy.$$escapeHtml(o.id)+'">'+soy.$$escapeHtml(o.label)+"</a></li>"}return a+="</ul></div>"},JIRA.Projects.Subnavigator.Templates.trigger=function(e,t){return""+(e.renderAsButton?'<button id="subnav-trigger'+(e.idSuffix?"-"+soy.$$escapeHtml(e.idSuffix):"")+'" class="subnav-trigger subnavigator-trigger aui-button aui-dropdown2-trigger" aria-owns="subnav-opts'+(e.idSuffix?"-"+soy.$$escapeHtml(e.idSuffix):"")+'" role="menu" aria-haspopup="true" >'+soy.$$escapeHtml(e.label)+"</button>":'<span id="subnav-trigger'+(e.idSuffix?"-"+soy.$$escapeHtml(e.idSuffix):"")+'" class="subnav-trigger subnavigator-trigger">'+soy.$$escapeHtml(e.label)+"</button>")},JIRA.Projects.Subnavigator.Templates.title=function(e,t){return'<span class="subnavigator-title" title="'+soy.$$escapeHtml(e.title)+'">'+soy.$$escapeHtml(e.title)+"</span>"};;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:subnavigator', location = 'jira-projects-module/static/components/subnavigator/views/Content.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.Subnavigator.Views.Content"),JIRA.Projects.Subnavigator.Views.Content=JIRA.Projects.Libs.Marionette.ItemView.extend({template:JIRA.Projects.Subnavigator.Templates.content,tooltipTimer:null,ui:{item:"li"},initialize:function(){this.tooltipTimeout=this.options.tooltipTimeout||600,this.hideSelectedItem=this.options.hideSelectedItem===!1},_hideTooltips:function(){clearTimeout(this.tooltipTimer),AJS.$(".tipsy").remove()},events:{"aui-dropdown2-item-check":function(t){this._hideTooltips();var i=AJS.$(t.target).attr("data-item-id");this.trigger("click",i)},"mouseenter @ui.item":function(t){this._hideTooltips(),this.tooltipTimer=setTimeout(function(){AJS.$(t.currentTarget).tipsy("show")},this.tooltipTimeout)},"mouseleave @ui.item":"_hideTooltips","aui-dropdown2-hide":"_hideTooltips"},serializeData:function(){var t=this.model.get("selectedItem"),i=this.model.get("itemGroups"),e=this.hideSelectedItem;return t&&(i=_.map(i,function(i){return e?_.map(i,function(i){var e=_.clone(i);return e.id===t.id&&(e.selected=!0),e}):_.reject(i,function(i){return i.id===t.id})})),{itemGroups:i,idSuffix:this.options.id||""}},onRender:function(){this.unwrapTemplate(),this._hideTooltips(),AJS.$(this.ui.item).tooltip({gravity:"w",trigger:"manual"})}})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:subnavigator', location = 'jira-projects-module/static/components/subnavigator/views/Trigger.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.Subnavigator.Views.Trigger"),JIRA.Projects.Subnavigator.Views.Trigger=JIRA.Projects.Libs.Marionette.ItemView.extend({template:JIRA.Projects.Subnavigator.Templates.trigger,serializeData:function(){return{label:this.model.get("selectedItem").label,renderAsButton:this.model.getAllItems().length>1,idSuffix:this.options.id||""}},onRender:function(){this.unwrapTemplate()}})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:subnavigator', location = 'jira-projects-module/static/components/subnavigator/views/StaticTrigger.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.Subnavigator.Views.StaticTrigger"),JIRA.Projects.Subnavigator.Views.StaticTrigger=JIRA.Projects.Subnavigator.Views.Trigger.extend({serializeData:function(){return{label:this.options.label,renderAsButton:!0,idSuffix:this.options.id||""}},onRender:function(){this.unwrapTemplate(),this.$el.removeClass("subnav-trigger")}})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:subnavigator', location = 'jira-projects-module/static/components/subnavigator/views/SummaryTrigger.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.Subnavigator.Views.SummaryTrigger"),JIRA.Projects.Subnavigator.Views.SummaryTrigger=JIRA.Projects.Subnavigator.Views.Trigger.extend({template:JIRA.Projects.Subnavigator.Templates.tabbedTrigger,serializeData:function(){return{selectedItem:this.options.model.attributes.selectedItem.id,itemGroups:this.options.itemGroups}},onRender:function(){this.unwrapTemplate(),this.$el.removeClass("subnav-trigger")}})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:subnavigator', location = 'jira-projects-module/static/components/subnavigator/views/Title.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.Subnavigator.Views.Title"),JIRA.Projects.Subnavigator.Views.Title=JIRA.Projects.Libs.Marionette.ItemView.extend({template:JIRA.Projects.Subnavigator.Templates.title,serializeData:function(){var e=this.model.get("selectedItem");return{title:this.options.fixedTitle||e.label}}})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:subnavigator', location = 'jira-projects-module/static/components/subnavigator/entities/Items.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.Subnavigator.Entities.Items"),JIRA.Projects.Subnavigator.Entities.Items=Backbone.Model.extend({defaults:{itemGroups:[],selectedItem:null},isEmpty:function(){return _.isEmpty(this.getAllItems())},selectItem:function(t){var e=this.getAllItems();this.set("selectedItem",_.find(e,function(e){return e.id===t})||_.first(e))},getAllItems:function(){return _.flatten(this.get("itemGroups"))}})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:libs-uri', location = 'js/libs/uri.js' */
define("jira/projectissuenavigator/libs/uri",["require"],function(i){"use strict";return i("atlassian/libs/uri-1.14.1")});
//# sourceMappingURL=uri-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:libs-underscore', location = 'js/libs/underscore.js' */
define("jira/projectissuenavigator/libs/underscore",["require"],function(e){"use strict";return e("underscore")});
//# sourceMappingURL=underscore-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:libs-backbone', location = 'js/libs/backbone.js' */
define("jira/projectissuenavigator/libs/backbone",["require"],function(e){"use strict";var r=e("backbone");return r});
//# sourceMappingURL=backbone-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:libs-marionette', location = 'js/libs/marionette.js' */
define("jira/projectissuenavigator/libs/marionette",["require"],function(e){"use strict";return e("jira/components/libs/marionette-2.1.0")});
//# sourceMappingURL=marionette-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:libs-ajshelper', location = 'js/libs/ajshelper.js' */
define("jira/projectissuenavigator/libs/ajshelper",[],function(){"use strict";var r=window.AJS;return{format:r.format.bind(r),trigger:r.trigger.bind(r),Meta:r.Meta}});
//# sourceMappingURL=ajshelper-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:apis', location = 'js/apis/projects.js' */
define("jira/projectissuenavigator/apis/projects",[],function(){"use strict";return window.JIRA.API.Projects});
//# sourceMappingURL=projects-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-plugin:metrics', location = 'content/js/util/metrics.js' */
define("jira/issues/navigator/metrics",["internal/browser-metrics","jira/components/browser-metrics/reporters/performance-mark","jira/featureflags/feature-manager"],function(e,s,i){"use strict";function r(e,s){for(var i=document.querySelectorAll(e),r=0;r<i.length;r++)i[r].classList.add(s);return i.length}function t(e){var s=window.performance.getEntriesByName(e);if(s.length>0){var i=s[0];return i}}var n=i.isFeatureEnabled("empanada.gin-in-spa");return{notifyIssueView:function(i){if(JIRA.Issues.Api.isNewIssueViewEnabled())AJS.$("body").trigger("global-issue-navigator-issue-selected");else if(i)e.start({key:"jira.issue.view",isInitial:!0,reporters:s("issue-container-rendered")}),e.end({key:"jira.issue.view"});else{var t="#key-val",n=".issue-body-content:not(.browser-metrics-stale)";r(n,"browser-metrics-stale"),e.start({key:"jira.issue.view",isInitial:!1,ready:[{selector:t,requireUpdate:!1},{selector:n,requireUpdate:!1}]})}},notifyIssueNavList:function(s){if(s&&!n){var i=[],r=t("issue-list-created");r&&i.push(function(){return{ttr:r.startTime}}),e.start({key:"jira.issue.nav-list",isInitial:!0,reporters:i}),e.end({key:"jira.issue.nav-list"})}},startNotifyIssueNavList:function(){var s=[];s.push(function(){return{isNewIssueViewEnabled:JIRA.Issues.Api.isNewIssueViewEnabled()}});var i=t("issue-list-created");i&&s.push(function(){return{ttr:i.startTime}}),s.push(function(){return{pageVisible:!(window&&window.document&&window.document.hidden)}}),e.start({key:"jira.issue.nav-list",isInitial:!0,reporters:s})},endNotifyIssueNavList:function(){e.end({key:"jira.issue.nav-list"})}}});
//# sourceMappingURL=metrics-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'templates/issuesearch.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Issues&&(JIRA.Issues={}),"undefined"==typeof JIRA.Issues.Projects&&(JIRA.Issues.Projects={}),"undefined"==typeof JIRA.Issues.Projects.IssueSearch&&(JIRA.Issues.Projects.IssueSearch={}),"undefined"==typeof JIRA.Issues.Projects.IssueSearch.Templates&&(JIRA.Issues.Projects.IssueSearch.Templates={}),JIRA.Issues.Projects.IssueSearch.Templates.defaultEmptyState=function(s,e){return'<div class="jira-adbox jira-adbox-medium no-results no-results-message"><h3>'+soy.$$escapeHtml("No issues were found to match your search")+'</h3><p class="no-results-hint">'+soy.$$escapeHtml("Try modifying your filter or creating a new issue below")+"</p></div>"},JIRA.Issues.Projects.IssueSearch.Templates.emptyState=function(s,e){return'<div><div class="navigator-content empty-results">'+soy.$$filterNoAutoescape(s.content)+'<div class="inline-issue-create-container"></div></div></div>'},JIRA.Issues.Projects.IssueSearch.Templates.issueCreatedFlag=function(s,e){var a="",t='<a class="issue-created-key issue-link" data-issue-key="'+s.issueKey+'" href="'+AJS.contextPath()+"/projects/"+s.projectKey+"/issues/"+s.issueKey+'">'+s.issueKey+" - "+s.summary+"</a>";return a+=AJS.format("{0} {1} has been successfully created.","Issue",t)},JIRA.Issues.Projects.IssueSearch.Templates.issueSearch=function(s,e){return s=s||{},'<div class="issue-search"><header class="'+soy.$$escapeHtml("aui-page-header"+(s.shouldShowBreadcrumbs?"contains-breadcrumbs":""))+'">'+(s.shouldShowBreadcrumbs?JIRA.Templates.Headers.breadcrumbs(null):"")+'<div class="aui-page-header-inner"><div class="aui-group aui-group-split"><div class="aui-item subnavigation"><h1><span id="issues-subnavigation-title" class="subnavigator-title"></span><span id="issues-subnavigation-trigger"></span></h1><span id="issues-subnavigation-content"></span></div><div class="aui-item"><div id="full-issue-navigator"><a href="'+soy.$$escapeHtml(AJS.contextPath())+'/issues/">'+soy.$$escapeHtml("Advanced search")+'</a></div></div></div></div></header><div class="details-layout"></div></div>'};;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'templates/issueview.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Issues&&(JIRA.Issues={}),"undefined"==typeof JIRA.Issues.Projects&&(JIRA.Issues.Projects={}),"undefined"==typeof JIRA.Issues.Projects.IssueView&&(JIRA.Issues.Projects.IssueView={}),"undefined"==typeof JIRA.Issues.Projects.IssueView.Templates&&(JIRA.Issues.Projects.IssueView.Templates={}),JIRA.Issues.Projects.IssueView.Templates.issueView=function(s,e){return s=s||{},'<div class="issue-view"><div class="navigation-tools"><div class="pager-container"></div>'+(s.showCollapse?'<button title="'+soy.$$escapeHtml(AJS.format("Collapse issue ( {0} )",s.collapseShortcutKey))+'" class="aui-button aui-button-subtle collapse"><span class="aui-icon aui-icon-small aui-iconfont-unfocus">'+soy.$$escapeHtml(AJS.format("Collapse issue ( {0} )",s.collapseShortcutKey))+"</span></button>":"")+'</div><div class="issue-container">'+(!s.showFrontendIssue&&s.serverRenderedViewIssue?JIRA.Components.IssueViewer.Templates.layout(s)+"<script data-defer-skip>\n                    if (window.performance && window.performance.mark) {\n                        window.performance.mark('issue-container-rendered');\n                    }\n                    </script>":"")+(s.showFrontendIssue?soy.$$filterNoAutoescape(s.boardFragmentHtml):"")+"</div></div>"},JIRA.Issues.Projects.IssueView.Templates.newIssueView=function(s,e){return s=s||{},'<div class="new-issue-view"><div class="navigation-tools"><div class="pager-container"></div>'+(s.showCollapse?'<button title="'+soy.$$escapeHtml(AJS.format("Collapse issue ( {0} )",s.collapseShortcutKey))+'" class="aui-button aui-button-subtle collapse"><span class="aui-icon aui-icon-small aui-iconfont-unfocus">'+soy.$$escapeHtml(AJS.format("Collapse issue ( {0} )",s.collapseShortcutKey))+"</span></button>":"")+'</div><div class="new-issue-container">'+soy.$$filterNoAutoescape(s.boardFragmentHtml)+"</div></div>"},JIRA.Issues.Projects.IssueView.Templates.simpleIssueView=function(s,e){return s=s||{},""+aui.page.document({windowTitle:s.windowTitle,content:'<div class="new-issue-view"><div class="navigation-tools"><div class="pager-container"></div></div><div class="new-issue-container">'+soy.$$filterNoAutoescape(s.fragmentHtml)+"</div></div>"})};;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/pages/issueview/FrontendBridge.js' */
!function(){var e=require("jquery"),r=new e.Deferred;define("jira/projectissuenavigator/pages/issueview/bridge",function(){return function(e){r.resolve(e)}}),define("jira/projectissuenavigator/pages/issueview/frontend",function(){return r.promise()})}();
//# sourceMappingURL=FrontendBridge-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/services/Analytics.js' */
define("jira/projectissuenavigator/services/analytics",["jira/analytics/web-client","jira/util/strings"],function(e,i){"use strict";var s=require("jira/projectissuenavigator/libs/ajshelper"),t=JIRA.API.Projects;return{filterSelect:function(e){s.trigger("analyticsEvent",{name:"jira.project.sidebar.issue.filter.select",data:{filterId:e.filterId,source:e.source}})},goToFullIssueNavigator:function(){s.trigger("analyticsEvent",{name:"jira.project.sidebar.issue.load.full.issue.nav"})},pinToGinFromAgility:function(){s.trigger("analyticsEvent",{name:"jira.frontend.fe.software.board.pin.to.gin"})},expandIssue:function(e){s.trigger("analyticsEvent",{name:"jira.project.sidebar.issue.expand",data:{source:e.source}})},collapseIssue:function(e){s.trigger("analyticsEvent",{name:"jira.project.sidebar.issue.collapse",data:{source:e.source}})},issueSelectedInList:function(e){s.trigger("analyticsEvent",{name:"jira.project.sidebar.issue.select.issue",data:{issueKey:e.key,source:"list",sameProject:!0}})},triggerProjectNavViewIssue:function(a){s.trigger("analyticsEvent",{name:"jira.project.sidebar.issue.view.issue",data:{issueId:a.issueId,projectId:a.projectId,projectType:a.projectType,issueMatchesProjectContext:null!=a.issueKey&&0===a.issueKey.indexOf(a.projectKey+"-"),analyticsSource:a.analyticsSource}}),e.sendPageEvent("viewIssueScreen"),e.sendTrackEvent({action:"viewed",actionSubject:"issue",actionSubjectId:a.issueId,containerType:"project",containerId:a.projectId,objectType:"issue",objectId:a.issueId,source:a.source,attributes:{analyticsSource:a.analyticsSource,projectType:a.projectType&&i.camelCase(a.projectType),designVersion:"v1-legacy",statusCategory:void 0,statusCategoryId:void 0,issueTypeId:void 0,nextGenProject:t&&"true"===t.isCurrentProjectSimplified(),newIssueToggleValue:JIRA.Issues.Api.getNewIssueViewToggleValue()}})},manageFilters:function(){s.trigger("analyticsEvent",{name:"jira.project.sidebar.issue.filter.manage"})},pager:function(e,i){s.trigger("analyticsEvent",{name:"jira.project.sidebar.issue.pager",data:{current:i.current,total:i.total,direction:e}})},editorFieldSaved:function(e){s.trigger("analyticsEvent",{name:"kickass.inlineEdit",data:{issueId:e.issueId,savedFieldIds:e.savedFieldIds,savedFieldTypes:e.savedFieldTypes,source:"jira.projectissuenav.global"}})},editFieldStarted:function(e){s.trigger("analyticsEvent",{name:"kickass.inlineEdit.start",data:{issueId:e.issueId,fieldId:e.fieldId,fieldType:e.fieldType,source:"jira.projectissuenav.global"}})},editFieldCancelled:function(e){s.trigger("analyticsEvent",{name:"kickass.inlineEdit.cancel",data:{issueId:e.issueId,fieldId:e.fieldId,fieldType:e.fieldType,source:"jira.projectissuenav.global"}})}}});
//# sourceMappingURL=Analytics-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/services/API.js' */
define("jira/projectissuenavigator/services/api",["require"],function(e){"use strict";function s(e){var s={};return e.forEach(function(e){s[e]=function(){return o[e].apply(o,arguments)}}),s}function u(){var e=s(["nextIssue","previousIssue","getActiveIssueId","getActiveIssueKey","refreshActiveIssue","refreshIssue","editField","getFields","isSaving","isLoading","hasAccessibleIssue","showLoadError","waitForSavesToComplete","viewSelectedIssue","returnToSearch","focusSearch","toggleFilterPanel","isQueryValid","isFullScreenIssueVisible","switchLayouts","openFocusShifter","toggleFullscreenIssue"],o);return e}function t(e){var s={viewSelectedIssue:function(){e.viewSelectedIssue()},nextIssue:function(){e.nextIssue()},returnToSearch:function(){e.returnToSearch()},focusSearch:function(){e.focusSearch()},toggleFilterPanel:function(){e.toggleFilterPanel()},isQueryValid:function(){return e.isQueryValid()},isFullScreenIssueVisible:function(){return e.isFullScreenIssueVisible()},switchLayouts:function(){e.switchLayouts()},openFocusShifter:function(){e.openFocusShifter()},waitForSavesToComplete:function(){e.waitForSavesToComplete()},prevIssue:function(){e.previousIssue()},getSelectedIssueId:function(){return e.getActiveIssueId()},getSelectedIssueKey:function(){return e.getActiveIssueKey()},refreshSelectedIssue:function(){return e.refreshActiveIssue()},editFieldOnSelectedIssue:function(s){return e.editField(s)},getFieldsOnSelectedIssue:function(){return e.getFields()},hasSavesInProgress:function(){return e.isSaving()},isCurrentlyLoadingIssue:function(){return e.isLoading()},isSelectedIssueAccessible:function(){return e.hasAccessibleIssue()},issueIsVisible:function(){return e.hasAccessibleIssue()},showInlineIssueLoadError:function(){return e.showLoadError()},updateIssue:function(s){return s=s||{},e.refreshIssue(s.id)},toggleFullscreenIssue:function(){e.toggleFullscreenIssue()}};JIRA&&JIRA.Issues&&JIRA.Issues.Api?i.extend(JIRA.Issues.Api,s):AJS.namespace("JIRA.Issues.Api",null,s)}var i=e("jira/projectissuenavigator/libs/underscore"),n=function(){},r={nextIssue:n,previousIssue:n,getActiveIssueId:n,getActiveIssueKey:n,refreshActiveIssue:n,refreshIssue:n,editField:n,getFields:n,isSaving:n,isLoading:n,hasAccessibleIssue:n,showLoadError:n,waitForSavesToComplete:n,viewSelectedIssue:n,returnToSearch:n,focusSearch:n,toggleFilterPanel:n,isQueryValid:n,isFullScreenIssueVisible:n,switchLayouts:n,openFocusShifter:n,toggleFullscreenIssue:n},o=r;return{getDefaultImplementation:function(){return i.clone(r)},init:function(){var e=u();t(e),AJS.namespace("JIRA.API.IssueSearch",null,e)},useImplementation:function(e){o=e}}});
//# sourceMappingURL=API-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/services/Browser.js' */
define("jira/projectissuenavigator/services/browser",function(){"use strict";return{getCurrentUrl:function(){return document.location.href},getReferrerUrl:function(){return document.referrer},hasPushState:function(){return!(!window.history||!window.history.pushState)},locationReplace:function(n){return window.location.replace(n)},locationAssign:function(n){return window.location.assign(n)},getDocument:function(){return document},scrollIntoView:function(n){var t=document.getElementById(n);t&&t.scrollIntoView()}}});
//# sourceMappingURL=Browser-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/services/Filters.js' */
define("jira/projectissuenavigator/services/filters",["require"],function(e){"use strict";function t(e){return o.indexBy(o.flatten(e),"id")}var i,r,a,s,n,l=e("wrm/context-path")(),o=e("jira/projectissuenavigator/libs/underscore"),c=e("wrm/data"),u=e("jira/projectissuenavigator/libs/ajshelper"),f=e("jira/projectissuenavigator/apis/projects");return{initialize:function(){var e=this;return new Promise(function(t,o){i=c.claim("com.atlassian.jira.jira-projects-issue-navigator:generic-filters"),r=c.claim("com.atlassian.jira.jira-projects-issue-navigator:project-filters"),a=c.claim("com.atlassian.jira.jira-projects-issue-navigator:can-manage-filters"),n=c.claim("com.atlassian.jira.jira-projects-issue-navigator:default-filter-priority"),s=f.getCurrentProjectId(),i?t():jQuery.get(l+"/rest/filters/1.0/filters?projectKey="+f.getCurrentProjectKey()).done(function(s){i=s["com.atlassian.jira.jira-projects-issue-navigator:generic-filters"]||[],r=s["com.atlassian.jira.jira-projects-issue-navigator:project-filters"]||[],a=s["com.atlassian.jira.jira-projects-issue-navigator:can-manage-filters"]||!1,n=s["com.atlassian.jira.jira-projects-issue-navigator:default-filter-priority"]||[e.getAllIssuesFilterId()],t()}).fail(function(e,t){return o(t)})})},getExtraLinks:function(){return[{id:"manage",label:"Filters",link:l+"/secure/ManageFilters.jspa?searchShareType=project&projectShare="+s+"&Search=Search&filterView=search"}]},getAvailableFilters:function(e){var t=[];return i&&i.length&&t.push(i),r&&r.length&&(t.push(r),e&&a&&t.push(this.getExtraLinks())),t},getDefaultFilterId:function(){return o.find(n,function(e){return!!o.findWhere(o.flatten(this.getAvailableFilters()),{id:e})}.bind(this))},getJQL:function(e,t,i){var r=o.findWhere(o.flatten(this.getAvailableFilters()),{id:e});if(r)return u.format(r.jql,t,i||r.defaultOrderby)},getAllIssuesFilterId:function(){return"allissues"},sanitiseFilter:function(e){return o.some(o.flatten(this.getAvailableFilters()),function(t){return t.id===e})?e:this.getDefaultFilterId()},filterSupportsInlineIssueCreate:function(e){var i=t(this.getAvailableFilters(!1)),r=i[e];return Boolean(r&&r.supportsInlineIssueCreate)}}});
//# sourceMappingURL=Filters-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/services/DialogsOverrider.js' */
define("jira/projectissuenavigator/services/dialogsoverrider",["require"],function(e){"use strict";function i(e){return function(){var i=n.current;e.trigger("quickEdit",{issueId:i.issueId,issueKey:i.issueKey,message:i.options.issueMsg||"thanks_issue_updated"})}}function s(e){return function(){var i=n.current;e.trigger("quickCreateSubtask",{issueId:i.issueId,issueKey:i.issueKey,message:i.options.issueMsg||"thanks_issue_updated"})}}function t(e,i,s){return function(t,o,n){if(n){if(n.issueId=i(n),n.issueKey=s(n),"undefined"==typeof n.isIssueDialog)return;n.isIssueDialog()&&"clone-issue-dialog"!==n.options.id&&(n._performRedirect=function(){this.redirected=!1},n.options.onDialogFinished=function(){n.hide();var i;i="delete-issue-dialog"===n.options.id?"issueDelete":"issueUpdate",e.trigger(i,{issueId:n.issueId,issueKey:n.issueKey,message:n.options.issueMsg||"thanks_issue_updated"})})}}}function o(){return function(){r("body").css("overflow","")}}var n=e("jira/dialog/dialog"),u=e("jira/util/events"),a=e("jira/dialog/form-dialog"),r=e("jquery"),d=e("jira/dialog/labels-dialog"),l=e("jira/projectissuenavigator/libs/marionette");return l.Object.extend({_overrideLabelsDialogSubmitResponse:function(){this.oldLabelsDialogSubmitReponse=d.prototype._handleSubmitResponse,d.prototype._handleSubmitResponse=function(){return a.prototype._handleSubmitResponse.apply(this,arguments)},this.currentLabelsDialogSubmitResponse=d.prototype._handleSubmitResponse},_restoreLabelsDialogSubmitResponse:function(){d.prototype._handleSubmitResponse===this.currentLabelsDialogSubmitResponse&&(d.prototype._handleSubmitResponse=this.oldLabelsDialogSubmitReponse)},initialize:function(e){this._overrideLabelsDialogSubmitResponse(),this.handlerDialogShow=t(this,e.getIssueId,e.getIssueKey),this.handlerDialogHide=o(this,e.getIssueId,e.getIssueKey),u.bind("Dialog.show",this.handlerDialogShow),u.bind("Dialog.hide",this.handlerDialogHide),this.handlerQuickEditSuccess=i(this),u.bind("QuickEdit.sessionComplete",this.handlerQuickEditSuccess),this.handlerQuickCreateSubtaskSuccess=s(this),u.bind("QuickCreateSubtask.sessionComplete",this.handlerQuickCreateSubtaskSuccess)},destroy:function(){this._restoreLabelsDialogSubmitResponse(),u.unbind("Dialog.show",this.handlerDialogShow),u.unbind("Dialog.hide",this.handlerDialogHide),u.unbind("QuickEdit.sessionComplete",this.handlerQuickEditSuccess),u.unbind("QuickCreateSubtask.sessionComplete",this.handlerQuickCreateSubtaskSuccess)}})});
//# sourceMappingURL=DialogsOverrider-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/services/DialogsCleaner.js' */
define("jira/projectissuenavigator/services/dialogscleaner",["require"],function(e){"use strict";var r=e("jira/dialog/dialog");return{clean:function(){r.current&&r.current.hide()}}});
//# sourceMappingURL=DialogsCleaner-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/services/FocusShifter.js' */
define("jira/projectissuenavigator/services/focusshifter",["require"],function(e){"use strict";function i(e){return s.chain(e.models).filter(function(e){return"comment"!==e.id&&e.isEditable()}).map(function(e){return{label:e.getLabel(),value:e.id}}).value()}function t(e){return function(){var t=e.getFields(),r=t?i(t):[];return{id:"edit-fields",name:"Edit Fields",context:e.getIssueKey(),weight:100,getSuggestions:function(){return(new n.Deferred).resolve(r)},onSelection:function(i){var t=e.getFields().get(i);e.editField(t)}}}}var r=e("jira/projectissuenavigator/libs/marionette"),n=e("jquery"),s=e("jira/projectissuenavigator/libs/underscore"),o=e("jira/shifter");return r.Object.extend({initialize:function(e){this.provider=t(e),o.register(this.provider)},onDestroy:function(){o.unregister(this.provider)},show:function(){o.show()}})});
//# sourceMappingURL=FocusShifter-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/services/InlineIssueCreate.js' */
define("jira/projectissuenavigator/services/inline-issue-create",["require"],function(e){"use strict";var i=e("jira/components/inline-issue-create");return i});
//# sourceMappingURL=InlineIssueCreate-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/services/JiraEvents.js' */
define("jira/projectissuenavigator/services/jiraevents",["require"],function(e){"use strict";var i=e("jira/util/events"),t=e("jira/util/events/types"),r=e("jira/components/issueviewer/eventtypes"),n=e("jira/util/events/reasons"),s=e("jquery"),g=e("jira/projectissuenavigator/libs/marionette");return g.Object.extend({initialize:function(){this.deferredEvents=[],this.isDeferring=!0,s(function(){setTimeout(this._drainDeferredEvents.bind(this),0)}.bind(this))},triggerNewContentAddedFromPanelRefreshed:function(e){this.trigger(t.NEW_CONTENT_ADDED,[s(e),n.panelRefreshed])},triggerRefreshIssuePage:function(e){this.trigger(r.ISSUE_REFRESHED,[e])},triggerNewContentAddedFromPageLoad:function(e){this.trigger(t.NEW_CONTENT_ADDED,[s(e),n.pageLoad])},triggerRefreshToggleBlocks:function(e){this.trigger(t.REFRESH_TOGGLE_BLOCKS,[e])},triggerPanelRefreshed:function(e,i,t){this.trigger(r.PANEL_REFRESHED,[e,i,t])},_drainDeferredEvents:function(){this.isDeferring=!1,this.deferredEvents.forEach(function(e){this.trigger(e[0],e[1])}.bind(this)),this.deferredEvents.length=0},trigger:function(e,t){this.isDeferring?this.deferredEvents.push([e,t]):i.trigger(e,t)}})});
//# sourceMappingURL=JiraEvents-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/services/KeyboardShortcuts.js' */
define("jira/projectissuenavigator/services/keyboardshortcuts",["require"],function(e){"use strict";function i(){return u(n.getDocument()).find("div.aui-blanket").length>0}function t(e){return e.which===u.ui.keyCode.LEFT||e.which===u.ui.keyCode.RIGHT}function r(){return!s.areKeyboardShortcutsDisabled()}function o(e){if(r()&&!i()&&t(e)){var o=u(e.target),n=o.is(":not(:input)");(null==o||n)&&(e.which===u.ui.keyCode.LEFT?this.trigger("focusIssueList"):e.which===u.ui.keyCode.RIGHT&&this.trigger("focusIssueEditor"))}}var n=e("jira/projectissuenavigator/services/browser"),u=e("jquery"),s=e("jira/ajs/keyboardshortcut/keyboard-shortcut-toggle"),c=e("jira/projectissuenavigator/libs/marionette");return c.Object.extend({initialize:function(){u(n.getDocument()).on("keydown",o.bind(this))}})});
//# sourceMappingURL=KeyboardShortcuts-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/services/LinksCapturer.js' */
define("jira/projectissuenavigator/services/linkscapturer",["require"],function(i){"use strict";var e=i("jquery"),t=i("jira/projectissuenavigator/libs/marionette");return t.Object.extend({initialize:function(i){i=i||{},this.el=e(i.el),this.linkHandler=function(){this.trigger("linkToFullIssueNavigator")}.bind(this),this.linkToFullIssueNavigator()},linkToFullIssueNavigator:function(){this.el.on("click","#full-issue-navigator",this.linkHandler)},destroy:function(){this.el.off("click","#full-issue-navigator",this.linkHandler)}})});
//# sourceMappingURL=LinksCapturer-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/services/Metrics.js' */
define("jira/projectissuenavigator/services/metrics",["require"],function(e){"use strict";var s=e("internal/browser-metrics"),r=e("jira/components/browser-metrics/reporters/performance-mark");return{startIssueView:function(){s.start({key:"jira.project.issue.view-issue"})},startIssueSearch:function(){s.start({key:"jira.project.issue.nav-detail"})},markIssueViewFromPageLoad:function(){s.start({key:"jira.project.issue.view-issue",isInitial:!0,reporters:r("issue-container-rendered")}),s.end({key:"jira.project.issue.view-issue"})},startIssueSearchFromPageLoad:function(){s.start({key:"jira.project.issue.nav-detail",isInitial:!0})},endIssueView:function(){s.end({key:"jira.project.issue.view-issue"})},endIssueSearch:function(){s.end({key:"jira.project.issue.nav-detail"})}}});
//# sourceMappingURL=Metrics-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/services/Notifications.js' */
define("jira/projectissuenavigator/services/notifications",["require"],function(t){"use strict";var e=t("jira/message"),s=t("jira/projectissuenavigator/libs/ajshelper"),a={thanks_issue_updated:"{0} has been updated.",thanks_issue_transitioned:"{0} has been updated.",thanks_issue_assigned:"{0} has been assigned.",thanks_issue_commented:"{0} has been updated with your comment.",thanks_issue_worklogged:"Work has been logged on {0}.",thanks_issue_voted:"Your vote on {0} has been updated.",thanks_issue_watched:"Your watcher status on {0} has been updated.",thanks_issue_moved:"{0} has been moved.",thanks_issue_linked:"The links on {0} have been updated.",thanks_issue_cloned:"{0} has been cloned.",thanks_issue_labelled:"The labels on {0} have been updated.",thanks_issue_deleted:"{0} has been deleted.",thanks_issue_attached:"The file(s) have been attached to {0}."};return{show:function(t,n){var i=a[t||"thanks_issue_updated"];i&&n&&(i=s.format(i,n)),e.showSuccessMsg(i||t,{closeable:!0})}}});
//# sourceMappingURL=Notifications-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/services/Router.js' */
define("jira/projectissuenavigator/services/router",["require"],function(e){"use strict";var r=e("jira/projectissuenavigator/libs/backbone"),t=e("jira/projectissuenavigator/services/urlhelper"),i=e("jira/projectissuenavigator/services/browser"),s=e("jira/util/data/meta"),a=e("wrm/context-path")(),o=e("jira/projectissuenavigator/libs/uri"),n=e("jira/projectissuenavigator/libs/underscore");return r.Router.extend({initialize:function(){this._isFirstLoad=!0,this.route(/.*/,function(){var e=t.extractStateFromCurrentUrl(),r={issue:e.issue,filter:e.filter,orderby:e.orderby,startIndex:e.startIndex,project:e.project,referrer:e.referrer},i=function(e,t){this._isFirstLoad?(this._isFirstLoad=!1,this.trigger(t,r)):this.trigger(e,r)}.bind(this);t.isBrowseUrl()?i("route:browse","route:browse:initial"):i("route:issues","route:issues:initial")})},updateURL:function(e){e=e||{},this._updatePermalinkState(e);var r={issue:e.issue,project:e.project,filter:e.filter,orderby:e.orderby},s=e.isIssueView?t.generateBrowseUrl(r):t.generateUrl(r),a=new o(s),u=new o(i.getCurrentUrl()),l=new o({path:u.path(),query:u.query(),fragment:u.fragment()});a.equals(l)||(e.keepParameters&&(a.search(n.extend(l.search(!0),a.search(!0))),a.hash(l.hash()),s=a.toString()),this.navigate(s,{trigger:!1,replace:!!e.replaceHistory}))},goTo:function(e){e=e||{},i.locationAssign(t.generateUrl({project:e.project,issue:e.issue,filter:e.filter,orderby:e.orderby}))},_getBaseurl:function(){return o.build(n.extend(n.pick(o.parse(i.getCurrentUrl()),"protocol","hostname","port","username","password"),{path:a}))},_getServerBaseurl:function(){var e=s.get("jira-base-url");return e?e:this._getBaseurl()},_updatePermalinkState:function(e){e.issue&&s.set("viewissue-permlink",new o(this._getServerBaseurl()+"/browse/"+e.issue).normalize().toString())},start:function(){var e=t.generateRootUrl(),s=i.hasPushState(),a=t.getApplicationUrl(),o=a&&!t.isHashUrl();return!s&&o?void i.locationReplace(e+a.replace(/^\//,"#")):void r.history.start({root:"",pushState:!0})}})});
//# sourceMappingURL=Router-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/services/Traces.js' */
define("jira/projectissuenavigator/services/traces",function(){"use strict";return{traceListLoaded:function(){JIRA.trace("sidebarissuenavigator.list.loaded"),JIRA.trace("jira.search.finished")},traceEditorLoaded:function(){JIRA.trace("sidebarissuenavigator.editor.loaded")},traceEditorFieldsLoaded:function(){JIRA.trace("sidebarissuenavigator.editorfields.loaded")},traceEditorError:function(){JIRA.trace("sidebarissuenavigator.editor.error")},traceIssueViewRender:function(){JIRA.trace("jira.project.issueview.render")},traceIssueUpdated:function(){JIRA.trace("jira.issue.update")}}});
//# sourceMappingURL=Traces-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/services/URLHelper.js' */
define("jira/projectissuenavigator/services/urlhelper",["require"],function(r){"use strict";function e(r,e){var t=r.search(!0).filter;e.filter=t||null}function t(r,e){var t=r.search(!0).orderby;e.orderby=t||null}function n(r,e){var t=r.filename();t&&(e.issue=t)}function i(r,e){var t=r.search(!0).startIndex;e.startIndex=t||null}function a(r,e){var t=r.search(!0).referrer;e.referrer=t||null}function s(r){var e=new l("");return r.issue&&e.filename(r.issue),r.filter?e.setSearch("filter",r.filter):e.removeSearch("filter"),r.orderby?e.setSearch("orderby",r.orderby):e.removeSearch("orderby"),e.toString()}function o(r){var e=new l("");return r&&e.path(u+"/projects/"+r+"/issues"),e.toString()}var u=r("wrm/context-path")(),c=r("jira/projectissuenavigator/services/browser"),l=r("jira/projectissuenavigator/libs/uri");return{extractProjectKeyFromCurrentUrl:function(){var r,e=new l(c.getCurrentUrl()).pathname();return r=this.isBrowseUrl(e)?e.match(/\/([A-Z0-9]+)\-[0-9]+$/):e.match(/\/projects\/([^\/]+?)\/issues/),r?r[1]:null},extractIssueKeyFromCurrentUrl:function(){var r=new l(c.getCurrentUrl()).pathname(),e=r.match(/\/([A-Z0-9]+\-[0-9]+)$/);return e?e[1]:null},generateUrl:function(r){var e=o(r.project),t=s(r),n=c.hasPushState()?"/":"#";return e+n+t},generateBrowseUrl:function(r){var e=new l("");e.path(u+"/browse/");var t=s(r);return e.toString()+t},extractStateFromCurrentUrl:function(){var r=new l(this.getApplicationUrl());this.isHashUrl()&&(r=new l(r.fragment()));var s={};return e(r,s),t(r,s),n(r,s),i(r,s),a(r,s),s.project=this.extractProjectKeyFromCurrentUrl(),s},generateRootUrl:function(r){return r=r||this.extractProjectKeyFromCurrentUrl(),o(r)},getApplicationUrl:function(){var r=c.getCurrentUrl(),e=new RegExp(this.isBrowseUrl(r)?"^.*/browse/":"^.*"+this.generateRootUrl());return r.replace(e,"")},isBrowseUrl:function(r){return r=r||c.getCurrentUrl(),r.indexOf("/browse/")>-1},isHashUrl:function(){var r=this.getApplicationUrl(),e=r.match(/^#/);return!!e},getAnchor:function(){return new l(c.getCurrentUrl()).fragment()},isReferrerUrl:function(r){return r.test(c.getReferrerUrl())},isRapidBoardReferred:function(){return this.isReferrerUrl(/\/secure\/rapidboard\.jspa/i)}}});
//# sourceMappingURL=URLHelper-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/pages/issueview/views/IssueView.js' */
define("jira/projectissuenavigator/pages/issueview/views/issue",["require"],function(e){"use strict";var i=e("jira/projectissuenavigator/libs/marionette"),t=e("jira/projectissuenavigator/pages/issueview/templates");return i.LayoutView.extend({template:t.issueView,className:"wrapper",rendered:!1,ui:{collapse:".collapse"},regions:{issueContainer:".issue-container",pager:".pager-container"},triggers:{"click @ui.collapse":{event:"collapse",preventDefault:!1,stopPropagation:!1}},maximizeHeight:function(){this.$el.css("height",window.innerHeight-this.$el.offset().top)},onRender:function(){this.ui.collapse.tooltip({gravity:"e"}),this.unwrapTemplate(this.className),this.rendered=!0},onDestroy:function(){this.ui.collapse.tooltip&&this.ui.collapse.tooltip("hide")},attach:function(e){this.setElement(e),this.bindUIElements(),this.triggerMethod("render")},templateHelpers:function(){return this.options}})});
//# sourceMappingURL=IssueView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/pages/issueview/IssueView.js' */
define("jira/projectissuenavigator/pages/issueview",["require"],function(e){"use strict";var s=e("jira/projectissuenavigator/libs/underscore"),t=e("jira/projectissuenavigator/services/dialogsoverrider"),i=e("jira/projectissuenavigator/services/focusshifter"),n=e("jira/components/issuecomponentresolver"),r=e("jira/projectissuenavigator/pages/issueview/views/issue"),o=e("jira/components/issueviewer/templates"),u=e("jira/flag"),a=e("jquery"),c=e("jira/ajs/keyboardshortcut/keyboard-shortcut"),h=e("jira/projectissuenavigator/libs/marionette"),d=e("jira/projectissuenavigator/services/metrics"),l=e("jira/projectissuenavigator/services/notifications"),g=e("jira/components/pager"),p=e("jira/projectissuenavigator/services/traces"),f=e("wrm/data"),I=e("jira/components/analytics-tracker/tracker");return h.Object.extend({initialize:function(e){this.showCollapse=e.showCollapse||!1,this.state=e.state,this._buildIssueView(),this._buildIssueComponent(),this._buildDialogsOverrider(),this._buildFocusShifter(),this._buildPager()},onDestroy:function(){this.issueComponent.close(),this.issueView.destroy(),this.dialogsOverrider.destroy(),this.focusShifter.destroy(),this._destroyPager(),this.el&&this.el.remove()},_destroyPager:function(){this.pager&&(this.pager.destroy(),this.stopListening(this.pager),delete this.pager)},render:function(){this.issueView.render(),this.el=this.issueView.$el},attach:function(e){this.issueView.attach(e),this.el=this.issueView.$el},loadFromPage:function(e){return this._updateState(e),this._updateURL(e),this._updatePager(),this.issueComponent.loadIssueRenderedByTheServer({key:e,project:{id:f.claim("projectId"),key:f.claim("projectKey"),projectType:f.claim("projectType")},detailView:!1})},load:function(e){return this._updateState(e),this._updateURL(e),this._updatePager(),this.issueComponent.loadIssue({key:e,detailView:!1})},_updateURL:function(e){this.trigger("updateUrl",{issueKey:e})},_updatePager:function(){var e=this.state.get("searchResults"),s=this.state.get("issue");e&&e.hasIssueInSearch(s)?(e.selected&&e.selected.get("key")===s||e.select(s),this.pager.update(e)):this._destroyPager()},_updateState:function(e){this.state.set("issue",e)},adjustSize:function(){this.issueView.maximizeHeight(),this.issueComponent.applyResponsiveDesign()},_buildIssueView:function(){this.issueView=new r({showCollapse:this.showCollapse,collapseShortcutKey:c.getKeyboardShortcutKeys("fullscreen.issue")}),this.listenTo(this.issueView,{render:function(){this.issueView.issueContainer._ensureElement(),this.issueComponent.setContainer(this.issueView.issueContainer.$el),this.pager&&(this.issueView.pager._ensureElement(),this.pager.show(this.issueView.pager.$el))},collapse:function(){this.trigger("collapse","ui-button")}})},_buildIssueComponent:function(){var e=n.resolve();this.issueComponent=new e({useJIRAEvents:!1}),this.listenTo(this.issueComponent,{fieldsLoaded:function(){this.trigger("editorFieldsLoaded")},loadError:function(e){this.trigger("loadError",e)},loadComplete:function(e,s){this.trigger("editorLoaded",s),I.initialize(e.getProjectId(),e.getProjectType(),e.getId())},linkToIssue:function(e){this.trigger("linkToIssue",e),this.state.unset("searchResults"),this.state.unset("filter"),this.load(e.issueKey)},individualPanelRendered:function(e){this.trigger("individualPanelRendered",e)},renderMainView:function(e,s){this.trigger("viewRendered",e,s)},panelRendered:function(e,s,t){this.trigger("panelRendered",e,s,t)}})},_buildDialogsOverrider:function(){function e(e,s,t){return t&&t.$activeTrigger&&t.$activeTrigger.data(e)||"function"==typeof s&&s()}this.dialogsOverrider=new t({getIssueId:s.partial(e,"issueid",this.issueComponent.getIssueId.bind(this.issueComponent)),getIssueKey:s.partial(e,"issuekey",this.issueComponent.getIssueKey.bind(this.issueComponent))}),this.listenTo(this.dialogsOverrider,{"quickEdit quickCreateSubtask issueUpdate":function(e){this.issueComponent.refreshIssue().done(function(){l.show(e.message,e.issueKey),p.traceIssueUpdated()})},issueDelete:function(e){l.show(e.message,e.issueKey),e.issueKey===this.state.get("issue")?this.trigger("issueDelete",e):this.issueComponent.refreshIssue()}})},_buildFocusShifter:function(){this.focusShifter=new i(this.issueComponent)},getIssueId:function(){return this.issueComponent.getIssueId()},getIssueKey:function(){return this.issueComponent.getIssueKey()},getProjectId:function(){return this.issueComponent.getProjectId()},getProjectKey:function(){return this.issueComponent.getProjectKey()},getProjectType:function(){return this.issueComponent.getProjectType()},_buildPager:function(){this.pager=new g,this.listenTo(this.pager,{next:function(){this._loadNextIssue()},previous:function(){this._loadPreviousIssue()}})},_loadNextIssue:function(){var e=this.state.get("searchResults");e&&e.getNextIssue().done(function(e){this._loadIssueFromPager(e,"pager:next")}.bind(this))},_loadPreviousIssue:function(){var e=this.state.get("searchResults");e&&e.getPreviousIssue().done(function(e){this._loadIssueFromPager(e,"pager:previous")}.bind(this))},_loadIssueFromPager:function(e,s){var t=this.state.get("searchResults");this.trigger(s,{current:t.getPositionOfIssueInSearchResults(e.id),total:t.length}),this.load(e.get("key"))},getAPIImplementation:function(){var e=this;return{nextIssue:function(){var s=e.state.get("searchResults");if(s)return d.startIssueSearch(),e._loadNextIssue()},previousIssue:function(){var s=e.state.get("searchResults");if(s)return d.startIssueSearch(),e._loadPreviousIssue()},getActiveIssueId:function(){return e.issueComponent.getIssueId()},getActiveIssueKey:function(){return e.issueComponent.getIssueKey()},refreshActiveIssue:function(){return d.startIssueSearch(),e.issueComponent.refreshIssue()},refreshIssue:function(){return d.startIssueSearch(),e.issueComponent.refreshIssue()},editField:function(s){if(!("getFields"in e.issueComponent))return!1;var t=e.issueComponent.getFields(),i=t&&t.get(s),n=i&&i.isEditable();return n&&e.issueComponent.editField(i),n},getFields:function(){if("getFields"in e.issueComponent){var s=e.issueComponent.getFields();return s.length?s:void 0}},isSaving:function(){return"hasSavesInProgress"in e.issueComponent&&e.issueComponent.hasSavesInProgress()},isLoading:function(){return e.issueComponent.isCurrentlyLoading()},hasAccessibleIssue:function(){return!e.issueComponent.isShowingError()},showLoadError:function(){return u.showErrorMsg("",o.Body.errorsLoading(),{persistent:!1})},waitForSavesToComplete:function(){if(!("hasSavesInProgress"in e.issueComponent))return(new a.Deferred).resolve().promise();var t=new a.Deferred;if(e.issueComponent.hasSavesInProgress()){var i=function(){s.defer(function(){e.issueComponent.hasSavesInProgress()||t.resolve()})};e.issueComponent.once("saveSuccess",i)}else t.resolve();return t.promise()},openFocusShifter:function(){e.focusShifter.show()},toggleFullscreenIssue:function(){e.showCollapse&&e.trigger("collapse","kb-shortcut")}}},focusIssueEditor:function(){this.issueComponent.focus()},initialFocusIssueEditor:function(){this.issueComponent.initialFocus()}})});
//# sourceMappingURL=IssueView-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/pages/issuesearch/IssueSearch.js' */
define("jira/projectissuenavigator/pages/issuesearch",["require"],function(e){"use strict";var t=e("jira/projectissuenavigator/libs/underscore"),s=e("jira/components/detailslayout"),i=e("jira/projectissuenavigator/services/dialogsoverrider"),r=e("jira/projectissuenavigator/pages/issuesearch/views/empty"),a=e("jira/projectissuenavigator/services/filters"),n=e("jira/projectissuenavigator/services/focusshifter"),u=e("jira/projectissuenavigator/services/inline-issue-create"),o=e("jira/util/events"),l=e("jira/flag"),d=e("jquery"),c=e("jira/projectissuenavigator/services/linkscapturer"),h=e("jira/projectissuenavigator/libs/marionette"),g=e("jira/message"),f=e("jira/util/data/meta"),v=e("jira/projectissuenavigator/services/metrics"),I=e("jira/projectissuenavigator/services/notifications"),p=e("jira/ajs/ajax/smart-ajax"),y=e("jira/projectissuenavigator/pages/issuesearch/templates"),m=e("jira/components/util/events"),b=e("jira/projectissuenavigator/libs/uri"),L=e("jira/projectissuenavigator/services/urlhelper"),j=e("jira/components/analytics-tracker/tracker"),S=JIRA.Projects.Subnavigator;return h.Object.extend({initialize:function(e){var t={shouldShowBreadcrumbs:!0};this.el=d(y.issueSearch(t)),this._buildState(e.state),this._buildSearch(e.search),this._buildSubnavigation(),e.canCreateIssues&&this._buildInlineIssueCreate(),this._buildDetailsLayout(),this._buildLinksCapturer(),this._buildDialogsOverrider(),this._buildFocusShifter()},_buildState:function(e){this.state=e},_setTitleText:function(e){var s=a.getAvailableFilters(!0),i=t.chain(s).flatten().findWhere({id:e}).value(),r=this.el.find("#issues-subnavigation-title");r.text(i&&i.label||"")},_buildSubnavigation:function(){var e=this.state.get("filter")||a.getDefaultFilterId();this._setTitleText(e),this.subnavigation=new S({triggerPlaceholder:this.el.find("#issues-subnavigation-trigger"),contentPlaceholder:this.el.find("#issues-subnavigation-content"),itemGroups:a.getAvailableFilters(!0),selectedItem:e,hideSelectedItem:!1,changeViewText:"Switch filter"}),this.listenTo(this.subnavigation,{itemSelected:function(e){"manage"===e.item.id?this.trigger("manageFilters"):e.item.jql&&(v.startIssueSearch(),e.preventDefault(),this._setTitleText(e.item.id),this.search({filter:e.item.id,issue:null,orderby:null}),this.trigger("filterSelected",{filterId:e.item.id,source:"subnavigator"}))}})},_buildInlineIssueCreate:function(){this.inlineIssueCreate=new u,this.listenTo(this.inlineIssueCreate,{issueCreated:function(e){v.startIssueSearch(),this.search({issue:e.issue.issueKey})}})},_buildDetailsLayout:function(){var e={baseURL:L.generateRootUrl(this.state.get("project")),useExpand:!0};this.options.canCreateIssues&&(e.displayInlineIssueCreate=!0,e.emptyViewFactory=function(){return this.emptyView=new r({emptyViewContent:this.options.emptyViewContent}),this.emptyView}.bind(this)),this.detailsLayout=new s(e),this.listenTo(this.detailsLayout,{select:function(e){this.state.set("issue",e.key);var t={issue:e.key};e&&e.updateActiveView&&(t.updateActiveView=!0),this.trigger("issue:select",t)},empty:function(e){this.state.unset("issue"),this.options.canCreateIssues&&(this.emptyView.inlineIssueCreateContainer._ensureElement(),this.inlineIssueCreate.show(this.emptyView.inlineIssueCreateContainer.$el),this.inlineIssueCreate.activateWithJQL(this.state.get("searchResults").jql));var t=e&&e.updateActiveView?{updateActiveView:e.updateActiveView}:void 0;this.trigger("issue:empty",t)},"list:update":function(){this.trigger("list:update")},"list:sort":function(e){v.startIssueSearch();var t=e.match(/ORDER +BY +(.*)$/i);t&&this.search({orderby:t[1]})},"list:refresh":function(){v.startIssueSearch(),this.search({issue:null})},"list:select":function(e){v.startIssueSearch(),this.trigger("issueSelectedInList",e)},render:function(){o.trigger(m.LAYOUT_RENDERED)},"editorLoadedFromCache editorLoaded":function(e){v.endIssueSearch(),f.set("viewissue-permlink",this._getFullScreenURL(e.issueKey)),this.trigger("editorLoaded",{issueRefreshedEvent:(e.issueEditorOptions||{}).issueRefreshedEvent||!1}),j.initialize(e.projectId,e.projectType,e.issueId)},linkToIssue:function(e){this.trigger("linkToIssue",e)},"list:pagination":function(){v.startIssueSearch()},"error:loadpage":function(e){this.showErrorFlagFromResponse(e)},"editor:saveSuccess":function(e){this.trigger("editor:saveSuccess",{issueId:e.event,savedFieldIds:e.savedFieldIds,savedFieldTypes:e.savedFieldTypes,duration:e.duration})},"editor:editField":function(e){this.trigger("editor:editField",e)},"editor:editFieldCancel":function(e){this.trigger("editor:editFieldCancel",e)},"pager:next":function(e){v.startIssueSearch(),this.trigger("pager:next",e)},"pager:previous":function(e){v.startIssueSearch(),this.trigger("pager:previous",e)},expand:function(){this.trigger("expand","ui-button")},editorError:function(){this.trigger("editorError")},editorFieldsLoaded:function(){this.trigger("editorFieldsLoaded")},individualPanelRendered:function(e){this.trigger("individualPanelRendered",e)}}),this.options.canCreateIssues&&this.listenTo(this.detailsLayout,{issueCreated:function(e){a.filterSupportsInlineIssueCreate(this.state.get("filter"))?(v.startIssueSearch(),this.search({issue:e.issue.issueKey})):g.showSuccessMsg(y.issueCreatedFlag({issueKey:e.issue.issueKey,projectKey:this.state.get("project"),summary:e.fields.summary}),{closeable:!0})}})},_buildSearch:function(e){this.searchService=e},_buildLinksCapturer:function(){this.linksCapturer=new c({el:this.el}),this.listenTo(this.linksCapturer,{linkToFullIssueNavigator:function(){this.trigger("goToFullIssueNavigator")}})},_buildDialogsOverrider:function(){function e(e,t,s){return s&&s.$activeTrigger&&s.$activeTrigger.data(e)||"function"==typeof t&&t()}this.dialogsOverrider=new i({getIssueId:t.partial(e,"issueid",this.detailsLayout.getActiveIssueId.bind(this.detailsLayout)),getIssueKey:t.partial(e,"issuekey",this.detailsLayout.getActiveIssueKey.bind(this.detailsLayout))}),this.listenTo(this.dialogsOverrider,{"quickEdit quickCreateSubtask issueUpdate":function(e){this.detailsLayout.refreshIssue(e.issueId).done(function(){I.show(e.message,e.issueKey)}.bind(this))},issueDelete:function(e){this.removeIssue(e.issueId).done(function(){I.show(e.message,e.issueKey)}.bind(this))}})},_buildFocusShifter:function(){this.focusShifter=new n(this.detailsLayout.issueComponent)},_getFullScreenURL:function(e){var t=f.get("jira-base-url");return new b(t+"/browse/"+e).normalize().toString()},load:function(e){var t=this.state.get("searchResults"),s=this.state.get("filter"),i=a.getAllIssuesFilterId()===s,r=this.state.get("issue"),n=t.hasIssueInSearch(r);return this._setTitleText(s),this.subnavigation.selectItem(s),r?n?void this.detailsLayout.load(t,r,!!e):i?void this.detailsLayout.load(t,void 0,!!e):(this.search({filter:a.getAllIssuesFilterId()}),void this.trigger("filterSelected",{filterId:a.getAllIssuesFilterId(),source:"issueFilterMismatch"})):void this.detailsLayout.load(t,void 0,!!e)},search:function(e,t){e=e||{},this.state.update({issue:e.issue,filter:e.filter,orderby:e.orderby}),this.detailsLayout.showLoading();var s=a.getJQL(this.state.get("filter"),this.state.get("project"),this.state.get("orderby"));this.searchService.search(s).done(function(s){this.state.update({searchResults:s}),!this.state.has("issue")&&e.startIndex&&this.state.update({issue:s.getIssueKeyForIndex(e.startIndex)}),this.load(!!t)}.bind(this)).fail(function(e){this.detailsLayout.hideLoading(),this.showErrorFlagFromResponse(e)}.bind(this))},show:function(){this.subnavigation.show(),this.detailsLayout.show(d(this.el).find(".details-layout")),this.showBreadcrumbs()},selectFilterViaSidebar:function(e,t){v.startIssueSearch(),this._setTitleText(e),this.search({filter:e,issue:null,orderby:null},!!t),this.trigger("filterSelected",{filterId:e,source:"sidebar"})},onDestroy:function(){this.subnavigation.destroy(),this.inlineIssueCreate&&this.inlineIssueCreate.destroy(),this.detailsLayout.destroy(),this.linksCapturer.destroy(),this.dialogsOverrider.destroy(),this.focusShifter.destroy()},adjustSize:function(){this.detailsLayout.adjustSize()},showErrorFlagFromResponse:function(e){if("undefined"==typeof e||e.statusText===p.SmartAjaxResult.TIMEOUT||401===e.status||e.hasData)return this.showErrorFlag(p.buildSimpleErrorContent(e));var s=JSON.parse(e.responseText);return 400===e.status&&s.errorMessages.length>0?this.showErrorFlag(t.escape(s.errorMessages[0])):this.showErrorFlag(p.buildSimpleErrorContent(e))},showErrorFlag:function(e){return l.showErrorMsg("",e,{persistent:!1})},showBreadcrumbs:function(){var t=document.getElementById("breadcrumbs-container");e("jira/globalnavigator/breadcrumbs").done(function(e){e.render(t)})},removeIssue:function(e){return this.detailsLayout.removeIssue(e)},getIssueId:function(){return this.detailsLayout.getActiveIssueId()},getIssueKey:function(){return this.detailsLayout.getActiveIssueKey()},getProjectId:function(){return this.detailsLayout.getActiveProjectId()},getProjectKey:function(){return this.detailsLayout.getActiveProjectKey()},getProjectType:function(){return this.detailsLayout.getActiveProjectType()},getAPIImplementation:function(){var e=this;return{nextIssue:function(){return v.startIssueSearch(),e.detailsLayout.selectNext()},previousIssue:function(){return v.startIssueSearch(),e.detailsLayout.selectPrevious()},getActiveIssueId:function(){return e.getIssueId()},getActiveIssueKey:function(){return e.getIssueKey()},refreshActiveIssue:function(){v.startIssueSearch();var t=e.detailsLayout.getActiveIssueId();return e.detailsLayout.refreshIssue(t)},refreshIssue:function(t){return v.startIssueSearch(),e.detailsLayout.refreshIssue(t)},editField:function(t){var s=e.detailsLayout.issueComponent.getFields(),i=s&&s.get(t),r=i&&i.isEditable();return r&&e.detailsLayout.issueComponent.editField(i),r},getFields:function(){var t=e.detailsLayout.issueComponent.getFields();return t.length?t:void 0},isSaving:function(){return e.detailsLayout.issueComponent.hasSavesInProgress()},isLoading:function(){return e.detailsLayout.isLoading()},hasAccessibleIssue:function(){return Boolean(e.detailsLayout.searchResults&&e.detailsLayout.searchResults.length&&e.detailsLayout.searchResults.selected&&!e.detailsLayout.searchResults.selected.get("inaccessible"))},showLoadError:function(){return e.showErrorFlag(JIRA.Components.IssueViewer.Templates.Body.errorsLoading())},waitForSavesToComplete:function(){var s=new d.Deferred;if(e.detailsLayout.issueComponent.hasSavesInProgress()){var i=function(){t.defer(function(){e.detailsLayout.issueComponent.hasSavesInProgress()||s.resolve()})};e.once("editor:saveSuccess",i)}else s.resolve();return s.promise()},openFocusShifter:function(){e.focusShifter.show()},toggleFullscreenIssue:function(){e.trigger("expand","kb-shortcut")}}},focusIssueList:function(){this.detailsLayout.focusList()},focusIssueEditor:function(){this.detailsLayout.focusEditor()}})});
//# sourceMappingURL=IssueSearch-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/pages/issuesearch/views/Empty.js' */
define("jira/projectissuenavigator/pages/issuesearch/views/empty",["require"],function(e){"use strict";var t=e("jira/projectissuenavigator/libs/marionette"),i=e("jira/projectissuenavigator/pages/issuesearch/templates");return t.LayoutView.extend({initialize:function(){this.content=this.options.emptyViewContent||i.defaultEmptyState()},template:i.emptyState,regions:{inlineIssueCreateContainer:".inline-issue-create-container"},serializeData:function(){return{content:this.content}},onRender:function(){this.unwrapTemplate()}})});
//# sourceMappingURL=Empty-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/entities/NavigatorState.js' */
define("jira/projectissuenavigator/entities/navigatorstate",["require"],function(e){"use strict";var i=e("jira/projectissuenavigator/libs/underscore"),t=e("jira/projectissuenavigator/libs/backbone");return t.Model.extend({defaults:{project:void 0,issue:void 0,filter:void 0,orderby:void 0,searchResults:void 0,startIndex:void 0,referrer:void 0},update:function(e){i.each(e,function(e,i){null===e?this.unset(i):void 0!==e&&this.set(i,e)}.bind(this))}})});
//# sourceMappingURL=NavigatorState-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/templates/issuesearch.js' */
define("jira/projectissuenavigator/pages/issuesearch/templates",function(){"use strict";return JIRA.Issues.Projects.IssueSearch.Templates});
//# sourceMappingURL=issuesearch-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/templates/issueview.js' */
define("jira/projectissuenavigator/pages/issueview/templates",function(){"use strict";return JIRA.Issues.Projects.IssueView.Templates});
//# sourceMappingURL=issueview-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:application', location = 'js/templates/templates.js' */
define("jira/projectissuenavigator/templates",function(){"use strict";return JIRA.Issues.Projects.Templates});
//# sourceMappingURL=templates-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:bento-project-issue-navigator', location = 'js/BentoProjectIssueNavigator.js' */
define("jira/projectissuenavigator",["require"],function(e){"use strict";var s=e("jira/projectissuenavigator/libs/underscore"),t=e("jira/projectissuenavigator/services/analytics"),i=e("jira/projectissuenavigator/services/api"),r=e("jira/projectissuenavigator/services/filters"),a=e("jira/projectissuenavigator/services/dialogscleaner"),n=e("jira/projectissuenavigator/pages/issuesearch"),u=e("jira/projectissuenavigator/pages/issueview"),o=e("jquery"),h=e("jira/projectissuenavigator/libs/marionette"),c=e("jira/util/data/meta"),d=e("jira/projectissuenavigator/services/metrics"),l=e("jira/projectissuenavigator/services/router"),g=e("jira/projectissuenavigator/entities/navigatorstate"),f=e("jira/projectissuenavigator/services/traces"),I=e("jira/projectissuenavigator/services/jiraevents"),p=e("wrm/data"),w=e("jira/components/search"),v=e("jira/projectissuenavigator/services/keyboardshortcuts"),j=e("jira/projectissuenavigator/services/urlhelper"),S=e("jira/projectissuenavigator/services/browser"),y=(e("jira/featureflags/feature-manager"),e("jira/projectissuenavigator/pages/issueview/frontend"));return h.Object.extend({_initializedFromPageLoad:!0,initialize:function(e){e=s.defaults({},e,{el:o("<div></div>"),canCreateIssues:!1,emptyViewContent:""}),this.el=e.el,this.canCreateIssues=e.canCreateIssues,this.emptyViewContent=e.emptyViewContent},initAsync:function(){return r.initialize()},_buildSearch:function(){this.searchService=new w;var e=p.claim("com.atlassian.jira.jira-issue-navigator-components:search-data");if(e){var s=this.searchService.setPreloadedData(e),t=p.claim("com.atlassian.jira.jira-issue-navigator-components:search-results");t&&s.setPreloadedData(t),this.state.set("searchResults",s)}},_buildIssueView:function(){this.issueView=new u({state:this.state,search:this.searchService,showCollapse:this.state.has("filter")}),this.listenTo(this.issueView,{collapse:function(e){d.startIssueSearch(),t.collapseIssue({source:e}),this._showIssueSearch()},linkToIssue:function(){d.startIssueView()},issueDelete:function(e){d.startIssueSearch();var s=this.state.get("searchResults");if(s){var t=s.get(e.issueId);s.removeAndUpdateSelectionIfNeeded(t).done(function(){s.selected&&this.state.set("issue",s.selected.get("key")),this._destroyIssueView(),this._showIssueSearch()}.bind(this))}else this._destroyIssueView(),this._showIssueSearch()},updateUrl:function(e){this.router.updateURL({project:this.state.get("project"),issue:e.issueKey,filter:this.state.get("filter"),orderby:this.state.get("orderby"),replaceHistory:this._initializedFromPageLoad,keepParameters:this._initializedFromPageLoad,isIssueView:!0}),this._initializedFromPageLoad=!1},editorFieldsLoaded:this._notifyIssueViewEditorFieldsLoaded.bind(this),loadError:function(e){e=e||[],this.jiraEvents.triggerRefreshIssuePage(e.issueId)},individualPanelRendered:function(e){this.jiraEvents.triggerNewContentAddedFromPanelRefreshed(e)},viewRendered:function(e,s){this.jiraEvents.triggerNewContentAddedFromPageLoad(e),this.jiraEvents.triggerRefreshToggleBlocks(s)},panelRendered:function(e,s,t){this.jiraEvents.triggerPanelRefreshed(e,s,t)}})},_buildKeyboardShortuts:function(){var e=new v;this.listenTo(e,{focusIssueList:function(){this.issueSearch&&this.issueSearch.focusIssueList()},focusIssueEditor:function(){this.issueSearch?this.issueSearch.focusIssueEditor():this.issueView&&this.issueView.focusIssueEditor()}})},_notifyIssueViewEditorLoadedAndInThePage:function(e){e=e||{},this.jiraEvents.triggerNewContentAddedFromPanelRefreshed(this.issueView.el),e.existingMarkup||this.jiraEvents.triggerRefreshIssuePage(this.issueView.getIssueId()),f.traceEditorLoaded(),t.triggerProjectNavViewIssue({issueId:this.issueView.getIssueId(),issueKey:this.issueView.getIssueKey(),projectId:this.issueView.getProjectId(),projectKey:this.issueView.getProjectKey(),projectType:this.issueView.getProjectType(),analyticsSource:this.issueView.showCollapse?"projectIssueNavigatorFullScreen":"fullPageIssue"}),d.endIssueView()},_notifyIssueViewEditorFieldsLoaded:function(){f.traceEditorFieldsLoaded()},_notifyIssueSearchEditorLoadedAndInThePage:function(e){e=e||{},this.jiraEvents.triggerNewContentAddedFromPanelRefreshed(this.issueSearch.el),e.issueRefreshedEvent||this.jiraEvents.triggerRefreshIssuePage(this.issueSearch.getIssueId()),t.triggerProjectNavViewIssue({issueId:this.issueSearch.getIssueId(),issueKey:this.issueSearch.getIssueKey(),projectId:this.issueSearch.getProjectId(),projectKey:this.issueSearch.getProjectKey(),projectType:this.issueSearch.getProjectType(),analyticsSource:"projectIssueNavigator"}),f.traceEditorLoaded()},_showIssueView:function(e){function t(e){this.listenTo(this.issueView,{editorLoaded:this._notifyIssueViewEditorLoadedAndInThePage.bind(this)}),e=s.defaults({},e,{existingMarkup:!1}),this._notifyIssueViewEditorLoadedAndInThePage(e),this.issueView.adjustSize(),this.issueView.initialFocusIssueEditor()}if(c.get("showFrontendIssue")){var r=this.el.find(".issue-view");r.css("height","calc(100vh - "+r[0].getBoundingClientRect().top+"px)"),y.done(function(s){this.frontendBridgeApi=s,s.show(c.get("issueConfigType"),e.issueKey)}.bind(this))}else this._buildIssueView(),i.useImplementation(this._getAPIImplementation(this.issueView)),e.existingMarkup===!0?(this.issueView.attach(this.el.find(".issue-view")),this.issueView.loadFromPage(e.issueKey).always(function(){t.call(this,{existingMarkup:!0})}.bind(this))):(this.issueView.render(),this.issueView.load(e.issueKey).always(function(){this._activateIssueViewPage(),t.call(this,{existingMarkup:!1})}.bind(this)))},_destroyIssueView:function(){this.frontendBridgeApi&&(this.frontendBridgeApi.close(),delete this.frontendBridgeApi),this.issueView&&(this.issueView.destroy(),this.stopListening(this.issueView),delete this.issueView)},_hasAgilityReferrer:function(){return"agility"===this.state.get("referrer")},_buildIssueSearch:function(){this.issueSearch=new n({canCreateIssues:this.canCreateIssues,emptyViewContent:this.emptyViewContent,state:this.state,search:this.searchService}),this.listenTo(this.issueSearch,{linkToIssue:function(e){d.startIssueView(),this.state.unset("searchResults"),this.state.unset("filter"),this._showIssueView({issueKey:e.issueKey})},expand:function(e){d.startIssueView(),t.expandIssue({source:e}),this._stateBeforeExpand=new g({filter:this.state.get("filter"),searchResults:this.state.get("searchResults"),issue:this.state.get("issue")}),this._showIssueView({issueKey:this.issueSearch.getIssueKey()})},filterSelected:function(e){this._selectFilterInSidebar(e.filterId),t.filterSelect(e)},goToFullIssueNavigator:function(){t.goToFullIssueNavigator(),j.isRapidBoardReferred()&&this._hasAgilityReferrer()&&t.pinToGinFromAgility()},issueSelectedInList:function(e){t.issueSelectedInList(e)},manageFilters:function(){t.manageFilters()},"list:update":function(){f.traceListLoaded()},editorLoaded:function(e){this._notifyIssueSearchEditorLoadedAndInThePage(e)},editorFieldsLoaded:function(){this._notifyIssueViewEditorFieldsLoaded()},editorError:function(){f.traceEditorError()},"pager:next":function(e){t.pager("next",e)},"pager:previous":function(e){t.pager("previous",e)},"issue:select issue:empty":function(){this.router.updateURL({project:this.state.get("project"),issue:this.state.get("issue"),filter:this.state.get("filter"),orderby:this.state.get("orderby"),replaceHistory:this._initializedFromPageLoad}),this._initializedFromPageLoad=!1},"editor:saveSuccess":function(e){t.editorFieldSaved(e)},"editor:editField":function(e){t.editFieldStarted(e)},"editor:editFieldCancel":function(e){t.editFieldCancelled(e)}})},_activateIssueSearchPage:function(){this._destroyIssueView(),this._activatePage(this.issueSearch)},_activateIssueViewPage:function(){this._destroyIssueSearch(),this._activatePage(this.issueView)},_showIssueSearch:function(e){e=e||{},this.issueSearch||(this._buildIssueSearch(),this._activateIssueSearchPage(),i.useImplementation(this._getAPIImplementation(this.issueSearch)),this.issueSearch.show()),this.state.has("searchResults")?this.issueSearch.load():this._stateBeforeExpand?(this.state.set({searchResults:this._stateBeforeExpand.get("searchResults"),issue:this._stateBeforeExpand.get("issue"),filter:this._stateBeforeExpand.get("filter")}),delete this._stateBeforeExpand,this.issueSearch.load()):this.issueSearch.search({filter:e.filter||r.getDefaultFilterId(),issue:e.issue||null,orderby:e.orderby||null,startIndex:e.startIndex||null})},_destroyIssueSearch:function(){this.issueSearch&&(this.issueSearch.destroy(),this.stopListening(this.issueSearch),delete this.issueSearch)},_activatePage:function(e){this.el.find(".content").empty().append(e.el)},_scrollToAnchor:function(){var e=j.getAnchor();S.scrollIntoView(e)},_buildRouter:function(){this.router=new l,this.listenTo(this.router,{"route:browse:initial":function(e){d.markIssueViewFromPageLoad(),e.filter||this.state.unset("searchResults"),this.state.update(e),this._showIssueView({existingMarkup:p.claim("com.atlassian.jira.jira-projects-issue-navigator:server-rendered"),issueKey:e.issue}),this._scrollToAnchor()},"route:browse":function(e){d.startIssueView(),e.filter||this.state.unset("searchResults"),this.state.update(e),this._showIssueView({existingMarkup:!1,issueKey:e.issue}),a.clean(),this._scrollToAnchor()},"route:issues:initial":function(e){d.startIssueSearchFromPageLoad(),this.state.unset("searchResults"),e.filter=r.sanitiseFilter(e.filter),this.state.update(e),this._selectFilterInSidebar(e.filter),this._showIssueSearch(e),t.filterSelect({filterId:e.filter,source:"url"})},"route:issues":function(e){d.startIssueSearch(),this.state.unset("searchResults"),e.filter=r.sanitiseFilter(e.filter),this.state.update(e),this._selectFilterInSidebar(e.filter),this._showIssueSearch(e),t.filterSelect({filterId:e.filter,source:"url"}),a.clean()}})},_selectFilterInSidebar:function(e){JIRA.API.getSidebar().done(function(s){var t=s.getGroup("com.atlassian.jira.jira-projects-issue-navigator:sidebar-issue-navigator",!0);t&&s.setPath([t.getId()],!0);var i=s.getItem("pin-filter_"+e,!0);i&&i.select()})},_getAPIImplementation:function(e){var t=this,r={viewSelectedIssue:function(){t.issueView||(d.startIssueView(),t.state.unset("searchResults"),t.state.unset("filter"),t._showIssueView({issueKey:t.issueSearch.getIssueKey()}))},returnToSearch:function(){t.issueSearch||(d.startIssueSearch(),t._showIssueSearch({issue:t.state.get("issue")}))},isFullScreenIssueVisible:function(){return Boolean(t.issueView)},isQueryValid:function(){return!0}};return s.extend({},i.getDefaultImplementation(),e.getAPIImplementation(),r)},start:function(){var e=this;this.initAsync().then(function(){o(document.body).addClass("page-type-split page-issue-navigator"),e._buildRouter(),e.state=new g,e.jiraEvents=new I,e._buildSearch(),e._buildKeyboardShortuts(),i.init(),e.router.start();var s;o(window).on("scroll resize",function(){s||(s=requestAnimationFrame(function(){this.adjustSize(),s=null}.bind(this)))}.bind(e)),e.adjustSize()})},adjustSize:function(){this.issueView&&this.issueView.adjustSize(),this.issueSearch&&this.issueSearch.adjustSize()}})});
//# sourceMappingURL=BentoProjectIssueNavigator-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-edit-issue-bootstrap', location = 'js/init/edit-bootstrap-wrm.js' */
require(["jquery","underscore","wrm/require","quick-edit/util/loading-indicator","jira/ajs/keyboardshortcut/keyboard-shortcut-toggle"],function(i,e,t,n,r){var a,u=function(){r.disable(),n.showLoadingIndicator()},c=function(){n.hideLoadingIndicator(!0),r.enable()},o=function(e){e.preventDefault(),u();var n="wr!com.atlassian.jira.jira-quick-edit-plugin:quick-edit-issue",o=t([n]);o.then(function(){var t=require("quick-edit/init/edit");a||(a=t.initDialog()),a._events.trigger.simpleClick.call(a,e,i(e.target)),r.enable()},function(){c()})};i(document).delegate(".issueaction-edit-issue","click",o)});;
;
/* module-key = 'com.atlassian.jira.jira-quick-edit-plugin:quick-edit-issue', location = 'js/init/edit.js' */
define("quick-edit/init/edit",["quick-edit/form/factory/edit-issue","quick-edit/util/dialog","aui/tabs","jquery"],function(i,t,e,n){"use strict";var u=function(){var u=i().asDialog({windowTitle:function(){return t.getIssueActionTitle("Edit issue")},id:"edit-issue-dialog"});return n(document).bind("dialogContentReady",function(){e.setup()}),u};return{initDialog:u}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:underscore', location = 'workflow-designer-module/js/lib/underscore-adapter.js' */
define("workflow-designer/underscore",["underscore"],function(e){return e});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer-loader', location = 'workflow-designer-module/js/require.js' */
define("workflow-designer/application-loader",["wrm/require","require"],function(r,e){return{load:function(i){return r(["wrc!com.atlassian.jira.plugins.jira-workflow-designer.workflow-designer"],function(){i&&i(e("workflow-designer/application"))})}}}),AJS.namespace("JIRA.WorkflowDesigner.require",null,require("workflow-designer/application-loader").load);;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer-templates', location = 'workflow-designer-module/js/templates-amd.js' */
define("workflow-designer/templates",[],function(){return AJS.namespace("JIRA.WorkflowDesigner.Templates"),JIRA.WorkflowDesigner.Templates});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:dialog', location = 'workflow-designer-module/js/util/DialogSizeCalculator.js' */
define("workflow-designer/dialog-size-calculator",["workflow-designer/underscore","jquery"],function(i,t){return{DISTANCE_FROM_EDGE:100,calculateDialogSize:function(t,e){return this.dialog=t,e=i.defaults(e||{},{windowHeight:this._getWindowHeight(),windowWidth:this._getWindowWidth(),dialogHeaderHeight:this._getDialogHeaderHeight(),dialogFooterHeight:this._getDialogFooterHeight()}),{height:this._calculateDialogHeight(e.windowHeight,e.dialogHeaderHeight,e.dialogFooterHeight),width:this._calculateDialogWidth(e.windowWidth)}},_calculateDialogHeight:function(i,t,e){return i-t-e-2*this.DISTANCE_FROM_EDGE},_calculateDialogWidth:function(i){return i-2*this.DISTANCE_FROM_EDGE},_getWindowHeight:function(){return t(window).height()},_getWindowWidth:function(){return t(window).width()},_getDialogHeaderHeight:function(){return this.dialog.$popupHeading.outerHeight()},_getDialogFooterHeight:function(){return this.dialog.$buttonContainer.outerHeight()}}}),AJS.namespace("JIRA.WorkflowDesigner.DialogSizeCalculator",null,require("workflow-designer/dialog-size-calculator"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:dialog', location = 'workflow-designer-module/js/views/dialogs/Dialog.js' */
define("workflow-designer/dialog",["workflow-designer/dialog-size-calculator","jira/dialog/form-dialog","workflow-designer/application-loader","workflow-designer/templates","jira/dialog/dialog","workflow-designer/underscore","jquery"],function(i,o,e,t,n,s,r){return o.extend({init:function(i){s.bindAll(this,"_sizeAndPositionDialog"),i=s.defaults({},i,{content:this.createDialogContent,isDraft:!1,onContentRefresh:this._showWorkflowDesigner,widthClass:"large",useReadyForInteractionMetric:!0}),this.options=i,this.sizeAndPositionDialog=s.throttle(this._sizeAndPositionDialog,100),this._super(i),this.onContentReady(this._addLabelHint)},createDialogContent:function(i){i(t.Dialog.workflowDialog({title:s.result(this.options,"workflowId")}))},show:function(){this._super.apply(this,arguments),r(window).on("resize",this.sizeAndPositionDialog)},hide:function(){this._designer&&(this._designer.off("loaded",this._onDesignerLoaded,this),this._designer.destroy()),this._super.apply(this,arguments),r(window).off("resize",this.sizeAndPositionDialog)},_sizeAndPositionDialog:function(){var o,e;n.current===this&&(e=i.calculateDialogSize(this),this.options.width=e.width,o=this.$popup.find(".form-body"),o.css({height:e.height,maxHeight:""}),this._positionInCenter())},_showWorkflowDesigner:function(){var i=this;this._sizeAndPositionDialog(),e.load(function(o){i.isCurrent()&&(i._designer=new o({actions:!1,element:i.get$popup().find(".form-body"),immutable:!0,draft:s.result(i.options,"isDraft"),layoutData:s.result(i.options,"layoutData"),workflowId:s.result(i.options,"workflowId"),currentStepId:s.result(i.options,"currentStepId")}),i.options.useReadyForInteractionMetric&&i._designer.on("loaded",i._onDesignerLoaded,i))})},_onDesignerLoaded:function(){r(document).trigger("dialogContentReadyForInteraction",[this])},_addLabelHint:function(){this.getButtonsContainer().prepend(t.Dialog.labelMouseOverHint())}})}),AJS.namespace("JIRA.WorkflowDesigner.Dialog",null,require("workflow-designer/dialog"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:dialog', location = 'workflow-designer-module/soy/Dialog.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.WorkflowDesigner&&(JIRA.WorkflowDesigner={}),"undefined"==typeof JIRA.WorkflowDesigner.Templates&&(JIRA.WorkflowDesigner.Templates={}),"undefined"==typeof JIRA.WorkflowDesigner.Templates.Dialog&&(JIRA.WorkflowDesigner.Templates.Dialog={}),JIRA.WorkflowDesigner.Templates.Dialog.workflowDialog=function(e,o){return'<div class="aui-dialog-content"><h2 class="dialog-title">'+soy.$$escapeHtml(e.title)+'</h2><div class="form-body"></div></div>'},JIRA.WorkflowDesigner.Templates.Dialog.labelMouseOverHint=function(e,o){return'<div class="buttons-container-left"><small>'+soy.$$escapeHtml("Mouse over objects to see transition names.")+"</small></div>"};;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:workflow-designer-browser-is-supported', location = 'workflow-designer-module/js/browserIsSupported.js' */
define("workflow-designer/browser-support",["jira/util/navigator"],function(r){return{browserIsSupported:function(){return!(r.isIE()&&parseInt(r.majorVersion(),10)<10)}}}),AJS.namespace("JIRA.WorkflowDesigner.browserIsSupported",null,require("workflow-designer/browser-support").browserIsSupported);;
;
/* module-key = 'com.atlassian.jira.plugins.jira-workflow-designer:view-issue-page-workflow-designer', location = 'workflow-designer-module/js/views/ViewIssue.js' */
!function(){"use strict";function e(){n=require("workflow-designer/io/workflow-data-reader"),i=require("workflow-designer/io/ajax/workflow-ajax-manager"),t=require("workflow-designer/messages")}function r(e,r){var o=parseUri(e).queryKey[r]||"";return decodeURIComponent(o.replace(/\+/g,"%20"))}function o(){var e;return l?c.Deferred().resolve(l).promise():(e=i.load(w),e.done(function(e,r){l=r}),e)}var n,i,t,a,l,s,w,u=require("workflow-designer/application-loader"),f=require("workflow-designer/dialog"),c=require("jquery"),d=require("jira/skate");s=new f({content:function(r){var n=this;u.load().pipe(e).pipe(o).done(function(){n.createDialogContent(r)}).fail(function(e){e=e||"The Jira server could not be contacted. This may be a temporary glitch or the server may be down.",t.showErrorMessage(e),s.hide(!0)})},id:"view-workflow-dialog",workflowId:function(){return w},currentStepId:function(){return a},layoutData:function(){return n.read(l)}});var p=d.type?d.type.CLASSNAME:d.types.CLASS;d("jira-workflow-designer-link",{type:p,created:function(e){var r=this instanceof Element?this:e;r.classList.add("new-workflow-designer")},attached:function(e){var o=this instanceof Element?this:e,n=o.getAttribute("href");w=r(n,"workflowName"),a=parseInt(r(n,"stepId"),10),l=null},events:{click:function(e,r){s&&s.show(),r.preventDefault()}}}),define("workflow-designer/view-classic-project-workflow",["jira/util/events","jira/analytics/web-client"],function(e,r){function o(e,o,n){"view-workflow-dialog"===n.options.id&&r.sendScreenEvent("classicViewWorkflowDialog",null,{})}function n(){e.bind("Dialog.show",o),i=!0}var i=!1;return{showDialog:function(e,r){i||n(),e!==w&&(l=null),w=e,a=r,s&&s.show()}}})}(),AJS.namespace("JIRA.WorkflowDesigner.ViewIssue.replaceViewWorkflowLink",null,jQuery.noop),AJS.namespace("JIRA.WorkflowDesigner.Templates.ViewIssue.viewWorkflowLink",null,jQuery.noop);;
;
/* module-key = 'com.atlassian.jira.plugin.system.comment-panel:expandablecomments', location = 'js/plugin/comment/init-comments-expanding.js' */
require(["jira/util/formatter","jira/util/logger","jira/util/events","jira/util/events/types","jira/util/events/reasons","jira/ajs/ajax/smart-ajax","jquery"],function(e,t,a,n,i,s,o){o(document).on("simpleClick",".collapsed-comments",function(r){function c(){d.find(".show-more-comments").text("Loading...")}function l(){var e=d.attr("href");s.makeRequest({url:e,method:"GET",headers:{"X-PJAX":!0}}).done(m)}function m(e){var s=o(e).find(".activity-comment").slice(v,v+j);u.replaceWith(s),t.trace("jira.issue.comment.expanded"),a.trigger(n.NEW_CONTENT_ADDED,[p,i.panelRefreshed]),f.find(".activity-comment:first").removeClass("collapsed").addClass("expanded")}r.preventDefault();var d=o(this),u=d.closest(".message-container"),f=d.closest(".issuePanelContainer"),p=d.closest(".module"),v=u.prevAll(".activity-comment").length,j=d.find(".show-more-comments").data("collapsed-count");c(),l()})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:global-analytics', location = 'jira-issue-navigator-components-module/analytics-tracker/global/global-analytics.js' */
define("jira/components/analytics-tracker/global/global-analytics",["require"],function(e){"use strict";var i=e("jira/components/analytics-tracker/tracker"),c=e("jquery");return{initialize:function(){var e=c(document);e.on("click","#create_link",function(){i.trackEvent("viewissue.createissue","click")})}}});
//# sourceMappingURL=global-analytics-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-projects-issue-navigator:bento-application-init', location = 'js/init.js' */
define("jira/projectissuenavigator/init",["require"],function(e){"use strict";function a(e){var a=new i({el:n(e),canCreateIssues:r.claim("com.atlassian.jira.jira-projects-issue-navigator:can-create-issues"),emptyViewContent:r.claim("com.atlassian.jira.jira-projects-issue-navigator:empty-state-panel-html")});a.start(),s.initialize(),JIRA.API.getSidebar().done(function(e){e.on("collapse-end",function(){a.adjustSize()},!0),e.on("expand-end",function(){a.adjustSize()},!0)})}var i=e("jira/projectissuenavigator"),t=e("jira/util/data/meta"),r=e("wrm/data"),n=e("jquery"),s=e("jira/components/analytics-tracker/global/global-analytics");return n(function(){n("fieldset.parameters input[title=loggedInUser]").val(t.get("remote-user"))}),a}),require(["jira/projectissuenavigator/init","jira/skate","wrm/require","jquery"],function(e,a,i,t){"use strict";a("issue-navigator-init",{type:a.type.CLASSNAME,attached:function(){e(t(".issue-navigator").get(0))}}),i("wrc!jira.view.issue.deferred")});
//# sourceMappingURL=init-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-fileviewer-plugin:atlassian-fileviewer', location = 'jira-fileviewer-module/node_modules/@atlassian/fileviewer/dist/fileviewer-templates.js' */
// This file was automatically generated from main_view.i18n.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace FileViewer.Templates.
 */

if (typeof FileViewer == 'undefined') { var FileViewer = {}; }
if (typeof FileViewer.Templates == 'undefined') { FileViewer.Templates = {}; }


FileViewer.Templates.fileView = function(opt_data, opt_ignored) {
  return '<div id="cp-header" class="aui-group"></div><div id="cp-body" class="aui-group"></div><div id="cp-footer"></div>';
};
if (goog.DEBUG) {
  FileViewer.Templates.fileView.soyTemplateName = 'FileViewer.Templates.fileView';
}


FileViewer.Templates.titleContainer = function(opt_data, opt_ignored) {
  return '<span class="' + soy.$$escapeHtml(opt_data.iconClass) + ' size-24 cp-file-icon"></span>' + soy.$$escapeHtml(opt_data.title);
};
if (goog.DEBUG) {
  FileViewer.Templates.titleContainer.soyTemplateName = 'FileViewer.Templates.titleContainer';
}


FileViewer.Templates.controlDownloadButton = function(opt_data, opt_ignored) {
  return '<a role="button" tabindex="55" id="cp-control-panel-download" href="' + soy.$$escapeHtml(opt_data.src) + '" title="' + soy.$$escapeHtml("Download") + '" class="cp-icon" target="_blank" download>' + soy.$$escapeHtml("Download") + '</a>';
};
if (goog.DEBUG) {
  FileViewer.Templates.controlDownloadButton.soyTemplateName = 'FileViewer.Templates.controlDownloadButton';
}


FileViewer.Templates.controlCloseButton = function(opt_data, opt_ignored) {
  return '<button role="button" tabindex="60" id="cp-control-panel-close" href="#" title="' + soy.$$escapeHtml("Close") + '" class="cp-icon">' + soy.$$escapeHtml("Close") + '</button>';
};
if (goog.DEBUG) {
  FileViewer.Templates.controlCloseButton.soyTemplateName = 'FileViewer.Templates.controlCloseButton';
}


FileViewer.Templates.moreButton = function(opt_data, opt_ignored) {
  return '<button role="button" tabindex="50" id="cp-control-panel-more" aria-owns="cp-more-menu" aria-haspopup="true" class="cp-icon aui-dropdown2-trigger aui-dropdown2-trigger-arrowless" title="' + soy.$$escapeHtml("More") + '">' + soy.$$escapeHtml("More") + '</button><div id="cp-more-menu" class="aui-dropdown2 aui-style-default" data-fv-allow-focus><ul class="aui-list-truncate"></ul></div>';
};
if (goog.DEBUG) {
  FileViewer.Templates.moreButton.soyTemplateName = 'FileViewer.Templates.moreButton';
}


FileViewer.Templates.moreMenuItem = function(opt_data, opt_ignored) {
  return '<li><a href="#">' + soy.$$escapeHtml(opt_data.text) + '</a></li>';
};
if (goog.DEBUG) {
  FileViewer.Templates.moreMenuItem.soyTemplateName = 'FileViewer.Templates.moreMenuItem';
}


FileViewer.Templates.fileComments = function(opt_data, opt_ignored) {
  return '<div id="cp-comments"/>';
};
if (goog.DEBUG) {
  FileViewer.Templates.fileComments.soyTemplateName = 'FileViewer.Templates.fileComments';
}


FileViewer.Templates.fileBodySpinner = function(opt_data, opt_ignored) {
  return '<div class="cp-spinner"></div>';
};
if (goog.DEBUG) {
  FileViewer.Templates.fileBodySpinner.soyTemplateName = 'FileViewer.Templates.fileBodySpinner';
}


FileViewer.Templates.fileBodyArrows = function(opt_data, opt_ignored) {
  return '<button class="cp-nav" id="cp-nav-left" tabindex=20 disabled-title="' + soy.$$escapeHtml("You\'re viewing the least recent file") + '">' + soy.$$escapeHtml("Go to the previous file") + '</button><button class="cp-nav" id="cp-nav-right" tabindex=20  disabled-title="' + soy.$$escapeHtml("You\'re viewing the most recent file") + '">' + soy.$$escapeHtml("Go to the next file") + '</button>';
};
if (goog.DEBUG) {
  FileViewer.Templates.fileBodyArrows.soyTemplateName = 'FileViewer.Templates.fileBodyArrows';
}
// This file was automatically generated from unknown-file-type-view.i18n.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace FileViewer.Templates.
 */

if (typeof FileViewer == 'undefined') { var FileViewer = {}; }
if (typeof FileViewer.Templates == 'undefined') { FileViewer.Templates = {}; }


FileViewer.Templates.unknownFileTypeViewer = function(opt_data, opt_ignored) {
  return '<div id="cp-unknown-file-type-view"><span class="file-icon size-96 ' + soy.$$escapeHtml(opt_data.iconClass) + '"></span><p class="title">' + soy.$$escapeHtml("Ouch! We can\'t preview this file type.") + '<br>' + soy.$$escapeHtml("Try downloading the file to view it.") + '</p><a class="aui-button download-button" href="' + soy.$$escapeHtml(opt_data.src) + '" target="_blank" download><span class="aui-icon aui-icon-small icon-download"></span>' + soy.$$escapeHtml("Download") + '</a></div><span class="cp-baseline-extension"></span>';
};
if (goog.DEBUG) {
  FileViewer.Templates.unknownFileTypeViewer.soyTemplateName = 'FileViewer.Templates.unknownFileTypeViewer';
}
// This file was automatically generated from layers.i18n.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace FileViewer.Templates.
 */

if (typeof FileViewer == 'undefined') { var FileViewer = {}; }
if (typeof FileViewer.Templates == 'undefined') { FileViewer.Templates = {}; }


FileViewer.Templates.displayError = function(opt_data, opt_ignored) {
  return '<div id="cp-error-message">' + ((opt_data.icon) ? '<span class="file-icon size-96 ' + soy.$$escapeHtml(opt_data.icon) + '"></span>' : '<span class="file-icon size-96 cp-unknown-file-type-icon"></span>') + '<p class="title">' + soy.$$escapeHtml(opt_data.title) + '</p><p class="message">' + soy.$$escapeHtml(opt_data.message) + '</p>' + ((opt_data.srcBrowser) ? '<a class="aui-button download-button" href="' + soy.$$escapeHtml(opt_data.srcBrowser) + '" target="_blank"><span class="aui-icon aui-icon-small icon-download"></span>' + soy.$$escapeHtml("Open in browser") + '</a>' : '') + ((opt_data.srcDownload) ? '<a class="aui-button download-button" href="' + soy.$$escapeHtml(opt_data.srcDownload) + '" target="_blank" download><span class="aui-icon aui-icon-small icon-download"></span>' + soy.$$escapeHtml("Download") + '</a>' : '') + '</div><span class="cp-baseline-extension"></span>';
};
if (goog.DEBUG) {
  FileViewer.Templates.displayError.soyTemplateName = 'FileViewer.Templates.displayError';
}


FileViewer.Templates.passwordLayer = function(opt_data, opt_ignored) {
  return '<div id="cp-preview-password"><span class="cp-password-lock-icon"></span><div class="cp-password-base"><p class="title">' + soy.$$escapeHtml(opt_data.prompt) + '</p><input tabindex="5" type="password" name="password" class="cp-password-input" placeholder="' + soy.$$escapeHtml("Password") + '" autocomplete="off"><button tabindex="10" class="aui-button cp-password-button">' + soy.$$escapeHtml("OK") + '</button></div><div class="cp-password-fullscreen"><p class="title">' + soy.$$escapeHtml("This file is password protected.") + '</p><p class="message">' + soy.$$escapeHtml("Due to technical reasons you have to leave presentation mode to enter the password.") + '</p></div></div><span class="cp-baseline-extension"></span>';
};
if (goog.DEBUG) {
  FileViewer.Templates.passwordLayer.soyTemplateName = 'FileViewer.Templates.passwordLayer';
}


FileViewer.Templates.waitingMessage = function(opt_data, opt_ignored) {
  return '<div id="cp-waiting-message"><span class="file-icon size-96 cp-waiting-message-spinner"></span><p class="title">' + soy.$$escapeHtml(opt_data.header) + '</p><p class="message">' + soy.$$escapeHtml(opt_data.message) + '</p><a class="aui-button download-button" href="' + soy.$$escapeHtml(opt_data.src) + '" target="_blank" download><span class="aui-icon aui-icon-small icon-download"></span>' + soy.$$escapeHtml("Download") + '</a></div><span class="cp-baseline-extension"></span>';
};
if (goog.DEBUG) {
  FileViewer.Templates.waitingMessage.soyTemplateName = 'FileViewer.Templates.waitingMessage';
}


FileViewer.Templates.toolbar = function(opt_data, opt_ignored) {
  var output = '<div class="cp-toolbar">';
  var actionList55 = opt_data.actions;
  var actionListLen55 = actionList55.length;
  for (var actionIndex55 = 0; actionIndex55 < actionListLen55; actionIndex55++) {
    var actionData55 = actionList55[actionIndex55];
    output += '<button tabindex="' + soy.$$escapeHtml(actionIndex55 + 10) + '" class="' + soy.$$escapeHtml(actionData55.className) + ' cp-icon" title="' + soy.$$escapeHtml(actionData55.title) + '">' + soy.$$escapeHtml(actionData55.title) + '</button>';
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  FileViewer.Templates.toolbar.soyTemplateName = 'FileViewer.Templates.toolbar';
}
;
;
/* module-key = 'com.atlassian.jira.jira-fileviewer-plugin:atlassian-fileviewer', location = 'jira-fileviewer-module/node_modules/@atlassian/fileviewer/dist/fileviewer.js' */
(function () {
    'use strict';

// holds module definitions used for setup and dependency tracking
var _modules = {};

// defines a new module with the given dependencies and factory function
var define = function (name, dependencies, factoryFn) {
    _modules[name] = {
      deps: dependencies,
      factory: factoryFn,
      value: null
    };
};

// recursively require module and its dependencies
// caches the results so that every module is instantiated only once
var require = function (name, mocks) {
    var module = require._normalizeMocks(mocks)[name] || _modules[name];
    if (!module) { throw new Error('module not found ' + name); }
    if (!module.value) {
      module.value = module.factory.apply(null, module.deps.map(function (name) {
        return require(name, mocks);
      }));
    }
    return module.value;
};

require._normalizeMocks = function (mocks) {
  if (!mocks) { return {}; }
  var normalizedMocks = {};
  Object.keys(mocks).forEach(function (key) {
    normalizedMocks[key] = {
      deps: [],
      factory: function () { return mocks[key]; },
      value: null
    };
  });
  return normalizedMocks;
};

// define FileViewer dependencies
define('jquery',     [], function () { return jQuery;   });
define('underscore', [], function () { return _;        });
define('backbone',   [], function () { return Backbone; });
define('ajs',        [], function () { return AJS;      });

define('3d-view-provider', [
  'jquery'
], function (
  $
) {
  'use strict';

  /**
   * Returns a video viewer.
   * @returns {Promise}
   */
  var threeDViewProvider = function () {
    return $.Deferred().resolve(require('3d-view'));
  };

  return threeDViewProvider;
});
define('Analytics', ['underscore'], function (_) {
  'use strict';

  /**
   * Augments data and forwards them to a configured analytics backend.
   *
   * An analytics backend is just a function that accepts a key and a data
   * object. It is also responsible for filtering incoming data.
   *
   * For all data send, this module fetches current file and view state
   * and adds them to the data. The added keys are
   * - fileType
   * - fileId (hashed version of the file src)
   * - fileState (value of view state)
   *
   * @param analyticsBackend
   * @param fileViewer
   * @param hasher
   * @returns {Analytics}
   * @constructor
   */
  var Analytics = function (backend, fileViewer, hasher) {
    this._backend = backend;
    this._fileViewer = fileViewer;
    this._hasher = hasher;
  };

  /**
   * Forwards an analytics event to the configured backend.
   * @param {string} key
   * @param {Object} data
   */
  Analytics.prototype.send = function (key, data) {
    if (!this._backend) { return; }
    var file = this._fileViewer.getCurrentFile();
    var attributes = (file && file.attributes) || {};
    var augmentedData = _.extend({
      fileType: attributes.type,
      fileId: this._hasher(attributes.src || ''),
      fileState: this._fileViewer.getView().getViewState()
    }, data);
    this._backend(key, augmentedData);
  };

  /**
   * Returns a partially applied analytics function for use inside of
   * promise handlers.
   * @param {string} key
   * @param {object} data
   * @returns {function}
   */
  Analytics.prototype.fn = function (key, data) {
    return this.send.bind(this, key, data);
  };

  return Analytics;
});

define('ArrowLayer', [
  'backbone', 'template-store-singleton'
], function (
  Backbone, templateStore
) {
  'use strict';

  var AJS = window.AJS;

  /**
   * Controls to switch between multiple files in a collection.
   * @constructor
   */
  var ArrowLayer = Backbone.View.extend({

    className: 'cp-arrow-layer',

    events: {
      'click #cp-nav-left:not(.disabled)': 'gotoPrevious',
      'click #cp-nav-right:not(.disabled)': 'gotoNext'
    },

    initialize: function (options) {
      this._fileViewer = options.fileViewer;
      this.listenTo(this._fileViewer._fileState.collection, 'add reset', this.checkAndHideNavigation);
      this._visibleArrows = false;
      this._updateElements();
    },

    render: function () {
      this.$el.html(templateStore.get('fileBodyArrows')()).hide();
      this._updateElements();
      this.checkAndHideNavigation();

      return this;
    },

    /**
     * Show next file in collection.
     */
    gotoNext: function () {
      this._fileViewer.showFileNext().always(
        this._fileViewer.analytics.fn('files.fileviewer-web.next', {
          actionType: 'button',
          mode: this._fileViewer.getMode()
        })
      );
    },

    /**
     * Show previous file in collection.
     */
    gotoPrevious: function () {
      this._fileViewer.showFilePrev().always(
        this._fileViewer.analytics.fn('files.fileviewer-web.prev', {
          actionType: 'button',
          mode: this._fileViewer.getMode()
        })
      );
    },

    /**
     * Enable disabled navigation arrow again and remove tooltip
     */
    enableArrow: function ($arrow) {
      $arrow.removeClass('disabled');
      $arrow.removeAttr('original-title');
    },

    /**
     * Disable navigation arrow and add tooltip
     * @param  {Object} options
     * @param  {Object} options.arrow
     * @param  {String} options.tooltipText
     * @param  {String} options.tooltipGravity
     */
    disableArrow: function (options) {
      options.arrow.addClass('disabled');
      options.arrow.attr('original-title', options.tooltipText);
      options.arrow.tooltip({ gravity: options.tooltipGravity });
    },

    /**
     * Returns true if either the left or right navigation arrow is shown
     * @return {Boolean}
     */
    showsArrow: function () {
      return this._visibleArrows;
    },

    /**
     * Check if controls should appear.
     * If there's only a single file in the collection, we don't show them.
     */
    checkAndHideNavigation: function () {
      if (this._fileViewer._fileState.collection.length <= 1) {
        this._visibleArrows = false;
        return this.$arrows.hide();
      }
      this.$arrows.show();
      this._visibleArrows = true;
      if (this._fileViewer.getConfig().enableListLoop) {
        return;
      }
      if (this._fileViewer.isShowingLastFile()) {
        this.disableArrow({
          arrow: this.$arrowRight,
          tooltipText: "You\'re viewing the most recent file",
          tooltipGravity: 'e'
        });
      } else if (this._fileViewer.isShowingFirstFile()) {
        this.disableArrow({
          arrow: this.$arrowLeft,
          tooltipText: "You\'re viewing the least recent file",
          tooltipGravity: 'w'
        });
      }
    },

    _updateElements: function () {
      this.$arrows = this.$el.find('.cp-nav');
      this.$arrowLeft = this.$el.find('#cp-nav-left');
      this.$arrowRight = this.$el.find('#cp-nav-right');
    }

  });

  return ArrowLayer;
});

define('assert',
  [],
  function () {

    /**
     * Throws an error if given predicate is falsy.
     *
     * @param {*} predicate
     * @param {string} description Used for the error message.
     */
    var assert = function (predicate, description) {
      description = description || 'untruthy value';

      if (!predicate) {
        throw new Error('Assertion failed: ' + description);
      }
    };

    return assert;
  }
);

define('asset-module-backend', [], function () {
  'use strict';

  return function (fileViewer) {

    /**
     * Assumes that all modules are included as static assets and therefore
     * already loaded. Uses FileViewer.getConfig().assets for the
     * module configuration.
     *
     * @param {String} moduleName
     * @return {Promise}
     */

    return function (moduleName) {
      if (moduleName === 'pdf-config') {
        return fileViewer.getConfig().assets['pdf-config'] || {};
      }
    };
  };

});
define('baseMode', ['jquery', 'keyboard'], function ($, keyboard) {
  'use strict';

  var AJS = window.AJS;

  var baseMode = {

    activateHook: function (mainView) {
      mainView.$el.on('click #cp-file-body', mainView._onClickToBackground.bind(mainView));
      var $arrowLayer = mainView.fileContentView.getLayerForName('arrows').$el;
      $arrowLayer.toggle(this.showsArrowLayer);
    },

    deactivateHook: function (mainView) {
      mainView.$el.off('click #cp-file-body');
    },

    setup: function (mainView, viewer) {
      viewer && viewer.$el.on('click.contentView', viewer._clickedBackgroundToClose.bind(viewer));
      $(document).on('keydown.modeKeys', this._handleKeys.bind(mainView));
    },

    teardown: function (mainView, viewer) {
      viewer && viewer.$el.off('click.contentView');
      $(document).off('keydown.modeKeys');
    },

    showsArrowLayer: true,

    _handleKeys: function (e) {
      var contentView, viewer;

      if (this.fileContentView.isLayerInitialized('content')) {
        contentView = this.fileContentView.getLayerForName('content');
        viewer = contentView.getAttachedViewer();
      }

      if (!viewer || !(e.ctrlKey || e.metaKey)) { return; }

      if (
        e.which === keyboard.keys.PLUS ||
        e.which === keyboard.keys.PLUS_NUMPAD ||
        e.which === keyboard.keys.PLUS_FF
      ) {
        if (viewer.zoomIn) {
          this._fileViewer.analytics.send('files.fileviewer-web.file.zoomin', {
            actionType: 'hotkey'
          });
          viewer.zoomIn();
        }
        e.preventDefault();
      }

      if (
        e.which === keyboard.keys.MINUS ||
        e.which === keyboard.keys.MINUS_NUMPAD ||
        e.which === keyboard.keys.MINUS_FF
      ) {
        if (viewer.zoomOut) {
          this._fileViewer.analytics.send('files.fileviewer-web.file.zoomout', {
            actionType: 'hotkey'
          });
          viewer.zoomOut();
        }
        e.preventDefault();
      }

    },

    toolbarActions: [
      {
        title: "Zoom out",
        className: 'cp-toolbar-minus',
        predicate: function () {
          return this._viewer && this._viewer.zoomOut;
        },
        handler: function () {
          if (this._viewer && this._viewer.zoomOut) {
            this._fileViewer.analytics.send('files.fileviewer-web.file.zoomout', {
              actionType: 'button'
            });
            this._viewer.zoomOut();
          }
        }
      },
      {
        title: "Zoom in",
        className: 'cp-toolbar-plus',
        predicate: function () {
          return this._viewer && this._viewer.zoomIn;
        },
        handler: function () {
          if (this._viewer && this._viewer.zoomIn) {
            this._fileViewer.analytics.send('files.fileviewer-web.file.zoomin', {
              actionType: 'button'
            });
            this._viewer.zoomIn();
          }
        }
      },
      {
        title: "Fit to page",
        className: 'cp-toolbar-fit',
        predicate: function () {
          return this._viewer && this._viewer.zoomFit;
        },
        handler: function () {
          if (this._viewer && this._viewer.zoomFit) {
            this._fileViewer.analytics.send('files.fileviewer-web.file.zoomfit', {
              actionType: 'button'
            });
            this._viewer.zoomFit();
          }
        }
      },
      {
        title: "Start Presentation",
        className: 'cp-toolbar-presentation',
        predicate: function () {
          return this._viewer && this._fileViewer.getConfig().enablePresentationMode;
        },
        handler: function () {
          this._fileViewer.analytics.send('files.fileviewer-web.presentation.enter');
          this._fileViewer.changeMode('PRESENTATION');
        }
      }
    ]
  };

  return baseMode;
});

define('BaseViewer', [
  'jquery', 'underscore', 'backbone'
], function ($, _, Backbone) {
  'use strict';

  /**
   * Base class for viewers.
   * @constructor
   */
  var BaseViewer = Backbone.View.extend({

    // Event listeners specific to this view namespaced to prevent collisions with its children.

    contentViewEvents: {
      'click.contentView': '_clickedBackgroundToClose',
      'mousedown.contentView': '_mousedownContentView'
    },

    // Merge events with children's event object to bind all event handlers

    initialize: function (options) {
      this.events = _.extend(this.events || {}, this.contentViewEvents);

      this._fileViewer = options.fileViewer;
      this._previewSrc = options.previewSrc;
      this._mousedownBackground = null;
    },

    teardown: function () {},

    // Listen to clicks to the background and eventually close the fileViewer.
    //
    // A viewer can specify getBackground if their background element isn't their contents

    _mousedownContentView: function (e) {
      var $background = this.getBackground ? this.getBackground() : this.$el;
      this._mousedownBackground = $(e.target).is($background);
    },

    _clickedBackgroundToClose: function (e) {
      // @TODO: Remove after cleaning modes setup, hooks etc.
      var mode = this._fileViewer._view._modes[this._fileViewer._view._mode];
      if (mode.disableClickBackgroundCloses) {
        return;
      }
      var $background = this.getBackground ? this.getBackground() : this.$el;
      if (this._mousedownBackground && $(e.target).is($background)) {
        this._fileViewer.analytics.send('files.fileviewer-web.closed', {
          actionType: 'element'
        });
        this._fileViewer.close();
      }
    },

    // This function is called whenever the viewport of the viewer changes size,
    // e.g. when a panel is opened or closed. Overwrite this function if you want
    // custom behaviour.
    handleResize: function () {}

  });

  return BaseViewer;
});

define('CloseButton', [
  'backbone', 'template-store-singleton'
], function (Backbone, templateStore) {
  'use strict';

  var CloseButton = Backbone.View.extend({

    className: 'fv-close-button',

    events: {
      'click': '_close'
    },

    tagName: 'span',

    initialize: function (options) {
      this._fileViewer = options.fileViewer;
    },

    render: function () {
      this.$el.html(templateStore.get('controlCloseButton')());

      this.$('button').tooltip({ gravity: 'n' });

      return this;
    },

    _close: function (e) {
      e.preventDefault();
      this._fileViewer.analytics.send('files.fileviewer-web.closed', {
        actionType: 'button'
      });
      this._fileViewer.close();
    }
  });

  return CloseButton;
});

define('Commands', ['jquery', 'ajs', 'file'], function ($, AJS, File) {
  'use strict';

  // helper for $.reject()
  var rejectWithError = function (msg) {
    return new $.Deferred().reject(
      new Error(msg)
    ).promise();
  };

  /**
   * A couple of commands used by the MainView.showFile() method. It's intend is to break
   * up the long method into smaller, more testable pieces.
   * @module
   */
  var Commands = {};

  /**
   * A command that looks-up a viewer for a file.
   * @constructor
   * @param {File} originalFile
   * @param {ViewerRegistry} viewerRegistry
   */
  Commands.LookupViewer = function (originalFile, viewerRegistry) {
    this._originalFile = originalFile;
    this._viewerRegistry = viewerRegistry;
  };

  /**
   * Execute this command.
   * @param {string} previewSrc
   * @param {string} previewType
   * @param {object} overwrites
   * @returns {Promise<Viewer, string, File>} promises the viewer to use, the previewSrc and the converted file.
   */
  Commands.LookupViewer.prototype.execute = function (previewSrc, previewType, overwrites) {
    var convertedFile = new File(this._originalFile.toJSON());

    convertedFile.set(overwrites);

    convertedFile.set('type', previewType);
    convertedFile.set('src', previewSrc);

    var loadViewer = this._viewerRegistry.get(previewType);

    if (!loadViewer) {
      return rejectWithError("There is not viewer for this file type.");
    }
    var dfd = $.Deferred();
    loadViewer().then(function (Viewer) {
      dfd.resolve(Viewer, previewSrc, convertedFile);
    }).fail( function () {
      dfd.fail(arguments);
    });

    return dfd.promise();
  };

  return Commands;
});

define('defaultConfig', [], function () {
  /**
   * FileViwers configuration options:
   *
   * - appendTo {DOMNode} [$('body')] - DOM Element to append to
   * - files {Array} - An array of file objects
   * - commentService {Object} - Comments service
   * - templateBackend {Function} - Provides templates for a given name
   * - moduleBackend {Function} - Provides modules for a given name
   * - pdfTransportFactory {Function} - cb(currentFile):Promise<PDFTransport>
   * - enableListLoop {Boolean} [true] - Allow to navigate from end to start of file list and v.v.
   * - enablePresentationMode {Boolean} [true] - Allow switching to presentation mode
   * - preloadImagesAfterCurrent {Number} [2] - Files after current to preload if they are images.
   * - preloadImagesBeforeCurrent {Number} [0] - Files before current to preload if they are images.
   * - videoDefaultQualityHd {Boolean} [true] - By default play HD content if available
   * - customStorage {Object} [null] - Custom storage object with setItem, getItem, removeItem methods
   *
   * @exports defaultConfig
   */
  return {
    enableListLoop: true,
    enablePresentationMode: true,
    preloadImagesAfterCurrent: 2,
    preloadImagesBeforeCurrent: 0,
    videoDefaultQualityHd: true,
    customStorage: null,
    viewers: ['image', 'document', 'video', '3d'],
    embedded: false
  };
});

define('constants-dictionary', [
  'assert'
], function (
  assert
) {
  'use strict';

  /**
   * A constants dictionary is a dictionary where you can only define a
   * given name once.
   */
  var ConstantsDictionary = function () {
    this._valuesByName = {};
    this._names = [];
  };

  /**
   * Define a name with the given value.
   * @param {string} name The name that is being defined.
   * @param {*} value Any value, even undefined.
   * @throws Error if name is already defined.
   */
  ConstantsDictionary.prototype.define = function (name, value) {
    assert(!this.isDefined(name), 'name is unique');
    this._valuesByName[name] = value;
    this._names.push(name);
  };

  /**
   * Lookup a name with the given value.
   * @param {string} name The name to lookup.
   * @throws Error if name is not yet defined.
   */
  ConstantsDictionary.prototype.lookup = function (name) {
    assert(this.isDefined(name), 'name is defined');
    return this._valuesByName[name];
  };

  /**
   * Check if a name is defined.
   * @param {string} name The name to check.
   * @return {boolean}
   */
  ConstantsDictionary.prototype.isDefined = function (name) {
    return name in this._valuesByName;
  };

  /**
   * Lists all definitions in the order they were defined. Returns an array of objects
   * with name and value properties.
   * @return {Array}
   */
  ConstantsDictionary.prototype.list = function () {
    return this._names.map(function (name) {
      return {
        name: name,
        value: this._valuesByName[name]
      };
    }, this);
  };

  return ConstantsDictionary;
});
define('djb2', [], function () {

  var toCharCode = function (str) { return str.charCodeAt(0); };
  var updateHash = function (prev, curr) { return ((prev << 5) + prev) + curr; };

  /**
   * Create a djb2 hash from the given string.
   * Based on this module https://github.com/wearefractal/djb2.
   * @param {String} str
   * @returns {Number}
   */
  var djb2 = function (str) {
    return str.split('').map(toCharCode).reduce(updateHash, 5381);
  };

  return djb2;
});
define('DownloadButton', [
  'backbone', 'template-store-singleton'
], function (Backbone, templateStore) {
  'use strict';

  var DownloadButton = Backbone.View.extend({

    tagName: 'span',

    events: {
      'click': '_triggerAnalytics'
    },

    initialize: function (options) {
      this._fileViewer = options.fileViewer;
      this._model = this._fileViewer.getCurrentFile();
    },

    render: function () {
      this.$el.html(templateStore.get('controlDownloadButton')({
        src: this._model.get('srcDownload') || this._model.get('src')
      }));

      this.$('a').tooltip({ gravity: 'n' });

      return this;
    },

    _triggerAnalytics: function () {
      this._fileViewer.trigger('fv.download');
      this._fileViewer.analytics.send('files.fileviewer-web.file.download', {
        actionType: 'button'
      });
    }

  }, {
    isDownloadable: function (fileViewer) {
      var file = fileViewer.getCurrentFile();
      return file && file.get('downloadable');
    }
  });

  return DownloadButton;
});

define('ErrorLayer', [
  'ajs', 'backbone', 'template-store-singleton'
], function (AJS, Backbone, templateStore) {
  'use strict';

  var ErrorLayer = Backbone.View.extend({

    className: 'cp-error-layer',

    initialize: function () {
      this.$el.hide();
    },

    showErrorMessage: function (err, file) {
      var title, description, icon, srcDownload, srcBrowser;
      title = err.title || "Ouch! We can\'t preview this file.";
      description = err.description || err.toString();
      icon = err.icon || false;
      srcBrowser = err.browser ? file.get('src') : false;
      srcDownload = err.download ? file.get('srcDownload') || file.get('src') : false;
      this.$el.show().html(templateStore.get('displayError')({
        title: title,
        message: description,
        icon: icon,
        srcBrowser: srcBrowser,
        srcDownload: srcDownload
      }));
    }

  });

  return ErrorLayer;
});

define('file-state',
  [
    'backbone'
  ],
  function (
    Backbone
    ) {
    'use strict';

    var FileState = Backbone.Model.extend({

      defaults: {
        currentFileIndex: -1,
        isNewFileUploaded: false
      },

      setCollection: function (collection) {
        this.collection = collection;
      },

      setNext: function () {
        var currentFileIndex = this.get('currentFileIndex');
        if (currentFileIndex < (this.collection.length - 1)) {
          this.set({currentFileIndex: this.get('currentFileIndex') + 1});
        } else {
          this.set({currentFileIndex: 0});
        }
      },

      setPrev: function () {
        var currentFileIndex = this.get('currentFileIndex');
        if (currentFileIndex > 0) {
          this.set({currentFileIndex: this.get('currentFileIndex') - 1});
        } else {
          this.set({currentFileIndex: this.collection.length - 1});
        }
      },

      setNoCurrent: function () {
        this.set({ currentFileIndex: -1 });
      },

      setCurrentFileIndex: function (index) {
        if ((index > -1) && (index < this.collection.length)) {
          return this.set({currentFileIndex: index});
        }
      },

      setCurrentWithCID: function (cid) {
        return this.setCurrentFileIndex(this.collection.getIndexWithCID(cid));
      },

      getCurrent: function () {
        var current = this.collection.at(this.get('currentFileIndex'));
        return current || null;
      },

      selectWhere: function (selector) {
        if (selector) {
          var selected = this.collection.findWhere(selector);
          if (selected) {
            this.setCurrentWithCID(selected.cid);
          }
        } else if (this.collection.length >= 1) {
          this.setCurrentFileIndex(0);
        }
      },

      replaceCurrent: function (file) {
        var idx = this.get('currentFileIndex');
        this.collection.remove(this.collection.at(idx));
        this.collection.add(file, {at: idx});
      },

      setCurrentWithQuery: function (query) {
        var file = this.collection.findWhere(query);

        if (file) {
          this.setCurrentWithCID(file.cid);
        } else {
          this.setNoCurrent();
        }
      }

    });

    return FileState;
  });

define('file-types', [
],
  function (
    ) {
    'use strict';

    var browserSupportedImageTypes = [
      'image/gif',
      'image/jpeg',
      'image/png',
      'image/svg+xml',
      'image/web',
      'image/bmp'
    ];

    var browserSupportedMultimediaTypes = [
      'video/mp4',
      'video/m4v',
      'video/youtube',
      'audio/mp3',
      'audio/mpeg'
    ];

    var toLowerType = function (type) {
      return type && type.toLowerCase() || '';
    };

    var fileTypes = {
      isPDF: function (type) {
        var lowerType = toLowerType(type);
        return lowerType === 'application/pdf';
      },

      isText: function (type) {
        var lowerType = toLowerType(type);
        return lowerType === 'text/plain';
      },

      isCode: function (type) {
        var lowerType = toLowerType(type);
        return lowerType === 'text/java'
          || lowerType === 'text/css'
          || lowerType === 'text/html'
          || lowerType === 'text/javascript'
          || lowerType === 'text/xml';
      },

      isMultimedia: function (type) {
        var lowerType = toLowerType(type);
        return /^video\/.*/i.test(type)
          || /^audio\/.*/i.test(type)
          || lowerType === 'application/x-shockwave-flash'
          || lowerType === 'application/vnd.rn-realmedia'
          || lowerType === 'application/x-oleobject';
      },

      isArchive: function (type) {
        var lowerType = toLowerType(type);
        return lowerType === 'application/zip'
          || lowerType === 'application/java-archive';
      },

      isImage: function (type) {
        return /^image\/.*/i.test(type);
      },

      isVideo: function (type) {
        var lowerType = toLowerType(type);
        return /^video\/.*/i.test(type) || lowerType === 'video';
      },

      isAudio: function (type) {
        var lowerType = toLowerType(type);
        return /^audio\/.*/i.test(type) || lowerType === 'audio';
      },

      isYoutube: function (type) {
        var lowerType = toLowerType(type);
        return 'video/youtube' === lowerType;
      },

      isImageBrowserSupported: function (type) {
        return browserSupportedImageTypes.indexOf(type.toLowerCase()) !== -1;
      },

      isMultimediaBrowserSupported: function (type) {
        return browserSupportedMultimediaTypes.indexOf(type.toLowerCase()) !== -1;
      },

      isWordProcessing: function (type) {
        var lowerType = toLowerType(type);
        return lowerType === 'application/msword'
          || /^application\/vnd.ms-word.*/i.test(type)
          || /^application\/vnd.openxmlformats-officedocument.wordprocessingml.*/i.test(type);
      },

      isSpreadsheet: function (type) {
        var lowerType = toLowerType(type);
        return lowerType === 'application/msexcel'
          || /^application\/vnd.ms-excel.*/i.test(type)
          || /^application\/vnd.openxmlformats-officedocument.spreadsheet.*/i.test(type);
      },

      isPresentation: function (type) {
        var lowerType = toLowerType(type);
        return lowerType === 'application/mspowerpoint'
          || /^application\/vnd.ms-powerpoint.*/i.test(type)
          || /^application\/vnd.openxmlformats-officedocument.presentationml.*/i.test(type);
      },

      is3D: function (type) {
        var lowerType = toLowerType(type);
        return lowerType === 'application/x-sea';
      },

      matchAll: function () { return true; }
    };

    return fileTypes;
  });

define('file-viewer', [
  'jquery',
  'underscore',
  'backbone',
  'assert',
  'constants-dictionary',
  'MainView',
  'file-state',
  'files',
  'file',
  'soy-template-backend',
  'asset-module-backend',
  'template-store-singleton',
  'module-store-singleton',
  'viewer-registry',
  'file-types',
  'defaultConfig',
  'storage',
  'image-view-provider',
  'pdf-view-provider',
  'video-view-provider',
  '3d-view-provider',
  'unknown-file-type-view-provider',
  'Analytics',
  'djb2'
],
function (
  $,
  _,
  Backbone,
  assert,
  ConstantsDictionary,
  MainView,
  FileState,
  Files,
  File,
  soyTemplateBackend,
  assetModuleBackend,
  templateStore,
  moduleStore,
  ViewerRegistry,
  fileTypes,
  defaultConfig,
  Storage,
  imageViewProvider,
  pdfViewProvider,
  videoViewProvider,
  threeDViewProvider,
  unknownFileTypeViewProvider,
  Analytics,
  djb2
) {
  'use strict';

  /**
   * Core API to integrate FileViewer into a project.
   *
   * @class
   * @alias FileViewer
   * @param {Object} config
   * @throws {Error} if config is invalid
   */
  var FileViewer = function (config) {
    config = _.defaults(config || {}, defaultConfig);
    config.appendTo = config.appendTo || $('body');
    FileViewer._instanceCount += 1;
    config.instanceId = FileViewer._instanceCount;

    templateStore.useBackend(config.templateBackend || soyTemplateBackend(this));
    moduleStore.useBackend(config.moduleBackend || assetModuleBackend(this));
    
    this._config = config;
    this._properties = new Backbone.Model();

    this._fileState = new FileState();
    this._viewerRegistry = new ViewerRegistry();
    this._analytics = new Analytics(config.analyticsBackend, this, djb2);

    if (config.viewers.indexOf('image') !== -1) {
      this._viewerRegistry.register(fileTypes.isImageBrowserSupported, imageViewProvider, 0);
    }
    if (config.viewers.indexOf('document') !== -1) {
      this._viewerRegistry.register(fileTypes.isPDF, pdfViewProvider, 0);
    }
    if (config.viewers.indexOf('video') !== -1) {
      this._viewerRegistry.register(fileTypes.isMultimediaBrowserSupported, videoViewProvider, 0);
    }
    if (config.viewers.indexOf('3d') !== -1) {
      this._viewerRegistry.register(fileTypes.is3D, threeDViewProvider, 0);
    }

    // set fallback viewer
    this._viewerRegistry.register(fileTypes.matchAll, unknownFileTypeViewProvider, 100);

    this._files = new Files(config.files || [], {
      service: config.commentService
    });
    this._fileState.setCollection(this._files);

    this._view = new MainView({
      model: new Backbone.Model({
        fileViewer: this,
        instanceId: config.instanceId,
        embedded: config.embedded
      })
    });

    this._isOpen = false;

    this._storage = new Storage(this.getConfig().customStorage, 'fileViewer.');

    FileViewer._plugins.list()
      .map(function (definition) { return definition.value; })
      .forEach(function (plugin) { plugin(this); }, this);
  };

  // internal nondecreasing counter
  FileViewer._instanceCount = 0;

  // privately expose available modules for debugging purposes
  // _modules is defined support/require.js
  /* eslint-disable no-undef */
  FileViewer._modules = _modules;
  /* eslint-enable no-undef*/

  // keeps track of registered plugins
  FileViewer._plugins = new ConstantsDictionary();

  /**
   * Current version of this build.
   *
   * @type {String}
   */
  FileViewer.VERSION = '1.4.6'; // replaced during build

  /**
   * Define a new module for the use with FileViewer.require().
   *
   * Be careful with the naming, because module names can be overwritten.
   *
   * @method
   * @param {String} moduleName
   * @param {Array} dependencies
   * @param {Function} factory
   */
  FileViewer.define = define;

  /**
   * Require a previously defined module by name.
   *
   * @method
   * @param {String} moduleName
   * @returns {*}
   */
  FileViewer.require = require;

  /**
   * Register a new plugin for use with FileViewer.
   *
   * @param {String} name
   * @param {Function} plugin
   * @throws {Error} if plugin is invalid or name already exists.
   */
  FileViewer.registerPlugin = function (name, plugin) {
    assert(this.isPlugin(plugin), 'is a plugin');
    this._plugins.define(name, plugin);
  };

  /**
   * Returns if a plugin is enabled for use with FileViewer.
   *
   * @param {String} name
   */
  FileViewer.isPluginEnabled = function (name) {
    return this._plugins.isDefined(name);
  };

  /**
   * Gets a plugin registered for use with FileViewer.
   *
   * @param {String} name
   * @throws {Error} if plugin is invalid or name does not already exists.
   */
  FileViewer.getPlugin = function (name) {
    return this._plugins.lookup(name);
  };

  /**
   * Checks if the given object is a valid plugin.
   *
   * @param {*} potentialPlugin
   * @returns {Boolean}
   */
  FileViewer.isPlugin = function (potentialPlugin) {
    return _.isFunction(potentialPlugin);
  };

  /**
   * Support .on(), .off() and .trigger().
   */
  _.extend(FileViewer.prototype, Backbone.Events);

  /**
   * Instance of the analytics module, use this to send analytics from your plugins.
   */
  Object.defineProperty(FileViewer.prototype, 'analytics', {
    get: function () { return this._analytics; }
  });

  /**
   * The instance of FileViewer was opened.
   *
   * @event FileViewer~'fv.open'
   */

  /**
   * Open this instance of FileViewer by appending it to the configured element. This needs to be called
   * before showing a file.
   *
   * When a fileQuery object is passed in, this file is shown and a special analytics event is triggered.
   * When you want to record, where this interaction is comming from, pass in
   * an additional analyticsSource
   *
   * @param {Object} [fileQuery]
   * @param {String} [analyticsSource]
   * @fires {FileViewer~'fv.open'}
   */
  FileViewer.prototype.open = function (fileQuery, analyticsSource) {
    this._view.render().show().$el.appendTo(this._config.appendTo);
    this._view.delegateEvents();

    this._isOpen = true;
    this.trigger('fv.open');

    if (fileQuery) {
      this.showFileWithQuery(fileQuery).always(
        this.analytics.fn('files.fileviewer-web.opened', {source: analyticsSource})
      );
    }
  };

  /**
   * The instance of FileViewer was closed.
   *
   * @event FileViewer~'fv.close'
   */

  /**
   * Shut down this instance of FileViewer by removing it from the configured element. Reset current file.
   *
   * @fires {FileViewer~'fv.close'}
   */
  FileViewer.prototype.close = function () {
    this._view._currentFile = null;
    this._view.undelegateEvents();
    this._view
      .hide()
      .$el.remove();

    this._isOpen = false;
    this.trigger('fv.close');
  };

  /**
   * Check if FileViewer is currently open.
   *
   * @returns {Boolean}
   */
  FileViewer.prototype.isOpen = function () {
    return this._isOpen;
  };

  /**
   * The current file was changed and is about to be shown.
   *
   * @event FileViewer~'fv.changeFile'
   */

  /**
   * The current file has been rendered successfully.
   *
   * @event FileViewer~'fv.showFile'
   */

  /**
   * The current file has **not** been rendered successfully.
   *
   * @event FileViewer~'fv.showFileError'
   */

  /**
   * Show file that matches the given attribute query.
   *
   * A query is basically a set of values for certain keys that you want to match on. To match the file with id='a'
   * and src='test'.
   *
   *     {
   *     id: 'a',
   *     src: 'test'
   *     }
   *
   * @param {Object} query
   * @returns {Promise.<File>}
   * @fires {FileViewer~'fv.changeFile'}
   * @fires {FileViewer~'fv.showFile'}
   * @fires {FileViewer~'fv.showFileError'}
   */
  FileViewer.prototype.showFileWithQuery = function (query) {
    this._fileState.setCurrentWithQuery(query);
    var file = this._fileState.getCurrent();
    return this.showFile(file);
  };

  /**
   * Show the next file in the collection.
   *
   * @returns {Promise.<File>}
   * @fires {FileViewer~'fv.changeFile'}
   * @fires {FileViewer~'fv.showFile'}
   * @fires {FileViewer~'fv.showFileError'}
   */
  FileViewer.prototype.showFileNext = function () {
    if (this.isShowingLastFile() && !this.getConfig().enableListLoop) {
      return $.when();
    }
    this._fileState.setNext();
    return this.showFile(this._fileState.getCurrent());
  };

  /**
   * Show the previous file in the collection.
   *
   * @returns {Promise.<File>}
   * @fires {FileViewer~'fv.changeFile'}
   * @fires {FileViewer~'fv.showFile'}
   * @fires {FileViewer~'fv.showFileError'}
   */
  FileViewer.prototype.showFilePrev = function () {
    if (this.isShowingFirstFile() && !this.getConfig().enableListLoop) {
      return $.when();
    }
    this._fileState.setPrev();
    return this.showFile(this._fileState.getCurrent());
  };

  /**
   * FileViewer#setFiles() was called.
   * @event FileViewer~'fv.setFiles'
   */

  /**
   * Set both the list of files as well as the current file.
   *
   * Ensures that the updated current file is shown if the viewer is open. Viewer caching might prevent a full
   * re-render.
   *
   * If no query is given or the query doesn't match a file in the collection, the current file is set to `null`,
   * causing an error message to be shown if the viewer is open.
   *
   * @param {Array.<Object>} newFiles
   * @param {Object} [nextFileQuery=null]
   * @fires {FileViewer~'fv.setFiles'}
   */
  FileViewer.prototype.setFiles = function (newFiles, nextFileQuery) {
    this._files.reset(newFiles);
    this._fileState.setCurrentWithQuery(nextFileQuery);

    this.trigger('fv.setFiles');

    if (this.isOpen()) {
      this.showFile(this._fileState.getCurrent());
    }
  };

  /**
   * Returns the file being shown in this viewer.
   *
   * @returns {Object} the file being shown
   */
  FileViewer.prototype.getCurrent = function () {
    var currentFile = this._view.getCurrentFile();
    return currentFile && currentFile.toJSON();
  };

  /**
   * Returns the file being shown in this viewer as a backbone model.
   *
   * **Note**: This method is deprecated, because it exposes a backbone model. See #getCurrent() instead.
   *
   * @returns {File} the file being shown
   * @deprecated
   */
  FileViewer.prototype.getCurrentFile = function () {
    return this._view.getCurrentFile();
  };

  /**
   * Returns the current files collection.
   *
   * @returns {Array.<Object>}
   */
  FileViewer.prototype.getFiles = function () {
    return this._files.toJSON();
  };

  /**
   * Check if current file is the first one in the files collection.
   *
   * @returns {Boolean}
   */
  FileViewer.prototype.isShowingFirstFile = function () {
    return this._fileState.attributes.currentFileIndex === 0;
  };

  /**
   * Check if current file is the last one in the files collection.
   *
   * @returns {Boolean}
   */
  FileViewer.prototype.isShowingLastFile = function () {
    return this._fileState.collection.length ===
      this._fileState.attributes.currentFileIndex + 1;
  };

  /**
   * The view mode was changed.
   *
   * @event FileViewer~'fv.changeMode'
   */

  /**
   * Change current view mode to the given mode.
   *
   * @param {String} mode - either 'BASE' or 'PRESENTATION'
   * @fires {FileViewer~'fv.changeMode'}
   */
  FileViewer.prototype.changeMode = function (mode) {
    this._view.setupMode(mode);
    this.trigger('fv.changeMode', mode);
  };

  /**
   * Return the current mode.
   *
   * @returns {String}
   */
  FileViewer.prototype.getMode = function () {
    return this._view.getMode();
  };

  /**
   * Check if FileViewer is in the given mode.
   *
   * @param {String} mode - either 'BASE' or 'PRESENTATION'
   * @returns {Boolean}
   */
  FileViewer.prototype.isInMode = function (mode) {
    return this._view.isInMode(mode);
  };

  /**
   * A file action was called.
   *
   * @callback FileViewer~fileActionCallback
   * @param {File} file
   */

  /**
   * Add a file action to the viewer.
   *
   * Actions can be registered asynchronously, and are reset when the user navigates to a new file.
   *
   * Commonly, a plugin will listen to the change file event and register a file action
   * conditionally for the displayed file. If a file action shares a key with a file
   * action that currently exists, addFileAction will replace the old action with the
   * new action.
   *
   * @param {Object} opts
   * @param {String} opts.key - a unique identifier for the file action
   * @param {String} opts.text - the text display in the menu item
   * @param {FileViewer~fileActionCallback} opts.callback - a callback to be called when the menu item is selected
   * @throws Error if config is invalid or if no file is currently being viewed
   */
  FileViewer.prototype.addFileAction = function (opts) {
    assert(opts.key, 'has key');
    assert(opts.text, 'has text');
    assert(opts.callback, 'has a callback');
    this._view.fileControlsView.getLayerForName('moreButton').addFileAction(opts);
  };

  /**
   * Remove a file action from the viewer based on the key sent in the parameter.
   *
   * @param {Object} opts
   * @param {String} opts.key - a unique identifier for the file action you want to remove
   * @throws {Error} if no key is provided or if no file is currently being viewed
   */
  FileViewer.prototype.removeFileAction = function (opts) {
    assert(opts.key, 'has key');
    this._view.fileControlsView.getLayerForName('moreButton').removeFileAction(opts);
  };

  /**
   * Check if the FileViewer supports native rendering of a given content type.
   *
   * @param {String} contentType the content type to check if supported
   * @returns {Boolean}
   */
  FileViewer.prototype.supports = function (contentType) {
    var previewer = this._viewerRegistry.get(contentType);
    return previewer && previewer !== unknownFileTypeViewProvider;
  };

  /**
   * Allows non-core code to get and set their own values on an instance of FileViewer.
   *
   * @param {String} key
   * @param {*} value
   */
  FileViewer.prototype.set = function (key, value) {
    this._properties.set(key, value);
  };

  /**
   * Access plugin level properties.
   *
   * @param {String} key
   * @returns {*}
   */
  FileViewer.prototype.get = function (key) {
    return this._properties.get(key);
  };

  /**
   * Returns the specified config.
   *
   * @returns {Object}
   */
  FileViewer.prototype.getConfig = function () {
    return this._config;
  };

  /**
   * Returns the central view of FileViewer.
   *
   * @returns {MainView}
   */
  FileViewer.prototype.getView = function () {
    return this._view;
  };

  /**
   * Returns key-value storage of FileViewer.
   *
   * @returns {Object}
   */
  FileViewer.prototype.getStorage = function () {
    return this._storage;
  };

  /**
   * **DEPRECATED** Show the given file.
   *
   * **Carefull**: This method doesn't set the current file from the collection and thus allows to set a file that
   * is not in the files array, thus causing buggy behaviour with next/prev file.
   *
   * Use #showFileWithQuery() instead.
   *
   * @param {File} file
   * @returns {Promise.<File>}
   * @fires {FileViewer~'fv.changeFile'}
   * @fires {FileViewer~'fv.showFile'}
   * @fires {FileViewer~'fv.showFileError'}
   * @deprecated
   */
  FileViewer.prototype.showFile = function (file) {
    return this._showFile(file);
  };

  /**
   * **DEPRECATED** Show the file matching the given backbone object id.
   *
   * Use #showFileWithQuery() instead.
   *
   * @param {String} cid
   * @returns {Promise.<File>}
   * @fires {FileViewer~'fv.changeFile'}
   * @fires {FileViewer~'fv.showFile'}
   * @fires {FileViewer~'fv.showFileError'}
   * @deprecated
   */
  FileViewer.prototype.showFileWithCID = function (cid) {
    this._fileState.setCurrentWithCID(cid);
    return this.showFile(this._fileState.getCurrent());
  };

  /**
   * **DEPRECATED** Show the file matching the given id.
   *
   * Use #showFileWithQuery() instead.
   *
   * @param {String} id
   * @param {String} [ownerId]
   * @returns {Promise.<File>}
   * @fires {FileViewer~'fv.changeFile'}
   * @fires {FileViewer~'fv.showFile'}
   * @fires {FileViewer~'fv.showFileError'}
   * @deprecated
   */
  FileViewer.prototype.showFileWithId = function (id, ownerId) {
    var fileQuery = { id: id };

    if (ownerId) { fileQuery.ownerId = ownerId; }

    return this.showFileWithQuery(fileQuery);
  };

  /**
   * **DEPRECATED** Show file with matching src.
   *
   * Use #showFileWithQuery() instead.
   *
   * @param {String} src
   * @returns {Promise.<File>}
   * @fires {FileViewer~'fv.changeFile'}
   * @fires {FileViewer~'fv.showFile'}
   * @fires {FileViewer~'fv.showFileError'}
   * @deprecated
   */
  FileViewer.prototype.showFileWithSrc = function (src) {
    var fileQuery = { src: src };

    return this.showFileWithQuery(fileQuery);
  };

  /**
   * **DEPRECATED** Show the first file matching the given selector. If selector is falsy, the first file in the
   * collection is shown.
   *
   * Use #showFileWithQuery() instead.
   *
   * @param {Object} selector
   * @returns {Promise.<File>}
   * @fires {FileViewer~'fv.changeFile'}
   * @fires {FileViewer~'fv.showFile'}
   * @fires {FileViewer~'fv.showFileError'}
   * @deprecated
   */
  FileViewer.prototype.showFileWhere = function (selector) {
    this._fileState.selectWhere(selector);
    return this.showFile(this._fileState.getCurrent());
  };

  /**
   * **DEPRECATED** Maps a file to some value which is used for strict equality checks (`===`).
   *
   * @callback FileViewer~updateFilesMapFn
   * @param {Object} file
   * @returns {*}
   * @deprecated
   */

  /**
   * **DEPRECATED** FileViewer#updateFiles() was called.
   *
   * @event FileViewer~'fv.updateFiles'
   * @deprecated
   */

  /**
   * **DEPRECATED** Update the files collection without updating the view state.
   *
   * **Carefull**: A call to `updateFiles()` neither changes the file currently shown nor causes a re-rendering. This
   * can cause state and view to get out of sync and is likely to introduce bugs. Therefore, this method should no
   * longer be used. See FileViewer#setFiles() instead.
   *
   * This method operates in two modes based on it's input.
   *
   * When invoked with nothing but `files`, the existing file collection is simply replaced with the new one.
   *
   * When an optional `mapFn` function is given, the behaviour changes drastically. Each file in the given `files`
   * array is compared with the already existing ones using `mapFn`.
   *
   * - If a file existed before, but isn't matched by a new file, it won't be updated, but stays in the collection.
   * - If a file existed before and is matched by a new file, it is updated and stays in the collection.
   * - If a file didn't exist before, it is appended to the collection
   *
   * @param {Array.<Object>} files
   * @param {FileViewer~updateFilesMapFn} [mapFn]
   * @returns {Array.<Object>}
   * @fires {FileViewer~'fv.updateFiles'}
   * @deprecated
   */
  FileViewer.prototype.updateFiles = function (files, mapFn) {
    if (!(mapFn && _.isFunction(mapFn))) {
      this._files.reset(files);
    } else {
      var newModels = _.chain(files)
        .map(function (file) {
          var matchedModel = this._files.find(function (collectionModel) {
            return mapFn(collectionModel.toJSON()) === mapFn(file);
          });
          if (matchedModel) {
            matchedModel.set(file);
          } else {
            return new File(file);
          }
        }.bind(this))
        .compact()
        .value();

      this._files.add(newModels, {silent: true});
      this._files.trigger('reset', this._files);
    }

    this.trigger('fv.updateFiles');

    return this._files.toJSON();
  };

  // shows the given backbone file model, triggers an event and returns a promise
  // @todo should resolve with a json description of the passed-in file
  FileViewer.prototype._showFile = function (file) {
    assert(this._isOpen, 'FileViewer is open');
    var triggerEvent = function (event) {
      return function () {
        this.trigger(event, file);
      }.bind(this);
    }.bind(this);
    this.trigger('fv.changeFile', file);
    return this._view.showFile(file)
      .done(triggerEvent('fv.showFile'))
      .fail(triggerEvent('fv.showFileError'));
  };

  return FileViewer;
});

define('file',
  [
    'backbone'
  ],
  function (
    Backbone
    ) {
    'use strict';

    var File = Backbone.Model.extend({
      defaults: {
        src: '',
        type: '',
        thumbnail: '',
        poster: '',
        title: '',
        downloadable: true
      }
    });

    return File;
  });

define('files',
  [
    'backbone',
    'underscore',
    'file'
  ],
  function (
    Backbone,
    _,
    File) {

    'use strict';

    var Files = Backbone.Collection.extend({
      model: File,

      getIndexWithCID: function (cid) {
        return this.indexOf(this.get({cid: cid}));
      }
    });

    return Files;

  });

define('focus-manager-factory', ['assert', 'focus-manager-noop', 'focus-manager-impl'], function (assert, NoopFocusManager, FocusManager) {
  'use strict';

  /**
   * Transparent wrapper around FocusManager API that conditionally switches implementations.
   * @constructor
   * @param {jQuery} $el - The outmost element within focus will be trapped
   */
  var FocusManagerFactory = function ($el) {
    this.__element = $el;
  };

  FocusManagerFactory.prototype.create = function (embedded) {
    var ctor = embedded ? NoopFocusManager : FocusManager;
    return new ctor(this.__element);
  };

  return FocusManagerFactory;
});

define('focus-manager-impl', ['assert'], function (assert) {
  'use strict';

  var hasFocusOverride = function (element) {
    if (!element || !element.hasAttribute) { return false; }
    return element.hasAttribute('data-fv-allow-focus') || hasFocusOverride(element.parentElement);
  };

  /**
   * Trap focus for overlays and dialogs to enable proper keyboard navigation.
   * @constructor
   * @param {jQuery} $el - The outmost element within focus will be trapped
   */
  var FocusManager = function ($el) {
    assert($el, 'the first parameter to new FocusManager is a jQuery element');
    this.$container = $el;
    this._handler = this._focusHandler.bind(this);
  };

  /**
   * Trap element focus inside container element.
   */
  FocusManager.prototype.trapFocus = function () {
    this._unfocusParentPage();
    document.addEventListener('focus', this._handler, true);
  };

  /**
   * Stop trapping element focus inside container element.
   */
  FocusManager.prototype.releaseFocus = function () {
    document.removeEventListener('focus', this._handler, true);
    this._restoreFocus();
  };

  // Focus event handler.
  // On focus instantly blur the element if it is not a child of container
  // and set focus back to the container element.
  FocusManager.prototype._focusHandler = function (event) {
    if (
      !hasFocusOverride(event.target) &&
      this.$container &&
      !this.$container[0].contains(event.target)
    ) {
      event.stopPropagation();
      document.activeElement.blur();
      this.$container.attr('tabindex', 1);
      this.$container.focus();
    }
  };

  // Store active DOM element, unfocus it and then focus the container.
  FocusManager.prototype._unfocusParentPage = function () {
    this._originalActiveElement = document.activeElement;
    this._originalActiveElement.blur();
    this.$container.attr('tabindex', 1);
    this.$container.focus();
  };

  // Restore focus to the stored original active element.
  FocusManager.prototype._restoreFocus = function () {
    if (this._originalActiveElement) {
      this._originalActiveElement.focus();
    }
  };

  return FocusManager;
});

define('focus-manager-noop', [], function () {
  'use strict';
  
  var noop = function () {};

  var NoopFocusManager = function ($el) {};

  NoopFocusManager.prototype.trapFocus = noop;

  NoopFocusManager.prototype.releaseFocus = noop;

  return NoopFocusManager;
});
define('icon-utils', [
  'file-types'
],
function (fileTypes) {
  'use strict';

  var iconUtils = {
    getCssClass: function (type) {
      var iconClass = 'cp-unknown-file-type-icon';
      if (fileTypes.isImage(type)) {
        iconClass = 'cp-image-icon';
      } else if (fileTypes.isPDF(type)) {
        iconClass = 'cp-pdf-icon';
      } else if (fileTypes.isWordProcessing(type)) {
        iconClass = 'cp-document-icon';
      } else if (fileTypes.isSpreadsheet(type)) {
        iconClass = 'cp-spreadsheet-icon';
      } else if (fileTypes.isPresentation(type)) {
        iconClass = 'cp-presentation-icon';
      } else if (fileTypes.isText(type)) {
        iconClass = 'cp-text-icon';
      } else if (fileTypes.isCode(type)) {
        iconClass = 'cp-code-icon';
      } else if (fileTypes.isMultimedia(type)) {
        iconClass = 'cp-multimedia-icon';
      } else if (fileTypes.isArchive(type)) {
        iconClass = 'cp-archive-icon';
      }
      return iconClass;
    }
  };
  return iconUtils;
});

define('image-view-provider', [
  'jquery',
  'file'
], function (
  $,
  File
) {
  'use strict';

  /**
   * Returns an image viewer.
   * @returns {Promise}
   */
  var imageViewProvider = function () {
    return $.Deferred().resolve(require('image-view'));
  };

  return imageViewProvider;
});
define('instance-manager',
  ['jquery'],
  function ($) {
    'use strict';

    /**
     * Ensures that there's only a single instance at the same time.
     * Accepts a createFn that is invoked and whose return value is
     * used as the instance.
     * @constructor
     * @param {Function} createFn
     * @param {Function} destroyFn
     */
    var InstanceManager = function (createFn, destroyFn) {
      this._createFn = createFn;
      this._destroyFn = destroyFn;
      this._instance = null;
      this._destroyDeferred = null;
    };

    /**
     * Promise a new instance. Resolves as soon as the previous one
     * is destroyed.
     * @return {Promise<Object>}
     */
    InstanceManager.prototype.create = function () {
      var args = arguments;
      var d = new $.Deferred();
      var destroyPromise = (this._destroyDeferred && this._destroyDeferred.promise()) || $.when();

      destroyPromise.then(function () {
        this._destroyDeferred = new $.Deferred();
        this._instance = this._createFn.apply(this._createFn, args);
        d.resolve(this._instance);
      }.bind(this));

      return d.promise();
    };

    /**
     * Destroy the current instance and unlock instance creation.
     */
    InstanceManager.prototype.destroy = function () {
      if (!this._destroyDeferred) {
        return;
      }
      this._destroyFn(this._instance);
      this._destroyDeferred.resolve();
    };

    return InstanceManager;

  }
);

define('keyboard', [], function () {
  var keys = {
    F: 70,
    G: 71,
    P: 80,
    RETURN: 13,
    ESCAPE: 27,
    ARROW_LEFT: 37,
    ARROW_UP: 38,
    ARROW_RIGHT: 39,
    ARROW_DOWN: 40,
    PLUS: 187,
    MINUS: 189,
    PLUS_NUMPAD: 107,
    MINUS_NUMPAD: 109,
    PLUS_FF: 61,
    MINUS_FF: 173,
    SPACE: 32,
    ENTER: 13,
    TAB: 9
  };

  var createConditionalKeyHandler = function (fn) {
    return function (event) {
      var targetTagName = event.target.tagName && event.target.tagName.toUpperCase();

      // To not interfere with input elements we only invoke the
      // event handling method if the event target is not INPUT or TEXTAREA
      if (targetTagName !== 'INPUT' && targetTagName !== 'TEXTAREA') {
        return fn.call(this, event);
      }

      // Pressing ESCAPE while in input fields blurs input fields
      if (event.which === keys.ESCAPE) {
        event.target.blur();
      }
    };
  };

  return {
    keys: keys,
    createConditionalKeyHandler: createConditionalKeyHandler
  };
});

define('layer-container-view', [
  'underscore',
  'backbone',
  'assert',
  'constants-dictionary'
], function (
  _,
  Backbone,
  assert,
  ConstantsDictionary
) {
  'use strict';

  // utility functions for working with layers

  var invoke = function (fn) {
    return fn();
  };

  var pick = function (property, obj) {
    return obj[property];
  };

  var pickBoundFn = function (property, obj) {
    return _.isFunction(obj[property]) && obj[property].bind(obj);
  };

  /**
   * This view manages a collection of views which can be registered with a
   * given name. This view manages the lifecycle of its subviews.
   *
   * Subviews are always the View objects themselves, not instances of them.
   *
   * Subviews have two different states: ADDED and INITIALIZED. Whenever a
   * view is registered, it starts in state ADDED and stays there until
   * #initializeLayers() is called. Then it moves to INITIALIZED and stays
   * there until #teardownLayers() is called.
   *
   * When #render() is called on the collection, only INITIALIZED subviews are
   * rendered. Subviews can provide a teardown method that will be called
   * once the view is removed.
   *
   * Optionally, you can register subviews with a predicate to tell which
   * filetypes they support. It is invoked whenever the subviews are
   * initialized.
   */
  var FileContentLayerView = Backbone.View.extend({

    /**
     * @constructor
     * @param {object} options
     */
    initialize: function (options) {
      this._layerViewsByName = new ConstantsDictionary();
      this._layerViewRegistrations = [];
      this._layers = null;
      this._fileViewer = options.fileViewer;
    },

    /**
     * Checks if a layer with the given name exists.
     * @param {string} name
     * @return {bool}
     */
    hasLayerView: function (name) {
      return this._layerViewsByName.isDefined(name);
    },

    /**
     * Adds a view as a layer with a certain, unique name. Accepts an
     * options object as third parameter.
     *
     * Keys in options:
     *  - {function} [predicate] invoked at construction
     *  - {int} [weight=0] sorts layers at construction
     *
     * @param {string} name
     * @param {Backbone.View} LayerView
     * @param {object} [options]
     * @throws Error if name is already used.
     */
    addLayerView: function (name, LayerView, options) {
      assert(!this.hasLayerView(name), 'name is unique');

      options = _.extend({
        predicate: function () { return true; },
        weight: 0
      }, options);

      this._layerViewsByName.define(name, LayerView);
      this._layerViewRegistrations.push({
        LayerView: LayerView,
        name: name,
        predicate: options.predicate,
        weight: options.weight
      });
    },

    /**
     * Checks wether layers are currently initialized.
     * @return {bool}
     */
    areLayersInitialized: function () {
      return this._layers !== null;
    },

    /**
     * Return the number of initialized layers (after applying the predicate)/
     * @return {Integer}
     */
    countInitializedLayers: function () {
      return (this._layers || []).length;
    },

    /**
     * Initializes all currently registered layers.
     * @fires initializeLayers
     * @throws Error if layers are already initialized
     */
    initializeLayers: function () {
      this.initializeLayerSubset(_.map(this._layerViewRegistrations, function (item) { return item.name; }));
    },

    /**
     * Initializes the given registered layers.
     * @param {Array} names
     * @fires initializeLayers
     * @throws Error if layers are already initialized
     */
    initializeLayerSubset: function (names) {
      assert(!this.areLayersInitialized(), 'layers are uninitialized');

      this._layers = this._layerViewRegistrations
                .filter(function (registration) {
                  var isInSubset = (names.indexOf(registration.name) !== -1);
                  return isInSubset && registration.predicate(this._fileViewer);
                }, this)
                .map(function (registration) {
                  var view = new registration.LayerView({
                    contentLayerView: this,
                    fileViewer: this._fileViewer
                  });
                  return {
                    view: view,
                    name: registration.name,
                    weight: registration.weight
                  };
                }, this);

      // sort by weight using the stable _.sortBy function to keep
      // registration order for same weights
      this._layers = _.sortBy(this._layers, function (layer) {
        return layer.weight * -1;
      });

      this.trigger('initializeLayers');

      this.render();
    },

    /**
     * Tears initialized layers down and removes them.
     * Won't throw if layers are not initialized.
     * @fires teardownLayers
     */
    teardownLayers: function () {
      if (this.areLayersInitialized()) {
        this._layers.map(_.partial(pick, 'view'))
              .map(_.partial(pickBoundFn, 'teardown'))
              .filter(_.isFunction)
              .forEach(invoke);

        this._layers.map(_.partial(pick, 'view'))
              .map(_.partial(pickBoundFn, 'remove'))
              .filter(_.isFunction)
              .forEach(invoke);

        this._layers = null;
      }

      this.trigger('teardownLayers');

      this.render();
    },

    /**
     * Utitily method. Calls teardownLayers() followed by initializeLayers().
     */
    reinitializeLayers: function () {
      this.teardownLayers();
      this.initializeLayers();
    },

    /**
     * Checks wether a layer with the given name is currently initialized.
     * @param {string} name
     * @return {bool}
     */
    isLayerInitialized: function (name) {
      if (!this.areLayersInitialized()) { return false; }

      return _.find(this._layers, function (layer) {
        return layer.name === name;
      }) ? true : false;
    },

    /**
     * Returns the instanciated LayerView object for the given name.
     * @param {string} name Name of the registered LayerView.
     * @return {layerView}
     * @throws {Error} if layer is not initialized
     */
    getLayerForName: function (name) {
      assert(this.areLayersInitialized(), 'layers are initialized');
      assert(this.hasLayerView(name), 'layer is defined');

      var layer = _.find(this._layers, function (layer) {
        return layer.name === name;
      });

      assert(layer, 'layer is initialized');

      return layer.view;
    },

    /**
     * Renders initialized layers.
     * Won't throw if layers are not initialized.
     * @fires renderLayers
     */
    render: function () {
      this.$el.empty();

      if (this.areLayersInitialized()) {
        this._layers.map(_.partial(pick, 'view'))
              .map(_.partial(pickBoundFn, 'render'))
              .forEach(invoke);

        this._layers.map(_.partial(pick, 'view'))
              .map(_.partial(pick, '$el'))
              .forEach(function ($layer) {
                this.$el.append($layer);
              }, this);
      }

      this.trigger('renderLayers');

      return this;
    }

  });

  return FileContentLayerView;
});
define('MainView',
  [
    'ajs',
    'backbone',
    'underscore',
    'jquery',
    'focus-manager-factory',
    'files',
    'file',
    'TitleView',
    'DownloadButton',
    'CloseButton',
    'MoreButton',
    'ViewerLayer',
    'panel-container-view',
    'layer-container-view',
    'ErrorLayer',
    'WaitingLayer',
    'PasswordLayer',
    'ArrowLayer',
    'ToolbarLayer',
    'SpinnerLayer',
    'template-store-singleton',
    'keyboard',
    'baseMode',
    'presentationMode',
    'Commands'
  ],
  function (
    AJS,
    Backbone,
    _,
    $,
    FocusManagerFactory,
    Files,
    File,
    TitleView,
    DownloadButton,
    CloseButton,
    MoreButton,
    ViewerLayer,
    PanelContainerView,
    LayerContainerView,
    ErrorLayer,
    WaitingLayer,
    PasswordLayer,
    ArrowLayer,
    ToolbarLayer,
    SpinnerLayer,
    templateStore,
    keyboard,
    baseMode,
    presentationMode,
    Commands
  ) {
    'use strict';

    var rejectWithError = function (msg) {
      return new $.Deferred().reject(
        new Error(msg)
      ).promise();
    };

    /**
     * Core view of FileViewer.
     * @constructor
     * @param {Object} params
     */
    var MainView = Backbone.View.extend({

      attributes: function () {
        return {
          'id': 'cp-container-' + this.model.get('instanceId'),
          'data-embedded': this.model.get('embedded'),
          'role': 'dialog',
          'aria-labelledby': 'cp-title-container'
        };
      },

      initialize: function (params) {
        var options = _.extend({}, params);

        this._fileViewer = options.model.get('fileViewer');
        this._currentFile = null;
        this._viewState = null;
        this._focusManager = new FocusManagerFactory(this.$el).create(this.model.get('embedded'));

        this.fileTitleView = new PanelContainerView({
          fileViewer: this._fileViewer,
          id: 'cp-title-container',
          className: 'aui-item'
        });

        this.fileControlsView = new LayerContainerView({
          fileViewer: this._fileViewer,
          id: 'cp-file-controls',
          className: 'aui-item'
        });

        this.fileMetaView = new LayerContainerView({
          fileViewer: this._fileViewer,
          id: 'cp-meta'
        });

        this.fileSinkView = new PanelContainerView({
          id: 'cp-sink',
          collection: this._fileViewer._fileState.collection,
          fileViewer: this._fileViewer
        });

        this.fileSidebarView = new PanelContainerView({
          id: 'cp-sidebar',
          fileViewer: this._fileViewer,
          collection: this._fileViewer._fileState.collection
        });

        this.fileContentView = new LayerContainerView({
          id: 'cp-file-body',
          fileViewer: this._fileViewer
        });

        this.fileTitleView.addPanelView('title', TitleView);
        this.fileControlsView.addLayerView('downloadButton', DownloadButton, {
          weight: 10,
          predicate: DownloadButton.isDownloadable
        });
        this.fileControlsView.addLayerView('moreButton', MoreButton);
        this.fileControlsView.addLayerView('closeButton', CloseButton);
        this.fileContentView.addLayerView('content', ViewerLayer);
        this.fileContentView.addLayerView('error', ErrorLayer);
        this.fileContentView.addLayerView('password', PasswordLayer);
        this.fileContentView.addLayerView('toolbar', ToolbarLayer);
        this.fileContentView.addLayerView('waiting', WaitingLayer);
        this.fileContentView.addLayerView('spinner', SpinnerLayer);
        this.fileContentView.addLayerView('arrows', ArrowLayer);

        this.listenTo(this.fileSidebarView, 'togglePanel', this._updateContentWidth);
        this.listenTo(this.fileSinkView, 'togglePanel', this._updateContentHeight);

        this._navigationKeyLockCount = 0;
        this._showFileChain = $.when();

        this._mode = 'BASE';
        this._modes = {
          'BASE': baseMode,
          'PRESENTATION': presentationMode
        };

        this._fixTooltipCleanup();
      },

      /**
       * Show.
       * @return {MainView} this
       */
      show: function () {
        this.$el.show();
        $(this._fileViewer._config.appendTo).addClass('no-scroll');

        // Blur focussed state for mouse users
        this.$el.on('mouseup mousedown', 'a', function (e) {
          this.blur();
        });
        this.$el.on('mouseup mousedown', 'button', function (e) {
          this.blur();
        });

        $(document).on('keydown.disableDefaultKeys', this._disableKeyboardShortcuts.bind(this));
        $(document).on('keydown.navKeys', keyboard.createConditionalKeyHandler(
          this._handleNavigationKeys.bind(this)
        ));

        return this;
      },

      /**
       * Hide.
       * @return {MainView} this
       */
      hide: function () {
        this.$el.hide();
        $(this._fileViewer._config.appendTo).removeClass('no-scroll');

        $(document).off('keydown.disableDefaultKeys');
        $(document).off('keydown.navKeys');
        $(document).off('keydown.modeKeys');

        this._deactivateModeHook();
        this._modes[this._mode].teardown(this);
        this._teardownAll();

        return this;
      },

      /**
       * Render.
       * @return {MainView} this
       */
      render: function () {
        this.$el.empty().append(templateStore.get('fileView')());

        this.$header = this.$('#cp-header');
        this.$body = this.$('#cp-body');
        this.$footer = this.$('#cp-footer');

        this.$title = this.fileTitleView.render().$el.appendTo(this.$header);
        this.$controls = this.fileControlsView.render().$el.appendTo(this.$header);

        this.$content = this.fileContentView.render().$el.appendTo(this.$body);
        this.$sidebar = this.fileSidebarView.render().$el.appendTo(this.$body);

        this.$meta = this.fileMetaView.render().$el.appendTo(this.$footer);
        this.$sink = this.fileSinkView.render().$el.appendTo(this.$footer);

        this.$el.on('click', 'a[href="#"]', function (e) {
          e.preventDefault();
        });

        this._focusManager.trapFocus();

        return this;
      },

      /**
       * MainView is starting to show the content of a new file.
       *
       * If the file src and type didn't change, this event won't be triggered.
       * If the file doesn't exist, this evemt won't be triggered as well.
       *
       * @event MainView~'fv.fileChange'
       */

      /**
       * Internal event to allow people to stop what they are doing when
       * the user already switched to the next file.
       *
       * @event MainView~'cancelShow'
       */

      /**
       * Show the given file. If one of the following conditions is true
       *
       *   1. file is invalid
       *   2. no viewer for that fileType is registered
       *   3. the viewer code can't be loaded
       *   4. the viewer couldn't be created
       *
       * then the returned promise is rejected. In that case, fileView changes
       * state and displays the error internally.
       *
       * When the new file and the current file have the same src and type attributes,
       * this method will not perform a re-rendering.
       *
       * @param {File} file
       * @return {Promise.<File>} the given file
       * @fires {MainView~'fv.fileChange'}
       * @fires {MainView~'cancelShow'}
       */
      showFile: function (file) {
        var needsToRerenderContent = !this.fileContentView.isLayerInitialized('content') || MainView._needsToRerenderContent(this._currentFile, file);

        if (MainView._filesWillRenderTheSame(this._currentFile, file)) {
          return MainView._skipRenderingOf(file);
        }

        var contentView, toolbarView, spinnerView, waitingView, errorView;

        var lookupViewerCommand = new Commands.LookupViewer(file, this._fileViewer._viewerRegistry);

        // allow people to shut down themselves
        this.trigger('cancelShow');

        var fileViewed = new $.Deferred();

        this._showFileChain.pipe(function () {
          var fileHandled = new $.Deferred();

          var p = $.when().pipe(function validateFile () {

            this._currentFile = file;
            this._viewState = null;
            var validationResult;

            if (file) {
              if (needsToRerenderContent) {
                this.trigger('fv.fileChange', file);
                this._reinitializeAllSubviews();
              } else {
                this._reinitializeNonContentSubviews();
              }

              contentView = this.fileContentView.getLayerForName('content');
              toolbarView = this.fileContentView.getLayerForName('toolbar');
              spinnerView = this.fileContentView.getLayerForName('spinner');
              waitingView = this.fileContentView.getLayerForName('waiting');
            } else {
              this._viewState = 'fileNotFound';
              this._reinitializeCoreSubviews();
              validationResult = rejectWithError("The file does not exist.");
            }
            errorView = this.fileContentView.getLayerForName('error');
            this._deactivateModeHook();
            this._activateModeHook();

            if (this && this._fileViewer && this._fileViewer.lastFocusId) {
              $('#' + this._fileViewer.lastFocusId).focus();
            }

            return validationResult;
          }.bind(this));

          if (needsToRerenderContent) {
            p = p.pipe(function getConverted () {
              var isPreviewGenerated = this._fileViewer.getConfig().isPreviewGenerated;
              var generatePreview = this._fileViewer.getConfig().generatePreview;

              spinnerView.startSpin();

              if (this._fileViewer.supports(file.get('type'))) {
                return $.when(file.get('src'), file.get('type'));
              }

              if (!(isPreviewGenerated && generatePreview)) {
                return $.when(file.get('src'), file.get('type'));
              }

              return isPreviewGenerated(file).pipe(function (isGenerated, source, type, overwrites) {
                if (isGenerated) {
                  return $.when(source, type, overwrites);
                }

                spinnerView.stopSpin();
                waitingView.showMessage(
                  file,
                  "Your preview is on its way!",
                  "In a hurry? You can download the original right now."
                );

                return generatePreview(file).always(function () {
                  waitingView.clearMessage();
                  spinnerView.startSpin();
                });
              });

            }.bind(this))
            .pipe(lookupViewerCommand.execute.bind(lookupViewerCommand))
            .pipe(function createViewer (Viewer, previewSrc, convertedFile) {

              var readyDeferred = new $.Deferred();
              var view = new Viewer({
                previewSrc: previewSrc,
                model: new File(convertedFile.toJSON()),
                fileViewer: this._fileViewer
              });

              view.once('viewerReady', function () {
                this._viewState = 'success';
                toolbarView.setViewer(view);
                this.setupMode(this._mode);
                readyDeferred.resolve(file);
              }.bind(this));
              view.once('viewerFail', function (err) {
                this._viewState = 'viewerError';
                readyDeferred.reject(err);
                this.setupMode(this._mode);
              }.bind(this));

              contentView.attachViewer(view);

              view.render();

              return readyDeferred.promise();

            }.bind(this))
            .always(function () {
              spinnerView && spinnerView.stopSpin();
              waitingView && waitingView.clearMessage();
            }.bind(this))
            .fail(function (err) {
              fileViewed.reject(err);
              if (err !== 'cancelled') {
                errorView.showErrorMessage(err, file);
              }
            }.bind(this));
          }

          p.done(function () {
            fileViewed.resolve(file);
          })
          .always(function () {
            fileHandled.resolve();
          }.bind(this));

          return fileHandled.promise();
        }.bind(this));

        return fileViewed.promise();
      },

      /**
       * Return the currently shown file.
       * @returns {null|File} the file being shown
       */
      getCurrentFile: function () {
        return this._currentFile;
      },

      /**
       * Return the current view state.
       * Can be any of the following
       * loading, fileNotFound, viewerError, success
       * @returns {String}
       */
      getViewState: function () {
        return this._viewState || 'loading';
      },

      _reinitializeAllSubviews: function () {
        if (!this.fileTitleView.isAnyPanelInitialized()) {
          this.fileTitleView.initializePanel();
        }
        this.fileTitleView.reinitializePanel();

        this.fileControlsView.reinitializeLayers();
        this.fileContentView.reinitializeLayers();
        this.fileSidebarView.reinitializePanel();
        this.fileMetaView.reinitializeLayers();
        this.fileSinkView.reinitializePanel();

        this._updateMetaBannerHeight();
      },

      _reinitializeNonContentSubviews: function () {
        if (!this.fileTitleView.isAnyPanelInitialized()) {
          this.fileTitleView.initializePanel();
        }
        this.fileTitleView.reinitializePanel();

        this.fileControlsView.reinitializeLayers();
        this.fileSidebarView.reinitializePanel();
        this.fileMetaView.reinitializeLayers();
        this.fileSinkView.reinitializePanel();

        this._updateMetaBannerHeight();
      },

      _reinitializeCoreSubviews: function () {
        this._teardownAll();

        this.fileControlsView.initializeLayerSubset(['closeButton']);
        this.fileContentView.initializeLayerSubset(['arrows', 'error']);
      },

      _teardownAll: function () {
        this.fileTitleView.teardownPanel();
        this.fileSidebarView.teardownPanel();
        this.fileSinkView.teardownPanel();
        this.fileMetaView.teardownLayers();
        this.fileControlsView.teardownLayers();
        this.fileContentView.teardownLayers();
        this._focusManager.releaseFocus();
      },

      _handleNavigationKeys: function (e) {
        var numFiles = this._fileViewer._files.length;
        var usedModifierKey = e.altKey || e.ctrlKey || e.metaKey || e.shiftKey;

        if (e.which === keyboard.keys.ESCAPE && !this.isNavigationLocked()) {
          e.preventDefault();
          this._fileViewer.analytics.send('files.fileviewer-web.closed', {
            actionType: 'hotkey'
          });
          this._fileViewer.close();
        } else if (
          !usedModifierKey &&
          !this.isNavigationLocked() &&
          numFiles > 1 &&
          e.which === keyboard.keys.ARROW_RIGHT
        ) {
          e.preventDefault();
          this._fileViewer.showFileNext().always(
            this._fileViewer.analytics.fn('files.fileviewer-web.next', {
              actionType: 'hotkey',
              mode: this._fileViewer.getMode()
            })
          );
        } else if (
          !usedModifierKey &&
          !this.isNavigationLocked() &&
          numFiles > 1 &&
          e.which === keyboard.keys.ARROW_LEFT
        ) {
          e.preventDefault();
          this._fileViewer.showFilePrev().always(
            this._fileViewer.analytics.fn('files.fileviewer-web.prev', {
              actionType: 'hotkey',
              mode: this._fileViewer.getMode()
            })
          );
        }
      },

      /**
       * Lock navigation keys. Navigation keys will be disabled until all
       * locks are removed again with unlockNavigationKeys.
       */
      lockNavigationKeys: function () {
        this._navigationKeyLockCount += 1;
      },

      /**
       * Unlock navigation keys.
       */
      unlockNavigationKeys: function () {
        if (this._navigationKeyLockCount >= 1) {
          this._navigationKeyLockCount -= 1;
        }
      },

      /**
       * Checks if the navigation is locked.
       */
      isNavigationLocked: function () {
        return this._navigationKeyLockCount !== 0;
      },

      _disableKeyboardShortcuts: function (e) {
        if (e.ctrlKey || e.metaKey) {
          switch (e.which) {
            case keyboard.keys.F:
            case keyboard.keys.G:
              // disable search keyboard shortcut
              e.preventDefault();
              break;
            case keyboard.keys.P:
              // disable print keyboard shortcut
              e.preventDefault();
              break;
          }
        }
      },

      _onClickToBackground: function (e) {
        // @TODO: Remove after cleaning modes setup, hooks etc.
        var mode = this._fileViewer._view._modes[this._fileViewer._view._mode];
        if (mode.disableClickBackgroundCloses) {
          return;
        }
        var backgroundLayers = [
          'cp-error-layer',
          'cp-waiting-layer',
          'cp-password-layer'
        ];
        if (backgroundLayers.indexOf(e.target.className) >= 0) {
          this._fileViewer.analytics.send('files.fileviewer-web.closed', {
            actionType: 'element'
          });
          this._fileViewer.close();
        }
      },

      _updateContentWidth: function (panelId, isExpanded) {
        this.$content && this.$content.toggleClass('narrow', isExpanded);
        this._resizeActiveViewer();
      },

      _updateContentHeight: function (panelId, isExpanded) {
        this.$content && this.$content.toggleClass('short', isExpanded);
        this.$sidebar && this.$sidebar.toggleClass('short', isExpanded);
        this._resizeActiveViewer();
      },

      _updateMetaBannerHeight: function () {
        var showsMetaView = this.fileMetaView.countInitializedLayers() > 0;
        this.fileContentView.$el.toggleClass('meta-banner', showsMetaView);
        this.fileSidebarView.$el.toggleClass('meta-banner', showsMetaView);
      },

      _resizeActiveViewer: function () {
        if (this.fileContentView.isLayerInitialized('content')) {
          var contentView = this.fileContentView.getLayerForName('content');
          var viewer = contentView.getAttachedViewer();
          if (viewer) { viewer.handleResize(); }
        }
      },

      // aui tooltips (tipsy) are appended to body. A tooltip will thus stay alive
      // if the trigger element is removed. In here, we clean them up manually
      // whenever a file changes or the whole viewer is closed.
      _fixTooltipCleanup: function () {
        var removeAllTooltips = function () { $('.tipsy').remove(); };
        this._fileViewer.on('fv.changeFile', removeAllTooltips);
        this._fileViewer.on('fv.close', removeAllTooltips);
      },

      /**
       * Return the current mode.
       * @returns {string}
       */
      getMode: function () {
        return this._mode || '';
      },

      /**
       * Check if FileView is in the given mode.
       * @param {string} mode either 'BASE' or 'PRESENTATION'
       * @returns {boolean}
       */
      isInMode: function (mode) {
        return this._mode === mode;
      },

      /**
       * Change current view mode to the given mode.
       * @param {string} mode either 'BASE' or 'PRESENTATION'
       */
      setupMode: function (mode) {
        var toolbar = this.fileContentView.getLayerForName('toolbar');
        var viewer = toolbar._viewer;
        var $arrowLayer = this.fileContentView.getLayerForName('arrows').$el;

        var lastMode = this._mode;
        var isModeChanged = (lastMode !== mode);

        var modeObj = this._modes[mode];
        var lastModeObj = this._modes[lastMode];

        if (isModeChanged) {
          this._deactivateModeHook();
          this._mode = mode;
          this._activateModeHook();
        } else {
          this._mode = mode;
        }

        $(document).off('keydown.modeKeys');
        lastModeObj.teardown(this, viewer, isModeChanged);
        modeObj.setup(this, viewer);

        // update arrow layer
        $arrowLayer.toggle(modeObj.showsArrowLayer);

        // update toolbar actions
        toolbar.setActions(modeObj.toolbarActions);
        toolbar.render();

        // notify viewer
        if (viewer && viewer.setupMode) {
          viewer.setupMode(mode, isModeChanged);
        }
      },

      _activateModeHook: function () {
        var mode = this._modes[this._mode];
        if (mode.activateHook) {
          mode.activateHook(this);
        }
      },

      _deactivateModeHook: function () {
        var mode = this._modes[this._mode];
        if (mode.deactivateHook) {
          mode.deactivateHook(this);
        }
      },

      updatePaginationButtons: function () {
        if (this.isInMode('PRESENTATION')) {
          var toolbar = this.fileContentView.getLayerForName('toolbar');
          if (!toolbar._viewer) {
            return;
          }

          var $toolbarPrevPage = toolbar.$el.find('.cp-toolbar-prev-page');
          var $toolbarNextPage = toolbar.$el.find('.cp-toolbar-next-page');

          $toolbarPrevPage.toggleClass('inactive', false);
          $toolbarNextPage.toggleClass('inactive', false);

          if (!(toolbar._viewer.hasPreviousPage() || toolbar._viewer.hasNextPage())) {
            $toolbarPrevPage.hide();
            $toolbarNextPage.hide();
          } else if (!toolbar._viewer.hasPreviousPage()) {
            $toolbarPrevPage.toggleClass('inactive', true);
          } else if (!toolbar._viewer.hasNextPage()) {
            $toolbarNextPage.toggleClass('inactive', true);
          }
        }
      }
    });

    MainView._filesWillRenderTheSame = function (fileA, fileB) {
      if (!fileA || !fileB) { return false; }
      return _.isEqual(fileA.attributes, fileB.attributes);
    };

    MainView._needsToRerenderContent = function (fileA, fileB) {
      if (!fileA || !fileB) { return true; }
      var didTypeChange = fileA.get('type') !== fileB.get('type');
      var didSrcChange = fileA.get('src') !== fileB.get('src');
      var didThumbChange = fileA.get('thumbnail') !== fileB.get('thumbnail');
      return didTypeChange || didSrcChange || didThumbChange;
    };

    MainView._skipRenderingOf = function (file) {
      return $.when(file);
    };

    return MainView;
  });

define('module-store-singleton', [
  'module-store'
], function (
  ModuleStore
) {
  'use strict';

  /**
   * Global module store. This simplifies development until FileViewer core
   * stabilizes, the plugin interface is ready and the view hierarchy is
   * clear.
   *
   * @todo remove singleton
   */
  return new ModuleStore();
});
define('module-store', [
  'assert',
  'jquery',
  'underscore'
], function (
  assert,
  $,
  _
) {
  'use strict';

  /**
   * Provides modules by asking a previously configured backend.
   *
   * As modules can be loaded async, a promise is always returned.
   *
   * A backend is a function that accepts a module path and returns the
   * matched module. If no module is found, it returns undefined.
   *
   * @constructor
   */
  var ModuleStore = function () {
    this._backend = null;
  };

  /**
   * Checks if backend is a valid backend.
   * @param {*} backend
   * @return {bool}
   */
  ModuleStore.validBackend = function (backend) {
    return _.isFunction(backend);
  };

  /**
   * Asks its backend for the given modulePath and returns a promise.
   * @param {string} modulePath
   * @return {Promise}
   * @throws {Error} if backend is invalid
   */
  ModuleStore.prototype.get = function (modulePath) {
    assert(ModuleStore.validBackend(this._backend), 'backend is valid');
    return $.when(this._backend(modulePath));
  };

  /**
   * Sets a backend for this module store.
   * @param {function} backend
   * @throws {Error} if backend is invalid
   */
  ModuleStore.prototype.useBackend = function (backend) {
    assert(ModuleStore.validBackend(backend), 'backend is valid');
    this._backend = backend;
  };

  return ModuleStore;
});
define('MoreButton', [
  'jquery', 'underscore', 'backbone', 'template-store-singleton'
], function ($, _, Backbone, templateStore) {
  'use strict';

  var MoreButton = Backbone.View.extend({

    tagName: 'span',

    initialize: function (options) {
      this._fileViewer = options.fileViewer;
      this._fileActions = [];
    },

    render: function () {
      this.$el.html(templateStore.get('moreButton')());
      var $dropdown = this.$el.find('#cp-more-menu'),
        $menu = $dropdown.find('ul');

      // prevent the tooltip from showing when the menu is open
      $dropdown.on({
        'aui-dropdown2-show': function () {
          this.$('button').tipsy('disable');
        }.bind(this),
        'aui-dropdown2-hide': function () {
          this.$('button').tipsy('enable');
        }.bind(this)
      });

      var currentFile = this._fileViewer._fileState.getCurrent();

      this.$('button').tooltip({ gravity: 'n' });
      if (this._fileActions.length) {
        this._fileActions.forEach(function (item) {
          var $item = $(templateStore.get('moreMenuItem')({text: item.text}));
          $item.click(function (e) {
            e.preventDefault();
            item.callback(currentFile);
          });
          $menu.append($item);
        });
        this._show();
      } else {
        this._hide();
      }

      return this;
    },

    addFileAction: function (opts) {
      var match = _.findWhere(this._fileActions, {key: opts.key});

      if (match) {
        // overwrite the properties of the old action with the new ones
        _.extend(match, {
          key: opts.key,
          text: opts.text,
          callback: opts.callback
        });
      } else {
        this._fileActions.push({
          key: opts.key,
          text: opts.text,
          callback: opts.callback
        });
      }

      this.render();
    },

    removeFileAction: function (action) {
      var index = _.indexOf(this._fileActions, action);
      this._fileActions.splice(index, 1);

      this.render();
    },

    _show: function () {
      this.$el.css('display', 'inline');
    },

    _hide: function () {
      this.$el.css('display', 'none');
    }
  });

  return MoreButton;
});

define('panel-container-view', [
  'backbone',
  'assert',
  'constants-dictionary'
], function (
  Backbone,
  assert,
  ConstantsDictionary
) {
  'use strict';

  var PanelContainerView = Backbone.View.extend({

    className: 'panel-view',

    /**
     * @constructor
     * @param {object} options
     */
    initialize: function (options) {
      this._panelViewsByName = new ConstantsDictionary();
      this._currentPanel = null;
      this._currentPanelName = null;
      this._lastAddedPanelName = null;
      this._fileViewer = options.fileViewer;
    },

    /**
     * Checks if a panel with the given name exists.
     * @param {string} name
     * @return {bool}
     */
    hasPanelView: function (name) {
      return this._panelViewsByName.isDefined(name);
    },

    /**
     * Adds a View as a panel with a certain, unique name.
     * @param {string} name
     * @param {Backbone.View} PanelView
     * @throws Error if name is already used.
     */
    addPanelView: function (name, PanelView) {
      this._panelViewsByName.define(name, PanelView);
      this._lastAddedPanelName = name;
    },

    /**
     * Checks wether any panel is currently initialized.
     * @return {bool}
     */
    isAnyPanelInitialized: function () {
      return this.$el.is('.expanded');
    },

    /**
     * Checks wether a panel with the given name is currently initialized.
     * @param {string} name
     * @return {bool}
     */
    isPanelInitialized: function (name) {
      return this._currentPanelName === name;
    },

    /**
     * Initializes the panel with the given name. Then re-renders itself.
     * @param name {String} name of the panel to be initialized. If empty, then use the last added (using addPanelView) panel.
     * @fires initializePanel(panelName)
     * @fires togglePanel(panelName, isInitialized)
     * @throws Error if a panel is already initialized or the panel doesn't exist
     */
    initializePanel: function (name) {
      name = name || this._lastAddedPanelName;
      assert(this.isAnyPanelInitialized() === false, 'no panel is initialized');
      assert(this.hasPanelView(name) === true, 'panel exists');

      var PanelView = this._panelViewsByName.lookup(name);

      this._currentPanelName = name;
      this._currentPanel = new PanelView({
        collection: this.collection,
        fileViewer: this._fileViewer,
        panelView: this
      });

      this.$el.toggleClass('expanded', true);

      this.trigger('initializePanel', this._currentPanelName);
      this.trigger('togglePanel', this._currentPanelName, true);

      this.render();
    },

    /**
     * Tears the initialized panel down and removes it. Then re-renders itself.
     * Won't throw if there's no initialized panel.
     * @fires togglePanel(panelName, isInitialized)
     * @fires teardownPanel(panelName)
     */
    teardownPanel: function () {
      if (this._currentPanel) {
        if (this._currentPanel.teardown) {
          this._currentPanel.teardown();
        }
        this._currentPanel.remove();
      }

      this.$el.toggleClass('expanded', false);

      this.trigger('togglePanel', this._currentPanelName, false);
      this.trigger('teardownPanel', this._currentPanelName);

      this._currentPanelName = null;
      this._currentPanel = null;

      this.render();
    },

    /**
     * Utility method. Recreates the current PanelView (if there is one).
     */
    reinitializePanel: function () {
      if (!this.isAnyPanelInitialized()) { return; }

      var previousPanel = this.getInitializedPanelName();
      this.teardownPanel();
      this.initializePanel(previousPanel);
    },

    /**
     * Returns the name of the instanciated PanelView.
     * @return {string} panelName
     * @throws {Error} if no panel is initialized
     */
    getInitializedPanelName: function () {
      assert(this.isAnyPanelInitialized(), 'a panel is initialized');
      return this._currentPanelName;
    },

    /**
     * Returns the instanciated PanelView.
     * @return {PanelView}
     * @throws {Error} if no panel is initialized
     */
    getInitializedPanel: function () {
      return this._currentPanel;
    },

    /**
     * Renders the initialized panel.
     * Won't throw if no panel is initialized.
     * @fires renderPanel(panelName)
     */
    render: function () {
      this.$el.empty();

      if (this.isAnyPanelInitialized()) {
        this._currentPanel.render();
        this._currentPanel.$el.appendTo(this.$el);
      }
      this.trigger('renderPanel', this._currentPanelName);

      return this;
    }

  });

  return PanelContainerView;
});
define('PasswordLayer', [
  'ajs',
  'backbone',
  'jquery',
  'keyboard',
  'template-store-singleton'
], function (
  AJS,
  Backbone,
  $,
  keyboard,
  templateStore
) {
  'use strict';

  var pdfjsPasswordResponses = {
    NEED_PASSWORD: 1,
    INCORRECT_PASSWORD: 2
  };

  var fullscreenEvents = [
    'fullscreenchange',
    'webkitfullscreenchange',
    'mozfullscreenchange',
    'MSFullscreenChange'
  ].join(' ');

  var isFullscreen = function () {
    return (document.fullscreenElement ||
      document.mozFullScreen ||
      document.webkitIsFullScreen ||
      document.msFullscreenElement);
  };

  var PasswordLayer = Backbone.View.extend({

    className: 'cp-password-layer',

    events: {
      'keydown .cp-password-input': '_handleKeyDown',
      'click .cp-password-button': '_handleClick',
      'focus .cp-password-input': '_lockNavigation',
      'blur .cp-password-input': '_unlockNavigation'
    },

    initialize: function (options) {
      this._fileViewer = options.fileViewer;
      this.$el.hide();
    },

    teardown: function () {
      $(document).off(fullscreenEvents, this.updatePasswordLayer.bind(this));
    },

    /**
     * Show the password input layer
     * @param  {Number}   reason     Reason PDFJS why needs the password
     * @param  {Callback} updatePassword
     */
    showPasswordInput: function (reason, updatePassword) {
      $(document).on(fullscreenEvents, this.updatePasswordLayer.bind(this));
      this.updatePassword = updatePassword;
      this._fileViewer._view.fileContentView.getLayerForName('spinner').stopSpin();
      this.$el.show().html(templateStore.get('passwordLayer')({
        prompt: this._getPromptTitle(reason)
      }));
      this.updatePasswordLayer();
      this._showToolbar();
    },

    hidePasswordInput: function () {
      $(document).off(fullscreenEvents, this.updatePasswordLayer.bind(this));
      this.$el.empty();
      this.$el.hide();
    },

    /**
     * Update the passwordLayer depending on fullsccren/no fullscreen
     * Safari/Firefox can't handle keyboard inputs in fullscreen
     */
    updatePasswordLayer: function () {
      if (isFullscreen()) {
        this.$el.find('.cp-password-base').hide();
        this.$el.find('.cp-password-fullscreen').show();
      } else {
        this.$el.find('.cp-password-fullscreen').hide();
        this.$el.find('.cp-password-base').show();
      }
    },

    /**
     * Get i18n string for password prompt based on reason
     * @param  {Number} reason Reason PDFJS why needs the password
     * @return {String}
     */
    _getPromptTitle: function (reason) {
      var title = "Please enter the password to view this file.";
      if (reason === pdfjsPasswordResponses.INCORRECT_PASSWORD) {
        title = "Invalid password. Please try again.";
      }
      return title;
    },

    /**
     * Show passwordLayer and toolbar
     */
    _showToolbar: function () {
      var view  = this._fileViewer._view;
      var toolbar = view.fileContentView.getLayerForName('toolbar');
      var mode  = view._modes[view._mode];
      toolbar.setActions(mode.toolbarActions);
      toolbar.render();
    },

    /**
     * Check if password was given and call `updatePassword()`
     */
    _updatePassword: function () {
      var password = this.$el.find('.cp-password-input').val();
      if (password && password.length > 0) {
        this.hidePasswordInput();
        this.updatePassword(password);
      }
    },

    /**
     * Lock navigation keys
     */
    _lockNavigation: function () {
      this._fileViewer._view._navigationKeyLockCount++;
    },

    /**
     * Unlock navigation keys
     */
    _unlockNavigation: function () {
      this._fileViewer._view._navigationKeyLockCount--;
    },

    _handleClick: function (ev) {
      ev.preventDefault();
      this._updatePassword();
    },

    _handleKeyDown: function (ev) {
      if (ev.which === keyboard.keys.RETURN) {
        ev.preventDefault();
        return this._updatePassword();
      }
      if (ev.which === keyboard.keys.ESCAPE) {
        ev.preventDefault();
        return this._fileViewer.close();
      }
    }

  });

  return PasswordLayer;
});

define('pdf-view-provider', [
  'jquery',
  'file',
  'module-store-singleton'
], function (
  $,
  File,
  moduleStore
) {
  'use strict';

  var asyncViewerResource = null,
    asyncConfigResource = null;

  /**
   * Returns a pdf viewer.
   * @returns {Promise}
   */
  var pdfViewProvider = function () {
    if (!asyncViewerResource) {
      asyncViewerResource = moduleStore.get('pdf-viewer');
    }
    if (!asyncConfigResource) {
      asyncConfigResource = moduleStore.get('pdf-config');
    }

    var viewerInstance = $.Deferred();

    $.when(asyncViewerResource, asyncConfigResource).done(function (viewer, config) {
      var PDFViewer = require('pdf-view');

      // FIL-1811: Use UMD for loading PDFJS
      var PDFJS = window.PDFJS;
      PDFJS.workerSrc = config.workerSrc;
      PDFJS.cMapUrl = config.cMapUrl;

      viewerInstance.resolve(PDFViewer);
    });

    return viewerInstance.promise();
  };

  return pdfViewProvider;
});

define('presentationMode', ['jquery', 'keyboard'], function ($, keyboard) {
  'use strict';

  var AJS = window.AJS;

  var requestFullscreen = function () {
    var fullscreenContainer = $('#cp-file-body')[0];

    if (fullscreenContainer.requestFullscreen) {
      fullscreenContainer.requestFullscreen();
    } else if (fullscreenContainer.mozRequestFullScreen) {
      fullscreenContainer.mozRequestFullScreen();
    } else if (fullscreenContainer.webkitRequestFullScreen) {
      fullscreenContainer.webkitRequestFullScreen();
    } else if (fullscreenContainer.msRequestFullscreen) {
      fullscreenContainer.msRequestFullscreen();
    }
  };

  var cancelFullscreen = function () {
    if (document.cancelFullscreen) {
      document.cancelFullscreen();
    } else if (document.mozCancelFullScreen) {
      document.mozCancelFullScreen();
    } else if (document.webkitCancelFullScreen) {
      document.webkitCancelFullScreen();
    } else if (document.msExitFullscreen) {
      document.msExitFullscreen();
    }
  };

  var isFullscreen = function () {
    return (document.fullscreenElement ||
      document.mozFullScreen ||
      document.webkitIsFullScreen ||
      document.msFullscreenElement);
  };

  var onFullscreenChange = function (e) {
    // if user click Esc to exit fullscreen instead of clicking 'exit presentation' button
    // then change view mode to 'BASE'
    if (!isFullscreen() && !this.isInMode('BASE')) {
      this._fileViewer.analytics.send('files.fileviewer-web.presentation.exit', {
        actionType: 'hotkey'
      });
      this._fileViewer.changeMode('BASE');
    }
  };

  var presentationMode = {

    activateHook: function (mainView) {
      $(document).on('fullscreenchange webkitfullscreenchange mozfullscreenchange MSFullscreenChange',
        onFullscreenChange.bind(mainView));
      var $arrowLayer = mainView.fileContentView.getLayerForName('arrows').$el;
      $arrowLayer.toggle(this.showsArrowLayer);
    },

    deactivateHook: function (mainView) {
      $(document).off('fullscreenchange webkitfullscreenchange mozfullscreenchange MSFullscreenChange',
        onFullscreenChange.bind(mainView));
    },

    setup: function (mainView, viewer) {
      this._originalScrollTop = $('body').scrollTop();
      $('#cp-file-body').addClass('presentation');
      $(document).on('keydown.modeKeys', this._handleKeys.bind(mainView));

      if (!isFullscreen()) { requestFullscreen(); }
    },

    teardown: function (mainView, viewer, isModeChanged) {
      $('#cp-file-body').removeClass('presentation');
      $(document).off('keydown.modeKeys');

      if (isModeChanged && isFullscreen()) { cancelFullscreen(); }
      // this is to fix an issue on Chrome that
      // when entering and exiting fullscreen mode, the document body got scrolled up
      $('body').scrollTop(this._originalScrollTop);
    },

    disableClickBackgroundCloses: true,

    showsArrowLayer: false,

    _handleKeys: function (e) {
      e.preventDefault();
      var contentView, viewer;

      if (this.fileContentView.isLayerInitialized('content')) {
        contentView = this.fileContentView.getLayerForName('content');
        viewer = contentView.getAttachedViewer();
      }
      if (!viewer) { return; }
      if (e.ctrlKey || e.metaKey) {
        return;
      }

      switch (e.which) {
        case keyboard.keys.ARROW_UP:
          if (viewer.goToPreviousPage) {
            this._fileViewer.analytics.send('files.fileviewer-web.presentation.pageprev', {
              actionType: 'hotkey'
            });
            viewer.goToPreviousPage();
            this.updatePaginationButtons();
          }
          return;
        case keyboard.keys.ARROW_DOWN:
          if (viewer.goToNextPage) {
            this._fileViewer.analytics.send('files.fileviewer-web.presentation.pagenext', {
              actionType: 'hotkey'
            });
            viewer.goToNextPage();
            this.updatePaginationButtons();
          }
          return;
      }

    },

    toolbarActions: [
      {
        title: "Previous page",
        className: 'cp-toolbar-prev-page',
        predicate: function () { return this._viewer && this._viewer.goToPreviousPage; },
        handler: function () {
          if (this._viewer && this._viewer.goToPreviousPage) {
            this._fileViewer.analytics.send('files.fileviewer-web.presentation.pageprev', {
              actionType: 'button'
            });
            this._viewer.goToPreviousPage();
            this._fileViewer.getView().updatePaginationButtons();
          }
        }
      },
      {
        title: "Exit Presentation",
        className: 'cp-toolbar-presentation-exit',
        handler: function () {
          this._fileViewer.analytics.send('files.fileviewer-web.presentation.exit', {
            actionType: 'button'
          });
          this._fileViewer.changeMode('BASE');
        }
      },
      {
        title: "Next page",
        className: 'cp-toolbar-next-page',
        predicate: function () { return this._viewer && this._viewer.goToNextPage; },
        handler: function () {
          if (this._viewer && this._viewer.goToNextPage) {
            this._fileViewer.analytics.send('files.fileviewer-web.presentation.pagenext', {
              actionType: 'button'
            });
            this._viewer.goToNextPage();
            this._fileViewer.getView().updatePaginationButtons();
          }
        }
      }
    ]
  };

  return presentationMode;
});

define('soy-template-backend', [], function () {
  'use strict';

  /* global FileViewer */
  // FileViewer is defined in support/wrapper-plugin-footer.js

  // Returns a value from a nested object, example:
  // obj = { a: { b: { c: 'x' } } }
  // getNestedProperty(obj, 'a.b.c') -> 'x'
  var getNestedProperty = function (obj, prop) {
    var levels = prop.split('.');
    var i;
    for (i = 0; i < levels.length; i++) {
      obj = obj[levels[i]];
    }
    return obj;
  };

  return function (fileViewer) {
    /**
     * Picks the specified template url from the auto-generated template object.
     * @param {string} templateUrl
     * @return {function}
     */
    return function (templateUrl) {
      return getNestedProperty(FileViewer.Templates, templateUrl);
    };
  };
});

define('SpinnerLayer', [
  'backbone', 'template-store-singleton'
], function (Backbone, templateStore) {
  'use strict';

  // Spinner rendering
  var SPINNER_SIZE = 'large';
  var SPINNER_STYLE = {
    color: '#fff',
    zIndex: 'auto'
  };

  /**
   * Loading spinner in the middle of the file content.
   * @constructor
   */
  var SpinnerLayer = Backbone.View.extend({

    className: 'cp-spinner-layer',

    initialize: function () {
      this._updateElements();
    },

    render: function () {
      this.$el.html(templateStore.get('fileBodySpinner')());
      this._updateElements();
      return this;
    },

    /**
     * Instruct the spinner to start.
     */
    startSpin: function () {
      this.$spinner.spin(SPINNER_SIZE, SPINNER_STYLE);
    },

    /**
     * Instruct the spinner to stop.
     */
    stopSpin: function () {
      this.$spinner.spin(false);
    },

    _updateElements: function () {
      this.$spinner = this.$el.find('.cp-spinner');
    }

  });

  return SpinnerLayer;
});
define('storage', ['assert'], function (assert) {
  'use strict';

  /**
   * Universal key-value store using localStorage or
   * optionally a `customStorage` object can be passed in.
   * @constructor
   * @param {Object} customStorage - Object with setItem, getItem, removeItem methods.
   * @param {Function} customStorage.setItem - Custom set method
   * @param {Function} customStorage.getItem - Custom get method
   * @param {Function} customStorage.removeItem - Custom remove method
   * @param {String} namespace - Namespace to prefix storage keys with
   */
  var Storage = function (customStorage, namespace) {
    this._namespace = namespace || '';
    this._storage = this._getStorage(customStorage);
  };

  /**
   * Return corresponding value to given key.
   * - can store arbitrary json structs for certain values
   *   (not any value, functions won't work for example)
   * - for better performance, try to have more keys and less structs
   *   (cause big structs are slow)
   * @param  {String} key
   * @return {*}
   */
  Storage.prototype.getItem = function (key) {
    var storageValue;
    key = this._namespace + key.toString();
    storageValue = new StorageValue();
    storageValue.fromJSON(this._storage.getItem(key));
    if (storageValue.isExpired()) {
      this._storage.removeItem(key);
      return;
    }
    return storageValue.value;
  };

  /**
   * Store given value for with given key.
   * @param {String} key
   * @param {*}    value
   * @param {Number} expiry - Expire n milliseconds from now
   */
  Storage.prototype.setItem = function (key, value, expiry) {
    key = this._namespace + key.toString();
    this._storage.setItem(
      key,
      new StorageValue(value, expiry).toJSON()
    );
  };

  /**
   * Remove storage entry for key.
   * @param {String} key
   */
  Storage.prototype.removeItem = function (key) {
    key = this._namespace + key.toString();
    this._storage.removeItem(key);
  };

  // Check if window.localStorage is available.
  Storage.prototype._hasLocalStorage = function () {
    var test = this._namespace + 'hasLocalStorage';

    try {
      localStorage.setItem(test, test);
      localStorage.removeItem(test);
      return true;
    } catch (e) {
      return false;
    }
  };

  // Return the proper storage object.
  Storage.prototype._getStorage = function (customStorage) {
    if (customStorage) {
      assert(
      typeof customStorage.setItem === 'function',
      'Storage custom.setItem is a function'
      );
      assert(
      typeof customStorage.getItem === 'function',
      'Storage custom.getItem is a function'
      );
      assert(
      typeof customStorage.removeItem === 'function',
      'Storage custom.removeItem is a function'
      );
      return customStorage;
    } else if (this._hasLocalStorage()) {
      return Storage.localStorage;
    }
    return Storage.noStorage;
  };

  Storage.noStorage = {
    setItem: function () {},
    getItem: function () {},
    removeItem: function () {}
  };

  Storage.localStorage = {
    setItem: function (key, value) {
      window.localStorage.setItem(key, value);
    },

    getItem: function (key) {
      return window.localStorage.getItem(key);
    },

    removeItem: function (key) {
      window.localStorage.removeItem(key);
    }
  };

  /**
   * StorageValue
   * @param {*}    value
   * @param {Number} expiry - Expire n milliseconds from now
   */
  var StorageValue = Storage.StorageValue = function (value, expiry) {
    this.value  = value;
    this._setExpiry(expiry);
  };

  StorageValue.prototype._setExpiry = function (expiry) {
    if (parseInt(expiry)) {
      this.expiry = Date.now() + expiry;
    } else {
      this.expiry = null;
    }
  };

  /**
   * Checks if the expiry time is in the past
   * @return {Boolean}
   */
  StorageValue.prototype.isExpired = function () {
    return this.expiry && Date.now() > this.expiry;
  };

  /**
   * Sets StorageValue properties from a JSON string.
   * @param  {String} stringifiedJson
   */
  StorageValue.prototype.fromJSON = function (stringifiedJson) {
    var json;
    stringifiedJson = stringifiedJson || '{}';
    json = JSON.parse(stringifiedJson);
    this.value = json.value;
    this.expiry = json.expiry;
  };

  /**
   * Return JSON string
   * @return {String}
   */
  StorageValue.prototype.toJSON = function () {
    return JSON.stringify({
      value: this.value,
      expiry: this.expiry || undefined
    });
  };

  return Storage;
});

define('template-store-singleton', [
  'template-store'
], function (
  TemplateStore
) {
  'use strict';

  /**
   * Global template store. This simplifies development until FileViewer core
   * stabilizes, the plugin interface is ready and the view hierarchy is
   * clear.
   *
   * @todo remove singleton
   */
  return new TemplateStore();
});
define('template-store', [
  'assert',
  'underscore'
], function (
  assert,
  _
) {
  'use strict';

  /**
   * Provides templates by asking a previously configured backend.
   *
   * A backend is a function that accepts a template path and returns the
   * matched template. If no template is found, it returns undefined.
   *
   * @constructor
   */
  var TemplateStore = function () {
    this._backend = null;
  };

  /**
   * Checks if backend is a valid backend.
   * @param {*} backend
   * @return {bool}
   */
  TemplateStore.validBackend = function (backend) {
    return _.isFunction(backend);
  };

  /**
   * Asks its backend for the given templateUrl.
   * @param {string} templateUrl
   * @return {*}
   * @throws {Error} if backend is invalid
   */
  TemplateStore.prototype.get = function (templateUrl) {
    assert(TemplateStore.validBackend(this._backend), 'backend is valid');
    return this._backend(templateUrl);
  };

  /**
   * Sets a backend for this template store.
   * @param {function} backend
   * @throws {Error} if backend is invalid
   */
  TemplateStore.prototype.useBackend = function (backend) {
    assert(TemplateStore.validBackend(backend), 'backend is valid');
    this._backend = backend;
  };

  return TemplateStore;
});
define('TitleView', [
  'backbone', 'icon-utils', 'template-store-singleton'
], function (Backbone, iconUtils, templateStore) {
  'use strict';

  var TitleView = Backbone.View.extend({

    initialize: function (options) {
      this._fileViewer = options.fileViewer;
    },

    render: function () {
      var model = this._fileViewer.getCurrentFile();
      if (!model) { return; }

      this.$el.html(templateStore.get('titleContainer')({
        title: model.get('title'),
        iconClass: iconUtils.getCssClass(model.get('type'))
      }));

      return this;
    }

  });

  return TitleView;
});
define('ToolbarLayer', [
  'jquery',
  'underscore',
  'backbone',
  'template-store-singleton',
  'keyboard'
], function (
  $,
  _,
  Backbone,
  templateStore,
  keyboard
) {
  'use strict';

  // Amount of time to wait before hiding the controls when the mouse stops moving (in ms).
  var HIDE_CONTROLS_TIMEOUT = 500;

  // Amount of time between checking if the mouse is still moving (in ms).
  // Should be smaller than HIDE_CONTROLS_TIMEOUT to prevent flickering (in ms).
  var THROTTLE_MOUSEMOVE = HIDE_CONTROLS_TIMEOUT - 100;

  // Toolbar animation durations (in ms).
  var HIDE_ANIMATION_DURATION = 400;
  var SHOW_ANIMATION_DURATION = 100;

  /**
   * Showing a toolbar in the lower part of the viewer.
   * @constructor
   */
  var ToolbarLayer = Backbone.View.extend({

    className: 'cp-toolbar-layer',

    initialize: function (options) {
      this._fileViewer = options.fileViewer;
      this._viewer = null;
      this._toggleControlsTimeout = null;
      this._actions = [];

      $('#cp-file-body').on('mousemove.toolbarLayer', this._showControlsOnMove.bind(this));
      $(document).on('keydown.tabToNavigate', this._tabToNavigate.bind(this));
    },

    teardown: function () {
      $(document).off('keydown.tabToNavigate');
      $('#cp-file-body').off('mousemove.toolbarLayer');
    },

    render: function () {
      this.$el.html(templateStore.get('toolbar')({
        actions: this._actions
      }));
      this.$el.find('button').tooltip({gravity: 's', aria: true});
      this.$toolbar = this.$('.cp-toolbar');

      var listeners = {};
      this._actions.forEach(function (action) {
        listeners['click .' + action.className] = action.handler;

        if (action.predicate && !action.predicate.call(this)) {
          this.$toolbar.find('.' + action.className).hide();
        }
      }, this);
      this.delegateEvents(listeners);

      this.$toolbar.css('margin-left', -this.$toolbar.width() / 2);

      this.$toolbar.on('click', 'a[href=\'#\']', function (e) {
        e.preventDefault();
      });

      return this;
    },

    setActions: function (actions) {
      this._actions = actions;
      this.render();
    },

    getActions: function () {
      return this._actions;
    },

    setViewer: function (viewer) {
      this._viewer = viewer;
      this.render();
    },

    _tabToNavigate: function (event) {
      if (event.which === keyboard.keys.TAB) {
        this._showControlsOnMove.call(this);
      }
    },

    // Show / hide controls based on mouse movements:
    // - Show the controls when the mouse is moving over the content view.
    // - Hide the controls after a short delay when the mouse stops moving.
    // - Keep the controls open if the mouse is hovering over them.

    _showControlsOnMove : _.throttle(function () {
      if (!this.$toolbar) { return; }

      this.$toolbar.fadeTo(SHOW_ANIMATION_DURATION, 1);
      clearTimeout(this._toggleControlsTimeout);
      this._toggleControlsTimeout = this._setHideTimer();

    }, THROTTLE_MOUSEMOVE),

    _setHideTimer: function () {
      return setTimeout(function () {
        if (this.$toolbar.is(':hover')) { return; }
        if (this.$toolbar.has(':focus').length) { return; }

        this.$toolbar.find('button').each(this._removeTooltipForElement);

        this.$toolbar.fadeTo(HIDE_ANIMATION_DURATION, 0);
      }.bind(this), HIDE_CONTROLS_TIMEOUT);
    },

    _removeTooltipForElement: function (pos, el) {
      var tipsyId = $(el).attr('aria-describedby');
      if (tipsyId) { $('#' + tipsyId).fadeOut(); }
    }

  });

  return ToolbarLayer;
});

define('unknown-file-type-view-provider', [
  'jquery',
  'unknown-file-type-view'
],
function (
  $,
  UnknownFileTypeView
) {
  'use strict';

  var unknownFileTypeViewProvider = function () {
    return $.Deferred().resolve(UnknownFileTypeView);
  };

  return unknownFileTypeViewProvider;
});
define('unknown-file-type-view', [
  'ajs',
  'BaseViewer',
  'template-store-singleton',
  'icon-utils',
  'jquery'
],
function (
  AJS,
  BaseViewer,
  templateStore,
  iconUtils,
  $
) {
  'use strict';

  var UnknownFileTypeView = BaseViewer.extend({

    id: 'cp-unknown-file-type-view-wrapper',

    events: {
      'click .download-button': '_handleDownloadButton'
    },

    initialize: function () {
      BaseViewer.prototype.initialize.apply(this, arguments);
    },

    teardown: function () {
      this.off();
      this.remove();
    },

    render: function () {
      this.$el.html(templateStore.get('unknownFileTypeViewer')({
        iconClass: iconUtils.getCssClass(this.model.get('type')),
        src: this.model.get('srcDownload') || this.model.get('src')
      }));

      var fileView = this._fileViewer.getView();

      // kill sidebar view.
      if (fileView.fileSidebarView.isAnyPanelInitialized()) {
        fileView.fileSidebarView.teardownPanel();
      }

      this.trigger('viewerReady');

      return this;
    },

    setupMode: function (mode) {
      if (mode === 'BASE') {
        $('.cp-toolbar-layer').hide();
      }
    },

    _handleDownloadButton: function () {
      this._fileViewer.trigger('fv.download');
      this._triggerAnalytics();
    },

    _triggerAnalytics: function () {
      this._fileViewer.analytics.send('files.fileviewer-web.file.download', {
        actionType: 'cta'
      });
    }

  });

  return UnknownFileTypeView;
});

define('url', [], function () {
  'use strict';
  return {
    /**
     * Adds an objects keys and values as query parameters to an given URL.
     * @param {string} [url]
     * @param {object} [param]
     * @return {string}
     */
    addQueryParamToUrl: function (url, param) {
      param = param || {};
      url = url.split('?');
      var queryArray = url[1] && url[1].split('&');
      queryArray = queryArray || [];
      Object.keys(param).forEach(function (key, val) {
        queryArray.push(key + '=' + param[key]);
      });
      if (queryArray.length === 0) {
        return url[0];
      }
      return url[0] + '?' + queryArray.join('&');
    },
    parseQueryString: function (query) {
      var parts = query.split('&');
      var params = {};
      for (var i = 0, ii = parts.length; i < ii; ++i) {
        var param = parts[i].split('=');
        var key = param[0].toLowerCase();
        var value = param.length > 1 ? param[1] : null;
        params[decodeURIComponent(key)] = decodeURIComponent(value);
      }
      return params;
    }
  };
});

define('video-view-provider', [
  'jquery',
  'file'
], function (
  $,
  File
) {
  'use strict';

  /**
   * Returns a video viewer.
   * @returns {Promise}
   */
  var videoViewProvider = function () {
    return $.Deferred().resolve(require('video-view'));
  };

  return videoViewProvider;
});
define('viewer-registry',
  [
    'underscore',
    'assert'
  ],
  function (
    _,
    assert
  ) {
    'use strict';

    var createMatchFn = function (expected) {
      return function (current) {
        return current === expected;
      };
    };

    /**
     * ViewerRegistry is responsible for mapping file types to content viewers.
     *
     * When FileViewer is asked to view a file, it uses the file's type and asks
     * its ViewerRegistry for the proper viewer. In addition, ViewerRegistry is
     * exposed to the outside world. Therefore viewers and plugins can register
     * themself without touching FileViwer core.
     *
     * A viewer is a backbone view and is registered via a function that wraps this
     * view into a promise.
     *
     * Multiple viewers for the same filetype are weighted and can thus be overriden.
     * The default weight is 10 with a lower weight meaning higher priority.
     */
    var ViewerRegistry = function () {
      this._handlers = [];
    };

    /**
     * Checks for a valid viewer (is a function).
     *
     * @param {*} previewer
     * @return {boolean}
     */
    ViewerRegistry.isValidPreviewer = function (previewer) {
      return _.isFunction(previewer);
    };

    /**
     * Checks for a valid weight (a number).
     *
     * @param {*} weight
     * @return {boolean}
     */
    ViewerRegistry.isValidWeight = function (weight) {
      return typeof weight === 'number' && !isNaN(weight);
    };

    /**
     * Register a new viewer for a given filetype with an optional weight.
     *
     * fileType can either be a string which is then directly matched or a
     * predicate function that get's handed the current file type and then
     * can return true / false.
     *
     * @param {string|function} fileType
     * @param {function} previewer
     * @param {integer} [weight=10]
     * @thors {Error}
     */
    ViewerRegistry.prototype.register = function (fileType, previewer, weight) {
      var matchesFileType = typeof fileType === 'function' ? fileType : createMatchFn(fileType);

      weight = weight || 10;

      assert(ViewerRegistry.isValidPreviewer(previewer), 'previewer is valid');
      assert(ViewerRegistry.isValidWeight(weight), 'weight is valid');

      this._handlers.push({
        matchesFileType: matchesFileType,
        previewer: previewer,
        weight: weight
      });

      this._updateWeighting();
    };

    /**
     * Get the viewer with the lowest weight for the given fileType.
     *
     * Returns undefined if no viewer is found.
     *
     * @param {string} fileType
     * @return {object} previewer
     */
    ViewerRegistry.prototype.get = function (fileType) {
      var handler = _.find(this._handlers, function (handler) {
        return handler.matchesFileType(fileType);
      });

      return handler && handler.previewer;
    };

    ViewerRegistry.prototype._updateWeighting = function () {
      // Sorts handlers by weight - needs to be called after a new handler is inserted.
      this._handlers = _.sortBy(this._handlers, function (handler) {
        return handler.weight;
      });
    };

    return ViewerRegistry;
  }
);

define('ViewerLayer', [
  'backbone'
], function (Backbone) {
  'use strict';

  var ViewerLayer = Backbone.View.extend({

    className: 'cp-viewer-layer',

    initialize: function (options) {
      this._viewer = null;
    },

    attachViewer: function (viewer) {
      this._viewer = viewer;
      this.$el.prepend(viewer.$el);
    },

    getAttachedViewer: function () {
      return this._viewer;
    },

    teardown: function () {
      if (this._viewer) {
        if (this._viewer.teardown) {
          this._viewer.teardown();
        }
        this._viewer.$el.remove();
      }
    }
  });

  return ViewerLayer;
});

define('WaitingLayer', [
  'backbone', 'template-store-singleton'
], function (Backbone, templateStore) {
  'use strict';

  var WaitingLayer = Backbone.View.extend({

    className: 'cp-waiting-layer',

    initialize: function () {
      this.$el.hide();
    },

    showMessage: function (file, header, message) {
      this.$el.show().html(templateStore.get('waitingMessage')({
        src: file.get('srcDownload') || file.get('src'),
        header: header,
        message: message
      }));
      this.$el.find('.cp-waiting-message-spinner').spin('large', {
        color: '#fff',
        zIndex: 'auto'
      });
    },

    clearMessage: function () {
      this.$el.find('.cp-waiting-message-spinner').spin(false);
      this.$el.hide();
    }

  });

  return WaitingLayer;
});

    // assemble core module by injecting all dependencies
    var FileViewer = require('file-viewer');

    FileViewer.Templates = window.FileViewer.Templates;

    // export FileViewer using CommonJS, AMD and the window object
    if (typeof module !== "undefined" && module.exports) {
        module.exports = FileViewer;
    }

    if (window.define) {
        window.define(
            'FileViewer',
            ['jquery', 'underscore', 'backbone', 'ajs'],
            function () { return FileViewer; }
        );
    }

    window.FileViewer = FileViewer;

}());;
;
/* module-key = 'com.atlassian.jira.jira-fileviewer-plugin:atlassian-fileviewer', location = 'jira-fileviewer-module/node_modules/@atlassian/fileviewer/dist/fileviewer-image-templates.js' */
// This file was automatically generated from image-view.i18n.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace FileViewer.Templates.
 */

if (typeof FileViewer == 'undefined') { var FileViewer = {}; }
if (typeof FileViewer.Templates == 'undefined') { FileViewer.Templates = {}; }


FileViewer.Templates.previewBody = function(opt_data, opt_ignored) {
  return '<div class="cp-scale-info" /><div class="cp-image-container" /><span class="cp-baseline-extension"></span>';
};
if (goog.DEBUG) {
  FileViewer.Templates.previewBody.soyTemplateName = 'FileViewer.Templates.previewBody';
}
;
;
/* module-key = 'com.atlassian.jira.jira-fileviewer-plugin:atlassian-fileviewer', location = 'jira-fileviewer-module/node_modules/@atlassian/fileviewer/dist/fileviewer-image.js' */
(function (FileViewer) {
    'use strict';

    // use FileViewer's internal module system
    var define  = FileViewer.define;
    var require = FileViewer.require;

define('image-view',
  [
    'ajs',
    'backbone',
    'underscore',
    'jquery',
    'file',
    'BaseViewer',
    'template-store-singleton'
  ], function (
    AJS,
    Backbone,
    _,
    $,
    File,
    BaseViewer,
    templateStore
  ) {
    'use strict';

    var ImageView = BaseViewer.extend({

      id: 'cp-image-preview',

      tagName: 'div',

      initialize: function () {
        BaseViewer.prototype.initialize.apply(this, arguments);
        this.bindPanEvents();
        this.PIXELATE_THRESHOLD = 2;
        this.MIN_HEIGHT = 100;
        this.ZOOM_IN_FACTOR = 1.25;
        this.ZOOM_OUT_FACTOR = 0.80;
        this._isFitWidth = false;
        this._isFitHeight = false;
      },

      renderAnnotations: function (PinsView) {
        var current = this._fileViewer.getCurrentFile();
        var annotations = current.get('annotations');
        if (current && PinsView) {
          this.pinsView = new PinsView({
            fileViewer: this._fileViewer,
            container: this.$el.find('.cp-image-container'),
            collection: annotations
          });
          this.pinsView.render();
        }

        annotations.on('selected', function (item) {
          var $pin, positionTop, positionLeft;
          if (!item) { return; }

          $pin = this.$el.find('span.cp-active-annotation.selected');
          if (!$pin.length) { return; }

          positionTop = $pin.position().top - (this.$el.height() / 2);
          positionLeft = $pin.position().left - (this.$el.width() / 2);

          this.$el.animate({
            'scrollTop': positionTop,
            'scrollLeft': positionLeft
          });

        }.bind(this));
      },

      bindPanEvents: function () {
        var previous = {x: 0, y: 0},
          view = this;

        var scroll = function (e) {
          var $el = view.$el;
          $el.scrollLeft($el.scrollLeft() + previous.x - e.clientX);
          $el.scrollTop($el.scrollTop() + previous.y - e.clientY);
          previous = { x: e.clientX, y: e.clientY };
          e.preventDefault();
        };

        var unpan = function (e) {
          view.$el.off('mousemove', '#cp-img', scroll);
          view.$image.removeClass('panning');
          e.preventDefault();
        };

        var pan = function (e) {
          $(window).one('mouseup', unpan);
          view.$el.on('mousemove', '#cp-img', scroll);
          view.$image.addClass('panning');
          previous = { x: e.clientX, y: e.clientY };
          e.preventDefault();
        };

        this.$el.on('mousedown', '#cp-img', pan);
      },

      handleResize: function () {
        this._forceRescale();
      },

      _forceRescale: function () {
        if (this._isFitHeight) {
          this.zoomHeight();
        } else if (this._isFitWidth) {
          this.zoomWidth();
        }
      },

      // Set size of the images container to the image size.
      // This is a workaround for `HC-11712 as` it's
      // original fix `e31eac8ac51` caused a new issue: `FIL-555`.
      _fixContainerSize: function () {
        var $container = this.$el.find('.cp-image-container');
        var $image = this.$el.find('#cp-img');
        $container.width($image.width());
        $container.height($image.height());
      },

      // Returns `true` if the original image is either wider
      // or higher than current viewport.
      _isImageBiggerThanViewport: function () {
        return this._isImageWiderThanViewport() ||
             this._isImageHigherThanViewport();
      },

      // Returns `true` if original image is wider than current viewport.
      _isImageWiderThanViewport: function () {
        var viewportWidth = this.$el.width();
        return this.imageWidth > viewportWidth;
      },

      // Returns `true` if original image is higher than current viewport.
      _isImageHigherThanViewport: function () {
        var viewportHeight = this.$el.height();
        return this.imageHeight > viewportHeight;
      },

      _isZoomedToPageFit: function () {
        return this.$el.width() === this.$image.width() ||
             this.$el.height() === this.$image.height();
      },

      _stopFit: function () {
        this._isFitWidth  = false;
        this._isFitHeight = false;
      },

      _showScaleInfo: function (scale) {
        if (this._rescaleForFullScreen) { return; }
        var scalePercentage = Math.round(parseInt(scale * 100, 10));
        var $scaleInfo = this.$el.find('.cp-scale-info');
        $scaleInfo.text(scalePercentage + '%');
        $scaleInfo
          .stop(true, true)
          .fadeIn(50)
          .delay(400)
          .fadeOut(100);
      },

      /**
       * Scale the image up by factor set in `this.ZOOM_IN_FACTOR`
       */
      zoomIn: function () {
        var scaleFactor = (this.$image.width() / this.imageWidth) * this.ZOOM_IN_FACTOR;
        this._stopFit();
        this.changeScale(scaleFactor);
      },

      /**
       * Scale the image down by factor set in `this.ZOOM_OUT_FACTOR`
       */
      zoomOut: function () {
        var scaleFactor = (this.$image.width() / this.imageWidth) * this.ZOOM_OUT_FACTOR;
        this._stopFit();
        this.changeScale(scaleFactor);
      },

      /**
       * If the image is already fit to viewports width then rescale to
       * best fit or else scale to width.
       */
      zoomFit: function () {
        if (this._isZoomedToPageFit()) {
          this.zoomActual();
        } else {
          this.zoomAuto(true);
        }
      },

      /**
       * Scale image to fit into the viewport but don't resize the image
       * over its original dimensions.
       * @param  {Boolean} force - Force best fit even if image is smaller than viewport
       */
      zoomAuto: function (force) {
        if (this._isImageBiggerThanViewport() || force) {
          this._zoomPageFit();
        } else {
          this.zoomActual();
        }
      },

      _zoomPageFit: function () {
        var viewportWidth  = this.$el.width();
        var viewportHeight = this.$el.height();

        if ((viewportWidth / this.imageWidth) > (viewportHeight / this.imageHeight)) {
          this.zoomHeight();
        } else {
          this.zoomWidth();
        }
      },

      /**
       * Scale the image so it fits to the viewports width.
       */
      zoomWidth: function () {
        var viewportWidth = this.$el.width();
        var scaleFactor   = viewportWidth / this.imageWidth;
        this.changeScale(scaleFactor);
        this._stopFit();
        this._isFitWidth = true;
      },

      /**
       * Scale the image so it fits to the viewports height.
       */
      zoomHeight: function () {
        var viewportHeight = this.$el.height();
        var scaleFactor = viewportHeight / this.imageHeight;
        this.changeScale(scaleFactor);
        this._stopFit();
        this._isFitHeight = true;
      },

      /**
       * Scale the image to its original size.
       */
      zoomActual: function () {
        this._stopFit();
        this.changeScale(1);
      },

      /**
       * Change the images scale and re-center it in viewport.
       * @param  {Number} scale - Factor by which to scale the image
       */
      changeScale: function (scale) {
        var viewportWidth = this.$el.width();
        var viewportHeight = this.$el.height();

        var oldWidth = this.$image.width();
        var oldHeight = this.$image.height();
        var containerPosition = this.$el.find('.cp-image-container').position();

        //find the position of the pixel in the centre of the viewport
        var oldPixelCentreWidth = (viewportWidth/2) + Math.abs(containerPosition.left);
        var oldPixelCentreHeight = (viewportHeight/2) + Math.abs(containerPosition.top);

        this.$image.css('width', this.imageWidth * scale);
        this.$image.css('height', this.imageHeight * scale);

        //calculate the new pixel centre after the image has been scaled
        var newPixelCentreWidth = (oldPixelCentreWidth/oldWidth) * this.$image.width();
        var newPixelCentreHeight = (oldPixelCentreHeight/oldHeight) * this.$image.height();

        //move the scrollbar to the new pixel and then center the viewport on it
        this.$el.scrollLeft(newPixelCentreWidth - (viewportWidth/2));
        this.$el.scrollTop(newPixelCentreHeight - (viewportHeight/2));

        this.makePannable();
        this.pixelateIfScaleOverThreshold(scale);
        this._fixContainerSize();
        this._showScaleInfo(scale);
      },

      pixelateIfScaleOverThreshold: function (scale) {
        this.$image.toggleClass(
          'pixelate',
          scale >= this.PIXELATE_THRESHOLD
        );
      },

      makePannable: function () {
        if ((this.$el.width() < this.$image.width()) || (this.$el.height() < this.$image.height())) {
          this.$image.addClass('pannable');
        } else {
          this.$image.removeClass('pannable');
        }
      },

      teardown: function () {
        BaseViewer.prototype.teardown.apply(this);
        $(window).off('resize.cp-repaint');
        this.pinsView && this.pinsView.remove().off();
      },

      getBackground: function () {
        return this.$el.add('.cp-image-container');
      },

      render: function () {
        this.$el.html(templateStore.get('previewBody')());

        this.addImage();

        $(window).on('resize.cp-repaint', _.throttle(this._forceRescale.bind(this), 250));

        return this;
      },

      addImage: function () {
        // This extra work makes the image size the same as the viewport size.
        var $img = $('<img/>')
          .attr('id', 'cp-img')
          .attr('src', this._previewSrc)
          .attr('alt', this.model.get('title'));
        $img.off('load');

        $img.on('load', _.partial(this.scaleAndAppendImage, this));
        $img.on('load', function () {
          this.trigger('viewerReady');
        }.bind(this));
        $img.on('error', function () {
          var err = new Error('Image failed loading');
          err.title = "Ouch! We can\'t load the image.";
          err.description = this.model.get('src');
          err.icon = 'cp-image-icon';
          this.trigger('viewerFail', err);
        }.bind(this));

        $img.on('click', function () {
          document.activeElement.blur();
        });
      },

      scaleAndAppendImage: function (view) {
        var $image = $(this);

        view.imageHeight = this.height;
        view.imageWidth = this.width;
        view.$image = $image;

        $image.css('display', 'none'); // For the fade in.

        var $imageContainer = view.$el.find('.cp-image-container');
        $imageContainer.append(view.$image);
        $imageContainer.addClass('cp-annotatable');

        // Ensure the whole image is displayed by fitting to the larger side.
        view.zoomAuto();
        view.$image.fadeIn(200);

        view.trigger('cp.imageAppended');
      },

      setupMode: function (mode, isModeChanged) {
        if (isModeChanged) {
          clearInterval(this._fullScreenInProgress);
          this.scaleGraduallyToFit();
        }
      },

      scaleGraduallyToFit: function () {
        // When browser change to fullscreen mode, the screen size is changed many times.
        // Here we scale 10 times every 100ms to make the page scaling to full screen smoothly
        var times = 0;
        this._rescaleForFullScreen = true;
        this._fullScreenInProgress = setInterval(function () {
          times++;
          if (times === 11) {
            clearInterval(this._fullScreenInProgress);
            this._rescaleForFullScreen = false;
            this.zoomAuto();
          }
          this.zoomAuto();
        }.bind(this), 100);
      }

    });

    return ImageView;
  });

}(function () {
  var FileViewer;

    if (typeof module !== "undefined" && ('exports' in module)) {
      FileViewer = require('./fileviewer.js');
    } else if (window.require) {
      FileViewer = window.FileViewer;
    } else {
      FileViewer = window.FileViewer;
    }

    return FileViewer;
}()));
;
;
/* module-key = 'com.atlassian.jira.jira-fileviewer-plugin:atlassian-fileviewer', location = 'jira-fileviewer-module/node_modules/video.js/dist/cdn/video.js' */
/*! Video.js v4.12.15 Copyright 2014 Brightcove, Inc. https://github.com/videojs/video.js/blob/master/LICENSE */ 
(function() {var b=void 0,f=!0,j=null,l=!1;function m(){return function(){}}function n(a){return function(){return this[a]}}function p(a){return function(){return a}}var s;document.createElement("video");document.createElement("audio");document.createElement("track");
function t(a,c,d){if("string"===typeof a){0===a.indexOf("#")&&(a=a.slice(1));if(t.Ca[a])return c&&t.log.warn('Player "'+a+'" is already initialised. Options will not be applied.'),d&&t.Ca[a].I(d),t.Ca[a];a=t.m(a)}if(!a||!a.nodeName)throw new TypeError("The element or ID supplied is not valid. (videojs)");return a.player||new t.Player(a,c,d)}var videojs=window.videojs=t;t.fc="4.12";t.sd="https:"==document.location.protocol?"https://":"http://";t.VERSION="4.12.15";
t.options={techOrder:["html5","flash"],html5:{},flash:{},width:300,height:150,defaultVolume:0,playbackRates:[],inactivityTimeout:2E3,children:{mediaLoader:{},posterImage:{},loadingSpinner:{},textTrackDisplay:{},bigPlayButton:{},controlBar:{},errorDisplay:{},textTrackSettings:{}},language:document.getElementsByTagName("html")[0].getAttribute("lang")||navigator.languages&&navigator.languages[0]||navigator.Ef||navigator.language||"en",languages:{},notSupportedMessage:"No compatible source was found for this video."};
"GENERATED_CDN_VSN"!==t.fc&&(videojs.options.flash.swf=t.sd+"vjs.zencdn.net/"+t.fc+"/video-js.swf");t.Gd=function(a,c){t.options.languages[a]=t.options.languages[a]!==b?t.Z.Aa(t.options.languages[a],c):c;return t.options.languages};t.Ca={};"function"===typeof define&&define.amd?define("videojs",[],function(){return videojs}):"object"===typeof exports&&"object"===typeof module&&(module.exports=videojs);t.Ga=t.CoreObject=m();
t.Ga.extend=function(a){var c,d;a=a||{};c=a.init||a.l||this.prototype.init||this.prototype.l||m();d=function(){c.apply(this,arguments)};d.prototype=t.i.create(this.prototype);d.prototype.constructor=d;d.extend=t.Ga.extend;d.create=t.Ga.create;for(var e in a)a.hasOwnProperty(e)&&(d.prototype[e]=a[e]);return d};t.Ga.create=function(){var a=t.i.create(this.prototype);this.apply(a,arguments);return a};
t.b=function(a,c,d){if(t.i.isArray(c))return v(t.b,a,c,d);var e=t.getData(a);e.G||(e.G={});e.G[c]||(e.G[c]=[]);d.s||(d.s=t.s++);e.G[c].push(d);e.ba||(e.disabled=l,e.ba=function(c){if(!e.disabled){c=t.Nb(c);var d=e.G[c.type];if(d)for(var d=d.slice(0),k=0,q=d.length;k<q&&!c.Nc();k++)d[k].call(a,c)}});1==e.G[c].length&&(a.addEventListener?a.addEventListener(c,e.ba,l):a.attachEvent&&a.attachEvent("on"+c,e.ba))};
t.n=function(a,c,d){if(t.Ic(a)){var e=t.getData(a);if(e.G){if(t.i.isArray(c))return v(t.n,a,c,d);if(c){var g=e.G[c];if(g){if(d){if(d.s)for(e=0;e<g.length;e++)g[e].s===d.s&&g.splice(e--,1)}else e.G[c]=[];t.xc(a,c)}}else for(g in e.G)c=g,e.G[c]=[],t.xc(a,c)}}};t.xc=function(a,c){var d=t.getData(a);0===d.G[c].length&&(delete d.G[c],a.removeEventListener?a.removeEventListener(c,d.ba,l):a.detachEvent&&a.detachEvent("on"+c,d.ba));t.hb(d.G)&&(delete d.G,delete d.ba,delete d.disabled);t.hb(d)&&t.Zc(a)};
t.Nb=function(a){function c(){return f}function d(){return l}if(!a||!a.Sb){var e=a||window.event;a={};for(var g in e)"layerX"!==g&&("layerY"!==g&&"keyLocation"!==g)&&("returnValue"==g&&e.preventDefault||(a[g]=e[g]));a.target||(a.target=a.srcElement||document);a.relatedTarget=a.fromElement===a.target?a.toElement:a.fromElement;a.preventDefault=function(){e.preventDefault&&e.preventDefault();a.returnValue=l;a.ee=c;a.defaultPrevented=f};a.ee=d;a.defaultPrevented=l;a.stopPropagation=function(){e.stopPropagation&&
e.stopPropagation();a.cancelBubble=f;a.Sb=c};a.Sb=d;a.stopImmediatePropagation=function(){e.stopImmediatePropagation&&e.stopImmediatePropagation();a.Nc=c;a.stopPropagation()};a.Nc=d;if(a.clientX!=j){g=document.documentElement;var h=document.body;a.pageX=a.clientX+(g&&g.scrollLeft||h&&h.scrollLeft||0)-(g&&g.clientLeft||h&&h.clientLeft||0);a.pageY=a.clientY+(g&&g.scrollTop||h&&h.scrollTop||0)-(g&&g.clientTop||h&&h.clientTop||0)}a.which=a.charCode||a.keyCode;a.button!=j&&(a.button=a.button&1?0:a.button&
4?1:a.button&2?2:0)}return a};t.o=function(a,c){var d=t.Ic(a)?t.getData(a):{},e=a.parentNode||a.ownerDocument;"string"===typeof c&&(c={type:c,target:a});c=t.Nb(c);d.ba&&d.ba.call(a,c);if(e&&!c.Sb()&&c.bubbles!==l)t.o(e,c);else if(!e&&!c.defaultPrevented&&(d=t.getData(c.target),c.target[c.type])){d.disabled=f;if("function"===typeof c.target[c.type])c.target[c.type]();d.disabled=l}return!c.defaultPrevented};
t.N=function(a,c,d){function e(){t.n(a,c,e);d.apply(this,arguments)}if(t.i.isArray(c))return v(t.N,a,c,d);e.s=d.s=d.s||t.s++;t.b(a,c,e)};function v(a,c,d,e){t.tc.forEach(d,function(d){a(c,d,e)})}var w=Object.prototype.hasOwnProperty;t.e=function(a,c){var d;c=c||{};d=document.createElement(a||"div");t.i.ca(c,function(a,c){-1!==a.indexOf("aria-")||"role"==a?d.setAttribute(a,c):d[a]=c});return d};t.va=function(a){return a.charAt(0).toUpperCase()+a.slice(1)};t.i={};
t.i.create=Object.create||function(a){function c(){}c.prototype=a;return new c};t.i.ca=function(a,c,d){for(var e in a)w.call(a,e)&&c.call(d||this,e,a[e])};t.i.D=function(a,c){if(!c)return a;for(var d in c)w.call(c,d)&&(a[d]=c[d]);return a};t.i.Od=function(a,c){var d,e,g;a=t.i.copy(a);for(d in c)w.call(c,d)&&(e=a[d],g=c[d],a[d]=t.i.ib(e)&&t.i.ib(g)?t.i.Od(e,g):c[d]);return a};t.i.copy=function(a){return t.i.D({},a)};
t.i.ib=function(a){return!!a&&"object"===typeof a&&"[object Object]"===a.toString()&&a.constructor===Object};t.i.isArray=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)};t.ge=function(a){return a!==a};t.bind=function(a,c,d){function e(){return c.apply(a,arguments)}c.s||(c.s=t.s++);e.s=d?d+"_"+c.s:c.s;return e};t.ua={};t.s=1;t.expando="vdata"+(new Date).getTime();t.getData=function(a){var c=a[t.expando];c||(c=a[t.expando]=t.s++);t.ua[c]||(t.ua[c]={});return t.ua[c]};
t.Ic=function(a){a=a[t.expando];return!(!a||t.hb(t.ua[a]))};t.Zc=function(a){var c=a[t.expando];if(c){delete t.ua[c];try{delete a[t.expando]}catch(d){a.removeAttribute?a.removeAttribute(t.expando):a[t.expando]=j}}};t.hb=function(a){for(var c in a)if(a[c]!==j)return l;return f};t.Pa=function(a,c){return-1!==(" "+a.className+" ").indexOf(" "+c+" ")};t.p=function(a,c){t.Pa(a,c)||(a.className=""===a.className?c:a.className+" "+c)};
t.r=function(a,c){var d,e;if(t.Pa(a,c)){d=a.className.split(" ");for(e=d.length-1;0<=e;e--)d[e]===c&&d.splice(e,1);a.className=d.join(" ")}};t.A=t.e("video");var x=document.createElement("track");x.Tb="captions";x.ed="en";x.label="English";t.A.appendChild(x);t.P=navigator.userAgent;t.zd=/iPhone/i.test(t.P);t.yd=/iPad/i.test(t.P);t.Ad=/iPod/i.test(t.P);t.xd=t.zd||t.yd||t.Ad;var aa=t,y;var z=t.P.match(/OS (\d+)_/i);y=z&&z[1]?z[1]:b;aa.ff=y;t.wd=/Android/i.test(t.P);var ba=t,B;
var C=t.P.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i),D,E;C?(D=C[1]&&parseFloat(C[1]),E=C[2]&&parseFloat(C[2]),B=D&&E?parseFloat(C[1]+"."+C[2]):D?D:j):B=j;ba.ec=B;t.Bd=t.wd&&/webkit/i.test(t.P)&&2.3>t.ec;t.gc=/Firefox/i.test(t.P);t.gf=/Chrome/i.test(t.P);t.pa=/MSIE\s8\.0/.test(t.P);t.Db=!!("ontouchstart"in window||window.ud&&document instanceof window.ud);t.td="backgroundSize"in t.A.style;
t.ad=function(a,c){t.i.ca(c,function(c,e){e===j||"undefined"===typeof e||e===l?a.removeAttribute(c):a.setAttribute(c,e===f?"":e)})};t.Oa=function(a){var c,d,e,g;c={};if(a&&a.attributes&&0<a.attributes.length){d=a.attributes;for(var h=d.length-1;0<=h;h--){e=d[h].name;g=d[h].value;if("boolean"===typeof a[e]||-1!==",autoplay,controls,loop,muted,default,".indexOf(","+e+","))g=g!==j?f:l;c[e]=g}}return c};
t.rf=function(a,c){var d="";document.defaultView&&document.defaultView.getComputedStyle?d=document.defaultView.getComputedStyle(a,"").getPropertyValue(c):a.currentStyle&&(d=a["client"+c.substr(0,1).toUpperCase()+c.substr(1)]+"px");return d};t.Rb=function(a,c){c.firstChild?c.insertBefore(a,c.firstChild):c.appendChild(a)};t.bb={};t.m=function(a){0===a.indexOf("#")&&(a=a.slice(1));return document.getElementById(a)};
t.Na=function(a,c){c=c||a;var d=Math.floor(a%60),e=Math.floor(a/60%60),g=Math.floor(a/3600),h=Math.floor(c/60%60),k=Math.floor(c/3600);if(isNaN(a)||Infinity===a)g=e=d="-";g=0<g||0<k?g+":":"";return g+(((g||10<=h)&&10>e?"0"+e:e)+":")+(10>d?"0"+d:d)};t.Id=function(){document.body.focus();document.onselectstart=p(l)};t.Xe=function(){document.onselectstart=p(f)};t.trim=function(a){return(a+"").replace(/^\s+|\s+$/g,"")};t.round=function(a,c){c||(c=0);return Math.round(a*Math.pow(10,c))/Math.pow(10,c)};
t.xa=function(a,c){return a===b&&c===b?{length:0,start:function(){throw Error("This TimeRanges object is empty");},end:function(){throw Error("This TimeRanges object is empty");}}:{length:1,start:function(){return a},end:function(){return c}}};t.Ie=function(a){try{var c=window.localStorage||l;c&&(c.volume=a)}catch(d){22==d.code||1014==d.code?t.log("LocalStorage Full (VideoJS)",d):18==d.code?t.log("LocalStorage not allowed (VideoJS)",d):t.log("LocalStorage Error (VideoJS)",d)}};
t.Xd=function(a){a.match(/^https?:\/\//)||(a=t.e("div",{innerHTML:'<a href="'+a+'">x</a>'}).firstChild.href);return a};
t.Ae=function(a){var c,d,e,g;g="protocol hostname port pathname search hash host".split(" ");d=t.e("a",{href:a});if(e=""===d.host&&"file:"!==d.protocol)c=t.e("div"),c.innerHTML='<a href="'+a+'"></a>',d=c.firstChild,c.setAttribute("style","display:none; position:absolute;"),document.body.appendChild(c);a={};for(var h=0;h<g.length;h++)a[g[h]]=d[g[h]];"http:"===a.protocol&&(a.host=a.host.replace(/:80$/,""));"https:"===a.protocol&&(a.host=a.host.replace(/:443$/,""));e&&document.body.removeChild(c);return a};
function F(a,c){var d,e;d=Array.prototype.slice.call(c);e=m();e=window.console||{log:e,warn:e,error:e};a?d.unshift(a.toUpperCase()+":"):a="log";t.log.history.push(d);d.unshift("VIDEOJS:");if(e[a].apply)e[a].apply(e,d);else e[a](d.join(" "))}t.log=function(){F(j,arguments)};t.log.history=[];t.log.error=function(){F("error",arguments)};t.log.warn=function(){F("warn",arguments)};
t.Vd=function(a){var c,d;a.getBoundingClientRect&&a.parentNode&&(c=a.getBoundingClientRect());if(!c)return{left:0,top:0};a=document.documentElement;d=document.body;return{left:t.round(c.left+(window.pageXOffset||d.scrollLeft)-(a.clientLeft||d.clientLeft||0)),top:t.round(c.top+(window.pageYOffset||d.scrollTop)-(a.clientTop||d.clientTop||0))}};t.tc={};t.tc.forEach=function(a,c,d){if(t.i.isArray(a)&&c instanceof Function)for(var e=0,g=a.length;e<g;++e)c.call(d||t,a[e],e,a);return a};
t.bf=function(a,c){var d,e,g,h,k,q,r;"string"===typeof a&&(a={uri:a});videojs.Z.Aa({method:"GET",timeout:45E3},a);c=c||m();q=function(){window.clearTimeout(k);c(j,e,e.response||e.responseText)};r=function(a){window.clearTimeout(k);if(!a||"string"===typeof a)a=Error(a);c(a,e)};d=window.XMLHttpRequest;"undefined"===typeof d&&(d=function(){try{return new window.ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(a){}try{return new window.ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(c){}try{return new window.ActiveXObject("Msxml2.XMLHTTP")}catch(d){}throw Error("This browser does not support XMLHttpRequest.");
});e=new d;e.uri=a.uri;d=t.Ae(a.uri);g=window.location;d.protocol+d.host!==g.protocol+g.host&&window.XDomainRequest&&!("withCredentials"in e)?(e=new window.XDomainRequest,e.onload=q,e.onerror=r,e.onprogress=m(),e.ontimeout=m()):(h="file:"==d.protocol||"file:"==g.protocol,e.onreadystatechange=function(){if(4===e.readyState){if(e.Ue)return r("timeout");200===e.status||h&&0===e.status?q():r()}},a.timeout&&(k=window.setTimeout(function(){4!==e.readyState&&(e.Ue=f,e.abort())},a.timeout)));try{e.open(a.method||
"GET",a.uri,f)}catch(u){r(u);return}a.withCredentials&&(e.withCredentials=f);a.responseType&&(e.responseType=a.responseType);try{e.send()}catch(A){r(A)}};t.Z={};t.Z.Aa=function(a,c){var d,e,g;a=t.i.copy(a);for(d in c)c.hasOwnProperty(d)&&(e=a[d],g=c[d],a[d]=t.i.ib(e)&&t.i.ib(g)?t.Z.Aa(e,g):c[d]);return a};t.z=m();s=t.z.prototype;s.ab={};s.b=function(a,c){var d=this.addEventListener;this.addEventListener=Function.prototype;t.b(this,a,c);this.addEventListener=d};s.addEventListener=t.z.prototype.b;
s.n=function(a,c){t.n(this,a,c)};s.removeEventListener=t.z.prototype.n;s.N=function(a,c){t.N(this,a,c)};s.o=function(a){var c=a.type||a;"string"===typeof a&&(a={type:c});a=t.Nb(a);if(this.ab[c]&&this["on"+c])this["on"+c](a);t.o(this,a)};s.dispatchEvent=t.z.prototype.o;
t.a=t.Ga.extend({l:function(a,c,d){this.d=a;this.q=t.i.copy(this.q);c=this.options(c);this.Qa=c.id||c.el&&c.el.id;this.Qa||(this.Qa=(a.id&&a.id()||"no_player")+"_component_"+t.s++);this.pe=c.name||j;this.c=c.el||this.e();this.R=[];this.cb={};this.eb={};this.Kc();this.I(d);if(c.$c!==l){var e,g;this.k().reportUserActivity&&(e=t.bind(this.k(),this.k().reportUserActivity),this.b("touchstart",function(){e();this.clearInterval(g);g=this.setInterval(e,250)}),a=function(){e();this.clearInterval(g)},this.b("touchmove",
e),this.b("touchend",a),this.b("touchcancel",a))}}});s=t.a.prototype;s.dispose=function(){this.o({type:"dispose",bubbles:l});if(this.R)for(var a=this.R.length-1;0<=a;a--)this.R[a].dispose&&this.R[a].dispose();this.eb=this.cb=this.R=j;this.n();this.c.parentNode&&this.c.parentNode.removeChild(this.c);t.Zc(this.c);this.c=j};s.d=f;s.k=n("d");s.options=function(a){return a===b?this.q:this.q=t.Z.Aa(this.q,a)};s.e=function(a,c){return t.e(a,c)};
s.v=function(a){var c=this.d.language(),d=this.d.languages();return d&&d[c]&&d[c][a]?d[c][a]:a};s.m=n("c");s.wa=function(){return this.B||this.c};s.id=n("Qa");s.name=n("pe");s.children=n("R");s.Yd=function(a){return this.cb[a]};s.da=function(a){return this.eb[a]};
s.aa=function(a,c){var d,e;"string"===typeof a?(e=a,c=c||{},d=c.componentClass||t.va(e),c.name=e,d=new window.videojs[d](this.d||this,c)):d=a;this.R.push(d);"function"===typeof d.id&&(this.cb[d.id()]=d);(e=e||d.name&&d.name())&&(this.eb[e]=d);"function"===typeof d.el&&d.el()&&this.wa().appendChild(d.el());return d};
s.removeChild=function(a){"string"===typeof a&&(a=this.da(a));if(a&&this.R){for(var c=l,d=this.R.length-1;0<=d;d--)if(this.R[d]===a){c=f;this.R.splice(d,1);break}c&&(this.cb[a.id()]=j,this.eb[a.name()]=j,(c=a.m())&&c.parentNode===this.wa()&&this.wa().removeChild(a.m()))}};
s.Kc=function(){var a,c,d,e,g,h;a=this;c=a.options();if(d=c.children)if(h=function(d,e){c[d]!==b&&(e=c[d]);e!==l&&(a[d]=a.aa(d,e))},t.i.isArray(d))for(var k=0;k<d.length;k++)e=d[k],"string"==typeof e?(g=e,e={}):g=e.name,h(g,e);else t.i.ca(d,h)};s.T=p("");
s.b=function(a,c,d){var e,g,h;"string"===typeof a||t.i.isArray(a)?t.b(this.c,a,t.bind(this,c)):(e=t.bind(this,d),h=this,g=function(){h.n(a,c,e)},g.s=e.s,this.b("dispose",g),d=function(){h.n("dispose",g)},d.s=e.s,a.nodeName?(t.b(a,c,e),t.b(a,"dispose",d)):"function"===typeof a.b&&(a.b(c,e),a.b("dispose",d)));return this};
s.n=function(a,c,d){!a||"string"===typeof a||t.i.isArray(a)?t.n(this.c,a,c):(d=t.bind(this,d),this.n("dispose",d),a.nodeName?(t.n(a,c,d),t.n(a,"dispose",d)):(a.n(c,d),a.n("dispose",d)));return this};s.N=function(a,c,d){var e,g,h;"string"===typeof a||t.i.isArray(a)?t.N(this.c,a,t.bind(this,c)):(e=t.bind(this,d),g=this,h=function(){g.n(a,c,h);e.apply(this,arguments)},h.s=e.s,this.b(a,c,h));return this};s.o=function(a){t.o(this.c,a);return this};
s.I=function(a){a&&(this.ya?a.call(this):(this.mb===b&&(this.mb=[]),this.mb.push(a)));return this};s.Va=function(){this.ya=f;var a=this.mb;this.mb=[];if(a&&0<a.length){for(var c=0,d=a.length;c<d;c++)a[c].call(this);this.o("ready")}};s.Pa=function(a){return t.Pa(this.c,a)};s.p=function(a){t.p(this.c,a);return this};s.r=function(a){t.r(this.c,a);return this};s.show=function(){this.r("vjs-hidden");return this};s.W=function(){this.p("vjs-hidden");return this};function G(a){a.r("vjs-lock-showing")}
s.width=function(a,c){return ca(this,"width",a,c)};s.height=function(a,c){return ca(this,"height",a,c)};s.Qd=function(a,c){return this.width(a,f).height(c)};function ca(a,c,d,e){if(d!==b){if(d===j||t.ge(d))d=0;a.c.style[c]=-1!==(""+d).indexOf("%")||-1!==(""+d).indexOf("px")?d:"auto"===d?"":d+"px";e||a.o("resize");return a}if(!a.c)return 0;d=a.c.style[c];e=d.indexOf("px");return-1!==e?parseInt(d.slice(0,e),10):parseInt(a.c["offset"+t.va(c)],10)}
function da(a){var c,d,e,g,h,k,q,r;c=0;d=j;a.b("touchstart",function(a){1===a.touches.length&&(d=t.i.copy(a.touches[0]),c=(new Date).getTime(),g=f)});a.b("touchmove",function(a){1<a.touches.length?g=l:d&&(k=a.touches[0].pageX-d.pageX,q=a.touches[0].pageY-d.pageY,r=Math.sqrt(k*k+q*q),10<r&&(g=l))});h=function(){g=l};a.b("touchleave",h);a.b("touchcancel",h);a.b("touchend",function(a){d=j;g===f&&(e=(new Date).getTime()-c,200>e&&(a.preventDefault(),this.o("tap")))})}
s.setTimeout=function(a,c){function d(){this.clearTimeout(e)}a=t.bind(this,a);var e=setTimeout(a,c);d.s="vjs-timeout-"+e;this.b("dispose",d);return e};s.clearTimeout=function(a){function c(){}clearTimeout(a);c.s="vjs-timeout-"+a;this.n("dispose",c);return a};s.setInterval=function(a,c){function d(){this.clearInterval(e)}a=t.bind(this,a);var e=setInterval(a,c);d.s="vjs-interval-"+e;this.b("dispose",d);return e};
s.clearInterval=function(a){function c(){}clearInterval(a);c.s="vjs-interval-"+a;this.n("dispose",c);return a};t.w=t.a.extend({l:function(a,c){t.a.call(this,a,c);da(this);this.b("tap",this.u);this.b("click",this.u);this.b("focus",this.kb);this.b("blur",this.jb)}});s=t.w.prototype;
s.e=function(a,c){var d;c=t.i.D({className:this.T(),role:"button","aria-live":"polite",tabIndex:0},c);d=t.a.prototype.e.call(this,a,c);c.innerHTML||(this.B=t.e("div",{className:"vjs-control-content"}),this.Ib=t.e("span",{className:"vjs-control-text",innerHTML:this.v(this.ta)||"Need Text"}),this.B.appendChild(this.Ib),d.appendChild(this.B));return d};s.T=function(){return"vjs-control "+t.a.prototype.T.call(this)};s.u=m();s.kb=function(){t.b(document,"keydown",t.bind(this,this.ka))};
s.ka=function(a){if(32==a.which||13==a.which)a.preventDefault(),this.u()};s.jb=function(){t.n(document,"keydown",t.bind(this,this.ka))};t.S=t.a.extend({l:function(a,c){t.a.call(this,a,c);this.Hd=this.da(this.q.barName);this.handle=this.da(this.q.handleName);this.b("mousedown",this.lb);this.b("touchstart",this.lb);this.b("focus",this.kb);this.b("blur",this.jb);this.b("click",this.u);this.b(a,"controlsvisible",this.update);this.b(a,this.Uc,this.update)}});s=t.S.prototype;
s.e=function(a,c){c=c||{};c.className+=" vjs-slider";c=t.i.D({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},c);return t.a.prototype.e.call(this,a,c)};s.lb=function(a){a.preventDefault();t.Id();this.p("vjs-sliding");this.b(document,"mousemove",this.la);this.b(document,"mouseup",this.Ba);this.b(document,"touchmove",this.la);this.b(document,"touchend",this.Ba);this.la(a)};s.la=m();
s.Ba=function(){t.Xe();this.r("vjs-sliding");this.n(document,"mousemove",this.la);this.n(document,"mouseup",this.Ba);this.n(document,"touchmove",this.la);this.n(document,"touchend",this.Ba);this.update()};s.update=function(){if(this.c){var a,c=this.Qb(),d=this.handle,e=this.Hd;if("number"!==typeof c||c!==c||0>c||Infinity===c)c=0;a=c;if(d){a=this.c.offsetWidth;var g=d.m().offsetWidth;a=g?g/a:0;c*=1-a;a=c+a/2;d.m().style.left=t.round(100*c,2)+"%"}e&&(e.m().style.width=t.round(100*a,2)+"%")}};
function ea(a,c){var d,e,g,h;d=a.c;e=t.Vd(d);h=g=d.offsetWidth;d=a.handle;if(a.options().vertical)return h=e.top,e=c.changedTouches?c.changedTouches[0].pageY:c.pageY,d&&(d=d.m().offsetHeight,h+=d/2,g-=d),Math.max(0,Math.min(1,(h-e+g)/g));g=e.left;e=c.changedTouches?c.changedTouches[0].pageX:c.pageX;d&&(d=d.m().offsetWidth,g+=d/2,h-=d);return Math.max(0,Math.min(1,(e-g)/h))}s.kb=function(){this.b(document,"keydown",this.ka)};
s.ka=function(a){if(37==a.which||40==a.which)a.preventDefault(),this.fd();else if(38==a.which||39==a.which)a.preventDefault(),this.gd()};s.jb=function(){this.n(document,"keydown",this.ka)};s.u=function(a){a.stopImmediatePropagation();a.preventDefault()};t.ga=t.a.extend();t.ga.prototype.defaultValue=0;t.ga.prototype.e=function(a,c){c=c||{};c.className+=" vjs-slider-handle";c=t.i.D({innerHTML:'<span class="vjs-control-text">'+this.defaultValue+"</span>"},c);return t.a.prototype.e.call(this,"div",c)};
t.qa=t.a.extend();function fa(a,c){a.aa(c);c.b("click",t.bind(a,function(){G(this)}))}t.qa.prototype.e=function(){var a=this.options().zc||"ul";this.B=t.e(a,{className:"vjs-menu-content"});a=t.a.prototype.e.call(this,"div",{append:this.B,className:"vjs-menu"});a.appendChild(this.B);t.b(a,"click",function(a){a.preventDefault();a.stopImmediatePropagation()});return a};t.M=t.w.extend({l:function(a,c){t.w.call(this,a,c);this.selected(c.selected)}});
t.M.prototype.e=function(a,c){return t.w.prototype.e.call(this,"li",t.i.D({className:"vjs-menu-item",innerHTML:this.v(this.q.label)},c))};t.M.prototype.u=function(){this.selected(f)};t.M.prototype.selected=function(a){a?(this.p("vjs-selected"),this.c.setAttribute("aria-selected",f)):(this.r("vjs-selected"),this.c.setAttribute("aria-selected",l))};
t.O=t.w.extend({l:function(a,c){t.w.call(this,a,c);this.update();this.b("keydown",this.ka);this.c.setAttribute("aria-haspopup",f);this.c.setAttribute("role","button")}});s=t.O.prototype;s.update=function(){var a=this.La();this.za&&this.removeChild(this.za);this.za=a;this.aa(a);this.H&&0===this.H.length?this.W():this.H&&1<this.H.length&&this.show()};s.Ja=l;
s.La=function(){var a=new t.qa(this.d);this.options().title&&a.wa().appendChild(t.e("li",{className:"vjs-menu-title",innerHTML:t.va(this.options().title),Se:-1}));if(this.H=this.createItems())for(var c=0;c<this.H.length;c++)fa(a,this.H[c]);return a};s.Ka=m();s.T=function(){return this.className+" vjs-menu-button "+t.w.prototype.T.call(this)};s.kb=m();s.jb=m();s.u=function(){this.N("mouseout",t.bind(this,function(){G(this.za);this.c.blur()}));this.Ja?H(this):ga(this)};
s.ka=function(a){32==a.which||13==a.which?(this.Ja?H(this):ga(this),a.preventDefault()):27==a.which&&(this.Ja&&H(this),a.preventDefault())};function ga(a){a.Ja=f;a.za.p("vjs-lock-showing");a.c.setAttribute("aria-pressed",f);a.H&&0<a.H.length&&a.H[0].m().focus()}function H(a){a.Ja=l;G(a.za);a.c.setAttribute("aria-pressed",l)}t.J=function(a){"number"===typeof a?this.code=a:"string"===typeof a?this.message=a:"object"===typeof a&&t.i.D(this,a);this.message||(this.message=t.J.Pd[this.code]||"")};
t.J.prototype.code=0;t.J.prototype.message="";t.J.prototype.status=j;t.J.gb="MEDIA_ERR_CUSTOM MEDIA_ERR_ABORTED MEDIA_ERR_NETWORK MEDIA_ERR_DECODE MEDIA_ERR_SRC_NOT_SUPPORTED MEDIA_ERR_ENCRYPTED".split(" ");
t.J.Pd={1:"You aborted the video playback",2:"A network error caused the video download to fail part-way.",3:"The video playback was aborted due to a corruption problem or because the video used features your browser did not support.",4:"The video could not be loaded, either because the server or network failed or because the format is not supported.",5:"The video is encrypted and we do not have the keys to decrypt it."};for(var I=0;I<t.J.gb.length;I++)t.J[t.J.gb[I]]=I,t.J.prototype[t.J.gb[I]]=I;
var J,ha,K,L;
J=["requestFullscreen exitFullscreen fullscreenElement fullscreenEnabled fullscreenchange fullscreenerror".split(" "),"webkitRequestFullscreen webkitExitFullscreen webkitFullscreenElement webkitFullscreenEnabled webkitfullscreenchange webkitfullscreenerror".split(" "),"webkitRequestFullScreen webkitCancelFullScreen webkitCurrentFullScreenElement webkitCancelFullScreen webkitfullscreenchange webkitfullscreenerror".split(" "),"mozRequestFullScreen mozCancelFullScreen mozFullScreenElement mozFullScreenEnabled mozfullscreenchange mozfullscreenerror".split(" "),"msRequestFullscreen msExitFullscreen msFullscreenElement msFullscreenEnabled MSFullscreenChange MSFullscreenError".split(" ")];
ha=J[0];for(L=0;L<J.length;L++)if(J[L][1]in document){K=J[L];break}if(K){t.bb.Pb={};for(L=0;L<K.length;L++)t.bb.Pb[ha[L]]=K[L]}
t.Player=t.a.extend({l:function(a,c,d){this.L=a;a.id=a.id||"vjs_video_"+t.s++;this.Te=a&&t.Oa(a);c=t.i.D(ia(a),c);this.Pc=c.language||t.options.language;this.je=c.languages||t.options.languages;this.K={};this.Vc=c.poster||"";this.Jb=!!c.controls;a.controls=l;c.$c=l;ja(this,"audio"===this.L.nodeName.toLowerCase());t.a.call(this,this,c,d);this.controls()?this.p("vjs-controls-enabled"):this.p("vjs-controls-disabled");ja(this)&&this.p("vjs-audio");t.Ca[this.Qa]=this;c.plugins&&t.i.ca(c.plugins,function(a,
c){this[a](c)},this);var e,g,h,k,q;e=t.bind(this,this.reportUserActivity);this.b("mousedown",function(){e();this.clearInterval(g);g=this.setInterval(e,250)});this.b("mousemove",function(a){if(a.screenX!=k||a.screenY!=q)k=a.screenX,q=a.screenY,e()});this.b("mouseup",function(){e();this.clearInterval(g)});this.b("keydown",e);this.b("keyup",e);this.setInterval(function(){if(this.Fa){this.Fa=l;this.userActive(f);this.clearTimeout(h);var a=this.options().inactivityTimeout;0<a&&(h=this.setTimeout(function(){this.Fa||
this.userActive(l)},a))}},250)}});s=t.Player.prototype;s.language=function(a){if(a===b)return this.Pc;this.Pc=a;return this};s.languages=n("je");s.q=t.options;s.dispose=function(){this.o("dispose");this.n("dispose");t.Ca[this.Qa]=j;this.L&&this.L.player&&(this.L.player=j);this.c&&this.c.player&&(this.c.player=j);this.h&&this.h.dispose();t.a.prototype.dispose.call(this)};
function ia(a){var c,d,e={sources:[],tracks:[]};c=t.Oa(a);d=c["data-setup"];d!==j&&t.i.D(c,t.JSON.parse(d||"{}"));t.i.D(e,c);if(a.hasChildNodes()){var g,h;a=a.childNodes;g=0;for(h=a.length;g<h;g++)c=a[g],d=c.nodeName.toLowerCase(),"source"===d?e.sources.push(t.Oa(c)):"track"===d&&e.tracks.push(t.Oa(c))}return e}
s.e=function(){var a=this.c=t.a.prototype.e.call(this,"div"),c=this.L,d;c.removeAttribute("width");c.removeAttribute("height");d=t.Oa(c);t.i.ca(d,function(c){"class"==c?a.className=d[c]:a.setAttribute(c,d[c])});c.id+="_html5_api";c.className="vjs-tech";c.player=a.player=this;this.p("vjs-paused");this.width(this.q.width,f);this.height(this.q.height,f);c.ce=c.networkState;c.parentNode&&c.parentNode.insertBefore(a,c);t.Rb(c,a);this.c=a;this.b("loadstart",this.te);this.b("waiting",this.ze);this.b(["canplay",
"canplaythrough","playing","ended"],this.ye);this.b("seeking",this.we);this.b("seeked",this.ve);this.b("ended",this.qe);this.b("play",this.Xb);this.b("firstplay",this.re);this.b("pause",this.Wb);this.b("progress",this.ue);this.b("durationchange",this.Sc);this.b("fullscreenchange",this.se);return a};
function ka(a,c,d){a.h&&(a.ya=l,a.h.dispose(),a.h=l);"Html5"!==c&&a.L&&(t.f.Kb(a.L),a.L=j);a.Ta=c;a.ya=l;var e=t.i.D({source:d,parentEl:a.c},a.q[c.toLowerCase()]);d&&(a.Cc=d.type,d.src==a.K.src&&0<a.K.currentTime&&(e.startTime=a.K.currentTime),a.K.src=d.src);a.h=new window.videojs[c](a,e);a.h.I(function(){this.d.Va()})}s.te=function(){this.r("vjs-ended");this.error(j);this.paused()?la(this,l):this.o("firstplay")};s.Jc=l;
function la(a,c){c!==b&&a.Jc!==c&&((a.Jc=c)?(a.p("vjs-has-started"),a.o("firstplay")):a.r("vjs-has-started"))}s.Xb=function(){this.r("vjs-ended");this.r("vjs-paused");this.p("vjs-playing");la(this,f)};s.ze=function(){this.p("vjs-waiting")};s.ye=function(){this.r("vjs-waiting")};s.we=function(){this.p("vjs-seeking")};s.ve=function(){this.r("vjs-seeking")};s.re=function(){this.q.starttime&&this.currentTime(this.q.starttime);this.p("vjs-has-started")};s.Wb=function(){this.r("vjs-playing");this.p("vjs-paused")};
s.ue=function(){1==this.bufferedPercent()&&this.o("loadedalldata")};s.qe=function(){this.p("vjs-ended");this.q.loop?(this.currentTime(0),this.play()):this.paused()||this.pause()};s.Sc=function(){var a=M(this,"duration");a&&(0>a&&(a=Infinity),this.duration(a),Infinity===a?this.p("vjs-live"):this.r("vjs-live"))};s.se=function(){this.isFullscreen()?this.p("vjs-fullscreen"):this.r("vjs-fullscreen")};
function N(a,c,d){if(a.h&&!a.h.ya)a.h.I(function(){this[c](d)});else try{a.h[c](d)}catch(e){throw t.log(e),e;}}function M(a,c){if(a.h&&a.h.ya)try{return a.h[c]()}catch(d){throw a.h[c]===b?t.log("Video.js: "+c+" method not defined for "+a.Ta+" playback technology.",d):"TypeError"==d.name?(t.log("Video.js: "+c+" unavailable on "+a.Ta+" playback technology element.",d),a.h.ya=l):t.log(d),d;}}s.play=function(){N(this,"play");return this};s.pause=function(){N(this,"pause");return this};
s.paused=function(){return M(this,"paused")===l?l:f};s.currentTime=function(a){return a!==b?(N(this,"setCurrentTime",a),this):this.K.currentTime=M(this,"currentTime")||0};s.duration=function(a){if(a!==b)return this.K.duration=parseFloat(a),this;this.K.duration===b&&this.Sc();return this.K.duration||0};s.remainingTime=function(){return this.duration()-this.currentTime()};s.buffered=function(){var a=M(this,"buffered");if(!a||!a.length)a=t.xa(0,0);return a};
s.bufferedPercent=function(){var a=this.duration(),c=this.buffered(),d=0,e,g;if(!a)return 0;for(var h=0;h<c.length;h++)e=c.start(h),g=c.end(h),g>a&&(g=a),d+=g-e;return d/a};s.volume=function(a){if(a!==b)return a=Math.max(0,Math.min(1,parseFloat(a))),this.K.volume=a,N(this,"setVolume",a),t.Ie(a),this;a=parseFloat(M(this,"volume"));return isNaN(a)?1:a};s.muted=function(a){return a!==b?(N(this,"setMuted",a),this):M(this,"muted")||l};s.Sa=function(){return M(this,"supportsFullScreen")||l};s.Mc=l;
s.isFullscreen=function(a){return a!==b?(this.Mc=!!a,this):this.Mc};s.isFullScreen=function(a){t.log.warn('player.isFullScreen() has been deprecated, use player.isFullscreen() with a lowercase "s")');return this.isFullscreen(a)};
s.requestFullscreen=function(){var a=t.bb.Pb;this.isFullscreen(f);a?(t.b(document,a.fullscreenchange,t.bind(this,function(c){this.isFullscreen(document[a.fullscreenElement]);this.isFullscreen()===l&&t.n(document,a.fullscreenchange,arguments.callee);this.o("fullscreenchange")})),this.c[a.requestFullscreen]()):this.h.Sa()?N(this,"enterFullScreen"):(this.Fc(),this.o("fullscreenchange"));return this};
s.requestFullScreen=function(){t.log.warn('player.requestFullScreen() has been deprecated, use player.requestFullscreen() with a lowercase "s")');return this.requestFullscreen()};s.exitFullscreen=function(){var a=t.bb.Pb;this.isFullscreen(l);if(a)document[a.exitFullscreen]();else this.h.Sa()?N(this,"exitFullScreen"):(this.Lb(),this.o("fullscreenchange"));return this};s.cancelFullScreen=function(){t.log.warn("player.cancelFullScreen() has been deprecated, use player.exitFullscreen()");return this.exitFullscreen()};
s.Fc=function(){this.fe=f;this.Rd=document.documentElement.style.overflow;t.b(document,"keydown",t.bind(this,this.Gc));document.documentElement.style.overflow="hidden";t.p(document.body,"vjs-full-window");this.o("enterFullWindow")};s.Gc=function(a){27===a.keyCode&&(this.isFullscreen()===f?this.exitFullscreen():this.Lb())};s.Lb=function(){this.fe=l;t.n(document,"keydown",this.Gc);document.documentElement.style.overflow=this.Rd;t.r(document.body,"vjs-full-window");this.o("exitFullWindow")};
s.selectSource=function(a){for(var c=0,d=this.q.techOrder;c<d.length;c++){var e=t.va(d[c]),g=window.videojs[e];if(g){if(g.isSupported())for(var h=0,k=a;h<k.length;h++){var q=k[h];if(g.canPlaySource(q))return{source:q,h:e}}}else t.log.error('The "'+e+'" tech is undefined. Skipped browser support check for that tech.')}return l};
s.src=function(a){if(a===b)return M(this,"src");t.i.isArray(a)?ma(this,a):"string"===typeof a?this.src({src:a}):a instanceof Object&&(a.type&&!window.videojs[this.Ta].canPlaySource(a)?ma(this,[a]):(this.K.src=a.src,this.Cc=a.type||"",this.I(function(){window.videojs[this.Ta].prototype.hasOwnProperty("setSource")?N(this,"setSource",a):N(this,"src",a.src);"auto"==this.q.preload&&this.load();this.q.autoplay&&this.play()})));return this};
function ma(a,c){var d=a.selectSource(c);d?d.h===a.Ta?a.src(d.source):ka(a,d.h,d.source):(a.setTimeout(function(){this.error({code:4,message:this.v(this.options().notSupportedMessage)})},0),a.Va())}s.load=function(){N(this,"load");return this};s.currentSrc=function(){return M(this,"currentSrc")||this.K.src||""};s.Nd=function(){return this.Cc||""};s.Ra=function(a){return a!==b?(N(this,"setPreload",a),this.q.preload=a,this):M(this,"preload")};
s.autoplay=function(a){return a!==b?(N(this,"setAutoplay",a),this.q.autoplay=a,this):M(this,"autoplay")};s.loop=function(a){return a!==b?(N(this,"setLoop",a),this.q.loop=a,this):M(this,"loop")};s.poster=function(a){if(a===b)return this.Vc;a||(a="");this.Vc=a;N(this,"setPoster",a);this.o("posterchange");return this};
s.controls=function(a){return a!==b?(a=!!a,this.Jb!==a&&((this.Jb=a)?(this.r("vjs-controls-disabled"),this.p("vjs-controls-enabled"),this.o("controlsenabled")):(this.r("vjs-controls-enabled"),this.p("vjs-controls-disabled"),this.o("controlsdisabled"))),this):this.Jb};t.Player.prototype.bc;s=t.Player.prototype;
s.usingNativeControls=function(a){return a!==b?(a=!!a,this.bc!==a&&((this.bc=a)?(this.p("vjs-using-native-controls"),this.o("usingnativecontrols")):(this.r("vjs-using-native-controls"),this.o("usingcustomcontrols"))),this):this.bc};s.ja=j;s.error=function(a){if(a===b)return this.ja;if(a===j)return this.ja=a,this.r("vjs-error"),this;this.ja=a instanceof t.J?a:new t.J(a);this.o("error");this.p("vjs-error");t.log.error("(CODE:"+this.ja.code+" "+t.J.gb[this.ja.code]+")",this.ja.message,this.ja);return this};
s.ended=function(){return M(this,"ended")};s.seeking=function(){return M(this,"seeking")};s.seekable=function(){return M(this,"seekable")};s.Fa=f;s.reportUserActivity=function(){this.Fa=f};s.ac=f;
s.userActive=function(a){return a!==b?(a=!!a,a!==this.ac&&((this.ac=a)?(this.Fa=f,this.r("vjs-user-inactive"),this.p("vjs-user-active"),this.o("useractive")):(this.Fa=l,this.h&&this.h.N("mousemove",function(a){a.stopPropagation();a.preventDefault()}),this.r("vjs-user-active"),this.p("vjs-user-inactive"),this.o("userinactive"))),this):this.ac};s.playbackRate=function(a){return a!==b?(N(this,"setPlaybackRate",a),this):this.h&&this.h.featuresPlaybackRate?M(this,"playbackRate"):1};s.Lc=l;
function ja(a,c){return c!==b?(a.Lc=!!c,a):a.Lc}s.networkState=function(){return M(this,"networkState")};s.readyState=function(){return M(this,"readyState")};s.textTracks=function(){return this.h&&this.h.textTracks()};s.X=function(){return this.h&&this.h.remoteTextTracks()};s.addTextTrack=function(a,c,d){return this.h&&this.h.addTextTrack(a,c,d)};s.ha=function(a){return this.h&&this.h.addRemoteTextTrack(a)};s.Da=function(a){this.h&&this.h.removeRemoteTextTrack(a)};t.tb=t.a.extend();
t.tb.prototype.q={sf:"play",children:{playToggle:{},currentTimeDisplay:{},timeDivider:{},durationDisplay:{},remainingTimeDisplay:{},liveDisplay:{},progressControl:{},fullscreenToggle:{},volumeControl:{},muteToggle:{},playbackRateMenuButton:{},subtitlesButton:{},captionsButton:{},chaptersButton:{}}};t.tb.prototype.e=function(){return t.e("div",{className:"vjs-control-bar"})};t.hc=t.a.extend({l:function(a,c){t.a.call(this,a,c)}});
t.hc.prototype.e=function(){var a=t.a.prototype.e.call(this,"div",{className:"vjs-live-controls vjs-control"});this.B=t.e("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.v("Stream Type")+"</span>"+this.v("LIVE"),"aria-live":"off"});a.appendChild(this.B);return a};t.kc=t.w.extend({l:function(a,c){t.w.call(this,a,c);this.b(a,"play",this.Xb);this.b(a,"pause",this.Wb)}});s=t.kc.prototype;s.ta="Play";s.T=function(){return"vjs-play-control "+t.w.prototype.T.call(this)};
s.u=function(){this.d.paused()?this.d.play():this.d.pause()};s.Xb=function(){this.r("vjs-paused");this.p("vjs-playing");this.c.children[0].children[0].innerHTML=this.v("Pause")};s.Wb=function(){this.r("vjs-playing");this.p("vjs-paused");this.c.children[0].children[0].innerHTML=this.v("Play")};t.ub=t.a.extend({l:function(a,c){t.a.call(this,a,c);this.b(a,"timeupdate",this.fa)}});
t.ub.prototype.e=function(){var a=t.a.prototype.e.call(this,"div",{className:"vjs-current-time vjs-time-controls vjs-control"});this.B=t.e("div",{className:"vjs-current-time-display",innerHTML:'<span class="vjs-control-text">Current Time </span>0:00',"aria-live":"off"});a.appendChild(this.B);return a};t.ub.prototype.fa=function(){var a=this.d.nb?this.d.K.currentTime:this.d.currentTime();this.B.innerHTML='<span class="vjs-control-text">'+this.v("Current Time")+"</span> "+t.Na(a,this.d.duration())};
t.vb=t.a.extend({l:function(a,c){t.a.call(this,a,c);this.b(a,"timeupdate",this.fa);this.b(a,"loadedmetadata",this.fa)}});t.vb.prototype.e=function(){var a=t.a.prototype.e.call(this,"div",{className:"vjs-duration vjs-time-controls vjs-control"});this.B=t.e("div",{className:"vjs-duration-display",innerHTML:'<span class="vjs-control-text">'+this.v("Duration Time")+"</span> 0:00","aria-live":"off"});a.appendChild(this.B);return a};
t.vb.prototype.fa=function(){var a=this.d.duration();a&&(this.B.innerHTML='<span class="vjs-control-text">'+this.v("Duration Time")+"</span> "+t.Na(a))};t.qc=t.a.extend({l:function(a,c){t.a.call(this,a,c)}});t.qc.prototype.e=function(){return t.a.prototype.e.call(this,"div",{className:"vjs-time-divider",innerHTML:"<div><span>/</span></div>"})};t.Cb=t.a.extend({l:function(a,c){t.a.call(this,a,c);this.b(a,"timeupdate",this.fa)}});
t.Cb.prototype.e=function(){var a=t.a.prototype.e.call(this,"div",{className:"vjs-remaining-time vjs-time-controls vjs-control"});this.B=t.e("div",{className:"vjs-remaining-time-display",innerHTML:'<span class="vjs-control-text">'+this.v("Remaining Time")+"</span> -0:00","aria-live":"off"});a.appendChild(this.B);return a};t.Cb.prototype.fa=function(){this.d.duration()&&(this.B.innerHTML='<span class="vjs-control-text">'+this.v("Remaining Time")+"</span> -"+t.Na(this.d.remainingTime()))};
t.Ya=t.w.extend({l:function(a,c){t.w.call(this,a,c)}});t.Ya.prototype.ta="Fullscreen";t.Ya.prototype.T=function(){return"vjs-fullscreen-control "+t.w.prototype.T.call(this)};t.Ya.prototype.u=function(){this.d.isFullscreen()?(this.d.exitFullscreen(),this.Ib.innerHTML=this.v("Fullscreen")):(this.d.requestFullscreen(),this.Ib.innerHTML=this.v("Non-Fullscreen"))};t.Bb=t.a.extend({l:function(a,c){t.a.call(this,a,c)}});t.Bb.prototype.q={children:{seekBar:{}}};
t.Bb.prototype.e=function(){return t.a.prototype.e.call(this,"div",{className:"vjs-progress-control vjs-control"})};t.nc=t.S.extend({l:function(a,c){t.S.call(this,a,c);this.b(a,"timeupdate",this.Ea);a.I(t.bind(this,this.Ea))}});s=t.nc.prototype;s.q={children:{loadProgressBar:{},playProgressBar:{},seekHandle:{}},barName:"playProgressBar",handleName:"seekHandle"};s.Uc="timeupdate";s.e=function(){return t.S.prototype.e.call(this,"div",{className:"vjs-progress-holder","aria-label":"video progress bar"})};
s.Ea=function(){var a=this.d.nb?this.d.K.currentTime:this.d.currentTime();this.c.setAttribute("aria-valuenow",t.round(100*this.Qb(),2));this.c.setAttribute("aria-valuetext",t.Na(a,this.d.duration()))};s.Qb=function(){return this.d.currentTime()/this.d.duration()};s.lb=function(a){t.S.prototype.lb.call(this,a);this.d.nb=f;this.d.p("vjs-scrubbing");this.$e=!this.d.paused();this.d.pause()};s.la=function(a){a=ea(this,a)*this.d.duration();a==this.d.duration()&&(a-=0.1);this.d.currentTime(a)};
s.Ba=function(a){t.S.prototype.Ba.call(this,a);this.d.nb=l;this.d.r("vjs-scrubbing");this.$e&&this.d.play()};s.gd=function(){this.d.currentTime(this.d.currentTime()+5)};s.fd=function(){this.d.currentTime(this.d.currentTime()-5)};t.yb=t.a.extend({l:function(a,c){t.a.call(this,a,c);this.b(a,"progress",this.update)}});t.yb.prototype.e=function(){return t.a.prototype.e.call(this,"div",{className:"vjs-load-progress",innerHTML:'<span class="vjs-control-text"><span>'+this.v("Loaded")+"</span>: 0%</span>"})};
t.yb.prototype.update=function(){var a,c,d,e,g=this.d.buffered();a=this.d.duration();var h,k=this.d;h=k.buffered();k=k.duration();h=h.end(h.length-1);h>k&&(h=k);k=this.c.children;this.c.style.width=100*(h/a||0)+"%";for(a=0;a<g.length;a++)c=g.start(a),d=g.end(a),(e=k[a])||(e=this.c.appendChild(t.e())),e.style.left=100*(c/h||0)+"%",e.style.width=100*((d-c)/h||0)+"%";for(a=k.length;a>g.length;a--)this.c.removeChild(k[a-1])};t.jc=t.a.extend({l:function(a,c){t.a.call(this,a,c)}});
t.jc.prototype.e=function(){return t.a.prototype.e.call(this,"div",{className:"vjs-play-progress",innerHTML:'<span class="vjs-control-text"><span>'+this.v("Progress")+"</span>: 0%</span>"})};t.Za=t.ga.extend({l:function(a,c){t.ga.call(this,a,c);this.b(a,"timeupdate",this.fa)}});t.Za.prototype.defaultValue="00:00";t.Za.prototype.e=function(){return t.ga.prototype.e.call(this,"div",{className:"vjs-seek-handle","aria-live":"off"})};
t.Za.prototype.fa=function(){var a=this.d.nb?this.d.K.currentTime:this.d.currentTime();this.c.innerHTML='<span class="vjs-control-text">'+t.Na(a,this.d.duration())+"</span>"};t.Fb=t.a.extend({l:function(a,c){t.a.call(this,a,c);a.h&&a.h.featuresVolumeControl===l&&this.p("vjs-hidden");this.b(a,"loadstart",function(){a.h.featuresVolumeControl===l?this.p("vjs-hidden"):this.r("vjs-hidden")})}});t.Fb.prototype.q={children:{volumeBar:{}}};
t.Fb.prototype.e=function(){return t.a.prototype.e.call(this,"div",{className:"vjs-volume-control vjs-control"})};t.Eb=t.S.extend({l:function(a,c){t.S.call(this,a,c);this.b(a,"volumechange",this.Ea);a.I(t.bind(this,this.Ea))}});s=t.Eb.prototype;s.Ea=function(){this.c.setAttribute("aria-valuenow",t.round(100*this.d.volume(),2));this.c.setAttribute("aria-valuetext",t.round(100*this.d.volume(),2)+"%")};s.q={children:{volumeLevel:{},volumeHandle:{}},barName:"volumeLevel",handleName:"volumeHandle"};
s.Uc="volumechange";s.e=function(){return t.S.prototype.e.call(this,"div",{className:"vjs-volume-bar","aria-label":"volume level"})};s.la=function(a){this.d.muted()&&this.d.muted(l);this.d.volume(ea(this,a))};s.Qb=function(){return this.d.muted()?0:this.d.volume()};s.gd=function(){this.d.volume(this.d.volume()+0.1)};s.fd=function(){this.d.volume(this.d.volume()-0.1)};t.rc=t.a.extend({l:function(a,c){t.a.call(this,a,c)}});
t.rc.prototype.e=function(){return t.a.prototype.e.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})};t.Gb=t.ga.extend();t.Gb.prototype.defaultValue="00:00";t.Gb.prototype.e=function(){return t.ga.prototype.e.call(this,"div",{className:"vjs-volume-handle"})};
t.ra=t.w.extend({l:function(a,c){t.w.call(this,a,c);this.b(a,"volumechange",this.update);a.h&&a.h.featuresVolumeControl===l&&this.p("vjs-hidden");this.b(a,"loadstart",function(){a.h.featuresVolumeControl===l?this.p("vjs-hidden"):this.r("vjs-hidden")})}});t.ra.prototype.e=function(){return t.w.prototype.e.call(this,"div",{className:"vjs-mute-control vjs-control",innerHTML:'<div><span class="vjs-control-text">'+this.v("Mute")+"</span></div>"})};
t.ra.prototype.u=function(){this.d.muted(this.d.muted()?l:f)};t.ra.prototype.update=function(){var a=this.d.volume(),c=3;0===a||this.d.muted()?c=0:0.33>a?c=1:0.67>a&&(c=2);this.d.muted()?this.c.children[0].children[0].innerHTML!=this.v("Unmute")&&(this.c.children[0].children[0].innerHTML=this.v("Unmute")):this.c.children[0].children[0].innerHTML!=this.v("Mute")&&(this.c.children[0].children[0].innerHTML=this.v("Mute"));for(a=0;4>a;a++)t.r(this.c,"vjs-vol-"+a);t.p(this.c,"vjs-vol-"+c)};
t.Ha=t.O.extend({l:function(a,c){t.O.call(this,a,c);this.b(a,"volumechange",this.af);a.h&&a.h.featuresVolumeControl===l&&this.p("vjs-hidden");this.b(a,"loadstart",function(){a.h.featuresVolumeControl===l?this.p("vjs-hidden"):this.r("vjs-hidden")});this.p("vjs-menu-button")}});t.Ha.prototype.La=function(){var a=new t.qa(this.d,{zc:"div"}),c=new t.Eb(this.d,this.q.volumeBar);c.b("focus",function(){a.p("vjs-lock-showing")});c.b("blur",function(){G(a)});a.aa(c);return a};
t.Ha.prototype.u=function(){t.ra.prototype.u.call(this);t.O.prototype.u.call(this)};t.Ha.prototype.e=function(){return t.w.prototype.e.call(this,"div",{className:"vjs-volume-menu-button vjs-menu-button vjs-control",innerHTML:'<div><span class="vjs-control-text">'+this.v("Mute")+"</span></div>"})};t.Ha.prototype.af=t.ra.prototype.update;t.lc=t.O.extend({l:function(a,c){t.O.call(this,a,c);this.pd();this.od();this.b(a,"loadstart",this.pd);this.b(a,"ratechange",this.od)}});s=t.lc.prototype;s.ta="Playback Rate";
s.className="vjs-playback-rate";s.e=function(){var a=t.O.prototype.e.call(this);this.Oc=t.e("div",{className:"vjs-playback-rate-value",innerHTML:1});a.appendChild(this.Oc);return a};s.La=function(){var a=new t.qa(this.k()),c=this.k().options().playbackRates;if(c)for(var d=c.length-1;0<=d;d--)a.aa(new t.Ab(this.k(),{rate:c[d]+"x"}));return a};s.Ea=function(){this.m().setAttribute("aria-valuenow",this.k().playbackRate())};
s.u=function(){for(var a=this.k().playbackRate(),c=this.k().options().playbackRates,d=c[0],e=0;e<c.length;e++)if(c[e]>a){d=c[e];break}this.k().playbackRate(d)};function na(a){return a.k().h&&a.k().h.featuresPlaybackRate&&a.k().options().playbackRates&&0<a.k().options().playbackRates.length}s.pd=function(){na(this)?this.r("vjs-hidden"):this.p("vjs-hidden")};s.od=function(){na(this)&&(this.Oc.innerHTML=this.k().playbackRate()+"x")};
t.Ab=t.M.extend({zc:"button",l:function(a,c){var d=this.label=c.rate,e=this.Wc=parseFloat(d,10);c.label=d;c.selected=1===e;t.M.call(this,a,c);this.b(a,"ratechange",this.update)}});t.Ab.prototype.u=function(){t.M.prototype.u.call(this);this.k().playbackRate(this.Wc)};t.Ab.prototype.update=function(){this.selected(this.k().playbackRate()==this.Wc)};t.mc=t.w.extend({l:function(a,c){t.w.call(this,a,c);this.update();a.b("posterchange",t.bind(this,this.update))}});s=t.mc.prototype;
s.dispose=function(){this.k().n("posterchange",this.update);t.w.prototype.dispose.call(this)};s.e=function(){var a=t.e("div",{className:"vjs-poster",tabIndex:-1});t.td||(this.Mb=t.e("img"),a.appendChild(this.Mb));return a};s.update=function(){var a=this.k().poster();this.na(a);a?this.show():this.W()};s.na=function(a){var c;this.Mb?this.Mb.src=a:(c="",a&&(c='url("'+a+'")'),this.c.style.backgroundImage=c)};s.u=function(){this.d.play()};t.ic=t.a.extend({l:function(a,c){t.a.call(this,a,c)}});
t.ic.prototype.e=function(){return t.a.prototype.e.call(this,"div",{className:"vjs-loading-spinner"})};t.rb=t.w.extend();t.rb.prototype.e=function(){return t.w.prototype.e.call(this,"div",{className:"vjs-big-play-button",innerHTML:'<span aria-hidden="true"></span>',"aria-label":"play video"})};t.rb.prototype.u=function(){this.d.play()};t.wb=t.a.extend({l:function(a,c){t.a.call(this,a,c);this.update();this.b(a,"error",this.update)}});
t.wb.prototype.e=function(){var a=t.a.prototype.e.call(this,"div",{className:"vjs-error-display"});this.B=t.e("div");a.appendChild(this.B);return a};t.wb.prototype.update=function(){this.k().error()&&(this.B.innerHTML=this.v(this.k().error().message))};var O;t.j=t.a.extend({l:function(a,c,d){c=c||{};c.$c=l;t.a.call(this,a,c,d);this.featuresProgressEvents||this.ne();this.featuresTimeupdateEvents||this.oe();this.be();this.featuresNativeTextTracks||this.Sd();this.de()}});s=t.j.prototype;
s.be=function(){var a,c;a=this.k();c=function(){a.controls()&&!a.usingNativeControls()&&this.Fd()};this.I(c);this.b(a,"controlsenabled",c);this.b(a,"controlsdisabled",this.De);this.I(function(){this.networkState&&0<this.networkState()&&this.k().o("loadstart")})};
s.Fd=function(){var a;this.b("mousedown",this.u);this.b("touchstart",function(){a=this.d.userActive()});this.b("touchmove",function(){a&&this.k().reportUserActivity()});this.b("touchend",function(a){a.preventDefault()});da(this);this.b("tap",this.xe)};s.De=function(){this.n("tap");this.n("touchstart");this.n("touchmove");this.n("touchleave");this.n("touchcancel");this.n("touchend");this.n("click");this.n("mousedown")};
s.u=function(a){0===a.button&&this.k().controls()&&(this.k().paused()?this.k().play():this.k().pause())};s.xe=function(){this.k().userActive(!this.k().userActive())};s.ne=function(){this.Qc=f;this.We()};s.me=function(){this.Qc=l;this.hd()};s.We=function(){this.Ce=this.setInterval(function(){var a=this.k().bufferedPercent();this.Jd!=a&&this.k().o("progress");this.Jd=a;1===a&&this.hd()},500)};s.hd=function(){this.clearInterval(this.Ce)};
s.oe=function(){var a=this.d;this.Vb=f;this.b(a,"play",this.md);this.b(a,"pause",this.qb);this.N("timeupdate",function(){this.featuresTimeupdateEvents=f;this.Rc()})};s.Rc=function(){var a=this.d;this.Vb=l;this.qb();this.n(a,"play",this.md);this.n(a,"pause",this.qb)};s.md=function(){this.Bc&&this.qb();this.Bc=this.setInterval(function(){this.k().o("timeupdate")},250)};s.qb=function(){this.clearInterval(this.Bc);this.k().o("timeupdate")};s.dispose=function(){this.Qc&&this.me();this.Vb&&this.Rc();t.a.prototype.dispose.call(this)};
s.Zb=function(){this.Vb&&this.k().o("timeupdate")};s.de=function(){function a(){var a=c.da("textTrackDisplay");a&&a.C()}var c=this.d,d;if(d=this.textTracks())d.addEventListener("removetrack",a),d.addEventListener("addtrack",a),this.b("dispose",t.bind(this,function(){d.removeEventListener("removetrack",a);d.removeEventListener("addtrack",a)}))};
s.Sd=function(){var a=this.d,c,d,e;window.WebVTT||(e=document.createElement("script"),e.src=a.options()["vtt.js"]||"../node_modules/vtt.js/dist/vtt.js",a.m().appendChild(e),window.WebVTT=f);if(d=this.textTracks())c=function(){var c,d,e;e=a.da("textTrackDisplay");e.C();for(c=0;c<this.length;c++)d=this[c],d.removeEventListener("cuechange",t.bind(e,e.C)),"showing"===d.mode&&d.addEventListener("cuechange",t.bind(e,e.C))},d.addEventListener("change",c),this.b("dispose",t.bind(this,function(){d.removeEventListener("change",
c)}))};s.textTracks=function(){this.d.ld=this.d.ld||new t.F;return this.d.ld};s.X=function(){this.d.Xc=this.d.Xc||new t.F;return this.d.Xc};O=function(a,c,d,e,g){var h=a.textTracks();g=g||{};g.kind=c;d&&(g.label=d);e&&(g.language=e);g.player=a.d;a=new t.t(g);P(h,a);return a};t.j.prototype.addTextTrack=function(a,c,d){if(!a)throw Error("TextTrack kind is required but was not provided");return O(this,a,c,d)};t.j.prototype.ha=function(a){a=O(this,a.kind,a.label,a.language,a);P(this.X(),a);return{Y:a}};
t.j.prototype.Da=function(a){Q(this.textTracks(),a);Q(this.X(),a)};t.j.prototype.bd=m();t.j.prototype.featuresVolumeControl=f;t.j.prototype.featuresFullscreenResize=l;t.j.prototype.featuresPlaybackRate=l;t.j.prototype.featuresProgressEvents=l;t.j.prototype.featuresTimeupdateEvents=l;t.j.prototype.featuresNativeTextTracks=l;
t.j.dc=function(a){a.registerSourceHandler=function(c,d){var e=a.cd;e||(e=a.cd=[]);d===b&&(d=e.length);e.splice(d,0,c)};a.ob=function(c){for(var d=a.cd||[],e,g=0;g<d.length;g++)if(e=d[g].canHandleSource(c))return d[g];return j};a.wc=function(c){var d=a.ob(c);return d?d.canHandleSource(c):""};a.prototype.ma=function(c){var d=a.ob(c);d||(a.nativeSourceHandler?d=a.nativeSourceHandler:t.log.error("No source hander found for the current source."));this.ia();this.n("dispose",this.ia);this.fb=c;this.$b=
d.handleSource(c,this);this.b("dispose",this.ia);return this};a.prototype.ia=function(){this.$b&&this.$b.dispose&&this.$b.dispose()}};t.media={};
t.f=t.j.extend({l:function(a,c,d){var e,g,h;if(c.nativeCaptions===l||c.nativeTextTracks===l)this.featuresNativeTextTracks=l;t.j.call(this,a,c,d);for(d=t.f.xb.length-1;0<=d;d--)this.b(t.f.xb[d],this.Td);(c=c.source)&&(this.c.currentSrc!==c.src||a.L&&3===a.L.ce)&&this.ma(c);if(this.c.hasChildNodes()){d=this.c.childNodes;e=d.length;for(c=[];e--;)g=d[e],h=g.nodeName.toLowerCase(),"track"===h&&(this.featuresNativeTextTracks?P(this.X(),g.track):c.push(g));for(d=0;d<c.length;d++)this.c.removeChild(c[d])}if(t.Db&&
a.options().nativeControlsForTouch===f){var k,q,r,u;k=this;q=this.k();c=q.controls();k.c.controls=!!c;r=function(){k.c.controls=f};u=function(){k.c.controls=l};q.b("controlsenabled",r);q.b("controlsdisabled",u);c=function(){q.n("controlsenabled",r);q.n("controlsdisabled",u)};k.b("dispose",c);q.b("usingcustomcontrols",c);q.usingNativeControls(f)}a.I(function(){this.src()&&(this.L&&this.q.autoplay&&this.paused())&&(delete this.L.poster,this.play())});this.Va()}});s=t.f.prototype;
s.dispose=function(){t.f.Kb(this.c);t.j.prototype.dispose.call(this)};
s.e=function(){var a=this.d,c,d,e,g=a.L;if(!g||this.movingMediaElementInDOM===l){g?(e=g.cloneNode(l),t.f.Kb(g),g=e,a.L=j):(g=t.e("video"),e=videojs.Z.Aa({},a.Te),(!t.Db||a.options().nativeControlsForTouch!==f)&&delete e.controls,t.ad(g,t.i.D(e,{id:a.id()+"_html5_api","class":"vjs-tech"})));g.player=a;if(a.q.nd)for(e=0;e<a.q.nd.length;e++)c=a.q.nd[e],d=document.createElement("track"),d.Tb=c.Tb,d.label=c.label,d.ed=c.ed,d.src=c.src,"default"in c&&d.setAttribute("default","default"),g.appendChild(d);
t.Rb(g,a.m())}c=["autoplay","preload","loop","muted"];for(e=c.length-1;0<=e;e--){d=c[e];var h={};"undefined"!==typeof a.q[d]&&(h[d]=a.q[d]);t.ad(g,h)}return g};s.Td=function(a){"error"==a.type&&this.error()?this.k().error(this.error().code):(a.bubbles=l,this.k().o(a))};s.play=function(){this.c.play()};s.pause=function(){this.c.pause()};s.paused=function(){return this.c.paused};s.currentTime=function(){return this.c.currentTime};s.Zb=function(a){try{this.c.currentTime=a}catch(c){t.log(c,"Video is not ready. (Video.js)")}};
s.duration=function(){return this.c.duration||0};s.buffered=function(){return this.c.buffered};s.volume=function(){return this.c.volume};s.Oe=function(a){this.c.volume=a};s.muted=function(){return this.c.muted};s.Ke=function(a){this.c.muted=a};s.width=function(){return this.c.offsetWidth};s.height=function(){return this.c.offsetHeight};s.Sa=function(){return"function"==typeof this.c.webkitEnterFullScreen&&(/Android/.test(t.P)||!/Chrome|Mac OS X 10.5/.test(t.P))?f:l};
s.Ec=function(){var a=this.c;"webkitDisplayingFullscreen"in a&&this.N("webkitbeginfullscreen",function(){this.d.isFullscreen(f);this.N("webkitendfullscreen",function(){this.d.isFullscreen(l);this.d.o("fullscreenchange")});this.d.o("fullscreenchange")});a.paused&&a.networkState<=a.ef?(this.c.play(),this.setTimeout(function(){a.pause();a.webkitEnterFullScreen()},0)):a.webkitEnterFullScreen()};s.Ud=function(){this.c.webkitExitFullScreen()};
function oa(a,c){var d=/^blob\:/i;return c&&a&&d.test(a)?c:a}s.src=function(a){var c=this.c.src;if(a===b)return oa(c,this.dd);this.na(a)};s.na=function(a){this.c.src=a};s.load=function(){this.c.load()};s.currentSrc=function(){var a=this.c.currentSrc;return!this.fb?a:oa(a,this.fb.src)};s.poster=function(){return this.c.poster};s.bd=function(a){this.c.poster=a};s.Ra=function(){return this.c.Ra};s.Me=function(a){this.c.Ra=a};s.autoplay=function(){return this.c.autoplay};
s.He=function(a){this.c.autoplay=a};s.controls=function(){return this.c.controls};s.loop=function(){return this.c.loop};s.Je=function(a){this.c.loop=a};s.error=function(){return this.c.error};s.seeking=function(){return this.c.seeking};s.seekable=function(){return this.c.seekable};s.ended=function(){return this.c.ended};s.playbackRate=function(){return this.c.playbackRate};s.Le=function(a){this.c.playbackRate=a};s.networkState=function(){return this.c.networkState};s.readyState=function(){return this.c.readyState};
s.textTracks=function(){return!this.featuresNativeTextTracks?t.j.prototype.textTracks.call(this):this.c.textTracks};s.addTextTrack=function(a,c,d){return!this.featuresNativeTextTracks?t.j.prototype.addTextTrack.call(this,a,c,d):this.c.addTextTrack(a,c,d)};
s.ha=function(a){if(!this.featuresNativeTextTracks)return t.j.prototype.ha.call(this,a);var c=document.createElement("track");a=a||{};a.kind&&(c.kind=a.kind);a.label&&(c.label=a.label);if(a.language||a.srclang)c.srclang=a.language||a.srclang;a["default"]&&(c["default"]=a["default"]);a.id&&(c.id=a.id);a.src&&(c.src=a.src);this.m().appendChild(c);P(this.X(),c.Y);return c};
s.Da=function(a){if(!this.featuresNativeTextTracks)return t.j.prototype.Da.call(this,a);var c,d;Q(this.X(),a);c=this.m().querySelectorAll("track");for(d=0;d<c.length;d++)if(c[d]===a||c[d].track===a){c[d].parentNode.removeChild(c[d]);break}};t.f.isSupported=function(){try{t.A.volume=0.5}catch(a){return l}return!!t.A.canPlayType};t.j.dc(t.f);var pa=t.f.prototype.ma,qa=t.f.prototype.ia;t.f.prototype.ma=function(a){var c=pa.call(this,a);this.dd=a.src;return c};t.f.prototype.ia=function(){this.dd=b;return qa.call(this)};
t.f.nativeSourceHandler={};t.f.nativeSourceHandler.canHandleSource=function(a){function c(a){try{return t.A.canPlayType(a)}catch(c){return""}}return a.type?c(a.type):a.src?(a=(a=a.src.match(/\.([^.\/\?]+)(\?[^\/]+)?$/i))&&a[1],c("video/"+a)):""};t.f.nativeSourceHandler.handleSource=function(a,c){c.na(a.src)};t.f.nativeSourceHandler.dispose=m();t.f.registerSourceHandler(t.f.nativeSourceHandler);t.f.Ld=function(){var a=t.A.volume;t.A.volume=a/2+0.1;return a!==t.A.volume};
t.f.Kd=function(){var a=t.A.playbackRate;t.A.playbackRate=a/2+0.1;return a!==t.A.playbackRate};t.f.Re=function(){var a;(a=!!t.A.textTracks)&&0<t.A.textTracks.length&&(a="number"!==typeof t.A.textTracks[0].mode);a&&t.gc&&(a=l);return a};t.f.prototype.featuresVolumeControl=t.f.Ld();t.f.prototype.featuresPlaybackRate=t.f.Kd();t.f.prototype.movingMediaElementInDOM=!t.xd;t.f.prototype.featuresFullscreenResize=f;t.f.prototype.featuresProgressEvents=f;t.f.prototype.featuresNativeTextTracks=t.f.Re();
var S,ra=/^application\/(?:x-|vnd\.apple\.)mpegurl/i,sa=/^video\/mp4/i;t.f.Tc=function(){4<=t.ec&&(S||(S=t.A.constructor.prototype.canPlayType),t.A.constructor.prototype.canPlayType=function(a){return a&&ra.test(a)?"maybe":S.call(this,a)});t.Bd&&(S||(S=t.A.constructor.prototype.canPlayType),t.A.constructor.prototype.canPlayType=function(a){return a&&sa.test(a)?"maybe":S.call(this,a)})};t.f.Ye=function(){var a=t.A.constructor.prototype.canPlayType;t.A.constructor.prototype.canPlayType=S;S=j;return a};
t.f.Tc();t.f.xb="loadstart suspend abort error emptied stalled loadedmetadata loadeddata canplay canplaythrough playing waiting seeking seeked ended durationchange timeupdate progress play pause ratechange volumechange".split(" ");t.f.Kb=function(a){if(a){a.player=j;for(a.parentNode&&a.parentNode.removeChild(a);a.hasChildNodes();)a.removeChild(a.firstChild);a.removeAttribute("src");if("function"===typeof a.load)try{a.load()}catch(c){}}};
t.g=t.j.extend({l:function(a,c,d){t.j.call(this,a,c,d);var e=c.source;d=a.id()+"_flash_api";var g=a.q,g=t.i.D({readyFunction:"videojs.Flash.onReady",eventProxyFunction:"videojs.Flash.onEvent",errorEventProxyFunction:"videojs.Flash.onError",autoplay:g.autoplay,preload:g.Ra,loop:g.loop,muted:g.muted},c.flashVars),h=t.i.D({wmode:"opaque",bgcolor:"#000000"},c.params);d=t.i.D({id:d,name:d,"class":"vjs-tech"},c.attributes);e&&this.I(function(){this.ma(e)});t.Rb(this.c,c.parentEl);c.startTime&&this.I(function(){this.load();
this.play();this.currentTime(c.startTime)});t.gc&&this.I(function(){this.b("mousemove",function(){this.k().o({type:"mousemove",bubbles:l})})});a.b("stageclick",a.reportUserActivity);this.c=t.g.Dc(c.swf,this.c,g,h,d)}});s=t.g.prototype;s.dispose=function(){t.j.prototype.dispose.call(this)};s.play=function(){this.ended()&&this.setCurrentTime(0);this.c.vjs_play()};s.pause=function(){this.c.vjs_pause()};s.src=function(a){return a===b?this.currentSrc():this.na(a)};
s.na=function(a){a=t.Xd(a);this.c.vjs_src(a);if(this.d.autoplay()){var c=this;this.setTimeout(function(){c.play()},0)}};t.g.prototype.setCurrentTime=function(a){this.ke=a;this.c.vjs_setProperty("currentTime",a);t.j.prototype.Zb.call(this)};t.g.prototype.currentTime=function(){return this.seeking()?this.ke||0:this.c.vjs_getProperty("currentTime")};t.g.prototype.currentSrc=function(){return this.fb?this.fb.src:this.c.vjs_getProperty("currentSrc")};t.g.prototype.load=function(){this.c.vjs_load()};
t.g.prototype.poster=function(){this.c.vjs_getProperty("poster")};t.g.prototype.setPoster=m();s=t.g.prototype;s.seekable=function(){return 0===this.duration()?t.xa():t.xa(0,this.duration())};s.buffered=function(){return!this.c.vjs_getProperty?t.xa():t.xa(0,this.c.vjs_getProperty("buffered"))};s.duration=function(){return!this.c.vjs_getProperty?0:this.c.vjs_getProperty("duration")};s.Sa=p(l);s.Ec=p(l);
function ta(){var a=T[U],c=a.charAt(0).toUpperCase()+a.slice(1);ua["set"+c]=function(c){return this.c.vjs_setProperty(a,c)}}function va(a){ua[a]=function(){return this.c.vjs_getProperty(a)}}
var ua=t.g.prototype,T="rtmpConnection rtmpStream preload defaultPlaybackRate playbackRate autoplay loop mediaGroup controller controls volume muted defaultMuted".split(" "),wa="error networkState readyState seeking initialTime startOffsetTime paused played ended videoTracks audioTracks videoWidth videoHeight".split(" "),U;for(U=0;U<T.length;U++)va(T[U]),ta();for(U=0;U<wa.length;U++)va(wa[U]);t.g.isSupported=function(){return 10<=t.g.version()[0]};t.j.dc(t.g);t.g.nativeSourceHandler={};
t.g.nativeSourceHandler.canHandleSource=function(a){return!a.type?"":a.type.replace(/;.*/,"").toLowerCase()in t.g.Wd?"maybe":""};t.g.nativeSourceHandler.handleSource=function(a,c){c.na(a.src)};t.g.nativeSourceHandler.dispose=m();t.g.registerSourceHandler(t.g.nativeSourceHandler);t.g.Wd={"video/flv":"FLV","video/x-flv":"FLV","video/mp4":"MP4","video/m4v":"MP4"};t.g.onReady=function(a){var c;if(c=(a=t.m(a))&&a.parentNode&&a.parentNode.player)a.player=c,t.g.checkReady(c.h)};
t.g.checkReady=function(a){a.m()&&(a.m().vjs_getProperty?a.Va():this.setTimeout(function(){t.g.checkReady(a)},50))};t.g.onEvent=function(a,c){t.m(a).player.o(c)};t.g.onError=function(a,c){var d=t.m(a).player,e="FLASH: "+c;"srcnotfound"==c?d.error({code:4,message:e}):d.error(e)};
t.g.version=function(){var a="0,0,0";try{a=(new window.ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1]}catch(c){try{navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin&&(a=(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1])}catch(d){}}return a.split(",")};
t.g.Dc=function(a,c,d,e,g){a=t.g.$d(a,d,e,g);a=t.e("div",{innerHTML:a}).childNodes[0];d=c.parentNode;c.parentNode.replaceChild(a,c);a[t.expando]=c[t.expando];var h=d.childNodes[0];setTimeout(function(){h.style.display="block"},1E3);return a};
t.g.$d=function(a,c,d,e){var g="",h="",k="";c&&t.i.ca(c,function(a,c){g+=a+"="+c+"&amp;"});d=t.i.D({movie:a,flashvars:g,allowScriptAccess:"always",allowNetworking:"all"},d);t.i.ca(d,function(a,c){h+='<param name="'+a+'" value="'+c+'" />'});e=t.i.D({data:a,width:"100%",height:"100%"},e);t.i.ca(e,function(a,c){k+=a+'="'+c+'" '});return'<object type="application/x-shockwave-flash" '+k+">"+h+"</object>"};t.g.Qe={"rtmp/mp4":"MP4","rtmp/flv":"FLV"};t.g.Df=function(a,c){return a+"&"+c};
t.g.Pe=function(a){var c={yc:"",jd:""};if(!a)return c;var d=a.indexOf("&"),e;-1!==d?e=d+1:(d=e=a.lastIndexOf("/")+1,0===d&&(d=e=a.length));c.yc=a.substring(0,d);c.jd=a.substring(e,a.length);return c};t.g.ie=function(a){return a in t.g.Qe};t.g.Dd=/^rtmp[set]?:\/\//i;t.g.he=function(a){return t.g.Dd.test(a)};t.g.Yb={};t.g.Yb.canHandleSource=function(a){return t.g.ie(a.type)||t.g.he(a.src)?"maybe":""};t.g.Yb.handleSource=function(a,c){var d=t.g.Pe(a.src);c.setRtmpConnection(d.yc);c.setRtmpStream(d.jd)};
t.g.registerSourceHandler(t.g.Yb);t.Cd=t.a.extend({l:function(a,c,d){t.a.call(this,a,c,d);if(!a.q.sources||0===a.q.sources.length){c=0;for(d=a.q.techOrder;c<d.length;c++){var e=t.va(d[c]),g=window.videojs[e];if(g&&g.isSupported()){ka(a,e);break}}}else a.src(a.q.sources)}});t.oc={disabled:"disabled",hidden:"hidden",showing:"showing"};t.Ed={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"};
t.t=function(a){var c,d,e,g,h,k,q,r,u,A,R;a=a||{};if(!a.player)throw Error("A player was not provided.");c=this;if(t.pa)for(R in c=document.createElement("custom"),t.t.prototype)c[R]=t.t.prototype[R];c.d=a.player;e=t.oc[a.mode]||"disabled";g=t.Ed[a.kind]||"subtitles";h=a.label||"";k=a.language||a.srclang||"";d=a.id||"vjs_text_track_"+t.s++;if("metadata"===g||"chapters"===g)e="hidden";c.V=[];c.Ia=[];q=new t.U(c.V);r=new t.U(c.Ia);A=l;u=t.bind(c,function(){this.activeCues;A&&(this.trigger("cuechange"),
A=l)});"disabled"!==e&&c.d.b("timeupdate",u);Object.defineProperty(c,"kind",{get:function(){return g},set:Function.prototype});Object.defineProperty(c,"label",{get:function(){return h},set:Function.prototype});Object.defineProperty(c,"language",{get:function(){return k},set:Function.prototype});Object.defineProperty(c,"id",{get:function(){return d},set:Function.prototype});Object.defineProperty(c,"mode",{get:function(){return e},set:function(a){t.oc[a]&&(e=a,"showing"===e&&this.d.b("timeupdate",u),
this.o("modechange"))}});Object.defineProperty(c,"cues",{get:function(){return!this.Ub?j:q},set:Function.prototype});Object.defineProperty(c,"activeCues",{get:function(){var a,c,d,e,g;if(!this.Ub)return j;if(0===this.cues.length)return r;e=this.d.currentTime();a=0;c=this.cues.length;for(d=[];a<c;a++)g=this.cues[a],g.startTime<=e&&g.endTime>=e?d.push(g):g.startTime===g.endTime&&(g.startTime<=e&&g.startTime+0.5>=e)&&d.push(g);A=l;if(d.length!==this.Ia.length)A=f;else for(a=0;a<d.length;a++)-1===xa.call(this.Ia,
d[a])&&(A=f);this.Ia=d;r.pb(this.Ia);return r},set:Function.prototype});a.src?ya(a.src,c):c.Ub=f;if(t.pa)return c};t.t.prototype=t.i.create(t.z.prototype);t.t.prototype.constructor=t.t;t.t.prototype.ab={cuechange:"cuechange"};t.t.prototype.sc=function(a){var c=this.d.textTracks(),d=0;if(c)for(;d<c.length;d++)c[d]!==this&&c[d].Yc(a);this.V.push(a);this.cues.pb(this.V)};t.t.prototype.Yc=function(a){for(var c=0,d=this.V.length,e,g=l;c<d;c++)e=this.V[c],e===a&&(this.V.splice(c,1),g=f);g&&this.Ac.pb(this.V)};
var ya,V,xa;ya=function(a,c){t.bf(a,t.bind(this,function(a,e,g){if(a)return t.log.error(a);c.Ub=f;V(g,c)}))};V=function(a,c){if("function"!==typeof window.WebVTT)window.setTimeout(function(){V(a,c)},25);else{var d=new window.WebVTT.Parser(window,window.vttjs,window.WebVTT.StringDecoder());d.oncue=function(a){c.sc(a)};d.onparsingerror=function(a){t.log.error(a)};d.parse(a);d.flush()}};
xa=function(a,c){var d;if(this==j)throw new TypeError('"this" is null or not defined');var e=Object(this),g=e.length>>>0;if(0===g)return-1;d=+c||0;Infinity===Math.abs(d)&&(d=0);if(d>=g)return-1;for(d=Math.max(0<=d?d:g-Math.abs(d),0);d<g;){if(d in e&&e[d]===a)return d;d++}return-1};
t.F=function(a){var c=this,d,e=0;if(t.pa)for(d in c=document.createElement("custom"),t.F.prototype)c[d]=t.F.prototype[d];a=a||[];c.Ua=[];for(Object.defineProperty(c,"length",{get:function(){return this.Ua.length}});e<a.length;e++)P(c,a[e]);if(t.pa)return c};t.F.prototype=t.i.create(t.z.prototype);t.F.prototype.constructor=t.F;t.F.prototype.ab={change:"change",addtrack:"addtrack",removetrack:"removetrack"};for(var za in t.F.prototype.ab)t.F.prototype["on"+za]=j;
function P(a,c){var d=a.Ua.length;""+d in a||Object.defineProperty(a,d,{get:function(){return this.Ua[d]}});c.addEventListener("modechange",t.bind(a,function(){this.o("change")}));a.Ua.push(c);a.o({type:"addtrack",Y:c})}function Q(a,c){for(var d=0,e=a.length,g;d<e;d++)if(g=a[d],g===c){a.Ua.splice(d,1);break}a.o({type:"removetrack",Y:c})}t.F.prototype.ae=function(a){for(var c=0,d=this.length,e=j,g;c<d;c++)if(g=this[c],g.id===a){e=g;break}return e};
t.U=function(a){var c=this,d;if(t.pa)for(d in c=document.createElement("custom"),t.U.prototype)c[d]=t.U.prototype[d];t.U.prototype.pb.call(c,a);Object.defineProperty(c,"length",{get:n("le")});if(t.pa)return c};t.U.prototype.pb=function(a){var c=this.length||0,d=0,e=a.length;this.V=a;this.le=a.length;a=function(a){""+a in this||Object.defineProperty(this,""+a,{get:function(){return this.V[a]}})};if(c<e)for(d=c;d<e;d++)a.call(this,d)};
t.U.prototype.Zd=function(a){for(var c=0,d=this.length,e=j,g;c<d;c++)if(g=this[c],g.id===a){e=g;break}return e};t.sa=t.a.extend({l:function(a,c,d){t.a.call(this,a,c,d);a.b("loadstart",t.bind(this,this.Ve));a.I(t.bind(this,function(){if(a.h&&a.h.featuresNativeTextTracks)this.W();else{var c,d,h;a.b("fullscreenchange",t.bind(this,this.C));d=a.q.tracks||[];for(c=0;c<d.length;c++)h=d[c],this.d.ha(h)}}))}});t.sa.prototype.Ve=function(){this.d.h&&this.d.h.featuresNativeTextTracks?this.W():this.show()};
t.sa.prototype.e=function(){return t.a.prototype.e.call(this,"div",{className:"vjs-text-track-display"})};t.sa.prototype.Md=function(){"function"===typeof window.WebVTT&&window.WebVTT.processCues(window,[],this.c)};function W(a,c){return"rgba("+parseInt(a[1]+a[1],16)+","+parseInt(a[2]+a[2],16)+","+parseInt(a[3]+a[3],16)+","+c+")"}
var Aa={tf:"monospace",zf:"sans-serif",Bf:"serif",uf:'"Andale Mono", "Lucida Console", monospace',vf:'"Courier New", monospace',xf:"sans-serif",yf:"serif",kf:'"Comic Sans MS", Impact, fantasy',Af:'"Monotype Corsiva", cursive',Cf:'"Andale Mono", "Lucida Console", monospace, sans-serif'};t.sa.prototype.C=function(){var a=this.d.textTracks(),c=0,d;this.Md();if(a)for(;c<a.length;c++)d=a[c],"showing"===d.mode&&this.Ze(d)};
t.sa.prototype.Ze=function(a){if("function"===typeof window.WebVTT&&a.activeCues){for(var c=0,d=this.d.textTrackSettings.Hc(),e,g=[];c<a.activeCues.length;c++)g.push(a.activeCues[c]);window.WebVTT.processCues(window,a.activeCues,this.c);for(c=g.length;c--;){a=g[c].lf;d.color&&(a.firstChild.style.color=d.color);if(d.kd)try{a.firstChild.style.color=W(d.color||"#fff",d.kd)}catch(h){}d.backgroundColor&&(a.firstChild.style.backgroundColor=d.backgroundColor);if(d.vc)try{a.firstChild.style.backgroundColor=
W(d.backgroundColor||"#000",d.vc)}catch(k){}if(d.cc)if(d.rd)try{a.style.backgroundColor=W(d.cc,d.rd)}catch(q){}else a.style.backgroundColor=d.cc;d.Ma&&("dropshadow"===d.Ma?a.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px #222":"raised"===d.Ma?a.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px #222":"depressed"===d.Ma?a.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px #222":"uniform"===d.Ma&&(a.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px #222"));
d.Ob&&1!==d.Ob&&(e=window.wf(a.style.fontSize),a.style.fontSize=e*d.Ob+"px",a.style.height="auto",a.style.top="auto",a.style.bottom="2px");d.fontFamily&&"default"!==d.fontFamily&&("small-caps"===d.fontFamily?a.firstChild.style.fontVariant="small-caps":a.firstChild.style.fontFamily=Aa[d.fontFamily])}}};
t.$=t.M.extend({l:function(a,c){var d=this.Y=c.track,e=a.textTracks(),g,h;e&&(g=t.bind(this,function(){var a="showing"===this.Y.mode,c,d,g;if(this instanceof t.zb){a=f;d=0;for(g=e.length;d<g;d++)if(c=e[d],c.kind===this.Y.kind&&"showing"===c.mode){a=l;break}}this.selected(a)}),e.addEventListener("change",g),a.b("dispose",function(){e.removeEventListener("change",g)}));c.label=d.label||d.language||"Unknown";c.selected=d["default"]||"showing"===d.mode;t.M.call(this,a,c);e&&e.onchange===b&&this.b(["tap",
"click"],function(){if("object"!==typeof window.vd)try{h=new window.vd("change")}catch(a){}h||(h=document.createEvent("Event"),h.initEvent("change",f,f));e.dispatchEvent(h)})}});t.$.prototype.u=function(){var a=this.Y.kind,c=this.d.textTracks(),d,e=0;t.M.prototype.u.call(this);if(c)for(;e<c.length;e++)d=c[e],d.kind===a&&(d.mode=d===this.Y?"showing":"disabled")};t.zb=t.$.extend({l:function(a,c){c.track={kind:c.kind,player:a,label:c.kind+" off","default":l,mode:"disabled"};t.$.call(this,a,c);this.selected(f)}});
t.sb=t.$.extend({l:function(a,c){c.track={kind:c.kind,player:a,label:c.kind+" settings","default":l,mode:"disabled"};t.$.call(this,a,c);this.p("vjs-texttrack-settings")}});t.sb.prototype.u=function(){this.k().da("textTrackSettings").show()};
t.Q=t.O.extend({l:function(a,c){var d,e;t.O.call(this,a,c);d=this.d.textTracks();1>=this.H.length&&this.W();d&&(e=t.bind(this,this.update),d.addEventListener("removetrack",e),d.addEventListener("addtrack",e),this.d.b("dispose",function(){d.removeEventListener("removetrack",e);d.removeEventListener("addtrack",e)}))}});
t.Q.prototype.Ka=function(){var a=[],c,d;this instanceof t.oa&&(!this.k().h||!this.k().h.featuresNativeTextTracks)&&a.push(new t.sb(this.d,{kind:this.ea}));a.push(new t.zb(this.d,{kind:this.ea}));d=this.d.textTracks();if(!d)return a;for(var e=0;e<d.length;e++)c=d[e],c.kind===this.ea&&a.push(new t.$(this.d,{track:c}));return a};t.oa=t.Q.extend({l:function(a,c,d){t.Q.call(this,a,c,d);this.c.setAttribute("aria-label","Captions Menu")}});t.oa.prototype.ea="captions";t.oa.prototype.ta="Captions";
t.oa.prototype.className="vjs-captions-button";t.oa.prototype.update=function(){var a=2;t.Q.prototype.update.call(this);this.k().h&&this.k().h.featuresNativeTextTracks&&(a=1);this.H&&this.H.length>a?this.show():this.W()};t.$a=t.Q.extend({l:function(a,c,d){t.Q.call(this,a,c,d);this.c.setAttribute("aria-label","Subtitles Menu")}});t.$a.prototype.ea="subtitles";t.$a.prototype.ta="Subtitles";t.$a.prototype.className="vjs-subtitles-button";
t.Wa=t.Q.extend({l:function(a,c,d){t.Q.call(this,a,c,d);this.c.setAttribute("aria-label","Chapters Menu")}});s=t.Wa.prototype;s.ea="chapters";s.ta="Chapters";s.className="vjs-chapters-button";s.Ka=function(){var a=[],c,d;d=this.d.textTracks();if(!d)return a;for(var e=0;e<d.length;e++)c=d[e],c.kind===this.ea&&a.push(new t.$(this.d,{track:c}));return a};
s.La=function(){for(var a=this.d.textTracks()||[],c=0,d=a.length,e,g,h=this.H=[];c<d;c++)if(e=a[c],e.kind==this.ea)if(e.Ac){g=e;break}else e.mode="hidden",window.setTimeout(t.bind(this,function(){this.La()}),100);a=this.za;a===b&&(a=new t.qa(this.d),a.wa().appendChild(t.e("li",{className:"vjs-menu-title",innerHTML:t.va(this.ea),Se:-1})));if(g){e=g.cues;for(var k,c=0,d=e.length;c<d;c++)k=e[c],k=new t.Xa(this.d,{track:g,cue:k}),h.push(k),a.aa(k);this.aa(a)}0<this.H.length&&this.show();return a};
t.Xa=t.M.extend({l:function(a,c){var d=this.Y=c.track,e=this.cue=c.cue,g=a.currentTime();c.label=e.text;c.selected=e.startTime<=g&&g<e.endTime;t.M.call(this,a,c);d.addEventListener("cuechange",t.bind(this,this.update))}});t.Xa.prototype.u=function(){t.M.prototype.u.call(this);this.d.currentTime(this.cue.startTime);this.update(this.cue.startTime)};t.Xa.prototype.update=function(){var a=this.cue,c=this.d.currentTime();this.selected(a.startTime<=c&&c<a.endTime)};
function X(a){var c;a.Ge?c=a.Ge[0]:a.options&&(c=a.options[a.options.selectedIndex]);return c.value}function Y(a,c){var d,e;if(c){for(d=0;d<a.options.length&&!(e=a.options[d],e.value===c);d++);a.selectedIndex=d}}
t.pc=t.a.extend({l:function(a,c){t.a.call(this,a,c);this.W();t.b(this.m().querySelector(".vjs-done-button"),"click",t.bind(this,function(){this.Fe();this.W()}));t.b(this.m().querySelector(".vjs-default-button"),"click",t.bind(this,function(){this.m().querySelector(".vjs-fg-color > select").selectedIndex=0;this.m().querySelector(".vjs-bg-color > select").selectedIndex=0;this.m().querySelector(".window-color > select").selectedIndex=0;this.m().querySelector(".vjs-text-opacity > select").selectedIndex=
0;this.m().querySelector(".vjs-bg-opacity > select").selectedIndex=0;this.m().querySelector(".vjs-window-opacity > select").selectedIndex=0;this.m().querySelector(".vjs-edge-style select").selectedIndex=0;this.m().querySelector(".vjs-font-family select").selectedIndex=0;this.m().querySelector(".vjs-font-percent select").selectedIndex=2;this.C()}));t.b(this.m().querySelector(".vjs-fg-color > select"),"change",t.bind(this,this.C));t.b(this.m().querySelector(".vjs-bg-color > select"),"change",t.bind(this,
this.C));t.b(this.m().querySelector(".window-color > select"),"change",t.bind(this,this.C));t.b(this.m().querySelector(".vjs-text-opacity > select"),"change",t.bind(this,this.C));t.b(this.m().querySelector(".vjs-bg-opacity > select"),"change",t.bind(this,this.C));t.b(this.m().querySelector(".vjs-window-opacity > select"),"change",t.bind(this,this.C));t.b(this.m().querySelector(".vjs-font-percent select"),"change",t.bind(this,this.C));t.b(this.m().querySelector(".vjs-edge-style select"),"change",t.bind(this,
this.C));t.b(this.m().querySelector(".vjs-font-family select"),"change",t.bind(this,this.C));a.options().persistTextTrackSettings&&this.Ee()}});s=t.pc.prototype;s.e=function(){return t.a.prototype.e.call(this,"div",{className:"vjs-caption-settings vjs-modal-overlay",innerHTML:'<div class="vjs-tracksettings"><div class="vjs-tracksettings-colors"><div class="vjs-fg-color vjs-tracksetting"><label class="vjs-label">Foreground</label><select><option value="">---</option><option value="#FFF">White</option><option value="#000">Black</option><option value="#F00">Red</option><option value="#0F0">Green</option><option value="#00F">Blue</option><option value="#FF0">Yellow</option><option value="#F0F">Magenta</option><option value="#0FF">Cyan</option></select><span class="vjs-text-opacity vjs-opacity"><select><option value="">---</option><option value="1">Opaque</option><option value="0.5">Semi-Opaque</option></select></span></div><div class="vjs-bg-color vjs-tracksetting"><label class="vjs-label">Background</label><select><option value="">---</option><option value="#FFF">White</option><option value="#000">Black</option><option value="#F00">Red</option><option value="#0F0">Green</option><option value="#00F">Blue</option><option value="#FF0">Yellow</option><option value="#F0F">Magenta</option><option value="#0FF">Cyan</option></select><span class="vjs-bg-opacity vjs-opacity"><select><option value="">---</option><option value="1">Opaque</option><option value="0.5">Semi-Transparent</option><option value="0">Transparent</option></select></span></div><div class="window-color vjs-tracksetting"><label class="vjs-label">Window</label><select><option value="">---</option><option value="#FFF">White</option><option value="#000">Black</option><option value="#F00">Red</option><option value="#0F0">Green</option><option value="#00F">Blue</option><option value="#FF0">Yellow</option><option value="#F0F">Magenta</option><option value="#0FF">Cyan</option></select><span class="vjs-window-opacity vjs-opacity"><select><option value="">---</option><option value="1">Opaque</option><option value="0.5">Semi-Transparent</option><option value="0">Transparent</option></select></span></div></div><div class="vjs-tracksettings-font"><div class="vjs-font-percent vjs-tracksetting"><label class="vjs-label">Font Size</label><select><option value="0.50">50%</option><option value="0.75">75%</option><option value="1.00" selected>100%</option><option value="1.25">125%</option><option value="1.50">150%</option><option value="1.75">175%</option><option value="2.00">200%</option><option value="3.00">300%</option><option value="4.00">400%</option></select></div><div class="vjs-edge-style vjs-tracksetting"><label class="vjs-label">Text Edge Style</label><select><option value="none">None</option><option value="raised">Raised</option><option value="depressed">Depressed</option><option value="uniform">Uniform</option><option value="dropshadow">Dropshadow</option></select></div><div class="vjs-font-family vjs-tracksetting"><label class="vjs-label">Font Family</label><select><option value="">Default</option><option value="monospaceSerif">Monospace Serif</option><option value="proportionalSerif">Proportional Serif</option><option value="monospaceSansSerif">Monospace Sans-Serif</option><option value="proportionalSansSerif">Proportional Sans-Serif</option><option value="casual">Casual</option><option value="script">Script</option><option value="small-caps">Small Caps</option></select></div></div></div><div class="vjs-tracksettings-controls"><button class="vjs-default-button">Defaults</button><button class="vjs-done-button">Done</button></div>'})};
s.Hc=function(){var a,c,d,e,g,h,k,q,r,u;a=this.m();g=X(a.querySelector(".vjs-edge-style select"));h=X(a.querySelector(".vjs-font-family select"));k=X(a.querySelector(".vjs-fg-color > select"));d=X(a.querySelector(".vjs-text-opacity > select"));q=X(a.querySelector(".vjs-bg-color > select"));c=X(a.querySelector(".vjs-bg-opacity > select"));r=X(a.querySelector(".window-color > select"));e=X(a.querySelector(".vjs-window-opacity > select"));a=window.parseFloat(X(a.querySelector(".vjs-font-percent > select")));
c={backgroundOpacity:c,textOpacity:d,windowOpacity:e,edgeStyle:g,fontFamily:h,color:k,backgroundColor:q,windowColor:r,fontPercent:a};for(u in c)(""===c[u]||"none"===c[u]||"fontPercent"===u&&1===c[u])&&delete c[u];return c};
s.Ne=function(a){var c=this.m();Y(c.querySelector(".vjs-edge-style select"),a.Ma);Y(c.querySelector(".vjs-font-family select"),a.fontFamily);Y(c.querySelector(".vjs-fg-color > select"),a.color);Y(c.querySelector(".vjs-text-opacity > select"),a.kd);Y(c.querySelector(".vjs-bg-color > select"),a.backgroundColor);Y(c.querySelector(".vjs-bg-opacity > select"),a.vc);Y(c.querySelector(".window-color > select"),a.cc);Y(c.querySelector(".vjs-window-opacity > select"),a.rd);(a=a.Ob)&&(a=a.toFixed(2));Y(c.querySelector(".vjs-font-percent > select"),
a)};s.Ee=function(){var a;try{a=JSON.parse(window.localStorage.getItem("vjs-text-track-settings"))}catch(c){}a&&this.Ne(a)};s.Fe=function(){var a;if(this.d.options().persistTextTrackSettings){a=this.Hc();try{t.hb(a)?window.localStorage.removeItem("vjs-text-track-settings"):window.localStorage.setItem("vjs-text-track-settings",JSON.stringify(a))}catch(c){}}};s.C=function(){var a=this.d.da("textTrackDisplay");a&&a.C()};
if("undefined"!==typeof window.JSON&&"function"===typeof window.JSON.parse)t.JSON=window.JSON;else{t.JSON={};var Z=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;t.JSON.parse=function(a,c){function d(a,e){var k,q,r=a[e];if(r&&"object"===typeof r)for(k in r)Object.prototype.hasOwnProperty.call(r,k)&&(q=d(r,k),q!==b?r[k]=q:delete r[k]);return c.call(a,e,r)}var e;a=String(a);Z.lastIndex=0;Z.test(a)&&(a=a.replace(Z,function(a){return"\\u"+("0000"+
a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return e=eval("("+a+")"),"function"===typeof c?d({"":e},""):e;throw new SyntaxError("JSON.parse(): invalid or malformed JSON data");}}
t.uc=function(){var a,c,d,e;a=document.getElementsByTagName("video");c=document.getElementsByTagName("audio");var g=[];if(a&&0<a.length){d=0;for(e=a.length;d<e;d++)g.push(a[d])}if(c&&0<c.length){d=0;for(e=c.length;d<e;d++)g.push(c[d])}if(g&&0<g.length){d=0;for(e=g.length;d<e;d++)if((c=g[d])&&c.getAttribute)c.player===b&&(a=c.getAttribute("data-setup"),a!==j&&videojs(c));else{t.Hb();break}}else t.qd||t.Hb()};t.Hb=function(){setTimeout(t.uc,1)};
"complete"===document.readyState?t.qd=f:t.N(window,"load",function(){t.qd=f});t.Hb();t.Be=function(a,c){t.Player.prototype[a]=c};var Ba=this;function $(a,c){var d=a.split("."),e=Ba;!(d[0]in e)&&e.execScript&&e.execScript("var "+d[0]);for(var g;d.length&&(g=d.shift());)!d.length&&c!==b?e[g]=c:e=e[g]?e[g]:e[g]={}};$("videojs",t);$("_V_",t);$("videojs.options",t.options);$("videojs.players",t.Ca);$("videojs.TOUCH_ENABLED",t.Db);$("videojs.cache",t.ua);$("videojs.Component",t.a);t.a.prototype.player=t.a.prototype.k;t.a.prototype.options=t.a.prototype.options;t.a.prototype.init=t.a.prototype.l;t.a.prototype.dispose=t.a.prototype.dispose;t.a.prototype.createEl=t.a.prototype.e;t.a.prototype.contentEl=t.a.prototype.wa;t.a.prototype.el=t.a.prototype.m;t.a.prototype.addChild=t.a.prototype.aa;
t.a.prototype.getChild=t.a.prototype.da;t.a.prototype.getChildById=t.a.prototype.Yd;t.a.prototype.children=t.a.prototype.children;t.a.prototype.initChildren=t.a.prototype.Kc;t.a.prototype.removeChild=t.a.prototype.removeChild;t.a.prototype.on=t.a.prototype.b;t.a.prototype.off=t.a.prototype.n;t.a.prototype.one=t.a.prototype.N;t.a.prototype.trigger=t.a.prototype.o;t.a.prototype.triggerReady=t.a.prototype.Va;t.a.prototype.show=t.a.prototype.show;t.a.prototype.hide=t.a.prototype.W;
t.a.prototype.width=t.a.prototype.width;t.a.prototype.height=t.a.prototype.height;t.a.prototype.dimensions=t.a.prototype.Qd;t.a.prototype.ready=t.a.prototype.I;t.a.prototype.addClass=t.a.prototype.p;t.a.prototype.removeClass=t.a.prototype.r;t.a.prototype.hasClass=t.a.prototype.Pa;t.a.prototype.buildCSSClass=t.a.prototype.T;t.a.prototype.localize=t.a.prototype.v;t.a.prototype.setInterval=t.a.prototype.setInterval;t.a.prototype.setTimeout=t.a.prototype.setTimeout;$("videojs.EventEmitter",t.z);
t.z.prototype.on=t.z.prototype.b;t.z.prototype.addEventListener=t.z.prototype.addEventListener;t.z.prototype.off=t.z.prototype.n;t.z.prototype.removeEventListener=t.z.prototype.removeEventListener;t.z.prototype.one=t.z.prototype.N;t.z.prototype.trigger=t.z.prototype.o;t.z.prototype.dispatchEvent=t.z.prototype.dispatchEvent;t.Player.prototype.ended=t.Player.prototype.ended;t.Player.prototype.enterFullWindow=t.Player.prototype.Fc;t.Player.prototype.exitFullWindow=t.Player.prototype.Lb;
t.Player.prototype.preload=t.Player.prototype.Ra;t.Player.prototype.remainingTime=t.Player.prototype.remainingTime;t.Player.prototype.supportsFullScreen=t.Player.prototype.Sa;t.Player.prototype.currentType=t.Player.prototype.Nd;t.Player.prototype.requestFullScreen=t.Player.prototype.requestFullScreen;t.Player.prototype.requestFullscreen=t.Player.prototype.requestFullscreen;t.Player.prototype.cancelFullScreen=t.Player.prototype.cancelFullScreen;t.Player.prototype.exitFullscreen=t.Player.prototype.exitFullscreen;
t.Player.prototype.isFullScreen=t.Player.prototype.isFullScreen;t.Player.prototype.isFullscreen=t.Player.prototype.isFullscreen;t.Player.prototype.textTracks=t.Player.prototype.textTracks;t.Player.prototype.remoteTextTracks=t.Player.prototype.X;t.Player.prototype.addTextTrack=t.Player.prototype.addTextTrack;t.Player.prototype.addRemoteTextTrack=t.Player.prototype.ha;t.Player.prototype.removeRemoteTextTrack=t.Player.prototype.Da;t.Player.prototype.seekable=t.Player.prototype.seekable;
$("videojs.MediaLoader",t.Cd);$("videojs.TextTrackDisplay",t.sa);$("videojs.ControlBar",t.tb);$("videojs.Button",t.w);$("videojs.PlayToggle",t.kc);$("videojs.FullscreenToggle",t.Ya);$("videojs.BigPlayButton",t.rb);$("videojs.LoadingSpinner",t.ic);$("videojs.CurrentTimeDisplay",t.ub);$("videojs.DurationDisplay",t.vb);$("videojs.TimeDivider",t.qc);$("videojs.RemainingTimeDisplay",t.Cb);$("videojs.LiveDisplay",t.hc);$("videojs.ErrorDisplay",t.wb);$("videojs.Slider",t.S);$("videojs.ProgressControl",t.Bb);
$("videojs.SeekBar",t.nc);$("videojs.LoadProgressBar",t.yb);$("videojs.PlayProgressBar",t.jc);$("videojs.SeekHandle",t.Za);$("videojs.VolumeControl",t.Fb);$("videojs.VolumeBar",t.Eb);$("videojs.VolumeLevel",t.rc);$("videojs.VolumeMenuButton",t.Ha);$("videojs.VolumeHandle",t.Gb);$("videojs.MuteToggle",t.ra);$("videojs.PosterImage",t.mc);$("videojs.Menu",t.qa);$("videojs.MenuItem",t.M);$("videojs.MenuButton",t.O);$("videojs.PlaybackRateMenuButton",t.lc);$("videojs.ChaptersTrackMenuItem",t.Xa);
$("videojs.TextTrackButton",t.Q);$("videojs.TextTrackMenuItem",t.$);$("videojs.OffTextTrackMenuItem",t.zb);$("videojs.CaptionSettingsMenuItem",t.sb);t.O.prototype.createItems=t.O.prototype.Ka;t.Q.prototype.createItems=t.Q.prototype.Ka;t.Wa.prototype.createItems=t.Wa.prototype.Ka;$("videojs.SubtitlesButton",t.$a);$("videojs.CaptionsButton",t.oa);$("videojs.ChaptersButton",t.Wa);$("videojs.MediaTechController",t.j);t.j.withSourceHandlers=t.j.dc;t.j.prototype.featuresVolumeControl=t.j.prototype.qf;
t.j.prototype.featuresFullscreenResize=t.j.prototype.mf;t.j.prototype.featuresPlaybackRate=t.j.prototype.nf;t.j.prototype.featuresProgressEvents=t.j.prototype.of;t.j.prototype.featuresTimeupdateEvents=t.j.prototype.pf;t.j.prototype.setPoster=t.j.prototype.bd;t.j.prototype.textTracks=t.j.prototype.textTracks;t.j.prototype.remoteTextTracks=t.j.prototype.X;t.j.prototype.addTextTrack=t.j.prototype.addTextTrack;t.j.prototype.addRemoteTextTrack=t.j.prototype.ha;t.j.prototype.removeRemoteTextTrack=t.j.prototype.Da;
$("videojs.Html5",t.f);t.f.Events=t.f.xb;t.f.isSupported=t.f.isSupported;t.f.canPlaySource=t.f.wc;t.f.patchCanPlayType=t.f.Tc;t.f.unpatchCanPlayType=t.f.Ye;t.f.prototype.setCurrentTime=t.f.prototype.Zb;t.f.prototype.setVolume=t.f.prototype.Oe;t.f.prototype.setMuted=t.f.prototype.Ke;t.f.prototype.setPreload=t.f.prototype.Me;t.f.prototype.setAutoplay=t.f.prototype.He;t.f.prototype.setLoop=t.f.prototype.Je;t.f.prototype.enterFullScreen=t.f.prototype.Ec;t.f.prototype.exitFullScreen=t.f.prototype.Ud;
t.f.prototype.playbackRate=t.f.prototype.playbackRate;t.f.prototype.setPlaybackRate=t.f.prototype.Le;t.f.selectSourceHandler=t.f.ob;t.f.prototype.setSource=t.f.prototype.ma;t.f.prototype.disposeSourceHandler=t.f.prototype.ia;t.f.prototype.textTracks=t.f.prototype.textTracks;t.f.prototype.remoteTextTracks=t.f.prototype.X;t.f.prototype.addTextTrack=t.f.prototype.addTextTrack;t.f.prototype.addRemoteTextTrack=t.f.prototype.ha;t.f.prototype.removeRemoteTextTrack=t.f.prototype.Da;$("videojs.Flash",t.g);
t.g.isSupported=t.g.isSupported;t.g.canPlaySource=t.g.wc;t.g.onReady=t.g.onReady;t.g.embed=t.g.Dc;t.g.version=t.g.version;t.g.prototype.setSource=t.g.prototype.ma;t.g.selectSourceHandler=t.g.ob;t.g.prototype.setSource=t.g.prototype.ma;t.g.prototype.disposeSourceHandler=t.g.prototype.ia;$("videojs.TextTrack",t.t);$("videojs.TextTrackList",t.F);$("videojs.TextTrackCueList",t.U);$("videojs.TextTrackSettings",t.pc);t.t.prototype.id=t.t.prototype.id;t.t.prototype.label=t.t.prototype.label;
t.t.prototype.kind=t.t.prototype.Tb;t.t.prototype.mode=t.t.prototype.mode;t.t.prototype.cues=t.t.prototype.Ac;t.t.prototype.activeCues=t.t.prototype.jf;t.t.prototype.addCue=t.t.prototype.sc;t.t.prototype.removeCue=t.t.prototype.Yc;t.F.prototype.getTrackById=t.F.prototype.ae;t.U.prototype.getCueById=t.F.prototype.Zd;$("videojs.CaptionsTrack",t.cf);$("videojs.SubtitlesTrack",t.hf);$("videojs.ChaptersTrack",t.df);$("videojs.autoSetup",t.uc);$("videojs.plugin",t.Be);$("videojs.createTimeRange",t.xa);
$("videojs.util",t.Z);t.Z.mergeOptions=t.Z.Aa;t.addLanguage=t.Gd;})();

/* vtt.js - v0.12.1 (https://github.com/mozilla/vtt.js) built on 08-07-2015 */
!function(a){var b=a.vttjs={},c=b.VTTCue,d=b.VTTRegion,e=a.VTTCue,f=a.VTTRegion;b.shim=function(){b.VTTCue=c,b.VTTRegion=d},b.restore=function(){b.VTTCue=e,b.VTTRegion=f}}(this),function(a,b){function c(a){if("string"!=typeof a)return!1;var b=h[a.toLowerCase()];return b?a.toLowerCase():!1}function d(a){if("string"!=typeof a)return!1;var b=i[a.toLowerCase()];return b?a.toLowerCase():!1}function e(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)a[d]=c[d]}return a}function f(a,b,f){var h=this,i=/MSIE\s8\.0/.test(navigator.userAgent),j={};i?h=document.createElement("custom"):j.enumerable=!0,h.hasBeenReset=!1;var k="",l=!1,m=a,n=b,o=f,p=null,q="",r=!0,s="auto",t="start",u=50,v="middle",w=50,x="middle";return Object.defineProperty(h,"id",e({},j,{get:function(){return k},set:function(a){k=""+a}})),Object.defineProperty(h,"pauseOnExit",e({},j,{get:function(){return l},set:function(a){l=!!a}})),Object.defineProperty(h,"startTime",e({},j,{get:function(){return m},set:function(a){if("number"!=typeof a)throw new TypeError("Start time must be set to a number.");m=a,this.hasBeenReset=!0}})),Object.defineProperty(h,"endTime",e({},j,{get:function(){return n},set:function(a){if("number"!=typeof a)throw new TypeError("End time must be set to a number.");n=a,this.hasBeenReset=!0}})),Object.defineProperty(h,"text",e({},j,{get:function(){return o},set:function(a){o=""+a,this.hasBeenReset=!0}})),Object.defineProperty(h,"region",e({},j,{get:function(){return p},set:function(a){p=a,this.hasBeenReset=!0}})),Object.defineProperty(h,"vertical",e({},j,{get:function(){return q},set:function(a){var b=c(a);if(b===!1)throw new SyntaxError("An invalid or illegal string was specified.");q=b,this.hasBeenReset=!0}})),Object.defineProperty(h,"snapToLines",e({},j,{get:function(){return r},set:function(a){r=!!a,this.hasBeenReset=!0}})),Object.defineProperty(h,"line",e({},j,{get:function(){return s},set:function(a){if("number"!=typeof a&&a!==g)throw new SyntaxError("An invalid number or illegal string was specified.");s=a,this.hasBeenReset=!0}})),Object.defineProperty(h,"lineAlign",e({},j,{get:function(){return t},set:function(a){var b=d(a);if(!b)throw new SyntaxError("An invalid or illegal string was specified.");t=b,this.hasBeenReset=!0}})),Object.defineProperty(h,"position",e({},j,{get:function(){return u},set:function(a){if(0>a||a>100)throw new Error("Position must be between 0 and 100.");u=a,this.hasBeenReset=!0}})),Object.defineProperty(h,"positionAlign",e({},j,{get:function(){return v},set:function(a){var b=d(a);if(!b)throw new SyntaxError("An invalid or illegal string was specified.");v=b,this.hasBeenReset=!0}})),Object.defineProperty(h,"size",e({},j,{get:function(){return w},set:function(a){if(0>a||a>100)throw new Error("Size must be between 0 and 100.");w=a,this.hasBeenReset=!0}})),Object.defineProperty(h,"align",e({},j,{get:function(){return x},set:function(a){var b=d(a);if(!b)throw new SyntaxError("An invalid or illegal string was specified.");x=b,this.hasBeenReset=!0}})),h.displayState=void 0,i?h:void 0}var g="auto",h={"":!0,lr:!0,rl:!0},i={start:!0,middle:!0,end:!0,left:!0,right:!0};f.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},a.VTTCue=a.VTTCue||f,b.VTTCue=f}(this,this.vttjs||{}),function(a,b){function c(a){if("string"!=typeof a)return!1;var b=f[a.toLowerCase()];return b?a.toLowerCase():!1}function d(a){return"number"==typeof a&&a>=0&&100>=a}function e(){var a=100,b=3,e=0,f=100,g=0,h=100,i="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return a},set:function(b){if(!d(b))throw new Error("Width must be between 0 and 100.");a=b}},lines:{enumerable:!0,get:function(){return b},set:function(a){if("number"!=typeof a)throw new TypeError("Lines must be set to a number.");b=a}},regionAnchorY:{enumerable:!0,get:function(){return f},set:function(a){if(!d(a))throw new Error("RegionAnchorX must be between 0 and 100.");f=a}},regionAnchorX:{enumerable:!0,get:function(){return e},set:function(a){if(!d(a))throw new Error("RegionAnchorY must be between 0 and 100.");e=a}},viewportAnchorY:{enumerable:!0,get:function(){return h},set:function(a){if(!d(a))throw new Error("ViewportAnchorY must be between 0 and 100.");h=a}},viewportAnchorX:{enumerable:!0,get:function(){return g},set:function(a){if(!d(a))throw new Error("ViewportAnchorX must be between 0 and 100.");g=a}},scroll:{enumerable:!0,get:function(){return i},set:function(a){var b=c(a);if(b===!1)throw new SyntaxError("An invalid or illegal string was specified.");i=b}}})}var f={"":!0,up:!0};a.VTTRegion=a.VTTRegion||e,b.VTTRegion=e}(this,this.vttjs||{}),function(a){function b(a,b){this.name="ParsingError",this.code=a.code,this.message=b||a.message}function c(a){function b(a,b,c,d){return 3600*(0|a)+60*(0|b)+(0|c)+(0|d)/1e3}var c=a.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return c?c[3]?b(c[1],c[2],c[3].replace(":",""),c[4]):c[1]>59?b(c[1],c[2],0,c[4]):b(0,c[1],c[2],c[4]):null}function d(){this.values=o(null)}function e(a,b,c,d){var e=d?a.split(d):[a];for(var f in e)if("string"==typeof e[f]){var g=e[f].split(c);if(2===g.length){var h=g[0],i=g[1];b(h,i)}}}function f(a,f,g){function h(){var d=c(a);if(null===d)throw new b(b.Errors.BadTimeStamp,"Malformed timestamp: "+k);return a=a.replace(/^[^\sa-zA-Z-]+/,""),d}function i(a,b){var c=new d;e(a,function(a,b){switch(a){case"region":for(var d=g.length-1;d>=0;d--)if(g[d].id===b){c.set(a,g[d].region);break}break;case"vertical":c.alt(a,b,["rl","lr"]);break;case"line":var e=b.split(","),f=e[0];c.integer(a,f),c.percent(a,f)?c.set("snapToLines",!1):null,c.alt(a,f,["auto"]),2===e.length&&c.alt("lineAlign",e[1],["start","middle","end"]);break;case"position":e=b.split(","),c.percent(a,e[0]),2===e.length&&c.alt("positionAlign",e[1],["start","middle","end"]);break;case"size":c.percent(a,b);break;case"align":c.alt(a,b,["start","middle","end","left","right"])}},/:/,/\s/),b.region=c.get("region",null),b.vertical=c.get("vertical",""),b.line=c.get("line","auto"),b.lineAlign=c.get("lineAlign","start"),b.snapToLines=c.get("snapToLines",!0),b.size=c.get("size",100),b.align=c.get("align","middle"),b.position=c.get("position",{start:0,left:0,middle:50,end:100,right:100},b.align),b.positionAlign=c.get("positionAlign",{start:"start",left:"start",middle:"middle",end:"end",right:"end"},b.align)}function j(){a=a.replace(/^\s+/,"")}var k=a;if(j(),f.startTime=h(),j(),"-->"!==a.substr(0,3))throw new b(b.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+k);a=a.substr(3),j(),f.endTime=h(),j(),i(a,f)}function g(a,b){function d(){function a(a){return b=b.substr(a.length),a}if(!b)return null;var c=b.match(/^([^<]*)(<[^>]+>?)?/);return a(c[1]?c[1]:c[2])}function e(a){return p[a]}function f(a){for(;o=a.match(/&(amp|lt|gt|lrm|rlm|nbsp);/);)a=a.replace(o[0],e);return a}function g(a,b){return!s[b.localName]||s[b.localName]===a.localName}function h(b,c){var d=q[b];if(!d)return null;var e=a.document.createElement(d);e.localName=d;var f=r[b];return f&&c&&(e[f]=c.trim()),e}for(var i,j=a.document.createElement("div"),k=j,l=[];null!==(i=d());)if("<"!==i[0])k.appendChild(a.document.createTextNode(f(i)));else{if("/"===i[1]){l.length&&l[l.length-1]===i.substr(2).replace(">","")&&(l.pop(),k=k.parentNode);continue}var m,n=c(i.substr(1,i.length-2));if(n){m=a.document.createProcessingInstruction("timestamp",n),k.appendChild(m);continue}var o=i.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!o)continue;if(m=h(o[1],o[3]),!m)continue;if(!g(k,m))continue;o[2]&&(m.className=o[2].substr(1).replace("."," ")),l.push(o[1]),k.appendChild(m),k=m}return j}function h(a){function b(a,b){for(var c=b.childNodes.length-1;c>=0;c--)a.push(b.childNodes[c])}function c(a){if(!a||!a.length)return null;var d=a.pop(),e=d.textContent||d.innerText;if(e){var f=e.match(/^.*(\n|\r)/);return f?(a.length=0,f[0]):e}return"ruby"===d.tagName?c(a):d.childNodes?(b(a,d),c(a)):void 0}var d,e=[],f="";if(!a||!a.childNodes)return"ltr";for(b(e,a);f=c(e);)for(var g=0;g<f.length;g++){d=f.charCodeAt(g);for(var h=0;h<t.length;h++)if(t[h]===d)return"rtl"}return"ltr"}function i(a){if("number"==typeof a.line&&(a.snapToLines||a.line>=0&&a.line<=100))return a.line;if(!a.track||!a.track.textTrackList||!a.track.textTrackList.mediaElement)return-1;for(var b=a.track,c=b.textTrackList,d=0,e=0;e<c.length&&c[e]!==b;e++)"showing"===c[e].mode&&d++;return-1*++d}function j(){}function k(a,b,c){var d=/MSIE\s8\.0/.test(navigator.userAgent),e="rgba(255, 255, 255, 1)",f="rgba(0, 0, 0, 0.8)";d&&(e="rgb(255, 255, 255)",f="rgb(0, 0, 0)"),j.call(this),this.cue=b,this.cueDiv=g(a,b.text);var i={color:e,backgroundColor:f,position:"relative",left:0,right:0,top:0,bottom:0,display:"inline"};d||(i.writingMode=""===b.vertical?"horizontal-tb":"lr"===b.vertical?"vertical-lr":"vertical-rl",i.unicodeBidi="plaintext"),this.applyStyles(i,this.cueDiv),this.div=a.document.createElement("div"),i={textAlign:"middle"===b.align?"center":b.align,font:c.font,whiteSpace:"pre-line",position:"absolute"},d||(i.direction=h(this.cueDiv),i.writingMode=""===b.vertical?"horizontal-tb":"lr"===b.vertical?"vertical-lr":"vertical-rl".stylesunicodeBidi="plaintext"),this.applyStyles(i),this.div.appendChild(this.cueDiv);var k=0;switch(b.positionAlign){case"start":k=b.position;break;case"middle":k=b.position-b.size/2;break;case"end":k=b.position-b.size}this.applyStyles(""===b.vertical?{left:this.formatStyle(k,"%"),width:this.formatStyle(b.size,"%")}:{top:this.formatStyle(k,"%"),height:this.formatStyle(b.size,"%")}),this.move=function(a){this.applyStyles({top:this.formatStyle(a.top,"px"),bottom:this.formatStyle(a.bottom,"px"),left:this.formatStyle(a.left,"px"),right:this.formatStyle(a.right,"px"),height:this.formatStyle(a.height,"px"),width:this.formatStyle(a.width,"px")})}}function l(a){var b,c,d,e,f=/MSIE\s8\.0/.test(navigator.userAgent);if(a.div){c=a.div.offsetHeight,d=a.div.offsetWidth,e=a.div.offsetTop;var g=(g=a.div.childNodes)&&(g=g[0])&&g.getClientRects&&g.getClientRects();a=a.div.getBoundingClientRect(),b=g?Math.max(g[0]&&g[0].height||0,a.height/g.length):0}this.left=a.left,this.right=a.right,this.top=a.top||e,this.height=a.height||c,this.bottom=a.bottom||e+(a.height||c),this.width=a.width||d,this.lineHeight=void 0!==b?b:a.lineHeight,f&&!this.lineHeight&&(this.lineHeight=13)}function m(a,b,c,d){function e(a,b){for(var e,f=new l(a),g=1,h=0;h<b.length;h++){for(;a.overlapsOppositeAxis(c,b[h])||a.within(c)&&a.overlapsAny(d);)a.move(b[h]);if(a.within(c))return a;var i=a.intersectPercentage(c);g>i&&(e=new l(a),g=i),a=new l(f)}return e||f}var f=new l(b),g=b.cue,h=i(g),j=[];if(g.snapToLines){var k;switch(g.vertical){case"":j=["+y","-y"],k="height";break;case"rl":j=["+x","-x"],k="width";break;case"lr":j=["-x","+x"],k="width"}var m=f.lineHeight,n=m*Math.round(h),o=c[k]+m,p=j[0];Math.abs(n)>o&&(n=0>n?-1:1,n*=Math.ceil(o/m)*m),0>h&&(n+=""===g.vertical?c.height:c.width,j=j.reverse()),f.move(p,n)}else{var q=f.lineHeight/c.height*100;switch(g.lineAlign){case"middle":h-=q/2;break;case"end":h-=q}switch(g.vertical){case"":b.applyStyles({top:b.formatStyle(h,"%")});break;case"rl":b.applyStyles({left:b.formatStyle(h,"%")});break;case"lr":b.applyStyles({right:b.formatStyle(h,"%")})}j=["+y","-x","+x","-y"],f=new l(b)}var r=e(f,j);b.move(r.toCSSCompatValues(c))}function n(){}var o=Object.create||function(){function a(){}return function(b){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return a.prototype=b,new a}}();b.prototype=o(Error.prototype),b.prototype.constructor=b,b.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},d.prototype={set:function(a,b){this.get(a)||""===b||(this.values[a]=b)},get:function(a,b,c){return c?this.has(a)?this.values[a]:b[c]:this.has(a)?this.values[a]:b},has:function(a){return a in this.values},alt:function(a,b,c){for(var d=0;d<c.length;++d)if(b===c[d]){this.set(a,b);break}},integer:function(a,b){/^-?\d+$/.test(b)&&this.set(a,parseInt(b,10))},percent:function(a,b){var c;return(c=b.match(/^([\d]{1,3})(\.[\d]*)?%$/))&&(b=parseFloat(b),b>=0&&100>=b)?(this.set(a,b),!0):!1}};var p={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"","&rlm;":"","&nbsp;":""},q={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},r={v:"title",lang:"lang"},s={rt:"ruby"},t=[1470,1472,1475,1478,1488,1489,1490,1491,1492,1493,1494,1495,1496,1497,1498,1499,1500,1501,1502,1503,1504,1505,1506,1507,1508,1509,1510,1511,1512,1513,1514,1520,1521,1522,1523,1524,1544,1547,1549,1563,1566,1567,1568,1569,1570,1571,1572,1573,1574,1575,1576,1577,1578,1579,1580,1581,1582,1583,1584,1585,1586,1587,1588,1589,1590,1591,1592,1593,1594,1595,1596,1597,1598,1599,1600,1601,1602,1603,1604,1605,1606,1607,1608,1609,1610,1645,1646,1647,1649,1650,1651,1652,1653,1654,1655,1656,1657,1658,1659,1660,1661,1662,1663,1664,1665,1666,1667,1668,1669,1670,1671,1672,1673,1674,1675,1676,1677,1678,1679,1680,1681,1682,1683,1684,1685,1686,1687,1688,1689,1690,1691,1692,1693,1694,1695,1696,1697,1698,1699,1700,1701,1702,1703,1704,1705,1706,1707,1708,1709,1710,1711,1712,1713,1714,1715,1716,1717,1718,1719,1720,1721,1722,1723,1724,1725,1726,1727,1728,1729,1730,1731,1732,1733,1734,1735,1736,1737,1738,1739,1740,1741,1742,1743,1744,1745,1746,1747,1748,1749,1765,1766,1774,1775,1786,1787,1788,1789,1790,1791,1792,1793,1794,1795,1796,1797,1798,1799,1800,1801,1802,1803,1804,1805,1807,1808,1810,1811,1812,1813,1814,1815,1816,1817,1818,1819,1820,1821,1822,1823,1824,1825,1826,1827,1828,1829,1830,1831,1832,1833,1834,1835,1836,1837,1838,1839,1869,1870,1871,1872,1873,1874,1875,1876,1877,1878,1879,1880,1881,1882,1883,1884,1885,1886,1887,1888,1889,1890,1891,1892,1893,1894,1895,1896,1897,1898,1899,1900,1901,1902,1903,1904,1905,1906,1907,1908,1909,1910,1911,1912,1913,1914,1915,1916,1917,1918,1919,1920,1921,1922,1923,1924,1925,1926,1927,1928,1929,1930,1931,1932,1933,1934,1935,1936,1937,1938,1939,1940,1941,1942,1943,1944,1945,1946,1947,1948,1949,1950,1951,1952,1953,1954,1955,1956,1957,1969,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2e3,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023,2024,2025,2026,2036,2037,2042,2048,2049,2050,2051,2052,2053,2054,2055,2056,2057,2058,2059,2060,2061,2062,2063,2064,2065,2066,2067,2068,2069,2074,2084,2088,2096,2097,2098,2099,2100,2101,2102,2103,2104,2105,2106,2107,2108,2109,2110,2112,2113,2114,2115,2116,2117,2118,2119,2120,2121,2122,2123,2124,2125,2126,2127,2128,2129,2130,2131,2132,2133,2134,2135,2136,2142,2208,2210,2211,2212,2213,2214,2215,2216,2217,2218,2219,2220,8207,64285,64287,64288,64289,64290,64291,64292,64293,64294,64295,64296,64298,64299,64300,64301,64302,64303,64304,64305,64306,64307,64308,64309,64310,64312,64313,64314,64315,64316,64318,64320,64321,64323,64324,64326,64327,64328,64329,64330,64331,64332,64333,64334,64335,64336,64337,64338,64339,64340,64341,64342,64343,64344,64345,64346,64347,64348,64349,64350,64351,64352,64353,64354,64355,64356,64357,64358,64359,64360,64361,64362,64363,64364,64365,64366,64367,64368,64369,64370,64371,64372,64373,64374,64375,64376,64377,64378,64379,64380,64381,64382,64383,64384,64385,64386,64387,64388,64389,64390,64391,64392,64393,64394,64395,64396,64397,64398,64399,64400,64401,64402,64403,64404,64405,64406,64407,64408,64409,64410,64411,64412,64413,64414,64415,64416,64417,64418,64419,64420,64421,64422,64423,64424,64425,64426,64427,64428,64429,64430,64431,64432,64433,64434,64435,64436,64437,64438,64439,64440,64441,64442,64443,64444,64445,64446,64447,64448,64449,64467,64468,64469,64470,64471,64472,64473,64474,64475,64476,64477,64478,64479,64480,64481,64482,64483,64484,64485,64486,64487,64488,64489,64490,64491,64492,64493,64494,64495,64496,64497,64498,64499,64500,64501,64502,64503,64504,64505,64506,64507,64508,64509,64510,64511,64512,64513,64514,64515,64516,64517,64518,64519,64520,64521,64522,64523,64524,64525,64526,64527,64528,64529,64530,64531,64532,64533,64534,64535,64536,64537,64538,64539,64540,64541,64542,64543,64544,64545,64546,64547,64548,64549,64550,64551,64552,64553,64554,64555,64556,64557,64558,64559,64560,64561,64562,64563,64564,64565,64566,64567,64568,64569,64570,64571,64572,64573,64574,64575,64576,64577,64578,64579,64580,64581,64582,64583,64584,64585,64586,64587,64588,64589,64590,64591,64592,64593,64594,64595,64596,64597,64598,64599,64600,64601,64602,64603,64604,64605,64606,64607,64608,64609,64610,64611,64612,64613,64614,64615,64616,64617,64618,64619,64620,64621,64622,64623,64624,64625,64626,64627,64628,64629,64630,64631,64632,64633,64634,64635,64636,64637,64638,64639,64640,64641,64642,64643,64644,64645,64646,64647,64648,64649,64650,64651,64652,64653,64654,64655,64656,64657,64658,64659,64660,64661,64662,64663,64664,64665,64666,64667,64668,64669,64670,64671,64672,64673,64674,64675,64676,64677,64678,64679,64680,64681,64682,64683,64684,64685,64686,64687,64688,64689,64690,64691,64692,64693,64694,64695,64696,64697,64698,64699,64700,64701,64702,64703,64704,64705,64706,64707,64708,64709,64710,64711,64712,64713,64714,64715,64716,64717,64718,64719,64720,64721,64722,64723,64724,64725,64726,64727,64728,64729,64730,64731,64732,64733,64734,64735,64736,64737,64738,64739,64740,64741,64742,64743,64744,64745,64746,64747,64748,64749,64750,64751,64752,64753,64754,64755,64756,64757,64758,64759,64760,64761,64762,64763,64764,64765,64766,64767,64768,64769,64770,64771,64772,64773,64774,64775,64776,64777,64778,64779,64780,64781,64782,64783,64784,64785,64786,64787,64788,64789,64790,64791,64792,64793,64794,64795,64796,64797,64798,64799,64800,64801,64802,64803,64804,64805,64806,64807,64808,64809,64810,64811,64812,64813,64814,64815,64816,64817,64818,64819,64820,64821,64822,64823,64824,64825,64826,64827,64828,64829,64848,64849,64850,64851,64852,64853,64854,64855,64856,64857,64858,64859,64860,64861,64862,64863,64864,64865,64866,64867,64868,64869,64870,64871,64872,64873,64874,64875,64876,64877,64878,64879,64880,64881,64882,64883,64884,64885,64886,64887,64888,64889,64890,64891,64892,64893,64894,64895,64896,64897,64898,64899,64900,64901,64902,64903,64904,64905,64906,64907,64908,64909,64910,64911,64914,64915,64916,64917,64918,64919,64920,64921,64922,64923,64924,64925,64926,64927,64928,64929,64930,64931,64932,64933,64934,64935,64936,64937,64938,64939,64940,64941,64942,64943,64944,64945,64946,64947,64948,64949,64950,64951,64952,64953,64954,64955,64956,64957,64958,64959,64960,64961,64962,64963,64964,64965,64966,64967,65008,65009,65010,65011,65012,65013,65014,65015,65016,65017,65018,65019,65020,65136,65137,65138,65139,65140,65142,65143,65144,65145,65146,65147,65148,65149,65150,65151,65152,65153,65154,65155,65156,65157,65158,65159,65160,65161,65162,65163,65164,65165,65166,65167,65168,65169,65170,65171,65172,65173,65174,65175,65176,65177,65178,65179,65180,65181,65182,65183,65184,65185,65186,65187,65188,65189,65190,65191,65192,65193,65194,65195,65196,65197,65198,65199,65200,65201,65202,65203,65204,65205,65206,65207,65208,65209,65210,65211,65212,65213,65214,65215,65216,65217,65218,65219,65220,65221,65222,65223,65224,65225,65226,65227,65228,65229,65230,65231,65232,65233,65234,65235,65236,65237,65238,65239,65240,65241,65242,65243,65244,65245,65246,65247,65248,65249,65250,65251,65252,65253,65254,65255,65256,65257,65258,65259,65260,65261,65262,65263,65264,65265,65266,65267,65268,65269,65270,65271,65272,65273,65274,65275,65276,67584,67585,67586,67587,67588,67589,67592,67594,67595,67596,67597,67598,67599,67600,67601,67602,67603,67604,67605,67606,67607,67608,67609,67610,67611,67612,67613,67614,67615,67616,67617,67618,67619,67620,67621,67622,67623,67624,67625,67626,67627,67628,67629,67630,67631,67632,67633,67634,67635,67636,67637,67639,67640,67644,67647,67648,67649,67650,67651,67652,67653,67654,67655,67656,67657,67658,67659,67660,67661,67662,67663,67664,67665,67666,67667,67668,67669,67671,67672,67673,67674,67675,67676,67677,67678,67679,67840,67841,67842,67843,67844,67845,67846,67847,67848,67849,67850,67851,67852,67853,67854,67855,67856,67857,67858,67859,67860,67861,67862,67863,67864,67865,67866,67867,67872,67873,67874,67875,67876,67877,67878,67879,67880,67881,67882,67883,67884,67885,67886,67887,67888,67889,67890,67891,67892,67893,67894,67895,67896,67897,67903,67968,67969,67970,67971,67972,67973,67974,67975,67976,67977,67978,67979,67980,67981,67982,67983,67984,67985,67986,67987,67988,67989,67990,67991,67992,67993,67994,67995,67996,67997,67998,67999,68e3,68001,68002,68003,68004,68005,68006,68007,68008,68009,68010,68011,68012,68013,68014,68015,68016,68017,68018,68019,68020,68021,68022,68023,68030,68031,68096,68112,68113,68114,68115,68117,68118,68119,68121,68122,68123,68124,68125,68126,68127,68128,68129,68130,68131,68132,68133,68134,68135,68136,68137,68138,68139,68140,68141,68142,68143,68144,68145,68146,68147,68160,68161,68162,68163,68164,68165,68166,68167,68176,68177,68178,68179,68180,68181,68182,68183,68184,68192,68193,68194,68195,68196,68197,68198,68199,68200,68201,68202,68203,68204,68205,68206,68207,68208,68209,68210,68211,68212,68213,68214,68215,68216,68217,68218,68219,68220,68221,68222,68223,68352,68353,68354,68355,68356,68357,68358,68359,68360,68361,68362,68363,68364,68365,68366,68367,68368,68369,68370,68371,68372,68373,68374,68375,68376,68377,68378,68379,68380,68381,68382,68383,68384,68385,68386,68387,68388,68389,68390,68391,68392,68393,68394,68395,68396,68397,68398,68399,68400,68401,68402,68403,68404,68405,68416,68417,68418,68419,68420,68421,68422,68423,68424,68425,68426,68427,68428,68429,68430,68431,68432,68433,68434,68435,68436,68437,68440,68441,68442,68443,68444,68445,68446,68447,68448,68449,68450,68451,68452,68453,68454,68455,68456,68457,68458,68459,68460,68461,68462,68463,68464,68465,68466,68472,68473,68474,68475,68476,68477,68478,68479,68608,68609,68610,68611,68612,68613,68614,68615,68616,68617,68618,68619,68620,68621,68622,68623,68624,68625,68626,68627,68628,68629,68630,68631,68632,68633,68634,68635,68636,68637,68638,68639,68640,68641,68642,68643,68644,68645,68646,68647,68648,68649,68650,68651,68652,68653,68654,68655,68656,68657,68658,68659,68660,68661,68662,68663,68664,68665,68666,68667,68668,68669,68670,68671,68672,68673,68674,68675,68676,68677,68678,68679,68680,126464,126465,126466,126467,126469,126470,126471,126472,126473,126474,126475,126476,126477,126478,126479,126480,126481,126482,126483,126484,126485,126486,126487,126488,126489,126490,126491,126492,126493,126494,126495,126497,126498,126500,126503,126505,126506,126507,126508,126509,126510,126511,126512,126513,126514,126516,126517,126518,126519,126521,126523,126530,126535,126537,126539,126541,126542,126543,126545,126546,126548,126551,126553,126555,126557,126559,126561,126562,126564,126567,126568,126569,126570,126572,126573,126574,126575,126576,126577,126578,126580,126581,126582,126583,126585,126586,126587,126588,126590,126592,126593,126594,126595,126596,126597,126598,126599,126600,126601,126603,126604,126605,126606,126607,126608,126609,126610,126611,126612,126613,126614,126615,126616,126617,126618,126619,126625,126626,126627,126629,126630,126631,126632,126633,126635,126636,126637,126638,126639,126640,126641,126642,126643,126644,126645,126646,126647,126648,126649,126650,126651,1114109];j.prototype.applyStyles=function(a,b){b=b||this.div;for(var c in a)a.hasOwnProperty(c)&&(b.style[c]=a[c])},j.prototype.formatStyle=function(a,b){return 0===a?0:a+b},k.prototype=o(j.prototype),k.prototype.constructor=k,l.prototype.move=function(a,b){switch(b=void 0!==b?b:this.lineHeight,a){case"+x":this.left+=b,this.right+=b;break;case"-x":this.left-=b,this.right-=b;break;case"+y":this.top+=b,this.bottom+=b;break;case"-y":this.top-=b,this.bottom-=b}},l.prototype.overlaps=function(a){return this.left<a.right&&this.right>a.left&&this.top<a.bottom&&this.bottom>a.top},l.prototype.overlapsAny=function(a){for(var b=0;b<a.length;b++)if(this.overlaps(a[b]))return!0;return!1},l.prototype.within=function(a){return this.top>=a.top&&this.bottom<=a.bottom&&this.left>=a.left&&this.right<=a.right},l.prototype.overlapsOppositeAxis=function(a,b){switch(b){case"+x":return this.left<a.left;case"-x":return this.right>a.right;case"+y":return this.top<a.top;case"-y":return this.bottom>a.bottom}},l.prototype.intersectPercentage=function(a){var b=Math.max(0,Math.min(this.right,a.right)-Math.max(this.left,a.left)),c=Math.max(0,Math.min(this.bottom,a.bottom)-Math.max(this.top,a.top)),d=b*c;return d/(this.height*this.width)},l.prototype.toCSSCompatValues=function(a){return{top:this.top-a.top,bottom:a.bottom-this.bottom,left:this.left-a.left,right:a.right-this.right,height:this.height,width:this.width}},l.getSimpleBoxPosition=function(a){var b=a.div?a.div.offsetHeight:a.tagName?a.offsetHeight:0,c=a.div?a.div.offsetWidth:a.tagName?a.offsetWidth:0,d=a.div?a.div.offsetTop:a.tagName?a.offsetTop:0;a=a.div?a.div.getBoundingClientRect():a.tagName?a.getBoundingClientRect():a;var e={left:a.left,right:a.right,top:a.top||d,height:a.height||b,bottom:a.bottom||d+(a.height||b),width:a.width||c};return e},n.StringDecoder=function(){return{decode:function(a){if(!a)return"";if("string"!=typeof a)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(a))}}},n.convertCueToDOMTree=function(a,b){return a&&b?g(a,b):null};var u=.05,v="sans-serif",w="1.5%";n.processCues=function(a,b,c){function d(a){for(var b=0;b<a.length;b++)if(a[b].hasBeenReset||!a[b].displayState)return!0;return!1}if(!a||!b||!c)return null;for(;c.firstChild;)c.removeChild(c.firstChild);var e=a.document.createElement("div");if(e.style.position="absolute",e.style.left="0",e.style.right="0",e.style.top="0",e.style.bottom="0",e.style.margin=w,c.appendChild(e),d(b)){var f=[],g=l.getSimpleBoxPosition(e),h=Math.round(g.height*u*100)/100,i={font:h+"px "+v};!function(){for(var c,d,h=0;h<b.length;h++)d=b[h],c=new k(a,d,i),e.appendChild(c.div),m(a,c,g,f),d.displayState=c.div,f.push(l.getSimpleBoxPosition(c))}()}else for(var j=0;j<b.length;j++)e.appendChild(b[j].displayState)},n.Parser=function(a,b,c){c||(c=b,b={}),b||(b={}),this.window=a,this.vttjs=b,this.state="INITIAL",this.buffer="",this.decoder=c||new TextDecoder("utf8"),this.regionList=[]},n.Parser.prototype={reportOrThrowError:function(a){if(!(a instanceof b))throw a;this.onparsingerror&&this.onparsingerror(a)},parse:function(a){function c(){for(var a=i.buffer,b=0;b<a.length&&"\r"!==a[b]&&"\n"!==a[b];)++b;var c=a.substr(0,b);return"\r"===a[b]&&++b,"\n"===a[b]&&++b,i.buffer=a.substr(b),c}function g(a){var b=new d;if(e(a,function(a,c){switch(a){case"id":b.set(a,c);break;case"width":b.percent(a,c);break;case"lines":b.integer(a,c);break;case"regionanchor":case"viewportanchor":var e=c.split(",");if(2!==e.length)break;var f=new d;if(f.percent("x",e[0]),f.percent("y",e[1]),!f.has("x")||!f.has("y"))break;b.set(a+"X",f.get("x")),b.set(a+"Y",f.get("y"));break;case"scroll":b.alt(a,c,["up"])}},/=/,/\s/),b.has("id")){var c=new(i.vttjs.VTTRegion||i.window.VTTRegion);c.width=b.get("width",100),c.lines=b.get("lines",3),c.regionAnchorX=b.get("regionanchorX",0),c.regionAnchorY=b.get("regionanchorY",100),c.viewportAnchorX=b.get("viewportanchorX",0),c.viewportAnchorY=b.get("viewportanchorY",100),c.scroll=b.get("scroll",""),i.onregion&&i.onregion(c),i.regionList.push({id:b.get("id"),region:c})}}function h(a){e(a,function(a,b){switch(a){case"Region":g(b)}},/:/)}var i=this;a&&(i.buffer+=i.decoder.decode(a,{stream:!0}));try{var j;if("INITIAL"===i.state){if(!/\r\n|\n/.test(i.buffer))return this;j=c();var k=j.match(/^WEBVTT([ \t].*)?$/);if(!k||!k[0])throw new b(b.Errors.BadSignature);i.state="HEADER"}for(var l=!1;i.buffer;){if(!/\r\n|\n/.test(i.buffer))return this;switch(l?l=!1:j=c(),i.state){case"HEADER":/:/.test(j)?h(j):j||(i.state="ID");continue;case"NOTE":j||(i.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(j)){i.state="NOTE";break}if(!j)continue;if(i.cue=new(i.vttjs.VTTCue||i.window.VTTCue)(0,0,""),i.state="CUE",-1===j.indexOf("-->")){i.cue.id=j;continue}case"CUE":try{f(j,i.cue,i.regionList)}catch(m){i.reportOrThrowError(m),i.cue=null,i.state="BADCUE";continue}i.state="CUETEXT";continue;case"CUETEXT":var n=-1!==j.indexOf("-->");if(!j||n&&(l=!0)){i.oncue&&i.oncue(i.cue),i.cue=null,i.state="ID";continue}i.cue.text&&(i.cue.text+="\n"),i.cue.text+=j;continue;case"BADCUE":j||(i.state="ID");continue}}}catch(m){i.reportOrThrowError(m),"CUETEXT"===i.state&&i.cue&&i.oncue&&i.oncue(i.cue),i.cue=null,i.state="INITIAL"===i.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var a=this;try{if(a.buffer+=a.decoder.decode(),(a.cue||"HEADER"===a.state)&&(a.buffer+="\n\n",a.parse()),"INITIAL"===a.state)throw new b(b.Errors.BadSignature)}catch(c){a.reportOrThrowError(c)}return a.onflush&&a.onflush(),this}},a.WebVTT=n}(this,this.vttjs||{});!function(a,t,e,n,m){m=t.location,Math.random()>.01||(a.src="//www.google-analytics.com/__utm.gif?utmwv=5.4.2&utmac=UA-16505296-2&utmn=1&utmhn="+n(m.hostname)+"&utmsr="+t.screen.availWidth+"x"+t.screen.availHeight+"&utmul="+(e.language||e.userLanguage||"").toLowerCase()+"&utmr="+n(m.href)+"&utmp="+n(m.hostname+m.pathname)+"&utmcc=__utma%3D1."+Math.floor(1e10*Math.random())+".1.1.1.1%3B"+"&utme=8(vjsv)9(v4.12.15)")}(new Image,window,navigator,encodeURIComponent);;
;
/* module-key = 'com.atlassian.jira.jira-fileviewer-plugin:atlassian-fileviewer', location = 'jira-fileviewer-module/node_modules/@atlassian/fileviewer/dist/fileviewer-video-templates.js' */
// This file was automatically generated from video-view.i18n.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace FileViewer.Templates.avPlayer.
 */

if (typeof FileViewer == 'undefined') { var FileViewer = {}; }
if (typeof FileViewer.Templates == 'undefined') { FileViewer.Templates = {}; }
if (typeof FileViewer.Templates.avPlayer == 'undefined') { FileViewer.Templates.avPlayer = {}; }


FileViewer.Templates.avPlayer.playerBody = function(opt_data, opt_ignored) {
  return '<div class="cp-video-container">' + ((opt_data.kind == 'audio') ? '<audio id="cp-video-player" class="video-js vjs-atlassian-skin" poster="' + soy.$$escapeHtml(opt_data.poster) + '"><source src="' + soy.$$escapeHtml(opt_data.src) + '" type="' + soy.$$escapeHtml(opt_data.type) + '" /></audio>' : '<video id="cp-video-player" class="video-js vjs-atlassian-skin" poster="' + soy.$$escapeHtml(opt_data.poster) + '"><source src="' + soy.$$escapeHtml(opt_data.src) + '" type="' + soy.$$escapeHtml(opt_data.type) + '" /></video>') + '</div><span class="cp-baseline-extension"></span>';
};
if (goog.DEBUG) {
  FileViewer.Templates.avPlayer.playerBody.soyTemplateName = 'FileViewer.Templates.avPlayer.playerBody';
}


FileViewer.Templates.avPlayer.progressTooltip = function(opt_data, opt_ignored) {
  return '<div id=\'vjs-tip\'><div id=\'vjs-tip-arrow\'></div><div id=\'vjs-tip-inner\'></div></div>';
};
if (goog.DEBUG) {
  FileViewer.Templates.avPlayer.progressTooltip.soyTemplateName = 'FileViewer.Templates.avPlayer.progressTooltip';
}


FileViewer.Templates.avPlayer.customControlBarItem = function(opt_data, opt_ignored) {
  return '<div class="vjs-control-content"><span class="vjs-control-text">' + soy.$$escapeHtml(opt_data.descr) + '</span></div>';
};
if (goog.DEBUG) {
  FileViewer.Templates.avPlayer.customControlBarItem.soyTemplateName = 'FileViewer.Templates.avPlayer.customControlBarItem';
}
;
;
/* module-key = 'com.atlassian.jira.jira-fileviewer-plugin:atlassian-fileviewer', location = 'jira-fileviewer-module/node_modules/@atlassian/fileviewer/dist/fileviewer-video.js' */
(function (FileViewer) {
    'use strict';

    // use FileViewer's internal module system
    var define  = FileViewer.define;
    var require = FileViewer.require;

define('video-view/button-presentation-mode', [], function () {
  'use strict';

  var videojs = window.videojs;

  var ButtonPresentationMode = videojs.Button.extend({
    init: function (opts) {
      this._fileViewer = opts.fileViewer;
      this._player = opts.player;

      videojs.Button.call(this, this._player, {
        el: videojs.Component.prototype.createEl(null, {
          className: 'vjs-presentation-control vjs-control',
          innerHTML: [
            '<div class="vjs-control-content">',
            '<span class="vjs-control-text">',
            'Presentation Mode',
            '</span>',
            '</div>'
          ].join(''),
          role: 'button',
          tabindex: 0,
          'aria-live': 'polite'
        })
      });

      this.on('click', this.changeMode);
    }
  });

  ButtonPresentationMode.asPlugin = function (fileViewer) {
    return function (options) {
      var player = this;
      var button = new ButtonPresentationMode({
        player: player,
        fileViewer: fileViewer
      });

      button.options = options;

      player.ready(function () {
        player.controlBar.addChild(button);
      });
    };
  };

  ButtonPresentationMode.prototype.changeMode = function () {
    if (this._fileViewer.isInMode('PRESENTATION')) {
      this._fileViewer.changeMode('BASE');
    } else {
      this._fileViewer.changeMode('PRESENTATION');
    }
  };

  return ButtonPresentationMode;
});

define('video-view/button-toggle-hd', [
  'template-store-singleton',
  'jquery'
], function (
  templateStore,
  $
) {
  'use strict';

  var videojs = window.videojs;

  var ButtonToggleHd = videojs.Button.extend({
    init: function (opts) {
      this._fileViewer = opts.fileViewer;
      this._player = opts.player;
      this._isPlayingHd = opts.isPlayingHd;

      videojs.Button.call(this, this._player, {
        el: videojs.Component.prototype.createEl(null, {
          className: 'vjs-hd-control vjs-control',
          innerHTML: templateStore.get('avPlayer.customControlBarItem')({
            descr: 'Toggle HD/SD Quality'
          }),
          role: 'button',
          tabindex: 0,
          'aria-live': 'polite'
        })
      });

      this.on('click', this.toggleSource);
    }
  });

  ButtonToggleHd.asPlugin = function (fileViewer) {
    return function (options) {
      if (!options.src_hd) {
        return;
      }

      var player = this;
      var button = new ButtonToggleHd({
        player: player,
        fileViewer: fileViewer,
        isPlayingHd: options.hd_active
      });

      button.options = options;

      player.ready(function () {
        $(this.el()).addClass('vjs-hd-source');
        if (options.hd_active) {
          $(this.el()).addClass('vjs-hd-playing');
        }
        player.controlBar.addChild(button);
      });
    };
  };

  /**
   * Set preload attribute to make sure `loadedmetadata` is triggered
   */
  ButtonToggleHd.prototype.fixPreload = function () {
    var player = this._player;
    if (player.el().firstChild.preload === 'none') {
      player.el().firstChild.preload = 'metadata';
    }
  };

  /**
   * Update the players video and poster src and seek to position if given
   * @param {Object} options
   * @param {Number} options.position Time in seconds to start playing
   * @param {String} options.src Url of video source
   * @param {String} options.poster Url of video poster source
   */
  ButtonToggleHd.prototype.switchSource = function (options) {
    var player = this._player;
    var playerEl = $(player.el());
    var wasPaused = player.paused();
    var hasStarted = playerEl.hasClass('vjs-has-started');

    this.fixPreload();
    // Remove <source> to prevent playing both streams
    playerEl.find('source').remove();
    // Remove poster attribute so it doesn't show up when switching streams
    player.poster('');
    if (options.position) {
      // Hide <video> tag to prevent showing the new stream starting
      // at the beginning
      $(player.tag).css('display', 'none');
    }
    player.src(options.src);
    player.ready(function () {
      player.one('loadedmetadata', function () {
        player.poster(options.poster);
        if (hasStarted) {
          playerEl.addClass('vjs-has-started');
        }
      }.bind(player));
      if (options.position) {
        player.one('loadeddata', function () {
          player.currentTime(options.position);
          if (wasPaused) {
            player.pause();
          } else {
            player.play();
          }
        });
      }
      // Show <video> again when seeking is done
      player.one('seeked', function () {
        $(player.tag).css('display', 'block');
      });
    });
  };

  ButtonToggleHd.prototype.toggleSource = function () {
    var player = this._player;
    var playerEl = $(player.el());
    var options = {
      position: player.tech.currentTime(),
      src: '',
      poster: ''
    };

    if (this._isPlayingHd) {
      this._isPlayingHd = false;
      this._fileViewer.getStorage().setItem('videoQualityHd', false);
      options.src = this.options.src;
      options.poster = this.options.poster;
      playerEl.removeClass('vjs-hd-playing');
    } else {
      this._isPlayingHd = true;
      this._fileViewer.getStorage().setItem('videoQualityHd', true);
      options.src = this.options.src_hd;
      options.poster = this.options.poster_hd;
      playerEl.addClass('vjs-hd-playing');
    }
    this.switchSource(options);
  };

  return ButtonToggleHd;
});

define('video-view/button-youtube', [
  'template-store-singleton',
  'url'
], function (
  templateStore,
  urlHelper
) {
  'use strict';

  var videojs = window.videojs;

  var ButtonYoutube = videojs.Button.extend({
    init: function (opts) {
      this._fileViewer = opts.fileViewer;
      this._player = opts.player;
      videojs.Button.call(this, this._player, {
        el: videojs.Component.prototype.createEl(null, {
          className: 'vjs-youtube-control vjs-control',
          innerHTML: templateStore.get('avPlayer.customControlBarItem')({descr: 'Youtube'}),
          role: 'button',
          tabindex: 0,
          'aria-live': 'polite'
        })
      });

      this.on('click', this.openYoutubePage);
    }
  });

  ButtonYoutube.asPlugin = function (fileViewer) {
    return function (options) {
      var player = this;
      var button = new ButtonYoutube({
        player: player,
        fileViewer: fileViewer
      });
      player.ready(function () { player.controlBar.addChild(button); });
    };
  };

  ButtonYoutube.prototype.openYoutubePage = function () {
    var srcYoutube;
    this._fileViewer.analytics.send('files.fileviewer-web.file.gotoyoutube');
    this._player.pause();
    srcYoutube = urlHelper.addQueryParamToUrl(this._player.src(), {
      start: Math.round(this._player.currentTime()),
      autoplay: 1
    });
    window.open(srcYoutube, '_blank');
  };

  return ButtonYoutube;
});

define('video-view/plugin-progress-tooltips', [
  'template-store-singleton',
  'jquery'
], function (
  templateStore,
  $
) {
  'use strict';

  var PluginProgressTooltips = function (options) {
    var player = this;
    var init = function () {
      $('#vjs-tip').remove();
      var tipHtml = templateStore.get('avPlayer.progressTooltip')();
      $('.vjs-progress-control').after(tipHtml);

      $('.vjs-progress-holder').on('mousemove', function (event) {
        var minutes,
          seconds,
          seekBar,
          timeInSeconds,
          mousePosition;

        seekBar = player.controlBar.progressControl.seekBar;
        mousePosition = (event.pageX - $(seekBar.el()).offset().left) / seekBar.width();
        timeInSeconds = mousePosition * player.duration();

        if (timeInSeconds === player.duration()) {
          timeInSeconds = timeInSeconds - 0.1;
        }

        minutes = Math.floor(timeInSeconds / 60);
        seconds = Math.floor(timeInSeconds - minutes * 60);

        if (seconds < 10) {
          seconds = '0' + seconds;
        }

        $('#vjs-tip-inner').text([minutes, ':', seconds].join(''));

        var $el = $('.vjs-control-bar');
        var tooltipWidth = $('#vjs-tip').outerWidth();
        var left = event.pageX - $el.offset().left - Math.round(tooltipWidth / 2);
        $('#vjs-tip').css('left', left + 'px').css('display', 'block');
      });

      $('.vjs-progress-holder, .vjs-play-control').on('mouseout', function () {
        $('#vjs-tip').css('display', 'none');
      });
    };
    this.on('loadedmetadata', init);
  };

  return PluginProgressTooltips;
});

define('video-view', [
  'ajs',
  'backbone',
  'underscore',
  'jquery',
  'file',
  'BaseViewer',
  'instance-manager',
  'file-types',
  'template-store-singleton',
  'keyboard',
  'video-view/button-youtube',
  'video-view/button-toggle-hd',
  'video-view/button-presentation-mode',
  'video-view/plugin-progress-tooltips'
], function (
  AJS,
  Backbone,
  _,
  $,
  File,
  BaseViewer,
  InstanceManager,
  fileTypes,
  templateStore,
  keyboard,
  buttonYoutube,
  buttonToggleHd,
  buttonPresentationMode,
  pluginProgressTooltips
) {
  /*global videojs*/
  'use strict';

  var playerManager = new InstanceManager(videojs, function (player) {
    /*
    videojs players created for files with unsupported codecs
    throw an uncaught error when calling pause()
    see HC-19832 https://jira.atlassian.com/browse/HC-19832

    As soon as PR on video.js is merged we can update and removed the
    `player.tech` check here
    see https://github.com/videojs/video.js/pull/2676
    */
    player.tech && player.pause();
    player.dispose();
  });

  var VideoView = BaseViewer.extend({

    id: 'cp-video-preview',

    playerId: 'cp-video-player',

    events: {
      'click .vjs-poster' : 'togglePlay'
    },

    initialize: function () {
      BaseViewer.prototype.initialize.apply(this, arguments);
      var type     = this.model.get('type');

      this._paddingVertical  = 20;
      this._paddingScrollbar = 40;
      this._paddingNavArrows = 160;

      this._isPaused    = true;
      this._isVideo   = fileTypes.isVideo(type);
      this._isAudio   = fileTypes.isAudio(type);
      this._isYoutube   = fileTypes.isYoutube(type);
      this._isAutoPlay  = this._fileViewer.get('videoViewerAutoplay');
      this._maxWidth    = this._isVideo ? 1280 : 640;
      this._maxHeight   = this._isVideo ? 720 : 640;
      this._minWidth    = this._isVideo ? 160 : 120;
      this._minHeight   = this._isVideo ? 90  : 120;
      this._hasHdSource = this.model.get('src_hd') ? true : false;

      $(window).on(
        'resize.videojs',
        _.throttle(this._handleResize.bind(this), 50)
      );
      $(document).on(
        'keydown.videoView',
        keyboard.createConditionalKeyHandler(this._handleKeyboardControl.bind(this))
      );
    },

    teardown: function () {
      $(window).off('resize.videojs', this._handleResize);
      $(document).off('keydown.videoView');
      playerManager.destroy();
    },

    clickHitBackground: function (e) {
      var hitBackground = e.target.getAttribute('id') === this.id;
      return hitBackground;
    },

    setupMode: function (mode) {
      $('.cp-toolbar-layer').hide();
    },

    _handleKeyboardControl: function (e) {
      if (e.which === keyboard.keys.SPACE || e.which === keyboard.keys.ENTER) {
        this.togglePlay();
        e.preventDefault();
      }
    },

    render: function () {
      var type = this.model.get('type');

      this.$el.html(templateStore.get('avPlayer.playerBody')({
        src: this._getVideoSrc(),
        poster: this._getPosterSrc(),
        type: type,
        kind: this._isVideo ? 'video' : 'audio'
      }));

      playerManager.create(this.playerId, {
        plugins: this._registerPlugins(),
        controls: true,
        ytFullScreenControls: false,
        textTrackDisplay: false,
        errorDisplay: false,
        controlBar: {
          timeDivider: false,
          remainingTimeDisplay: false,
          liveDisplay: false,
          fullscreenToggle: false,
          muteToggle: false,
          volumeMenuButton: false,
          playbackRateMenuButton: true,
          subtitlesButton: false,
          captionsButton: false,
          chaptersButton: false
        },
        autoplay: this._isAutoPlay,
        preload: true,
        width: this._maxWidth,
        height: this._maxHeight
      }).then(this._setupPlayer.bind(this));

      return this;
    },

    play: function () {
      this._videoPlayer.play();
    },

    togglePlay: function () {
      if (this._videoPlayer && this._isPaused) {
        this._videoPlayer.play();
      } else if (this._videoPlayer) {
        this._videoPlayer.pause();
      }
    },

    // Set focus back to our main element if the active element
    // is the iFrame. This is to prevent losing focus to the youtube
    // embedded player.
    _refocusFileViewer: function () {
      if (document.activeElement.tagName === 'IFRAME') {
        var $container = $('#cp-container');
        $container.attr('tabindex', -1);
        $container.focus();
      }
    },

    handleResize: function () {
      this._handleResize();
    },

    _handleResize: function () {
      var containerWidth  = Math.max(
        (this.$el.width() - this._paddingNavArrows),
        this._minWidth
      );
      var containerHeight = Math.max(
        (this.$el.height() - this._paddingVertical),
        this._minHeight
      );

      var $videoEl  = $(this._videoPlayer.el());
      var videoWidth  = $videoEl.width();
      var videoHeight = $videoEl.height();

      var ratio  = Math.min(
        (containerWidth / videoWidth),
        (containerHeight / videoHeight)
      );
      var newWidth  = Math.min(this._maxWidth, (videoWidth * ratio));
      var newHeight = Math.min(this._maxHeight, (videoHeight * ratio));

      $videoEl.css('width', newWidth).css('height', newHeight);
    },

    _videoError: function () {
      var err = new Error('Media failed loading');

      err.title = "Ouch! We can\'t load the media file.";
      err.description = this.model.get('src');
      err.icon = 'cp-multimedia-icon';

      if (!this.viewerReady) {
        $('#' + this.playerId).remove();
        this.trigger('viewerFail', err);
      }
    },

    _videoLoadedMetaData: function () {
      $('#' + this.playerId).addClass('vjs-ready');
      this.trigger('viewerReady');
      this.viewerReady = true;
    },

    _videoVolumeChange: function () {
      var storage = this._fileViewer.getStorage();
      storage.setItem('videoVolume', this._videoPlayer.volume());
    },

    _videoPlay: function () {
      this._refocusFileViewer();
      this._isPaused = false;
      $(this._videoPlayer.el()).removeClass('vjs-has-ended');
    },

    _videoPause: function () {
      this._refocusFileViewer();
      this._isPaused = true;
    },

    _videoEnded: function () {
      $(this._videoPlayer.el()).addClass('vjs-has-ended');
    },

    _restoreVolumeSetting: function () {
      var storage   = this._fileViewer.getStorage();
      var volumeLevel = parseFloat(storage.getItem('videoVolume'));
      if (!isNaN(volumeLevel)) {
        this._videoPlayer.volume(volumeLevel);
      }
    },

    _restoreVideoPosterIfNotSet: function () {
      var currentPoster = this._videoPlayer.poster();
      var posterSrc   = this._getPosterForCurrentQuality();
      if (this._isVideo && !currentPoster) {
        this._videoPlayer.poster(posterSrc);
      }
    },

    _handlePlayerReady: function () {
      this.viewerReady = false;
      this._restoreVolumeSetting();

      // VideoJS 4.12.15 adds tabindex=0 to control bar play button
      // Tabindex needs to be removed to prevent focus staying on the play button
      // and breaking keyboard control (SPACE) to play/pause.
      $(this._videoPlayer.el()).find('.vjs-control').each(function (idx, el) {
        $(el).removeAttr('tabindex');
      });

      // In case the poster was removed for autoplaying videos
      // it now is added again to be displayed after the video ended.
      this._videoPlayer.one('timeupdate',
        this._restoreVideoPosterIfNotSet.bind(this)
      );
      this._videoPlayer.on('loadedmetadata',
        this._videoLoadedMetaData.bind(this)
      );
      this._videoPlayer.on('volumechange',
        this._videoVolumeChange.bind(this)
      );
      this._videoPlayer.on('error',
        this._videoError.bind(this)
      );
      this._videoPlayer.on('play',
        this._videoPlay.bind(this)
      );
      this._videoPlayer.on('pause',
        this._videoPause.bind(this)
      );
      this._videoPlayer.on('ended',
        this._videoEnded.bind(this)
      );
    },

    _registerPlugins: function () {
      var pluginsObject = {};

      videojs.plugin('pluginProgressTooltips', pluginProgressTooltips);
      pluginsObject.pluginProgressTooltips = {};

      videojs.plugin('presentation', buttonPresentationMode.asPlugin(this._fileViewer));
      pluginsObject.presentation = {viewer: this};

      videojs.plugin('buttonToggleHd', buttonToggleHd.asPlugin(this._fileViewer));
      pluginsObject.buttonToggleHd = {
        src: this.model.get('src'),
        src_hd: this.model.get('src_hd') || '',
        poster: this.model.get('poster') || '',
        poster_hd: this.model.get('poster_hd') || this.model.get('poster') || '',
        hd_active: this._shouldUseHdSource()
      };

      if (this._isYoutube) {
        videojs.plugin('buttonYoutube', buttonYoutube.asPlugin(this._fileViewer));
        pluginsObject.buttonYoutube = {};
      }

      return pluginsObject;
    },

    _setUpAudio: function ($player) {
      $player.addClass('vjs-audio');
      if (!this.model.get('poster')) {
        // Set default poster for audio if none is provided
        $player.find('.vjs-poster').addClass('vjs-default-coverart');
      }
    },

    _setUpYoutube: function ($player) {
      // Disable the youtube-videojs' iframe blocker
      // to re-enable clicks to elements inside the youtube player.
      // Removing it completely is no option because the youtube plugin
      // fails on trying to remove the layer on player destruction.
      $('.iframeblocker').css('display', 'none');
    },

    _setupPlayer: function (player) {
      var $player = $('#' + this.playerId);
      this._videoPlayer = player;
      this._handleResize();

      if (this._isAudio) { this._setUpAudio($player); }
      if (this._isYoutube) { this._setUpYoutube($player); }

      player.ready(this._handlePlayerReady.bind(this));
    },

    _shouldUseHdSource: function () {
      if (!this._hasHdSource) { return false; }

      var playHdDefault = this._fileViewer.getConfig().videoDefaultQualityHd;
      var playHdUser    = this._fileViewer.getStorage().getItem('videoQualityHd');
      var playHdEnabled = typeof playHdUser === 'undefined' || playHdUser;

      var playHdSettings = (playHdDefault && playHdEnabled) !== false;

      return this._hasHdSource && playHdSettings;
    },

    _getPosterForCurrentQuality: function () {
      if (this._shouldUseHdSource()) {
        return this.model.get('poster_hd') || this.model.get('poster') || '';
      }
      return this.model.get('poster') || '';
    },

    _getPosterSrc: function () {
      // No poster for autoplaying videos to prevent flickering
      if (this._isAutoPlay && this._isVideo) {
        return '';
      }
      return this._getPosterForCurrentQuality();
    },

    _getVideoSrc: function () {
      if (this._shouldUseHdSource()) {
        return this.model.get('src_hd');
      }
      return this.model.get('src');
    }

  });

  return VideoView;
});

(function () {
  'use strict';
  var FileViewer = require('file-viewer');
  FileViewer.registerPlugin('autoplay-videos', function (fileViewer) {
    var totalFilesShown;
    fileViewer.on('fv.open', function () { totalFilesShown = 0; });
    fileViewer.on('fv.changeFile', function () {
      totalFilesShown++;
      fileViewer.set('videoViewerAutoplay', totalFilesShown === 1);
    });
  });
}());

}(function () {
  var FileViewer;

    if (typeof module !== "undefined" && ('exports' in module)) {
      FileViewer = require('./fileviewer.js');
    } else if (window.require) {
      FileViewer = window.FileViewer;
    } else {
      FileViewer = window.FileViewer;
    }

    return FileViewer;
}()));
;
;
/* module-key = 'com.atlassian.jira.jira-fileviewer-plugin:atlassian-fileviewer', location = 'jira-fileviewer-module/node_modules/@atlassian/fileviewer/dist/fileviewer-minimode-templates.js' */
// This file was automatically generated from minimode.i18n.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace FileViewer.Templates.
 */

if (typeof FileViewer == 'undefined') { var FileViewer = {}; }
if (typeof FileViewer.Templates == 'undefined') { FileViewer.Templates = {}; }


FileViewer.Templates.minimodeBanner = function(opt_data, opt_ignored) {
  return '<div id="cp-info"><a tabindex="100" href="#" id="cp-files-label" aria-label="' + soy.$$escapeHtml("Show all files") + '"><span class="cp-files-collapser up">' + soy.$$escapeHtml("Show all files") + '</span><span class="cp-files-collapser down hidden">' + soy.$$escapeHtml("Hide all files") + '</span>' + aui.icons.icon({useIconFont: true, size: 'small', icon: 'arrows-up', accessibilityText: "Show all files", extraClasses: 'cp-files-collapser up'}) + aui.icons.icon({useIconFont: true, size: 'small', icon: 'arrows-down', accessibilityText: "Hide all files", extraClasses: 'cp-files-collapser down hidden'}) + '</a></div>';
};
if (goog.DEBUG) {
  FileViewer.Templates.minimodeBanner.soyTemplateName = 'FileViewer.Templates.minimodeBanner';
}


FileViewer.Templates.minimode = function(opt_data, opt_ignored) {
  return '<ol id="cp-thumbnails"/>';
};
if (goog.DEBUG) {
  FileViewer.Templates.minimode.soyTemplateName = 'FileViewer.Templates.minimode';
}


FileViewer.Templates.thumbnail = function(opt_data, opt_ignored) {
  return '<figure role="group" class="cp-thumbnail-group"><div class="cp-thumbnail-img"><a href="#" class="cp-thumbnail-img-container size-48 ' + soy.$$escapeHtml(opt_data.iconClass) + ' has-thumbnail"><img src="' + soy.$$escapeHtml(opt_data.thumbnailSrc) + '" alt="' + soy.$$escapeHtml(AJS.format("View a larger version of {0}",opt_data.title)) + '" /></a></div><figcaption class="cp-thumbnail-title" aria-label="' + soy.$$escapeHtml(opt_data.title) + '">' + soy.$$escapeHtml(opt_data.title) + '</figcaption></figure>';
};
if (goog.DEBUG) {
  FileViewer.Templates.thumbnail.soyTemplateName = 'FileViewer.Templates.thumbnail';
}


FileViewer.Templates.placeholderThumbnail = function(opt_data, opt_ignored) {
  return '<figure role="group" class="cp-thumbnail-group"><div class="cp-thumbnail-img"><a href="#" class="cp-thumbnail-img-container size-48 ' + soy.$$escapeHtml(opt_data.iconClass) + '"></a></div><figcaption class="cp-thumbnail-title" aria-label="' + soy.$$escapeHtml(opt_data.title) + '">' + soy.$$escapeHtml(opt_data.title) + '</figcaption></figure>';
};
if (goog.DEBUG) {
  FileViewer.Templates.placeholderThumbnail.soyTemplateName = 'FileViewer.Templates.placeholderThumbnail';
}
;
;
/* module-key = 'com.atlassian.jira.jira-fileviewer-plugin:atlassian-fileviewer', location = 'jira-fileviewer-module/node_modules/@atlassian/fileviewer/dist/fileviewer-minimode.js' */
(function (FileViewer) {
    'use strict';

    // use FileViewer's internal module system
    var define  = FileViewer.define;
    var require = FileViewer.require;

define('minimode/MinimodePanel',
  [
    'jquery',
    'ajs',
    'backbone',
    'minimode/ThumbnailView',
    'template-store-singleton'
  ],
  function (
    $,
    AJS,
    Backbone,
    FileThumbnailView,
    templateStore
  ) {
    'use strict';

    var FileMinimodeView = Backbone.View.extend({

      id: 'cp-footer-minimode',

      initialize: function (options) {
        this.subviews = [];
        this._fileViewer = options.fileViewer;
        this._panelView = options.panelView;
        this.listenTo(this.collection, 'add reset', this.render);
        this.listenTo(this._panelView, 'renderPanel', this._forceChromeRepaint);
        this.listenTo(this._panelView, 'renderPanel', this.scrollToSelected);
        this.$minimode = $(templateStore.get('minimode')());
        this.$minimode.appendTo(this.$el);
      },

      closeOldSubviews: function () {
        while (this.subviews.length > 0) {
          var view = this.subviews.pop();
          view.remove();
          view.unbind();
        }
      },

      render: function () {
        this.closeOldSubviews();

        this.collection.each(function (model) {
          var view = new FileThumbnailView({
            model: model,
            fileViewer: this._fileViewer,
            panelView: this._panelView
          });
          this.subviews.push(view);
          $(view.render().el).appendTo(this.$minimode);
        }, this);

        return this;
      },

      scrollToSelected: function () {
        var file = this._fileViewer.getCurrentFile();
        this.subviews.forEach(function (view) {
          if (view.model === file) {
            var topPos = view.$el.get(0).offsetTop - 59;
            if ((topPos) && this.$el.scrollTop !== topPos) {
              this.$el.find('#cp-thumbnails').scrollTop(topPos);
            }
          }
        }.bind(this));
      },

      _forceChromeRepaint: function () {
        // Chrome doesn't respect the 100% height on images once the container is resized.
        var $img = $('#cp-img');
        if ($img.length) {
          var $preview = $img.closest('#cp-image-preview'),
            left = $preview.scrollLeft(),
            top = $preview.scrollTop();
          $img.css('display', 'none').height();
          $img.css('display', 'inline-block');
          $preview.scrollLeft(left);
          $preview.scrollTop(top);
        }
      }

    });

    return FileMinimodeView;
  }
);

define('minimode/minimodePlugin', [
  'minimode/MinimodeToggle',
  'minimode/MinimodePanel'
], function (
  MinimodeToggle,
  MinimodePanel
) {
  'use strict';

  var minimodePlugin = function (fileViewer) {
    var fileView = fileViewer.getView();
    var sinkView = fileView.fileSinkView;
    var metaView = fileView.fileMetaView;

    if (!fileViewer.getConfig().enableMiniMode) {
      return;
    }

    metaView.addLayerView('minimodeToggle', MinimodeToggle, {
      predicate: MinimodeToggle.predicate
    });
    sinkView.addPanelView('minimode', MinimodePanel);
  };

  return minimodePlugin;
});
define('minimode/MinimodeToggle', [
  'backbone', 'template-store-singleton'
], function (Backbone, templateStore) {
  'use strict';

  var MinimodeToggle = Backbone.View.extend({

    events: {
      'click #cp-files-label': '_toggleMinimode'
    },

    initialize: function (options) {
      this._fileViewer = options.fileViewer;
      this._sinkView = this._fileViewer.getView().fileSinkView;
    },

    render: function () {
      this.$el.html(templateStore.get('minimodeBanner')());
      this._setShowAllFilesVisible();
      return this;
    },

    _toggleMinimode: function (event) {
      event.preventDefault();

      var analytics = this._fileViewer.analytics;

      if (this._sinkView.isPanelInitialized('minimode')) {
        this._sinkView.teardownPanel('minimode');
        analytics.send('files.fileviewer-web.minimode.closed');
      } else {
        this._sinkView.initializePanel('minimode');
        analytics.send('files.fileviewer-web.minimode.opened');
      }

      this._setShowAllFilesVisible();
    },

    _setShowAllFilesVisible: function () {
      var visible = this._sinkView.isPanelInitialized('minimode');
      this.$('.cp-files-collapser.up').toggleClass('hidden', visible);
      this.$('.cp-files-collapser.down').toggleClass('hidden', !visible);
    }

  }, {

    predicate: function (fileViewer) {
      return fileViewer._fileState.collection.length > 1;
    }

  });

  return MinimodeToggle;
});

define('minimode/ThumbnailView',
  [
    'ajs',
    'backbone',
    'jquery',
    'underscore',
    'file-types',
    'icon-utils',
    'template-store-singleton'
  ],
  function (
    AJS,
    Backbone,
    $,
    _,
    fileTypes,
    iconUtils,
    templateStore
  ) {
    'use strict';

    var ThumbnailView = Backbone.View.extend({

      className: 'cp-thumbnail',

      tagName: 'li',

      events: {
        'click' : 'jumpToFile'
      },

      initialize: function (options) {
        this._fileViewer = options.fileViewer;
        this.listenTo(this.model, 'change', this.render);
        this.listenTo(options.panelView, 'renderPanel', this.setSelected);
      },

      jumpToFile: function (event) {
        event.preventDefault();

        this._fileViewer.showFileWithCID(this.model.cid)
        .then(function () {
          var contentView = this._fileViewer.getView().fileContentView;
          var currentViewer;
          if (contentView.isLayerInitialized('content')) {
            currentViewer = contentView.getLayerForName('content')._viewer;
            currentViewer && currentViewer.play && currentViewer.play();
          }
        }.bind(this))
        .always(
          this._fileViewer.analytics.fn('files.fileviewer-web.minimode.thumbnail.clicked')
        );
      },

      setSelected: function () {
        // this may not be the same as file being shown, e.g., a different version of file is shown
        var file = this._fileViewer._fileState.getCurrent();
        if (file === this.model) {
          this.$el.addClass('selected');
        } else if (this.$el.hasClass('selected')) {
          this.$el.removeClass('selected');
        }
      },

      onThumbLoadError: function (ev) {
        var el = $(ev.target);
        el.parent().removeClass('has-thumbnail');
        el.remove();
      },

      render: function () {
        var type = this.model.get('type'),
          thumbnailSrc = this.model.get('thumbnail'),
          isImage = fileTypes.isImage(type);

        var generateThumbnail = this._fileViewer.getConfig().generateThumbnail;

        var $thumbnail = $(templateStore.get('placeholderThumbnail')({
          iconClass: iconUtils.getCssClass(type),
          title: this.model.get('title')
        }));

        this.$el.empty().append($thumbnail);

        if (thumbnailSrc && generateThumbnail) {
          generateThumbnail(this.model).done(function (thumbSrc) {
            $thumbnail.replaceWith(templateStore.get('thumbnail')({
              iconClass: iconUtils.getCssClass(type),
              thumbnailSrc: thumbSrc,
              title: this.model.get('title')
            }));
            this.$el.find('img').error(this.onThumbLoadError);
          }.bind(this));
        } else if (isImage || thumbnailSrc) {
          $thumbnail.replaceWith(templateStore.get('thumbnail')({
            iconClass: iconUtils.getCssClass(type),
            thumbnailSrc: thumbnailSrc || this.model.get('src'),
            title: this.model.get('title')
          }));
          this.$el.find('img').error(this.onThumbLoadError);
        }

        return this;
      }

    });

    return ThumbnailView;
  });

(function () {
  'use strict';
  var FileViewer = require('file-viewer');
  var minimodePlugin = require('minimode/minimodePlugin');
  FileViewer.registerPlugin('minimode', minimodePlugin);
}());

}(function () {
  var FileViewer;

    if (typeof module !== "undefined" && ('exports' in module)) {
      FileViewer = require('./fileviewer.js');
    } else if (window.require) {
      FileViewer = window.FileViewer;
    } else {
      FileViewer = window.FileViewer;
    }

    return FileViewer;
}()));
;
;
/* module-key = 'com.atlassian.jira.jira-fileviewer-plugin:atlassian-fileviewer', location = 'jira-fileviewer-module/module-backend/asynchronous.js' */
define("jira/fileviewer/module-backend/asynchronous",["wrm/require","jira/jquery/deferred","jquery","wrm/context-path"],function(e,r,i,a){"use strict";var n=/(.+[\/])[^\/]+/;return function(o){function t(){var e=new r;return i.ajax({url:a()+"/rest/webResources/1.0/resources",type:"POST",contentType:"application/json",dataType:"json",data:JSON.stringify({r:[s],c:[],xc:[],xr:[]})}).done(function(r){var i=r.resources[0].url,a=i.match(n)[1]+"bcmaps/";e.resolve({workerSrc:i,cMapUrl:a})}).fail(e.reject.bind(e)),e.promise()}var c={"pdf-viewer":"wr!com.atlassian.jira.jira-fileviewer-plugin:fileviewer-pdf"},s="com.atlassian.jira.jira-fileviewer-plugin:fileviewer-pdf-worker";return c[o]?e(c[o]):"pdf-config"===o?t():void 0}});;
;
/* module-key = 'com.atlassian.jira.jira-fileviewer-plugin:atlassian-fileviewer', location = 'jira-fileviewer-module/module-backend/analytics.js' */
define("jira/fileviewer/module-backend/analytics",["jira/analytics"],function(e){"use strict";return function(i,n){e.send({name:i,properties:n})}});;;try{window.performance.mark('jira.heritage_batch_file_eval:end');} catch(e){};