;try{window.performance.mark('jira.create.issue_batch_file_eval:start');} catch(e){};;
/* module-key = 'com.atlassian.jira.jira-view-issue-plugin:soy-templates', location = 'jira-view-issue-module/viewissue/attachmentsblock.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.ViewIssue&&(JIRA.Templates.ViewIssue={}),JIRA.Templates.ViewIssue.renderAttachments=function(e,t){return""+("list"==e.viewMode?JIRA.Templates.ViewIssue.fileAttachments(e):JIRA.Templates.ViewIssue.galleryAttachments(e))},JIRA.Templates.ViewIssue.fileAttachments=function(e,t){for(var a='<ol id="file_attachments" class="item-attachments" data-sort-key="'+soy.$$escapeHtml(e.sortKey)+'" data-sort-order="'+soy.$$escapeHtml(e.sortOrder)+'">',s=e.attachments,i=s.length,n=0;n<i;n++){var c=s[n];a+=JIRA.Templates.ViewIssue.fileAttachment(soy.$$augmentMap(e,{fileAttachment:c}))}return a+="</ol>"},JIRA.Templates.ViewIssue.galleryAttachments=function(e,t){for(var a='<ol id="attachment_thumbnails" class="item-attachments" data-sort-key="'+soy.$$escapeHtml(e.sortKey)+'" data-sort-order="'+soy.$$escapeHtml(e.sortOrder)+'">',s=e.attachments,i=s.length,n=0;n<i;n++){var c=s[n];a+=JIRA.Templates.ViewIssue.imageAttachment(soy.$$augmentMap(e,{imageAttachment:c}))}return a+="</ol>"},JIRA.Templates.ViewIssue.fileAttachment=function(e,t){return'<li class="attachment-content js-file-attachment'+(e.fileAttachment.latest?"":" earlier-version")+'" data-attachment-id="'+soy.$$escapeHtml(e.fileAttachment.id)+'"'+JIRA.Templates.ViewIssue.renderAttachmentData({issue:e.issue,attachment:e.fileAttachment})+">"+(e.fileAttachment.expandable?JIRA.Templates.ViewIssue.zipFileAttachment(e):'<div class="attachment-thumb"><a href="'+soy.$$escapeHtml(e.baseurl)+"/"+soy.$$escapeHtml(""+e.fileAttachment.attachmentUrl)+'" draggable="true" data-downloadurl="'+soy.$$escapeHtml(e.fileAttachment.mimeType)+":"+soy.$$escapeHtml(e.fileAttachment.fileName)+":"+soy.$$escapeHtml(e.fullBaseUrl)+"/"+soy.$$escapeHtml(""+e.fileAttachment.attachmentUrl)+'"'+JIRA.Templates.ViewIssue.tagAttachment({attachment:e.fileAttachment})+">"+JIRA.Templates.ViewIssue.renderAttachmentIcon(soy.$$augmentMap(e,{mimetype:e.fileAttachment.mimeType}))+"</a></div><dl>"+JIRA.Templates.ViewIssue.renderAttachmentInfo(soy.$$augmentMap(e,{attachment:e.fileAttachment}))+"</dl>")+"</li>"},JIRA.Templates.ViewIssue.zipFileAttachment=function(e,t){return'<div class="twixi-block collapsed expander"><div class="twixi-wrap verbose"><a href="#" class="twixi"><span class="icon-default aui-icon aui-icon-small aui-iconfont-expanded"><span>'+soy.$$escapeHtml("Hide")+'</span></span></a><div class="attachment-thumb"><a href="'+soy.$$escapeHtml(e.baseurl)+"/"+soy.$$escapeHtml(""+e.fileAttachment.attachmentUrl)+'" draggable="true" data-downloadurl="'+soy.$$escapeHtml(e.fileAttachment.mimeType)+":"+soy.$$escapeHtml(e.fileAttachment.fileName)+":"+soy.$$escapeHtml(e.fullBaseUrl)+"/"+soy.$$escapeHtml(""+e.fileAttachment.attachmentUrl)+'"'+JIRA.Templates.ViewIssue.tagAttachment({attachment:e.fileAttachment})+">"+JIRA.Templates.ViewIssue.renderAttachmentIcon(soy.$$augmentMap(e,{mimetype:e.fileAttachment.mimeType}))+"</a></div><dl>"+JIRA.Templates.ViewIssue.renderAttachmentInfo(soy.$$augmentMap(e,{attachment:e.fileAttachment}))+'<dd class="zip-contents"><ol><li><div class="attachment-thumb"><img src="'+soy.$$escapeHtml(e.baseurl)+'/images/icons/wait.gif" /></div>'+soy.$$escapeHtml("Extracting archive...")+'</li></ol></dd></dl></div><div class="twixi-wrap concise"><a href="#" class="twixi"><span class="icon-default aui-icon aui-icon-small aui-iconfont-collapsed"><span>'+soy.$$escapeHtml("Show")+'</span></span></a><div class="attachment-thumb"><a href="'+soy.$$escapeHtml(e.baseurl)+"/"+soy.$$escapeHtml(""+e.fileAttachment.attachmentUrl)+'" draggable="true" data-downloadurl="'+soy.$$escapeHtml(e.fileAttachment.mimeType)+":"+soy.$$escapeHtml(e.fileAttachment.fileName)+":"+soy.$$escapeHtml(e.fullBaseUrl)+"/"+soy.$$escapeHtml(""+e.fileAttachment.attachmentUrl)+'"'+JIRA.Templates.ViewIssue.tagAttachment({attachment:e.fileAttachment})+">"+JIRA.Templates.ViewIssue.renderAttachmentIcon(soy.$$augmentMap(e,{mimetype:e.fileAttachment.mimeType}))+"</a></div><dl>"+JIRA.Templates.ViewIssue.renderAttachmentInfo(soy.$$augmentMap(e,{attachment:e.fileAttachment}))+"</dl></div></div>"},JIRA.Templates.ViewIssue.imageAttachment=function(e,t){return'<li class="attachment-content js-file-attachment" draggable="true" data-downloadurl="'+soy.$$escapeHtml(e.imageAttachment.mimeType)+":"+soy.$$escapeHtml(e.imageAttachment.fileName)+":"+soy.$$escapeHtml(e.fullBaseUrl)+"/"+soy.$$escapeHtml(""+e.imageAttachment.attachmentUrl)+'"'+JIRA.Templates.ViewIssue.renderAttachmentData({issue:e.issue,attachment:e.imageAttachment})+'><div class="attachment-thumb"><a href="'+soy.$$escapeHtml(e.baseurl)+"/"+soy.$$escapeHtml(""+e.imageAttachment.attachmentUrl)+'" title="'+soy.$$escapeHtml(e.imageAttachment.fileName)+" -"+(e.imageAttachment.latest?" "+soy.$$escapeHtml("Latest"):"")+" "+soy.$$escapeHtml(e.imageAttachment.createdDateTime)+(e.imageAttachment.authorDisplayName?" - "+soy.$$escapeHtml(e.imageAttachment.authorDisplayName):"")+'"'+JIRA.Templates.ViewIssue.tagAttachment({attachment:e.imageAttachment})+">"+(null!=e.imageAttachment.thumbnailUrl?'<jira-attachment-thumbnail url="'+soy.$$escapeHtml(""+e.imageAttachment.thumbnailUrl)+'" jira-url="'+soy.$$escapeHtml(""+e.imageAttachment.jiraThumbnailUrl)+'" filename="'+soy.$$escapeHtml(e.imageAttachment.fileName)+'"></jira-attachment-thumbnail>':JIRA.Templates.ViewIssue.renderThumbnailIcon({mimetype:e.imageAttachment.mimeType}))+"</a></div><dl "+(e.imageAttachment.latest?"":'class="earlier-version"')+"><dt>"+(e.imageAttachment.deletable?'<span class="blender blender-delete"></span><div class="attachment-delete"><a title="'+soy.$$escapeHtml("Delete this attachment")+'" id="del_'+soy.$$escapeHtml(e.imageAttachment.id)+'" href="'+soy.$$escapeHtml(e.baseurl)+"/secure/DeleteAttachment!default.jspa?id="+soy.$$escapeHtml(e.issue.id)+"&deleteAttachmentId="+soy.$$escapeHtml(e.imageAttachment.id)+'&from=issue"><span class="icon-default aui-icon aui-icon-small aui-iconfont-delete">'+soy.$$escapeHtml("Delete this attachment")+"</span></a></div>":'<span class="blender"></span>')+'<a  href="'+soy.$$escapeHtml(e.baseurl)+"/"+soy.$$escapeHtml(""+e.imageAttachment.attachmentUrl)+'" class="attachment-title" title="'+soy.$$escapeHtml(e.imageAttachment.fileName)+" -"+(e.imageAttachment.latest?" "+soy.$$escapeHtml("Latest"):"")+" "+soy.$$escapeHtml(e.imageAttachment.createdDateTime)+(e.imageAttachment.authorDisplayName?" - "+soy.$$escapeHtml(e.imageAttachment.authorDisplayName):"")+'"'+JIRA.Templates.ViewIssue.tagAttachment({attachment:e.imageAttachment})+">"+soy.$$escapeHtml(e.imageAttachment.fileName)+'</a></dt><dd class="attachment-size">'+soy.$$escapeHtml(e.imageAttachment.fileSize)+'</dd><dd class="attachment-date"><time class="livestamp" datetime="'+soy.$$escapeHtml(""+e.imageAttachment.createdIso8601)+'">'+soy.$$escapeHtml(e.imageAttachment.createdDateTime)+"</time></dd></dl></li>"},JIRA.Templates.ViewIssue.renderAttachmentInfo=function(e,t){return'<dt class="attachment-title"><a href="'+soy.$$escapeHtml(e.baseurl)+"/"+soy.$$escapeHtml(""+e.attachment.attachmentUrl)+'" title="'+(e.attachment.latest?soy.$$escapeHtml("Latest")+" ":"")+" "+soy.$$escapeHtml(e.attachment.createdDateTime)+(e.attachment.authorDisplayName?" - "+soy.$$escapeHtml(e.attachment.authorDisplayName):"")+'" draggable="true" data-downloadurl="'+soy.$$escapeHtml(e.attachment.mimeType)+":"+soy.$$escapeHtml(e.attachment.fileName)+":"+soy.$$escapeHtml(e.fullBaseUrl)+"/"+soy.$$escapeHtml(""+e.attachment.attachmentUrl)+'"'+JIRA.Templates.ViewIssue.tagAttachment(e)+">"+soy.$$escapeHtml(e.attachment.fileName)+'</a></dt><dd class="attachment-delete">'+(e.attachment.deletable?'<a title="'+soy.$$escapeHtml("Delete this attachment")+'" id="del_'+soy.$$escapeHtml(e.attachment.id)+'" href="'+soy.$$escapeHtml(e.baseurl)+"/secure/DeleteAttachment!default.jspa?id="+soy.$$escapeHtml(e.issue.id)+"&deleteAttachmentId="+soy.$$escapeHtml(e.attachment.id)+'&from=issue"><span class="icon-default aui-icon aui-icon-small aui-iconfont-delete">'+soy.$$escapeHtml("Delete this attachment")+"</span></a>":'<span class="icon"></span>')+'</dd><dd class="attachment-date"><time class="livestamp" datetime="'+soy.$$escapeHtml(""+e.attachment.createdIso8601)+'">'+soy.$$escapeHtml(e.attachment.createdDateTime)+'</time></dd><dd class="attachment-size">'+soy.$$escapeHtml(e.attachment.fileSize)+'</dd><dd class="attachment-author">'+soy.$$escapeHtml(e.attachment.authorDisplayName?e.attachment.authorDisplayName:"")+"</dd>"},JIRA.Templates.ViewIssue.renderAttachmentData=function(e,t){return'data-issue-id="'+soy.$$escapeHtml(e.issue.id)+'"'+(e.attachment.expandable?'data-attachment-type="expandable"':null!=e.attachment.thumbnailUrl?'data-attachment-type="image"':'data-attachment-type="file"')},JIRA.Templates.ViewIssue.renderAttachmentLegacyIcon=function(e,t){var a="",s=""+JIRA.Templates.ViewIssue.matchFileIconUrl(e),i=""+JIRA.Templates.ViewIssue.matchFileIconAlt(e);return a+='<img src="'+soy.$$escapeHtml(s)+'" height="16" width="16" border="0" alt="'+soy.$$escapeHtml(i)+'">'},JIRA.Templates.ViewIssue.matchFileIconUrl=function(e,t){return soy.$$escapeHtml(e.baseurl)+"/images/icons/attach/"+JIRA.Templates.ViewIssue.matchFileIcon(e)},JIRA.Templates.ViewIssue.matchFileIcon=function(e,t){var a="";switch(e.mimetype){case"application/pdf":a+="pdf.gif";break;case"image/gif":a+="image.gif";break;case"image/png":a+="image.gif";break;case"image/jpeg":a+="image.gif";break;case"text/xml":a+="xml.gif";break;case"text/html":a+="html.gif";break;case"text/plain":a+="text.gif";break;case"application/zip":a+="zip.gif";break;case"application/x-gzip-compressed":a+="zip.gif";break;case"application/msword":a+="word.gif";break;case"application/msword-template":a+="word.gif";break;case"application/vnd.ms-word.document.macroEnabled.12":a+="word.gif";break;case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":a+="word.gif";break;case"application/vnd.ms-word.template.macroEnabled.12":a+="word.gif";break;case"application/vnd.openxmlformats-officedocument.wordprocessingml.template":a+="word.gif";break;case"application/vnd.ms-excel":a+="excel.gif";break;case"application/vnd.ms-excel.addin.macroEnabled.12":a+="excel.gif";break;case"application/vnd.ms-excel.sheet.binary.macroEnabled.12":a+="excel.gif";break;case"application/vnd.ms-excel.sheet.macroEnabled.12":a+="excel.gif";break;case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":a+="excel.gif";break;case"application/vnd.ms-excel.template.macroEnabled.12":a+="excel.gif";break;case"application/vnd.openxmlformats-officedocument.spreadsheetml.template":a+="excel.gif";break;case"application/vnd.ms-powerpoint":a+="powerpoint.gif";break;case"application/vnd.ms-powerpoint.template.macroEnabled.12":a+="powerpoint.gif";break;case"application/vnd.openxmlformats-officedocument.presentationml.template":a+="powerpoint.gif";break;case"application/vnd.ms-powerpoint.addin.macroEnabled.12":a+="powerpoint.gif";break;case"application/vnd.ms-powerpoint.slideshow.macroEnabled.12":a+="powerpoint.gif";break;case"application/vnd.openxmlformats-officedocument.presentationml.slideshow":a+="powerpoint.gif";break;case"application/vnd.ms-powerpoint.presentation.macroEnabled.12":a+="powerpoint.gif";break;case"application/vnd.openxmlformats-officedocument.presentationml.presentation":a+="powerpoint.gif";break;case"text/x-java":a+="java.gif";break;case"text/x-java-source":a+="java.gif";break;case"application/x-java-archive":a+="java.gif";break;default:a+="file.gif"}return a},JIRA.Templates.ViewIssue.matchFileIconAlt=function(e,t){var a="";switch(e.mimetype){case"application/pdf":a+=soy.$$escapeHtml("PDF File");break;case"image/gif":a+=soy.$$escapeHtml("GIF File");break;case"image/png":a+=soy.$$escapeHtml("PNG File");break;case"image/jpeg":a+=soy.$$escapeHtml("JPEG File");break;case"text/xml":a+=soy.$$escapeHtml("XML File");break;case"text/html":a+=soy.$$escapeHtml("HTML File");break;case"text/plain":a+=soy.$$escapeHtml("Text File");break;case"application/zip":a+=soy.$$escapeHtml("Zip Archive");break;case"application/x-gzip-compressed":a+=soy.$$escapeHtml("GZip Archive");break;case"application/msword":a+=soy.$$escapeHtml("Microsoft Word");break;case"application/msword-template":a+=soy.$$escapeHtml("Microsoft Word");break;case"application/vnd.openxmlformats":a+=soy.$$escapeHtml("Microsoft Word");break;case"application/vnd.ms-word.document.macroEnabled.12":a+=soy.$$escapeHtml("Microsoft Word");break;case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":a+=soy.$$escapeHtml("Microsoft Word");break;case"application/vnd.ms-word.template.macroEnabled.12":a+=soy.$$escapeHtml("Microsoft Word");break;case"application/vnd.openxmlformats-officedocument.wordprocessingml.template":a+=soy.$$escapeHtml("Microsoft Word");break;case"application/vnd.ms-excel":a+=soy.$$escapeHtml("Microsoft Word");break;case"application/vnd.ms-excel":a+=soy.$$escapeHtml("Microsoft Word");break;case"application/vnd.ms-excel.addin.macroEnabled.12":a+=soy.$$escapeHtml("Microsoft Word");break;case"application/vnd.ms-excel.sheet.binary.macroEnabled.12":a+=soy.$$escapeHtml("Microsoft Word");break;case"application/vnd.ms-excel.sheet.macroEnabled.12":a+=soy.$$escapeHtml("Microsoft Word");break;case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":a+=soy.$$escapeHtml("Microsoft Word");break;case"application/vnd.ms-excel.template.macroEnabled.12":a+=soy.$$escapeHtml("Microsoft Word");break;case"application/vnd.openxmlformats-officedocument.spreadsheetml.template":a+=soy.$$escapeHtml("Microsoft Word");break;case"application/vnd.ms-powerpoint":a+=soy.$$escapeHtml("Microsoft PowerPoint");break;case"application/vnd.ms-powerpoint.template.macroEnabled.12":a+=soy.$$escapeHtml("Microsoft PowerPoint");break;case"application/vnd.openxmlformats-officedocument.presentationml.template":a+=soy.$$escapeHtml("Microsoft PowerPoint");break;case"application/vnd.ms-powerpoint.addin.macroEnabled.12":a+=soy.$$escapeHtml("Microsoft PowerPoint");break;case"application/vnd.ms-powerpoint.slideshow.macroEnabled.12":a+=soy.$$escapeHtml("Microsoft PowerPoint");break;case"application/vnd.openxmlformats-officedocument.presentationml.slideshow":a+=soy.$$escapeHtml("Microsoft PowerPoint");break;case"application/vnd.ms-powerpoint.presentation.macroEnabled.12":a+=soy.$$escapeHtml("Microsoft PowerPoint");break;case"application/vnd.openxmlformats-officedocument.presentationml.presentation":a+=soy.$$escapeHtml("Microsoft PowerPoint");break;case"text/x-java":a+=soy.$$escapeHtml("Java Source File");break;case"text/x-java-source":a+=soy.$$escapeHtml("Java Source File");break;case"application/x-java-archive":a+=soy.$$escapeHtml("Java Archive File");break;default:a+=soy.$$escapeHtml("File")}return a},JIRA.Templates.ViewIssue.renderAttachmentIcon=function(e,t){var a="",s=""+JIRA.Templates.ViewIssue.matchFileClass(e),i=""+JIRA.Templates.ViewIssue.matchFileIconAlt(e);return a+='<span class="aui-icon aui-icon-small attachment-icon '+soy.$$escapeHtml(s)+'" title="'+soy.$$escapeHtml(i)+'"></span>'},JIRA.Templates.ViewIssue.renderThumbnailIcon=function(e,t){var a="",s=""+JIRA.Templates.ViewIssue.matchFileClass(e);return a+='<span class="aui-icon aui-icon-large attachment-thumbnail-icon '+soy.$$escapeHtml(s)+'"></span>'},JIRA.Templates.ViewIssue.matchFileClass=function(e,t){var a="";switch(e.mimetype){case"application/pdf":a+="aui-iconfont-file-pdf";break;case"image/gif":a+="aui-iconfont-image";break;case"image/png":a+="aui-iconfont-image";break;case"image/jpeg":a+="aui-iconfont-image";break;case"video/mp4":a+="aui-iconfont-file-video";break;case"text/xml":a+="aui-iconfont-file-code";break;case"text/html":a+="aui-iconfont-file-code";break;case"text/plain":a+="aui-iconfont-file-txt";break;case"application/zip":a+="aui-iconfont-file-zip";break;case"application/x-gzip-compressed":a+="aui-iconfont-file-zip";break;case"application/msword":a+="aui-iconfont-file-doc";break;case"application/msword-template":a+="aui-iconfont-file-doc";break;case"application/vnd.ms-word.document.macroEnabled.12":a+="aui-iconfont-file-doc";break;case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":a+="aui-iconfont-file-doc";break;case"application/vnd.ms-word.template.macroEnabled.12":a+="aui-iconfont-file-doc";break;case"application/vnd.openxmlformats-officedocument.wordprocessingml.template":a+="aui-iconfont-file-doc";break;case"application/vnd.ms-excel":a+="aui-iconfont-file-xls";break;case"application/vnd.ms-excel.addin.macroEnabled.12":a+="aui-iconfont-file-xls";break;case"application/vnd.ms-excel.sheet.binary.macroEnabled.12":a+="aui-iconfont-file-xls";break;case"application/vnd.ms-excel.sheet.macroEnabled.12":a+="aui-iconfont-file-xls";break;case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":a+="aui-iconfont-file-xls";break;case"application/vnd.ms-excel.template.macroEnabled.12":a+="aui-iconfont-file-xls";break;case"application/vnd.openxmlformats-officedocument.spreadsheetml.template":a+="aui-iconfont-file-xls";break;case"application/vnd.ms-powerpoint":a+="aui-iconfont-file-ppt";break;case"application/vnd.ms-powerpoint.template.macroEnabled.12":a+="aui-iconfont-file-ppt";break;case"application/vnd.openxmlformats-officedocument.presentationml.template":a+="aui-iconfont-file-ppt";break;case"application/vnd.ms-powerpoint.addin.macroEnabled.12":a+="aui-iconfont-file-ppt";break;case"application/vnd.ms-powerpoint.slideshow.macroEnabled.12":a+="aui-iconfont-file-ppt";break;case"application/vnd.openxmlformats-officedocument.presentationml.slideshow":a+="aui-iconfont-file-ppt";break;case"application/vnd.ms-powerpoint.presentation.macroEnabled.12":a+="aui-iconfont-file-ppt";break;case"application/vnd.openxmlformats-officedocument.presentationml.presentation":a+="aui-iconfont-file-ppt";break;case"text/x-java":a+="aui-iconfont-file-code";break;case"text/x-java-source":a+="aui-iconfont-file-code";break;case"application/x-java-archive":a+="aui-iconfont-file-zip";break;default:a+="aui-iconfont-devtools-file"}return a},JIRA.Templates.ViewIssue.tagAttachment=function(e,t){return""+JIRA.Templates.ViewIssue.tagFilePreview({id:e.attachment.id,title:e.attachment.fileName,mimeType:e.attachment.mimeType,thumbnailUrl:e.attachment.thumbnailUrl})},JIRA.Templates.ViewIssue.tagFilePreview=function(e,t){var a="",s=""+(null==e.mimeType&&null!=e.thumbnailUrl?"image":null!=e.mimeType&&(""+e.mimeType).indexOf("image/")!=-1?"image":null!=e.mimeType&&(""+e.mimeType).indexOf("video/mp4")!=-1?"video":"application/pdf"==e.mimeType?"document":"unknown");return a+="unknown"!=s?' file-preview-id="'+soy.$$escapeHtml(e.id)+'" file-preview-title="'+soy.$$escapeHtml(e.title)+'" file-preview-type="'+soy.$$escapeHtml(s)+'" file-preview-mime-type="'+soy.$$escapeHtml(e.mimeType)+'"'+(null!=e.thumbnailUrl?'file-preview-url="'+soy.$$escapeHtml(""+e.thumbnailUrl)+'"':""):""};;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-amd', location = 'jira-dnd-attachment-module/js/jira-amd.js' */
define("dndattachment/JIRA",function(){return JIRA});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-amd', location = 'jira-dnd-attachment-module/js/aui-amd.js' */
define("dndattachment/aui",function(){return AJS});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-base', location = 'jira-dnd-attachment-module/js/i18n.js' */
define("dndattachment/i18n",function(){var t={"dnd.attachment.unsupported.browser":"Drag and Drop of attachments is currently only available for the following browsers:","dnd.attachment.file.is.too.large":"File exceeds maximum size limit set by the administrator ({0}).","dnd.attachment.upload.in.progress":"Upload in progress, please wait.","dnd.attachment.not.uploaded":function(t){return AJS.format("File \"{0}\" was not uploaded",t)},"dnd.attachment.unauthorized":"You are not authorized, session has expired or connection is lost.","dnd.attachment.internal.server.error":"An internal error has occurred. Please contact your administrator.","dnd.attachment.upload.aborted":"Upload was aborted.","dnd.attachment.upload.remove":"Remove attachment"};return function(n){if(t[n])return t[n];throw"Unknown key: "+n}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-base', location = 'jira-dnd-attachment-module/js/TemporaryAttachments.js' */
define("dndattachment/TemporaryAttachments",[],function(){var t={};return{createAttachment:function(t,e,n,a){return{id:t,name:e,type:n,file:a}},getAttachment:function(e,n){return t[e]||this.createAttachment(e,n)},putAttachment:function(e,n){return t[e]=this.createAttachment(e,n.name,n.type,n)}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-base', location = 'jira-dnd-attachment-module/js/Parser.js' */
define("dndattachment/Parser",["dndattachment/aui","jquery"],function(e,n){function r(e){var r=n(e).find(a).add(e.filter(a)),d=r.addClass(t).map(function(e,r){var t=new n.Deferred;return require([n(r).attr("duiType")],function(e){"function"==typeof e?t.resolve(new e(r)):t.reject()}),t});return n.when.apply(window,n.makeArray(d))}var t="-dui-type-parsed",a="*[duiType]:not(."+t+")";return JIRA.bind(JIRA.Events.NEW_CONTENT_ADDED,function(e,n,t){r(n)}),n.isReady?r(n("body")):n(function(){r(n("body"))}),{parse:r}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-base', location = 'jira-dnd-attachment-module/js/dropzones/IssueDropZone.js' */
define("dndattachment/dropzones/IssueDropZone",["jquery","jira/flag","dndattachment/Parser","dndattachment/aui","dndattachment/JIRA","dndattachment/i18n","dndattachment/TemporaryAttachments","dndattachment/util/DataTransfer","dndattachment/ctrlv/utility"],function(e,t,n,i,s,r,a,o,d){var u=5e3,l=["An internal error has occurred. Please contact your administrator."],h=Class.extend({eventGroup:"issuedropzone",progressBarType:"dndattachment/progressbars/UploadProgressBar",init:function(t){return this.$node=e(t),this.isSupportedBrowser()?(this.$node.parents(".mod-content")&&this.$node.parents(".mod-content").addClass("issue-drop-zone"),this.uploadLimit=this.$node.data("upload-limit"),this.uploadSize=this.$node.data("upload-size"),this.formToken=this.$node.data("form-token"),this.attachFileUrl=contextPath+"/secure/AttachFile.jspa",this.pendingQueue=[],this.render(),void this.queueEvent("init")):this.renderUnsupported()},queueTask:function(t){this.pendingQueue.push(t),t.always(function(){this.pendingQueue.splice(this.pendingQueue.indexOf(t),1)}.bind(this)),this.markDirty(!0),e.when.apply(window,this.pendingQueue).always(_.debounce(this.checkMarkDirty,!1,!0).bind(this))},render:function(){this.$node.html(s.Templates.DnDAttachmentPlugin.IssueDropZone({})),this.fileInput=this.$node.find(".issue-drop-zone__file"),this.fileButton=this.$node.find("button.issue-drop-zone__button"),this.connectListeners(),s.trace("jira.issue.dnd.issuedropzone.render")},addHandlerToBrowseLink:function(){this.fileButton.click(this.browseLinkHandler.bind(this))},browseLinkHandler:function(e){e.preventDefault(),this.fileInput.click()},connectListeners:function(){this.fileInput.change(function(e){this.handleFilesReceived(this.fileInput[0].files),this.queueEvent("fileInput",{count:this.fileInput[0].files.length}),this.fileInput.attr("value",null)}.bind(this)),this.addHandlerToBrowseLink();var t=this.$node.parents(".issue-drop-zone").length>0?this.$node.parents(".issue-drop-zone"):this.$node;this.$dropTarget=t.find(">*").andSelf(),this.$dropTarget.on("dragover dragenter drop",function(n){if(n.preventDefault(),n.stopPropagation(),t.addClass("dragover"),"drop"==n.type){t.removeClass("dragover"),e(document).trigger("dropHandled");var i=new o(n.dataTransfer);i.getFiles().then(function(e){this.handleFilesReceived(e),this.queueEvent("fileDrop",{count:e.length})}.bind(this))}}.bind(this)),this.$dropTarget.on("dragleave",function(){t.removeClass("dragover")}.bind(this))},configureUploadProgressBar:function(e,t){e.data("upload-size",this.uploadSize).data("file",t).data("form-token",this.formToken)},createUploadProgressBar:function(t){var i=e('<div duiType="'+this.progressBarType+'" class="upload-progress-bar"></div>');return this.configureUploadProgressBar(i,t),n.parse(i).then(function(e){this.placeUploadProgressBar(i,e),this.handleNewProgressBar(e)}.bind(this))},placeUploadProgressBar:function(e){return e.insertAfter(this.$node)},handleNewProgressBar:function(e){},handleFilesReceived:function(e){this.uploadFiles(e)},uploadFiles:function(n){var r=new e.Deferred,a=[],o=s.Issues.Api.getSelectedIssueKey(),d=s.Issues.Api.getSelectedIssueId(),l=i.Meta.get("viewissue-permlink"),h=e("#summary-val input").attr("value")||e("#summary-val").text(),c=s.Templates.DnDAttachmentPlugin.SuccessMessageLink({issueLink:l,issueKey:o,issueSummary:h}),p=_.map(n,function(t){var n=new e.Deferred;return this.createUploadProgressBar(t).then(function(e){this.trigger("progressBarInserted",e),a.push(e),e.uploadFile(t,this.uploadLimit).then(n.resolve.bind(n),n.resolve.bind(n)).done(function(){this.trigger("uploadFinished",e)}.bind(this)).fail(function(){s.trace("jira.issue.dnd.upload.fail"),r.reject(arguments)})}.bind(this)),n}.bind(this)),f=e.when.apply(window,p);return f.done(function(){var e=_.filter(1==p.length?[arguments]:arguments,function(e){return e&&e[0]&&e[0].id}).map(function(e){return e[0].id});0!=e.length&&this.commitUpload(e,d).done(function(){_.delay(function(){a.some(function(e){e.getAutoDestroy()&&(e.destroy(),this.queueEvent("autoDestroy"))}.bind(this))}.bind(this),u);var e=_.filter(a,function(e){return e.result.isResolved()});if(1==e.length){var n=e[0].getFileName();t.showSuccessMsg("",i.format("{0} was attached successfully to {1}.",n,c))}else e.length>1&&t.showSuccessMsg("",i.format("{0} files were attached successfully to {1}.",e.length,c));r.resolve(_.map(e,function(e){return e.file.name}))}.bind(this)).fail(function(e,t){r.reject(e,t),e&&e.forEach(function(e){a.forEach(function(t){t.reportError(e)})}),t&&a.forEach(function(e){var n=t["#"+e.getFileID()]||t[e.getFileName()];n&&e.reportError(n)}),s.trace("jira.issue.dnd.commit.fail")})}.bind(this)),this.queueTask(f),r},loadAttachments:function(e){e.forEach(function(e){this.createUploadProgressBar(e.file).then(function(t){t.setFileID(e.id),t.setFileName(e.name),t.setFileSize(e.size),t.setProgress(1),t.setFinished(),this.trigger("uploadFinished",t)}.bind(this))},this)},commitUpload:function(t,n){return new e.Deferred},attachFile:function(t,n){var i=new e.Deferred;return s.SmartAjax.makeRequest({type:"POST",url:this.attachFileUrl,data:{inline:!0,id:n||s.Issue.getIssueId(),filetoconvert:t,atl_token:atl_token(),formToken:this.formToken},dataType:"json"}).done(i.resolve.bind(i)).fail(function(e){try{var t=JSON.parse(e.responseText);i.reject(t.errorMessages||l,t.errors)}catch(e){i.reject(l)}}),i},isSupportedBrowser:function(){if(e("html.webkit")[0]||e("html.safari")[0]){if(!(parseFloat(e.browser.version)>=537))return!1}else if(e("html.mozilla")[0]){if(!(parseFloat(e.browser.version)>=1.9))return!1}else{if(!e("html.msie")[0])return!1;if(!(parseFloat(e.browser.version)>=10))return!1}return!0},renderUnsupported:function(){this.$node.addClass("issue-drop-zone__not-supported").text(r("dnd.attachment.unsupported.browser")).append("<ul><li>FireFox 3.6+</li><li>Chrome 5+</li><li>Safari 5</li></ul>")},markDirty:function(e){this.$node.addClass(s.DirtyForm.ClassNames.SANCTIONED),this.$node.toggleClass(s.DirtyForm.ClassNames.EXEMPT,!e),this.$node.attr("value",!1),this.$node.attr("defaultValue",!0)},checkMarkDirty:function(){0==this.pendingQueue.length&&this.markDirty(!1)},queueEvent:function(e,t){i.trigger("analytics",{name:"issue.dnd.attachment."+this.eventGroup+"."+e,data:t||{}})}});return h});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:attachment-integration', location = 'jira-dnd-attachment-module/js/integration/register.js' */
define("dndattachment/integration-register",function(){function r(r){return e[r]}function t(r,t){return"function"==typeof t&&(e[r]=t,!0)}var e={attachmentMenuLink:null,attachmentsZoneCreator:null,browseLink:null,temporaryAttachmentCreatorFactory:null,attachmentCreatorFactoryForBrowseLink:null,attachmentCreatorFactoryForAttachLink:null,temporaryBinaryUploadHandler:null,connectedTemporaryBinaryUploadHandler:null};return{getAttachmentMenuHandler:function(){var t=r("attachmentCreatorFactoryForAttachLink");return t&&t("attachment-menu")},registerAttachmentMenuHandlerFactory:function(r){return t("attachmentCreatorFactoryForAttachLink",r)},getBrowseLinkHandler:function(){var t=r("attachmentCreatorFactoryForBrowseLink");return t&&t("browse-link")},registerBrowseLinkHandlerFactory:function(r){return t("attachmentCreatorFactoryForBrowseLink",r)},getAttachmentsZoneCreator:function(){return r("attachmentsZoneCreator")},registerAttachmentsZoneCreator:function(r){return t("attachmentsZoneCreator",r)},registerTemporaryAttachmentCreatorFactory:function(r){return t("temporaryAttachmentCreatorFactory",r)},getTemporaryAttachmentCreator:function(t,e,n){var a=r("temporaryAttachmentCreatorFactory");return a&&a(t,e,n)},getTemporaryAttachmentZoneCreator:function(){return r("temporaryAttachmentsZoneCreator")},registerTemporaryAttachmentZoneCreator:function(r){return t("temporaryAttachmentsZoneCreator",r)},getTemporaryBinaryUploadHandler:function(){return r("temporaryBinaryUploadHandler")},registerTemporaryBinaryUploadHandler:function(r){return t("temporaryBinaryUploadHandler",r)},getConnectedTemporaryBinaryUploadHandler:function(){return r("connectedTemporaryBinaryUploadHandler")},registerConnectedTemporaryBinaryUploadHandler:function(r){return t("connectedTemporaryBinaryUploadHandler",r)},unregisterAllHandlers:function(){for(var r in e)e[r]=null}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone', location = 'jira-dnd-attachment-module/js/dropzones/AttachmentsDropZone.js' */
define("dndattachment/dropzones/AttachmentsDropZone",["dndattachment/dropzones/IssueDropZone","jira/util/events","dndattachment/util/events/types","jquery","dndattachment/util/DataTransfer","dndattachment/ctrlv/utility","jira/dialog/dialog","dndattachment/integration-register","dndattachment/upload/handler","jira/featureflags/feature-manager"],function(e,t,n,o,r,i,a,s,d,h){var c=function(){var e=parseUri(window.location);return e.protocol+"://"+e.authority}(),l=e.extend({eventGroup:"attachmentsdropzone",progressBarType:"dndattachment/progressbars/AttachmentsUploadProgressBar",init:function(){this._super.apply(this,arguments),this.attachFileUrl=contextPath+"/rest/jddap/1.0/attachment",t.bind(JIRA.Events.PANEL_REFRESHED,this.panelRefreshed.bind(this)),this.connectContainer()},connectContainer:function(){this.$containerNode=this.getContainerNode(),this.$dragoverDropzone=o(JIRA.Templates.DnDAttachmentPlugin.dropzone()),this.$dragoverBorder=this.$dragoverDropzone.find(".attachments-drop-zone__dragover-border"),this.$dragoverInfo=this.$dragoverDropzone.find(".attachments-drop-zone__dragover-info"),this.$dragoverDropzone.appendTo(this.$containerNode),this._connectDropzone(),this.$windowMask=o(JIRA.Templates.DnDAttachmentPlugin.windowDropzoneMask()),this.$body=o(document.body);var e=this.$body;window.__SPA__&&(e=o("#attachment-dropzone-mask-container"),e.length||(e=this.$body)),e.append(this.$windowMask),this.$body.on("dragenter",_.throttle(this.onBodyDragEnter.bind(this),200,{trailing:!1})),this.$body.on("dragleave",this.onBodyDragLeave.bind(this)),this.$windowMask.on("dragover dragenter",this.onWindowMaskDragEnter.bind(this)),this.$windowMask.on("dragleave",this.onWindowMaskDragLeave.bind(this)),this.$windowMask.on("drop",this.onWindowMaskDrop.bind(this)),this.$auiSidebar=o(".aui-sidebar-body"),this._disconnectListenersFromParentDropzone(),this.onContentAddedHandler=this.onContentAdded.bind(this),t.bind(JIRA.Events.NEW_CONTENT_ADDED,this.onContentAddedHandler),this.externalHandler=s.getBrowseLinkHandler()},_connectDropzone:function(){var e=s.getAttachmentsZoneCreator();this.onDragOverDropHandler=this.onDragOverDrop.bind(this),this.onDragLeaveHandler=this.onDragLeave.bind(this),this.$containerNode.on("dragover dragenter drop",this.onDragOverDropHandler),this.$containerNode.on("dragleave",this.onDragLeaveHandler),"function"==typeof e&&(this.externalZone=e(this.$containerNode[0]))},_disconnectListenersFromParentDropzone:function(){this.$dropTarget.off("dragover drop dragleave dragenter"),o(document).off("dragover dragenter")},disconnectContainer:function(){this.$dragoverDropzone.remove(),this.$windowMask.remove(),this.$body.removeClass("attachments-drop-zone__dragover"),this.$body.off("dragenter",this.onBodyDragEnter.bind(this)),this.$containerNode.off("dragenter dragover drop",this.onDragOverDropHandler),this.$containerNode.off("dragleave",this.onDragLeaveHandler),this.externalZone&&this.externalZone.deactivate(),t.unbind(JIRA.Events.NEW_CONTENT_ADDED,this.onContentAddedHandler),d.disconnectCurrentDropZone(this)},isAttached:function(){return o.contains(document.body,this.$node[0])},onContentAdded:function(){this.isAttached()||this.disconnectContainer()},getContainerNode:function(){var e=o(o(".issue-container")[0]);return"static"===e.css("position")&&e.css("position","relative"),e},addHandlerToBrowseLink:function(){this.fileButton.click(this.browseFilesAndUpload.bind(this))},canDoFullPageDrop:function(){return a.current?(JIRA.trace("jira.issue.dnd.dropnotallowed"),!1):(JIRA.trace("jira.issue.dnd.dropallowed"),!0)},onDragOverDrop:function(e){if(!this.isAttached())return void this.disconnectContainer();if(i.dragEventContainsFiles(e)&&this.canDoFullPageDrop()&&(e.preventDefault(),e.originalEvent&&(e.originalEvent.dataTransfer.dropEffect="copy"),JIRA.trace("jira.issue.dnd.dragover"),this.$body.addClass("attachments-drop-zone__dragover"),this.$body.addClass("attachments-drop-zone__window-dragover"),this.$containerNode.addClass("attachments-drop-zone__dragover-fade"),this._readjustDropzone(),this._repositionStickyInfoBox(),"dragenter"===e.type&&this.externalZone&&(d.isDefaultExecutor({})?this.externalZone.activate():this.externalZone.deactivate()),"drop"==e.type))if(this.removeAllDragoverClasses(this.$containerNode),o(document).trigger("dropHandled"),this.externalZone&&d.isDefaultExecutor({}))this.externalZone.drop();else{var t=new r(e.dataTransfer);t.getFiles().then(function(e){this.handleFilesReceived(e),this.queueEvent("fileDrop",{count:e.length})}.bind(this))}},onDragLeave:function(){this.removeAllDragoverClasses(this.$containerNode)},browseFilesAndUpload:function(e,t){return"function"==typeof this.externalHandler&&d.isDefaultExecutor({})?this.externalHandler.call(null,e,t||{}):this.browseLinkHandler.call(this,e),!0},_readjustDropzone:function(){if(0!==this.$auiSidebar.length){var e=this.$auiSidebar.offset().left+this.$auiSidebar.width();if(this.$dragoverBorder.parent().offset()){var t=this.$dragoverBorder.parent().offset().left;e>t?this.$dragoverBorder.css({left:e-t}):this.$dragoverBorder.css({left:0})}else this.$dragoverBorder.css({left:0})}},_repositionStickyInfoBox:function(){if(window.__SPA__){var e=this.$containerNode.scrollParent().scrollTop()+10;return void this.$dragoverInfo.css({top:e})}var t,e=this.$containerNode.scrollParent().scrollTop()+10,n=this.$containerNode.offset().top;t=this.$containerNode.scrollParent().offset()?this.$containerNode.scrollParent().offset().top:0;var o;o=0===t?e>=n?e-n:10:e,this.$dragoverInfo.css({top:o})},onBodyDragEnter:function(e){i.dragEventContainsFiles(e)&&(this._readjustDropzone(),this.$body.addClass("attachments-drop-zone__window-dragover"))},onBodyDragLeave:function(){this.removeAllDragoverClasses()},onWindowMaskDragEnter:function(e){i.dragEventContainsFiles(e)&&(e.preventDefault(),e.originalEvent&&(e.originalEvent.dataTransfer.dropEffect="none"),this._readjustDropzone(),this.$body.addClass("attachments-drop-zone__window-dragover"),this.canDoFullPageDrop()&&(this.$body.addClass("attachments-drop-zone__dragover"),this._repositionStickyInfoBox()))},onWindowMaskDragLeave:function(){this.removeAllDragoverClasses()},onWindowMaskDrop:function(e){e.preventDefault(),this.removeAllDragoverClasses()},removeAllDragoverClasses:function(e){e&&e.removeClass("attachments-drop-zone__dragover-fade"),this.$body.removeClass("attachments-drop-zone__window-dragover"),this.$body.removeClass("attachments-drop-zone__dragover")},handleFilesReceived:function(e){var r=o("textarea.wiki-textfield:visible:focus"),i=r.length>0;t.trigger(n.ATTACHMENT_FOR_PAGE_RECEIVED,{files:e,isWikiTextfieldFocused:i,wikiTextfield:r[0]})},render:function(){return this.$node.parents("#attachmentmodule").addClass("attachments-drop-zone-parent"),this.$listNode=this.$node.siblings("#file_attachments, #attachment_thumbnails"),this._super.apply(this,arguments)},panelRefreshed:function(e,t,n,r){if(r.find(this.$node).is("*")){this.getViewMode();n=n.find(">.mod-content"),n.addClass("issue-drop-zone"),this.$node.prependTo(n),this.render();var i=r.find(".attachments-upload-progress-bar");i.data("viewMode",this.getViewMode()).each(function(e,t){var n=o(t).prop("_instance");void 0!=n&&n.render()}),i.each(function(e,t){this.insertProgressBar(o(t))}.bind(this)),this._disconnectListenersFromParentDropzone()}},getViewMode:function(){return"file_attachments"==this.$listNode.attr("id")?"list":"gallery"},getSortBy:function(){return this.$listNode.data("sort-key")},getSortOrder:function(){return this.$listNode.data("sort-order")},getSortComparator:function(){var e="asc"==this.getSortOrder()?1:-1,t="fileName"==this.getSortBy()?function(e){return e.find(".attachment-title").text()}:function(e){return new Date(e.find("*[datetime]").attr("datetime")).getTime()},n="fileName"==this.getSortBy()&&String.prototype.localeCompare?function(e,t){return e.localeCompare(t)}:function(e,t){return e<t?-1:e>t?1:0};return function(o,r){var i=t(o),a=t(r);return e*n(i,a)}},commitUpload:function(e,t){var n=new o.Deferred;return this.attachFile(e,t).then(n.resolve.bind(n),n.reject.bind(n)),n.then(function(n){var r=o(JIRA.Templates.ViewIssue.renderAttachments({baseurl:contextPath,fullBaseUrl:c+contextPath,issue:{id:t},attachments:n,viewMode:this.getViewMode()})).find(".attachment-content");n.forEach(function(t,n){var o=r[n],i=this.$listNode.find('>*[data-file-id="'+e[n]+'"]');i.replaceWith(o)},this),JIRA.trigger(JIRA.Events.NEW_CONTENT_ADDED,[this.$listNode,JIRA.CONTENT_ADDED_REASON.panelRefreshed]),JIRA.trace("jira.issue.dnd.attached")}.bind(this)),this.queueTask(n),this.queueEvent("commitUpload",{count:e.length}),n},configureUploadProgressBar:function(e){this._super.apply(this,arguments),e.data("viewMode",this.getViewMode())},placeUploadProgressBar:function(e,t){return t.$node.find("time.livestamp").attr("datetime",(new Date).toISOString()).livestamp(),this.insertProgressBar(e),t.bind("onDestroy",function(){var t=e.parents(".item-attachments");0==t.find(".attachments-upload-progress-bar, .attachment-content").length&&t.remove()}),e},insertProgressBar:function(e){var t=this.getSortComparator(),n=this.$listNode.children().toArray(),r=function(n){if(t(e,o(n))<1)return e.insertBefore(n),!0};n.some(r)||e.appendTo(this.$listNode)}});return l});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone', location = 'jira-dnd-attachment-module/js/progressbars/UploadProgressBar.js' */
define("dndattachment/progressbars/UploadProgressBar",["jquery","dndattachment/Parser","dndattachment/JIRA","dndattachment/aui","dndattachment/i18n","dndattachment/TemporaryAttachments","dndattachment/util/Configuration","dndattachment/util/FileSizeUtil"],function(t,e,i,s,n,o,r,a){function d(t,e){s.trigger("analytics",{name:"issue.dnd.attachment.uploadprogress."+t,data:e||{}})}var h=["aui-iconfont-error","aui-iconfont-success","aui-iconfont-close-dialog"],u=r.getWRM("thumbnail-mime-types").split(","),l=Class.extend({autoDestroy:!0,init:function(e){this.result=new t.Deferred,this.$node=t(e),this.file=this.$node.data("file"),this.uploadSize=this.$node.data("upload-size"),this.formToken=this.$node.data("form-token"),this.$node.prop("_instance",this),this.render()},render:function(){this.$node.html(i.Templates.DnDAttachmentPlugin.UploadProgressBar({isImageType:this.isImageType()})),this.afterRender()},afterRender:function(){this.file&&(this.setFileName(this.file.name),this.setFileSize(this.file.size),this.loadThumbnail(this.file)),this.progress&&this.updateProgress(),this.connectListeners()},connectListeners:function(){this.getControlNode().on("click",function(){this.destroy(),d("buttonClick")}.bind(this))},destroy:function(){this.destroyed||(this.upload&&this.upload.abort(),this.setAutoDestroy(!1),this.trigger("onBeforeDestroy"),this.destroyed=!0,this.$node.animate({opacity:0},{duration:250,complete:function(){this.$node.slideUp(250,function(){this.objectURL&&window.URL.revokeObjectURL(this.objectURL),this.$node.remove(),i.trace("jira.issue.dnd.progressbar.removed"),this.trigger("onDestroy")}.bind(this))}.bind(this)}))},isDestroyed:function(){return!!this.destroyed},setAutoDestroy:function(t){this.autoDestroy=t},getAutoDestroy:function(){return this.autoDestroy},getUploadParams:function(t){var e={filename:t.name,size:t.size,atl_token:atl_token(),formToken:this.formToken};return _.extend(e,this.getEntityParams()),e},getEntityParams:function(){var t={},e=i.Issue.getIssueId(),s=this.$node.parents("form").find('*[name="pid"]').attr("value");return s?t.projectId=s:e&&(t.issueId=e),t},setFile:function(t){this.file=t},setFileID:function(t){this.fileID=t,this.$node.attr("data-file-id",t)},getFileID:function(){return this.fileID},setFileName:function(t){this.$node.find(".upload-progress-bar__file-name").text(t)},getFileName:function(){return this.$node.find(".upload-progress-bar__file-name").text()},setFileSize:function(t){t>=0&&this.$node.find(".upload-progress-bar__file-size").html(a.format(t))},uploadFile:function(t,e){this.setFile(t);var r=this.result;if(this.monitorUpload(r),r.fail(this.reportError.bind(this)),t.size>e)return r.reject(n("dnd.attachment.file.is.too.large").replace("{0}",this.uploadSize),!0),r;for(var a=["\\","/",'"',":","?","*","<","|",">"],d=0;d<a.length;d++){var h=a[d];if(_.contains(t.name,h))return r.reject(s.format("{0} contains the invalid character \'\'{1}\'\'. Please rename the file and try again.",t.name,h),!0),r}return this.upload=new s.InlineAttach.AjaxUpload({file:t,params:this.getUploadParams(t),url:s.InlineAttach.AjaxPresenter.DEFAULT_URL,progress:function(e){r.notify(e/t.size)},success:function(e,i){void 0!==e.id&&void 0!==e.name?(r.notify(1),r.resolve(e,i,t)):r.reject(e,i,t)},error:function(t,e){r.reject(n("dnd.attachment.internal.server.error"),e)},abort:function(){r.reject(n("dnd.attachment.upload.aborted"),"abort")}}),this.checkSession().then(function(){this.upload.upload()}.bind(this)).fail(function(){r.reject(n("dnd.attachment.unauthorized"),401)}),this.$node.find(".upload-progress-bar__control>*").on("click",function(){this.upload.abort(),r.reject()}.bind(this)),r.done(function(e){o.putAttachment(e.id,t),this.setFileID(e.id),i.trace("jira.issue.dnd.uploaded")}.bind(this)),r},monitorUpload:function(t){t.progress(this.setProgress.bind(this)),t.done(this.setFinished.bind(this)),t.fail(this.setFailed.bind(this))},setProgress:function(t){this.progress=t,this.updateProgress()},updateProgress:function(){var t=this.$node.find(".upload-progress-bar__progress-bar");t.toggleClass("UploadProgressBar_progressUnknown",this.progress===!1),this.progress>=0&&t.find(".upload-progress-bar__bar").css("width",100*this.progress+"%")},setFinished:function(){this.$node.addClass("upload-progress-bar__upload-finished"),this.$node.find(".upload-progress-bar__control button .aui-icon").addClass("aui-iconfont-success").removeClass("aui-iconfont-close-dialog"),this.finished=!0,this.trigger("onFinished")},setFailed:function(){this.$node.addClass("UploadProgressBar_uploadFailed"),this.finished=!0,this.failed=!0,this.trigger("onFailed")},isFinished:function(){return!!this.finished},isFailed:function(){return!!this.failed},isSuccessful:function(){return this.isFinished()&&!this.isFailed()},isImageType:function(){return this.file&&this.file.type&&_.contains(u,this.file.type)},getThumbnailSrc:function(t){return this.isImageType()&&(this.objectURL=window.URL.createObjectURL(t)),this.objectURL||i.Templates.ViewIssue.matchFileIconUrl({baseurl:s.contextPath(),mimetype:t.type})},getThumbnailNode:function(){return this.$node.find(".upload-progress-bar__thumbnail")},getControlNode:function(){return this.$node.find(".upload-progress-bar__control button")},loadThumbnail:function(e){var i=this.getThumbnailSrc(e),s=this.getThumbnailNode();s.addClass(this.objectURL?"upload-progress-bar__thumbnail_image":"upload-progress-bar__thumbnail_icon");var n=t("<img/>").attr("src",i);return n.appendTo(s)},reportError:function(t,e){"object"==typeof t&&t.errorMessage&&(t=t.errorMessage),this.$node.addClass("upload-progress-bar__upload-error"),this.$node.removeClass("upload-progress-bar__upload-finished"),this.$node.find(".upload-progress-bar__bar").css("width","100%"),this.showErrorMessage(t,e),this.setAutoDestroy(!1),d("error",{message:t})},showErrorMessage:function(t){this.$node.find(".upload-progress-bar__error-message").text(t)},setIcon:function(t){var e=this.$node.find(".upload-progress-bar__control button .aui-icon");if(!h.some(function(i){return e.toggleClass(i,i==t),i==t}))throw"Unknown icon"},checkSession:function(){var e=new t.Deferred;return s.$.ajax({type:"GET",url:contextPath+"/rest/auth/1/session",contentType:"application/json"}).done(function(){e.resolve()}).fail(function(){this.checkPermissions().done(function(t){e.resolve()}).fail(function(){e.reject()})}.bind(this)),e},checkPermissions:function(){var e=new t.Deferred;return s.$.ajax({type:"GET",url:contextPath+"/rest/api/2/mypermissions",contentType:"application/json",data:t.extend({},this.getEntityParams(),{permissions:"CREATE_ATTACHMENTS"})}).done(function(t){t.permissions.CREATE_ATTACHMENTS.havePermission?e.resolve():e.reject()}).fail(function(){e.reject()}),e}});return l});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone', location = 'jira-dnd-attachment-module/js/progressbars/AttachmentsUploadProgressBar.js' */
define("dndattachment/progressbars/AttachmentsUploadProgressBar",["dndattachment/progressbars/UploadProgressBar","jira/flag","jquery","dndattachment/i18n"],function(e,t,a,n){return e.extend({render:function(){this.$node.html(JIRA.Templates.DnDAttachmentPlugin.AttachmentsUploadProgressBar({isImageType:this.isImageType()})).removeClass("upload-progress-bar").addClass("attachments-upload-progress-bar"),this.$node.toggleClass("attachment-content",!this.isImageType()),this.afterRender()},loadThumbnail:function(t){return"gallery"==this.$node.data("viewMode")?e.prototype.isImageType.call(this)?this._super.apply(this,arguments):a(JIRA.Templates.ViewIssue.renderThumbnailIcon({mimetype:t.type})).appendTo(this.getThumbnailNode()):a(JIRA.Templates.ViewIssue.renderAttachmentIcon({mimetype:t.type})).appendTo(this.getThumbnailNode())},showErrorMessage:function(e,s){if("abort"!=s){var o=t.showErrorMsg(n("dnd.attachment.not.uploaded")(this.getFileName()),AJS.escapeHTML(e));a(o).on("aui-flag-close",function(){this.destroy()}.bind(this)),this.bind("onDestroy",function(){o.close()})}},isImageType:function(){return"gallery"==this.$node.data("viewMode")},getControlNode:function(){return this.$node.find(".upload-progress-bar__upload-control span")},getAutoDestroy:function(){return!1}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone', location = 'jira-dnd-attachment-module/templates/IssueDropZone.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.DnDAttachmentPlugin&&(JIRA.Templates.DnDAttachmentPlugin={}),JIRA.Templates.DnDAttachmentPlugin.IssueDropZone=function(e,t){return'<div class="issue-drop-zone__target"></div><span class="issue-drop-zone__text"><span class="issue-drop-zone__drop-icon"> </span> '+soy.$$escapeHtml("Drop files to attach, or")+' <button type="button" class="issue-drop-zone__button"> '+soy.$$escapeHtml("browse")+'.</button><input class="issue-drop-zone__file ignore-inline-attach" type="file" multiple /></span>'},JIRA.Templates.DnDAttachmentPlugin.AttachmentsDropZone=function(e,t){return'<div duiType="dndattachment/dropzones/AttachmentsDropZone" class="issue-drop-zone" data-upload-limit="'+soy.$$escapeHtml(e.jiraAttachmentSize)+'" data-upload-size="'+soy.$$escapeHtml(e.uploadLimit)+'" data-upload-size="'+soy.$$escapeHtml(e.uploadLimit)+'"></div>'};;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone', location = 'jira-dnd-attachment-module/templates/AttachmentsDropZone.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.DnDAttachmentPlugin&&(JIRA.Templates.DnDAttachmentPlugin={}),JIRA.Templates.DnDAttachmentPlugin.dropzoneMask=function(n,e){return'<span><div class="attachments-drop-zone__dragover-mask"></div></span>'},JIRA.Templates.DnDAttachmentPlugin.dropzone=function(n,e){return'<span><div class="attachments-drop-zone__dragover-border"><div class="attachments-drop-zone__dragover-info"><p>'+soy.$$escapeHtml("Drop files to attach them to the issue")+"</p></div></div></span>"},JIRA.Templates.DnDAttachmentPlugin.windowDropzoneMask=function(n,e){return'<span><div class="attachments-drop-zone__window-dragover-mask"></div></span>'};;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone', location = 'jira-dnd-attachment-module/templates/UploadProgressBar.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.DnDAttachmentPlugin&&(JIRA.Templates.DnDAttachmentPlugin={}),JIRA.Templates.DnDAttachmentPlugin.UploadProgressBar=function(a,s){return'<div class="upload-progress-bar__thumbnail"> </div><span class="upload-progress-bar__file-name"> </span><span class="upload-progress-bar__file-size"> </span><div class="upload-progress-bar__progress-bar"><span class="upload-progress-bar__bar"> </span></div><div class="upload-progress-bar__control"><button type="button" class="aui-button aui-button-subtle aui-button-compact"><span class="aui-icon aui-icon-small aui-iconfont-close-dialog">'+soy.$$escapeHtml("Cancel upload")+'</span></button></div><div class="upload-progress-bar__error-message"></div>'},JIRA.Templates.DnDAttachmentPlugin.AttachmentsUploadProgressBar=function(a,s){return""+(a.isImageType?'<div class="upload-progress-bar__thumbnail"><div class="upload-progress-bar__progress-bar"><span class="upload-progress-bar__bar"> </span></div></div><dl><dt><span class="upload-progress-bar__file-name"> </span></dt><dd class="upload-progress-bar__file-size"> </dd><dd class="upload-progress-bar__upload-control"><span>'+soy.$$escapeHtml("Cancel")+'</span></dd><dd class="upload-progress-bar__error-message"></dd><dd class="attachment-date"><time class="livestamp" /></dd></dl>':'<div class="attachment-thumb upload-progress-bar__thumbnail"></div><dl><dt class="attachment-title upload-progress-bar__file-name"></dt><dd class="upload-progress-bar__upload-control"><span>'+soy.$$escapeHtml("Cancel")+'</span></dd><dd class="attachment-size"><span class="upload-progress-bar__file-size"> </span><div class="upload-progress-bar__progress-bar"><span class="upload-progress-bar__bar"> </span></div></dd><dd class="attachment-author"> </dd><dd class="attachment-date"><time class="livestamp" /></dd></dl>')},JIRA.Templates.DnDAttachmentPlugin.TempUploadProgressBar=function(a,s){return'<div class="temp-upload-progress-bar__parent-container temp-upload-progress-bar__uploading"><div class="temp-upload-progress-bar__container"><div class="upload-progress-bar__thumbnail"></div><div class="upload-progress-bar__progress-bar"><span class="upload-progress-bar__bar"> </span></div><div class="upload-progress-bar__error"><div class="upload-progress-bar__error-indicator"><span class="aui-icon aui-icon-large aui-iconfont-error">'+soy.$$escapeHtml("Upload error")+'</span></div><div class="upload-progress-bar__error-text">'+soy.$$escapeHtml("Upload failed")+'</div></div><div class="upload-progress-bar__upload-mask"></div><div class="upload-progress-bar__control"><button type="button" class="aui-button aui-button-subtle aui-button-compact"><span class="aui-icon aui-icon-small aui-iconfont-close-dialog"><div class="button-text" aria-label="'+soy.$$escapeHtml("Cancel upload")+' "></div><div class="file-name"></div><div class="error-message"></div></span></button></div><div class="upload-progress-bar__progress-bar"><span class="upload-progress-bar__bar"> </span></div></div><div class="upload-progress-bar_file-name-container"><span class="upload-progress-bar__file-name"></span></div></div>'},JIRA.Templates.DnDAttachmentPlugin.SuccessMessageLink=function(a,s){return'<a href="'+soy.$$escapeHtml(a.issueLink)+'">'+soy.$$escapeHtml(a.issueKey)+" - "+soy.$$escapeHtml(a.issueSummary)+"</a>"};;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'jira-dnd-attachment-module/js/ctrlv/path.js' */
define("dndattachment/ctrlv/path",["exports"],function(t){"use strict";var n=function(t){return t.split(/\//).pop()};t.basename=n,t.dirname=function(t){var e=n(t);return t.substring(0,t.length-e.length)}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'jira-dnd-attachment-module/templates/soy/attach-screenshot-form.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.Html5Screenshot&&(JIRA.Templates.Html5Screenshot={}),JIRA.Templates.Html5Screenshot.attachScreenshotForm=function(e,t){return'<h2 class="dialog-title">'+soy.$$escapeHtml("Attach Screenshot")+'</h2><form action="ShowAttachScreenshotFormAction.jspa" class="aui" method="post" id="attach-screenshot-form"><input type="hidden" name="id" value="'+soy.$$escapeHtml(e.id)+'"/><input type="hidden" name="projectId" value="'+soy.$$escapeHtml(e.projectId)+'"/><input type="hidden" name="atl_token" value="'+soy.$$escapeHtml(e.atlToken)+'"><input type="hidden" name="formToken" value="'+soy.$$escapeHtml(e.formToken)+'"><input type="hidden" name="filetoconvert" value=""><div class="attach-screenshot-padding"><div class="attach-screenshot-container"><div id="attach-screenshot-inner-container"><div class="mod-content"><ul class="item-details"><li><dl><dt>'+soy.$$escapeHtml("Take a screenshot:")+"</dt>"+("pc"==e.userPlatform?"<dd>"+soy.$$filterNoAutoescape("\u003ckbd\u003ePrtScn\u003c/kbd\u003e")+"</dd>":"<dd>"+soy.$$filterNoAutoescape("\u003ckbd\u003e&#8963; Ctrl\u003c/kbd\u003e + \u003ckbd\u003e&#8984; Cmd\u003c/kbd\u003e + \u003ckbd\u003e&#8679; Shift\u003c/kbd\u003e + \u003ckbd\u003e3\u003c/kbd\u003e")+"</dd>")+"</dl></li><li><dl><dt>"+soy.$$escapeHtml("Paste the image:")+"</dt>"+("pc"==e.userPlatform?"<dd>"+soy.$$filterNoAutoescape("\u003ckbd\u003eCtrl\u003c/kbd\u003e + \u003ckbd\u003ev\u003c/kbd\u003e")+"</dd>":"<dd>"+soy.$$filterNoAutoescape("\u003ckbd\u003e&#8984; Cmd\u003c/kbd\u003e + \u003ckbd\u003ev\u003c/kbd\u003e")+"</dd>")+'</dl></li></ul></div><input type="text" id="attach-screenshot-fake-input"><div class="attach-screenshot-padding attach-screenshot-padding-inner"><div id="attach-screenshot-image-container" class="attach-screenshot-image-container"><div class="attach-screenshot-placeholder"><div class="mod-content"><ul class="item-details"><li><dl><dt id="attach-screenshot-placeholder-message">'+soy.$$escapeHtml("Your image will be pasted here")+"</dt></dl></li></ul></div></div></div></div><div id='attach-max-size' class=\"hidden\">"+soy.$$escapeHtml(e.maxSize)+"</div></div></div></div><fieldset><div><legend><span>"+soy.$$escapeHtml("Attach Screenshot")+'</span></legend><div id="attach-screenshot-filename-group" class="field-group"><div id="attach-screenshot-progress-container"></div><label for="attachscreenshotname">'+soy.$$escapeHtml("File name")+' <span class="aui-icon icon-required">'+soy.$$escapeHtml("Required")+'</span></label><input class="text" type="text" id="attachscreenshotname" name="attachscreenshotname" title="File Name" value="'+soy.$$escapeHtml(e.nextScreenshotName)+'"><div class="description">'+soy.$$escapeHtml("A file name to be used as attached image name")+'</div></div></div></fieldset><div class="buttons-container form-footer"><div class="buttons"><button class="aui-button aui-button-primary" id="attach-screenshot-html5-upload">'+soy.$$escapeHtml("Upload")+'</button><a href="#" class="cancel">'+soy.$$escapeHtml("Cancel")+"</a></div></div></form>"};;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'jira-dnd-attachment-module/js/ctrlv/html5.js' */
define("dndattachment/ctrlv/html5",["jquery","underscore","dndattachment/integration-register","dndattachment/ctrlv/base64decode","dndattachment/ctrlv/utility","jira/dialog/dialog","jira/dialog/dialog-register","jira/ajs/ajax/smart-ajax","jira/attachment/inline-attach","dndattachment/ctrlv/tracking","exports"],function(e,t,n,i,r,a,o,s,l,c,d){"use strict";d.getFileFromEvent=function(n){var i=new e.Deferred;return r.isImagePasteEvent(n)?i.resolve(t(n.clipboardData.items).filter(function(e){return e.type.indexOf("image")!==-1}).map(function(e){return e.getAsFile()})[0]||t(n.clipboardData.files).filter(function(e){return e.type.indexOf("image")!==-1})[0]):i.reject(),i.promise()},d.REQUEST_TIMEOUT_MILLIS=3e5,d.screenshotFileUpload={},d.screenshotFileUploadUri=null,d.$document=void 0,d.$window=void 0,d.$container=void 0,d.$fakeInput=void 0,d.uploadError=!1,d.uploadErrorMsg="",d.progressView={hidden:!1,progress:0,old:0,progressBarContainer:void 0,progressEl:void 0,container:void 0,options:void 0,staticProgress:void 0,initProgress:function(){this.container=this.buildContainer(),this.progressEl=this.buildProgress(),this.container.append(this.progressEl),this.options={showPercentage:!1,height:"5px"},this.progressBarContainer=e("#attach-screenshot-progress-container"),this.progressBarContainer.empty(),this.progressBarContainer.append(this.container),this.staticProgress=this.container,this.hidden=!0},finish:function(){this.value(100)},progressHandler:function(e){var t=Math.round(100*e.loaded/e.total);this.value(t)},value:function(e){e>100?e=100:e<0&&(e=0),this.hidden&&(this.progressEl.show(),this.hidden=!1),this.old!==e&&(this.progressEl.progressBar(e,this.options),e>=100&&this.progressEl.fadeOut(),this.old=e)},buildContainer:function(){return e("<div>").addClass("file-progress")},buildProgress:function(){return e("<div>").attr("id","attach-screenshot-upload-progress")}},d.dialogView={pasteCatcher:{},presenter:void 0,getMaxSize:function(){return e("#attach-max-size").text()},getFileSize:function(){return e.isPlainObject(this.presenter.screenshotFileUpload)&&t.isEmpty(this.presenter.screenshotFileUpload)?0:this.presenter.screenshotFileUpload.size||this.presenter.screenshotFileUpload.byteLength||this.presenter.screenshotFileUpload.length},cleanGeneralErrors:function(){e("#error-attach-screenshot-image").closest(".field-group").remove()},cleanFileErrors:function(){e("#error-attach-screenshot-filename").remove()},displayErrors:function(e){"compatibility"in e&&r.showErrorMsg("",e.compatibility),"fileName"in e&&r.showErrorMsg("",e.fileName),"fileUpload"in e&&r.showErrorMsg("",e.fileUpload)},appendBlobImage:function(e){var t=window.URL||window.webkitURL,n=t.createObjectURL(e);this.presenter.screenshotFileUpload=e,this.createImage(n)},createImage:function(n){var i=new Image;i.onload=function(){},i.src=n,this.presenter.screenshotToUpload=i;var r=e(i);r.addClass("attach-screenshot-pasted-image");var a=e("#attach-screenshot-image-container");a.empty(),a.append(r),this.presenter.$fakeInput.focus(),t.defer(function(){d.imageCreatedHandler()})},checkInput:function(){var e,t=d.dialogView.pasteCatcher.childNodes[0];return t&&("IMG"===t.tagName&&0===t.src.indexOf("data:")&&(e=t.src),d.dialogView.pasteCatcher.innerHTML=""),e||d.$fakeInput.focus(),e},onPaste:function(e){d.dialogView.cleanFileErrors(),d.dialogView.cleanGeneralErrors(),r.isImagePasteEvent(e)?d.getFileFromEvent(e).then(function(e){this.appendBlobImage(e)}.bind(this)):setTimeout(function(){var e=this.checkInput();e&&(d.screenshotFileUpload=i.decodeBase64DataUri(e),d.dialogView.createImage(e))}.bind(this),0)},getFakeInput:function(){return e("#attach-screenshot-fake-input")},getContainer:function(){return e("#attach-screenshot-image-container")},getIssueKey:function(){return e("input[name='id']").val()},getProjectId:function(){return e("input[name='projectId']").val()},getDocument:function(){return e(document)},getWindow:function(){return e(window)},getFileNameInput:function(){return e("#attachscreenshotname")},hasPngExtension:function(e){var t=/\.png$/i;return t.test(e)},setFileToConvert:function(t){e("input[name='filetoconvert']").val(t)},buildPasteCatcher:function(){if(document.getElementById("attach-screenshot-form")){var e=document.createElement("div");return e.setAttribute("contenteditable","true"),e.style.width=0,e.style.height=0,e.style.position="absolute",e.style.top="-5000px",document.getElementById("attach-screenshot-form").appendChild(e),e}},_getFormSubmits:function(){return e("#attach-screenshot-form").find("button.aui-button")},disable:function(){return this._getFormSubmits().attr("disabled","disabled"),this},enable:function(){return this._getFormSubmits().removeAttr("disabled"),this},isEnabled:function(){return this.isVisible()&&!this._getFormSubmits().attr("disabled")},isVisible:function(){return e("#attach-screenshot-form").length>0},initDialog:function(e){this.pasteCatcher={},this.presenter=e,this.pasteCatcher=this.buildPasteCatcher()}},d.initScreenshotPasteHandler=function(){var e=d.dialogView;d.screenshotFileUpload={},d.resetUploadErrors(),d.dialogView.initDialog(d),d.$document=e.getDocument(),d.$window=e.getWindow(),d.$container=e.getContainer(),d.$fakeInput=e.getFakeInput(),d.bindOnce(d.$container,"click",d.setFocusOnClickHandler),d.bindOnce(d.$fakeInput,"focus",d.showFocusOnFieldHandler),d.bindOnce(d.$fakeInput,"blur",d.hideFocusOnFieldHandler),d.bindOnce(d.$fakeInput,"keydown",d.keyDownHandler),r.browserIsSupported()?d.bindOnce(d.$window,"paste",d.pasteHandler):e.displayErrors({compatibility:AJS.format("Your browser is not supported. Consider using an alternative supported browser such as {0}Google Chrome{1} or {2}Firefox{3}.",'<a href="//www.google.com/chrome/browser/">',"</a>",'<a href="//www.mozilla.org/firefox/">',"</a>")})},d.resetUploadErrors=function(){d.uploadError=!1,d.uploadErrorMsg=void 0},d.setUploadError=function(e){d.uploadError=!0,d.uploadErrorMsg=e},d.bindOnce=function(e,t,n){e.unbind(t,n),e.bind(t,n)},d.showFocusOnFieldHandler=function(){d.$container.addClass("focus")},d.hideFocusOnFieldHandler=function(){d.$container.addClass("focus")},d.setFocusOnClickHandler=function(){d.$fakeInput.focus()},d.pasteHandler=function(e){d.dialogView.isEnabled()&&(e=r.normalizePasteEvent(e),d.dialogView.onPaste(e))},d.polyPasteHandler=function(e,t,n){d.dialogView.isEnabled()&&(d.screenshotFileUpload={length:-1},d.screenshotFileUploadUri=t,d.dialogView.createImage(n))},d.keyDownHandler=function(e){r.isKeyPasteEvent(e)&&d.dialogView.pasteCatcher.focus&&d.dialogView.pasteCatcher.focus()},d.imageCreatedHandler=function(){d.doAjaxUpload(this.dialogView.getIssueKey(),this.dialogView.getFileNameInput().val())},d.getMimeType=function(){return"image/png"},d.createData=function(){return d.screenshotFileUpload},d.clipboardDataIsEmpty=function(e){return null==window.clipboardData&&!(e&&e.clipboardData&&e.clipboardData.types&&e.clipboardData.types.length>0)},d.validateFileSize=function(e,t,n){var t=t||d.dialogView.getFileSize(),n=n||d.dialogView.getMaxSize();if(t>n){var i=l.Text.fileSize(n,t);e.fileUpload=AJS.format("Screenshot is too large to attach. Attachment is {0} but the largest allowed attachment is {1}.",i[1],i[0])}},d.validateFormData=function(n,i){var a={};return e.isPlainObject(n)&&t.isEmpty(n)&&(a.fileUpload="Please paste the image you wish to upload"),d.validateFileSize(a),d.uploadError&&(a.fileUpload="The error occurred during image upload - you will need to try the pasting image again. Sorry for the inconvenience."),""==i&&(a.fileName="You must specify a filename of the image."),r.isValidFileName(i)||(a.fileName="Filename must not contain the characters \'\\\', \'/\', \'\"\', \':\', \'?\', \'*\', \'\u003c\', \'|\', \'\u003e\', \'!\'"),a},d.doAjaxUpload=function(i,r){d.dialogView.disable();var a={};if(d.validateFileSize(a),!t.isEmpty(a))return d.dialogView.displayErrors(a),void d.dialogView.enable();var o=d.createData(),l=d.getMimeType(),c=e("#attach-screenshot-form").find("input[name='formToken']").attr("value"),u=encodeURIComponent(this.dialogView.getProjectId()),p=AJS.contextPath()+"/rest/internal/2/AttachTemporaryFile?size="+d.dialogView.getFileSize()+"&filename="+encodeURIComponent(r)+"&atl_token="+encodeURIComponent(atl_token())+"&issueId="+encodeURIComponent(this.dialogView.getIssueKey())+(c?"&formToken="+encodeURIComponent(c):"");d.resetUploadErrors();var h=n.getTemporaryBinaryUploadHandler(),g=h?h(u,o,r,encodeURIComponent(c)):d.executeAjaxUpload(o,p,l);g.progress(function(e){"init"==e&&d.progressView.initProgress()}).done(function(e){"string"==typeof e&&(e=JSON.parse(e)),d.dialogView.setFileToConvert(e.id)}).fail(function(e,t,n,i){var r;if("abort"===i.statusText)r="The call to the Jira server did not complete within the timeout period.  We are unsure of the result of this operation.";else if(i.hasData){var a=JSON.parse(i.data);r=a.errorMessage?a.errorMessage:s.buildSimpleErrorContent(i,{alert:!1})}d.setUploadError(r),d.dialogView.displayErrors({fileUpload:r})}).always(function(){var t=e.Deferred();t.resolve(),t.then(function(){d.dialogView.enable(),d.progressView.finish()})}).progress(function(e){"init"!=e&&d.progressView.progressHandler(e)})},d.executeAjaxUpload=function(t,n,i){c.trigger("attach.screenshot.html5.jira.upload");var r=e.Deferred(),a=s.makeRequest({type:"POST",url:n,contentType:i,processData:!1,data:t,timeout:d.REQUEST_TIMEOUT_MILLIS,success:r.resolve.bind(r),error:r.reject.bind(r),xhr:function(){var t=e.ajaxSettings.xhr();return r.notify("init"),t.upload.addEventListener("progress",r.notify.bind(r)),t}});return r.always(function(){e.ajaxSettings.xhr().removeEventListener("progress",d.progressView.progressHandler),e(o.attachScreenshotDialog).off("Dialog.hide",a.abort)}),e(o.attachScreenshotDialog).one("Dialog.hide",a.abort),r.promise()},d.show=function(){var n=new e.Deferred,i=e(".issueaction-attach-screenshot-html5");return null!=a.current?n.reject().promise():0==i.length?n.reject().promise():(t.defer(function(){i.trigger("click")}),e(document).on("dialogContentReady",function(e,t){t===o.attachScreenshotDialog&&d.dialogView.isEnabled()?n.resolve(t):n.reject()}),e(document).on("ajaxComplete.jira.screenshot.dialog",function(e,t,r){r.url.indexOf(i.attr("href"))>-1&&setTimeout(function(){n.isResolved()||n.reject()},1e3)}),n.always(function(){e(document).off("ajaxComplete.jira.screenshot.dialog")}),n.promise())}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'jira-dnd-attachment-module/js/ctrlv/issue-paste.js' */
define("dndattachment/ctrlv/issue-paste",["jquery","dndattachment/ctrlv/trace","dndattachment/ctrlv/tracking","dndattachment/ctrlv/utility","dndattachment/ctrlv/html5","dndattachment/ctrlv/base64decode","jira/dialog/dialog","jira/util/events","dndattachment/util/events/types","exports"],function(t,e,n,a,i,r,o,u,c,s){"use strict";function l(t,e){e.stateName=t;var n=function(){var n=e.apply(null,arguments);return n.stateName=t,n};return n.stateName=t,n}function d(t,e,n){return l(t,function(){var a=setTimeout(function(){f(_)},n),i=e.apply(null,arguments),r=function(t,e){var n=i(t,e);if(n)return clearTimeout(a),n};return r.stateName=t,r})}function f(t,e){if(f.eventQueue)return void f.eventQueue.push({type:t,object:e});for(f.eventQueue=[{type:t,object:e}];f.eventQueue.length>0;){var n=f.eventQueue.splice(0,1)[0],a=A(n.type,n.object);a&&(A=a)}delete f.eventQueue}var g=0,E=1,v=2,m=3,p=4,h=5,I=6,T=7,w=8,_=9,N=l("idle",function(){function i(e){if(!t(e.target).is(":input:not(.wiki-textfield, #summary)")&&!a.isContentEditable(e.target))return!0}return function(r,o){if(r==g&&a.isKeyPasteEvent(o)){if(a.browserIsNativePaste()||!i(o)||!a.browserIsSupported())return;return n.trigger("attach.screenshot.html5.catchClipboard"),new D(o)}if(r==E){if(a.isImagePasteEvent(o))return n.trigger("attach.screenshot.html5.handlePaste"),i(o)?(t(o.target).is(":input.wiki-textfield")&&o.preventDefault(),new L(o)):void e("jira/attach-images-plugin/pasteIgnored");e("jira/attach-images-plugin/pasteIgnoredNotImage")}}}),D=d("catchClipboard",function(e){function n(){o.remove()}var i=document.activeElement;e.selectionStart=e.target.selectionStart,e.selectionEnd=e.target.selectionEnd;var o=t('<div contenteditable="true" class="attach-screenshot-paste-catcher"></div>').appendTo("body");return o.focus(),t(i).is(":focusable:input,:aui-focusable:input")&&setTimeout(function(){i.focus()}),function(t,u){if(t==E){if(a.isImagePasteEvent(u))return n(),u.target=i,new L(u);if(a.isHtmlImagePasteEvent(u))return n(),u.target=i,new b(u);if(a.isTextPasteEvent(u)){n();var c=a.getTextPasteContent(u);return a.insertToInput(c,e.target,e.selectionStart,e.selectionEnd),u.preventDefault(),new N}}if(t==_){n();var s=o.find(">img");if(s.is(":only-child")){var l=s.attr("src");if(0===l.toLowerCase().indexOf("http"))return N();var d=r.decodeBase64DataUri(l),f=new Blob([d],{type:"image/png"});return new O(f,e)}var g=a.getTextContent(o[0]);return a.insertToInput(g,e.target,e.selectionStart,e.selectionEnd),N()}}}),b=l("imageLoading",function(t){var e=a.getHtmlImagePaste(t);return e?a.loadImage(e).then(function(t){f(p,t)},f.bind(null,h)):f(h),function(e,n){if(e==p){var i=a.convertImageToBlob(n);return i?new O(i,t):new N}if(e==_||e==h)return new N}}),L=d("fileLoading",function(t){return i.getFileFromEvent(t).done(function(t){f(v,t)}).fail(function(){f(m)}),function(e,n){return e==v?new O(n,t):e==m||e==_?new N:void 0}},1e3),O=l("attachImage",function(e,n){var i=n.target,r=a.generateFileName()+".png",o=a.convertBlobToImage(e,r);return u.trigger(c.ATTACHMENT_FOR_PAGE_RECEIVED,{files:[o],isWikiTextfieldFocused:a.isWikiTextfield(t(i)),wikiTextfield:i,isPaste:!0,successCallback:function(){f(I)}}),function(t,e){return new N}}),A=new N;s._getStateMap=function(){return{events:{EVENT_WINDOW_KEYDOWN:g,EVENT_WINDOW_PASTE:E,EVENT_FILE_LOADED:v,EVENT_FILE_LOAD_ERROR:m,EVENT_IMAGE_LOADED:p,EVENT_IMAGE_LOAD_ERROR:h,EVENT_DIALOG_LOADED:I,EVENT_DIALOG_CLOSED:T,EVENT_DIALOG_CANCELED:w,EVENT_TIMEOUT:_},states:{StateIdle:N,StateCatchClipboard:D,StateImageLoading:b,StateFileLoading:L,StateAttachImage:O}}},s.initIssuePaste=function(){t(window).on("keydown",function(t){f(g,t)}),t(window).on("paste",function(t){f(E,a.normalizePasteEvent(t))}),u.bind("Dialog.hide",function(t,e,n){n?f(w,e):f(T,e)})}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'jira-dnd-attachment-module/js/ctrlv/trace.js' */
define("dndattachment/ctrlv/trace",[],function(){"use strict";return function(){return JIRA.trace.apply(void 0,arguments)}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'jira-dnd-attachment-module/js/ctrlv/tracking.js' */
define("dndattachment/ctrlv/tracking",["exports"],function(t){"use strict";t.trigger=function(t,n){AJS.trigger("analytics",{name:t,data:n||{}})}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'jira-dnd-attachment-module/js/ctrlv/executor.js' */
define("dndattachment/ctrlv/executor",["jquery","jira/util/events","dndattachment/ctrlv/html5","dndattachment/upload/handler","exports"],function(e,t,n,r,a){a.register=function(){var a={name:"JIRA Ctrl+V attachment executor",weight:5,isValid:function(e,t){return!!t.isPaste},processFiles:function(r,a){var c=e.Deferred();return n.show().done(function(n){var a=e("#attach-screenshot-placeholder-message"),i=e.Event("paste");i.clipboardData={files:r},a.focus(),setTimeout(function(){a.trigger(i)}),t.bind("Dialog.hide",function(e,t,n){n?c.reject():c.resolve([t.find("#attachscreenshotname").val()+".png"])})}),c}};r.registerExecutor(a)}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'jira-dnd-attachment-module/js/ctrlv/initialize.js' */
define("dndattachment/ctrlv/initialize",["jquery","underscore","dndattachment/ctrlv/utility","dndattachment/ctrlv/html5","dndattachment/ctrlv/issue-paste","dndattachment/ctrlv/tracking","dndattachment/ctrlv/executor","jira/dialog/dialog-register","jira/dialog/form-dialog","exports"],function(t,e,n,i,a,r,o,c,s,d){"use strict";d.init=function(){var n=s.extend({options:{}});JIRA.ScreenshotDialog=n,a.initIssuePaste(),t(document).ready(function(){var a=t.Deferred();a.resolve(),c.attachScreenshotDialog=new n({id:"attach-screenshot-dialog",trigger:"a.issueaction-attach-screenshot-html5",isIssueDialog:!0,onContentRefresh:function(){this.$form.bind("before-submit",function(n){var a=i.validateFormData(i.screenshotFileUpload,t.trim(i.dialogView.getFileNameInput().val()));return 0==i.dialogView.getFileSize()?(n.preventDefault(),!1):!!e.isEmpty(a)||(i.dialogView.displayErrors(a),n.preventDefault(),!1)})},delayShowUntil:function(){return a}}),t(document).bind("dialogContentReady",function(t,e){e===c.attachScreenshotDialog&&null!==document.getElementById("attach-screenshot-form")&&(r.trigger("attach.screenshot.html5.contentReady"),i.initScreenshotPasteHandler())}),t(document).ready(function(){t(document).on("click","#attach-screenshot-html5",function(){r.trigger("attach.screenshot.html5.display")})})}),o.register()}}),require(["dndattachment/ctrlv/initialize","jquery"],function(t,e){"use strict";e(function(){t.init()})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-form-drop-zone', location = 'jira-dnd-attachment-module/js/dropzones/FormDropZone.js' */
define("dndattachment/dropzones/FormDropZone",["dndattachment/Parser","dndattachment/integration-register","dndattachment/upload/handler","dndattachment/dropzones/IssueDropZone","jquery","dndattachment/aui","dndattachment/i18n","dndattachment/JIRA","dndattachment/util/DataTransfer","dndattachment/ctrlv/utility","jira/util/events","underscore"],function(e,t,n,o,i,r,a,d,s,h,l,c){var p=o.extend({eventGroup:"formdropzone",init:function(){this._super.apply(this,arguments),this.progressBars=[],this.bind("uploadFinished",this.onUploadFinished.bind(this)),this.$containerNode=this.getContainerNode(),this.$formNode=this.$node.parents("form"),this.formToken=this.$formNode.find('input[name="formToken"]').attr("value"),this.projectId=this.$formNode.find("*[name=pid]").val(),this.$inputNode=i('<input name="dnd-dropzone" type="hidden" />').insertAfter(this.$node),this.$fieldNode=this.$node.parents(".field-group"),this.$fieldNode.addClass("long-field"),this.connectContainer()},onUploadFinished:function(e,t){var n=i('<input type="checkbox" name="filetoconvert"/>').addClass("upload-progress-bar__checkbox").attr("value",t.fileID).attr("id","filetoconvert-"+t.fileID).prop("checked",!0).insertBefore(t.$node);t.bind("onBeforeDestroy",function(){n.prop("checked",!1).prop("value",null)}),setTimeout(function(){t.$node.addClass("upload-progress-bar__upload-ready"),t.setIcon("aui-iconfont-close-dialog")},1e3),d.trace("jira.issue.dnd.uploadfinished")},commitUpload:function(e){return this.queueEvent("commitUpload",{count:e.length}),new i.Deferred},getContainerNode:function(){return this.$node.parents(".jira-dialog-content")},connectContainer:function(){if(this.$dragoverMask=i('<div class="attach-files-drop-zone__dragover-mask" />'),this.$dragoverMask.appendTo(this.$containerNode),this.$body=i(document.body),this.onDragOverDropHandler=this.onDragOverDrop.bind(this),this.onDragLeaveHandler=this.onDragLeave.bind(this),this.onBodyDragOverDropHandler=this.onBodyDragOverDrop.bind(this),this.$containerNode.on("dragenter dragover drop",this.onDragOverDropHandler),this.$containerNode.on("dragleave",this.onDragLeaveHandler),this.$body.on("dragover drop",this.onBodyDragOverDropHandler),this.onBeforeSubmitHandler=this.onBeforeSubmit.bind(this),this.$formNode.on("before-submit",this.onBeforeSubmitHandler),this.onContentAddedHandler=this.onContentAdded.bind(this),d.bind(d.Events.NEW_CONTENT_ADDED,this.onContentAddedHandler),l.bind("Dialog.hide",this.onDialogHide.bind(this)),r.dialog2&&r.dialog2.on("hide",this.onDialogHide.bind(this)),this.projectId){this.externalTemporaryAttachmentCreator=t.getTemporaryAttachmentCreator(this.projectId,this.formToken,this.$node[0]);var e=t.getConnectedTemporaryBinaryUploadHandler();"function"==typeof e&&(this.externalPasteUploadHandler=e(this.projectId,this.formToken,this.$node[0]));var n=t.getTemporaryAttachmentZoneCreator();if("function"==typeof n){var o={};this.externalZone=n(this.projectId,this.formToken,this.$node[0],this.$containerNode[0],{onFileUploadStarted:function(e){var t=new i.Deferred;o[e.id]=t,this.queueTask(t.promise())}.bind(this),onFileUploadFinished:function(e){o[e.id].resolve()}})}}},addHandlerToBrowseLink:function(){this.fileButton.click(this.browseFilesAndUpload.bind(this))},browseFilesAndUpload:function(e,t){if("function"==typeof this.externalTemporaryAttachmentCreator&&n.isDefaultExecutor({})){var o={},r=c.extend({},t,{onFileUploadStarted:function(e){var n=new i.Deferred;o[e.id]=n,this.queueTask(n.promise()),t&&t.onFileUploadStarted&&t.onFileUploadStarted.call(e,e)}.bind(this),onFileUploadFinished:function(e){o[e.id].resolve(),t&&t.onFileUploadFinished&&t.onFileUploadFinished.call(null)}});return this.externalTemporaryAttachmentCreator.call(null,e,r),!0}this.browseLinkHandler.call(this,e)},disconnectContainer:function(){this.externalZone&&this.externalZone.deactivate(),n.disconnectCurrentDropZone(this),this.$dragoverMask.remove(),this.$containerNode.removeClass("attach-files-drop-zone__dragover"),this.$containerNode.off("dragover drop",this.onDragOverDropHandler),this.$containerNode.off("dragleave",this.onDragLeaveHandler),this.$formNode.off("before-submit",this.onBeforeSubmitHandler),d.unbind(d.Events.NEW_CONTENT_ADDED,this.onContentAddedHandler),l.unbind("Dialog.hide",this.onDialogHide.bind(this)),r.dialog2&&r.dialog2.off("hide",this.onDialogHide.bind(this))},isAttached:function(){return i.contains(document.body,this.$node[0])},onContentAdded:function(){this.isAttached()||this.disconnectContainer()},onDialogHide:function(){this.$body.off("dragover drop",this.onBodyDragOverDropHandler)},onBodyDragOverDrop:function(e){e.preventDefault(),e.originalEvent&&(e.originalEvent.dataTransfer.dropEffect="none")},onDragOverDrop:function(e){return this.isAttached()?void(h.dragEventContainsFiles(e)&&(e.preventDefault(),e.stopPropagation(),e.originalEvent&&(e.originalEvent.dataTransfer.dropEffect="copy"),this.$containerNode.addClass("attach-files-drop-zone__dragover"),"dragenter"===e.type&&this.externalZone&&(n.isDefaultExecutor({})?this.externalZone.activate():this.externalZone.deactivate()),"drop"===e.type&&(this.$containerNode.removeClass("attach-files-drop-zone__dragover"),i(document).trigger("dropHandled"),e.isPasteEvent?this.externalPasteUploadHandler?this.externalPasteUploadHandler(e.dataTransfer.files[0]):this.doAjaxUpload(e.dataTransfer):this.externalZone&&n.isDefaultExecutor({})?this.externalZone.drop():this.doAjaxUpload(e.dataTransfer)))):void this.disconnectContainer()},doAjaxUpload:function(e){var t=new s(e);t.getFiles().then(function(e){this.handleFilesReceived(e),this.queueEvent("fileDrop",{count:e.length})}.bind(this))},onDragLeave:function(){this.$containerNode.removeClass("attach-files-drop-zone__dragover")},onBeforeSubmit:function(e){if(this.isDirty){e.preventDefault();var t={};t[this.$inputNode.attr("name")]=a("dnd.attachment.upload.in.progress"),d.applyErrorsToForm(this.$formNode,t),this.$formNode.find(".error").toArray().some(function(e){e.scrollIntoView()})}},markDirty:function(e){o.prototype.markDirty.apply(this,arguments),this.isDirty=e,d.trace(e?"jira.issue.dnd.isdirty":"jira.issue.dnd.isclear")},handleNewProgressBar:function(e){this.progressBars.push(e),e.bind("onBeforeDestroy",c.bind(function(){this.trigger("progressBarOnBeforeDestroy",e),this.progressBars=c.filter(this.progressBars,function(t){return t!==e}),0===this.progressBars.length&&this.trigger("allUploadsCancelled")},this)),e.bind("onDestroy",c.bind(function(){this.trigger("progressBarDestroyed")},this)),e.bind("onFinished",c.bind(function(){this.trigger("progressBarFinished")},this)),e.bind("onFailed",c.bind(function(){this.trigger("progressBarFailed")},this)),this.trigger("progressBarStarted")},filesStillUploading:function(){return c.filter(this.progressBars,function(e){return!e.isFinished()}).length>0},anyFilesFailed:function(){return c.filter(this.progressBars,function(e){return e.isFailed()}).length>0}});return p});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-create-issue-drop-zone', location = 'jira-dnd-attachment-module/js/dropzones/AttachFilesDropZone.js' */
define("dndattachment/dropzones/AttachFilesDropZone",["dndattachment/dropzones/FormDropZone","jquery"],function(e,n){var t=e.extend({eventGroup:"attachfiledropzone",init:function(){this._super.apply(this,arguments),this.bind("progressBarInserted",function(e,t){var r=new n.Deferred;this.queueTask(r),t.result.done(r.resolve.bind(r)),t.bind("onBeforeDestroy",function(){r.resolve()})}.bind(this))},checkMarkDirty:function(){this.pendingQueue.length<=1&&this.markDirty(!1)}});return t});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-create-issue-drop-zone', location = 'jira-dnd-attachment-module/js/dropzones/CreateIssueDropZone.js' */
define("dndattachment/dropzones/CreateIssueDropZone",["jquery","dndattachment/dropzones/FormDropZone"],function(e,n){var r=n.extend({eventGroup:"createissuedropzone",progressBarType:"dndattachment/progressbars/ProjectUploadProgressBar",getContainerNode:function(){return e(this.$node.parents(".jira-dialog-content")[0]||this.$node.parents("form#issue-create").parents(".aui-page-panel-content")[0])},handleNewProgressBar:function(e){this._super.apply(this,arguments),e.bind("onDestroy onFinished",_.bind(function(){if(!this.filesStillUploading()){var e={};e[this.$inputNode.attr("name")]="",JIRA.applyErrorsToForm(this.$formNode,e)}},this))}});return r});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-create-issue-drop-zone', location = 'jira-dnd-attachment-module/js/progressbars/ProjectUploadProgressBar.js' */
define("dndattachment/progressbars/ProjectUploadProgressBar",["jquery","dndattachment/progressbars/UploadProgressBar"],function(e,a){return a.extend({getProjectId:function(){return this.$node.parents("form").find("*[name=pid]").val()},getUploadParams:function(e){var t=a.prototype.getUploadParams.apply(this,arguments);return this.getProjectId()&&(t.projectId=this.getProjectId()),t},loadThumbnail:function(a){if(this.isImageType())return this._super.apply(this,arguments);var t=this.getThumbnailNode();t.removeClass("upload-progress-bar__thumbnail_image").addClass("upload-progress-bar__thumbnail_icon").addClass("upload-progress-bar__thumbnail_icon_aui");var r="aui-iconfont-devtools-file",s="File";"object"==typeof a&&(r=JIRA.Templates.ViewIssue.matchFileClass({mimetype:a.type}),s=JIRA.Templates.ViewIssue.matchFileIconAlt({mimetype:a.type}));var o=e('<span class="aui-icon aui-icon-large"/>').addClass(r).attr("title",s);return o.appendTo(t)}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-create-issue-drop-zone', location = 'jira-dnd-attachment-module/templates/AttachFilesDropZone.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.DnDAttachmentPlugin&&(JIRA.Templates.DnDAttachmentPlugin={}),JIRA.Templates.DnDAttachmentPlugin.AttachFilesDropZone=function(e,t){return'<div duiType="dndattachment/dropzones/AttachFilesDropZone" class="issue-drop-zone" data-upload-limit="'+soy.$$escapeHtml(e.jiraAttachmentSize)+'" data-upload-size="'+soy.$$escapeHtml(e.uploadLimit)+'"></div>'};;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-create-issue-drop-zone', location = 'jira-dnd-attachment-module/templates/CreateIssueDropZone.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.DnDAttachmentPlugin&&(JIRA.Templates.DnDAttachmentPlugin={}),JIRA.Templates.DnDAttachmentPlugin.CreateIssueDropZone=function(e,t){return'<div duiType="dndattachment/dropzones/CreateIssueDropZone" class="issue-drop-zone" data-upload-limit="'+soy.$$escapeHtml(e.jiraAttachmentSize)+'" data-upload-size="'+soy.$$escapeHtml(e.uploadLimit)+'"></div>'+(e.description?'<div class="description">'+soy.$$escapeHtml(e.description)+"</div>":"")};;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:drag-and-drop-attachment-javascript-init', location = 'jira-dnd-attachment-module/js/initIssueDropZone.js' */
require(["dndattachment/Parser","jquery","dndattachment/dropzones/IssueDropZone","dndattachment/upload/handler","dndattachment/upload/default/executor","dndattachment/aui","dndattachment/TemporaryAttachments","dndattachment/util/Configuration","dndattachment/util/FileSizeUtil"],function(t,e,n,a,o,i,r,d,s){function u(n,o){var i=n.find(".field-group.file-input-list");if(0!=i.size()&&!(i.find('*[duiType*="'+o+'"]').length>0)){var d=i.find("input[name=filetoconvert]:checked").map(function(t,n){return r.getAttachment(n.value,e(n).siblings("label").text())}).toArray(),u=i.find(".description:last-child").html();i.empty();var c=e(JIRA.Templates.DnDAttachmentPlugin[o]({uploadLimit:s.format(m),jiraAttachmentSize:m,description:u}));t.parse(c.appendTo(i)).then(function(t){null!=t&&(t.loadAttachments(d),a.setCurrentDropZone(t))})}}function c(t,n){var o=function(){u(t.$popupContent,n)};t.$popup&&t.$popup.is(":visible")?o():t.onContentReady(o),e(t).bind("Dialog.hide",function(){a.disconnectCurrentDropZone()})}function p(n){var o=n&&"attachmentmodule"==n.attr("id")&&e(".mod-content:not(.issue-drop-zone)",n);if(o&&o.size()>0){if(0==n.find("#add-attachments-link").length)return;o.addClass("issue-drop-zone");var i=e(JIRA.Templates.DnDAttachmentPlugin.AttachmentsDropZone({uploadLimit:s.format(m),jiraAttachmentSize:m}));t.parse(i.prependTo(o)).then(function(t){l&&l.disconnectContainer(),l=t,a.setAttachmentDropZone(t)})}}if(n.prototype.isSupportedBrowser()){var l,m=d.getWRM("upload-limit"),f=function(){JIRA.Dialogs.attachFile&&c(JIRA.Dialogs.attachFile,"AttachFilesDropZone");var t=["create-issue-dialog","create-subtask-dialog","edit-issue-dialog"],n=function(e,n,a){_.contains(t,n.attr("id"))&&c(a,"CreateIssueDropZone")};e(i).on("Dialog.show",n),JIRA.Dialog.current&&n(null,JIRA.Dialog.current.$popup,JIRA.Dialog.current),JIRA.bind(JIRA.Events.NEW_CONTENT_ADDED,function(t,e,n){u(e,"CreateIssueDropZone"),p(e)});var r=e("form#issue-create, form#issue-edit");r.size()>0&&u(r,"CreateIssueDropZone"),a.initialize(),a.registerExecutor(o),p(e("#attachmentmodule"));var d="issue-drop-zone-document__dragover";e(document).on("dragover dragenter",function(){e("body").addClass(d)}),e(document).on("dragleave drop dropHandled",function(){e("body").removeClass(d)})};e.isReady?f():i.$(f),e.event.props?e.event.props.push("dataTransfer"):e.event.addProp("dataTransfer")}});;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-internal-constants', location = 'node_modules/@atlassian/aui/src/js/aui/internal/constants.js' */
("undefined"===typeof window?global:window).__fa2d609d3773596cc2b702b68678a39c=function(){var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default={INPUT_SUFFIX:"-input"};return a=a["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-toggle', location = 'node_modules/@atlassian/aui/src/js/aui/toggle.js' */
("undefined"===typeof window?global:window).__1840a42d6d7e6ab244ecf3cf5bcc56cd=function(){function e(a){return a&&a.__esModule?a:{"default":a}}function c(a){return a._input||(a._input=a.querySelector("input"))}function f(a,b){c(b).removeAttribute(a)}function h(a,b,d){c(b).setAttribute(a,d.newValue)}function i(a){return{removed:f.bind(this,a),fallback:h.bind(this,a)}}"use strict";__e573296a636ce4ee054d5d3b9c8823fb;__8a6820c3d0bc5d638a8490d849a5b750;var g=__29fa312a51517f20df339a1900640e1d,d=e(__307d3e18fd611f85395c67cddeb1fe24),
k=e(__8339408c10b0a9052af9f3aad7b3a4e8),l=e(__f52b7059926ab2bdcd0aee12b4bc782b),m=e(__c1ce1f1e3e613f564fc234ff043570f1),n=__fa2d609d3773596cc2b702b68678a39c,j={removed:function(a){f.call(this,"form",a);a._formId=null},fallback:function(a,b){h.call(this,"form",a,b);a._formId=b.newValue}},o={removed:f.bind(void 0,"id"),fallback:function(a,b){c(a).setAttribute("id",""+b.newValue+n.INPUT_SUFFIX)}};(0,m.default)("aui-toggle",{template:(0,l.default)('<input type="checkbox" class="aui-toggle-input">','<span class="aui-toggle-view">',
'<span class="aui-toggle-tick aui-icon aui-icon-small aui-iconfont-success"></span>','<span class="aui-toggle-cross aui-icon aui-icon-small aui-iconfont-close-dialog"></span>',"</span>"),created:function(a){a._input=c(a);a._tick=a.querySelector(".aui-toggle-tick");a._cross=a.querySelector(".aui-toggle-cross");(0,d.default)(a._input).tooltip({title:function(){return this.checked?this.getAttribute("tooltip-on"):this.getAttribute("tooltip-off")},gravity:"s",hoverable:!1});a._input.addEventListener("keydown",
function(b){a.busy&&b.keyCode===AJS.keyCode.SPACE&&b.preventDefault()});-1<navigator.userAgent.toLowerCase().indexOf("firefox")&&a._input.addEventListener("click",function(b){a.busy&&b.preventDefault()})},attached:function(a){(0,k.default)(a).attributeExists("label")},events:{click:function(a,b){!a.disabled&&(!a.busy&&b.target!==a._input)&&a._input.click();(0,g.setBooleanAttribute)(a,"checked",c(a).checked)}},attributes:{id:o,checked:{removed:function(a){f.call(this,"checked",a);c(a).checked=!1},
fallback:function(a,b){h.call(this,"checked",a,b);c(a).checked=!0}},disabled:i("disabled"),form:j,name:i("name"),value:i("value"),"tooltip-on":{value:"On",fallback:function(a,b){c(a).setAttribute("tooltip-on",b.newValue||"On")}},"tooltip-off":{value:"Off",fallback:function(a,b){c(a).setAttribute("tooltip-off",b.newValue||"Off")}},label:{removed:function(a){c(a).removeAttribute("aria-label")},
fallback:function(a,b){c(a).setAttribute("aria-label",b.newValue)}}},prototype:{focus:function(){this._input.focus();return this},get checked(){return this._input.checked},set checked(a){this._input.checked=a;return(0,g.setBooleanAttribute)(this,"checked",a)},get disabled(){return this._input.disabled},set disabled(a){return(0,g.setBooleanAttribute)(this,"disabled",a)},get form(){return document.getElementById(this._formId)},set form(a){j.fallback.call(this,this,{newValue:a||null});return this.form},
get name(){return this._input.name},set name(a){this.setAttribute("name",a);return a},get value(){return this._input.value},set value(a){this.setAttribute("value",null===a?"":a);return a},get busy(){return"true"===this._input.getAttribute("aria-busy")},set busy(a){(0,g.setBooleanAttribute)(this,"busy",a);a?(this._input.setAttribute("aria-busy","true"),this._input.indeterminate=!0,this.checked?((0,d.default)(this._input).addClass("indeterminate-checked"),(0,d.default)(this._tick).spin({zIndex:null})):
(0,d.default)(this._cross).spin({zIndex:null,color:"black"})):((0,d.default)(this._input).removeClass("indeterminate-checked"),this._input.indeterminate=!1,this._input.removeAttribute("aria-busy"),(0,d.default)(this._cross).spinStop(),(0,d.default)(this._tick).spinStop());var b=!!a;this.id&&Array.prototype.forEach.call(document.querySelectorAll('aui-label[for="'+this.id+'"]'),function(a){a.disabled=b});return a}}});return{}}.call(this);;
;
/* module-key = 'com.atlassian.plugin.jslibs:brace-1.1.0-factory', location = 'factories/brace/1.1.0/brace-1.1.0-factory.js' */
(function(j){define("atlassian/libs/factories/brace-1.1.0",function(){return function(n,g){var c={_:n,Backbone:g};j.call(c);c=c.Brace.noConflict();c.VERSION="1.1.0";return c}})})(function(){var j=this,n=j.Brace,g,c=j._,i=j.Backbone,o=function(a){return c.isArray(a)?c.reduce(a,function(b,a){b[a]=null;return b},{}):a},m=function(a,b){if(!a||null==b||a===String&&c.isString(b)||a===Number&&c.isNumber(b)||a===Boolean&&c.isBoolean(b))return b;if("string"===typeof a||a instanceof String){if(typeof b!==""+
a)throw"The typeof "+b+" is "+typeof b+" but expected it to be "+a;return b}if(c.isArray(a)||a===Array){if(!c.has(b,"length")||b instanceof String||c.has({string:1,"function":1},typeof b)||b instanceof i.Collection)throw"Array type expected, but nonnull, non-Array value provided.";return a===Array||!a[0]?b:c.map(b,c.bind(m,null,a[0]))}if("function"!==typeof a)throw"Invalid expected type "+a+". Should be falsy, String, Array, Backbone.Collection constructor, or function.";return b instanceof a?b:p(a)?
new a(m([a.model],b)):new a(b)},p=function(a,b){return a&&(a.__super__ instanceof(b||i.Collection)||a.__super__===(b||i.Collection).prototype||a===(b||i.Collection))},x=function(a,b){var d={};c.each(a,function(a,c){if(!b[c]||q(a,b[c]))d[c]=a;else if(a&&!q(b[c],a))throw c+" has conflicted type descriptors.";});return d},q=function(a,b){return!b||b===a?!0:!a||"string"===typeof a?!1:a instanceof Array?b===Array||b instanceof Array&&q(a[0],b[0]):"function"!==typeof b?!1:p(b)?p(a,b):a.prototype instanceof
b};g=function(a){var b=a.extend(),d=a.extend;b.extend=function w(a,b){var h,g=c.extend({},a),i;a&&a.mixins&&(i=a.mixins,delete g.mixins);h=d.call(this,g,b);this.prototype.namedEvents&&f.Mixins.applyMixin(h,{namedEvents:this.prototype.namedEvents});this.prototype.namedAttributes&&f.Mixins.applyMixin(h,{namedAttributes:this.prototype.namedAttributes});this.prototype.ignoreUnknownAttributes&&f.Mixins.applyMixin(h,{ignoreUnknownAttributes:this.prototype.ignoreUnknownAttributes});i&&c.each(a.mixins,function(a){f.Mixins.applyMixin(h,
a)});h.prototype.namedEvents&&f.Mixins.applyMixin(h,f.EventsMixinCreator.create(h.prototype.namedEvents));h.prototype.namedAttributes&&(h.prototype.namedAttributes=o(h.prototype.namedAttributes),f.Mixins.applyMixin(h,f.AttributesMixinCreator.create(h.prototype.namedAttributes,h.prototype.idAttribute)));if(h.prototype.toJSON){var j=h.prototype.toJSON;h.prototype.toJSON=function(){var a;a=j.call(this);a=c.isObject(a)?c.reduce(a,function(a,b,d){b&&c.isFunction(b.toJSON)?a[d]=b.toJSON():c.isArray(b)&&
(a[d]=c.map(b,function(a){return a&&c.isFunction(a.toJSON)?a.toJSON():a}));return a},a):a;return a}}h.extend=w;return h};return b};var f={Mixins:{createMethodName:function(a,b){return a+b.charAt(0).toUpperCase()+b.substr(1)},applyMixin:function(a,b){c.forEach(c.keys(b),function(d){var e=a.prototype;if("initialize"===d){var f=e.initialize;e.initialize=function(){f&&f.apply(this,arguments);b.initialize.apply(this,arguments)}}else if("validate"===d){var g=e.validate;e.validate=function(){if(g){var a=
g.apply(this,arguments);if(a)return a}return b.validate.apply(this,arguments)}}else if("defaults"===d){var e=e.defaults||(e.defaults={}),d=b[d],k;for(k in d){if(e.hasOwnProperty(k))throw"Mixin error: class already has default '"+k+"' defined";e[k]=d[k]}}else if("namedAttributes"===d)k=o(e.namedAttributes)||{},d=o(b[d]),e.namedAttributes=c.extend(k,x(d,k));else if("namedEvents"===d){if(!c.isArray(b[d]))throw"Expects events member on mixin to be an array";e.namedEvents||(e.namedEvents=[]);e.namedEvents=
c.uniq(e.namedEvents.concat(b[d]))}else if("ignoreUnknownAttributes"===d)e.hasOwnProperty(d)||(e.ignoreUnknownAttributes=b[d]||!1);else{if(e.hasOwnProperty(d))throw"Mixin error: class already has property '"+d+"' defined";e[d]=b[d]}},this)}}};f.AttributesMixinCreator={create:function(a,b){var d={};a||(a={});c.has(a,"id")||(a.id=null);c.each(a,function(a,b){var c=f.Mixins.createMethodName("set",b);d[c]=function(a,c){return this.set(b,a,c)};c=f.Mixins.createMethodName("get",b);d[c]=function(){return this.get(b)}});
if("string"===typeof b&&"undefined"!==typeof a[b]&&"id"!==b){a.id=a[b];var e=f.Mixins.createMethodName("get",b),g=f.Mixins.createMethodName("set",b);d.getId=function(){return this[e]()};d.setId=function(a,b){return this[g](a,b)}}return d},ensureType:m};f.EventsMixinCreator={create:function(a){var b={};c.each(a,c.bind(function(a){var e=f.Mixins.createMethodName("on",a);b[e]=function(){return this.on.apply(this,[a].concat(c.toArray(arguments)))};e=f.Mixins.createMethodName("trigger",a);b[e]=function(){return this.trigger.apply(this,
[a].concat(c.toArray(arguments)))}},this));return b}};var l=f,r=i.Model,s=g(r),t=r.prototype,u=s.prototype,v=t.set;u.set=function(a,b,d){var e,f=this.namedAttributes;if(!f||null==a)return v.apply(this,arguments);c.isObject(a)?(e=c.clone(a),d=b):(e={},e[a]=b);for(var g in e)if(c.has(e,g)){if(!c.has(f,g)&&!this.ignoreUnknownAttributes)throw"Attribute '"+g+"' does not exist";e[g]=m(f[g],e[g])}return v.call(this,e,d)};var y=t.get;u.get=function(a){if(this.namedAttributes&&!c.has(this.namedAttributes,
a)&&!this.ignoreUnknownAttributes)throw"Attribute '"+a+"' does not exist";return y.apply(this,arguments)};var z=r.prototype.parse;s.prototype.parse=function(a,b){return c.pick(z(a,b),c.keys(this.namedAttributes))};l.Model=s;f.Collection=g(i.Collection);f.View=g(i.View);f.Router=g(i.Router);l=function(){this.initialize.apply(this,arguments)};c.extend(l.prototype,i.Events,{initialize:function(){}});l.extend=i.Model.extend;f.Evented=g(l);g=f;g.noConflict=function(){j.Brace=n;return this};j.Brace=g});;
;
/* module-key = 'com.atlassian.servicedesk.frontend-webpack-plugin:context-common-jsd-entry-chunk', location = 'common-jsd-entry-chunk.bundle.js' */
!function(e){function a(d){if(r[d])return r[d].exports;var t=r[d]={i:d,l:!1,exports:{}};return e[d].call(t.exports,t,t.exports,a),t.l=!0,t.exports}var d=window.sdJsonp;window.sdJsonp=function(r,s,c){for(var n,i,o,f=0,b=[];f<r.length;f++){if(i=r[f],t[i])b.push(t[i][0]);t[i]=0}for(n in s)if(Object.prototype.hasOwnProperty.call(s,n))e[n]=s[n];if(d)d(r,s,c);for(;b.length;)b.shift()();if(c)for(f=0;f<c.length;f++)o=a(a.s=c[f]);return o};var r={},t={54:0};a.e=function(e){function d(){c.onerror=c.onload=null,clearTimeout(n);var a=t[e];if(0!==a){if(a)a[1](new Error("Loading chunk "+e+" failed."));t[e]=void 0}}if(0===t[e])return Promise.resolve();if(t[e])return t[e][2];var r=new Promise(function(a,d){t[e]=[a,d]});t[e][2]=r;var s=document.getElementsByTagName("head")[0],c=document.createElement("script");if(c.type="text/javascript",c.charset="utf-8",c.async=!0,c.timeout=12e4,a.nc)c.setAttribute("nonce",a.nc);c.src=a.p+"context-"+({0:"sd.project.queues",1:"sd.queues.addon",2:"sd.agent.reports.custom",3:"sd.agent.reports.kb.requests.resolved",4:"sd.agent.reports.kb.requests.deflected",5:"sd.agent.organisation",6:"sd.agent.customers",7:"sd.admin.languagesupport",8:"sd.agent.reports.csat",9:"sd.admin.sla.custom",10:"sd.admin.sla",11:"sd.admin.kb.settings",12:"sd.admin.outgoing.email",13:"sd.agent.reports.workload",14:"sd.agent.reports.sla",15:"sd.project.reports",16:"sd.admin.widget.addon.installer",17:"sd.admin.widget",18:"sd.admin.addon",19:"rlabs.configure",20:"rlabs.insight.general",21:"rlabs.objectschema.manage",22:"jira.view.issue",23:"sd.project.admin",24:"sd.project.admin.registry",25:"sd.project.sidebar.content",26:"sd.project.view",27:"atl.dashboard",28:"sd.project.view.registry",29:"sd.project.legacy.issue.view",30:"jira.heritage.form.dialog",31:"atl.general",32:"sd.project.settings.request.forms.workflow.bridge",33:"jira.workflow.view",34:"jira.admin.conf",35:"sd.project.queues.legacy.issue.view.bridge",36:"jira.view.issue.asset.unlicensed",37:"jira.heritage.form.dialog.asset.unlicensed",38:"sd.project.report.legacy.issue.view.bridge",39:"sd.project.config.checker.bridge",40:"jira.create.issue",41:"sd.admin.config",42:"sd.admin.email.requests",43:"jira.admin",44:"jira.create.issue.asset.unlicensed",45:"atl.general.asset.unlicensed",46:"rlabs.page.registry",47:"sd.project.queues.bridge",48:"jql.field.renderer.bridge",49:"jira.heritage.sd.sidebar.integration",50:"jql.editor.bridge",51:"sd.agent.unlicensed",52:"asset.tracking.field.config",53:"sd.queues.edit"}[e]||e)+"-"+{0:"f0adb3fcea8519e7b9ce",1:"b4bb6ef305a500330e03",2:"a95c2bb0192086ec875b",3:"1d1b4b54d44c2d518685",4:"cb3a029a37695580b9a0",5:"7552bda20705f3bd4568",6:"b6c3ae3c52abf2e7c15c",7:"09ea96a76add9f2a4630",8:"972222b49ab5d5e0c2a3",9:"f8050abf424d9b3b3259",10:"03b2d71d4ca6f26b107a",11:"da7b10c7f293f49087ac",12:"b1fe7a6cab7af5c517ab",13:"4a3f8e8aad92add294a2",14:"04b5efebda054917780d",15:"2560c0fb9bddacb2a71a",16:"674bdd6beec33e38080d",17:"179cb736370a0b176cb4",18:"d89397cd2700540fa6de",19:"27b75f5e7440d216b535",20:"131363f4dff6194399aa",21:"6ed6ddcd897a0baf0cc9",22:"882f2ec40f1d5d021d60",23:"2e8b36edadd54eb4e611",24:"9bde75f5e24551c6cc99",25:"181855d4907fac93b1fe",26:"d59196d904da705c6805",27:"8c542008936ed5859f1e",28:"86ae757da3b155164a2b",29:"b61f87848b9fd3623905",30:"01d20b6d594217f53d09",31:"4ed38a15ae5ceb196da3",32:"45fff47f5f0d4aa295c7",33:"30ee653e8765cb66b7b6",34:"ccb34a176de3a4752e7e",35:"5f1ba86c229ad233ab5f",36:"f58f2aa402ca19f5ba2c",37:"cd9475c1f5fb6c7e7912",38:"45a0cf424d769c99e7e5",39:"9c54a67174082fd4f3a3",40:"9dd19329c4c41d6dc26f",41:"24b163a221b30f4ccdd0",42:"020369952e2ebb267e11",43:"b800bdaee5e97e7abec9",44:"130ede636039cd1bb0b9",45:"78e8879b3713052c6997",46:"b49a62f68a70ef559793",47:"e3415860440d615166f5",48:"eacc1a69d7945108d477",49:"816eaf78f972096de12f",50:"6dff493bcab389a09b38",51:"1b496bf88ae4ac03d93b",52:"0fb24298f32280c5da4e",53:"f90152b40c7f89357ed6"}[e]+".js?locale=" + __webpack_public_path_locale__;var n=setTimeout(d,12e4);return c.onerror=c.onload=d,s.appendChild(c),r},a.m=e,a.c=r,a.i=function(e){return e},a.d=function(e,d,r){if(!a.o(e,d))Object.defineProperty(e,d,{configurable:!1,enumerable:!0,get:r})},a.n=function(e){var d=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(d,"a",d),d},a.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},a.p="",a.oe=function(e){throw console.error(e),e}}([]);;
;
/* module-key = 'com.atlassian.servicedesk.frontend-webpack-plugin:context-jira.create.issue.asset.unlicensed', location = 'jira.create.issue.asset.unlicensed.bundle.js' */
sdJsonp([44],{0:function(n,t,e){var r,i;r=[e(19)],void 0!==(i=function(n){return n}.apply(t,r))&&(n.exports=i)},1:function(n,t,e){var r;void 0!==(r=function(){return jQuery}.call(t,e,t,n))&&(n.exports=r)},10:function(n,t,e){var r,i;r=[e(0),e(1),e(24)],void 0!==(i=function(n,t,e){return e(n,t)}.apply(t,r))&&(n.exports=i)},11:function(n,t){var e;e=function(){return this}();try{e=e||Function("return this")()||(0,eval)("this")}catch(n){if("object"==typeof window)e=window}n.exports=e},13:function(n,t,e){var r,i;if(void 0===o)var o={};if(o.table=function(n,t){return"<table"+(n.id?' id="'+soy.$$escapeHtml(n.id)+'"':"")+' class="aui'+o.renderExtraClasses(n)+'"'+o.renderExtraAttributes(n)+">"+(n.columnsContent?soy.$$filterNoAutoescape(n.columnsContent):"")+(n.captionContent?"<caption>"+soy.$$filterNoAutoescape(n.captionContent)+"</caption>":"")+(n.theadContent?"<thead>"+soy.$$filterNoAutoescape(n.theadContent)+"</thead>":"")+(n.tfootContent?"<tfoot>"+soy.$$filterNoAutoescape(n.tfootContent)+"</tfoot>":"")+(!n.contentIncludesTbody?"<tbody>":"")+soy.$$filterNoAutoescape(n.content)+(!n.contentIncludesTbody?"</tbody>":"")+"</table>"},goog.DEBUG)o.table.soyTemplateName="aui.table";r=[],void 0!==(i=function(){return o}.apply(t,r))&&(n.exports=i)},14:function(n,t,e){(function(t,r){/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   4.1.0
 */
!function(t,e){!0?n.exports=e():"function"==typeof define&&define.amd?define(e):t.ES6Promise=e()}(this,function(){"use strict";function n(n){return"function"==typeof n||"object"==typeof n&&null!==n}function i(n){return"function"==typeof n}function o(n){Y=n}function u(n){V=n}function s(){return function(){return t.nextTick(p)}}function a(){if(void 0!==Q)return function(){Q(p)};else return l()}function c(){var n=0,t=new Z(p),e=document.createTextNode("");return t.observe(e,{characterData:!0}),function(){e.data=n=++n%2}}function f(){var n=new MessageChannel;return n.port1.onmessage=p,function(){return n.port2.postMessage(0)}}function l(){var n=setTimeout;return function(){return n(p,1)}}function p(){for(var n=0;n<J;n+=2){(0,en[n])(en[n+1]),en[n]=void 0,en[n+1]=void 0}J=0}function h(){try{var n=e(16);return Q=n.runOnLoop||n.runOnContext,a()}catch(n){return l()}}function v(n,t){var e=arguments,r=this,i=new this.constructor(y);if(void 0===i[on])z(i);var o=r._state;if(o)!function(){var n=e[o-1];V(function(){return O(o,i,n,r._result)})}();else $(r,i,n,t);return i}function d(n){var t=this;if(n&&"object"==typeof n&&n.constructor===t)return n;var e=new t(y);return j(e,n),e}function y(){}function m(){return new TypeError("You cannot resolve a promise with itself")}function g(){return new TypeError("A promises callback cannot return that same promise.")}function b(n){try{return n.then}catch(n){return cn.error=n,cn}}function w(n,t,e,r){try{n.call(t,e,r)}catch(n){return n}}function _(n,t,e){V(function(n){var r=!1,i=w(e,t,function(e){if(!r)if(r=!0,t!==e)j(n,e);else k(n,e)},function(t){if(!r)r=!0,S(n,t)},"Settle: "+(n._label||" unknown promise"));if(!r&&i)r=!0,S(n,i)},n)}function x(n,t){if(t._state===sn)k(n,t._result);else if(t._state===an)S(n,t._result);else $(t,void 0,function(t){return j(n,t)},function(t){return S(n,t)})}function A(n,t,e){if(t.constructor===n.constructor&&e===v&&t.constructor.resolve===d)x(n,t);else if(e===cn)S(n,cn.error),cn.error=null;else if(void 0===e)k(n,t);else if(i(e))_(n,t,e);else k(n,t)}function j(t,e){if(t===e)S(t,m());else if(n(e))A(t,e,b(e));else k(t,e)}function T(n){if(n._onerror)n._onerror(n._result);C(n)}function k(n,t){if(n._state===un)if(n._result=t,n._state=sn,0!==n._subscribers.length)V(C,n)}function S(n,t){if(n._state===un)n._state=an,n._result=t,V(T,n)}function $(n,t,e,r){var i=n._subscribers,o=i.length;if(n._onerror=null,i[o]=t,i[o+sn]=e,i[o+an]=r,0===o&&n._state)V(C,n)}function C(n){var t=n._subscribers,e=n._state;if(0!==t.length){for(var r=void 0,i=void 0,o=n._result,u=0;u<t.length;u+=3)if(r=t[u],i=t[u+e],r)O(e,r,i,o);else i(o);n._subscribers.length=0}}function E(){this.error=null}function F(n,t){try{return n(t)}catch(n){return fn.error=n,fn}}function O(n,t,e,r){var o=i(e),u=void 0,s=void 0,a=void 0,c=void 0;if(o){if((u=F(e,r))===fn)c=!0,s=u.error,u.error=null;else a=!0;if(t===u)return void S(t,g())}else u=r,a=!0;if(t._state!==un);else if(o&&a)j(t,u);else if(c)S(t,s);else if(n===sn)k(t,u);else if(n===an)S(t,u)}function I(n,t){try{t(function(t){j(n,t)},function(t){S(n,t)})}catch(t){S(n,t)}}function D(){return ln++}function z(n){n[on]=ln++,n._state=void 0,n._result=void 0,n._subscribers=[]}function N(n,t){if(this._instanceConstructor=n,this.promise=new n(y),!this.promise[on])z(this.promise);if(G(t)){if(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length)k(this.promise,this._result);else if(this.length=this.length||0,this._enumerate(),0===this._remaining)k(this.promise,this._result)}else S(this.promise,M())}function M(){return new Error("Array Methods must be provided an Array")}function B(n){return new N(this,n).promise}function L(n){var t=this;if(!G(n))return new t(function(n,t){return t(new TypeError("You must pass an array to race."))});else return new t(function(e,r){for(var i=n.length,o=0;o<i;o++)t.resolve(n[o]).then(e,r)})}function q(n){var t=this,e=new t(y);return S(e,n),e}function H(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function P(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function R(n){if(this[on]=D(),this._result=this._state=void 0,this._subscribers=[],y!==n)"function"!=typeof n&&H(),this instanceof R?I(this,n):P()}function U(){var n=void 0;if(void 0!==r)n=r;else if("undefined"!=typeof self)n=self;else try{n=Function("return this")()}catch(n){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=n.Promise;if(t){var e=null;try{e=Object.prototype.toString.call(t.resolve())}catch(n){}if("[object Promise]"===e&&!t.cast)return}n.Promise=R}var K=void 0;if(!Array.isArray)K=function(n){return"[object Array]"===Object.prototype.toString.call(n)};else K=Array.isArray;var G=K,J=0,Q=void 0,Y=void 0,V=function(n,t){if(en[J]=n,en[J+1]=t,2===(J+=2))if(Y)Y(p);else rn()},W="undefined"!=typeof window?window:void 0,X=W||{},Z=X.MutationObserver||X.WebKitMutationObserver,nn="undefined"==typeof self&&void 0!==t&&"[object process]"==={}.toString.call(t),tn="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,en=new Array(1e3),rn=void 0;if(nn)rn=s();else if(Z)rn=c();else if(tn)rn=f();else if(void 0===W)rn=h();else rn=l();var on=Math.random().toString(36).substring(16),un=void 0,sn=1,an=2,cn=new E,fn=new E,ln=0;return N.prototype._enumerate=function(){for(var n=this.length,t=this._input,e=0;this._state===un&&e<n;e++)this._eachEntry(t[e],e)},N.prototype._eachEntry=function(n,t){var e=this._instanceConstructor,r=e.resolve;if(r===d){var i=b(n);if(i===v&&n._state!==un)this._settledAt(n._state,t,n._result);else if("function"!=typeof i)this._remaining--,this._result[t]=n;else if(e===R){var o=new e(y);A(o,n,i),this._willSettleAt(o,t)}else this._willSettleAt(new e(function(t){return t(n)}),t)}else this._willSettleAt(r(n),t)},N.prototype._settledAt=function(n,t,e){var r=this.promise;if(r._state===un)if(this._remaining--,n===an)S(r,e);else this._result[t]=e;if(0===this._remaining)k(r,this._result)},N.prototype._willSettleAt=function(n,t){var e=this;$(n,void 0,function(n){return e._settledAt(sn,t,n)},function(n){return e._settledAt(an,t,n)})},R.all=B,R.race=L,R.resolve=d,R.reject=q,R._setScheduler=o,R._setAsap=u,R._asap=V,R.prototype={constructor:R,then:v,catch:function(n){return this.then(null,n)}},R.polyfill=U,R.Promise=R,R})}).call(t,e(15),e(11))},145:function(n,t,e){var r,i;if("undefined"==typeof ServiceDesk)window.ServiceDesk={};if(void 0===ServiceDesk.Templates)ServiceDesk.Templates={};if(void 0===ServiceDesk.Templates.Components)ServiceDesk.Templates.Components={};if(void 0===ServiceDesk.Templates.Components.Assets)ServiceDesk.Templates.Components.Assets={};if(void 0===ServiceDesk.Templates.Components.Assets.Field)ServiceDesk.Templates.Components.Assets.Field={};if(ServiceDesk.Templates.Components.Assets.Field.assetLozenge=function(n,t){return'<li class="sd-asset-lozenge" title="'+soy.$$escapeHtml(n.asset.label.value)+'"><span class="sd-asset" title="'+soy.$$escapeHtml(n.asset.label.value)+'">'+("Unknown Asset"==n.asset.label.value?'<span class="sd-asset-value">&nbsp;'+soy.$$escapeHtml("Unknown Asset")+"&nbsp;</span>"+aui.icons.icon({useIconFont:!0,icon:"warning",extraClasses:"aui-iconfont-warning"}):'<span class="sd-asset-value">&nbsp;'+soy.$$escapeHtml(n.asset.label.value)+"</span>")+'</span><button type="button" class="js-remove aui-icon aui-icon-small aui-iconfont-delete" tabindex="-1"></button></li>'},goog.DEBUG)ServiceDesk.Templates.Components.Assets.Field.assetLozenge.soyTemplateName="ServiceDesk.Templates.Components.Assets.Field.assetLozenge";r=[e(39)],void 0!==(i=function(){return ServiceDesk.Templates.Components.Assets.Field}.apply(t,r))&&(n.exports=i)},15:function(n,t){function e(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(n){if(f===setTimeout)return setTimeout(n,0);if((f===e||!f)&&setTimeout)return f=setTimeout,setTimeout(n,0);try{return f(n,0)}catch(t){try{return f.call(null,n,0)}catch(t){return f.call(this,n,0)}}}function o(n){if(l===clearTimeout)return clearTimeout(n);if((l===r||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(n);try{return l(n)}catch(t){try{return l.call(null,n)}catch(t){return l.call(this,n)}}}function u(){if(d&&h){if(d=!1,h.length)v=h.concat(v);else y=-1;if(v.length)s()}}function s(){if(!d){var n=i(u);d=!0;for(var t=v.length;t;){for(h=v,v=[];++y<t;)if(h)h[y].run();y=-1,t=v.length}h=null,d=!1,o(n)}}function a(n,t){this.fun=n,this.array=t}function c(){}var f,l,p=n.exports={};!function(){try{if("function"==typeof setTimeout)f=setTimeout;else f=e}catch(n){f=e}try{if("function"==typeof clearTimeout)l=clearTimeout;else l=r}catch(n){l=r}}();var h,v=[],d=!1,y=-1;p.nextTick=function(n){var t=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)t[e-1]=arguments[e];if(v.push(new a(n,t)),1===v.length&&!d)i(s)},a.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=c,p.addListener=c,p.once=c,p.off=c,p.removeListener=c,p.removeAllListeners=c,p.emit=c,p.prependListener=c,p.prependOnceListener=c,p.listeners=function(n){return[]},p.binding=function(n){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(n){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},155:function(n,t,e){var r,i;r=[e(1),e(145),e(90)],void 0!==(i=function(n){var t=ServiceDesk.Templates.Components.Assets.Field.assetLozenge;return function(e){return n(t({asset:e}))}}.apply(t,r))&&(n.exports=i)},156:function(n,t,e){var r,i;r=[e(0),e(1),e(9),e(2),e(38),e(60),e(35),e(32),e(26),e(155),e(88),e(89),e(90)],void 0!==(i=function(n,t,e,r,i,o,u,s,a,c,f,l){var p=o.extend({keys:{Up:function(){return this.keys.Left.apply(this,arguments)},Down:function(){return this.keys.Right.apply(this,arguments)}}}),h=i.extend({init:function(n,t){var e=this;l(n.properties.value,function(n){e.$lozenge=c(n),e._assignEvents("instance",e)._assignEvents("removeButton",e.$lozenge.find(".js-remove")),t(e.$lozenge)})},_events:{instance:{focus:function(){this.$lozenge.addClass("focused")},blur:function(){this.$lozenge.removeClass("focused")},remove:function(){this.$lozenge.remove()}},removeButton:{click:function(){this.trigger("remove")}}}}),v=u.extend({init:function(){this._super.apply(this,arguments),this.$container.addClass("sd-asset-field")},_getTypeOriginAsSerializedType:function(n){return encodeURIComponent((n.appKey+"/"+n.originId).toLowerCase())},_getAssetFieldConfigQueryParamsAsString:function(n,t){var e=this,r="";if(""!==t)r+="prioritizedAssignee="+t+"&";return n.types.forEach(function(n){r+="type="+e._getTypeOriginAsSerializedType(n)+"&"}),r.slice(0,-1)},_getDefaultOptions:function(){for(var n=arguments.length,e=Array(n),r=0;r<n;r++)e[r]=arguments[r];var i=t(e[0].element).data().assetFieldConfig,o=t(e[0].element).data().assetFieldReporterAccountId,u="";if(i)u=this._getAssetFieldConfigQueryParamsAsString(i,o);return t.extend(!0,this._super(),{showDropdownButton:!1,itemGroup:new p,itemAttrDisplayed:"label",errorMessage:!1,matchingStrategy:".*",itemBuilder:function(n){var t=this;return new h(n,function(n){n.appendTo(t.$selectedItemsContainer),t.updateItemsIndent()})},ajaxOptions:{url:AJS.contextPath()+"/rest/assetapi/asset/search?"+u,query:!0,formatResponse:this._formatResponse,headers:{"X-B3-Sampled":"1"}}})},_formatResponse:function(t){return n.map(t.values,function(n){return new s(f(n))})},updateItemsIndent:function(){var n=5,e=this.$selectedItemsContainer.outerHeight()+n+n;if(this.$field.css({paddingLeft:n,paddingTop:e,height:e+20+n}),t.browser.msie&&parseInt(t.browser.version,10)<11)this.$field.val(this.$field.val()+" "),this.$field.val(this.$field.val().replace(/\s$/,""))},keys:{Up:function(){var t=this;if(!this.suggestionsVisible&&this.lozengeGroup.items.length>0&&this.lozengeGroup.index<0)n.defer(n.bind(function(){t.lozengeGroup.shiftFocus(-1)},this))}}});return a("js-request-asset-field",{created:function(n){n.field=new v({element:n})}})}.apply(t,r))&&(n.exports=i)},16:function(n,t){},19:function(n,t,e){var r,i;(function(){function e(n){function t(t,e,r,i,o,u){for(;o>=0&&o<u;o+=n){var s=i?i[o]:o;r=e(r,t[s],s,t)}return r}return function(e,r,i,o){r=A(r,o,4);var u=!E(e)&&x.keys(e),s=(u||e).length,a=n>0?0:s-1;if(arguments.length<3)i=e[u?u[a]:a],a+=n;return t(e,r,i,u,a,s)}}function o(n){return function(t,e,r){e=j(e,r);for(var i=C(t),o=n>0?0:i-1;o>=0&&o<i;o+=n)if(e(t[o],o,t))return o;return-1}}function u(n,t,e){return function(r,i,o){var u=0,s=C(r);if("number"==typeof o)if(n>0)u=o>=0?o:Math.max(o+s,u);else s=o>=0?Math.min(o+1,s):o+s+1;else if(e&&o&&s)return o=e(r,i),r[o]===i?o:-1;if(i!==i)return o=t(v.call(r,u,s),x.isNaN),o>=0?o+u:-1;for(o=n>0?u:s-1;o>=0&&o<s;o+=n)if(r[o]===i)return o;return-1}}function s(n,t){var e=z.length,r=n.constructor,i=x.isFunction(r)&&r.prototype||l,o="constructor";if(x.has(n,o)&&!x.contains(t,o))t.push(o);for(;e--;)if((o=z[e])in n&&n[o]!==i[o]&&!x.contains(t,o))t.push(o)}var a=this,c=a._,f=Array.prototype,l=Object.prototype,p=Function.prototype,h=f.push,v=f.slice,d=l.toString,y=l.hasOwnProperty,m=Array.isArray,g=Object.keys,b=p.bind,w=Object.create,_=function(){},x=function(n){if(n instanceof x)return n;if(!(this instanceof x))return new x(n);else return void(this._wrapped=n)};if(!0){if(void 0!==n&&n.exports)t=n.exports=x;t._=x}else a._=x;x.VERSION="1.8.3";var A=function(n,t,e){if(void 0===t)return n;switch(null==e?3:e){case 1:return function(e){return n.call(t,e)};case 2:return function(e,r){return n.call(t,e,r)};case 3:return function(e,r,i){return n.call(t,e,r,i)};case 4:return function(e,r,i,o){return n.call(t,e,r,i,o)}}return function(){return n.apply(t,arguments)}},j=function(n,t,e){if(null==n)return x.identity;if(x.isFunction(n))return A(n,t,e);if(x.isObject(n))return x.matcher(n);else return x.property(n)};x.iteratee=function(n,t){return j(n,t,1/0)};var T=function(n,t){return function(e){var r=arguments.length;if(r<2||null==e)return e;for(var i=1;i<r;i++)for(var o=arguments[i],u=n(o),s=u.length,a=0;a<s;a++){var c=u[a];if(!t||void 0===e[c])e[c]=o[c]}return e}},k=function(n){if(!x.isObject(n))return{};if(w)return w(n);_.prototype=n;var t=new _;return _.prototype=null,t},S=function(n){return function(t){return null==t?void 0:t[n]}},$=Math.pow(2,53)-1,C=S("length"),E=function(n){var t=C(n);return"number"==typeof t&&t>=0&&t<=$};x.each=x.forEach=function(n,t,e){t=A(t,e);var r,i;if(E(n))for(r=0,i=n.length;r<i;r++)t(n[r],r,n);else{var o=x.keys(n);for(r=0,i=o.length;r<i;r++)t(n[o[r]],o[r],n)}return n},x.map=x.collect=function(n,t,e){t=j(t,e);for(var r=!E(n)&&x.keys(n),i=(r||n).length,o=Array(i),u=0;u<i;u++){var s=r?r[u]:u;o[u]=t(n[s],s,n)}return o},x.reduce=x.foldl=x.inject=e(1),x.reduceRight=x.foldr=e(-1),x.find=x.detect=function(n,t,e){var r;if(E(n))r=x.findIndex(n,t,e);else r=x.findKey(n,t,e);if(void 0!==r&&-1!==r)return n[r]},x.filter=x.select=function(n,t,e){var r=[];return t=j(t,e),x.each(n,function(n,e,i){if(t(n,e,i))r.push(n)}),r},x.reject=function(n,t,e){return x.filter(n,x.negate(j(t)),e)},x.every=x.all=function(n,t,e){t=j(t,e);for(var r=!E(n)&&x.keys(n),i=(r||n).length,o=0;o<i;o++){var u=r?r[o]:o;if(!t(n[u],u,n))return!1}return!0},x.some=x.any=function(n,t,e){t=j(t,e);for(var r=!E(n)&&x.keys(n),i=(r||n).length,o=0;o<i;o++){var u=r?r[o]:o;if(t(n[u],u,n))return!0}return!1},x.contains=x.includes=x.include=function(n,t,e,r){if(!E(n))n=x.values(n);if("number"!=typeof e||r)e=0;return x.indexOf(n,t,e)>=0},x.invoke=function(n,t){var e=v.call(arguments,2),r=x.isFunction(t);return x.map(n,function(n){var i=r?t:n[t];return null==i?i:i.apply(n,e)})},x.pluck=function(n,t){return x.map(n,x.property(t))},x.where=function(n,t){return x.filter(n,x.matcher(t))},x.findWhere=function(n,t){return x.find(n,x.matcher(t))},x.max=function(n,t,e){var r,i,o=-1/0,u=-1/0;if(null==t&&null!=n){n=E(n)?n:x.values(n);for(var s=0,a=n.length;s<a;s++)if((r=n[s])>o)o=r}else t=j(t,e),x.each(n,function(n,e,r){if((i=t(n,e,r))>u||i===-1/0&&o===-1/0)o=n,u=i});return o},x.min=function(n,t,e){var r,i,o=1/0,u=1/0;if(null==t&&null!=n){n=E(n)?n:x.values(n);for(var s=0,a=n.length;s<a;s++)if((r=n[s])<o)o=r}else t=j(t,e),x.each(n,function(n,e,r){if((i=t(n,e,r))<u||i===1/0&&o===1/0)o=n,u=i});return o},x.shuffle=function(n){for(var t,e=E(n)?n:x.values(n),r=e.length,i=Array(r),o=0;o<r;o++){if((t=x.random(0,o))!==o)i[o]=i[t];i[t]=e[o]}return i},x.sample=function(n,t,e){if(null==t||e){if(!E(n))n=x.values(n);return n[x.random(n.length-1)]}return x.shuffle(n).slice(0,Math.max(0,t))},x.sortBy=function(n,t,e){return t=j(t,e),x.pluck(x.map(n,function(n,e,r){return{value:n,index:e,criteria:t(n,e,r)}}).sort(function(n,t){var e=n.criteria,r=t.criteria;if(e!==r){if(e>r||void 0===e)return 1;if(e<r||void 0===r)return-1}return n.index-t.index}),"value")};var F=function(n){return function(t,e,r){var i={};return e=j(e,r),x.each(t,function(r,o){var u=e(r,o,t);n(i,r,u)}),i}};x.groupBy=F(function(n,t,e){if(x.has(n,e))n[e].push(t);else n[e]=[t]}),x.indexBy=F(function(n,t,e){n[e]=t}),x.countBy=F(function(n,t,e){if(x.has(n,e))n[e]++;else n[e]=1}),x.toArray=function(n){if(!n)return[];if(x.isArray(n))return v.call(n);if(E(n))return x.map(n,x.identity);else return x.values(n)},x.size=function(n){if(null==n)return 0;else return E(n)?n.length:x.keys(n).length},x.partition=function(n,t,e){t=j(t,e);var r=[],i=[];return x.each(n,function(n,e,o){(t(n,e,o)?r:i).push(n)}),[r,i]},x.first=x.head=x.take=function(n,t,e){if(null!=n)if(null==t||e)return n[0];else return x.initial(n,n.length-t)},x.initial=function(n,t,e){return v.call(n,0,Math.max(0,n.length-(null==t||e?1:t)))},x.last=function(n,t,e){if(null!=n)if(null==t||e)return n[n.length-1];else return x.rest(n,Math.max(0,n.length-t))},x.rest=x.tail=x.drop=function(n,t,e){return v.call(n,null==t||e?1:t)},x.compact=function(n){return x.filter(n,x.identity)};var O=function(n,t,e,r){for(var i=[],o=0,u=r||0,s=C(n);u<s;u++){var a=n[u];if(E(a)&&(x.isArray(a)||x.isArguments(a))){if(!t)a=O(a,t,e);var c=0,f=a.length;for(i.length+=f;c<f;)i[o++]=a[c++]}else if(!e)i[o++]=a}return i};x.flatten=function(n,t){return O(n,t,!1)},x.without=function(n){return x.difference(n,v.call(arguments,1))},x.uniq=x.unique=function(n,t,e,r){if(!x.isBoolean(t))r=e,e=t,t=!1;if(null!=e)e=j(e,r);for(var i=[],o=[],u=0,s=C(n);u<s;u++){var a=n[u],c=e?e(a,u,n):a;if(t){if(!u||o!==c)i.push(a);o=c}else if(e){if(!x.contains(o,c))o.push(c),i.push(a)}else if(!x.contains(i,a))i.push(a)}return i},x.union=function(){return x.uniq(O(arguments,!0,!0))},x.intersection=function(n){for(var t=[],e=arguments.length,r=0,i=C(n);r<i;r++){var o=n[r];if(!x.contains(t,o)){for(var u=1;u<e&&x.contains(arguments[u],o);u++);if(u===e)t.push(o)}}return t},x.difference=function(n){var t=O(arguments,!0,!0,1);return x.filter(n,function(n){return!x.contains(t,n)})},x.zip=function(){return x.unzip(arguments)},x.unzip=function(n){for(var t=n&&x.max(n,C).length||0,e=Array(t),r=0;r<t;r++)e[r]=x.pluck(n,r);return e},x.object=function(n,t){for(var e={},r=0,i=C(n);r<i;r++)if(t)e[n[r]]=t[r];else e[n[r][0]]=n[r][1];return e},x.findIndex=o(1),x.findLastIndex=o(-1),x.sortedIndex=function(n,t,e,r){e=j(e,r,1);for(var i=e(t),o=0,u=C(n);o<u;){var s=Math.floor((o+u)/2);if(e(n[s])<i)o=s+1;else u=s}return o},x.indexOf=u(1,x.findIndex,x.sortedIndex),x.lastIndexOf=u(-1,x.findLastIndex),x.range=function(n,t,e){if(null==t)t=n||0,n=0;e=e||1;for(var r=Math.max(Math.ceil((t-n)/e),0),i=Array(r),o=0;o<r;o++,n+=e)i[o]=n;return i};var I=function(n,t,e,r,i){if(!(r instanceof t))return n.apply(e,i);var o=k(n.prototype),u=n.apply(o,i);if(x.isObject(u))return u;else return o};x.bind=function(n,t){if(b&&n.bind===b)return b.apply(n,v.call(arguments,1));if(!x.isFunction(n))throw new TypeError("Bind must be called on a function");var e=v.call(arguments,2),r=function(){return I(n,r,t,this,e.concat(v.call(arguments)))};return r},x.partial=function(n){var t=v.call(arguments,1),e=function(){for(var r=0,i=t.length,o=Array(i),u=0;u<i;u++)o[u]=t[u]===x?arguments[r++]:t[u];for(;r<arguments.length;)o.push(arguments[r++]);return I(n,e,this,this,o)};return e},x.bindAll=function(n){var t,e,r=arguments.length;if(r<=1)throw new Error("bindAll must be passed function names");for(t=1;t<r;t++)e=arguments[t],n[e]=x.bind(n[e],n);return n},x.memoize=function(n,t){var e=function(r){var i=e.cache,o=""+(t?t.apply(this,arguments):r);if(!x.has(i,o))i[o]=n.apply(this,arguments);return i[o]};return e.cache={},e},x.delay=function(n,t){var e=v.call(arguments,2);return setTimeout(function(){return n.apply(null,e)},t)},x.defer=x.partial(x.delay,x,1),x.throttle=function(n,t,e){var r,i,o,u=null,s=0;if(!e)e={};var a=function(){if(s=!1===e.leading?0:x.now(),u=null,o=n.apply(r,i),!u)r=i=null};return function(){var c=x.now();if(!s&&!1===e.leading)s=c;var f=t-(c-s);if(r=this,i=arguments,f<=0||f>t){if(u)clearTimeout(u),u=null;if(s=c,o=n.apply(r,i),!u)r=i=null}else if(!u&&!1!==e.trailing)u=setTimeout(a,f);return o}},x.debounce=function(n,t,e){var r,i,o,u,s,a=function(){var c=x.now()-u;if(c<t&&c>=0)r=setTimeout(a,t-c);else if(r=null,!e)if(s=n.apply(o,i),!r)o=i=null};return function(){o=this,i=arguments,u=x.now();var c=e&&!r;if(!r)r=setTimeout(a,t);if(c)s=n.apply(o,i),o=i=null;return s}},x.wrap=function(n,t){return x.partial(t,n)},x.negate=function(n){return function(){return!n.apply(this,arguments)}},x.compose=function(){var n=arguments,t=n.length-1;return function(){for(var e=t,r=n[t].apply(this,arguments);e--;)r=n[e].call(this,r);return r}},x.after=function(n,t){return function(){if(--n<1)return t.apply(this,arguments)}},x.before=function(n,t){var e;return function(){if(--n>0)e=t.apply(this,arguments);if(n<=1)t=null;return e}},x.once=x.partial(x.before,2);var D=!{toString:null}.propertyIsEnumerable("toString"),z=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];x.keys=function(n){if(!x.isObject(n))return[];if(g)return g(n);var t=[];for(var e in n)if(x.has(n,e))t.push(e);if(D)s(n,t);return t},x.allKeys=function(n){if(!x.isObject(n))return[];var t=[];for(var e in n)t.push(e);if(D)s(n,t);return t},x.values=function(n){for(var t=x.keys(n),e=t.length,r=Array(e),i=0;i<e;i++)r[i]=n[t[i]];return r},x.mapObject=function(n,t,e){t=j(t,e);for(var r,i=x.keys(n),o=i.length,u={},s=0;s<o;s++)r=i[s],u[r]=t(n[r],r,n);return u},x.pairs=function(n){for(var t=x.keys(n),e=t.length,r=Array(e),i=0;i<e;i++)r[i]=[t[i],n[t[i]]];return r},x.invert=function(n){for(var t={},e=x.keys(n),r=0,i=e.length;r<i;r++)t[n[e[r]]]=e[r];return t},x.functions=x.methods=function(n){var t=[];for(var e in n)if(x.isFunction(n[e]))t.push(e);return t.sort()},x.extend=T(x.allKeys),x.extendOwn=x.assign=T(x.keys),x.findKey=function(n,t,e){t=j(t,e);for(var r,i=x.keys(n),o=0,u=i.length;o<u;o++)if(r=i[o],t(n[r],r,n))return r},x.pick=function(n,t,e){var r,i,o={},u=n;if(null==u)return o;if(x.isFunction(t))i=x.allKeys(u),r=A(t,e);else i=O(arguments,!1,!1,1),r=function(n,t,e){return t in e},u=Object(u);for(var s=0,a=i.length;s<a;s++){var c=i[s],f=u[c];if(r(f,c,u))o[c]=f}return o},x.omit=function(n,t,e){if(x.isFunction(t))t=x.negate(t);else{var r=x.map(O(arguments,!1,!1,1),String);t=function(n,t){return!x.contains(r,t)}}return x.pick(n,t,e)},x.defaults=T(x.allKeys,!0),x.create=function(n,t){var e=k(n);if(t)x.extendOwn(e,t);return e},x.clone=function(n){if(!x.isObject(n))return n;else return x.isArray(n)?n.slice():x.extend({},n)},x.tap=function(n,t){return t(n),n},x.isMatch=function(n,t){var e=x.keys(t),r=e.length;if(null==n)return!r;for(var i=Object(n),o=0;o<r;o++){var u=e[o];if(t[u]!==i[u]||!(u in i))return!1}return!0};var N=function(n,t,e,r){if(n===t)return 0!==n||1/n==1/t;if(null==n||null==t)return n===t;if(n instanceof x)n=n._wrapped;if(t instanceof x)t=t._wrapped;var i=d.call(n);if(i!==d.call(t))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+n==""+t;case"[object Number]":if(+n!=+n)return+t!=+t;else return 0==+n?1/+n==1/t:+n==+t;case"[object Date]":case"[object Boolean]":return+n==+t}var o="[object Array]"===i;if(!o){if("object"!=typeof n||"object"!=typeof t)return!1;var u=n.constructor,s=t.constructor;if(u!==s&&!(x.isFunction(u)&&u instanceof u&&x.isFunction(s)&&s instanceof s)&&"constructor"in n&&"constructor"in t)return!1}e=e||[],r=r||[];for(var a=e.length;a--;)if(e[a]===n)return r[a]===t;if(e.push(n),r.push(t),o){if((a=n.length)!==t.length)return!1;for(;a--;)if(!N(n[a],t[a],e,r))return!1}else{var c,f=x.keys(n);if(a=f.length,x.keys(t).length!==a)return!1;for(;a--;)if(c=f[a],!x.has(t,c)||!N(n[c],t[c],e,r))return!1}return e.pop(),r.pop(),!0};if(x.isEqual=function(n,t){return N(n,t)},x.isEmpty=function(n){if(null==n)return!0;if(E(n)&&(x.isArray(n)||x.isString(n)||x.isArguments(n)))return 0===n.length;else return 0===x.keys(n).length},x.isElement=function(n){return!(!n||1!==n.nodeType)},x.isArray=m||function(n){return"[object Array]"===d.call(n)},x.isObject=function(n){var t=typeof n;return"function"===t||"object"===t&&!!n},x.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(n){x["is"+n]=function(t){return d.call(t)==="[object "+n+"]"}}),!x.isArguments(arguments))x.isArguments=function(n){return x.has(n,"callee")};if("function"!=typeof/./&&"object"!=typeof Int8Array)x.isFunction=function(n){return"function"==typeof n||!1};x.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},x.isNaN=function(n){return x.isNumber(n)&&n!==+n},x.isBoolean=function(n){return!0===n||!1===n||"[object Boolean]"===d.call(n)},x.isNull=function(n){return null===n},x.isUndefined=function(n){return void 0===n},x.has=function(n,t){return null!=n&&y.call(n,t)},x.noConflict=function(){return a._=c,this},x.identity=function(n){return n},x.constant=function(n){return function(){return n}},x.noop=function(){},x.property=S,x.propertyOf=function(n){return null==n?function(){}:function(t){return n[t]}},x.matcher=x.matches=function(n){return n=x.extendOwn({},n),function(t){return x.isMatch(t,n)}},x.times=function(n,t,e){var r=Array(Math.max(0,n));t=A(t,e,1);for(var i=0;i<n;i++)r[i]=t(i);return r},x.random=function(n,t){if(null==t)t=n,n=0;return n+Math.floor(Math.random()*(t-n+1))},x.now=Date.now||function(){return(new Date).getTime()};var M={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},B=x.invert(M),L=function(n){var t=function(t){return n[t]},e="(?:"+x.keys(n).join("|")+")",r=RegExp(e),i=RegExp(e,"g");return function(n){return n=null==n?"":""+n,r.test(n)?n.replace(i,t):n}};x.escape=L(M),x.unescape=L(B),x.result=function(n,t,e){var r=null==n?void 0:n[t];if(void 0===r)r=e;return x.isFunction(r)?r.call(n):r};var q=0;x.uniqueId=function(n){var t=++q+"";return n?n+t:t},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var H=/(.)^/,P={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},R=/\\|'|\r|\n|\u2028|\u2029/g,U=function(n){return"\\"+P[n]};x.template=function(n,t,e){if(!t&&e)t=e;t=x.defaults({},t,x.templateSettings);var r=RegExp([(t.escape||H).source,(t.interpolate||H).source,(t.evaluate||H).source].join("|")+"|$","g"),i=0,o="__p+='";if(n.replace(r,function(t,e,r,u,s){if(o+=n.slice(i,s).replace(R,U),i=s+t.length,e)o+="'+\n((__t=("+e+"))==null?'':_.escape(__t))+\n'";else if(r)o+="'+\n((__t=("+r+"))==null?'':__t)+\n'";else if(u)o+="';\n"+u+"\n__p+='";return t}),o+="';\n",!t.variable)o="with(obj||{}){\n"+o+"}\n";o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var u=new Function(t.variable||"obj","_",o)}catch(n){throw n.source=o,n}var s=function(n){return u.call(this,n,x)},a=t.variable||"obj";return s.source="function("+a+"){\n"+o+"}",s},x.chain=function(n){var t=x(n);return t._chain=!0,t};var K=function(n,t){return n._chain?x(t).chain():t};if(x.mixin=function(n){x.each(x.functions(n),function(t){var e=x[t]=n[t];x.prototype[t]=function(){var n=[this._wrapped];return h.apply(n,arguments),K(this,e.apply(x,n))}})},x.mixin(x),x.each(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var t=f[n];x.prototype[n]=function(){var e=this._wrapped;if(t.apply(e,arguments),("shift"===n||"splice"===n)&&0===e.length)delete e[0];return K(this,e)}}),x.each(["concat","join","slice"],function(n){var t=f[n];x.prototype[n]=function(){return K(this,t.apply(this._wrapped,arguments))}}),x.prototype.value=function(){return this._wrapped},x.prototype.valueOf=x.prototype.toJSON=x.prototype.value,x.prototype.toString=function(){return""+this._wrapped},!0)r=[],void 0!==(i=function(){return x}.apply(t,r))&&(n.exports=i)}).call(this)},2:function(n,t,e){var r,i;r=[e(0),e(10),e(25)],void 0!==(i=function(n,t,e){var r=e(n,t);return r.Model.prototype.ignoreUnknownAttributes=!0,r}.apply(t,r))&&(n.exports=i)},24:function(n,t){n.exports=window.require("atlassian/libs/factories/backbone-1.0.0")},25:function(n,t){n.exports=window.require("atlassian/libs/factories/brace-1.1.0")},26:function(n,t,e){var r,i;r=[e(0),e(9)],void 0!==(i=function(n,t){var e=void 0;return function(){var r=this,i=n.toArray(arguments);return{install:n.once(function(){try{e=t.apply(r,i)}catch(n){console.log("Failed to install skate component, maybe it has already been installed")}return e})}}}.apply(t,r))&&(n.exports=i)},28:function(n,t){n.exports=window.require("atlassian/libs/skate-0.12.6")},32:function(n,t){n.exports=window.require("jira/ajs/list/item-descriptor")},35:function(n,t){n.exports=window.require("jira/ajs/select/multi-select")},38:function(n,t){n.exports=window.require("jira/ajs/control")},39:function(n,t,e){var r,i;if(void 0===o)var o={};if(void 0===o.icons)o.icons={};if(o.icons.icon=function(n,t){return"<"+soy.$$escapeHtml(n.tagName?n.tagName:"span")+(n.id?' id="'+soy.$$escapeHtml(n.id)+'"':"")+' class="aui-icon'+(n.useIconFont?" aui-icon-"+soy.$$escapeHtml(n.size?n.size:"small"):"")+" aui"+soy.$$escapeHtml(n.useIconFont?"-iconfont":"-icon")+soy.$$escapeHtml(n.iconFontSet?"-"+n.iconFontSet:"")+"-"+soy.$$escapeHtml(n.icon)+o.renderExtraClasses(n)+'"'+o.renderExtraAttributes(n)+">"+(n.accessibilityText?soy.$$escapeHtml(n.accessibilityText):"")+"</"+soy.$$escapeHtml(n.tagName?n.tagName:"span")+">"},goog.DEBUG)o.icons.icon.soyTemplateName="aui.icons.icon";r=[e(13)],void 0!==(i=function(){return o.icons}.apply(t,r))&&(n.exports=i)},532:function(n,t,e){!function(n,t){n(function(){t.install()})}(e(1),e(156))},60:function(n,t){n.exports=window.require("jira/ajs/select/multi-select/lozenge-group")},790:function(n,t,e){e(8),n.exports=e(532)},8:function(n,t,e){"use strict";n.exports=e(14).polyfill()},88:function(n,t,e){var r,i;r=[],void 0!==(i=function(){return function(n){return{value:n.origin.appKey+"/"+n.origin.originId,label:n.label.value}}}.apply(t,r))&&(n.exports=i)},89:function(n,t,e){var r,i;r=[e(1)],void 0!==(i=function(n){return function(t,e){n.ajax({url:AJS.contextPath()+"/rest/assetapi/asset/"+t,cache:!0,headers:{"X-B3-Sampled":"1"}}).fail(function(){var n=t.split("/");e({origin:{appKey:n[0],originId:n[1]},label:{value:"Unknown Asset"}})}).then(function(n){e&&e(n)})}}.apply(t,r))&&(n.exports=i)},9:function(n,t,e){var r,i;r=[e(28)],void 0!==(i=function(n){return n}.apply(t,r))&&(n.exports=i)},90:function(n,t){}},[790]);;
;
/* module-key = 'com.atlassian.jira.jira-attachment-plugin:integrate-attachment-upload', location = 'jira-attachment-module/jira-attachments.js' */
!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(1),o=r(i),a=n(78),s=r(a),u=n(79),c=r(u),l=n(84),f=r(l),d=n(86),h=r(d),p=n(87),v=r(p),m=n(90),y=r(m),b=n(4),g=r(b),_=n(91),w=r(_),x=n(9),k=r(x);g.default.areAttachmentsEnabled()&&((0,w.default)(),k.default.install(),h.default.registerAttachmentMenuHandlerFactory(c.default),h.default.registerBrowseLinkHandlerFactory(c.default),h.default.registerAttachmentsZoneCreator(o.default),h.default.registerTemporaryAttachmentCreatorFactory(f.default),h.default.registerTemporaryAttachmentZoneCreator(s.default),h.default.registerTemporaryBinaryUploadHandler(v.default),h.default.registerConnectedTemporaryBinaryUploadHandler(y.default))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),o=n(16),a=r(o),s=n(10),u=r(s),c=n(20),l=r(c);t.default=function(e){var t="view-issue/drop-zone",n=(0,i.dropzone)(e).then(function(e){return e.on("drop",function(){a.default.triggerAttachRequested("viewIssueDropZone")}),e}),r=!1;return{activate:function(){return n.then(function(e){r||(r=!0,e.activate(),u.default.publish("upload/switch-context",{name:t}))})},deactivate:function(){return n.then(function(e){r&&(e.deactivate(),r=!1)})},drop:function(){return n.catch(function(e){a.default.triggerInitialisationException((0,l.default)(e)),u.default.publish("media/error","Attachment upload setup failed. Try refreshing a page or contact Support.")})}}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.connectedTemporaryBinary=t.binary=t.dropzone=t.popup=t.browser=t.temporaryAttachmentDropzone=t.temporaryAttachmentPopup=t.temporaryAttachmentBrowser=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(3),a=r(o),s=n(16),u=r(s),c=n(17),l=r(c),f=n(25),d=n(20),h=r(d),p=n(77),v=n(19),m=r(v),y="user_token_fetch_fail",b=3e4,g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.default.getApiUrl,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.default.authProvider,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.default.getUploadParameters,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:p.connectToIssueChanges;return n().then(function(t){m.default.mark("attachments.media.components."+e+".credentials.received");var n=i({},{apiUrl:t},{authProvider:r});return n}).then(function(n){return(0,f.MediaPicker)(e,n,t)}).then(function(t){return m.default.mark("attachments.media.components."+e+".component.created"),t}).then(p.connect).then(s).then(function(e){return o().then(function(t){return e.setUploadParams(t)}),e})}},_=function(e){return new Promise(function(t,n){var r=l.default.schedule(function(){u.default.triggerInitializationTimeout(),n({message:"Initialisation Timeout",logged:!0})},b);e.on("ready",function(){m.default.mark("attachments.media.components.popup.ready"),l.default.cancel(r),u.default.triggerPopupInitialized(),u.default.triggerPopupMetrics(),t(e)}),e.on("upload-error",function(t){var i=t.error;i.logged=!0,i.name===y?(u.default.triggerUserNotLoggedIn(),m.default.mark("attachments.media.components.popup.user.not.logged"),l.default.cancel(r),e.teardown(),n(i)):u.default.triggerPopupError((0,h.default)(i))})})},w=g("browser",{multiple:!0}),x=function(e){return g("popup",{userAuthProvider:e})().then(_)},k=function(e){return g("dropzone",{headless:!0,container:e})()},A=(t.temporaryAttachmentBrowser=function(e){return function(){return w(a.default.getApiUrl,a.default.temporaryAuthProvider,a.default.getTemporaryAttachmentUploadParameters.bind(null,e),p.connectToProjectChanges)}},t.temporaryAttachmentPopup=function(e){return function(t){return g("popup",{userAuthProvider:t})(a.default.getApiUrl,a.default.temporaryAuthProvider,a.default.getTemporaryAttachmentUploadParameters.bind(null,e),p.connectToProjectChanges).then(_)}},t.temporaryAttachmentDropzone=function(e,t){return g("dropzone",{headless:!0,container:t})(a.default.getApiUrl,a.default.temporaryAuthProvider,a.default.getTemporaryAttachmentUploadParameters.bind(null,e),p.connectToProjectChanges)},function(e){return a.default.getApiUrl().then(function(t){var n=i({},{apiUrl:t},{authProvider:function(){return a.default.temporaryAuthProviderGetter(e)}});return n}).then(function(e){return(0,f.MediaPicker)("binary",e)}).then(function(t){return a.default.getTemporaryAttachmentUploadParameters(e).then(function(e){return t.setUploadParams(e),t})})}),S=function(e){return g("binary")(a.default.getApiUrl,a.default.temporaryAuthProvider,a.default.getTemporaryAttachmentUploadParameters.bind(null,e),p.connectToProjectChanges)};t.browser=w,t.popup=x,t.dropzone=k,t.binary=A,t.connectedTemporaryBinary=S},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(4),s=r(a),u=n(8),c=r(u),l=n(9),f=r(l),d=n(11),h=r(d),p=n(16),v=r(p),m=n(20),y=r(m),b=n(23),g=r(b),_=n(7),w=r(_);n(24);var x=(0,c.default)(),k=function(e){return e.ok?e.json():e.text().then(function(t){t=t||"Unexpected error",t="Credentials request failure: "+t+" (http status code: "+e.status+")";var n=new Error(t);throw n.description=t,n})},A=function(e){return[x+"/rest/api/2/attachment/upload/issue/"+e+"/credentials",{credentials:"same-origin"}]},S=function(e){return[x+"/rest/api/2/attachment/upload/project/"+e+"/credentials",{credentials:"same-origin"}]},P=function(e,t){return[x+"/rest/api/2/attachment/upload/issue/"+e,{credentials:"same-origin",method:"POST",body:JSON.stringify({fileId:t}),headers:{"Content-Type":"application/json"}}]},O=function(e,t,n){return[x+"/rest/api/2/attachment/upload/project/"+e,{credentials:"same-origin",method:"POST",body:JSON.stringify({fileId:t,formToken:n}),headers:{"Content-Type":"application/json"}}]},I=function(){return new Request(x+"/rest/internal/latest/media/user/credentials",{credentials:"same-origin"})},E={fetchMetadata:!1,autoFinalize:!0},j=function(e){return Promise.resolve(e).then(F).then(k).then(function(e){var t=e.token,n=e.targetCollection,r=e.tokenDurationInMins;return o({},{token:t,targetCollection:n},isNaN(r)?{}:{tokenDurationInMins:r})})},T=function(e){return Promise.resolve(e).then(fetch).then(k).then(function(e){var t=e.id,n=e.token,r=e.tokenDurationInMins;return o({},{clientId:t,token:n},isNaN(r)?{}:{tokenDurationInMins:r})})},C=function(e){return 60*((e.tokenDurationInMins||10)-1)*1e3},M=(0,g.default)(function(e){return Promise.resolve(e).then(A).then(j)},C),U=(0,g.default)(function(e){return Promise.resolve(e).then(S).then(j)},C),L=(0,g.default)(function(e){return Promise.resolve(e).then(I).then(T)},C),F=function(e){var t=i(e,2),n=t[0],r=t[1];return fetch(n,r)},R=w.default.memoize(function(){return new Promise(function(e){e(s.default.getMediaCredentials())}).then(function(e){if(e&&e.apiClientId)return e.apiClientId;throw new Error("Media clientId is missing or have unexpected format")}).catch(function(e){return Promise.reject({name:"Could not retrieve clientId",description:(0,y.default)(e)})})}),N=function(e){return R().then(function(t){return U.get(e).then(function(e){return{clientId:t,token:e.token}})}).catch(function(e){v.default.triggerTokenFetchFailed((0,y.default)(e))})};t.default={getClientId:R,getApiUrl:w.default.memoize(function(){return new Promise(function(e){e(s.default.getMediaCredentials())}).then(function(e){if(e&&e.apiUrl)return e.apiUrl;throw new Error("Media apiUrl is missing or have unexpected format")}).catch(function(e){return Promise.reject({name:"Could not retrieve apiUrl",description:(0,y.default)(e)})})}),authProvider:function(){return R().then(function(e){return h.default.getIssueId().then(function(e){return M.get(e)}).then(function(t){return{clientId:e,token:t.token}})}).catch(function(e){v.default.triggerTokenFetchFailed((0,y.default)(e))})},userAuthProvider:function(){return Promise.resolve("userAuth").then(L.get).catch(function(e){v.default.triggerUserAuthFetchFailed((0,y.default)(e))})},temporaryAuthProvider:function(){return f.default.getProjectContext().then(function(e){return N(e)}).catch(function(e){v.default.triggerTokenFetchFailed((0,y.default)(e))})},temporaryAuthProviderGetter:N,getUploadParameters:function(){return h.default.getIssueId().then(function(e){return M.get(e)}).then(function(e){return o({},E,{collection:e.targetCollection})}).catch(function(e){return v.default.triggerUploadParametersFetchFailed((0,y.default)(e)),E})},createAttachment:function(e,t){return Promise.resolve(P(e,t)).then(F).then(k)},createTemporaryAttachment:function(e,t,n){return Promise.resolve(O(e,t,n)).then(F).then(k)},getTemporaryAttachmentUploadParameters:function(e){return Promise.resolve(e).then(U.get).then(function(e){return o({},E,{collection:e.targetCollection})}).catch(function(e){return v.default.triggerUploadParametersFetchFailed((0,y.default)(e)),E})},reset:function(){M.clear()}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(5),o=r(i),a=n(6),s=r(a),u=n(7),c=r(u),l="com.atlassian.jira.jira-attachment-plugin:integrate-attachment-upload.integration-configuration",f=["\\","/",'"',":","?","*","<","|",">"],d=o.default.getWRM("upload-limit")||1/0,h=o.default.getWRM("thumbnail-mime-types"),p=c.default.memoize(function(){return s.default.claim(l)});t.default={getInvalidChars:function(){return f},getMaxFileSize:function(){return d},getThumbnailMimeType:function(){return h},getMediaCredentials:function(){var e=p(),t=e.apiUrl,n=e.apiClientId;return{apiUrl:t,apiClientId:n}},areAttachmentsEnabled:function(){return p().attachmentsEnabled===!0}}},function(e,t){e.exports=require("dndattachment/util/Configuration")},function(e,t){e.exports=require("wrm/data")},function(e,t){e.exports=require("underscore")},function(e,t){e.exports=require("wrm/context-path")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(10),o=r(i),a={uploadContext:null,projectId:null};t.default={getProjectContext:function(){return a.projectId?Promise.resolve(a.projectId):Promise.reject(new Error("Project id wasn't set"))},getUploadContextName:function(){return a.uploadContext&&a.uploadContext.name},getUploadContextSettings:function(){return a.uploadContext&&a.uploadContext.uploadSettings},install:function(){o.default.subscribe("upload/switch-context",function(e){a.uploadContext=e}),o.default.subscribe("project/changed",function(e){a.projectId=e})}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=new Map;t.default={subscribe:function(e,t){n.has(e)||n.set(e,[]),n.get(e).push(t)},publish:function(e,t){n.has(e)&&n.get(e).forEach(function(e){e(t)})},unsubscribe:function(e){n.forEach(function(t){for(var n=0,r=t.length;n<r;n++)t[n]===e&&(t.splice(n,1),n--)})},reset:function(){n=new Map}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(10),o=r(i),a=n(12),s=r(a),u=n(13),c=r(u),l=n(14),f=r(l),d=n(15),h=r(d),p=2e3,v=function(){return new Promise(function(e,t){var n=s.default.getSelectedIssueId(),r=void 0;n?e(n):r=setInterval(function(){n=s.default.getSelectedIssueId(),n&&(clearInterval(r),e(n))},p)})},m=void 0;c.default.bind(f.default.ISSUE_REFRESHED,function(e,t){m=Promise.resolve(t),o.default.publish("issue/changed",t)}),t.default={getIssueId:function(){return m=m||v()},getIssueKey:function(){return s.default.getSelectedIssueKey()},getIssuePermlink:function(){return h.default.get("viewissue-permlink")}}},function(e,t){e.exports=require("jira/issues/api")},function(e,t){e.exports=require("jira/util/events")},function(e,t){e.exports=require("jira/components/issueviewer/eventtypes")},function(e,t){e.exports=require("jira/util/data/meta")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(17),a=r(o),s=n(19),u=r(s),c=n(20),l=r(c),f=n(21),d=r(f),h=n(22),p=r(h),v={stopInitialising:function(e){this.initialising=!1,this.popupInitialised=e},startRequest:function(e){this.requestStartedTime=a.default.current(),this.source=e},getData:function(e){var t=e.error,n=e.fileSize,r=e.uploadId;return{msSinceLastUserAction:a.default.since(this.requestStartedTime),initialising:this.initialising,popupInitialised:this.popupInitialised,source:this.source,error:(0,d.default)(t),fileSize:n,uploadId:r}},reset:function(){this.initialising=!0,this.popupInitialised=!1,this.requestStartedTime=Number.MAX_VALUE}};v.reset();var m=function(e,t){return AJS.trigger("analytics",{name:e,data:t})},y=function(e,t){return m(e,v.getData(t||{}))},b=function(e,t){return m(e,i({},{source:v.source},t))};t.default={triggerPopupInitialized:function(){v.stopInitialising(!0),y("issue.attachment.media-picker.popup-initialized")},triggerUserNotLoggedIn:function(){v.stopInitialising(!1),y("issue.attachment.media-picker.user-not-logged")},triggerPopupError:function(e){y("issue.attachment.media-picker.popup-error",{error:e})},triggerGenericPopupInitialisationError:function(e){y("issue.attachment.media-picker.generic-popup-initialisation-error",{error:e})},triggerAttachRequested:function(e){v.startRequest(e);var t="issue.attachment.media-picker.attach-requested";y(t),p.default.trigger("legacy-gas-v2-event",t)},triggerPopupShown:function(){y("issue.attachment.media-picker.popup-shown")},triggerPopupFailedToShow:function(e){y("issue.attachment.media-picker.popup-failed-to-show",{error:e})},triggerAttachFileBrowserShown:function(){y("issue.attachment.media-picker.browse-shown")},triggerAttachFileBrowserFailedToShow:function(e){y("issue.attachment.media-picker.browse-failed-to-show",{error:e})},triggerInitialisationException:function(e){e=(0,l.default)(e),v.stopInitialising(!1),y("issue.attachment.media-picker.initialisation-exception",{error:e})},triggerFileUploadFinished:function(e){y("issue.attachment.media-picker.file-upload-finished",{uploadId:e})},triggerAttachmentCreatedInJIRA:function(e){y("issue.attachment.media-picker.attachment-created-in-jira",{uploadId:e})},triggerCantCreateAttachmentInJIRA:function(e,t){y("issue.attachment.media-picker.cant-create-attachment-in-jira",{error:e,uploadId:t})},triggerUploadStarted:function(e,t){y("issue.attachment.media-picker.upload-started",{uploadId:e,fileSize:t})},triggerUploadError:function(e,t){y("issue.attachment.media-picker.upload-error",{error:e,uploadId:t})},triggerUploadCancelled:function(e){y("issue.attachment.media-picker.upload-cancelled",{uploadId:e})},triggerUploadValidationFailed:function(e,t){y("issue.attachment.media-picker.upload-validation-failed",{error:e,uploadId:t})},triggerInitializationTimeout:function(){y("issue.attachment.media-picker.initialization-timeout")},triggerTokenFetchFailed:function(e){y("issue.attachment.media-picker.error.token-fetch",{error:e})},triggerUserAuthFetchFailed:function(e){y("issue.attachment.media-picker.popup-error.user-auth-fetch",{error:e})},triggerUploadParametersFetchFailed:function(e){y("issue.attachment.media-picker.error.upload-params-fetch",{error:e})},triggerUploadRequestedWhenNotInitialised:function(){y("issue.attachment.media-picker.upload-request.not-initialised")},triggerBrowserRequestedWhenNotInitialised:function(){y("issue.attachment.media-picker.upload-request.browser.not-initialised")},triggerTemporaryAttachmentCreatedInJIRA:function(e){b("issue.attachment.media-picker.temporary.attachment-created-in-jira",{uploadId:e})},triggerCantCreateTemporaryAttachmentInJIRA:function(e,t){b("issue.attachment.media-picker.temporary.cant-create-attachment-in-jira",{error:e,uploadId:t})},triggerPopupMetrics:function(){var e=i({"dom.loaded":u.default.getDomContentLoadedTiming()},u.default.getMarksForNamespace("attachments.media.components.popup"));AJS.trigger("analytics",{name:"issue.attachment.media-picker.popup-metrics",data:e})},getRequestIdentifier:function(){return v.requestIdentifier},reset:function(){v.reset()}}},function(e,t,n){(function(e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={current:function(){return Math.round(e&&e.performance&&e.performance.now())},since:function(e){return Math.round(this.current()-e)},schedule:function(e,t){return setTimeout(e,t)},cancel:function(e){clearTimeout(e)}}}).call(t,n(18))},function(e,t,n){(function(t){"use strict";e.exports="object"==typeof self&&self.self===self&&self||"object"==typeof t&&t.global===t&&t||this}).call(t,n(18))},function(e,t,n){(function(e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={mark:function(t){return e&&e.performance&&e.performance.mark(t)},getMarksForNamespace:function(t){var n={};if(e&&e.performance){e.performance.getEntriesByType("mark").filter(function(e){return 0===e.name.indexOf(t)}).forEach(function(e){var t=e.name,r=e.startTime;return n[t]=parseInt(r,10)})}return n},getDomContentLoadedTiming:function(){var t=e&&e.performance&&e.performance.timing;return t?parseInt(t.domContentLoadedEventStart-t.navigationStart,10):0}}}).call(t,n(18))},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r=function(e){return"undefined"!=typeof e},i=function(e){return r(e.config)&&r(e.config.headers)&&r(e.response)&&r(e.response.config)&&r(e.response.config.headers)};t.default=function(e){if(r(e.name)&&r(e.message))return e.toString();if(r(e.name)&&r(e.description))return e.name+": "+e.description;if(r(e.message))return e.message;if("string"==typeof e)return e;if(i(e)){var t=n({},e);return delete t.config.headers.Authorization,delete t.response.config.headers.Authorization,""+e}return""+e}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return"string"==typeof e&&e.indexOf("Authorization")!==-1?"Error sanitized":e}},function(e,t){e.exports=require("jira/customevents/trigger-custom-event")},function(e,t){"use strict";function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!1},n=new Map;return{get:function(i){if(!n.has(i)){var o=e(i).then(function(e){var o=t(e);return o&&setTimeout(function(){return r(n,i)},o),e}).catch(function(e){throw r(n,i),e});n.set(i,o)}return n.get(i)},clear:function(){n.clear()}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var r=function(e,t){return e.has(t)&&e.delete(t)}},function(e,t){!function(e){"use strict";function t(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function n(e){return"string"!=typeof e&&(e=String(e)),e}function r(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return y.iterable&&(t[Symbol.iterator]=function(){return t}),t}function i(e){this.map={},e instanceof i?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function o(e){return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function a(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function s(e){var t=new FileReader,n=a(t);return t.readAsArrayBuffer(e),n}function u(e){var t=new FileReader,n=a(t);return t.readAsText(e),n}function c(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}function l(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function f(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(y.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(y.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(y.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(y.arrayBuffer&&y.blob&&g(e))this._bodyArrayBuffer=l(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!y.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!_(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=l(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):y.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},y.blob&&(this.blob=function(){var e=o(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?o(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(s)}),this.text=function(){var e=o(this);if(e)return e;if(this._bodyBlob)return u(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(c(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},y.formData&&(this.formData=function(){return this.text().then(p)}),this.json=function(){return this.text().then(JSON.parse)},this}function d(e){var t=e.toUpperCase();return w.indexOf(t)>-1?t:e}function h(e,t){t=t||{};var n=t.body;if(e instanceof h){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new i(e.headers)),this.method=e.method,this.mode=e.mode,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new i(t.headers)),this.method=d(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function p(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}}),t}function v(e){var t=new i;return e.split(/\r?\n/).forEach(function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();t.append(r,i)}}),t}function m(e,t){t||(t={}),this.type="default",this.status="status"in t?t.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new i(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var y={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(y.arrayBuffer)var b=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],g=function(e){return e&&DataView.prototype.isPrototypeOf(e)},_=ArrayBuffer.isView||function(e){return e&&b.indexOf(Object.prototype.toString.call(e))>-1};i.prototype.append=function(e,r){e=t(e),r=n(r);var i=this.map[e];this.map[e]=i?i+","+r:r},i.prototype.delete=function(e){delete this.map[t(e)]},i.prototype.get=function(e){return e=t(e),this.has(e)?this.map[e]:null},i.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},i.prototype.set=function(e,r){this.map[t(e)]=n(r)},i.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},i.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),r(e)},i.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),r(e)},i.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),r(e)},y.iterable&&(i.prototype[Symbol.iterator]=i.prototype.entries);var w=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];h.prototype.clone=function(){return new h(this,{body:this._bodyInit})},f.call(h.prototype),f.call(m.prototype),m.prototype.clone=function(){return new m(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new i(this.headers),url:this.url})},m.error=function(){var e=new m(null,{status:0,statusText:""});return e.type="error",e};var x=[301,302,303,307,308];m.redirect=function(e,t){if(x.indexOf(t)===-1)throw new RangeError("Invalid status code");return new m(null,{status:t,headers:{location:e}})},e.Headers=i,e.Request=h,e.Response=m,e.fetch=function(e,t){return new Promise(function(n,r){var i=new h(e,t),o=new XMLHttpRequest;o.onload=function(){var e={status:o.status,statusText:o.statusText,headers:v(o.getAllResponseHeaders()||"")};e.url="responseURL"in o?o.responseURL:e.headers.get("X-Request-URL");var t="response"in o?o.response:o.responseText;n(new m(t,e))},o.onerror=function(){r(new TypeError("Network request failed"))},o.ontimeout=function(){r(new TypeError("Network request failed"))},o.open(i.method,i.url,!0),"include"===i.credentials&&(o.withCredentials=!0),"responseType"in o&&y.blob&&(o.responseType="blob"),i.headers.forEach(function(e,t){o.setRequestHeader(t,e)}),o.send("undefined"==typeof i._bodyInit?null:i._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},function(e,t,n){!function(e,t){for(var n in t)e[n]=t[n]}(t,function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="lib/",t(t.s=149)}([function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){"use strict";t.__esModule=!0;var r=n(159),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,i.default)(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()},function(e,t){var n=e.exports={version:"2.5.1"};"number"==typeof __e&&(__e=n)},function(e,t,n){var r=n(61)("wks"),i=n(42),o=n(4).Symbol,a="function"==typeof o;(e.exports=function(e){return r[e]||(r[e]=a&&o[e]||(a?o:i)("Symbol."+e))}).store=r},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){var r=n(4),i=n(2),o=n(14),a=n(15),s=function(e,t,n){var u,c,l,f=e&s.F,d=e&s.G,h=e&s.S,p=e&s.P,v=e&s.B,m=e&s.W,y=d?i:i[t]||(i[t]={}),b=y.prototype,g=d?r:h?r[t]:(r[t]||{}).prototype;d&&(n=t);for(u in n)(c=!f&&g&&void 0!==g[u])&&u in y||(l=c?g[u]:n[u],y[u]=d&&"function"!=typeof g[u]?n[u]:v&&c?o(l,r):m&&g[u]==l?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(l):p&&"function"==typeof l?o(Function.call,l):l,p&&((y.virtual||(y.virtual={}))[u]=l,e&s.R&&b&&!b[u]&&a(b,u,l)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,e.exports=s},function(e,t,n){"use strict";function r(e){return"[object Array]"===k.call(e)}function i(e){return"[object ArrayBuffer]"===k.call(e)}function o(e){return"undefined"!=typeof FormData&&e instanceof FormData}function a(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer}function s(e){return"string"==typeof e}function u(e){return"number"==typeof e}function c(e){return void 0===e}function l(e){return null!==e&&"object"==typeof e}function f(e){return"[object Date]"===k.call(e)}function d(e){return"[object File]"===k.call(e)}function h(e){return"[object Blob]"===k.call(e)}function p(e){return"[object Function]"===k.call(e)}function v(e){return l(e)&&p(e.pipe)}function m(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams}function y(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}function b(){return"undefined"!=typeof window&&"undefined"!=typeof document&&"function"==typeof document.createElement}function g(e,t){if(null!==e&&void 0!==e)if("object"==typeof e||r(e)||(e=[e]),r(e))for(var n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}function _(){function e(e,n){"object"==typeof t[n]&&"object"==typeof e?t[n]=_(t[n],e):t[n]=e}for(var t={},n=0,r=arguments.length;n<r;n++)g(arguments[n],e);return t}function w(e,t,n){return g(t,function(t,r){e[r]=n&&"function"==typeof t?x(t,n):t}),e}var x=n(117),k=Object.prototype.toString;e.exports={isArray:r,isArrayBuffer:i,isFormData:o,isArrayBufferView:a,isString:s,isNumber:u,isObject:l,isUndefined:c,isDate:f,isFile:d,isBlob:h,isFunction:p,isStream:v,isURLSearchParams:m,isStandardBrowserEnv:b,forEach:g,merge:_,extend:w,trim:y}},function(e,t,n){(function(t,n){/*!
	 * @overview es6-promise - a tiny implementation of Promises/A+.
	 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
	 * @license   Licensed under MIT license
	 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
	 * @version   4.1.1
	 */
!function(t,r){e.exports=function(){"use strict";function e(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)}function i(e){return"function"==typeof e}function o(e){V=e}function a(e){J=e}function s(){return void 0!==$?function(){$(c)}:u()}function u(){var e=setTimeout;return function(){return e(c,1)}}function c(){for(var e=0;e<q;e+=2)(0,X[e])(X[e+1]),X[e]=void 0,X[e+1]=void 0;q=0}function l(e,t){var n=arguments,r=this,i=new this.constructor(d);void 0===i[ee]&&T(i);var o=r._state;return o?function(){var e=n[o-1];J(function(){return I(o,i,e,r._result)})}():A(r,i,e,t),i}function f(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(d);return _(n,e),n}function d(){}function h(){return new TypeError("You cannot resolve a promise with itself")}function p(){return new TypeError("A promises callback cannot return that same promise.")}function v(e){try{return e.then}catch(e){return ie.error=e,ie}}function m(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}function y(e,t,n){J(function(e){var r=!1,i=m(n,t,function(n){r||(r=!0,t!==n?_(e,n):x(e,n))},function(t){r||(r=!0,k(e,t))},"Settle: "+(e._label||" unknown promise"));!r&&i&&(r=!0,k(e,i))},e)}function b(e,t){t._state===ne?x(e,t._result):t._state===re?k(e,t._result):A(t,void 0,function(t){return _(e,t)},function(t){return k(e,t)})}function g(e,t,n){t.constructor===e.constructor&&n===l&&t.constructor.resolve===f?b(e,t):n===ie?(k(e,ie.error),ie.error=null):void 0===n?x(e,t):i(n)?y(e,t,n):x(e,t)}function _(t,n){t===n?k(t,h()):e(n)?g(t,n,v(n)):x(t,n)}function w(e){e._onerror&&e._onerror(e._result),S(e)}function x(e,t){e._state===te&&(e._result=t,e._state=ne,0!==e._subscribers.length&&J(S,e))}function k(e,t){e._state===te&&(e._state=re,e._result=t,J(w,e))}function A(e,t,n,r){var i=e._subscribers,o=i.length;e._onerror=null,i[o]=t,i[o+ne]=n,i[o+re]=r,0===o&&e._state&&J(S,e)}function S(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,i=void 0,o=e._result,a=0;a<t.length;a+=3)r=t[a],i=t[a+n],r?I(n,r,i,o):i(o);e._subscribers.length=0}}function P(){this.error=null}function O(e,t){try{return e(t)}catch(e){return oe.error=e,oe}}function I(e,t,n,r){var o=i(n),a=void 0,s=void 0,u=void 0,c=void 0;if(o){if(a=O(n,r),a===oe?(c=!0,s=a.error,a.error=null):u=!0,t===a)return void k(t,p())}else a=r,u=!0;t._state!==te||(o&&u?_(t,a):c?k(t,s):e===ne?x(t,a):e===re&&k(t,a))}function E(e,t){try{t(function(t){_(e,t)},function(t){k(e,t)})}catch(t){k(e,t)}}function j(){return ae++}function T(e){e[ee]=ae++,e._state=void 0,e._result=void 0,e._subscribers=[]}function C(e,t){this._instanceConstructor=e,this.promise=new e(d),this.promise[ee]||T(this.promise),H(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?x(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&x(this.promise,this._result))):k(this.promise,M())}function M(){return new Error("Array Methods must be provided an Array")}function U(e){return new C(this,e).promise}function L(e){var t=this;return new t(H(e)?function(n,r){for(var i=e.length,o=0;o<i;o++)t.resolve(e[o]).then(n,r)}:function(e,t){return t(new TypeError("You must pass an array to race."))})}function F(e){var t=this,n=new t(d);return k(n,e),n}function R(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function N(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function z(e){this[ee]=j(),this._result=this._state=void 0,this._subscribers=[],d!==e&&("function"!=typeof e&&R(),this instanceof z?E(this,e):N())}function D(){var e=void 0;if(void 0!==n)e=n;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var r=null;try{r=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===r&&!t.cast)return}e.Promise=z}var B=void 0;B=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var H=B,q=0,$=void 0,V=void 0,J=function(e,t){X[q]=e,X[q+1]=t,2===(q+=2)&&(V?V(c):Z())},W="undefined"!=typeof window?window:void 0,K=W||{},G=K.MutationObserver||K.WebKitMutationObserver,Y="undefined"==typeof self&&void 0!==t&&"[object process]"==={}.toString.call(t),Q="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,X=new Array(1e3),Z=void 0;Z=Y?function(){return function(){return t.nextTick(c)}}():G?function(){var e=0,t=new G(c),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}():Q?function(){var e=new MessageChannel;return e.port1.onmessage=c,function(){return e.port2.postMessage(0)}}():void 0===W?function(){try{var e=r(209);return $=e.runOnLoop||e.runOnContext,s()}catch(e){return u()}}():u();var ee=Math.random().toString(36).substring(16),te=void 0,ne=1,re=2,ie=new P,oe=new P,ae=0;return C.prototype._enumerate=function(e){for(var t=0;this._state===te&&t<e.length;t++)this._eachEntry(e[t],t)},C.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===f){var i=v(e);if(i===l&&e._state!==te)this._settledAt(e._state,t,e._result);else if("function"!=typeof i)this._remaining--,this._result[t]=e;else if(n===z){var o=new n(d);g(o,e,i),this._willSettleAt(o,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(r(e),t)},C.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===te&&(this._remaining--,e===re?k(r,n):this._result[t]=n),0===this._remaining&&x(r,this._result)},C.prototype._willSettleAt=function(e,t){var n=this;A(e,void 0,function(e){return n._settledAt(ne,t,e)},function(e){return n._settledAt(re,t,e)})},z.all=U,z.race=L,z.resolve=f,z.reject=F,z._setScheduler=o,z._setAsap=a,z._asap=J,z.prototype={constructor:z,then:l,catch:function(e){return this.then(null,e)}},z.polyfill=D,z.Promise=z,z}()}()}).call(t,n(78),n(52))},function(e,t,n){var r=n(140)("wks"),i=n(141),o=n(13).Symbol,a="function"==typeof o;(e.exports=function(e){return r[e]||(r[e]=a&&o[e]||(a?o:i)("Symbol."+e))}).store=r},function(e,t,n){var r=n(10),i=n(92),o=n(63),a=Object.defineProperty;t.f=n(12)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(11);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){e.exports=!n(18)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){var r=n(29);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){var r=n(9),i=n(43);e.exports=n(12)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){e.exports={default:n(156),__esModule:!0}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){"use strict";t.__esModule=!0;var r=n(93),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,i.default)(t))&&"function"!=typeof t?e:t}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=n(178),o=r(i),a=n(182),s=r(a),u=n(93),c=r(u);t.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,c.default)(t)));e.prototype=(0,s.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(o.default?(0,o.default)(e,t):e.__proto__=t)}},function(e,t,n){e.exports={default:n(187),__esModule:!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(110),i=n(25);t.handleError=function(e,t){var n=Error().stack||"",o=t||"",a=e+": "+o+" \n "+n;(new r.UserTracker).track()(new i.ErrorException(e,n,t)),console.error(a)}},function(e,t){e.exports={}},function(e,t,n){var r=n(66),i=n(59);e.exports=function(e){return r(i(e))}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(16),o=r(i),a=n(19),s=r(a),u=n(20),c=r(u),l=n(0),f=r(l),d=n(1),h=r(d);Object.defineProperty(t,"__esModule",{value:!0});var p=function(){function e(t,n){(0,f.default)(this,e),this.prefix="files.mediapicker-web.",this.name=this.prefix+t,this.properties=n}return(0,h.default)(e,[{key:"toJSON",value:function(){return{name:this.name,properties:this.properties}}}]),e}();t.UserEvent=p;var v=function(e){function t(){return(0,f.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,"library.loaded",{}))}return(0,c.default)(t,e),t}(p);t.MediaPickerLoaded=v;var m=function(e){function t(){return(0,f.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,"browser.loaded",{}))}return(0,c.default)(t,e),t}(p);t.MPBrowserLoaded=m;var y=function(e){function t(){return(0,f.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,"dropzone.loaded",{}))}return(0,c.default)(t,e),t}(p);t.MPDropzoneLoaded=y;var b=function(e){function t(){return(0,f.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,"cliboard.loaded",{}))}return(0,c.default)(t,e),t}(p);t.MPClipboardLoaded=b;var g=function(e){function t(){return(0,f.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,"popup.loaded",{}))}return(0,c.default)(t,e),t}(p);t.MPPopupLoaded=g;var _=function(e){function t(){return(0,f.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,"popup.shown",{}))}return(0,c.default)(t,e),t}(p);t.MPPopupShown=_;var w=function(e){function t(){return(0,f.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,"popup.hidden",{}))}return(0,c.default)(t,e),t}(p);t.MPPopupHidden=w;var x=function(e){function t(){return(0,f.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,"file.upload.ended",{}))}return(0,c.default)(t,e),t}(p);t.MPFileUploadEnded=x;var k=function(e){function t(){return(0,f.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,"file.upload.started",{}))}return(0,c.default)(t,e),t}(p);t.MPFileUploadStarted=k;var A=function(e){function t(){return(0,f.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,"file.processing.started",{}))}return(0,c.default)(t,e),t}(p);t.MPFileProcessingStarted=A;var S=function(e){function t(e,n,r){(0,f.default)(this,t);var i={alias:e,description:r,stacktrace:n};return(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,"files.mediapicker-web.library.exception.fired",i))}return(0,c.default)(t,e),t}(p);t.ErrorException=S},function(e,t){e.exports=n(26)},function(e,t,n){var r=n(55),i=n(138);e.exports=n(37)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(56);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){"use strict";var r=n(164)(!0);n(65)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var r=n(9).f,i=n(17),o=n(3)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},function(e,t,n){n(169);for(var r=n(4),i=n(15),o=n(23),a=n(3)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<s.length;u++){var c=s[u],l=r[c],f=l&&l.prototype;f&&!f[a]&&i(f,a,c),o[c]=o.Array}},function(e,t,n){var r=n(14),i=n(189),o=n(190),a=n(10),s=n(67),u=n(102),c={},l={},t=e.exports=function(e,t,n,f,d){var h,p,v,m,y=d?function(){return e}:u(e),b=r(n,f,t?2:1),g=0;if("function"!=typeof y)throw TypeError(e+" is not iterable!");if(o(y)){for(h=s(e.length);h>g;g++)if((m=t?b(a(p=e[g])[0],p[1]):b(e[g]))===c||m===l)return m}else for(v=y.call(e);!(p=v.next()).done;)if((m=i(v,b,p.value,t))===c||m===l)return m};t.BREAK=c,t.RETURN=l},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n(53),i=n(80),o=n(122),a=n(112),s=function(e,t){return o.checkWebpSupport().then(function(t){return e.accept=t?"image/webp,image/*,*/*;q=0.8":"image/*,*/*;q=0.8",e})},u=function(t,n,i,o){var u=r.__assign({},n,{"Content-Type":"application/json"});return i||(a.isAsapBasedAuth(t)?u["X-Issuer"]=t.asapIssuer:a.isClientBasedAuth(t)&&(u["X-Client-Id"]=t.clientId),u.Authorization="Bearer "+t.token),"image"===o?s(u):e.resolve(u)},c=function(t,n,i,o){var s={};return i&&(s.token=t.token,a.isClientBasedAuth(t)?s.client=t.clientId:a.isAsapBasedAuth(t)&&(s.issuer=t.asapIssuer)),e.resolve(r.__assign({collection:o},n,s))},l=function(e){return e=e||"json",{image:"blob",json:"json"}[e]};t.default=function(t){var n=t.preventPreflight,r=t.collectionName,o=t.config,a=o.authProvider,s=o.serviceHost;return function(t){var o=t.url,f=t.headers,d=t.params,h=t.responseType,p=t.method,v=t.data,m=a({collectionName:r}),y=function(t){return e.all([u(t,f,n,h),c(t,d,n,r)])},b=function(e){var t=e[0],n=e[1];return i.default({method:p||"get",url:o,baseURL:s,headers:t,params:n,data:v,responseType:l(h)})};return m.then(y).then(b).then(function(e){return e.data})}}}).call(t,n(7))},function(e,t){var n=e.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},function(e,t,n){e.exports=!n(137)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){e.exports={}},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(r[o]=!0)}for(i=0;i<t.length;i++){var a=t[i];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}},function(e,t){function n(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=d[r.id];if(i){i.refs++;for(var o=0;o<i.parts.length;o++)i.parts[o](r.parts[o]);for(;o<r.parts.length;o++)i.parts.push(u(r.parts[o],t))}else{for(var a=[],o=0;o<r.parts.length;o++)a.push(u(r.parts[o],t));d[r.id]={id:r.id,refs:1,parts:a}}}}function r(e){for(var t=[],n={},r=0;r<e.length;r++){var i=e[r],o=i[0],a=i[1],s=i[2],u=i[3],c={css:a,media:s,sourceMap:u};n[o]?n[o].parts.push(c):t.push(n[o]={id:o,parts:[c]})}return t}function i(e,t){var n=v(),r=b[b.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),b.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function o(e){e.parentNode.removeChild(e);var t=b.indexOf(e);t>=0&&b.splice(t,1)}function a(e){var t=document.createElement("style");return t.type="text/css",i(e,t),t}function s(e){var t=document.createElement("link");return t.rel="stylesheet",i(e,t),t}function u(e,t){var n,r,i;if(t.singleton){var u=y++;n=m||(m=a(t)),r=c.bind(null,n,u,!1),i=c.bind(null,n,u,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=s(t),r=f.bind(null,n),i=function(){o(n),n.href&&URL.revokeObjectURL(n.href)}):(n=a(t),r=l.bind(null,n),i=function(){o(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}function c(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=g(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}function l(e,t){var n=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function f(e,t){var n=t.css,r=t.sourceMap;r&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var i=new Blob([n],{type:"text/css"}),o=e.href;e.href=URL.createObjectURL(i),o&&URL.revokeObjectURL(o)}var d={},h=function(e){var t;return function(){return void 0===t&&(t=e.apply(this,arguments)),t}},p=h(function(){return/msie [6-9]\b/.test(self.navigator.userAgent.toLowerCase())}),v=h(function(){return document.head||document.getElementsByTagName("head")[0]}),m=null,y=0,b=[];e.exports=function(e,t){t=t||{},void 0===t.singleton&&(t.singleton=p()),void 0===t.insertAt&&(t.insertAt="bottom");var i=r(e);return n(i,t),function(e){for(var o=[],a=0;a<i.length;a++){var s=i[a],u=d[s.id];u.refs--,o.push(u)}e&&n(r(e),t);for(var a=0;a<o.length;a++){var u=o[a];if(0===u.refs){for(var c=0;c<u.parts.length;c++)u.parts[c]();delete d[u.id]}}}};var g=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t,n){var r=n(59);e.exports=function(e){return Object(r(e))}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){e.exports=!0},function(e,t,n){var r=n(10),i=n(166),o=n(68),a=n(60)("IE_PROTO"),s=function(){},u=function(){var e,t=n(62)("iframe"),r=o.length;for(t.style.display="none",n(96).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write("<script>document.F=Object</script>"),e.close(),u=e.F;r--;)delete u.prototype[o[r]];return u()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=r(e),n=new s,s.prototype=null,n[a]=e):n=u(),void 0===t?n:i(n,t)}},function(e,t,n){var r=n(95),i=n(68);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(16),o=r(i),a=n(0),s=r(a),u=n(1),c=r(u),l=n(19),f=r(l),d=n(20),h=r(d);Object.defineProperty(t,"__esModule",{value:!0});var p=n(185),v=n(132),m=n(271),y=function(e){function t(e,n){var r=n.apiUrl,i=n.authProvider,a=n.uploadParams;(0,s.default)(this,t);var u=(0,f.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return u.onFilesAdded=function(e){var t=e.files;u.emitUploadsStart(t)},u.onFileAdded=function(e){var t=e.file;u.emitUploadStart(t),t.raw&&t.type.match(/^image\//)&&m.default(t.raw).then(function(e){u.emitUploadPreviewUpdate(t,e)})},u.onFileUploading=function(e){var t=e.file,n=e.progress;u.emitUploadProgress(t,n)},u.onFileFinalizeReady=function(e){var t=e.file,n=e.finalize;u.emitUploadFinalizeReady(t,n)},u.onFileConverting=function(e){var t=e.file;u.emitUploadProcessing(t)},u.onFileConverted=function(e){var t=e.file,n=e.progress,r=e.metadata;u.emitUploadProgress(t,n),u.emitUploadEnd(t,r)},u.onUploadError=function(e){var t=e.file,n=e.error;u.emitUploadError(t,n)},u.uploadService=new p.UploadService(r,i,a||{}),u.uploadService.on("files-added",u.onFilesAdded),u.uploadService.on("file-added",u.onFileAdded),u.uploadService.on("file-uploading",u.onFileUploading),u.uploadService.on("file-finalize-ready",u.onFileFinalizeReady),u.uploadService.on("file-converting",u.onFileConverting),u.uploadService.on("file-converted",u.onFileConverted),u.uploadService.on("file-upload-error",u.onUploadError),u}return(0,h.default)(t,e),(0,c.default)(t,[{key:"cancel",value:function(e){this.uploadService.cancel(e)}},{key:"setUploadParams",value:function(e){this.uploadService.setUploadParams(e)}}]),t}(v.MPComponent);t.MediaLocalUpload=y},function(e,t,n){var r=n(31),i=n(3)("toStringTag"),o="Arguments"==r(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,n,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=a(t=Object(e),i))?n:o?r(t):"Object"==(s=r(t))&&"function"==typeof t.callee?"Arguments":s}},function(e,t,n){e.exports={default:n(203),__esModule:!0}},function(e,t,n){var r=n(207),i=n(208),o=i;o.v1=r,o.v4=i,e.exports=o},function(e,t,n){"use strict";(function(t){e.exports="object"==typeof self&&self.self===self&&self||"object"==typeof t&&t.global===t&&t||this}).call(t,n(52))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){function r(e,t){function n(){this.constructor=e}b(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function i(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]]);return n}function o(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}function a(e,t){return function(n,r){t(n,r,e)}}function s(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function u(t,n,r,i){return new(r||(r=e))(function(e,o){function a(e){try{u(i.next(e))}catch(e){o(e)}}function s(e){try{u(i.throw(e))}catch(e){o(e)}}function u(t){t.done?e(t.value):new r(function(e){e(t.value)}).then(a,s)}u((i=i.apply(t,n||[])).next())})}function c(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,o&&(a=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(o,n[1])).done)return a;switch(o=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,o=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(a=u.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){u.label=n[1];break}if(6===n[0]&&u.label<a[1]){u.label=a[1],a=n;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(n);break}a[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(e){n=[6,e],o=0}finally{i=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,o,a,s,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s}function l(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}function f(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function d(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function h(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(d(arguments[t]));return e}function p(e){return this instanceof p?(this.v=e,this):new p(e)}function v(t,n,r){function i(t){f[t]&&(l[t]=function(n){return new e(function(e,r){d.push([t,n,e,r])>1||o(t,n)})})}function o(e,t){try{a(f[e](t))}catch(e){c(d[0][3],e)}}function a(t){t.value instanceof p?e.resolve(t.value.v).then(s,u):c(d[0][2],t)}function s(e){o("next",e)}function u(e){o("throw",e)}function c(e,t){e(t),d.shift(),d.length&&o(d[0][0],d[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var l,f=r.apply(t,n||[]),d=[];return l={},i("next"),i("throw"),i("return"),l[Symbol.asyncIterator]=function(){return this},l}function m(e){function t(t,i){e[t]&&(n[t]=function(n){return(r=!r)?{value:p(e[t](n)),done:"return"===t}:i?i(n):n})}var n,r;return n={},t("next"),t("throw",function(e){throw e}),t("return"),n[Symbol.iterator]=function(){return this},n}function y(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator];return t?t.call(e):"function"==typeof f?f(e):e[Symbol.iterator]()}t.__extends=r,n.d(t,"__assign",function(){return g}),t.__rest=i,t.__decorate=o,t.__param=a,t.__metadata=s,t.__awaiter=u,t.__generator=c,t.__exportStar=l,t.__values=f,t.__read=d,t.__spread=h,t.__await=p,t.__asyncGenerator=v,t.__asyncDelegator=m,t.__asyncValues=y;/*! *****************************************************************************
	Copyright (c) Microsoft Corporation. All rights reserved.
	Licensed under the Apache License, Version 2.0 (the "License"); you may not use
	this file except in compliance with the License. You may obtain a copy of the
	License at http://www.apache.org/licenses/LICENSE-2.0

	THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
	KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
	WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
	MERCHANTABLITY OR NON-INFRINGEMENT.

	See the Apache Version 2.0 License for specific language governing permissions
	and limitations under the License.
	***************************************************************************** */
var b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},g=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e}}.call(t,n(7))},function(e,t,n){var r=n(86);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){var r=n(28),i=n(276),o=n(277),a=Object.defineProperty;t.f=n(37)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var r=n(61)("keys"),i=n(42);e.exports=function(e){return r[e]||(r[e]=i(e))}},function(e,t,n){var r=n(4),i=r["__core-js_shared__"]||(r["__core-js_shared__"]={});e.exports=function(e){return i[e]||(i[e]={})}},function(e,t,n){var r=n(11),i=n(4).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,n){var r=n(11);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){"use strict";var r=n(44),i=n(5),o=n(94),a=n(15),s=n(17),u=n(23),c=n(165),l=n(32),f=n(91),d=n(3)("iterator"),h=!([].keys&&"next"in[].keys()),p=function(){return this};e.exports=function(e,t,n,v,m,y,b){c(n,t,v);var g,_,w,x=function(e){if(!h&&e in P)return P[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},k=t+" Iterator",A="values"==m,S=!1,P=e.prototype,O=P[d]||P["@@iterator"]||m&&P[m],I=O||x(m),E=m?A?x("entries"):I:void 0,j="Array"==t?P.entries||O:O;if(j&&(w=f(j.call(new e)))!==Object.prototype&&w.next&&(l(w,k,!0),r||s(w,d)||a(w,d,p)),A&&O&&"values"!==O.name&&(S=!0,I=function(){return O.call(this)}),r&&!b||!h&&!S&&P[d]||a(P,d,I),u[t]=I,u[k]=p,m)if(g={values:A?I:x("values"),keys:y?I:x("keys"),entries:E},b)for(_ in g)_ in P||o(P,_,g[_]);else i(i.P+i.F*(h||S),t,g);return g}},function(e,t,n){var r=n(31);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t,n){var r=n(64),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){t.f=n(3)},function(e,t,n){var r=n(42)("meta"),i=n(11),o=n(17),a=n(9).f,s=0,u=Object.isExtensible||function(){return!0},c=!n(18)(function(){return u(Object.preventExtensions({}))}),l=function(e){a(e,r,{value:{i:"O"+ ++s,w:{}}})},f=function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,r)){if(!u(e))return"F";if(!t)return"E";l(e)}return e[r].i},d=function(e,t){if(!o(e,r)){if(!u(e))return!0;if(!t)return!1;l(e)}return e[r].w},h=function(e){return c&&p.NEED&&u(e)&&!o(e,r)&&l(e),e},p=e.exports={KEY:r,NEED:!1,fastKey:f,getWeak:d,onFreeze:h}},function(e,t,n){var r=n(4),i=n(2),o=n(44),a=n(69),s=n(9).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t){},function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){"use strict";function r(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r}),this.resolve=i(t),this.reject=i(n)}var i=n(29);e.exports.f=function(e){return new r(e)}},function(e,t,n){var r=n(15);e.exports=function(e,t,n){for(var i in t)n&&e[i]?e[i]=t[i]:r(e,i,t[i]);return e}},function(e,t,n){(function(r,i){var o;!function(a){function s(){this._events={},this._conf&&u.call(this,this._conf)}function u(e){e?(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),this._maxListeners=e.maxListeners!==a?e.maxListeners:p,e.wildcard&&(this.wildcard=e.wildcard),e.newListener&&(this.newListener=e.newListener),e.verboseMemoryLeak&&(this.verboseMemoryLeak=e.verboseMemoryLeak),this.wildcard&&(this.listenerTree={})):this._maxListeners=p}function c(e,t){var n="(node) warning: possible EventEmitter memory leak detected. "+e+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(n+=" Event name: "+t+"."),void 0!==r&&r.emitWarning){var i=new Error(n);i.name="MaxListenersExceededWarning",i.emitter=this,i.count=e,r.emitWarning(i)}else console.error(n),console.trace&&console.trace()}function l(e){this._events={},this.newListener=!1,this.verboseMemoryLeak=!1,u.call(this,e)}function f(e,t,n,r){if(!n)return[];var i,o,a,s,u,c,l,d=[],h=t.length,p=t[r],v=t[r+1];if(r===h&&n._listeners){if("function"==typeof n._listeners)return e&&e.push(n._listeners),[n];for(i=0,o=n._listeners.length;i<o;i++)e&&e.push(n._listeners[i]);return[n]}if("*"===p||"**"===p||n[p]){if("*"===p){for(a in n)"_listeners"!==a&&n.hasOwnProperty(a)&&(d=d.concat(f(e,t,n[a],r+1)));return d}if("**"===p){(l=r+1===h||r+2===h&&"*"===v)&&n._listeners&&(d=d.concat(f(e,t,n,h)));for(a in n)"_listeners"!==a&&n.hasOwnProperty(a)&&("*"===a||"**"===a?(n[a]._listeners&&!l&&(d=d.concat(f(e,t,n[a],h))),d=d.concat(f(e,t,n[a],r))):d=a===v?d.concat(f(e,t,n[a],r+2)):d.concat(f(e,t,n[a],r)));return d}d=d.concat(f(e,t,n[p],r+1))}if(s=n["*"],s&&f(e,t,s,r+1),u=n["**"])if(r<h){u._listeners&&f(e,t,u,h);for(a in u)"_listeners"!==a&&u.hasOwnProperty(a)&&(a===v?f(e,t,u[a],r+2):a===p?f(e,t,u[a],r+1):(c={},c[a]=u[a],f(e,t,{"**":c},r+1)))}else u._listeners?f(e,t,u,h):u["*"]&&u["*"]._listeners&&f(e,t,u["*"],h);return d}function d(e,t){e="string"==typeof e?e.split(this.delimiter):e.slice();for(var n=0,r=e.length;n+1<r;n++)if("**"===e[n]&&"**"===e[n+1])return;for(var i=this.listenerTree,o=e.shift();o!==a;){if(i[o]||(i[o]={}),i=i[o],0===e.length)return i._listeners?("function"==typeof i._listeners&&(i._listeners=[i._listeners]),i._listeners.push(t),!i._listeners.warned&&this._maxListeners>0&&i._listeners.length>this._maxListeners&&(i._listeners.warned=!0,c.call(this,i._listeners.length,o))):i._listeners=t,!0;o=e.shift()}return!0}var h=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},p=10;l.EventEmitter2=l,l.prototype.delimiter=".",l.prototype.setMaxListeners=function(e){e!==a&&(this._maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e)},l.prototype.event="",l.prototype.once=function(e,t){return this._once(e,t,!1)},l.prototype.prependOnceListener=function(e,t){return this._once(e,t,!0)},l.prototype._once=function(e,t,n){return this._many(e,1,t,n),this},l.prototype.many=function(e,t,n){return this._many(e,t,n,!1)},l.prototype.prependMany=function(e,t,n){return this._many(e,t,n,!0)},l.prototype._many=function(e,t,n,r){function i(){return 0==--t&&o.off(e,i),n.apply(this,arguments)}var o=this;if("function"!=typeof n)throw new Error("many only accepts instances of Function");return i._origin=n,this._on(e,i,r),o},l.prototype.emit=function(){this._events||s.call(this);var e=arguments[0];if("newListener"===e&&!this.newListener&&!this._events.newListener)return!1;var t,n,r,i,o,a=arguments.length;if(this._all&&this._all.length){if(o=this._all.slice(),a>3)for(t=new Array(a),i=0;i<a;i++)t[i]=arguments[i];for(r=0,n=o.length;r<n;r++)switch(this.event=e,a){case 1:o[r].call(this,e);break;case 2:o[r].call(this,e,arguments[1]);break;case 3:o[r].call(this,e,arguments[1],arguments[2]);break;default:o[r].apply(this,t)}}if(this.wildcard){o=[];var u="string"==typeof e?e.split(this.delimiter):e.slice();f.call(this,o,u,this.listenerTree,0)}else{if("function"==typeof(o=this._events[e])){switch(this.event=e,a){case 1:o.call(this);break;case 2:o.call(this,arguments[1]);break;case 3:o.call(this,arguments[1],arguments[2]);break;default:for(t=new Array(a-1),i=1;i<a;i++)t[i-1]=arguments[i];o.apply(this,t)}return!0}o&&(o=o.slice())}if(o&&o.length){if(a>3)for(t=new Array(a-1),i=1;i<a;i++)t[i-1]=arguments[i];for(r=0,n=o.length;r<n;r++)switch(this.event=e,a){case 1:o[r].call(this);break;case 2:o[r].call(this,arguments[1]);break;case 3:o[r].call(this,arguments[1],arguments[2]);break;default:o[r].apply(this,t)}return!0}if(!this._all&&"error"===e)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},l.prototype.emitAsync=function(){this._events||s.call(this);var e=arguments[0];if("newListener"===e&&!this.newListener&&!this._events.newListener)return i.resolve([!1]);var t,n,r,o,a,u=[],c=arguments.length;if(this._all){if(c>3)for(t=new Array(c),o=1;o<c;o++)t[o]=arguments[o];for(r=0,n=this._all.length;r<n;r++)switch(this.event=e,c){case 1:u.push(this._all[r].call(this,e));break;case 2:u.push(this._all[r].call(this,e,arguments[1]));break;case 3:u.push(this._all[r].call(this,e,arguments[1],arguments[2]));break;default:u.push(this._all[r].apply(this,t))}}if(this.wildcard){a=[];var l="string"==typeof e?e.split(this.delimiter):e.slice();f.call(this,a,l,this.listenerTree,0)}else a=this._events[e];if("function"==typeof a)switch(this.event=e,c){case 1:u.push(a.call(this));break;case 2:u.push(a.call(this,arguments[1]));break;case 3:u.push(a.call(this,arguments[1],arguments[2]));break;default:for(t=new Array(c-1),o=1;o<c;o++)t[o-1]=arguments[o];u.push(a.apply(this,t))}else if(a&&a.length){if(a=a.slice(),c>3)for(t=new Array(c-1),o=1;o<c;o++)t[o-1]=arguments[o];for(r=0,n=a.length;r<n;r++)switch(this.event=e,c){case 1:u.push(a[r].call(this));break;case 2:u.push(a[r].call(this,arguments[1]));break;case 3:u.push(a[r].call(this,arguments[1],arguments[2]));break;default:u.push(a[r].apply(this,t))}}else if(!this._all&&"error"===e)return arguments[1]instanceof Error?i.reject(arguments[1]):i.reject("Uncaught, unspecified 'error' event.");return i.all(u)},l.prototype.on=function(e,t){return this._on(e,t,!1)},l.prototype.prependListener=function(e,t){return this._on(e,t,!0)},l.prototype.onAny=function(e){return this._onAny(e,!1)},l.prototype.prependAny=function(e){return this._onAny(e,!0)},l.prototype.addListener=l.prototype.on,l.prototype._onAny=function(e,t){if("function"!=typeof e)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),t?this._all.unshift(e):this._all.push(e),this},l.prototype._on=function(e,t,n){if("function"==typeof e)return this._onAny(e,t),this;if("function"!=typeof t)throw new Error("on only accepts instances of Function");return this._events||s.call(this),this.emit("newListener",e,t),this.wildcard?(d.call(this,e,t),this):(this._events[e]?("function"==typeof this._events[e]&&(this._events[e]=[this._events[e]]),n?this._events[e].unshift(t):this._events[e].push(t),!this._events[e].warned&&this._maxListeners>0&&this._events[e].length>this._maxListeners&&(this._events[e].warned=!0,c.call(this,this._events[e].length,e))):this._events[e]=t,this)},l.prototype.off=function(e,t){function n(e){if(e!==a){var t=Object.keys(e);for(var r in t){var i=t[r],o=e[i];o instanceof Function||"object"!=typeof o||null===o||(Object.keys(o).length>0&&n(e[i]),0===Object.keys(o).length&&delete e[i])}}}if("function"!=typeof t)throw new Error("removeListener only takes instances of Function");var r,i=[];if(this.wildcard){var o="string"==typeof e?e.split(this.delimiter):e.slice();i=f.call(this,null,o,this.listenerTree,0)}else{if(!this._events[e])return this;r=this._events[e],i.push({_listeners:r})}for(var s=0;s<i.length;s++){var u=i[s];if(r=u._listeners,h(r)){for(var c=-1,l=0,d=r.length;l<d;l++)if(r[l]===t||r[l].listener&&r[l].listener===t||r[l]._origin&&r[l]._origin===t){c=l;break}if(c<0)continue;return this.wildcard?u._listeners.splice(c,1):this._events[e].splice(c,1),0===r.length&&(this.wildcard?delete u._listeners:delete this._events[e]),this.emit("removeListener",e,t),this}(r===t||r.listener&&r.listener===t||r._origin&&r._origin===t)&&(this.wildcard?delete u._listeners:delete this._events[e],this.emit("removeListener",e,t))}return n(this.listenerTree),this},l.prototype.offAny=function(e){var t,n=0,r=0;if(e&&this._all&&this._all.length>0){for(t=this._all,n=0,r=t.length;n<r;n++)if(e===t[n])return t.splice(n,1),this.emit("removeListenerAny",e),this}else{for(t=this._all,n=0,r=t.length;n<r;n++)this.emit("removeListenerAny",t[n]);this._all=[]}return this},l.prototype.removeListener=l.prototype.off,l.prototype.removeAllListeners=function(e){if(0===arguments.length)return!this._events||s.call(this),this;if(this.wildcard)for(var t="string"==typeof e?e.split(this.delimiter):e.slice(),n=f.call(this,null,t,this.listenerTree,0),r=0;r<n.length;r++){var i=n[r];i._listeners=null}else this._events&&(this._events[e]=null);return this},l.prototype.listeners=function(e){if(this.wildcard){var t=[],n="string"==typeof e?e.split(this.delimiter):e.slice();return f.call(this,t,n,this.listenerTree,0),t}return this._events||s.call(this),this._events[e]||(this._events[e]=[]),h(this._events[e])||(this._events[e]=[this._events[e]]),this._events[e]},l.prototype.eventNames=function(){return Object.keys(this._events)},l.prototype.listenerCount=function(e){return this.listeners(e).length},l.prototype.listenersAny=function(){return this._all?this._all:[]},(o=function(){return l}.call(t,n,t,e))!==a&&(e.exports=o)}()}).call(t,n(78),n(7))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(l===setTimeout)return setTimeout(e,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function o(e){if(f===clearTimeout)return clearTimeout(e);if((f===r||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function a(){v&&h&&(v=!1,h.length?p=h.concat(p):m=-1,p.length&&s())}function s(){if(!v){var e=i(a);v=!0;for(var t=p.length;t;){for(h=p,p=[];++m<t;)h&&h[m].run();m=-1,t=p.length}h=null,v=!1,o(e)}}function u(e,t){this.fun=e,this.array=t}function c(){}var l,f,d=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(e){l=n}try{f="function"==typeof clearTimeout?clearTimeout:r}catch(e){f=r}}();var h,p=[],v=!1,m=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new u(e,t)),1!==p.length||v||i(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=c,d.addListener=c,d.once=c,d.off=c,d.removeListener=c,d.removeAllListeners=c,d.emit=c,d.prependListener=c,d.prependOnceListener=c,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t){e.exports=n(40)},function(e,t,n){e.exports=n(220)},function(e,t,n){"use strict";(function(t){function r(e,t){!i.isUndefined(e)&&i.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var i=n(6),o=n(222),a=/^\)\]\}',?\n/,s={"Content-Type":"application/x-www-form-urlencoded"},u={adapter:function(){var e;return"undefined"!=typeof XMLHttpRequest?e=n(118):void 0!==t&&(e=n(118)),e}(),transformRequest:[function(e,t){return o(t,"Content-Type"),i.isFormData(e)||i.isArrayBuffer(e)||i.isStream(e)||i.isFile(e)||i.isBlob(e)?e:i.isArrayBufferView(e)?e.buffer:i.isURLSearchParams(e)?(r(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):i.isObject(e)?(r(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e){e=e.replace(a,"");try{e=JSON.parse(e)}catch(e){}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};u.headers={common:{Accept:"application/json, text/plain, */*"}},i.forEach(["delete","get","head"],function(e){u.headers[e]={}}),i.forEach(["post","put","patch"],function(e){u.headers[e]=i.merge(s)}),e.exports=u}).call(t,n(78))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.referenceCountById={},this.referencesById={}}return e.prototype.acquire=function(e,t){return this.referenceCountById[e]||(this.referencesById[e]=t(),this.referenceCountById[e]=0),this.referenceCountById[e]=this.referenceCountById[e]+1,this.referencesById[e]},e.prototype.release=function(e){this.referenceCountById[e]>0&&(this.referenceCountById[e]=this.referenceCountById[e]-1),this.referenceCountById[e]||delete this.referencesById[e]},e}();t.Pool=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(21),o=r(i),a=n(0),s=r(a),u=n(1),c=r(u),l=n(50),f=r(l);Object.defineProperty(t,"__esModule",{value:!0});var d=n(80),h=n(111);t.isTokenError=function(e){if(e&&e.error){var t=e.error.code;return"JwtAuthoriser:TokenExpiredError"===t||"JwtAuthoriser:AuthenticationError"===t}return!1},t.addAuthToHeaders=function(e,t){var n=e.headers||{};return(0,f.default)({},e,{headers:(0,f.default)({},n,h.mapAuthToAuthHeaders(t))})},t.addAuthToQueryParameters=function(e,t){return(0,f.default)({},e,{parameters:(0,f.default)({},e.parameters,h.mapAuthToQueryParameters(t))})};var p=function(){function e(t,n,r){(0,s.default)(this,e),this.apiUrl=t,this.authProvider=n,this.collection=r}return(0,c.default)(e,[{key:"refreshAuth",value:function(){var e=this;return this.authProvider({collectionName:this.collection}).then(function(t){return e.auth=t,t})}},{key:"call",value:function(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.addAuthToHeaders;return this.makeCall(e,r).catch(function(i){if(!(i&&i.response&&t.isTokenError(i.response.data)))throw i;return n.makeCall(e,r,!0)})}},{key:"makeCall",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.getAuth(r).then(function(r){return n.makeCallWithToken(e,t,r)})}},{key:"getAuth",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.auth&&!e?o.default.resolve(this.auth):this.refreshAuth()}},{key:"makeCallWithToken",value:function(e,t,n){var r=t(e,n),i=this.getAxiosRequestConfig(r);return d.default.request(i).then(function(e){return e.data})}},{key:"getAxiosRequestConfig",value:function(e){var t=e.httpMethod,n=e.mediaApiMethod,r=e.parameters,i=e.headers,o=e.data;return{url:this.apiUrl+"/"+n,method:t,headers:(0,f.default)({},i,o?{"Content-Type":"application/json; charset=utf-8"}:{}),params:r,data:o}}},{key:"storedAuth",get:function(){return this.auth}}]),e}();t.MediaClient=p},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var r=n(56),i=n(13).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,n){var r=n(284),i=n(85);e.exports=function(e){return r(i(e))}},function(e,t,n){var r=n(140)("keys"),i=n(141);e.exports=function(e){return r[e]||(r[e]=i(e))}},function(e,t,n){var r=n(55).f,i=n(57),o=n(8)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},function(e,t,n){var r=n(17),i=n(41),o=n(60)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){e.exports=!n(12)&&!n(18)(function(){return 7!=Object.defineProperty(n(62)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=n(162),o=r(i),a=n(171),s=r(a),u="function"==typeof s.default&&"symbol"==typeof o.default?function(e){return typeof e}:function(e){return e&&"function"==typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":typeof e};t.default="function"==typeof s.default&&"symbol"===u(o.default)?function(e){return void 0===e?"undefined":u(e)}:function(e){return e&&"function"==typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":void 0===e?"undefined":u(e)}},function(e,t,n){e.exports=n(15)},function(e,t,n){var r=n(17),i=n(24),o=n(167)(!1),a=n(60)("IE_PROTO");e.exports=function(e,t){var n,s=i(e),u=0,c=[];for(n in s)n!=a&&r(s,n)&&c.push(n);for(;t.length>u;)r(s,n=t[u++])&&(~o(c,n)||c.push(n));return c}},function(e,t,n){var r=n(4).document;e.exports=r&&r.documentElement},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){var r=n(31);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(95),i=n(68).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},function(e,t,n){var r=n(47),i=n(43),o=n(24),a=n(63),s=n(17),u=n(92),c=Object.getOwnPropertyDescriptor;t.f=n(12)?c:function(e,t){if(e=o(e),t=a(t,!0),u)try{return c(e,t)}catch(e){}if(s(e,t))return i(!r.f.call(e,t),e[t])}},function(e,t,n){e.exports={default:n(186),__esModule:!0}},function(e,t,n){var r=n(49),i=n(3)("iterator"),o=n(23);e.exports=n(2).getIteratorMethod=function(e){if(void 0!=e)return e[i]||e["@@iterator"]||o[r(e)]}},function(e,t,n){var r=n(10),i=n(29),o=n(3)("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||void 0==(n=r(a)[o])?t:i(n)}},function(e,t,n){var r,i,o,a=n(14),s=n(191),u=n(96),c=n(62),l=n(4),f=l.process,d=l.setImmediate,h=l.clearImmediate,p=l.MessageChannel,v=l.Dispatch,m=0,y={},b=function(){var e=+this;if(y.hasOwnProperty(e)){var t=y[e];delete y[e],t()}},g=function(e){b.call(e.data)};d&&h||(d=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return y[++m]=function(){s("function"==typeof e?e:Function(e),t)},r(m),m},h=function(e){delete y[e]},"process"==n(31)(f)?r=function(e){f.nextTick(a(b,e,1))}:v&&v.now?r=function(e){v.now(a(b,e,1))}:p?(i=new p,o=i.port2,i.port1.onmessage=g,r=a(o.postMessage,o,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(r=function(e){l.postMessage(e+"","*")},l.addEventListener("message",g,!1)):r="onreadystatechange"in c("script")?function(e){u.appendChild(c("script")).onreadystatechange=function(){u.removeChild(this),b.call(e)}}:function(e){setTimeout(a(b,e,1),0)}),e.exports={set:d,clear:h}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,n){var r=n(10),i=n(11),o=n(75);e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=o.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){"use strict";var r=n(4),i=n(2),o=n(9),a=n(12),s=n(3)("species");e.exports=function(e){var t="function"==typeof i[e]?i[e]:r[e];a&&t&&!t[s]&&o.f(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,n){(function(t){var n,r=t.crypto||t.msCrypto;if(r&&r.getRandomValues){var i=new Uint8Array(16);n=function(){return r.getRandomValues(i),i}}if(!n){var o=new Array(16);n=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),o[t]=e>>>((3&t)<<3)&255;return o}}e.exports=n}).call(t,n(52))},function(e,t){function n(e,t){var n=t||0,i=r;return i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]}for(var r=[],i=0;i<256;++i)r[i]=(i+256).toString(16).substr(1);e.exports=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(50),o=r(i),a=n(0),s=r(a),u=n(1),c=r(u);Object.defineProperty(t,"__esModule",{value:!0});var l=n(210),f=function(){function e(){(0,s.default)(this,e),this.defaults={storage_key:"media-picker.herment.storage",product:"media-picker",subproduct:"library",version:"1.0"},this.queue=[],this.queueProcessor=l.default((0,o.default)({},this.defaults,{queue:this.queue})),this.queueProcessor&&this.queueProcessor.start(),this.defaultProperties={}}return(0,c.default)(e,[{key:"track",value:function(){var e=this;return function(t){var n=t.toJSON();n.properties=(0,o.default)({},e.defaultProperties,n.properties),e.queue.push(n)}}}]),e}();t.UserTracker=f},function(e,t,n){"use strict";function r(e){return o.isClientBasedAuth(e)?{"X-Client-Id":e.clientId,Authorization:"Bearer "+e.token}:{"X-Issuer":e.asapIssuer,Authorization:"Bearer "+e.token}}function i(e){return o.isClientBasedAuth(e)?{client:e.clientId,token:e.token}:{issuer:e.asapIssuer,token:e.token}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(212);t.mapAuthToAuthHeaders=r,t.mapAuthToQueryParameters=i},function(e,t,n){"use strict";function r(e){return!!e.clientId}function i(e){return!!e.asapIssuer}Object.defineProperty(t,"__esModule",{value:!0}),t.isClientBasedAuth=r,t.isAsapBasedAuth=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(114);t.RemoteMediaCollectionProvider=r.RemoteMediaCollectionProvider;var i=n(116);t.FileProvider=i.FileProvider;var o=n(123);t.LinkProvider=o.LinkProvider;var a=n(239);t.MediaItemProvider=a.MediaItemProvider;var s=n(240);t.MediaUrlPreviewProvider=s.MediaUrlPreviewProvider;var u=n(126);t.UrlPreviewProvider=u.UrlPreviewProvider},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(115);n(79);var i=function(){function e(e,t,n,i){this.collectionService=e,this.collectionName=t,this.pageSize=n,this.sortDirection=i,this.subject=new r.Subject,this.connectableObservable=this.subject.publishReplay(1),this.items=[],this.nextInclusiveStartKey=void 0,this.isLoading=!1,this.connectableObservable.connect(),this.loadNextPage()}return e.prototype.observable=function(){return this.connectableObservable},e.prototype.loadNextPageUntil=function(e){var t=this;if(!this.items.some(e))var n=this.connectableObservable.subscribe({next:function(r){!t.nextInclusiveStartKey||r.items.some(e)?n.unsubscribe():t.loadNextPage()},complete:function(){return n.unsubscribe()},error:function(e){return n.unsubscribe()}})},e.prototype.loadNextPage=function(){var e=this;this.isLoading||(this.isLoading=!0,this.collectionService.getCollectionItems(this.collectionName,this.pageSize,this.nextInclusiveStartKey,this.sortDirection,"full").then(function(t){e.isLoading=!1,(r=e.items).push.apply(r,t.items);var n={id:e.collectionName,items:e.items};e.nextInclusiveStartKey=t.nextInclusiveStartKey,e.subject.next(n);var r},function(t){e.isLoading=!1,e.subject.error(t)}))},e.prototype.refresh=function(){var e=this;if(!this.isLoading){this.isLoading=!0;var t,n=this.items[0]&&this.items[0].details,r=n&&n.id,i=n&&n.occurrenceKey,o=[],a=function(){e.collectionService.getCollectionItems(e.collectionName,e.pageSize,t,e.sortDirection,"full").then(function(n){for(var s=!1,u=0,c=n.items;u<c.length;u++){var l=c[u],f=l.details,d=f.id,h=f.occurrenceKey;if(d===r&&h===i){s=!0;break}o.push(l)}s?(e.isLoading=!1,e.items=o.concat(e.items),e.subject.next({id:e.collectionName,items:e.items})):n.nextInclusiveStartKey&&(t=n.nextInclusiveStartKey,a())},function(t){e.isLoading=!1,e.subject.error(t)})};a()}},e}();t.RemoteMediaCollectionProvider=i},function(e,t){e.exports=n(43)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(219),i=n(26);n(79),t.FILE_PROVIDER_RETRY_INTERVAL=2e3;var o=function(){function e(){}return e.fromMediaApi=function(t,n,i,o,a){return e.fromFileService(new r.MediaFileService(t,n),i,o,a)},e.fromFileService=function(e,t,n,r){return{observable:function(){var o=new i.Observable(function(i){var o,a=r||1e3,s=function(){e.getFileItem(t,n).then(function(e){"pending"!==e.details.processingStatus?(i.next(e),i.complete()):(i.next(e),o=setTimeout(function(){return s()},a))},function(e){i.error(e)})};return s(),function(){null!==o&&clearTimeout(o)}}).publishReplay(1);return o.connect(),o}}},e}();t.FileProvider=o},function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},function(e,t,n){"use strict";(function(t){var r=n(6),i=n(223),o=n(225),a=n(226),s=n(227),u=n(119),c="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||n(228);e.exports=function(e){return new t(function(t,l){var f=e.data,d=e.headers;r.isFormData(f)&&delete d["Content-Type"];var h=new XMLHttpRequest,p="onreadystatechange",v=!1;if("undefined"==typeof window||!window.XDomainRequest||"withCredentials"in h||s(e.url)||(h=new window.XDomainRequest,p="onload",v=!0,h.onprogress=function(){},h.ontimeout=function(){}),e.auth){var m=e.auth.username||"",y=e.auth.password||"";d.Authorization="Basic "+c(m+":"+y)}if(h.open(e.method.toUpperCase(),o(e.url,e.params,e.paramsSerializer),!0),h.timeout=e.timeout,h[p]=function(){if(h&&(4===h.readyState||v)&&(0!==h.status||h.responseURL&&0===h.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in h?a(h.getAllResponseHeaders()):null,r=e.responseType&&"text"!==e.responseType?h.response:h.responseText,o={data:r,status:1223===h.status?204:h.status,statusText:1223===h.status?"No Content":h.statusText,headers:n,config:e,request:h};i(t,l,o),h=null}},h.onerror=function(){l(u("Network Error",e)),h=null},h.ontimeout=function(){l(u("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED")),h=null},r.isStandardBrowserEnv()){var b=n(229),g=(e.withCredentials||s(e.url))&&e.xsrfCookieName?b.read(e.xsrfCookieName):void 0;g&&(d[e.xsrfHeaderName]=g)}if("setRequestHeader"in h&&r.forEach(d,function(e,t){void 0===f&&"content-type"===t.toLowerCase()?delete d[t]:h.setRequestHeader(t,e)}),e.withCredentials&&(h.withCredentials=!0),e.responseType)try{h.responseType=e.responseType}catch(e){if("json"!==h.responseType)throw e}"function"==typeof e.onDownloadProgress&&h.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&h.upload&&h.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){h&&(h.abort(),l(e),h=null)}),void 0===f&&(f=null),h.send(f)})}}).call(t,n(7))},function(e,t,n){"use strict";var r=n(224);e.exports=function(e,t,n,i){var o=new Error(e);return r(o,t,n,i)}},function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,n){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(237)),r(n(238))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(124),i=n(26);n(79);var o=function(){function e(){}return e.fromMediaApi=function(t,n,i){return e.fromLinkService(new r.MediaLinkService(t),n,i)},e.fromLinkService=function(e,t,n){return{observable:function(){
var r=new i.Observable(function(r){return e.getLinkItem(t,n).then(function(e){r.next(e),r.complete()},function(e){r.error(e)}),function(){}}).publishReplay(1);return r.connect(),r}}},e}();t.LinkProvider=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(35),i=function(){function e(e){this.config=e}return e.prototype.getLinkItem=function(e,t){return r.default({config:this.config,collectionName:t,preventPreflight:!0})({url:"/link/"+e}).then(function(e){return e.data}).then(function(e){return{type:"link",details:{id:e.id,url:e.url,type:e.metadata.type,title:e.metadata.title,description:e.metadata.description,site:e.metadata.site,author:e.metadata.author,date:e.metadata.date,resources:e.metadata.resources}}})},e.prototype.addLinkItem=function(e,t,n){return r.default({config:this.config,collectionName:t})({method:"post",url:"/link",data:{url:e,metadata:n}}).then(function(e){return e.data.id})},e}();t.MediaLinkService=i},function(e,t,n){"use strict";function r(e,t,n){return new i.Observable(function(r){var i=e.acquire(t,n),o=i.subscribe(r);return function(){o.unsubscribe(),e.release(t)}})}Object.defineProperty(t,"__esModule",{value:!0});var i=n(26);t.observableFromObservablePool=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(241),i=n(26),o=function(){function e(){}return e.fromMediaApi=function(t,n){return e.fromUrlPreviewService(new r.MediaUrlPreviewService(t),n)},e.fromUrlPreviewService=function(e,t){return{observable:function(){return new i.Observable(function(n){return e.getUrlPreview(t).then(function(e){n.next(e),n.complete()},function(e){n.error(e)}),function(){}})}}},e}();t.UrlPreviewProvider=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(53),i=n(35);t.DEFAULT_COLLECTION_PAGE_SIZE=10;var o=function(){function e(e){this.config=e}return e.prototype.mapToMediaCollectionItem=function(e){var t=e.id,n=e.type,i=e.occurrenceKey,o=e.details;if("file"===n){var a=o;return{type:"file",details:r.__assign({id:t,occurrenceKey:i},a)}}var s=o;return{type:"link",details:r.__assign({id:t,type:"link",occurrenceKey:i,title:s.title||""},s)}},e.prototype.getCollectionItems=function(e,n,r,o,a){var s=this;return void 0===n&&(n=t.DEFAULT_COLLECTION_PAGE_SIZE),i.default({config:this.config,preventPreflight:!0,collectionName:e})({url:"/collection/"+e+"/items",params:{limit:n,inclusiveStartKey:r,sortDirection:o,details:a}}).then(function(e){return{items:e.data.contents.map(s.mapToMediaCollectionItem),nextInclusiveStartKey:e.data.nextInclusiveStartKey}})},e}();t.MediaCollectionService=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(0),o=r(i),a=n(1),s=r(a);Object.defineProperty(t,"__esModule",{value:!0}),t.ERROR_NAMES={OBJ_CREATE_FAIL:"object_create_fail",METADATA_FETCH_FAIL:"metadata_fetch_fail",TOKEN_FETCH_FAIL:"token_fetch_fail",TOKEN_UPDATE_FAIL:"token_update_fail",TOKEN_SOURCE_EMPTY:"token_source_empty",UPLOAD_FAIL:"upload_fail",USER_TOKEN_FETCH_FAIL:"user_token_fetch_fail"};var u=function(){function e(t,n,r){(0,o.default)(this,e),this.fileId=t,this.name=n,this.description=r}return(0,s.default)(e,[{key:"toJSON",value:function(){return{fileId:this.fileId,name:this.name,description:this.description}}}]),e}();t.MediaError=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(246),o=r(i),a=n(0),s=r(a),u=n(1),c=r(u);Object.defineProperty(t,"__esModule",{value:!0});var l=n(22),f=function(){function e(t,n,r,i,o,a,u){(0,s.default)(this,e),e.isValidFileId(t)||l.handleError("wrong_file_id","Passed fileId is incorrect."),e.isValidName(n)||l.handleError("wrong_file_name","Passed file name is incorrect."),e.isValidSize(r)||l.handleError("wrong_file_size","Passed file size is incorrect."),e.isValidCreationDate(i)||l.handleError("wrong_file_date","Passed file creation date is incorrect."),e.isValidType(o)||l.handleError("wrong_file_type","Passed file type is incorrect."),this.id=t,this.name=n,this.size=r,this.creationDate=i,this.type=o,this.publicId=a,this.resumableFile=u}return(0,c.default)(e,[{key:"toJSON",value:function(){return{id:this.id,name:this.name,size:this.size,creationDate:this.creationDate,type:this.type,publicId:this.publicId,chunks:this.chunks,toPureJSON:this.toPureJSON.bind(this)}}},{key:"toPureJSON",value:function(){return{id:this.id,name:this.name,size:this.size,creationDate:this.creationDate,type:this.type,publicId:this.publicId}}},{key:"_isImage",value:function(){return new o.default(["image/png","image/jpeg","image/jpg","image/gif"]).has(this.type)}},{key:"chunks",get:function(){return this.resumableFile?this.resumableFile.chunks:void 0}},{key:"raw",get:function(){return this.resumableFile?this.resumableFile.file:void 0}},{key:"preview",get:function(){return this._isImage()?this.raw:void 0}}],[{key:"isValidFileId",value:function(e){return"string"==typeof e&&e.length>0}},{key:"isValidName",value:function(e){return"string"==typeof e}},{key:"isValidType",value:function(e){return"string"==typeof e}},{key:"isValidSize",value:function(e){return"number"==typeof e&&e>=0}},{key:"isValidCreationDate",value:function(e){return"number"==typeof e&&e>0}}]),e}();t.MediaFile=f},function(e,t,n){var r=n(11);e.exports=function(e,t){if(!r(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultUploadParams={collection:void 0,fetchMetadata:!0,autoFinalize:!0}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(0),o=r(i),a=n(1),s=r(a);Object.defineProperty(t,"__esModule",{value:!0});var u=n(270),c=n(77),l=n(22),f=n(25),d=function(){function e(t){(0,o.default)(this,e),this.context=t,this.emitter=new c.EventEmitter2({wildcard:!0})}return(0,s.default)(e,[{key:"once",value:function(e,t){this.emitter.once(e,t)}},{key:"on",value:function(e,t){this.emitter.on(e,t)}},{key:"onAny",value:function(e){this.emitter.onAny(e)}},{key:"addListener",value:function(e,t){this.emitter.addListener(e,t)}},{key:"off",value:function(e,t){this.emitter.off(e,t)}},{key:"removeListener",value:function(e,t){this.emitter.removeListener(e,t)}},{key:"removeAllListeners",value:function(e){this.emitter.removeAllListeners(e)}},{key:"emit",value:function(e,t){return this.emitter.emit(e,t)}},{key:"emitUploadsStart",value:function(e){this.emit("uploads-start",{files:e.map(function(e){return e.toJSON()})})}},{key:"emitUploadStart",value:function(e){this.emit("upload-start",{file:e.toJSON()}),this.context.trackEvent(new f.MPFileUploadStarted)}},{key:"emitUploadProgress",value:function(e,t){this.emit("upload-status-update",{file:e.toJSON(),progress:t})}},{key:"emitUploadFinalizeReady",value:function(e,t){this.emit("upload-finalize-ready",{file:e.toJSON(),finalize:t})}},{key:"emitUploadPreviewUpdate",value:function(e,t){this.emit("upload-preview-update",{file:e.toJSON(),preview:t})}},{key:"emitUploadProcessing",value:function(e){this.emit("upload-processing",{file:e.toJSON()}),this.context.trackEvent(new f.MPFileProcessingStarted)}},{key:"emitUploadEnd",value:function(e,t){this.emit("upload-end",{file:e.toJSON(),public:t}),this.context.trackEvent(new f.MPFileUploadEnded)}},{key:"emitUploadError",value:function(e,t){this.emit("upload-error",{file:e.toJSON(),error:t.toJSON()})}},{key:"getStaticAssetUrl",value:function(e){return void 0===u.html[e]&&l.handleError("wrong_static_asset","The passet static asset does not exist"),!0===u.usingVersions?u.baseUrl+"/"+u.version+"/"+u.html[e]:u.baseUrl+"/"+u.html[e]}}]),e}();t.MPComponent=d},function(e,t,n){e.exports={default:n(272),__esModule:!0}},function(e,t,n){"use strict";var r=n(135),i=n(136),o=n(278),a=n(27),s=n(57),u=n(38),c=n(279),l=n(90),f=n(287),d=n(8)("iterator"),h=!([].keys&&"next"in[].keys()),p=function(){return this};e.exports=function(e,t,n,v,m,y,b){c(n,t,v);var g,_,w,x=function(e){if(!h&&e in P)return P[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},k=t+" Iterator",A="values"==m,S=!1,P=e.prototype,O=P[d]||P["@@iterator"]||m&&P[m],I=O||x(m),E=m?A?x("entries"):I:void 0,j="Array"==t?P.entries||O:O;if(j&&(w=f(j.call(new e)))!==Object.prototype&&(l(w,k,!0),r||s(w,d)||a(w,d,p)),A&&O&&"values"!==O.name&&(S=!0,I=function(){return O.call(this)}),r&&!b||!h&&!S&&P[d]||a(P,d,I),u[t]=I,u[k]=p,m)if(g={values:A?I:x("values"),keys:y?I:x("keys"),entries:E},b)for(_ in g)_ in P||o(P,_,g[_]);else i(i.P+i.F*(h||S),t,g);return g}},function(e,t){e.exports=!0},function(e,t,n){var r=n(13),i=n(36),o=n(54),a=n(27),s=function(e,t,n){var u,c,l,f=e&s.F,d=e&s.G,h=e&s.S,p=e&s.P,v=e&s.B,m=e&s.W,y=d?i:i[t]||(i[t]={}),b=y.prototype,g=d?r:h?r[t]:(r[t]||{}).prototype;d&&(n=t);for(u in n)(c=!f&&g&&void 0!==g[u])&&u in y||(l=c?g[u]:n[u],y[u]=d&&"function"!=typeof g[u]?n[u]:v&&c?o(l,r):m&&g[u]==l?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(l):p&&"function"==typeof l?o(Function.call,l):l,p&&((y.virtual||(y.virtual={}))[u]=l,e&s.R&&b&&!b[u]&&a(b,u,l)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,e.exports=s},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var r=n(84),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t,n){var r=n(13),i=r["__core-js_shared__"]||(r["__core-js_shared__"]={});e.exports=function(e){return i[e]||(i[e]={})}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){e.exports=n(13).document&&document.documentElement},function(e,t,n){var r=n(58),i=n(8)("toStringTag"),o="Arguments"==r(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,n,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=a(t=Object(e),i))?n:o?r(t):"Object"==(s=r(t))&&"function"==typeof t.callee?"Arguments":s}},function(e,t,n){var r,i,o,a=n(54),s=n(300),u=n(143),c=n(87),l=n(13),f=l.process,d=l.setImmediate,h=l.clearImmediate,p=l.MessageChannel,v=0,m={},y=function(){var e=+this;if(m.hasOwnProperty(e)){var t=m[e];delete m[e],t()}},b=function(e){y.call(e.data)};d&&h||(d=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return m[++v]=function(){s("function"==typeof e?e:Function(e),t)},r(v),v},h=function(e){delete m[e]},"process"==n(58)(f)?r=function(e){f.nextTick(a(y,e,1))}:p?(i=new p,o=i.port2,i.port1.onmessage=b,r=a(o.postMessage,o,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(r=function(e){l.postMessage(e+"","*")},l.addEventListener("message",b,!1)):r="onreadystatechange"in c("script")?function(e){u.appendChild(c("script")).onreadystatechange=function(){u.removeChild(this),y.call(e)}}:function(e){setTimeout(a(y,e,1),0)}),e.exports={set:d,clear:h}},function(e,t,n){var r=n(307);"string"==typeof r&&(r=[[e.i,r,""]]),n(40)(r,{}),r.locals&&(e.exports=r.locals)},function(e,t,n){/*!
	  * domready (c) Dustin Diaz 2014 - License MIT
	  */
!function(t,n){e.exports=function(){var e,t=[],n=document,r=n.documentElement.doScroll,i=(r?/^loaded|^c/:/^loaded|^i|^c/).test(n.readyState);return i||n.addEventListener("DOMContentLoaded",e=function(){for(n.removeEventListener("DOMContentLoaded",e),i=1;e=t.shift();)e()}),function(e){i?setTimeout(e,0):t.push(e)}}()}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseHTML=function(e){var t=document.createElement("div");return t.innerHTML=e,t.childNodes[0]}},function(e,t,n){e.exports=n(150)},function(e,t,n){"use strict";function r(e,t,n){if(!t)return{binary:i.BinaryUploader,browser:o.Browser,clipboard:a.Clipboard,dropzone:s.Dropzone,popup:u.Popup}[e];var r={trackEvent:f};switch(e){case"binary":return new i.BinaryUploader(r,t);case"browser":return new o.Browser(r,t,n);case"clipboard":return new a.Clipboard(r,t);case"dropzone":return new s.Dropzone(r,t,n);case"popup":return new u.Popup(r,t,n);default:var c="The component "+e+" does not exist";throw l.handleError("wrong_component",c),new Error(c)}}Object.defineProperty(t,"__esModule",{value:!0}),n(151),n(153);var i=n(155);t.BinaryUploader=i.BinaryUploader;var o=n(306);t.Browser=o.Browser;var a=n(308);t.Clipboard=a.Clipboard;var s=n(309);t.Dropzone=s.Dropzone;var u=n(313);t.Popup=u.Popup;var c=n(110),l=n(22),f=(new c.UserTracker).track();t.MediaPicker=r},function(e,t,n){var r=n(152);"string"==typeof r&&(r=[[e.i,r,""]]),n(40)(r,{}),r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(39)(),t.push([e.i,'.mpAUI{color:#333;font-family:Arial,sans-serif;font-size:14px;line-height:1.42857143}.mpAUI h2{color:#333;font-size:24px;font-weight:400;line-height:1.25;text-transform:none;margin:30px 0 0}.mpAUI .aui-dialog2-header-close img{width:16px!important;height:16px!important;position:relative;top:2px;opacity:.5}.mpAUI .aui-dialog2-header-close:hover img{opacity:1}.mpAUI .aui-dialog2{box-sizing:border-box;position:relative;left:0;right:0;visibility:hidden}.mpAUI .aui-dialog2-xlarge{width:980px;min-height:431px}.mpAUI .aui-dialog2-small .aui-dialog2-content{min-height:80px}.mpAUI .aui-dialog2-medium .aui-dialog2-content{min-height:180px}.mpAUI .aui-dialog2-large .aui-dialog2-content,.mpAUI .aui-dialog2-xlarge .aui-dialog2-content{min-height:380px}@media (max-height:700px){.mpAUI .aui-dialog2-large .aui-dialog2-content,.mpAUI .aui-dialog2-xlarge .aui-dialog2-content{min-height:180px}.mpAUI .aui-dialog2-large,.mpAUI .aui-dialog2-xlarge{min-height:131px;height:-120%}}@media (max-height:500px){.mpAUI .aui-dialog2-large .aui-dialog2-content,.mpAUI .aui-dialog2-medium .aui-dialog2-content,.mpAUI .aui-dialog2-xlarge .aui-dialog2-content{min-height:80px}.mpAUI .aui-dialog2-medium{min-height:131px;height:-120%}}@media (max-width:1000px){.mpAUI .aui-dialog2-xlarge{width:100%;height:-20%}.mpAUI .aui-dialog2-xlarge.aui-layer{top:69px}.mpAUI .aui-dialog2-xlarge .aui-dialog2-content{height:100%}}@media (max-width:820px){.mpAUI .aui-dialog2-large{width:100%;height:-20%}.mpAUI .aui-dialog2-large.aui-layer{top:69px}.mpAUI .aui-dialog2-large .aui-dialog2-content{height:100%}}@media (max-width:620px){.mpAUI .aui-dialog2-medium{width:100%;height:-20%}.mpAUI .aui-dialog2-medium.aui-layer{top:69px}.mpAUI .aui-dialog2-medium .aui-dialog2-content{height:100%}}@media (max-width:420px){.mpAUI .aui-dialog2-small{width:100%;height:-20%}.mpAUI .aui-dialog2-small.aui-layer{top:69px}.mpAUI .aui-dialog2-small .aui-dialog2-content{height:100%}}.mpAUI .aui-dialog2-footer,.mpAUI .aui-dialog2-header{background:#f5f5f5;visibility:visible}.mpAUI .aui-dialog2.aui-layer[aria-hidden=true] .aui-dialog2-content,.mpAUI .aui-dialog2.aui-layer[aria-hidden=true] .aui-dialog2-footer,.mpAUI .aui-dialog2.aui-layer[aria-hidden=true] .aui-dialog2-header{opacity:0;transition:opacity .2s,visibility .2s;transition-delay:0s;visibility:hidden}.mpAUI .aui-dialog2.aui-layer[aria-hidden=false] .aui-dialog2-content,.mpAUI .aui-dialog2.aui-layer[aria-hidden=false] .aui-dialog2-footer,.mpAUI .aui-dialog2.aui-layer[aria-hidden=false] .aui-dialog2-header{opacity:1;transition:opacity .2s;transition-delay:0s;visibility:visible}.mpAUI .aui-dialog2 .aui-dialog2-content{max-height:100%}.mpAUI .aui-dialog2-content{border-radius:3px;background-color:#fff;box-sizing:border-box;overflow:auto;padding:20px;visibility:visible}.mpAUI .aui-dialog2 .aui-dialog2-header{margin-top:-69px}.mpAUI .aui-dialog2-header{border-bottom:1px solid #ccc;border-radius:5px 5px 0 0;box-sizing:border-box;color:#333;font-weight:400;height:69px;padding:0 20px;width:100%;display:table}.mpAUI .aui-dialog2-header-actions{width:100%}.mpAUI .aui-dialog2-header-actions,.mpAUI .aui-dialog2-header-close,.mpAUI .aui-dialog2-header-main,.mpAUI .aui-dialog2-header-secondary{display:table-cell;vertical-align:middle}.mpAUI .aui-dialog2[data-aui-modal=true] .aui-dialog2-header-close{display:none}.mpAUI .aui-dialog2-footer-hint{color:#707070;line-height:31px}.mpAUI .aui-dialog2-footer-hint,.mpAUI .aui-dialog2-header-main{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding-right:10px}.mpAUI .aui-dialog2-header-main{max-width:400px}.mpAUI .aui-dialog2-footer-actions,.mpAUI .aui-dialog2-header-close,.mpAUI .aui-dialog2-header-secondary{text-align:right}.mpAUI .aui-dialog2-footer-actions{float:right}.mpAUI .aui-dialog2-header-close{width:20px;height:20px;padding-left:5px;text-align:right;vertical-align:middle;line-height:100%;cursor:pointer;color:#707070}.mpAUI .aui-iconfont-close-dialog:before{content:"\\F11B"}.mpAUI .aui-dialog2-warning .aui-dialog2-header{background-color:#d04437;border-bottom-color:#d04437;color:#fff}.mpAUI .aui-dialog2-warning .aui-dialog2-header .aui-dialog2-header-actions a,.mpAUI .aui-dialog2-warning .aui-dialog2-header .aui-dialog2-header-close,.mpAUI .aui-dialog2-warning .aui-dialog2-header .aui-dialog2-header-main,.mpAUI .aui-dialog2-warning .aui-dialog2-header .aui-dialog2-header-secondary a{color:inherit}.mpAUI .aui-dialog2-header-close .aui-icon{vertical-align:middle}.mpAUI .aui-dialog2-footer{border-top:1px solid #ccc;box-sizing:border-box;height:51px;overflow:hidden;padding:10px 20px;width:100%;border-radius:0 0 5px 5px}.mpAUI .aui-dialog2-footer:empty{height:5px;padding:0}.mpAUI .aui-button,.mpAUI .aui-button:visited,.mpAUI a.aui-button{box-sizing:border-box;background:#f5f5f5;border:1px solid #ccc;border-radius:3.01px;color:#333;cursor:pointer;display:inline-block;font-family:inherit;font-size:14px;font-variant:normal;font-weight:400;height:2.14285714em;line-height:1.42857143;margin:0;padding:4px 10px;text-decoration:none;vertical-align:baseline;white-space:nowrap}.mpAUI .aui-button.aui-button-light,.mpAUI .aui-button:visited.aui-button-light,.mpAUI a.aui-button.aui-button-light{background:#fff}.mpAUI .aui-button~.aui-button{margin-left:10px}.mpAUI a.aui-button:active,.mpAUI a.aui-button:focus,.mpAUI a.aui-button:hover{text-decoration:none}.mpAUI .aui-button:focus,.mpAUI form.aui .button:focus,.mpAUI form.aui .cancel:focus{outline:1px dotted #333;outline:5px auto -webkit-focus-ring-color;outline-offset:1px}.mpAUI .aui-button::-moz-focus-inner{border:0;padding:0}.mpAUI .aui-button-subtle.aui-button:focus,.mpAUI .aui-button-subtle.aui-button:hover,.mpAUI .aui-button:focus,.mpAUI .aui-button:hover{background:#e9e9e9;border-color:#999;color:#000;text-decoration:none}.mpAUI .aui-button.aui-button-subtle.active,.mpAUI .aui-button.aui-button-subtle:active{border-color:#999}.mpAUI .aui-button-subtle.aui-button.active,.mpAUI .aui-button-subtle.aui-button:active,.mpAUI .aui-button.active,.mpAUI .aui-button:active,.mpAUI .aui-header .aui-button-split-more.active{box-shadow:inset 0 3px 6px 0 rgba(0,0,0,.1);background-image:none;background:#f5f5f5;text-decoration:none}.mpAUI .aui-buttons .aui-button.aui-button-split-main:not(:active){border-right-color:transparent}.mpAUI .aui-buttons .aui-button.aui-button-split-main:not(.aui-button-primary)+.aui-button-split-more:active:before,.mpAUI .aui-buttons .aui-button.aui-button-split-main:not(.aui-button-primary)+.aui-button-split-more:focus:before,.mpAUI .aui-buttons .aui-button.aui-button-split-main:not(.aui-button-primary)+.aui-button-split-more:hover:before,.mpAUI .aui-buttons .aui-button.aui-button-split-main:not(.aui-button-primary):active+.aui-button-split-more:before,.mpAUI .aui-buttons .aui-button.aui-button-split-main:not(.aui-button-primary):focus+.aui-button-split-more:before,.mpAUI .aui-buttons .aui-button.aui-button-split-main:not(.aui-button-primary):hover+.aui-button-split-more:before{visibility:hidden}.mpAUI .aui-buttons .aui-button.aui-button-split-main:not(.aui-button-primary):hover+.aui-button-split-more{border-left:1px solid #999;margin-left:-2px}.mpAUI .aui-buttons .aui-button.aui-button-split-main+.aui-button-split-more{margin-left:-1px}.mpAUI .aui-buttons .aui-button.aui-button-split-main+.aui-button-split-more:focus,.mpAUI .aui-buttons .aui-button.aui-button-split-main+.aui-button-split-more:hover{margin-left:-2px}.mpAUI .aui-buttons .aui-button.aui-button-split-main+.aui-button-split-more.aui-dropdown2-trigger:before{content:"";border-left:1px solid #ccc;bottom:4px;display:block;left:-1px;position:absolute;top:4px}.mpAUI .aui-buttons .aui-button.aui-button-split-main+.aui-button-split-more.aui-dropdown2-trigger.aui-button-primary:before{border-color:#fff}.mpAUI .aui-button.aui-button-primary,.mpAUI .aui-button.aui-button-primary:visited{background:#3572b0;border-color:transparent;color:#fff;font-weight:700;-webkit-font-smoothing:antialiased}.mpAUI .aui-button.aui-button-primary:focus,.mpAUI .aui-button.aui-button-primary:hover{background:#2a67a5;border-color:transparent;color:#fff}.mpAUI .aui-button.aui-button-primary:active{box-shadow:inset 0 3px 6px 0 rgba(0,0,0,.1);background-image:none;background:#3572b0;text-decoration:none}.mpAUI .aui-button.aui-button-link,.mpAUI .aui-button.aui-button-link:visited,.mpAUI .aui-button.aui-button-text,.mpAUI .aui-button.aui-button-text:visited{background:transparent;border-color:transparent;color:#3572b0;padding:4px 0;text-decoration:none;box-shadow:none}.mpAUI .aui-button.aui-button-link:active,.mpAUI .aui-button.aui-button-link:focus,.mpAUI .aui-button.aui-button-link:hover,.mpAUI .aui-button.aui-button-text:active,.mpAUI .aui-button.aui-button-text:focus,.mpAUI .aui-button.aui-button-text:hover,.mpAUI .aui-buttons .aui-button.aui-button-link:active,.mpAUI .aui-buttons .aui-button.aui-button-link:focus,.mpAUI .aui-buttons .aui-button.aui-button-link:hover,.mpAUI .aui-buttons .aui-button.aui-button-link[aria-pressed=true],.mpAUI .aui-buttons .aui-button.aui-button-text:active,.mpAUI .aui-buttons .aui-button.aui-button-text:focus,.mpAUI .aui-buttons .aui-button.aui-button-text:hover,.mpAUI .aui-buttons .aui-button.aui-button-text[aria-pressed=true]{background:transparent;border-color:transparent;box-shadow:none;text-decoration:underline}.mpAUI .aui-button.aui-button-text,.mpAUI .aui-button.aui-button-text:visited{border:none;font-size:inherit;height:inherit;line-height:normal;padding:0}.mpAUI .aui-button.aui-button-subtle{background:transparent;border-color:transparent;color:#707070}.mpAUI .aui-buttons .aui-button.aui-button-subtle{border-radius:3.01px}.mpAUI .aui-button.aui-button-subtle .aui-icon{margin-right:1px}.mpAUI .aui-button>.aui-icon+.aui-button-label{margin-left:4px}',""])},function(e,t,n){var r=n(154);"string"==typeof r&&(r=[[e.i,r,""]]),n(40)(r,{}),r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(39)(),t.push([e.i,".mediaPickerPopup .aui-dialog2-large{width:845px;height:530px;position:fixed;left:calc(50% - 845px/2);top:calc(50% - 530px/2);margin:0;overflow:visible}",""])},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(16),o=r(i),a=n(0),s=r(a),u=n(1),c=r(u),l=n(19),f=r(l),d=n(20),h=r(d);Object.defineProperty(t,"__esModule",{value:!0});var p=n(48),v=function(e){function t(e,n){return(0,s.default)(this,t),(0,f.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n))}return(0,h.default)(t,e),(0,c.default)(t,[{key:"upload",value:function(e,t){var n=t||"file",r=this._urltoFile(e,n);this.uploadService.addFile(r)}},{key:"_urltoFile",value:function(e,t){var n=e.split(","),r=n[0].match(/:(.*?);/);if(!r||r.length<2)throw new Error("Failed to retrieve file from data URL");for(var i=r[1],o=atob(n[1]),a=o.length,s=new Uint8Array(a);a--;)s[a]=o.charCodeAt(a);var u=new Blob([s],{type:i});return u.name=t,u}}]),t}(p.MediaLocalUpload);t.BinaryUploader=v},function(e,t,n){n(157),e.exports=n(2).Object.getPrototypeOf},function(e,t,n){var r=n(41),i=n(91);n(158)("getPrototypeOf",function(){return function(e){return i(r(e))}})},function(e,t,n){var r=n(5),i=n(2),o=n(18);e.exports=function(e,t){var n=(i.Object||{})[e]||Object[e],a={};a[e]=t(n),r(r.S+r.F*o(function(){n(1)}),"Object",a)}},function(e,t,n){e.exports={default:n(160),__esModule:!0}},function(e,t,n){n(161);var r=n(2).Object;e.exports=function(e,t,n){return r.defineProperty(e,t,n)}},function(e,t,n){var r=n(5);r(r.S+r.F*!n(12),"Object",{defineProperty:n(9).f})},function(e,t,n){e.exports={default:n(163),__esModule:!0}},function(e,t,n){n(30),n(33),e.exports=n(69).f("iterator")},function(e,t,n){var r=n(64),i=n(59);e.exports=function(e){return function(t,n){var o,a,s=String(i(t)),u=r(n),c=s.length;return u<0||u>=c?e?"":void 0:(o=s.charCodeAt(u),o<55296||o>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?e?s.charAt(u):o:e?s.slice(u,u+2):a-56320+(o-55296<<10)+65536)}}},function(e,t,n){"use strict";var r=n(45),i=n(43),o=n(32),a={};n(15)(a,n(3)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=r(a,{next:i(1,n)}),o(e,t+" Iterator")}},function(e,t,n){var r=n(9),i=n(10),o=n(46);e.exports=n(12)?Object.defineProperties:function(e,t){i(e);for(var n,a=o(t),s=a.length,u=0;s>u;)r.f(e,n=a[u++],t[n]);return e}},function(e,t,n){var r=n(24),i=n(67),o=n(168);e.exports=function(e){return function(t,n,a){var s,u=r(t),c=i(u.length),l=o(a,c);if(e&&n!=n){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===n)return e||l||0;return!e&&-1}}},function(e,t,n){var r=n(64),i=Math.max,o=Math.min;e.exports=function(e,t){return e=r(e),e<0?i(e+t,0):o(e,t)}},function(e,t,n){"use strict";var r=n(170),i=n(97),o=n(23),a=n(24);e.exports=n(65)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):"keys"==t?i(0,n):"values"==t?i(0,e[n]):i(0,[n,e[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(e,t){e.exports=function(){}},function(e,t,n){e.exports={default:n(172),__esModule:!0}},function(e,t,n){n(173),n(73),n(176),n(177),e.exports=n(2).Symbol},function(e,t,n){"use strict";var r=n(4),i=n(17),o=n(12),a=n(5),s=n(94),u=n(70).KEY,c=n(18),l=n(61),f=n(32),d=n(42),h=n(3),p=n(69),v=n(71),m=n(174),y=n(98),b=n(10),g=n(24),_=n(63),w=n(43),x=n(45),k=n(175),A=n(100),S=n(9),P=n(46),O=A.f,I=S.f,E=k.f,j=r.Symbol,T=r.JSON,C=T&&T.stringify,M=h("_hidden"),U=h("toPrimitive"),L={}.propertyIsEnumerable,F=l("symbol-registry"),R=l("symbols"),N=l("op-symbols"),z=Object.prototype,D="function"==typeof j,B=r.QObject,H=!B||!B.prototype||!B.prototype.findChild,q=o&&c(function(){return 7!=x(I({},"a",{get:function(){return I(this,"a",{value:7}).a}})).a})?function(e,t,n){var r=O(z,t);r&&delete z[t],I(e,t,n),r&&e!==z&&I(z,t,r)}:I,$=function(e){var t=R[e]=x(j.prototype);return t._k=e,t},V=D&&"symbol"==typeof j.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof j},J=function(e,t,n){return e===z&&J(N,t,n),b(e),t=_(t,!0),b(n),i(R,t)?(n.enumerable?(i(e,M)&&e[M][t]&&(e[M][t]=!1),n=x(n,{enumerable:w(0,!1)})):(i(e,M)||I(e,M,w(1,{})),e[M][t]=!0),q(e,t,n)):I(e,t,n)},W=function(e,t){b(e);for(var n,r=m(t=g(t)),i=0,o=r.length;o>i;)J(e,n=r[i++],t[n]);return e},K=function(e,t){return void 0===t?x(e):W(x(e),t)},G=function(e){var t=L.call(this,e=_(e,!0));return!(this===z&&i(R,e)&&!i(N,e))&&(!(t||!i(this,e)||!i(R,e)||i(this,M)&&this[M][e])||t)},Y=function(e,t){if(e=g(e),t=_(t,!0),e!==z||!i(R,t)||i(N,t)){var n=O(e,t);return!n||!i(R,t)||i(e,M)&&e[M][t]||(n.enumerable=!0),n}},Q=function(e){for(var t,n=E(g(e)),r=[],o=0;n.length>o;)i(R,t=n[o++])||t==M||t==u||r.push(t);return r},X=function(e){for(var t,n=e===z,r=E(n?N:g(e)),o=[],a=0;r.length>a;)!i(R,t=r[a++])||n&&!i(z,t)||o.push(R[t]);return o};D||(j=function(){if(this instanceof j)throw TypeError("Symbol is not a constructor!");var e=d(arguments.length>0?arguments[0]:void 0),t=function(n){this===z&&t.call(N,n),i(this,M)&&i(this[M],e)&&(this[M][e]=!1),q(this,e,w(1,n))};return o&&H&&q(z,e,{configurable:!0,set:t}),$(e)},s(j.prototype,"toString",function(){return this._k}),A.f=Y,S.f=J,n(99).f=k.f=Q,n(47).f=G,n(72).f=X,o&&!n(44)&&s(z,"propertyIsEnumerable",G,!0),p.f=function(e){return $(h(e))}),a(a.G+a.W+a.F*!D,{Symbol:j});for(var Z="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ee=0;Z.length>ee;)h(Z[ee++]);for(var te=P(h.store),ne=0;te.length>ne;)v(te[ne++]);a(a.S+a.F*!D,"Symbol",{for:function(e){return i(F,e+="")?F[e]:F[e]=j(e)},keyFor:function(e){if(!V(e))throw TypeError(e+" is not a symbol!");for(var t in F)if(F[t]===e)return t},useSetter:function(){H=!0},useSimple:function(){H=!1}}),a(a.S+a.F*!D,"Object",{create:K,defineProperty:J,defineProperties:W,getOwnPropertyDescriptor:Y,getOwnPropertyNames:Q,getOwnPropertySymbols:X}),T&&a(a.S+a.F*(!D||c(function(){var e=j();return"[null]"!=C([e])||"{}"!=C({a:e})||"{}"!=C(Object(e))})),"JSON",{stringify:function(e){if(void 0!==e&&!V(e)){for(var t,n,r=[e],i=1;arguments.length>i;)r.push(arguments[i++]);return t=r[1],"function"==typeof t&&(n=t),!n&&y(t)||(t=function(e,t){if(n&&(t=n.call(this,e,t)),!V(t))return t}),r[1]=t,C.apply(T,r)}}}),j.prototype[U]||n(15)(j.prototype,U,j.prototype.valueOf),f(j,"Symbol"),f(Math,"Math",!0),f(r.JSON,"JSON",!0)},function(e,t,n){var r=n(46),i=n(72),o=n(47);e.exports=function(e){var t=r(e),n=i.f;if(n)for(var a,s=n(e),u=o.f,c=0;s.length>c;)u.call(e,a=s[c++])&&t.push(a);return t}},function(e,t,n){var r=n(24),i=n(99).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return i(e)}catch(e){return a.slice()}};e.exports.f=function(e){return a&&"[object Window]"==o.call(e)?s(e):i(r(e))}},function(e,t,n){n(71)("asyncIterator")},function(e,t,n){n(71)("observable")},function(e,t,n){e.exports={default:n(179),__esModule:!0}},function(e,t,n){n(180),e.exports=n(2).Object.setPrototypeOf},function(e,t,n){var r=n(5);r(r.S,"Object",{setPrototypeOf:n(181).set})},function(e,t,n){var r=n(11),i=n(10),o=function(e,t){if(i(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{r=n(14)(Function.call,n(100).f(Object.prototype,"__proto__").set,2),r(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return o(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:o}},function(e,t,n){e.exports={default:n(183),__esModule:!0}},function(e,t,n){n(184);var r=n(2).Object;e.exports=function(e,t){return r.create(e,t)}},function(e,t,n){var r=n(5);r(r.S,"Object",{create:n(45)})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(101),o=r(i),a=n(21),s=r(a),u=n(196),c=r(u),l=n(50),f=r(l),d=n(0),h=r(d),p=n(1),v=r(p);Object.defineProperty(t,"__esModule",{value:!0});var m=n(206),y=n(51),b=n(77),g=n(22),_=n(211),w=n(111),x=n(128),k=n(129),A=n(261),S=n(131),P=n(262),O=n(83),I=n(267),E=n(268),j=function(){function e(t,n,r){var i=this;(0,h.default)(this,e),this.uploads={},this.retry=0,this.emit=function(e,t){i.emitter.emit(e,t)},this.getQueryParameters=function(e,t){var n=i.getMediaClient(e),r=n.storedAuth;if(r)return(0,f.default)({hash:t.hash},w.mapAuthToQueryParameters(r));throw new Error("auth required")},this.generateTarget=function(e){var t=e.map(function(e){return e.split("=")}).reduce(function(e,t){var n=(0,c.default)(t,2),r=n[0],i=n[1];return e[r]=i,e},{}),n=t.hash,r=t.resumableCurrentChunkSize,o=t.client,a=t.issuer,s=t.token,u=void 0;return u=a?"issuer="+a+"&token="+s:"client="+o+"&token="+s,i.uploadChunkUrl+"/"+n+"-"+r+"?"+u},this.onFilesAdded=function(e){if(0!==e.length){var t=i.uploadParams;e.forEach(function(e){i.uploads[e.uniqueIdentifier]={creationDate:Date.now(),uploadParams:t}});var n=t.collection;i.mediaClientPool.getMediaClient(n).refreshAuth().then(function(){i.retry=0;var t=e.map(function(e){return i.mapResumableFileToMediaFile(e)});i.emit("files-added",{files:t}),t.forEach(function(e){return i.emit("file-added",{file:e})}),i.resumable.upload()},function(){e.forEach(function(e){return i.onError(e,x.ERROR_NAMES.TOKEN_FETCH_FAIL)}),e.forEach(function(e){return e.cancel()}),e.forEach(i.cleanupResumableFile)})}},this.onChunkingComplete=function(e){e.chunks.forEach(function(t){var n=t.callback;t.callback=function(t,r){return"error"===t?(i.retry++,e.abort(),e.pause(!0),void i.resumable.fire("fileError",e,r||"")):("success"===t&&(i.retry=0),void n(t,r))}})},this.onFileProgress=function(e){var t=e.progress(),n=i.mapResumableFileToMediaFile(e);if(t>0&&t<1){var r=new A.MediaProgress(n.size,n.size*t,n.creationDate,Date.now());i.emit("file-uploading",{file:n,progress:r})}},this.onFileSuccess=function(e){return i.getResumableFileUploadParams(e).autoFinalize?void i.finalizeFile(e):void i.emit("file-finalize-ready",{file:i.mapResumableFileToMediaFile(e),finalize:function(){i.finalizeFile(e)}})},this.onFileError=function(e,t){var n=i.getMediaClient(e);i.onUploadError(e,x.ERROR_NAMES.UPLOAD_FAIL,t,n).then(function(){e._prevProgress=0,e.pause(!1),e.chunks.forEach(function(e){"error"===e.status()&&(e.preprocessState=0,e.send()),"pending"===e.status()&&2===e.preprocessState&&(e.preprocessState=0)})}).catch(function(){e.cancel()})},this.onDrop=function(e){e.preventDefault(),e.stopPropagation(),i.emit("file-dropped",e)},this.mapResumableFileToMediaFile=function(e,t){return new k.MediaFile(e.uniqueIdentifier,e.file.name,e.file.size,i.getResumableFileCreationDate(e),e.file.type,t,e)},this.getResumableFileCreationDate=function(e){return i.uploads[e.uniqueIdentifier].creationDate},this.getResumableFileUploadParams=function(e){return i.uploads[e.uniqueIdentifier].uploadParams},this.cleanupResumableFile=function(e){delete i.uploads[e.uniqueIdentifier]},this.emitter=new b.EventEmitter2,this.uploadChunkUrl=t+"/chunk",this.mediaClientPool=new I.MediaClientPool(t,n),this.api=new E.MediaApi,this.setUploadParams(r),this.resumable=new m({target:this.generateTarget,uploadMethod:"PUT",testMethod:"HEAD",chunkSize:4194304,chunkRetryInterval:2500,maxChunkRetries:5,simultaneousUploads:3,forceChunkSize:!0,permanentErrors:[400,403,404,415,500,501],method:"octet",minFileSize:0,query:this.getQueryParameters,preprocess:function(t){return e.hasher.hash(t)},generateUniqueIdentifier:function(){return y.v4()}}),this.resumable.on("filesAdded",this.onFilesAdded),this.resumable.on("chunkingComplete",this.onChunkingComplete),this.resumable.on("fileProgress",this.onFileProgress),this.resumable.on("fileSuccess",this.onFileSuccess),this.resumable.on("fileError",this.onFileError)}return(0,v.default)(e,[{key:"setUploadParams",value:function(e){this.uploadParams=(0,f.default)({},S.defaultUploadParams,e)}},{key:"getUploadParams",value:function(){return this.uploadParams}},{key:"addBrowse",value:function(e){this.resumable.assignBrowse(e)}},{key:"addDropzone",value:function(e){this.dropzoneElement||(this.dropzoneElement=e,this.dropzoneElement.addEventListener("drop",this.onDrop),this.resumable.assignDrop(this.dropzoneElement))}},{key:"removeDropzone",value:function(){this.dropzoneElement&&(this.dropzoneElement.removeEventListener("drop",this.onDrop),this.resumable.unAssignDrop(this.dropzoneElement),this.dropzoneElement=void 0)}},{key:"addFile",value:function(e){this.resumable.addFile(e)}},{key:"cancel",value:function(e){if(e){var t=this.resumable.getFromUniqueIdentifier(e);t&&t.cancel()}else this.resumable.cancel()}},{key:"on",value:function(e,t){this.emitter.on(e,t)}},{key:"off",value:function(e,t){this.emitter.off(e,t)}},{key:"getMediaClient",value:function(e){var t=this.getResumableFileUploadParams(e),n=t.collection;return this.mediaClientPool.getMediaClient(n)}},{key:"finalizeFile",value:function(e){var t=this,n=e.fileName,r=e.file,i=this.getResumableFileUploadParams(e),o=i.collection,a=e.chunks.map(function(e){return e.hash+"-"+(e.endByte-e.startByte)}),s=this.getMediaClient(e);this.api.createUpload(s).then(function(e){return t.appendChunksToUpload(s,e,a,1e3)}).then(function(e){return t.api.createFileFromUpload(s,n,r.type,e,o)}).then(function(n){return t.processFile(s,n,e)}).catch(function(n){t.onError(e,x.ERROR_NAMES.OBJ_CREATE_FAIL,n)})}},{key:"appendChunksToUpload",value:function(e,t,n,r){var i=this;return _.sliceByChunks(n,r).map(function(n,o){var a=o*r;return function(){return i.api.appendChunksToUpload(e,t,n,a)}}).reduce(function(e,t){return e.then(t)},s.default.resolve()).then(function(){return t})}},{key:"processFile",value:function(e,t,n){var r=this;return this.fetchFileMetadata(e,t,n).then(function(e){var t=r.mapResumableFileToMediaFile(n,e.id),i=new A.MediaProgress(t.size,t.size,t.creationDate,Date.now());r.emit("file-converted",{file:t,progress:i,metadata:e})}).catch(function(e){r.onError(n,x.ERROR_NAMES.METADATA_FETCH_FAIL,e)})}},{key:"fetchFileMetadata",value:function(e,t,n){var r=this.getResumableFileUploadParams(n),i=r.collection;return r.fetchMetadata?(this.emit("file-converting",{file:this.mapResumableFileToMediaFile(n,t)}),this.api.pollForFileMetadata(e,t,i)):s.default.resolve({id:t})}},{key:"onUploadError",value:function(e,t,n,r){var i=this;return new s.default(function(o,a){var s=e.uniqueIdentifier,u=void 0;try{u=JSON.parse(n)}catch(e){}return O.isTokenError(u)&&i.retry<=1?void r.refreshAuth().then(function(){return o()}).catch(function(){i.emit("file-upload-error",{file:i.mapResumableFileToMediaFile(e),error:new x.MediaError(s,x.ERROR_NAMES.TOKEN_UPDATE_FAIL,n)}),g.handleError(t,n),a()}):(u&&u.error&&u.error.title&&(n=u.error.title),i.emit("file-upload-error",{file:i.mapResumableFileToMediaFile(e),error:new x.MediaError(s,t,n)}),g.handleError(t,n),a(),void 0)})}},{key:"onError",value:function(e,t,n){var r=void 0;r=n&&n.error&&n.error.title?n.error.title:(0,o.default)(n||{}),this.emit("file-upload-error",{file:this.mapResumableFileToMediaFile(e),error:new x.MediaError(e.uniqueIdentifier,t,r)}),g.handleError(t,r)}}]),e}();j.hasher=P.createHasher(),t.UploadService=j},function(e,t,n){var r=n(2),i=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(e){return i.stringify.apply(i,arguments)}},function(e,t,n){n(73),n(30),n(33),n(188),n(194),n(195),e.exports=n(2).Promise},function(e,t,n){"use strict";var r,i,o,a,s=n(44),u=n(4),c=n(14),l=n(49),f=n(5),d=n(11),h=n(29),p=n(74),v=n(34),m=n(103),y=n(104).set,b=n(192)(),g=n(75),_=n(105),w=n(106),x=u.TypeError,k=u.process,A=u.Promise,S="process"==l(k),P=function(){},O=i=g.f,I=!!function(){try{var e=A.resolve(1),t=(e.constructor={})[n(3)("species")]=function(e){e(P,P)};return(S||"function"==typeof PromiseRejectionEvent)&&e.then(P)instanceof t}catch(e){}}(),E=function(e){var t;return!(!d(e)||"function"!=typeof(t=e.then))&&t},j=function(e,t){if(!e._n){e._n=!0;var n=e._c;b(function(){for(var r=e._v,i=1==e._s,o=0;n.length>o;)!function(t){var n,o,a=i?t.ok:t.fail,s=t.resolve,u=t.reject,c=t.domain;try{a?(i||(2==e._h&&M(e),e._h=1),!0===a?n=r:(c&&c.enter(),n=a(r),c&&c.exit()),n===t.promise?u(x("Promise-chain cycle")):(o=E(n))?o.call(n,s,u):s(n)):u(r)}catch(e){u(e)}}(n[o++]);e._c=[],e._n=!1,t&&!e._h&&T(e)})}},T=function(e){y.call(u,function(){var t,n,r,i=e._v,o=C(e);if(o&&(t=_(function(){S?k.emit("unhandledRejection",i,e):(n=u.onunhandledrejection)?n({promise:e,reason:i}):(r=u.console)&&r.error&&r.error("Unhandled promise rejection",i)}),e._h=S||C(e)?2:1),e._a=void 0,o&&t.e)throw t.v})},C=function(e){if(1==e._h)return!1;for(var t,n=e._a||e._c,r=0;n.length>r;)if(t=n[r++],t.fail||!C(t.promise))return!1;return!0},M=function(e){y.call(u,function(){var t;S?k.emit("rejectionHandled",e):(t=u.onrejectionhandled)&&t({promise:e,reason:e._v})})},U=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),j(t,!0))},L=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw x("Promise can't be resolved itself");(t=E(e))?b(function(){var r={_w:n,_d:!1};try{t.call(e,c(L,r,1),c(U,r,1))}catch(e){U.call(r,e)}}):(n._v=e,n._s=1,j(n,!1))}catch(e){U.call({_w:n,_d:!1},e)}}};I||(A=function(e){p(this,A,"Promise","_h"),h(e),r.call(this);try{e(c(L,this,1),c(U,this,1))}catch(e){U.call(this,e)}},r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=n(76)(A.prototype,{then:function(e,t){var n=O(m(this,A));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=S?k.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&j(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new r;this.promise=e,this.resolve=c(L,e,1),this.reject=c(U,e,1)},g.f=O=function(e){return e===A||e===a?new o(e):i(e)}),f(f.G+f.W+f.F*!I,{Promise:A}),n(32)(A,"Promise"),n(107)("Promise"),a=n(2).Promise,f(f.S+f.F*!I,"Promise",{reject:function(e){var t=O(this);return(0,t.reject)(e),t.promise}}),f(f.S+f.F*(s||!I),"Promise",{resolve:function(e){return w(s&&this===a?A:this,e)}}),f(f.S+f.F*!(I&&n(193)(function(e){A.all(e).catch(P)})),"Promise",{all:function(e){var t=this,n=O(t),r=n.resolve,i=n.reject,o=_(function(){var n=[],o=0,a=1;v(e,!1,function(e){var s=o++,u=!1;n.push(void 0),a++,t.resolve(e).then(function(e){u||(u=!0,n[s]=e,--a||r(n))},i)}),--a||r(n)});return o.e&&i(o.v),n.promise},race:function(e){var t=this,n=O(t),r=n.reject,i=_(function(){v(e,!1,function(e){t.resolve(e).then(n.resolve,r)})});return i.e&&r(i.v),n.promise}})},function(e,t,n){var r=n(10);e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(t){var o=e.return;throw void 0!==o&&r(o.call(e)),t}}},function(e,t,n){var r=n(23),i=n(3)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||o[i]===e)}},function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var r=n(4),i=n(104).set,o=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,u="process"==n(31)(a);e.exports=function(){var e,t,n,c=function(){var r,i;for(u&&(r=a.domain)&&r.exit();e;){i=e.fn,e=e.next;try{i()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(u)n=function(){a.nextTick(c)};else if(o){var l=!0,f=document.createTextNode("");new o(c).observe(f,{characterData:!0}),n=function(){f.data=l=!l}}else if(s&&s.resolve){var d=s.resolve();n=function(){d.then(c)}}else n=function(){i.call(r,c)};return function(r){var i={fn:r,next:void 0};t&&(t.next=i),e||(e=i,n()),t=i}}},function(e,t,n){var r=n(3)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:n=!0}},o[r]=function(){return a},e(o)}catch(e){}return n}},function(e,t,n){"use strict";var r=n(5),i=n(2),o=n(4),a=n(103),s=n(106);r(r.P+r.R,"Promise",{finally:function(e){var t=a(this,i.Promise||o.Promise),n="function"==typeof e;return this.then(n?function(n){return s(t,e()).then(function(){return n})}:e,n?function(n){return s(t,e()).then(function(){throw n})}:e)}})},function(e,t,n){"use strict";var r=n(5),i=n(75),o=n(105);r(r.S,"Promise",{try:function(e){var t=i.f(this),n=o(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;
var i=n(197),o=r(i),a=n(200),s=r(a);t.default=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=(0,s.default)(e);!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if((0,o.default)(Object(t)))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},function(e,t,n){e.exports={default:n(198),__esModule:!0}},function(e,t,n){n(33),n(30),e.exports=n(199)},function(e,t,n){var r=n(49),i=n(3)("iterator"),o=n(23);e.exports=n(2).isIterable=function(e){var t=Object(e);return void 0!==t[i]||"@@iterator"in t||o.hasOwnProperty(r(t))}},function(e,t,n){e.exports={default:n(201),__esModule:!0}},function(e,t,n){n(33),n(30),e.exports=n(202)},function(e,t,n){var r=n(10),i=n(102);e.exports=n(2).getIterator=function(e){var t=i(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return r(t.call(e))}},function(e,t,n){n(204),e.exports=n(2).Object.assign},function(e,t,n){var r=n(5);r(r.S+r.F,"Object",{assign:n(205)})},function(e,t,n){"use strict";var r=n(46),i=n(72),o=n(47),a=n(41),s=n(66),u=Object.assign;e.exports=!u||n(18)(function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=u({},e)[n]||Object.keys(u({},t)).join("")!=r})?function(e,t){for(var n=a(e),u=arguments.length,c=1,l=i.f,f=o.f;u>c;)for(var d,h=s(arguments[c++]),p=l?r(h).concat(l(h)):r(h),v=p.length,m=0;v>m;)f.call(h,d=p[m++])&&(n[d]=h[d]);return n}:u},function(e,t,n){!function(){"use strict";var t=function(e){function n(e,t,n){var i=this;i.opts={},i.getOpt=e.getOpt,i._prevProgress=0,i.resumableObj=e,i.file=t,i.fileName=t.fileName||t.name,i.size=t.size,i.relativePath=t.webkitRelativePath||t.relativePath||i.fileName,i.uniqueIdentifier=n,i._pause=!1,i.container="";var a=void 0!==n,s=function(e,t){switch(e){case"progress":i.resumableObj.fire("fileProgress",i);break;case"error":i.abort(),a=!0,i.chunks=[],i.resumableObj.fire("fileError",i,t);break;case"success":if(a)return;i.resumableObj.fire("fileProgress",i),i.isComplete()&&i.resumableObj.fire("fileSuccess",i,t);break;case"retry":i.resumableObj.fire("fileRetry",i)}};return i.chunks=[],i.abort=function(){var e=0;o.each(i.chunks,function(t){"uploading"==t.status()&&(t.abort(),e++)}),e>0&&i.resumableObj.fire("fileProgress",i)},i.cancel=function(){var e=i.chunks;i.chunks=[],o.each(e,function(e){"uploading"==e.status()&&(e.abort(),i.resumableObj.uploadNextChunk())}),i.resumableObj.removeFile(i),i.resumableObj.fire("fileProgress",i)},i.retry=function(){i.bootstrap();var e=!1;i.resumableObj.on("chunkingComplete",function(){e||i.resumableObj.upload(),e=!0})},i.bootstrap=function(){i.abort(),a=!1,i.chunks=[],i._prevProgress=0;for(var e=i.getOpt("forceChunkSize")?Math.ceil:Math.floor,t=Math.max(e(i.file.size/i.getOpt("chunkSize")),1),n=0;n<t;n++)!function(e){window.setTimeout(function(){i.chunks.push(new r(i.resumableObj,i,e,s)),i.resumableObj.fire("chunkingProgress",i,e/t)},0)}(n);window.setTimeout(function(){i.resumableObj.fire("chunkingComplete",i)},0)},i.progress=function(){if(a)return 1;var e=0,t=!1;return o.each(i.chunks,function(n){"error"==n.status()&&(t=!0),e+=n.progress(!0)}),e=t?1:e>.99999?1:e,e=Math.max(i._prevProgress,e),i._prevProgress=e,e},i.isUploading=function(){var e=!1;return o.each(i.chunks,function(t){if("uploading"==t.status())return e=!0,!1}),e},i.isComplete=function(){var e=!1;return o.each(i.chunks,function(t){var n=t.status();if("pending"==n||"uploading"==n||1===t.preprocessState)return e=!0,!1}),!e},i.pause=function(e){i._pause=void 0===e?!i._pause:e},i.isPaused=function(){return i._pause},i.resumableObj.fire("chunkingStart",i),i.bootstrap(),this}function r(e,t,n,r){var i=this;i.opts={},i.getOpt=e.getOpt,i.resumableObj=e,i.fileObj=t,i.fileObjSize=t.size,i.fileObjType=t.file.type,i.offset=n,i.callback=r,i.lastProgressCallback=new Date,i.tested=!1,i.retries=0,i.pendingRetry=!1,i.preprocessState=0;var a=i.getOpt("chunkSize");return i.loaded=0,i.startByte=i.offset*a,i.endByte=Math.min(i.fileObjSize,(i.offset+1)*a),i.fileObjSize-i.endByte<a&&!i.getOpt("forceChunkSize")&&(i.endByte=i.fileObjSize),i.xhr=null,i.test=function(){i.xhr=new XMLHttpRequest;var e=function(e){i.tested=!0;var t=i.status();"success"==t?(i.callback(t,i.message()),i.resumableObj.uploadNextChunk()):i.send()};i.xhr.addEventListener("load",e,!1),i.xhr.addEventListener("error",e,!1),i.xhr.addEventListener("timeout",e,!1);var t=[],n=i.getOpt("parameterNamespace"),r=i.getOpt("query");"function"==typeof r&&(r=r(i.fileObj,i)),o.each(r,function(e,r){t.push([encodeURIComponent(n+e),encodeURIComponent(r)].join("="))}),t.push([n+"resumableChunkNumber",encodeURIComponent(i.offset+1)].join("=")),t.push([n+"resumableChunkSize",encodeURIComponent(i.getOpt("chunkSize"))].join("=")),t.push([n+"resumableCurrentChunkSize",encodeURIComponent(i.endByte-i.startByte)].join("=")),t.push([n+"resumableTotalSize",encodeURIComponent(i.fileObjSize)].join("=")),t.push([n+"resumableType",encodeURIComponent(i.fileObjType)].join("=")),t.push([n+"resumableIdentifier",encodeURIComponent(i.fileObj.uniqueIdentifier)].join("=")),t.push([n+"resumableFilename",encodeURIComponent(i.fileObj.fileName)].join("=")),t.push([n+"resumableRelativePath",encodeURIComponent(i.fileObj.relativePath)].join("=")),t.push([n+"resumableTotalChunks",encodeURIComponent(i.fileObj.chunks.length)].join("=")),i.xhr.open(i.getOpt("testMethod"),o.getTarget(t)),i.xhr.timeout=i.getOpt("xhrTimeout"),i.xhr.withCredentials=i.getOpt("withCredentials");var a=i.getOpt("headers");"function"==typeof a&&(a=a(i.fileObj,i)),o.each(a,function(e,t){i.xhr.setRequestHeader(e,t)}),i.xhr.send(null)},i.preprocessFinished=function(){i.preprocessState=2,i.send()},i.send=function(){var e=i.getOpt("preprocess");if("function"==typeof e)switch(i.preprocessState){case 0:return i.preprocessState=1,void e(i);case 1:return}if(i.getOpt("testChunks")&&!i.tested)return void i.test();i.xhr=new XMLHttpRequest,i.xhr.upload.addEventListener("progress",function(e){new Date-i.lastProgressCallback>1e3*i.getOpt("throttleProgressCallbacks")&&(i.callback("progress"),i.lastProgressCallback=new Date),i.loaded=e.loaded||0},!1),i.loaded=0,i.pendingRetry=!1,i.callback("progress");var t=function(e){var t=i.status();if("success"==t||"error"==t)i.callback(t,i.message()),i.resumableObj.uploadNextChunk();else{i.callback("retry",i.message()),i.abort(),i.retries++;var n=i.getOpt("chunkRetryInterval");void 0!==n?(i.pendingRetry=!0,setTimeout(i.send,n)):i.send()}};i.xhr.addEventListener("load",t,!1),i.xhr.addEventListener("error",t,!1),i.xhr.addEventListener("timeout",t,!1);var n={resumableChunkNumber:i.offset+1,resumableChunkSize:i.getOpt("chunkSize"),resumableCurrentChunkSize:i.endByte-i.startByte,resumableTotalSize:i.fileObjSize,resumableType:i.fileObjType,resumableIdentifier:i.fileObj.uniqueIdentifier,resumableFilename:i.fileObj.fileName,resumableRelativePath:i.fileObj.relativePath,resumableTotalChunks:i.fileObj.chunks.length},r=i.getOpt("query");"function"==typeof r&&(r=r(i.fileObj,i)),o.each(r,function(e,t){n[e]=t});var a=i.fileObj.file.slice?"slice":i.fileObj.file.mozSlice?"mozSlice":i.fileObj.file.webkitSlice?"webkitSlice":"slice",s=i.fileObj.file[a](i.startByte,i.endByte),u=null,c=i.getOpt("target"),l=i.getOpt("parameterNamespace");if("octet"===i.getOpt("method")){u=s;var f=[];o.each(n,function(e,t){f.push([encodeURIComponent(l+e),encodeURIComponent(t)].join("="))}),c=o.getTarget(f)}else u=new FormData,o.each(n,function(e,t){u.append(l+e,t)}),u.append(l+i.getOpt("fileParameterName"),s);var d=i.getOpt("uploadMethod");i.xhr.open(d,c),"octet"===i.getOpt("method")&&i.xhr.setRequestHeader("Content-Type","binary/octet-stream"),i.xhr.timeout=i.getOpt("xhrTimeout"),i.xhr.withCredentials=i.getOpt("withCredentials");var h=i.getOpt("headers");"function"==typeof h&&(h=h(i.fileObj,i)),o.each(h,function(e,t){i.xhr.setRequestHeader(e,t)}),i.xhr.send(u)},i.abort=function(){i.xhr&&i.xhr.abort(),i.xhr=null},i.status=function(){return i.pendingRetry?"uploading":i.xhr?i.xhr.readyState<4?"uploading":200==i.xhr.status||201==i.xhr.status?"success":o.contains(i.getOpt("permanentErrors"),i.xhr.status)||i.retries>=i.getOpt("maxChunkRetries")?"error":(i.abort(),"pending"):"pending"},i.message=function(){return i.xhr?i.xhr.responseText:""},i.progress=function(e){void 0===e&&(e=!1);var t=e?(i.endByte-i.startByte)/i.fileObjSize:1;if(i.pendingRetry)return 0;switch(i.status()){case"success":case"error":return 1*t;case"pending":return 0*t;default:return i.loaded/(i.endByte-i.startByte)*t}},this}if(!(this instanceof t))return new t(e);if(this.version=1,this.support=!("undefined"==typeof File||"undefined"==typeof Blob||"undefined"==typeof FileList||!Blob.prototype.webkitSlice&&!Blob.prototype.mozSlice&&!Blob.prototype.slice),!this.support)return!1;var i=this;i.files=[],i.defaults={chunkSize:1048576,forceChunkSize:!1,simultaneousUploads:3,fileParameterName:"file",throttleProgressCallbacks:.5,query:{},headers:{},preprocess:null,method:"multipart",uploadMethod:"POST",testMethod:"GET",prioritizeFirstAndLastChunk:!1,target:"/",parameterNamespace:"",testChunks:!0,generateUniqueIdentifier:null,getTarget:null,maxChunkRetries:void 0,chunkRetryInterval:void 0,permanentErrors:[400,404,415,500,501],maxFiles:void 0,withCredentials:!1,xhrTimeout:0,maxFilesErrorCallback:function(e,t){var n=i.getOpt("maxFiles");alert("Please upload no more than "+n+" file"+(1===n?"":"s")+" at a time.")},minFileSize:1,minFileSizeErrorCallback:function(e,t){alert(e.fileName||e.name+" is too small, please upload files larger than "+o.formatSize(i.getOpt("minFileSize"))+".")},maxFileSize:void 0,maxFileSizeErrorCallback:function(e,t){alert(e.fileName||e.name+" is too large, please upload files less than "+o.formatSize(i.getOpt("maxFileSize"))+".")},fileType:[],fileTypeErrorCallback:function(e,t){alert(e.fileName||e.name+" has type not allowed, please upload files of type "+i.getOpt("fileType")+".")}},i.opts=e||{},i.getOpt=function(e){var i=this;if(e instanceof Array){var a={};return o.each(e,function(e){a[e]=i.getOpt(e)}),a}if(i instanceof r){if(void 0!==i.opts[e])return i.opts[e];i=i.fileObj}if(i instanceof n){if(void 0!==i.opts[e])return i.opts[e];i=i.resumableObj}if(i instanceof t)return void 0!==i.opts[e]?i.opts[e]:i.defaults[e]},i.events=[],i.on=function(e,t){i.events.push(e.toLowerCase(),t)},i.fire=function(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);for(var n=e[0].toLowerCase(),t=0;t<=i.events.length;t+=2)i.events[t]==n&&i.events[t+1].apply(i,e.slice(1)),"catchall"==i.events[t]&&i.events[t+1].apply(null,e);"fileerror"==n&&i.fire("error",e[2],e[1]),"fileprogress"==n&&i.fire("progress")};var o={stopEvent:function(e){e.stopPropagation(),e.preventDefault()},each:function(e,t){if(void 0!==e.length){for(var n=0;n<e.length;n++)if(!1===t(e[n]))return}else for(n in e)if(!1===t(n,e[n]))return},generateUniqueIdentifier:function(e){var t=i.getOpt("generateUniqueIdentifier");if("function"==typeof t)return t(e);var n=e.webkitRelativePath||e.fileName||e.name;return e.size+"-"+n.replace(/[^0-9a-zA-Z_-]/gim,"")},contains:function(e,t){var n=!1;return o.each(e,function(e){return e!=t||(n=!0,!1)}),n},formatSize:function(e){return e<1024?e+" bytes":e<1048576?(e/1024).toFixed(0)+" KB":e<1073741824?(e/1024/1024).toFixed(1)+" MB":(e/1024/1024/1024).toFixed(1)+" GB"},getTarget:function(e){var t=i.getOpt("target");return"function"==typeof t?t(e):(t+=t.indexOf("?")<0?"?":"&",t+e.join("&"))}},a=function(e){o.stopEvent(e),e.dataTransfer&&e.dataTransfer.items?u(e.dataTransfer.items,e):e.dataTransfer&&e.dataTransfer.files&&u(e.dataTransfer.files,e)},s=function(e){e.preventDefault()},u=function(e,t,n,r){n||(n={total:0,files:[],event:t}),c(e.length,n);for(var i=0;i<e.length;i++){var o,a,s=e[i];if(s.isFile||s.isDirectory)o=s;else if(s.getAsEntry)o=s.getAsEntry();else{if(!s.webkitGetAsEntry){if("function"==typeof s.getAsFile){l(s.getAsFile(),n,r);continue}if(File&&s instanceof File){l(s,n,r);continue}c(-1,n);continue}o=s.webkitGetAsEntry()}if(o){if(o.isFile)o.file(function(e){l(e,n,r)},function(e){console.warn(e)});else if(o.isDirectory){a=o.createReader();var f=[],d=function(e){a.readEntries(function(r){if(r.length>0){for(var i=0;i<r.length;i++)f.push(r[i]);d(o.fullPath)}else u(f,t,n,e),c(-1,n)},function(e){c(-1,n),console.warn(e)})};d(o.fullPath)}}else c(-1,n)}},c=function(e,t){t.total+=e,t.files.length===t.total&&f(t.files,t.event)},l=function(e,t,n){n&&(e.relativePath=n+"/"+e.name),t.files.push(e),t.files.length===t.total&&f(t.files,t.event)},f=function(e,t){var r=0,a=i.getOpt(["maxFiles","minFileSize","maxFileSize","maxFilesErrorCallback","minFileSizeErrorCallback","maxFileSizeErrorCallback","fileType","fileTypeErrorCallback"]);if(void 0!==a.maxFiles&&a.maxFiles<e.length+i.files.length){if(1!==a.maxFiles||1!==i.files.length||1!==e.length)return a.maxFilesErrorCallback(e,r++),!1;i.removeFile(i.files[0])}var s=[];o.each(e,function(e){function u(r){i.getFromUniqueIdentifier(r)||function(){e.uniqueIdentifier=r;var o=new n(i,e,r);i.files.push(o),s.push(o),o.container=void 0!==t?t.srcElement:null,window.setTimeout(function(){i.fire("fileAdded",o,t)},0)}()}var c=e.name;if(a.fileType.length>0){var l=!1;for(var f in a.fileType){var d="."+a.fileType[f];if(-1!==c.indexOf(d,c.length-d.length)){l=!0;break}}if(!l)return a.fileTypeErrorCallback(e,r++),!1}if(void 0!==a.minFileSize&&e.size<a.minFileSize)return a.minFileSizeErrorCallback(e,r++),!1;if(void 0!==a.maxFileSize&&e.size>a.maxFileSize)return a.maxFileSizeErrorCallback(e,r++),!1;var h=o.generateUniqueIdentifier(e);h&&"function"==typeof h.done&&"function"==typeof h.fail?h.done(function(e){u(e)}).fail(function(){u()}):u(h)}),window.setTimeout(function(){i.fire("filesAdded",s)},0)};return i.uploadNextChunk=function(){var e=!1;if(i.getOpt("prioritizeFirstAndLastChunk")&&(o.each(i.files,function(t){return t.chunks.length&&"pending"==t.chunks[0].status()&&0===t.chunks[0].preprocessState?(t.chunks[0].send(),e=!0,!1):t.chunks.length>1&&"pending"==t.chunks[t.chunks.length-1].status()&&0===t.chunks[t.chunks.length-1].preprocessState?(t.chunks[t.chunks.length-1].send(),e=!0,!1):void 0}),e))return!0;if(o.each(i.files,function(t){if(!1===t.isPaused()&&o.each(t.chunks,function(t){if("pending"==t.status()&&0===t.preprocessState)return t.send(),e=!0,!1}),e)return!1}),e)return!0;var t=!1;return o.each(i.files,function(e){if(!e.isComplete())return t=!0,!1}),t||i.fire("complete"),!1},i.assignBrowse=function(e,t){void 0===e.length&&(e=[e]),o.each(e,function(e){var n;"INPUT"===e.tagName&&"file"===e.type?n=e:(n=document.createElement("input"),n.setAttribute("type","file"),n.style.display="none",e.addEventListener("click",function(){n.style.opacity=0,n.style.display="block",n.focus(),n.click(),n.style.display="none"},!1),e.appendChild(n));var r=i.getOpt("maxFiles");void 0===r||1!=r?n.setAttribute("multiple","multiple"):n.removeAttribute("multiple"),t?n.setAttribute("webkitdirectory","webkitdirectory"):n.removeAttribute("webkitdirectory"),n.addEventListener("change",function(e){f(e.target.files,e),e.target.value=""},!1)})},i.assignDrop=function(e){void 0===e.length&&(e=[e]),o.each(e,function(e){e.addEventListener("dragover",s,!1),e.addEventListener("dragenter",s,!1),e.addEventListener("drop",a,!1)})},i.unAssignDrop=function(e){void 0===e.length&&(e=[e]),o.each(e,function(e){e.removeEventListener("dragover",s),e.removeEventListener("dragenter",s),e.removeEventListener("drop",a)})},i.isUploading=function(){var e=!1;return o.each(i.files,function(t){if(t.isUploading())return e=!0,!1}),e},i.upload=function(){if(!i.isUploading()){i.fire("uploadStart");for(var e=1;e<=i.getOpt("simultaneousUploads");e++)i.uploadNextChunk()}},i.pause=function(){o.each(i.files,function(e){e.abort()}),i.fire("pause")},i.cancel=function(){for(var e=i.files.length-1;e>=0;e--)i.files[e].cancel();i.fire("cancel")},i.progress=function(){var e=0,t=0;return o.each(i.files,function(n){e+=n.progress()*n.size,t+=n.size}),t>0?e/t:0},i.addFile=function(e,t){f([e],t)},i.removeFile=function(e){for(var t=i.files.length-1;t>=0;t--)i.files[t]===e&&i.files.splice(t,1)},i.getFromUniqueIdentifier=function(e){var t=!1;return o.each(i.files,function(n){n.uniqueIdentifier==e&&(t=n)}),t},i.getSize=function(){var e=0;return o.each(i.files,function(t){e+=t.size}),e},this};e.exports=t}()},function(e,t,n){function r(e,t,n){var r=t&&n||0,i=t||[];e=e||{};var a=void 0!==e.clockseq?e.clockseq:u,f=void 0!==e.msecs?e.msecs:(new Date).getTime(),d=void 0!==e.nsecs?e.nsecs:l+1,h=f-c+(d-l)/1e4;if(h<0&&void 0===e.clockseq&&(a=a+1&16383),(h<0||f>c)&&void 0===e.nsecs&&(d=0),d>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");c=f,l=d,u=a,f+=122192928e5;var p=(1e4*(268435455&f)+d)%4294967296;i[r++]=p>>>24&255,i[r++]=p>>>16&255,i[r++]=p>>>8&255,i[r++]=255&p;var v=f/4294967296*1e4&268435455;i[r++]=v>>>8&255,i[r++]=255&v,i[r++]=v>>>24&15|16,i[r++]=v>>>16&255,i[r++]=a>>>8|128,i[r++]=255&a;for(var m=e.node||s,y=0;y<6;++y)i[r+y]=m[y];return t||o(i)}var i=n(108),o=n(109),a=i(),s=[1|a[0],a[1],a[2],a[3],a[4],a[5]],u=16383&(a[6]<<8|a[7]),c=0,l=0;e.exports=r},function(e,t,n){function r(e,t,n){var r=t&&n||0;"string"==typeof e&&(t="binary"==e?new Array(16):null,e=null),e=e||{};var a=e.random||(e.rng||i)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var s=0;s<16;++s)t[r+s]=a[s];return t||o(a)}var i=n(108),o=n(109);e.exports=r},function(e,t){},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(101),o=r(i),a=n(0),s=r(a),u=n(1),c=r(u);Object.defineProperty(t,"__esModule",{value:!0});var l={internalStorage:{storage:{},getItem:function(e){return this.storage[e]},setItem:function(e,t){this.storage[e]=t},clear:function(){this.storage={}}},getLocalStorage:function(){return window.localStorage},getSessionStorage:function(){return window.sessionStorage},getInternalStorage:function(){return this.internalStorage},getStorage:function(){try{var e=this.getLocalStorage();if(e)return e;var t=this.getSessionStorage();if(t)return t}catch(e){return this.getInternalStorage()}},isCORSRequest:function(e){var t=document.createElement("a");return t.href=e,t.host!==window.location.host},getCookieValue:function(e){for(var t=e+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(var i=n[r];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t))return i.substring(t.length,i.length)}return null}},f=function(){function e(t){var n=this;(0,s.default)(this,e),this.STORAGE_KEY_PREAMBLE="herment",this.MAXEVENTS=100,this.PUBLISH_INTERVAL=5e3,this.SAVE_INTERVAL=1e3,this.isStarted=!1,this.config=this.parseConfig(t),this.storage=l.getStorage(),window.addEventListener("unload",function(){return n.moveQueueToStorage()})}return(0,c.default)(e,[{key:"getAtlPath",value:function(){return l.getCookieValue("__atl_path")}},{key:"getServerName",value:function(){return document.location.hostname}},{key:"getProductNameFromServerName",value:function(e){return void 0!==e?e.replace(".com","").replace(".net","").replace(".org","").replace(".au","").replace(".io",""):"-"}},{key:"getSubdomain",value:function(e){if(e.match(/^([a-z0-9\.]*)[\-\.]{1}([a-z0-9]+)+\.([a-z]{2,6})$/i)){var t=e.split(".");if(t=2===t[t.length-1].length?t.slice(0,t.length-3):t.slice(0,t.length-2),0!==t.length)return t.join(".")}return"-"}},{key:"generateRandomStorageKey",value:function(){var e=(Math.random()+"").slice(2,12),t=(Math.random()+"").slice(2,12);return e.concat(t)}},{key:"ajaxPost",value:function(e,t){var n=new XMLHttpRequest;n.open("POST",e,!0),n.setRequestHeader("Content-Type","application/json"),n.setRequestHeader("Accept","application/json, text/javascript, */*;"),n.send(t)}},{key:"parseConfig",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=window,n=t.AJS?t.AJS.EventQueue:[],r=e.queue||n,i=e.analyticsscheme||"https",o=e.analyticsserver||"analytics.atlassian.com",a=e.analyticsurl||"/analytics/events",s=e.server||this.getServerName();return{queue:r,gasScheme:i,gasServer:o,gasUrl:a,serverName:s,productName:e.product||this.getProductNameFromServerName(s),subProductName:e.subproduct||this.getSubdomain(s)||"-",version:e.version,session:e.session,sen:e.sen,sourceIP:e.sourceIP,atlPath:e.atlpath||this.getAtlPath(),post:e.ajax||this.ajaxPost,maxevents:e.maxevents||this.MAXEVENTS,storageKey:e.storage_key||this.STORAGE_KEY_PREAMBLE+this.generateRandomStorageKey()+this.generateRandomStorageKey(),user:e.user||"default",publishInterval:e.publish_interval||this.PUBLISH_INTERVAL,saveInterval:e.save_interval||this.SAVE_INTERVAL}}},{key:"pushToServer",value:function(e,t){var n=this.config,r=n.gasScheme,i=n.gasServer,a=n.gasUrl;(t||this.config.post)(r+"://"+i+a,(0,o.default)({events:e}))}},{key:"addEventsToArray",value:function(e,t,n){if(n&&n.server&&n.product&&n.subproduct&&n.user)for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];if(t.length>=this.config.maxevents)return;if(i.name&&i.properties){var o={name:i.name,properties:i.properties,serverTime:i.time||(new Date).getTime(),server:n.server,user:n.user,product:n.product,subproduct:n.subproduct,version:n.version,session:n.session,sen:n.sen,sourceIP:n.sourceIP,atlPath:n.atlPath};t.push(o)}}}},{key:"publishFromQueueAndStorage",value:function(e){try{var t=e||this.pushToServer.bind(this),n=[];if(this.config.queue.length<1&&(void 0===this.storage||this.storage.length<1))return;var r={server:this.config.serverName,user:this.config.user,product:this.config.productName,subproduct:this.config.subProductName,version:this.config.version,session:this.config.session,sen:this.config.sen,sourceIP:this.config.sourceIP,atlPath:this.config.atlPath};this.addEventsToArray(this.config.queue,n,r);var i=this.popEventsFromStorage();this.addEventsToArray(i,n,r),this.config.queue.length=0,n&&n.length&&t(n)}catch(e){}}},{key:"serialiseEventsToString",value:function(e){return(0,o.default)(e)}},{key:"deserialiseEvents",value:function(e){return JSON.parse(e)}},{key:"storeEvents",value:function(e){if(this.storage)try{if(this.storage[this.config.storageKey]){var t=this.deserialiseEvents(this.storage[this.config.storageKey])||[];t.length<this.config.maxevents&&t.push.apply(t,e),e=t}this.storage.setItem(this.config.storageKey,this.serialiseEventsToString(e))}catch(e){}}},{key:"popEventsFromStorage",value:function(){if(!this.storage)return[];try{if(this.storage[this.config.storageKey]){var e=this.deserialiseEvents(this.storage[this.config.storageKey]);return this.storage[this.config.storageKey]=this.serialiseEventsToString([]),e}}catch(e){}return[]}},{key:"moveQueueToStorage",value:function(){0!==this.config.queue.length&&this.storage&&(this.storeEvents(this.config.queue),this.config.queue.length=0)}},{key:"start",value:function(){var e=this;this.isStarted=!0;var t=Array.prototype.push;this.config.queue.push=function(n){n.time=(new Date).getTime(),t.call(e.config.queue,n)},this.initialSaveTimeout=setTimeout(this.publishFromQueueAndStorage.bind(this),this.config.saveInterval),this.publishInterval=setInterval(this.publishFromQueueAndStorage.bind(this),this.config.publishInterval),this.saveInterval=setInterval(this.moveQueueToStorage.bind(this),this.config.saveInterval)}},{key:"stop",value:function(){this.isStarted=!1,this.publishFromQueueAndStorage(),clearTimeout(this.initialSaveTimeout),clearInterval(this.saveInterval),clearInterval(this.publishInterval)}},{key:"destroy",value:function(){this.stop()}}]),e}(),d=void 0,h=function(){return function(e){return d?(d.stop(),void(d.config=d.parseConfig(e))):d=new f(e)}}();t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sliceByChunks=function(e,t){for(var n=[],r=0;r<e.length;r+=t)n.push(e.slice(r,r+t));return n}},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(213)),r(n(112)),r(n(214)),r(n(216)),r(n(113)),r(n(122))},function(e,t,n){"use strict";function r(e,t){return{type:"FETCHING_COLLECTION_SUCCEEDED",collection:e,hasNextPage:t}}function i(e){return{type:"FETCHING_COLLECTION_FAILED",error:e}}Object.defineProperty(t,"__esModule",{value:!0});var o;!function(e){e[e.click=0]="click",e[e.delete=1]="delete",e[e.download=2]="download",e[e.retry=3]="retry",e[e.custom=4]="custom"}(o=t.CardActionType||(t.CardActionType={})),t.CardClick=function(e){return{type:o.click,handler:e}},t.CardDelete=function(e){return{label:"Delete",type:o.delete,handler:e}},t.ListCardClick=function(e){return{type:o.click,handler:e}},t.ListCardDelete=function(e){return{label:"Delete",type:o.delete,handler:e}},t.CollectionCardClick=function(e){return{type:o.click,handler:e}},t.fetchingCollectionSucceeded=r,t.fetchingCollectionFailed=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(215);t.DefaultMediaStateManager=r.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(53),i=function(){function e(){this.subscribers={},this.state=new Map}return e.prototype.getState=function(e){return this.state.get(e)},e.prototype.updateState=function(e,t){var n=this.subscribers[e],i=r.__assign({},this.state.get(e)||{},t);this.state.set(e,i),void 0!==n&&Array.from(n).forEach(function(e){return e.call(e,i)})},e.prototype.subscribe=function(e,t){var n=this.subscribers,r=n[e];void 0===r&&(r=[],n[e]=r),r.indexOf(t)>-1||r.push(t)},e.prototype.unsubscribe=function(e,t){var n=this.subscribers[e];if(void 0!==n){var r=n.indexOf(t);r>-1&&n.splice(r,1)}},e.prototype.destroy=function(){this.subscribers={}},e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(26);n(217),n(218);var i=n(113),o=n(242),a=n(244),s=n(124),u=n(245),c=n(127),l=200,f=function(){function e(){}return e.create=function(e){return new d(e)},e}();t.ContextFactory=f;var d=function(){function e(e){this.config=e,this.collectionPool=o.RemoteMediaCollectionProviderFactory.createPool(),this.itemPool=i.MediaItemProvider.createPool(),this.urlPreviewPool=i.MediaUrlPreviewProvider.createPool(),this.fileItemCache=new u.LRUCache(e.cacheSize||l)}return e.prototype.getMediaItemProvider=function(e,t,n,o){var a=o&&"link"===o.type,s=o&&"file"===o.type&&"pending"!==o.details.processingStatus;if(o&&(a||s))return{observable:function(){return r.Observable.of(o)}};var u=i.MediaItemProvider.fromPool(this.itemPool,this.apiConfig,this.fileItemCache,t,e,n);return o?{observable:function(){return u.observable().startWith(o)}}:u},e.prototype.getMediaCollectionProvider=function(e,t){return void 0===t&&(t=c.DEFAULT_COLLECTION_PAGE_SIZE),o.RemoteMediaCollectionProviderFactory.fromPool(this.collectionPool,this.apiConfig,e,t)},e.prototype.getDataUriService=function(e){return new a.MediaDataUriService(this.config.authProvider,this.config.serviceHost,e)},e.prototype.getUrlPreviewProvider=function(e){return i.MediaUrlPreviewProvider.fromPool(this.urlPreviewPool,this.apiConfig,e)},e.prototype.addLinkItem=function(e,t,n){return new s.MediaLinkService(this.apiConfig).addLinkItem(e,t,n)},e.prototype.refreshCollection=function(e,t){this.getMediaCollectionProvider(e,t).refresh()},Object.defineProperty(e.prototype,"apiConfig",{get:function(){return{serviceHost:this.config.serviceHost,authProvider:this.config.authProvider}},enumerable:!0,configurable:!0}),e}()},function(e,t){e.exports=n(57)},function(e,t){e.exports=n(63)},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n(35),i=function(){function t(e,t){this.config=e,this.fileItemCache=t}return t.prototype.getFileItem=function(t,n){var i=this,o=[t,"file"].join("-"),a=this.fileItemCache.get(o);return a?e.resolve(a):r.default({config:this.config,collectionName:n,preventPreflight:!0})({url:"/file/"+t}).then(function(e){return e.data}).then(function(e){var t={type:"file",details:{id:e.id,mediaType:e.mediaType,mimeType:e.mimeType,name:e.name,processingStatus:e.processingStatus,size:e.size,artifacts:e.artifacts}};return"succeeded"===e.processingStatus&&i.fileItemCache.set(o,t),t})},t}();t.MediaFileService=i}).call(t,n(7))},function(e,t,n){"use strict";(function(t){function r(e){var t=new a(e),n=o(a.prototype.request,t);return i.extend(n,a.prototype,t),i.extend(n,t),n}var i=n(6),o=n(117),a=n(221),s=n(81),u=r(s);u.Axios=a,u.create=function(e){return r(i.merge(s,e))},u.Cancel=n(121),u.CancelToken=n(235),u.isCancel=n(120),u.all=function(e){return t.all(e)},u.spread=n(236),e.exports=u,e.exports.default=u}).call(t,n(7))},function(e,t,n){"use strict";(function(t){function r(e){this.defaults=e,this.interceptors={request:new a,response:new a}}var i=n(81),o=n(6),a=n(230),s=n(231),u=n(233),c=n(234);r.prototype.request=function(e){"string"==typeof e&&(e=o.merge({url:arguments[0]},arguments[1])),e=o.merge(i,this.defaults,{method:"get"},e),e.baseURL&&!u(e.url)&&(e.url=c(e.baseURL,e.url));var n=[s,void 0],r=t.resolve(e);for(this.interceptors.request.forEach(function(e){n.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){n.push(e.fulfilled,e.rejected)});n.length;)r=r.then(n.shift(),n.shift());return r},o.forEach(["delete","get","head"],function(e){r.prototype[e]=function(t,n){return this.request(o.merge(n||{},{method:e,url:t}))}}),o.forEach(["post","put","patch"],function(e){r.prototype[e]=function(t,n,r){return this.request(o.merge(r||{},{method:e,url:t,data:n}))}}),e.exports=r}).call(t,n(7))},function(e,t,n){"use strict";var r=n(6);e.exports=function(e,t){r.forEach(e,function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])})}},function(e,t,n){"use strict";var r=n(119);e.exports=function(e,t,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n)):e(n)}},function(e,t,n){"use strict";e.exports=function(e,t,n,r){return e.config=t,n&&(e.code=n),e.response=r,e}},function(e,t,n){"use strict";function r(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var i=n(6);e.exports=function(e,t,n){if(!t)return e;var o;if(n)o=n(t);else if(i.isURLSearchParams(t))o=t.toString();else{var a=[];i.forEach(t,function(e,t){null!==e&&void 0!==e&&(i.isArray(e)&&(t+="[]"),i.isArray(e)||(e=[e]),i.forEach(e,function(e){i.isDate(e)?e=e.toISOString():i.isObject(e)&&(e=JSON.stringify(e)),a.push(r(t)+"="+r(e))}))}),o=a.join("&")}return o&&(e+=(-1===e.indexOf("?")?"?":"&")+o),e}},function(e,t,n){"use strict";var r=n(6);e.exports=function(e){var t,n,i,o={};return e?(r.forEach(e.split("\n"),function(e){i=e.indexOf(":"),t=r.trim(e.substr(0,i)).toLowerCase(),n=r.trim(e.substr(i+1)),t&&(o[t]=o[t]?o[t]+", "+n:n)}),o):o}},function(e,t,n){"use strict";var r=n(6);e.exports=r.isStandardBrowserEnv()?function(){function e(e){var t=e;return n&&(i.setAttribute("href",t),t=i.href),i.setAttribute("href",t),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}var t,n=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");return t=e(window.location.href),function(n){var i=r.isString(n)?e(n):n;return i.protocol===t.protocol&&i.host===t.host}}():function(){return function(){return!0}}()},function(e,t,n){"use strict";function r(){this.message="String contains an invalid character"}function i(e){for(var t,n,i=String(e),a="",s=0,u=o;i.charAt(0|s)||(u="=",s%1);a+=u.charAt(63&t>>8-s%1*8)){if((n=i.charCodeAt(s+=.75))>255)throw new r;t=t<<8|n}return a}var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.prototype=new Error,r.prototype.code=5,r.prototype.name="InvalidCharacterError",e.exports=i},function(e,t,n){"use strict";var r=n(6);e.exports=r.isStandardBrowserEnv()?function(){return{write:function(e,t,n,i,o,a){
var s=[];s.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(i)&&s.push("path="+i),r.isString(o)&&s.push("domain="+o),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},function(e,t,n){"use strict";function r(){this.handlers=[]}var i=n(6);r.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},r.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},r.prototype.forEach=function(e){i.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=r},function(e,t,n){"use strict";(function(t){function r(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var i=n(6),o=n(232),a=n(120),s=n(81);e.exports=function(e){return r(e),e.headers=e.headers||{},e.data=o(e.data,e.headers,e.transformRequest),e.headers=i.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),i.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||s.adapter)(e).then(function(t){return r(e),t.data=o(t.data,t.headers,e.transformResponse),t},function(n){return a(n)||(r(e),n&&n.response&&(n.response.data=o(n.response.data,n.response.headers,e.transformResponse))),t.reject(n)})}}).call(t,n(7))},function(e,t,n){"use strict";var r=n(6);e.exports=function(e,t,n){return r.forEach(n,function(n){e=n(e,t)}),e}},function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,n){"use strict";e.exports=function(e,t){return e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,"")}},function(e,t,n){"use strict";(function(t){function r(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var n;this.promise=new t(function(e){n=e});var r=this;e(function(e){r.reason||(r.reason=new i(e),n(r.reason))})}var i=n(121);r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.source=function(){var e;return{token:new r(function(t){e=t}),cancel:e}},e.exports=r}).call(t,n(7))},function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isImageRemote=function(e,t){if(void 0===t&&(t=window.location.origin),URL&&URL.prototype){var n=new URL(e);return!!n.host&&n.origin!==t}return!0}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n;t.checkWebpSupport=function(){return void 0!==n?e.resolve(n):new e(function(e){var t=new Image;t.src="data:image/webp;base64,UklGRi4AAABXRUJQVlA4TCEAAAAvAUAAEB8wAiMwAgSSNtse/cXjxyCCmrYNWPwmHRH9jwMA",t.onload=t.onerror=function(){n=2===t.height,e(n)}})}}).call(t,n(7))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(116),i=n(123),o=n(82),a=n(125),s=function(){function e(){}return e.fromMediaApi=function(e,t,n,o,a){switch(n){case"file":return r.FileProvider.fromMediaApi(e,t,o,a,r.FILE_PROVIDER_RETRY_INTERVAL);case"link":return i.LinkProvider.fromMediaApi(e,o,a);default:throw new Error("invalid media type "+n)}},e.fromPool=function(t,n,r,i,o,s){return{observable:function(){var u=[i,o,s].join("-");return a.observableFromObservablePool(t,u,function(){return e.fromMediaApi(n,r,i,o,s).observable()})}}},e.createPool=function(){return new o.Pool},e}();t.MediaItemProvider=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(53),i=n(126),o=n(82),a=n(125),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.fromMediaApi=function(e,t){return i.UrlPreviewProvider.fromMediaApi(e,t)},t.fromPool=function(e,n,r){return{observable:function(){return a.observableFromObservablePool(e,r,function(){return t.fromMediaApi(n,r).observable()})}}},t.createPool=function(){return new o.Pool},t}(i.UrlPreviewProvider);t.MediaUrlPreviewProvider=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(35),i=function(){function e(e){this.config=e}return e.prototype.getUrlPreview=function(e){return r.default({config:this.config})({url:"/link/preview",params:{url:e}}).then(function(e){var t=e.data,n=t.preview,r=t.previewError;if(r)throw new Error(r.code+": "+r.name);return n})},e}();t.MediaUrlPreviewService=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(114),i=n(127),o=n(243),a=n(82),s=function(){function e(){}return e.fromCollectionService=function(e,t,n,i){return void 0===i&&(i="desc"),new r.RemoteMediaCollectionProvider(e,t,n,i)},e.fromMediaAPI=function(t,n,r,o){return void 0===o&&(o="desc"),e.fromCollectionService(new i.MediaCollectionService(t),n,r,o)},e.fromPool=function(e,t,n,a,s){void 0===s&&(s="desc");var u=[n,a,s].join("-"),c=function(){var e=new i.MediaCollectionService(t);return new r.RemoteMediaCollectionProvider(e,n,a,s)};return o.mediaCollectionProviderFromPool(e,u,c)},e.createPool=function(){return new a.Pool},e}();t.RemoteMediaCollectionProviderFactory=s},function(e,t,n){"use strict";function r(e,t,n){return e.acquire(t,function(){var r=n(),o=r.observable;return r.observable=function(){return new i.Observable(function(n){var i=o.bind(r)(),a=i.subscribe(n);return function(){a.unsubscribe(),e.release(t)}})},r})}Object.defineProperty(t,"__esModule",{value:!0});var i=n(26);t.mediaCollectionProviderFromPool=r},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n(35),i=function(){function t(e,t,n){this.authProvider=e,this.serviceHost=t,this.collectionName=n,this.request=r.default({config:{serviceHost:this.serviceHost,authProvider:this.authProvider},collectionName:this.collectionName})}return t.prototype.fetchOriginalDataUri=function(e){return this.fetchSomeDataUri("/file/"+e.details.id+"/binary",{"max-age":3600,collection:this.collectionName})},t.prototype.fetchImageDataUri=function(e,t,n,r){return void 0===r&&(r="crop"),this.fetchSomeDataUri("/file/"+e.details.id+"/image",{width:t,height:n,mode:r,"max-age":3600,collection:this.collectionName})},t.prototype.fetchSomeDataUri=function(e,t){return this.request({url:e,params:t,responseType:"image"}).then(this.readBlob)},t.prototype.readBlob=function(t){return new e(function(e,n){var r=new FileReader;r.addEventListener("load",function(){return e(r.result)}),r.addEventListener("error",function(){return n(r.error)}),r.readAsDataURL(t)})},t}();t.MediaDataUriService=i}).call(t,n(7))},function(e,t){function n(e){this.size=0,this.limit=e,this.oldest=this.newest=void 0,this._keymap={}}n.prototype._markEntryAsUsed=function(e){e!==this.newest&&(e.newer&&(e===this.oldest&&(this.oldest=e.newer),e.newer.older=e.older),e.older&&(e.older.newer=e.newer),e.newer=void 0,e.older=this.newest,this.newest&&(this.newest.newer=e),this.newest=e)},n.prototype.put=function(e,t){var n=this._keymap[e];return n?(n.value=t,void this._markEntryAsUsed(n)):(this._keymap[e]=n={key:e,value:t,older:void 0,newer:void 0},this.newest?(this.newest.newer=n,n.older=this.newest):this.oldest=n,this.newest=n,this.size++,this.size>this.limit?this.shift():void 0)},n.prototype.shift=function(){var e=this.oldest;return e&&(this.oldest.newer?(this.oldest=this.oldest.newer,this.oldest.older=void 0):(this.oldest=void 0,this.newest=void 0),e.newer=e.older=void 0,delete this._keymap[e.key],this.size--),e},n.prototype.get=function(e,t){var n=this._keymap[e];if(void 0!==n)return this._markEntryAsUsed(n),t?n:n.value},n.prototype.find=function(e){return this._keymap[e]},n.prototype.set=function(e,t){var n,r=this.get(e,!0);return r?(n=r.value,r.value=t):(n=this.put(e,t))&&(n=n.value),n},n.prototype.remove=function(e){var t=this._keymap[e];if(t)return delete this._keymap[t.key],t.newer&&t.older?(t.older.newer=t.newer,t.newer.older=t.older):t.newer?(t.newer.older=void 0,this.oldest=t.newer):t.older?(t.older.newer=void 0,this.newest=t.older):this.oldest=this.newest=void 0,this.size--,t.value},n.prototype.removeAll=function(){this.oldest=this.newest=void 0,this.size=0,this._keymap={}},"function"==typeof Object.keys?n.prototype.keys=function(){return Object.keys(this._keymap)}:n.prototype.keys=function(){var e=[];for(var t in this._keymap)e.push(t);return e},n.prototype.forEach=function(e,t,n){var r;if(!0===t?(n=!0,t=void 0):"object"!=typeof t&&(t=this),n)for(r=this.newest;r;)e.call(t,r.key,r.value,this),r=r.older;else for(r=this.oldest;r;)e.call(t,r.key,r.value,this),r=r.newer},n.prototype.toJSON=function(){for(var e=new Array(this.size),t=0,n=this.oldest;n;)e[t++]={key:n.key,value:n.value},n=n.newer;return e},n.prototype.toString=function(){for(var e="",t=this.oldest;t;)e+=String(t.key)+":"+t.value,(t=t.newer)&&(e+=" < ");return e},"object"==typeof this&&(this.LRUCache=n)},function(e,t,n){e.exports={default:n(247),__esModule:!0}},function(e,t,n){n(73),n(30),n(33),n(248),n(254),n(257),n(259),e.exports=n(2).Set},function(e,t,n){"use strict";var r=n(249),i=n(130);e.exports=n(250)("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return r.def(i(this,"Set"),e=0===e?0:e,e)}},r)},function(e,t,n){"use strict";var r=n(9).f,i=n(45),o=n(76),a=n(14),s=n(74),u=n(34),c=n(65),l=n(97),f=n(107),d=n(12),h=n(70).fastKey,p=n(130),v=d?"_s":"size",m=function(e,t){var n,r=h(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,c){var l=e(function(e,r){s(e,l,t,"_i"),e._t=t,e._i=i(null),e._f=void 0,e._l=void 0,e[v]=0,void 0!=r&&u(r,n,e[c],e)});return o(l.prototype,{clear:function(){for(var e=p(this,t),n=e._i,r=e._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];e._f=e._l=void 0,e[v]=0},delete:function(e){var n=p(this,t),r=m(n,e);if(r){var i=r.n,o=r.p;delete n._i[r.i],r.r=!0,o&&(o.n=i),i&&(i.p=o),n._f==r&&(n._f=i),n._l==r&&(n._l=o),n[v]--}return!!r},forEach:function(e){p(this,t);for(var n,r=a(e,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(e){return!!m(p(this,t),e)}}),d&&r(l.prototype,"size",{get:function(){return p(this,t)[v]}}),l},def:function(e,t,n){var r,i,o=m(e,t);return o?o.v=n:(e._l=o={i:i=h(t,!0),k:t,v:n,p:r=e._l,n:void 0,r:!1},e._f||(e._f=o),r&&(r.n=o),e[v]++,"F"!==i&&(e._i[i]=o)),e},getEntry:m,setStrong:function(e,t,n){c(e,t,function(e,n){this._t=p(e,t),this._k=n,this._l=void 0},function(){for(var e=this,t=e._k,n=e._l;n&&n.r;)n=n.p;return e._t&&(e._l=n=n?n.n:e._t._f)?"keys"==t?l(0,n.k):"values"==t?l(0,n.v):l(0,[n.k,n.v]):(e._t=void 0,l(1))},n?"entries":"values",!n,!0),f(t)}}},function(e,t,n){"use strict";var r=n(4),i=n(5),o=n(70),a=n(18),s=n(15),u=n(76),c=n(34),l=n(74),f=n(11),d=n(32),h=n(9).f,p=n(251)(0),v=n(12);e.exports=function(e,t,n,m,y,b){var g=r[e],_=g,w=y?"set":"add",x=_&&_.prototype,k={};return v&&"function"==typeof _&&(b||x.forEach&&!a(function(){(new _).entries().next()}))?(_=t(function(t,n){l(t,_,e,"_c"),t._c=new g,void 0!=n&&c(n,y,t[w],t)}),p("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(e){var t="add"==e||"set"==e;e in x&&(!b||"clear"!=e)&&s(_.prototype,e,function(n,r){if(l(this,_,e),!t&&b&&!f(n))return"get"==e&&void 0;var i=this._c[e](0===n?0:n,r);return t?this:i})}),b||h(_.prototype,"size",{get:function(){return this._c.size}})):(_=m.getConstructor(t,e,y,w),u(_.prototype,n),o.NEED=!0),d(_,e),k[e]=_,i(i.G+i.W+i.F,k),b||m.setStrong(_,e,y),_}},function(e,t,n){var r=n(14),i=n(66),o=n(41),a=n(67),s=n(252);e.exports=function(e,t){var n=1==e,u=2==e,c=3==e,l=4==e,f=6==e,d=5==e||f,h=t||s;return function(t,s,p){for(var v,m,y=o(t),b=i(y),g=r(s,p,3),_=a(b.length),w=0,x=n?h(t,_):u?h(t,0):void 0;_>w;w++)if((d||w in b)&&(v=b[w],m=g(v,w,y),e))if(n)x[w]=m;else if(m)switch(e){case 3:return!0;case 5:return v;case 6:return w;case 2:x.push(v)}else if(l)return!1;return f?-1:c||l?l:x}}},function(e,t,n){var r=n(253);e.exports=function(e,t){return new(r(e))(t)}},function(e,t,n){var r=n(11),i=n(98),o=n(3)("species");e.exports=function(e){var t;return i(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!i(t.prototype)||(t=void 0),r(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t}},function(e,t,n){var r=n(5);r(r.P+r.R,"Set",{toJSON:n(255)("Set")})},function(e,t,n){var r=n(49),i=n(256);e.exports=function(e){return function(){if(r(this)!=e)throw TypeError(e+"#toJSON isn't generic");return i(this)}}},function(e,t,n){var r=n(34);e.exports=function(e,t){var n=[];return r(e,!1,n.push,n,t),n}},function(e,t,n){n(258)("Set")},function(e,t,n){"use strict";var r=n(5);e.exports=function(e){r(r.S,e,{of:function(){for(var e=arguments.length,t=Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},function(e,t,n){n(260)("Set")},function(e,t,n){"use strict";var r=n(5),i=n(29),o=n(14),a=n(34);e.exports=function(e){r(r.S,e,{from:function(e){var t,n,r,s,u=arguments[1];return i(this),t=void 0!==u,t&&i(u),void 0==e?new this:(n=[],t?(r=0,s=o(u,arguments[2],2),a(e,!1,function(e){n.push(s(e,r++))})):a(e,!1,n.push,n),new this(n))}})}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(0),o=r(i),a=n(1),s=r(a);Object.defineProperty(t,"__esModule",{value:!0});var u=n(22),c=function(){function e(t,n,r,i){return(0,o.default)(this,e),this.size=t,this.progress=n,this.startTime=r,this.measureTime=i,e.isValidSize(t)?e.isValidProgress(t,n)?e.isValidStartTime(r)?e.isValidMeasureTime(r,i)?(this.size=t,this.progress=n,this.startTime=r,void(this.measureTime=i)):void u.handleError("wrong_measure_time","The progress measure time has incorrect format."):void u.handleError("wrong_start_time","The progress start time has incorrect format."):void u.handleError("wrong_progress","The progress format is incorrect."):void u.handleError("wrong_file_size","Passed file size is incorrect.")}return(0,s.default)(e,[{key:"toJSON",value:function(){return{absolute:this.absolute,portion:this.portion,max:this.max,overallTime:this.overallTime,expectedFinishTime:this.expectedFinishTime,timeLeft:this.timeLeft}}},{key:"absolute",get:function(){return this.progress}},{key:"portion",get:function(){return this.progress/this.size}},{key:"max",get:function(){return this.size}},{key:"overallTime",get:function(){return(this.measureTime-this.startTime)/this.portion}},{key:"expectedFinishTime",get:function(){return this.startTime+this.overallTime}},{key:"timeLeft",get:function(){return this.expectedFinishTime-this.measureTime}}],[{key:"isValidSize",value:function(e){return"number"==typeof e&&e>0}},{key:"isValidProgress",value:function(t,n){return e.isValidSize(t)&&"number"==typeof n&&n>=0&&n<=t}},{key:"isValidStartTime",value:function(e){return"number"==typeof e&&e>0}},{key:"isValidMeasureTime",value:function(t,n){return e.isValidStartTime(t)&&"number"==typeof n&&n>=t}}]),e}();t.MediaProgress=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(263),i=n(265);t.createHasher=function(){var e=void 0;try{e=new i.WorkerHasher(3)}catch(t){e=new r.SimpleHasher}return e}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(0),o=r(i),a=n(1),s=r(a);Object.defineProperty(t,"__esModule",{value:!0});var u=n(264),c=function(){function e(){(0,o.default)(this,e)}return(0,s.default)(e,[{key:"hash",value:function(e){var t=e.fileObj.file,n=t.slice(e.startByte,e.endByte),r=new FileReader;r.onload=function(t){var n=t.target.result;e.hash=new u(4194304).digestFromArrayBuffer(n),e.preprocessFinished()},r.readAsArrayBuffer(n)}}]),e}();t.SimpleHasher=c},function(e,t,n){(function(t){!function(){function n(e){"use strict";for(var t={fill:0},o=function(e){for(e+=9;e%64>0;e+=1);return e},a=function(e,t){var n=new Uint8Array(e.buffer),r=t%4,i=t-r;switch(r){case 0:n[i+3]=0;case 1:n[i+2]=0;case 2:n[i+1]=0;case 3:n[i+0]=0}for(var o=1+(t>>2);o<e.length;o++)e[o]=0},s=function(e,t,n){e[t>>2]|=128<<24-(t%4<<3),e[14+(2+(t>>2)&-16)]=n/(1<<29)|0,e[15+(2+(t>>2)&-16)]=n<<3},u=function(e,t,n,r,i){var o,a=this,s=i%4,u=(r+s)%4,c=r-u;switch(s){case 0:e[i]=a.charCodeAt(n+3);case 1:e[i+1-(s<<1)|0]=a.charCodeAt(n+2);case 2:e[i+2-(s<<1)|0]=a.charCodeAt(n+1);case 3:e[i+3-(s<<1)|0]=a.charCodeAt(n)}if(!(r<u+s)){for(o=4-s;o<c;o=o+4|0)t[i+o>>2]=a.charCodeAt(n+o)<<24|a.charCodeAt(n+o+1)<<16|a.charCodeAt(n+o+2)<<8|a.charCodeAt(n+o+3);switch(u){case 3:e[i+c+1|0]=a.charCodeAt(n+c+2);case 2:e[i+c+2|0]=a.charCodeAt(n+c+1);case 1:e[i+c+3|0]=a.charCodeAt(n+c)}}},c=function(e,t,n,r,i){var o,a=this,s=i%4,u=(r+s)%4,c=r-u;switch(s){case 0:e[i]=a[n+3];case 1:e[i+1-(s<<1)|0]=a[n+2];case 2:e[i+2-(s<<1)|0]=a[n+1];case 3:e[i+3-(s<<1)|0]=a[n]}if(!(r<u+s)){for(o=4-s;o<c;o=o+4|0)t[i+o>>2|0]=a[n+o]<<24|a[n+o+1]<<16|a[n+o+2]<<8|a[n+o+3];switch(u){case 3:e[i+c+1|0]=a[n+c+2];case 2:e[i+c+2|0]=a[n+c+1];case 1:e[i+c+3|0]=a[n+c]}}},l=function(e,t,n,r,o){var a,s=this,u=o%4,c=(r+u)%4,l=r-c,f=new Uint8Array(i.readAsArrayBuffer(s.slice(n,n+r)));switch(u){case 0:e[o]=f[3];case 1:e[o+1-(u<<1)|0]=f[2];case 2:e[o+2-(u<<1)|0]=f[1];case 3:e[o+3-(u<<1)|0]=f[0]}if(!(r<c+u)){for(a=4-u;a<l;a=a+4|0)t[o+a>>2|0]=f[a]<<24|f[a+1]<<16|f[a+2]<<8|f[a+3];switch(c){case 3:e[o+l+1|0]=f[l+2];case 2:e[o+l+2|0]=f[l+1];case 1:e[o+l+3|0]=f[l]}}},f=function(e){switch(r.getDataType(e)){case"string":return u.bind(e);case"array":case"buffer":return c.bind(e);case"arraybuffer":return c.bind(new Uint8Array(e));case"view":return c.bind(new Uint8Array(e.buffer,e.byteOffset,e.byteLength));case"blob":return l.bind(e)}},d=new Array(256),h=0;h<256;h++)d[h]=(h<16?"0":"")+h.toString(16);var p=function(e){for(var t=new Uint8Array(e),n=new Array(e.byteLength),r=0;r<n.length;r++)n[r]=d[t[r]];return n.join("")},v=function(e){var t;if(e<=65536)return 65536;if(e<16777216)for(t=1;t<e;t<<=1);else for(t=16777216;t<e;t+=16777216);return t};!function(e){if(e%64>0)throw new Error("Chunk size must be a multiple of 128 bit");t.offset=0,t.maxChunkLen=e,t.padMaxChunkLen=o(e),t.heap=new ArrayBuffer(v(t.padMaxChunkLen+320+20)),t.h32=new Int32Array(t.heap),t.h8=new Int8Array(t.heap),t.core=new n._core({Int32Array:Int32Array,DataView:DataView},{},t.heap),t.buffer=null}(e||65536);var m=function(e,n){t.offset=0;var r=new Int32Array(e,n+320,5);r[0]=1732584193,r[1]=-271733879,r[2]=-1732584194,r[3]=271733878,r[4]=-1009589776},y=function(e,n){var r=o(e),i=new Int32Array(t.heap,0,r>>2);return a(i,e),s(i,e,n),r},b=function(e,n,r,i){f(e)(t.h8,t.h32,n,r,i||0)},g=function(e,n,r,i,o){var a=r;b(e,n,r),o&&(a=y(r,i)),t.core.hash(a,t.padMaxChunkLen)},_=function(e,t){var n=new Int32Array(e,t+320,5),r=new Int32Array(5),i=new DataView(r.buffer);return i.setInt32(0,n[0],!1),i.setInt32(4,n[1],!1),i.setInt32(8,n[2],!1),i.setInt32(12,n[3],!1),i.setInt32(16,n[4],!1),r},w=this.rawDigest=function(e){var n=e.byteLength||e.length||e.size||0;m(t.heap,t.padMaxChunkLen);var r=0,i=t.maxChunkLen;for(r=0;n>r+i;r+=i)g(e,r,i,n,!1);return g(e,r,n-r,n,!0),_(t.heap,t.padMaxChunkLen)};this.digest=this.digestFromString=this.digestFromBuffer=this.digestFromArrayBuffer=function(e){return p(w(e).buffer)},this.resetState=function(){return m(t.heap,t.padMaxChunkLen),this},this.append=function(e){var n,r=0,i=e.byteLength||e.length||e.size||0,o=t.offset%t.maxChunkLen;for(t.offset+=i;r<i;)n=Math.min(i-r,t.maxChunkLen-o),b(e,r,n,o),o+=n,r+=n,o===t.maxChunkLen&&(t.core.hash(t.maxChunkLen,t.padMaxChunkLen),o=0);return this},this.getState=function(){var e;if(t.offset%t.maxChunkLen)e=t.heap.slice(0);else{var n=new Int32Array(t.heap,t.padMaxChunkLen+320,5);e=n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength)}return{offset:t.offset,heap:e}},this.setState=function(e){return t.offset=e.offset,20===e.heap.byteLength?new Int32Array(t.heap,t.padMaxChunkLen+320,5).set(new Int32Array(e.heap)):t.h32.set(new Int32Array(e.heap)),this};var x=this.rawEnd=function(){var e=t.offset,n=e%t.maxChunkLen,r=y(n,e);t.core.hash(r,t.padMaxChunkLen);var i=_(t.heap,t.padMaxChunkLen);return m(t.heap,t.padMaxChunkLen),i};this.end=function(){return p(x().buffer)}}var r={getDataType:function(e){if("string"==typeof e)return"string";if(e instanceof Array)return"array";if(void 0!==t&&t.Buffer&&t.Buffer.isBuffer(e))return"buffer";if(e instanceof ArrayBuffer)return"arraybuffer";if(e.buffer instanceof ArrayBuffer)return"view";if(e instanceof Blob)return"blob";throw new Error("Unsupported data type.")}};if(n._core=function(e,t,n){"use asm";var r=new e.Int32Array(n);function i(e,t){e=e|0;t=t|0;var n=0,i=0,o=0,a=0,s=0,u=0,c=0,l=0,f=0,d=0,h=0,p=0,v=0,m=0;o=r[t+320>>2]|0;s=r[t+324>>2]|0;c=r[t+328>>2]|0;f=r[t+332>>2]|0;h=r[t+336>>2]|0;for(n=0;(n|0)<(e|0);n=n+64|0){a=o;u=s;l=c;d=f;p=h;for(i=0;(i|0)<64;i=i+4|0){m=r[n+i>>2]|0;v=((o<<5|o>>>27)+(s&c|~s&f)|0)+((m+h|0)+1518500249|0)|0;h=f;f=c;c=s<<30|s>>>2;s=o;o=v;r[e+i>>2]=m}for(i=e+64|0;(i|0)<(e+80|0);i=i+4|0){m=(r[i-12>>2]^r[i-32>>2]^r[i-56>>2]^r[i-64>>2])<<1|(r[i-12>>2]^r[i-32>>2]^r[i-56>>2]^r[i-64>>2])>>>31;v=((o<<5|o>>>27)+(s&c|~s&f)|0)+((m+h|0)+1518500249|0)|0;h=f;f=c;c=s<<30|s>>>2;s=o;o=v;r[i>>2]=m}for(i=e+80|0;(i|0)<(e+160|0);i=i+4|0){m=(r[i-12>>2]^r[i-32>>2]^r[i-56>>2]^r[i-64>>2])<<1|(r[i-12>>2]^r[i-32>>2]^r[i-56>>2]^r[i-64>>2])>>>31;v=((o<<5|o>>>27)+(s^c^f)|0)+((m+h|0)+1859775393|0)|0;h=f;f=c;c=s<<30|s>>>2;s=o;o=v;r[i>>2]=m}for(i=e+160|0;(i|0)<(e+240|0);i=i+4|0){m=(r[i-12>>2]^r[i-32>>2]^r[i-56>>2]^r[i-64>>2])<<1|(r[i-12>>2]^r[i-32>>2]^r[i-56>>2]^r[i-64>>2])>>>31;v=((o<<5|o>>>27)+(s&c|s&f|c&f)|0)+((m+h|0)-1894007588|0)|0;h=f;f=c;c=s<<30|s>>>2;s=o;o=v;r[i>>2]=m}for(i=e+240|0;(i|0)<(e+320|0);i=i+4|0){m=(r[i-12>>2]^r[i-32>>2]^r[i-56>>2]^r[i-64>>2])<<1|(r[i-12>>2]^r[i-32>>2]^r[i-56>>2]^r[i-64>>2])>>>31;v=((o<<5|o>>>27)+(s^c^f)|0)+((m+h|0)-899497514|0)|0;h=f;f=c;c=s<<30|s>>>2;s=o;o=v;r[i>>2]=m}o=o+a|0;s=s+u|0;c=c+l|0;f=f+d|0;h=h+p|0}r[t+320>>2]=o;r[t+324>>2]=s;r[t+328>>2]=c;r[t+332>>2]=f;r[t+336>>2]=h}return{hash:i}},e.exports=n,"undefined"!=typeof FileReaderSync){var i=new FileReaderSync,o=function(e,t,n){try{return n(null,e.digest(t))}catch(e){return n(e)}},a=function(e,t,n,r,i){var o=new self.FileReader;o.onloadend=function(){var s=o.result;t+=o.result.byteLength;try{e.append(s)}catch(e){return void i(e)}t<r.size?a(e,t,n,r,i):i(null,e.end())},o.readAsArrayBuffer(r.slice(t,t+n))};self.onmessage=function(e){var t=e.data.data,r=e.data.file,i=e.data.id;if(void 0!==i&&(r||t)){var s=e.data.blockSize||4194304,u=new n(s);u.resetState();var c=function(e,t){e?self.postMessage({id:i,error:e.name}):self.postMessage({id:i,hash:t})};t&&o(u,t,c),r&&a(u,0,s,r,c)}}}}()}).call(t,n(52))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(0),o=r(i),a=n(1),s=r(a);Object.defineProperty(t,"__esModule",{value:!0});var u=n(266),c=function(){function e(t){(0,o.default)(this,e),this.workers=[],this.jobs={};for(var n=0;n<t;++n)this.workers.push(this.createWorker())}return(0,s.default)(e,[{key:"hash",value:function(e){this.calculateHashInWorker(e)}},{key:"createWorker",value:function(){var e=this,t=new Blob([u]),n=URL.createObjectURL(t),r=new Worker(n),i={worker:r,activeJobs:0};return r.addEventListener("message",function(t){e.handleWorkerMessage(t,i)}),i}},{key:"handleWorkerMessage",value:function(e,t){var n=e.data.id,r=this.jobs[n];r&&(delete this.jobs[n],t.activeJobs--,e.data.error?this.calculateHashInWorker(r):(r.hash=e.data.hash,r.preprocessFinished()))}},{key:"calculateHashInWorker",value:function(e){var t=e.fileObj.file,n=t.slice(e.startByte,e.endByte),r=e.fileObj.fileName+e.fileObjSize+e.startByte;this.jobs[r]=e;var i=this.getWorker();this.dispatch(r,i,n)}},{key:"dispatch",value:function(e,t,n){t.activeJobs++;var r=t.worker;if(navigator.userAgent.indexOf("Safari")>-1&&-1===navigator.userAgent.indexOf("Chrome")){var i=new FileReader;return i.onload=function(){r.postMessage({id:e,data:i.result})},void i.readAsBinaryString(n)}r.postMessage({id:e,data:n})}},{key:"getWorker",value:function(){return this.workers.reduce(function(e,t){return t.activeJobs<e.activeJobs?t:e},this.workers[0])}}]),e}();t.WorkerHasher=c},function(e,t){e.exports="(function () {\n    var /*\n * Rusha, a JavaScript implementation of the Secure Hash Algorithm, SHA-1,\n * as defined in FIPS PUB 180-1, tuned for high performance with large inputs.\n * (http://github.com/srijs/rusha)\n *\n * Inspired by Paul Johnstons implementation (http://pajhome.org.uk/crypt/md5).\n *\n * Copyright (c) 2013 Sam Rijs (http://awesam.de).\n * Released under the terms of the MIT license as follows:\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS\n * IN THE SOFTWARE.\n */\n    util = {\n        getDataType: function (data) {\n            if (typeof data === 'string') {\n                return 'string';\n            }\n            if (data instanceof Array) {\n                return 'array';\n            }\n            if (typeof global !== 'undefined' && global.Buffer && global.Buffer.isBuffer(data)) {\n                return 'buffer';\n            }\n            if (data instanceof ArrayBuffer) {\n                return 'arraybuffer';\n            }\n            if (data.buffer instanceof ArrayBuffer) {\n                return 'view';\n            }\n            if (data instanceof Blob) {\n                return 'blob';\n            }\n            throw new Error('Unsupported data type.');\n        }\n    };\n    function Rusha(chunkSize) {\n        'use strict';\n        var // Private object structure.\n        self$2 = { fill: 0 };\n        var // Calculate the length of buffer that the sha1 routine uses\n        // including the padding.\n        padlen = function (len) {\n            for (len += 9; len % 64 > 0; len += 1);\n            return len;\n        };\n        var padZeroes = function (bin, len) {\n            var h8 = new Uint8Array(bin.buffer);\n            var om = len % 4, align = len - om;\n            switch (om) {\n            case 0:\n                h8[align + 3] = 0;\n            case 1:\n                h8[align + 2] = 0;\n            case 2:\n                h8[align + 1] = 0;\n            case 3:\n                h8[align + 0] = 0;\n            }\n            for (var i$2 = (len >> 2) + 1; i$2 < bin.length; i$2++)\n                bin[i$2] = 0;\n        };\n        var padData = function (bin, chunkLen, msgLen) {\n            bin[chunkLen >> 2] |= 128 << 24 - (chunkLen % 4 << 3);\n            // To support msgLen >= 2 GiB, use a float division when computing the\n            // high 32-bits of the big-endian message length in bits.\n            bin[((chunkLen >> 2) + 2 & ~15) + 14] = msgLen / (1 << 29) | 0;\n            bin[((chunkLen >> 2) + 2 & ~15) + 15] = msgLen << 3;\n        };\n        var // Convert a binary string and write it to the heap.\n        // A binary string is expected to only contain char codes < 256.\n        convStr = function (H8, H32, start, len, off) {\n            var str = this, i$2, om = off % 4, lm = (len + om) % 4, j = len - lm;\n            switch (om) {\n            case 0:\n                H8[off] = str.charCodeAt(start + 3);\n            case 1:\n                H8[off + 1 - (om << 1) | 0] = str.charCodeAt(start + 2);\n            case 2:\n                H8[off + 2 - (om << 1) | 0] = str.charCodeAt(start + 1);\n            case 3:\n                H8[off + 3 - (om << 1) | 0] = str.charCodeAt(start);\n            }\n            if (len < lm + om) {\n                return;\n            }\n            for (i$2 = 4 - om; i$2 < j; i$2 = i$2 + 4 | 0) {\n                H32[off + i$2 >> 2] = str.charCodeAt(start + i$2) << 24 | str.charCodeAt(start + i$2 + 1) << 16 | str.charCodeAt(start + i$2 + 2) << 8 | str.charCodeAt(start + i$2 + 3);\n            }\n            switch (lm) {\n            case 3:\n                H8[off + j + 1 | 0] = str.charCodeAt(start + j + 2);\n            case 2:\n                H8[off + j + 2 | 0] = str.charCodeAt(start + j + 1);\n            case 1:\n                H8[off + j + 3 | 0] = str.charCodeAt(start + j);\n            }\n        };\n        var // Convert a buffer or array and write it to the heap.\n        // The buffer or array is expected to only contain elements < 256.\n        convBuf = function (H8, H32, start, len, off) {\n            var buf = this, i$2, om = off % 4, lm = (len + om) % 4, j = len - lm;\n            switch (om) {\n            case 0:\n                H8[off] = buf[start + 3];\n            case 1:\n                H8[off + 1 - (om << 1) | 0] = buf[start + 2];\n            case 2:\n                H8[off + 2 - (om << 1) | 0] = buf[start + 1];\n            case 3:\n                H8[off + 3 - (om << 1) | 0] = buf[start];\n            }\n            if (len < lm + om) {\n                return;\n            }\n            for (i$2 = 4 - om; i$2 < j; i$2 = i$2 + 4 | 0) {\n                H32[off + i$2 >> 2 | 0] = buf[start + i$2] << 24 | buf[start + i$2 + 1] << 16 | buf[start + i$2 + 2] << 8 | buf[start + i$2 + 3];\n            }\n            switch (lm) {\n            case 3:\n                H8[off + j + 1 | 0] = buf[start + j + 2];\n            case 2:\n                H8[off + j + 2 | 0] = buf[start + j + 1];\n            case 1:\n                H8[off + j + 3 | 0] = buf[start + j];\n            }\n        };\n        var convBlob = function (H8, H32, start, len, off) {\n            var blob = this, i$2, om = off % 4, lm = (len + om) % 4, j = len - lm;\n            var buf = new Uint8Array(reader.readAsArrayBuffer(blob.slice(start, start + len)));\n            switch (om) {\n            case 0:\n                H8[off] = buf[3];\n            case 1:\n                H8[off + 1 - (om << 1) | 0] = buf[2];\n            case 2:\n                H8[off + 2 - (om << 1) | 0] = buf[1];\n            case 3:\n                H8[off + 3 - (om << 1) | 0] = buf[0];\n            }\n            if (len < lm + om) {\n                return;\n            }\n            for (i$2 = 4 - om; i$2 < j; i$2 = i$2 + 4 | 0) {\n                H32[off + i$2 >> 2 | 0] = buf[i$2] << 24 | buf[i$2 + 1] << 16 | buf[i$2 + 2] << 8 | buf[i$2 + 3];\n            }\n            switch (lm) {\n            case 3:\n                H8[off + j + 1 | 0] = buf[j + 2];\n            case 2:\n                H8[off + j + 2 | 0] = buf[j + 1];\n            case 1:\n                H8[off + j + 3 | 0] = buf[j];\n            }\n        };\n        var convFn = function (data) {\n            switch (util.getDataType(data)) {\n            case 'string':\n                return convStr.bind(data);\n            case 'array':\n                return convBuf.bind(data);\n            case 'buffer':\n                return convBuf.bind(data);\n            case 'arraybuffer':\n                return convBuf.bind(new Uint8Array(data));\n            case 'view':\n                return convBuf.bind(new Uint8Array(data.buffer, data.byteOffset, data.byteLength));\n            case 'blob':\n                return convBlob.bind(data);\n            }\n        };\n        var slice = function (data, offset) {\n            switch (util.getDataType(data)) {\n            case 'string':\n                return data.slice(offset);\n            case 'array':\n                return data.slice(offset);\n            case 'buffer':\n                return data.slice(offset);\n            case 'arraybuffer':\n                return data.slice(offset);\n            case 'view':\n                return data.buffer.slice(offset);\n            }\n        };\n        var // Precompute 00 - ff strings\n        precomputedHex = new Array(256);\n        for (var i = 0; i < 256; i++) {\n            precomputedHex[i] = (i < 16 ? '0' : '') + i.toString(16);\n        }\n        var // Convert an ArrayBuffer into its hexadecimal string representation.\n        hex = function (arrayBuffer) {\n            var binarray = new Uint8Array(arrayBuffer);\n            var res = new Array(arrayBuffer.byteLength);\n            for (var i$2 = 0; i$2 < res.length; i$2++) {\n                res[i$2] = precomputedHex[binarray[i$2]];\n            }\n            return res.join('');\n        };\n        var ceilHeapSize = function (v) {\n            // The asm.js spec says:\n            // The heap object's byteLength must be either\n            // 2^n for n in [12, 24) or 2^24 * n for n ≥ 1.\n            // Also, byteLengths smaller than 2^16 are deprecated.\n            var p;\n            if (// If v is smaller than 2^16, the smallest possible solution\n                // is 2^16.\n                v <= 65536)\n                return 65536;\n            if (// If v < 2^24, we round up to 2^n,\n                // otherwise we round up to 2^24 * n.\n                v < 16777216) {\n                for (p = 1; p < v; p = p << 1);\n            } else {\n                for (p = 16777216; p < v; p += 16777216);\n            }\n            return p;\n        };\n        var // Initialize the internal data structures to a new capacity.\n        init = function (size) {\n            if (size % 64 > 0) {\n                throw new Error('Chunk size must be a multiple of 128 bit');\n            }\n            self$2.offset = 0;\n            self$2.maxChunkLen = size;\n            self$2.padMaxChunkLen = padlen(size);\n            // The size of the heap is the sum of:\n            // 1. The padded input message size\n            // 2. The extended space the algorithm needs (320 byte)\n            // 3. The 160 bit state the algoritm uses\n            self$2.heap = new ArrayBuffer(ceilHeapSize(self$2.padMaxChunkLen + 320 + 20));\n            self$2.h32 = new Int32Array(self$2.heap);\n            self$2.h8 = new Int8Array(self$2.heap);\n            self$2.core = new Rusha._core({\n                Int32Array: Int32Array,\n                DataView: DataView\n            }, {}, self$2.heap);\n            self$2.buffer = null;\n        };\n        // Iinitializethe datastructures according\n        // to a chunk siyze.\n        init(chunkSize || 64 * 1024);\n        var initState = function (heap, padMsgLen) {\n            self$2.offset = 0;\n            var io = new Int32Array(heap, padMsgLen + 320, 5);\n            io[0] = 1732584193;\n            io[1] = -271733879;\n            io[2] = -1732584194;\n            io[3] = 271733878;\n            io[4] = -1009589776;\n        };\n        var padChunk = function (chunkLen, msgLen) {\n            var padChunkLen = padlen(chunkLen);\n            var view = new Int32Array(self$2.heap, 0, padChunkLen >> 2);\n            padZeroes(view, chunkLen);\n            padData(view, chunkLen, msgLen);\n            return padChunkLen;\n        };\n        var // Write data to the heap.\n        write = function (data, chunkOffset, chunkLen, off) {\n            convFn(data)(self$2.h8, self$2.h32, chunkOffset, chunkLen, off || 0);\n        };\n        var // Initialize and call the RushaCore,\n        // assuming an input buffer of length len * 4.\n        coreCall = function (data, chunkOffset, chunkLen, msgLen, finalize) {\n            var padChunkLen = chunkLen;\n            write(data, chunkOffset, chunkLen);\n            if (finalize) {\n                padChunkLen = padChunk(chunkLen, msgLen);\n            }\n            self$2.core.hash(padChunkLen, self$2.padMaxChunkLen);\n        };\n        var getRawDigest = function (heap, padMaxChunkLen) {\n            var io = new Int32Array(heap, padMaxChunkLen + 320, 5);\n            var out = new Int32Array(5);\n            var arr = new DataView(out.buffer);\n            arr.setInt32(0, io[0], false);\n            arr.setInt32(4, io[1], false);\n            arr.setInt32(8, io[2], false);\n            arr.setInt32(12, io[3], false);\n            arr.setInt32(16, io[4], false);\n            return out;\n        };\n        var // Calculate the hash digest as an array of 5 32bit integers.\n        rawDigest = this.rawDigest = function (str) {\n            var msgLen = str.byteLength || str.length || str.size || 0;\n            initState(self$2.heap, self$2.padMaxChunkLen);\n            var chunkOffset = 0, chunkLen = self$2.maxChunkLen;\n            for (chunkOffset = 0; msgLen > chunkOffset + chunkLen; chunkOffset += chunkLen) {\n                coreCall(str, chunkOffset, chunkLen, msgLen, false);\n            }\n            coreCall(str, chunkOffset, msgLen - chunkOffset, msgLen, true);\n            return getRawDigest(self$2.heap, self$2.padMaxChunkLen);\n        };\n        // The digest and digestFrom* interface returns the hash digest\n        // as a hex string.\n        this.digest = this.digestFromString = this.digestFromBuffer = this.digestFromArrayBuffer = function (str) {\n            return hex(rawDigest(str).buffer);\n        };\n        this.resetState = function () {\n            initState(self$2.heap, self$2.padMaxChunkLen);\n            return this;\n        };\n        this.append = function (chunk) {\n            var chunkOffset = 0;\n            var chunkLen = chunk.byteLength || chunk.length || chunk.size || 0;\n            var turnOffset = self$2.offset % self$2.maxChunkLen;\n            var inputLen;\n            self$2.offset += chunkLen;\n            while (chunkOffset < chunkLen) {\n                inputLen = Math.min(chunkLen - chunkOffset, self$2.maxChunkLen - turnOffset);\n                write(chunk, chunkOffset, inputLen, turnOffset);\n                turnOffset += inputLen;\n                chunkOffset += inputLen;\n                if (turnOffset === self$2.maxChunkLen) {\n                    self$2.core.hash(self$2.maxChunkLen, self$2.padMaxChunkLen);\n                    turnOffset = 0;\n                }\n            }\n            return this;\n        };\n        this.getState = function () {\n            var turnOffset = self$2.offset % self$2.maxChunkLen;\n            var heap;\n            if (!turnOffset) {\n                var io = new Int32Array(self$2.heap, self$2.padMaxChunkLen + 320, 5);\n                heap = io.buffer.slice(io.byteOffset, io.byteOffset + io.byteLength);\n            } else {\n                heap = self$2.heap.slice(0);\n            }\n            return {\n                offset: self$2.offset,\n                heap: heap\n            };\n        };\n        this.setState = function (state) {\n            self$2.offset = state.offset;\n            if (state.heap.byteLength === 20) {\n                var io = new Int32Array(self$2.heap, self$2.padMaxChunkLen + 320, 5);\n                io.set(new Int32Array(state.heap));\n            } else {\n                self$2.h32.set(new Int32Array(state.heap));\n            }\n            return this;\n        };\n        var rawEnd = this.rawEnd = function () {\n            var msgLen = self$2.offset;\n            var chunkLen = msgLen % self$2.maxChunkLen;\n            var padChunkLen = padChunk(chunkLen, msgLen);\n            self$2.core.hash(padChunkLen, self$2.padMaxChunkLen);\n            var result = getRawDigest(self$2.heap, self$2.padMaxChunkLen);\n            initState(self$2.heap, self$2.padMaxChunkLen);\n            return result;\n        };\n        this.end = function () {\n            return hex(rawEnd().buffer);\n        };\n    }\n    ;\n    // The low-level RushCore module provides the heart of Rusha,\n    // a high-speed sha1 implementation working on an Int32Array heap.\n    // At first glance, the implementation seems complicated, however\n    // with the SHA1 spec at hand, it is obvious this almost a textbook\n    // implementation that has a few functions hand-inlined and a few loops\n    // hand-unrolled.\n    Rusha._core = function RushaCore(stdlib, foreign, heap) {\n        'use asm';\n        var H = new stdlib.Int32Array(heap);\n        function hash(k, x) {\n            // k in bytes\n            k = k | 0;\n            x = x | 0;\n            var i = 0, j = 0, y0 = 0, z0 = 0, y1 = 0, z1 = 0, y2 = 0, z2 = 0, y3 = 0, z3 = 0, y4 = 0, z4 = 0, t0 = 0, t1 = 0;\n            y0 = H[x + 320 >> 2] | 0;\n            y1 = H[x + 324 >> 2] | 0;\n            y2 = H[x + 328 >> 2] | 0;\n            y3 = H[x + 332 >> 2] | 0;\n            y4 = H[x + 336 >> 2] | 0;\n            for (i = 0; (i | 0) < (k | 0); i = i + 64 | 0) {\n                z0 = y0;\n                z1 = y1;\n                z2 = y2;\n                z3 = y3;\n                z4 = y4;\n                for (j = 0; (j | 0) < 64; j = j + 4 | 0) {\n                    t1 = H[i + j >> 2] | 0;\n                    t0 = ((y0 << 5 | y0 >>> 27) + (y1 & y2 | ~y1 & y3) | 0) + ((t1 + y4 | 0) + 1518500249 | 0) | 0;\n                    y4 = y3;\n                    y3 = y2;\n                    y2 = y1 << 30 | y1 >>> 2;\n                    y1 = y0;\n                    y0 = t0;\n                    H[k + j >> 2] = t1;\n                }\n                for (j = k + 64 | 0; (j | 0) < (k + 80 | 0); j = j + 4 | 0) {\n                    t1 = (H[j - 12 >> 2] ^ H[j - 32 >> 2] ^ H[j - 56 >> 2] ^ H[j - 64 >> 2]) << 1 | (H[j - 12 >> 2] ^ H[j - 32 >> 2] ^ H[j - 56 >> 2] ^ H[j - 64 >> 2]) >>> 31;\n                    t0 = ((y0 << 5 | y0 >>> 27) + (y1 & y2 | ~y1 & y3) | 0) + ((t1 + y4 | 0) + 1518500249 | 0) | 0;\n                    y4 = y3;\n                    y3 = y2;\n                    y2 = y1 << 30 | y1 >>> 2;\n                    y1 = y0;\n                    y0 = t0;\n                    H[j >> 2] = t1;\n                }\n                for (j = k + 80 | 0; (j | 0) < (k + 160 | 0); j = j + 4 | 0) {\n                    t1 = (H[j - 12 >> 2] ^ H[j - 32 >> 2] ^ H[j - 56 >> 2] ^ H[j - 64 >> 2]) << 1 | (H[j - 12 >> 2] ^ H[j - 32 >> 2] ^ H[j - 56 >> 2] ^ H[j - 64 >> 2]) >>> 31;\n                    t0 = ((y0 << 5 | y0 >>> 27) + (y1 ^ y2 ^ y3) | 0) + ((t1 + y4 | 0) + 1859775393 | 0) | 0;\n                    y4 = y3;\n                    y3 = y2;\n                    y2 = y1 << 30 | y1 >>> 2;\n                    y1 = y0;\n                    y0 = t0;\n                    H[j >> 2] = t1;\n                }\n                for (j = k + 160 | 0; (j | 0) < (k + 240 | 0); j = j + 4 | 0) {\n                    t1 = (H[j - 12 >> 2] ^ H[j - 32 >> 2] ^ H[j - 56 >> 2] ^ H[j - 64 >> 2]) << 1 | (H[j - 12 >> 2] ^ H[j - 32 >> 2] ^ H[j - 56 >> 2] ^ H[j - 64 >> 2]) >>> 31;\n                    t0 = ((y0 << 5 | y0 >>> 27) + (y1 & y2 | y1 & y3 | y2 & y3) | 0) + ((t1 + y4 | 0) - 1894007588 | 0) | 0;\n                    y4 = y3;\n                    y3 = y2;\n                    y2 = y1 << 30 | y1 >>> 2;\n                    y1 = y0;\n                    y0 = t0;\n                    H[j >> 2] = t1;\n                }\n                for (j = k + 240 | 0; (j | 0) < (k + 320 | 0); j = j + 4 | 0) {\n                    t1 = (H[j - 12 >> 2] ^ H[j - 32 >> 2] ^ H[j - 56 >> 2] ^ H[j - 64 >> 2]) << 1 | (H[j - 12 >> 2] ^ H[j - 32 >> 2] ^ H[j - 56 >> 2] ^ H[j - 64 >> 2]) >>> 31;\n                    t0 = ((y0 << 5 | y0 >>> 27) + (y1 ^ y2 ^ y3) | 0) + ((t1 + y4 | 0) - 899497514 | 0) | 0;\n                    y4 = y3;\n                    y3 = y2;\n                    y2 = y1 << 30 | y1 >>> 2;\n                    y1 = y0;\n                    y0 = t0;\n                    H[j >> 2] = t1;\n                }\n                y0 = y0 + z0 | 0;\n                y1 = y1 + z1 | 0;\n                y2 = y2 + z2 | 0;\n                y3 = y3 + z3 | 0;\n                y4 = y4 + z4 | 0;\n            }\n            H[x + 320 >> 2] = y0;\n            H[x + 324 >> 2] = y1;\n            H[x + 328 >> 2] = y2;\n            H[x + 332 >> 2] = y3;\n            H[x + 336 >> 2] = y4;\n        }\n        return { hash: hash };\n    };\n    if (// If we'e running in Node.JS, export a module.\n        typeof module !== 'undefined') {\n        module.exports = Rusha;\n    } else if (// If we're running in a DOM context, export\n        // the Rusha object to toplevel.\n        typeof window !== 'undefined') {\n        window.Rusha = Rusha;\n    }\n    if (// If we're running in a webworker, accept\n        // messages containing a jobid and a buffer\n        // or blob object, and return the hash result.\n        typeof FileReaderSync !== 'undefined') {\n        var reader = new FileReaderSync();\n        var hashData = function hash(hasher, data, cb) {\n            try {\n                return cb(null, hasher.digest(data));\n            } catch (e) {\n                return cb(e);\n            }\n        };\n        var hashFile = function hashArrayBuffer(hasher, readTotal, blockSize, file, cb) {\n            var reader$2 = new self.FileReader();\n            reader$2.onloadend = function onloadend() {\n                var buffer = reader$2.result;\n                readTotal += reader$2.result.byteLength;\n                try {\n                    hasher.append(buffer);\n                } catch (e) {\n                    cb(e);\n                    return;\n                }\n                if (readTotal < file.size) {\n                    hashFile(hasher, readTotal, blockSize, file, cb);\n                } else {\n                    cb(null, hasher.end());\n                }\n            };\n            reader$2.readAsArrayBuffer(file.slice(readTotal, readTotal + blockSize));\n        };\n        self.onmessage = function onMessage(event) {\n            var data = event.data.data, file = event.data.file, id = event.data.id;\n            if (typeof id === 'undefined')\n                return;\n            if (!file && !data)\n                return;\n            var blockSize = event.data.blockSize || 4 * 1024 * 1024;\n            var hasher = new Rusha(blockSize);\n            hasher.resetState();\n            var done = function done$2(err, hash) {\n                if (!err) {\n                    self.postMessage({\n                        id: id,\n                        hash: hash\n                    });\n                } else {\n                    self.postMessage({\n                        id: id,\n                        error: err.name\n                    });\n                }\n            };\n            if (data)\n                hashData(hasher, data, done);\n            if (file)\n                hashFile(hasher, 0, blockSize, file, done);\n        };\n    }\n}());";
},function(e,t,n){"use strict";var r=n(0),i=function(e){return e&&e.__esModule?e:{default:e}}(r);Object.defineProperty(t,"__esModule",{value:!0});var o=n(83),a=function e(t,n){var r=this;(0,i.default)(this,e),this.apiUrl=t,this.authProvider=n,this.clients={},this.getMediaClient=function(e){return r.getStoredClient(e)||r.createNewClient(e)},this.createNewClient=function(e){var t=new o.MediaClient(r.apiUrl,r.authProvider,e);return r.setClient(t,e),t},this.getStoredClient=function(e){return void 0===e?r.clientForAbsentCollection:r.clients[e]},this.setClient=function(e,t){return void 0===t?void(r.clientForAbsentCollection=e):void(r.clients[t]=e)}};t.MediaClientPool=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(0),o=r(i),a=n(1),s=r(a);Object.defineProperty(t,"__esModule",{value:!0});var u=n(51),c=n(83),l=n(269),f=function(){function e(){(0,o.default)(this,e)}return(0,s.default)(e,[{key:"createUpload",value:function(e){var t={httpMethod:"POST",mediaApiMethod:"upload",parameters:{createUpTo:1,safariCacheBuster:u.v4()}};return l.retryTask(function(){return e.call(t,c.addAuthToQueryParameters).then(function(e){var t=e.data;if(0===t.length)throw new Error("No uploads were created");return t[0].id})},5,1e3,2)}},{key:"appendChunksToUpload",value:function(e,t,n,r){var i={httpMethod:"PUT",mediaApiMethod:"upload/"+t+"/chunks",data:{chunks:n,offset:r}};return e.call(i)}},{key:"createFileFromUpload",value:function(e,t,n,r,i){var o={httpMethod:"POST",mediaApiMethod:"file/upload",parameters:i?{collection:i}:{},data:{name:t,mimeType:n,uploadId:r}};return e.call(o).then(function(e){return e.data.id})}},{key:"pollForFileMetadata",value:function(e,t,n){var r={httpMethod:"GET",mediaApiMethod:"file/"+t,parameters:n?{collection:n}:{}};return l.retryTask(function(){return e.call(r,c.addAuthToQueryParameters).then(function(e){var t=e.data;if("succeeded"===t.processingStatus||"failed"===t.processingStatus)return t;throw new Error("Processing not finished")})},10,1e3,2)}}]),e}();t.MediaApi=f},function(e,t,n){"use strict";function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return new o.default(function(i,o){!function t(n,a){n>0?e().then(i).catch(function(e){setTimeout(function(){t(n-1,a*r)},a)}):e().then(i).catch(o)}(t,n)})}var i=n(21),o=function(e){return e&&e.__esModule?e:{default:e}}(i);Object.defineProperty(t,"__esModule",{value:!0}),t.retryTask=r},function(e,t){e.exports={baseUrl:"https://d2lmxj1uc02uys.cloudfront.net",usingVersions:!0,html:{popup:"./html/popup.html",popupInject:"./html/popup/popup.html",dropzone:"./html/dropzone.html",redirectUrl:"./html/link-account-handler/handler.html",userMethodsHelperUrl:"./html/user-methods-helper/helper.html"},version:"11.1.11"}},function(e,t,n){"use strict";var r=n(133),i=function(e){return e&&e.__esModule?e:{default:e}}(r);Object.defineProperty(t,"__esModule",{value:!0});var o=n(305);t.default=function(e){return new i.default(function(t,n){o.fileToBase64(e).then(function(e){var r=new Image;r.src=e,r.onload=function(){return t({src:r.src,width:r.width,height:r.height})},r.onerror=n})})}},function(e,t,n){n(273),n(274),n(289),n(293),e.exports=n(36).Promise},function(e,t){},function(e,t,n){"use strict";var r=n(275)(!0);n(134)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t,n){var r=n(84),i=n(85);e.exports=function(e){return function(t,n){var o,a,s=String(i(t)),u=r(n),c=s.length;return u<0||u>=c?e?"":void 0:(o=s.charCodeAt(u),o<55296||o>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?e?s.charAt(u):o:e?s.slice(u,u+2):a-56320+(o-55296<<10)+65536)}}},function(e,t,n){e.exports=!n(37)&&!n(137)(function(){return 7!=Object.defineProperty(n(87)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var r=n(56);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){e.exports=n(27)},function(e,t,n){"use strict";var r=n(280),i=n(138),o=n(90),a={};n(27)(a,n(8)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=r(a,{next:i(1,n)}),o(e,t+" Iterator")}},function(e,t,n){var r=n(28),i=n(281),o=n(142),a=n(89)("IE_PROTO"),s=function(){},u=function(){var e,t=n(87)("iframe"),r=o.length;for(t.style.display="none",n(143).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write("<script>document.F=Object</script>"),e.close(),u=e.F;r--;)delete u.prototype[o[r]];return u()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=r(e),n=new s,s.prototype=null,n[a]=e):n=u(),void 0===t?n:i(n,t)}},function(e,t,n){var r=n(55),i=n(28),o=n(282);e.exports=n(37)?Object.defineProperties:function(e,t){i(e);for(var n,a=o(t),s=a.length,u=0;s>u;)r.f(e,n=a[u++],t[n]);return e}},function(e,t,n){var r=n(283),i=n(142);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t,n){var r=n(57),i=n(88),o=n(285)(!1),a=n(89)("IE_PROTO");e.exports=function(e,t){var n,s=i(e),u=0,c=[];for(n in s)n!=a&&r(s,n)&&c.push(n);for(;t.length>u;)r(s,n=t[u++])&&(~o(c,n)||c.push(n));return c}},function(e,t,n){var r=n(58);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t,n){var r=n(88),i=n(139),o=n(286);e.exports=function(e){return function(t,n,a){var s,u=r(t),c=i(u.length),l=o(a,c);if(e&&n!=n){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===n)return e||l||0;return!e&&-1}}},function(e,t,n){var r=n(84),i=Math.max,o=Math.min;e.exports=function(e,t){return e=r(e),e<0?i(e+t,0):o(e,t)}},function(e,t,n){var r=n(57),i=n(288),o=n(89)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){var r=n(85);e.exports=function(e){return Object(r(e))}},function(e,t,n){n(290);for(var r=n(13),i=n(27),o=n(38),a=n(8)("toStringTag"),s=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],u=0;u<5;u++){var c=s[u],l=r[c],f=l&&l.prototype;f&&!f[a]&&i(f,a,c),o[c]=o.Array}},function(e,t,n){"use strict";var r=n(291),i=n(292),o=n(38),a=n(88);e.exports=n(134)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):"keys"==t?i(0,n):"values"==t?i(0,e[n]):i(0,[n,e[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){"use strict";var r,i,o,a=n(135),s=n(13),u=n(54),c=n(144),l=n(136),f=n(56),d=n(86),h=n(294),p=n(295),v=n(299),m=n(145).set,y=n(301)(),b=s.TypeError,g=s.process,_=s.Promise,g=s.process,w="process"==c(g),x=function(){},k=!!function(){try{var e=_.resolve(1),t=(e.constructor={})[n(8)("species")]=function(e){e(x,x)};return(w||"function"==typeof PromiseRejectionEvent)&&e.then(x)instanceof t}catch(e){}}(),A=function(e,t){return e===t||e===_&&t===o},S=function(e){var t;return!(!f(e)||"function"!=typeof(t=e.then))&&t},P=function(e){return A(_,e)?new O(e):new i(e)},O=i=function(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw b("Bad Promise constructor");t=e,n=r}),this.resolve=d(t),this.reject=d(n)},I=function(e){try{e()}catch(e){return{error:e}}},E=function(e,t){if(!e._n){e._n=!0;var n=e._c;y(function(){for(var r=e._v,i=1==e._s,o=0;n.length>o;)!function(t){var n,o,a=i?t.ok:t.fail,s=t.resolve,u=t.reject,c=t.domain;try{a?(i||(2==e._h&&C(e),e._h=1),!0===a?n=r:(c&&c.enter(),n=a(r),c&&c.exit()),n===t.promise?u(b("Promise-chain cycle")):(o=S(n))?o.call(n,s,u):s(n)):u(r)}catch(e){u(e)}}(n[o++]);e._c=[],e._n=!1,t&&!e._h&&j(e)})}},j=function(e){m.call(s,function(){var t,n,r,i=e._v;if(T(e)&&(t=I(function(){w?g.emit("unhandledRejection",i,e):(n=s.onunhandledrejection)?n({promise:e,reason:i}):(r=s.console)&&r.error&&r.error("Unhandled promise rejection",i)}),e._h=w||T(e)?2:1),e._a=void 0,t)throw t.error})},T=function(e){if(1==e._h)return!1;for(var t,n=e._a||e._c,r=0;n.length>r;)if(t=n[r++],t.fail||!T(t.promise))return!1;return!0},C=function(e){m.call(s,function(){var t;w?g.emit("rejectionHandled",e):(t=s.onrejectionhandled)&&t({promise:e,reason:e._v})})},M=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),E(t,!0))},U=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw b("Promise can't be resolved itself");(t=S(e))?y(function(){var r={_w:n,_d:!1};try{t.call(e,u(U,r,1),u(M,r,1))}catch(e){M.call(r,e)}}):(n._v=e,n._s=1,E(n,!1))}catch(e){M.call({_w:n,_d:!1},e)}}};k||(_=function(e){h(this,_,"Promise","_h"),d(e),r.call(this);try{e(u(U,this,1),u(M,this,1))}catch(e){M.call(this,e)}},r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=n(302)(_.prototype,{then:function(e,t){var n=P(v(this,_));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=w?g.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&E(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),O=function(){var e=new r;this.promise=e,this.resolve=u(U,e,1),this.reject=u(M,e,1)}),l(l.G+l.W+l.F*!k,{Promise:_}),n(90)(_,"Promise"),n(303)("Promise"),o=n(36).Promise,l(l.S+l.F*!k,"Promise",{reject:function(e){var t=P(this);return(0,t.reject)(e),t.promise}}),l(l.S+l.F*(a||!k),"Promise",{resolve:function(e){if(e instanceof _&&A(e.constructor,this))return e;var t=P(this);return(0,t.resolve)(e),t.promise}}),l(l.S+l.F*!(k&&n(304)(function(e){_.all(e).catch(x)})),"Promise",{all:function(e){var t=this,n=P(t),r=n.resolve,i=n.reject,o=I(function(){var n=[],o=0,a=1;p(e,!1,function(e){var s=o++,u=!1;n.push(void 0),a++,t.resolve(e).then(function(e){u||(u=!0,n[s]=e,--a||r(n))},i)}),--a||r(n)});return o&&i(o.error),n.promise},race:function(e){var t=this,n=P(t),r=n.reject,i=I(function(){p(e,!1,function(e){t.resolve(e).then(n.resolve,r)})});return i&&r(i.error),n.promise}})},function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var r=n(54),i=n(296),o=n(297),a=n(28),s=n(139),u=n(298),c={},l={},t=e.exports=function(e,t,n,f,d){var h,p,v,m,y=d?function(){return e}:u(e),b=r(n,f,t?2:1),g=0;if("function"!=typeof y)throw TypeError(e+" is not iterable!");if(o(y)){for(h=s(e.length);h>g;g++)if((m=t?b(a(p=e[g])[0],p[1]):b(e[g]))===c||m===l)return m}else for(v=y.call(e);!(p=v.next()).done;)if((m=i(v,b,p.value,t))===c||m===l)return m};t.BREAK=c,t.RETURN=l},function(e,t,n){var r=n(28);e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(t){var o=e.return;throw void 0!==o&&r(o.call(e)),t}}},function(e,t,n){var r=n(38),i=n(8)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||o[i]===e)}},function(e,t,n){var r=n(144),i=n(8)("iterator"),o=n(38);e.exports=n(36).getIteratorMethod=function(e){if(void 0!=e)return e[i]||e["@@iterator"]||o[r(e)]}},function(e,t,n){var r=n(28),i=n(86),o=n(8)("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||void 0==(n=r(a)[o])?t:i(n)}},function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var r=n(13),i=n(145).set,o=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,u="process"==n(58)(a);e.exports=function(){var e,t,n,c=function(){var r,i;for(u&&(r=a.domain)&&r.exit();e;){i=e.fn,e=e.next;try{i()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(u)n=function(){a.nextTick(c)};else if(o){var l=!0,f=document.createTextNode("");new o(c).observe(f,{characterData:!0}),n=function(){f.data=l=!l}}else if(s&&s.resolve){var d=s.resolve();n=function(){d.then(c)}}else n=function(){i.call(r,c)};return function(r){var i={fn:r,next:void 0};t&&(t.next=i),e||(e=i,n()),t=i}}},function(e,t,n){var r=n(27);e.exports=function(e,t,n){for(var i in t)n&&e[i]?e[i]=t[i]:r(e,i,t[i]);return e}},function(e,t,n){"use strict";var r=n(13),i=n(36),o=n(55),a=n(37),s=n(8)("species");e.exports=function(e){var t="function"==typeof i[e]?i[e]:r[e];a&&t&&!t[s]&&o.f(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,n){var r=n(8)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:n=!0}},o[r]=function(){return a},e(o)}catch(e){}return n}},function(e,t,n){"use strict";var r=n(133),i=function(e){return e&&e.__esModule?e:{default:e}}(r);Object.defineProperty(t,"__esModule",{value:!0}),t.fileToBase64=function(e){return new i.default(function(t,n){var r=new FileReader;r.onloadend=function(){return t(r.result)},r.onabort=function(){return n("abort")},r.onerror=n,r.readAsDataURL(e)})}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(16),o=r(i),a=n(0),s=r(a),u=n(1),c=r(u),l=n(19),f=r(l),d=n(20),h=r(d);Object.defineProperty(t,"__esModule",{value:!0}),n(146);var p=n(48),v=n(25),m=function(e){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,s.default)(this,t);var i=(0,f.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n));return i.browseElem=document.createElement("INPUT"),i.browseElem.setAttribute("type","file"),i.browseElem.style.display="none",r.multiple&&i.browseElem.setAttribute("multiple",""),r.fileExtensions&&i.browseElem.setAttribute("accept",r.fileExtensions.join(",")),document.body.appendChild(i.browseElem),i.uploadService.addBrowse(i.browseElem),i.context.trackEvent(new v.MPBrowserLoaded),i}return(0,h.default)(t,e),(0,c.default)(t,[{key:"browse",value:function(){this.browseElem.click()}},{key:"teardown",value:function(){var e=this.browseElem.parentNode;e&&e.removeChild(this.browseElem)}}]),t}(p.MediaLocalUpload);t.Browser=m},function(e,t,n){t=e.exports=n(39)(),t.push([e.i,".mediaPickerPopup{display:none;position:fixed;z-index:2147483647;left:0;top:0;width:100%;height:100%;background-color:rgba(9,30,66,.44);transition:opacity .2s;transition-delay:.1s}.mediaPickerPopup .aui-dialog2-header{height:50px!important}.mediaPickerPopup .aui-dialog2-content{padding:0!important;height:100%;position:relative!important;overflow:hidden!important}.mediaPickerPopup .aui-dialog2-content iframe{width:100%;height:100%;border-width:0;position:absolute}",""])},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(16),o=r(i),a=n(0),s=r(a),u=n(1),c=r(u),l=n(19),f=r(l),d=n(20),h=r(d);Object.defineProperty(t,"__esModule",{value:!0});var p=n(48),v=n(25),m=n(147),y=function(e){function t(e,n){(0,s.default)(this,t);var r=(0,f.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n));return r.pasteHandler=function(e){for(var t=e.clipboardData.files,n=0;n<t.length;++n){var i=t[n];r.uploadService.addFile(i)}},r.context.trackEvent(new v.MPClipboardLoaded),r}return(0,h.default)(t,e),(0,c.default)(t,[{key:"activate",value:function(){var e=this;m(function(){e.deactivate(),document.addEventListener("paste",e.pasteHandler,!1)})}},{key:"deactivate",value:function(){document.removeEventListener("paste",this.pasteHandler)}}]),t}(p.MediaLocalUpload);t.Clipboard=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(21),o=r(i),a=n(16),s=r(a),u=n(0),c=r(u),l=n(1),f=r(l),d=n(19),h=r(d),p=n(20),v=r(p);Object.defineProperty(t,"__esModule",{value:!0}),n(310);var m=n(80),y=n(48),b=n(22),g=n(25),_=n(148),w=n(312),x=function(e){return[].slice.call(e,0)},k=function(e){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,c.default)(this,t);var i=(0,h.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e,n));i.onDragOver=function(e){if(e.preventDefault(),i.instance&&t.dragContainsFiles(e)){var n=e.dataTransfer,r=void 0;try{r=n.effectAllowed}catch(e){}n.dropEffect="move"===r||"linkMove"===r?"move":"copy",i.instance.classList.add("active");var o=i.getDraggedItemsLength(n);i.emitDragOver({length:o})}},i.onDragLeave=function(e){i.instance&&(e.preventDefault(),i.instance.classList.remove("active"),i.emitDragLeave())},i.onDrop=function(e){var n=i.instance;n&&t.dragContainsFiles(e)&&(n.classList.remove("active"),i.emit("drop",void 0),i.emitDragLeave())};var o=r;return i.container=o.container||document.body,i.headless=o.headless||!1,i.uiActive=!1,i.context.trackEvent(new g.MPDropzoneLoaded),i}return(0,v.default)(t,e),(0,f.default)(t,[{key:"activate",value:function(){var e=this;return w.whenDomReady.then(function(){if(e.container=e.container||document.body,!e.instance)return e.createInstance()}).then(function(){e.deactivate(),e.container.addEventListener("dragover",e.onDragOver,!1),e.container.addEventListener("dragleave",e.onDragLeave,!1),e.uploadService.addDropzone(e.container)})}},{key:"deactivate",value:function(){this.container.removeEventListener("dragover",this.onDragOver,!1),this.container.removeEventListener("dragleave",this.onDragLeave,!1),this.uploadService.removeDropzone()}},{key:"getDraggedItemsLength",value:function(e){return e.items?x(e.items).filter(function(e){return"file"===e.kind}).length:e.files.length}},{key:"createInstance",value:function(){var e=this;return this.getDropzoneUI().then(function(t){e.instance=t,e.container.appendChild(e.instance),e.uploadService.on("file-dropped",e.onDrop)})}},{key:"getDropzoneUI",value:function(){var e=this;return this.headless?o.default.resolve(document.createElement("DIV")):new o.default(function(t,n){return m.default.get(e.getStaticAssetUrl("dropzone")).then(function(e){t(_.parseHTML(e.data))},function(e){b.handleError("dropzone_load_fail",e),n(e)})})}},{key:"emitDragOver",value:function(e){this.uiActive||(this.uiActive=!0,this.emit("drag-enter",e))}},{key:"emitDragLeave",value:function(){var e=this;this.uiActive&&(this.uiActive=!1,window.setTimeout(function(){e.uiActive||e.emit("drag-leave",void 0)},50))}}],[{key:"dragContainsFiles",value:function(e){var t=e.dataTransfer.types;return x(t).indexOf("Files")>-1}}]),t}(y.MediaLocalUpload);t.Dropzone=k},function(e,t,n){var r=n(311);"string"==typeof r&&(r=[[e.i,r,""]]),n(40)(r,{}),r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(39)(),t.push([e.i,".mediaPickerDropzone{position:fixed;left:0;top:0;width:100%;height:0;overflow:hidden;margin:auto;font-family:Source Sans Pro,Helvetica Neue,Helvetica,Arial,sans-serif;pointer-events:none}@keyframes atlassian-doc{0%{transform:rotate(0deg)}to{transform:rotate(-18deg)}}@keyframes spreadsheet{0%{transform:rotate(0deg)}to{transform:rotate(20deg)}}.mediaPickerDropzone .mp-content{width:100vw;height:100vh}.mediaPickerDropzone .mp-content .mp-circle{transition:width .2s ease,height .2s ease,top .2s ease,left .2s ease;width:0;height:0;transform:scale(1);background-color:#0052cc;border-radius:50%;margin:auto;position:absolute;overflow:hidden;color:#fff;top:50%;left:50%}.mediaPickerDropzone .mp-content .mp-circle .mp-title{font-weight:500;font-size:40px;margin-bottom:20px}.mediaPickerDropzone .mp-content .mp-circle .mp-description{font-size:16px;font-weight:500}.mediaPickerDropzone .mp-content .mp-circle .mp-text{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;left:0;right:0;top:130px;position:absolute;text-align:center}.mediaPickerDropzone .mp-content .mp-circle .mp-text span{display:block}.mediaPickerDropzone .mp-content .mp-circle .mp-fileIcon{width:auto;height:200px;position:absolute;bottom:0;margin:auto;transform-origin:bottom;left:150px}.mediaPickerDropzone.active{height:100%;background-color:hsla(0,0%,100%,.7);position:fixed;z-index:500}.mediaPickerDropzone.active .mp-circle{width:500px;height:500px;top:calc(50% - 250px);left:calc(50% - 250px)}.mediaPickerDropzone.active .mp-circle .mp-iconAtlassianDoc{left:100px;width:183px;height:212px;bottom:-15px;animation:atlassian-doc .75s .2s forwards}.mediaPickerDropzone.active .mp-circle .mp-iconOtherDoc{left:170px;z-index:1;width:173px;height:224px}.mediaPickerDropzone.active .mp-circle .mp-iconPageSpreadsheet{left:250px;animation:spreadsheet .75s .2s forwards}",""])},function(e,t,n){"use strict";var r=n(21),i=function(e){return e&&e.__esModule?e:{default:e}}(r);Object.defineProperty(t,"__esModule",{value:!0}),t.whenDomReady=function(){return"complete"===document.readyState?i.default.resolve():new i.default(function(e){window.addEventListener("load",e)})}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.id,n=e.name,r=e.size,i=e.creationDate,o=e.type,a=e.publicId;return new S.MediaFile(t,n,r,i,o,a)}var o=n(21),a=r(o),s=n(50),u=r(s),c=n(16),l=r(c),f=n(0),d=r(f),h=n(1),p=r(h),v=n(19),m=r(v),y=n(20),b=r(y);Object.defineProperty(t,"__esModule",{value:!0}),n(146);var g=n(51),_=n(132),w=n(314),x=n(22),k=n(315),A=n(25),S=n(129),P=n(128),O=n(131),I=n(147),E=n(148),j=n(316);t.USER_RECENTS_COLLECTION="recents";var T=function(e){function t(e,n,r){var i=r.userAuthProvider,o=r.container;(0,d.default)(this,t);var a=(0,m.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return a.config=n,a.context.trackEvent(new A.MPPopupLoaded),a.uploadParams=(0,u.default)({},O.defaultUploadParams,n.uploadParams),a.userAuthProvider=i,a.container=o||document.body,I(function(){a.init()}),a}return(0,b.default)(t,e),(0,p.default)(t,[{key:"init",value:function(){this.popupReady=!1;var e=g.v4(),t={channelName:e,apiUrl:this.config.apiUrl,redirectUrl:this.getStaticAssetUrl("redirectUrl")};this.instance=this._createInstance(t),this.container.appendChild(this.instance),this.popupIframe=this._createInteractionLayer(e)}},{key:"show",value:function(){var e=this;return this.instance||this.init(),this.config.authProvider({collectionName:this.uploadParams.collection}).then(function(t){return e.popupIframe.setTenant({auth:t,uploadParams:e.uploadParams}),e.popupIframe.resetView(),e._show(),a.default.resolve()})}},{key:"cancel",value:function(e){this.popupIframe.cancelUpload(e)}},{key:"teardown",value:function(){this.instance&&(this.instance.parentNode&&this.instance.parentNode.removeChild(this.instance),delete this.instance),this.localFileBrowser&&this.localFileBrowser.teardown()}},{key:"hide",value:function(){this.instance&&(this.instance.style.display="none"),this.emit("closed",void 0),this.context.trackEvent(new A.MPPopupHidden)}},{key:"setUploadParams",value:function(e){this.uploadParams=(0,u.default)({},O.defaultUploadParams,e)}},{key:"_show",value:function(){this.popupReady&&(this.instance.style.display="block",this.context.trackEvent(new A.MPPopupShown))}},{key:"_createInstance",value:function(e){var t=e.apiUrl,n=e.channelName,r=e.redirectUrl,i="?channelName="+encodeURIComponent(n)+"&apiUrl="+encodeURIComponent(t)+"&redirectUrl="+encodeURIComponent(r);return E.parseHTML('<div class="mediaPickerPopup mpAUI">\n        <section role="dialog" id="demo-dialog" class="aui-layer aui-dialog2 aui-dialog2-large" aria-hidden="false">\n            <div class="aui-dialog2-content">\n                <iframe class="mpApp" src="'+this.getStaticAssetUrl("popupInject")+i+'"></iframe>\n            </div>\n        </section>\n      </div>')}},{key:"_createInteractionLayer",value:function(e){var t=this,n=this.instance.querySelector(".mpApp"),r=n.contentWindow,o=w({window:r,scope:e});this.messageService=new j.PostisMessageService(o),this.messageService.handle("uploadFinalizeReady",function(e){return new a.default(function(n){t.emitUploadFinalizeReady(i(e),function(){return n()})})}),this.messageService.handle("getUserAuth",function(e){return t.userAuthProvider(e)});var s=new k.InteractionLayer(this,o);return s.on("uploadEvent",function(e){switch(e.name){case"upload-start":t.emitUploadStart(i(e.data.file));break;case"upload-status-update":t.emitUploadProgress(i(e.data.file),e.data.progress);break;case"upload-preview-update":var n=e.data,r=n.file,o=n.preview;t.emitUploadPreviewUpdate(i(r),o);break;case"upload-processing":t.emitUploadProcessing(i(e.data.file));break;case"upload-end":t.emitUploadEnd(i(e.data.file),e.data.public);break;case"upload-error":var a=e.data,s=a.file,u=a.error;t.emitUploadError(i(s),new P.MediaError(u.fileId,u.name,u.description)),x.handleError(u.name,u.description)}}),s.on("ready",function(){t.emit("ready",void 0),t.popupReady=!0}),s.initProtocol(),s}}]),t}(_.MPComponent);t.Popup=T},function(e,t){function n(e){var t,n=e.scope,r=e.window,i=e.windowForEventListening||window,o={},a=[],s={},u=!1,c=function(e){var t;try{t=JSON.parse(e.data)}catch(e){return}if(t.postis&&t.scope===n){var r=o[t.method];if(r)for(var i=0;i<r.length;i++)r[i].call(null,t.params);else s[t.method]=s[t.method]||[],s[t.method].push(t.params)}};i.addEventListener("message",c,!1);var l={listen:function(e,t){o[e]=o[e]||[],o[e].push(t);var n=s[e];if(n)for(var r=o[e],i=0;i<r.length;i++)for(var a=0;a<n.length;a++)r[i].call(null,n[a]);delete s[e]},send:function(e){var t=e.method;(u||"__ready__"===e.method)&&r&&"function"==typeof r.postMessage?r.postMessage(JSON.stringify({postis:!0,scope:n,method:t,params:e.params}),"*"):a.push(e)},ready:function(e){u?e():setTimeout(function(){l.ready(e)},50)},destroy:function(e){clearInterval(t),u=!1,i&&"function"==typeof i.removeEventListener&&i.removeEventListener("message",c),e&&e()}},f=+new Date+Math.random()+"";return t=setInterval(function(){l.send({method:"__ready__",params:f})},50),l.listen("__ready__",function(e){if(e===f){clearInterval(t),u=!0;for(var n=0;n<a.length;n++)l.send(a[n]);a=[]}else l.send({method:"__ready__",params:e})}),l}e.exports=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(0),o=r(i),a=n(1),s=r(a);Object.defineProperty(t,"__esModule",{value:!0});var u=n(77),c=function(){function e(t,n){(0,o.default)(this,e),this.popup=t,this.channel=n,this.sanitizeUploadParams=function(e){return{collection:e.collection,fetchMetadata:e.fetchMetadata,autoFinalize:e.autoFinalize}},this.emitter=new u.EventEmitter2}return(0,s.default)(e,[{key:"initProtocol",value:function(){var e=this;this.channel.ready(function(){e.channel.listen("hidePopup",function(){e.popup.hide()}),e.channel.listen("showPopup",function(){e.popup.show()}),e.channel.listen("ready",function(){e.emit("ready",void 0)}),e.channel.listen("uploadEvent",function(t){e.emit("uploadEvent",t.event)})})}},{key:"resetView",value:function(){this.channel.send({method:"resetView"})}},{key:"cancelUpload",value:function(e){this.channel.send({method:"cancelUpload",params:{uploadId:e}})}},{key:"setTenant",value:function(e){var t=e.auth,n=e.uploadParams;this.channel.send({method:"setTenant",params:{auth:t,uploadParams:this.sanitizeUploadParams(n)}})}},{key:"on",value:function(e,t){this.emitter.on(e,t)}},{key:"emit",value:function(e,t){this.emitter.emit(e,t)}}]),e}();t.InteractionLayer=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(21),o=r(i),a=n(0),s=r(a),u=n(1),c=r(u);Object.defineProperty(t,"__esModule",{value:!0});var l=n(115);n(317),n(318);var f=n(51),d=function(){function e(t){(0,s.default)(this,e),this.channel=t,this.requests=this.observeChannelRequests(t),this.responses=this.observeChannelResponses(t)}return(0,c.default)(e,[{key:"post",value:function(e){var t=this;return new o.default(function(n,r){var i=f.v4(),o=t.responses.filter(function(e){return e.traceId===i}).subscribe({next:function(e){var t=e.response,i=e.error;i?r(i):n(t),o.unsubscribe()}});t.channel.send({method:"REQUEST",params:{traceId:i,message:e}})})}},{key:"handle",value:function(e,t){var n=this;this.requests.filter(function(t){return t.message.type===e}).subscribe({next:function(e){var r=e.traceId,i=e.message;t(i.payload).then(function(e){n.channel.send({method:"RESPONSE",params:{traceId:r,response:e}})}).catch(function(e){n.channel.send({method:"RESPONSE",params:{traceId:r,error:e}})})}})}},{key:"observeChannelRequests",value:function(e){var t=new l.Subject;return e.ready(function(){e.listen("REQUEST",function(e){t.next(e)})}),t}},{key:"observeChannelResponses",value:function(e){var t=new l.Subject;return e.ready(function(){e.listen("RESPONSE",function(e){t.next(e)})}),t}}]),e}();t.PostisMessageService=d},function(e,t){e.exports=n(73)},function(e,t){e.exports=n(75)}]))},function(e,t,n){"use strict";var r=n(27),i=n(28),o=n(39),a=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r=this.operator,o=i.toSubscriber(e,t,n);if(r?r.call(o,this.source):o.add(this.source?this._subscribe(o):this._trySubscribe(o)),o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.syncErrorThrown=!0,e.syncErrorValue=t,e.error(t)}},e.prototype.forEach=function(e,t){var n=this;if(t||(r.root.Rx&&r.root.Rx.config&&r.root.Rx.config.Promise?t=r.root.Rx.config.Promise:r.root.Promise&&(t=r.root.Promise)),!t)throw new Error("no Promise impl found");return new t(function(t,r){var i;i=n.subscribe(function(t){if(i)try{e(t)}catch(e){r(e),i.unsubscribe()}else e(t)},r,t)})},e.prototype._subscribe=function(e){return this.source.subscribe(e)},e.prototype[o.observable]=function(){return this},e.create=function(t){return new e(t)},e}();t.Observable=a},function(e,t,n){(function(e){"use strict";var n="undefined"!=typeof window&&window,r="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,i="undefined"!=typeof e&&e,o=n||i||r;t.root=o,function(){if(!o)throw new Error("RxJS could not find any global context (window, self, global)")}()}).call(t,n(18))},function(e,t,n){"use strict";function r(e,t,n){if(e){if(e instanceof i.Subscriber)return e;if(e[o.rxSubscriber])return e[o.rxSubscriber]()}return e||t||n?new i.Subscriber(e,t,n):new i.Subscriber(a.empty)}var i=n(29),o=n(38),a=n(37);t.toSubscriber=r},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(30),o=n(31),a=n(37),s=n(38),u=function(e){function t(n,r,i){switch(e.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=a.empty;break;case 1:if(!n){this.destination=a.empty;break}if("object"==typeof n){n instanceof t?(this.destination=n,this.destination.add(this)):(this.syncErrorThrowable=!0,this.destination=new c(this,n));break}default:this.syncErrorThrowable=!0,this.destination=new c(this,n,r,i)}}return r(t,e),t.prototype[s.rxSubscriber]=function(){return this},t.create=function(e,n,r){var i=new t(e,n,r);return i.syncErrorThrowable=!1,i},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},
t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this,t=e._parent,n=e._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=n,this},t}(o.Subscription);t.Subscriber=u;var c=function(e){function t(t,n,r,o){e.call(this),this._parentSubscriber=t;var s,u=this;i.isFunction(n)?s=n:n&&(s=n.next,r=n.error,o=n.complete,n!==a.empty&&(u=Object.create(n),i.isFunction(u.unsubscribe)&&this.add(u.unsubscribe.bind(u)),u.unsubscribe=this.unsubscribe.bind(this))),this._context=u,this._next=s,this._error=r,this._complete=o}return r(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber;if(this._error)t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else{if(!t.syncErrorThrowable)throw this.unsubscribe(),e;t.syncErrorValue=e,t.syncErrorThrown=!0,this.unsubscribe()}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){throw this.unsubscribe(),e}},t.prototype.__tryOrSetError=function(e,t,n){try{t.call(this._context,n)}catch(t){return e.syncErrorValue=t,e.syncErrorThrown=!0,!0}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(u)},function(e,t){"use strict";function n(e){return"function"==typeof e}t.isFunction=n},function(e,t,n){"use strict";function r(e){return e.reduce(function(e,t){return e.concat(t instanceof c.UnsubscriptionError?t.errors:t)},[])}var i=n(32),o=n(33),a=n(30),s=n(34),u=n(35),c=n(36),l=function(){function e(e){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}return e.prototype.unsubscribe=function(){var e,t=!1;if(!this.closed){var n=this,l=n._parent,f=n._parents,d=n._unsubscribe,h=n._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var p=-1,v=f?f.length:0;l;)l.remove(this),l=++p<v&&f[p]||null;if(a.isFunction(d)){var m=s.tryCatch(d).call(this);m===u.errorObject&&(t=!0,e=e||(u.errorObject.e instanceof c.UnsubscriptionError?r(u.errorObject.e.errors):[u.errorObject.e]))}if(i.isArray(h))for(p=-1,v=h.length;++p<v;){var y=h[p];if(o.isObject(y)){var m=s.tryCatch(y.unsubscribe).call(y);if(m===u.errorObject){t=!0,e=e||[];var b=u.errorObject.e;b instanceof c.UnsubscriptionError?e=e.concat(r(b.errors)):e.push(b)}}}if(t)throw new c.UnsubscriptionError(e)}},e.prototype.add=function(t){if(!t||t===e.EMPTY)return e.EMPTY;if(t===this)return this;var n=t;switch(typeof t){case"function":n=new e(t);case"object":if(n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if("function"!=typeof n._addParent){var r=n;n=new e,n._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var i=this._subscriptions||(this._subscriptions=[]);return i.push(n),n._addParent(this),n},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);n!==-1&&t.splice(n,1)}},e.prototype._addParent=function(e){var t=this,n=t._parent,r=t._parents;n&&n!==e?r?r.indexOf(e)===-1&&r.push(e):this._parents=[e]:this._parent=e},e.EMPTY=function(e){return e.closed=!0,e}(new e),e}();t.Subscription=l},function(e,t){"use strict";t.isArray=Array.isArray||function(e){return e&&"number"==typeof e.length}},function(e,t){"use strict";function n(e){return null!=e&&"object"==typeof e}t.isObject=n},function(e,t,n){"use strict";function r(){try{return o.apply(this,arguments)}catch(e){return a.errorObject.e=e,a.errorObject}}function i(e){return o=e,r}var o,a=n(35);t.tryCatch=i},function(e,t){"use strict";t.errorObject={e:{}}},function(e,t){"use strict";var n=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},r=function(e){function t(t){e.call(this),this.errors=t;var n=Error.call(this,t?t.length+" errors occurred during unsubscription:\n  "+t.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"");this.name=n.name="UnsubscriptionError",this.stack=n.stack,this.message=n.message}return n(t,e),t}(Error);t.UnsubscriptionError=r},function(e,t){"use strict";t.empty={closed:!0,next:function(e){},error:function(e){throw e},complete:function(){}}},function(e,t,n){"use strict";var r=n(27),i=r.root.Symbol;t.rxSubscriber="function"==typeof i&&"function"==typeof i.for?i.for("rxSubscriber"):"@@rxSubscriber",t.$$rxSubscriber=t.rxSubscriber},function(e,t,n){"use strict";function r(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}var i=n(27);t.getSymbolObservable=r,t.observable=r(i.root),t.$$observable=t.observable},function(e,t,n){"use strict";var r=n(26),i=n(41);r.Observable.prototype.publishReplay=i.publishReplay},function(e,t,n){"use strict";function r(e,t,n){return void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===t&&(t=Number.POSITIVE_INFINITY),o.multicast.call(this,new i.ReplaySubject(e,t,n))}var i=n(42),o=n(55);t.publishReplay=r},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(43),o=n(46),a=n(31),s=n(53),u=n(44),c=n(45),l=function(e){function t(t,n,r){void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===n&&(n=Number.POSITIVE_INFINITY),e.call(this),this.scheduler=r,this._events=[],this._bufferSize=t<1?1:t,this._windowTime=n<1?1:n}return r(t,e),t.prototype.next=function(t){var n=this._getNow();this._events.push(new f(n,t)),this._trimBufferThenGetEvents(),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){var t,n=this._trimBufferThenGetEvents(),r=this.scheduler;if(this.closed)throw new u.ObjectUnsubscribedError;this.hasError?t=a.Subscription.EMPTY:this.isStopped?t=a.Subscription.EMPTY:(this.observers.push(e),t=new c.SubjectSubscription(this,e)),r&&e.add(e=new s.ObserveOnSubscriber(e,r));for(var i=n.length,o=0;o<i&&!e.closed;o++)e.next(n[o].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),t},t.prototype._getNow=function(){return(this.scheduler||o.queue).now()},t.prototype._trimBufferThenGetEvents=function(){for(var e=this._getNow(),t=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,o=0;o<i&&!(e-r[o].time<n);)o++;return i>t&&(o=Math.max(o,i-t)),o>0&&r.splice(0,o),r},t}(i.Subject);t.ReplaySubject=l;var f=function(){function e(e,t){this.time=e,this.value=t}return e}()},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(26),o=n(29),a=n(31),s=n(44),u=n(45),c=n(38),l=function(e){function t(t){e.call(this,t),this.destination=t}return r(t,e),t}(o.Subscriber);t.SubjectSubscriber=l;var f=function(e){function t(){e.call(this),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}return r(t,e),t.prototype[c.rxSubscriber]=function(){return new l(this)},t.prototype.lift=function(e){var t=new d(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new s.ObjectUnsubscribedError;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].next(e)},t.prototype.error=function(e){if(this.closed)throw new s.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new s.ObjectUnsubscribedError;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new s.ObjectUnsubscribedError;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new s.ObjectUnsubscribedError;return this.hasError?(e.error(this.thrownError),a.Subscription.EMPTY):this.isStopped?(e.complete(),a.Subscription.EMPTY):(this.observers.push(e),new u.SubjectSubscription(this,e))},t.prototype.asObservable=function(){var e=new i.Observable;return e.source=this,e},t.create=function(e,t){return new d(e,t)},t}(i.Observable);t.Subject=f;var d=function(e){function t(t,n){e.call(this),this.destination=t,this.source=n}return r(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){var t=this.source;return t?this.source.subscribe(e):a.Subscription.EMPTY},t}(f);t.AnonymousSubject=d},function(e,t){"use strict";var n=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},r=function(e){function t(){var t=e.call(this,"object unsubscribed");this.name=t.name="ObjectUnsubscribedError",this.stack=t.stack,this.message=t.message}return n(t,e),t}(Error);t.ObjectUnsubscribedError=r},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(31),o=function(e){function t(t,n){e.call(this),this.subject=t,this.subscriber=n,this.closed=!1}return r(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);n!==-1&&t.splice(n,1)}}},t}(i.Subscription);t.SubjectSubscription=o},function(e,t,n){"use strict";var r=n(47),i=n(50);t.queue=new i.QueueScheduler(r.QueueAction)},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(48),o=function(e){function t(t,n){e.call(this,t,n),this.scheduler=t,this.work=n}return r(t,e),t.prototype.schedule=function(t,n){return void 0===n&&(n=0),n>0?e.prototype.schedule.call(this,t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,n){return n>0||this.closed?e.prototype.execute.call(this,t,n):this._execute(t,n)},t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0?e.prototype.requestAsyncId.call(this,t,n,r):t.flush(this)},t}(i.AsyncAction);t.QueueAction=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(27),o=n(49),a=function(e){function t(t,n){e.call(this,t,n),this.scheduler=t,this.work=n,this.pending=!1}return r(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e,this.pending=!0;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),i.root.setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){return void 0===n&&(n=0),null!==n&&this.delay===n&&this.pending===!1?t:i.root.clearInterval(t)&&void 0||void 0},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);return n?n:void(this.pending===!1&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null)))},t.prototype._execute=function(e,t){var n=!1,r=void 0;try{this.work(e)}catch(e){n=!0,r=!!e&&e||new Error(e)}if(n)return this.unsubscribe(),r},t.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,r!==-1&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},t}(o.Action);t.AsyncAction=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(31),o=function(e){function t(t,n){e.call(this)}return r(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(i.Subscription);t.Action=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(51),o=function(e){function t(){e.apply(this,arguments)}return r(t,e),t}(i.AsyncScheduler);t.QueueScheduler=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(52),o=function(e){function t(){e.apply(this,arguments),this.actions=[],this.active=!1,this.scheduled=void 0}return r(t,e),t.prototype.flush=function(e){var t=this.actions;if(this.active)return void t.push(e);var n;this.active=!0;do if(n=e.execute(e.state,e.delay))break;while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}},t}(i.Scheduler);t.AsyncScheduler=o},function(e,t){"use strict";var n=function(){function e(t,n){void 0===n&&(n=e.now),this.SchedulerAction=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(n,t)},e.now=Date.now?Date.now:function(){return+new Date},e}();t.Scheduler=n},function(e,t,n){"use strict";function r(e,t){return void 0===t&&(t=0),this.lift(new s(e,t))}var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(29),a=n(54);t.observeOn=r;var s=function(){function e(e,t){void 0===t&&(t=0),this.scheduler=e,this.delay=t}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.scheduler,this.delay))},e}();t.ObserveOnOperator=s;var u=function(e){function t(t,n,r){void 0===r&&(r=0),e.call(this,t),this.scheduler=n,this.delay=r}return i(t,e),t.dispatch=function(e){var t=e.notification,n=e.destination;t.observe(n),this.unsubscribe()},t.prototype.scheduleMessage=function(e){this.add(this.scheduler.schedule(t.dispatch,this.delay,new c(e,this.destination)))},t.prototype._next=function(e){this.scheduleMessage(a.Notification.createNext(e))},t.prototype._error=function(e){this.scheduleMessage(a.Notification.createError(e))},t.prototype._complete=function(){this.scheduleMessage(a.Notification.createComplete())},t}(o.Subscriber);t.ObserveOnSubscriber=u;var c=function(){function e(e,t){this.notification=e,this.destination=t}return e}();t.ObserveOnMessage=c},function(e,t,n){"use strict";var r=n(26),i=function(){function e(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}return e.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},e.prototype.do=function(e,t,n){var r=this.kind;switch(r){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}},e.prototype.accept=function(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)},e.prototype.toObservable=function(){var e=this.kind;switch(e){case"N":return r.Observable.of(this.value);case"E":return r.Observable.throw(this.error);case"C":return r.Observable.empty()}throw new Error("unexpected notification kind value")},e.createNext=function(t){return"undefined"!=typeof t?new e("N",t):e.undefinedValueNotification},e.createError=function(t){return new e("E",(void 0),t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",(void 0)),e}();t.Notification=i},function(e,t,n){"use strict";function r(e,t){var n;if(n="function"==typeof e?e:function(){return e},"function"==typeof t)return this.lift(new o(n,t));var r=Object.create(this,i.connectableObservableDescriptor);return r.source=this,r.subjectFactory=n,r}var i=n(56);t.multicast=r;var o=function(){function e(e,t){this.subjectFactory=e,this.selector=t}return e.prototype.call=function(e,t){var n=this.selector,r=this.subjectFactory(),i=n(r).subscribe(e);return i.add(t.subscribe(r)),i},e}();t.MulticastOperator=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(43),o=n(26),a=n(29),s=n(31),u=function(e){function t(t,n){e.call(this),this.source=t,this.subjectFactory=n,this._refCount=0,this._isComplete=!1}return r(t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,e=this._connection=new s.Subscription,e.add(this.source.subscribe(new l(this.getSubject(),this))),e.closed?(this._connection=null,e=s.Subscription.EMPTY):this._connection=e),e},t.prototype.refCount=function(){return this.lift(new f(this))},t}(o.Observable);t.ConnectableObservable=u;var c=u.prototype;t.connectableObservableDescriptor={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:c._subscribe},_isComplete:{value:c._isComplete,writable:!0},getSubject:{value:c.getSubject},connect:{value:c.connect},refCount:{value:c.refCount}};var l=function(e){function t(t,n){e.call(this,t),this.connectable=n}return r(t,e),t.prototype._error=function(t){this._unsubscribe(),e.prototype._error.call(this,t)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}},t}(i.SubjectSubscriber),f=function(){function e(e){this.connectable=e}return e.prototype.call=function(e,t){var n=this.connectable;n._refCount++;var r=new d(e,n),i=t.subscribe(r);return r.closed||(r.connection=n.connect()),i},e}(),d=function(e){function t(t,n){e.call(this,t),this.connectable=n}return r(t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(!e)return void(this.connection=null);this.connectable=null;var t=e._refCount;if(t<=0)return void(this.connection=null);if(e._refCount=t-1,t>1)return void(this.connection=null);var n=this.connection,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()},t}(a.Subscriber)},function(e,t,n){"use strict";var r=n(26),i=n(58);r.Observable.of=i.of},function(e,t,n){"use strict";var r=n(59);t.of=r.ArrayObservable.of},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(26),o=n(60),a=n(61),s=n(62),u=function(e){function t(t,n){e.call(this),this.array=t,this.scheduler=n,n||1!==t.length||(this._isScalar=!0,this.value=t[0])}return r(t,e),t.create=function(e,n){return new t(e,n)},t.of=function(){for(var e=[],n=0;n<arguments.length;n++)e[n-0]=arguments[n];var r=e[e.length-1];s.isScheduler(r)?e.pop():r=null;var i=e.length;return i>1?new t(e,r):1===i?new o.ScalarObservable(e[0],r):new a.EmptyObservable(r)},t.dispatch=function(e){var t=e.array,n=e.index,r=e.count,i=e.subscriber;return n>=r?void i.complete():(i.next(t[n]),void(i.closed||(e.index=n+1,this.schedule(e))))},t.prototype._subscribe=function(e){var n=0,r=this.array,i=r.length,o=this.scheduler;if(o)return o.schedule(t.dispatch,0,{array:r,index:n,count:i,subscriber:e});for(var a=0;a<i&&!e.closed;a++)e.next(r[a]);e.complete()},t}(i.Observable);t.ArrayObservable=u},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(26),o=function(e){function t(t,n){e.call(this),this.value=t,this.scheduler=n,this._isScalar=!0,n&&(this._isScalar=!1)}return r(t,e),t.create=function(e,n){return new t(e,n)},t.dispatch=function(e){var t=e.done,n=e.value,r=e.subscriber;return t?void r.complete():(r.next(n),void(r.closed||(e.done=!0,this.schedule(e))))},t.prototype._subscribe=function(e){var n=this.value,r=this.scheduler;return r?r.schedule(t.dispatch,0,{done:!1,value:n,subscriber:e}):(e.next(n),void(e.closed||e.complete()))},t}(i.Observable);t.ScalarObservable=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(26),o=function(e){function t(t){e.call(this),this.scheduler=t}return r(t,e),t.create=function(e){return new t(e)},t.dispatch=function(e){var t=e.subscriber;t.complete()},t.prototype._subscribe=function(e){var n=this.scheduler;return n?n.schedule(t.dispatch,0,{subscriber:e}):void e.complete()},t}(i.Observable);t.EmptyObservable=o},function(e,t){"use strict";function n(e){return e&&"function"==typeof e.schedule}t.isScheduler=n},function(e,t,n){"use strict";var r=n(26),i=n(64);r.Observable.prototype.startWith=i.startWith},function(e,t,n){"use strict";function r(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var n=e[e.length-1];u.isScheduler(n)?e.pop():n=null;var r=e.length;return 1===r?s.concatStatic(new o.ScalarObservable(e[0],n),this):r>1?s.concatStatic(new i.ArrayObservable(e,n),this):s.concatStatic(new a.EmptyObservable(n),this)}var i=n(59),o=n(60),a=n(61),s=n(65),u=n(62);t.startWith=r},function(e,t,n){"use strict";function r(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return this.lift.call(i.apply(void 0,[this].concat(e)))}function i(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var n=null,r=e;return a.isScheduler(r[e.length-1])&&(n=r.pop()),null===n&&1===e.length&&e[0]instanceof o.Observable?e[0]:new s.ArrayObservable(e,n).lift(new u.MergeAllOperator(1))}var o=n(26),a=n(62),s=n(59),u=n(66);t.concat=r,t.concatStatic=i},function(e,t,n){"use strict";function r(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),this.lift(new s(e))}var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(67),a=n(68);t.mergeAll=r;var s=function(){function e(e){this.concurrent=e}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.concurrent))},e}();t.MergeAllOperator=s;var u=function(e){function t(t,n){e.call(this,t),this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0}return i(t,e),t.prototype._next=function(e){this.active<this.concurrent?(this.active++,this.add(a.subscribeToResult(this,e))):this.buffer.push(e)},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(o.OuterSubscriber);t.MergeAllSubscriber=u},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(29),o=function(e){function t(){e.apply(this,arguments)}return r(t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(t)},t.prototype.notifyError=function(e,t){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(i.Subscriber);t.OuterSubscriber=o},function(e,t,n){"use strict";function r(e,t,n,r){var d=new l.InnerSubscriber(e,n,r);if(d.closed)return null;if(t instanceof u.Observable)return t._isScalar?(d.next(t.value),d.complete(),null):t.subscribe(d);if(o.isArrayLike(t)){for(var h=0,p=t.length;h<p&&!d.closed;h++)d.next(t[h]);d.closed||d.complete()}else{if(a.isPromise(t))return t.then(function(e){d.closed||(d.next(e),d.complete())},function(e){return d.error(e)}).then(null,function(e){i.root.setTimeout(function(){throw e})}),d;if(t&&"function"==typeof t[c.iterator])for(var v=t[c.iterator]();;){var m=v.next();if(m.done){d.complete();break}if(d.next(m.value),d.closed)break}else if(t&&"function"==typeof t[f.observable]){var y=t[f.observable]();if("function"==typeof y.subscribe)return y.subscribe(new l.InnerSubscriber(e,n,r));d.error(new TypeError("Provided object does not correctly implement Symbol.observable"))}else{var b=s.isObject(t)?"an invalid object":"'"+t+"'",g="You provided "+b+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";d.error(new TypeError(g))}}return null}var i=n(27),o=n(69),a=n(70),s=n(33),u=n(26),c=n(71),l=n(72),f=n(39);t.subscribeToResult=r},function(e,t){"use strict";t.isArrayLike=function(e){return e&&"number"==typeof e.length}},function(e,t){"use strict";function n(e){return e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}t.isPromise=n},function(e,t,n){"use strict";function r(e){var t=e.Symbol;if("function"==typeof t)return t.iterator||(t.iterator=t("iterator polyfill")),t.iterator;var n=e.Set;if(n&&"function"==typeof(new n)["@@iterator"])return"@@iterator";var r=e.Map;if(r)for(var i=Object.getOwnPropertyNames(r.prototype),o=0;o<i.length;++o){var a=i[o];if("entries"!==a&&"size"!==a&&r.prototype[a]===r.prototype.entries)return a}return"@@iterator"}var i=n(27);t.symbolIteratorPonyfill=r,t.iterator=r(i.root),t.$$iterator=t.iterator},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(29),o=function(e){function t(t,n,r){e.call(this),this.parent=t,this.outerValue=n,this.outerIndex=r,this.index=0}return r(t,e),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},t.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(i.Subscriber);t.InnerSubscriber=o},function(e,t,n){"use strict";var r=n(26),i=n(74);r.Observable.prototype.filter=i.filter},function(e,t,n){"use strict";function r(e,t){return this.lift(new a(e,t))}var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(29);t.filter=r;var a=function(){function e(e,t){this.predicate=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.predicate,this.thisArg))},e}(),s=function(e){function t(t,n,r){e.call(this,t),this.predicate=n,this.thisArg=r,this.count=0}return i(t,e),t.prototype._next=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}t&&this.destination.next(e)},t}(o.Subscriber)},function(e,t,n){"use strict";var r=n(26),i=n(76);r.Observable.prototype.map=i.map},function(e,t,n){"use strict";function r(e,t){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return this.lift(new a(e,t))}var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(29);t.map=r;var a=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.project,this.thisArg))},e}();t.MapOperator=a;var s=function(e){function t(t,n,r){e.call(this,t),this.project=n,this.count=0,this.thisArg=r||this}return i(t,e),t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(o.Subscriber)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return e.on("upload-start",function(e){return u.default.publish(f+"new",e)}),e.on("upload-preview-update",function(e){return u.default.publish(f+"preview",e)}),e.on("upload-status-update",function(e){return u.default.publish(f+"progress",e)}),e.on("upload-error",function(e){return u.default.publish(f+"error",e)}),e.on("upload-processing",function(e){return u.default.publish(f+"done",e)}),e.on("upload-end",function(e){return u.default.publish(f+"done",e)}),u.default.subscribe(f+"cancel",function(t){e.cancel&&e.cancel(t)}),e}function o(e){return u.default.subscribe("issue/changed",function(t){l.default.getUploadParameters().then(e.setUploadParams.bind(e))}),e}function a(e){return u.default.subscribe("project/changed",function(t){l.default.getTemporaryAttachmentUploadParameters(t).then(e.setUploadParams.bind(e))}),e}Object.defineProperty(t,"__esModule",{value:!0}),t.connect=i,t.connectToIssueChanges=o,t.connectToProjectChanges=a;var s=n(10),u=r(s),c=n(3),l=r(c),f="upload/"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(2),a=n(16),s=r(a),u=n(10),c=r(u),l=n(20),f=r(l);t.default=function(e,t,n,r,a){var u="create-issue/drop-zone",l=(0,o.temporaryAttachmentDropzone)(e,r).then(function(e){return e.on("drop",function(){s.default.triggerAttachRequested(u)}),e}),d=!1;return{activate:function(){return l.then(function(r){d||(d=!0,r.activate(),c.default.publish("upload/switch-context",{name:u,uploadSettings:i({},{projectId:e,formToken:t,panelNode:n},a)}),c.default.publish("project/changed",e))})},deactivate:function(){return l.then(function(e){d&&(e.deactivate(),d=!1)})},drop:function(){return l.catch(function(e){s.default.triggerInitialisationException((0,f.default)(e)),c.default.publish("media/error","Attachment upload setup failed. Try refreshing a page or contact Support.")})}}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(80),o=r(i),a=n(20),s=r(a),u=n(16),c=r(u),l=n(10),f=r(l),d=n(83),h=r(d),p="jira.issue.media-picker.show",v={
blockWikiEditorMarkupInsert:!1},m=void 0,y=function(e){var t="view-issue/"+e;return(0,o.default)().then(function(e){m=e}).catch(function(e){c.default.triggerInitialisationException((0,s.default)(e))}),function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v;n&&n.preventDefault(),h.default.start({key:p,isInitial:!1,threshold:250}),c.default.triggerAttachRequested(e),m?m.show().then(function(){return h.default.end({key:p})}).then(function(){return f.default.publish("upload/switch-context",{name:t,uploadSettings:r})}).catch(function(){f.default.publish("media/error","Attachment upload setup failed. Try refreshing a page or contact Support.")}):c.default.triggerUploadRequestedWhenNotInitialised()}};t.default=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),o=n(81),a=r(o),s=n(82),u=r(s),c=n(7),l=r(c),f=function(){return u.default.then(function(){return new a.default(i.popup,i.browser)})};t.default=l.default.memoize(f)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(16),u=r(s),c=n(20),l=r(c),f=n(3),d=r(f),h=function(){function e(t,n){var r=this;i(this,e);var o=d.default.userAuthProvider;o().then(function(e){e?r.componentPromise=t(o).then(function(e){return[e,"popup"]}).catch(function(e){return e.logged||u.default.triggerGenericPopupInitialisationError((0,l.default)(e)),n().then(function(e){return[e,"browser"]})}).then(r.handleComponentInitSuccess.bind(r)).catch(r.handleComponentInitFailure.bind(r)):r.componentPromise=r.initializeBrowser.call(r,n)})}return a(e,[{key:"initializeBrowser",value:function(e){return e().then(function(e){return[e,"browser"]}).then(this.handleComponentInitSuccess.bind(this)).catch(this.handleComponentInitFailure.bind(this))}},{key:"handleComponentInitSuccess",value:function(e){var t=o(e,2),n=t[0],r=t[1];return this.mediaComponent=n,this.componentType=r,[n,r]}},{key:"handleComponentInitFailure",value:function(e){u.default.triggerInitialisationException((0,l.default)(e)),this.componentType="none"}},{key:"show",value:function(){var e=this;switch(this.componentType){case"browser":return this.showBrowser();case"popup":return this.showPopup();case"none":return Promise.reject("Component initialisation error");default:return d.default.userAuthProvider().then(function(){return e.componentPromise}).then(function(){return"popup"===e.componentType?e.showPopup():(u.default.triggerBrowserRequestedWhenNotInitialised(),Promise.resolve())})}}},{key:"showPopup",value:function(){return this.mediaComponent.show().then(function(){return u.default.triggerPopupShown()}).catch(function(e){return u.default.triggerPopupFailedToShow((0,l.default)(e)),Promise.reject(e)})}},{key:"showBrowser",value:function(){var e=this;return new Promise(function(t,n){try{e.mediaComponent.browse(),u.default.triggerAttachFileBrowserShown(),t()}catch(e){u.default.triggerAttachFileBrowserFailedToShow((0,l.default)(e)),n(e)}})}}]),e}();t.default=h},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=new Promise(function(e,t){"undefined"==typeof document?t("Document is not available"):/^loaded|^interactive|^complete/.test(document.readyState)?e():document.addEventListener("DOMContentLoaded",function(t){return e()})})},function(e,t){e.exports=require("internal/browser-metrics")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return _||(0,u.default)(e).then(function(e){_=e}).catch(function(e){d.default.triggerInitialisationException((0,l.default)(e))}),p.default.publish("project/changed",e),function(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g;return r&&r.preventDefault(),m.default.start({key:y,isInitial:!1,threshold:250}),d.default.triggerAttachRequested(b),_?(i=a({},i,{projectId:e,formToken:t,panelNode:n}),p.default.publish("project/changed",e),_.show().then(function(){return m.default.end({key:y})}).then(function(){return p.default.publish("upload/switch-context",{name:b,uploadSettings:i})}).catch(function(){p.default.publish("media/error","Attachment upload setup failed. Try refreshing a page or contact Support.")})):void d.default.triggerUploadRequestedWhenNotInitialised()}}function o(){_=null}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=i,t.resetMediaComponent=o;var s=n(85),u=r(s),c=n(20),l=r(c),f=n(16),d=r(f),h=n(10),p=r(h),v=n(83),m=r(v),y="jira.create.issue.media-picker.show",b="create-issue/link",g={blockWikiEditorMarkupInsert:!1},_=void 0},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),o=n(81),a=r(o),s=n(82),u=r(s),c=n(7),l=r(c),f=function(e){var t=(0,i.temporaryAttachmentPopup)(e),n=(0,i.temporaryAttachmentBrowser)(e);return u.default.then(function(){return new a.default(t,n)})};t.default=l.default.memoize(f)},function(e,t){e.exports=require("dndattachment/integration-register")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),o=n(3),a=r(o),s=n(88),u=r(s),c=n(16),l=r(c),f=n(20),d=r(f),h=n(89),p=r(h);t.default=function(e,t,n,r){var o="view-issue/attach-screenshot",s=p.default.Deferred();(0,i.binary)(e).then(function(t){return t.on("upload-start",function(e){s.notify("init"),l.default.triggerUploadStarted(e.file.id,e.file.size)}),t.on("upload-status-update",function(e){s.notify({loaded:e.progress.absolute,total:e.progress.max})}),t.on("upload-end",function(t){return a.default.createTemporaryAttachment(e,t.file.publicId,r).then(function(e){s.resolve({id:e.attachmentId})})}),t.on("upload-processing",function(e){s.notify({loaded:e.absolute,total:e.max})}),t.on("upload-error",function(e){s.reject(null,e.name,e.description,{}),l.default.triggerUploadError(e.name,e.fileId)}),t}).then(function(e){return l.default.triggerAttachRequested(o),(0,u.default)(t).then(function(t){e.upload(t,n)})}).catch(function(e){return l.default.triggerInitialisationException((0,d.default)(e))});return s}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return new Promise(function(t,n){var r=new FileReader;r.onload=function(e){t(e.target.result)},r.onerror=function(){n(this)},r.readAsDataURL(e)})}},function(e,t){e.exports=require("jquery")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(2),a=n(88),s=r(a),u=n(10),c=r(u),l=n(16),f=r(l),d=n(20),h=r(d),p={blockWikiEditorMarkupInsert:!0},v=function(e,t,n){var r="create-issue/attach-screenshot",a=(0,o.connectedTemporaryBinary)(e).catch(function(e){f.default.triggerInitialisationException((0,h.default)(e))});return function(o){return a.then(function(a){return(0,s.default)(o).then(function(s){f.default.triggerAttachRequested(r),c.default.publish("project/changed",e),c.default.publish("upload/switch-context",{name:r,uploadSettings:i({},{projectId:e,formToken:t,panelNode:n},p)}),a.upload(s,o.name)})}).catch(function(){c.default.publish("media/error","Attachment upload setup failed. Try refreshing a page or contact Support.")})}};t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(10),a=r(o),s=n(92),u=r(s),c=n(109),l=r(c);n(24),t.default=function(){a.default.subscribe("upload/new",function(e){var t=e.file;u.default.startUpload(t)}),a.default.subscribe("upload/preview",function(e){var t=e.file,n=e.preview,r=l.default.decodeBase64DataUri(n.src),i=new Blob([r],{type:t.type});i.name=t.name,u.default.updatePreview(t,i)}),a.default.subscribe("upload/progress",function(e){var t=e.file,n=e.progress;u.default.progress(t,n)}),a.default.subscribe("upload/error",function(e){var t=e.error;t.isMediaError=!0,u.default.error(t)}),a.default.subscribe("upload/done",function(e){var t=e.file.publicId?e.file:i({},e.file,{publicId:e.public.id});u.default.done(t)}),a.default.subscribe("media/error",u.default.globalError)}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=n(93),s=r(a),u=n(99),c=r(u),l=n(101),f=r(l),d=n(102),h=r(d),p=n(11),v=r(p),m=n(9),y=r(m),b=n(3),g=r(b),_=n(104),w=r(_),x=n(10),k=r(x),A=n(105),S=r(A),P=n(16),O=r(P),I=n(107),E=r(I),j=n(108),T=r(j),C=new Map,M=function(e){return e&&0===e.indexOf("create-issue")};t.default={startUpload:function(e){var t=y.default.getUploadContextSettings()||{blockWikiEditorMarkupInsert:!1};O.default.triggerUploadStarted(e.id,e.size);var n=this._createUpload(e);C.set(e.id,n),t.onFileUploadStarted&&t.onFileUploadStarted.call(e,e),n.then(function(e){var t=e.view,n=e.uploadContext,r=e.uploadSettings;M(n)?f.default.insertUpload(r.panelNode,t.$node):c.default.insertUpload(t.$node)}),this._validate(e)},updatePreview:function(e,t){t&&C.get(e.id)&&C.get(e.id).then(function(e){e.preview=t,e.view.loadThumbnail(t)})},progress:function(e,t){C.get(e.id)&&C.get(e.id).then(function(e){var n=e.view;return n.progress(t.portion)})},error:function(e){e.fileId&&C.get(e.fileId)&&C.get(e.fileId).then(function(t){var n=t.view,r=t.file,i=t.uploadContext,o=t.uploadSettings;e.logged||O.default.triggerUploadError(e.description,e.fileId),e.isMediaError&&(e.description="We could not connect to the file storage service. Please try again in a moment."),n.fail(e),M(i)||c.default.uploadError(r.name,e.description,function(){n.destroy(),C.delete(r.id)}),o.onFileUploadFinished&&o.onFileUploadFinished.call(r,r)})},globalError:function(e){c.default.globalError(e)},done:function(e){var t=this;O.default.triggerFileUploadFinished(e.id),C.get(e.id).then(function(n){var r=n.view,i=n.uploadContext,o=n.uploadSettings;return r.done(),M(i)?t.createTemporaryAttachment(e,o):t.createAttachment(o.issueId,e)})},createTemporaryAttachment:function(e,t){var n=this;Promise.all([t.projectId,t.formToken]).then(function(t){var n=o(t,2),r=n[0],i=n[1];if(!r||!i)throw new Error("Missing form data associated with upload");return g.default.createTemporaryAttachment(r,e.publicId,i)}).then(this.temporaryAttachmentCreated.bind(this,e)).catch(function(t){var r=t.message;O.default.triggerCantCreateTemporaryAttachmentInJIRA(r,e.id),n.error({fileId:e.id,description:r||"Couldn't create attachment"})})},createAttachment:function(e,t){var n=this;g.default.createAttachment(e,t.publicId).then(this.attachmentCreated.bind(this,t)).catch(function(e){var r=e.message;O.default.triggerCantCreateAttachmentInJIRA(r,t.id),n.error({fileId:t.id,description:r||"Couldn't create attachment"})})},attachmentCreated:function(e,t){var n=this;C.get(e.id).then(function(r){var i=r.view,o=r.wikiFieldsContext,a=r.issueLinkHTML,s=r.uploadSettings;O.default.triggerAttachmentCreatedInJIRA(e.id),n.updateViewWithCreatedAttachment(e,t,i,s.issueId,o),c.default.notifyUserOfCreatedAttachment(e,a),C.delete(e.id)})},temporaryAttachmentCreated:function(e,t){var n=this;C.get(e.id).then(function(e){var r=e.view,i=e.wikiFieldsContext,o=e.uploadSettings,a=e.preview,s=e.file;O.default.triggerTemporaryAttachmentCreatedInJIRA(s.id),n.addAttachmentToDndStore(t.attachmentId,s,a),r.attachmentCreated(t.attachmentId),i.isWikiFieldFocused&&S.default.insertWikiMarkup(i.focusedField,s.name),o.onFileUploadFinished&&o.onFileUploadFinished.call(s,s),C.delete(s.id)})},addAttachmentToDndStore:function(e,t,n){return T.default.putAttachment(e,n?n:t)},updateViewWithCreatedAttachment:function(e,t,n,r,i){var o=h.default.create(e,t,{viewType:c.default.getViewType(),issueId:r});n.$node.replaceWith(o),i.isWikiFieldFocused&&S.default.insertWikiMarkup(i.focusedField,e.name)},cancel:function(e){C.has(e.id)&&C.get(e.id).then(function(t){var n=t.uploadSettings;O.default.triggerUploadCancelled(e.id),k.default.publish("upload/cancel",e.id),C.delete(e.id),n.onFileUploadFinished&&onFileUploadFinished.call(e,e)})},_createUpload:function(e){var t=this,n=y.default.getUploadContextName(),r=y.default.getUploadContextSettings()||{blockWikiEditorMarkupInsert:!1},o=void 0;return o=M(n)?Promise.resolve(r):v.default.getIssueId().then(function(e){return i({},r,{issueId:e})}),o.then(function(r){var i=S.default.getWikiFieldsContextInformation(),o=void 0;i&&i.isWikiFieldFocused&&r.blockWikiEditorMarkupInsert&&(i.isWikiFieldFocused=!1),o=M(n)?s.default.createIssue(e,{},function(){t.cancel(e)}):s.default.viewIssue(e,{viewType:c.default.getViewType()},function(){t.cancel(e)});var a=v.default.getIssuePermlink(),u=v.default.getIssueKey(),l=E.default.getHtml(u,a);return{view:o,file:e,wikiFieldsContext:i,issueLinkHTML:l,uploadContext:n,uploadSettings:r}})},_validate:function(e){var t=w.default.validateFile(e),n=t.valid,r=t.message;n||(O.default.triggerUploadValidationFailed(r,e.id),this.error({fileId:e.id,description:r,logged:!0}),k.default.publish("upload/cancel",e.id))}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(94),o=r(i),a=n(98),s=r(a);t.default={viewIssue:function(e,t,n){return new o.default(e,t,n)},createIssue:function(e,t,n){return new s.default(e,t,n)}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(95),s=r(a),u=n(96),c=r(u),l=n(97),f=r(l),d=n(89),h=r(d),p=function(){function e(t,n,r){i(this,e),this.file=t,this.context=n,this.onCancel=r,this.$node=(0,h.default)('<div class="attachments-upload-progress-bar"/>'),this.$node.data("viewMode",this.context.viewType),this.render()}return o(e,[{key:"render",value:function(){var e=s.default.AttachmentsUploadProgressBar({isImageType:"gallery"===this.context.viewType});"list"===this.context.viewType&&this.$node.addClass("attachment-content"),this.$node.html(e),this.renderFileProperties()}},{key:"renderFileProperties",value:function(){var e=this;"gallery"==this.context.viewType?(0,h.default)(c.default.renderThumbnailIcon({mimetype:this.file.type})).appendTo(this.thumbnailNode):(0,h.default)(c.default.renderAttachmentIcon({mimetype:this.file.type})).appendTo(this.thumbnailNode),this.$node.find(".upload-progress-bar__file-name").text(this.file.name),this.$node.find(".upload-progress-bar__upload-control span").on("click",function(){e.onCancel(),e.destroy()}),this.file.size>=0&&this.$node.find(".upload-progress-bar__file-size").html((0,f.default)(this.file.size))}},{key:"loadThumbnail",value:function(e){if("gallery"===this.context.viewType){var t=URL.createObjectURL(e);this.thumbnailNode.addClass("upload-progress-bar__thumbnail_image"),this.thumbnailNode.find(".attachment-thumbnail-icon").detach(),(0,h.default)("<img/>").attr("src",t).appendTo(this.thumbnailNode)}}},{key:"progress",value:function(e){this.progressPortion=e,this.progressNode.toggleClass("UploadProgressBar_progressUnknown",this.progressPortion===!1),this.progressPortion>=0&&this.progressNode.find(".upload-progress-bar__bar").css("width",100*this.progressPortion+"%")}},{key:"done",value:function(){this.$node.find(".upload-progress-bar__upload-control").hide(),this.$node.addClass("upload-progress-bar__upload-finished")}},{key:"fail",value:function(e){this.$node.addClass("upload-progress-bar__upload-error"),this.$node.removeClass("upload-progress-bar__upload-finished"),this.progressNode.find(".upload-progress-bar__bar").css("width","100%")}},{key:"destroy",value:function(){this.$node.remove()}},{key:"thumbnailNode",get:function(){return this.$node.find(".upload-progress-bar__thumbnail")}},{key:"progressNode",get:function(){return this.$node.find(".upload-progress-bar__progress-bar")}}]),e}();t.default=p},function(e,t){e.exports=JIRA.Templates.DnDAttachmentPlugin},function(e,t){e.exports=JIRA.Templates.ViewIssue},function(e,t){"use strict";function n(e){var t=e/a;return t.toFixed(2)+u}function r(e){var t=Math.round(e/o);return t+s}function i(e){var t=e/o;return t.toFixed(1)+s}Object.defineProperty(t,"__esModule",{value:!0});var o=1024,a=o*o,s=" kB",u=" MB";t.default=function(e){return e>a?n(e):e>o?r(e):i(e)}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(95),s=r(a),u=n(96),c=r(u),l=n(97),f=r(l),d=n(89),h=r(d),p=["aui-iconfont-close-dialog","aui-iconfont-success","aui-iconfont-error"],v=function(){function e(t,n,r){i(this,e),this.file=t,this.context=n,this.onCancel=r,this.$node=(0,h.default)('<div class="upload-progress-bar"/>'),this.render()}return o(e,[{key:"render",value:function(){var e=this,t=s.default.UploadProgressBar({isImageType:!0});this.$node.html(t),this.$node.find(".upload-progress-bar__file-name").text(this.file.name),this.$node.find(".upload-progress-bar__control button").on("click",function(){e.onCancel(),e.destroy()}),this.file.size>=0&&this.$node.find(".upload-progress-bar__file-size").html((0,f.default)(this.file.size)),(0,h.default)(c.default.renderThumbnailIcon({mimetype:this.file.type})).appendTo(this.thumbnailNode),this.thumbnailNode.removeClass("upload-progress-bar__thumbnail_image").addClass("upload-progress-bar__thumbnail_icon").addClass("upload-progress-bar__thumbnail_icon_aui")}},{key:"loadThumbnail",value:function(e){var t=URL.createObjectURL(e);this.thumbnailNode.addClass("upload-progress-bar__thumbnail_image"),this.thumbnailNode.find(".attachment-thumbnail-icon").detach(),(0,h.default)("<img/>").attr("src",t).appendTo(this.thumbnailNode)}},{key:"progress",value:function(e){this.progressPortion=e,this.progressNode.toggleClass("UploadProgressBar_progressUnknown",this.progressPortion===!1),this.progressPortion>=0&&this.progressNode.find(".upload-progress-bar__bar").css("width",100*this.progressPortion+"%")}},{key:"done",value:function(){this.setIcon("aui-iconfont-success"),this.progress(1)}},{key:"attachmentCreated",value:function(e){this.$checkbox=(0,h.default)('<input type="checkbox" name="filetoconvert"/>').addClass("upload-progress-bar__checkbox").attr("value",e).attr("id","filetoconvert-"+e).prop("checked",!0).insertBefore(this.$node),this.$node.addClass("upload-progress-bar__upload-ready").addClass("upload-progress-bar__upload-finished"),this.setIcon("aui-iconfont-close-dialog")}},{key:"fail",value:function(e){this.$node.addClass("upload-progress-bar__upload-error"),this.$node.removeClass("upload-progress-bar__upload-finished"),this.progressNode.find(".upload-progress-bar__bar").css("width","100%"),this.$node.find(".upload-progress-bar__error-message").text(e.description)}},{key:"destroy",value:function(){this.$checkbox&&this.$checkbox.prop("checked",!1).prop("value",null),this.$node.remove()}},{key:"setIcon",value:function(e){var t=this.$node.find(".upload-progress-bar__control button .aui-icon");p.forEach(function(n){t.toggleClass(n,n===e)})}},{key:"thumbnailNode",get:function(){return this.$node.find(".upload-progress-bar__thumbnail")}},{key:"progressNode",get:function(){return this.$node.find(".upload-progress-bar__progress-bar")}}]),e}();t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(89),o=r(i),a=n(100),s=r(a),u="#file_attachments, #attachment_thumbnails",c=function(){return(0,o.default)(u)};t.default={getViewType:function(){return"file_attachments"===c().attr("id")?"list":"gallery"},insertUpload:function(e){if(0===c().length)throw new Error("Attachment List is not present");c().prepend(e)},uploadError:function(e,t,n){var r=s.default.showErrorMsg(AJS.format("\"{0}\" was not uploaded.",AJS.escapeHtml(e)),AJS.escapeHtml(t));(0,o.default)(r).on("aui-flag-close",n)},globalError:function(e){return s.default.showErrorMsg("Cannot upload attachments",AJS.escapeHtml(e))},notifyUserOfCreatedAttachment:function(e,t){s.default.showSuccessMsg("",AJS.format("{0} was attached successfully to {1}.",AJS.escapeHtml(e.name),t))}}},function(e,t){e.exports=require("jira/flag")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(89),o=r(i);t.default={insertUpload:function(e,t){var n=(0,o.default)(e);if(0===n.length)throw new Error("Cannot find temp attachment dropzone");n.after((0,o.default)(t))}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(96),o=r(i),a=n(8),s=r(a),u=n(97),c=r(u),l=n(103),f=n(89),d=r(f),h=function(){return"undefined"==typeof window?"":window&&window.location&&window.location.origin}(),p=(0,s.default)(),v=""+h+p,m=function(e){return encodeURIComponent(e)},y=function(e,t){var n=m(e.name);return"secure/attachment/"+t.attachmentId+"/"+n},b=function(e,t){var n=m(e.name);return(0,l.isImageType)(e)?v+"/secure/thumbnail/"+t.attachmentId+"/"+n+"?default=false":null},g=function(e,t){var n=m(e.name);return t.expandable?null:v+"/secure/thumbnail/"+t.attachmentId+"/"+n};t.default={create:function(e,t,n){var r=[{id:t.attachmentId,attachmentUrl:y(e,t),thumbnailUrl:b(e,t),jiraThumbnailUrl:g(e,t),fileName:e.name,mimeType:e.type,expandable:t.expandable,deletable:t.deletable,fileSize:(0,c.default)(e.size),createdIso8601:e.creationDate,createdDateTime:e.creationDate}];return(0,d.default)(o.default.renderAttachments({baseurl:p,fullBaseUrl:v,issue:{id:n.issueId},attachments:r,viewMode:n.viewType})).find(".attachment-content")}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=u.default.getThumbnailMimeType().split(",");return e&&e.type&&a.default.contains(t,e.type)}Object.defineProperty(t,"__esModule",{value:!0}),t.isImageType=void 0;var o=n(7),a=r(o),s=n(4),u=r(s);t.isImageType=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(97),o=r(i),a=n(4),s=r(a);t.default={validateFile:function(e){var t=this.fileNameContainsInvalidCharacter(e.name),n=void 0;return""!==t&&(n=AJS.format("{0} contains the invalid character \'\'{1}\'\'. Please rename the file and try again.",e.name,t)),this.sizeExceedsMaximum(e.size)&&(n="File exceeds maximum size limit set by the administrator ({0}).".replace("{0}",(0,o.default)(s.default.getMaxFileSize()))),n?{valid:!1,message:n}:{valid:!0}},fileNameContainsInvalidCharacter:function(e){return s.default.getInvalidChars().reduce(function(t,n){return e.indexOf(n)!==-1?n:t},"")},sizeExceedsMaximum:function(e){return e>s.default.getMaxFileSize()}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(89),o=r(i),a=n(106),s=r(a);t.default={getWikiFieldsContextInformation:function(){var e=(0,o.default)("textarea.wiki-textfield:visible:focus");return e?{isWikiFieldFocused:e.length>0,focusedField:e[0]}:void 0},insertWikiMarkup:function(e,t){var n=(0,o.default)(e);s.default.insertWikiMarkup(t,e,e.selectionStart,e.selectionStart),n.is(":focus")||n.focus()}}},function(e,t){e.exports=require("dndattachment/ctrlv/utility")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(89),o=r(i),a=n(95),s=r(a);t.default={getHtml:function(e,t){var n=(0,o.default)("#summary-val input"),r=(0,o.default)("#summary-val"),i=n&&n.attr("value")||r&&r.text();return s.default.SuccessMessageLink({issueLink:t,issueKey:e,issueSummary:i})}}},function(e,t){e.exports=require("dndattachment/TemporaryAttachments")},function(e,t){e.exports=require("dndattachment/ctrlv/base64decode")}]);;;try{window.performance.mark('jira.create.issue_batch_file_eval:end');} catch(e){};