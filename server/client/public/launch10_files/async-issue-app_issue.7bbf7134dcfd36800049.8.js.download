try{window.performance.mark("async-issue-app~issue.js:eval-start")}catch(e){}(window.webpackJsonp=window.webpackJsonp||[]).push([["async-issue-app~issue"],{"./src/packages/issue/attachments/issue-attachments-base/src/services/attachments-service/main.js":function(t,s,n){"use strict";n.d(s,"a",(function(){return w}));var a=n("./node_modules/react/index.js"),i=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/logging/log.js"),r=n("./src/packages/platform/utils/fetch/src/utils/requests.js"),o=n("./src/packages/platform/ui/flags/src/index.js"),c=n("./src/packages/platform/controllers/tenant-context/src/components/index.js"),l=n("./src/packages/issue/attachments/issue-attachments-base/src/services/constants.js"),u=n("./src/packages/issue/attachments/issue-attachments-base/src/services/messages.js"),d=n("./node_modules/react-sweet-state/lib/esm/components/hook.js"),p=n("./src/packages/issue/attachments/issue-attachments-base/src/services/index.js");const m=Object(d.a)(p.a,{selector:e=>e.isFetching}),b=Object(d.a)(p.a,{selector:e=>e.meta.orderDirection}),f=Object(d.a)(p.a,{selector:e=>e.meta.orderField}),g=Object(d.a)(p.a,{selector:e=>e.totalCount}),h=Object(d.a)(p.a,{selector:e=>e.meta.startAt}),y=Object(d.a)(p.a,{selector:e=>e.visibleAttachments});function O(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function j(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?O(Object(s),!0).forEach((function(t){E(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):O(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function E(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const v=()=>"\n  query attachmentsQuery($issueKey: String, $startAt: Long, $maxResults: Long, $orderField: AttachmentsOrderField, $orderDirection: OrderDirection) {\n    viewIssue(issueKey: $issueKey) {\n        attachments(startAt: $startAt, maxResults: $maxResults, orderField: $orderField, orderDirection: $orderDirection) {\n            nodes {\n                id\n                filename\n                mimetype\n                mediaApiFileId\n                createdDate\n                filesize\n                parentName\n                parentId\n                author {\n                    accountId\n                }\n            }\n            totalCount\n        }\n    }\n  }",k={startAt:0,maxResults:6,orderField:l.d,orderDirection:l.c},w=(t,s)=>{const[n,{setIsFetching:d}]=m(),[p,{setOrderDirection:O}]=b(),[E,{setOrderField:w}]=f(),[S,{setStartAt:I}]=h(),[C,{setTotalCount:T}]=g(),[P,{setVisibleAttachments:_}]=y(),{showFlag:x}=Object(o.useFlagsService)(),D=Object(c.e)(),[A,M]=Object(a.useState)(null),L=Object(a.useCallback)(async(t,s)=>{d(!0),M(null);try{const e=await(async(e,t,s)=>{var n,a;const i=j(j({},k),s),o=await Object(r.d)(`${t}/rest/gira/1/`,{body:JSON.stringify({query:v(),variables:j({issueKey:e},i)})}),c=null==o||null===(n=o.data)||void 0===n||null===(a=n.viewIssue)||void 0===a?void 0:a.attachments;return c&&c.nodes&&void 0!==c.totalCount?o.data.viewIssue.attachments:null})(t,D,s);if(e)T(e.totalCount),_(e.nodes),O((null==s?void 0:s.orderDirection)||l.c),w((null==s?void 0:s.orderField)||l.d),I((null==s?void 0:s.startAt)||0);else{const e="Failed to fetch issue attachments";M(new Error(e)),i.a.safeError("issue.attachments.fetch-attachments",e)}}catch(e){M(e),i.a.safeError("issue.attachments.fetch-attachments",e.toString())}d(!1)},[D,d,O,w,I,T,_]),R=Object(a.useCallback)((e,t)=>{(!n||t&&t.startAt!==S)&&L(e,t)},[L,n,S]),N=Object(a.useCallback)(async(e,t,s)=>{if(void 0!==C){_(P.filter(e=>e.id!==t)),T(C-1);try{await(async(e,t)=>Object(r.a)(`${e}/rest/api/2/attachment/${t}`))(D,t),L(e,s)}catch{x({type:"error",title:u.a.deleteFailedTitle,description:u.a.deleteFailedDescription}),L(e,s)}}},[D,L,T,_,x,C,P]);return Object(a.useEffect)(()=>{void 0!==C||n||A||L(t,s)},[A,L,t,n,s,C]),[{error:A,meta:{orderDirection:p,orderField:E,startAt:S},value:{attachments:P,totalCount:C||0},loading:n},{deleteAttachment:N,refreshAttachments:R,setOrderDirection:O,setOrderField:w,setTotalCount:T,setVisibleAttachments:_}]}},"./src/packages/issue/attachments/issue-attachments-base/src/services/constants.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"a",(function(){return a})),s.d(t,"c",(function(){return i})),s.d(t,"e",(function(){return r})),s.d(t,"d",(function(){return o}));const n="issue",a={comment:"comment",worklog:"worklog",description:"description",environment:"environment",customfield:"customfield",issue:n},i="DESC",r={FILENAME:"FILENAME",CREATED:"CREATED",FILESIZE:"FILESIZE",MIMETYPE:"MIMETYPE"},o=r.CREATED},"./src/packages/issue/attachments/issue-attachments-base/src/services/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return g}));var n={};s.r(n),s.d(n,"setIsDownloading",(function(){return b})),s.d(n,"setIsFetching",(function(){return c})),s.d(n,"setOrderDirection",(function(){return l})),s.d(n,"setOrderField",(function(){return u})),s.d(n,"setStartAt",(function(){return p})),s.d(n,"setTotalCount",(function(){return d})),s.d(n,"setVisibleAttachments",(function(){return m}));var a=s("./node_modules/react-sweet-state/lib/esm/store/create.js");function i(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function r(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?i(Object(s),!0).forEach((function(t){o(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):i(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const c=e=>({setState:t})=>{t({isFetching:e})},l=e=>({getState:t,setState:s})=>{const{meta:n}=t();s({meta:r(r({},n),{},{orderDirection:e})})},u=e=>({getState:t,setState:s})=>{const{meta:n}=t();s({meta:r(r({},n),{},{orderField:e})})},d=e=>({setState:t})=>{t({totalCount:e})},p=e=>({getState:t,setState:s})=>{const{meta:n}=t();s({meta:r(r({},n),{},{startAt:e})})},m=e=>({setState:t})=>{t({visibleAttachments:e})},b=(e,t)=>({setState:e})=>{e({isDownloading:t})};var f=s("./src/packages/issue/attachments/issue-attachments-base/src/services/constants.js");const g=Object(a.a)({name:"issue-attachments",initialState:{isDownloading:!1,isFetching:!1,totalCount:void 0,visibleAttachments:[],meta:{orderDirection:f.c,orderField:f.d,startAt:0}},actions:n})},"./src/packages/issue/attachments/issue-attachments-base/src/services/messages.js":function(e,t,s){"use strict";var n=s("./node_modules/react-intl/lib/index.es.js");t.a=Object(n.defineMessages)({gotIt:{id:"issue-attachments-base.services.got-it",defaultMessage:"Got it"},tryAgain:{id:"issue-attachments-base.services.try-again",defaultMessage:"Try again"},downloadStartTitle:{id:"issue-attachments-base.services.download-start-title",defaultMessage:"Downloading attachments"},downloadStartDescription:{id:"issue-attachments-base.services.download-start-description",defaultMessage:"This might take a while. When we\u2019re done, your attachments will be in a zip file on your device."},downloadFailedTitle:{id:"issue-attachments-base.services.download-failed-title",defaultMessage:"We couldn\u2019t download your attachments"},downloadFailedDescription:{id:"issue-attachments-base.services.download-failed-description",defaultMessage:"We didn\u2019t finish downloading your attachments for {issueKey}. Check your connection and then try again."},downloadFailedExceedFileSizeDescription:{id:"issue-attachments-base.services.download-failed-exceed-file-size-description",defaultMessage:"The total size of {issueKey}'s attachments is too large to download. Try downloading each attachment individually."},deleteFailedTitle:{id:"issue-attachments-base.services.delete-failed-title",defaultMessage:"Attachment could not be deleted"},deleteFailedDescription:{id:"issue-attachments-base.services.delete-failed-description",defaultMessage:"There was a connection problem and the attachment was not successfully deleted. Try checking your network connection."}})},"./src/packages/issue/attachments/issue-attachments-table/src/ui/empty/assets/cloud.svg":function(e,t,s){e.exports=s.p+"assets/cloud.45c69da8a128cc239c19035695bab30d.8.svg"},"./src/packages/issue/attachments/issue-attachments-table/src/ui/error/assets/search.svg":function(e,t,s){e.exports=s.p+"assets/search.1cc781b7e8848ea0f1d2dc40004f854f.8.svg"},"./src/packages/issue/changeboarding/src/ui/main.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/onboarding-wrapper/index.js");const r=e=>e.currentStep===e.totalSteps,o=e=>e.currentStep===e.totalSteps-1;var c=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js");const l=()=>Object(c.b)("issue.details.opt-back-in",!1);var u=s("./node_modules/@atlaskit/onboarding/dist/es2019/components/Spotlight.js"),d=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js"),p=s("./node_modules/react-intl/lib/index.es.js"),m=Object(p.defineMessages)({next:{id:"issue-changeboarding.simple-spotlight.next",defaultMessage:"Next"},done:{id:"issue-changeboarding.simple-spotlight.done",defaultMessage:"Done"}});const b=({context:e,dialogWidth:t=37.5*d.e,name:s,targetReplacement:n,targetNode:i,children:r,intl:c,image:p,placement:b,onPrimaryActionClick:f,getAdditionalActions:g,targetBgColor:h="white",targetRadius:y=d.a,pulse:O=!0})=>a.a.createElement(u.a,{actions:[{onClick:f,text:c.formatMessage(o(e)?m.done:m.next)},...l()&&g&&g(e.currentStep+1,s)||[]],dialogPlacement:b,key:s,target:s,targetReplacement:n,targetNode:i,actionsBeforeElement:`${e.currentStep+1}/${e.totalSteps}`,dialogWidth:t,image:p,targetBgColor:h,targetRadius:y,pulse:O},r);b.displayName="SimpleSpotlight";var f=b;const g=({isTourActive:e,recipe:t,recipeContext:s,onTourEnd:o,onAdvanceStep:c,intl:u})=>{const d=t.stepsForContext(s),[p,m]=Object(n.useState)(0),b=Object(n.useMemo)(()=>({currentStep:p,totalSteps:d.length,advanceStep:()=>m(e=>(null==c||c(e,d[e]),e+1))}),[m,d,p,c]);if(Object(n.useEffect)(()=>{r(b)&&(m(0),o(s))},[o,s,b]),!e||r(b))return null;const g=d[b.currentStep],h=t.steps[g](s),y=l()&&h.content||u.formatMessage(h.message),O=a.a.createElement(f,{context:b,intl:u,onPrimaryActionClick:b.advanceStep,name:g,placement:h.placement,targetReplacement:h.targetReplacement,targetNode:h.targetNode,image:h.image,dialogWidth:h.dialogWidth,getAdditionalActions:h.additionalAction},y);return a.a.createElement(i.a,{shouldRender:e},O)};g.displayName="Changeboarding";t.a=g},"./src/packages/issue/epic-color/src/common/constants.js":function(e,t,s){"use strict";s.d(t,"d",(function(){return r})),s.d(t,"k",(function(){return o})),s.d(t,"j",(function(){return c})),s.d(t,"h",(function(){return l})),s.d(t,"i",(function(){return u})),s.d(t,"g",(function(){return d})),s.d(t,"e",(function(){return p})),s.d(t,"f",(function(){return m})),s.d(t,"c",(function(){return b})),s.d(t,"b",(function(){return f})),s.d(t,"a",(function(){return g}));var n=s("./node_modules/lodash/invert.js"),a=s.n(n),i=s("./node_modules/@atlaskit/theme/dist/es2019/index.js");const r={PURPLE:i.a.P200,BLUE:i.a.B200,GREEN:i.a.G200,TEAL:i.a.T200,YELLOW:i.a.Y200,ORANGE:i.a.R200,GREY:i.a.N200,DARK_PURPLE:i.a.P400,DARK_BLUE:i.a.B400,DARK_GREEN:i.a.G400,DARK_TEAL:i.a.T400,DARK_YELLOW:i.a.Y400,DARK_ORANGE:i.a.R400,DARK_GREY:i.a.N700},o=a()(r),c={purple:"PURPLE",dark_purple:"DARK_PURPLE",blue:"BLUE",dark_blue:"DARK_BLUE",green:"GREEN",dark_green:"DARK_GREEN",teal:"TEAL",dark_teal:"DARK_TEAL",yellow:"YELLOW",dark_yellow:"DARK_YELLOW",orange:"ORANGE",dark_orange:"DARK_ORANGE",grey:"GREY",dark_grey:"DARK_GREY"},l=a()(c),u={"ghx-label-1":"DARK_GREY","ghx-label-2":"DARK_YELLOW","ghx-label-3":"YELLOW","ghx-label-4":"DARK_BLUE","ghx-label-5":"DARK_TEAL","ghx-label-6":"GREEN","ghx-label-7":"PURPLE","ghx-label-8":"DARK_PURPLE","ghx-label-9":"ORANGE","ghx-label-10":"BLUE","ghx-label-11":"TEAL","ghx-label-12":"GREY","ghx-label-13":"DARK_GREEN","ghx-label-14":"DARK_ORANGE"},d=a()(u),p={color_1:"DARK_GREY",color_2:"DARK_YELLOW",color_3:"YELLOW",color_4:"DARK_BLUE",color_5:"DARK_TEAL",color_6:"GREEN",color_7:"PURPLE",color_8:"DARK_PURPLE",color_9:"ORANGE",color_10:"BLUE",color_11:"TEAL",color_12:"GREY",color_13:"DARK_GREEN",color_14:"DARK_ORANGE"},m=a()(p),b={"ghx-label-1":"color_1","ghx-label-2":"color_2","ghx-label-3":"color_3","ghx-label-4":"color_4","ghx-label-5":"color_5","ghx-label-6":"color_6","ghx-label-7":"color_7","ghx-label-8":"color_8","ghx-label-9":"color_9","ghx-label-10":"color_10","ghx-label-11":"color_11","ghx-label-12":"color_12","ghx-label-13":"color_13","ghx-label-14":"color_14"},f={color_1:"grey",color_2:"yellow",color_3:"yellowLight",color_4:"blue",color_5:"teal",color_6:"greenLight",color_7:"purpleLight",color_8:"purple",color_9:"redLight",color_10:"blueLight",color_11:"tealLight",color_12:"greyLight",color_13:"green",color_14:"red"},g={PURPLE:{primary:i.a.P200,secondary:i.a.P500,text:i.a.P500,textBackground:i.a.P50,border:i.a.P400,line:i.a.P300,primaryGradient:i.a.P75,hasContrastSecondaryGradient:!0},BLUE:{primary:i.a.B200,secondary:i.a.B500,text:i.a.B500,textBackground:i.a.B50,border:i.a.B400,line:i.a.B300,primaryGradient:i.a.B75,hasContrastSecondaryGradient:!0},GREEN:{primary:i.a.G200,secondary:i.a.G500,text:i.a.G500,textBackground:i.a.G50,border:i.a.G400,line:i.a.G300,primaryGradient:i.a.G75,hasContrastSecondaryGradient:!0},TEAL:{primary:i.a.T200,secondary:i.a.T500,text:i.a.T500,textBackground:i.a.T50,border:i.a.T400,line:i.a.T300,primaryGradient:i.a.T75,hasContrastSecondaryGradient:!0},YELLOW:{primary:i.a.Y200,secondary:i.a.Y500,text:i.a.Y500,textBackground:i.a.Y50,border:i.a.Y400,line:i.a.Y300,primaryGradient:i.a.Y75,hasContrastSecondaryGradient:!0},ORANGE:{primary:i.a.R200,secondary:i.a.R500,text:i.a.R500,textBackground:i.a.R50,border:i.a.R400,line:i.a.R300,primaryGradient:i.a.R75,hasContrastSecondaryGradient:!0},GREY:{primary:i.a.N200,secondary:i.a.N500,text:i.a.N500,textBackground:i.a.N30,border:i.a.N700,line:i.a.N500,primaryGradient:i.a.N50,hasContrastSecondaryGradient:!0},DARK_PURPLE:{primary:i.a.P400,secondary:i.a.P200,text:i.a.N0,textBackground:i.a.P400,border:i.a.P100,line:i.a.P300,primaryGradient:i.a.P100,hasContrastSecondaryGradient:!1},DARK_BLUE:{primary:i.a.B400,secondary:i.a.B200,text:i.a.N0,textBackground:i.a.B400,border:i.a.B200,line:i.a.B100,primaryGradient:i.a.B100,hasContrastSecondaryGradient:!1},DARK_GREEN:{primary:i.a.G400,secondary:i.a.G200,text:i.a.N0,textBackground:i.a.G400,border:i.a.G200,line:i.a.G300,primaryGradient:i.a.G200,hasContrastSecondaryGradient:!1},DARK_TEAL:{primary:i.a.T400,secondary:i.a.T200,text:i.a.N0,textBackground:i.a.T400,border:i.a.T200,line:i.a.T300,primaryGradient:i.a.T100,hasContrastSecondaryGradient:!1},DARK_YELLOW:{primary:i.a.Y400,secondary:i.a.Y200,text:i.a.N0,textBackground:i.a.Y400,border:i.a.Y200,line:i.a.Y300,primaryGradient:i.a.Y100,hasContrastSecondaryGradient:!1},DARK_ORANGE:{primary:i.a.R400,secondary:i.a.R200,text:i.a.N0,textBackground:i.a.R400,border:i.a.R100,line:i.a.R300,primaryGradient:i.a.R100,hasContrastSecondaryGradient:!1},DARK_GREY:{primary:i.a.N700,secondary:i.a.N300,text:i.a.N0,textBackground:i.a.N500,border:i.a.N100,line:i.a.N500,primaryGradient:i.a.N100,hasContrastSecondaryGradient:!1}}},"./src/packages/issue/epic-color/src/common/types.js":function(e,t,s){"use strict";s.d(t,"d",(function(){return n})),s.d(t,"c",(function(){return a})),s.d(t,"e",(function(){return i})),s.d(t,"b",(function(){return r})),s.d(t,"a",(function(){return o}));const n="PURPLE",a={PURPLE:n,DARK_PURPLE:"DARK_PURPLE",BLUE:"BLUE",DARK_BLUE:"DARK_BLUE",GREEN:"GREEN",DARK_GREEN:"DARK_GREEN",TEAL:"TEAL",DARK_TEAL:"DARK_TEAL",YELLOW:"YELLOW",DARK_YELLOW:"DARK_YELLOW",ORANGE:"ORANGE",DARK_ORANGE:"DARK_ORANGE",GREY:"GREY",DARK_GREY:"DARK_GREY"},i={SERVER_PURPLE:"purple",SERVER_DARK_PURPLE:"dark_purple",SERVER_BLUE:"blue",SERVER_DARK_BLUE:"dark_blue",SERVER_GREEN:"green",SERVER_DARK_GREEN:"dark_green",SERVER_TEAL:"teal",SERVER_DARK_TEAL:"dark_teal",SERVER_YELLOW:"yellow",SERVER_DARK_YELLOW:"dark_yellow",SERVER_ORANGE:"orange",SERVER_DARK_ORANGE:"dark_orange",SERVER_GREY:"grey",SERVER_DARK_GREY:"dark_grey"},r={GHX_LABEL_1:"ghx-label-1",GHX_LABEL_2:"ghx-label-2",GHX_LABEL_3:"ghx-label-3",GHX_LABEL_4:"ghx-label-4",GHX_LABEL_5:"ghx-label-5",GHX_LABEL_6:"ghx-label-6",GHX_LABEL_7:"ghx-label-7",GHX_LABEL_8:"ghx-label-8",GHX_LABEL_9:"ghx-label-9",GHX_LABEL_10:"ghx-label-10",GHX_LABEL_11:"ghx-label-11",GHX_LABEL_12:"ghx-label-12",GHX_LABEL_13:"ghx-label-13",GHX_LABEL_14:"ghx-label-14"},o={AGILE_COLOR_1:"color_1",AGILE_COLOR_2:"color_2",AGILE_COLOR_3:"color_3",AGILE_COLOR_4:"color_4",AGILE_COLOR_5:"color_5",AGILE_COLOR_6:"color_6",AGILE_COLOR_7:"color_7",AGILE_COLOR_8:"color_8",AGILE_COLOR_9:"color_9",AGILE_COLOR_10:"color_10",AGILE_COLOR_11:"color_11",AGILE_COLOR_12:"color_12",AGILE_COLOR_13:"color_13",AGILE_COLOR_14:"color_14"}},"./src/packages/issue/epic-color/src/common/utils.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return u})),s.d(t,"c",(function(){return d})),s.d(t,"a",(function(){return p})),s.d(t,"k",(function(){return m})),s.d(t,"h",(function(){return b})),s.d(t,"f",(function(){return f})),s.d(t,"j",(function(){return g})),s.d(t,"i",(function(){return h})),s.d(t,"e",(function(){return y})),s.d(t,"d",(function(){return O})),s.d(t,"g",(function(){return E}));var n=s("./node_modules/lodash/invert.js"),a=s.n(n),i=s("./src/packages/issue/epic-color/src/common/constants.js"),r=s("./src/packages/issue/epic-color/src/common/types.js");function o(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function c(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?o(Object(s),!0).forEach((function(t){l(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function l(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const u=e=>{if(null==e)return r.c.PURPLE;if(e in r.c)return e;const t=i.j[e];if(t)return t;const s=i.e[e];if(s)return s;const n=i.i[e];return n||r.c.PURPLE},d=e=>{if(null==e)return r.e.SERVER_PURPLE;if(e in r.e)return e;const t=i.h[e];if(t)return t;const s=i.h[i.e[e]];if(s)return s;const n=i.h[i.i[e]];return n||r.e.SERVER_PURPLE},p=e=>{if(null===e)return i.g[r.c.PURPLE];if(e in r.b)return e;const t=i.g[e];if(t)return t;const s=i.g[i.j[e]];if(s)return s;const n=i.g[i.e[e]];return n||i.g[r.c.PURPLE]},m=(e,t)=>{const s=c(c({},i.a),t);return(t?Object.keys(t).concat(Object.keys(r.c)):Object.keys(r.c)).reduce((t,n)=>c(c({},t),{},{[n]:e(s[n])}),{})},b=e=>i.d[e]||i.d.PURPLE,f=e=>a()(i.d)[e]||"PURPLE",g=e=>""!==e&&null!=e&&i.j[e]?i.j[e]:"PURPLE",h=e=>i.h[e],y=e=>""!==e&&null!=e&&i.i[e]?i.i[e]:"PURPLE",O=e=>i.g[e],j=m(e=>e.primary),E=()=>[{label:"purple",value:j[r.c.PURPLE]},{label:"blue",value:j[r.c.BLUE]},{label:"green",value:j[r.c.GREEN]},{label:"teal",value:j[r.c.TEAL]},{label:"yellow",value:j[r.c.YELLOW]},{label:"orange",value:j[r.c.ORANGE]},{label:"grey",value:j[r.c.GREY]},{label:"darkPurple",value:j[r.c.DARK_PURPLE]},{label:"darkBlue",value:j[r.c.DARK_BLUE]},{label:"darkGreen",value:j[r.c.DARK_GREEN]},{label:"darkTeal",value:j[r.c.DARK_TEAL]},{label:"darkYellow",value:j[r.c.DARK_YELLOW]},{label:"darkOrange",value:j[r.c.DARK_ORANGE]},{label:"darkGrey",value:j[r.c.DARK_GREY]}]},"./src/packages/issue/fields/approval-panel/src/services/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s("./src/packages/issue/fields/field-base/src/services/field-config-service/main.js"),a=s("./src/packages/issue/fields/field-base/src/services/edit-field-service/main.js");const i=({issueKey:e})=>{const[t]=Object(n.a)(e,"servicedesk-approvals"),[{value:s,error:i},{saveValue:r,resetError:o}]=Object(a.a)({fieldKey:"servicedesk-approvals",issueKey:e,fieldType:"servicedesk-approvals",initialValue:null});return[{value:s,error:i,fieldConfig:t},{saveValue:r,resetError:o}]}},"./src/packages/issue/fields/assignee/src/common/ui/view-mode/main.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-intl/lib/index.es.js"),r=s("./node_modules/@atlaskit/avatar--next/dist/es2019/Avatar.js"),o=s("./node_modules/@atlaskit/tooltip/dist/es2019/Tooltip.js"),c=s("./src/packages/issue/fields/assignee/src/common/utils.js"),l=Object(i.defineMessages)({assigneeTooltip:{id:"issue-field-assignee.common.view-mode.assignee-tooltip",defaultMessage:"Assignee: {name}"}}),u=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),d=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const p=u.default.div(["width:","px;height:","px;padding:0;box-sizing:border-box;cursor:default;"],3.5*d.e,3.5*d.e),m=({value:e,intl:t})=>{const s=Object(c.a)(t),n=e||s,i="__UNASSIGNED_ID__"===n.accountId?n.displayName:t.formatMessage(l.assigneeTooltip,{name:n.displayName}),u=Object(c.b)(n);return a.a.createElement(p,null,a.a.createElement(o.a,{content:i},a.a.createElement(r.a,{size:"small",src:u,name:i,borderColor:"transparent"})))};m.displayName="AssigneePickerView";t.a=Object(i.injectIntl)(m)},"./src/packages/issue/fields/assignee/src/common/utils.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return a})),s.d(t,"d",(function(){return i})),s.d(t,"c",(function(){return r})),s.d(t,"b",(function(){return o})),s.d(t,"e",(function(){return c}));var n=s("./src/packages/issue/fields/assignee/src/messages.js");const a=({formatMessage:e})=>({accountId:"__UNASSIGNED_ID__",displayName:e(n.a.unassignedOption),avatarUrls:{}}),i=({accountId:e,displayName:t,avatarUrls:s})=>({id:e||"",name:t,avatarUrl:s["48x48"]}),r=({id:e,name:t,avatarUrl:s})=>({accountId:e,displayName:t,avatarUrls:{"48x48":s}}),o=({avatarUrls:e})=>e["48x48"],c=(e,t,s)=>({accountId:e,displayName:t,avatarUrls:{"48x48":s}})},"./src/packages/issue/fields/assignee/src/messages.js":function(e,t,s){"use strict";var n=s("./node_modules/react-intl/lib/index.es.js");t.a=Object(n.defineMessages)({unassignedOption:{id:"issue-field-assignee.unassigned-option",defaultMessage:"Unassigned"},assignToMe:{id:"issue-field-assignee.assign-to-me",defaultMessage:"Assign to me"},searchForAssignee:{id:"issue-field-assignee.search-for-assignee",defaultMessage:"Search for assignee"}})},"./src/packages/issue/fields/assignee/src/services/assignee-options/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return l}));var n=s("./src/packages/platform/services/user/src/components/index.js"),a=s("./src/packages/issue/fields/assignee/src/common/utils.js"),i=s("./src/packages/issue/fields/assignee/src/messages.js");function r(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function o(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?r(Object(s),!0).forEach((function(t){c(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):r(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function c(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const l=(e,t,s,r)=>{const c=Object(a.a)(s),l=Object(a.d)(e||c),[{data:u}]=Object(n.c)(),d=u?o(o({},Object(a.d)(u)),{},{publicName:s.formatMessage(i.a.assignToMe)}):null,p=void 0===r||""===r,m=p?Boolean(null==e?void 0:e.accountId):c.displayName.toLowerCase().startsWith((r||"").toLowerCase()),b=null!==d&&l.id===d.id,f=t.some(e=>null!==d&&e.accountId===d.id),g=p?!b&&f:f,h=[...m?[Object(a.d)(c)]:[],...g&&null!==d?[d]:[],...t.filter(e=>!(p&&e.accountId===l.id||null!==d&&e.accountId===d.id)).map(a.d)];return[l,h]}},"./src/packages/issue/fields/assignee/src/services/use-assignee-field/index.js":function(e,t,s){"use strict";var n=s("./node_modules/lodash/get.js"),a=s.n(n),i=s("./src/packages/issue/fields/field-base/src/services/field-config-service/main.js"),r=s("./src/packages/issue/fields/field-base/src/services/edit-field-service/main.js"),o=s("./src/packages/platform/services/issue/src/model/issue-system-fields.js");t.a=({issueKey:e,onSuccess:t})=>{const s=o.c,[n]=Object(i.a)(e,s),c=a()(n,"schema.type","user"),[{value:l,error:u},{saveValue:d,resetError:p}]=Object(r.a)({fieldKey:s,issueKey:e,fieldType:c,initialValue:null,onSuccess:t});return[{value:l,error:u,fieldConfig:n},{saveValue:d,resetError:p}]}},"./src/packages/issue/fields/assignee/src/services/users-query/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),i=s("./src/packages/platform/utils/fetch/src/utils/as-json.js");t.a=e=>{const[t,s]=Object(n.useState)([]),[r,o]=Object(n.useState)(void 0),[c,l]=Object(n.useState)(!1),u=Object(n.useRef)(""),d=Object(n.useCallback)((t="")=>{if(["",null,void 0].includes(e))return Promise.resolve([]);const n=`${e||""}${t}`;return l(!0),u.current=t,r&&o(void 0),Object(i.a)(n).then(e=>{t===u.current&&s(e)}).catch(e=>{t===u.current&&o(e),a.i.safeError("issue.fields.assigne","Failed to fetch users",e)}).finally(()=>l(!1))},[e,r]);return[{data:t,error:r,loading:c},d]}},"./src/packages/issue/fields/assignee/src/ui/async.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));s("./node_modules/react/index.js");var n=s("./node_modules/react-async-component/commonjs/index.js"),a=(s("./node_modules/react-loosely-lazy/lib/esm/index.js"),s("./src/packages/platform/ui/error-boundary/src/main.js"),s("./src/packages/issue/fields/assignee/src/common/ui/view-mode/main.js"));const i=Object(n.asyncComponent)({resolve:()=>s.e("async-assignee-inline-edit-view").then(s.bind(null,"./src/packages/issue/fields/assignee/src/ui/main.js")),name:"AsyncIssueAssigneeField",LoadingComponent:a.a,ErrorComponent:a.a})},"./src/packages/issue/fields/assignee/src/ui/main.js":function(e,t,s){"use strict";s.r(t);var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./src/packages/issue/fields/field-base/src/services/field-config-service/main.js"),r=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/analytics-event-to-props.js"),o=s("./src/packages/platform/services/issue/src/model/issue-system-fields.js"),c=s("./src/packages/issue/fields/assignee/src/common/ui/view-mode/main.js"),l=s("./src/packages/issue/fields/assignee/src/services/use-assignee-field/index.js"),u=s("./node_modules/react-intl/lib/index.es.js"),d=s("./node_modules/lodash/debounce.js"),p=s.n(d),m=s("./node_modules/@atlaskit/user-picker/dist/es2019/components/PopupUserPicker.js"),b=s("./src/packages/issue/fields/assignee/src/common/utils.js"),f=s("./src/packages/issue/fields/assignee/src/messages.js"),g=s("./src/packages/issue/fields/assignee/src/services/assignee-options/index.js"),h=s("./src/packages/issue/fields/assignee/src/services/users-query/index.js"),y=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),O=s("./node_modules/@atlaskit/theme/dist/es2019/index.js");const j=y.default.button(["display:block;background:transparent;border:0;outline:0;padding:0;margin:0;border-radius:50%;box-shadow:0 0 0 2px transparent;& > div{cursor:pointer;}span:first-of-type::after{opacity:",";background-color:",";}&:active{box-shadow:0 0 0 2px transparent !important;}&:focus,&:focus-within{box-shadow:0 0 0 2px ",";}&:hover span:first-of-type::after{opacity:1;background-color:",";}"],({active:e})=>e?1:0,({active:e})=>e?"rgba(9, 30, 66, 0.36)":"transparent",O.a.B100,"rgba(9, 30, 66, 0.36)"),E=({autoCompleteUrl:e,value:t=null,onFocus:s,onBlur:i,onChange:r,intl:o,searchDebounceTimeout:l=300})=>{const u=Object(n.useRef)({previousQuery:void 0}).current,[{data:d,loading:y},O]=Object(h.a)(e||""),[E,v]=Object(g.a)(t,d,o,u.previousQuery),k=Object(n.useMemo)(()=>p()(e=>{e!==u.previousQuery&&O(e),u.previousQuery=e},l),[O,l,u.previousQuery]),w=Object(n.useCallback)(e=>{null==s||s(e),d&&d.length||O()},[s,d,O]),S=Object(n.useCallback)(e=>{null==i||i(e),u.previousQuery=void 0},[i,u]),I=Object(n.useCallback)((e,t)=>{if(!e||Array.isArray(e))return;const s="__UNASSIGNED_ID__"===e.id?null:d.find(({accountId:t})=>t===e.id)||Object(b.c)(e);null==r||r(s,t)},[r,d]);return a.a.createElement(m.a,{fieldId:null,placeholder:o.formatMessage(f.a.searchForAssignee),isLoading:y,options:v,target:({ref:e,isOpen:s})=>a.a.createElement(j,{innerRef:e,active:s},a.a.createElement(c.a,{value:t})),value:E,onFocus:w,onBlur:S,onChange:I,onInputChange:k})};E.displayName="AssigneePickerEdit";var v=Object(u.injectIntl)(E);function k(){return(k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function w(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const S=Object(r.a)("assigneePickerEdit",{onChange:"changed"})(v);t.default=e=>{let{issueKey:t,onChange:s}=e,r=w(e,["issueKey","onChange"]);const[u]=Object(i.a)(t,o.c),[{value:d},{saveValue:p}]=Object(l.a)({issueKey:t}),{autoCompleteUrl:m,isEditable:b=!1}=u||{},f=Object(n.useCallback)((e,t,n)=>{null==s||s(e,t),p(e,null,n)},[s,p]);return b?a.a.createElement(S,k({autoCompleteUrl:m,value:d,onChange:f},r)):a.a.createElement(c.a,{value:d})}},"./src/packages/issue/fields/cascading-select-custom-field/src/common/utils.js":function(e,t,s){"use strict";function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function a(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){i(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}s.d(t,"a",(function(){return r})),s.d(t,"b",(function(){return o})),s.d(t,"c",(function(){return c})),s.d(t,"d",(function(){return l}));const r=e=>{if(!e)return null;const{id:t,value:s,child:n}=e;return{value:t,label:s,child:n&&{value:n.id,label:n.value}}},o=e=>e.map(({id:e,value:t})=>({value:e,label:t})),c=e=>e.reduce((e,{id:t,children:s})=>a(a({},e),{},{[t]:s?o(s):[]}),{}),l=e=>{if(!e)return null;const{label:t,value:s}=e,n=e.child||void 0;return{id:s,value:t,child:n&&{id:n.value,value:n.label}}}},"./src/packages/issue/fields/cascading-select-custom-field/src/ui/cascading-select-view/main.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-intl/lib/index.es.js"),r=s("./node_modules/@atlaskit/form--next/dist/es2019/Messages.js"),o=s("./node_modules/@atlaskit/select/dist/esm/Select.js"),c=Object(i.defineMessages)({noOptionsSelected:{id:"issue-field-cascading-select.cascading-select-view.no-options-selected",defaultMessage:"None"},errorMessage:{id:"issue-field-cascading-select.cascading-select-view.error-message",defaultMessage:"The value could not be saved"}}),l=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),u=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const d=l.default.div(["display:flex;flex-direction:",";"],e=>e.areOptionsOnSameRow?"row":"column"),p=l.default.div(["flex-basis:0;flex-grow:1;"]),m=Object(l.default)(p)(["margin-top:",";margin-left:",";"],e=>e.areOptionsOnSameRow?0:`${u.e/2}px`,e=>e.areOptionsOnSameRow?`${u.e/2}px`:0),b=(e,t)=>!e||0===t.length;function f(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function g(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?f(Object(s),!0).forEach((function(t){h(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):f(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function h(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}t.a=Object(i.injectIntl)(e=>{const{value:t,allowedValues:s,allowedChildValues:i,onChange:l,isInvalid:u=!1,areOptionsOnSameRow:f=!1,intl:h,autoFocus:y=!0}=e,[O,j]=(e=>{if(!e)return[null,null];const{label:t,value:s}=e;return[{label:t,value:s},e.child||null]})(t),[E,v]=Object(n.useState)(O),[k,w]=Object(n.useState)(j),[S,I]=Object(n.useState)(O&&i[O.value]||[]),[C,T]=Object(n.useState)(b(t,S)),P=Object(n.useRef)(null);return a.a.createElement(a.a.Fragment,null,u&&a.a.createElement(r.a,null,h.formatMessage(c.errorMessage)),a.a.createElement(d,{areOptionsOnSameRow:f},a.a.createElement(p,null,a.a.createElement(o.a,{defaultValue:O,value:E,options:s,onChange:(e,{action:s},n)=>{switch(w(null),s){case"select-option":l(e,null,n),v(e),I(i[e.value]||[]),T(b(t,S)),P&&P.current&&P.current.focus();break;case"clear":l(null,null,n),v(null),I([])}},isClearable:!0,autoFocus:y,openMenuOnFocus:!0,placeholder:h.formatMessage(c.noOptionsSelected)})),S.length>0&&a.a.createElement(m,{areOptionsOnSameRow:f},a.a.createElement(o.a,{defaultValue:j,value:k,options:S,onChange:(e,{action:t},s)=>{switch(t){case"select-option":l(g(g({},E),{},{child:e}),null,s),w(e);break;case"clear":l(E,null,s),w(null)}},isClearable:!0,autoFocus:C,openMenuOnFocus:!0,placeholder:h.formatMessage(c.noOptionsSelected),ref:P}))))})},"./src/packages/issue/fields/components/error-flag/src/main.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./src/packages/platform/utils/fetch/src/utils/errors.js"),r=s("./src/packages/platform/ui/flags/src/index.js");const o=({error:e,title:t,description:s})=>{if(!e)return null;if(e instanceof i.a){const n=e.message||e.errors&&e.errors[0]&&e.errors[0].error||s;return(a.a.createElement(r.FlagRenderer,{flag:{type:"warning",title:t,description:n}}))}return(a.a.createElement(r.FlagRenderer,{flag:{type:"error",title:t,description:s}}))};o.displayName="ErrorFlag"},"./src/packages/issue/fields/components/field-heading/src/styled.js":function(e,t,s){"use strict";s.d(t,"d",(function(){return u})),s.d(t,"g",(function(){return d})),s.d(t,"h",(function(){return m})),s.d(t,"c",(function(){return f})),s.d(t,"f",(function(){return g})),s.d(t,"e",(function(){return h})),s.d(t,"b",(function(){return O})),s.d(t,"a",(function(){return j}));var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),i=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js"),r=s("./src/packages/issue/fields/components/field-pin/src/styled.js");const o=Object(n.keyframes)(["from{opacity:0;}to{opacity:1;}"]),c=Object(n.keyframes)(["from{opacity:1;}to{opacity:0;}"]),l=Object(n.css)(["white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"]),u=n.default.div(["display:flex;flex-wrap:wrap;margin-bottom:","px;word-break:break-word;"],2*i.e),d=n.default.div(["& > div > div > div > div > div > div{min-height:","px;}& > div > div > div > div > div > div > div{"," ","}flex-grow:1;width:","%;box-sizing:border-box;"],4*i.e,e=>e.isEditing?"":`padding: 0 0 0 ${.75*i.e}px;`,e=>!e.isEditing&&e.fixedHeight?`height: ${4*i.e}px`:"",66.67),p=Object(n.css)(["","{visibility:hidden;animation:"," 0.15s linear forwards;}:hover ","{visibility:visible;animation:"," 0.15s linear forwards;}"],r.a,c,r.a,o),m=Object(n.css)([""," position:relative;flex-grow:1;box-sizing:border-box;padding-right:","px;min-width:","px;width:","%;padding-top:","px;max-width:","px;line-height:1;"],p,3*i.e,15*i.e,33.33,i.e,22.5*i.e),b=Object(n.css)([""," margin-bottom:","px !important;display:flex;align-items:center;"],p,.5*i.e),f=n.default.h2(["box-sizing:border-box;font-weight:500;",";color:",";"],a.c.h200(),a.a.N800),g=n.default.h2(["font-weight:500;",";",";color:",";"],l,a.c.h200(),a.a.N800),h=n.default.div(["",""],b),y=Object(n.css)(["","{display:inline;}","{display:inline;position:absolute;"],f,r.a),O=n.default.div([""," ",""],m,y),j=n.default.div(["height:","px;margin-left:","px;margin-right:-","px;margin-top:-","px;position:relative;"],3*i.e,.25*i.e,.25*i.e,.5*i.e);i.e,i.e},"./src/packages/issue/fields/components/field-pin/src/index.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return k})),s.d(t,"a",(function(){return w}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-redux/es/index.js"),r=s("./src/packages/platform/ui/flags/src/index.js"),o=s("./node_modules/@atlaskit/analytics-next--current/dist/esm/useAnalyticsEvents.js"),c=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),l=s("./node_modules/@atlaskit/icon/cjs/index.js"),u=s.n(l),d=s("./node_modules/@atlaskit/tooltip/dist/es2019/Tooltip.js"),p=s("./src/packages/platform/controllers/intl/src/index.js");const m=()=>a.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},a.a.createElement("path",{fill:"currentColor",d:"M5.48121736,7.00404408 L7.59617451,4.89248498 C7.83826329,4.65078605 7.83826329,4.2589269 7.59617451,4.01722797 L7.45004745,3.8713518 C7.28862892,3.71022438 7.28862892,3.44898234 7.45004745,3.28784713 L8.61890792,2.12084557 C8.78032645,1.95971814 9.04199766,1.95971814 9.20333816,2.12084557 L13.8789361,6.78886738 C14.0403546,6.94999481 14.0403546,7.21123684 13.8789361,7.37239542 L12.7100756,8.53937361 C12.5486571,8.70053219 12.2869859,8.70053219 12.1255674,8.53937361 L11.9795183,8.39348187 C11.7374295,8.15178294 11.3449227,8.15178294 11.102834,8.39348187 L8.9878534,10.5050565 C8.74576463,10.7467555 8.74576463,11.1385523 8.9878534,11.3802512 L9.57236166,11.9638182 C9.73370217,12.1248989 9.73370217,12.3861487 9.57236166,12.5473073 L8.40342317,13.7142855 C8.24208266,13.8754441 7.98041145,13.8754441 7.81899293,13.7142855 L5.48655377,11.3856258 L2.99050379,13.8776251 C2.91356278,13.9544266 2.8093702,13.9978903 2.70055118,13.9985135 L2.42647516,14 C2.20319644,14.0012397 2.01932444,13.8251258 2.0112106,13.6023547 L2.00027253,13.3019252 C1.99610639,13.187346 2.03985869,13.076272 2.12104386,12.9951864 L4.60989281,10.5103532 L2.26677303,8.17102227 C2.10538571,8.00986368 2.10538571,7.74861386 2.26677303,7.58753317 L3.43565691,6.42050825 C3.59705203,6.25938082 3.85871544,6.25938082 4.02010275,6.42050825 L4.6045486,7.00404408 C4.84663737,7.245743 5.23912858,7.245743 5.48121736,7.00404408 Z"}));m.displayName="PinFilled";var b=m;const f=()=>a.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},a.a.createElement("path",{fill:"currentColor",d:"M3.58176938,7.87928392 L8.11122851,12.4014141 L8.25734637,12.2555315 L8.18428744,12.1825901 C7.49835823,11.4978426 7.49835823,10.387565 8.18428744,9.70273982 L10.299184,7.5911928 C10.8579797,7.03331193 11.6995968,6.9299201 12.363196,7.28100178 L12.563933,7.08062671 L8.9111421,3.43373045 L8.71048291,3.63410553 C9.06208387,4.29665994 8.95852537,5.13692246 8.39972959,5.6948111 L6.28483307,7.80634258 C5.59890386,8.4911678 4.48684425,8.4911678 3.80093838,7.80634258 L3.72787945,7.73340123 L3.58176938,7.87928392 Z M5.48118484,7.00402665 L7.59615917,4.8924874 C7.83821064,4.65079444 7.83821064,4.25893086 7.59615917,4.01723789 L7.45004131,3.87135521 C7.28867366,3.71023174 7.28867366,3.44898677 7.45004131,3.28785554 L8.61890638,2.12084842 C8.78035183,1.95971719 9.04201017,1.95971719 9.20337782,2.12084842 L13.8789159,6.78887687 C14.0403614,6.9500081 14.0403614,7.21125308 13.8789159,7.37238431 L12.7100508,8.53940696 C12.5486832,8.70051489 12.2870249,8.70051489 12.1255794,8.53940696 L11.9794615,8.39352427 C11.7374101,8.1517847 11.3448837,8.1517847 11.1028322,8.39352427 L8.98785786,10.5050169 C8.74580639,10.7467565 8.74580639,11.1385735 8.98785786,11.380313 L9.5723293,11.9638438 C9.73369695,12.1249517 9.73369695,12.3861889 9.5723293,12.5472968 L8.40346423,13.7143583 C8.24201878,13.8754662 7.98036044,13.8754662 7.81899279,13.7143583 L5.48655339,11.3856729 L2.99050556,13.8776413 C2.91355638,13.9544666 2.80936765,13.9978896 2.70054953,13.9985111 L2.4264735,14 C2.20319639,14.0012299 2.01931974,13.8252074 2.01121246,13.6024217 L2.00027307,13.3019562 C1.99610272,13.1873785 2.03985249,13.0762963 2.12104205,12.9951986 L4.60988514,10.5103768 L2.26677088,8.17104929 C2.10537989,8.00994136 2.10537989,7.74862648 2.26677088,7.58752632 L3.4356593,6.42051921 C3.59705028,6.25938797 3.85870862,6.25938797 4.02009961,6.42051921 L4.60454771,7.00402665 C4.8466303,7.24571961 5.23912559,7.24571961 5.48118484,7.00402665 Z"}));f.displayName="PinUnfilled";var g=f,h=s("./node_modules/react-intl/lib/index.es.js"),y=Object(h.defineMessages)({pinField:{id:"issue-field-pin.pin-field",defaultMessage:"Pin to top"},unpinField:{id:"issue-field-pin.unpin-field",defaultMessage:"Unpin"},fieldPinned:{id:"issue-field-pin.field-pinned",defaultMessage:"{fieldLabel} pinned to top."},errorTooManyPinnedTitle:{id:"issue-field-pin.error-too-many-pinned-title",defaultMessage:"Too many pinned fields"},errorTooManyPinnedText:{id:"issue-field-pin.error-too-many-pinned-text",defaultMessage:"You've reached the maximum number of fields you can pin in this project. Please unpin a field first, to pin this field to the top"}}),O=s("./src/packages/issue/fields/components/field-pin/src/styled.js");const j=Object(n.memo)(e=>{const{isPinned:t=!1,onClick:s}=e,{formatMessage:n}=Object(p.c)(),i=n(t?y.unpinField:y.pinField),r=t?b:g,o=t?O.b:O.c;return a.a.createElement(O.a,{"data-test-id":"issue-field-pin.field-pin",onClick:s},a.a.createElement(d.a,{content:i},a.a.createElement(o,{className:"issue-details-pin-icon-wrapper"},a.a.createElement(u.a,{label:i,glyph:r}))))});j.displayName="FieldPin";var E=j,v=s("./src/packages/issue/fields/components/field-pin/src/utils.js");const k=e=>{const{issueKey:t,fieldId:s,label:n="",contextItemCategories:i}=e,[l,u]=Object(v.e)(t),{createAnalyticsEvent:d}=Object(o.a)(),{showFlag:p}=Object(r.useFlagsService)();if(!t)return null;const m=Object(v.c)(l,s);return a.a.createElement(E,{onClick:()=>{const e=[...l];let t=-1;m?(t=e.indexOf(s),e.splice(t,1)):e.push(s);const a=u(e);(({isPinned:e,newPinnedFieldLength:t,pinnedFieldPosition:n,setPinSuccess:a,savedFieldIdLength:r})=>{if(void 0===i)return;const{primary:o,secondary:l}=i,u=o.concat(l).findIndex(({id:e})=>e===s),p=u>=o.length,m={isPinned:e,newPinnedFieldCount:t,totalFieldCount:o.length+l.length,originalPinnedFieldPosition:u,pinnedFieldPosition:n,isUnderShowMore:p,setPinSuccess:a,savedFieldIdLength:r},b=d({action:"clicked",actionSubject:"button",actionSubjectId:"pinnedFieldButton"});Object(c.h)(b,"pinnedFields",m)})({isPinned:!m,newPinnedFieldLength:e.length,pinnedFieldPosition:m?t:e.indexOf(s),setPinSuccess:a,savedFieldIdLength:Object(v.b)(e).length}),m||p(a?{type:"success",title:[y.fieldPinned,{fieldLabel:n}]}:{title:y.errorTooManyPinnedTitle,description:y.errorTooManyPinnedText,type:"error"})},isPinned:m})};k.displayName="UnconnectedFieldPin";const w=Object(i.b)(e=>({issueKey:Object(v.d)(e),contextItemCategories:Object(v.a)(e)}),{})(k)},"./src/packages/issue/fields/components/field-pin/src/styled.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return r})),s.d(t,"b",(function(){return o})),s.d(t,"c",(function(){return c}));var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),i=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const r=n.default.div(["cursor:pointer;margin-left:","px;flex-shrink:0;"],.25*i.e),o=n.default.div(["color:",";&:hover{color:",";}"],a.a.Y300,a.a.Y200),c=n.default.div(["color:",";&:hover{color:",";}"],a.a.N80,a.a.N800)},"./src/packages/issue/fields/components/field-pin/src/utils.js":function(e,t,s){"use strict";s.d(t,"d",(function(){return u})),s.d(t,"a",(function(){return d})),s.d(t,"c",(function(){return p})),s.d(t,"b",(function(){return m})),s.d(t,"e",(function(){return b})),s.d(t,"f",(function(){return f}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./src/packages/platform/utils/types/src/general.js"),r=s("./src/packages/issue/user-preferences-services/src/main.js"),o=s("./src/packages/issue/user-preferences-services/src/feature-flags.js");function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function l(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const u=e=>{const t=e.context.issueKey;return Object(i.l)(null!=t?t:"")},d=e=>e.context.contextItemCategories,p=(e,t)=>!(!e||!Array.isArray(e||!t))&&e.includes(t),m=e=>0===e.filter(e=>"string"==typeof e&&""!==e).length?"null":e.join(","),b=e=>{const t=(e=>e?`jira.user.issue.details.pinned-fields.${e}`:"jira.user.issue.details.pinned-fields")((e=>Object(i.q)((e||"").split("-")[0]))(e)),[s,n]=Object(r.b)(t);return[(e=>null==e||""===e||"null"===e?[]:e.trim().split(","))(s),e=>{const t=m(e);return Object(o.a)()&&"function"!=typeof n?e.length>0?!(t.length>255)&&(n.setValue(t),!0):(n.deleteValue(),!0):"function"==typeof n&&(!(t.length>255)&&(n(t),!0))}]},f=e=>t=>{const{issueKey:s}=t,n=l(t,["issueKey"]),[i]=b(s);return a.a.createElement(e,c({},n,{pinnedFields:i}))}},"./src/packages/issue/fields/components/inline-edit/src/main.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/@atlaskit/inline-edit--current/dist/esm/InlineEditStateless.js"),r=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/enter-escape-handler/index.js"),o=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/analytics-event-to-props.js");function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function l(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const u=Object(o.a)("EnterEscapeHandler",{onEnter:"entered",onEscape:"escaped"})(r.a),d=e=>{const{actionSubject:t,isEditable:s,isEditing:r=!1,readView:o=null,editView:d=null,onEnter:p,onEscape:m,onConfirm:b,onCancel:f,onEdit:g}=e,h=l(e,["actionSubject","isEditable","isEditing","readView","editView","onEnter","onEscape","onConfirm","onCancel","onEdit"]),y=Object(n.useCallback)((e,s)=>e.update({action:s,actionSubject:t}),[t]),O=Object(n.useCallback)((e,t)=>{p&&p(y(t,"entered"))},[p,y]),j=Object(n.useCallback)((e,t)=>{m&&m(y(t,"escaped"))},[m,y]),E=Object(n.useCallback)(e=>{g&&g(y(e,"focused"))},[g,y]),v=Object(n.useCallback)(e=>{b&&b(y(e,"confirmed"))},[b,y]),k=Object(n.useCallback)(e=>{f&&f(y(e,"canceled"))},[f,y]),w=Object(n.useCallback)(()=>null!==d?a.a.createElement(u,{onEnter:O,onEscape:j},d):null,[d,O,j]);return a.a.createElement("div",null,a.a.createElement(i.a,c({label:"",isEditing:r,readView:o,editView:!0===s?w():null,onConfirm:v,onCancel:k,onEditRequested:E},h)))};d.displayName="FieldInlineEditStateLess",d.defaultProps={actionSubject:"fieldInlineEdit",disableEditViewFieldBase:!0,isEditable:!1,isEditing:!1,isConfirmOnBlurDisabled:!1,isCompact:!0,isLabelHidden:!0,shouldConfirmOnEnter:!0},t.a=Object(n.memo)(d)},"./src/packages/issue/fields/components/user-picker/src/main.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return g}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/lodash/debounce.js"),r=s.n(i),o=s("./node_modules/lodash/noop.js"),c=s.n(o),l=s("./node_modules/@atlaskit/user-picker/dist/es2019/components/UserPicker.js");function u(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function d(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function p(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?d(Object(s),!0).forEach((function(t){m(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):d(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function m(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const b={id:"USER_PICKER_EMPTY",name:""},f=(e,t)=>null!=e&&(null==t||""===t||e.toLowerCase().includes(t.toLowerCase()));class g extends n.Component{constructor(...e){super(...e),this.state={suggestions:[],isDropdownVisible:!0,wasFocused:!1,isLoading:!1,wasCleared:!1,wasQueryCleared:!1,query:null},this.wasUnmounted=!1,this.onChange=e=>{if(!e||Array.isArray(e)||this.isCurrentValue(e))return;const t=e.id,s=this.props.initialOptions.find(e=>e.id===t);s?this.props.onChange(s.id?s:null):"USER_PICKER_EMPTY"===t?this.props.onChange(null):this.props.onChange(e)},this.onSuggestionSelect=(e,t)=>{this.setState({suggestions:[],wasFocused:!1,isLoading:!1,wasCleared:!1,wasQueryCleared:!1}),this.onChange(Array.isArray(e)?null:e),this.props.onSelection(t)},this.onBlur=()=>{this.setState({suggestions:[],isDropdownVisible:!1,wasFocused:!1,isLoading:!1,wasQueryCleared:!1}),this.state.wasCleared?this.onSuggestionSelect(b):this.props.onCancel()},this.onFocus=e=>{this.setState({isDropdownVisible:!0,isLoading:!0,wasFocused:!0,wasCleared:!1}),this.requestSuggestions(e)},this.onQueryChange=(e,t)=>{this.setState({wasFocused:!1,isLoading:!0,query:e||"",wasQueryCleared:!e}),this.debouncedRequestSuggestion(t)},this.onClear=()=>{this.setState({wasCleared:!0}),this.onChange(b)},this.getEmptyValue=()=>this.props.emptyOption?p(p({},this.props.emptyOption),{},{id:"USER_PICKER_EMPTY"}):null,this.getInitialAndEmptyOptionSuggestions=()=>{const{initialOptions:e,emptyOption:t}=this.props,{wasFocused:s,wasQueryCleared:n}=this.state,a=s&&e.length>0,i=t&&!a&&n,r=this.getEmptyValue();return[...a?e:[],...!0===i&&r?[r]:[]]},this.debouncedRequestSuggestion=r()(e=>this.requestSuggestions(e),300),this.requestSuggestions=e=>{const{onDataRequest:t,fetchSuggestions:s}=this.props,{query:n}=this.state;t(null===n);const a=n||"";return s(a,e).then(e=>this.handleSuggestions(e,a)).catch(()=>[])},this.isMatchingQuery=e=>{const{query:t,isLoading:s}=this.state,{displayName:n,name:a}=e;return!s||f(n,t)||f(a,t)},this.getSuggestions=()=>{const e=this.getInitialAndEmptyOptionSuggestions(),t=e.map(e=>e.id),s=this.state.suggestions.filter(e=>!t.includes(e.id)&&this.isMatchingQuery(e));return[...e,...s].map(e=>{const{displayName:t}=e,s=u(e,["displayName"]);return t?p(p({},s),{},{publicName:t}):s})},this.handleSuggestions=(e,t)=>{const{isDropdownVisible:s,query:n}=this.state,a=t===(n||"");if(this.wasUnmounted||!s||!a)return;const i=this.state.wasFocused?e.filter(e=>!this.isCurrentValue(e)):e;this.setState({isLoading:!1,suggestions:i}),this.props.onDataLoaded(null===n,i.length)}}componentWillUnmount(){this.wasUnmounted=!0,this.debouncedRequestSuggestion.cancel()}isCurrentValue(e){return e?this.props.value?e.id===this.props.value.id:"USER_PICKER_EMPTY"===e.id:null===this.props.value}render(){const e=this.getSuggestions(),t=this.props.value||this.getEmptyValue();return a.a.createElement(l.a,{value:t,options:e,open:this.state.isDropdownVisible,fieldId:this.props.fieldId,menuMinWidth:this.props.menuMinWidth,menuPortalTarget:this.props.portalElement,width:this.props.width,appearance:"compact",isClearable:!!this.props.value,isDisabled:this.props.isDisabled,placeholder:this.props.placeholder,isLoading:this.state.isLoading&&this.state.isDropdownVisible,onBlur:this.onBlur,onClear:this.onClear,onFocus:this.onFocus,onInputChange:this.onQueryChange,onSelection:this.onSuggestionSelect})}}g.displayName="UserPickerView",g.displayName="UserPickerView",g.defaultProps={isDisabled:!1,value:null,initialOptions:[],emptyOption:null,width:void 0,menuMinWidth:void 0,portalElement:void 0,fetchSuggestions:()=>Promise.resolve([]),onChange:c.a,onCancel:c.a,onSelection:c.a,onDataRequest:c.a,onDataLoaded:c.a}},"./src/packages/issue/fields/field-base/src/services/edit-field-service/main.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return g}));var n=s("./node_modules/react/index.js"),a=s("./node_modules/lodash/noop.js"),i=s.n(a),r=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),o=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),c=s("./src/packages/platform/utils/fetch/src/utils/errors.js"),l=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),u=s("./src/packages/platform/controllers/tenant-context/src/components/index.js"),d=s("./src/packages/issue/fields/field-base/src/services/field-value-service/main.js"),p=s("./src/packages/platform/observability/browser-metrics/src/index.js"),m=s("./src/packages/platform/utils/fetch/src/utils/requests.js");const b=(e,t)=>({fields:{[e]:t}}),f=async(e,t,s,n)=>Object(m.e)(`${n}/rest/api/3/issue/${e}/`,{body:JSON.stringify(b(t,s))}),g=e=>{const t=Object(u.e)(),{issueKey:s,fieldKey:a,fieldType:m,initialValue:b,saveField:g=f,onSubmit:h=i.a,onSuccess:y=i.a,onFailure:O=i.a}=e,[j,{setFieldValue:E}]=Object(d.b)({issueKey:s,fieldKey:a}),v=void 0!==j?j:b,[k,w]=Object(n.useState)(null),[S,I]=Object(n.useState)(!1),C=Object(n.useCallback)(()=>w(null),[w]),T=Object(n.useCallback)(async(e,n,i)=>{const u={fieldKey:a,fieldType:m},d=((e,t)=>{const s=Object(p.b)(),n={key:"issue-field.save-value",reporters:[()=>({fieldKey:e,fieldType:t})]};return s.start(n),{stop:()=>s.stop(n),cancel:()=>s.cancel(n.key)}})(Object(o.j)(a)(a),Object(o.j)(m)(m));I(!0),w(null);try{h(v,e,n,i),E(s,a,e),await g(s,a,e,t),y(e),d.stop(),Object(l.f)(i,"field updated",u),Object(l.b)(i,"field updateSucceeded",u)}catch(b){O(b,e),E(s,a,v),w(b);const t=b instanceof c.a;t||o.i.safeError("issue-field.save-value",`Failed to update field ${a} of type ${m}`,new r.a({event:b,type:"update",category:"issue",app:"issue-field",eventNameSuffix:"issue.error"})),d.cancel(),Object(l.b)(i,"field updateFailed",{fieldKey:a,fieldType:m,isValidationError:t})}I(!1)},[a,m,h,v,E,s,g,t,y,O]);return[{value:v,loading:S,error:k},{saveValue:T,resetError:C}]}},"./src/packages/issue/fields/field-base/src/services/field-config-service/main.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return I})),s.d(t,"b",(function(){return C})),s.d(t,"c",(function(){return T}));var n=s("./node_modules/react/index.js"),a=s("./src/packages/platform/utils/fetch/src/utils/requests.js"),i=s("./src/packages/platform/controllers/tenant-context/src/components/index.js"),r=s("./node_modules/reselect/lib/index.js"),o=s("./node_modules/lodash/merge.js"),c=s.n(o),l=s("./node_modules/react-sweet-state/lib/esm/store/create.js"),u=s("./node_modules/react-sweet-state/lib/esm/components/hook.js");function d(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function p(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?d(Object(s),!0).forEach((function(t){m(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):d(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function m(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const b={setIssueConfig:(e,t)=>({setState:s})=>{s({[e]:t})},setIssuesConfig:e=>({setState:t})=>{t(e.reduce((e,t)=>p(p({},e),t),{}))},mergeIssueConfig:(e,t)=>({setState:s,getState:n})=>{s({[e]:c()({},n()[e],t)})},mergeIssuesConfig:e=>({setState:t,getState:s})=>{const n=e.reduce((e,t)=>p(p({},e),t),{});t(c()({},s(),n))}},f=Object(l.a)({name:"issue-field-config",initialState:{},actions:b}),g=Object(r.createSelector)((e,t)=>e[t.issueKey],e=>e),h=Object(u.a)(f,{selector:g}),y=Object(r.createSelector)((e,t)=>e[t.issueKey],(e,t)=>t.fieldKey,(e,t)=>null==e?e:e[t]?e[t]:null),O=Object(u.a)(f,{selector:y}),j=Object(u.a)(f,{selector:null});function E(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function v(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?E(Object(s),!0).forEach((function(t){k(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):E(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function k(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const w=()=>'\n  query fieldConfigurationQuery($issueKey: String) {\n    issue(issueIdOrKey: $issueKey, latestVersion: true, screen: "view") {\n      fields {\n        key\n        schema {\n          type\n          custom\n          customId\n          system\n          renderer\n        }\n        autoCompleteUrl\n        allowedValues\n        operations\n        required\n        editable\n        title\n      }\n    }\n  }',S=async(e,t)=>{const s=await Object(a.d)(`${t}/rest/graphql/1/`,{body:JSON.stringify({query:w(),variables:{issueKey:e}})});return s&&s.data&&s.data.issue&&s.data.issue.fields?s.data.issue.fields.reduce((e,t)=>v(v({},e),{},{[t.key]:{autoCompleteUrl:t.autoCompleteUrl,allowedValues:t.allowedValues,isEditable:t.editable,isRequired:t.required,schema:t.schema,title:t.title}}),{}):null},I=(()=>{const e=new Set;return(t,s)=>{const[a,{setIssueConfig:r}]=O({issueKey:t,fieldKey:s}),o=Object(i.e)(),c=Object(n.useCallback)(async()=>{e.add(t);const s=await S(t,o);r(t,s),e.delete(t)},[o,t,r]);return Object(n.useEffect)(()=>{void 0!==a||e.has(t)||c()},[t,a,c]),[a]}})(),C=()=>{const[,e]=j();return[null,Object(n.useMemo)(()=>({setIssueConfig:(t,s)=>e.setIssueConfig(t,s),setIssuesConfig:t=>e.setIssuesConfig(t),mergeIssueConfig:(t,s)=>e.mergeIssueConfig(t,s),mergeIssuesConfig:t=>e.mergeIssuesConfig(t)}),[e])]},T=(()=>{const e=new Set;return t=>{const[s,{setIssueConfig:a}]=h({issueKey:t}),r=Object(i.e)(),o=Object(n.useCallback)(async()=>{e.add(t);const s=await S(t,r);a(t,s),e.delete(t)},[r,t,a]);return Object(n.useEffect)(()=>{void 0===s&&o()},[t,s,o]),[s]}})()},"./src/packages/issue/fields/field-base/src/services/field-value-service/main.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return f})),s.d(t,"c",(function(){return g})),s.d(t,"a",(function(){return h})),s.d(t,"d",(function(){return O}));var n=s("./node_modules/react/index.js"),a=s("./node_modules/lodash/merge.js"),i=s.n(a),r=s("./node_modules/react-sweet-state/lib/esm/store/create.js"),o=s("./node_modules/react-sweet-state/lib/esm/components/hook.js"),c=s("./node_modules/react-sweet-state/lib/esm/components/subscriber.js");function l(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function u(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?l(Object(s),!0).forEach((function(t){d(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):l(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function d(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const p={setFieldValue:(e,t,s)=>({setState:n,getState:a})=>{n({[e]:u(u({},a()[e]),{},{[t]:s})})},getFieldValue:(e,t)=>({getState:s})=>s()[e]&&s()[e][t],setIssue:(e,t)=>({setState:s})=>{s({[e]:t})},mergeIssue:(e,t)=>({setState:s,getState:n})=>{s({[e]:i()({},n()[e],t)})},setIssues:e=>({setState:t})=>{t(e.reduce((e,t)=>u(u({},e),t),{}))},mergeIssues:e=>({setState:t,getState:s})=>{const n=e.reduce((e,t)=>u(u({},e),t),{});t(i()({},s(),n))}},m=Object(r.a)({name:"issue-fields",initialState:{},actions:p}),b=(e,{issueKey:t,fieldKey:s})=>e[t]&&e[t][s],f=Object(o.a)(m,{selector:b}),g=Object(o.a)(m,{selector:(e,t)=>e[t]}),h=Object(c.a)(m,{selector:b}),y=Object(o.a)(m,{selector:null}),O=()=>{const[,e]=y();return[null,Object(n.useMemo)(()=>({setIssue:(t,s)=>e.setIssue(t,s),setFieldValue:(t,s,n)=>e.setFieldValue(t,s,n),getFieldValue:(t,s)=>e.getFieldValue(t,s),mergeIssue:(t,s)=>e.mergeIssue(t,s),setIssues:t=>e.setIssues(t),mergeIssues:t=>e.mergeIssues(t)}),[e])]}},"./src/packages/issue/fields/number/src/services/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var n=s("./node_modules/lodash/get.js"),a=s.n(n),i=s("./src/packages/issue/fields/field-base/src/services/field-config-service/main.js"),r=s("./src/packages/issue/fields/field-base/src/services/edit-field-service/main.js");const o=({issueKey:e,fieldKey:t,onSuccess:s,onFailure:n})=>{const[o]=Object(i.a)(e,t),c=a()(o,"schema.type","number"),[{value:l,error:u},{saveValue:d,resetError:p}]=Object(r.a)({fieldKey:t,issueKey:e,fieldType:c,initialValue:null,onSuccess:s,onFailure:n});return[{value:l,error:u,fieldConfig:o},{saveValue:d,resetError:p}]}},"./src/packages/issue/fields/number/src/ui/async.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return l})),s.d(t,"b",(function(){return u}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-async-component/commonjs/index.js"),r=s("./node_modules/react-loosely-lazy/lib/esm/index.js"),o=s("./src/packages/platform/ui/error-boundary/src/main.js"),c=s("./src/packages/issue/fields/number/src/ui/view/main.js");const l=Object(i.asyncComponent)({resolve:()=>s.e("async-number-inline-edit-view").then(s.bind(null,"./src/packages/issue/fields/number/src/ui/main.js")),name:"AsyncIssueNumberField",LoadingComponent:c.a,ErrorComponent:c.a}),u=({children:e,fallback:t,packageName:s})=>a.a.createElement(o.a,{id:"issue-number-field",packageName:s,render:()=>t},a.a.createElement(r.a,{fallback:t},e));u.displayName="IssueNumberFieldBoundary"},"./src/packages/issue/fields/number/src/ui/main.js":function(e,t,s){"use strict";s.r(t),s.d(t,"actionSubject",(function(){return w}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/lodash/get.js"),r=s.n(i),o=s("./src/packages/platform/utils/types/src/general.js"),c=s("./src/packages/issue/fields/components/error-flag/src/main.js"),l=s("./src/packages/issue/fields/components/inline-edit/src/main.js"),u=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),d=s("./src/packages/issue/fields/number/src/services/index.js"),p=s("./node_modules/@atlaskit/field-text/FieldTextStateless.js"),m=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),b=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const f=m.default.div(["width:","px;cursor:auto;"],8.5*b.e);function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function h(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const y=Object(n.memo)(e=>{const{isInvalid:t=!1,type:s,defaultValue:n}=e,i=h(e,["isInvalid","type","defaultValue"]),r=null===n?"":Number(n);return a.a.createElement(f,null,a.a.createElement(p.a,g({appearance:"subtle",autoFocus:!0,compact:!0,isLabelHidden:!0,isInvalid:t,shouldFitContainer:!0,type:s,value:r},i)))});var O=s("./node_modules/react-intl/lib/index.es.js"),j=Object(O.defineMessages)({errorTitle:{id:"issue-field-number.error-title",defaultMessage:"We couldn't set the story point value"},errorMessage:{id:"issue-field-number.error-message",defaultMessage:"Check your connection, then give it another try."}}),E=s("./src/packages/issue/fields/number/src/ui/view/main.js");function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function k(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const w="numberInlineEdit";t.default=Object(n.memo)(e=>{const{fieldKey:t,issueKey:s,onCancel:i,onEdit:p,onEscape:m,onConfirm:b,onEnter:f,onUpdate:g,readView:h,editView:O,noValueText:S}=e,I=k(e,["fieldKey","issueKey","onCancel","onEdit","onEscape","onConfirm","onEnter","onUpdate","readView","editView","noValueText"]),[C,T]=Object(n.useState)(!1),[{value:P,error:_,fieldConfig:x},{saveValue:D,resetError:A}]=Object(d.a)({issueKey:Object(o.l)(s),fieldKey:t,onSuccess:e=>{g&&g(e),T(!1)}}),M=r()(x,"schema.type","number"),[L,R]=Object(n.useState)(P),N=!!x&&x.isEditable;Object(n.useEffect)(()=>{_&&T(!0),C||R(P)},[_,C,P]);const U=Object(n.useCallback)(e=>{L!==P?D(L,null,e):T(!1),Object(u.h)(e)},[D,L,P]),F=Object(n.useCallback)(e=>{A(),T(!1),R(P),Object(u.h)(e)},[A,P]),V=Object(n.useCallback)(e=>{F(e),i&&i(e)},[i,F]),K=Object(n.useCallback)(e=>{U(e),b&&b(e)},[b,U]),B=Object(n.useCallback)(e=>{T(!0),Object(u.h)(e),p&&p(e)},[p]),W=Object(n.useCallback)(e=>{F(e),m&&m(e)},[m,F]),H=Object(n.useCallback)(e=>{U(e),f&&f(e)},[f,U]),G=Object(n.useCallback)(e=>{A();const t=""===e.target.value?null:parseFloat(Number(e.target.value).toFixed(3));R(t)},[A,R]);return a.a.createElement(a.a.Fragment,null,_&&a.a.createElement(c.a,{error:_,title:j.errorTitle,description:j.errorMessage}),a.a.createElement(l.a,v({actionSubject:w,isEditable:N,isEditing:C,readView:(()=>void 0!==h?h:a.a.createElement(E.a,{isEditable:N,value:P}))(),editView:N?(()=>void 0!==O?O:a.a.createElement(y,{defaultValue:L,onChange:G,type:M,isInvalid:!!_}))():null,onCancel:V,onConfirm:K,onEdit:B,onEscape:W,onEnter:H},I)))})},"./src/packages/issue/fields/number/src/ui/view/main.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return u}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/@atlaskit/badge/dist/es2019/components/index.js"),r=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),o=s("./node_modules/@atlaskit/theme/dist/es2019/index.js");const c=r.default.div(["cursor:pointer;&:hover > span{color:",";background-color:",";}"],o.a.N800,o.a.N90),l=r.default.div(["border:2px solid transparent;"]),u=({isEditable:e,value:t})=>{if(void 0===t)return null;const s=null===t?"-":t.toString(),n=a.a.createElement(i.a,null,s),r=e?a.a.createElement(c,null,n):n;return a.a.createElement(l,null,r)};u.displayName="NumberView"},"./src/packages/issue/fields/original-estimate/src/ui/view/main.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/@atlaskit/badge/dist/es2019/components/index.js");const r=({value:e})=>a.a.createElement(i.a,null,e);r.displayName="OriginalEstimateView",t.a=r},"./src/packages/issue/fields/security-level/src/common/ui/styled.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./node_modules/@atlaskit/theme/dist/es2019/index.js");const i=n.default.div(["display:flex;align-items:center;color:",";"],e=>e.isActive?a.a.N0:e.hasSecurityLevel?a.a.R400:null)},"./src/packages/issue/fields/status/src/common/ui/status-lozenge/main.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return O})),s.d(t,"a",(function(){return j})),s.d(t,"c",(function(){return E}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/@atlaskit/button--current/dist/es2019/components/Button.js"),r=s("./node_modules/@atlaskit/lozenge/dist/es2019/Lozenge/index.js"),o=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),c=s("./node_modules/styled-components/dist/styled-components.browser.esm.js");const l={1:"default",2:"default",3:"success",4:"inprogress"},u={default:o.a.N40,success:o.a.G50,inprogress:o.a.B50},d={default:o.a.N500,success:o.a.G500,inprogress:o.a.B500},p={default:o.a.N70,success:o.a.G400,inprogress:o.a.B400},m={default:o.a.N800,success:o.a.N0,inprogress:o.a.N0},b=c.default.span(["display:flex;align-items:center;> div{display:flex;line-height:initial;outline:0;> span{padding:2px 0;vertical-align:text-bottom;color:",";background-color:",";",";}}"],e=>d[l[e.statusCategoryId]],e=>u[l[e.statusCategoryId]],e=>e.hasHoverState?`&:hover {\n                        color: ${m[l[e.statusCategoryId]]};\n                        background-color: ${p[l[e.statusCategoryId]]};\n                    }`:"");function f(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function g(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?f(Object(s),!0).forEach((function(t){h(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):f(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function h(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function y(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const O="issue.fields.status.common.ui.status-lozenge.",j=e=>a.a.createElement(b,{hasHoverState:e.hasHoverState,statusCategoryId:e.status.statusCategory.id},a.a.createElement("div",{ref:e.targetRef,"data-test-id":`${O}${e.status.statusCategory.id}`},a.a.createElement(r.a,null,e.status.name)));j.displayName="StatusLozenge";const E=e=>{const{ariaLabel:t,error:s,isEditable:n,isOpen:r,targetRef:c}=e,l=y(e,["ariaLabel","error","isEditable","isOpen","targetRef"]);return(a.a.createElement(i.a,{ref:c,appearance:"subtle","aria-label":t,"aria-expanded":r,error:s,isDisabled:!n,theme:(e,t)=>{const{buttonStyles:a,spinnerStyles:i}=e(t);return{buttonStyles:g(g(g({},a),{},{backgroundColor:"transparent",margin:0,width:"auto",height:"auto",padding:0,border:`2px solid ${s?o.a.R300:"transparent"}`,borderRadius:"5px"},!0===n?void 0:{cursor:"auto"}),{},{outline:0,boxShadow:`0 0 0 2px ${!0===r?o.a.B100:"transparent"}`,"& > span > span":{margin:0}}),spinnerStyles:i}}},a.a.createElement(j,l)))};E.displayName="WrappedStatusLozenge"},"./src/packages/issue/fields/status/src/common/utils.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return l})),s.d(t,"a",(function(){return u})),s.d(t,"b",(function(){return d})),s.d(t,"d",(function(){return m}));var n=s("./node_modules/memoize-one/dist/memoize-one.esm.js"),a=s("./src/packages/issue/fields/status/src/feature-flags.js");const i=(e,t)=>e.isGlobal&&e.to.id===t,r=(e,t)=>e.to.id===t&&!0===e.isLooped,o=Object(n.a)((e,t)=>e.filter(e=>!r(e,t)&&!i(e,t))),c=Object(n.a)((e,t)=>e.filter(e=>!i(e,t))),l=e=>e.every(e=>e.isGlobal),u=(e,t)=>Object(a.a)()?o(e||[],t):((e,t)=>c(e,t))(e||[],t),d=Object(n.a)((e,t)=>(e||[]).filter(e=>r(e,t))),p=Object(n.a)(e=>e.map(e=>({label:e.to.name,value:e.id,transition:e}))),m=e=>p(e)},"./src/packages/issue/fields/status/src/constants.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n={TIME_TO_RENDER_OPTIONS:"jira.fe.issue.fields.status.time-to.render-options",TIME_TO_APPLY_SELECTED_OPTION:"jira.fe.issue.fields.status.time-to.reflect-selected",TIME_TO_CANCEL_DROPDOWN:"jira.fe.issue.fields.status.time-to.cancel-dropdown",TIME_TO_OPEN_TRANSITION_SCREEN:"jira.fe.issue.fields.status.time-to.open-transition-screen",TIME_TO_CONFIRM_TRANSITION_SCREEN:"jira.fe.issue.fields.status.time-to.confirm-transition-screen",TIME_TO_CANCEL_TRANSITION_SCREEN:"jira.fe.issue.fields.status.time-to.cancel-transition-screen",TIME_TO_ERROR_TRANSITION_SCREEN:"jira.fe.issue.fields.status.time-to.error-transition-screen"}},"./src/packages/issue/fields/status/src/feature-flags.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return a})),s.d(t,"a",(function(){return i}));var n=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/get-feature-flag-value.js");const a=()=>Object(n.b)("workflow-editor-for-jsw",!1),i=()=>Object(n.b)("issue.details.bento-7718.global-loop-transitions",!1)},"./src/packages/issue/fields/status/src/services/experience-descriptions/index.js":function(t,s,n){"use strict";n.d(s,"a",(function(){return u}));var a=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),i=n("./src/packages/platform/utils/types/src/application.js"),r=n("./src/packages/platform/utils/types/src/edition.js");function o(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function c(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?o(Object(s),!0).forEach((function(t){l(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function l(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const u=(t,s,n,o,l)=>{let u=null,d=null;if(null!==o)try{const{appEditions:e}=Object(a.f)();u=Object(i.e)(o),d=Object(r.f)(u,e)}catch(e){}return{experience:"transitionIssue",wasExperienceSuccesful:t,analyticsSource:n,application:u,edition:d,additionalAttributes:c({method:s},null!=l?{errorMessage:l}:{})}}},"./src/packages/issue/fields/status/src/services/status-service/main.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return M}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/lodash/noop.js"),r=s.n(i),o=s("./src/packages/platform/observability/browser-metrics/src/index.js"),c=s("./src/packages/common-legacy-do-not-add-anything-new/src/bridge/index.js"),l=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/transition-screen-legacy-dialog/index.js"),u=s("./src/packages/common-legacy-do-not-add-anything-new/src/experience-tracking/common/services/send-experience-analytics/index.js"),d=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/logging/log.js"),p=s("./src/packages/platform/utils/fetch/src/utils/errors.js"),m=s("./src/packages/platform/utils/fetch/src/utils/requests.js"),b=s("./src/packages/platform/ui/flags/src/index.js"),f=s("./src/packages/issue/fields/field-base/src/services/field-value-service/main.js"),g=s("./src/packages/issue/issue-view/src/common/legacy/aui-dialog-event.js"),h=s("./src/packages/issue/issue-view/src/utils/is-valid-experience-error.js"),y=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),O=s("./src/packages/issue/fields/status/src/constants.js"),j=s("./src/packages/issue/fields/status/src/services/experience-descriptions/index.js"),E=s("./node_modules/react-intl/lib/index.es.js");const v=Object(E.defineMessages)({title:{id:"issue-field-status.services.flags.transition-failed-error.main.title",defaultMessage:"We couldn't update the status"},description:{id:"issue-field-status.services.flags.transition-failed-error.main.description",defaultMessage:"Check your network connection, then try reloading the issue."}});var k=()=>({type:"error",title:v.title,description:v.description,isAutoDismiss:!0});const w=Object(E.defineMessages)({title:{id:"issue-field-status.services.flags.validation-error.main.title",defaultMessage:"Transition failed"}});var S=e=>({type:"warning",title:w.title,description:{id:"issue-field.status.services.flags.validation-error.main.description",defaultMessage:e},isAutoDismiss:!0});function I(){return(I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function C(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function T(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?C(Object(s),!0).forEach((function(t){P(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):C(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function P(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const _=Object(o.b)(),x=(e,t,s)=>{const n=document.querySelector(e);n&&n.removeEventListener(t,s)};class D extends n.Component{static getDerivedStateFromProps(e,t){return t.loading||!e.value?null:{value:e.value}}constructor(e){super(e),this.componentDidUpdate=e=>{this.props.initialValue&&e.initialValue&&e.initialValue.id!==this.props.initialValue.id&&this.props.initialValue.id!==this.state.value.id&&this.setState({loading:!1,value:this.props.initialValue})},this.isDialogOpened=!1,this.isDialogConfirmPressed=!1,this.onDialogContentReady=()=>{setTimeout(()=>{this.isDialogOpened?Object(o.c)().markTimeToFinishTask({key:O.a.TIME_TO_ERROR_TRANSITION_SCREEN}):Object(o.c)().markTimeToFinishTask({key:O.a.TIME_TO_OPEN_TRANSITION_SCREEN}),this.bindDialogFormHandlers(),this.isDialogOpened=!0,this.isDialogConfirmPressed=!1})},this.bindDialogFormHandlers=()=>{((e,t,s)=>{x(e,t,s);const n=document.querySelector(e);n&&n.addEventListener(t,s)})("#issue-workflow-transition-submit","click",this.onClickDialogConfirm)},this.unbindDialogFormHandlers=()=>{x("#issue-workflow-transition-submit","click",this.onClickDialogConfirm)},this.handleBeforeDialogHide=()=>{this.isDialogOpened&&!this.isDialogConfirmPressed&&(this.cancelScreenBrowserMetricsEvents(),Object(o.c)().markStartOfInteraction({key:O.a.TIME_TO_CANCEL_TRANSITION_SCREEN}),setTimeout(()=>{Object(o.c)().markTimeToFinishTask({key:O.a.TIME_TO_CANCEL_TRANSITION_SCREEN})})),this.unbindDialogFormHandlers(),this.isDialogOpened=!1,this.isDialogConfirmPressed=!1},this.cancelScreenBrowserMetricsEvents=()=>{[O.a.TIME_TO_ERROR_TRANSITION_SCREEN,O.a.TIME_TO_CONFIRM_TRANSITION_SCREEN,O.a.TIME_TO_OPEN_TRANSITION_SCREEN].forEach(e=>{Object(o.c)().cancel({key:e},!0)})},this.onClickDialogConfirm=()=>{Object(o.c)().markStartOfInteraction({key:O.a.TIME_TO_CONFIRM_TRANSITION_SCREEN,cancelExisting:!0}),Object(o.c)().markStartOfInteraction({key:O.a.TIME_TO_ERROR_TRANSITION_SCREEN,cancelExisting:!0}),this.isDialogConfirmPressed=!0},this.resetError=()=>this.setState({error:null}),this.submit=(e,t)=>{const s=this.state.value,n=e.to;this.setState({loading:!0,value:n}),this.props.onSubmit(s,n,{transition:e},t)},this.success=({status:e,event:t,viaDialog:s=!1})=>{this.setState({loading:!1,lastSavedValue:e}),this.props.fieldValueActions.setFieldValue(this.props.issueKey,"status",e),this.props.onSuccess(e,s,t),Object(y.f)(t,"statusField transitioned","statusField"),Object(u.a)(Object(j.a)(!0,"POST","Issue View Status Service",this.props.projectType)),s&&Object(o.c)().markTimeToFinishTask({key:O.a.TIME_TO_CONFIRM_TRANSITION_SCREEN})},this.failure=(e,t)=>{this.setState({error:e,loading:!1,value:this.state.lastSavedValue||this.props.value||this.props.initialValue}),this.props.onFailure();const s=e instanceof p.a;s?this.props.flagService.showFlag(S(e.message)):this.props.flagService.showFlag(k()),Object(y.b)(t,"statusField postTransitionFailed",{validationError:s,message:e.message}),Object(h.a)(e)?Object(u.a)(Object(j.a)(!1,"POST","Issue View Status Service",this.props.projectType,e.message)):Object(u.a)(Object(j.a)(!0,"POST","Issue View Status Service",this.props.projectType))},this.cancel=()=>{this.setState({loading:!1,value:this.props.value||this.props.initialValue}),this.props.onEditCancel()},this.transitionStatus=async(e,t)=>{const{issueKey:s,baseUrl:n}=this.props,a=e.to;this.submit(e,t);try{e.hasScreen?new l.a({baseUrl:n,issueKey:s,transitionId:e.id}).onDialogSuccess(()=>this.success({status:a,event:t,viaDialog:!0})).onDialogCancel(()=>this.cancel()).show():(_.start({key:"issue-field.status.post-transition"}),await Object(m.d)(`${n}/rest/api/2/issue/${s}/transitions`,{body:JSON.stringify({transition:e})}),_.stop({key:"issue-field.status.post-transition"}),this.success({status:a,event:t}))}catch(i){_.cancel("issue-field.status.post-transition"),d.a.safeError("issue-field.status.post-transition",i),this.failure(i,t)}},this.api={transitionStatus:this.transitionStatus,resetError:this.resetError};const t=e.value||e.initialValue;if(null==t)throw new Error("Either value or initialValue prop is required.");this.state={value:t,lastSavedValue:t,loading:!1,error:null}}componentDidMount(){Object(c.a)({name:"jira/util/events"}).then(({bind:e})=>{e("dialogContentReady",this.onDialogContentReady),e("Dialog.beforeHide",this.handleBeforeDialogHide)}).catch(r.a),Object(g.a)("dialogContentReady",this.onDialogContentReady),Object(g.a)("Dialog.beforeHide",this.handleBeforeDialogHide)}componentWillUnmount(){Object(c.a)({name:"jira/util/events"}).then(({unbind:e})=>{e("dialogContentReady",this.onDialogContentReady),e("Dialog.beforeHide",this.handleBeforeDialogHide)}).catch(r.a),Object(g.b)("dialogContentReady",this.onDialogContentReady),Object(g.b)("Dialog.beforeHide",this.handleBeforeDialogHide),this.unbindDialogFormHandlers(),this.isDialogOpened=!1}render(){return this.props.children(T(T({},this.state),this.api))}}D.displayName="StatusService",D.defaultProps={onSubmit:r.a,onSuccess:r.a,onFailure:r.a,onEditStart:r.a,onEditCancel:r.a};const A=e=>a.a.createElement(f.a,{issueKey:e.issueKey,fieldKey:"status"},(t,s)=>a.a.createElement(D,I({value:t},e,{fieldValueActions:s})));A.displayName="StatusWithValueService";const M=Object(b.withFlagService)(A)},"./src/packages/issue/fields/status/src/services/transitions-query/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return c}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./src/packages/platform/ui/error-boundary/src/main.js"),r=s("./src/packages/platform/observability/errors-handling/src/utils/reporting-error-boundary.js"),o=s("./src/packages/issue/fields/status/src/services/transitions-query/main.js");const c=e=>a.a.createElement(i.a,{id:"issue.fields.status.transitions-query"},a.a.createElement(r.a,{id:"fields.status.transitions-query",packageName:"jiraIssueFieldStatus",sendToPrivacyUnsafeSplunk:!0},a.a.createElement(o.a,e)));c.displayName="WrappedTransitionsQuery"},"./src/packages/issue/fields/status/src/services/transitions-query/main.js":function(t,s,n){"use strict";n.d(s,"b",(function(){return S})),n.d(s,"a",(function(){return P}));var a=n("./node_modules/react/index.js"),i=n.n(a),r=n("./node_modules/@atlaskit/analytics-next--current/dist/esm/withAnalyticsEvents.js"),o=n("./src/packages/platform/observability/browser-metrics/src/index.js"),c=n("./src/packages/common-legacy-do-not-add-anything-new/src/experience-tracking/common/services/send-experience-analytics/index.js"),l=n("./src/packages/platform/utils/fetch/src/utils/as-json.js"),u=n("./src/packages/issue/issue-view/src/common/util/errors/index.js"),d=n("./src/packages/issue/issue-view/src/utils/is-valid-experience-error.js"),p=n("./src/packages/issue/workflow-transitions-services/src/main.js"),m=n("./src/packages/issue/workflow-transitions-services/src/context.js"),b=n("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),f=n("./src/packages/issue/fields/status/src/services/experience-descriptions/index.js");function g(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function h(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?g(Object(s),!0).forEach((function(t){y(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):g(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function y(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const O=e=>h(h({id:parseInt(e.id,10),name:e.name,hasScreen:e.hasScreen,isGlobal:e.isGlobal,isInitial:e.isInitial,isConditional:e.isConditional},"boolean"==typeof e.isLooped&&{isLooped:e.isLooped}),{},{to:{id:parseInt(e.to.id,10),name:e.to.name,description:"",statusCategory:{id:e.to.statusCategory.id}},from:null}),j=e=>h(h({id:String(e.id),name:e.name,hasScreen:e.hasScreen,isGlobal:e.isGlobal,isInitial:e.isInitial,isConditional:e.isConditional},"boolean"==typeof e.isLooped&&{isLooped:e.isLooped}),{},{to:{id:String(e.to.id),name:e.to.name,statusCategory:{id:e.to.statusCategory.id}}});function E(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function v(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?E(Object(s),!0).forEach((function(t){k(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):E(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function k(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const w=Object(o.b)(),S=(e,t)=>`${e}/rest/api/2/issue/${t}/transitions?sortByOpsBarAndStatus=true`,I=(e,t,s)=>{const n="string"==typeof s?Object(f.a)(e,"GET","Issue View BaseTransitionsQuery",t||null,s):Object(f.a)(e,"GET","Issue View BaseTransitionsQuery",t||null);Object(c.a)(n)},C=t=>{const{status:s,issueKey:n,baseUrl:i,projectType:r,preFetch:o,createAnalyticsEvent:c,isSaving:m}=t,[f,g]=Object(p.b)(),h=Object(a.useRef)(!1),y=Object(a.useCallback)(async t=>{if(!h.current){h.current=!0,g({loading:!0,error:null});try{w.start({key:"issue-field.status.fetch-transitions"});const e=((e=[])=>e.filter(e=>!!e.to&&!!e.to.statusCategory))((await Object(l.a)(S(i,n))).transitions);w.stop({key:"issue-field.status.fetch-transitions"}),Object(b.g)(t,"statusField transitionsFetched","statusField",{count:e.length}),I(!0,r),g({data:e.map(O),loading:!1,error:null})}catch(e){w.cancel("issue-field.status.fetch-transitions"),Object(u.a)("issue-field.status.fetch-transitions",e.toString(),e,{}),Object(d.a)(e)?I(!1,r,`${e.name||""} ${e.message}`.trim()):I(!0,r),g({data:null,loading:!1,error:e})}h.current=!1}},[i,n,r,g]);return Object(a.useEffect)(()=>{!0===o&&c&&y(c({}))},[n,o,c,g,y]),Object(a.useEffect)(()=>{m?g({data:null}):!m&&!0===o&&c&&y(c({}))},[m,s,o,c,g,y]),t.children(v(v({},f),{},{data:f.data?f.data.map(j):null,fetch:y}))},T=e=>i.a.createElement(m.a,{scope:e.issueKey},i.a.createElement(C,e));T.displayName="ScopedTransitionsQuery";const P=Object(r.a)()(T)},"./src/packages/issue/fields/status/src/ui/main.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return gt}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/lodash/noop.js"),r=s.n(i),o=s("./src/packages/platform/ui/error-boundary/src/main.js"),c=s("./src/packages/platform/ui/error-boundary/src/index.js"),l=s("./src/packages/platform/utils/types/src/general.js"),u=s("./src/packages/navigation-next/src/baskets/navigation/components/container-context/index.js"),d=s("./src/packages/platform/controllers/tenant-context/src/components/index.js"),p=s("./src/packages/issue/fields/status/src/services/status-service/main.js"),m=s("./src/packages/issue/fields/status/src/services/transitions-query/index.js"),b=s("./src/packages/issue/issue-view/src/common/util/entry/get-project-key.js"),f=s("./src/packages/issue/fields/status/src/feature-flags.js");const g=({isSimplified:e,projectType:t})=>void 0!==e&&(!e||(e=>"service_desk"===e||Object(f.b)()&&"software"===e)(t));var h=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/logging/log.js"),y=s("./src/packages/platform/utils/fetch/src/utils/as-json.js"),O=s("./src/packages/platform/utils/constants/src/project-types.js");const j=({key:e,havePermission:t})=>"VIEW_READONLY_WORKFLOW"===e&&t||"ADMINISTER"===e&&t,E=({key:e,havePermission:t})=>"VIEW_READONLY_WORKFLOW"===e&&t;function v(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function k(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?v(Object(s),!0).forEach((function(t){w(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):v(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function w(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const S=(e,t)=>`\n    query nextGenViewWorkflowQuery {\n        permissions(issueKey:"${e}", keys:["VIEW_READONLY_WORKFLOW", "ADMINISTER"]) {\n            key\n            havePermission\n        }\n        viewIssue(issueKey: "${e}") {\n            fields {\n                ... on IssueTypeField {\n                    fieldKey\n                    id\n                }\n            }\n        }\n        ${t?`project(projectKey: "${t}") {\n            projectId\n            simplified\n            type\n        }`:""}\n    }\n`,I=(e,t,s,n)=>Object(y.a)((e=>`${e}/rest/gira/latest/`)(e),{method:"POST",body:JSON.stringify({query:S(t,s)})}).then(e=>(({data:e},t)=>{if(!e||!e.permissions||!e.viewIssue)return;const{permissions:s,project:n,viewIssue:a}=e,i=!0===(n&&n.simplified||t)?j:E,r=a.fields.find(e=>"issuetype"===e.fieldKey),o={hasPermission:s.some(i),issueTypeId:Object(l.m)(r?r.id:"")};return n&&(o.projectId=Object(l.p)(String(n.projectId)),o.projectType=Object(O.g)(n.type),o.isSimplified=n.simplified),o})(e,n));class C extends n.Component{constructor(e){super(e),this.fetch=async()=>{const{baseUrl:e,projectKey:t,issueKey:s,isSimplified:n}=this.props;this.request();try{const a=await I(e,s,t,n);this.success(a)}catch(a){h.a.safeError("issue-field.status.fetch-view-workflow",a),this.failure(a)}},this.request=()=>{this.setState({error:void 0,loading:!0,data:void 0})},this.success=e=>{this.setState({loading:!1,data:e})},this.failure=e=>{this.setState({error:e,loading:!1})},this.state={data:void 0,loading:!1,error:void 0}}render(){return this.props.children(k(k({},this.state),{},{fetch:this.fetch}))}}function T(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function P(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function _(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?P(Object(s),!0).forEach((function(t){x(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):P(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function x(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}C.displayName="ViewWorkflowService";const D={data:void 0,loading:!1,error:void 0,fetch:()=>Promise.resolve()},A=e=>{const{ViewWorkflowService:t,ContainerContextSubscriber:s,baseUrl:n,issueKey:i,children:r}=e,o=i?Object(b.a)(i):null;return i&&o?a.a.createElement(s,null,({data:e})=>{const s=((e,t)=>{if(!e||!e.project)return;const s=e.project;return s.key===t?{projectId:Object(l.p)(s.id.toString()),projectType:s.type,isSimplified:s.isSimplified}:void 0})(e,o);return s&&!g(s)?r(_({},D)):a.a.createElement(t,{baseUrl:n,issueKey:i,projectKey:s?void 0:o,isSimplified:s&&s.isSimplified},e=>{let{data:t}=e,n=T(e,["data"]);const a=s||t?_(_({},s),t):void 0;return r(_({data:a},n))})}):r(_({},D))};A.displayName="ViewWorkflowContextService",A.defaultProps={ViewWorkflowService:C};var M=A,L=s("./node_modules/react-intl/lib/index.es.js"),R=s("./node_modules/@atlaskit/select/dist/esm/PopupSelect/PopupSelect.js"),N=s("./src/packages/platform/observability/browser-metrics/src/index.js"),U=s("./src/packages/common-legacy-do-not-add-anything-new/src/blanket/index.js"),F=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/analytics-event-to-props.js"),V=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),K=s("./src/packages/issue/fields/status/src/common/ui/status-lozenge/main.js"),B=s("./src/packages/issue/fields/status/src/common/utils.js"),W=s("./src/packages/issue/fields/status/src/constants.js"),H=s("./src/packages/issue/fields/status/src/ui/status-view/messages.js"),G=s("./node_modules/@atlaskit/spinner/dist/es2019/spinner.js"),$=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),q=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const z=$.default.div(["padding:","px;text-align:center;"],q.e),Y=()=>a.a.createElement(z,null,a.a.createElement(G.a,null));Y.displayName="LoadingSpinner";var Q=s("./node_modules/@atlaskit/icon/glyph/chevron-down.js"),J=s.n(Q),Z=s("./node_modules/@atlaskit/theme/dist/es2019/index.js");const X=Object($.keyframes)(["to{box-shadow:0 0 0 10px rgba(0,0,0,0);}"]),ee=$.default.div(["display:inline-flex;border-radius:3px;box-shadow:0 0 0 0 ",";animation:",";"],Z.a.G400,e=>e.shouldShow?`${X} 1.45s cubic-bezier(0.5, 0, 0, 1)`:"none");class te extends n.Component{constructor(...e){super(...e),this.state={shouldShow:!1}}componentDidUpdate(e){e.status.statusCategory.id!==this.props.status.statusCategory.id&&this.setState({shouldShow:3===this.props.status.statusCategory.id})}render(){return a.a.createElement(ee,{shouldShow:this.state.shouldShow},this.props.children)}}te.displayName="Pulse";var se=s("./node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js"),ne=s("./node_modules/@atlaskit/button--current/dist/es2019/components/Button.js");const ae=e=>`\n    &:not(:active), &:disabled {\n        background: ${e.background} !important;\n        color: ${e.color} !important;\n    }\n    \n    &:hover:not(:active) {\n        background: ${e.backgroundHover} !important;\n        color: ${e.color} !important;\n    }\n`,ie={default:{background:Z.a.N20A,backgroundHover:Z.a.N30A,color:Z.a.N400},todo:{background:Z.a.N40,backgroundHover:Z.a.N50,color:Z.a.N800},inProgress:{background:Z.a.B400,backgroundHover:Z.a.B500,color:Z.a.N0},done:{background:Z.a.G400,backgroundHover:Z.a.G500,color:Z.a.N0}},re=Object(se.a)(ne.a,{target:"elro8wh0"})("font-weight:600;",e=>!e.isSelected&&ae(ie.default),";"),oe=Object(se.a)(ne.a,{target:"elro8wh1"})("font-weight:600;",e=>!e.isSelected&&ae(ie.todo),";"),ce=Object(se.a)(ne.a,{target:"elro8wh2"})("font-weight:600;",e=>!e.isSelected&&ae(ie.inProgress),";"),le=Object(se.a)(ne.a,{target:"elro8wh3"})("font-weight:600;",e=>!e.isSelected&&ae(ie.done),";"),ue=e=>{const{ariaLabel:t,isEditable:s,isOpen:n,status:i,targetRef:r}=e,o=(e=>{switch(e){case 2:return oe;case 3:return le;case 4:return ce;default:return re}})(i.statusCategory.id);return a.a.createElement("div",{ref:r},a.a.createElement(te,{status:i},a.a.createElement(o,{"aria-label":t,"aria-expanded":n,isDisabled:!s,iconAfter:a.a.createElement(J.a,{label:""})},i.name)))};ue.displayName="StatusButton";var de=s("./node_modules/@atlaskit/icon/glyph/arrow-right.js"),pe=s.n(de),me=Object(L.defineMessages)({globalTransition:{id:"issue-field-status.status-view.transition.with-label.global-transition",defaultMessage:"Transition to"}});const be=$.default.div(["display:flex;"]),fe=$.default.span(["flex-grow:1;"]),ge=$.default.span(["flex-shrink:0;display:flex;"]),he=$.default.div(["display:inline-flex;align-items:center;"]),ye=e=>a.a.createElement(be,null,a.a.createElement(fe,null,((e,t)=>e.isGlobal?e.name!==e.to.name?e.name:t.formatMessage(me.globalTransition):e.name)(e.transition,e.intl)),a.a.createElement(ge,null,a.a.createElement(he,null,a.a.createElement(pe.a,{label:"",size:"small"})),a.a.createElement(K.a,{status:e.transition.to})));ye.displayName="TransitionWithLabel";const Oe=Object(L.injectIntl)(ye),je=e=>a.a.createElement(K.a,{status:e.transition.to});je.displayName="TransitionWithoutLabel";const Ee=e=>e.hasLabel?a.a.createElement(Oe,{transition:e.transition}):a.a.createElement(je,{transition:e.transition}),ve=Object(F.a)("statusField",{onOpen:"openDropdown",onChange:"transitionSelected"})(R.a);class ke extends n.Component{constructor(...e){super(...e),this.state={isOpen:!1},this.onChildWrapperRefUpdate=e=>{this.childWrapperRef=e},this.wasChanged=!1,this.onChange=(e,t,s)=>{const{hasScreen:n}=e.transition;this.wasChanged=!0,Object(N.c)().markStartOfInteraction({key:W.a.TIME_TO_APPLY_SELECTED_OPTION,cancelExisting:!0}),n&&Object(N.c)().markStartOfInteraction({key:W.a.TIME_TO_OPEN_TRANSITION_SCREEN,cancelExisting:!0}),Object(V.h)(s,"transitionSelectedStatusField",{hasScreen:n}),this.props.onChange(e.transition,s)},this.onOpen=e=>{Object(N.c)().markStartOfInteraction({key:W.a.TIME_TO_RENDER_OPTIONS,cancelExisting:!0}),Object(V.h)(e,"openDropdownStatusField"),this.props.onOpen(e),this.setState({isOpen:!0})},this.onClose=()=>{this.wasChanged||Object(N.c)().markStartOfInteraction({key:W.a.TIME_TO_CANCEL_DROPDOWN,cancelExisting:!0}),this.wasChanged=!1,this.props.onClose(),this.setState({isOpen:!1})},this.childWrapperRef=void 0}componentDidUpdate(e,t){const{transitions:s,isSaving:n}=this.props,{isOpen:a}=this.state;!0===e.isSaving&&!1===n&&this.childWrapperRef&&this.childWrapperRef.children.length>0&&this.childWrapperRef.children[0].focus();const i=!t.isOpen&&a,r=null===e.transitions&&s;i&&!s&&Object(N.c)().markTimeToFeedback({key:W.a.TIME_TO_RENDER_OPTIONS}),(i&&s||a&&r)&&setTimeout(()=>{Object(N.c)().markTimeToFinishTask({key:W.a.TIME_TO_RENDER_OPTIONS})}),t.isOpen&&!a&&setTimeout(()=>{Object(N.c)().markTimeToFinishTask({key:W.a.TIME_TO_APPLY_SELECTED_OPTION}),Object(N.c)().markTimeToFinishTask({key:W.a.TIME_TO_CANCEL_DROPDOWN})})}componentWillUnmount(){Object.keys(W.a).forEach(e=>{Object(N.c)().cancel({key:W.a[e]},!0)})}renderLozenge({isEditable:e,isSaving:t,error:s,targetRef:n}){const{intl:{formatMessage:i},value:r}=this.props;return t?a.a.createElement(U.a,{border:!1},a.a.createElement(K.c,{targetRef:n,status:r,error:s})):a.a.createElement(K.c,{ariaLabel:i(H.a.changeStatus),error:s,hasHoverState:!0,isEditable:e,isOpen:this.state.isOpen,status:r,targetRef:n})}renderButton({isEditable:e,isSaving:t,targetRef:s}){const{intl:{formatMessage:n},value:i}=this.props,r=a.a.createElement(ue,{ariaLabel:`${i.name} - ${n(H.a.changeStatus)}`,isEditable:e,isOpen:this.state.isOpen,status:i,targetRef:s});return t?a.a.createElement(U.a,null,r):r}renderWithFocusWrapper(e){return a.a.createElement("div",{ref:this.onChildWrapperRefUpdate},e)}renderTarget({isEditable:e,isSaving:t,error:s,targetRef:n}){const{appearance:i,value:r}=this.props;if(r){if("lozenge"===i)return this.renderWithFocusWrapper(this.renderLozenge({isEditable:e,isSaving:t,error:s,targetRef:n}));if("button"===i)return this.renderWithFocusWrapper(this.renderButton({isEditable:e,isSaving:t,targetRef:n}))}return(a.a.createElement("div",null))}render(){const{footer:e,isLoading:t,isEditable:s,isSaving:n,error:i,value:r,intl:{formatMessage:o},transitions:c}=this.props,l=null!=c,u=Object(B.a)(c,r.id),d=Object(B.c)(u||[]);return n||!s?this.renderTarget({isSaving:n,isEditable:s,error:i}):a.a.createElement(ve,{noOptionsMessage:()=>o(l?H.a.noPermission:H.a.cannotLoadTransitions),formatOptionLabel:e=>a.a.createElement(Ee,{transition:e.transition,hasLabel:!d}),options:Object(B.d)(u||[]),target:({ref:e})=>this.renderTarget({isEditable:s,isSaving:n,error:i,targetRef:e}),isLoading:t,isDisabled:!s,searchThreshold:99999,onChange:this.onChange,onOpen:this.onOpen,onClose:this.onClose,closeMenuOnSelect:!0,components:{LoadingMessage:()=>a.a.createElement(Y,null)},popperProps:{modifiers:{offset:{offset:"0, 8"},preventOverflow:{boundariesElement:"viewport"}},positionFixed:!0},footer:e})}}ke.displayName="StatusView",ke.defaultProps={isEditable:!0,isSaving:!1,onChange:r.a,onOpen:r.a,onClose:r.a};var we=Object(L.injectIntl)(ke),Se=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/analytics-context-wrapper.js"),Ie=s("./src/packages/platform/observability/product-analytics-bridge/src/constants.js"),Ce=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics-component.js"),Te=Object(L.defineMessages)({errorMessage:{id:"issue-field-status.common.view-workflow.error.error-message",defaultMessage:"Couldn\u2019t find the workflow."},tryAgain:{id:"issue-field-status.common.view-workflow.error.try-again",defaultMessage:"Try again"}});const Pe=$.default.div(["height:","px;border-top:2px solid ",";display:flex;align-items:center;padding:0 ","px;justify-content:center;"],6*q.e,Z.a.N40,1.5*q.e),_e=$.default.div(["display:flex;flex-grow:1;height:100%;"]),xe=$.default.div(["margin-right:","px;"],q.e);class De extends n.Component{constructor(...e){super(...e),this.onRetry=(e,t)=>{Object(V.h)(t,"retryViewWorkflowButton"),this.props.onRetry(e)}}render(){const{intl:{formatMessage:e}}=this.props;return(a.a.createElement(Se.a,{sourceName:"viewWorkflowError",sourceType:Ie.f},a.a.createElement(Pe,null,a.a.createElement(xe,null,e(Te.errorMessage)),a.a.createElement(_e,null,a.a.createElement(ne.a,{appearance:"link",spacing:"none",onClick:this.onRetry},e(Te.tryAgain))),a.a.createElement(Ce.b,null))))}}De.displayName="Error";var Ae=Object(L.injectIntl)(De),Me=s("./src/packages/common-legacy-do-not-add-anything-new/src/bridge/index.js"),Le=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/create-event.js"),Re=s("./src/packages/platform/ui/flags/src/index.js"),Ne=s("./src/packages/wrm/src/async-wrm.js"),Ue=s("./node_modules/@atlaskit/tooltip/dist/es2019/Tooltip.js"),Fe=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/mount-event-component.js"),Ve=Object(L.defineMessages)({viewWorkflow:{id:"issue-field-status.common.view-workflow.button.view-workflow",defaultMessage:"View workflow"}});const Ke=$.default.div(["height:","px;border-top:2px solid ",";"],6*q.e,Z.a.N40),Be=$.default.div(["display:flex;flex-grow:1;height:100%;"]),We=`${1.5*q.e}px`,He=$.default.div(["color:",";text-align:left;padding:0 ",";"],e=>e.isDisabledColor?Z.a.N70:Z.a.N900,We),Ge=({content:e,children:t})=>e?a.a.createElement(Ue.a,{tag:"span",content:e},t):t,$e=({isDisabled:e,isLoading:t,isInitialLoading:s,onClick:n,onMount:i,tooltipContent:r,intl:o})=>a.a.createElement(Ke,null,a.a.createElement(Fe.a,{onMount:i}),a.a.createElement(Ge,{content:r},a.a.createElement(Be,null,a.a.createElement(ne.a,{"data-test-id":"issue-field-status.common.ui.view-workflow.button.view-workflow",shouldFitContainer:!0,appearance:"subtle",spacing:"none",isDisabled:e,isLoading:t,onClick:n},a.a.createElement(He,{isDisabledColor:!0===e&&!s},o.formatMessage(Ve.viewWorkflow))))));$e.displayName="ViewWorkflowButton";var qe=Object(L.injectIntl)($e),ze=Object(L.defineMessages)({noPermission:{id:"issue-field-status.common.view-workflow.no-permission",defaultMessage:"You don't have permission to view this workflow."},loading:{id:"issue-field-status.common.view-workflow.loading",defaultMessage:"Looks like your connection is slow. We\u2019re still finding this workflow."}}),Ye=s("./node_modules/@atlaskit/analytics-next--current/dist/esm/withAnalyticsEvents.js"),Qe=s("./src/packages/platform/utils/fetch/src/utils/requests.js");const Je=e=>{if(e.data&&e.data.viewIssue&&e.data.viewIssue.workflow)return{workflowName:e.data.viewIssue.workflow.name,currentStepId:e.data.viewIssue.workflow.step.id};throw new Error("TransformError")};function Ze(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Xe(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ze(Object(s),!0).forEach((function(t){et(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ze(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function et(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class tt extends n.Component{constructor(...e){super(...e),this.state={data:void 0,error:void 0,loading:!1},this.load=async()=>{this.onLoading();const{baseUrl:e,issueKey:t}=this.props;try{this.fireAnalytics();const s=await((e,t)=>Object(Qe.d)(`${e}/rest/gira/1/`,{body:JSON.stringify({query:"\nquery classicViewWorkflowQuery($issueKey: String!) {\n    viewIssue(issueKey: $issueKey) {\n        workflow {\n            name\n            step {\n                id\n            }\n        }\n    }\n}\n",variables:{issueKey:t}})}).then(Je))(e,t);this.onLoadSucceeded(s)}catch(s){h.a.safeError("issue-field.status.classic-view-workflow-service.fetch","Failed to fetch classic view workflow data.",{errorReason:s.message&&"TransformError"===s.message?"transform":"fetch"}),this.onLoadFailed(s)}}}componentDidMount(){!0===this.props.shouldLoadOnMount&&this.load()}onLoading(){this.setState({data:void 0,error:void 0,loading:!0})}onLoadSucceeded(e){this.setState({data:e,error:void 0,loading:!1})}onLoadFailed(e){this.setState({data:void 0,error:e,loading:!1})}fireAnalytics(){const e=this.props.createAnalyticsEvent({action:"requested"});Object(V.b)(e,"classicViewWorkflowData requested")}render(){return this.props.children(Xe(Xe({},this.state),{},{retry:this.load}))}}tt.displayName="ClassicViewWorkflowService",tt.defaultProps={shouldLoadOnMount:!0};const st=Object(Ye.a)()(tt),nt=Object(L.defineMessages)({title:{id:"issue-field-status.view-workflow.classic.flags.errors.load-modal-error.title",defaultMessage:"We couldn't load the workflow"},description:{id:"issue-field-status.view-workflow.classic.flags.errors.load-modal-error.description",defaultMessage:"Check your connection, then try reloading the page."}});var at=()=>({type:"error",title:nt.title,description:nt.description});class it extends n.Component{constructor(...e){super(...e),this.state={isLoadingModal:!1,isRefetching:!1,isModalMounted:!1},this.modalApi=void 0,this.onClick=(e,t,s,n)=>{Object(V.h)(e,"viewWorkflowTrigger",{isSimplifiedProject:!1}),this.modalApi&&s&&n&&(this.setState({isLoadingModal:!0,isRefetching:!1}),this.modalApi.then(e=>{e.showDialog(s,n),window.dispatchEvent(Object(Le.a)("resize")),this.setState({isModalMounted:!0})}).catch(()=>{t&&t(at()),this.setState({isLoadingModal:!1})}))},this.onRetry=(e,t)=>(e.stopPropagation(),this.setState({isRefetching:!0}),t().then(()=>this.setState({isRefetching:!1}))),this.onMount=e=>{const{hasPermission:t}=this.props;Object(V.b)(e,"viewWorkflowTrigger mounted",{hasViewWorkflowPermission:t,isSimplifiedProject:!1})}}componentDidMount(){const e="workflow-designer/view-classic-project-workflow";this.modalApi=Object(Me.a)({name:e,tentatives:0,shouldLogError:!1}).catch(()=>(Object(Ne.a)(["wr!com.atlassian.jira.plugins.jira-workflow-designer:view-issue-page-workflow-designer"]),Object(Me.a)({name:e})))}getTooltipMessage(e){const{isServiceRefetching:t,intl:s,hasPermission:n}=this.props;return t||e?s.formatMessage(ze.loading):n?"":s.formatMessage(ze.noPermission)}render(){const{isServiceLoading:e,isServiceRefetching:t,issueKey:s,baseUrl:n,hasPermission:i,FlagServiceSubscriber:r,ClassicViewWorkflowService:o}=this.props,{isLoadingModal:c,isModalMounted:l,isRefetching:u}=this.state,d=c&&!l,p=!i||d,m=d||t||u;return a.a.createElement(r,null,({showFlag:t})=>a.a.createElement(o,{issueKey:s,baseUrl:n,shouldLoadOnMount:i},({data:s,error:n,loading:i,retry:r})=>{if(n)return a.a.createElement(Ae,{onRetry:e=>{this.onRetry(e,r)}});const o=s?s.workflowName:null,c=s?s.currentStepId:null;return a.a.createElement(qe,{onMount:this.onMount,tooltipContent:this.getTooltipMessage(e||i),isDisabled:p||i,isLoading:m,isInitialLoading:e||i,onClick:(e,s)=>this.onClick(s,t,o,c)})}))}}it.displayName="ViewWorkflowClassic",it.defaultProps={ClassicViewWorkflowService:st,FlagServiceSubscriber:Re.FlagServiceSubscriber};var rt=Object(L.injectIntl)(it);class ot extends n.Component{constructor(...e){super(...e),this.state={isLoadingModal:!1},this.onMount=e=>{const{hasPermission:t}=this.props;Object(V.b)(e,"viewWorkflowTrigger mounted",{hasViewWorkflowPermission:t,isSimplifiedProject:!0})},this.onClick=(e,t)=>{Object(V.h)(t,"viewWorkflowTrigger",{isSimplifiedProject:!0}),this.setState({isLoadingModal:!0});const{issueTypeId:s=Object(l.m)(""),projectId:n=Object(l.p)(""),onOpenModal:a}=this.props;a(s,n)}}getTooltipMessage(){const{isServiceLoading:e,isServiceRefetching:t,hasPermission:s,intl:n}=this.props;return e||t?n.formatMessage(ze.loading):!0!==s?n.formatMessage(ze.noPermission):""}render(){const{isServiceLoading:e,isServiceRefetching:t,hasPermission:s,isModalMounted:n}=this.props,{isLoadingModal:i}=this.state,r=i&&!n,o=!0!==s||r,c=t||r,l=this.getTooltipMessage();return a.a.createElement(qe,{onMount:this.onMount,tooltipContent:l,isDisabled:o,isLoading:c,isInitialLoading:e,onClick:this.onClick})}}ot.displayName="ViewWorkflowSimplified",ot.defaultProps={hasPermission:!1};var ct=Object(L.injectIntl)(ot);class lt extends n.Component{constructor(...e){super(...e),this.state={isWorkflowServiceRefetching:!1},this.onWorkflowServiceRefetch=async(e,t)=>{e.stopPropagation(),this.setState({isWorkflowServiceRefetching:!0}),await t(),this.setState({isWorkflowServiceRefetching:!1})}}render(){const{baseUrl:e,issueKey:t,isModalMounted:s,onOpenModal:n,workflowServiceApi:i}=this.props,{isWorkflowServiceRefetching:r}=this.state,{data:o,loading:c,error:l,fetch:u}=i;if(l)return a.a.createElement(Ae,{onRetry:e=>{this.onWorkflowServiceRefetch(e,u)}});if(!o||!g(o))return null;const{isSimplified:d,projectId:p,issueTypeId:m,hasPermission:b}=o;return!0===d?a.a.createElement(ct,{projectId:p,issueTypeId:m,isModalMounted:s,hasPermission:b,isServiceLoading:c,isServiceRefetching:r,onOpenModal:n}):a.a.createElement(rt,{baseUrl:e,issueKey:t,hasPermission:b,isServiceLoading:c,isServiceRefetching:r})}}lt.displayName="ViewWorkflow";var ut=s("./node_modules/react-loosely-lazy/lib/esm/index.js"),dt=s("./src/packages/platform/ui/modal/src/index.js");const pt=({children:e,packageName:t})=>a.a.createElement(dt.a,{id:"workflow-readonly-modal",metricKey:"WORKFLOW_READONLY_MODAL_LOAD_START_MARK_KEY",packageName:t},e);pt.displayName="WorkflowReadonlyModalBoundary";const mt=Object(ut.f)(()=>s.e("async-issue-workflow-readonly-modal").then(s.bind(null,"./src/packages/issue/workflow-readonly-modal/src/index.js")),{moduleId:"./src/packages/issue/workflow-readonly-modal/src/index.js"});class bt extends n.Component{constructor(...e){super(...e),this.state={shouldMountWorkflow:!1}}static getDerivedStateFromProps(e,t){return{shouldMountWorkflow:t.shouldMountWorkflow||e.isOpen}}render(){const{issueKey:e,issueTypeId:t,baseUrl:s,locale:n,cloudId:i,projectId:r,isOpen:o,onModalMounted:c,onClose:l}=this.props,{shouldMountWorkflow:u}=this.state;return u&&a.a.createElement(pt,{packageName:"issue"},a.a.createElement(mt,{onMounted:c,issueKey:e,issueTypeId:t,baseUrl:s,locale:n,isOpen:o,cloudId:i,projectId:r,onClose:l}))}}bt.displayName="WorkflowModal";var ft=bt;class gt extends n.Component{constructor(...e){super(...e),this.state={isWorkflowModalOpen:!1,isWorkflowModalMounted:!1,issueTypeId:Object(l.m)(""),projectId:Object(l.p)("")},this.onOpenModal=(e,t)=>{this.setState({isWorkflowModalOpen:!0,issueTypeId:e,projectId:t})},this.onCloseModal=()=>{this.setState({isWorkflowModalOpen:!1})},this.onModalMounted=()=>{this.setState({isWorkflowModalMounted:!0})}}render(){const{issueKey:e,projectType:t,isEditable:s,isOptimistic:n,initialValue:i,appearance:r,onSubmit:l,onSuccess:u,onFailure:d,onEditStart:b,onEditCancel:f,value:g,TenantContextSubscriber:h,ContainerContextSubscriber:y,preFetchTransitions:O,ViewWorkflowContextService:j}=this.props;return(a.a.createElement(h,null,({tenantContext:h})=>h?a.a.createElement(p.a,{value:g,projectType:t,initialValue:i,issueKey:e,baseUrl:h.baseUrl,onSubmit:l,onSuccess:u,onFailure:d,onEditStart:b,onEditCancel:f},({value:i,loading:l,transitionStatus:u,error:d,resetError:p})=>a.a.createElement(m.a,{issueKey:e,baseUrl:h.baseUrl,status:i,isSaving:l,preFetch:O,projectType:t},({data:t,loading:m,fetch:g})=>a.a.createElement(j,{ContainerContextSubscriber:y,baseUrl:h.baseUrl,issueKey:e},y=>a.a.createElement(a.a.Fragment,null,a.a.createElement(we,{value:i,isEditable:s,isLoading:m||l,isSaving:!0!==n&&l,appearance:r,transitions:t,onOpen:e=>{b(),g(e),!0!==(y.data&&void 0!==y.data.hasPermission)&&y.fetch(),p()},onClose:f,onChange:u,error:d,footer:a.a.createElement(o.a,{id:"issue-field-view-workflow"},a.a.createElement(lt,{baseUrl:h.baseUrl,issueKey:e,workflowServiceApi:y,onOpenModal:this.onOpenModal,isModalMounted:this.state.isWorkflowModalMounted}))}),a.a.createElement(c.b,null,a.a.createElement(ft,{onModalMounted:this.onModalMounted,issueKey:e,issueTypeId:this.state.issueTypeId,baseUrl:h.baseUrl,locale:h.locale,cloudId:h.cloudId,projectId:this.state.projectId,isOpen:this.state.isWorkflowModalOpen,onClose:this.onCloseModal})))))):null))}}gt.displayName="StatusField",gt.defaultProps={isOptimistic:!0,TenantContextSubscriber:d.b,ContainerContextSubscriber:u.a,ViewWorkflowContextService:M,preFetchTransitions:!1,projectType:null,onEditStart:r.a,onEditCancel:r.a,onSubmit:r.a,onSuccess:r.a,onFailure:r.a}},"./src/packages/issue/fields/status/src/ui/status-view-lozenge/main.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./src/packages/platform/controllers/intl/src/index.js"),r=s("./src/packages/issue/fields/status/src/common/ui/status-lozenge/main.js"),o=s("./src/packages/issue/fields/status/src/ui/main.js"),c=s("./src/packages/issue/fields/status/src/ui/status-view/messages.js");const l=e=>{const[t,s]=Object(n.useState)(!1),l=Object(n.useCallback)(()=>s(!0),[]),u=Object(n.useRef)(null),{formatMessage:d}=Object(i.c)(),{initialValue:p,isEditable:m}=e;return Object(n.useEffect)(()=>{t&&setTimeout(()=>{var e,t;return null===(e=u.current)||void 0===e||null===(t=e.querySelector(`[data-test-id^="${r.b}"]`))||void 0===t?void 0:t.click()})},[t]),t?a.a.createElement("div",{ref:u},a.a.createElement(o.a,e)):a.a.createElement("div",{onClick:l},a.a.createElement(r.c,{ariaLabel:d(c.a.changeStatus),hasHoverState:!0,isEditable:m,isOpen:!1,status:p}))};l.displayName="StatusViewLozenge",t.a=l},"./src/packages/issue/fields/status/src/ui/status-view/actions/main.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/lodash/noop.js"),r=s.n(i),o=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),s("./src/packages/issue/issue-context-service/src/main.js")),c=s("./src/packages/issue/project-context-service/src/main.js"),l=s("./src/packages/platform/controllers/tenant-context/src/components/index.js"),u=s("./src/packages/issue/fields/status/src/common/utils.js"),d=s("./src/packages/issue/fields/status/src/services/status-service/main.js"),p=s("./src/packages/issue/fields/status/src/services/transitions-query/index.js"),m=s("./node_modules/@atlaskit/button--current/dist/es2019/components/Button.js");const b=e=>a.a.createElement(m.a,{onClick:(t,s)=>{e.onClick(e.transition,s)}},e.transition.name);b.displayName="ActionsButton";var f=s("./node_modules/@atlaskit/badge/dist/es2019/components/index.js"),g=s("./node_modules/@atlaskit/dropdown-menu/dist/es2019/components/item/DropdownItem.js"),h=s("./node_modules/@atlaskit/dropdown-menu/dist/es2019/components/DropdownMenuStateless.js"),y=s("./node_modules/@atlaskit/dropdown-menu/dist/es2019/components/group/DropdownItemGroup.js"),O=s("./node_modules/@atlaskit/icon/glyph/chevron-down.js"),j=s.n(O),E=s("./node_modules/@atlaskit/tooltip/dist/es2019/Tooltip.js"),v=s("./src/packages/platform/controllers/intl/src/index.js"),k=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/analytics-event-to-props.js"),w=s("./node_modules/react-intl/lib/index.es.js"),S=Object(w.defineMessages)({actions:{id:"issue-field-status.status-view.actions.actions-menu.actions",defaultMessage:"Actions"}}),I=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),C=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const T=I.default.span(["padding-right:","px;"],.75*C.e),P=Object(k.a)("dropdownItem",{onClick:"clicked"})(g.a),_=e=>{const{transitions:t,onSelect:s}=e,{formatMessage:i}=Object(v.c)(),[r,o]=Object(n.useState)(!1);return 0===t.length?null:a.a.createElement(h.a,{trigger:a.a.createElement(m.a,{appearance:"subtle",isSelected:r,iconAfter:a.a.createElement(j.a,{label:""})},a.a.createElement(T,null,i(S.actions)),a.a.createElement(f.a,{appearance:"primary"},t.length)),isOpen:r,onOpenChange:()=>{o(!r)}},a.a.createElement(y.a,null,t.map(e=>a.a.createElement(E.a,{key:e.id,content:e.name},a.a.createElement(P,{onClick:(t,n)=>s(e,n)},e.name)))))};_.displayName="ActionsMenu";const x=({initialStatusValue:e,onSubmit:t,onSuccess:s})=>{const n=Object(o.f)(),i=Object(l.e)(),m=Object(o.g)(),f=Object(c.g)(m);return a.a.createElement(d.a,{projectType:f||null,issueKey:n,baseUrl:i,onSubmit:t,onSuccess:s,onFailure:r.a,onEditStart:r.a,onEditCancel:r.a,initialValue:e},({value:e,loading:t,transitionStatus:s})=>a.a.createElement(p.a,{issueKey:n,baseUrl:i,status:e,isSaving:t,preFetch:!0,projectType:f},({data:t,loading:n})=>{const i=Object(u.b)(t,e.id);return n||0===i.length?null:1===i.length?a.a.createElement(b,{transition:i[0],onClick:s}):a.a.createElement(_,{transitions:i,onSelect:s})}))};x.displayName="Actions";t.a=x},"./src/packages/issue/fields/status/src/ui/status-view/messages.js":function(e,t,s){"use strict";var n=s("./node_modules/react-intl/lib/index.es.js");t.a=Object(n.defineMessages)({noPermission:{id:"issue-field-status.status-view.no-permission",defaultMessage:"You don't have permission to transition this issue"},cannotLoadTransitions:{id:"issue-field-status.status-view.cannot-load-transitions",defaultMessage:"We couldn't load the statuses and transitions"},changeStatus:{id:"issue-field-status.status-view.change-status",defaultMessage:"Change status"}})},"./src/packages/issue/fields/summary/src/services/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var n=s("./node_modules/lodash/get.js"),a=s.n(n),i=s("./src/packages/issue/fields/field-base/src/services/field-config-service/main.js"),r=s("./src/packages/issue/fields/field-base/src/services/edit-field-service/main.js");const o=({issueKey:e,onSuccess:t,onFailure:s})=>{const[n]=Object(i.a)(e,"summary"),o=a()(n,"schema.type","string"),[{value:c,error:l},{saveValue:u,resetError:d}]=Object(r.a)({fieldKey:"summary",issueKey:e,fieldType:o,initialValue:null,onSuccess:t,onFailure:s});return[{value:c,error:l,fieldConfig:n},{saveValue:u,resetError:d}]}},"./src/packages/issue/fields/voters/src/messages.js":function(e,t,s){"use strict";var n=s("./node_modules/react-intl/lib/index.es.js");t.a=Object(n.defineMessages)({fetchVotersListFailedTitle:{id:"issue-field-voters.fetch-voters-list-failed-title",defaultMessage:"We couldn't load the voters list"},fetchVotersListFailedDescription:{id:"issue-field-voters.fetch-voters-list-failed-description",defaultMessage:"Check your connection, then give it another try."},updateVoteFailedTitle:{id:"issue-field-voters.update-vote-failed-title",defaultMessage:"We couldn't update your vote status"},updateVoteFailedDescription:{id:"issue-field-voters.update-vote-failed-description",defaultMessage:"Check your connection, then try clicking vote again."},addVoteLabel:{id:"issue-field-voters.add-vote-label",defaultMessage:"Vote for this issue"},removeVoteLabel:{id:"issue-field-voters.remove-vote-label",defaultMessage:"Remove Vote"},voteOptionsTooltip:{id:"issue-field-voters.vote-options-tooltip",defaultMessage:"Vote options"},emptyVotersMessage:{id:"issue-field-voters.empty-voters-message",defaultMessage:"No one has voted for this issue"},votersListLabel:{id:"issue-field-voters.voters-list-label",defaultMessage:"Voted for this issue"}})},"./src/packages/issue/fields/voters/src/services/voters-list-service/context.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return u})),s.d(t,"b",(function(){return d})),s.d(t,"a",(function(){return p}));var n={};s.r(n),s.d(n,"setVoters",(function(){return o})),s.d(n,"setLoggedInUserAction",(function(){return c}));var a=s("./node_modules/react-sweet-state/lib/esm/store/create.js"),i=s("./node_modules/react-sweet-state/lib/esm/components/hook.js"),r=s("./node_modules/react-sweet-state/lib/esm/components/container.js");const o=e=>({setState:t})=>{t({voters:e})},c=e=>({setState:t})=>{t({loggedInUserAction:e})},l=Object(a.a)({name:"issue-voters",initialState:{voters:[],loggedInUserAction:void 0},actions:n}),u=Object(i.a)(l,{selector:e=>e.voters}),d=Object(i.a)(l,{selector:e=>e.loggedInUserAction}),p=Object(r.a)(l)},"./src/packages/issue/fields/voters/src/services/voters-list-service/main.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return j}));var n=s("./node_modules/react/index.js"),a=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),s("./src/packages/platform/services/common/src/use-service/index.js")),i=s("./src/packages/platform/utils/fetch/src/utils/requests.js"),r=s("./src/packages/platform/ui/flags/src/index.js"),o=s("./src/packages/issue/issue-context-service/src/main.js"),c=s("./src/packages/issue/fields/field-base/src/services/field-value-service/main.js"),l=s("./src/packages/platform/controllers/tenant-context/src/components/index.js"),u=s("./src/packages/platform/services/user/src/components/index.js"),d=s("./src/packages/issue/fields/voters/src/messages.js"),p=s("./src/packages/issue/fields/voters/src/services/voters-list-service/context.js");const m="ADDED",b="REMOVED";var f=s("./src/packages/platform/utils/types/src/general.js");const g=e=>({id:Object(f.a)(e.accountId),displayName:e.displayName,avatarUrl:e.avatarUrls&&e.avatarUrls["48x48"]});function h(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function y(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?h(Object(s),!0).forEach((function(t){O(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):h(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function O(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const j=()=>{const[{data:e}]=Object(u.c)(),[t,{setVoters:s}]=Object(p.c)(),[f,{setLoggedInUserAction:h}]=Object(p.b)(),O=Object(l.e)(),j=Object(o.f)(),{showFlag:E}=Object(r.useFlagsService)(),[v,{setFieldValue:k}]=Object(c.b)({issueKey:j,fieldKey:"votes"}),[w,S]=Object(n.useState)(!1),I=Object(n.useCallback)(()=>Object(i.b)(`${O}/rest/api/3/issue/${j}/votes`),[O,j]),{loading:C,error:T,data:P,fetch:_}=Object(a.a)(I),x=Object(n.useMemo)(()=>P&&P.voters?P.voters.map(g):t,[P]);Object(n.useEffect)(()=>{P&&P.voters&&(s(x),S(!0))},[P,s,x]);const D=Object(n.useMemo)(()=>{const t=e?g(e):null;switch(f){case m:return((e,t)=>{if(!t||-1!==e.findIndex(e=>e.id===t.id))return e;return[...e,t].sort((e,t)=>e.displayName.localeCompare(t.displayName))})(x,t);case b:return((e,t)=>t?e.filter(e=>e.id!==t.id):e)(x,t);default:return x}},[e,f,x]);Object(n.useEffect)(()=>{T&&E({type:"error",title:d.a.fetchVotersListFailedTitle,description:d.a.fetchVotersListFailedDescription})},[T,E]),Object(n.useEffect)(()=>{if(w&&v.votes!==D.length){const e=void 0===f;k(j,"votes",y(y({},v),{},{votes:D.length,hasVoted:e?v.hasVoted:f===m}))}S(!1)},[w]);const A=Object(n.useCallback)(()=>{h(m)},[h]),M=Object(n.useCallback)(()=>{h(b)},[h]),L=Object(n.useCallback)(()=>{C||_()},[_,C]),R=Object(n.useMemo)(()=>({setLoggedInUserActionVote:A,setLoggedInUserActionUnvote:M,refreshVoters:L}),[A,L,M]);return[{voters:D,isFetching:C,error:T},R]}},"./src/packages/issue/fields/voters/src/ui/button/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/@atlaskit/tooltip/dist/es2019/Tooltip.js"),r=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),s("./node_modules/@atlaskit/icon/glyph/like.js")),o=s.n(r),c=s("./src/packages/issue/issue-context-service/src/main.js"),l=s("./src/packages/issue/fields/field-base/src/services/field-value-service/main.js"),u=s("./node_modules/@atlassian/react-transitive-number/index.js"),d=s.n(u),p=s("./src/packages/issue/fields/voters/src/ui/like-icon-filled/index.js"),m=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),b=s("./node_modules/@atlaskit/theme/dist/es2019/index.js");const f=m.default.span(["display:flex;align-items:center;","}"],e=>e.hasVoted&&!e.isSelected?`color: ${b.a.B500};`:""),g=m.default.span(["display:flex;"]),h=m.default.span(["min-width:",";"],e=>e.hasVoters?"15px":"0"),y=({isSelected:e=!1})=>{const t=Object(c.f)(),[{hasVoted:s,votes:n}]=Object(l.b)({issueKey:t,fieldKey:"votes"});return a.a.createElement(f,{hasVoted:s,isSelected:e},a.a.createElement(g,null,s?a.a.createElement(p.a,{label:"",size:"medium"}):a.a.createElement(o.a,{label:"",size:"medium"})),a.a.createElement(h,{hasVoters:0!==n},a.a.createElement(d.a,null,0!==n?n:"")))};y.displayName="VoteIcon";var O=y,j=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/button/index.js");const E=Object(m.default)(j.a)(["&&{padding:0 4px;}"]),v=({onClick:e,tooltip:t=null,isSelected:s=!1,isDisabled:n=!1})=>a.a.createElement(i.a,{content:t,position:"top"},a.a.createElement(E,{onClick:e,isSelected:s,appearance:"subtle",spacing:"default","aria-label":t,"aria-expanded":s,isDisabled:n},a.a.createElement(O,{isSelected:s})));v.displayName="VoteButton";t.a=v},"./src/packages/issue/fields/voters/src/ui/like-icon-filled/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/@atlaskit/icon/cjs/index.js"),r=s.n(i);const o=()=>a.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},a.a.createElement("defs",null,a.a.createElement("path",{id:"like-filled-a",d:"M4.00029867,12.0000031 L4.00029867,19.0000031 C3.99379083,19.2619469 4.0938648,19.5154845 4.27800285,19.7035645 C4.46214091,19.8916445 4.71487577,19.9984685 4.97933941,20.0000031 L5.99875297,20.0000031 L5.99875297,11.0000031 L4.97933941,11.0000031 C4.71487577,11.0015345 4.46214091,11.1083586 4.27800285,11.2964386 C4.0938648,11.4845186 3.99379083,11.7380562 4.00029867,12.0000031 Z M19.2814088,11.0400031 C18.7031035,10.3648275 17.8537454,9.97663317 16.959972,9.97900342 L14.3256459,9.97900342 C14.3660187,9.79800348 14.4063915,9.61900354 14.4366711,9.4470036 C14.9514245,6.5130046 14.4366711,5.44700497 13.9320109,4.85300517 C13.4705845,4.31076256 12.7907146,3.99849428 12.0748615,4 C10.5305357,4.05274499 9.2630356,5.22781051 9.10745966,6.75100452 C8.71382472,8.59000389 8.6532655,8.75100384 8.13851212,9.47600359 L7.37142865,10.5650032 C7.13702441,10.900368 7.01037109,11.2980817 7.00807332,11.7060028 L7.00807332,17.9790007 C7.0094101,18.5107601 7.22390249,19.0202137 7.60436426,19.3952867 C7.98482603,19.7703597 8.50009148,19.9803277 9.03680723,19.9790426 L16.2837274,19.9790426 C17.7690249,19.9867984 19.0398298,18.9240081 19.2814088,17.4720009 L19.9576535,13.4720022 C20.1064636,12.6021375 19.8588502,11.7116379 19.2814088,11.0400031 Z"})),a.a.createElement("g",{fillRule:"evenodd"},a.a.createElement("use",{fill:"currentColor",xlinkHref:"#like-filled-a"}),a.a.createElement("path",{fill:"inherit",d:"M17.2829545,17.140001 C17.2013522,17.6232979 16.7783039,17.9768163 16.2837274,17.9750077 L9.03680723,17.9750077 L9.03680723,11.7060028 L9.8038907,10.6170032 C10.5252697,9.572607 10.9727451,8.36664508 11.105914,7.1080044 C11.1422788,6.56547046 11.3606605,5.89943888 12.0748615,6.00000478 C12.7890625,6.10057068 12.6501741,7.91600412 12.4382168,9.10000372 C12.2228565,10.0810361 11.9326853,11.0444672 11.5702013,11.9820027 L16.959972,11.9740027 C17.2574249,11.9729101 17.5402185,12.1018688 17.7328364,12.3264423 C17.9254544,12.5510157 18.0082813,12.848334 17.9591992,13.1390023 L17.2829545,17.140001 Z"})));o.displayName="likeIconFilled";const c=({size:e,label:t,secondaryColor:s="#B3D4FF"})=>a.a.createElement(r.a,{glyph:o,size:e,label:t,secondaryColor:s});c.displayName="LikeIconFilled",t.a=c},"./src/packages/issue/fields/voters/src/ui/vote-toggle/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),s("./node_modules/@atlaskit/icon/glyph/like.js")),r=s.n(i),o=s("./node_modules/@atlaskit/tooltip/dist/es2019/Tooltip.js"),c=s("./src/packages/platform/controllers/intl/src/index.js"),l=s("./src/packages/issue/fields/voters/src/messages.js"),u=s("./node_modules/lodash/get.js"),d=s.n(u),p=s("./src/packages/platform/utils/fetch/src/utils/requests.js"),m=s("./src/packages/platform/ui/flags/src/index.js"),b=s("./src/packages/platform/utils/types/src/general.js"),f=s("./src/packages/issue/issue-context-service/src/main.js"),g=s("./src/packages/issue/fields/field-base/src/services/field-config-service/main.js"),h=s("./src/packages/issue/fields/field-base/src/services/edit-field-service/main.js"),y=s("./node_modules/@atlaskit/analytics-next--current/dist/esm/useAnalyticsEvents.js"),O=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),j=s("./src/packages/issue/fields/voters/src/services/voters-list-service/main.js");function E(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function v(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?E(Object(s),!0).forEach((function(t){k(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):E(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function k(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const w=()=>{const e=Object(f.f)(),[,{setLoggedInUserActionVote:t,setLoggedInUserActionUnvote:s}]=Object(j.a)(),[a]=Object(g.a)(e,"votes"),i=d()(a,"schema.type","votes"),{showFlag:r}=Object(m.useFlagsService)(),{createAnalyticsEvent:o}=Object(y.a)(),c=Object(n.useCallback)((e,n)=>{r({type:"error",title:l.a.updateVoteFailedTitle,description:l.a.updateVoteFailedDescription}),n.hasVoted?s():t()},[r,s,t]),[{value:u,error:E},{saveValue:k,resetError:w}]=Object(h.a)({fieldKey:"votes",issueKey:e,fieldType:i,initialValue:{hasVoted:!1,votes:0},saveField:(t,s,n,a)=>(({issueKey:e,newValue:t,baseUrl:s})=>t.hasVoted?Object(p.d)(`${s}/rest/api/3/issue/${e}/votes`):Object(p.a)(`${s}/rest/api/3/issue/${e}/votes`))({issueKey:e,newValue:n,baseUrl:Object(b.b)(a)}),onFailure:c}),S=Object(n.useCallback)((e=!1)=>{const n=!u.hasVoted,a=o({action:"clicked",actionSubject:"button"});Object(O.h)(a,n?"voteAdded":"voteRemoved",{viewMode:e?"showVotersList":"hideVotersList"}),n?t():s(),k(((e,t)=>v(v({},t),{},e?{votes:t.votes+1,hasVoted:!0}:{votes:t.votes-1,hasVoted:!1}))(n,u),null,a)},[u,o,t,s,k]);return[{value:u,error:E,fieldConfig:a},{toggleValue:S,resetError:w}]};var S=s("./src/packages/issue/fields/voters/src/ui/button/index.js"),I=s("./src/packages/issue/fields/voters/src/ui/like-icon-filled/index.js"),C=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),T=s("./node_modules/@atlaskit/dropdown-menu/dist/es2019/components/item/DropdownItem.js");const P=Object(C.default)(T.a)(["&&&{padding:8px 12px 7px;}"]),_=({onClick:e,isDropdownItem:t=!1,disableVotingProps:s={isDisabled:!1}})=>{const{isDisabled:i,tooltips:u}=s,{formatMessage:d}=Object(c.c)(),[{value:p},{toggleValue:m}]=w(),{buttonLabel:b,disabledTooltip:f}=Object(n.useMemo)(()=>p.hasVoted?{buttonLabel:d(l.a.removeVoteLabel),disabledTooltip:null==u?void 0:u.removeVote}:{buttonLabel:d(l.a.addVoteLabel),disabledTooltip:null==u?void 0:u.addVote},[u,d,p.hasVoted]),g=Object(n.useCallback)(()=>{null==e||e(),m(t)},[t,e,m]);return t?a.a.createElement(o.a,{content:i&&void 0!==f?f:null},a.a.createElement(P,{elemBefore:p.hasVoted?a.a.createElement(r.a,{label:"",size:"medium"}):a.a.createElement(I.a,{label:"",size:"medium"}),onClick:g,isDisabled:i},b)):a.a.createElement(S.a,{tooltip:i?f:b,onClick:g,isDisabled:i})};_.displayName="VoteToggle";t.a=_},"./src/packages/issue/issue-actions/activity-feed/src/messages.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s("./node_modules/react-intl/lib/index.es.js");const a=Object(n.defineMessages)({comments:{id:"issue-activity-feed.comments",defaultMessage:"Comments"},history:{id:"issue-activity-feed.history",defaultMessage:"History"},worklog:{id:"issue-activity-feed.worklog",defaultMessage:"Work log"},activity:{id:"issue-activity-feed.activity",defaultMessage:"Activity"},filterBy:{id:"issue-activity-feed.filter-by",defaultMessage:"Show:"},polarisData:{id:"issue-activity-feed.polaris-data",defaultMessage:"Data"}})},"./src/packages/issue/issue-context-service/src/main.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return T})),s.d(t,"f",(function(){return P})),s.d(t,"e",(function(){return _})),s.d(t,"g",(function(){return x})),s.d(t,"a",(function(){return D})),s.d(t,"d",(function(){return A})),s.d(t,"h",(function(){return M})),s.d(t,"b",(function(){return L}));var n={};s.r(n),s.d(n,"setIssueContext",(function(){return m})),s.d(n,"mergeIssueContext",(function(){return b})),s.d(n,"getMaxTokenLength",(function(){return f})),s.d(n,"getIsLoadedWithPage",(function(){return g})),s.d(n,"getBackButtonUrl",(function(){return h})),s.d(n,"getIsSpaEnabled",(function(){return y}));var a=s("./node_modules/react/index.js"),i=s("./src/packages/platform/utils/types/src/general.js"),r=s("./node_modules/react-sweet-state/lib/esm/store/create.js"),o=s("./node_modules/react-sweet-state/lib/esm/components/hook.js"),c=s("./node_modules/react-sweet-state/lib/esm/components/container.js"),l=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/safe-string.js");function u(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function d(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?u(Object(s),!0).forEach((function(t){p(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):u(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function p(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const m=e=>({setState:t})=>{t(e)},b=e=>({getState:t,setState:s})=>{s(d(d({},t()),e))},f=()=>({getState:e})=>e().maxTokenLength,g=()=>({getState:e})=>e().isLoadedWithPage,h=()=>({getState:e})=>e().backButtonUrl,y=()=>({getState:e})=>e().isSpaEnabled,O={issueKey:Object(i.l)(""),issueId:void 0,isModal:!1,maxTokenLength:0,isLoadedWithPage:!1,rapidViewMap:void 0,estimationStatistic:void 0,isLoading:!1,viewMode:void 0,analyticsSource:void 0,backButtonUrl:void 0,boardId:void 0,boardType:void 0,isSpaEnabled:!1,loginRedirectUrl:void 0,onIssueKeyChange:void 0,rapidViewId:void 0},j=Object(r.a)({name:"issue-context",initialState:O,actions:n}),E=Object(o.a)(j,{selector:e=>e}),v=Object(o.a)(j,{selector:e=>e.issueKey}),k=Object(o.a)(j,{selector:e=>e.issueId}),w=Object(o.a)(j,{selector:e=>e.isModal}),S=Object(o.a)(j,{selector:e=>void 0!==e.analyticsSource?new l.a(e.analyticsSource):void 0}),I=Object(o.a)(j,{selector:e=>e.rapidViewMap}),C=(Object(o.a)(j,{selector:e=>e.maxTokenLength}),Object(o.a)(j,{selector:e=>e.isLoadedWithPage}),Object(o.a)(j,{selector:e=>e.estimationStatistic}),Object(o.a)(j,{selector:e=>e.isLoading}),Object(o.a)(j,{selector:e=>e.viewMode}),Object(o.a)(j,{selector:e=>e.backButtonUrl})),T=(Object(o.a)(j,{selector:e=>e.boardId}),Object(o.a)(j,{selector:e=>e.boardType}),Object(o.a)(j,{selector:e=>e.isSpaEnabled}),Object(o.a)(j,{selector:e=>e.loginRedirectUrl}),Object(o.a)(j,{selector:e=>e.onIssueKeyChange}),Object(o.a)(j,{selector:e=>e.rapidViewId}),Object(c.a)(j),()=>{const[e]=w();return e}),P=()=>{const[e]=v();return e},_=()=>{const[e]=k();return e},x=()=>{const[e]=v();return Object(i.q)(e.split("-")[0])},D=()=>{const[e]=S();return e},A=()=>{const[,{setIssueContext:e,mergeIssueContext:t,getMaxTokenLength:s,getIsLoadedWithPage:n,getBackButtonUrl:i,getIsSpaEnabled:r}]=E();return[null,Object(a.useMemo)(()=>({setIssueContext:e,mergeIssueContext:t,getMaxTokenLength:s,getIsLoadedWithPage:n,getBackButtonUrl:i,getIsSpaEnabled:r}),[e,t,s,n,i,r])]},M=()=>{const[e]=I();return e},L=()=>{const[e]=C();return e}},"./src/packages/issue/issue-context-service/src/types.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"b",(function(){return a}));const n="VIEW_MODE_MODAL",a="VIEW_MODE_SIDEBAR"},"./src/packages/issue/issue-fetch-services-common/src/common/utils/token-browser-utils.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=()=>65536},"./src/packages/issue/issue-fetch-services-common/src/feature-flags.js":function(e,t,s){"use strict";s.d(t,"e",(function(){return r})),s.d(t,"d",(function(){return o})),s.d(t,"c",(function(){return c})),s.d(t,"h",(function(){return l})),s.d(t,"g",(function(){return u})),s.d(t,"b",(function(){return d})),s.d(t,"f",(function(){return p})),s.d(t,"i",(function(){return m})),s.d(t,"a",(function(){return b}));let n=null;const a=()=>(n||(n=(()=>{const e=document.querySelector('meta[name="ajs-fe-feature-flags"]'),t=null==e?void 0:e.getAttribute("content");return null!=t?JSON.parse(t):null})()||(()=>{var e;return null!==(e=window.ssr__feFeatureFlags)&&void 0!==e?e:null})()||{}),n),i=(e,t=!1)=>{const s=a();return s[e]?!!s[e].value:t},r=()=>i("issue.details.forge-ui-integration"),o=()=>i("issue.details.media.tokens.from.gira"),c=()=>i("issue.details.door-knock.prototype-v1"),l=()=>i("jsm.cross.site.issue.link.for.bento.phase1"),u=()=>i("jsm.cross.site.issue.link.for.bento.phase2.link-preview"),d=()=>i("jfp.perf.loading-phases.spa-entry-fullpage-issue"),p=()=>i("jfp.perf.issue-early-data-scoping"),m=()=>i("shpl-113-sort-issue-under-epic",!1),b=()=>i("issue.details.bento-6520-activity-sorting",!1)},"./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/gira-fragments/issue-sections/index.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return n}));const n=()=>`\n  ${(()=>"\nfragment groupItems on GroupSectionItem {\n    ... on FieldSectionItem {\n      id\n    }\n    ... on PanelSectionItem {\n      id\n    }\n    ... on EcosystemSectionItem {\n      id\n    }\n    ... on ForgeSectionItem {\n      id\n    }\n  }")()}\n  ${(()=>"\n  fragment sectionItems on SectionItem {\n    __typename\n    ... on FieldSectionItem {\n      id\n    }\n    ... on TabLayout {\n      id\n      name\n      items {\n        ... on FieldSectionItem {\n          id\n        }\n      }\n    }\n    ... on PanelSectionItem {\n      id\n    }\n    ... on EcosystemSectionItem {\n      id\n    }\n    ... on ForgeSectionItem {\n      id\n    }\n    ... on GroupLayout {\n      id\n      name\n      items {\n        ...groupItems\n      }\n    }\n  }")()}\n  ${(()=>"\nfragment section on Section {\n    items {\n      ...sectionItems\n    }\n  }\n  ")()}\n  `;t.a=()=>"\n  issueSections {\n    __typename\n    ... on PrimarySecondaryContextSections {\n      contentSection {\n        ...section\n      }\n      primaryContextSection {\n        ...section\n      }\n      secondaryContextSection {\n        ...section\n      }\n    }\n    ... on JsdSections {\n      requestPortalSection {\n        ...section\n      }\n      contentSection {\n        ...section\n      }\n      primaryContextSection {\n        ...section\n      }\n      secondaryContextSection {\n        ...section\n      }\n    }\n  }\n  "},"./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return l})),s.d(t,"d",(function(){return u})),s.d(t,"b",(function(){return d})),s.d(t,"c",(function(){return p}));var n=s("./src/packages/issue/issue-fetch-services-common/src/feature-flags.js"),a=s("./src/packages/issue/issue-fetch-services-common/src/common/utils/token-browser-utils.js");const i={COMMENTS:"focusedCommentId",WORKLOG:"focusedWorklogId"},r=e=>{if(!i[e])return null;return(()=>{let e=window.location.search.slice(1);const t={};if(e){e=e.split("#")[0];const s=e.split("&");for(let e=0;e<s.length;e+=1){const n=s[e].split("="),a=n[0],i=void 0===n[1]||decodeURIComponent(n[1]);t[a]=i}}return t})()[i[e]]};const o=()=>`\n    ecosystem {\n      operations {\n        name\n        url: href\n        icon {\n          url\n        }\n        tooltip\n        styleClass\n      }\n      contentPanels {\n        name\n        iframe {\n          addonKey\n          moduleKey\n          options\n        }\n        icon {\n          url\n        }\n        tooltip\n        type\n        showByDefault\n        manuallyAddedToIssue\n      }\n      activityPanels {\n        name\n        iframe {\n          addonKey\n          moduleKey\n          options\n        }\n      }\n      backgroundScripts {\n        iframe {\n          addonKey\n          moduleKey\n          options\n        }\n        shouldReloadOnRefresh\n      }\n      ecoSystemOnDate\n      contentPanelsCustomised\n      ${(()=>Object(n.e)()?"forge {\n        panels {\n          id\n          instances {\n            id\n            collapsed\n            added\n          }\n        }\n      }":"")()}\n    }\n`;var c=s("./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/gira-fragments/issue-sections/index.js");const l="issueViewInteractiveQuery",u=e=>`${e}/rest/gira/1/`,d=e=>`\nquery ${l}($issueKey: String!, $projectKey: String)  {\n        ${(()=>Object(n.d)()?`mediaContext(issueKey: $issueKey) {\n    userToken {\n      token\n      id\n      issueId\n    }\n    uploadToken {\n      __typename\n      ... on MediaUploadToken {\n        endpointUrl\n        token\n        targetCollection\n        tokenDurationInMins\n        clientId\n      }\n      ... on FailedMediaUploadToken {\n        error\n      }\n    }\n    readToken(maxTokenLength: ${Object(a.a)()}) {\n      clientId\n      endpointUrl\n      tokensWithFiles {\n        files {\n          issueId\n          attachmentId\n          attachmentMediaApiId\n        }\n        token\n      }\n      tokenLifespanInSeconds\n    }\n  }`:"")()}\n        viewIssue(issueKey: $issueKey) {\n            ${((e,t,s)=>{const n=r("COMMENTS");return`\n        comments (first: ${t}, maxResults: ${e}, orderBy: "${s}", ${null!=n?`commentId: ${n}`:""}) {\n            nodes {\n                id\n                author {\n                    accountId\n                    displayName\n                    avatarUrl\n                }\n                updateAuthor {\n                    accountId\n                    displayName\n                    avatarUrl\n                }\n                visibility {\n                    type\n                    value\n                }\n                created\n                updated\n                renderedBody\n                jsdPublic\n                bodyAdf\n            }\n            totalCount\n            startIndex\n        }\n    `})(5,0,"-created")}\n            ${((e,t,s)=>{const n=r("WORKLOG");return null==n?"":`\n        worklogs (startAt: ${t}, maxResults: ${e}, orderBy: "${s}", ${`worklogId: ${n}`}) {\n            nodes {\n                id\n                author {\n                    accountId\n                    displayName\n                    avatarUrl\n                }\n                updateAuthor {\n                    accountId\n                    displayName\n                    avatarUrl\n                }\n                created\n                started\n                updated\n                comment\n                timeSpent\n                timeSpentSeconds\n            }\n            totalCount\n            startIndex\n        }\n    `})(5,0,"-started")}  \n            ${o()}\n            fields {\n                __typename\n                    ${(()=>"\n      ... on GlancesField {\n        fieldKey\n        value {\n          name\n          status\n          iframe {\n            addonKey\n            moduleKey\n            options\n          }\n          icon {\n            url\n          }\n          content\n          type\n        }\n      }\n")()}\n            }\n            ${(()=>"attachments(orderDirection: DESC, orderField: CREATED, maxResults: 6) {\n            nodes {\n              id\n              filename\n              mimetype\n              mediaApiFileId\n              createdDate\n              filesize\n              parentName\n              author {\n                  accountId\n              }\n              parentId\n            }\n            totalCount\n          }\n    ")()}\n            ${(()=>"\n    layoutItems {\n        location\n        category\n        items {\n        itemId\n        type\n        }\n    }\n")()}            \n            ${Object(c.a)()}     \n            ${Object(n.h)()&&Object(n.g)()?(()=>"\n    remoteLinks {\n        isLinkingEnabled\n        remoteLinkedIssues {\n            preview {\n                id\n                issueId\n                globalId\n                href\n                applicationType\n                applicationName\n                relationship\n                title\n            }\n        }\n    }            \n")():""}\n        }\n        ${(()=>"\n    licensedProducts {\n        name\n        status\n    }\n")()}\n        ${(()=>`\n    jiraSettings {\n      ${(()=>"\n      timeTracking {\n        isTimeTrackingEnabled\n        hoursPerDay\n        daysPerWeek\n        defaultUnit\n      }\n")()}\n      ${(()=>"\n      subtasks {\n        enabled\n      }\n")()}\n      issueLinkTypes {\n        id\n        name\n        inward\n        outward\n      }\n      newIssueViewTransitionSettings {\n        shouldDelayChangeboarding\n        newIssueViewTransitionLockingStatus\n     }\n    }\n`)()}\n        ${(()=>`\n    permissions(issueKey:$issueKey, keys:["${(()=>["ADMINISTER","ADMINISTER_PROJECTS","ASSIGN_ISSUES","EDIT_ISSUES","SCHEDULE_ISSUES","ADD_COMMENTS","DELETE_ALL_COMMENTS","DELETE_OWN_COMMENTS","EDIT_ALL_COMMENTS","EDIT_OWN_COMMENTS","CREATE_ISSUES","DELETE_ISSUES","MOVE_ISSUES","CREATE_ATTACHMENTS","DELETE_ALL_ATTACHMENTS","DELETE_OWN_ATTACHMENTS","WORK_ON_ISSUES","ASSIGNABLE_USER","LINK_ISSUES","VIEW_VOTERS_AND_WATCHERS","MANAGE_WATCHERS","EDIT_ALL_WORKLOGS","EDIT_OWN_WORKLOGS","DELETE_ALL_WORKLOGS","DELETE_OWN_WORKLOGS","USER_PICKER","VIEW_DEV_TOOLS","SERVICEDESK_AGENT"])().join('","')}"]) {\n        key\n        havePermission\n    }\n`)()}\n        ${(e=>`\n    myPreferences(keys: [\n        "jira.user.issue.changeboarding.lastinteracted",\n        "jira.user.issue.clickthrough-banner.lastinteracted",\n        "jira.user.issue.attachment.view",\n        "jira.user.issue.details.pinned-fields.${e}"\n    ])\n`)(e)}\n        ${(()=>"\n    project(projectKey: $projectKey) {\n        id\n        newIssueViewLockedIn\n        issueTypes {\n            id\n            name\n            iconUrl\n            subtask\n        }\n    }\n")()}\n        ${Object(n.a)()?(()=>"activitySortOrder")():""}\n    }\n    ${Object(c.b)()}\n    \n`,p=(e,t)=>({method:"POST",body:JSON.stringify({query:d(t),variables:{issueKey:e,projectKey:t}})})},"./src/packages/issue/issue-fetch-services-common/src/services/issue-graphql-data/index.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return r})),s.d(t,"a",(function(){return o}));var n=s("./src/packages/issue/issue-fetch-services-common/src/feature-flags.js");const a=(e,...t)=>{let s="";return t.forEach((t,n)=>{s+=e[n],s+=t.toString()}),s+=e[e.length-1],s};var i=(e,t)=>a`query {
        issue(issueIdOrKey: "${e}", latestVersion: true, screen: "view") {
            id
            fields {
                key
                title
                editable
                required
                autoCompleteUrl
                allowedValues
                content
                renderedContent
                schema {
                    custom
                    system
                    ${(()=>"configuration {\n        key\n        value\n    }\n    ")()}
                    items
                    type
                    renderer
                }
                configuration
            }
            expandAssigneeInSubtasks
            expandAssigneeInIssuelinks
            expandTimeTrackingInSubtasks
            ${Object(n.i)()?"expandSystemDateTimesForChildIssues":""}
            systemFields {
                descriptionAdf {
                    value
                }
                ${(()=>"environmentAdf {\n        value\n    }")()}
            }
            customFields {
                textareaAdf {
                    key
                    value
                }
            }            
            ${(()=>"tabs {\n        id\n        name\n        items {\n            id\n            type\n        }\n    }")()}
            ${(()=>"\n    isHybridAgilityProject\n    ")()}
            ${(()=>"\n    agile {\n        epic {\n          key\n        },\n    }")()}
        }
        project(projectIdOrKey: "${t}") {
            id
            name
            key
            projectTypeKey
            simplified
            avatarUrls {
                key
                value
            }
            issueTypeHierarchy {
                baseLevelId
                levels {
                    id
                    aboveLevelId
                    belowLevelId
                }
            }
        }
    }`;const r=e=>`${e}/rest/graphql/1/`,o=(e,t)=>({method:"POST",body:JSON.stringify({query:i(e,t)})})},"./src/packages/issue/issue-fetch-services-common/src/services/issue-media-read-permissions/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=(e,t,s)=>`${e}/rest/api/2/attachment/read/issue/${t}/credentials?maxTokenLength=${s}`},"./src/packages/issue/issue-fetch-services-common/src/services/issue-media-upload-permissions/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=(e,t)=>`${e}/rest/api/2/attachment/upload/issue/${t}/credentials`},"./src/packages/issue/issue-fetch-services-common/src/services/issue-media-user-auth/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=e=>`${e}/rest/internal/2/media/user/credentials`},"./src/packages/issue/issue-fetch-services/src/common/utils/client.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s("./src/packages/platform/utils/fetch/src/utils/as-json.js");let a=null;const i=e=>(a||(a=(e=>({query:({query:t,variables:s})=>Object(n.a)(`${e}/rest/gira/1/`,{method:"POST",body:JSON.stringify({query:t,variables:s})})}))(e)),a)},"./src/packages/issue/issue-fetch-services/src/common/utils/get-project-data.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s("./src/packages/platform/utils/types/src/general.js");const a=e=>Object(n.q)(e.split("-")[0])},"./src/packages/issue/issue-fetch-services/src/services/issue-forge-data/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s("./src/packages/forge/forge-ui/src/utils/fetch-modules/index.js");const a=async(e,t)=>{const s=Object(n.a)(e,t,["jira:issueAction","jira:issueGlance","jira:issuePanel","jira:issueActivity","jira:customField"]),a=await s,[i,r,o,c,l]=a;return{issueAction:i,issueGlance:r,issuePanel:o,issueActivity:c,customField:l}}},"./src/packages/issue/issue-fetch-services/src/services/issue-gira-data/index.js":function(e,t,s){"use strict";var n=s("./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/index.js"),a=s("./src/packages/issue/issue-fetch-services/src/common/utils/client.js"),i=s("./src/packages/issue/issue-fetch-services/src/common/utils/get-project-data.js");t.a=async(e,t)=>{const s=Object(i.a)(t),r={issueKey:t,projectKey:s};return await Object(a.a)(e).query({query:Object(n.b)(s),variables:r})}},"./src/packages/issue/issue-fetch-services/src/services/issue-graphql-data/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s("./src/packages/platform/utils/fetch/src/utils/as-json.js"),a=s("./src/packages/issue/issue-fetch-services-common/src/services/issue-graphql-data/index.js");const i=(e,t,s)=>Object(n.a)(Object(a.b)(e),Object(a.a)(t,s))},"./src/packages/issue/issue-fetch-services/src/services/issue-media-read-permissions/index.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return c})),s.d(t,"a",(function(){return l}));s("./node_modules/rxjs/Observable.js");var n=s("./src/packages/platform/utils/fetch/src/utils/as-json-stream.js"),a=s("./src/packages/platform/utils/fetch/src/utils/as-json.js"),i=s("./src/packages/issue/issue-fetch-services-common/src/services/issue-media-read-permissions/index.js"),r=s("./src/packages/issue/issue-view/src/browser-metrics/browser-metrics-constants.js"),o=s("./src/packages/issue/issue-view/src/utils/issue-view-fetch-error.js");const c=(e,t,s,a)=>Object(n.a)(Object(i.a)(e,t,s),{perf:r.i,headersProcessor:a&&a(r.i.key)}).catch(e=>{throw new o.a(e,Object(i.a)("{baseUrl}","{issueKey}","{maxTokenLength}"))}),l=(e,t,s,n)=>Object(a.a)(Object(i.a)(e,t,s),{perf:r.i,headersProcessor:n&&n(r.i.key)})},"./src/packages/issue/issue-fetch-services/src/services/issue-media-upload-permissions/index.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return o})),s.d(t,"a",(function(){return c}));var n=s("./src/packages/platform/utils/fetch/src/utils/as-json-stream.js"),a=s("./src/packages/platform/utils/fetch/src/utils/as-json.js"),i=s("./src/packages/issue/issue-fetch-services-common/src/services/issue-media-upload-permissions/index.js"),r=s("./src/packages/issue/issue-view/src/utils/issue-view-fetch-error.js");const o=(e,t)=>Object(n.a)(Object(i.a)(e,t)).catch(e=>{throw new r.a(e,Object(i.a)("{baseUrl}","{issueKey}"))}),c=(e,t)=>Object(a.a)(Object(i.a)(e,t))},"./src/packages/issue/issue-fetch-services/src/services/issue-media-user-auth/index.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return o})),s.d(t,"a",(function(){return c}));var n=s("./src/packages/platform/utils/fetch/src/utils/as-json-stream.js"),a=s("./src/packages/platform/utils/fetch/src/utils/as-json.js"),i=s("./src/packages/issue/issue-fetch-services-common/src/services/issue-media-user-auth/index.js"),r=s("./src/packages/issue/issue-view/src/utils/issue-view-fetch-error.js");const o=e=>Object(n.a)(Object(i.a)(e)).catch(e=>{throw new r.a(e,Object(i.a)("{baseUrl}"))}),c=e=>Object(a.a)(Object(i.a)(e))},"./src/packages/issue/issue-glance/src/main.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return C}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/@atlaskit/icon/glyph/arrow-right.js"),r=s.n(i),o=s("./node_modules/@atlaskit/tooltip/dist/es2019/Tooltip.js"),c=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/animations/mount-animator.js"),l=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/enter-escape-handler/index.js"),u=s("./src/packages/issue/fields/components/field-heading/src/styled.js"),d=s("./src/packages/issue/fields/components/field-pin/src/index.js"),p=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),m=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),b=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const f=p.default.div(["position:relative;overflow:hidden;display:flex;border-radius:5px;margin:0 0 0 -","px;&:hover{background:",";cursor:pointer;}&:focus{box-shadow:0 0 0 2px ",";outline:0;background:",";}height:","px;align-items:center;"],b.e,m.a.N20,m.a.B100,m.a.N20,4*b.e),g=p.default.div(["overflow:hidden;margin:","px 0 ","px ","px;height:","px;width:","px;align-items:center;"],b.e,b.e,b.e,3*b.e,3*b.e),h=Object(p.default)(g)(["margin:0 0 0 ","px;padding-left:","px;padding-right:","px;"],b.e,.25*b.e,.25*b.e),y=p.default.div(["white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex:1;padding-left:","px;line-height:inherit;"],b.e),O=p.default.div(["position:absolute;right:0;width:","px;height:","px;background-image:linear-gradient(90deg,rgba(255,255,255,0) 0%,"," 25%);"],7*b.e,5*b.e,m.a.N20),j=p.default.div(["position:absolute;right:0;margin:6px ","px ","px;height:26px;width:26px;background:",";color:",";border-radius:50%;align-items:center;padding:2px 0 0 2px;"],b.e,b.e/2,m.a.N30,m.a.N60),E=Object(p.keyframes)(["0%{right:-28px;}100%{right:0;}"]),v=p.default.div(["position:absolute;animation:"," 0.15s ease-in-out;"],E);function k(){return(k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function w(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function S(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?w(Object(s),!0).forEach((function(t){I(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):w(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function I(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class C extends n.Component{constructor(...e){super(...e),this.state={isHovering:!1},this.handleOpenGlancePanel=()=>{const{onClickPayload:e,title:t,onOpenPanel:s}=this.props;s(S(S({},e),{},{title:t}))},this.eventHandlers={onClick:this.handleOpenGlancePanel,onMouseEnter:()=>this.setState({isHovering:!0}),onMouseLeave:()=>this.setState({isHovering:!1}),onFocus:()=>this.setState({isHovering:!0}),onBlur:()=>this.setState({isHovering:!1})}}render(){const{title:e,Icon:t,content:s,showPinButton:n,itemId:i}=this.props,p=s.length<=170?s:`${s.substring(0,170).trim()}\u2026`;return(a.a.createElement(u.d,null,e&&a.a.createElement(u.b,null,a.a.createElement(u.c,null,e),!0===n&&a.a.createElement(d.a,{fieldId:i,label:e})),a.a.createElement(u.g,{fixedHeight:!0},a.a.createElement(o.a,{content:p},a.a.createElement(l.a,{onEnter:this.handleOpenGlancePanel},a.a.createElement(f,k({tabIndex:"0"},this.eventHandlers),t&&a.a.createElement(h,null,a.a.createElement(t,null)),a.a.createElement(y,null,s),this.state.isHovering&&a.a.createElement(c.a,{mountAnimation:v},a.a.createElement(O,null,a.a.createElement(j,null,a.a.createElement(r.a,{size:"medium",label:""}))))))))))}}C.displayName="Glance",C.displayName="Glance",C.defaultProps={Icon:null}},"./src/packages/issue/issue-scroll/src/services/main.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return u}));var n={};s.r(n),s.d(n,"setScrollTarget",(function(){return r})),s.d(n,"getScrollTargetId",(function(){return o}));var a=s("./node_modules/react-sweet-state/lib/esm/components/hook.js"),i=s("./node_modules/react-sweet-state/lib/esm/store/create.js");const r=e=>({setState:t})=>{t({scrollTarget:e})},o=e=>({getState:t})=>{const s=t();return s.scrollTarget&&s.scrollTarget.type===e&&s.scrollTarget.id||null},c=Object(i.a)({name:"issue-scroll",initialState:{scrollTarget:null},actions:n}),l=Object(a.a)(c,{selector:e=>e.scrollTarget}),u=()=>{const[e,{setScrollTarget:t,getScrollTargetId:s}]=l();return[{scrollTarget:e},{setScrollTarget:t,getScrollTargetId:s}]}},"./src/packages/issue/issue-scroll/src/services/types.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=Object.freeze({COMMENT:"COMMENT",WORKLOG:"WORKLOG"})},"./src/packages/issue/issue-tabs/src/services/main.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return d})),s.d(t,"b",(function(){return p}));var n={};s.r(n),s.d(n,"setIssueTabs",(function(){return o}));var a=s("./node_modules/react/index.js"),i=s("./node_modules/react-sweet-state/lib/esm/components/hook.js"),r=s("./node_modules/react-sweet-state/lib/esm/store/create.js");const o=e=>({setState:t})=>{t(e)},c=Object(r.a)({name:"issue-tabs",initialState:{},actions:n}),l=Object(i.a)(c,{selector:e=>e}),u=Object(i.a)(c,{selector:null}),d=()=>{const[e,{setIssueTabs:t}]=l();return[{issueTabs:e},{setIssueTabs:t}]},p=()=>{const[,e]=u();return[null,Object(a.useMemo)(()=>({setIssueTabs:t=>e.setIssueTabs(t)}),[e])]}},"./src/packages/issue/issue-view-layout-templates/common/item-list/src/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return m}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),r=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/logging/log.js"),o=s("./src/packages/issue/issue-context-service/src/main.js"),c=s("./src/packages/issue/fields/field-base/src/services/field-config-service/main.js"),l=s("./src/packages/issue/issue-view-layout/src/services/main.js"),u=s("./src/packages/issue/issue-view/src/views/issue-base/get-layout-item-map.js"),d=s("./node_modules/@atlaskit/analytics-next--current/dist/esm/useAnalyticsEvents.js"),p=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js");const m=({items:e,area:t})=>{const s=Object(o.f)(),n=Object(u.a)(),[m]=Object(c.c)(s),[,b]=Object(l.b)(),{createAnalyticsEvent:f}=Object(d.a)();return e.map(({id:e})=>{var s,o;if(!m)return r.a.safeError("issue.views.issue-base.context",`Could not find a matching component for "${e}"`,new i.a({eventNameSuffix:"issue.error",type:"js",app:"issue"})),null;const c=m[e],l=(null==c||null===(s=c.schema)||void 0===s?void 0:s.custom)||(null==c||null===(o=c.schema)||void 0===o?void 0:o.system)||e,u=t=>{Object(p.h)(f({}),"contextPanel viewed","issueContextPanel",{contextPanelKey:e,contextPanelType:l,tabItemsCount:t.tabItems?t.tabItems.length:0}),b({payload:t,title:null==t?void 0:t.title,type:l,key:e})};if(n[l]){const s=n[l].item;return(a.a.createElement(s,{key:e,fieldId:e,area:t,onOpenPanel:u}))}return null})}},"./src/packages/issue/issue-view-layout/src/services/main.js":function(e,t,s){"use strict";s.d(t,"d",(function(){return h})),s.d(t,"e",(function(){return y})),s.d(t,"c",(function(){return O})),s.d(t,"b",(function(){return j})),s.d(t,"a",(function(){return E}));var n={};s.r(n),s.d(n,"setIssueViewLayout",(function(){return c})),s.d(n,"setIssueViewLayoutGlance",(function(){return l})),s.d(n,"setIssueViewLayoutContextPanel",(function(){return u}));var a=s("./node_modules/react/index.js"),i=s("./node_modules/react-sweet-state/lib/esm/store/create.js"),r=s("./node_modules/react-sweet-state/lib/esm/components/hook.js");function o(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const c=e=>({setState:t})=>{const{__typename:s}=e;t({templateKey:s,sections:o(e,["__typename"])})},l=e=>({setState:t})=>{t({glance:e})},u=e=>({setState:t})=>{t({contextPanel:e})},d=Object(i.a)({name:"issue-view-layout-service",initialState:{sections:{},templateKey:"default",glance:void 0,contextPanel:void 0},actions:n}),p=Object(r.a)(d,{selector:e=>e.sections}),m=(Object(r.a)(d,{selector:e=>e.groups}),Object(r.a)(d,{selector:e=>e.templateKey})),b=Object(r.a)(d,{selector:e=>e.glance}),f=Object(r.a)(d,{selector:e=>e.contextPanel}),g=Object(r.a)(d,{selector:null}),h=()=>{const[e]=p();return[e]},y=()=>{const[e]=m();return[e]},O=()=>{const[e,t]=b();return[e,Object(a.useCallback)(e=>{t.setIssueViewLayoutGlance(e)},[t])]},j=()=>{const[e,t]=f();return[e,Object(a.useCallback)(e=>{t.setIssueViewLayoutContextPanel(e)},[t])]},E=()=>{const[,e]=g();return[null,{setIssueViewLayout:Object(a.useCallback)(t=>{e.setIssueViewLayout(t)},[e])}]}},"./src/packages/issue/issue-view/src/actions/activity-feed-actions.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"b",(function(){return a})),s.d(t,"c",(function(){return i}));const n=e=>({type:"SELECT_ACTIVITY_ITEM",payload:e}),a=e=>({type:"SELECT_ACTIVITY_SORT_ORDER",payload:e}),i=e=>({type:"UPDATE_ACTIVITY_SORT_ORDER_REQUEST",payload:e})},"./src/packages/issue/issue-view/src/actions/applink-authentication-actions.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"b",(function(){return a}));const n=(e,t)=>({type:"APPLINK_AUTHENTICATION_REQUEST",payload:e,meta:{analyticsEvent:t}}),a=()=>({type:"APPLINK_AUTHENTICATION_SUCCESS"})},"./src/packages/issue/issue-view/src/actions/approval-action/index.js":function(e,t,s){"use strict";s.d(t,"e",(function(){return a})),s.d(t,"c",(function(){return i})),s.d(t,"d",(function(){return r})),s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return c})),s.d(t,"f",(function(){return l}));var n=s("./src/packages/issue/issue-view/src/common/constants/flags.js");const a=(e,t)=>({type:"UPDATE_APPROVAL_LINKED_USER_PICKER_FIELD",payload:{linkedUserPickerFieldId:e,newApproverList:t}}),i=()=>({type:n.K}),r=()=>({type:n.L}),o=()=>({type:n.a}),c=()=>({type:n.F}),l=()=>({type:"ZERO_APPROVAL_REQUIRED"})},"./src/packages/issue/issue-view/src/actions/assign-issue-parent-modal-actions.js":function(e,t,s){"use strict";s.d(t,"h",(function(){return n})),s.d(t,"d",(function(){return a})),s.d(t,"b",(function(){return i})),s.d(t,"c",(function(){return r})),s.d(t,"a",(function(){return o})),s.d(t,"f",(function(){return c})),s.d(t,"e",(function(){return l})),s.d(t,"i",(function(){return u})),s.d(t,"g",(function(){return d})),s.d(t,"j",(function(){return p}));const n=()=>({type:"SHOW_ASSIGN_ISSUE_PARENT_MODAL"}),a=()=>({type:"HIDE_ASSIGN_ISSUE_PARENT_MODAL"}),i=()=>({type:"FETCH_ISSUE_PARENTS_REQUEST"}),r=(e=[])=>({type:"FETCH_ISSUE_PARENTS_SUCCESS",payload:e}),o=()=>({type:"FETCH_ISSUE_PARENTS_FAILURE"}),c=(e,t)=>({type:"SET_PARENT_REQUEST",payload:{issues:e,parentId:t}}),l=(e,t,s)=>({type:"SET_PARENT_OPTIMISTIC",payload:{issues:e,parentIssue:t,requestPromise:s}}),u=e=>({type:"UNSET_PARENT_REQUEST",payload:{issues:e}}),d=(e,t)=>({type:"SET_PARENT_SUCCESS",payload:{parentIssue:e,oldParentIdsByIssueIds:t}}),p=e=>({type:"UNSET_PARENT_SUCCESS",payload:{oldParentIdsByIssueIds:e}})},"./src/packages/issue/issue-view/src/actions/attachment-picker-actions.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return n})),s.d(t,"d",(function(){return a})),s.d(t,"e",(function(){return i})),s.d(t,"b",(function(){return r})),s.d(t,"a",(function(){return o})),s.d(t,"f",(function(){return c}));const n=e=>({type:"ATTACHMENT_MEDIA_SERVICES_UPLOAD_BEGIN",payload:e}),a=e=>({type:"ATTACHMENT_MEDIA_SERVICES_UPLOAD_END",payload:e}),i=e=>({type:"ATTACHMENT_MEDIA_SERVICES_UPLOAD_ERROR",payload:e}),r=e=>({type:"ATTACHMENT_JIRA_CREATE_SUCCESS",payload:e}),o=(e,t)=>({type:"ATTACHMENT_JIRA_CREATE_FAILURE",payload:{attachment:e,statusCode:t}}),c=e=>({type:"MEDIA_PICKER_ERROR",payload:e})},"./src/packages/issue/issue-view/src/actions/attachment-popup-actions.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"a",(function(){return a}));const n=()=>({type:"ATTACHMENT_PICKER_POPUP_OPEN_SUCCESS"}),a=()=>({type:"ATTACHMENT_PICKER_POPUP_CLOSE_SUCCESS"})},"./src/packages/issue/issue-view/src/actions/card-cover-actions.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"a",(function(){return a})),s.d(t,"d",(function(){return i})),s.d(t,"e",(function(){return r})),s.d(t,"c",(function(){return o}));const n=e=>({type:"CARD_COVER_FETCH_SUCCESS",payload:{cardCover:e}}),a=()=>({type:"CARD_COVER_FETCH_FAILURE"}),i=(e,t)=>({type:"CARD_COVER_UPDATE_REQUEST",payload:{currentAttachmentId:e,attachmentId:t}}),r=()=>({type:"CARD_COVER_UPDATE_SUCCESS"}),o=e=>({type:"CARD_COVER_UPDATE_FAILURE",payload:{attachmentId:e}})},"./src/packages/issue/issue-view/src/actions/change-issue-type-actions.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"c",(function(){return a})),s.d(t,"a",(function(){return i})),s.d(t,"g",(function(){return r})),s.d(t,"h",(function(){return o})),s.d(t,"e",(function(){return c})),s.d(t,"f",(function(){return l})),s.d(t,"d",(function(){return u}));const n=e=>({type:"PROJECT_ISSUE_TYPES_REQUEST",payload:e}),a=e=>({type:"PROJECT_ISSUE_TYPES_REQUEST_SUCCESS",payload:e}),i=e=>({type:"PROJECT_ISSUE_TYPES_REQUEST_FAILURE",payload:e}),r=(e,t,s,n,a)=>({type:"SIMPLE_CHANGE_ISSUE_TYPE_REQUEST",payload:{issueKey:e,issueId:t,currentType:s,targetType:n,analyticsEvent:a}}),o=(e,t)=>({type:"SIMPLE_CHANGE_ISSUE_TYPE_REQUEST_SUCCESS",payload:{issueKey:e,targetTypeName:t,fieldId:"issuetype"}}),c=e=>({type:"SIMPLE_CHANGE_ISSUE_TYPE_REQUEST_FAILURE",payload:e}),l=(e,t,s)=>({type:"SIMPLE_CHANGE_ISSUE_TYPE_NOT_ALLOWED",payload:{issueId:e,currentType:t,targetType:s}}),u=e=>({type:"SHOW_ISSUE_TYPE_LIST",payload:e})},"./src/packages/issue/issue-view/src/actions/changeboarding-actions.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return n})),s.d(t,"d",(function(){return a})),s.d(t,"a",(function(){return i})),s.d(t,"b",(function(){return r}));const n=e=>({type:"CHANGEBOARDING_TOUR_BEGIN",payload:e}),a=()=>({type:"CHANGEBOARDING_TOUR_END"}),i=e=>({type:"CHANGEBOARDING_BANNER_DISMISS",payload:e}),r=(e,t)=>({type:"CHANGEBOARDING_BANNER_SEEN",payload:{currentSeenTimes:e,firstSeenTimestamp:t}})},"./src/packages/issue/issue-view/src/actions/comment-actions.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return n})),s.d(t,"b",(function(){return a})),s.d(t,"a",(function(){return i})),s.d(t,"z",(function(){return r})),s.d(t,"w",(function(){return o})),s.d(t,"B",(function(){return c})),s.d(t,"y",(function(){return l})),s.d(t,"A",(function(){return u})),s.d(t,"x",(function(){return d})),s.d(t,"v",(function(){return p})),s.d(t,"t",(function(){return m})),s.d(t,"s",(function(){return b})),s.d(t,"o",(function(){return f})),s.d(t,"p",(function(){return g})),s.d(t,"n",(function(){return h})),s.d(t,"r",(function(){return y})),s.d(t,"q",(function(){return O})),s.d(t,"d",(function(){return j})),s.d(t,"i",(function(){return E})),s.d(t,"k",(function(){return v})),s.d(t,"j",(function(){return k})),s.d(t,"l",(function(){return w})),s.d(t,"m",(function(){return S})),s.d(t,"g",(function(){return I})),s.d(t,"h",(function(){return C})),s.d(t,"f",(function(){return T})),s.d(t,"E",(function(){return P})),s.d(t,"e",(function(){return _})),s.d(t,"u",(function(){return x})),s.d(t,"C",(function(){return D})),s.d(t,"D",(function(){return A}));const n=()=>({type:"ADD_COMMENT_FORM_EXPAND"}),a=()=>({type:"ADD_COMMENT_FORM_COLLAPSE"}),i=()=>({type:"ADD_COMMENT_FORM_CANCEL"}),r=(e,t,s)=>({type:"SAVE_COMMENT_RETRY",payload:{optimisticId:e,createdDate:t,isNewComment:s}}),o=e=>({type:"SAVE_COMMENT_EDIT",payload:{optimisticId:e}}),c=(e,t)=>({type:"SAVE_COMMENT_SUCCESS_WITH_PASTED_CONTENT",payload:{comment:e,pastedContent:t}}),l=(e,t)=>({type:"SAVE_COMMENT_REQUEST",payload:{comment:e,analyticsEvent:t,updatedField:"comment"}}),u=(e,t,s,n,a)=>({type:"SAVE_COMMENT_SUCCESS",payload:{fieldId:"comment",comment:e,optimisticId:t,isNewComment:s,analyticsEvent:n},meta:a}),d=e=>({type:"SAVE_COMMENT_FAILURE",payload:e}),p=e=>({type:"SAVE_COMMENT_CANCEL",payload:{optimisticId:e}}),m=()=>({type:"FETCH_OLDER_COMMENTS_REQUEST"}),b=()=>({type:"FETCH_NEWER_COMMENTS_REQUEST"}),f=()=>({type:"FETCH_LATEST_COMMENTS_REQUEST"}),g=e=>({type:"FETCH_LATEST_COMMENTS_SUCCESS",payload:e}),h=()=>({type:"FETCH_LATEST_COMMENTS_FAILURE"}),y=e=>({type:"FETCH_MORE_COMMENTS_SUCCESS",payload:e}),O=()=>({type:"FETCH_MORE_COMMENTS_FAILURE"}),j=(e,t)=>({type:"CHANGE_COMMENT_VISIBILITY",payload:{id:e,isInternal:t}}),E=(e,t)=>({type:"EDIT_COMMENT_BEGIN",payload:{id:e,isInternal:t}}),v=e=>({type:"EDIT_COMMENT_COLLAPSE",payload:{id:e,fieldId:"comment"}}),k=e=>({type:"EDIT_COMMENT_CANCEL",payload:{id:e,fieldId:"comment"}}),w=(e,t)=>({type:"EDIT_COMMENT_UPDATE",payload:{id:e,value:t,fieldId:"comment"}}),S=(e,t)=>({type:"EDIT_COMMENT_VISIBILITY",payload:{id:e,visibility:t}}),I=(e,t)=>({type:"DELETE_COMMENT_REQUEST",payload:{id:e,analyticsEvent:t,updatedField:"comment"}}),C=e=>({type:"DELETE_COMMENT_SUCCESS",payload:{id:e,fieldId:"comment"}}),T=e=>({type:"DELETE_COMMENT_FAILURE",payload:e}),P=e=>({type:"SHOW_DELETE_COMMENT_MODAL",payload:e}),_=()=>({type:"DELETE_COMMENT_CANCEL"}),x=(e,t)=>({type:"PASTED_INTO_COMMENT_FORM",payload:{id:e,pastedContent:t}}),D=e=>({type:"SET_COMMENT_ATTACHMENT_IN_PROGRESS",payload:{isInProgress:e}}),A=e=>({type:"SET_COMMENT_SCROLL_STATUS",payload:{status:e}})},"./src/packages/issue/issue-view/src/actions/confluence-pages-actions.js":function(e,t,s){"use strict";s.d(t,"h",(function(){return n})),s.d(t,"i",(function(){return a})),s.d(t,"b",(function(){return i})),s.d(t,"c",(function(){return r})),s.d(t,"d",(function(){return o})),s.d(t,"a",(function(){return c})),s.d(t,"f",(function(){return l})),s.d(t,"g",(function(){return u})),s.d(t,"e",(function(){return d}));const n=()=>({type:"LINK_CONFLUENCE_PAGE_CLICKED"}),a=()=>({type:"LINK_CONFLUENCE_PAGE_CLOSED"}),i=()=>({type:"CREATE_CONFLUENCE_PAGE_LINK_MODIFIED"}),r=(e,t)=>({type:"CREATE_CONFLUENCE_PAGE_LINK_REQUEST",payload:{pageHref:e},meta:{analyticsEvent:t}}),o=e=>({type:"CREATE_CONFLUENCE_PAGE_LINK_SUCCESS",payload:{confluencePageLink:e}}),c=e=>({type:"CREATE_CONFLUENCE_PAGE_LINK_FAILED",payload:{errorMessage:e}}),l=e=>({type:"DELETE_CONFLUENCE_PAGE_LINK_REQUEST",payload:{globalId:e}}),u=()=>({type:"DELETE_CONFLUENCE_PAGE_LINK_SUCCESS"}),d=()=>({type:"DELETE_CONFLUENCE_PAGE_LINK_FAILED"})},"./src/packages/issue/issue-view/src/actions/context-item-actions.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"a",(function(){return a}));const n=e=>({type:"CONTEXT_PANEL_SHOW",payload:e}),a=()=>({type:"CONTEXT_PANEL_HIDE"})},"./src/packages/issue/issue-view/src/actions/ecosystem-content-panel-actions.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"c",(function(){return a})),s.d(t,"a",(function(){return i})),s.d(t,"h",(function(){return r})),s.d(t,"i",(function(){return o})),s.d(t,"g",(function(){return c})),s.d(t,"d",(function(){return l})),s.d(t,"e",(function(){return u})),s.d(t,"f",(function(){return d}));const n=e=>({type:"ADD_CONTENT_PANEL_REQUEST",payload:e}),a=e=>({type:"ADD_CONTENT_PANEL_SUCCESS",payload:e}),i=e=>({type:"ADD_CONTENT_PANEL_FAILURE",payload:e}),r=e=>({type:"REMOVE_CONTENT_PANEL_REQUEST",payload:e}),o=e=>({type:"REMOVE_CONTENT_PANEL_SUCCESS",payload:e}),c=e=>({type:"REMOVE_CONTENT_PANEL_FAILURE",payload:e}),l=e=>({type:"CONTENT_PANEL_SELECTED",payload:e}),u=e=>({type:"CONTENT_PANEL_UNSELECT",payload:e}),d=()=>({type:"CONTENT_PANELS_CUSTOMISED_SUCCESS"})},"./src/packages/issue/issue-view/src/actions/ecosystem-glance-actions.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"a",(function(){return a}));const n=(e,t)=>({type:"ECOSYSTEM_SHOW_GLANCE",payload:{appKey:e,moduleKey:t}}),a=()=>({type:"ECOSYSTEM_HIDE_GLANCE"})},"./src/packages/issue/issue-view/src/actions/editor-actions.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"b",(function(){return a})),s.d(t,"c",(function(){return i}));const n=()=>({type:"EDITOR_CHANGE_FAILURE"}),a=()=>({type:"EDITOR_EXPANDED_FAILURE"}),i=()=>({type:"EDITOR_SAVE_FAILURE"})},"./src/packages/issue/issue-view/src/actions/external-actions.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return a})),s.d(t,"a",(function(){return i})),s.d(t,"b",(function(){return r})),s.d(t,"d",(function(){return o}));var n=s("./src/packages/issue/issue-view/src/actions/comment-actions.js");const a=e=>({type:"EDIT_FIELD",payload:{fieldId:e}}),i=()=>({type:"ADD_COMMENT"}),r=()=>({type:"ASSIGN_TO_ME"}),o=e=>{switch(e.type){case"ADD_COMMENT":return Object(n.c)();case"ASSIGN_TO_ME":return(()=>({type:"ASSIGN_TO_ME_EXTERNAL"}))();case"EDIT_FIELD":return(e=>({type:"FIELD_EDIT_REQUEST_EXTERNAL",payload:{fieldId:e}}))(e.payload.fieldId);default:throw new Error(`Unhandled external action type: ${e.type}`)}}},"./src/packages/issue/issue-view/src/actions/fetch-confluence-app-links-actions.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"c",(function(){return a})),s.d(t,"b",(function(){return i}));const n=()=>({type:"FETCH_CONFLUENCE_APP_LINKS_REQUEST"}),a=e=>({type:"FETCH_CONFLUENCE_APP_LINKS_SUCCESS",payload:e.applicationLinks}),i=()=>({type:"FETCH_CONFLUENCE_APP_LINKS_FAILED"})},"./src/packages/issue/issue-view/src/actions/fetch-jira-app-links-actions.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"c",(function(){return a})),s.d(t,"b",(function(){return i}));const n=()=>({type:"FETCH_JIRA_APP_LINKS_REQUEST"}),a=e=>({type:"FETCH_JIRA_APP_LINKS_SUCCESS",payload:e}),i=()=>({type:"FETCH_JIRA_APP_LINKS_FAILED"})},"./src/packages/issue/issue-view/src/actions/fetch-recently-visited-confluence-pages-actions.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"c",(function(){return a})),s.d(t,"a",(function(){return i}));const n=()=>({type:"FETCH_RECENTLY_VISITED_CONFLUENCE_PAGES_REQUEST"}),a=e=>({type:"FETCH_RECENTLY_VISITED_CONFLUENCE_PAGES_SUCCESS",payload:e}),i=()=>({type:"FETCH_RECENTLY_VISITED_CONFLUENCE_PAGES_FAILED"})},"./src/packages/issue/issue-view/src/actions/forge-actions.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"c",(function(){return a})),s.d(t,"d",(function(){return i})),s.d(t,"b",(function(){return r})),s.d(t,"e",(function(){return o})),s.d(t,"i",(function(){return c})),s.d(t,"f",(function(){return l})),s.d(t,"g",(function(){return u})),s.d(t,"h",(function(){return d}));const n=e=>({type:"FETCH_FORGE_SUCCESS",payload:e}),a=e=>({type:"FORGE_ISSUE_ACTION_EXEC",payload:e}),i=()=>({type:"FORGE_ISSUE_ACTION_RENDERED"}),r=()=>({type:"FORGE_ISSUE_ACTION_CLOSE"}),o=e=>({type:"FORGE_ISSUE_PANEL_ADDED",payload:e}),c=e=>({type:"FORGE_NEW_ISSUE_PANEL_UNTRACK",payload:e}),l=e=>({type:"FORGE_ISSUE_PANEL_REMOVED",payload:e}),u=e=>({type:"FORGE_ISSUE_PANEL_UPDATE_REQUEST",payload:e}),d=e=>({type:"FORGE_ISSUE_PANEL_UPDATED",payload:e})},"./src/packages/issue/issue-view/src/actions/issue-delete-actions.js":function(e,t,s){"use strict";s.d(t,"e",(function(){return n})),s.d(t,"a",(function(){return a})),s.d(t,"c",(function(){return i})),s.d(t,"d",(function(){return r})),s.d(t,"b",(function(){return o}));const n=()=>({type:"OPEN_DELETE_ISSUE_MODAL"}),a=()=>({type:"CLOSE_DELETE_ISSUE_MODAL"}),i=(e,t)=>({type:"DELETE_ISSUE_REQUEST",payload:{issueKey:e,analyticsEvent:t}}),r=e=>({type:"DELETE_ISSUE_SUCCESS",payload:e}),o=(e,t)=>({type:"DELETE_ISSUE_FAILURE",payload:{issueKey:e,error:t}})},"./src/packages/issue/issue-view/src/actions/issue-links-actions.js":function(e,t,s){"use strict";s.d(t,"k",(function(){return n})),s.d(t,"j",(function(){return a})),s.d(t,"e",(function(){return i})),s.d(t,"f",(function(){return r})),s.d(t,"d",(function(){return o})),s.d(t,"o",(function(){return c})),s.d(t,"q",(function(){return l})),s.d(t,"r",(function(){return u})),s.d(t,"m",(function(){return d})),s.d(t,"n",(function(){return p})),s.d(t,"p",(function(){return m})),s.d(t,"l",(function(){return b})),s.d(t,"i",(function(){return f})),s.d(t,"h",(function(){return g})),s.d(t,"a",(function(){return h})),s.d(t,"b",(function(){return y})),s.d(t,"g",(function(){return O})),s.d(t,"s",(function(){return j})),s.d(t,"c",(function(){return E}));const n=e=>({type:"FETCH_LINKED_ISSUES_SUCCESS",payload:e}),a=e=>({type:"FETCH_LINKED_ISSUES_FAILURE",payload:e}),i=(e,t)=>({type:"DELETE_LINKED_ISSUE_REQUEST",payload:{linkedIssueId:e,analyticsEvent:t}}),r=(e,t)=>({type:"DELETE_LINKED_ISSUE_SUCCESS",payload:e,meta:t}),o=e=>({type:"DELETE_LINKED_ISSUE_FAILURE",payload:e}),c=(e,t,s)=>({type:"SAVE_LINKED_ISSUE_REQUEST",payload:{newIssueLinks:e,analyticsEvent:s,requestAnalyticsEvent:t}}),l=(e,t)=>({type:"SAVE_LINKED_ISSUE_SUCCESS",payload:{optimisticId:e,analyticsEvent:t}}),u=e=>({type:"SAVE_LINKED_ISSUE_SUCCESS",payload:{optimisticId:e}}),d=(e,t,s)=>({type:"SAVE_LINKED_ISSUE_FAILURE",payload:{optimisticId:e,error:t,analyticsEvent:s}}),p=(e,t)=>({type:"SAVE_LINKED_ISSUE_FAILURE",payload:{optimisticId:e,error:t}}),m=(e,t,s)=>({type:"SAVE_LINKED_ISSUE_RETRY",payload:{optimisticId:e,analyticsEvent:s,requestAnalyticsEvent:t}}),b=e=>({type:"SAVE_LINKED_ISSUE_CANCEL",payload:e}),f=(e,t,s,n)=>({type:"FETCH_LINKED_ISSUES_DATA_SUCCESS",payload:{issueLinks:e,linkedIssues:t,optimisticIds:s,optimisticLinks:n}}),g=(e,t)=>({type:"FETCH_LINKED_ISSUES_DATA_FAILURE",payload:{optimisticIds:e,error:t}}),h=()=>({type:"ADD_ISSUE_LINK_CLICKED"}),y=()=>({type:"ADD_ISSUE_LINK_CLOSED"}),O=()=>({type:"FETCH_CREATE_LINKED_ISSUE_PERMISSION_REQUEST"}),j=e=>({type:"SET_CREATE_LINKED_ISSUE_PERMISSION",payload:{canCreateLinkedIssue:e}}),E=e=>({type:"CREATE_LINKED_ISSUE_SUCCESS",payload:{newIssueLinks:e}})},"./src/packages/issue/issue-view/src/actions/issue-navigation-actions.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return n})),s.d(t,"d",(function(){return a})),s.d(t,"e",(function(){return i})),s.d(t,"a",(function(){return r})),s.d(t,"b",(function(){return o}));const n=({fromIssueKey:e,toIssueKey:t})=>({type:"NAVIGATE_TO_NEW_ISSUE",payload:{fromIssueKey:e,toIssueKey:t}}),a=(e,t)=>({type:"NAVIGATE_TO_PROJECT",payload:{projectUrl:e,pushAction:t}}),i=e=>({type:"NAVIGATE_TO_SPRINT",payload:{sprintId:e}}),r=e=>({type:"LOAD_NEW_ISSUE",payload:{issueKey:e}}),o=(e,t)=>({type:"LOAD_RECENT_ISSUE",payload:{issueKey:e,issueState:t}})},"./src/packages/issue/issue-view/src/actions/issue-preview-actions.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return n})),s.d(t,"b",(function(){return a})),s.d(t,"a",(function(){return i}));const n=e=>({type:"UPDATE_PREVIEW_REQUEST",payload:e}),a=(e,t)=>({type:"REFRESH_DATA_PROVIDER_ISSUE",payload:{issueKey:e,fieldData:t}}),i=e=>({type:"ISSUE_PREVIEW_FAILURE",payload:e})},"./src/packages/issue/issue-view/src/actions/issue-remote-data-actions.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"c",(function(){return a})),s.d(t,"a",(function(){return i}));const n=e=>({type:"FETCH_ISSUE_REMOTE_DATA_REQUEST",payload:e}),a=e=>({type:"FETCH_ISSUE_REMOTE_DATA_SUCCESS",payload:e}),i=()=>({type:"FETCH_ISSUE_REMOTE_DATA_FAILURE"})},"./src/packages/issue/issue-view/src/actions/login-actions.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"b",(function(){return a}));const n=()=>({type:"LOGIN"}),a=e=>({type:"LOGIN_SUCCESSFUL",payload:e})},"./src/packages/issue/issue-view/src/actions/prefetch-issues-actions.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=({issueKeys:e,issueIds:t})=>({type:"PREFETCH_ISSUES",payload:{issueKeys:e||[],issueIds:t||[]}})},"./src/packages/issue/issue-view/src/actions/remote-issue-links-actions.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"c",(function(){return a})),s.d(t,"a",(function(){return i})),s.d(t,"f",(function(){return r})),s.d(t,"h",(function(){return o})),s.d(t,"e",(function(){return c})),s.d(t,"g",(function(){return l})),s.d(t,"d",(function(){return u}));const n=(e,t)=>({type:"DELETE_REMOTE_LINKED_ISSUE_REQUEST",payload:{globalId:e,analyticsEvent:t}}),a=e=>({type:"DELETE_REMOTE_LINKED_ISSUE_SUCCESS",payload:e}),i=e=>({type:"DELETE_REMOTE_LINKED_ISSUE_FAILURE",payload:e}),r=(e,t,s)=>({type:"SAVE_REMOTE_LINKED_ISSUE_REQUEST",payload:{saveRemoteIssueLinkPayload:e,requestAnalyticsEvent:t,analyticsEvent:s}}),o=(e,t,s)=>({type:"SAVE_REMOTE_LINKED_ISSUE_SUCCESS",payload:{optimisticId:e,saveRemoteLinkResponse:t,analyticsEvent:s}}),c=(e,t,s,n)=>({type:"SAVE_REMOTE_LINKED_ISSUE_FAILURE",payload:{optimisticId:e,error:s,analyticsEvent:n,remoteIssueKey:t}}),l=(e,t,s)=>({type:"SAVE_REMOTE_LINKED_ISSUE_RETRY",payload:{optimisticId:e,requestAnalyticsEvent:t,analyticsEvent:s}}),u=e=>({type:"SAVE_REMOTE_LINKED_ISSUE_CANCEL",payload:e})},"./src/packages/issue/issue-view/src/actions/request-panel-metadata-actions.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"c",(function(){return i})),s.d(t,"b",(function(){return r}));const n=()=>({type:"FETCH_REQUEST_PANEL_METADATA"}),a=e=>{switch(e){case"portal":return"portal";case"email":return"email";case"api":return"api";case"jira":return"jira";case"deployment":return"deployment";case"anonymousportal":return"anonymousportal";default:return"unknown"}},i=e=>({type:"REQUEST_PANEL_METADATA_FETCH_SUCCESS",payload:{channel:a(e.channel),requestUrl:e.requestUrl,csatComment:e.csatComment}}),r=()=>({type:"REQUEST_PANEL_METADATA_FETCH_FAILURE"})},"./src/packages/issue/issue-view/src/actions/share-as-comment-actions.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"a",(function(){return a}));const n=e=>({type:"SHARE_AS_COMMENT",payload:{value:e}}),a=()=>({type:"CLEAR_SHARED_AS_COMMENT_VALUES"})},"./src/packages/issue/issue-view/src/actions/web-links-actions.js":function(e,t,s){"use strict";s.d(t,"k",(function(){return a})),s.d(t,"j",(function(){return i})),s.d(t,"c",(function(){return r})),s.d(t,"e",(function(){return o})),s.d(t,"b",(function(){return c})),s.d(t,"d",(function(){return l})),s.d(t,"h",(function(){return u})),s.d(t,"i",(function(){return d})),s.d(t,"g",(function(){return p})),s.d(t,"a",(function(){return m})),s.d(t,"f",(function(){return b}));var n=s("./src/packages/platform/utils/types/src/general.js");const a=()=>({type:"SHOW_CREATE_WEB_LINK_FORM"}),i=()=>({type:"HIDE_CREATE_WEB_LINK_FORM"}),r=(e,t,s)=>({type:"CREATE_WEB_LINK_REQUEST",payload:{optimisticId:Object(n.u)(`optimistic-web-link-${Date.now()}`),href:e,linkText:t,iconUrl:s}}),o=(e,t)=>({type:"CREATE_WEB_LINK_SUCCESS",payload:{optimisticId:e,webLink:t}}),c=e=>({type:"CREATE_WEB_LINK_FAILED",payload:{optimisticId:e}}),l=e=>({type:"CREATE_WEB_LINK_RETRY",payload:{optimisticId:e}}),u=e=>({type:"DELETE_WEB_LINK_REQUEST",payload:{id:e}}),d=e=>({type:"DELETE_WEB_LINK_SUCCESS",payload:{id:e}}),p=e=>({type:"DELETE_WEB_LINK_FAILED",payload:{id:e}}),m=e=>({type:"CANCEL_FAILED_WEB_LINK_DELETION",payload:{id:e}}),b=e=>({type:"DELETE_OPTIMISTIC_WEB_LINK",payload:{id:e}})},"./src/packages/issue/issue-view/src/activity/comment/comment-view/content/index.js":function(e,t,s){"use strict";s.r(t);var n=s("./node_modules/react-redux/es/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),i=s("./src/packages/issue/issue-view/src/common/util/flow-with-safe-component/index.js"),r=s("./node_modules/react/index.js"),o=s.n(r),c=s("./node_modules/lodash/noop.js"),l=s.n(c),u=s("./node_modules/react-loosely-lazy/lib/esm/index.js"),d=s("./src/packages/issue/issue-view/src/common/component/editor/async.js"),p=s("./src/packages/issue/issue-view/src/activity/comment/servicedesk-comment-editor-container/index.js"),m=s("./src/packages/issue/issue-view/src/common/component/renderer/index.js"),b=s("./src/packages/issue/issue-view/src/common/service/mentions/get-mention-encoder.js"),f=s("./src/packages/issue/issue-view/src/common/service/mentions/mention-provider-selector.js"),g=s("./src/packages/issue/issue-view/src/common/state/selectors/comments-selector.js"),h=s("./src/packages/issue/issue-view/src/common/state/selectors/media-context-selector.js"),y=Object(i.a)([Object(n.b)((e,t)=>{const s=Object(a.g)(e),n=Object(b.a)(s);return e=>({baseUrl:s,mentionEncoder:n,mentionProvider:Object(f.a)(e),contextIdentifier:Object(g.a)(e,t),mediaContext:Object(h.a)(e)})},{})])(m.a),O=s("./src/packages/issue/issue-view/src/activity/comment/comment-view/content/styled.js");const j=Object(u.f)(()=>s.e("async-editor-view").then(s.bind(null,"./src/packages/issue/issue-view/src/activity/comment/comment-editor/index.js")),{moduleId:"./src/packages/issue/issue-view/src/activity/comment/comment-editor/index.js"});class E extends r.PureComponent{constructor(...e){super(...e),this.getEditValue=()=>this.props.draftValue||this.props.bodyAdf,this.renderEditor=()=>{const e=o.a.createElement(y,{adf:this.props.bodyAdf}),t=o.a.createElement(d.a,{packageName:"issue",fallback:e},o.a.createElement(j,{isExpanded:!0,isExpandedByDefault:!0,shouldFocus:!0,defaultValue:this.getEditValue(),secondaryToolbarComponents:this.props.secondaryToolbarComponents,onBlur:this.props.onBlur,onSave:this.props.onSave,onCancel:this.props.onCancel,onChange:this.props.onChange,onPaste:this.props.onPaste}));return this.props.isServiceDesk?o.a.createElement(p.a,{isExpanded:!0,commentId:this.props.commentId},t):t}}render(){return o.a.createElement(O.a,null,this.props.isEditing?this.renderEditor():o.a.createElement(y,{adf:this.props.bodyAdf}))}}E.displayName="CommentContent",E.displayName="CommentContent",E.defaultProps={isServiceDesk:!1,onBlur:l.a,onSave:l.a,onCancel:l.a,onChange:l.a,onPaste:l.a};t.default=Object(i.a)([Object(n.b)(e=>({isServiceDesk:Object(a.v)(e)}),{})])(E)},"./src/packages/issue/issue-view/src/activity/comment/comment-view/content/styled.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js").default.div(["flex:1 1 100%;min-width:0;input{font:inherit;}"])},"./src/packages/issue/issue-view/src/activity/comment/comment-visibility/assets/Error.svg":function(e,t,s){e.exports=s.p+"assets/Error.be0d40cfbcd6c064b92b9530fd4cf3ce.8.svg"},"./src/packages/issue/issue-view/src/activity/comment/servicedesk-comment-editor-container/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react-redux/es/index.js"),a=s("./src/packages/issue/issue-view/src/actions/comment-actions.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js"),r=s("./src/packages/issue/issue-view/src/common/util/flow-with-safe-component/index.js"),o=s("./src/packages/issue/issue-view/src/selectors/comment-selector.js"),c=s("./node_modules/react/index.js"),l=s.n(c),u=s("./node_modules/react-intl/lib/index.es.js"),d=s("./node_modules/lodash/noop.js"),p=s.n(d),m=s("./node_modules/@atlaskit/tabs/dist/es2019/components/Tabs.js"),b=s("./src/packages/platform/observability/analytics-web-react/src/components/with-fire-ui-analytics.js"),f=s("./node_modules/@atlaskit/button--current/dist/es2019/components/Button.js"),g=Object(u.defineMessages)({replyToCustomer:{id:"issue.views.issue-base.activity.comment.comment-editor-view.servicedesk-comment-editor-view.reply-to-customer-button",defaultMessage:"Reply to customer"},addInternalNote:{id:"issue.views.issue-base.activity.comment.comment-editor-view.servicedesk-comment-editor-view.add-internal-note-button",defaultMessage:"Add internal note"},loadingAttachments:{id:"issue.views.issue-base.activity.comment.comment-editor-view.servicedesk-comment-editor-view.loading-attachments",defaultMessage:"Loading attachments\u2026"}}),h=s("./src/packages/issue/issue-view/src/actions/attachment-popup-actions.js"),y=s("./node_modules/@atlaskit/icon/glyph/attachment.js"),O=s.n(y),j=s("./node_modules/@atlaskit/tooltip/dist/es2019/Tooltip.js"),E=Object(u.defineMessages)({addAttachmentLabel:{id:"issue.label-for-add-attachment-button",defaultMessage:"Add attachment"}}),v=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),k=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const w=v.default.span(["padding:","px;"],k.e/2),S=v.default.div(["margin-left:auto;margin-right:","px;"],k.e),I=e=>{const{intl:{formatMessage:t},onClick:s,isCommentAttachmentInProgress:n}=e;return(l.a.createElement(S,null,l.a.createElement(j.a,{content:t(E.addAttachmentLabel),position:"bottom"},l.a.createElement(f.a,{spacing:"none",appearance:"subtle-link",isLoading:n,iconBefore:l.a.createElement(w,null,l.a.createElement(O.a,{size:"medium",label:t(E.addAttachmentLabel)})),externalId:"attachment",onClick:s}))))};I.displayName="AttachmentPicker";var C=Object(u.injectIntl)(I),T=Object(r.a)([Object(n.b)(e=>({isCommentAttachmentInProgress:Object(o.x)(e)}),e=>({onClick:()=>{e(Object(h.b)())}}))])(C),P=s("./node_modules/@atlaskit/theme/dist/es2019/index.js");const _=v.default.div(["white-space:nowrap;border:1px solid ",";height:","px;box-sizing:border-box;padding:","px 0;border-radius:","px;display:flex;align-items:center;"],P.a.N40,5*k.e,k.e/2,k.a),x=v.default.div(["padding:0 ","px;"],k.e);class D extends c.Component{renderReplyToCustomer(){const{onReplyToCustomer:e,intl:{formatMessage:t}}=this.props;return(l.a.createElement(l.a.Fragment,null," / ",l.a.createElement(f.a,{appearance:"link",onClick:e},t(g.replyToCustomer))))}render(){const{onAddInternalNote:e,isCommentAttachmentInProgress:t,intl:{formatMessage:s},isPublicCommentAllowed:n}=this.props;return(l.a.createElement(_,null,t?l.a.createElement(x,null,s(g.loadingAttachments)):l.a.createElement(l.a.Fragment,null,l.a.createElement(f.a,{appearance:"link",onClick:e},s(g.addInternalNote)),n&&this.renderReplyToCustomer()),l.a.createElement(T,null)))}}D.displayName="CollapsedEditorView";var A=Object(u.injectIntl)(D),M=Object(r.a)([Object(b.a)({onReplyToCustomer:"onReplyToCustomer",onAddInternalNote:"onAddInternalNote"}),Object(n.b)(e=>({isCommentAttachmentInProgress:Object(o.x)(e)}),{})])(A);const L=v.default.div(["margin:0 -","px ","px;"],k.e,2*k.e),R={public:{id:"public",label:l.a.createElement(u.FormattedMessage,g.replyToCustomer),content:l.a.createElement("div",null)},internal:{id:"internal",label:l.a.createElement(u.FormattedMessage,g.addInternalNote),content:l.a.createElement("div",null)}};class N extends c.Component{constructor(...e){super(...e),this.onReplyToCustomer=()=>{this.props.onCommentVisibilityChange(!1),this.expandEditor()},this.onAddInternalNote=()=>{this.props.onCommentVisibilityChange(!0),this.expandEditor()},this.onTabSelect=e=>{this.props.onCommentVisibilityChange("internal"===e.id)},this.expandEditor=()=>{const{isExpanded:e,onExpanded:t}=this.props;e||t&&t()}}getExpandedView(){const{isInternal:e,isPublicCommentAllowed:t,children:s}=this.props,n=t&&!e?R.public:R.internal,a=t?[R.internal,R.public]:[R.internal];return l.a.createElement(l.a.Fragment,null,l.a.createElement(L,null,l.a.createElement(m.a,{tabs:a,selected:n,onSelect:this.onTabSelect})),s)}getCollapsedView(){return l.a.createElement(M,{onReplyToCustomer:this.onReplyToCustomer,onAddInternalNote:this.onAddInternalNote,isPublicCommentAllowed:this.props.isPublicCommentAllowed})}render(){const{isExpanded:e}=this.props;return e?this.getExpandedView():this.getCollapsedView()}}N.displayName="ServiceDeskCommentEditorContainer",N.defaultProps={isExpanded:!1,isInternal:!1,isPublicCommentAllowed:!1,onExpanded:p.a,onCommentVisibilityChange:p.a};var U=Object(u.injectIntl)(N);function F(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function V(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?F(Object(s),!0).forEach((function(t){K(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):F(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function K(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function B(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}t.a=Object(r.a)([Object(n.b)((e,t)=>({isInternal:Object(o.C)(t.commentId)(e),isPublicCommentAllowed:Object(i.e)(e)}),(e,t)=>({onCommentVisibilityChange:s=>{e(Object(a.d)(t.commentId,s))}}),(e,t,s)=>{const{commentId:n}=s;return V(V(V({},B(s,["commentId"])),e),t)})])(U)},"./src/packages/issue/issue-view/src/activity/common/component/feed-skeleton/view.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./src/packages/issue/issue-view/src/common/skeleton/container-mask-view.js"),r=s("./src/packages/issue/issue-view/src/common/skeleton/skeleton-background-view.js"),o=s("./src/packages/issue/issue-view/src/common/skeleton/text-line-mask-view.js"),c=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),l=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js"),u=s("./src/packages/issue/issue-view/src/common/skeleton/avatar-view.js"),d=s("./src/packages/issue/issue-view/src/common/skeleton/skeleton-container-view.js");const p=Object(c.default)(d.a)(["flex-direction:column;width:100%;"]),m=Object(c.default)(i.a)(["display:flex;"]),b=Object(c.default)(r.a)(["width:9px;flex-shrink:0;"]),f=Object(c.default)(r.a)(["height:22px;"]),g=Object(c.default)(u.a)(["background-position:-2px -2px;border-bottom:","px solid white;flex-shrink:0;"],4*l.e),h=a.a.createElement(a.a.Fragment,null,a.a.createElement(g,null),a.a.createElement(b,null),a.a.createElement(i.a,null,a.a.createElement(i.a,{paddingTop:1,paddingBottom:5},a.a.createElement(o.a,{fontSize:14,lineHeight:16,intrusion:250})),a.a.createElement(i.a,{paddingTop:4,paddingBottom:0},a.a.createElement(o.a,{fontSize:24,lineHeight:24,intrusion:0})),a.a.createElement(f,null)));t.a=()=>a.a.createElement(p,null,a.a.createElement(r.b,null),a.a.createElement(m,{paddingTop:0,paddingBottom:0},h),a.a.createElement(m,{paddingTop:0,paddingBottom:0},h))},"./src/packages/issue/issue-view/src/activity/common/component/load-more-button/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/@atlaskit/button--current/dist/es2019/components/Button.js"),r=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),o=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const c=r.default.div(["margin:","px 0;"],2*o.e),l=({onClick:e,isDisabled:t,isLoading:s,numberToLoad:n,children:r})=>n<=0?null:a.a.createElement(c,null,a.a.createElement(i.a,{onClick:e,isDisabled:t,isLoading:s,shouldFitContainer:!0},r));l.displayName="LoadMoreButton";var u=l;t.a=u},"./src/packages/issue/issue-view/src/activity/common/messages.js":function(e,t,s){"use strict";var n=s("./node_modules/react-intl/lib/index.es.js");t.a=Object(n.defineMessages)({editedBy:{id:"issue.common.messages.activity.edited-by",defaultMessage:"{timestamp} by {author}"},anonymous:{id:"issue.common.messages.activity.anonymous",defaultMessage:"Anonymous"}})},"./src/packages/issue/issue-view/src/activity/common/styles/index.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return r})),s.d(t,"e",(function(){return o})),s.d(t,"d",(function(){return c})),s.d(t,"b",(function(){return l})),s.d(t,"f",(function(){return u})),s.d(t,"a",(function(){return d}));var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),i=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const r=n.default.span(["font-weight:500;"]);r.displayName="Emphasise";const o=n.default.span(["grid-row:1;margin-left:","px;white-space:nowrap;"],.5*i.e);o.displayName="GridContainer";const c=n.default.div(["margin:","px 0;"],3*i.e);n.default.span(["margin-left:","px;"],i.e).displayName="TimestampContainer";const l=n.default.span(["margin-left:-","px;display:grid;"],i.e/2),u=n.default.span(["display:grid;"]);u.displayName="GridContentContainer";const d={always:Object(n.css)(["color:",";"],a.a.N500),whenDisplaySettingSwitchable:Object(n.css)([":hover{color:inherit;}"])}},"./src/packages/issue/issue-view/src/activity/worklog/state/selectors.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return o})),s.d(t,"b",(function(){return c})),s.d(t,"a",(function(){return l}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/time-tracking-selector.js");const r=Object(n.createSelector)(a.J,e=>e.worklog),o=Object(n.createSelector)(i.i,e=>e.remainingEstimateSeconds||0),c=Object(n.createSelector)(r,e=>e.loadingStage),l=Object(n.createSelector)(r,e=>e.highlightedWorklogId)},"./src/packages/issue/issue-view/src/aui-modal-stack-index/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return c}));var n=s("./node_modules/react/index.js"),a=s("./node_modules/lodash/noop.js"),i=s.n(a),r=s("./src/packages/common-legacy-do-not-add-anything-new/src/bridge/index.js"),o=s("./src/packages/issue/issue-view/src/common/legacy/aui-dialog-event.js");class c extends n.Component{constructor(...e){super(...e),this.state={stackIndex:0},this.incrementStackIndex=()=>{this.setState({stackIndex:this.state.stackIndex+1})},this.decrementStackIndex=()=>{this.setState({stackIndex:this.state.stackIndex-1})}}componentDidMount(){Object(r.a)({name:"jira/util/events"}).then(({bind:e})=>{e("beforeShow",this.incrementStackIndex),e("Dialog.hide",this.decrementStackIndex)}).catch(i.a),Object(o.a)("show",this.incrementStackIndex),Object(o.a)("hide",this.decrementStackIndex)}componentWillUnmount(){Object(r.a)({name:"jira/util/events"}).then(({unbind:e})=>{e("beforeShow",this.incrementStackIndex),e("Dialog.hide",this.decrementStackIndex)}).catch(i.a),Object(o.b)("show",this.incrementStackIndex),Object(o.b)("hide",this.decrementStackIndex)}render(){return this.props.children(this.state.stackIndex)}}c.displayName="AuiModalStackIndex"},"./src/packages/issue/issue-view/src/browser-metrics/browser-metrics-constants.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return n})),s.d(t,"a",(function(){return a})),s.d(t,"d",(function(){return i})),s.d(t,"f",(function(){return r})),s.d(t,"g",(function(){return o})),s.d(t,"h",(function(){return c})),s.d(t,"i",(function(){return l})),s.d(t,"b",(function(){return u})),s.d(t,"e",(function(){return d}));const n={key:"FETCH_FIELD_DATA",prefix:"ISSUE_DETAILS"},a={key:"FETCH_INITIAL_COMMENTS",prefix:"ISSUE_DETAILS"},i={key:"FETCH_ISSUE_LINK_TYPES",prefix:"ISSUE_DETAILS"},r={key:"FETCH_SUBTASK_TYPES",prefix:"ISSUE_DETAILS"},o={key:"FETCH_LOAD_CONTEXT",prefix:"ISSUE_DETAILS"},c={key:"FETCH_USER_AUTH",prefix:"ISSUE_DETAILS"},l={key:"FETCH_VIEW_CONTEXT",prefix:"ISSUE_DETAILS"},u={key:"FETCH_ECOSYSTEM_EXTENSIONS",prefix:"ISSUE_DETAILS"},d={key:"FETCH_ISSUE_PROPERTIES",prefix:"ISSUE_DETAILS"}},"./src/packages/issue/issue-view/src/browser-metrics/fetch-issue-network-times.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return u})),s.d(t,"b",(function(){return d}));var n=s("./src/packages/common-legacy-do-not-add-anything-new/src/performance/index.js"),a=s("./src/packages/issue/issue-view/src/browser-metrics/browser-metrics-constants.js");function i(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function r(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?i(Object(s),!0).forEach((function(t){o(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):i(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const c=[a.g,a.a,a.e,a.d,a.i,a.f,a.c,a.b,a.h];let l;const u=()=>{c.forEach(e=>{const t=`BEGIN_${e.prefix}_${e.key}`,s=`END_${e.prefix}_${e.key}`;n.default.clearMarks&&(n.default.clearMarks(t),n.default.clearMarks(s))}),l=null},d=()=>(l||(l=(()=>c.reduce((e,t)=>{const s=`BEGIN_${t.prefix}_${t.key}`,a=`END_${t.prefix}_${t.key}`,i=Object(n.timeBetweenMarks)(s,a);if(null!=i&&i>0){const o=r(r({},e),{},{[`${t.key}_NETWORK`]:i});return n.default.clearMarks&&(n.default.clearMarks(s),n.default.clearMarks(a)),o}return e},{}))()),l)},"./src/packages/issue/issue-view/src/common/actions/issue-fetch-actions.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return n})),s.d(t,"d",(function(){return a})),s.d(t,"b",(function(){return i})),s.d(t,"g",(function(){return r})),s.d(t,"h",(function(){return o})),s.d(t,"e",(function(){return c})),s.d(t,"f",(function(){return l})),s.d(t,"a",(function(){return u}));const n=()=>({type:"FETCH_ISSUE_REQUEST"}),a=e=>({type:"FETCH_ISSUE_SUCCESS",payload:e}),i=e=>({type:"FETCH_ISSUE_FAILURE",payload:e}),r=()=>({type:"REFRESH_ISSUE_REQUEST"}),o=e=>({type:"REFRESH_ISSUE_SUCCESS",payload:e}),c=()=>({type:"REFRESH_ECOSYSTEM_REQUEST"}),l=e=>({type:"REFRESH_ECOSYSTEM_SUCCESS",payload:e}),u=()=>({type:"FETCH_FORGE_REQUEST"})},"./src/packages/issue/issue-view/src/common/actions/timestamp-display-setting-actions.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=e=>({type:"SET_TIMESTAMP_DISPLAY_SETTING",payload:e})},"./src/packages/issue/issue-view/src/common/actions/worklog-actions.js":function(e,t,s){"use strict";s.d(t,"h",(function(){return n})),s.d(t,"i",(function(){return a})),s.d(t,"E",(function(){return i})),s.d(t,"G",(function(){return r})),s.d(t,"D",(function(){return o})),s.d(t,"a",(function(){return c})),s.d(t,"m",(function(){return l})),s.d(t,"n",(function(){return u})),s.d(t,"g",(function(){return d})),s.d(t,"A",(function(){return p})),s.d(t,"C",(function(){return m})),s.d(t,"B",(function(){return b})),s.d(t,"l",(function(){return f})),s.d(t,"k",(function(){return g})),s.d(t,"K",(function(){return h})),s.d(t,"L",(function(){return y})),s.d(t,"J",(function(){return O})),s.d(t,"j",(function(){return j})),s.d(t,"F",(function(){return E})),s.d(t,"H",(function(){return v})),s.d(t,"o",(function(){return k})),s.d(t,"d",(function(){return w})),s.d(t,"u",(function(){return S})),s.d(t,"v",(function(){return I})),s.d(t,"t",(function(){return C})),s.d(t,"b",(function(){return T})),s.d(t,"q",(function(){return P})),s.d(t,"c",(function(){return _})),s.d(t,"r",(function(){return x})),s.d(t,"p",(function(){return D})),s.d(t,"s",(function(){return A})),s.d(t,"e",(function(){return M})),s.d(t,"w",(function(){return L})),s.d(t,"x",(function(){return R})),s.d(t,"f",(function(){return N})),s.d(t,"y",(function(){return U})),s.d(t,"z",(function(){return F})),s.d(t,"I",(function(){return V}));const n="state.FETCH_WORKLOGS_REQUEST",a="state.FETCH_WORKLOGS_REQUEST_INITIAL",i=(e,t,s)=>({type:a,payload:{baseUrl:e,issueKey:t},meta:{analyticsEvent:s}}),r=(e,t,s)=>({type:"state.FETCH_WORKLOGS_SUCCESS",payload:{sortedWorklogIds:e,worklogs:t,totalWorklogs:s}}),o=()=>({type:"state.FETCH_WORKLOGS_FAILURE"}),c="state.ADD_WORKLOG_REQUEST",l=(e,t)=>({type:c,payload:{values:e},meta:{analyticsEvent:t}}),u=(e,t,s)=>({type:"state.ADD_WORKLOG_SUCCESS",payload:{worklogId:e,timeTracking:t},meta:s}),d="state.FETCH_SURROUNDING_WORKLOGS_BY_ID",p=e=>({type:d,payload:{worklogId:e}}),m=(e,t,s,n)=>({type:"state.FETCH_WORKLOGS_BY_ID_SUCCESS",payload:{sortedWorklogIds:e,worklogs:t,startIndex:s,totalWorklogs:n}}),b=()=>({type:"state.FETCH_WORKLOGS_BY_ID_FAILURE"}),f=()=>({type:"state.ADD_WORKLOG_FAILURE"}),g="state.UPDATE_TIME_REMAINING_REQUEST",h=(e,t)=>({type:g,payload:{timeRemaining:e},meta:{analyticsEvent:t}}),y=e=>({type:"state.UPDATE_TIME_REMAINING_SUCCESS",payload:{timeRemaining:e}}),O=()=>({type:"state.UPDATE_TIME_REMAINING_FAILURE"}),j="state.FETCH_WORKLOGS_RETRY",E=(e,t,s)=>({type:j,payload:{baseUrl:e,issueKey:t},meta:{analyticsEvent:s}}),v=(e,t)=>({type:"state.OPEN_MODAL",payload:{modalType:e,worklogId:t}}),k=()=>({type:"state.CLOSE_MODAL"}),w="state.EDIT_WORKLOG_REQUEST",S=(e,t,s)=>({type:w,payload:{worklogId:e,values:t},meta:{analyticsEvent:s}}),I=(e,t,s,n)=>({type:"state.EDIT_WORKLOG_SUCCESS",payload:{worklogs:e,worklogId:t,timeTrackingDeltas:s},meta:n}),C=()=>({type:"state.EDIT_WORKLOG_FAILURE"}),T="state.DELETE_WORKLOG_REQUEST",P=(e,t,s,n)=>({type:T,payload:{worklogId:e,timeRemaining:t,isAdjustTimeRemainingChecked:s},meta:{analyticsEvent:n}}),_="state.DELETE_WORKLOG_SUCCESS",x=(e,t)=>({type:_,payload:{worklogId:e,timeTrackingDeltas:t}}),D=()=>({type:"state.DELETE_WORKLOG_FAILURE"}),A=()=>({type:"state.DISPOSE_WORKLOG_APP"}),M="state.FETCH_NEWER_WORKLOGS_REQUEST",L=(e,t,s)=>({type:M,payload:{baseUrl:e,issueKey:t,analyticsEvent:s}}),R=(e,t,s)=>({type:"state.FETCH_NEWER_WORKLOGS_SUCCESS",payload:{sortedWorklogIds:e,worklogs:t,totalWorklogs:s}}),N="state.FETCH_OLDER_WORKLOGS_REQUEST",U=(e,t,s)=>({type:N,payload:{baseUrl:e,issueKey:t,analyticsEvent:s}}),F=(e,t,s)=>({type:"state.FETCH_OLDER_WORKLOGS_SUCCESS",payload:{sortedWorklogIds:e,worklogs:t,totalWorklogs:s}}),V=e=>({type:"SET_WORKLOG_SCROLL_STATUS",payload:{status:e}})},"./src/packages/issue/issue-view/src/common/component/date-time/view.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-intl/lib/index.es.js"),r=s("./node_modules/lodash/isNaN.js"),o=s.n(r),c=s("./node_modules/@atlaskit/datetime-picker/dist/es2019/components/DateTimePicker.js"),l=s("./src/packages/platform/utils/constants/src/datetimepicker-available-times.js"),u=s("./src/packages/common-legacy-do-not-add-anything-new/src/date/date-messages.js"),d=s("./src/packages/compatibility/src/main.js");class p extends n.Component{constructor(...e){super(...e),this.onChange=e=>{const t=Object(d.a)(e);this.props.onChange(o()(Date.parse(t))?null:t)},this.parseValue=(e,t,s)=>this.props.parseValue(e,t,s,this.props.timeZone)}render(){const{autoFocus:e,isDisabled:t,value:s,timeZone:n,intl:{formatMessage:i}}=this.props;return(a.a.createElement(c.a,{autoFocus:e,isDisabled:t,value:s||"",onChange:this.onChange,timeIsEditable:!0,parseValue:n?this.parseValue:void 0,datePickerSelectProps:{placeholder:i(u.a.placeholderDate)},timePickerSelectProps:{formatCreateLabel:e=>e,filterOption:(e,t)=>!t||e.value===t||e.label===t},times:l.a}))}}p.displayName="DateTimeFieldView",p.defaultProps={isDisabled:!1,value:void 0,autoFocus:!1},t.a=Object(i.injectIntl)(p)},"./src/packages/issue/issue-view/src/common/component/editor/async.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return c})),s.d(t,"a",(function(){return l}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-loosely-lazy/lib/esm/index.js"),r=s("./src/packages/platform/ui/error-boundary/src/main.js"),o=s("./src/packages/issue/issue-view/src/common/component/renderer/index.js");const c=({defaultValue:e,mediaContext:t})=>a.a.createElement(o.a,{mediaContext:t,adf:e});c.displayName="IssueEditorReadonly";const l=({children:e,fallback:t,packageName:s})=>a.a.createElement(r.a,{id:"issue-editor",packageName:s,render:()=>t},a.a.createElement(i.a,{fallback:t},e));l.displayName="IssueEditorBoundary"},"./src/packages/issue/issue-view/src/common/component/loading-component-wrapper/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/lodash/isFunction.js"),r=s.n(i),o=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/with-analytics.js"),c=s("./src/packages/common-legacy-do-not-add-anything-new/src/performance/index.js");function l(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function u(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}t.a=(e,t,s)=>{const i=r()(e)?e:()=>e||null;class d extends n.Component{constructor(e){super(e),this.startTime=void 0,this.mountTime=void 0,this.startTime=c.default.now()}componentDidMount(){this.mountTime=c.default.now()}componentWillUnmount(){const e=c.default.now(),t=e-this.startTime,n=this.mountTime-this.startTime,a=e-this.mountTime;t>0&&this.props.onWillUnmount(t,n,a,s)}render(){return i()}}d.displayName="LoadingWrapper",d.defaultProps={onWillUnmount:()=>{}};const p=Object(o.a)(e=>({onWillUnmount:(t,s,n,a)=>e("loading-component",function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?l(Object(s),!0).forEach((function(t){u(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):l(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({duration:t,initializationTime:s,mountingTime:n},a||{}))}))(d);return(a.a.createElement(p,{externalId:t}))}},"./src/packages/issue/issue-view/src/common/component/log-time-modal/modal/utils/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));s("./node_modules/lodash/clamp.js");const n={minute:"m",hour:"h",day:"d",week:"w"},a=e=>n[e]||n.minute},"./src/packages/issue/issue-view/src/common/component/logged-time/view.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return h}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-intl/lib/index.es.js"),r=s("./src/packages/issue/issue-view/src/common/util/time-string/seconds-to-time-string/index.js"),o=s("./src/packages/issue/issue-view/src/common/component/progress-tracker/index.js"),c=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),l=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),u=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const d=c.default.div(["width:100%;display:flex;"]),p=c.default.div(["flex-grow:1;margin-top:","px;"],u.e/4),m=c.default.small(["color:",";display:flex;justify-content:space-between;margin-top:0;font-size:","px;flex-wrap:wrap;"],l.a.N500,u.d),b=c.default.span(["margin-right:","px;"],u.e/2),f=c.default.span(["cursor:pointer;"]),g=c.default.span(["font-weight:normal;"]);class h extends n.Component{constructor(...e){super(...e),this.getTimeRemainingText=()=>{if(!this.props.value.remainingTime)return null;const e=this.secondsToTimeString(this.props.value.remainingTime);return(a.a.createElement(f,null,a.a.createElement(i.FormattedMessage,{id:"issue.log-time.remaining-time",defaultMessage:"{time} remaining",values:{time:a.a.createElement(g,null,e)}})))},this.secondsToTimeString=e=>{const{daysPerWeek:t,hoursPerDay:s}=this.props.config;return Object(r.a)(t,s)(e)}}getTimeLoggedText(){if(this.props.value&&this.props.value.loggedTime){const e=this.secondsToTimeString(this.props.value.loggedTime);return(a.a.createElement(i.FormattedMessage,{id:"issue.log-time.time-logged",defaultMessage:"{time} logged",values:{time:a.a.createElement(g,{"data-testid":"issue.issue-view.common.logged-time.value"},e)}}))}return(a.a.createElement(i.FormattedMessage,{id:"issue.log-time.no-time-logged",defaultMessage:"No time logged"}))}render(){const{config:e,isDone:t,isCompact:s,value:n,estimatedTime:i}=this.props;return(a.a.createElement(d,null,a.a.createElement(p,null,a.a.createElement(o.a,{value:n,estimatedTime:i,config:e,isDone:t,isCompact:s}),a.a.createElement(m,null,a.a.createElement(b,null,this.getTimeLoggedText()),this.getTimeRemainingText()))))}}h.displayName="LoggedTime",h.defaultProps={isCompact:!0,isDone:!1}},"./src/packages/issue/issue-view/src/common/component/permalink-button/button/view.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return f}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/@atlaskit/button--current/dist/es2019/components/Button.js"),r=s("./node_modules/@atlaskit/icon/glyph/check-circle.js"),o=s.n(r),c=s("./node_modules/@atlaskit/icon/glyph/link.js"),l=s.n(c),u=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),d=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/field-copy-text/index.js"),p=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),m=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const b=p.default.div(["padding-top:","px;opacity:0;transition:opacity 0.2s ease,transform 0.2s ease;transform:translate(","px,0);padding-left:","px;display:flex;align-items:flex-end;",";&:focus{opacity:1;transform:translate(0,0);}"],m.e/4,-m.e,m.e/2,e=>e.isVisible&&"\n        opacity: 1;\n        transform: translate(0, 0);\n    ");class f extends n.Component{constructor(...e){super(...e),this.state={isCopied:!1},this.onCopySuccess=e=>{this.setState({isCopied:e})},this.onCopyReset=()=>{this.setState({isCopied:!1})}}render(){const{id:e,label:t,fullIssueUrl:s,isVisible:n,onCopyClick:r}=this.props,{isCopied:c}=this.state;return a.a.createElement(b,{isVisible:n,className:"issue_view_permalink_button_wrapper"},a.a.createElement(d.a,{id:e,label:t,tooltipDelay:0,tooltipLabel:t,tooltipLabelPosition:"top",shouldFitContainer:!0,value:s,hideFieldText:!0,remountOnChange:!0,onCopyClick:r,onClickChange:e=>this.onCopySuccess(e),onCopyReset:this.onCopyReset},a.a.createElement(i.a,{appearance:"subtle-link",iconBefore:c?a.a.createElement(o.a,{label:"",primaryColor:u.a.G500,size:"small"}):a.a.createElement(l.a,{size:"small",label:t}),spacing:"none"})))}}f.displayName="PermalinkButton"},"./src/packages/issue/issue-view/src/common/component/permalink-button/permalink-provider/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js");const a=e=>{const[t,s,a]=((e=!1)=>{const[t,s]=Object(n.useState)(e);return[t,()=>{s(!0)},()=>{s(!1)}]})(e.defaultIsVisible);return e.children({isVisible:t,show:s,hide:a})};a.defaultProps={defaultIsVisible:!1};t.a=a},"./src/packages/issue/issue-view/src/common/component/progress-tracker/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react-intl/lib/index.es.js"),a=s("./node_modules/react/index.js"),i=s.n(a),r=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),o=s("./src/packages/issue/issue-view/src/common/util/time-string/seconds-to-time-string/index.js"),c=Object(n.defineMessages)({underOriginalEstimate:{id:"issue.log-time.under-original-estimated-time-tooltip",defaultMessage:"{time} under original estimate"},overOriginalEstimate:{id:"issue.log-time.over-original-estimated-time-tooltip",defaultMessage:"{time} over original estimate"}}),l=s("./node_modules/@atlaskit/tooltip/dist/es2019/Tooltip.js"),u=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),d=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const p=u.default.div(["padding:","px;background-color:transparent;border-radius:3px;",";&:hover{background-color:",";}"],d.e/2,e=>e.hasPointerCursor?"cursor: pointer;":"",r.a.N60),m=u.default.div(["background-color:",";border-radius:","px;display:flex;height:","px;overflow:hidden;width:100%;",";"],r.a.N40,d.e/2,e=>e.isCompact?d.e/2:d.e,e=>e.hasPointerCursor?"cursor: pointer;":"");class b extends a.Component{renderProgressBar(){return this.props.shouldHighlightOnHover?i.a.createElement(p,{hasPointerCursor:!!this.props.tooltip},i.a.createElement(m,{isCompact:this.props.isCompact,hasPointerCursor:!!this.props.tooltip},this.props.children)):i.a.createElement(m,{isCompact:this.props.isCompact,hasPointerCursor:!!this.props.tooltip},this.props.children)}render(){return this.props.tooltip?i.a.createElement(l.a,{content:this.props.tooltip},this.renderProgressBar()):this.renderProgressBar()}}b.displayName="ProgressBar",b.defaultProps={isCompact:!0,shouldHighlightOnHover:!1,children:null,tooltip:null};const f=u.default.div(["background-color:",";flex-shrink:0;width:",";transition:width 0.3s ease;&:first-child{border-top-left-radius:","px;border-bottom-left-radius:","px;}&:last-child{border-top-right-radius:","px;border-bottom-right-radius:","px;}"],e=>e.color,e=>e.width,d.e/2,d.e/2,d.e/2,d.e/2);class g extends a.Component{render(){const{color:e,proportion:t}=this.props,s=t>0?`${100*t}%`:"0";return i.a.createElement(f,{color:e,width:s})}}g.displayName="ProgressBarSegment",g.defaultProps={color:r.a.B400,proportion:0};const h=(e,t)=>{const{loggedTime:s,remainingTime:n}=e;return s&&void 0!==t?s+(n||0)-t:0};class y extends a.Component{constructor(...e){super(...e),this.secondsToTimeString=e=>{const{daysPerWeek:t,hoursPerDay:s}=this.props.config;return Object(o.a)(t,s)(e)}}getTooltip(){const{value:e,estimatedTime:t}=this.props,s=h(e,t);return 0===s?null:s>0?this.props.intl.formatMessage(c.overOriginalEstimate,{time:this.secondsToTimeString(s)}):this.props.intl.formatMessage(c.underOriginalEstimate,{time:this.secondsToTimeString(-s)})}render(){const{value:e,estimatedTime:t,shouldHighlightOnHover:s}=this.props,{loggedTime:n=0}=e,a=((e,t=0)=>{const{loggedTime:s=0,remainingTime:n=0}=e;return Math.max(t,s+n)})(e,t),o=Math.max(h(e,t),0),c=a?(n-o)/a:0,l=a?o/a:0;return i.a.createElement(b,{tooltip:this.getTooltip(),isCompact:this.props.isCompact,shouldHighlightOnHover:s},i.a.createElement(g,{color:this.props.isDone?r.a.G300:r.a.B400,proportion:c}),i.a.createElement(g,{color:r.a.Y300,proportion:l}))}}y.displayName="ProgressTracker",y.defaultProps={isCompact:!0,isDone:!1,shouldHighlightOnHover:!1,value:{loggedTime:0}};t.a=Object(n.injectIntl)(y)},"./src/packages/issue/issue-view/src/common/component/renderer/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react-redux/es/index.js"),a=s("./src/packages/common-legacy-do-not-add-anything-new/src/navigation/with-link-actions/index.js"),i=s("./src/packages/issue/issue-view/src/common/media/components/with-media-provider/with-media-provider.js"),r=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),o=s("./node_modules/react/index.js"),c=s.n(o),l=s("./node_modules/@atlaskit/adf-schema/dist/es2019/schema/default-schema.js"),u=s("./node_modules/@atlaskit/editor-common/dist/es2019/provider-factory/provider-factory.js"),d=s("./node_modules/@atlaskit/renderer/dist/es2019/ui/Renderer/index.js"),p=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/html-view/check-for-href.js"),m=s("./src/packages/common-legacy-do-not-add-anything-new/src/navigation/iframe-redirect/index.js"),b=s("./src/packages/common-legacy-do-not-add-anything-new/src/services/emoji.js"),f=s("./src/packages/rich-content/src/common/adf-parsing-utils.js"),g=s("./src/packages/issue/issue-view/src/media-feature-flags.js"),h=s("./src/packages/issue/issue-view/src/common/styles/issue-value.js");class y extends o.PureComponent{constructor(e){super(e),this.onInlineCardClicked=(e,t)=>{const{linkActions:s}=this.props,n=e||window.event;n.preventDefault();const a=n.metaKey||0!==n.button;Object(m.a)(t,a,s.push)},this.onMentionClicked=(e,t,s)=>{const{linkActions:n,mentionEncoder:a}=this.props;if(a){s.stopPropagation();const t=s,i=t.metaKey||0!==t.button;Object(m.a)(a(e),i,n.push)}},this.onContentSelected=e=>{e.target instanceof window.Element&&!Object(p.a)(e.target,e.currentTarget)&&!this.checkForMedia(e.target,e.currentTarget)||e.stopPropagation()},this.checkForMedia=(e,t)=>!(!e||e===t)&&(!(!e.className.includes("rich-media-item")&&!e.className.includes("MediaGroup")&&"media-viewer-popup"!==e.getAttribute("data-testid"))||this.checkForMedia(e.parentElement,t)),this.dataProviders=void 0,this.eventHandlers=void 0,this.isEmpty=()=>this.isAdfValueEmpty(),this.isAdfValueEmpty=()=>{const{adf:e}=this.props;return!e||Object(f.g)(e)};const{mediaProvider:t,mentionProvider:s,contextIdentifier:n}=this.props;this.dataProviders=new u.a,this.dataProviders.setProvider("mediaProvider",t),this.dataProviders.setProvider("mentionProvider",Promise.resolve(s)),this.dataProviders.setProvider("emojiProvider",Object(b.b)(this.props.cloudId,this.props.loggedInUserAccountId)),n&&this.dataProviders.setProvider("contextIdentifierProvider",Promise.resolve(n)),this.eventHandlers={mention:{onClick:this.onMentionClicked},smartCard:{onClick:this.onInlineCardClicked}}}render(){const{adf:e}=this.props;return this.isEmpty()?c.a.createElement(h.b,null,this.props.placeholder):c.a.createElement("div",{onClick:this.onContentSelected,onKeyPress:this.onContentSelected,role:"presentation"},c.a.createElement(d.a,{schema:l.a,document:Object(f.h)(e),dataProviders:this.dataProviders,eventHandlers:this.eventHandlers,media:{featureFlags:Object(g.a)()}}))}}y.displayName="Renderer",y.displayName="Renderer",y.defaultProps={adf:void 0,placeholder:void 0,mentionEncoder:()=>""};const O=Object(n.b)(e=>({cloudId:Object(r.j)(e),loggedInUserAccountId:Object(r.a)(e)}),{})(y),j=Object(i.a)(Object(a.a)(O));t.a=j},"./src/packages/issue/issue-view/src/common/component/section-heading/section-heading-view.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return r})),s.d(t,"b",(function(){return o})),s.d(t,"e",(function(){return c})),s.d(t,"d",(function(){return l})),s.d(t,"a",(function(){return u}));var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),i=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const r=n.default.div(["display:flex;align-items:baseline;flex-wrap:nowrap;justify-content:",";"],e=>e.leftAlign?"normal":"space-between"),o=n.default.div(["display:flex;justify-content:flex-start;align-items:baseline;max-width:100%;"]),c=n.default.h2(["",";line-height:","px;color:",";overflow-wrap:break-word;min-width:0;"],a.c.h400(),3*i.e,a.a.heading),l=n.default.div(["display:flex;align-items:center;",";"],e=>e.leftAlign?`margin-left: ${i.e}px`:""),u=n.default.div(["",";margin-left:","px;margin-top:0;flex-shrink:0;"],a.c.h100(),i.e)},"./src/packages/issue/issue-view/src/common/component/timestamp/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return O}));var n=s("./node_modules/react-intl/lib/index.es.js"),a=s("./node_modules/react-redux/es/index.js"),i=s("./node_modules/lodash/flow.js"),r=s.n(i),o=s("./src/packages/platform/observability/analytics-web-react/src/utils/component-with-analytics.js"),c=s("./src/packages/platform/observability/analytics-web-react/src/components/with-fire-ui-analytics.js"),l=s("./src/packages/issue/issue-view/src/common/actions/timestamp-display-setting-actions.js"),u=s("./src/packages/issue/issue-view/src/common/state/selectors/timestamp-display-setting-selector.js"),d=s("./node_modules/react/index.js"),p=s.n(d),m=s("./node_modules/lodash/noop.js"),b=s.n(m),f=s("./node_modules/@atlaskit/tooltip/dist/es2019/Tooltip.js");const g=e=>(e=>(Date.now()-new Date(e))/864e5)(e)<8?"RELATIVE":"ABSOLUTE";const h=s("./node_modules/styled-components/dist/styled-components.browser.esm.js").default.span(["cursor:",";",";",";"],({canSwitchDisplaySetting:e})=>e?"pointer":"default",({extraStyles:e})=>e.always,({canSwitchDisplaySetting:e,extraStyles:{whenDisplaySettingSwitchable:t}})=>e?t:"");h.displayName="TimestampWrapper";class y extends d.Component{constructor(...e){super(...e),this.onAbsoluteClick=e=>{this.props.onSwitchDisplaySetting("RELATIVE"),this.props.onAbsoluteTimestampClick(e)},this.onRelativeClick=e=>{this.props.onSwitchDisplaySetting("ABSOLUTE"),this.props.onRelativeTimestampClick(e)},this.formatAbsoluteTimestamp=()=>{const{intl:e,value:t,timeZone:s}=this.props;return e.formatDate(t,{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",timeZone:s})},this.renderAbsolute=e=>p.a.createElement(h,{canSwitchDisplaySetting:e,onClick:e?this.onAbsoluteClick:b.a,extraStyles:this.props.extraStyles},this.formatAbsoluteTimestamp()),this.renderRelative=()=>p.a.createElement(h,{canSwitchDisplaySetting:!0,onClick:this.onRelativeClick,extraStyles:this.props.extraStyles},p.a.createElement(f.a,{content:this.formatAbsoluteTimestamp(),position:this.props.tooltipPosition,tag:"span"},p.a.createElement(n.FormattedRelative,{value:this.props.value})))}render(){const{value:e,displaySetting:t}=this.props,s="RELATIVE"===g(e);return s&&"RELATIVE"===t?this.renderRelative():this.renderAbsolute(s)}}y.displayName="TimestampView",y.defaultProps={extraStyles:{},tooltipPosition:"top"};const O=r()(n.injectIntl,Object(o.a)("button",{onRelativeTimestampClick:"clicked",onAbsoluteTimestampClick:"clicked"}),Object(c.a)({onRelativeTimestampClick:"relativeTime",onAbsoluteTimestampClick:"absoluteTime"}))(y);t.b=Object(a.b)(e=>({displaySetting:Object(u.a)(e)}),{onSwitchDisplaySetting:l.a})(O)},"./src/packages/issue/issue-view/src/common/constants/flags.js":function(e,t,s){"use strict";s.d(t,"j",(function(){return n})),s.d(t,"k",(function(){return a})),s.d(t,"l",(function(){return i})),s.d(t,"m",(function(){return r})),s.d(t,"u",(function(){return o})),s.d(t,"e",(function(){return c})),s.d(t,"q",(function(){return l})),s.d(t,"E",(function(){return u})),s.d(t,"f",(function(){return d})),s.d(t,"Q",(function(){return p})),s.d(t,"z",(function(){return m})),s.d(t,"N",(function(){return b})),s.d(t,"M",(function(){return f})),s.d(t,"G",(function(){return g})),s.d(t,"b",(function(){return h})),s.d(t,"O",(function(){return y})),s.d(t,"A",(function(){return O})),s.d(t,"B",(function(){return j})),s.d(t,"D",(function(){return E})),s.d(t,"d",(function(){return v})),s.d(t,"n",(function(){return k})),s.d(t,"C",(function(){return w})),s.d(t,"h",(function(){return S})),s.d(t,"g",(function(){return I})),s.d(t,"p",(function(){return C})),s.d(t,"c",(function(){return T})),s.d(t,"P",(function(){return P})),s.d(t,"x",(function(){return _})),s.d(t,"w",(function(){return x})),s.d(t,"t",(function(){return D})),s.d(t,"s",(function(){return A})),s.d(t,"H",(function(){return M})),s.d(t,"I",(function(){return L})),s.d(t,"J",(function(){return R})),s.d(t,"o",(function(){return N})),s.d(t,"r",(function(){return U})),s.d(t,"i",(function(){return F})),s.d(t,"K",(function(){return V})),s.d(t,"L",(function(){return K})),s.d(t,"a",(function(){return B})),s.d(t,"F",(function(){return W})),s.d(t,"v",(function(){return H})),s.d(t,"y",(function(){return G}));const n="COMMENT_ADD_ERROR_GENERIC",a="COMMENT_ADD_ERROR_INVALID",i="COMMENT_CONTENT_EXCEEDED_ERROR",r="COMMENT_DELETE_ERROR",o="EDITOR_ERROR",c="ATTACHMENT_ADD_ERROR",l="DELETE_LINKED_ISSUE_ERROR",u="REMOTE_LINK_VALIDATION_ERROR",d="ATTACHMENT_DELETE_ERROR",p="WATCH_TOGGLE_UPDATE_ERROR",m="FETCH_WATCHERS_ERROR",b="STOP_WATCHING_SUCCESS",f="START_WATCHING_SUCCESS",g="REMOVE_WATCHER_ERROR",h="ADD_WATCHER_ERROR",y="SUBTASKS_REORDER_ERROR_GENERIC",O="FLAGGED_ADD_UPDATE_ERROR",j="FLAGGED_REMOVE_UPDATE_ERROR",E="LOG_WORK_CONFIRM_ERROR",v="ASSIGN_TO_ME_SUCCESS",k="CREATE_CHILD_ISSUE_ERROR",w="LINK_CHILD_ISSUE_ERROR",S="CHANGE_ISSUE_TYPE_SUCCESS",I="CHANGE_ISSUE_TYPE_ERROR",C="DELETE_ISSUE_ERROR",T="ADD_WORKLOG_FAILURE",P="UPDATE_TIME_REMAINING_FAILURE",_="EDIT_WORKLOG_SUCCESS",x="EDIT_WORKLOG_FAILURE",D="DELETE_WORKLOG_SUCCESS",A="DELETE_WORKLOG_FAILURE",M="RICH_CONTENT_FIELD_CONFIRM_ERROR",L="RICH_CONTENT_FIELD_MAXIMUM_LENGTH_EXCEEDED_ERROR",R="RICH_CONTENT_FIELD_REQUIRED_ERROR",N="DELETE_CONFLUENCE_PAGE_LINK_FAILED",U="DELETE_WEB_LINK_FAILED",F="CLICKTHROUGH_BANNER_DISMISS_SUCCESS",V="SAVE_APPROVAL_ANSWER_ERROR",K="SAVE_APPROVAL_ANSWER_SUCCESS",B="ADD_APPROVER_ERROR",W="REMOVE_APPROVER_ERROR",H="EDIT_EPIC_COLOUR_ERROR",G="FETCH_JIRA_APP_LINKS_ERROR"},"./src/packages/issue/issue-view/src/common/ecosystem/ecosystem-analytics.js":function(e,t,s){"use strict";s.d(t,"e",(function(){return o})),s.d(t,"d",(function(){return c})),s.d(t,"c",(function(){return l})),s.d(t,"b",(function(){return d})),s.d(t,"g",(function(){return p})),s.d(t,"a",(function(){return m})),s.d(t,"f",(function(){return j}));var n=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js");function a(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function i(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?a(Object(s),!0).forEach((function(t){r(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function r(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const o=e=>{const t=e.reduce((e,t)=>{e[t.appKey]||(e[t.appKey]={total:0,status:{}});const s=e[t.appKey];if(s.total+=1,t.status&&t.status.type){const e=s.status[t.status.type];s.status[t.status.type]=e>0?e+1:1}else{const e=s.status["N/A"];s.status["N/A"]=e>0?e+1:1}return e},{}),s=JSON.stringify(t);return{total:e.length,data:Object(n.j)(s)(s)}},c=(e,t,s)=>{const a=s?s.type:"",i=Object(n.j)(e,t,a);return{appKey:i(e),moduleKey:i(t),statusType:i(a)}},l=(e,t)=>{let s=0;const a=e.reduce((e,n)=>{e[n.appKey]||(e[n.appKey]={total:0,totalOnPage:0});const a=e[n.appKey];a.total+=1;const i=`${n.appKey}_${n.moduleKey}`;return t.includes(i)&&(a.totalOnPage+=1,s+=1),e},{}),i=JSON.stringify(a);return{totalOnPage:s,total:e.length,data:Object(n.j)(i)(i)}},u=(e,t)=>{const s=Object(n.j)(e,t);return{appKey:s(e),moduleKey:s(t)}},d=(e,t)=>u(e,t),p=(e,t,s)=>i(i({},u(e,t)),{},{event:Object(n.j)(s)(s)}),m=(e,t)=>u(e,t),b=e=>e.map(e=>({appKey:e.appKey,moduleKey:e.moduleKey,name:e.name})),f=e=>e.map(e=>({appKey:e.appKey,moduleKey:e.moduleKey,name:e.name,type:e.type})),g=e=>e.map(e=>({appKey:e.appKey,moduleKey:e.moduleKey,name:e.name,type:e.type,showByDefault:e.showByDefault})),h=e=>e.map(e=>({name:e.name})),y=e=>"WEB_PANEL"===e.type,O=e=>"ISSUE_MODULE"===e.type,j=(e=[],t=[],s=[],a=[],i=0)=>{const r={glances:f(e),contentPanels:g(t),activityPanels:b(s),operations:h(a)},o=Object.keys(r).reduce((e,t)=>r[t]&&r[t].length?e+r[t].length:e,0),c=JSON.stringify(r);return{totalGlances:e.filter(O).length,totalLegacyGlances:e.filter(y).length,totalContentPanels:t.filter(O).length,totalLegacyContentPanels:t.filter(y).length,totalActivityPanels:s.length,totalOperations:a.length,totalCustomIssueFields:i,totalModules:o,data:Object(n.j)(c)(c)}}},"./src/packages/issue/issue-view/src/common/ecosystem/module-key-helper.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return a})),s.d(t,"a",(function(){return i}));var n=s("./src/packages/forge/forge-ui-analytics/src/services/issue-panel/index.js");const a=(e,t=0)=>{const s=e.lastIndexOf("-"),n=e.substr(s+1);return/^\d+$/.test(n)&&n.length>=t?e.substr(0,s):e},i=e=>{const t=e.match(/^(.*)-(\w+)-(\d+)$/);if(null==t)return Object(n.p)(`Panel key doesn't match regexp: ${e}`,Error(`Panel key doesn't match regexp: ${e}`)),null;const[,s,a,i]=t;return{extensionId:s,id:a,added:Number(i)}}},"./src/packages/issue/issue-view/src/common/legacy/aui-dialog-event.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return c}));var n=s("./node_modules/lodash/noop.js"),a=s.n(n),i=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/deferred-globals.js");const r=()=>window.AJS&&window.AJS.dialog2,o=(e,t)=>{Object(i.b)().then(()=>((e,t)=>{r()&&window.AJS.dialog2.on(e,t)})(e,t)).catch(a.a)},c=(e,t)=>{Object(i.b)().then(()=>((e,t)=>{r()&&window.AJS.dialog2.off(e,t)})(e,t)).catch(a.a)}},"./src/packages/issue/issue-view/src/common/media/components/create-auth-provider.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"b",(function(){return a}));const n=(e,t,s)=>async n=>({clientId:t,token:await e(n?n.collectionName:void 0),baseUrl:s}),a=e=>()=>Promise.resolve(e)},"./src/packages/issue/issue-view/src/common/media/components/with-media-provider/with-media-provider.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./src/packages/issue/issue-view/src/common/media/components/with-token-provider/with-token-provider.js"),r=s("./src/packages/issue/issue-fetch-services/src/services/issue-media-read-permissions/index.js"),o=s("./src/packages/issue/issue-view/src/common/media/view-context/view-context-transformer.js"),c=s("./src/packages/issue/issue-view/src/common/media/components/create-auth-provider.js");function l(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function u(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?l(Object(s),!0).forEach((function(t){d(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):l(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function d(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function m(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const b=e=>{var t,s;return s=t=class extends n.Component{constructor(...e){super(...e),this.setDropzoneRef=e=>{this.dropzoneRef=e},this.resolve=void 0,this.mediaProviderPromise=new Promise(e=>{this.resolve=e}),this.resolved=!1,this.dropzoneRef=null}componentDidMount(){this.resolveMediaProviderPromise()}componentDidUpdate(){this.resolveMediaProviderPromise()}resolveMediaProviderPromise(){const{mediaContext:e,tokenProvider:t,baseUrl:s}=this.props;if(!this.resolved&&this.dropzoneRef&&e.viewContext){this.resolved=!0;const n=((e,t,s)=>{const{viewContext:n,uploadContext:a,userAuth:i}=e;if(!n)throw new TypeError("mediaContext.viewContext was null. Check that the server response has been processed.");let l={viewMediaClientConfig:{authProvider:Object(c.a)(t,n.clientId,n.serviceHost)}};return a&&(l=u(u({},l),{},{uploadParams:{collection:a.collection},uploadMediaClientConfig:{authProvider:Object(c.a)(t,a.clientId,a.serviceHost),userAuthProvider:i?Object(c.b)(u(u({},i),{},{baseUrl:a.serviceHost})):void 0,getAuthFromContext:async e=>{const t=await Object(r.b)(s,e,65536).map(o.a).toPromise();return{baseUrl:t.serviceHost,clientId:t.clientId,token:t.token||""}}}})),l})(e,t,s);this.resolve(n)}}render(){const t=this.props,{mediaContext:s,tokenProvider:n}=t,i=m(t,["mediaContext","tokenProvider"]);return(a.a.createElement("div",{ref:this.setDropzoneRef},a.a.createElement(e,p({mediaProvider:this.mediaProviderPromise},i))))}},t.displayName=`WithMediaProvider(${String(null!=e.displayName?e.displayName:e.name)})`,s};t.a=e=>Object(i.a)(b(e))},"./src/packages/issue/issue-view/src/common/media/components/with-token-provider/with-token-provider.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./src/packages/common-legacy-do-not-add-anything-new/src/promise-provider/index.js");function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}t.a=e=>{var t,s;return s=t=class extends n.Component{constructor(e){super(e),this.viewTokenPromiseProvider=void 0,this.updateViewTokenPromise=e=>{const{viewContext:t}=e;t&&t.areTokenPermissionsUpToDate&&t.token?this.viewTokenPromiseProvider.resolve(t.token):this.viewTokenPromiseProvider.resetIfSettled()},this.tokenProvider=async e=>{if(!e)return this.viewTokenPromiseProvider.get();const{uploadContext:t}=this.props.mediaContext;if(t)return t.token;throw new Error("Upload token not available")},this.viewTokenPromiseProvider=new i.a,this.updateViewTokenPromise(e.mediaContext)}UNSAFE_componentWillReceiveProps(e){this.updateViewTokenPromise(e.mediaContext)}render(){return a.a.createElement(e,r({tokenProvider:this.tokenProvider},this.props))}},t.displayName=`WithTokenProvider(${String(null!=e.displayName?e.displayName:e.name)})`,s}},"./src/packages/issue/issue-view/src/common/media/upload-context/upload-context-actions.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return n})),s.d(t,"d",(function(){return a})),s.d(t,"b",(function(){return i})),s.d(t,"a",(function(){return r}));const n=()=>({type:"FETCH_UPLOAD_CONTEXT_REQUEST"}),a=e=>({type:"FETCH_UPLOAD_CONTEXT_SUCCESS",payload:e}),i=e=>({type:"FETCH_UPLOAD_CONTEXT_FAILURE",payload:{error:e}}),r=()=>({type:"CHECK_UPLOAD_CONTEXT"})},"./src/packages/issue/issue-view/src/common/media/user-auth/user-auth-actions.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return n})),s.d(t,"d",(function(){return a})),s.d(t,"b",(function(){return i})),s.d(t,"a",(function(){return r}));const n=()=>({type:"FETCH_USER_AUTH_REQUEST"}),a=e=>({type:"FETCH_USER_AUTH_SUCCESS",payload:e}),i=e=>({type:"FETCH_USER_AUTH_FAILURE",payload:{statusCode:e}}),r=()=>({type:"CHECK_USER_AUTH"})},"./src/packages/issue/issue-view/src/common/media/view-context/view-context-transformer.js":function(e,t,s){"use strict";const n=e=>e.length>0?e[0].token:null;t.a=e=>({clientId:e.clientId,serviceHost:e.endpointUrl,token:n(e.tokensWithFiles),areTokenPermissionsUpToDate:!0,tokenLifespanInMs:1e3*e.tokenLifespanInSeconds,collection:e.collection||null,tokenIssueTimestamp:Date.now()-1e4})},"./src/packages/issue/issue-view/src/common/messages/drafts.js":function(e,t,s){"use strict";var n=s("./node_modules/react-intl/lib/index.es.js");t.a=Object(n.defineMessages)({draftIndicator:{id:"issue.draft-indicator-for-multiline-field",defaultMessage:"Unsaved changes"}})},"./src/packages/issue/issue-view/src/common/messages/flags.js":function(e,t,s){"use strict";var n=s("./node_modules/react-intl/lib/index.es.js");t.a=Object(n.defineMessages)({commentWorklogAttachmentFetchFailedTitle:{id:"issue.comment-worklog-attachment-fetch-failed-title",defaultMessage:"We couldn't find the {field}"},commentWorklogAttachmentFetchFailedDescription:{id:"issue.comment-worklog-attachment-fetch-failed-description",defaultMessage:"Reload the issue, then give it another try."}})},"./src/packages/issue/issue-view/src/common/messages/time.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return r}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-intl/lib/index.es.js");t.a=Object(i.defineMessages)({logWork:{id:"issue.common.messages.time.log-work",defaultMessage:"Log work"},timeInputPlaceholder:{id:"issue.common.messages.time.time-input-placeholder",defaultMessage:"e.g. 2w 4d 6h 45m"},exampleFormat:{id:"issue.common.messages.time.time-input-format-tooltip.example",defaultMessage:"Use the format: {formatExample}"},weeks:{id:"issue.common.messages.time.time-input-format-tooltip.weeks",defaultMessage:"{w} = weeks"},days:{id:"issue.common.messages.time.time-input-format-tooltip.days",defaultMessage:"{d} = days"},hours:{id:"issue.common.messages.time.time-input-format-tooltip.hours",defaultMessage:"{h} = hours"},minutes:{id:"issue.common.messages.time.time-input-format-tooltip.minutes",defaultMessage:"{m} = minutes"}});const r=a.a.createElement(i.FormattedMessage,{id:"issue.common.messages.time.time-invalid-message",defaultMessage:"You need to log time in the format {timeString}.",values:{timeString:a.a.createElement("b",null,"2w 4d 6h 45m")}})},"./src/packages/issue/issue-view/src/common/metrics/context/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return l})),s.d(t,"c",(function(){return u}));var n=s("./node_modules/react/index.js"),a=s("./src/packages/issue/issue-view/src/common/metrics/index.js");const i=e=>t=>{e&&e.onReadyForUser&&e.onReadyForUser();const{isInitialRender:s,lastTransitionStartTime:n}=t;s&&Object(a.i)(!0),Object(a.e)({isInitialRender:s,lastTransitionStartTime:n})},r=e=>t=>{e&&e.onInteractive&&e.onInteractive(),Object(a.d)(t)},o=e=>({onPreviewRendered:i(e),onInteractive:r(e)});let c=null;const l=e=>(c=Object(n.createContext)(o(e)),c),u=()=>c||Object(n.createContext)(o())},"./src/packages/issue/issue-view/src/common/metrics/index.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return ce})),s.d(t,"a",(function(){return le})),s.d(t,"g",(function(){return ue})),s.d(t,"f",(function(){return de})),s.d(t,"c",(function(){return pe})),s.d(t,"d",(function(){return fe})),s.d(t,"h",(function(){return ge})),s.d(t,"e",(function(){return he})),s.d(t,"j",(function(){return ye})),s.d(t,"i",(function(){return Oe}));var n=s("./node_modules/uuid/index.js"),a=s.n(n),i=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),r=s("./src/packages/platform/observability/browser-metrics/src/index.js"),o=s("./src/packages/platform/utils/constants/src/analytics-marks.js"),c=s("./src/packages/common-legacy-do-not-add-anything-new/src/performance/index.js"),l=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),u=s("./src/packages/platform/observability/spa-performance-breakdown/src/utils/performance-marks-tools/index.js"),d=s("./src/packages/platform/observability/spa-performance-breakdown/src/utils/mark-product-start/index.js"),p=s("./src/packages/issue/issue-view/src/browser-metrics/fetch-issue-network-times.js"),m=s("./src/packages/issue/issue-view/src/feature-flags.js"),b=s("./src/packages/issue/issue-view/src/perf.config.js"),f=s("./node_modules/reselect/lib/index.js"),g=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");const h=Object(f.createSelector)(e=>e.timing,g.s,(e,t)=>t?void 0:e.server),y=e=>()=>({isBM3Triggered:e?Object(m.isFullPageBentoBM3Enabled)():Object(m.isEmbeddedPageBentoBM3Enabled)()});var O=s("./node_modules/lodash/get.js"),j=s.n(O),E=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/safe-string.js"),v=s("./src/packages/platform/utils/constants/src/analytics-sources.js");function k(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function w(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?k(Object(s),!0).forEach((function(t){S(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):k(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function S(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const I=()=>{if(c.default.clearMarks){const e=["ISSUE_FRAGMENT_READY_MARK","ISSUE_START_RENDERING_MARK","ssr.issue.rendered","ISSUE_START_FETCHING_DATA","ISSUE_CACHED_CONTENT_LOADED","ISSUE_FETCHED_MARK","ISSUE_PREVIEW_RENDERED","ISSUE_START_GIRA_FETCH","ISSUE_FINISH_GIRA_FETCH"];Object(m.isFullPageBentoBM3Enabled)()&&Object(m.isEmbeddedPageBentoBM3Enabled)()||e.push(o.SPA_SSR_RENDERED_MARK),e.forEach(e=>c.default.clearMarks(e))}},C=(e,t=!1)=>s=>{let n,a,i;e.getIsFullIssue()&&(n=Object(c.timeToMark)("ISSUE_FRAGMENT_READY_MARK",s),a=Object(c.timeToMark)("ISSUE_START_RENDERING_MARK",s),i=Object(c.timeToMark)(o.SPA_SSR_RENDERED_MARK,s));const r=Object(c.timeToMark)("ISSUE_START_FETCHING_DATA",s),l=Object(c.timeToMark)("ISSUE_CACHED_CONTENT_LOADED",s),u=Object(c.timeToMark)("ISSUE_FETCHED_MARK",s),d=Object(c.timeToMark)("ISSUE_PREVIEW_RENDERED",s),p=Object(c.timeBetweenMarks)("ISSUE_START_GIRA_FETCH","ISSUE_FINISH_GIRA_FETCH"),m=e.getIsFullIssue();let b=null,f=null;m&&!0===s.isInitial&&"issue.details.ready.fields.interactive"===s.key&&(b=Object(c.timeToMark)("jira.issue-view.issue-app.eval-start",s),f=Object(c.timeToMark)("jira.issue-view.issue-app.eval-end",s));const g=null!=s.end?s.end-s.start:0,h=e.lazyMetricsProps()();return t&&I(),w(w(w(w(w({issueId:h.issueId,isFullIssue:m,fragmentReady:n,issueStartRender:a,issueFetched:u,issueStartDataFetch:r,cachedIssueDataLoaded:l,issueSSRRendered:i,issuePreviewRendered:d,issueGiraFetchDuration:p,issueAppEvalStart:b,issueAppEvalEnd:f,isBentoSPA:e.getIsSPA(),isBentoRecentIssue:e.getIsRecentIssue(),bentoRecentIssuesCount:e.getRecentIssuesCount(),analyticsKey:h.analyticsKey,analyticsSource:e.getAnalyticsSource(),loadTimeMs:g,isSidebar:"sidebar"===j()(h.viewMode,"value"),correlationId:new E.a(e.getCorrelationId())},e.getIsFullIssue()?{}:{isLoadedWithPage:e.getIsLoadedWithPage()}),((e,t)=>{const s=e.getDataProvider();return s?e.getIsFullIssue()&&Boolean(t.isInitial)?{}:s.getMetrics():{}})(e,s)),(()=>window.SPA_STATE?j()(window,["SPA_STATE","ssr/metrics","data"],{}):window.ISSUE_VIEW_STATE?j()(window,["ISSUE_VIEW_STATE","ssr/metrics","data"],{}):{})()),(e=>({location:e.getLocation()}))(e)),((e,t)=>({isNextGenProject:j()(t.analyticsKey,"value")===v.a.SIMPLE_SOFTWARE_BOARD}))(0,h))},T=e=>t=>{const s=C(e,!0)(t);return I(),s};var P=s("./node_modules/lodash/isFunction.js"),_=s.n(P);function x(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function D(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?x(Object(s),!0).forEach((function(t){A(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):x(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function A(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const M=()=>Object.keys(m).reduce((e,t)=>_()(m[t])?D(D({},e),{},{[String(t)]:new E.a(m[t]())}):e,{}),L=()=>D({},M());var R=s("./src/packages/platform/utils/permalinks/src/index.js"),N=s("./src/packages/issue/issue-view/src/ecosystem/ecosystem-extensions-selector.js"),U=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/layout-items-selector.js"),F=s("./src/packages/issue/issue-view/src/selectors/comment-selector.js"),V=s("./src/packages/issue/issue-view/src/selectors/issue-links-selector.js"),K=s("./src/packages/issue/issue-view/src/selectors/subtasks-selector.js"),B=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js");const W=e=>()=>{const t=e.getState(),{permalinkType:s}=Object(R.b)()||{},n=Object(B.q)("children-issues")(t);return{visibleContextItem:Object(U.g)(t).length,conditionallyVisibleContextItems:Object(U.a)(t).length,visibleContentItems:Object(U.f)(t).length,ecosystemGlances:Object(N.m)(t).length,ecosystemContentPanels:Object(N.b)(t).length,ecosystemActivityPanels:Object(N.a)(t).length,ecosystemOperations:Object(N.q)(t).length,ecosystemCustomsFields:Object(U.b)(t).length,childIssues:n?n.value.length:0,linkIssueCount:Object(m.isRemoteIssueLinksEnabled)()?Object(V.b)(t):Object(V.h)(t),subtaskCount:Object(K.d)(t).length,commentsTotalCount:Object(F.J)(t),hasCommentPermalink:"Comments"===s}},H=new RegExp(".*\\/([a-z-]*)\\.[a-f0-9]*"),G=new RegExp("/vendor|/commons|/jira-spa|/async-issue-app"),$=new RegExp("rest/gira/|/rest/api/2/attachment/read|/rest/api/2/attachment/upload/|/rest/internal/2/media/user|/rest/graphql/1"),q=new RegExp("gira"),z=e=>e.filter(e=>e.name.match(G)).map(e=>{const t=(e=>{const t=e.match(H);return t?t[1]:""})(e.name);return{[`${t}-duration`]:Math.round(e.duration),[`${t}-fetchStart`]:Math.round(e.fetchStart)}}),Y=()=>{const e=c.default.getEntriesByType("resource"),t=z(e),s=(e=>{const t=e.filter(e=>e.name.match($)),s=t.filter(e=>!e.name.match(q)),n=t.filter(e=>e.name.match(q)).sort((e,t)=>t.encodedBodySize&&e.encodedBodySize?t.encodedBodySize-e.encodedBodySize:1),a=n&&0!==n.length?n[0]:null,i=s.map(e=>({[`${(e=>e.match("/rest/graphql/1")?"graphql":e.match("/rest/internal/2/media/user")?"usertoken":e.match("/rest/api/2/attachment/upload/")?"uploadtoken":e.match("/rest/api/2/attachment/read")?"readtoken":"unknown")(e.name)}-duration`]:Math.round(e.duration)}));return a&&a.encodedBodySize&&i.push({"gira-duration":Math.round(a.duration)}),i})(e);return Object.assign({},...t,...s)};class Q{constructor(e){this.immutableState=void 0,this.isLoadedWithPage=void 0,this.hasLoadedEditor=!1,this.startTime=Math.floor(performance.now()),this.previewEnd=void 0,this.fmp=void 0,this.interactiveEnd=void 0,this.trueInteractiveEnd=void 0,this.immutableState=e,this.isLoadedWithPage=e.isLoadedWithPage}lazyMetricsProps(){return this.immutableState.lazyMetricsProps}getDataProvider(){return this.immutableState.dataProvider}getIsFullIssue(){return"full-issue"===this.immutableState.analyticsSource}getIsLoadedWithPage(){return this.immutableState.isLoadedWithPage}setIsLoadedWithPage(e){this.isLoadedWithPage=e}getIsSPA(){return this.immutableState.isSPA}getIsRecentIssue(){return this.immutableState.isRecentIssue}getRecentIssuesCount(){return this.immutableState.recentIssuesCount}getAnalyticsSource(){return Object(E.c)(...v.b)(this.immutableState.analyticsSource)}getCorrelationId(){return this.immutableState.correlationId}getIssueScaleabilityReporter(){return this.immutableState.issueScaleabilityReporter}getStartTime(){return this.startTime}setPreviewEnd(e){this.previewEnd=null===e?0:Math.floor(e)}getPreviewEnd(){return this.previewEnd}setFMP(e){this.fmp=null===e?0:Math.floor(e)}getFMP(){return this.fmp}setInteractiveEnd(e){this.interactiveEnd=e}getInteractiveEnd(){return this.interactiveEnd}setTrueInteractiveEnd(e){this.trueInteractiveEnd=Math.floor(e)}getTrueInteractiveEnd(){return Math.floor(this.trueInteractiveEnd)}getHasLoadedEditor(){return this.hasLoadedEditor}getIsInitial(){return this.getIsFullIssue()&&!this.getIsSPA()}getLocation(){const{route:e}=this.immutableState,t=null==e?void 0:e.name;return new E.a(t||"")}}var J=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),Z=s("./src/packages/issue/issue-context-service/src/types.js");var X=(e=null)=>Object(l.j)("sidebar","modal","default")((e=>{switch(e){case Z.a:return"modal";case Z.b:return"sidebar";default:return null}})(e)||(()=>window.localStorage&&window.localStorage.getItem("gh.ghx-issue-fragment-view-mode")||"default")().replace(/"/g,""));const ee=Object(f.createSelector)(J.e,J.Q,J.A,(e,t,s)=>({analyticsKey:new E.a(e),viewMode:X(t),issueId:new E.a(s)}));function te(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function se(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?te(Object(s),!0).forEach((function(t){ne(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):te(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function ne(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}let ae;const ie=Object(r.b)(),re=()=>{const e=Object(c.getMark)(o.SPA_SSR_RENDERED_MARK);return null!=e?Math.floor(e.startTime):null},oe=e=>{try{Object(c.setMark)(e)}catch(t){l.i.safeError("issue.metrics","Setting performance mark failed",new i.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:t}))}},ce=()=>{oe("ISSUE_FRAGMENT_READY_MARK")},le=e=>{try{const{isLoadedWithPage:t,isSPA:s,isRecentIssue:n,recentIssuesCount:i,dataProvider:r,analyticsSource:o,store:c,route:l}=e;ae=new Q({isLoadedWithPage:t,isSPA:s,isRecentIssue:n,analyticsSource:o,recentIssuesCount:i,correlationId:a.a.v4(),lazyMetricsProps:()=>ee(c.getState()),timingDataReporter:()=>se(se({},h(c.getState())),Object(p.b)()),issueScaleabilityReporter:W(c),dataProvider:r,route:l}),(Object(m.isFullPageBentoBM3Enabled)()||Object(m.isEmbeddedPageBentoBM3Enabled)())&&b.b.mark("metrics_init")}catch(t){l.i.safeError("issue.metrics","Failed to initialise issue metrics",new i.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:t}))}},ue=()=>{oe("ISSUE_START_RENDERING_MARK"),(Object(m.isFullPageBentoBM3Enabled)()||Object(m.isEmbeddedPageBentoBM3Enabled)())&&b.b.mark("ISSUE_START_RENDERING_MARK")},de=()=>{oe("ISSUE_START_FETCHING_DATA"),(Object(m.isFullPageBentoBM3Enabled)()||Object(m.isEmbeddedPageBentoBM3Enabled)())&&b.b.mark("ISSUE_START_FETCHING_DATA")},pe=()=>{oe("ISSUE_FETCHED_MARK"),(Object(m.isFullPageBentoBM3Enabled)()||Object(m.isEmbeddedPageBentoBM3Enabled)())&&b.b.mark("ISSUE_FETCHED_MARK")},me=(e,t,s)=>{const n=re()?0:e;let a=ae.getPreviewEnd();const i=re();null!=i&&(a=i);const r=re()||ae.getPreviewEnd()-n,o=[L,C(ae),ae.getIssueScaleabilityReporter()],c={key:"issue.details.ready.new-browser-metrics",isInitial:ae.getIsInitial(),beganAt:n,completedAt:a,reporters:o,collectors:[]};try{((e,t)=>{if(t<0)throw new Error("negative rfu");ie.start(e),ie.stop(e)})(c,r)}catch(u){let e,o;if(t){const{currentPage:s,visitedPages:n}=t,a=e=>Object.keys(e.apps||{}),i=e=>e.join(", ")||"?";e=JSON.stringify(n.map(e=>i(a(e)))),o=i(a(s))}l.i.safeError("spa-bento.negative.rfu.perf-ops","Got a negative bento rfu",{key:"issue.details.ready.new-browser-metrics",isInitial:ae.getIsInitial(),startTimeSource:s,start:n,end:a,rfu:r,ssrMark:i||0,currPageApps:o,prevPageApps:e,ssrMarkStr:String(i)})}},be=e=>{const t=e,s=ae.getInteractiveEnd(),n=ae.getFMP(),a=[T(ae),Y,ae.getIssueScaleabilityReporter(),L,y(ae.getIsFullIssue())],i={key:"issue.details.ready.fields.interactive",isInitial:ae.getIsInitial(),beganAt:t,completedAt:s,issueFMP:n,reporters:a,collectors:[]};ie.start(i),ie.stop(i)},fe=({lastTransitionTime:e})=>{const t=ae.getIsFullIssue();if(ae.setInteractiveEnd(performance.now()),ae&&Object(m.isFullPageBentoBM3Enabled)()&&t||Object(m.isEmbeddedPageBentoBM3Enabled)()&&ae){const s=e||ae.getStartTime();ae.getIsFullIssue()&&Object(u.d)("product",d.b,!0),b.b.stop({stopTime:ae.getInteractiveEnd(),customData:se(se(se(se({},ae.getIssueScaleabilityReporter()()),M()),t?{}:{embeddedIssueFMP:Math.floor(ae.getFMP()),embeddedIssueTTI:Math.floor(ae.getInteractiveEnd()-s)}),{isBentoRecentIssue:ae.getIsRecentIssue(),bentoRecentIssuesCount:ae.getRecentIssuesCount(),correlationId:ae.getCorrelationId()})})}},ge=(e=!1)=>{Object(m.isEmbeddedPageBentoBM3Enabled)()&&!e&&b.a.start({startTime:performance.now()}),(Object(m.isFullPageBentoBM3Enabled)()||Object(m.isEmbeddedPageBentoBM3Enabled)())&&b.b.start()},he=({isInitialRender:e,lastTransitionStartTime:t})=>{const s=re(),n=performance.now(),a=ae.getStartTime();let i=0;i=ae.getIsFullIssue()?e?s:n-(t||a):n-a,(Object(m.isFullPageBentoBM3Enabled)()||Object(m.isEmbeddedPageBentoBM3Enabled)())&&b.b.mark("ISSUE_PREVIEW_RENDERED"),ae.setFMP(i),ae.setPreviewEnd(n),oe("ISSUE_PREVIEW_RENDERED")},ye=(e,t=null)=>{ae&&ae.getIsFullIssue()&&!Object(m.isFullPageBentoBM2Enabled)()||(null!=e?(me(e,t,"transtionStartTime"),be(e)):ae&&(me(ae.getStartTime(),t,"state.getStartTime"),be(ae.getStartTime())))},Oe=e=>{ae&&ae.setIsLoadedWithPage(e)}},"./src/packages/issue/issue-view/src/common/model/comment-type.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n={type:"public",value:""}},"./src/packages/issue/issue-view/src/common/model/linked-issue-type.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"a",(function(){return a}));const n=e=>{switch(e.toUpperCase()){case"INWARD":return"INWARD";case"OUTWARD":return"OUTWARD";case"BOTH":default:return"BOTH"}},a={INWARD:"INWARD",OUTWARD:"OUTWARD",BOTH:"BOTH"}},"./src/packages/issue/issue-view/src/common/service/issue/changeboarding-local-storage.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return i})),s.d(t,"d",(function(){return r})),s.d(t,"a",(function(){return o})),s.d(t,"c",(function(){return c}));var n=s("./src/packages/common-legacy-do-not-add-anything-new/src/storage/storage-provider.js");const a=Object(n.b)("issue-changeboarding"),i=()=>a.get("banner-seen-times")||0,r=e=>a.set("banner-seen-times",e),o=()=>a.get("banner-first-seen-timestamp"),c=e=>a.set("banner-first-seen-timestamp",e)},"./src/packages/issue/issue-view/src/common/service/issue/comment-transformer.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return u})),s.d(t,"f",(function(){return d})),s.d(t,"e",(function(){return p})),s.d(t,"d",(function(){return m})),s.d(t,"a",(function(){return b})),s.d(t,"b",(function(){return f}));var n=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),a=s("./src/packages/common-legacy-do-not-add-anything-new/src/date/transform-to-iso-string.js"),i=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),r=s("./src/packages/rich-content/src/common/adf-parsing-utils.js"),o=s("./src/packages/issue/issue-view/src/common/model/comment-type.js"),c=s("./src/packages/issue/issue-view/src/common/service/issue/gira/util.js"),l=s("./src/packages/issue/issue-view/src/common/service/issue/user-transformer.js");const u=e=>({id:e.id,author:e.author?Object(l.c)(e.author):null,updateAuthor:e.updateAuthor?Object(l.c)(e.updateAuthor):null,bodyAdf:e.body,bodyHtml:void 0,visibility:e.visibility,createdDate:Object(a.a)(e.created),updatedDate:e.updated?Object(a.a)(e.updated):null,edited:!!e.updated&&e.updated!==e.created,isInternal:!e.jsdPublic}),d=({id:e,author:t,updateAuthor:s,visibility:n,created:i,updated:o,bodyAdf:c,renderedBody:u,jsdPublic:d})=>({id:e,author:t?Object(l.b)(t):null,updateAuthor:s?Object(l.b)(s):null,visibility:n,createdDate:Object(a.a)(i),updatedDate:o?Object(a.a)(o):null,edited:!!o&&o!==i,bodyAdf:Object(r.a)(c),bodyHtml:u,isInternal:!d}),p=e=>({comments:e.data.issueComments.nodes.map(e=>d(e)),totalComments:e.data.issueComments.totalCount}),m=({type:e,value:t})=>{switch(e?e.toLowerCase():null){case"group":return{value:t,type:"group"};case"role":return{value:t,type:"role"};default:{const s=`transformCommentVisibility: unknown comment visibility type received '${e}'`;return i.i.safeError("issue.transform.comment",s,new n.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:new Error(s)})),{value:t,type:"role"}}}},b=e=>{const t=e.author?e.author.id:null,s=e.updateAuthor?e.updateAuthor.id:null;return{id:e.id,authorId:t,updateAuthorId:s,bodyAdf:e.bodyAdf,bodyHtml:e.bodyHtml,createdDate:e.createdDate,updatedDate:e.updatedDate,edited:e.edited,visibility:e.visibility?m(e.visibility):o.a,isInternal:e.isInternal}},f=(e,t,s,n)=>{const{comments:a}=e,i=a.filter(e=>e.author).map(e=>e.author),r=Math.max("FETCH_NEWER_COMMENTS_REQUEST"===n?s-a.length:s,0);return{users:Object(c.b)(i,"id"),comments:Object(c.b)(a.map(b),"id"),loadedComments:t+a.length,commentsStartIndex:r,totalComments:e.totalComments}}},"./src/packages/issue/issue-view/src/common/service/issue/ecosystem-extensions-transformer.js":function(e,t,s){"use strict";function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function a(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){i(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}s.d(t,"a",(function(){return r})),s.d(t,"b",(function(){return f}));const r=(e,t)=>t.includes("http")?t:e+t,o=(e,t)=>{if(t&&"icon"===t.type){const s=a({},t);return s.value.label=r(e,t.value.label),s}return t},c=(e,t)=>{const s=Object.keys(t)[0];return a(a({},e),{},{[s]:a(a({},t[s]),e[s])})},l=e=>"string"==typeof e?JSON.parse(e):e,u=(e=[])=>e.map(e=>({[e.iframe.addonKey]:{[e.iframe.moduleKey]:{name:e.name,appKey:e.iframe.addonKey,moduleKey:e.iframe.moduleKey,options:l(e.iframe.options),icon:e.icon&&{url:e.icon.url},label:{type:"text",value:e.content||e.name},status:o(l(e.iframe.options).origin,e.status),type:e.type}}})).reduce(c,{}),d=(e=[])=>e.map(e=>({[e.iframe.addonKey]:{[e.iframe.moduleKey]:{name:e.name,appKey:e.iframe.addonKey,moduleKey:e.iframe.moduleKey,options:l(e.iframe.options),icon:e.icon&&{url:e.icon.url},tooltip:e.tooltip,type:e.type,showByDefault:!!e.showByDefault}}})).reduce(c,{}),p=(e=[])=>e.map(({iframe:e,shouldReloadOnRefresh:t})=>({appKey:e.addonKey,moduleKey:e.moduleKey,options:l(e.options),shouldReloadOnRefresh:t})),m=(e=[])=>e.map(e=>({[e.iframe.addonKey]:{[e.iframe.moduleKey]:{name:e.name,appKey:e.iframe.addonKey,moduleKey:e.iframe.moduleKey,options:l(e.iframe.options)}}})).reduce(c,{}),b=(e=[])=>e.map(e=>({name:e.name,url:e.url,tooltip:e.tooltip,styleClass:e.styleClass})),f=e=>({glances:u(e.glances),contentPanels:d(e.contentPanels),backgroundScripts:p(e.backgroundScripts),operations:b(e.operations),activityPanels:m(e.activityPanels),ecosystemOnDate:e.ecoSystemOnDate,canInstallAddons:e.canInstallAddons||!1})},"./src/packages/issue/issue-view/src/common/service/issue/gira/comments/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return u})),s.d(t,"b",(function(){return d}));var n=s("./src/packages/issue/issue-view/src/common/service/issue/comment-transformer.js"),a=s("./src/packages/platform/utils/permalinks/src/index.js"),i=s("./src/packages/platform/utils/permalinks/src/constants.js");const r=(e,t,s)=>`\n    comments (first: ${t}, maxResults: ${e}, orderBy: "${s}", ${(()=>{const{hasPermalink:e,permalinkId:t}=Object(a.a)(i.a);return e?`commentId: ${t}`:""})()}) {\n        nodes {\n            id\n            author {\n                accountId\n                displayName\n                avatarUrl\n            }\n            updateAuthor {\n                accountId\n                displayName\n                avatarUrl\n            }\n            visibility {\n                type\n                value\n            }\n            created\n            updated\n            renderedBody\n            jsdPublic\n            bodyAdf\n        }\n        totalCount\n        startIndex\n    }\n`;function o(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function c(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?o(Object(s),!0).forEach((function(t){l(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function l(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const u=()=>r(5,0,"-created"),d=e=>{const{comments:t}=e;if(!t)return{users:{},comments:{},totalComments:0,commentsStartIndex:0,loadedComments:0};const{totalCount:s,startIndex:a}=t,i={data:{issueComments:t}};return c(c({},Object(n.b)(Object(n.e)(i),0,a)),{},{totalComments:s,commentsStartIndex:a})}},"./src/packages/issue/issue-view/src/common/service/issue/gira/index.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return ce})),s.d(t,"a",(function(){return ue})),s.d(t,"b",(function(){return de}));var n=s("./node_modules/rxjs/Rx.js"),a=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),i=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),r=s("./src/packages/platform/utils/fetch/src/utils.js"),o=s("./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/index.js"),c=s("./src/packages/issue/issue-fetch-services/src/services/issue-gira-data/index.js"),l=s("./src/packages/issue/issue-fetch-services/src/common/utils/client.js"),u=s("./src/packages/issue/issue-view/src/feature-flags.js"),d=s("./src/packages/issue/issue-view/src/utils/issue-view-fetch-error.js"),p=s("./src/packages/issue/issue-view/src/utils/prefetched-resources/utils/fallback-on-error.js");var m=s("./src/packages/issue/issue-view/src/common/service/issue/gira/comments/index.js"),b=s("./node_modules/lodash/flatten.js"),f=s.n(b),g=s("./node_modules/lodash/isNumber.js"),h=s.n(g),y=s("./src/packages/forge/forge-ui/src/utils/connect/index.js"),O=s("./src/packages/issue/issue-view/src/common/ecosystem/module-key-helper.js"),j=s("./src/packages/issue/issue-view/src/common/service/issue/ecosystem-extensions-transformer.js"),E=s("./src/packages/issue/issue-view/src/common/service/issue/gira/util.js");const v=()=>`\n    ecosystem {\n      operations {\n        name\n        url: href\n        icon {\n          url\n        }\n        tooltip\n        styleClass\n      }\n      contentPanels {\n        name\n        iframe {\n          addonKey\n          moduleKey\n          options\n        }\n        icon {\n          url\n        }\n        tooltip\n        type\n        showByDefault\n        manuallyAddedToIssue\n      }\n      activityPanels {\n        name\n        iframe {\n          addonKey\n          moduleKey\n          options\n        }\n      }\n      backgroundScripts {\n        iframe {\n          addonKey\n          moduleKey\n          options\n        }\n        shouldReloadOnRefresh\n      }\n      ecoSystemOnDate\n      contentPanelsCustomised \n      ${(()=>Object(u.isForgeUiIntegrationEnabled)()?"forge {\n        panels {\n          id\n          instances {\n            id\n            collapsed\n            added\n          }\n        }\n      }":"")()}\n    }\n`;function k(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function w(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?k(Object(s),!0).forEach((function(t){S(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):k(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function S(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const I=e=>{if(!e.ecosystem||!e.fields)return{ecosystem:{},issueContentPanels:[],forgeIssueProperties:{collapsedPanels:[]}};const{ecosystem:t}=e,s=Object(E.a)(e.fields,"GlancesField"),n=s?s.value.map(e=>w(w({},e),{},{status:e.status?JSON.parse(e.status):null})):[],{forgeCollapsedPanels:a,forgePanelsKeys:i}=(e=>{const t=e.forge?f()((e.forge.panels||[]).map(e=>{const{id:t,instances:s}=e;return(Array.isArray(s)?s:[]).filter(({added:e})=>h()(e)).map(({added:e,id:s,collapsed:n})=>({key:Object(y.f)(t,s,e),collapsed:n||!1}))})):[];return{forgeCollapsedPanels:t.filter(({collapsed:e})=>e).map(({key:e})=>e),forgePanelsKeys:t.map(({key:e})=>e)}})(t),r=t?(t.contentPanels||[]).filter(e=>e.manuallyAddedToIssue).map(e=>`${e.iframe.addonKey}_${Object(O.b)(e.iframe.moduleKey)}`):[],o=t.contentPanelsCustomised?["issue.content.panel.customised.flag"]:[],c={contentPanels:t.contentPanels||[],operations:t.operations||[],activityPanels:t.activityPanels||[],backgroundScripts:t.backgroundScripts||[],ecoSystemOnDate:t.ecoSystemOnDate||0,contentPanelsCustomised:t.contentPanelsCustomised};return{ecosystem:Object(j.b)(w(w({},c),{},{glances:n,canInstallAddons:!1})),issueContentPanels:[...i,...r,...o],forgeIssueProperties:{collapsedPanels:a}}},C=()=>"\n      timeTracking {\n        isTimeTrackingEnabled\n        hoursPerDay\n        daysPerWeek\n        defaultUnit\n      }\n",T=({shouldRefreshComments:e}={})=>`\n    query issueViewDynamicQuery($issueKey: String!) {\n        viewIssue(issueKey: $issueKey) {\n            ${!0===e?Object(m.a)():""}  \n            ${(()=>v())()}\n            fields {\n                __typename \n                    ${(()=>"\n  ... on GlancesField {\n    fieldKey\n    value {\n      name\n      status\n      iframe {\n        addonKey\n        moduleKey\n        options\n      }\n      icon {\n        url\n      }\n      content\n      type\n    }\n  }\n")()}\n            }\n        }\n        ${(()=>`\n    jiraSettings {\n      ${C()}\n      issueLinkTypes {\n        id\n        name\n        inward\n        outward\n      }\n    }\n`)()}\n        ${(()=>"\n    licensedProducts {\n        name\n        status\n    }\n")()}\n    }\n`;function P(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function _(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?P(Object(s),!0).forEach((function(t){x(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):P(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function x(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const D={isTimeTrackingEnabled:!1,daysPerWeek:5,hoursPerDay:8,defaultUnit:"minute"},A=e=>({timeTrackingConfiguration:e.timeTracking||D});function M(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function L(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?M(Object(s),!0).forEach((function(t){R(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):M(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function R(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const N={CONTENT_VISIBLE:"visible",CONTENT_REQUEST:"request"},U={CONTEXT_PRIMARY:"primary",CONTEXT_SECONDARY:"secondary"},F={primary:[],secondary:[]},V=({itemId:e,type:t})=>({id:e,type:t}),K=e=>e.layoutItems.reduce((e,{category:t,items:s})=>{const n=U[t];return void 0!==n?L(L({},e),{},{[`${n}`]:s.map(V)}):e},F),B={visible:[],request:void 0},W=e=>e.layoutItems?e.layoutItems.reduce((e,{category:t,items:s})=>{const n=N[t];return void 0!==n?L(L({},e),{},{[`${n}`]:s.map(V)}):e},B):B;var H=s("./src/packages/platform/utils/types/src/license-state.js");function G(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function $(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?G(Object(s),!0).forEach((function(t){q(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):G(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function q(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const z=(e=[],t)=>{const s=e.find(e=>e.name===t);switch(s&&s.status){case"ACTIVE":return H.a;case"SUSPENDED":return H.c;case"EXPIRED":return H.b;default:return H.d}},Y=(e=[])=>({licensedProducts:e.reduce((e,t)=>$($({},e),{},{[t.name]:"ACTIVE"===t.status}),{}),licenseStates:{core:z(e,"jira-core"),software:z(e,"jira-software"),serviceDesk:z(e,"jira-servicedesk")}});var Q=s("./src/packages/issue/issue-view/src/common/service/issue/gira/media-context/index.js");var J=s("./src/packages/issue/permissions-service/src/context.js"),Z=s("./src/packages/issue/issue-view/src/common/service/issue/issue-transformer.js");function X(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function ee(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?X(Object(s),!0).forEach((function(t){te(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):X(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function te(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var se=s("./src/packages/rich-content/src/common/adf-parsing-utils.js");const ne=e=>{const{accountId:t,displayName:s=null,avatarUrl:n=null}=e;return{accountId:t,displayName:s,avatarUrl:n}},ae=e=>{const t=e.map(e=>(e=>{const{id:t,author:s,updateAuthor:n,created:a,updated:i,started:r,comment:o,timeSpent:c}=e,l=i!==a;return{id:t,author:s?ne(s):null,updateAuthor:l&&n?ne(n):null,updated:l?i:null,started:r,timeSpent:c,comment:Object(se.a)(o)}})(e));return{worklogs:Object(E.b)(t,"id")}};s("./src/packages/platform/utils/permalinks/src/index.js");function ie(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function re(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(s),!0).forEach((function(t){oe(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ie(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function oe(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const ce=e=>{const{activitySortOrder:t,viewIssue:s,licensedProducts:n,jiraSettings:a,permissions:i,myPreferences:r,mediaContext:o,project:c}=e;return re(re(re(re(re(re(re(re(re(re(re(re({},Object(u.isActivitySortingEnabled)()?{activitySortOrder:t}:{}),(e=>({attachments:e.attachments}))(s)),Object(m.b)(s)),(e=>{const{worklogs:t}=e;if(!t)return{worklogs:{},sortedWorklogIds:[],totalWorklogs:0,worklogsStartIndex:0};const{totalCount:s,startIndex:n,nodes:a}=t,{worklogs:i}=ae(a);return{worklogs:i,sortedWorklogIds:a.map(e=>e.id).reverse(),totalWorklogs:s,worklogsStartIndex:n}})(s)),I(s)),Y(n)),(e=>{const t=A(e),s=((e={issueLinkTypes:[]})=>{const t=[];return e.issueLinkTypes.forEach(e=>t.push(...(({id:e,inward:t,outward:s})=>{const n=[];return t&&t===s?n.push({id:e,label:t,direction:"BOTH"}):(n.push({id:e,label:t,direction:"INWARD"}),n.push({id:e,label:s,direction:"OUTWARD"})),n})(e))),{issueLinkTypes:t}})({issueLinkTypes:e.issueLinkTypes||[]}),n=(e=>({subtasksConfiguration:e.subtasks}))(e),a=(e=>({newIssueViewTransitionSettings:e.newIssueViewTransitionSettings}))(e);return{jiraSettings:_(_(_(_({},t),s),n),a)}})(a)),(e=>e&&0!==e.length?Object(Z.c)({permissions:e.reduce((e,t)=>ee(ee({},e),{},{[t.key]:t}),{})}):{permissions:J.a})(i)),(e=>e?{myPreferences:e}:Object.freeze({}))(r)),(e=>({issueTypes:e?e.issueTypes:[],newIssueViewLockedIn:Boolean(e&&e.newIssueViewLockedIn)}))(c)),{},{contextItemsCategories:K(s),contentItemsCategories:W(s),issueSections:s.issueSections},(e=>Object(u.isfetchMediaTokensFromGiraEnabled)()&&e?Object(Q.a)(e):{})(o)),Object(u.isRemoteIssueLinksEnabled)()&&Object(u.isPreviewRemoteIssueLinksEnabled)()?{remoteLinks:s.remoteLinks}:{})},le=e=>{let t=0;const s=e=>e.path?e.path.join("."):e.locations?e.locations.map(e=>`line ${e.line}, column ${e.column}`).join("&"):(t+=1,`error without path or location: ${t}`),n=e.reduce((e,t)=>re(re({},e),{},{[s(t)]:t.message}),{});return new a.a({eventNameSuffix:"issue.error.gira",type:"fetch",app:"issue",event:n})},ue=async(e,t,s)=>{const a=Object(p.a)(s,()=>n.Observable.fromPromise(Object(c.a)(e,t))).toPromise(),{data:l,errors:u}=await a;if(!l){const e=u?JSON.stringify(le(u)):"No data returned from graphql call";throw new d.a(new Error(e),o.a)}if(l&&u&&i.i.safeError("issue.fetch.gira","Failed to fetch some data from gira",le(u)),!l.viewIssue)throw new d.a(new r.a(404,"Call to gira returned empty viewIssue"),o.a);return ce(l)},de=async(e,t,s)=>{const n=await Object(l.a)(e).query({query:T(s),variables:{issueKey:t}}),{data:a,errors:r}=n;if(!a){const e=r?JSON.stringify(le(r)):"No data returned from graphql call for dynamic data";throw new Error(e)}return a&&r&&i.i.safeError("issue.fetch.gira.dynamic","Failed to fetch some data from gira for dynamic data fetch",le(r)),(e=>{const{viewIssue:t,licensedProducts:s,jiraSettings:n}=e;return re(re(re(re({},t&&t.comments?Object(m.b)(t):{}),Y(s)),I(t)),A(n))})(a)}},"./src/packages/issue/issue-view/src/common/service/issue/gira/media-context/index.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return a})),s.d(t,"c",(function(){return r})),s.d(t,"a",(function(){return o}));const n=e=>e.length>0?e[0].token:null,a=e=>({clientId:e.clientId,serviceHost:e.endpointUrl,token:n(e.tokensWithFiles),areTokenPermissionsUpToDate:!0,tokenLifespanInMs:1e3*e.tokenLifespanInSeconds,tokenIssueTimestamp:Date.now()-1e4,collection:null}),i=e=>null!=e.clientId&&null!=e.endpointUrl&&null!=e.token&&null!=e.tokenDurationInMins&&null!=e.targetCollection?{clientId:e.clientId,serviceHost:e.endpointUrl,token:e.token,tokenLifespanInMs:60*e.tokenDurationInMins*1e3,collection:e.targetCollection,tokenIssueTimestamp:Date.now()-1e4}:null!=e.error?{error:e.error}:null,r=e=>({clientId:e.id,token:e.token,tokenLifespanInMs:60*Number(e.tokenDurationInMins)*1e3,tokenIssueTimestamp:Date.now()-1e4}),o=({readToken:e,uploadToken:t,userToken:s})=>({viewContext:e?a(e):null,uploadContext:t?i(t):null,userAuth:s?r(s):null})},"./src/packages/issue/issue-view/src/common/service/issue/gira/util.js":function(e,t,s){"use strict";function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function a(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){i(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}s.d(t,"a",(function(){return r})),s.d(t,"b",(function(){return o}));const r=(e,t)=>e.find(e=>e.__typename===t),o=(e,t)=>e.reduce((e,s)=>a(a({},e),{},{[s[t]]:s}),{})},"./src/packages/issue/issue-view/src/common/service/issue/issue-fetch-server.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return I})),s.d(t,"a",(function(){return C})),s.d(t,"b",(function(){return T})),s.d(t,"d",(function(){return P}));var n=s("./node_modules/rxjs/Rx.js"),a=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/graphql-tags.js"),i=s("./src/packages/platform/utils/fetch/src/utils/as-json-stream.js"),r=s("./src/packages/platform/utils/types/src/general.js"),o=s("./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/index.js"),c=s("./src/packages/issue/issue-view/src/feature-flags.js"),l=s("./src/packages/issue/issue-view/src/utils/issue-view-fetch-error.js"),u=s("./src/packages/issue/issue-view/src/utils/prefetched-resources/utils/fallback-on-error.js"),d=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),p=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),m=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),b=s("./src/packages/platform/utils/fetch/src/utils/errors.js");const f=(e,t)=>[e.retry(2),t.retry(2)];var g=s("./src/packages/issue/issue-view/src/common/service/issue/gira/index.js"),h=s("./src/packages/issue/issue-view/src/common/service/issue/issue-links-transformer.js"),y=s("./src/packages/issue/issue-view/src/common/service/issue/issue-transformer.js"),O=s("./src/packages/issue/issue-view/src/common/service/issue/issue-urls.js"),j=s("./src/packages/issue/issue-view/src/common/service/issue/subtask-types-server.js");function E(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function v(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?E(Object(s),!0).forEach((function(t){k(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):E(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function k(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const w=(e,t,s)=>a.a`query {
        issue(issueIdOrKey: "${e}", latestVersion: true, screen: "view") {
            id
            ${(e=>e?"":"viewScreenId")(s)}
            fields {
                key
                title
                editable
                required
                autoCompleteUrl
                allowedValues
                content
                renderedContent
                schema {
                    custom
                    system
                    ${(()=>"configuration {\n        key\n        value\n    }\n    ")()}
                    items
                    type
                    renderer
                }
                configuration
            }
            expandAssigneeInSubtasks
            expandAssigneeInIssuelinks
            expandTimeTrackingInSubtasks
            ${Object(c.isSortingIssuesUnderEpicEnabled)()?"expandSystemDateTimesForChildIssues":""}
            systemFields {
                descriptionAdf {
                    value
                }
                ${(()=>"environmentAdf {\n        value\n    }")()}
            }
            customFields {
                textareaAdf {
                    key
                    value
                }
            }            
            ${(()=>"tabs {\n        id\n        name\n        items {\n            id\n            type\n        }\n    }")()}
            ${(()=>"\n    agile {\n        epic {\n          key\n        },\n    }")()}
        }
        project(projectIdOrKey: "${t}") {
            id
            name
            key
            projectTypeKey
            simplified
            avatarUrls {
                key
                value
            }
            issueTypeHierarchy {
                baseLevelId
                levels {
                    id
                    aboveLevelId
                    belowLevelId
                }
            }
        }
    }`,S=(e,t,s,n,a)=>Object(u.a)(a,()=>Object(i.a)(Object(O.e)(e),((e,t,s)=>({method:"POST",body:JSON.stringify({query:w(e,t,s)})}))(t,s,n))).catch(e=>{throw new l.a(e,Object(O.e)(Object(r.b)("{baseUrl}")))}).map(e=>((e,t)=>{if(t.errors){const s=t.errors[0],n=new b.a(s.message);throw m.i.safeError(e,"getGraphQlData: Error present in GraphQL response",new p.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:n})),n}return t.data})("issue.fetch.issue-fetch-server",e)).map(t=>Object(y.b)(t,e)),I=(e,t)=>{const s=Object(d.g)(e),a=Object(d.B)(e),i=Object(d.I)(e),r=Object(d.p)(e);return n.Observable.zip(...f(n.Observable.fromPromise(Object(g.b)(s,a,t)),S(s,a,i,r)),(e,t)=>v(v({},e),t))},C=(e,t)=>{const s=Object(d.g)(e),a=Object(d.B)(e),i=Object(d.I)(e),r=Object(d.p)(e),c=n.Observable.fromPromise(Object(g.a)(s,a,t&&t.issueGiraData)).catch(e=>{throw new l.a(e,o.a)}),u=S(s,a,i,r,t&&t.issueGraphqlData),p=Object(d.u)(e),m=Object(d.q)(e),b=!(p||m)?f(c,u):((e,t,s)=>[e.retry(2),t.retry(2),s.retry(2)])(c,u,Object(j.a)(s,i));return n.Observable.zip(...b,(e,t)=>v(v(v({},e),t),{},{issue:v(v({},t.issue),{},{contextItemsCategories:e.contextItemsCategories,contentItemsCategories:e.contentItemsCategories})}))},T=(e,t,s)=>n.Observable.from(t).bufferCount(50).flatMap(t=>((e,t,s)=>Object(i.a)(Object(O.p)(e),{method:"POST",body:JSON.stringify({jql:t,fields:s})}).map(y.a))(e,`key in (${t.join(",")})`,s)).reduce((e,t)=>[...e,...t],[]),P=(e,t)=>Object(i.a)(Object(O.h)(e,t)).map(t=>t.fields.issuelinks&&Object(h.b)(e,t.fields.issuelinks))},"./src/packages/issue/issue-view/src/common/service/issue/issue-links-transformer.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return b})),s.d(t,"a",(function(){return f}));var n=s("./node_modules/lodash/get.js"),a=s.n(n),i=s("./src/packages/platform/utils/constants/src/index.js"),r=s("./src/packages/platform/utils/types/src/general.js"),o=s("./src/packages/issue/issue-view/src/issue-field/state/transformers/initial-data-transformer.js"),c=s("./src/packages/issue/issue-view/src/common/service/issue/issue-urls.js"),l=s("./src/packages/issue/issue-view/src/common/service/issue/user-transformer.js");function u(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function d(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?u(Object(s),!0).forEach((function(t){p(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):u(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function p(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const{statusCategoryForId:m}=i.a,b=(e,t=[])=>{let s={},n={};t&&t.filter(Boolean).forEach(({id:t,inwardIssue:i,outwardIssue:o,type:u})=>{let p,b,f=null;if(i?(b="inward",f=u.inward,p=i):o&&(b="outward",f=u.outward,p=o),f&&null!=p){const i={id:Object(r.j)(t),linkedIssueKey:p.key,direction:b,typeName:f,typeId:u.id};s=d(d({},s),{},{[t]:i});const o=((e,t)=>{const{id:s,key:n,fields:i}=e;return{id:s,issueKey:n,issueLink:Object(c.g)(t,e.key),issueSummary:i.summary,statusCategory:m(a()(e.fields,"status.statusCategory.id")),statusCategoryId:a()(e.fields,"status.statusCategory.id"),statusName:i.status&&i.status.name,statusId:i.status&&i.status.id,issuePriorityUrl:a()(i,"priority.iconUrl",null),issuePriorityName:a()(i,"priority.name",null),issueTypeIconUrl:a()(i,"issuetype.iconUrl",null),issueTypeName:a()(i,"issuetype.name",null),assigneeDisplayName:i.assignee?Object(l.c)(i.assignee).displayName:null,assigneeUrl:i.assignee?Object(l.c)(i.assignee).avatarUrl:null}})(p,e);n=d(d({},n),{},{[o.issueKey]:o})}});const i=s?Object.values(s).map(({linkedIssueKey:e})=>e):[];return{issueLinks:s,linkedIssueKeys:i,linkedIssues:n}},f=e=>e.map(e=>{const{id:t,type:s}=e;return{id:t,type:s,inwardIssue:e.inwardIssue?Object(o.b)(e.inwardIssue):null,outwardIssue:e.outwardIssue?Object(o.b)(e.outwardIssue):null}})},"./src/packages/issue/issue-view/src/common/service/issue/issue-transformer.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return M})),s.d(t,"b",(function(){return F})),s.d(t,"a",(function(){return V}));var n=s("./src/packages/platform/utils/constants/src/status-categories.js"),a=s("./src/packages/common-legacy-do-not-add-anything-new/src/date/transform-to-iso-string.js"),i=s("./src/packages/platform/utils/types/src/general.js"),r=s("./src/packages/rich-content/src/common/adf-parsing-utils.js"),o=s("./src/packages/issue/issue-view/src/common/service/issue/issue-urls.js"),c=s("./src/packages/issue/issue-view/src/common/service/issue/user-transformer.js");function l(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function u(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?l(Object(s),!0).forEach((function(t){d(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):l(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function d(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const p=(e,t)=>{const{fields:s}=e;return u(u({id:e.id,issueLink:Object(o.g)(t,e.key),issueTypeIconUrl:s.issuetype.iconUrl,issueTypeName:s.issuetype.name,issuePriorityUrl:s.priority&&s.priority.iconUrl||void 0,issuePriorityName:s.priority&&s.priority.name||void 0,issueKey:e.key,issueSummary:s.summary,statusCategory:Object(n.statusCategoryForId)(s.status.statusCategory.id),statusCategoryId:s.status.statusCategory.id,statusName:s.status.name,statusId:s.status.id},(e=>{if(null!=e){const{avatarUrl:t,displayName:s}=Object(c.c)(e);return{assigneeUrl:t,assigneeDisplayName:s}}return{assigneeUrl:null,assigneeDisplayName:null}})(s.assignee)),{},{isLoading:!1})};var m=s("./node_modules/lodash/find.js"),b=s.n(m);function f(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function g(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?f(Object(s),!0).forEach((function(t){h(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):f(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function h(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const y=(e,t)=>{const{fields:s}=e,a=b()(s,e=>"issuetype"===e.schema.system),i=b()(s,e=>"priority"===e.schema.system),r=b()(s,e=>"summary"===e.schema.system),l=b()(s,e=>"status"===e.schema.system),u=b()(s,e=>"assignee"===e.schema.system),d=u?(e=>{if(null!=e){const{avatarUrl:t,displayName:s}=Object(c.c)(e);return{assigneeUrl:t,assigneeDisplayName:s}}return{assigneeUrl:null,assigneeDisplayName:null}})(u.value):{},p=b()(s,e=>"com.pyxis.greenhopper.jira:jsw-story-points"===e.schema.custom),m=b()(s,e=>"timetracking"===e.schema.system),f=b()(s,e=>"created"===e.schema.system),h=b()(s,e=>"updated"===e.schema.system);return g(g({id:e.id,issueLink:Object(o.g)(t,e.key),issueTypeIconUrl:a&&a.value.iconUrl,issueTypeName:a&&a.value.name,issuePriorityUrl:i&&i.value&&i.value.iconUrl||void 0,issuePriorityName:i&&i.value&&i.value.name||void 0,issueKey:e.key,issueSummary:r&&r.value,statusCategory:l&&l.value&&Object(n.statusCategoryForId)(l.value.statusCategory.id),statusCategoryId:l&&l.value&&l.value.statusCategory.id,statusName:l&&l.value&&l.value.name||void 0,statusId:l&&l.value&&l.value.id||void 0,estimateFieldId:p&&p.key||void 0,estimateValue:p&&p.value||void 0,assigneeDisplayName:d.assigneeDisplayName,assigneeUrl:d.assigneeUrl,isLoading:!1,issueTimeTracking:m&&m.value||void 0},f&&f.content&&{created:f.content}),h&&h.content&&{updated:h.content})},O=(e=[],t)=>e?e.map(e=>y(e,t)):[];var j=s("./src/packages/issue/issue-view/src/common/service/issue/issue-links-transformer.js");const E=(e=[],t)=>null===e?[]:e.map(e=>((e,t)=>({id:e.id,issueLink:Object(o.g)(t,e.key),issueTypeIconUrl:e.fields.issuetype.iconUrl,issueTypeName:e.fields.issuetype.name,issuePriorityUrl:e.fields.priority&&e.fields.priority.iconUrl||void 0,issuePriorityName:e.fields.priority&&e.fields.priority.name||void 0,issueKey:e.key,issueSummary:e.fields.summary,statusCategory:Object(n.statusCategoryForId)(e.fields.status.statusCategory.id),statusCategoryId:e.fields.status.statusCategory.id,statusId:e.fields.status.id,statusName:e.fields.status.name,isLoading:!1,hasError:!1,assigneeUrl:e.fields.assignee?Object(c.c)(e.fields.assignee).avatarUrl:null,assigneeDisplayName:e.fields.assignee?Object(c.c)(e.fields.assignee).displayName:null,issueTimeTracking:e.fields.timetracking}))(e,t));function v(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function k(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function w(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?k(Object(s),!0).forEach((function(t){S(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):k(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function S(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const I=e=>e?Object(a.a)(e):null,C=(e,t)=>e&&e[t],T=e=>e?{id:Object(i.j)(e.id),key:Object(i.l)(e.key),summary:e.fields.summary,issueTypeName:e.fields.issuetype?e.fields.issuetype.name:"",issueTypeIconUrl:e.fields.issuetype?e.fields.issuetype.iconUrl:""}:null,P=e=>({id:Number(e.id),aboveLevelId:e.aboveLevelId?Number(e.aboveLevelId):null,belowLevelId:e.belowLevelId?Number(e.belowLevelId):null}),_=e=>e?e.reduce((e,t)=>w(w({},e),{},{[t.id]:P(t)}),{}):{},x=e=>e?{baseLevelId:Number(e.baseLevelId),levels:_(e.levels)}:null,D=e=>{if(e.project.avatarUrls){const t=e.project.avatarUrls.find(e=>"32x32"===e.key);return t?t.value:t}return e.project.avatarUrls},A=(e,t)=>{const s=(e=>e.reduce((e,t)=>w(w({},e),{},{[t.key]:t}),{}))(e.issue.fields),a=(e=>t=>t?t.split(".").reduce(C,e):e)(s),i=a("subtasks.content"),r=a("parent-issue.content"),o=a("children-issues.content"),c=a("epic-issues.content"),l=a("portfolio-child-issues.content");let u=[];return o?u=O(o,t):c?u=O(c,t):l&&(u=((e=[],t)=>e?e.map(e=>p(e,t)):[])(l,t)),{project:{projectId:e.project.id,projectName:e.project.name,projectKey:e.project.key,projectType:e.project.projectTypeKey,isSimplified:e.project.simplified,avatarUrl:D(e),issueTypeHierarchy:x(e.project.issueTypeHierarchy)},createdDate:I(a("created.content")),updatedDate:I(a("updated.content")),statuses:{[s.status.content.id]:{id:s.status.content.id,name:s.status.content.name,statusCategory:Object(n.statusCategoryForId)(s.status.content.statusCategory.id)}},issueLinks:s.issuelinks&&Object(j.b)(t,s.issuelinks.content),subtasks:E(i,t),parentIssue:T(r),childrenIssues:u}},M=e=>{const{permissions:{ADMINISTER:t,ADMINISTER_PROJECTS:s,ASSIGN_ISSUES:n,EDIT_ISSUES:a,SCHEDULE_ISSUES:i,ADD_COMMENTS:r,DELETE_ALL_COMMENTS:o,DELETE_OWN_COMMENTS:c,EDIT_ALL_COMMENTS:l,EDIT_OWN_COMMENTS:u,CREATE_ISSUES:d,DELETE_ISSUES:p,MOVE_ISSUES:m,CREATE_ATTACHMENTS:b,DELETE_ALL_ATTACHMENTS:f,DELETE_OWN_ATTACHMENTS:g,WORK_ON_ISSUES:h,ASSIGNABLE_USER:y,LINK_ISSUES:O,VIEW_VOTERS_AND_WATCHERS:j,MANAGE_WATCHERS:E,EDIT_ALL_WORKLOGS:v,EDIT_OWN_WORKLOGS:k,DELETE_ALL_WORKLOGS:w,DELETE_OWN_WORKLOGS:S,USER_PICKER:I,VIEW_DEV_TOOLS:C,SERVICEDESK_AGENT:T}}=e;return{permissions:{canAddComments:r.havePermission,canAdministerJira:t.havePermission,canAdministerProject:s.havePermission,canAssignIssues:n.havePermission,canBeAssignedToIssues:y.havePermission,canCloneIssue:d.havePermission,canCreateAttachments:b.havePermission,canCreateChildren:d.havePermission,canCreateIssuesInClassicProjectEpic:d.havePermission,canCreateSubtask:d.havePermission,canDeleteAllAttachments:f.havePermission,canDeleteOwnAttachments:g.havePermission,canDeleteAllComments:o.havePermission,canDeleteOwnComments:c.havePermission,canDeleteIssue:p.havePermission,canEditAllComments:l.havePermission,canEditOwnComments:u.havePermission,canEditIssues:a.havePermission,canLinkIssues:O.havePermission,canLogWork:h.havePermission,canManageWatchers:E.havePermission,canMoveIssue:m.havePermission,canScheduleIssues:i.havePermission,canViewWatchers:j.havePermission,canViewVoters:j.havePermission,canEditAllWorklogs:v.havePermission,canEditOwnWorklogs:k.havePermission,canDeleteAllWorklogs:w.havePermission,canDeleteOwnWorklogs:S.havePermission,canBrowseUsers:I.havePermission,canViewDevTools:!(!C||!C.havePermission),canUseServiceDeskAgentFeatures:!(!T||!T.havePermission)}}},L=e=>{const{content:t,renderedContent:s,configuration:n}=e,a=v(e,["content","renderedContent","configuration"]),i=void 0!==t||void 0!==s;return w(w(w(w({},i?{value:t}:null),i?{renderedValue:s}:null),n&&{configuration:n}),a)},R=(e,t)=>{const s=((e,t)=>{const s=e.issue.systemFields[`${t}Adf`],n=e.issue.customFields.textareaAdf.find(e=>e.key===t);return s||n||null})(e,t);let n;n=s&&s.value?{value:s.value}:{value:r.c};const a="string"==typeof n.value?JSON.parse(n.value):n.value;return Object(r.h)(a)},N=e=>{const t=new Set(e.issue.fields.filter(e=>"atlassian-wiki-renderer"===e.schema.renderer).map(e=>e.key)),s=e.issue.customFields.textareaAdf.map(e=>e.key).filter(e=>t.has(e)),n=[...["description","environment"].filter(e=>t.has(e)||"description"===e),...s].map(t=>({key:t,value:R(e,t)}));return e.issue.fields.map(e=>{const t=n.find(t=>t.key===e.key&&null!==t.value);return t?{[t.key]:w(w({},L(e)),{},{adfValue:t.value})}:{[e.key]:L(e)}}).reduce((e,t)=>Object.assign(e,t))},U=e=>e?e.reduce((e,{id:t,name:s,items:n})=>w(w({},e),{},{[t]:{id:t,name:s,items:n}}),{}):{},F=(e,t)=>{const s=A(e,t),n={issue:w({id:e.issue.id,agile:e.issue.agile,fields:N(e),tabs:U(e.issue.tabs)},e.issue.viewScreenId?{viewScreenId:e.issue.viewScreenId}:null)};return w(w({},n),s)},V=({issues:e=[]}={})=>e},"./src/packages/issue/issue-view/src/common/service/issue/issue-urls.js":function(e,t,s){"use strict";s.d(t,"r",(function(){return n})),s.d(t,"g",(function(){return r})),s.d(t,"k",(function(){return o})),s.d(t,"f",(function(){return c})),s.d(t,"p",(function(){return l})),s.d(t,"h",(function(){return u})),s.d(t,"q",(function(){return m})),s.d(t,"a",(function(){return b})),s.d(t,"j",(function(){return f})),s.d(t,"n",(function(){return g})),s.d(t,"o",(function(){return h})),s.d(t,"e",(function(){return y})),s.d(t,"b",(function(){return O})),s.d(t,"c",(function(){return j})),s.d(t,"d",(function(){return E})),s.d(t,"i",(function(){return v})),s.d(t,"m",(function(){return w})),s.d(t,"l",(function(){return S}));const n=e=>e,a=/^([A-Z][A-Z0-9]+)-([0-9]*)$/i,i=e=>{if(e){const t=a.exec(e);if(t&&3===t.length)return t[1]}},r=(e,t)=>`${e}/browse/${t}`,o=(e,t)=>`${e}/browse/${t}`,c=(e,t)=>`${e}/rest/api/2/issue/${t}`,l=e=>`${e}/rest/api/2/search`,u=(e,t)=>`${e}/rest/api/2/issue/${t}?fields=issuelinks`,d=(e,t,s,n)=>`${e}/rest/api/2/issue/picker?currentIssueKey=${s}&showSubTasks=true&showSubTaskParent=true&query=${encodeURIComponent(n)}&currentJQL=${encodeURIComponent(t)}`,p="(resolution = Unresolved or statusCategory != Done) ORDER BY priority DESC, updated DESC",m=(e,t,s)=>{let n=`project in projectsWhereUserHasPermission("Link Issues") AND ${p}`;const a=i(s);return a&&(n=`project = "${a.toUpperCase()}" AND ${n}`),d(e,n,t,s)},b=(e,t,s)=>{let n="";const a=i(s);return a&&(n=`project = "${a.toUpperCase()}" ORDER BY priority DESC, updated DESC`),d(e,n,t,s)},f=(e,t)=>`${e}/rest/api/2/issue/createmeta?projectKeys=${t}&expand=projects.issuetypes.fields`,g=e=>`${e}/rest/api/2/issueLink`,h=(e,t)=>`${e}/rest/remoteJiraIssueLink/1/remoteJira/${t}/createIssueLink`,y=e=>`${e}/rest/graphql/1/`,O=e=>`${e}/rest/api/2/mypreferences?key=jira.user.issue.changeboarding.lastinteracted`,j=e=>`${e}/rest/api/2/mypreferences?key=jira.user.issue.clickthrough-banner.lastinteracted`,E=e=>`${e}/rest/confluenceIssueLink/1/confluence/applink`,v=(e,t)=>`${e}/rest/issueLinkAppLink/1/appLink/info?type=com.atlassian.applinks.api.application.jira.JiraApplicationType&issueIdOrKey=${t}`,k=(e,t,s,n)=>`${e}/rest/remoteJiraIssueLink/1/remoteJira/picker?showSubTasks=true&showSubTaskParent=true&query=${encodeURIComponent(s)}&currentJQL=${encodeURIComponent(t)}&appId=${n}`,w=(e,t,s)=>{let n=p;const a=i(t);return a&&(n=`project = "${a.toUpperCase()}" AND ${n}`),k(e,n,t,s)},S=(e,t,s)=>{let n="";const a=i(t);return a&&(n=`project = "${a.toUpperCase()}" ORDER BY priority DESC, updated DESC`),k(e,n,t,s)}},"./src/packages/issue/issue-view/src/common/service/issue/issue-view-mode.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return c}));var n=s("./node_modules/query-string/index.js"),a=s.n(n),i=s("./src/packages/issue/issue-context-service/src/types.js");const r=()=>a.a.parse(window.location.search).view||"",o=()=>r().includes("planning"),c=e=>e?e===i.b:o()||(()=>"detail"===r())()},"./src/packages/issue/issue-view/src/common/service/issue/subtask-types-server.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return u}));var n=s("./node_modules/rxjs/Rx.js"),a=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),i=s("./src/packages/platform/utils/fetch/src/utils/as-json-stream.js"),r=s("./src/packages/issue/issue-view/src/browser-metrics/browser-metrics-constants.js"),o=s("./src/packages/issue/issue-view/src/common/util/errors/index.js"),c=s("./src/packages/issue/issue-view/src/common/service/issue/issue-urls.js");const l=e=>e.projects[0]?{subtaskTypes:e.projects[0].issuetypes.filter(e=>e.subtask),issueTypes:e.projects[0].issuetypes}:{subtaskTypes:[],issueTypes:[]},u=(e,t,s)=>((e,t)=>Object(i.a)(e,{perf:r.f,headersProcessor:t&&t(r.f.key)}).map(l).catch(e=>(Object(o.a)("issue.issue-base.content.subtasks.type.subtasks-types-epic","Failed to fetch subtask types.",e,new a.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e})),n.Observable.of({subtaskTypes:[],issueTypes:[]}))))(Object(c.j)(e,t),s)},"./src/packages/issue/issue-view/src/common/service/issue/user-transformer.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return m})),s.d(t,"a",(function(){return b})),s.d(t,"b",(function(){return g})),s.d(t,"d",(function(){return h}));var n=s("./node_modules/lodash/every.js"),a=s.n(n),i=s("./node_modules/lodash/has.js"),r=s.n(i),o=s("./node_modules/lodash/partial.js"),c=s.n(o),l=s("./src/packages/platform/utils/types/src/general.js");function u(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function d(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const p=["accountId","displayName","avatarUrls","timeZone"],m=({accountId:e,displayName:t,avatarUrls:s,timeZone:n})=>({displayName:t,id:Object(l.a)(e),avatarUrl:s["48x48"],timeZone:n}),b=e=>{const{applicationRoles:t}=e;return t&&t.items&&t.items.map(e=>e.key)||[]},f=e=>{const t=e.find(e=>"48x48"===e.key);return t&&t.value||null},g=e=>{const{accountId:t,displayName:s,avatarUrl:n,avatarUrls:a,timeZone:i}=e;return function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?u(Object(s),!0).forEach((function(t){d(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):u(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({id:t,displayName:s,avatarUrl:n||f(a)},i?{timeZone:i}:{})},h=e=>{if(!e)throw new Error("User is null or undefined");if(!(e&&a()(p,c()(r.a,e))))throw new Error(`User object is not expected shape, keys present: ${Object.keys(e).toString()}`);return e}},"./src/packages/issue/issue-view/src/common/service/mentions/get-mention-encoder.js":function(e,t,s){"use strict";var n=s("./node_modules/memoize-one/dist/memoize-one.esm.js");t.a=Object(n.a)(e=>t=>`${e}/people/${t}`)},"./src/packages/issue/issue-view/src/common/service/mentions/mention-provider-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return b}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),i=s("./node_modules/query-string/index.js"),r=s("./src/packages/platform/utils/fetch/src/utils/as-json-stream.js"),o=s("./src/packages/platform/utils/types/src/general.js"),c=s("./src/packages/platform/services/mention-provider/src/services/user-mention-provider/index.js");function l(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function u(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const d=e=>null==e||""===e?"":`${window.location.origin}/jira/people/team/${e}?ref=jira$&src=issue`,p=({accountId:e,teamId:t,name:s,avatarUrl:n,members:a,memberCount:i,includesYou:r})=>a?{id:Object(o.a)(t||""),name:s,accessLevel:"CONTAINER",userType:"TEAM",avatarUrl:n,context:{members:a.map(e=>(({accountId:e,name:t})=>({id:e,name:t}))(e)),memberCount:i||0,includesYou:r||!1,teamLink:d(t)}}:{name:s,mentionName:s,nickname:s,id:Object(o.a)(e||""),avatarUrl:n};class m extends c.a{constructor(e,t,s,n){super(e,t,s),this.teamHighlightEnabled=void 0,this.createTeamPath=void 0,this.mentionTypeaheadHighlightEnabled=()=>!0,this.mentionTypeaheadCreateTeamPath=()=>this.createTeamPath,this.getQueryString=(e,t)=>Object(i.stringify)(function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?l(Object(s),!0).forEach((function(t){u(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):l(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({query:e||"",issueKey:this.issueKey,maxResults:20},t)),this.getUrl=e=>`${this.baseUrl}/rest/internal/2/userteam/mention/search?${e}`,this.createTeamPath=n}search(e,t){const s=this.getQueryString(e,t),n=this.getUrl(s);return this.activeSearches.add(e||""),Object(r.a)(n).mergeMap(e=>e.map(p)).reduce((e,t)=>[...e,t],[]).map(t=>({query:e||"",mentions:t})).toPromise()}}const b=Object(n.createSelector)(a.g,a.B,a.a,(e,t,s)=>new m(e,t,s,`${e}/jira/people/search#createTeam`))},"./src/packages/issue/issue-view/src/common/skeleton/activity-feed-view.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),r=s("./src/packages/issue/issue-view/src/common/skeleton/avatar-view.js"),o=s("./src/packages/issue/issue-view/src/common/skeleton/container-mask-view.js"),c=s("./src/packages/issue/issue-view/src/common/skeleton/skeleton-background-view.js"),l=s("./src/packages/issue/issue-view/src/common/skeleton/skeleton-container-view.js"),u=s("./src/packages/issue/issue-view/src/common/skeleton/text-line-mask-view.js");const d=i.default.div(["display:flex;"]),p=Object(i.default)(c.a)(["width:8px;"]);t.a=()=>a.a.createElement(l.a,null,a.a.createElement(c.b,null),a.a.createElement(o.a,{paddingTop:0,paddingBottom:0},a.a.createElement(o.a,{paddingTop:32,paddingBottom:12},a.a.createElement(u.a,{fontSize:14,lineHeight:16,intrusion:300})),a.a.createElement(d,null,a.a.createElement(r.a,null),a.a.createElement(p,null),a.a.createElement(u.a,{fontSize:40,lineHeight:40,intrusion:0}))))},"./src/packages/issue/issue-view/src/common/skeleton/avatar-view.js":function(e,t,s){"use strict";var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");t.a=n.default.div(["width:","px;height:","px;background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIHdpZHRoPSI0MHB4IiBoZWlnaHQ9IjQwcHgiIHZpZXdCb3g9IjAgMCA0MCA0MCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4gICAgICAgIDx0aXRsZT4zMnB4IGNpcmNsZSBpbnNpZGUgNDBweCByZWN0PC90aXRsZT4gICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+ICAgIDxkZWZzPjwvZGVmcz4gICAgPGcgaWQ9IlBhZ2UtMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+ICAgICAgICA8ZyBpZD0iMzJweC1jaXJjbGUtaW5zaWRlLTQwcHgtcmVjdCIgZmlsbD0iI0ZGRkZGRiI+ICAgICAgICAgICAgPHBhdGggZD0iTTAsMCBMNDAsMCBMNDAsNDAgTDAsNDAgTDAsMCBaIE0yMCw0IEMxMS4xNjM0NDQsNCA0LDExLjE2MzQ0NCA0LDIwIEM0LDI4LjgzNjU1NiAxMS4xNjM0NDQsMzYgMjAsMzYgQzI4LjgzNjU1NiwzNiAzNiwyOC44MzY1NTYgMzYsMjAgQzM2LDExLjE2MzQ0NCAyOC44MzY1NTYsNCAyMCw0IFoiIGlkPSJDb21iaW5lZC1TaGFwZSI+PC9wYXRoPiAgICAgICAgPC9nPiAgICA8L2c+PC9zdmc+);"],5*a.e,5*a.e)},"./src/packages/issue/issue-view/src/common/skeleton/container-mask-view.js":function(e,t,s){"use strict";var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./node_modules/@atlaskit/theme/dist/es2019/index.js");t.a=n.default.div(["position:relative;width:100%;border-top:","px solid ",";border-bottom:","px solid ",";"],e=>e.paddingTop,a.a.N0,e=>e.paddingBottom,a.a.N0)},"./src/packages/issue/issue-view/src/common/skeleton/skeleton-background-view.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./node_modules/@atlaskit/theme/dist/es2019/index.js");const i=Object(n.keyframes)(["0%{background-position:-300px 0;}100%{background-position:2000px 0;}"]),r=n.default.div(["background-color:",";background-image:none;"],a.a.N0);t.b=n.default.div(["animation-duration:1s;animation-fill-mode:forwards;animation-iteration-count:infinite;animation-name:",";animation-timing-function:linear;background-color:",";background-image:linear-gradient( to right,"," 10%,"," 30%,"," 50% );background-repeat:no-repeat;position:absolute;left:0;right:0;top:0;bottom:0;"],i,a.a.N30,a.a.N30,a.a.N20,a.a.N30)},"./src/packages/issue/issue-view/src/common/skeleton/skeleton-container-view.js":function(e,t,s){"use strict";var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js");t.a=n.default.div(["width:100%;display:flex;position:relative;"])},"./src/packages/issue/issue-view/src/common/skeleton/text-line-mask-view.js":function(e,t,s){"use strict";var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./node_modules/@atlaskit/theme/dist/es2019/index.js");t.a=n.default.div(["position:relative;height:","px;border-right:","px solid ",";border-top:","px solid ",";border-bottom:","px solid ",";"],e=>e.fontSize,e=>e.intrusion,a.a.N0,e=>(e.lineHeight-e.fontSize)/2,a.a.N0,e=>(e.lineHeight-e.fontSize)/2,a.a.N0)},"./src/packages/issue/issue-view/src/common/state/selectors/activity-provider-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./node_modules/@atlaskit/activity-provider/dist/es2019/api/ActivityResource.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js");const r=Object(n.createSelector)(i.j,e=>new a.a("/gateway/api/graphql",e))},"./src/packages/issue/issue-view/src/common/state/selectors/application-selector.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return c})),s.d(t,"a",(function(){return l}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/platform/utils/types/src/application.js"),i=s("./src/packages/platform/utils/types/src/edition.js"),r=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),o=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");const c=Object(n.createSelector)(o.G,e=>e?Object(a.e)(e):null),l=Object(n.createSelector)([r.c,c],(e,t)=>t?Object(i.f)(t,e):null)},"./src/packages/issue/issue-view/src/common/state/selectors/comments-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");const r=Object(n.createSelector)(a.A,i.D,(e,{commentId:t})=>t||"NEW_OPTIMISTIC_COMMENT",(e,t,s)=>({objectId:e,containerId:t,childObjectId:s}))},"./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js":function(e,t,s){"use strict";s.d(t,"m",(function(){return p})),s.d(t,"a",(function(){return m})),s.d(t,"g",(function(){return b})),s.d(t,"E",(function(){return f})),s.d(t,"B",(function(){return g})),s.d(t,"A",(function(){return h})),s.d(t,"x",(function(){return y})),s.d(t,"G",(function(){return O})),s.d(t,"K",(function(){return j})),s.d(t,"I",(function(){return E})),s.d(t,"b",(function(){return v})),s.d(t,"j",(function(){return k})),s.d(t,"D",(function(){return w})),s.d(t,"F",(function(){return S})),s.d(t,"z",(function(){return I})),s.d(t,"H",(function(){return T})),s.d(t,"M",(function(){return P})),s.d(t,"k",(function(){return _})),s.d(t,"L",(function(){return x})),s.d(t,"l",(function(){return D})),s.d(t,"r",(function(){return A})),s.d(t,"e",(function(){return L})),s.d(t,"u",(function(){return R})),s.d(t,"p",(function(){return N})),s.d(t,"w",(function(){return U})),s.d(t,"q",(function(){return F})),s.d(t,"v",(function(){return V})),s.d(t,"f",(function(){return K})),s.d(t,"s",(function(){return B})),s.d(t,"J",(function(){return W})),s.d(t,"t",(function(){return H})),s.d(t,"n",(function(){return G})),s.d(t,"i",(function(){return $})),s.d(t,"h",(function(){return q})),s.d(t,"O",(function(){return z})),s.d(t,"C",(function(){return Y})),s.d(t,"d",(function(){return Q})),s.d(t,"N",(function(){return Z})),s.d(t,"Q",(function(){return X})),s.d(t,"c",(function(){return ee})),s.d(t,"y",(function(){return te})),s.d(t,"o",(function(){return ae})),s.d(t,"P",(function(){return re}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/safe-string.js"),i=s("./src/packages/platform/utils/constants/src/analytics-sources.js"),r=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/get-tenant-context/index.js"),o=s("./src/packages/platform/utils/types/src/general.js"),c=s("./src/packages/platform/utils/types/src/license-state.js"),l=s("./src/packages/issue/issue-view/src/configurations.js"),u=s("./src/packages/issue/issue-view/src/feature-flags.js"),d=s("./src/packages/issue/issue-view/src/common/util/entry/get-project-key.js");const p=e=>e.context,m=Object(n.createSelector)(p,e=>e.atlassianAccountId),b=Object(n.createSelector)(p,e=>e.baseUrl),f=Object(n.createSelector)(p,e=>e.loginRedirectUrl),g=Object(n.createSelector)(p,e=>Object(o.l)(e.issueKey)),h=Object(n.createSelector)(p,e=>e.issueId),y=Object(n.createSelector)(p,e=>!!e.isSpaEnabled),O=Object(n.createSelector)(p,e=>e.onIssueKeyChange),j=Object(n.createSelector)(p,e=>e.rapidViewMap),E=Object(n.createSelector)(g,e=>Object(d.a)(e)),v=Object(n.createSelector)(p,e=>void 0!==e.analyticsSource?new a.a(e.analyticsSource):void 0),k=Object(n.createSelector)(p,e=>e.cloudId||Object(o.c)("")),w=(Object(n.createSelector)(p,e=>e.isAnonymous),Object(n.createSelector)(p,e=>e.locale)),S=Object(n.createSelector)(p,e=>e.maxTokenLength),I=Object(n.createSelector)(p,e=>e.issueActions||[]),C=Object(n.createSelector)(p,e=>e.contextItemCategories),T=Object(n.createSelector)(C,e=>e.primary),P=Object(n.createSelector)(C,e=>e.secondary),_=Object(n.createSelector)(p,e=>e.contentItemCategories.visible||[]),x=Object(n.createSelector)(p,e=>e.contentItemCategories.request),D=Object(n.createSelector)(T,P,(e,t)=>e.concat(t)),A=Object(n.createSelector)(_,(e,t)=>t,(e,t)=>e.map(e=>e.id).includes(t)),M=Object(n.createSelector)(D,(e,t)=>t,(e,t)=>e.includes(t)),L=(Object(n.createSelector)(A,M,(e,t)=>e?"content":t?"context":"foundation"),Object(n.createSelector)(p,e=>e.applicationKey)),R=Object(n.createSelector)(v,e=>!!e&&e.value===i.a.MOBILE_ISSUE),N=Object(n.createSelector)(L,e=>e===Object(l.k)().applicationKey||e===Object(l.n)().applicationKey),U=Object(n.createSelector)(L,e=>e===Object(l.l)().applicationKey),F=Object(n.createSelector)(v,e=>!!e&&e.value===i.a.BITBUCKET_ISSUE),V=Object(n.createSelector)(L,e=>(!!Object(u.isNewIssueViewAdminOptionsPhase2ReplacementEnabled)()||Object(u.isJSDBentoEnabled)())&&e===Object(l.j)().applicationKey),K=Object(n.createSelector)(p,e=>e.backButtonUrl),B=Object(n.createSelector)(p,e=>!!e.ecosystemEnabled),W=Object(n.createSelector)(p,e=>e.rapidViewId),H=Object(n.createSelector)(p,e=>!!e.isLoadedWithPage),G=Object(n.createSelector)(p,e=>e.estimationStatistic||null),$=Object(n.createSelector)(p,e=>e.boardType),q=Object(n.createSelector)(p,e=>e.boardId),z=Object(n.createSelector)(p,e=>e.siteAdminStatus),Y=(Object(n.createSelector)(p,e=>e.productCrossSellConfig),Object(n.createSelector)(p,e=>e.licensedProducts)),Q=Object(n.createSelector)(p,e=>e.appPermissions),J=Object(n.createSelector)(p,e=>e.isModal),Z=Object(n.createSelector)(J,R,(e,t)=>!e&&!t),X=Object(n.createSelector)(p,e=>e.viewMode),ee=Object(n.createSelector)(p,e=>e.appEditions),te=Object(n.createSelector)(Y,e=>e&&!0===e["is.origo.jira.tempo-plugin"]),se=Object(n.createSelector)(p,e=>e.licenseStates),ne=Object(n.createSelector)(se,e=>e&&e.software===c.a),ae=Object(n.createSelector)(Y,ne,(e,t)=>e[r.a.JIRA_SOFTWARE]&&t),ie=Object(n.createSelector)(se,e=>e&&e.serviceDesk===c.a),re=Object(n.createSelector)(Y,ie,(e,t)=>e&&e[r.a.JIRA_SERVICEDESK]&&t)},"./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js":function(e,t,s){"use strict";s.d(t,"t",(function(){return f})),s.d(t,"w",(function(){return h})),s.d(t,"e",(function(){return y})),s.d(t,"b",(function(){return O})),s.d(t,"q",(function(){return j})),s.d(t,"s",(function(){return E})),s.d(t,"a",(function(){return v})),s.d(t,"z",(function(){return k})),s.d(t,"p",(function(){return w})),s.d(t,"A",(function(){return S})),s.d(t,"m",(function(){return I})),s.d(t,"l",(function(){return C})),s.d(t,"d",(function(){return T})),s.d(t,"c",(function(){return P})),s.d(t,"C",(function(){return _})),s.d(t,"r",(function(){return x})),s.d(t,"o",(function(){return D})),s.d(t,"n",(function(){return A})),s.d(t,"h",(function(){return M})),s.d(t,"g",(function(){return L})),s.d(t,"i",(function(){return R})),s.d(t,"y",(function(){return N})),s.d(t,"B",(function(){return U})),s.d(t,"f",(function(){return F})),s.d(t,"D",(function(){return V})),s.d(t,"j",(function(){return K})),s.d(t,"k",(function(){return B})),s.d(t,"G",(function(){return H})),s.d(t,"H",(function(){return G})),s.d(t,"F",(function(){return $})),s.d(t,"E",(function(){return q})),s.d(t,"v",(function(){return Y})),s.d(t,"x",(function(){return Q})),s.d(t,"u",(function(){return ee}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./node_modules/lodash/find.js"),i=s.n(a),r=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),o=s("./src/packages/issue/issue-view/src/configurations.js"),c=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),l=s("./src/packages/issue/issue-view/src/common/state/selectors/get-editing-value.js"),u=s("./src/packages/issue/issue-view/src/common/state/selectors/get-field-type.js"),d=s("./src/packages/issue/issue-view/src/common/state/selectors/get-pending-value.js");function p(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function m(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?p(Object(s),!0).forEach((function(t){b(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):p(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function b(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const f=e=>e.fields||{},g=(e,t)=>i()(t,t=>(t.schema&&t.schema.custom)===e),h=(e,t)=>{let s=t[e];if(!s&&Object.keys(o.m).includes(e)){const n=o.m[e];s=g(n,t)}return s},y=e=>Object(n.createSelector)(f,t=>g(e,t)),O=e=>Object(n.createSelector)(y(e),e=>{const t=e?e.key.match(/customfield_(\d+)$/i):null;return t?+t[1]:null}),j=e=>Object(n.createSelector)(f,t=>h(e,t)),E=Object(n.createSelector)(f,e=>Object.keys(e).map(t=>h(t,e)).filter(Boolean)),v=Object(n.createSelector)(f,e=>Object.keys(e)),k=e=>!!e&&e.editable,w=e=>Object(n.createSelector)(j(e),e=>e&&e.schema&&e.schema.configuration&&e.schema.configuration.reduce((e,{key:t,value:s})=>m(m({},e),{},{[t]:s}),{})),S=e=>Object(n.createSelector)(j(e),e=>k(e)),I=e=>Object(n.createSelector)(j(e),t=>t&&t.title?t.title:(r.i.safeWarn("issue.field.selector",`${e} does not have a field title`),"")),C=e=>Object(n.createSelector)(j(e),e=>e&&e.key),T=e=>Object(n.createSelector)(j(e),e=>e&&e.autoCompleteUrl),P=e=>Object(n.createSelector)(j(e),e=>e?e.allowedValues:[]),_=e=>Object(n.createSelector)(j(e),e=>!!e&&e.required),x=e=>Object(n.createSelector)(j(e),e=>e&&Object(u.a)(e)),D=e=>Object(n.createSelector)(j(e),e=>e&&e.value),A=e=>Object(n.createSelector)(j(e),e=>e&&Object(d.a)(e)),M=e=>Object(n.createSelector)(j(e),e=>e&&Object(l.a)(e)),L=e=>Object(n.createSelector)(j(e),e=>e&&Object(l.b)(e)),R=e=>Object(n.createSelector)(j(e),e=>e&&e.renderedValue),N=e=>!!e&&void 0!==e.editingValue,U=e=>Object(n.createSelector)(j(e),e=>N(e)),F=e=>Object(n.createSelector)(j(e),e=>(e?e.fieldEditSessionId:null)||""),V=e=>Object(n.createSelector)(j(e),e=>!!e&&void 0!==e.pendingValue),K=(e,t)=>Object(n.createSelector)(j(e),e=>e&&(e.isInvalid?e.invalidMessage||t:null)),B=e=>Object(n.createSelector)(j(e),e=>Boolean(e&&e.isInvalid)),W=e=>"com.atlassian.jira.plugin.system.customfieldtypes:textarea"===e||"environment"===e||"description"===e,H=e=>Object(n.createSelector)(t=>Object(c.r)(t,e),c.v,x(e),(e=>Object(n.createSelector)(j(e),e=>e&&e.schema&&e.schema.renderer))(e),(t,s,n,a)=>{const i="description"===e,r=W(n)&&"atlassian-wiki-renderer"===a;return i||r}),G=Object(n.createSelector)(f,e=>e,(e,t)=>Object.keys(e).filter(e=>H(e)(t))),$=Object(n.createSelector)(G,e=>e,(e,t)=>e.some(e=>U(e)(t))),q=e=>Object(n.createSelector)(x(e),e=>W(e)),z=Object(n.createSelector)(f,e=>e,(e,t)=>Object.keys(e).filter(e=>q(e)(t))),Y=Object(n.createSelector)(z,e=>e,(e,t)=>e.filter(e=>U(e)(t))),Q=Object(n.createSelector)(j("fixVersions"),j("versions"),(e,t)=>{const s=[];return e&&s.push(e.key),t&&s.push(t.key),s}),J=["com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect","com.atlassian.jira.plugin.system.customfieldtypes:atlassian-team","com.atlassian.jira.plugin.system.customfieldtypes:storypoint","com.atlassian.jpo:jpo-custom-field-baseline-start","com.atlassian.jira.plugin.system.customfieldtypes:float","ecosystemGlance","forgeGlance","com.atlassian.servicedesk:sd-request-feedback","com.pyxis.greenhopper.jira:jsw-issue-color","com.atlassian.servicedesk.servicedesk-lingo-integration-plugin:sd-request-language"],Z=["timetracking","security","issuerestriction","timeoriginalestimate"],X=["issuetype"],ee=Object(n.createSelector)(E,c.l,c.k,c.L,e=>e,(e,t,s,n,a)=>{const i=[...t.map(e=>e.id),...s.map(e=>e.id),...n?n.map(e=>e.id):[]];return e.filter(e=>((e,t)=>X.includes(t)||e.indexOf(t)>-1)(i,e.key)&&e.editable&&(e=>!e||-1===J.indexOf(e.custom)&&-1===Z.indexOf(e.system))(e.schema)).map(e=>({value:e.key,label:e.title,isRichTextField:H(e.key)(a)}))})},"./src/packages/issue/issue-view/src/common/state/selectors/field-visibility-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return c})),s.d(t,"f",(function(){return l})),s.d(t,"e",(function(){return u})),s.d(t,"d",(function(){return d})),s.d(t,"b",(function(){return p})),s.d(t,"c",(function(){return m}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/platform/ui/field-config/src/index.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),r=s("./src/packages/issue/issue-view/src/common/state/selectors/get-field-type.js"),o=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js");const c=e=>Object.values(Object(a.T)()).includes(e),l=e=>Object(n.createSelector)(Object(i.c)(e),e=>!e||e.length>1),u=e=>Object(n.createSelector)(o.e,Object(i.o)(e),(e,t)=>Boolean(e&&t&&t.rating)),d=e=>Object(n.createSelector)(Object(i.n)(e),e=>Boolean(e&&(e.showField||e.hasEpicLinkFieldDependency))),p=({fieldType:e,fieldId:t,state:s})=>{switch(e){case"com.atlassian.servicedesk:sd-request-feedback":return u(t)(s);case"com.atlassian.jpo:jpo-custom-field-parent":return d(t)(s);case"com.atlassian.servicedesk.servicedesk-lingo-integration-plugin:sd-request-language":return l(t)(s);case"com.atlassian.servicedesk.approvals-plugin:sd-approvals":return(e=>Object(n.createSelector)(Object(i.n)(e),e=>Boolean(e)))(t)(s);case"com.pyxis.greenhopper.jira:jsw-issue-color":return!1;default:return!0}},m=(e,t)=>{if(!Object(i.a)(t).includes(e))return!1;const s=Object(r.a)(Object(i.w)(e,Object(i.t)(t)));return!(void 0===s||!c(s))&&p({fieldType:s,fieldId:e,state:t})}},"./src/packages/issue/issue-view/src/common/state/selectors/get-editing-value.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return a}));var n=s("./src/packages/issue/issue-view/src/common/state/selectors/get-pending-value.js");t.a=e=>void 0!==e.editingValue?e.editingValue:Object(n.a)(e);const a=e=>e.editingValue||Object(n.b)(e)},"./src/packages/issue/issue-view/src/common/state/selectors/get-field-type.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s("./src/packages/issue/issue-view/src/configurations.js");const a=[...n.d.filter(e=>!n.e.includes(e)),...Object.keys(n.m).map(e=>n.m[e]),"com.atlassian.jira.plugin.system.customfieldtypes:flagged"],i=e=>{const t=e?e.schema:void 0;return t?(e=>a.find(t=>t===e))(t.custom)||t.system||t.type:void 0}},"./src/packages/issue/issue-view/src/common/state/selectors/get-pending-value.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),t.a=e=>void 0!==e.pendingValue?e.pendingValue:e.value;const n=e=>e.pendingValue||e.adfValue||e.value},"./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js":function(e,t,s){"use strict";s.d(t,"e",(function(){return o})),s.d(t,"F",(function(){return c})),s.d(t,"J",(function(){return l})),s.d(t,"c",(function(){return u})),s.d(t,"d",(function(){return d})),s.d(t,"i",(function(){return p})),s.d(t,"D",(function(){return m})),s.d(t,"E",(function(){return b})),s.d(t,"G",(function(){return f})),s.d(t,"v",(function(){return g})),s.d(t,"z",(function(){return h})),s.d(t,"y",(function(){return y})),s.d(t,"B",(function(){return O})),s.d(t,"A",(function(){return j})),s.d(t,"l",(function(){return E})),s.d(t,"m",(function(){return v})),s.d(t,"s",(function(){return k})),s.d(t,"t",(function(){return w})),s.d(t,"n",(function(){return S})),s.d(t,"x",(function(){return I})),s.d(t,"o",(function(){return C})),s.d(t,"p",(function(){return T})),s.d(t,"b",(function(){return P})),s.d(t,"h",(function(){return _})),s.d(t,"g",(function(){return x})),s.d(t,"k",(function(){return D})),s.d(t,"C",(function(){return A})),s.d(t,"H",(function(){return M})),s.d(t,"I",(function(){return L})),s.d(t,"a",(function(){return R})),s.d(t,"w",(function(){return N})),s.d(t,"j",(function(){return U})),s.d(t,"f",(function(){return F})),s.d(t,"q",(function(){return V})),s.d(t,"r",(function(){return K})),s.d(t,"u",(function(){return B}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/platform/utils/types/src/general.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),r=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js");const o=e=>e.entities,c=Object(n.createSelector)(o,e=>e?e.project:null),l=e=>e.ui,u=Object(n.createSelector)(o,e=>e.issue),d=Object(n.createSelector)(o,e=>e.refreshedOn),p=Object(n.createSelector)(l,e=>e.flags),m=Object(n.createSelector)(c,e=>e&&e.projectId?e.projectId:null),b=Object(n.createSelector)(c,e=>e?e.projectKey:null),f=Object(n.createSelector)(c,e=>e&&e.projectType?e.projectType:null),g=Object(n.createSelector)(c,e=>!!e&&e.isSimplified),h=Object(n.createSelector)(o,i.a,(e,t)=>t?e.users[t]:null),y=Object(n.createSelector)(o,i.a,(e,t)=>{const s=t?e.users[t]:null;return s?s.avatarUrl:null}),O=Object(n.createSelector)(o,e=>e.parentIssue),j=Object(n.createSelector)(h,e=>e?e.timeZone:void 0),E=Object(n.createSelector)(u,e=>e&&Object(a.j)(e.id)),v=Object(n.createSelector)(g,e=>!e),k=Object(n.createSelector)(l,e=>"LOADING"===e.loadingStage),w=Object(n.createSelector)(l,e=>"PREVIEW"===e.loadingStage),S=Object(n.createSelector)(l,e=>"COMPLETE"===e.loadingStage),I=Object(n.createSelector)(l,e=>e.loadingStage),C=Object(n.createSelector)(l,e=>!(!e.issueDeletion||!e.issueDeletion.isDeleteIssueModalOpen)),T=Object(n.createSelector)(l,e=>!!e.issueDeletion&&e.issueDeletion.isDeletingIssue),P=Object(n.createSelector)(l,e=>!!e.issueDeletion&&e.issueDeletion.didIssueDeleteFail),_=Object(n.createSelector)(l,e=>e.error),x=Object(n.createSelector)(l,e=>e.errorMessage),D=Object(n.createSelector)(o,e=>t=>t?e.users[t]:void 0),A=Object(n.createSelector)(o,e=>e.parentLevelIssues),M=()=>"jira",L=Object(n.createSelector)(f,e=>{switch(e){case"business":return"jira-core";case"software":return"jira-software";case"service_desk":return"jira-servicedesk";default:return"jira"}}),R=Object(n.createSelector)(M,i.j,(e,t)=>t?`ari:cloud:${e}:${t}`:null),N=Object(n.createSelector)(R,E,(e,t)=>e&&t?`${e}:issue/${t}`:null),U=()=>({}),F=Object(n.createSelector)(e=>e.agile,e=>e&&e.epic&&e.epic.key||null),V=e=>({}.hasOwnProperty.call(e,"epic-issues")),K=Object(n.createSelector)(r.t,e=>V(e)),B=Object(n.createSelector)(f,e=>"service_desk"===e)},"./src/packages/issue/issue-view/src/common/state/selectors/media-context-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return a})),s.d(t,"c",(function(){return i})),s.d(t,"d",(function(){return r})),s.d(t,"b",(function(){return o}));var n=s("./node_modules/reselect/lib/index.js");const a=e=>e.mediaContext,i=Object(n.createSelector)(a,e=>e&&e.userAuth||null),r=Object(n.createSelector)(a,e=>e&&e.viewContext||null),o=Object(n.createSelector)(a,e=>e&&e.uploadContext||null)},"./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return l})),s.d(t,"g",(function(){return p})),s.d(t,"d",(function(){return m})),s.d(t,"c",(function(){return b})),s.d(t,"b",(function(){return f})),s.d(t,"h",(function(){return y})),s.d(t,"f",(function(){return O})),s.d(t,"e",(function(){return j}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./node_modules/lodash/mapValues.js"),i=s.n(a),r=s("./src/packages/issue/issue-view/src/feature-flags.js"),o=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),c=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");const l=Object(n.createSelector)(c.e,e=>e.applicationRoles),u=Object(n.createSelector)(c.e,e=>e.permissions),d=new Set(["canUseServiceDeskAgentFeatures","canEditIssues","canTransitionIssues","canScheduleIssues","canMoveIssue","canAssignIssues","canBeAssignedToIssues","canDeleteIssue","canManageWatchers","canEditAllComments","canDeleteAllComments","canDeleteAllAttachments","canLogWork","canEditOwnWorklogs","canEditAllWorklogs","canDeleteOwnWorklogs","canDeleteAllWorklogs","canResolveIssues","canViewReadonlyWorkflow","canCloseIssues","canModifyReporter","canSetIssueSecurity"]),p=Object(n.createSelector)(l,o.d,c.G,u,o.P,(e,t,s,n,a)=>"service_desk"===s&&a?Object(r.isUseAppPermissionsFromTenantContextEnabled)()?((e,t)=>{const{canUseServiceDeskAgentFeatures:s}=t;return i()(t,(t,n)=>d.has(n)?t&&e&&s:t)})(t.hasServiceDeskAccess,n):((e,t)=>{const s=e&&e.includes("jira-servicedesk"),{canUseServiceDeskAgentFeatures:n}=t;return i()(t,(e,t)=>d.has(t)?e&&s&&n:e)})(e||[],n):n),m=Object(n.createSelector)(p,e=>!!e.canBeAssignedToIssues),b=Object(n.createSelector)(p,e=>!!e.canAdministerProject),f=Object(n.createSelector)(p,e=>!!e.canAdministerJira),g=Object(n.createSelector)(p,e=>e.canViewWatchers),h=Object(n.createSelector)(p,e=>e.canManageWatchers),y=Object(n.createSelector)(g,h,(e,t)=>({canViewWatchers:e,canManageWatchers:t})),O=(Object(n.createSelector)(p,e=>e.canBrowseUsers),Object(n.createSelector)(p,e=>e.canViewDevTools)),j=Object(n.createSelector)(p,e=>e.canUseServiceDeskAgentFeatures)},"./src/packages/issue/issue-view/src/common/state/selectors/reactions-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return c}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),r=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js");const o=e=>Object(n.createSelector)(i.a,t=>t&&e?`${t}:comment/${e}`:null),c=Object(n.createSelector)(r.g,a.j,(e,t)=>!(!e.canAddComments||!t))},"./src/packages/issue/issue-view/src/common/state/selectors/time-tracking-selector.js":function(e,t,s){"use strict";s.d(t,"h",(function(){return m})),s.d(t,"i",(function(){return b})),s.d(t,"d",(function(){return g})),s.d(t,"b",(function(){return h})),s.d(t,"l",(function(){return j})),s.d(t,"c",(function(){return v})),s.d(t,"j",(function(){return w})),s.d(t,"f",(function(){return S})),s.d(t,"e",(function(){return I})),s.d(t,"m",(function(){return P})),s.d(t,"a",(function(){return _})),s.d(t,"g",(function(){return D})),s.d(t,"k",(function(){return A})),s.d(t,"n",(function(){return M}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./node_modules/lodash/isNumber.js"),i=s.n(a),r=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/hierarchy-level-selector.js"),o=s("./src/packages/issue/issue-view/src/selectors/children-issues-selector.js"),c=s("./src/packages/issue/issue-view/src/selectors/subtasks-selector.js"),l=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),u=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),d=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),p=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js");const m=Object(n.createSelector)(d.e,e=>e.jiraSettings.timeTrackingConfiguration),b=Object(u.o)("timetracking"),f=Object(n.createSelector)(m,e=>e.isTimeTrackingEnabled),g=Object(n.createSelector)(f,u.a,(e,t)=>e&&t.includes("timetracking")),h=Object(n.createSelector)(g,p.g,l.u,(e,t,s)=>e&&t.canLogWork&&!s),y=Object(n.createSelector)(d.J,e=>e.worklog),O=Object(n.createSelector)(y,e=>e.modal),j=Object(n.createSelector)(y,e=>e.loadingStage),E=Object(n.createSelector)(Object(u.o)("subtasks"),Object(u.o)("children-issues"),r.d,(e,t,s)=>(null==t?void 0:t.length)&&0===s?t:e),v=Object(n.createSelector)(o.a,c.b,r.d,(e,t,s)=>t||Boolean(null==e?void 0:e.length)&&0===s),k=(e,t)=>i()(e)||i()(t)?(e||0)+(t||0):e,w=Object(n.createSelector)(b,E,(e,t)=>s=>t&&0!==t.length&&s?t.map(e=>((e,t)=>{var s;return Array.isArray(e)?null===(s=e.find(e=>e.key===t))||void 0===s?void 0:s.value:e&&e[t]})(e.fields,"timetracking")).filter(Boolean).reduce((e,t)=>({originalEstimateSeconds:k(e.originalEstimateSeconds,t.originalEstimateSeconds),timeSpentSeconds:k(e.timeSpentSeconds,t.timeSpentSeconds),remainingEstimateSeconds:k(e.remainingEstimateSeconds,t.remainingEstimateSeconds)}),e):e),S=Object(n.createSelector)(O,e=>e.openModal),I=Object(n.createSelector)(O,e=>e.isSaving),C=Object(n.createSelector)(O,e=>e.activeWorklogId),T=Object(n.createSelector)(d.e,e=>e.worklog),P=Object(n.createSelector)(T,e=>e.worklogs),_=Object(n.createSelector)(C,P,(e,t)=>e&&t[e]||null),x=Object(n.createSelector)(T,e=>e.sortedWorklogIds),D=Object(n.createSelector)(P,x,(e,t)=>t.map(t=>e[t])),A=Object(n.createSelector)(T,e=>e.totalWorklogs),M=Object(n.createSelector)(T,e=>e.worklogsStartIndex||0)},"./src/packages/issue/issue-view/src/common/state/selectors/timestamp-display-setting-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");const i=Object(n.createSelector)(a.J,e=>e.timestampDisplaySetting)},"./src/packages/issue/issue-view/src/common/styles/issue-value.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return i})),s.d(t,"e",(function(){return r})),s.d(t,"a",(function(){return o})),s.d(t,"f",(function(){return c})),s.d(t,"d",(function(){return u})),s.d(t,"c",(function(){return d}));var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./node_modules/@atlaskit/theme/dist/es2019/index.js");const i=n.default.span(["color:",";"],a.a.N200),r=Object(n.css)(["white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"]),o=n.default.div(["",";"],r),c=e=>Object(n.css)(["","::-webkit-scrollbar{width:8px;background:transparent;}","::-webkit-scrollbar-thumb{background:#c1c1c1;border-radius:10px;}"],e,e),l=Object(n.css)(["font-size:1em;line-height:1.714;font-weight:normal;margin-top:1.143;margin-bottom:0;letter-spacing:-0.005em;overflow-y:auto;overflow-x:hidden;width:100%;height:auto;white-space:pre-line;"]),u=n.default.div(["",";"],l),d=n.default.div(["",";max-height:","ex;",";"],l,e=>2.5*(e.maxRows?e.maxRows:2),c("&"))},"./src/packages/issue/issue-view/src/common/util/date-time-formatter/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return c})),s.d(t,"b",(function(){return l}));var n=s("./node_modules/moment-timezone/index.js"),a=s.n(n);function i(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function r(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?i(Object(s),!0).forEach((function(t){o(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):i(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const c=(e,t,s)=>{if(!t)return null;const n={day:"2-digit",month:"short",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0},i=s?r(r({},n),{},{timeZone:s}):r({},n),o=a()(t).valueOf();return e.formatDate(o,i)},l=(e,t,s,n)=>{const i=a.a.tz(e,n);return i.isValid()&&e?{dateValue:i.format("YYYY-MM-DD"),timeValue:i.format("HH:mm"),zoneValue:i.format("ZZ")}:{dateValue:t,timeValue:s,zoneValue:a()().tz(n).format("ZZ")}}},"./src/packages/issue/issue-view/src/common/util/dom-util/get-inner-height/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=e=>{if(!e)return;const t=getComputedStyle(e),s=(parseFloat(t.paddingTop)||0)+(parseFloat(t.paddingBottom)||0);return e.clientHeight-s}},"./src/packages/issue/issue-view/src/common/util/dom-util/get-scroll-parent/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=(e,t=!0)=>{if(!e||!e.parentElement)return null;let s=getComputedStyle(e);const n=t&&"absolute"===s.position,a=/(auto|scroll)/;if("fixed"===s.position)return document.body;for(let i=e.parentElement;i;i=i&&i.parentElement){if(s=getComputedStyle(i),!(n&&"static"===s.position)&&a.test(s.overflow+s.overflowY+s.overflowX))return i}return null}},"./src/packages/issue/issue-view/src/common/util/entry/get-project-key.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s("./src/packages/platform/utils/types/src/general.js");const a=e=>Object(n.q)(e.split("-")[0])},"./src/packages/issue/issue-view/src/common/util/errors/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),a=s("./src/packages/platform/observability/errors-handling/src/utils/fire-error-analytics.js"),i=s("./src/packages/platform/utils/fetch/src/utils/errors.js");const r=(e,t,s,r)=>{s instanceof TypeError&&Object(i.c)(s)?((e,t,s)=>{Object(a.a)({error:s,attributes:{message:t},meta:{id:e,packageName:"jiraIssueView"}})})(e,t,s):r&&n.i.safeError(e,t,r)}},"./src/packages/issue/issue-view/src/common/util/events/index.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return n})),s.d(t,"b",(function(){return a})),s.d(t,"d",(function(){return r})),s.d(t,"e",(function(){return o})),s.d(t,"a",(function(){return c}));const n=e=>e&&e instanceof KeyboardEvent&&27===e.keyCode,a=e=>13===e.keyCode,i=e=>0===e.button,r=e=>i(e)&&!(e.metaKey||e.ctrlKey),o=e=>1===e.button,c=e=>i(e)&&(e.metaKey||e.ctrlKey)},"./src/packages/issue/issue-view/src/common/util/flow-with-safe-component/index.js":function(e,t,s){"use strict";var n=s("./node_modules/lodash/flow.js"),a=s.n(n),i=s("./src/packages/issue/issue-view/src/common/util/safe-component/index.js");t.a=(e=[],t)=>s=>a()(...e,Object(i.a)({FallbackComponent:t}))(s)},"./src/packages/issue/issue-view/src/common/util/safe-component/index.js":function(t,s,n){"use strict";n.d(s,"a",(function(){return b}));var a=n("./node_modules/react/index.js"),i=n.n(a),r=n("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),o=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),c=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/node-env.js");class l{constructor(t){this.logLocation=void 0,this.handleError=(e,t)=>o.i.safeError(this.logLocation,"An uncaught error has occurred in a React component",new r.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:{message:e.message,stack:e.stack,componentStack:t}})),this.callSafely=(t,s,...n)=>{try{return s&&s.apply(t,n)}catch(e){this.handleError(e)}return null},this.logLocation=`issue.error-boundary.${t}`}}const u=e=>!!e.prototype&&e.prototype.isReactComponent,d=(e,t)=>{const s=e,n=Object.getOwnPropertyDescriptor(s,"prototype");return Boolean(n&&n.value&&n.value[t])},p=["componentWillReceiveProps","shouldComponentUpdate","componentWillUpdate","getSnapshotBeforeUpdate","componentDidUpdate"],m=(e,t,s)=>{var n,r;const b=s||(e=>e.displayName||e.name||"UnsafeComponent")(e),f=new l(s?`Fallback(${b})`:b);t&&((e,t)=>{const s=u(e)?e:e().type;if(!s)return;const n=[];if(p.forEach(e=>{d(s,e)&&n.push(e)}),n.length){const e="\t\t",s=`The fallback component provided for '${t}' defines the following unsupported lifecycles methods:\n${e}${n.join(`\n${e}`)}`;Object(c.a)()?console.warn(s):o.i.safeWarn(`issue.error-boundary.${t}`,s)}})(t,b);let g=e;if(u(e)&&d(e,"componentWillUnmount")){class t extends e{componentWillUnmount(){f.callSafely(this,super.componentWillUnmount)}}t.displayName=b,g=t}const h={hadError:!1,isInternalRender:!1};return r=n=class extends a.Component{constructor(...e){super(...e),this.state=h}componentDidCatch(e,t){f.handleError(e,t.componentStack),this.setState({hadError:!0,isInternalRender:!0})}render(){if(this.state.hadError){if(!t)return null;const e=m(t,null,b);return(i.a.createElement(e,this.props))}return(i.a.createElement(g,this.props))}},n.displayName=`${(()=>s?"Fallback":t?"SafeWithFallback":"Safe")()}(${b})`,n.getDerivedStateFromProps=(e,t)=>t.hadError&&!t.isInternalRender?h:{isInternalRender:!1},r},b=(e={})=>t=>m(t,e.FallbackComponent)},"./src/packages/issue/issue-view/src/common/util/scroll/index.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return r})),s.d(t,"a",(function(){return o}));var n=s("./node_modules/scroll-into-view-if-needed/es/index.js");function a(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const r=(e,t=Object.freeze({}))=>{e&&Object(n.default)(e,function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?a(Object(s),!0).forEach((function(t){i(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({duration:300},t))},o=e=>{e&&r(e,{centerIfNeeded:!0})}},"./src/packages/issue/issue-view/src/common/util/time-string/is-time-string-valid/index.js":function(e,t,s){"use strict";var n=s("./node_modules/lodash/isFinite.js"),a=s.n(n),i=s("./src/packages/issue/issue-view/src/common/util/time-string/time-string-to-seconds/index.js");t.a=e=>{const t=Object(i.a)(1,1)(e);return null!==t&&a()(t)}},"./src/packages/issue/issue-view/src/common/util/time-string/seconds-to-time-string/index.js":function(e,t,s){"use strict";t.a=(e,t)=>{const s=[{suffix:"w",seconds:e*t*60*60},{suffix:"d",seconds:60*t*60},{suffix:"h",seconds:3600},{suffix:"m",seconds:60}];return e=>{const t={secondsRemaining:e,timeString:""};return s.reduce((e,t)=>{if(t.seconds<=0)return e;const s=Math.floor(e.secondsRemaining/t.seconds);return{secondsRemaining:s>=1?e.secondsRemaining%t.seconds:e.secondsRemaining,timeString:s>=1?`${e.timeString} ${s}${t.suffix}`:e.timeString}},t).timeString.trim()||"0m"}}},"./src/packages/issue/issue-view/src/common/util/time-string/time-string-to-seconds/index.js":function(e,t,s){"use strict";const n=/^(\d+(?:\.\d+)?)([wdhm])$/,a=e=>{const t=n.exec(e);return t?{quantity:parseFloat(t[1]),unit:t[2]}:null};t.a=(e,t)=>{const s=[{unit:"w",seconds:e*t*60*60},{unit:"d",seconds:60*t*60},{unit:"h",seconds:3600},{unit:"m",seconds:60}];return e=>{const t=e.split(" ").map(a);let n=0,i=0;for(let a=0;a<s.length&&n!==t.length;a+=1){const e=s[a],r=t[n];if(!r)return null;r.unit===e.unit&&(i+=r.quantity*e.seconds,n+=1)}return n<t.length?null:Math.floor(i)}}},"./src/packages/issue/issue-view/src/common/util/types/type-check/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=e=>e.length>0&&!Number.isNaN(Number(e))},"./src/packages/issue/issue-view/src/configurations.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return a})),s.d(t,"m",(function(){return i})),s.d(t,"e",(function(){return r})),s.d(t,"d",(function(){return o})),s.d(t,"h",(function(){return c})),s.d(t,"f",(function(){return l})),s.d(t,"c",(function(){return u})),s.d(t,"l",(function(){return d})),s.d(t,"k",(function(){return p})),s.d(t,"n",(function(){return m})),s.d(t,"b",(function(){return b})),s.d(t,"i",(function(){return f})),s.d(t,"j",(function(){return g})),s.d(t,"g",(function(){return h}));var n=s("./src/packages/platform/utils/constants/src/application-keys.js");const a="com.atlassian.jpo:jpo-custom-field-parent",i={epic:"com.pyxis.greenhopper.jira:gh-epic-link",sprint:"com.pyxis.greenhopper.jira:gh-sprint",storyPointsField:"com.atlassian.jira.plugin.system.customfieldtypes:storypoint","com.atlassian.teams:rm-teams-custom-field-team":"com.atlassian.teams:rm-teams-custom-field-team","com.atlassian.jpo:jpo-custom-field-parent":"com.atlassian.jpo:jpo-custom-field-parent","com.atlassian.jpo:jpo-custom-field-baseline-start":"com.atlassian.jpo:jpo-custom-field-baseline-start","com.atlassian.jpo:jpo-custom-field-baseline-end":"com.atlassian.jpo:jpo-custom-field-baseline-end","com.pyxis.greenhopper.jira:jsw-issue-color":"com.pyxis.greenhopper.jira:jsw-issue-color","com.pyxis.greenhopper.jira:gh-epic-color":"com.pyxis.greenhopper.jira:gh-epic-color"},r=["number","string","datetime","option2","array"],o=["com.atlassian.jira.plugin.system.customfieldtypes:labels","com.atlassian.jira.plugin.system.customfieldtypes:textfield","com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker","com.atlassian.jira.plugin.system.customfieldtypes:url","com.atlassian.jira.plugin.system.customfieldtypes:float","com.pyxis.greenhopper.jira:jsw-story-points","com.atlassian.jira.plugin.system.customfieldtypes:select","com.atlassian.jira.plugin.system.customfieldtypes:multiselect","com.atlassian.jira.plugin.system.customfieldtypes:version","com.atlassian.jira.plugin.system.customfieldtypes:textarea","com.atlassian.jira.plugin.system.customfieldtypes:multiversion","com.atlassian.jira.plugin.system.customfieldtypes:datepicker","com.atlassian.jira.plugin.system.customfieldtypes:grouppicker","com.atlassian.jira.plugin.system.customfieldtypes:multigrouppicker","com.atlassian.jira.plugin.system.customfieldtypes:userpicker","com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes","com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons","com.atlassian.jira.plugin.system.customfieldtypes:datetime","com.atlassian.servicedesk.assets-plugin:assetfield","com.atlassian.jira.plugins.service-entity:service-entity-field-cftype","com.atlassian.jira.plugin.system.customfieldtypes:people","com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect","com.atlassian.jira.plugin.system.customfieldtypes:atlassian-team","com.atlassian.jira.plugin.system.customfieldtypes:readonlyfield",...r,"com.atlassian.servicedesk:sd-request-participants","com.atlassian.servicedesk:sd-customer-organizations","com.atlassian.servicedesk.servicedesk-lingo-integration-plugin:sd-request-language","com.atlassian.servicedesk:sd-request-feedback","com.atlassian.servicedesk.approvals-plugin:sd-approvals","com.atlassian.jira.plugin.system.customfieldtypes:servicedesk-approvers-list","com.atlassian.servicedesk:vp-origin","com.atlassian.jira.plugins.cmdb:cmdb-object-cftype"],c={software:"https://confluence.atlassian.com/jirasoftwarecloud/configure-field-layout-in-the-issue-view-961798059.html",business:"https://confluence.atlassian.com/jiracorecloud/configure-field-layout-in-the-issue-view-961798123.html",service_desk:"https://support.atlassian.com/jira-service-desk-cloud/docs/what-are-the-different-sections-in-the-issue-view/"},l=()=>({issueActions:[]}),u=()=>({applicationKey:n.a.CORE_ISSUE,issueActions:[],ecosystemEnabled:!0}),d=()=>({applicationKey:n.a.SOFTWARE_ISSUE,issueActions:["flagActions"],ecosystemEnabled:!0}),p=()=>({applicationKey:n.a.SIMPLE_SOFTWARE_BOARD,issueActions:["flagActions","cardCoverActions"],ecosystemEnabled:!0}),m=()=>({applicationKey:n.a.STANDARD_ROADMAP_ISSUE,issueActions:["flagActions"],ecosystemEnabled:!0}),b=()=>({applicationKey:n.a.BITBUCKET_ISSUE,issueActions:[]}),f=()=>({applicationKey:n.a.MOBILE_ISSUE,issueActions:[]}),g=()=>({applicationKey:n.a.SERVICE_DESK,issueActions:[],ecosystemEnabled:!0}),h=e=>{if(e)switch(e.projectType){case"software":return e.isSimplified?p():d();case"business":return u();case"service_desk":return g();default:return d()}return d()}},"./src/packages/issue/issue-view/src/drafts/draft-actions.js":function(e,t,s){"use strict";s.d(t,"h",(function(){return n})),s.d(t,"i",(function(){return a})),s.d(t,"g",(function(){return i})),s.d(t,"e",(function(){return r})),s.d(t,"f",(function(){return o})),s.d(t,"d",(function(){return c})),s.d(t,"b",(function(){return l})),s.d(t,"c",(function(){return u})),s.d(t,"a",(function(){return d}));const n=(e,t,s)=>({type:"SAVE_DRAFT_REQUEST",payload:{fieldId:e,value:t,serverValue:s}}),a=(e,t)=>({type:"SAVE_DRAFT_SUCCESS",payload:{draftKey:e,value:t}}),i=e=>({type:"SAVE_DRAFT_FAILURE",payload:e}),r=(e,t,s,n)=>({type:"LOAD_DRAFT_REQUEST",payload:{fieldId:e,draftKey:t,draftHandler:s,serverValue:n}}),o=(e,t)=>({type:"LOAD_DRAFT_SUCCESS",payload:{fieldId:e,value:t}}),c=(e,t)=>({type:"LOAD_DRAFT_FAILURE",payload:{fieldId:e,error:t}}),l=({fieldId:e,draftKey:t})=>({type:"DELETE_DRAFT_REQUEST",payload:{fieldId:e,draftKey:t}}),u=e=>({type:"DELETE_DRAFT_SUCCESS",payload:{fieldId:e}}),d=(e,t)=>({type:"DELETE_DRAFT_FAILURE",payload:{fieldId:e,error:t}})},"./src/packages/issue/issue-view/src/drafts/draft-utils.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return n})),s.d(t,"d",(function(){return a})),s.d(t,"b",(function(){return i})),s.d(t,"a",(function(){return r}));const n=(e,t,s)=>`${String(e)}.${t}.${s}`,a=e=>e.split(".")[2],i=e=>`${e}-previous-hash`,r=e=>`comment_${e}`},"./src/packages/issue/issue-view/src/ecosystem/broadcast-connect-event.js":function(e,t,s){"use strict";var n=s("./src/packages/issue/issue-view/src/ecosystem/ecosystem-connect-host.js");t.a=(e,t,s)=>{Object(n.b)(n=>{n&&n.broadcastEvent(e,t,s)})}},"./src/packages/issue/issue-view/src/ecosystem/ecosystem-connect-host.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return a}));var n=s("./src/packages/common-legacy-do-not-add-anything-new/src/bridge/index.js");const a=e=>{Object(n.a)({name:"ac/create"}).then(()=>e(window.connectHost))};t.a=()=>window.connectHost},"./src/packages/issue/issue-view/src/ecosystem/ecosystem-extensions-selector.js":function(e,t,s){"use strict";s.d(t,"h",(function(){return h})),s.d(t,"p",(function(){return y})),s.d(t,"n",(function(){return O})),s.d(t,"c",(function(){return j})),s.d(t,"o",(function(){return E})),s.d(t,"m",(function(){return C})),s.d(t,"i",(function(){return T})),s.d(t,"l",(function(){return P})),s.d(t,"b",(function(){return _})),s.d(t,"g",(function(){return x})),s.d(t,"k",(function(){return D})),s.d(t,"f",(function(){return M})),s.d(t,"d",(function(){return L})),s.d(t,"r",(function(){return R})),s.d(t,"q",(function(){return N})),s.d(t,"j",(function(){return U})),s.d(t,"a",(function(){return F})),s.d(t,"e",(function(){return V}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./node_modules/lodash/flatten.js"),i=s.n(a),r=s("./src/packages/forge/forge-ui-analytics/src/services/issue-panel/index.js"),o=s("./src/packages/forge/forge-ui/src/utils/connect/index.js"),c=s("./src/packages/issue/issue-view/src/common/ecosystem/module-key-helper.js"),l=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),u=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),d=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js"),p=s("./src/packages/issue/issue-view/src/ecosystem/entities-selector.js"),m=s("./src/packages/issue/issue-view/src/ecosystem/forge/forge-extensions-selector.js");function b(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function f(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?b(Object(s),!0).forEach((function(t){g(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):b(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function g(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const h=Object(n.createSelector)(p.a,e=>e.backgroundScripts||[]),y=Object(n.createSelector)(u.e,e=>e.issueContentPanels||[]),O=Object(n.createSelector)(u.e,e=>!!e.issueContentPanels&&e.issueContentPanels.includes("issue.content.panel.customised.flag")),j=Object(n.createSelector)(d.b,e=>e),E=Object(n.createSelector)(u.e,e=>e.ecosystem&&!!e.ecosystem.ecosystemOnDate&&Date.parse(e.createdDate)>e.ecosystem.ecosystemOnDate),v=e=>Object.keys(e||{}).map(t=>Object.values(e?e[t]:{})),k=Object(n.createSelector)(p.a,e=>[].concat(...v(e.glances))),w=Object(n.createSelector)(p.a,e=>[].concat(...v(e.contentPanels))),S=Object(n.createSelector)(p.a,e=>[].concat(...v(e.activityPanels))),I=e=>Object(n.createSelector)(l.s,e,(e,t)=>e&&t||[]),C=I(Object(n.createSelector)(k,e=>e.map(e=>({appKey:e.appKey,moduleKey:e.moduleKey,name:e.name,icon:e.icon&&e.icon.url&&{url:e.icon.url},label:e.label,status:e.status,type:e.type,glanceType:"CONNECT_ENTITY_TYPE"})))),T=Object(n.createSelector)([m.d,C],(e,t)=>[...e,...t]),P=(e,t)=>Object(n.createSelector)(p.a,s=>s&&s.glances&&s.glances[e]&&s.glances[e][t]),_=I(Object(n.createSelector)(w,e=>e.map(e=>({appKey:e.appKey,moduleKey:e.moduleKey,name:e.name,tooltip:e.tooltip,iconUrl:e.icon&&e.icon.url,type:e.type,showByDefault:e.showByDefault})))),x=Object(n.createSelector)([m.j,_],(e,t)=>[...e,...t]),D=Object(n.createSelector)([m.j,_],(e,t)=>[...e,...t]),A=(e,t)=>{if("FORGE_ENTITY_TYPE"===e.type){const s=e.name.toLowerCase();if("FORGE_ENTITY_TYPE"===t.type){const e=t.name.toLowerCase();return s<e?-1/0:s>e?1/0:0}return 1/0}return 1/0},M=I(Object(n.createSelector)(y,x,O,E,(e,t,s,n)=>{const a=t.map(t=>{if("FORGE_ENTITY_TYPE"===t.type){const s=t;if(!s.iconUrl)return s;const n=`${s.appKey}/${s.moduleKey}-`,a=e.filter(e=>Object(o.b)(e,n)).map(e=>{const t=Object(c.a)(e);return null==t&&Object(r.b)(),t&&f(f({},s),{},{dateAdded:t.added,panelInstanceId:t.id})}).filter(Boolean);return a.length>0&&a}if(!s&&!n)return t;return(e.includes(`${t.appKey}_${t.moduleKey}`)||e.includes(`${t.appKey}_${Object(c.b)(t.moduleKey,10)}`)||t.showByDefault)&&t});return i()((e=>e.map(e=>[].concat(e)).sort((e,t)=>((e,t)=>{if("FORGE_ENTITY_TYPE"===e.type){const s=e.dateAdded||1;if("FORGE_ENTITY_TYPE"===t.type){return s-(t.dateAdded||1)}return s}return 1/0})(e[0],t[0])))(a.filter(Boolean)))})),L=(e,t)=>Object(n.createSelector)(p.a,s=>s&&s.contentPanels&&s.contentPanels[e]&&s.contentPanels[e][t]),R=(e,t)=>Object(n.createSelector)(p.a,s=>s&&s.selectedContentPanel&&(s.selectedContentPanel===`${e}_${t}`||s.selectedContentPanel===`${e}_${Object(c.b)(t,10)}`)),N=I(Object(n.createSelector)(p.a,e=>e.operations||[])),U=I(Object(n.createSelector)([m.f,N],(e,t)=>[...e,...t])),F=Object(n.createSelector)(l.s,S,(e,t)=>e?t.map(e=>({name:e.name,appKey:e.appKey,moduleKey:e.moduleKey,options:e.options,type:"CONNECT_ENTITY_TYPE"})):[]),V=Object(n.createSelector)([m.g,F],(e,t)=>[...e,...t].sort(A))},"./src/packages/issue/issue-view/src/ecosystem/entities-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return r})),s.d(t,"b",(function(){return o}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),i=s("./src/packages/issue/issue-view/src/reducers/entities/forge-reducer.js");const r=Object(n.createSelector)(a.e,e=>e.ecosystem||{}),o=Object(n.createSelector)(a.e,e=>e.forge||i.b)},"./src/packages/issue/issue-view/src/ecosystem/forge/forge-extensions-selector.js":function(e,t,s){"use strict";s.d(t,"d",(function(){return j})),s.d(t,"f",(function(){return E})),s.d(t,"j",(function(){return v})),s.d(t,"i",(function(){return k})),s.d(t,"l",(function(){return S})),s.d(t,"a",(function(){return I})),s.d(t,"c",(function(){return T})),s.d(t,"m",(function(){return P})),s.d(t,"b",(function(){return _})),s.d(t,"g",(function(){return x})),s.d(t,"h",(function(){return D})),s.d(t,"k",(function(){return A})),s.d(t,"e",(function(){return M}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/forge/forge-ui/src/utils/conditions/index.js"),i=s("./src/packages/forge/forge-ui/src/utils/connect/index.js"),r=s("./src/packages/issue/issue-view/src/common/ecosystem/module-key-helper.js"),o=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),c=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),l=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),u=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js"),d=s("./src/packages/issue/issue-view/src/feature-flags.js"),p=s("./src/packages/issue/issue-view/src/selectors/breadcrumbs-selector.js"),m=s("./src/packages/issue/issue-view/src/ecosystem/entities-selector.js");function b(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function f(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?b(Object(s),!0).forEach((function(t){g(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):b(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function g(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const h=(e,t)=>Object(d.isForgeUiConditionsEnabled)()?e.filter(e=>Object(a.a)(e,t)):e,y=(e,t)=>e.name===t.name?0:e.name>t.name?1:-1,O=Object(n.createSelector)(u.g,o.A,o.B,p.f,l.D,o.I,l.G,(e,t,s,n,a,i,r)=>f(f({},e),{},{issueId:t||null,issueKey:s,issueType:n,projectId:a,projectKey:i,projectType:r||null})),j=Object(n.createSelector)(o.s,m.b,O,(e,t,s)=>e&&Array.isArray(t.glances)?h(t.glances,s).map(e=>{const{id:t,properties:{title:s,label:n,status:a}}=e;return{title:s,label:n,status:a,extension:e,glanceType:"FORGE_ENTITY_TYPE",moduleKey:t,appKey:t}}):[]),E=Object(n.createSelector)(o.s,m.b,O,(e,t,s)=>e&&Array.isArray(t.actions)?h(t.actions,s).map(e=>{const{id:t,properties:{title:s}}=e;return{id:t,title:s,extension:e,type:"FORGE_ENTITY_TYPE"}}):[]),v=Object(n.createSelector)(o.s,m.b,O,(e,t,s)=>e&&Array.isArray(t.panels)?h(t.panels,s).filter(e=>null!=e.properties.icon).map(e=>{const{id:t,properties:{title:s,icon:n,allowMultiple:a}}=e,{appKey:r,moduleKey:o}=Object(i.d)(t);return{name:s,tooltip:s,iconUrl:n,extension:e,allowMultiple:!!a,showByDefault:!1,type:"FORGE_ENTITY_TYPE",moduleKey:o,appKey:r}}).sort(y):[]),k=e=>Object(n.createSelector)(m.a,t=>t&&t.selectedContentPanel===e),w=Object(n.createSelector)(o.s,m.b,O,(e,t,s)=>e&&Array.isArray(t.customFields)?h(t.customFields,s):[]),S=Object(n.createSelector)(w,e=>e.length>0),I=Object(n.createSelector)(o.s,m.b,(e,t)=>e&&t.activeAction||null),C=e=>Object(n.createSelector)(Object(c.q)(e),e=>e?e.schema.custom:""),T=e=>Object(n.createSelector)(w,C(e),(e,t)=>e.find(e=>e.id===t)||null),P=e=>Object(n.createSelector)(o.s,m.b,C(e),O,(e,t,s,n)=>{if(!Object(d.isForgeUiConditionsEnabled)()||!e||!Array.isArray(t.customFields))return!1;const i=t.customFields.find(e=>e.id===s);return null!=i&&!Object(a.a)(i,n)}),_=Object(n.createSelector)(o.B,o.A,p.f,o.I,l.D,(e,t,s,n,a)=>({issueKey:e,issueId:t,issueType:s,projectKey:n,projectId:a})),x=Object(n.createSelector)(o.s,m.b,O,(e,t,s)=>e&&Array.isArray(t.actions)?h(t.activities,s).map(e=>{const{id:t,properties:{title:s}}=e,{appKey:n,moduleKey:a}=Object(i.d)(t);return{name:s,extension:e,type:"FORGE_ENTITY_TYPE",moduleKey:a,appKey:n}}):[]),D=e=>Object(n.createSelector)(m.b,t=>({isNewToIssue:t.panelsKeys.newPanels.includes(e)})),A=e=>Object(n.createSelector)(v,t=>{const{extensionId:s}=Object(r.a)(e)||{};return t.find(e=>s===e.extension.id)}),M=e=>Object(n.createSelector)(m.b,t=>t.panelsKeys.collapsedPanels.includes(e))},"./src/packages/issue/issue-view/src/ecosystem/forge/get-forge-custom-field.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return o})),s.d(t,"a",(function(){return c}));var n=s("./node_modules/lodash/has.js"),a=s.n(n),i=s("./node_modules/lodash/isNil.js"),r=s.n(i);const o=e=>e&&a()(e,"schema.custom")&&!r()(e.schema.custom)&&e.schema.custom.includes("ari:cloud:ecosystem::extension"),c=e=>o(e)?{id:e.key,type:"forgeCustomField"}:null},"./src/packages/issue/issue-view/src/epics/comment-fetch-epic.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return P})),s.d(t,"a",(function(){return _})),s.d(t,"e",(function(){return D})),s.d(t,"d",(function(){return A})),s.d(t,"c",(function(){return M}));var n=s("./node_modules/rxjs/Rx.js"),a=s("./src/packages/platform/utils/constants/src/project-types.js"),i=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),r=s("./src/packages/platform/ui/flags/src/index.js"),o=s("./src/packages/issue/issue-actions/activity-feed/src/messages.js"),c=s("./src/packages/issue/issue-scroll/src/services/types.js"),l=s("./src/packages/platform/utils/permalinks/src/index.js"),u=s("./src/packages/platform/utils/permalinks/src/constants.js"),d=s("./src/packages/issue/issue-view/src/actions/activity-feed-actions.js"),p=s("./src/packages/issue/issue-view/src/actions/comment-actions.js"),m=s("./src/packages/issue/issue-view/src/common/messages/flags.js"),b=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/graphql-tags.js"),f=s("./src/packages/platform/utils/fetch/src/utils/as-json-stream.js"),g=s("./src/packages/platform/services/issue/src/source/issue-express/graphql-util.js"),h=s("./src/packages/issue/issue-view/src/browser-metrics/browser-metrics-constants.js"),y=s("./src/packages/issue/issue-view/src/common/service/issue/comment-transformer.js"),O=s("./src/packages/issue/issue-view/src/common/service/issue/gira/comments/index.js"),j=s("./src/packages/issue/issue-view/src/common/service/issue/issue-urls.js");const E=(e,t,s,n)=>`\n query issueViewInteractiveQuery($issueKey: String!) {\n    viewIssue(issueKey: $issueKey) {\n        comments (first: ${t}, maxResults: ${e}, orderBy: "${s}", commentId: ${n}) {\n            nodes {\n                id\n                author {\n                    accountId\n                    displayName\n                    avatarUrl\n                }\n                updateAuthor {\n                    accountId\n                    displayName\n                    avatarUrl\n                }\n                visibility {\n                    type\n                    value\n                }\n                created\n                updated\n                renderedBody\n                jsdPublic\n                bodyAdf\n            }\n            totalCount\n            startIndex\n        }\n    }\n  }\n`,v=(e,t,s,n)=>b.a`query {
        issueComments(issueIdOrKey: "${e}", first: ${t}, offset: ${s}, orderBy: "${n}") {
            nodes {
                id
                author {
                  accountId
                  displayName
                  avatarUrls {
                    key
                    value
                  }
                  timeZone
                }
                updateAuthor {
                  accountId
                  displayName
                  avatarUrls {
                    key
                    value
                  }
                  timeZone
                }
                visibility {
                  type
                  value
                }
                created
                updated
                renderedBody
                jsdPublic
                bodyAdf
            }
            totalCount
        }
    }`,k=(e,t,s,n,a,i,r)=>Object(f.a)(Object(j.e)(e),((e,t,s,n,a,i)=>({method:"POST",body:JSON.stringify({query:v(e,t,s,n)}),perf:i,headersProcessor:a&&a(h.a.key)}))(t,s,n,"-created")).map(y.e).map(e=>Object(y.b)(e,a,i,r)),w=(e,t,s)=>Object(f.a)(`${e}/rest/gira/1/`,((e,t,s,n,a,i)=>({method:"POST",body:JSON.stringify({query:E(t,s,n,a),variables:i})}))(0,5,0,"-created",s,{issueKey:t})).map(g.a).map(e=>Object(g.b)("issue.comment.fetch.epic.graphql",e)).map(e=>Object(O.b)(e.viewIssue));var S=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),I=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),C=s("./src/packages/issue/issue-view/src/common/util/errors/index.js"),T=s("./src/packages/issue/issue-view/src/selectors/comment-selector.js");const P=(e,t,s,n,a)=>{let i=0;s>0&&(i=s+a.filter(e=>e.completedDate.epochMillis>n[n.length-1].timestamp).length);const r=e+a.length-(n.length+i);return{numOlderActivityItemsToLoad:r>10?10:r,numNewerActivityItemsToLoad:i>10?10:i}},_=(e,t,s)=>{let n=0;const a=e-(t+s);return s>0&&(n=s>10?10:s),{numOlderCommentsToLoad:a>10?10:a,numNewerCommentsToLoad:n}},x="Failed to fetch comments",D=(e,t)=>e.ofType("FETCH_LATEST_COMMENTS_REQUEST").switchMap(({type:e})=>{const s=t.getState(),a=Object(S.g)(s),r=Object(S.B)(s),o=Object(T.I)(s);return(o>10?10:o)>0?k(a,r,5,0,0,0,e).map(e=>Object(p.p)(e)).catch(e=>(Object(C.a)("issue.comment.fetch.epic",x,e),i.i.safeWarn("issue.comment.fetch.epic",x),n.Observable.of(Object(p.n)()))):n.Observable.empty()}),A=(e,t)=>e.ofType("FETCH_OLDER_COMMENTS_REQUEST","FETCH_NEWER_COMMENTS_REQUEST").switchMap(({type:e})=>{const s=t.getState(),a=Object(S.g)(s),r=Object(S.B)(s),o=Object(T.J)(s),c=Object(T.F)(s),l=Object(T.I)(s),{startAt:u,maxResults:d}=((e,t,s,n)=>{let a=0,i=0;return"FETCH_OLDER_COMMENTS_REQUEST"===e?(i=t+n,{maxResults:Math.min(s-i,10),startAt:i}):(i=Math.max(0,t-10),a=t-i,{maxResults:a,startAt:i})})(e,l,o,c);return k(a,r,d,u,c,l,e).map(e=>Object(p.r)(e)).catch(e=>(Object(C.a)("issue.comment.fetch.epic",x,e),i.i.safeWarn("issue.comment.fetch.epic",x),n.Observable.of(Object(p.q)())))}),M=e=>(t,s)=>t.ofType("SCROLL_TO_ATTACHMENT_COMMENT").switchMap(()=>{const t=s.getState(),b=Object(S.g)(t),f=Object(S.B)(t),g=Object(I.G)(t)===a.e,h=e.getScrollTargetId(c.a.COMMENT),y={key:"JSDComments",type:"JSDComments",name:o.a.comments.defaultMessage},O={key:"Comments",type:"Comments",name:o.a.comments.defaultMessage};return null===h?n.Observable.of():w(b,f,h).flatMap(t=>(window.history.replaceState({},null,Object(l.c)(h,u.b.COMMENTS)),e.setScrollTarget(null),n.Observable.of(Object(p.p)(t),Object(d.a)(g?y:O),Object(p.D)(!1)))).catch(e=>{Object(C.a)("issue.comment.fetch.epic",x,e),i.i.safeWarn("issue.comment.fetch.epic",x);const{showFlag:t}=Object(r.useFlagsService)();return t({type:"error",title:[m.a.commentWorklogAttachmentFetchFailedTitle,{field:"comment"}],description:m.a.commentWorklogAttachmentFetchFailedDescription,isAutoDismiss:!0}),n.Observable.of()})})},"./src/packages/issue/issue-view/src/feature-flags.js":function(e,t,s){"use strict";s.r(t),s.d(t,"isJSDBentoEnabled",(function(){return i})),s.d(t,"isTemplatedFoundationContentEnabled",(function(){return r})),s.d(t,"isTemplatedFoundationContextEnabled",(function(){return o})),s.d(t,"isTemplatedBaseContextEnabled",(function(){return c})),s.d(t,"isContentTemplateRendererEnabled",(function(){return l})),s.d(t,"isGlanceAndTabSweetStateEnabled",(function(){return u})),s.d(t,"isInlineCloneEnabled",(function(){return d})),s.d(t,"isNgEmbeddedIssueRouteResourcesEnabled",(function(){return p})),s.d(t,"isDoorKnockPrototypeEnabled",(function(){return m})),s.d(t,"isInlineAssigneeInChildrenEnabled",(function(){return b})),s.d(t,"isReadFromSweetStateBeforeSavingEnabled",(function(){return f})),s.d(t,"isNewIssueViewAdminOptionsPhase2ReplacementEnabled",(function(){return g})),s.d(t,"isImproveSwitchViewMenuEnabled",(function(){return h})),s.d(t,"isSkip4xxReportingEnabled",(function(){return y})),s.d(t,"isPreviewRemoteIssueLinksEnabled",(function(){return O})),s.d(t,"isRemoteIssueLinksEnabled",(function(){return j})),s.d(t,"isRemoteIssueReciprocalLinkEnabled",(function(){return E})),s.d(t,"isUIUpdateForRemoteIssueLinksEnabled",(function(){return v})),s.d(t,"isForgeUiIntegrationEnabled",(function(){return k})),s.d(t,"isForgeUiCachedNullResponseFixEnabled",(function(){return w})),s.d(t,"isForgeUiConditionsEnabled",(function(){return S})),s.d(t,"isForgeUiUserListCustomFieldIntegrationEnabled",(function(){return I})),s.d(t,"isfetchMediaTokensFromGiraEnabled",(function(){return C})),s.d(t,"isRemoveMediaPromiseEnabled",(function(){return T})),s.d(t,"isGraphqlFix_BulkBuildEnabled",(function(){return P})),s.d(t,"isGraphqlFix_PreloadIssueEnabled",(function(){return _})),s.d(t,"isGraphqlFix_epicsBulk",(function(){return x})),s.d(t,"isGraphqlFix_sprintBulk",(function(){return D})),s.d(t,"isExtractedSummaryFieldEnabled",(function(){return A})),s.d(t,"isEmbeddedPageBentoBM3Enabled",(function(){return L})),s.d(t,"isStopIssueViewRemountsOnIssueChangeEnabled",(function(){return R})),s.d(t,"isAnalyticRefactorEnabled",(function(){return N})),s.d(t,"isUseTrueShallowEqualEnabled",(function(){return U})),s.d(t,"isUseUseAccountIdEnabled",(function(){return F})),s.d(t,"isSortingIssuesUnderEpicEnabled",(function(){return V})),s.d(t,"isRemoveDataProviderRefresh",(function(){return K})),s.d(t,"isUseAppPermissionsFromTenantContextEnabled",(function(){return B})),s.d(t,"isItSafeLoggingEnabledToUseAppPermissionsFromTenantContext",(function(){return W})),s.d(t,"isShortcutMenuEnabled",(function(){return H})),s.d(t,"isBentoPrefetchErrorFixEnabled",(function(){return G})),s.d(t,"isProjectsDirectoryPrettyUrlEnabled",(function(){return $})),s.d(t,"isForgeCustomFieldDataPassInExtensionContext",(function(){return q})),s.d(t,"isEpicPickerFewerMaxResultsEnabled",(function(){return z})),s.d(t,"isSmartEpicRankingEnabled",(function(){return Y})),s.d(t,"isSmartSprintRankingEnabled",(function(){return Q})),s.d(t,"isNewCardExperience",(function(){return J})),s.d(t,"isFolderUploadsEnabled",(function(){return Z})),s.d(t,"isCodeViewerEnabled",(function(){return X})),s.d(t,"isZipPreviewEnabled",(function(){return ee})),s.d(t,"getClientPollingIntervalMs",(function(){return te})),s.d(t,"getClientPollingMaxAttempts",(function(){return se})),s.d(t,"getClientPollingBackoffFactor",(function(){return ne})),s.d(t,"getClientPollingMaxIntervalMs",(function(){return ae})),s.d(t,"getClientPollingMaxGlobalFailures",(function(){return ie})),s.d(t,"isResolutionAndFlaggedFromIssueSsrEnabled",(function(){return re})),s.d(t,"isActivitySortingEnabled",(function(){return oe})),s.d(t,"isOptInBackToBentoEnabled",(function(){return ce})),s.d(t,"isVoterInSingleColumnEnabled",(function(){return le})),s.d(t,"isFullPageBentoBM2Enabled",(function(){return de})),s.d(t,"isFullPageBentoBM3Enabled",(function(){return pe})),s.d(t,"isTeamsCustomFieldTypeEnabled",(function(){return me})),s.d(t,"isIssueGlanceNewLoadStrategyEnabled",(function(){return be})),s.d(t,"isCmdbIntegrationFieldEnabled",(function(){return fe})),s.d(t,"isCmdbLegacyIntegrationEnabled",(function(){return ge})),s.d(t,"isPersistentUpgradeBannerEnabled",(function(){return he})),s.d(t,"getProductRequirementsDocDiscoveryFlag",(function(){return ye})),s.d(t,"getProductRequirementsDocDiscoveryMetricValue",(function(){return Oe})),s.d(t,"isPageAlreadyCreatedFlagEnabled",(function(){return je})),s.d(t,"isUseExtractedNumberFieldEnabled",(function(){return Ee})),s.d(t,"isIssueContextHooksConsumedPart1Enabled",(function(){return ve})),s.d(t,"isAddIssueIdToSweetStateEnabled",(function(){return ke})),s.d(t,"isApprovalFieldExtractionEnabled",(function(){return we})),s.d(t,"isPageLayoutEnabled",(function(){return Se})),s.d(t,"isFixDescriptionRerenderBugEnabled",(function(){return Ie})),s.d(t,"isAddConfluenceButtonOnChildAndLinkedIssuesEnabled",(function(){return Ce})),s.d(t,"isPolarisInsightsTabEnabled",(function(){return Te})),s.d(t,"isFieldSuggestionsRequestAnalyticsEnabled",(function(){return Pe})),s.d(t,"isRelatedIssuesPanelEnabled",(function(){return _e})),s.d(t,"isJsmCreateMajorIncidentFromIssueViewAutofillEnabled",(function(){return xe})),s.d(t,"isRefactoringDeleteCallbackPropsEnabled",(function(){return De})),s.d(t,"isCacheInPickersEnabled",(function(){return Ae})),s.d(t,"isRemovalOfDeprecatedStylesEnabled",(function(){return Me})),s.d(t,"isCommentHtmlPreviewDisabled",(function(){return Le})),s.d(t,"isGlobalLoopTransitionActionsEnabled",(function(){return Re})),s.d(t,"isIntlProviderExtracted",(function(){return Ne})),s.d(t,"isFieldConfigMergeEnabled",(function(){return Ue})),s.d(t,"isMoveServiceRegistryToTopNavEnabled",(function(){return Fe}));var n=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),a=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/jira-feature-flag-client.js");const i=()=>Object(n.c)("issue.details.fullpage.jsd",!1),r=()=>Object(n.c)("issue.details.templates.foundation-content",!1),o=()=>Object(n.c)("issue.details.templates.foundation-context",!1),c=()=>Object(n.c)("issue.details.templates.base-context",!1),l=()=>Object(n.b)("issue.details.render-content-template",!1),u=()=>Object(n.b)("issue.details.glance-context-panel-sweet-state",!1),d=()=>Object(n.b)("issue.details.clone-modal",!1),p=()=>Object(n.b)("issue.details.ng-embedded.enable-resources",!1),m=()=>Object(n.b)("issue.details.door-knock.prototype-v1",!1),b=()=>Object(n.b)("issue-details.inline-edit-assignee-in-children",!1),f=()=>Object(n.b)("issue.details.read-from-sweet-state-before-saving",!1),g=()=>Object(n.b)("issue.details.admin-options-phase-2-FF-replacement",!1),h=()=>Object(n.c)("issue.details.improve-switch-view-menu",!1),y=()=>Object(n.b)("isissue.details.skip-reporting-4xx",!1),O=()=>Object(n.b)("jsm.cross.site.issue.link.for.bento.phase2.link-preview",!1),j=()=>Object(n.b)("jsm.cross.site.issue.link.for.bento.phase1",!1),E=()=>Object(n.b)("jsm.cross.site.issue.link.for.bento.phase2.reciprocal-link",!1),v=()=>Object(n.b)("jsm.cross.site.issue.link.for.bento.phase2.ui-update",!1),k=()=>Object(n.b)("issue.details.forge-ui-integration",!1),w=()=>Object(n.b)("issue.details.forge.cached-null-response.fix",!1),S=()=>Object(n.b)("issue.details.forge-ui.conditions",!1),I=()=>Object(n.b)("issue.details.forge-user-list-custom-field-ui-integration",!1),C=()=>Object(n.b)("issue.details.media.tokens.from.gira",!1),T=()=>Object(n.b)("issue.details.remove.media.promise",!1),P=()=>Object(n.b)("issue-2031.agile.fields.provider.use.bulk.build",!1),_=()=>Object(n.b)("issue-2031.use.preloaded.issue.in.field.editability.provider",!1),x=()=>Object(n.b)("issue-2033.load.epic.issues.in.bulk",!1),D=()=>Object(n.b)("issue-2032.lookup.sprint.and.flagged.in.bulk",!1),A=()=>Object(n.b)("issue.details.extracted-field.summary",!1),M=()=>Object(n.e)("delorean.bm3","bm2",["bm2","bm3","both"]),L=()=>(()=>Object(n.b)("delorean.bm3.bento.embedded-page",!1))()&&("bm3"===M()||"both"===M()),R=()=>Object(n.b)("jsw.nextgen.stop-issue-view-remounts-on-issue-change",!1),N=()=>Object(n.b)("issue.details.analytic-refactor",!1),U=()=>Object(n.b)("fe.platform.shallow-equal",!1),F=()=>Object(n.b)("issue.details.use-use-account-id",!1),V=()=>Object(n.b)("shpl-113-sort-issue-under-epic",!1),K=()=>Object(n.b)("issue.details.remove-refresh-on-mount",!1),B=()=>Object(n.b)("issue.details.jsd.app-permissions.from.tenant-context",!1),W=()=>Object(n.b)("issue.details.bitbucket.license.state.in.tenant.context",!1),H=()=>Object(n.b)("issue.details.shortcuts-dialog",!1),G=()=>Object(n.b)("issue.details.restore.retries.on.fetch.error",!1),$=()=>Object(n.b)("endeavour.projects-directory.pretty-url",!1),q=()=>Object(n.b)("issue.details.forge-pass-custom-field-data-in-extension-context",!1),z=()=>Object(n.b)("jinx.epic-picker.max-results",!1),Y=()=>Object(n.b)("issue.details.smart-epic-ranking",!1),Q=()=>Object(n.b)("issue.details.smart-sprint-ranking",!1),J=()=>Object(n.b)("issue.details.media-cards-new-experience",!1),Z=()=>Object(n.b)("issue.details.media-picker-folder-upload",!1),X=()=>Object(n.b)("issue.details.media-viewer-code-viewer",!1),ee=()=>Object(n.b)("issue.details.media-viewer-zip-previews",!1),te=()=>Object(n.c)("issue.details.media-client-polling-intervalms",void 0),se=()=>Object(n.c)("issue.details.media-client-polling-max-attempts",void 0),ne=()=>Object(n.c)("issue.details.media-client-polling-backoff-factor",void 0),ae=()=>Object(n.c)("issue.details.media-client-polling-max-intervalms",void 0),ie=()=>Object(n.c)("issue.details.media-client-polling-max-global-failures",void 0),re=()=>Object(n.b)("issue.details.bento-8045.resolution-and-flagged-to-ssr",!1),oe=()=>Object(n.b)("issue.details.bento-6520-activity-sorting",!1),ce=()=>Object(n.b)("issue.details.opt-back-in",!1),le=()=>Object(n.b)("issue.details.show-voter-single-column",!1),ue=()=>Object(n.b)("delorean.bm3.bento.full-page",!1),de=()=>!ue()||"bm2"===M()||"both"===M(),pe=()=>ue()&&("bm3"===M()||"both"===M()),me=()=>Object(n.b)("jira.teams.enable-new-custom-field-types",!1),be=()=>Object(n.b)("issue.details.ecosystem.glance-new-load-strategy",!1),fe=()=>Object(n.b)("jsd-cmdb-integration-field",!1),ge=()=>Object(n.b)("jsd-cmdb-legacy-ui-integration",!1),he=()=>Object(a.a)().getBooleanValue("jsw.frontend.growth.persistent.upgrade",{default:!1,shouldTrackExposureEvent:!0}),ye=()=>Object(a.a)().getVariantValue("growth-experiment-product-requirements-doc-discovery",{default:"not-enrolled",oneOf:["control","not-enrolled","variation"],shouldTrackExposureEvent:!1}),Oe=()=>({"not-enrolled":0,control:1,variation:2}[ye()]),je=()=>Object(n.b)("jira.growth-experiment-prdd-already-created-flag.",!1),Ee=()=>Object(n.b)("issue.details.bento-7546-use-extracted-number-field",!1),ve=()=>Object(n.b)("issue.details.issue-context-hooks-consumed-part-1",!1),ke=()=>Object(n.b)("issue.details.add-issueid-to-sweet-state",!1),we=()=>Object(n.b)("issue.details.extract-approval-field",!1),Se=()=>Object(n.b)("endeavour.enable.page.layout",!1),Ie=()=>Object(n.b)("issue.details.fix-description-rerender-bug",!1),Ce=()=>Object(n.b)("bento-8886-add-confluence-button-child-linked-issues",!1),Te=()=>Object(n.b)("polaris.insights-tab-in-bento",!1),Pe=()=>Object(n.b)("issue.details.enable-field-suggestions-analytics",!1),_e=()=>Object(n.b)("issue.details.enable-related-issues-panel-in-bento",!1),xe=()=>Object(n.b)("jsm-create-major-incident-from-issue-view-autofill",!1),De=()=>Object(n.b)("issue.details.delete-callback-props-refactor",!1),Ae=()=>Object(n.b)("jira-frontend-cache-issue-view",!1),Me=()=>Object(n.b)("issue.details.bento-8140.bye-old-styles",!1),Le=()=>Object(n.b)("issue.details.disable-html-preview-for-comments",!1),Re=()=>Object(n.b)("issue.details.bento-7718.global-loop-transitions",!1),Ne=()=>Object(n.b)("jfp.perf.extract-intl-provider",!1),Ue=()=>Object(n.b)("issue-view-merge-field-configs-from-gira-and-graphql-calls",!1),Fe=()=>Object(n.b)("krispy-krew-move-service-registry-to-top-nav",!1)},"./src/packages/issue/issue-view/src/feedback-button/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./src/packages/platform/utils/app-base/src/index.js"),r=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/app-style/index.js"),o=s("./node_modules/react-intl/lib/index.es.js"),c=s("./src/packages/platform/controllers/unified-feedback/src/actions/types.js"),l=s("./src/packages/platform/controllers/unified-feedback/src/components/unified-feedback-api.js"),u=s("./node_modules/@atlaskit/button--current/dist/es2019/components/Button.js"),d=s("./node_modules/@atlaskit/icon/glyph/feedback.js"),p=s.n(d),m=s("./node_modules/@atlaskit/tooltip/dist/es2019/Tooltip.js");class b extends n.Component{renderButton(){return a.a.createElement(u.a,{onClick:this.props.onClick,appearance:"subtle",iconBefore:a.a.createElement(p.a,{label:this.props.iconLabel})},this.props.children)}render(){return a.a.createElement("div",null,this.props.tooltip?a.a.createElement(m.a,{content:this.props.tooltip,position:"top"},this.renderButton()):this.renderButton())}}b.displayName="BentoFeedbackTriggerButton",b.defaultProps={children:null,tooltip:null,iconLabel:"",onClick:null};class f extends n.Component{renderFeedbackButton(e){const t={collectorId:this.props.collectorId,feedbackGroupId:this.props.feedbackGroupId,feedbackType:c.a,optOut:!0};return(a.a.createElement(l.a,null,(s,{openFeedbackDialog:n})=>a.a.createElement(o.FormattedMessage,{id:"software-issue.labs-feature-button-text",defaultMessage:"Give feedback"},s=>this.props.isCompact?a.a.createElement(b,{iconLabel:String(s),tooltip:e,onClick:()=>n(t)}):a.a.createElement(b,{onClick:()=>n(t)},s))))}render(){return a.a.createElement(o.FormattedMessage,{id:"software-backlog-issue.labs-feature-button-tooltip",defaultMessage:"Give feedback"},e=>this.renderFeedbackButton(e))}}f.displayName="Feedback",f.defaultProps={isCompact:!1};var g=f;const h=e=>a.a.createElement(i.a,null,a.a.createElement(r.a,null,a.a.createElement(g,e)));h.displayName="FeedbackButton";t.a=h},"./src/packages/issue/issue-view/src/issue-field/state/actions/field-actions.js":function(e,t,s){"use strict";s.d(t,"f",(function(){return n})),s.d(t,"b",(function(){return a})),s.d(t,"e",(function(){return i})),s.d(t,"d",(function(){return r})),s.d(t,"c",(function(){return o})),s.d(t,"g",(function(){return c})),s.d(t,"a",(function(){return l}));const n=(e,t)=>({type:"FIELD_INIT_OPTIONS",payload:{fieldId:e,fieldOptions:t}}),a=(e,t,s,n)=>({type:"FIELD_EDIT_BEGIN",payload:{analyticsEvent:n,fieldId:e,fieldOptions:t,fieldEditSessionId:s}}),i=(e,t,s)=>({type:"FIELD_EDIT_UPDATE",payload:{fieldId:e,value:t,fieldOptions:s}}),r=(e,t,s,n,a)=>({type:"FIELD_EDIT_CONFIRM",payload:{analyticsEvent:n,fieldId:e,fieldOptions:t,saveFieldData:s,analyticsAttributeIdRetriever:a}}),o=(e,t)=>({type:"FIELD_EDIT_CANCEL",payload:{fieldId:e,fieldOptions:t}}),c=(e,t,s)=>({type:"FIELD_PASTE",payload:{fieldId:e,fieldOptions:t,pastedContent:s}}),l=(e,t)=>({type:"FIELD_ADD_ALLOWED_VALUES",payload:{fieldId:e,allowedValues:t}})},"./src/packages/issue/issue-view/src/issue-field/state/actions/field-save-actions.js":function(e,t,s){"use strict";function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function a(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){i(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}s.d(t,"b",(function(){return r})),s.d(t,"c",(function(){return o})),s.d(t,"a",(function(){return c})),s.d(t,"d",(function(){return l})),s.d(t,"e",(function(){return u}));const r=(e,t,s,n,i,r,o=!1)=>({type:"FIELD_SAVE_REQUEST",payload:a({fieldId:e,value:t,fieldOptions:s,saveFieldData:n,analyticsEvent:i,shouldFetchViewContext:o},r&&{eventData:r})}),o=(e,t,s,n,a)=>({type:"FIELD_SAVE_SUCCESS",payload:{fieldId:e,fieldOptions:t,fieldValue:s,saveFieldResult:n},meta:a}),c=(e,t,s,n)=>({type:"FIELD_SAVE_FAILURE",payload:{fieldId:e,invalidMessage:t,error:s,fieldOptions:n}}),l=(e,t,s,n)=>({type:"FIELD_SAVE_SUCCESS_WITH_PASTED_CONTENT",payload:{fieldId:e,fieldOptions:t,value:s,pastedContent:n}}),u=(e,t,s)=>({type:"FIELD_UPDATED",payload:{fieldId:e,fieldValue:t,extraParams:s}})},"./src/packages/issue/issue-view/src/issue-field/state/selectors/epic-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return c}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),r=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/hierarchy-level-selector.js");const o=Object(n.createSelector)(Object(a.n)("epic"),e=>null!==e?e:void 0),c=Object(n.createSelector)(i.r,r.d,(e,t)=>e||1===t)},"./src/packages/issue/issue-view/src/issue-field/state/selectors/flagged-selector.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return r})),s.d(t,"d",(function(){return o})),s.d(t,"b",(function(){return l})),s.d(t,"a",(function(){return u}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/get-editing-value.js");const r=e=>!!e&&e.length>0,o=e=>e?[{value:!0}]:null,c=Object(a.e)("com.atlassian.jira.plugin.system.customfieldtypes:flagged"),l=Object(n.createSelector)(c,e=>!!e&&(e=>{if(e){const t=Object(i.a)(e);return r(t)}return!1})(e)),u=Object(n.createSelector)(c,e=>e&&e.key)},"./src/packages/issue/issue-view/src/issue-field/state/selectors/hierarchy-level-selector.js":function(e,t,s){"use strict";s.d(t,"h",(function(){return b})),s.d(t,"i",(function(){return f})),s.d(t,"e",(function(){return y})),s.d(t,"f",(function(){return O})),s.d(t,"c",(function(){return v})),s.d(t,"g",(function(){return k})),s.d(t,"b",(function(){return S})),s.d(t,"d",(function(){return I})),s.d(t,"a",(function(){return C}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./node_modules/lodash/find.js"),i=s.n(a),r=s("./src/packages/issue/project-context-service/src/utils.js"),o=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),c=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),l=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js"),u=s("./src/packages/issue/issue-view/src/selectors/issue-actions-permissions-selector.js"),d=s("./src/packages/issue/issue-view/src/selectors/project-selector.js");const p=Object(o.o)("hierarchy-level-below")||null,m=Object(n.createSelector)(p,e=>e&&e.issueTypes||[]),b=Object(n.createSelector)(c.e,m,(e,t)=>{const s=e.issueTypes,n=t.map(e=>e.id);return s.filter(e=>-1!==n.indexOf(e.id))}),f=Object(n.createSelector)(l.g,m,(e,t)=>e.canCreateChildren&&!!t.length),g=Object(o.o)("hierarchy-level-above")||null,h=Object(n.createSelector)(g,e=>e&&(e.name||null)),y=Object(n.createSelector)(g,e=>e&&e.issueTypeIds.map(String)||[]),O=Object(n.createSelector)(g,e=>e&&e.issueTypes.map(e=>e.name).filter(e=>e)||[]),j=Object(n.createSelector)(y,e=>e.length>0),E=Object(o.o)("hierarchy-level-same-level")||null,v=Object(n.createSelector)(E,e=>{if(!e)return!1;return e.issueTypes[0].subtask}),k=Object(n.createSelector)(E,e=>e?e.issueTypeIds.map(String):[]),w=Object(n.createSelector)(E,e=>e?e.id:null),S=Object(n.createSelector)(d.b,d.c,w,(e,t,s)=>!!(e&&t&&s)&&(e===s||!!i()(t,e=>e.id===s))),I=Object(n.createSelector)(d.b,w,d.d,r.a),C=Object(n.createSelector)(h,u.d,j,(e,t,s)=>Boolean(e)&&t&&s)},"./src/packages/issue/issue-view/src/issue-field/state/selectors/layout-items-selector.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return S})),s.d(t,"g",(function(){return x})),s.d(t,"f",(function(){return D})),s.d(t,"e",(function(){return A})),s.d(t,"a",(function(){return M})),s.d(t,"c",(function(){return L})),s.d(t,"d",(function(){return R}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./node_modules/lodash/isArray.js"),i=s.n(a),r=s("./node_modules/lodash/isNil.js"),o=s.n(r),c=s("./node_modules/lodash/isPlainObject.js"),l=s.n(c),u=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),d=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),p=s("./src/packages/issue/issue-view/src/common/state/selectors/get-field-type.js"),m=s("./src/packages/issue/issue-view/src/common/state/selectors/get-pending-value.js"),b=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),f=s("./src/packages/issue/issue-view/src/common/state/selectors/time-tracking-selector.js"),g=s("./src/packages/issue/issue-view/src/configurations.js"),h=s("./src/packages/issue/issue-view/src/ecosystem/forge/get-forge-custom-field.js");const y=["devSummary","SLA_PANEL","KNOWLEDGE_BASE","ASSET_ONBOARDING"],O=()=>y,j=e=>o()(e)||i()(e)&&0===e.length||l()(e)&&0===Object.keys(e).length,E=(e,t,s)=>!(!e||!j(Object(m.a)(e))||Object(d.z)(e))&&("assignee"!==e.key&&"com.atlassian.servicedesk:vp-origin"!==Object(p.a)(e)&&"com.atlassian.servicedesk.servicedesk-lingo-integration-plugin:sd-request-language"!==Object(p.a)(e)&&("timetracking"!==e.key||((e,t)=>!!t&&!e)(t,s))),v=(e,t)=>{if(O().includes(e.id))return{id:e.id,type:e.id};if("TAB"===e.type)return e;const s=Object(h.a)(t[e.id]);if(s)return s;const n=Object(d.w)(e.id,t),a=Object(p.a)(n);return n&&a?{id:n.key,type:a}:null},k=Object(n.createSelector)(b.J,e=>e.contextItems),w=Object(n.createSelector)(d.t,e=>Object.keys(e).filter(t=>{const s=Object(p.a)(e[t]);return s&&g.d.includes(s)})),S=Object(n.createSelector)(d.t,e=>Object.keys(e).filter(t=>{const s=Object(p.a)(e[t]);return s&&g.e.includes(s)})),I=Object(n.createSelector)(d.t,u.H,u.M,w,u.n,(e,t,s,n,a)=>{if(!a)return null;return[...t,...n,...s].find(t=>{const s=Object(d.w)(t.id,e);return s&&s.key===a})||null}),C=Object(n.createSelector)(u.H,I,(e,t)=>t&&!e.includes(t)?e.concat([t]):e),T=Object(n.createSelector)(u.M,I,(e,t)=>t?e.filter(e=>e!==t):e),P=Object(n.createSelector)(w,I,(e,t)=>t?e.filter(e=>e!==t):e),_=Object(n.createSelector)(C,T,P,u.p,b.G,(e,t,s,n)=>[...e,...t,...n?[{id:"devSummary",type:"DEV_SUMMARY"}]:[]]),x=Object(n.createSelector)(d.t,_,T,f.b,f.d,(e,t,s,n,a)=>t.filter(t=>{const i=!!s.find(e=>e.id===t.id);if(O().includes(t.id)||"TAB"===t.type)return!i;if(Object(h.b)(e[t.id]))return!0;const r=Object(d.w)(t.id,e);return!!Object(d.y)(r)||!E(r,n,a)&&(r&&Object(p.a)(r)&&!(i&&j(Object(m.a)(r))))}).map(t=>v(t,e)).filter(Boolean)),D=Object(n.createSelector)(d.t,u.k,(e,t)=>t.filter(t=>{const s=Object(d.w)(t.id,e);return!(!s||!Object(p.a)(s))}).map(t=>v(t,e)).filter(Boolean)),A=Object(n.createSelector)(d.t,u.L,(e,t)=>t&&t.filter(t=>{const s=Object(d.w)(t.id,e);return!(!s||!Object(p.a)(s))}).map(t=>v(t,e)).filter(Boolean)),M=Object(n.createSelector)(d.t,T,f.b,f.d,(e,t,s,n)=>t.filter(t=>{if(O().includes(t.id)||"TAB"===t.type)return!0;const a=Object(d.w)(t.id,e);return!Object(d.y)(a)&&(!E(a,s,n)&&(a&&Object(p.a)(a)&&j(Object(m.a)(a))))}).map(t=>v(t,e)).filter(Boolean)),L=Object(n.createSelector)(k,e=>e.isShowMoreExpanded),R=Object(n.createSelector)(M,e=>e.length>0)},"./src/packages/issue/issue-view/src/issue-field/state/selectors/security-level-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return c})),s.d(t,"d",(function(){return l})),s.d(t,"c",(function(){return u})),s.d(t,"b",(function(){return d}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),i=s("./src/packages/issue/issue-view/src/selectors/subtasks-selector.js");const r=Object(a.q)("security"),o=Object(n.createSelector)(r,e=>e&&e.value||null),c=Object(n.createSelector)(r,e=>e&&e.allowedValues||[]),l=Object(n.createSelector)(o,c,(e,t)=>e||t&&t.length>0),u=Object(n.createSelector)(Object(a.A)("security"),i.c,(e,t)=>e&&!t),d=Object(n.createSelector)(o,c,u,(e,t,s)=>({hasSecurityLevel:null!=e,securityLevelAllowedValuesCount:t.length,hasSecurityLevelEditPermissions:s}))},"./src/packages/issue/issue-view/src/issue-field/state/transformers/initial-data-transformer.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return f}));var n=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),a=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/logging/log.js"),i=s("./src/packages/platform/services/issue/src/model/issue-custom-fields.js"),r=s("./src/packages/platform/services/issue/src/model/issue-managed-fields.js"),o=s("./src/packages/platform/services/issue/src/model/issue-system-fields.js");function c(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function l(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?c(Object(s),!0).forEach((function(t){u(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):c(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function u(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const d={[i.r]:"com.atlassian.jira.plugin.system.customfieldtypes:float",[i.u]:"com.pyxis.greenhopper.jira:jsw-story-points",[i.x]:"com.atlassian.jira.plugin.system.customfieldtypes:url",[i.v]:"com.atlassian.jira.plugin.system.customfieldtypes:textfield",[i.w]:"com.atlassian.jira.plugin.system.customfieldtypes:textarea",[i.l]:"com.atlassian.jira.plugin.system.customfieldtypes:labels",[i.c]:"com.atlassian.jira.plugin.system.customfieldtypes:datepicker",[i.d]:"com.atlassian.jira.plugin.system.customfieldtypes:datetime",[i.s]:"com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",[i.m]:"com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes",[i.o]:"com.atlassian.jira.plugin.system.customfieldtypes:multiselect",[i.t]:"com.atlassian.jira.plugin.system.customfieldtypes:select",[i.q]:"com.atlassian.jira.plugin.system.customfieldtypes:multiversion",[i.z]:"com.atlassian.jira.plugin.system.customfieldtypes:version",[i.k]:"com.atlassian.jira.plugin.system.customfieldtypes:grouppicker",[i.n]:"com.atlassian.jira.plugin.system.customfieldtypes:multigrouppicker",[i.y]:"com.atlassian.jira.plugin.system.customfieldtypes:userpicker",[i.p]:"com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker",[i.j]:"string",[i.h]:"number",[i.f]:"datetime",[i.i]:"option2",[i.g]:"array",[i.b]:"com.pyxis.greenhopper.jira:jsw-issue-color",[i.e]:"com.pyxis.greenhopper.jira:gh-epic-color",[i.a]:"com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect"},p={[r.c]:"com.pyxis.greenhopper.jira:gh-epic-link",[r.d]:"com.pyxis.greenhopper.jira:gh-epic-label",[r.g]:"com.pyxis.greenhopper.jira:gh-sprint",[r.h]:"com.atlassian.jira.plugin.system.customfieldtypes:storypoint",[r.i]:"com.atlassian.teams:rm-teams-custom-field-team",[r.f]:"com.atlassian.jpo:jpo-custom-field-parent",[r.b]:"com.atlassian.jpo:jpo-custom-field-baseline-start",[r.a]:"com.atlassian.jpo:jpo-custom-field-baseline-end",[i.b]:"com.pyxis.greenhopper.jira:jsw-issue-color",[r.e]:"com.atlassian.jira.plugin.system.customfieldtypes:flagged"},m=e=>({editable:e.editable,required:!1,autoCompleteUrl:void 0,allowedValues:[],schema:{system:e.systemType,custom:e.customType,type:e.type?e.type:"",renderer:e.renderer},title:e.title||e.key,renderedValue:e.value,value:e.value,adfValue:e.adfValue,key:e.key}),b=e=>{const t={};return e&&e.fields.forEach((e,s)=>{try{switch(e.type){case o.a:case o.b:case o.e:case o.g:case o.i:case o.n:case o.o:case o.p:case o.r:case o.q:t[s]=m({key:s,systemType:s,customType:null,value:e.value,title:e.title,editable:!!e.editable});break;case o.v:t.timeoriginalestimate=m({key:"timeoriginalestimate",systemType:"timeoriginalestimate",customType:null,title:e.title,editable:!!e.editable,value:e.value&&e.value.originalEstimateSeconds}),t[s]=m({key:s,systemType:s,customType:null,title:e.title,editable:!!e.editable,value:e.value});break;case o.f:t[s]=m({key:s,systemType:s,customType:null,title:e.title,value:void 0,renderedValue:void 0,adfValue:e.value,editable:!!e.editable,renderer:e.renderer});break;case o.h:t[s]=m({key:s,systemType:s,customType:null,title:e.title,value:"atlassian-wiki-renderer"===e.renderer?void 0:e.value,adfValue:"atlassian-wiki-renderer"===e.renderer?e.value:void 0,editable:!!e.editable,renderer:e.renderer});break;case o.u:case o.l:case o.s:t[s]=m({key:s,systemType:s,customType:null,value:e.value,editable:!!e.editable});break;case r.c:case r.g:case r.h:case r.i:case r.f:case r.b:case r.a:case r.e:t[s]=m({key:s,systemType:null,customType:p[e.type],value:e.value,title:e.title,editable:!!e.editable});break;case r.d:t[s]=m({key:s,systemType:null,customType:p[e.type],value:e.value,title:e.title,editable:!!e.editable,renderer:e.renderer,type:"string"});break;case i.w:{const n="atlassian-wiki-renderer"===e.renderer?{adfValue:e.value}:{value:e.value};t[s]=m(l({key:s,systemType:null,customType:d[e.type],title:e.title,editable:!!e.editable,renderer:e.renderer},n));break}case i.a:t[s]=m({systemType:null,customType:d[e.type],key:s,title:e.title,value:e.value,editable:!!e.editable});break;case i.b:case i.e:case i.r:case i.u:case i.x:case i.v:case i.l:case i.c:case i.d:case i.s:case i.m:case i.o:case i.t:case i.q:case i.z:case i.k:case i.n:case i.y:case i.p:t[s]=m({systemType:null,customType:d[e.type],key:s,title:e.title,value:e.value,editable:!!e.editable});break;case i.j:case i.h:case i.i:case i.g:case i.f:t[s]=m({systemType:null,customType:null,type:e.type,key:s,title:e.title,value:e.value,editable:!!e.editable});break;case o.j:case o.d:case o.t:case o.m:t[s]=m({systemType:null,customType:null,key:s,title:e.title,value:e.value,editable:!1})}}catch(c){a.a.safeError("issue.details.field.initial-data-transformer",`Failed to map field: ${e.type}`,new n.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:c}))}}),t},f=e=>{const t=Object.entries(b(e)).reduce((e,[t,s])=>l(l({},e),{},{[t]:s.value}),{});return l(l({},e),{},{fields:t})};t.a=b},"./src/packages/issue/issue-view/src/layout-descriptor/view/context/view.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return ie})),s.d(t,"a",(function(){return ae}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/rxjs/Rx.js"),r=s("./node_modules/lodash/identity.js"),o=s.n(r),c=s("./node_modules/lodash/isEqual.js"),l=s.n(c),u=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),d=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js");const p={context:{primaryContextItems:[],secondaryContextItems:[]},content:{visibleContentItems:[],requestPanelContentItems:void 0}};var m=s("./node_modules/memoize-one/dist/memoize-one.esm.js"),b=s("./node_modules/lodash/isNull.js"),f=s.n(b),g=s("./node_modules/lodash/negate.js"),h=s.n(g),y=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js"),O=s("./src/packages/issue/issue-view/src/ecosystem/ecosystem-extensions-selector.js"),j=s("./src/packages/issue/issue-view/src/feature-flags.js"),E=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/layout-items-selector.js"),v=e=>"FORGE_ENTITY_TYPE"===e.glanceType?(e=>({type:"forgeGlance",key:`forgeGlance__${e.appKey}__${e.moduleKey}`,payload:e}))(e):(e=>({type:"ecosystemGlance",key:`ecosystemGlance__${e.appKey}__${e.moduleKey}`,payload:e}))(e),k=e=>{switch(e.type){case"com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect":return{type:e.type,key:`${e.type}__${e.id}`,payload:{fieldId:e.id}};case"assignee":case"reporter":case"description":case"environment":case"duedate":case"priority":case"labels":case"components":case"com.pyxis.greenhopper.jira:gh-sprint":case"com.atlassian.jira.plugin.system.customfieldtypes:storypoint":case"com.pyxis.greenhopper.jira:gh-epic-link":case"fixVersions":case"versions":case"timetracking":case"timeoriginalestimate":case"com.atlassian.jira.plugin.system.customfieldtypes:labels":case"com.atlassian.jira.plugin.system.customfieldtypes:textfield":case"com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker":case"com.atlassian.jira.plugin.system.customfieldtypes:url":case"com.atlassian.jira.plugin.system.customfieldtypes:float":case"com.pyxis.greenhopper.jira:jsw-story-points":case"com.atlassian.jira.plugin.system.customfieldtypes:select":case"com.atlassian.jira.plugin.system.customfieldtypes:multiselect":case"com.atlassian.jira.plugin.system.customfieldtypes:version":case"com.atlassian.jira.plugin.system.customfieldtypes:textarea":case"com.atlassian.jira.plugin.system.customfieldtypes:multiversion":case"com.atlassian.jira.plugin.system.customfieldtypes:datepicker":case"com.atlassian.jira.plugin.system.customfieldtypes:grouppicker":case"com.atlassian.jira.plugin.system.customfieldtypes:multigrouppicker":case"com.atlassian.jira.plugin.system.customfieldtypes:userpicker":case"com.atlassian.jira.plugin.system.customfieldtypes:people":case"com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes":case"com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons":case"com.atlassian.jira.plugin.system.customfieldtypes:datetime":case"com.atlassian.jira.plugin.system.customfieldtypes:atlassian-team":case"com.atlassian.teams:rm-teams-custom-field-team":case"com.atlassian.jpo:jpo-custom-field-parent":case"com.atlassian.jpo:jpo-custom-field-baseline-start":case"com.atlassian.jpo:jpo-custom-field-baseline-end":case"com.pyxis.greenhopper.jira:jsw-issue-color":case"com.atlassian.servicedesk:vp-origin":case"com.atlassian.servicedesk.approvals-plugin:sd-approvals":case"com.atlassian.servicedesk.servicedesk-lingo-integration-plugin:sd-request-language":case"com.atlassian.servicedesk:sd-request-participants":case"com.atlassian.servicedesk:sd-customer-organizations":case"number":case"string":case"option2":case"array":case"datetime":case"com.atlassian.servicedesk.assets-plugin:assetfield":case"com.atlassian.jira.plugins.service-entity:service-entity-field-cftype":case"com.atlassian.jira.plugin.system.customfieldtypes:servicedesk-approvers-list":case"com.atlassian.jira.plugins.cmdb:cmdb-object-cftype":case"com.atlassian.servicedesk:sd-request-feedback":case"user":case"group-list":case"array-string":case"com.atlassian.jira.plugin.system.customfieldtypes:readonlyfield":case"forgeCustomField":return{type:e.type,key:`${e.type}__${e.id}`,payload:{fieldId:e.id}};case"TAB":return{type:e.type,key:`${e.type}__${e.id}`,payload:{tabId:e.id}};case"KNOWLEDGE_BASE":case"SLA_PANEL":case"devSummary":case"releases":case"ASSET_ONBOARDING":return{type:e.type,key:e.type,payload:{itemId:e.id}};default:return null}};const w=e=>({applicationRoles:Object(j.isUseAppPermissionsFromTenantContextEnabled)()?[]:Object(y.a)(e),permissions:Object(y.g)(e),glances:Object(O.i)(e),visibleContentItems:Object(E.f)(e),requestContentItems:Object(E.e)(e),visibleContextItems:Object(E.g)(e),conditionallyVisibleContextItems:Object(E.a)(e)}),S=h()(f.a);var I=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),C=s("./node_modules/lodash/partition.js"),T=s.n(C);function P(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function _(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?P(Object(s),!0).forEach((function(t){x(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):P(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function x(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const D=(e,t)=>{const{primaryContextItems:s,secondaryContextItems:n}=e.context,a=n.filter(e=>e.type===t);if(a.length){const i=((e,t)=>e.filter(e=>e.type!==t))(n,t),r=[...s,...a];return _(_({},e),{},{context:{primaryContextItems:r,secondaryContextItems:i}})}return e};var A=s("./node_modules/lodash/get.js"),M=s.n(A),L=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),R=s("./src/packages/issue/issue-view/src/selectors/status-selector.js");function N(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function U(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?N(Object(s),!0).forEach((function(t){F(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):N(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function F(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const V=e=>"com.atlassian.servicedesk:sd-request-feedback"===e.type,K=e=>"com.atlassian.servicedesk:sd-request-feedback"!==e.type;var B=(e,t)=>((e,t)=>{const{primaryContextItems:s}=e.context,n=s.slice().filter(K),a=s.find(V);if("DONE"===Object(R.b)(t)&&a){const e=a&&M()(a,"payload.fieldId"),s=e&&Object(L.w)(e,Object(L.t)(t));M()(s,"value",!1)&&n.unshift(a)}return U(U({},e),{},{context:U(U({},e.context),{},{primaryContextItems:n})})})(e,t);function W(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function H(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?W(Object(s),!0).forEach((function(t){G(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):W(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function G(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const $=new Set(["releases"]),q=e=>{const{context:{primaryContextItems:t},content:s}=e,[n,a]=T()(s.visibleContentItems,e=>$.has(e.type)),[i,r]=s.requestPanelContentItems?T()(s.requestPanelContentItems,e=>$.has(e.type)):[];return H(H({},e),{},{content:H(H({},s),{},{visibleContentItems:a,requestPanelContentItems:r}),context:H(H({},e.context),{},{primaryContextItems:[...t,...i||[],...n]})})},z=e=>D(e,"ecosystemGlance"),Y=e=>"com.atlassian.jira.plugin.system.customfieldtypes:select"===e.type||"description"===e.type||"com.atlassian.jira.plugins.service-entity:service-entity-field-cftype"===e.type,Q=(e,t)=>e.map(e=>t.some(t=>t(e))?H(H({},e),{},{hasGlobalSpotlightTarget:!0}):e),J=e=>{const{content:t,context:s}=e,{visibleContentItems:n,requestPanelContentItems:a}=t,{primaryContextItems:i,secondaryContextItems:r}=s,o=[Y];return H(H({},e),{},{content:H(H({},t),{},{visibleContentItems:Q(n,o),requestPanelContentItems:a&&Q(a,o)}),context:H(H({},s),{},{primaryContextItems:Q(i,o),secondaryContextItems:Q(r,o)})})},Z=e=>e.map(q);const X=e=>{switch(Object(I.G)(e)){case"service_desk":return(e=>({layoutDescriptor$:t})=>({layoutDescriptor$:Z(t).map(t=>Object(I.v)(e)?B(t,e):t).map(z).map(J)}))(e);case"business":case"software":default:return o.a}};const ee=Object(m.a)(w),te=(e,t)=>{const s=ee(e),n=w(t);return l()(s,n)};var se=({locationTransformer:e,store:t})=>{const s=i.Observable.create(e=>{let s=t.getState();return e.next(s),t.subscribe(()=>{const n=t.getState();s!==n&&(s=n,e.next(s))})}).distinctUntilChanged(te);return{layoutDescriptor$:e({layoutDescriptor$:(({state$:e})=>{const t=e.map(X).distinctUntilChanged();return({layoutDescriptor$:e})=>({layoutDescriptor$:t.map(t=>t({layoutDescriptor$:e})).share().switchMap(e=>e.layoutDescriptor$)})})({state$:s})({layoutDescriptor$:(({state$:e})=>({layoutDescriptor$:e.map(w).map(e=>{const t=e.glances;return{context:{primaryContextItems:e.visibleContextItems.map(k).concat(t.map(v)).filter(S),secondaryContextItems:e.conditionallyVisibleContextItems.map(k).filter(S)},content:{visibleContentItems:e.visibleContentItems.map(k).filter(S),requestPanelContentItems:e.requestContentItems&&e.requestContentItems.map(k).filter(S)}}})}))({state$:s}).layoutDescriptor$}).layoutDescriptor$}).layoutDescriptor$}};const{Provider:ne,Consumer:ae}=Object(n.createContext)({layoutDescriptor:p});class ie extends n.Component{constructor(e){super(e),this.state={layoutDescriptor:p},this.onError=e=>{d.i.safeError("issue.layout-descriptor.provider","Failed to create layout descriptor",new u.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e}))},this.getLayoutDescriptorObservable=(()=>{const{store:e,locationTransformer:t}=this.props,{layoutDescriptor$:s}=se({store:e,locationTransformer:t}),n=s.share();return()=>n})(),this.constructorSubscription=void 0,this.componentDidMountSubscription=void 0;const t=this.getLayoutDescriptorObservable();this.constructorSubscription=t.filter((e,t)=>0===t).subscribe(e=>{this.state={layoutDescriptor:e}},this.onError)}componentDidMount(){const e=this.getLayoutDescriptorObservable();this.componentDidMountSubscription=e.subscribe(e=>{l()(this.state.layoutDescriptor,e)||this.setState({layoutDescriptor:e})},this.onError),this.constructorSubscription.unsubscribe()}componentWillUnmount(){this.componentDidMountSubscription.unsubscribe()}render(){const{children:e}=this.props,{layoutDescriptor:t}=this.state;return a.a.createElement(ne,{value:{layoutDescriptor:t}},e)}}ie.displayName="Provider",ie.displayName="LayoutDescriptorProvider",ie.defaultProps={locationTransformer:o.a}},"./src/packages/issue/issue-view/src/media-feature-flags.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s("./src/packages/issue/issue-view/src/feature-flags.js");const a=()=>({newCardExperience:Object(n.isNewCardExperience)(),zipPreviews:Object(n.isZipPreviewEnabled)(),folderUploads:Object(n.isFolderUploadsEnabled)(),codeViewer:Object(n.isCodeViewerEnabled)(),poll_intervalMs:Object(n.getClientPollingIntervalMs)(),poll_maxAttempts:Object(n.getClientPollingMaxAttempts)(),poll_backoffFactor:Object(n.getClientPollingBackoffFactor)(),poll_maxIntervalMs:Object(n.getClientPollingMaxIntervalMs)(),poll_maxGlobalFailures:Object(n.getClientPollingMaxGlobalFailures)()})},"./src/packages/issue/issue-view/src/model/change-type.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n={FIELD_CHANGE_REQUESTED:"FIELD_CHANGE_REQUESTED",FIELD_CHANGE_FAILED:"FIELD_CHANGE_FAILED",FIELD_CHANGED:"FIELD_CHANGED",ISSUE_TYPE_CHANGED:"ISSUE_TYPE_CHANGED",ISSUE_RELATIONSHIP_UPDATED:"ISSUE_RELATIONSHIP_UPDATED",ISSUE_LINKS_CREATED:"ISSUE_LINKS_CREATED",ISSUE_LINK_DELETED:"ISSUE_LINK_DELETED",CHILD_ISSUE_ADDED:"CHILD_ISSUE_ADDED",ISSUE_CHILDREN_ORDER_CHANGED:"ISSUE_CHILDREN_ORDER_CHANGED"}},"./src/packages/issue/issue-view/src/perf.config.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return a})),s.d(t,"a",(function(){return i}));var n=s("./node_modules/@atlassian/browser-metrics/dist/es2019/factory/index.js");const a=n.a.custom({key:"issue-view-load",virtual:!0,timings:[{key:"preview",startMark:"metrics_init",endMark:"ISSUE_PREVIEW_RENDERED"},{key:"startDataFetch",startMark:"ISSUE_START_FETCHING_DATA",endMark:"ISSUE_FETCHED_MARK"}]}),i=n.a.custom({key:"embedded-issue-view-load",until:a,include:[a]})},"./src/packages/issue/issue-view/src/reducers/entities/forge-reducer.js":function(e,t,s){"use strict";function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function a(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){i(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}s.d(t,"b",(function(){return r}));const r={actions:[],glances:[],panels:[],activities:[],customFields:[],activeAction:null,panelsKeys:{newPanels:[],collapsedPanels:[]}};t.a=(e=r,t)=>{switch(t.type){case"FETCH_FORGE_SUCCESS":return a(a({},e),{},{actions:t.payload.issueAction,glances:t.payload.issueGlance,panels:t.payload.issuePanel,activities:t.payload.issueActivity,customFields:t.payload.customField,activeAction:null,panelsKeys:a(a({},e.panelsKeys),{},{newPanels:[]})});case"FORGE_ISSUE_ACTION_EXEC":return a(a({},e),{},{activeAction:{action:t.payload,isLoading:!0}});case"FORGE_ISSUE_ACTION_RENDERED":return a(a({},e),{},{activeAction:a(a({},e.activeAction),{},{isLoading:!1})});case"FORGE_ISSUE_ACTION_CLOSE":return a(a({},e),{},{activeAction:null});case"FORGE_ISSUE_PANEL_ADDED":return a(a({},e),{},{panelsKeys:a(a({},e.panelsKeys),{},{newPanels:[...e.panelsKeys.newPanels,t.payload]})});case"FORGE_NEW_ISSUE_PANEL_UNTRACK":{const s=t.payload,{panelsKeys:n}=e;return a(a({},e),{},{panelsKeys:a(a({},n),{},{newPanels:n.newPanels.filter(e=>e!==s)})})}case"FORGE_ISSUE_PANEL_REMOVED":{const s=t.payload;return a(a({},e),{},{panelsKeys:{newPanels:e.panelsKeys.newPanels.filter(e=>e!==s),collapsedPanels:e.panelsKeys.collapsedPanels.filter(e=>e!==s)}})}case"FORGE_ISSUE_PANEL_UPDATED":{const{panelKey:s,collapsed:n}=t.payload,i=n?Array.from(new Set([...e.panelsKeys.collapsedPanels,s])):e.panelsKeys.collapsedPanels.filter(e=>e!==s);return a(a({},e),{},{panelsKeys:a(a({},e.panelsKeys),{},{collapsedPanels:i})})}case"FETCH_ISSUE_SUCCESS":case"REFRESH_ISSUE_SUCCESS":case"FETCH_ISSUE_REMOTE_DATA_SUCCESS":{var s;const n=(null===(s=t.payload.forgeIssueProperties)||void 0===s?void 0:s.collapsedPanels)||[];return a(a({},e),{},{panelsKeys:a(a({},e.panelsKeys),{},{collapsedPanels:Array.from(new Set([...e.panelsKeys.collapsedPanels,...n]))})})}default:return e}}},"./src/packages/issue/issue-view/src/selectors/activity-feed-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return r})),s.d(t,"b",(function(){return o}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");const i=Object(n.createSelector)(a.J,e=>e.activityFeed),r=Object(n.createSelector)(i,e=>e.selectedActivityItem),o=Object(n.createSelector)(i,e=>e.selectedActivitySortOrder)},"./src/packages/issue/issue-view/src/selectors/analytics-payload-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return S}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./node_modules/lodash/camelCase.js"),i=s.n(a),r=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/safe-string.js"),o=s("./src/packages/platform/utils/constants/src/board-types.js"),c=s("./src/packages/platform/utils/constants/src/project-types.js"),l=s("./src/packages/platform/utils/constants/src/status-categories.js"),u=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),d=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),p=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),m=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),b=s("./src/packages/issue/issue-view/src/selectors/breadcrumbs-selector.js");const f=Object(n.createSelector)(Object(p.q)("servicedesk-practices"),e=>{if(e&&e.value&&e.value.length>0)return e.value[0]});var g=s("./src/packages/issue/issue-view/src/selectors/status-selector.js");function h(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function y(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?h(Object(s),!0).forEach((function(t){O(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):h(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function O(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const j=e=>Object(u.j)(...c.d)(e),E=e=>Object(u.j)(...c.b)(e),v=e=>Object(u.j)(...o.a)(e),k=e=>Object(u.j)(...l.STATUS_CATEGORIES)(e),w=Object(n.createSelector)(Object(p.q)("assignee"),e=>e&&e.value?e.value.accountId:null),S=Object(n.createSelector)(d.b,m.l,m.D,m.G,m.v,b.e,g.b,d.i,d.h,m.D,d.A,w,f,(e,t,s,n,a,o,c,d,p,m,b,f,g)=>{const h={};return e&&(h.analyticsSource=e),"serviceDesk"===j(i()(n)).value&&g&&(h.itsmPractice=g),{containerType:Object(u.j)("project")("project"),containerId:m,objectType:Object(u.j)("issue")("issue"),objectId:new r.a(b),attributes:y(y({},h),{},{designVersion:Object(u.j)("v2-bento")("v2-bento"),projectId:s,issueId:t,projectConfig:E(a?"next-gen":"classic"),projectType:j(i()(n)),nextGenProject:Boolean(a),statusCategory:k(c),statusCategoryId:c?Object(l.categoryIdForStatusCategory)(c):null,issueTypeId:o,boardType:v(d),boardId:p,assigneeId:f?Object(u.j)(f)(f):f})}})},"./src/packages/issue/issue-view/src/selectors/approval-selector/index.js":function(e,t,s){"use strict";s.d(t,"d",(function(){return A})),s.d(t,"e",(function(){return L})),s.d(t,"a",(function(){return R})),s.d(t,"c",(function(){return N})),s.d(t,"b",(function(){return U}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./node_modules/lodash/castArray.js"),i=s.n(a),r=s("./node_modules/lodash/get.js"),o=s.n(r),c=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),l=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),u=s("./src/packages/issue/issue-view/src/selectors/comment-selector.js"),d=s("./node_modules/lodash/every.js"),p=s.n(d),m=s("./node_modules/lodash/fp/get.js"),b=s.n(m),f=s("./node_modules/lodash/unionBy.js"),g=s.n(f),h=s("./src/packages/issue/issue-view/src/views/field/team/assets/default-avatar.svg"),y=s.n(h);function O(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function j(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?O(Object(s),!0).forEach((function(t){E(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):O(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function E(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const v=(e,t,s)=>(e=>void 0===e)(b()(t,s))?e:b()(t,s),k=(e,t,s)=>t.filter(t=>s.some(s=>e(t)===e(s))),w=(e,t,s)=>t.filter(t=>!s.some(s=>e(t)===e(s))),S=({key:e,accountId:t,displayName:s,avatarUrls:n})=>({approver:{accountId:t,key:e,displayName:s,isFromLinkedField:!0,avatarUrl:v(y.a,"24x24",n)}}),I=({approver:{key:e,accountId:t,displayName:s},approverDecision:n})=>({approver:{accountId:t,key:e,displayName:s},approverDecision:n}),C=(e,t)=>{const s=p()(t,e=>e.approver.accountId);return((e,t)=>{const s=e.map(e=>e.approver.accountId);return t.map(e=>s.includes(e.approver.accountId)?{approverDecision:e.approverDecision,approver:j(j({},e.approver),{},{isFromLinkedField:!0})}:e)})(t,g()(e,t,e=>s?e.approver.accountId:null))},T=(e,t)=>{if(t&&t.value){const s=+t.value;if("number"===t.type)return s;if("percent"===t.type)return Math.ceil(e*(s/100))}return e},P=({name:e})=>({name:e,type:"group",meta:{memberCount:NaN,approvedCount:NaN},id:void 0}),_=(e,t)=>{const s=e||[];return[...k(b()("name"),s,t),...w(b()("name"),t,s).map(P)]},x=(e,t,s,n)=>"multi_group_picker"!==e.configuration.approvers.type?((e,t,s,n)=>{const a=(t?e.approvers.filter(e=>"pending"!==e.approverDecision):e.approvers).map(I),i=t.map(S),r=C(a,i),o=b()(["configuration","condition"],e),c=T(r.length,o),l="com.atlassian.jira.plugin.system.customfieldtypes:userpicker"===n,{id:u,name:d,finalDecision:p,canAnswerApproval:m,decisions:f,approverPrincipals:g}=e;return{id:u,name:d,finalDecision:p,approvers:r,minApprovalsRequired:c,canAnswerApproval:m,linkedFieldName:s,isSingleUserPicker:l,decisions:(f||[]).map(I),approverPrincipals:g,configuration:e.configuration}})(e,t,s,n):(({id:e,name:t,finalDecision:s,approvers:n,configuration:a,canAnswerApproval:i,decisions:r,approverPrincipals:o},c,l)=>({id:e,name:t,finalDecision:s,approvers:n.map(I),minApprovalsRequired:T(n.length,a.condition),canAnswerApproval:i,linkedFieldName:l,isSingleUserPicker:!1,decisions:(r||[]).map(I),approverPrincipals:_(o,c),configuration:a}))(e,t,s),D=Object(n.createSelector)((e,t)=>t?Object(l.n)(t)(e):void 0,e=>e&&e.activeApproval),A=Object(n.createSelector)((e,t)=>D(e,t),e=>o()(e,["configuration","approvers","customFieldId"])),M=Object(n.createSelector)((e,t)=>D(e,t),e=>o()(e,["configuration","approvers","customFieldName"])),L=Object(n.createSelector)((e,t)=>D(e,t),(e,t)=>{const s=t&&((e,t)=>{const s=A(e,t);return s?Object(l.n)(s)(e):void 0})(e,t);return s?i()(s):[]},(e,t)=>M(e,t),(e,t)=>((e,t)=>{const s=A(e,t);return s&&Object(l.r)(s)(e)})(e,t),(e,t,s,n)=>e&&x(e,t,s,n)),R=Object(n.createSelector)(Object(l.q)("servicedesk-approvals"),e=>e&&e.value&&e.value.completedApprovals||[]),N=(Object(n.createSelector)(R,e=>e&&e.length),Object(n.createSelector)(u.a,u.K,u.J,u.F,u.I,R,(e,t,s,n,a,i)=>{const r=[];Object.keys(e).filter(e=>t.includes(e)).forEach(t=>{const s=e[t],n={comment:s,timestamp:new Date(s.createdDate).getTime(),type:"COMMENT"};r.push(n)}),i&&i.forEach(e=>{const t={approval:e,timestamp:o()(e,"completedDate.epochMillis"),type:"APPROVAL"};r.push(t)}),r.sort((e,t)=>e.timestamp-t.timestamp);let c=r.slice();const l=n+a;return a&&s>n&&c[c.length-1]&&"APPROVAL"===c[c.length-1].type&&(c=c.slice(0,c.map(e=>e.type).lastIndexOf("COMMENT")+1)),s>l&&c[0]&&"APPROVAL"===c[0].type?c.slice(c.map(e=>e.type).indexOf("COMMENT")):c})),U=Object(n.createSelector)(L,c.a,(e,t)=>!!(e&&t&&e.approvers&&e.approvers.length)&&e.approvers.some(e=>e.approver.accountId===t&&(!e.approverDecision||"pending"===e.approverDecision)))},"./src/packages/issue/issue-view/src/selectors/assign-issue-parent-modal-selector.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return r})),s.d(t,"a",(function(){return o}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");const r=Object(n.createSelector)(i.J,e=>e.assignIssueParentModal.isOpen),o=Object(n.createSelector)(a.m,i.B,(e,t)=>[{id:e.issueId,key:e.issueKey,parentId:t&&t.id}])},"./src/packages/issue/issue-view/src/selectors/attachment-picker-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return c}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/selectors/attachment-selector.js");const i=Object(n.createSelector)(a.a,e=>e.picker),r=Object(n.createSelector)(i,e=>e.attachments||e.uploadedAttachments),o=Object(n.createSelector)(i,e=>e.isPopupOpen),c=e=>Object(n.createSelector)(r,t=>t[e])},"./src/packages/issue/issue-view/src/selectors/attachment-selector.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return r})),s.d(t,"a",(function(){return o}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js");const r=Object(n.createSelector)(i.g,e=>e.canCreateAttachments),o=Object(n.createSelector)(a.J,e=>e.attachments)},"./src/packages/issue/issue-view/src/selectors/breadcrumbs-selector.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return j})),s.d(t,"g",(function(){return E})),s.d(t,"h",(function(){return v})),s.d(t,"a",(function(){return k})),s.d(t,"f",(function(){return w})),s.d(t,"e",(function(){return S})),s.d(t,"d",(function(){return I})),s.d(t,"c",(function(){return C}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),r=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),o=s("./src/packages/issue/issue-view/src/configurations.js");const c=(e,t)=>`${e?e.replace(/\/?$/,"/"):"/"}browse/${t}`,l=Object(i.q)("issuetype"),u=Object(i.q)("parent"),d=Object(i.q)("epic"),p=Object(i.q)(o.a),m=Object(n.createSelector)(d,a.g,(e,t)=>((e,t)=>e&&void 0!==t?{summary:e.summary,key:e.key,url:c(t,e.key),issueTypeName:e.issueTypeName||"",issueTypeIconUrl:e.issueTypeIconUrl||""}:null)(e&&e.value,t)),b=Object(n.createSelector)(p,a.g,(e,t)=>((e,t)=>e&&e.data?{summary:e.data.summary,key:e.data.key,url:c(t,e.data.key),issueTypeName:e.data.issueTypeName||"",issueTypeIconUrl:e.data.issueTypeIconUrl||""}:null)(e&&e.value,t)),f=Object(n.createSelector)(u,a.g,(e,t)=>((e,t)=>e?{summary:e.fields.summary,key:e.key,url:c(t,e.key),issueTypeName:e.issueTypeName||"",issueTypeIconUrl:e.issueTypeIconUrl||""}:null)(e&&e.value,t)),g=Object(n.createSelector)(r.B,a.g,(e,t)=>((e,t)=>e?{summary:e.summary,key:e.key,url:c(t,e.key),issueTypeName:e.issueTypeName||"",issueTypeIconUrl:e.issueTypeIconUrl||""}:null)(e,t)),h=Object(n.createSelector)(g,f,b,(e,t,s)=>e||t||s),y=Object(n.createSelector)(m,g,(e,t)=>[e,t].filter(e=>e)),O=Object(n.createSelector)(m,h,(e,t)=>[e,t].filter(e=>e)),j=e=>e?y:O,E=Object(n.createSelector)(l,e=>e&&e.value),v=Object(n.createSelector)(a.g,a.B,c),k=Object(n.createSelector)(a.g,a.B,(e,t)=>`${window.location.protocol}//${window.location.host}${c(e,t)}`),w=Object(n.createSelector)(E,e=>e&&e.name),S=Object(n.createSelector)(E,e=>e&&e.id),I=Object(n.createSelector)(E,e=>e&&e.iconUrl),C=Object(n.createSelector)(l,e=>e&&Boolean(e.editable))},"./src/packages/issue/issue-view/src/selectors/card-cover-selectors.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return u})),s.d(t,"c",(function(){return d})),s.d(t,"b",(function(){return p}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./node_modules/lodash/isEmpty.js"),i=s.n(a),r=s("./node_modules/lodash/isNil.js"),o=s.n(r),c=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),l=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");const u=Object(n.createSelector)(l.e,e=>e.cardCover),d=Object(n.createSelector)(u,e=>e&&e.isEnabled),p=(Object(n.createSelector)(u,e=>e&&(!o()(e.attachmentId)||!i()(e.availableAttachmentIds))),Object(n.createSelector)(c.z,e=>!!e&&e.includes("cardCoverActions")))},"./src/packages/issue/issue-view/src/selectors/changeboarding-selector.js":function(e,t,s){"use strict";s.d(t,"f",(function(){return f})),s.d(t,"e",(function(){return g})),s.d(t,"g",(function(){return h})),s.d(t,"d",(function(){return y})),s.d(t,"c",(function(){return O})),s.d(t,"b",(function(){return j})),s.d(t,"a",(function(){return E}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/platform/utils/constants/src/analytics-sources.js"),i=s("./src/packages/issue/issue-view/src/common/service/issue/changeboarding-local-storage.js"),r=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),o=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),c=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/layout-items-selector.js");var l=s("./src/packages/issue/issue-view/src/selectors/ecosystem-glance-ui-selector.js"),u=s("./src/packages/issue/issue-view/src/selectors/ui-config-selector.js");const d=Object(n.createSelector)(o.J,e=>e.changeboarding),p=["core-issue","software-issue"],m=["core-issue","full-issue","software-issue","software-backlog-issue"],b=[a.a.FULL_ISSUE,a.a.SERVICEDESK_QUEUES_ISSUE,a.a.SERVICEDESK_REPORTS_ISSUE],f=Object(n.createSelector)(r.b,r.e,u.a,(e,t,s)=>!!e&&(m.includes(e.value)&&p.includes(t))&&!s),g=Object(n.createSelector)(r.b,u.a,o.v,(e,t,s)=>m.includes(null==e?void 0:e.value)&&!t&&!s),h=Object(n.createSelector)(r.b,u.a,o.v,(e,t,s)=>b.includes(null==e?void 0:e.value)&&!t&&!s),y=Object(n.createSelector)(g,d,e=>{const{firstActivationDateMs:t}=e.context;return(e=>null!=e&&e<15357276e5)(t)},()=>Object(i.b)()<7,l.a,u.a,(e,t,s,n,a,i)=>e&&t.isBannerVisible&&s&&n&&!a&&!i),O=Object(n.createSelector)(d,e=>e.isTourActive),j=Object(n.createSelector)(d,e=>e.isBannerDismissed),E=Object(n.createSelector)(c.g,e=>e.some(e=>"assignee"===e.id))},"./src/packages/issue/issue-view/src/selectors/children-issues-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");const i=Object(n.createSelector)(a.e,e=>e.childrenIssues)},"./src/packages/issue/issue-view/src/selectors/classic-project-config-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");const i=Object(n.createSelector)(a.c,e=>e&&e.viewScreenId)},"./src/packages/issue/issue-view/src/selectors/clickthrough-banner-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return p})),s.d(t,"b",(function(){return m}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/platform/utils/constants/src/analytics-sources.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),r=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),o=s("./src/packages/issue/issue-view/src/selectors/ui-config-selector.js");const c=Object(n.createSelector)(r.J,e=>e.clickthroughBanner),l=[a.a.FULL_ISSUE,a.a.SERVICEDESK_QUEUES_ISSUE,a.a.SERVICEDESK_REPORTS_ISSUE],u=Object(n.createSelector)(i.b,r.v,o.a,(e,t,s)=>!!e&&(l.includes(e.value)&&!t)&&!s),d=Object(n.createSelector)(c,e=>!!e&&!e.isBannerVisible),p=Object(n.createSelector)(u,d,(e,t)=>!e||t),m=Object(n.createSelector)(u,p,(e,t)=>e&&t)},"./src/packages/issue/issue-view/src/selectors/comment-selector.js":function(e,t,s){"use strict";s.d(t,"t",(function(){return f})),s.d(t,"J",(function(){return g})),s.d(t,"I",(function(){return h})),s.d(t,"F",(function(){return y})),s.d(t,"E",(function(){return O})),s.d(t,"v",(function(){return j})),s.d(t,"G",(function(){return k})),s.d(t,"a",(function(){return w})),s.d(t,"e",(function(){return x})),s.d(t,"q",(function(){return D})),s.d(t,"i",(function(){return A})),s.d(t,"l",(function(){return M})),s.d(t,"j",(function(){return L})),s.d(t,"f",(function(){return R})),s.d(t,"g",(function(){return N})),s.d(t,"r",(function(){return U})),s.d(t,"h",(function(){return F})),s.d(t,"H",(function(){return V})),s.d(t,"o",(function(){return K})),s.d(t,"p",(function(){return B})),s.d(t,"m",(function(){return W})),s.d(t,"s",(function(){return H})),s.d(t,"k",(function(){return G})),s.d(t,"D",(function(){return $})),s.d(t,"C",(function(){return q})),s.d(t,"b",(function(){return z})),s.d(t,"c",(function(){return Y})),s.d(t,"d",(function(){return Q})),s.d(t,"K",(function(){return J})),s.d(t,"B",(function(){return Z})),s.d(t,"u",(function(){return X})),s.d(t,"n",(function(){return ee})),s.d(t,"A",(function(){return te})),s.d(t,"w",(function(){return se})),s.d(t,"y",(function(){return ne})),s.d(t,"x",(function(){return ae})),s.d(t,"z",(function(){return ie}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./node_modules/lodash/values.js"),i=s.n(a),r=s("./node_modules/date-fns/compare_asc/index.js"),o=s.n(r),c=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),l=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),u=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js");function d(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function p(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?d(Object(s),!0).forEach((function(t){m(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):d(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function m(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const b=Object(n.createSelector)(l.J,e=>e.comments.pendingDeletedIds),f=Object(n.createSelector)(l.e,e=>e.comments),g=Object(n.createSelector)(l.e,e=>e.totalComments),h=Object(n.createSelector)(l.e,e=>e.commentsStartIndex),y=Object(n.createSelector)(l.e,e=>e.loadedComments),O=Object(n.createSelector)(l.J,e=>e.comments.isLoadingMoreComments),j=Object(n.createSelector)(l.J,e=>e.comments.hasScrolledPermalinkComment),E=Object(n.createSelector)(l.J,e=>e.comments.pendingSavedValues),v=Object(n.createSelector)(l.J,e=>e.comments.deleteModalCommentId),k=Object(n.createSelector)(l.J,e=>e.comments.loadingStage),w=Object(n.createSelector)(f,E,(e,t)=>p(p({},e),t)),S=e=>Object(n.createSelector)(w,t=>t[e]),I=e=>Object(n.createSelector)(S(e),c.a,(e,t)=>null!==t&&t===(e&&e.authorId)),C=(e,t)=>Object(n.createSelector)(S(e),l.k,(e,s)=>e&&e[t]?s(e[t]):null),T=Object(n.createSelector)(l.J,e=>e&&e.comments||null),P=Object(n.createSelector)(T,e=>e&&e.commentEditors||null),_=e=>Object(n.createSelector)(P,t=>t&&t[e]||null),x=e=>C(e,"authorId"),D=e=>C(e,"updateAuthorId"),A=e=>Object(n.createSelector)(_(e),e=>e&&e.editingValue||null),M=e=>Object(n.createSelector)(_(e),e=>e&&e.visibility||null),L=e=>Object(n.createSelector)(A(e),S(e),(e,t)=>e||t&&t.bodyAdf||null),R=e=>Object(n.createSelector)(S(e),e=>e?e.bodyHtml:null),N=e=>Object(n.createSelector)(S(e),e=>e?e.createdDate:null),U=e=>Object(n.createSelector)(S(e),e=>e?e.updatedDate:null),F=e=>Object(n.createSelector)(S(e),e=>e?e.edited:null),V=e=>Object(n.createSelector)(E,t=>t[e]),K=e=>Object(n.createSelector)(V(e),e=>!!e),B=e=>Object(n.createSelector)(V(e),e=>!(!e||!e.hasSaveFailed)),W=e=>Object(n.createSelector)(v,t=>t===e),H=e=>Object(n.createSelector)(S(e),e=>e?e.visibility:null),G=e=>Object(n.createSelector)(M(e),H(e),(e,t)=>e||t),$=e=>Object(n.createSelector)(c.v,(e=>Object(n.createSelector)(S(e),e=>!!e&&e.isInternal))(e),(e,t)=>e&&t),q=e=>Object(n.createSelector)(_(e),e=>!e||e.isInternal),z=Object(n.createSelector)(u.g,e=>e.canAddComments),Y=e=>Object(n.createSelector)(u.g,I(e),(e,t)=>e.canDeleteAllComments||e.canDeleteOwnComments&&t),Q=e=>Object(n.createSelector)(u.g,I(e),(e,t)=>e.canEditAllComments||e.canEditOwnComments&&t),J=Object(n.createSelector)(w,b,(e,t)=>Object.keys(e).filter(e=>!t.includes(e)).map(t=>({id:t,createdDate:new Date(e[t].createdDate)})).sort((e,t)=>o()(e.createdDate,t.createdDate)).map(e=>e.id)),Z=e=>Object(n.createSelector)(_(e),e=>!!e&&e.isEditing),X=Object(n.createSelector)(J,e=>e,(e,t)=>e.filter(e=>Z(e)(t))),ee=Object(n.createSelector)(f,e=>e?Object.keys(e).filter(t=>"object"==typeof e[t]):[]),te=Object(n.createSelector)(ee,e=>e,(e,t)=>e.some(e=>Z(e)(t))),se=Object(n.createSelector)(l.J,e=>e.comments.addCommentEditorExpand||!1),ne=Object(n.createSelector)(se,P,(e,t)=>e||!!t&&i()(t).some(e=>e.isEditing)),ae=Object(n.createSelector)(l.J,e=>e.comments.isCommentAttachmentInProgress),ie=Object(n.createSelector)(l.v,l.G,(e,t)=>!e&&("business"===t||"software"===t))},"./src/packages/issue/issue-view/src/selectors/confluence-app-links-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return l}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),i=s("./src/packages/issue/issue-view/src/selectors/confluence-pages-selector.js"),r=s("./src/packages/issue/issue-view/src/selectors/issue-actions-permissions-selector.js");const o=Object(n.createSelector)(a.e,e=>e.confluenceAppLinks||[]),c=Object(n.createSelector)(o,e=>e&&e.length>0),l=Object(n.createSelector)(c,i.c,r.e,(e,t,s)=>e&&t&&s)},"./src/packages/issue/issue-view/src/selectors/confluence-pages-selector.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return o})),s.d(t,"d",(function(){return c})),s.d(t,"e",(function(){return l})),s.d(t,"f",(function(){return u})),s.d(t,"a",(function(){return d})),s.d(t,"c",(function(){return b})),s.d(t,"h",(function(){return f})),s.d(t,"j",(function(){return g})),s.d(t,"g",(function(){return h})),s.d(t,"i",(function(){return y}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");const i=Object(n.createSelector)(a.e,e=>e.confluencePages),r=Object(n.createSelector)(i,e=>e.createLinkedPage),o=Object(n.createSelector)(r,e=>e.errorMessage),c=Object(n.createSelector)(r,e=>e.isInvalid),l=Object(n.createSelector)(r,e=>e.isLoading),u=Object(n.createSelector)(r,e=>e.clickedCount>0),d=Object(n.createSelector)(r,e=>e.clickedCount),p=Object(n.createSelector)(i,e=>e&&e.linkedPages),m=Object(n.createSelector)(i,e=>e&&e.mentionedPages),b=Object(n.createSelector)(i,e=>!(!e||!e.isLinkingEnabled)),f=Object(n.createSelector)(p,e=>e&&e.pages),g=Object(n.createSelector)(m,e=>e&&e.pages),h=Object(n.createSelector)(p,e=>e&&e.pageCount),y=Object(n.createSelector)(m,e=>e&&e.pageCount)},"./src/packages/issue/issue-view/src/selectors/context-panel-selector.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return r})),s.d(t,"a",(function(){return o}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");const i=Object(n.createSelector)(a.J,e=>e.contextPanel),r=Object(n.createSelector)(i,e=>e&&e.isContextPanelOpen),o=Object(n.createSelector)(i,e=>e&&e.contextPanelItem)},"./src/packages/issue/issue-view/src/selectors/drafts/selectors.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");const i=Object(n.createSelector)(a.J,e=>e.drafts),r=e=>Object(n.createSelector)(i,t=>!!t[e])},"./src/packages/issue/issue-view/src/selectors/ecosystem-glance-ui-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");const i=Object(n.createSelector)(a.J,e=>e.ecosystem&&e.ecosystem.glance)},"./src/packages/issue/issue-view/src/selectors/issue-actions-permissions-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i})),s.d(t,"c",(function(){return r})),s.d(t,"f",(function(){return o})),s.d(t,"d",(function(){return c})),s.d(t,"b",(function(){return l})),s.d(t,"e",(function(){return u}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js");const i=Object(n.createSelector)(a.g,e=>e.canCloneIssue),r=Object(n.createSelector)(a.g,e=>e.canDeleteIssue),o=Object(n.createSelector)(a.g,e=>e.canMoveIssue),c=Object(n.createSelector)(a.g,e=>e.canEditIssues),l=Object(n.createSelector)(a.g,e=>e.canAdministerJira||e.canAdministerProject),u=(Object(n.createSelector)(a.g,e=>e.canAssignIssues),Object(n.createSelector)(a.g,e=>e.canLinkIssues))},"./src/packages/issue/issue-view/src/selectors/issue-actions-selector.js":function(e,t,s){"use strict";s.d(t,"h",(function(){return f})),s.d(t,"i",(function(){return h})),s.d(t,"d",(function(){return y})),s.d(t,"c",(function(){return O})),s.d(t,"e",(function(){return j})),s.d(t,"b",(function(){return E})),s.d(t,"a",(function(){return v})),s.d(t,"g",(function(){return k})),s.d(t,"f",(function(){return w}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),r=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js"),o=s("./src/packages/issue/issue-view/src/feature-flags.js"),c=s("./src/packages/issue/issue-view/src/selectors/changeboarding-selector.js"),l=s("./src/packages/issue/issue-view/src/selectors/classic-project-config-selector.js"),u=s("./src/packages/issue/issue-view/src/selectors/issue-actions-permissions-selector.js"),d=s("./src/packages/issue/issue-view/src/selectors/request-type-selector.js"),p=s("./src/packages/issue/issue-view/src/selectors/subtask-types-selector.js"),m=s("./src/packages/issue/issue-view/src/selectors/subtasks-selector.js"),b=s("./src/packages/issue/issue-view/src/selectors/ui-config-selector.js");const f=Object(n.createSelector)(a.w,b.a,(e,t)=>Boolean(e)&&!t),g=Object(n.createSelector)(r.c,r.b,(e,t)=>e||t),h=Object(n.createSelector)(i.v,g,(e,t)=>t&&e),y=Object(n.createSelector)(i.h,a.u,(e,t)=>!e&&!t),O=Object(n.createSelector)(i.m,u.b,i.G,d.a,r.e,l.a,(e,t,s,n,a,i)=>{if(!e)return"hide";if(!t)return"disabled_permission";switch(s){case"service_desk":if(!Object(o.isNewIssueViewAdminOptionsPhase2ReplacementEnabled)()&&!Object(o.isJSDBentoEnabled)())return"hide";if(!a)return"disabled_permission";if(!n)return"disabled_no_request_type"}return i?"show":"disabled_no_screen_id"}),j=Object(n.createSelector)(O,e=>"show"===e),E=Object(n.createSelector)(m.c,m.b,p.b,i.m,(e,t,s,n)=>!e&&!t&&s&&n),v=Object(n.createSelector)(m.c,i.m,(e,t)=>e&&t),k=Object(n.createSelector)(i.u,c.f,(e,t)=>e||t),w=Object(n.createSelector)(i.u,c.e,(e,t)=>e||t)},"./src/packages/issue/issue-view/src/selectors/issue-links-selector.js":function(e,t,s){"use strict";s.d(t,"f",(function(){return f})),s.d(t,"n",(function(){return h})),s.d(t,"l",(function(){return y})),s.d(t,"i",(function(){return j})),s.d(t,"e",(function(){return E})),s.d(t,"d",(function(){return v})),s.d(t,"h",(function(){return k})),s.d(t,"b",(function(){return w})),s.d(t,"k",(function(){return S})),s.d(t,"c",(function(){return I})),s.d(t,"g",(function(){return C})),s.d(t,"j",(function(){return T})),s.d(t,"m",(function(){return P})),s.d(t,"o",(function(){return _})),s.d(t,"a",(function(){return x}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./node_modules/lodash/isEmpty.js"),i=s.n(a),r=s("./node_modules/lodash/pickBy.js"),o=s.n(r),c=s("./node_modules/lodash/toArray.js"),l=s.n(c),u=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");function d(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function p(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?d(Object(s),!0).forEach((function(t){m(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):d(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function m(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const b=Object(n.createSelector)(u.e,e=>e.issueLinks),f=Object(n.createSelector)(b,e=>!!e),g=Object(n.createSelector)(b,e=>e&&e.issueLinks),h=e=>{var t;return(null===(t=e.entities.remoteIssueLinks)||void 0===t?void 0:t.remoteIssues)||[]},y=Object(n.createSelector)(g,e=>e&&o()(e,e=>e.isOptimistic)),O=Object(n.createSelector)(b,e=>e&&e.linkedIssues),j=Object(n.createSelector)(b,e=>e?e.linkedIssueKeys:[]),E=Object(n.createSelector)(g,e=>!i()(e)),v=Object(n.createSelector)(g,h,(e,t)=>!i()(e)||!i()(t)),k=Object(n.createSelector)(j,e=>e.length),w=Object(n.createSelector)(j,h,(e,t)=>e.length+t.length),S=Object(n.createSelector)(g,O,(e,t)=>i()(e)?null:l()(e).filter(e=>!e.isDeleted).map(e=>p(p({},e),{},{linkedIssue:t[e.linkedIssueKey]})).reduce((e,t)=>Object.assign(e,{[t.typeName]:[...e[t.typeName]||[],t]}),{})),I=Object(n.createSelector)(S,h,(e,t)=>{if(null==e&&0===t.length)return null;const s=e=>({id:e.remoteIssueId,issueKey:e.issueKey,issueLink:e.issueLinkUrl,issueSummary:e.summary,issueTypeIconUrl:e.iconUrl});return t.reduce((e,t)=>{const{issueDetails:n,relationship:a,id:i,issueKey:r,issueLinkUrl:o,remoteIssueLinkError:c,globalId:l,isSaved:u,isLoading:d,isOptimistic:m,hasError:b,isDeleted:f}=t;return null!=a&&(e=>!e||"APPLINK_REQ_AUTH"===e.error)(c)&&!f?p(p({},e),{},{[a]:[...e[a]||[],{id:i.toString(),direction:"OUTWARD",typeName:a,linkedIssueKey:r,linkedIssue:n||s(t),isRemote:!0,globalId:l,remoteServerHostname:new URL(o).hostname,remoteIssueLinkError:c,isSaved:u,isLoading:d,isOptimistic:m,hasError:b}]}):e},p({},e))}),C=e=>Object(n.createSelector)(g,t=>t&&t[e]||null),T=e=>Object(n.createSelector)(O,t=>t&&t[e]||null),P=Object(n.createSelector)(b,e=>e&&e.quickAddClicked),_=Object(n.createSelector)(P,e=>!!e),x=Object(n.createSelector)(b,e=>e&&e.canCreateLinkedIssue)},"./src/packages/issue/issue-view/src/selectors/issue-links-type-selector.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return o})),s.d(t,"a",(function(){return c}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js"),r=s("./src/packages/issue/issue-view/src/selectors/issue-links-selector.js");const o=Object(n.createSelector)(a.e,e=>e.jiraSettings.issueLinkTypes),c=Object(n.createSelector)(i.g,r.f,o,({canLinkIssues:e},t,s)=>!!(e&&t&&s&&s.length))},"./src/packages/issue/issue-view/src/selectors/issue-remote-data-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");const i=Object(n.createSelector)(a.e,e=>e.issueRemoteData),r=Object(n.createSelector)(i,e=>e.isLoadingComplete)},"./src/packages/issue/issue-view/src/selectors/issue-types-selector.js":function(e,t,s){"use strict";s.d(t,"d",(function(){return c})),s.d(t,"b",(function(){return d})),s.d(t,"c",(function(){return p})),s.d(t,"a",(function(){return m}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./node_modules/lodash/isEmpty.js"),i=s.n(a),r=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),o=s("./src/packages/issue/issue-view/src/selectors/breadcrumbs-selector.js");const c=Object(n.createSelector)(r.e,e=>e.issueTypes),l=["summary","issuetype","parent","project"],u=e=>!!Object.keys(e).find(t=>!(e=>l.find(t=>e===t))(t)&&!e[t].hasDefaultValue&&e[t].required),d=e=>i()(e.fields)||u(e.fields),p=Object(n.createSelector)(c,o.g,r.r,(e,t,s)=>{const n=s&&t&&t.id;return e.filter(e=>!e.subtask&&e.id!==n)}),m=Object(n.createSelector)(r.J,e=>e.fetchIssueTypesStatus)},"./src/packages/issue/issue-view/src/selectors/project-selector.js":function(e,t,s){"use strict";s.d(t,"e",(function(){return r})),s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return l})),s.d(t,"d",(function(){return u})),s.d(t,"c",(function(){return d}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");const i=Object(n.createSelector)(a.e,e=>e.project),r=Object(n.createSelector)(i,e=>e?e.projectName:null),o=Object(n.createSelector)(i,e=>e?e.avatarUrl:null),c=Object(n.createSelector)(i,e=>e?e.issueTypeHierarchy:null),l=Object(n.createSelector)(c,e=>e?e.baseLevelId:null),u=Object(n.createSelector)(c,e=>e?e.levels:{}),d=Object(n.createSelector)(l,u,(e,t)=>{const s=[];if(!e||!t)return s;const n=t[e];if(!n)return s;let a=n.belowLevelId?t[n.belowLevelId]:void 0;for(;void 0!==a;)s.push(a),a=a.belowLevelId?t[a.belowLevelId]:void 0;return s})},"./src/packages/issue/issue-view/src/selectors/request-panel-metadata-selector.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return i})),s.d(t,"c",(function(){return r})),s.d(t,"a",(function(){return o}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");const i=Object(n.createSelector)(a.e,e=>e.requestPanelMetadata.channel),r=Object(n.createSelector)(a.e,e=>e.requestPanelMetadata.requestUrl||""),o=Object(n.createSelector)(a.e,e=>e.requestPanelMetadata.csatComment||"")},"./src/packages/issue/issue-view/src/selectors/request-type-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return c}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),i=s("./src/packages/issue/issue-view/src/selectors/breadcrumbs-selector.js");const r=e=>e&&e.value&&e.value.requestType&&e.value.requestType.id,o=(Object(n.createSelector)(Object(a.e)("com.atlassian.servicedesk:vp-origin"),r),Object(n.createSelector)(Object(a.e)("com.atlassian.servicedesk:vp-origin"),i.e,(e,t)=>e&&e.value&&e.value.requestType&&e.value.requestType.issueTypeId===t?e:null)),c=Object(n.createSelector)(o,r)},"./src/packages/issue/issue-view/src/selectors/status-selector.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return r})),s.d(t,"c",(function(){return o})),s.d(t,"a",(function(){return c}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/platform/utils/constants/src/status-categories.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js");const r=Object(n.createSelector)(Object(i.o)("status"),e=>e?Object(a.statusCategoryForId)(e.statusCategory.id):null),o=Object(n.createSelector)(Object(i.o)("status"),e=>({name:e.name,id:e.id,statusCategory:{id:e.statusCategory.id,name:e.statusCategory.name}})),c=Object(n.createSelector)(Object(i.o)("resolution"),e=>e&&e.name)},"./src/packages/issue/issue-view/src/selectors/subtask-types-selector.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return i})),s.d(t,"b",(function(){return r})),s.d(t,"a",(function(){return o}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/selectors/issue-types-selector.js");const i=Object(n.createSelector)(a.d,e=>e.filter(e=>e.subtask)),r=Object(n.createSelector)(i,e=>e.length>=1),o=Object(n.createSelector)(i,e=>!!e.find(a.b))},"./src/packages/issue/issue-view/src/selectors/subtasks-selector.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return u})),s.d(t,"d",(function(){return d})),s.d(t,"b",(function(){return p})),s.d(t,"a",(function(){return f}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),r=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js"),o=s("./src/packages/issue/issue-view/src/selectors/breadcrumbs-selector.js");const c=Object(n.createSelector)(e=>e.validators,e=>{const t=e.projectHasSubtaskValidators;return(e=>"LOADED"===e.status&&e.value)(t)||(e=>"LOADING"===e.status||"FAILED"===e.status)(t)});var l=s("./src/packages/issue/issue-view/src/selectors/subtask-types-selector.js");const u=Object(n.createSelector)(o.g,e=>!(!e||!e.subtask)),d=Object(n.createSelector)(i.e,e=>e.subtasks),p=Object(n.createSelector)(d,e=>e.length>0),m=Object(n.createSelector)(l.a,c,(e,t)=>e||t),b=Object(n.createSelector)(i.e,({jiraSettings:e})=>e.subtasksConfiguration.enabled),f=Object(n.createSelector)(r.g,u,l.b,m,a.u,a.q,a.v,i.v,b,({canCreateSubtask:e},t,s,n,a,i,r,o,c)=>!(!e||t||!s||!!n&&(a||i)||!(!r||!o)||!c))},"./src/packages/issue/issue-view/src/selectors/tab-selector.js":function(e,t,s){"use strict";s.d(t,"d",(function(){return u})),s.d(t,"a",(function(){return d})),s.d(t,"c",(function(){return b})),s.d(t,"b",(function(){return f}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./node_modules/memoize-one/dist/memoize-one.esm.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/field-visibility-selector.js"),r=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");function o(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function c(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?o(Object(s),!0).forEach((function(t){l(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function l(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const u=Object(n.createSelector)(r.c,e=>e&&e.tabs||{}),d=e=>Object(n.createSelector)(u,t=>Boolean(Object.keys(t).find(s=>t[s].items.find(t=>t.id===e)))),p=(e,t)=>t,m=(e,t)=>{if(e===t)return!0;if(Array.isArray(e)&&Array.isArray(t)){const s=t;return e.map(e=>e.id).sort().join("")===s.map(e=>e.id).sort().join("")}return!1},b=()=>{const e=Object(a.a)((e,t)=>c(c({},e),{},{items:t}),m);return Object(n.createSelector)((()=>Object(n.createSelector)(u,p,(e,t)=>e[t]||null))(),e=>e,(t,s)=>{if(!t)return null;const n=t.items.filter(({id:e})=>!!Object(i.c)(e,s));return n.length>0?e(t,n):null})},f=(e,t)=>{if(!t)return!1;return!!b()(e,t)}},"./src/packages/issue/issue-view/src/selectors/ui-config-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");const i=Object(n.createSelector)(a.J,e=>e.uiConfig),r=Object(n.createSelector)(i,e=>Boolean(e&&e.newIssueViewLockedIn))},"./src/packages/issue/issue-view/src/selectors/web-links-selector.js":function(e,t,s){"use strict";s.d(t,"f",(function(){return o})),s.d(t,"d",(function(){return c})),s.d(t,"a",(function(){return l})),s.d(t,"e",(function(){return u})),s.d(t,"b",(function(){return d})),s.d(t,"c",(function(){return p}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js");const r=Object(n.createSelector)(a.e,e=>e.webLinks),o=Object(n.createSelector)(r,e=>e.links.filter(e=>void 0===e.isDeleting||!0!==e.isDeleting)),c=e=>Object(n.createSelector)(o,t=>t.find(t=>t.id===e)),l=Object(n.createSelector)(r,i.g,(e,t)=>!0===e.isLinkingEnabled&&t.canLinkIssues),u=Object(n.createSelector)(r,e=>e.linkCount),d=Object(n.createSelector)(r,e=>e.createClickCount),p=Object(n.createSelector)(d,e=>e>0)},"./src/packages/issue/issue-view/src/utils/is-valid-experience-error.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return i}));var n=s("./src/packages/platform/utils/fetch/src/utils/errors.js");const a=[400,403,401,404,409,412],i=e=>e>=400&&e<=499&&429!==e;t.a=e=>!(e instanceof n.a)&&(!(e instanceof n.b&&e.statusCode&&(e=>a.some(t=>t===e))(e.statusCode))&&("TypeError"!==e.name&&"AbortError"!==e.name))},"./src/packages/issue/issue-view/src/utils/issue-view-fetch-error.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s("./src/packages/platform/utils/fetch/src/utils/errors.js");class a extends Error{constructor(e,t){if(e instanceof a)return e;super(e.message),this.endpoint=void 0,this.traceId=void 0,this.error=void 0,this.statusCode=void 0,this.error=e,this.message=e.message,e instanceof n.b&&(null!=e.traceId&&(this.traceId=e.traceId),this.statusCode=e.statusCode),this.endpoint=t}}},"./src/packages/issue/issue-view/src/utils/prefetched-resources/index.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return w})),s.d(t,"a",(function(){return S})),s.d(t,"c",(function(){return I}));var n=s("./node_modules/react/index.js"),a=s("./node_modules/react-resource-router/build/esm/index.js"),i=s("./src/packages/routes/src/ui/spa/issue/resources/issue-media-user-auth/index.js"),r=s("./src/packages/routes/src/ui/spa/issue/resources/issue-media-upload-permissions/index.js"),o=s("./src/packages/routes/src/ui/spa/issue/resources/issue-media-read-permissions/index.js"),c=s("./src/packages/routes/src/ui/spa/issue/resources/issue-gira-data/index.js"),l=s("./src/packages/routes/src/ui/spa/issue/resources/issue-graphql-data/index.js"),u=s("./src/packages/routes/src/ui/spa/issue/resources/issue-forge-data/index.js"),d=s("./src/packages/issue/issue-view/src/feature-flags.js"),p=s("./src/packages/common-legacy-do-not-add-anything-new/src/performance/index.js"),m=s("./src/packages/issue/issue-fetch-services-common/src/feature-flags.js"),b=s("./src/packages/platform/services/spa-apdex-analytics/src/marks.js"),f=s("./src/packages/routes/src/ui/spa/issue/resources/utils.js");function g(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function h(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?g(Object(s),!0).forEach((function(t){y(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):g(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function y(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function O(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const j=e=>Object(m.d)()?(({next:e=(()=>{}),resourceManager:t,issueGiraDataPromise:s,issueGraphqlDataPromise:n})=>{let a=[];return window.issueResourceResponses?(t.setAllData(window.issueResourceResponses),delete window.issueResourceResponses,null):(Object(f.a)()&&(a=[window.issueResources.issueGiraDataPromise,window.issueResources.issueGraphqlDataPromise]),s&&n&&(a=[s,n]),0===a.length?null:()=>Promise.all(a).then(s=>{Object(p.setMark)(b.b);const[n,a]=s;return t.setAllData({mediaUserAuth:null,mediaUploadPermission:null,mediaReadPermission:null,issueGiraData:n,issueGraphqlData:a}),delete window.issueResources,e()}).catch(t=>(delete window.issueResources,e(t))))})(e):(({next:e=(()=>{}),resourceManager:t,mediaUserAuthPromise:s,mediaUploadPermissionPromise:n,mediaReadPermissionPromise:a,issueGiraDataPromise:i,issueGraphqlDataPromise:r})=>{let o=[];return window.issueResourceResponses?(t.setAllData(window.issueResourceResponses),delete window.issueResourceResponses,null):(Object(f.a)()&&(o=[window.issueResources.mediaUserAuthPromise,window.issueResources.mediaUploadPermissionPromise,window.issueResources.mediaReadPermissionPromise,window.issueResources.issueGiraDataPromise,window.issueResources.issueGraphqlDataPromise]),s&&n&&a&&i&&r&&(o=[s,n,a,i,r]),0===o.length?null:()=>Promise.all(o).then(s=>{Object(p.setMark)(b.b);const[n,a,i,r,o]=s;return t.setAllData({mediaUserAuth:n,mediaUploadPermission:a,mediaReadPermission:i,issueGiraData:r,issueGraphqlData:o}),delete window.issueResources,e()}).catch(t=>(delete window.issueResources,e(t))))})(e);var E=s("./src/packages/issue/issue-view/src/utils/prefetched-resources/prefetched-resource-manager/index.js");let v;const k=()=>{var e;return v=null!==(e=v)&&void 0!==e?e:new E.a,v},w=()=>{const e=k(),{data:t,promise:s}=Object(a.l)(i.a),{data:p,promise:m}=Object(a.l)(r.a),{data:b,promise:f}=Object(a.l)(o.a),{data:g,promise:h}=Object(a.l)(c.a),{data:y,promise:O}=Object(a.l)(l.a),{promise:j}=Object(a.l)(u.a);return Object(n.useMemo)(()=>{(Object(d.isRemoveMediaPromiseEnabled)()||f&&m&&s)&&h&&O&&(e.setAllPromises({mediaUserAuthPromise:s,mediaUploadPermissionPromise:m,mediaReadPermissionPromise:f,issueGiraDataPromise:h,issueGraphqlDataPromise:O}),e.setAllData({mediaUserAuth:t,mediaUploadPermission:p,mediaReadPermission:b,issueGiraData:g,issueGraphqlData:y})),j&&e.setForgePromise(j)},[j,g,h,y,O,b,f,p,m,t,s,e]),[e]},S=({resolveIssueApp:e,isServer:t,issue:s,isInitialRender:n})=>{const u=k();let p=null,b=null,g=null;Object(d.isfetchMediaTokensFromGiraEnabled)()||(({promise:p}=Object(a.l)(i.a)),({promise:b}=Object(a.l)(r.a)),({promise:g}=Object(a.l)(o.a)));const{promise:y}=Object(a.l)(c.a),{promise:E}=Object(a.l)(l.a);return[(e=>{let{resolveIssueApp:t,isServer:s,issue:n,isInitialRender:a}=e,i=O(e,["resolveIssueApp","isServer","issue","isInitialRender"]);return a&&Object(f.a)()&&i.resourceManager.setAllPromises(window.issueResources),Object(m.c)()?!s&&a&&j(h({next:t},i))||t:!s&&!!n&&a&&j(h({next:t},i))||t})({resolveIssueApp:e,isServer:t,issue:s,isInitialRender:n,resourceManager:u,mediaUserAuthPromise:p,mediaUploadPermissionPromise:b,mediaReadPermissionPromise:g,issueGiraDataPromise:y,issueGraphqlDataPromise:E})]},I=()=>{const e=Object(d.isfetchMediaTokensFromGiraEnabled)()?[Object(a.l)(c.a),Object(a.l)(l.a)]:[Object(a.l)(i.a),Object(a.l)(r.a),Object(a.l)(o.a),Object(a.l)(c.a),Object(a.l)(l.a)];return{loading:e.some(({loading:e})=>e),error:e.map(({error:e})=>e).find(Boolean)||null,promise:Promise.all(e.map(({promise:e})=>e)).then(()=>{})}}},"./src/packages/issue/issue-view/src/utils/prefetched-resources/prefetched-resource-manager/index.js":function(e,t,s){"use strict";var n=s("./src/packages/issue/issue-view/src/feature-flags.js");t.a=class{constructor(){this.issueMediaUserAuth=null,this.issueMediaReadPermission=null,this.issueMediaUploadPermission=null,this.issueGiraData=null,this.issueGraphqlData=null,this.issueForgeData=null,this.allData={},this.getGiraData=()=>this.allData.issueGiraData&&this.allData.issueGiraData.data,this.getGqlData=()=>this.allData.issueGraphqlData&&this.allData.issueGraphqlData.data,this.getMediaUser=()=>this.allData.mediaUserAuth,this.getMediaReadPermission=()=>this.allData.mediaReadPermission,this.getMediaUploadPermission=()=>this.allData.mediaUploadPermission,this.isAllDataReady=()=>Object(n.isfetchMediaTokensFromGiraEnabled)()?!(!this.getGiraData()||!this.getGqlData()):!!(this.getGiraData()&&this.getGqlData()&&this.getMediaUser()&&this.getMediaUploadPermission()&&this.getMediaReadPermission()),this.containsInitialPromises=()=>!!(this.issueMediaUploadPermission&&this.issueMediaUserAuth&&this.issueMediaReadPermission&&this.issueGiraData&&this.issueGraphqlData)}setAllData(e){this.allData=e}setAllPromises(e){this.issueMediaUserAuth=e.mediaUserAuthPromise,this.issueMediaUploadPermission=e.mediaUploadPermissionPromise,this.issueMediaReadPermission=e.mediaReadPermissionPromise,this.issueGiraData=e.issueGiraDataPromise,this.issueGraphqlData=e.issueGraphqlDataPromise}setForgePromise(e){this.issueForgeData=e}getAllPromises(){return[this.issueMediaUserAuth,this.issueMediaUploadPermission,this.issueMediaReadPermission,this.issueGiraData,this.issueGraphqlData]}clearAll(){this.allData={},this.issueMediaReadPermission=null,this.issueMediaUploadPermission=null,this.issueMediaUserAuth=null,this.issueGiraData=null,this.issueForgeData=null,this.issueGraphqlData=null}}},"./src/packages/issue/issue-view/src/utils/prefetched-resources/utils/fallback-on-error.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s("./node_modules/rxjs/Rx.js"),a=s("./src/packages/issue/issue-view/src/feature-flags.js");const i=(e,t)=>e?Object(a.isBentoPrefetchErrorFixEnabled)()?n.Observable.fromPromise(e).catch(t):n.Observable.fromPromise(e):t()},"./src/packages/issue/issue-view/src/views/assign-issue-parent-modal/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-redux/es/index.js"),r=s("./node_modules/react-loosely-lazy/lib/esm/index.js"),o=s("./src/packages/assign-issue-parent-modal/src/async.js"),c=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/modal-dialog/index.js"),l=s("./src/packages/issue/issue-view/src/actions/assign-issue-parent-modal-actions.js"),u=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),d=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),p=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/hierarchy-level-selector.js"),m=s("./src/packages/issue/issue-view/src/selectors/assign-issue-parent-modal-selector.js");function b(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const f=Object(r.f)(()=>Promise.all([s.e("vendor~748942c6"),s.e("vendor~31ecd969"),s.e("async-assign-issue-parent-modal")]).then(s.bind(null,"./src/packages/assign-issue-parent-modal/src/index.js")),{moduleId:"./src/packages/assign-issue-parent-modal/src/index.js"}),g=e=>{let{isOpen:t}=e,s=b(e,["isOpen"]);return(a.a.createElement(c.f,null,t&&a.a.createElement(o.a,{packageName:"issue"},a.a.createElement(f,s))))};g.displayName="ModalWithTransition",t.a=Object(i.b)(e=>{const t=Object(u.b)(e);return{isOpen:Object(m.b)(e),issues:Object(m.a)(e),issueParents:Object(d.C)(e),issueHierarchyLevel:Object(p.d)(e),issueParentTypeIds:Object(p.e)(e),shouldHideUnassignOption:Object(p.c)(e),parentIssueTypeName:Object(p.f)(e)[0],locale:Object(u.D)(e),baseUrl:Object(u.g)(e),projectId:Object(d.D)(e),analyticsSource:`issue-view (${t?t.toString():"undefined"})`}},e=>({onClose:()=>{e(Object(l.d)())},onSubmit:(t,s,n,a)=>{e(Object(l.e)(t,n,a))}}))(g)},"./src/packages/issue/issue-view/src/views/banner/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react-redux/es/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");var r=({renderTopBanner:e,applicationKey:t,isProjectSimplified:s})=>e?e(t,s):null;t.a=Object(n.b)(e=>({applicationKey:Object(a.e)(e),isProjectSimplified:Object(i.v)(e)}),{})(r)},"./src/packages/issue/issue-view/src/views/changeboarding/banner/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-intl/lib/index.es.js"),r=s("./node_modules/react-redux/es/index.js"),o=s("./node_modules/lodash/flow.js"),c=s.n(o),l=s("./src/packages/platform/observability/analytics-web-react/src/utils/component-with-analytics.js"),u=s("./src/packages/platform/observability/analytics-web-react/src/components/with-fire-ui-analytics.js"),d=s("./src/packages/engagement/src/ui/coordination-client/index.js"),p=s("./src/packages/issue/issue-view/src/actions/changeboarding-actions.js"),m=s("./src/packages/issue/issue-view/src/common/service/issue/changeboarding-local-storage.js"),b=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),f=s("./src/packages/issue/issue-view/src/selectors/changeboarding-selector.js"),g=s("./node_modules/lodash/noop.js"),h=s.n(g),y=s("./node_modules/@atlaskit/button--current/dist/es2019/theme.js"),O=s("./node_modules/@atlaskit/button--current/dist/es2019/components/Button.js"),j=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/animations/slide-down-on-mount.js"),E=Object(i.defineMessages)({summary:{id:"issue.changeboarding-summary",defaultMessage:"We're working on a more consistent issue view to help you find and update important details."},startButton:{id:"issue.changeboarding-start",defaultMessage:"See the highlights"},dismissButton:{id:"issue.changeboarding-dismiss",defaultMessage:"Maybe later"}}),v=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),k=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),w=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js"),S=s("./src/packages/common-legacy-do-not-add-anything-new/src/theme/index.js");const I=v.default.div(["display:flex;flex-wrap:wrap;align-content:space-between;background-color:",";color:",";border-radius:","px;position:relative;padding:","px ","px 0 ","px;justify-content:center;"],k.a.P300,k.a.N0,w.e/2,2*w.e,2*w.e,2*w.e),C=v.default.div(["display:flex;flex-wrap:wrap;flex-direction:row;align-items:center;text-align:center;"]),T=v.default.div(["display:flex;align-items:center;padding-bottom:","px;"],2*w.e),P=v.default.div(["padding-right:","px;padding-bottom:","px;"],w.e,2*w.e),_=v.default.div(["padding-right:","px;"],w.e),x=Object(S.a)({buttonStyles:{default:{background:{default:k.a.P200,hover:k.a.P100,active:k.a.P400},color:k.a.N0}}}),D=Object(S.a)({buttonStyles:{default:{background:{default:k.a.P300,hover:k.a.P200,active:k.a.P400},color:k.a.N0}}});class A extends n.PureComponent{componentDidMount(){this.props.onMount(this.props.seenTimes,this.props.firstSeenTimestamp)}render(){return a.a.createElement(j.a,null,a.a.createElement(I,null,a.a.createElement(C,null,a.a.createElement(P,null,this.props.intl.formatMessage(E.summary))),a.a.createElement(T,null,a.a.createElement(_,null,a.a.createElement(y.a.Provider,{value:x},a.a.createElement(O.a,{onClick:this.props.onStart},this.props.intl.formatMessage(E.startButton)))),a.a.createElement(y.a.Provider,{value:D},a.a.createElement(O.a,{onClick:this.props.onClose},this.props.intl.formatMessage(E.dismissButton))))))}}A.displayName="ChangeboardingBanner",A.defaultProps={onStart:h.a,onClose:h.a,onMount:h.a};class M extends n.Component{render(){const{firstSeenTimestamp:e,intl:t,onClose:s,onMount:n,onStart:i,isVisible:r,seenTimes:o}=this.props;return r?a.a.createElement(d.b,{messageId:"bento-changeboarding-banner"},a.a.createElement(A,{intl:t,firstSeenTimestamp:e,seenTimes:o,onStart:i,onClose:s,onMount:n})):null}}M.displayName="ChangeboardingBannerView";t.a=c()(Object(l.a)("banner",{onMount:"viewed"}),Object(u.a)({onStart:"bannerStartChangeboardingTour",onClose:"bannerDismissChangeboardingTour",onMount:"changeboarding"}),Object(r.b)(e=>({isVisible:Object(f.d)(e),cloudId:Object(b.j)(e),seenTimes:Object(m.b)(),firstSeenTimestamp:Object(m.a)()}),{onStart:()=>Object(p.c)(Date.now()),onClose:()=>Object(p.a)(Date.now()),onMount:(e,t)=>Object(p.b)(e,t)}),i.injectIntl)(M)},"./src/packages/issue/issue-view/src/views/changeboarding/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react-intl/lib/index.es.js"),a=s("./node_modules/react-redux/es/index.js"),i=s("./node_modules/lodash/flow.js"),r=s.n(i),o=s("./src/packages/platform/observability/analytics-web-react/src/utils/component-with-analytics.js"),c=s("./src/packages/platform/observability/analytics-web-react/src/components/with-fire-ui-analytics.js"),l=s("./src/packages/issue/changeboarding/src/ui/main.js"),u=s("./src/packages/issue/issue-view/src/actions/changeboarding-actions.js"),d=s("./src/packages/issue/issue-view/src/common/service/issue/issue-view-mode.js"),p=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),m=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/layout-items-selector.js"),b=s("./src/packages/issue/issue-view/src/selectors/changeboarding-selector.js"),f=s("./node_modules/reselect/lib/index.js"),g=s("./src/packages/issue/issue-view/src/selectors/attachment-selector.js"),h=s("./src/packages/issue/issue-view/src/selectors/confluence-app-links-selector.js"),y=s("./src/packages/issue/issue-view/src/selectors/issue-links-type-selector.js");const O=Object(f.createSelector)(g.b,y.a,h.a,(e,t,s)=>e||t||s);var j=Object(n.defineMessages)({quickAdds:{id:"changeboarding.bento.step.quickAdds",defaultMessage:"Quickly add attachments, issue links, subtasks, as well as Marketplace app content."},quickAddsWithNoPermissions:{id:"changeboarding.bento.step.quickAddsWithNoPermissions",defaultMessage:"For projects where you have permission, the quick-add buttons let you add attachments, linked issues, subtasks, and content from Atlassian Marketplace apps."},editAnyField:{id:"changeboarding.bento.step.editAnyField",defaultMessage:"A single screen for view and edit lets you click any field to update it."},showMore:{id:"changeboarding.bento.step.showMore",defaultMessage:"All the finer details of the issue are here when you need them."},showMoreWhenNoExpander:{id:"changeboarding.bento.step.showMoreWhenNoExpander",defaultMessage:'Looking for a field but can\'t see it? Fields without a value appear under "Show more".'},boardSidebar:{id:"changeboarding.bento.step.boardSidebar",defaultMessage:"Prefer to open issues as a sidebar? The choice is yours."},giveFeedback:{id:"changeboarding.bento.step.giveFeedback",defaultMessage:"You're part of the team! Leave feedback and help us build the best issue view."},next:{id:"changeboarding.bento.next",defaultMessage:"Next"},skip:{id:"changeboarding.bento.skip",defaultMessage:"Skip"},done:{id:"changeboarding.bento.done",defaultMessage:"Done"},optInBackQuickAdd:{id:"changeboarding.bento.optInBackQuickAdd",defaultMessage:"Add attachments, link related issues, or click the down arrow to link web pages and other content."},optInBackEditField:{id:"changeboarding.bento.optInBackEditField",defaultMessage:"No more viewing and editing fields from different screens. In this view, you can update any field just by clicking into it."},optInBackShowMore:{id:"changeboarding.bento.optInBackShowMore",defaultMessage:"This view can be customized to suit your needs. Your admin can choose which fields to always display and which ones to hide when empty."},optInBackBoardSidebar:{id:"changeboarding.bento.optInBackBoardSidebar",defaultMessage:"Learn more about this view, switch back to the old one, or if you just want to see the old view temporarily, you can do it from here."}}),E=s("./node_modules/react/index.js"),v=s.n(E),k=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),w=s("./node_modules/lodash/noop.js"),S=s.n(w),I=s("./node_modules/@atlaskit/icon/glyph/attachment.js"),C=s.n(I),T=s("./node_modules/@atlaskit/icon/glyph/link.js"),P=s.n(T),_=s("./node_modules/@atlaskit/icon/glyph/more.js"),x=s.n(_),D=s("./node_modules/@atlaskit/icon/glyph/subtask.js"),A=s.n(D),M=s("./node_modules/@atlaskit/onboarding/dist/es2019/styled/Target.js"),L=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js"),R=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/quick-add/quick-add-item/view.js");function N(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function U(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?N(Object(s),!0).forEach((function(t){F(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):N(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function F(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const V=k.default.div(["& button{cursor:default;}"]),K=(e,t)=>v.a.createElement(R.a,{key:e,id:e,icon:t,onClick:S.a});K.displayName="createItemView";const B=e=>{const t=U(U({overflow:"hidden",backgroundColor:"white"},e),{},{height:5*L.e,width:20*L.e,display:"inline-flex",paddingLeft:L.e,paddingTop:L.e/2,borderRadius:L.a}),s=K("ADD_ATTACHMENT_ID",v.a.createElement(C.a,{label:"",size:"medium"})),n=K("SUB_TASK",v.a.createElement(A.a,{label:"",size:"medium"})),a=K("LINK_ISSUE",v.a.createElement(P.a,{label:"",size:"medium"})),i=K("MORE_ICON",v.a.createElement(x.a,{label:"",size:"medium"}));return v.a.createElement(M.a,{style:t},v.a.createElement(V,null,s,n,a,i))};B.displayName="QuickAddsReplacement";var W=s("./src/packages/issue/issue-view/src/views/issue-base/context/context-items/view/expander/show-more-button/view.js"),H=Object(n.defineMessages)({timeTracking:{id:"changeboarding.bento.step.show-more.time-tracking",defaultMessage:"Time tracking"},originalEstimate:{id:"changeboarding.bento.step.show-more.original-estimate",defaultMessage:"Original estimate"},components:{id:"changeboarding.bento.step.show-more.components",defaultMessage:"Components"}});function G(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function $(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?G(Object(s),!0).forEach((function(t){q(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):G(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function q(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function z(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const Y=k.default.div(["& button{cursor:default;}"]),Q=e=>{let{intl:t}=e,s=z(e,["intl"]);const n=$($({overflow:"hidden",color:"rgb(0, 82, 204)",backgroundColor:"white",paddingTop:L.e/2},s),{},{height:7*L.e,borderRadius:L.a}),a=[t.formatMessage(H.timeTracking),t.formatMessage(H.originalEstimate),t.formatMessage(H.components)];return v.a.createElement(M.a,{style:n},v.a.createElement(Y,null,v.a.createElement(W.a,{visibleSecondaryContextItemNameList:a,fieldCount:a.length,onExpand:()=>{}})))};Q.displayName="ShowMoreReplacementIntl";var J=Object(n.injectIntl)(Q);var Z={stepsForContext:e=>{const t=["QUICK_ADDS"];return e.isAssigneeVisible&&t.push("EDIT_FIELD"),t.push("SHOW_MORE"),e.isBoardModalView&&t.push("BOARD_SIDEBAR"),e.isFeedbackEnabled&&t.push("GIVE_FEEDBACK"),t},steps:{QUICK_ADDS:e=>{const t=e.hasQuickAddPermissions?void 0:B;return{placement:"",message:e.hasQuickAddPermissions?j.quickAdds:j.quickAddsWithNoPermissions,targetReplacement:t}},EDIT_FIELD:()=>({placement:"left top",message:j.editAnyField}),BOARD_SIDEBAR:()=>({placement:"bottom center",message:j.boardSidebar}),GIVE_FEEDBACK:()=>({placement:"bottom center",message:j.giveFeedback}),SHOW_MORE:e=>({placement:"top left",message:e.hasShowMoreLink?j.showMore:j.showMoreWhenNoExpander,targetReplacement:J})}};const X=Object(n.injectIntl)(l.a);t.a=r()(Object(o.a)("button",{onTourEnd:"clicked"}),Object(c.a)({onTourEnd:e=>({name:"finishIssueChangeboardingTour",hasQuickAddPermissions:e.hasQuickAddPermissions,hasShowMoreLink:e.hasShowMoreLink})}),Object(a.b)((e,t)=>{const s=Object(p.b)(e);return{isTourActive:Object(b.c)(e),recipeContext:{isBoardModalView:s&&"software-issue"===s.valueOf()&&!Object(d.b)(),hasQuickAddPermissions:O(e),hasShowMoreLink:Object(m.d)(e),isAssigneeVisible:Object(b.a)(e),isFeedbackEnabled:t.isFeedbackEnabled},recipe:Z}},{onTourEnd:u.d}))(X)},"./src/packages/issue/issue-view/src/views/changeboarding/ui/main.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-redux/es/index.js"),r=s("./src/packages/issue/opt-in-back/src/async.js"),o=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/layout-items-selector.js"),c=s("./src/packages/issue/issue-view/src/selectors/changeboarding-selector.js");const l=({hasEditField:e,hasShowMoreLink:t})=>{const s={hasShowMoreLink:t,hasEditField:e};return(a.a.createElement(r.b,s))};l.displayName="ChangeBoardingTour";const u=Object(i.b)(e=>({hasEditField:Object(c.a)(e),hasShowMoreLink:Object(o.d)(e)}),{})(l);t.a=u},"./src/packages/issue/issue-view/src/views/common/button/square-add-icon-button.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return p}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/lodash/noop.js"),r=s.n(i),o=s("./node_modules/@atlaskit/button--current/dist/es2019/components/Button.js"),c=s("./node_modules/@atlaskit/icon/glyph/add.js"),l=s.n(c),u=s("./src/packages/issue/issue-view/src/feature-flags.js");function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}class p extends n.Component{render(){const{label:e,onClick:t}=this.props;return(a.a.createElement("div",null,!Object(u.isRemovalOfDeprecatedStylesEnabled)()&&a.a.createElement("style",null,".squareButtonWithIcon { padding: 0 6px }"),a.a.createElement(o.a,d({appearance:"subtle",spacing:"compact",iconBefore:a.a.createElement(l.a,{size:"small",label:e}),onClick:t},!Object(u.isRemovalOfDeprecatedStylesEnabled)()&&{className:"squareButtonWithIcon"}))))}}p.displayName="SquareAddIconButton",p.defaultProps={onClick:r.a}},"./src/packages/issue/issue-view/src/views/common/compact-mode-provider/index.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return p})),s.d(t,"a",(function(){return m}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/lodash/throttle.js"),r=s.n(i),o=s("./node_modules/@atlaskit/width-detector/dist/es2019/WidthObserver/index.js"),c=s("./src/packages/issue/issue-view/src/views/common/style-wrappers/styled.js");const l=s("./node_modules/styled-components/dist/styled-components.browser.esm.js").default.div(["height:100%;display:flex;flex-direction:column;"]),{Provider:u,Consumer:d}=Object(n.createContext)(!1),p=({children:e,defaultIsCompact:t})=>{const[s,i]=Object(n.useState)(t),d=r()(i,50);return a.a.createElement(a.a.Fragment,null,a.a.createElement(c.a,null,a.a.createElement(o.a,{setWidth:e=>{d(null!=e&&e<=600)}})),a.a.createElement(l,null,a.a.createElement(u,{value:s},e)))},m=d},"./src/packages/issue/issue-view/src/views/common/experience-tracking/common/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=e=>e.displayName||e.name||"Component"},"./src/packages/issue/issue-view/src/views/common/experience-tracking/edit-experience/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return d})),s.d(t,"b",(function(){return m}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-redux/es/index.js"),r=s("./src/packages/common-legacy-do-not-add-anything-new/src/experience-tracking/editing/index.js"),o=s("./src/packages/issue/issue-view/src/common/state/selectors/application-selector.js"),c=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),l=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),u=s("./src/packages/issue/issue-view/src/views/common/experience-tracking/common/index.js");const d=Object(i.b)(e=>({experience:"editIssue",application:Object(o.b)(e),edition:Object(o.a)(e),analyticsSource:Object(c.b)(e)}),{})(r.b),p=Object(i.b)((e,t)=>({field:t.fieldId,isEditing:Object(l.B)(t.fieldId)(e)}),{})(r.a),m=e=>t=>{const s=s=>a.a.createElement(p,{fieldId:e},a.a.createElement(t,s));return s.displayName=`WithEditExperienceTracker(${Object(u.a)(t)})`,s}},"./src/packages/issue/issue-view/src/views/common/experience-tracking/view-experience/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return f})),s.d(t,"c",(function(){return g})),s.d(t,"b",(function(){return h}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-redux/es/index.js"),r=s("./src/packages/common-legacy-do-not-add-anything-new/src/experience-tracking/viewing/index.js"),o=s("./src/packages/issue/issue-view/src/common/state/selectors/application-selector.js"),c=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),l=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),u=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");const d=e=>e.ui.viewMountStatus.hasIssueViewMounted;var p=s("./src/packages/issue/issue-view/src/views/common/experience-tracking/common/index.js");const m={description:"ALWAYS_TRACKING",ecosystemGlance:"NEVER_TRACKING",forgeGlance:"NEVER_TRACKING",assignee:"NEVER_TRACKING",reporter:"NEVER_TRACKING","com.pyxis.greenhopper.jira:gh-sprint":"NEVER_TRACKING","com.atlassian.jira.plugin.system.customfieldtypes:storypoint":"NEVER_TRACKING","com.pyxis.greenhopper.jira:gh-epic-link":"NEVER_TRACKING",fixVersions:"NEVER_TRACKING",versions:"NEVER_TRACKING",devSummary:"NEVER_TRACKING",releases:"NEVER_TRACKING","com.atlassian.servicedesk.assets-plugin:assetfield":"NEVER_TRACKING",ASSET_ONBOARDING:"NEVER_TRACKING","com.atlassian.jira.plugins.service-entity:service-entity-field-cftype":"NEVER_TRACKING",labels:["requestDetailsPanel"],components:["requestDetailsPanel"],duedate:["requestDetailsPanel"],priority:["requestDetailsPanel"],environment:["requestDetailsPanel"],labels:["requestDetailsPanel"],components:["requestDetailsPanel"],"com.atlassian.servicedesk.approvals-plugin:sd-approvals":["requestDetailsPanel"],KNOWLEDGE_BASE:["requestDetailsPanel"],SLA_PANEL:["requestDetailsPanel"],timeoriginalestimate:["requestDetailsPanel"],timetracking:["requestDetailsPanel"],"com.atlassian.jpo:jpo-custom-field-parent":["requestDetailsPanel"],"com.atlassian.jpo:jpo-custom-field-baseline-start":["requestDetailsPanel"],"com.atlassian.jpo:jpo-custom-field-baseline-end":["requestDetailsPanel"],"com.atlassian.jira.plugin.system.customfieldtypes:labels":["requestDetailsPanel"],"com.atlassian.jira.plugin.system.customfieldtypes:textfield":["requestDetailsPanel"],"com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker":["requestDetailsPanel"],"com.atlassian.jira.plugin.system.customfieldtypes:url":["requestDetailsPanel"],"com.atlassian.jira.plugin.system.customfieldtypes:float":["requestDetailsPanel"],"com.pyxis.greenhopper.jira:jsw-story-points":["requestDetailsPanel"],"com.atlassian.jira.plugin.system.customfieldtypes:select":["requestDetailsPanel"],"com.atlassian.jira.plugin.system.customfieldtypes:multiselect":["requestDetailsPanel"],"com.atlassian.jira.plugin.system.customfieldtypes:textarea":["requestDetailsPanel"],"com.atlassian.jira.plugin.system.customfieldtypes:multiversion":["requestDetailsPanel"],"com.atlassian.jira.plugin.system.customfieldtypes:version":["requestDetailsPanel"],"com.atlassian.jira.plugin.system.customfieldtypes:datepicker":["requestDetailsPanel"],"com.atlassian.jira.plugin.system.customfieldtypes:grouppicker":["requestDetailsPanel"],"com.atlassian.jira.plugin.system.customfieldtypes:multigrouppicker":["requestDetailsPanel"],"com.atlassian.jira.plugin.system.customfieldtypes:userpicker":["requestDetailsPanel"],"com.atlassian.jira.plugin.system.customfieldtypes:datetime":["requestDetailsPanel"],"com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes":["requestDetailsPanel"],"com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons":["requestDetailsPanel"],"com.atlassian.teams:rm-teams-custom-field-team":["requestDetailsPanel"],number:["requestDetailsPanel"],datetime:["requestDetailsPanel"],string:["requestDetailsPanel"],option2:["requestDetailsPanel"],array:["requestDetailsPanel"],"com.atlassian.servicedesk:vp-origin":["requestDetailsPanel"],"com.atlassian.servicedesk:sd-request-participants":["requestDetailsPanel"],"com.atlassian.servicedesk:sd-customer-organizations":["requestDetailsPanel"],"com.atlassian.servicedesk:sd-request-feedback":["requestDetailsPanel"],"com.pyxis.greenhopper.jira:jsw-issue-color":["requestDetailsPanel"],"com.atlassian.jira.plugin.system.customfieldtypes:people":["requestDetailsPanel"],"com.atlassian.servicedesk.servicedesk-lingo-integration-plugin:sd-request-language":["requestDetailsPanel"],"com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect":["requestDetailsPanel"]};function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const f=Object(i.b)(e=>({experience:"viewIssue",experienceId:Object(c.B)(e),application:Object(o.b)(e),edition:Object(o.a)(e),analyticsSource:Object(c.b)(e),isExperienceReady:Object(u.n)(e)&&d(e)}),{})(r.e),g=e=>t=>{const s=s=>a.a.createElement(r.d,{location:e},({onExperienceSuccess:e})=>a.a.createElement(t,b({onExperienceSuccess:e},s)));return s.displayName=`WithViewExperienceTracker(${Object(p.a)(t)})`,s},h=e=>t=>{const s=({fieldType:s,ownProps:n})=>{const i=s&&(e=>{const t=m[e];return void 0===t?"NEVER_TRACKING":t})(s);if(null==s||"NEVER_TRACKING"===i)return a.a.createElement(t,n);const o=Array.isArray(i)?i:null,c=["field",s,...e?[e]:[]].join("-");return a.a.createElement(r.c,{location:c,parentProviders:o},a.a.createElement(t,n))};return s.displayName=`WithFieldViewExperienceTracker(${Object(p.a)(t)}`,Object(i.b)((e,t)=>({fieldType:Object(l.r)(t.fieldId)(e)}),null,({fieldType:e},t,s)=>({fieldType:e,ownProps:s}))(s)}},"./src/packages/issue/issue-view/src/views/common/issue-line-card/assets/authKey.svg":function(e,t,s){e.exports=s.p+"assets/authKey.82c7a3c6621aa4112a32c0ea0666160c.8.svg"},"./src/packages/issue/issue-view/src/views/common/issue-line-card/assets/server.svg":function(e,t,s){e.exports=s.p+"assets/server.5106affcbda64b0a9ff577fffabaa73a.8.svg"},"./src/packages/issue/issue-view/src/views/common/issue-page-grid/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),r=s("./node_modules/@atlaskit/page/dist/es2019/Grid.js"),o=s("./src/packages/issue/issue-view/src/views/common/issue-page-grid/styled.js");const c={columns:10};t.a=({children:e,isCompact:t=!1,hasMultipleScrollingColumns:s})=>a.a.createElement(i.ThemeProvider,{theme:c},a.a.createElement(o.a,{isCompact:t,hasMultipleScrollingColumns:s},a.a.createElement(r.a,{spacing:"comfortable",layout:"fluid"},e)))},"./src/packages/issue/issue-view/src/views/common/issue-page-grid/styled.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return i})),s.d(t,"b",(function(){return r})),s.d(t,"a",(function(){return o}));var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const i=4*a.e,r=3*a.e,o=n.default.div(["> div{padding:0;margin:0;}",""],({hasMultipleScrollingColumns:e,isCompact:t})=>e?"\n        height: 100%;\n        display: flex;\n        flex-direction: column;\n        \n        > div {\n            flex-wrap: nowrap;\n            height: 100%;\n            /* targets Grid element of @atlaskit/page, which has align-items: flex-start by default */\n            align-items: initial;\n        }\n        ":`\n            padding-left: ${t?0:a.e/2}px;\n            /* Targets <GridColumn> element */\n            > div > div {\n                margin: 0;\n                max-width: 100%;\n            }\n        `)},"./src/packages/issue/issue-view/src/views/common/select-validation-wrapper/select-validation-wrapper.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return m}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),r=s("./node_modules/@atlaskit/icon/glyph/error.js"),o=s.n(r),c=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),l=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const u=i.default.div(["align-items:center;color:",";display:flex;margin-top:","px;"],e=>e.colour,l.e/2),d=i.default.div(["margin-left:","px;"],l.e/2),p={default:null,success:null,error:c.a.R400};class m extends n.Component{render(){const{children:e,validationMessage:t,validationState:s}=this.props;return(a.a.createElement("div",null,e,s&&t?a.a.createElement(u,{colour:p[s]},a.a.createElement(o.a,{label:`${s} icon`,role:"presentation"}),a.a.createElement(d,null,t)):null))}}m.displayName="SelectValidationWrapper",m.displayName="SelectValidationWrapper",m.defaultProps={children:null,validationState:"default",validationMessage:null}},"./src/packages/issue/issue-view/src/views/common/skeleton/skeleton-view.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return w}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),r=s("./node_modules/@atlaskit/page/dist/es2019/GridColumn.js"),o=s("./src/packages/issue/issue-view/src/common/skeleton/activity-feed-view.js"),c=s("./src/packages/issue/issue-view/src/common/skeleton/container-mask-view.js"),l=s("./src/packages/issue/issue-view/src/common/skeleton/skeleton-background-view.js"),u=s("./src/packages/issue/issue-view/src/common/skeleton/skeleton-container-view.js"),d=s("./src/packages/issue/issue-view/src/views/issue-details/issue-app.styled.js"),p=s("./src/packages/issue/issue-view/src/views/common/issue-page-grid/index.js"),m=s("./src/packages/issue/issue-view/src/views/common/with-compact-mode/index.js"),b=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),f=i.default.div(["position:relative;overflow:hidden;margin:0 -20px;border-left:20px solid ",";border-right:20px solid ",";"],b.a.N0,b.a.N0),g=s("./src/packages/issue/issue-view/src/common/skeleton/text-line-mask-view.js");const h=()=>a.a.createElement(c.a,{paddingTop:10,paddingBottom:10},a.a.createElement(g.a,{fontSize:14,lineHeight:20,intrusion:60}),a.a.createElement(g.a,{fontSize:14,lineHeight:20,intrusion:20}),a.a.createElement(g.a,{fontSize:14,lineHeight:20,intrusion:180}));h.displayName="Description";var y=h;const O=e=>a.a.createElement(c.a,{paddingTop:8,paddingBottom:8},a.a.createElement(g.a,{fontSize:12,lineHeight:20,intrusion:e.labelIntrusion}),a.a.createElement(c.a,{paddingTop:10,paddingBottom:10},a.a.createElement(g.a,{fontSize:20,lineHeight:20,intrusion:e.fieldIntrusion})));O.displayName="Field";var j=O;const E=()=>a.a.createElement(c.a,{paddingTop:10,paddingBottom:10},a.a.createElement(g.a,{fontSize:20,lineHeight:24,intrusion:20}),a.a.createElement(g.a,{fontSize:20,lineHeight:24,intrusion:140}));E.displayName="Summary";var v=E;const k=i.default.div(["",""],({issueMaxWidth:e})=>void 0!==e?`\n        ${Object(d.c)("padding-left",e)}\n        ${Object(d.c)("padding-right",e)}\n    `:"");class w extends n.Component{static renderFieldSkeletons(){return a.a.createElement(c.a,{paddingTop:4,paddingBottom:16},a.a.createElement(j,{labelIntrusion:170,fieldIntrusion:20}),a.a.createElement(j,{labelIntrusion:120,fieldIntrusion:60}),a.a.createElement(j,{labelIntrusion:140,fieldIntrusion:40}))}static renderCompactSkeleton(){return a.a.createElement(r.a,null,a.a.createElement(f,null,a.a.createElement(v,null),w.renderFieldSkeletons(),a.a.createElement(y,null),a.a.createElement(o.a,null)))}static renderFullSizeSkeleton(){return[a.a.createElement(r.a,{key:"maincontent",medium:6},a.a.createElement(f,null,a.a.createElement(v,null),a.a.createElement(y,null),a.a.createElement(o.a,null))),a.a.createElement(r.a,{key:"secondarycontent",medium:4},a.a.createElement(f,null,w.renderFieldSkeletons()))]}render(){const{isCompact:e,issueMaxWidth:t}=this.props;return(a.a.createElement(k,{issueMaxWidth:t},a.a.createElement(p.a,{isCompact:e},a.a.createElement(u.a,null,a.a.createElement(l.b,null),e?w.renderCompactSkeleton():w.renderFullSizeSkeleton()))))}}w.displayName="Skeleton";t.b=Object(m.a)(w)},"./src/packages/issue/issue-view/src/views/common/style-wrappers/styled.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js").default.div(["position:relative;"])},"./src/packages/issue/issue-view/src/views/common/with-compact-mode/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./src/packages/issue/issue-view/src/views/common/compact-mode-provider/index.js");function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}t.a=e=>t=>a.a.createElement(i.a,null,s=>a.a.createElement(e,r({},t,{isCompact:s})))},"./src/packages/issue/issue-view/src/views/common/with-container-width/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return u}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/lodash/throttle.js"),r=s.n(i),o=s("./node_modules/@atlaskit/width-detector/dist/es2019/WidthObserver/index.js"),c=(s("./node_modules/@atlaskit/width-detector/dist/es2019/WidthDetector.js"),s("./src/packages/issue/issue-view/src/views/common/style-wrappers/styled.js"));function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function u(e){return t=>{const[s,i]=Object(n.useState)(void 0),u=r()(i,50);return a.a.createElement(a.a.Fragment,null,a.a.createElement(c.a,null,a.a.createElement(o.a,{setWidth:u})),a.a.createElement(e,l({},t,{containerWidth:s})))}}},"./src/packages/issue/issue-view/src/views/common/with-profilecard-next/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./src/packages/profilecard-next/src/async.js"),r=s("./src/packages/platform/controllers/tenant-context/src/components/index.js");t.a=e=>{const t=(e=>e&&(e.accountId||e.id||e.value))(e.userAccount);return t?a.a.createElement(i.a,{TenantContextSubscriber:r.b,accountId:t,analyticsData:e.analyticsData,position:e.position,actions:e.actions},e.children):e.children}},"./src/packages/issue/issue-view/src/views/connect-field.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return k}));var n=s("./node_modules/react-intl/lib/index.es.js"),a=s("./node_modules/react-redux/es/index.js"),i=s("./node_modules/memoize-one/dist/memoize-one.esm.js"),r=s("./node_modules/uuid/index.js"),o=s.n(r),c=s("./node_modules/@atlaskit/analytics-next--current/dist/esm/withAnalyticsEvents.js"),l=s("./node_modules/@atlaskit/analytics-next--current/dist/esm/withAnalyticsContext.js"),u=s("./src/packages/platform/utils/fetch/src/utils/requests.js"),d=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),p=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),m=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),b=s("./src/packages/issue/issue-view/src/common/util/flow-with-safe-component/index.js"),f=s("./src/packages/issue/issue-view/src/drafts/draft-actions.js"),g=s("./src/packages/issue/issue-view/src/feature-flags.js"),h=s("./src/packages/issue/issue-view/src/issue-field/state/actions/field-actions.js"),y=s("./src/packages/issue/issue-view/src/views/common/experience-tracking/view-experience/index.js");function O(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function j(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?O(Object(s),!0).forEach((function(t){E(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):O(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function E(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const v=Object(n.defineMessages)({defaultFallbackInvalidMessage:{id:"issue.field.default-fallback-invalid-message",defaultMessage:"The value could not be saved"}}),k={transformFromStateValue:(e,t,s)=>e,transformToStateValue:e=>e,fallbackInvalidMessage:e=>e.formatMessage(v.defaultFallbackInvalidMessage),additionalProps:(e,t)=>({}),additionalCallbacks:e=>({}),isOptimistic:!0,canContainMediaContent:!1,shouldSaveDraft:!1,saveField:({baseUrl:e,issueKey:t,fieldMetaKey:s,value:n,fieldEditSessionId:a})=>{const i=a?`${e}/rest/api/2/issue/${t}?fieldEditSessionId=${a}`:`${e}/rest/api/2/issue/${t}`;return Object(u.e)(i,{body:JSON.stringify({fields:{[s]:n}})})},shouldDiscardChangeOnFailure:!1,onSaveFailureFlagType:null,onSaveSuccessFlagType:null,fieldId:""},w=(e,t,s,n)=>({baseUrl:e,projectKey:t,issueKey:s,fieldId:n});t.a=(e=>(t,s)=>r=>{const u=(e=>({mapStateToProps:(t,s)=>{const n=e(t,s),a=j(j({},k),n),{fieldId:r,transformFromStateValue:o,transformToStateValue:c,fallbackInvalidMessage:l,additionalProps:u,additionalCallbacks:b,isOptimistic:f,canContainMediaContent:g,saveField:h,shouldDiscardChangeOnFailure:y,shouldSaveDraft:O,onSaveFailureFlagType:E,onSaveSuccessFlagType:v}=a,S={isRichTextField:Object(p.G)(r)(t),isOptimistic:f,canContainMediaContent:g,saveField:h,shouldDiscardChangeOnFailure:y,shouldSaveDraft:O,onSaveFailureFlagType:E,onSaveSuccessFlagType:v},I=Object(i.a)(w),C=Object(i.a)(c),T=Object(i.a)(o);return(e,t)=>j({fieldId:r,fieldOptions:S,memoizedTransformToStateValue:C,additionalCallbacks:b,label:Object(p.m)(r)(e),isEditable:Object(p.A)(r)(e)&&"PREVIEW"!==Object(m.x)(e),isEditing:Object(p.B)(r)(e),fieldEditSessionId:Object(p.f)(r)(e),invalidMessage:Object(p.j)(r,l(t.intl))(e),customFieldConfig:Object(p.p)(r)(e),value:T(Object(p.h)(r)(e),I(Object(d.g)(e),Object(d.I)(e),Object(d.B)(e),r),t.intl),isWaiting:!f&&Object(p.D)(r)(e),isMobile:Object(d.u)(e)},u(e,t.intl))},mapDispatchToProps:e=>({initFieldOptions:({fieldId:t,fieldOptions:s})=>()=>e(Object(h.f)(t,s)),onEditRequest:({fieldId:t,fieldOptions:s})=>(...n)=>{if(Object(g.isShortcutMenuEnabled)()){const a=n.length?n[n.length-1]:void 0;e(Object(h.b)(t,s,o.a.v4(),a))}else e(Object(h.b)(t,s,o.a.v4()))},onChange:({fieldId:t,fieldOptions:s,memoizedTransformToStateValue:n})=>a=>e(Object(h.e)(t,n(a),s)),onConfirm:({fieldId:t,fieldOptions:s,analyticsAttributeIdRetriever:n})=>(...a)=>{const i=a.length>1?a[0]:void 0,r=a.length?a[a.length-1]:void 0;return e(Object(h.d)(t,s,i,r,n))},onBlur:({fieldId:t,fieldOptions:s})=>()=>e(Object(h.c)(t,s)),onCancel:({fieldId:t,fieldOptions:s})=>()=>{e(Object(h.c)(t,s)),e(Object(f.b)({fieldId:t}))},onPaste:({fieldId:t,fieldOptions:s})=>n=>e(Object(h.g)(t,s,n)),getAdditionalCallbacks:({additionalCallbacks:t})=>t(e)}),mergeStateAndDispatchProps:(e,t)=>{const s=Object.keys(t).reduce((s,n)=>(s[n]=t[n](e),s),{}),n=t.getAdditionalCallbacks(e);return j(j(j({},e),s),n)}}))(t);return Object(b.a)([Object(c.a)({onConfirm:{action:"updated"},onEditRequest:{action:"updateStarted"}}),Object(l.a)({componentName:"issueFields",actionSubject:e}),Object(a.b)(u.mapStateToProps,u.mapDispatchToProps,u.mergeStateAndDispatchProps),n.injectIntl],s)(Object(y.b)()(r))})("issueFields")},"./src/packages/issue/issue-view/src/views/constants.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n={ASSIGNEE:{TIME_TO_RENDER_INITIAL_SUGGESTIONS:"jira.fe.issue.fields.assignee.time-to.render-initial-suggestions",TIME_TO_REFLECT_INPUT_RESULT:"jira.fe.issue.fields.assignee.time-to.reflect-input-results",TIME_TO_REFLECT_SELECTED:"jira.fe.issue.fields.assignee.time-to.reflect-selected",TIME_TO_ASSIGN_TO_ME_VIA_SHORTCUT:"jira.fe.issue.fields.assignee.time-to.assign-to-me-via-shortcut"},SUMMARY:{TIME_TO_RENDER_EDIT_VIEW:"jira.fe.issue.field.summary.time-to.render-edit-view",TIME_TO_RENDER_READ_VIEW_ON_CONFIRM:"jira.fe.issue.field.summary.time-to.render-read-view-on-confirm",TIME_TO_RENDER_READ_VIEW_ON_CANCEL:"jira.fe.issue.field.summary.time-to.render-read-view-on-cancel"},LABELS:{TIME_TO_RENDER_INITIAL_SUGGESTIONS:"jira.fe.issue.fields.labels.time-to.render-initial-suggestions",TIME_TO_REFLECT_INPUT_RESULT:"jira.fe.issue.fields.labels.time-to.reflect-input-results",TIME_TO_RENDER_READ_VIEW_ON_CONFIRM:"jira.fe.issue.field.labels.time-to.render-read-view-on-confirm",TIME_TO_RENDER_READ_VIEW_ON_CANCEL:"jira.fe.issue.field.labels.time-to.render-read-view-on-cancel",TIME_TO_REFLECT_SELECTED_EXISTING:"jira.fe.issue.fields.labels.time-to.reflect-selected-existing",TIME_TO_REFLECT_SELECTED_NEW:"jira.fe.issue.fields.labels.time-to.reflect-selected-new",TIME_TO_REFLECT_REMOVED_EXISTING:"jira.fe.issue.fields.labels.time-to.reflect-removed-existing"},STORY_POINTS:{TIME_TO_RENDER_EDIT_VIEW:"jira.fe.issue.field.story-points.time-to.render-edit-view",TIME_TO_RENDER_READ_VIEW_ON_CONFIRM:"jira.fe.issue.field.story-points.time-to.render-read-view-on-confirm",TIME_TO_RENDER_READ_VIEW_ON_CANCEL:"jira.fe.issue.field.story-points.time-to.render-read-view-on-cancel"},ISSUE_LINKS:{TIME_TO_REFLECT_SELECTED_ISSUE:"jira.fe.issue.fields.issue-links.time-to.reflect-selected-issue",TIME_TO_REFLECT_REMOVED_ISSUE:"jira.fe.issue.fields.issue-links.time-to.reflect-removed-issue",TIME_TO_REFLECT_INPUT_RESULT:"jira.fe.issue.fields.issue-links.time-to.reflect-input-results",TIME_TO_RENDER_LINKED_ISSUE:"jira.fe.issue.fields.issue-links.time-to.render-linked-issue",TIME_TO_RENDER_NEW_LINKED_ISSUE_INPUT:"jira.fe.issue.fields.issue-links.time-to.render-new-linked-issue-input"},SPRINT:{TIME_TO_REFLECT_SELECTED_SPRINT:"jira.fe.issue.fields.sprint.time-to.reflect-selected-sprint",TIME_TO_REFLECT_REMOVED_SPRINT:"jira.fe.issue.fields.sprint.time-to.reflect-removed-sprint",TIME_TO_REFLECT_INPUT_RESULT:"jira.fe.issue.fields.sprint.time-to.reflect-input-results",TIME_TO_RENDER_READ_VIEW:"jira.fe.issue.fields.sprint.time-to.render-read-view",TIME_TO_RENDER_INITIAL_SUGGESTIONS:"jira.fe.issue.fields.sprint.time-to.render-initial-suggestions"},PRIORITY:{TIME_TO_RENDER_READ_VIEW:"jira.fe.issue.fields.priority.time-to.render-read-view",TIME_TO_RENDER_SUGGESTIONS:"jira.fe.issue.fields.priority.time-to.render-suggestions",TIME_TO_REFLECT_PRIORITY_UPDATE:"jira.fe.issue.fields.priority.time-to.reflect-priority-update"},COMMENTS:{TIME_TO_RENDER_NEW_COMMENT_EDITOR:"jira.fe.issue.fields.comments.time-to.render-new-comment-editor",TIME_TO_RENDER_SAVED_COMMENT:"jira.fe.issue.fields.comments.time-to.render-saved-comment"},DESCRIPTION:{TIME_TO_RENDER_EDIT_VIEW:"jira.fe.issue.field.description.time-to.render-edit-view",TIME_TO_SAVE_UPDATED_DESCRIPTION:"jira.fe.issue.field.description.time-to.save-updated-description",TIME_TO_SAVE_UNCHANGED_DESCRIPTION:"jira.fe.issue.field.description.time-to.save-unchanged-description"},EPIC_LINKS:{TIME_TO_FETCH_INPUT_RESULTS_EPIC_PICKER_ENABLED:"jira.fe.issue.fields.epic-link.time-to.fetch-input-results.epic-picker-enabled",TIME_TO_FETCH_INPUT_RESULTS_EPIC_PICKER_DISABLED:"jira.fe.issue.fields.epic-link.time-to.fetch-input-results.epic-picker-disabled"}}},"./src/packages/issue/issue-view/src/views/field/select/common/custom-format/filter-option/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));const n=(e,t)=>"string"==typeof e&&e.toLowerCase().includes(t),a=(e,t)=>{if(e.data&&!0===e.data.__isNew__)return!0;const s=t.trim().toLowerCase();return!!n(e.label,s)||!(!e.data||!e.data.filterValues)&&e.data.filterValues.some(e=>n(e,s))}},"./src/packages/issue/issue-view/src/views/field/select/common/select-inline-edit/select-field/index.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return re}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-intl/lib/index.es.js"),r=s("./node_modules/rxjs/Rx.js"),o=s("./node_modules/lodash/noop.js"),c=s.n(o),l=s("./node_modules/@atlaskit/form--next/dist/es2019/Messages.js"),u=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),d=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/keyboard-shortcuts/shortcut-scope.js"),p=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/picker/base/messages.js"),m=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js"),b=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),f=s("./src/packages/platform/observability/errors-handling/src/utils/fire-error-analytics.js"),g=s("./src/packages/issue/issue-view/src/views/field/select/common/custom-format/filter-option/index.js"),h=Object(i.defineMessages)({empty:{id:"issue.views.field.select.empty",defaultMessage:"No matches found"},failedFetch:{id:"issue.views.field.select.failed-fetch",defaultMessage:"Search failed."},reloadIssue:{id:"issue.views.field.select.reload-issue",defaultMessage:"Try reloading the issue."}}),y=s("./node_modules/uuid/index.js"),O=s.n(y),j=s("./node_modules/@atlaskit/select/dist/esm/CreatableSelect.js"),E=s("./src/packages/platform/observability/analytics-legacy-gasv2-utils/src/hash-attribute.js"),v=s("./src/packages/platform/observability/analytics-web-react/src/utils/component-with-analytics.js"),k=s("./node_modules/@atlaskit/analytics-next--current/dist/esm/withAnalyticsEvents.js"),w=s("./src/packages/common-legacy-do-not-add-anything-new/src/performance/index.js"),S=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),I=s("./src/packages/issue/issue-view/src/feature-flags.js"),C=s("./node_modules/memoize-one/dist/memoize-one.esm.js"),T=s("./node_modules/lodash/flatMap.js"),P=s.n(T);const _=e=>P()(e.map(e=>(e=>void 0!==e.options)(e)&&e.options?e.options:e)),x=e=>null==e?[]:Array.isArray(e)?e:[e],D=(e,t=!1)=>t?e.toString():Object(E.a)(e.toString()).toString(),A=(e,t=!1)=>e.filter(e=>e.value).map(({value:e})=>D(e,t)),M=e=>{const t=e.map(({id:e})=>e||null);return t.every(e=>null===e)?[]:t},L=e=>e.filter(e=>e.value).map(({value:e})=>null!=e?`${e}`.length:0);function R(){return(R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function N(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const U=Object(C.a)(e=>({label:e(""),isDisabled:!0,isAkSelectOption:!0})),F=Object(C.a)(e=>({label:e(""),isDisabled:!0,isAkSelectOption:!0})),V=Object(C.a)((e,t,s,n)=>!0===e?[...t,s,n]:t);class K extends n.Component{constructor(...e){super(...e),this.formatCreateLabel=e=>{const{footer:t,formatCreateLabel:s}=this.props;return void 0===t?s?s(e):e:"function"==typeof t?t(e):t},this.getShouldShowFooter=()=>{const{footer:e,shouldShowFooter:t}=this.props;return!!e&&t},this.isOptionShownInDropdown=(e,t)=>{const{filterOption:s,noOptionsMessage:n,loadingMessage:a,value:i}=this.props;return(s(e,t)&&e.label!==n("")&&e.label!==a("")&&!x(i).find(t=>t.value===e.value))},this.filterOptionWithFooterAndShowNoOptionsMessage=(e,t)=>{const{filterOption:s,options:n,isLoading:a,noOptionsMessage:i,loadingMessage:r}=this.props;return e.label===i("")?!0!==a&&!_(n).some(e=>this.isOptionShownInDropdown(e,t)):e.label===r("")?!0===a&&!_(n).some(e=>this.isOptionShownInDropdown(e,t)):s(e,t)}}render(){const e=this.props,{footer:t,onFooterSelect:s,options:n,noOptionsMessage:i,loadingMessage:r,filterOption:o}=e,c=N(e,["footer","onFooterSelect","options","noOptionsMessage","loadingMessage","filterOption"]),l=this.getShouldShowFooter(),u=F(i),d=U(r),p=V(l,n,u,d);return a.a.createElement(j.a,R({},c,{options:p,formatCreateLabel:this.formatCreateLabel,isValidNewOption:this.getShouldShowFooter,onCreateOption:s,filterOption:!0===l?this.filterOptionWithFooterAndShowNoOptionsMessage:o,loadingMessage:r,noOptionsMessage:i,allowCreateWhileLoading:!0}))}}function B(){return(B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function W(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function H(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function G(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?H(Object(s),!0).forEach((function(t){$(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):H(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function $(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}K.displayName="SelectWithFooter",K.defaultProps={shouldShowFooter:!0};const q={onChange:"valueChanged",onInputChange:"inputChanged",onMenuOpen:"menuOpened",onMenuClose:"menuClosed"},z=Object(v.a)("select",q)(K),Y=Object(v.a)("select",q)(j.a),Q={action:"fake-action"};class J extends n.Component{constructor(e){super(e),this.getDefaultAnalyticsAttributes=e=>{const{fieldId:t,value:s,isLoading:n,optionValuesSafeForAnalytics:a}=this.props,i={queryLength:e.length,queryHash:""===e?e:Object(E.a)(e)},r=x(s),o=((e,t)=>e.filter(e=>"string"==typeof e.value&&e.value.toLowerCase().includes((t||"").toLowerCase())||"string"==typeof e.label&&e.label.toLowerCase().includes((t||"").toLowerCase())))(this.flatOptions,e),c=A(o,a);return G(G({fieldId:t,componentName:"select",packageName:"@atlaskit/select",options:c,optionsLength:c.length,optionsLengths:L(o),optionIds:M(o),selectedOptions:A(r,a),selectedOptionsLengths:L(r),selectedOptionIds:M(r),sessionId:this.sessionId,isLoading:n},i),{},{optionValuesSafeForAnalytics:a},Object(I.isRemoteIssueLinksEnabled)()?this.props.additionalAnalyticsProps:{})},this.getItemOrder=e=>{const t=[];return this.flatOptions.forEach((s,n)=>{const a=s.filterValues||[];(s.value===e.value||a.includes(e.value))&&t.push(n)}),t.length>0?t[0]:-1},this.startSession=()=>{this.sessionId=O.a.v4(),this.sessionStartedAt=w.default.now(),this.fireTrackAnalyticsEvent(this.props.createAnalyticsEvent({action:"started"}),"started","optionSelectionSession")},this.endSession=()=>{if(this.sessionId){const e=this.sessionStartedAt?w.default.now()-this.sessionStartedAt:0;this.fireTrackAnalyticsEvent(this.props.createAnalyticsEvent({action:"ended"}),"ended","optionSelectionSession",G({elapsedTime:e},this.props.additionalAnalyticsProps))}this.sessionStartedAt=0,this.sessionId=void 0},this.flatOptions=[],this.sessionId=void 0,this.queryAtSetValue="",this.query="",this.sessionStartedAt=0,this.isOpened=!1,this.fireOptionsLoadedEvent=e=>{e.update({action:"loaded",actionSubject:"options"}),this.fireAnalyticsEvent(e,this.query)},this.fireInputChangedEvent=(e,t,s)=>("set-value"===t.action&&(this.queryAtSetValue=this.query),this.query=e,s.update({action:"changed",actionSubject:"filter"}),this.fireAnalyticsEvent(s,this.query),this.sessionId),this.restartSession=()=>{this.endSession(),this.props.menuIsOpen&&(this.isOpened=!0,this.startSession())},this.fireOptionCreatedEvent=(e,t)=>{t.update({action:"created",actionSubject:"option"});const s=this.sessionId;this.restartSession(),this.fireAnalyticsEvent(t,this.queryAtSetValue,{selectedOption:D(e.value,this.props.optionValuesSafeForAnalytics),sessionId:s})},this.fireOptionRemovedEvent=(e,t)=>{t.update({action:"removed",actionSubject:"option"}),this.fireAnalyticsEvent(t,this.query,{removedItem:e?D(e.value,this.props.optionValuesSafeForAnalytics):void 0})},this.fireOptionSelectedEvent=(e,t)=>{t.update({action:"changed",actionSubject:"option"});const s=this.sessionId;this.restartSession(),this.fireAnalyticsEvent(t,this.queryAtSetValue,{selectedOrder:this.getItemOrder(e),selectedOption:D(e.value,this.props.optionValuesSafeForAnalytics),sessionId:s})},this.fireOpenChangedEvent=(e,t)=>{e.isOpen&&!this.isOpened&&this.startSession(),this.isOpened=e.isOpen,t.update({action:e.isOpen?"opened":"closed",actionSubject:"optionSelect",attributes:this.getDefaultAnalyticsAttributes(this.query)}),this.fireAnalyticsEvent(t,this.query)},this.onChange=(e,t,s)=>{const n=Array.isArray(e)?e[e.length-1]:e,a=this.sessionId;switch(t.action){case"create-option":null!==n&&this.fireOptionCreatedEvent(n,s);break;case"remove-value":case"pop-value":case"deselect-option":this.fireOptionRemovedEvent(t.removedValue||t.option,s);break;case"select-option":null!==n&&this.fireOptionSelectedEvent(n,s)}this.props.onChange&&this.props.onChange(e,t,a)},this.onInputChange=(e,t,s)=>{const{onInputChange:n}=this.props;"input-change"!==t.action&&"set-value"!==t.action||this.fireInputChangedEvent(e,t,s),n(e,t,this.sessionId)},this.onMenuOpen=e=>{this.fireOpenChangedEvent({isOpen:!0},e);const{onMenuOpen:t}=this.props;t&&t(e)},this.onMenuClose=e=>{this.fireOpenChangedEvent({isOpen:!1},e);const{onMenuClose:t}=this.props;t&&t(e)},this.onFocus=e=>{this.props.onFocus(e,this.sessionId)},this.flatOptions=_(this.props.options),this.isOpened=e.menuIsOpen,this.isOpened&&(this.startSession(),this.fireInputChangedEvent("",Q,this.props.createAnalyticsEvent({})))}componentDidUpdate(e){this.props.options!==e.options&&(this.flatOptions=_(this.props.options),this.fireOptionsLoadedEvent(this.props.createAnalyticsEvent()))}componentWillUnmount(){this.endSession()}fireAnalyticsEvent(e,t,s={}){const n=G(G({},this.getDefaultAnalyticsAttributes(t)),s);Object(S.h)(e,n)}fireTrackAnalyticsEvent(e,t,s,n){const a=G(G({},this.getDefaultAnalyticsAttributes(this.query)),n);Object(S.f)(e,`${s} ${t}`,a)}render(){const e=this.props,{canCreateNewItem:t,createAnalyticsEvent:s}=e,n=W(e,["canCreateNewItem","createAnalyticsEvent"]),i=t?Y:z;return a.a.createElement(i,B({},n,{onFocus:this.onFocus,onChange:this.onChange,onInputChange:this.onInputChange,onMenuOpen:this.onMenuOpen,onMenuClose:this.onMenuClose}))}}J.displayName="SelectWithAnalyticsView",J.defaultProps={isLoading:!1,createAnalyticsEvent:c.a,optionValuesSafeForAnalytics:!1,onChange:c.a,onInputChange:c.a,onMenuOpen:c.a,onMenuClose:c.a};var Z=Object(k.a)()(J),X=s("./src/packages/issue/issue-view/src/views/field/select/common/select-inline-edit/select-field/styled.js"),ee=s("./src/packages/issue/issue-view/src/views/field/select/common/select-inline-edit/select-field/utils.js");function te(){return(te=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function se(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function ne(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function ae(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(s),!0).forEach((function(t){ie(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ne(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function ie(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const re={hideSelectedOptions:!0,allowCreateWhileLoading:!0,filterOption:g.a},oe=e=>ae({label:e.content},e),ce=(e,t)=>{const{label:s,filterValues:n}=e,a=ae({},se(e,["label","filterValues"]));return"create-option"===t.action&&void 0===a.content&&(a.content=e.label),a};class le extends n.Component{constructor(e){var t;super(e),this.onFocus=(e,t)=>{this.query$.next({query:"",sessionId:t,isImmediate:!0})},this.onChange=(e,t,s)=>{const{onChange:n,onChangeMulti:a,isMulti:i}=this.props;if(i){if(!a)return;this.query$.next({query:this.query||"",sessionId:s,isImmediate:!0}),a(Array.isArray(e)?e.map(e=>ce(e,t)):[],t)}else{if(!n||Array.isArray(e))return;n(e&&ce(e,t),t)}},this.onInputChange=(e,t,s)=>{if("input-change"!==t.action&&"set-value"!==t.action)return;let n=e;this.props.changeQueryValue&&(n=this.props.changeQueryValue(n)),this.query=n,"input-change"===t.action&&(this.setState({isLoading:!0}),this.query$.next({query:n,sessionId:s})),this.props.onInputChange&&this.props.onInputChange(n,t)},this.formatOptionLabel=(e,t)=>void 0!==this.props.formatOptionLabel?this.props.formatOptionLabel(e,t):e.iconUrl?a.a.createElement(X.e,null,a.a.createElement(X.d,null,a.a.createElement("img",{src:e.iconUrl,alt:"",width:2*m.e,height:2*m.e,role:"none"})),a.a.createElement(X.c,null,e.label)):e.label,this.transformItems=e=>e&&e.length>0?e.map(oe):[],this.transformToOptions=e=>1!==e.length||e[0].heading?e.map(e=>{const t=this.transformItems(e.items);return void 0!==e.heading?{label:e.heading,options:t}:{options:t}}):this.transformItems(e[0].items),this.subscription=void 0,this.query$=void 0,this.query=null,this.getFailedFetchMessage=()=>a.a.createElement(X.b,null,a.a.createElement("span",null,this.props.intl.formatMessage(h.failedFetch)," ",a.a.createElement("a",{role:"button",href:window.location.href,onClick:()=>window.location.reload()},this.props.intl.formatMessage(h.reloadIssue)))),this.noOptionsMessageDefault=()=>this.props.intl.formatMessage(h.empty),this.loadingMessageDefault=()=>this.props.intl.formatMessage(p.a.loading),this.filterOption=e=>!!this.state.hasLastFetchFailed||this.props.filterOption&&this.props.filterOption(e,this.query||""),this.renderSelectField=()=>{const e=this.props,{placeholder:t="",noOptionsMessage:s=this.noOptionsMessageDefault,loadingMessage:n=this.loadingMessageDefault,fieldId:i,onChangeMulti:r,invalidMessage:o,isOpen:c,hasAutocomplete:l,portalElement:u,intl:d,fetchSuggestions:p,additionalAnalyticsProps:m,debounceFetchSuggestionsTime:b,changeQueryValue:f,errorMessagePosition:g}=e,h=se(e,["placeholder","noOptionsMessage","loadingMessage","fieldId","onChangeMulti","invalidMessage","isOpen","hasAutocomplete","portalElement","intl","fetchSuggestions","additionalAnalyticsProps","debounceFetchSuggestionsTime","changeQueryValue","errorMessagePosition"]),y=o?"error":void 0;return a.a.createElement(Z,te({},re,h,{filterOption:this.filterOption,key:i,fieldId:i,options:this.state.options,value:this.getSelectedValue(),styles:Object(ee.a)(X.f,X.g,this.props.styles),additionalAnalyticsProps:m,isLoading:this.state.isLoading,isSearchable:l,menuIsOpen:c,menuPortalTarget:u,menuPlacement:"auto",placeholder:t,noOptionsMessage:s,loadingMessage:n,validationState:y,formatOptionLabel:this.formatOptionLabel,onChange:this.onChange,onFocus:this.onFocus,onInputChange:this.onInputChange}))},this.renderErrorMessage=()=>{const{invalidMessage:e,fieldId:t,errorMessagePosition:s}=this.props;return e?a.a.createElement(X.a,{key:`${t}-error-message`,errorMessagePosition:s},a.a.createElement(l.a,null,e)):null};const{onDataRequest:s,onDataLoaded:n,fetchSuggestions:i,debounceFetchSuggestionsTime:o,additionalAnalyticsProps:c}=this.props;if(this.query$=new r.Subject,this.subscription=this.query$.debounce(({isImmediate:e})=>e?r.Observable.empty():r.Observable.timer(o||0)).switchMap(({query:e,sessionId:t})=>(s&&s({isInitial:null===this.query}),this.setState({isLoading:!0}),i(e,t||void 0).then(e=>(this.setState({hasLastFetchFailed:!1}),e)).catch(e=>(b.i.safeError("issue.select.transform-suggestions","Could not fetch or transform suggestions to display in select",new u.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),c&&b.i.safeError("issue.select.fetch-transform-suggestions.details","Could not fetch or transform retrieved data",ae(ae({},c),{},{message:e.message})),Object(f.a)({meta:{id:"issueSelectFetchFailure",packageName:"jiraIssueView"},error:e,attributes:ae({},null!=c?c:{})}),this.setState({hasLastFetchFailed:!0}),[{items:[{content:this.getFailedFetchMessage(),value:"",isDisabled:!0}]}])))).subscribe(e=>{this.setState({options:this.transformToOptions(e),isLoading:!1}),n&&n({isInitial:null===this.query})}),null===(t=this.props.initialData)||void 0===t?void 0:t.data){const{data:e,loading:t,error:s}=this.props.initialData;this.state={options:this.transformToOptions(e),isLoading:t,hasLastFetchFailed:s}}else this.state={options:[],isLoading:!0,hasLastFetchFailed:!1}}componentDidUpdate(e){var t,s;if((null===(t=this.props.initialData)||void 0===t?void 0:t.data)&&(null===(s=e.initialData)||void 0===s?void 0:s.data)){const{loading:t,error:s,data:n}=this.props.initialData;t===e.initialData.loading&&s===e.initialData.error||this.setState({options:this.transformToOptions(n),isLoading:t,hasLastFetchFailed:s})}}componentWillUnmount(){this.subscription.unsubscribe()}getSelectedValue(){const{value:e}=this.props;return e?Array.isArray(e)?e.map(oe):oe(e):null}render(){const{errorMessagePosition:e}=this.props,t=[this.renderSelectField()];return"top"===e?t.unshift(this.renderErrorMessage()):t.push(this.renderErrorMessage()),a.a.createElement(d.a,null,a.a.createElement(a.a.Fragment,null,t))}}le.displayName="SelectFieldView",le.displayName="SelectFieldView",le.defaultProps={isMulti:!1,canCreateNewItem:!1,value:null,placeholder:void 0,autoFocus:!1,debounceFetchSuggestionsTime:0,filterOption:re.filterOption,errorMessagePosition:"top",optionValuesSafeForAnalytics:!1,onChangeMulti:c.a,onChange:c.a,onInputChange:c.a};t.a=Object(i.injectIntl)(le)},"./src/packages/issue/issue-view/src/views/field/select/common/select-inline-edit/select-field/styled.js":function(e,t,s){"use strict";s.d(t,"f",(function(){return u})),s.d(t,"g",(function(){return m})),s.d(t,"e",(function(){return b})),s.d(t,"b",(function(){return f})),s.d(t,"d",(function(){return g})),s.d(t,"c",(function(){return h})),s.d(t,"a",(function(){return y}));var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),i=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/picker/base/index.js"),r=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");function o(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function c(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?o(Object(s),!0).forEach((function(t){l(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function l(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const u={multiValue:e=>c(c({},e),{},{backgroundColor:a.a.N20}),option:(e,t)=>c(c(c(c({},e),Object(i.c)(t)),{},{cursor:"pointer"},t.isFocused&&!t.isSelected?{backgroundColor:a.a.N20}:{}),{},{"&:hover":c(c({},t.isSelected?{}:{backgroundColor:a.a.N20}),t.isDisabled?{backgroundColor:"transparent",cursor:"not-allowed"}:{})}),menu:e=>c(c({},e),{},{zIndex:r.f.modal}),menuPortal:e=>c(c({},e),{},{transform:"translateZ(0)"})},d=`${r.e/4}px`,p=`${r.e/2}px`,m={indicatorsContainer:e=>c(c({},e),{},{paddingRight:`${r.e/2}px`}),loadingIndicator:e=>c(c({},e),{},{paddingLeft:d,paddingRight:p}),clearIndicator:e=>c(c({},e),{},{paddingLeft:d,paddingRight:p}),dropdownIndicator:e=>c(c({},e),{},{display:"none"})},b=n.default.span(["display:flex;align-items:center;"]),f=Object(n.default)(b)(["justify-content:center;"]),g=n.default.span(["display:flex;padding-right:","px;"],r.e),h=n.default.span(["display:flex;"]),y=n.default.div(["",";&&& > div{min-height:auto;}"],e=>"top"===e.errorMessagePosition?`margin-bottom: ${.75*r.e}px;`:"")},"./src/packages/issue/issue-view/src/views/field/select/common/select-inline-edit/select-field/utils.js":function(e,t,s){"use strict";function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function a(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}s.d(t,"a",(function(){return i}));const i=(e,...t)=>{const s=e||{};if(0===t.length)return s;const i=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){a(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},s);return t.forEach(e=>{e&&Object.keys(e).forEach(t=>{const s=i[t],n=e[t];i[t]=s?(e,...t)=>n(s(e,...t),...t):n})}),i}},"./src/packages/issue/issue-view/src/views/field/team/assets/default-avatar.svg":function(e,t,s){e.exports=s.p+"assets/default-avatar.b7f1021e538053b2b6f8108284f2ffc4.8.svg"},"./src/packages/issue/issue-view/src/views/issue-base/common/animations/classy-animator.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const r=s("./node_modules/styled-components/dist/styled-components.browser.esm.js").default.div(["position:absolute;right:0;top:0;width:","px;",";transition:",";overflow:hidden;opacity:",";visibility:",";"],e=>e.show?e.width:0,e=>null!=e.height?`height: ${e.height}px`:"",e=>e.show?"width 0.5s cubic-bezier(0.15, 1, 0.3, 1)":"width 0.5s cubic-bezier(0.15, 1, 0.3, 1), opacity 0, 0.5s, visibility 0, 0.5s",e=>e.show?1:0,e=>e.show?"visible":"hidden"),o=Object(n.forwardRef)((e,t)=>a.a.createElement(r,i({innerRef:t},e),e.children));t.a=o},"./src/packages/issue/issue-view/src/views/issue-base/content/confluence-pages/create-link/link-select/product-requirements/state/store.js":function(t,s,n){"use strict";n.d(s,"b",(function(){return b})),n.d(s,"a",(function(){return f}));var a=n("./node_modules/react-sweet-state/lib/esm/store/create.js"),i=n("./node_modules/react-sweet-state/lib/esm/components/hook.js"),r=n("./node_modules/react-sweet-state/lib/esm/components/container.js"),o=n("./src/packages/issue/issue-view/src/feature-flags.js"),c=n("./src/packages/platform/utils/fetch/src/utils/as-json.js"),l=async(e,t,s)=>{const n=await(async(e,t)=>{const s=await Object(c.a)(`/wiki/rest/create-dialog/1.0/blueprints/web-items?spaceKey=${e}`),[n]=s.filter(e=>e.blueprintModuleCompleteKey===t);if(!n)throw new Error("Blueprint not found");return n})(e,t);return Object(c.a)(`/wiki/rest/create-dialog/1.0/content/blueprint/${t}/instance`,{method:"POST",body:JSON.stringify({content:{type:"page",title:s,status:"draft",space:{key:e}},contentBlueprintSpec:{context:{spaceKey:e,parentPageId:null},blueprintId:n.contentBlueprintId}})})},u=n("./src/packages/platform/utils/fetch/src/utils/requests.js"),d=n("./src/packages/issue/issue-view/src/views/issue-base/content/confluence-pages/create-link/link-select/product-requirements/state/types.js");var p={createPage:(t,s,n)=>async({setState:a})=>{a({error:null,loading:!0,data:null});let i,r=d.a.CREATE_DRAFT,p={};const m=`${s} - Product Requirements`;try{if(Object(o.isPageAlreadyCreatedFlagEnabled)()){r=d.a.FETCH_EXISTING_PAGE;const e=await(async e=>Object(c.a)(`/wiki/rest/api/search?cql=${e}`))(`space="${t}" AND title="${m}"`);if(e.results.length){const t=e.results[0];return void a({error:d.a.PAGE_ALREADY_EXISTS,loading:!1,data:e._links.base+t.url})}}p=await l(t,"com.atlassian.confluence.plugins.confluence-software-blueprints:requirements-blueprint",m),r=d.a.PUBLISH_DRAFT,i=await(e=>Object(c.a)(`/wiki/rest/api/content/blueprint/instance/${e.content.id}`,{method:"PUT",body:JSON.stringify({version:{number:e.content.version.number},title:e.content.title,type:"page",status:"current",space:{key:e.content.space.key}})}))(p);const e=(e=>null!=e._links.base?e._links.base+e._links.webui:"")(i);r=d.a.LINK_PAGE_TO_ISSUE,await((e,t)=>Object(c.a)(`/rest/confluenceIssueLink/1/confluence?issueId=${encodeURIComponent(e)}&pageUrl=${encodeURIComponent(t)}`,{method:"POST"}))(n,e),a({error:null,loading:!1,data:p._links.base+p.content._links.editui})}catch(e){(async e=>{Object(u.a)(`/wiki/rest/api/content/${e.id}?status=${e.status}`)})(i||p.content),a({loading:!1,error:r,data:null})}}};const m=Object(a.a)({initialState:{loading:!1,error:null,data:null},actions:p,name:"confluence-pages-product-requirements-is-loading-controller"}),b=Object(i.a)(m),f=Object(r.a)(m)},"./src/packages/issue/issue-view/src/views/issue-base/content/confluence-pages/create-link/link-select/product-requirements/state/types.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n={FETCH_EXISTING_PAGE:"fetchExistingPage",PAGE_ALREADY_EXISTS:"pageAlreadyExists",FETCH_BLUEPRINT:"fetchBlueprint",CREATE_DRAFT:"createDraft",PUBLISH_DRAFT:"publishDraft",LINK_PAGE_TO_ISSUE:"linkPageToIssue"}},"./src/packages/issue/issue-view/src/views/issue-base/content/confluence-pages/create-link/link-select/styled.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js").default.div(["height:46px;"])},"./src/packages/issue/issue-view/src/views/issue-base/context/approval-panel/approval-panel.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-redux/es/index.js"),r=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/component-with-condition.js"),o=s("./src/packages/issue/issue-view-layout/src/services/main.js"),c=s("./src/packages/servicedesk/approval-panel/src/async.js"),l=s("./src/packages/issue/issue-view/src/actions/approval-action/index.js"),u=s("./src/packages/issue/issue-view/src/actions/context-item-actions.js"),d=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),p=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),m=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),b=s("./src/packages/issue/issue-view/src/common/util/flow-with-safe-component/index.js"),f=s("./src/packages/issue/issue-view/src/feature-flags.js"),g=s("./src/packages/issue/issue-view/src/selectors/approval-selector/index.js"),h=s("./src/packages/issue/issue-context-service/src/main.js"),y=s("./src/packages/platform/utils/types/src/general.js"),O=s("./src/packages/issue/fields/field-base/src/services/field-config-service/main.js"),j=s("./src/packages/issue/project-context-service/src/main.js"),E=s("./src/packages/platform/controllers/tenant-context/src/components/index.js"),v=s("./src/packages/issue/fields/approval-panel/src/services/index.js");function k(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function w(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var S=e=>{const{issueKey:t,projectKey:s}=e,n=Object(j.d)(Object(y.q)(s)),[{value:i}]=Object(v.a)({issueKey:t}),r=i?i.activeApproval:{},o=r?r.configuration:{},l=r&&o&&o.approvers?o.approvers.customFieldId:"",[u]=Object(O.a)(t,l),{isEditable:d}=u||{},p=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?k(Object(s),!0).forEach((function(t){w(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):k(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({approval:r,baseUrl:Object(E.e)(),fieldId:"servicedesk-approvals",isSimplified:(null==n?void 0:n.isSimplified)||!1,hasLinkedFieldEditPermissions:d,canCurrentUserApprove:r?r.canAnswerApproval:null},e);return a.a.createElement(c.b,p)};function I(){return(I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const C=e=>{const[,t]=Object(o.b)(),s={issueKey:Object(h.f)(),issueId:Object(h.e)(),projectKey:Object(h.g)(),onOpenPanel:(e,s)=>{t({key:"approval-panel",type:"approval-panel",title:s,payload:{approvalFieldId:e}})}};return a.a.createElement(S,I({},e,s))};C.displayName="ApprovalPanelConnected";const T=Object(i.b)(null,e=>({onSaveApprovalAnswerError:()=>{e(Object(l.c)())},onSaveApprovalAnswerSuccess:()=>{e(Object(l.d)())},onZeroApprovalRequired:()=>{e(Object(l.f)())}}))(C);function P(){return(P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const _=e=>a.a.createElement(c.b,e);_.displayName="ApprovalPanelContainer";const x=e=>{const[,t]=Object(o.b)(),s=Object(n.useCallback)((e,s)=>{t({key:"approval-panel",type:"approval-panel",title:s,payload:{approvalFieldId:e}})},[t]);return a.a.createElement(_,P({},e,{onOpenPanel:s}))};x.displayName="ApprovalPanelContainerWithIssueLayout";const D=Object(b.a)([Object(i.b)(e=>{const t="servicedesk-approvals",s=Object(g.d)(e,t)||"",n=Object(p.A)(s)(e);return{approval:Object(g.e)(e,t),baseUrl:Object(d.g)(e),issueId:Object(d.A)(e),fieldId:t,isSimplifiedProject:Object(m.v)(e),hasLinkedFieldEditPermissions:n,canCurrentUserApprove:Object(g.b)(e,t)}},e=>({onOpenPanel:(t,s)=>{e(Object(u.b)({key:"approval-panel",type:"approval-panel",title:s,payload:{approvalFieldId:t}}))},onSaveApprovalAnswerError:()=>{e(Object(l.c)())},onSaveApprovalAnswerSuccess:()=>{e(Object(l.d)())},onZeroApprovalRequired:()=>{e(Object(l.f)())}}))])(Object(r.a)(f.isGlanceAndTabSweetStateEnabled,x,_));t.a=Object(r.a)(f.isApprovalFieldExtractionEnabled,T,D)},"./src/packages/issue/issue-view/src/views/issue-base/context/context-items/common/utils.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return c})),s.d(t,"d",(function(){return l})),s.d(t,"c",(function(){return u}));var n=s("./src/packages/development/summary-legacy/src/dev-panel/messages.js");function a(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function i(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?a(Object(s),!0).forEach((function(t){r(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function r(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const o=(e,t,s)=>e.reduce((e,a)=>{const{payload:i}=a;if("TAB"===a.type&&i&&i.tabId){const s=t[i.tabId];s&&e.push(s.name)}return i&&i.fieldId&&s[i.fieldId]?e.push(s[i.fieldId].title):i&&"devSummary"===i.itemId&&e.push(n.a.label),e},[]),c=(e,t)=>{if(!e||e.length<=0)return"";if(1===e.length)return e[0];const s=e.slice(-1)[0];return`${e.slice(0,-1).join(", ")} ${t} ${s}`},l=e=>(null==e?void 0:e.fieldId)||(null==e?void 0:e.itemId)||(null==e?void 0:e.tabId),u=e=>{const{pinnedFields:t,visibleSecondaryContextItems:s,layoutDescriptor:n}=e,{primaryContextItems:a,secondaryContextItems:r}=n.context,o=new Set(t),c=a.filter(({payload:e})=>!o.has(l(e))),u=r.filter(({payload:e})=>!o.has(l(e))),d=s.filter(({payload:e})=>!o.has(l(e)));return{layoutDescriptor:i(i({},n),{},{context:{secondaryContextItems:u,primaryContextItems:c}}),visibleSecondaryContextItems:d}}},"./src/packages/issue/issue-view/src/views/issue-base/context/context-items/view/expander/show-more-button/view.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-intl/lib/index.es.js"),r=s("./node_modules/@atlaskit/icon/glyph/chevron-down.js"),o=s.n(r),c=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),l=s("./node_modules/@atlaskit/tooltip/dist/es2019/Tooltip.js"),u=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),d=s("./src/packages/issue/issue-view/src/views/issue-base/context/context-items/common/utils.js"),p=Object(i.defineMessages)({showMorePlural:{id:"issue.views.issue-base.context.context-items.expander.show-more-button.show-more-plural",defaultMessage:"Show {fieldCount} more fields"},showMoreNotPlural:{id:"issue.views.issue-base.context.context-items.expander.show-more-button.show-more-not-plural",defaultMessage:"Show {fieldCount} more field"},showMoreAnd:{id:"issue.views.issue-base.context.context-items.expander.show-more-button.show-more-and",defaultMessage:"and"},showMoreAltText:{id:"issue.views.issue-base.context.context-items.expander.show-more-button.show-more-alt-text",defaultMessage:"Show more"}}),m=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),b=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/button/index.js"),f=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const g=m.default.small(["display:block;margin-top:","px;margin-bottom:","px;text-overflow:ellipsis;overflow:hidden;color:",";font-size:","px;line-height:",";"],-f.e/2,f.e/2,c.a.N200,1.5*f.e,f.e/6),h=Object(m.default)(b.a)(["& > span{color:",";& > span:first-child{align-self:auto;margin-left:","px;margin-right:","px;}}&&,&:hover,&:focus{height:inherit;text-align:left;}"],c.a.B400,-f.e,-f.e/2);function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const O=({visibleSecondaryContextItemNameList:e,fieldCount:t,onExpand:s,intl:n})=>{const r=t>1?p.showMorePlural:p.showMoreNotPlural,m=Object(d.b)(e.map(e=>"object"==typeof e&&null!=e?n.formatMessage(e):e),n.formatMessage(p.showMoreAnd));return a.a.createElement(l.a,{content:m},a.a.createElement(h,{externalId:"showmorelink.expand",appearance:"subtle",iconBefore:a.a.createElement(o.a,{label:"",primaryColor:c.a.B400,size:"large"}),alt:n.formatMessage(p.showMoreAltText),shouldFitContainer:!0,onClick:(e,t)=>{s(),Object(u.h)(t,"showMore")},"data-test-id":"issue.views.issue-base.context.context-items.expander.show-more-button.container"},a.a.createElement(i.FormattedMessage,y({},r,{values:{fieldCount:t}})),a.a.createElement(g,null,m)))};O.displayName="ShowMoreButton";t.a=Object(i.injectIntl)(O)},"./src/packages/issue/issue-view/src/views/issue-base/context/side-panel/styled.js":function(e,t,s){"use strict";s.d(t,"d",(function(){return r})),s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return c})),s.d(t,"c",(function(){return l}));var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),i=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const r=s("./src/packages/issue/issue-view/src/views/issue-details/sticky-header-container/styled.js").b,o=n.default.div(["width:inherit;height:inherit;opacity:1;background-color:",";display:flex;flex-direction:column;position:fixed;overflow:hidden;",";"],a.a.N0,({top:e})=>null!=e&&`top: ${e}px;`),c=n.default.div(["display:flex;flex-direction:column;height:100%;padding-left:","px;"],r),l=n.default.div(["white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex:1;height:30px;margin:","px ","px 0;"],i.e,i.e)},"./src/packages/issue/issue-view/src/views/issue-base/context/side-panel/view.js":function(e,t,s){"use strict";(function(e){s.d(t,"a",(function(){return m}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/memoize-one/dist/memoize-one.esm.js"),r=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),o=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js"),c=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),l=s("./src/packages/issue/issue-view/src/common/util/dom-util/get-inner-height/index.js"),u=s("./src/packages/issue/issue-view/src/common/util/dom-util/get-scroll-parent/index.js"),d=s("./src/packages/issue/issue-view/src/views/issue-base/common/animations/classy-animator.js"),p=s("./src/packages/issue/issue-view/src/views/issue-base/context/side-panel/styled.js");class m extends n.Component{constructor(t){super(t),this.state={styles:{panelWidth:0,headerWidth:0,contentWidth:0,contextWidth:0,panelTop:0,panelHeight:0}},this.refFixedPanel=void 0,this.refPanelPositioner=void 0,this.scrollContainerCached=null,this.scrollContainerResizeObserver=e&&e.ResizeObserver?new window.ResizeObserver(()=>{requestAnimationFrame(()=>{this.updateSidePanelStyles()})}):null,this.getMemoizedStyles=Object(i.a)((e,t,s,n,a,i)=>({panelWidth:e,panelTop:t,panelHeight:s,headerWidth:n,contentWidth:a,contextWidth:i})),this.currentPosition={panelWidth:void 0,headerWidth:void 0,contentWidth:void 0,contextWidth:void 0,panelTop:void 0,panelHeight:void 0},this.updateSidePanelStyles=()=>{if(!this.props||!this.props.isOpen)return;const{refs:e}=this.props,t=document.getElementById("jira-issue-header-actions"),s=e.refPanelColumnElement,n=s&&getComputedStyle(s),a=(e=>e.refVisibilityContainer?e.refVisibilityContainer.offsetWidth:void 0)(e),i=((e,t)=>{const s=e.refPanelColumnElement;if(s&&t)return s.offsetWidth-parseFloat(t.paddingLeft)-parseFloat(t.paddingRight)})(e,n),r=((e,t)=>e?e.offsetWidth:t||0+p.d)(t,i),o=this.calculateSidePanelPosition(),c=((e,t)=>{const s=e.refSidePanelContainerElement;return s&&s instanceof HTMLElement?s.offsetWidth+p.d-(t?parseFloat(t.paddingLeft):0):0})(e,n),l=o&&o.panelTop?o.panelTop:void 0,u=o&&o.panelHeight?o.panelHeight:void 0,d=this.getMemoizedStyles(c,l,u,r,i,a);d!==this.state.styles&&(this.setState({styles:d}),this.setSidePanelPosition(o))},this.getGlanceOffsetTop=e=>{if(!e)return;const t=e.getBoundingClientRect().top;let s=4;const n=document.getElementById("jira-issue-header-actions")||document.getElementById("jira-issue-header");if(n&&e.contains(n)){const e=this.props.refs.refLayoutContainer,a=e?e.getBoundingClientRect().top:0,i=n.getBoundingClientRect();s=(i&&i.bottom<0?a+i.height:i.bottom)+4-t}return s=Math.max(s,4),s},this.setSidePanelPosition=e=>{if(!e)return;const{panelTop:t,panelHeight:s}=e;this.currentPosition.panelTop!==t&&this.refFixedPanel.current&&(this.currentPosition.panelTop=t,this.refFixedPanel.current.style.top=null!=t?`${t}px`:""),this.currentPosition.panelHeight!==s&&this.refPanelPositioner.current&&(this.currentPosition.panelHeight=s,this.refPanelPositioner.current.style.height=null!=s?`${s}px`:"")},this.calculateSidePanelPosition=()=>{const e=this.getScrollContainer(),t=Object(l.a)(e);if(null===e||null===t)return;const s=Math.min(window.innerHeight,t||0),n=this.getGlanceOffsetTop(e)||0,a=n+e.getBoundingClientRect().top,i=Math.max(s-a,s-n);return i<=0&&c.i.safeError("issue.views.issue-base.context.side-panel",`panel height is <= 0: panelHeight='${i}`,new r.a({eventNameSuffix:"issue.error",type:"js",app:"issue"})),{panelTop:a,panelHeight:i<0?void 0:i}},this.updateSidePanelPosition=()=>{this.props.isOpen&&requestAnimationFrame(()=>{const e=this.calculateSidePanelPosition();this.setSidePanelPosition(e)})},this.refPanelPositioner=Object(n.createRef)(),this.refFixedPanel=Object(n.createRef)()}componentDidMount(){this.updateSidePanelStyles(),this.attachSidePanelListeners(),this.props&&this.props.refs&&this.scrollContainerResizeObserver&&(this.props.refs.refLayoutContainer&&this.scrollContainerResizeObserver.observe(this.props.refs.refLayoutContainer),this.props.refs.refPanelColumnElement&&this.scrollContainerResizeObserver.observe(this.props.refs.refPanelColumnElement))}componentDidUpdate(e){if(this.props.isOpen&&this.props.isOpen!==e.isOpen&&this.updateSidePanelStyles(),this.scrollContainerResizeObserver){const{refs:{refPanelColumnElement:t,refLayoutContainer:s}}=this.props,{refs:{refPanelColumnElement:n,refLayoutContainer:a}}=e;t&&this.scrollContainerResizeObserver.observe(t),s&&this.scrollContainerResizeObserver.observe(s),t===n&&s===a||(n&&this.scrollContainerResizeObserver&&this.scrollContainerResizeObserver.unobserve(n),a&&this.scrollContainerResizeObserver&&this.scrollContainerResizeObserver.unobserve(a),this.detachSidePanelListeners(),this.updateSidePanelPosition(),this.attachSidePanelListeners())}}componentWillUnmount(){this.detachSidePanelListeners(),this.scrollContainerResizeObserver&&this.scrollContainerResizeObserver.disconnect()}getScrollContainer(){return this.props.refs.refSidePanelContainerElement?this.props.refs.refSidePanelContainerElement:(this.scrollContainerCached||(this.scrollContainerCached=Object(u.a)(this.refPanelPositioner.current,!1)),this.scrollContainerCached)}attachSidePanelListeners(){const e=this.getScrollContainer();e&&(e===document.body?document.addEventListener("scroll",this.updateSidePanelPosition):e.addEventListener("scroll",this.updateSidePanelPosition))}detachSidePanelListeners(){const e=this.getScrollContainer();e&&e.removeEventListener("scroll",this.updateSidePanelPosition)}render(){const{isOpen:e,children:t}=this.props,{styles:s}=this.state,n=s.panelWidth?s.panelWidth:(s.contextWidth||0)+o.e;return a.a.createElement(d.a,{ref:this.refPanelPositioner,width:n,show:e},a.a.createElement(p.a,{innerRef:this.refFixedPanel},a.a.createElement(p.b,null,t(s))))}}m.displayName="SidePanel",m.displayName="SidePanel"}).call(this,s("./node_modules/webpack/buildin/global.js"))},"./src/packages/issue/issue-view/src/views/issue-base/foundation/header/header-actions/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return Va}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-redux/es/index.js"),r=s("./node_modules/lodash/noop.js"),o=s.n(r),c=s("./node_modules/@atlaskit/onboarding/dist/es2019/components/SpotlightTarget.js"),l=s("./src/packages/issue/issue-context-service/src/types.js"),u=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),d=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),p=s("./src/packages/issue/issue-view/src/common/util/flow-with-safe-component/index.js"),m=s("./src/packages/issue/issue-view/src/feature-flags.js"),b=s("./src/packages/issue/issue-view/src/selectors/clickthrough-banner-selector.js"),f=s("./node_modules/react-intl/lib/index.es.js"),g=s("./src/packages/issue/issue-view/src/common/state/selectors/time-tracking-selector.js"),h=s("./src/packages/issue/issue-view/src/ecosystem/forge/forge-extensions-selector.js"),y=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/hierarchy-level-selector.js"),O=s("./src/packages/issue/issue-view/src/selectors/changeboarding-selector.js"),j=s("./node_modules/reselect/lib/index.js"),E=s("./src/packages/issue/issue-view/src/selectors/issue-actions-permissions-selector.js");const v=Object(j.createSelector)(u.z,e=>e&&e.includes("flagActions")),k=Object(j.createSelector)(E.d,v,(e,t)=>e&&t);var w=s("./src/packages/issue/issue-view/src/selectors/issue-actions-selector.js"),S=s("./src/packages/issue/issue-view/src/selectors/ui-config-selector.js");const I=Object(j.createSelector)(d.G,e=>"service_desk"===e),C=Object(j.createSelector)(d.v,I,O.f,w.h,S.a,(e,t,s,n,a)=>t?!e&&!a:n&&s),T=Object(j.createSelector)(d.v,I,O.e,w.h,S.a,(e,t,s,n,a)=>t?!e&&!a:n&&s);var P=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/app-style/index.js"),_=s("./src/packages/platform/ui/error-boundary/src/index.js"),x=s("./node_modules/@atlaskit/dropdown-menu/dist/es2019/components/DropdownMenu.js"),D=s("./node_modules/@atlaskit/popup/dist/es2019/index.js"),A=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js"),M=s("./node_modules/@atlaskit/analytics-next--current/dist/esm/useAnalyticsEvents.js"),L=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),R=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js");const N=()=>Object(R.b)("issue.details.improve-switch-view-menu",!1);var U=s("./node_modules/@atlaskit/dropdown-menu/dist/es2019/components/group/DropdownItemGroupRadio.js"),F=s("./node_modules/@atlaskit/dropdown-menu/dist/es2019/components/group/DropdownItemGroup.js"),V=s("./node_modules/@atlaskit/menu/dist/es2019/components/section/popup-menu-group.js"),K=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),B=s("./node_modules/@atlaskit/menu/dist/es2019/components/section/section.js"),W=s("./node_modules/@atlaskit/theme/dist/es2019/index.js");const H=K.default.div(["border-top:1px solid ",";"],W.a.N30),G=Object(K.default)(B.a)(["[data-ds--menu--heading-item='true']{padding:0 12px;margin:7px 0;}"]),$=({dropdownGroupData:{items:e,name:t,type:s,key:n},isFirst:i,onClick:r})=>{let o;if(N()){const i=s&&"radio"===s?U.a:F.a;o=a.a.createElement(i,{id:n,title:t},e.map(e=>e))}else{const s=t&&t.length>0?t:void 0;o=a.a.createElement(V.a,{minWidth:0},a.a.createElement(G,{title:s},e.map((e,t)=>a.a.createElement("div",{key:t,onClick:r},e))))}return i?o:a.a.createElement(H,null,o)};$.displayName="DropdownGroup";var q=$,z=s("./node_modules/@atlaskit/button--current/dist/es2019/components/Button.js"),Y=s("./node_modules/@atlaskit/icon/glyph/more.js"),Q=s.n(Y),J=s("./node_modules/@atlaskit/tooltip/dist/es2019/Tooltip.js"),Z=s("./src/packages/platform/controllers/intl/src/index.js"),X=Object(f.defineMessages)({actions:{id:"issue-meatball-menu.dropdown-trigger.actions",defaultMessage:"Actions"}});function ee(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function te(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(s),!0).forEach((function(t){se(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ee(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function se(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function ne(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const ae=Object(K.keyframes)(["to{box-shadow:0 0 0 10px transparent;}"]),ie=(e,t)=>{const s=e(t),{buttonStyles:n}=s;return te(te({},ne(s,["buttonStyles"])),{},{buttonStyles:te(te({},n),{},{borderRadius:"4px",animation:`${ae} 1.45s 3 cubic-bezier(0.66, 0, 0, 1)`,animationDelay:"0.5s",boxShadow:`0 0 0 0 ${W.a.P300}`})})},re=({isOpen:e,isDisabled:t,isLoading:s,hasPulse:n,onClick:i})=>{const{formatMessage:r}=Object(Z.c)(),o=r(X.actions);return a.a.createElement(J.a,{content:o,position:"top"},a.a.createElement(z.a,{"aria-label":o,"aria-expanded":e,isDisabled:t,isLoading:s,appearance:"subtle",spacing:"default",iconBefore:a.a.createElement(Q.a,{label:"",size:"medium"}),theme:n?ie:void 0,isSelected:e,onClick:i}))};re.displayName="DropdownTrigger",re.defaultProps={hasPulse:!1,isDisabled:!1};var oe=re;const ce=K.default.div(["min-width:150px;max-height:95vh;padding:4px 0px;&&{[role='menuitem']{padding:8px 12px 7px;}[class*='GroupTitle']{padding:8px 12px;> div[class*='GroupTitleText']{padding:0;}}}"]),le=({meatballMenuData:e,hasPulse:t,isDisabled:s,isLoading:i})=>{const[r,o]=Object(n.useState)(!1),{createAnalyticsEvent:c}=Object(M.a)(),l=Object(n.useCallback)((e,t)=>{o(e.isOpen),Object(L.h)(t,"issueActionsOpenChanged")},[]),u=Object(n.useCallback)(()=>{o(!0);const e=c({action:"click",actionSubject:"dropdownItem"});Object(L.h)(e,"issueActionsOpenChanged")},[c]),d=Object(n.useCallback)(()=>{o(!1);const e=c({action:"click",actionSubject:"dropdownItem"});Object(L.h)(e,"issueActionsOpenChanged")},[c]);return N()?a.a.createElement(x.a,{appearance:"tall",position:"bottom right",trigger:a.a.createElement(oe,{isOpen:r,hasPulse:!0===t,isDisabled:s,isLoading:i}),onOpenChange:l,isMenuFixed:!0,boundariesElement:"window"},a.a.createElement(ce,null,e.filter(({items:e})=>e.length>0).map((e,t)=>a.a.createElement(q,{key:e.key,dropdownGroupData:e,isFirst:0===t,onClick:d})))):a.a.createElement(D.a,{boundariesElement:"scrollParent",isOpen:r,placement:"auto-end",trigger:e=>a.a.createElement("div",e,a.a.createElement(oe,{isOpen:r,hasPulse:!0===t,isDisabled:s,isLoading:i,onClick:r?d:u})),onClose:d,content:()=>a.a.createElement(ce,null,e.filter(({items:e})=>e.length>0).map((e,t)=>a.a.createElement(q,{key:e.key,dropdownGroupData:e,isFirst:0===t,onClick:d}))),zIndex:A.f.modal})};le.displayName="MeatballMenu",le.defaultProps={hasPulse:!1,isDisabled:!1,isLoading:!1};var ue=le,de=s("./src/packages/issue/issue-view/src/ecosystem/ecosystem-extensions-selector.js"),pe=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),me=s("./node_modules/@atlaskit/dropdown-menu/dist/es2019/components/item/DropdownItem.js");class be extends n.Component{constructor(...e){super(...e),this.ecosystemModalLinkRef=void 0,this.setEcosystemModalLinkRef=e=>{this.ecosystemModalLinkRef=e},this.clickEcosystemModalLinkRef=()=>this.ecosystemModalLinkRef&&this.ecosystemModalLinkRef.click(),this.renderEcosystemModalLink=(e,t)=>a.a.createElement("a",{href:e,className:t,ref:this.setEcosystemModalLinkRef,display:"none"},"")}render(){const{id:e,linkText:t,tooltip:s,href:n,styleClass:i}=this.props;return(a.a.createElement(me.a,{key:e,onClick:this.clickEcosystemModalLinkRef,title:s},t,this.renderEcosystemModalLink(n,i)))}}be.displayName="EcosystemWebItem",be.defaultProps={styleClass:null,tooltip:null};var fe=s("./src/packages/forge/forge-ui-analytics/src/services/issue-action/index.js"),ge=s("./src/packages/forge/forge-ui-analytics/src/ui/issue-action/index.js"),he=s("./src/packages/forge/forge-ui/src/ui/extension-title/index.js"),ye=s("./src/packages/issue/issue-view/src/actions/forge-actions.js");function Oe(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const je=e=>{let{onClick:t,source:s}=e,i=Oe(e,["onClick","source"]);const r=Object(n.useMemo)(()=>({source:s}),[s]),o=Object(n.useCallback)(()=>{Object(fe.a)(s),t(i)},[s,t,i]);return a.a.createElement(ge.a,{analyticsData:r,shouldFireScreenEvent:!1},a.a.createElement(me.a,{key:i.id,onClick:o},a.a.createElement(he.a,{extensionName:i.title,extensionEnvType:i.extension.environmentType})))};je.displayName="ForgeActionView";const Ee=Object(p.a)([Object(i.b)(e=>({source:Object(u.b)(e)}),{onClick:ye.c})])(je),ve=e=>{if("FORGE_ENTITY_TYPE"===e.type){return(e=>({component:()=>a.a.createElement(Ee,e),eventName:e.id,key:e.id,isAllowed:!0}))(e)}return(e=>({component:()=>a.a.createElement(be,{href:e.url,linkText:e.name,styleClass:e.styleClass,id:e.name,tooltip:e.tooltip}),eventName:e.name,key:e.name,isAllowed:!0}))(e)};class ke extends n.Component{componentDidCatch(e,{componentStack:t}){R.i.safeError("issue.error-boundary.issue-actions-meatball-menu.ecosystem-items","An uncaught error has occurred in issue actions meatball menu ecosystem items",new pe.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:{message:e.message,stack:e.stack,componentStack:t}}))}render(){const{ecosystemActions:e}=this.props;return e.map(ve).filter(e=>e.isAllowed).reduce((e,t)=>{if(t.component){const s=t,n=s.component,{key:i}=s;e.push(a.a.createElement(n,{key:i}))}return e},[])}}ke.displayName="EcosystemDropdownItems";var we=ke,Se=Object(i.b)(e=>({ecosystemActions:Object(de.j)(e)}),{})(we),Ie=s("./src/packages/issue/issue-view/src/common/constants/flags.js"),Ce=s("./src/packages/platform/utils/fetch/src/utils/as-text-stream.js");var Te=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/flagged-selector.js"),Pe=s("./src/packages/issue/issue-view/src/views/connect-field.js");const _e=Object(f.defineMessages)({addFlag:{id:"issue.flag.add",defaultMessage:"Add flag"},removeFlag:{id:"issue.flag.remove",defaultMessage:"Remove flag"}});class xe extends n.Component{constructor(...e){super(...e),this.removeFlag=()=>{this.props.onChange(!1),this.props.onConfirm(),this.props.onActionSelectedAnalytics("removeFlag")},this.addFlag=()=>{this.props.onChange(!0),this.props.onConfirm(),this.props.onActionSelectedAnalytics("addFlag")}}render(){return this.props.value?a.a.createElement(me.a,{key:"removeFlag",onClick:this.removeFlag},this.props.removeFlagMessage):a.a.createElement(me.a,{key:"addFlag",onClick:this.addFlag},this.props.addFlagMessage)}}xe.displayName="FlagIssueActionView",xe.displayName="FlagIssueActionView";const De=({baseUrl:e,issueKey:t,value:s})=>((e,t,s)=>Object(Ce.a)((e=>`${e}/rest/greenhopper/1.0/xboard/issue/flag/flag.json`)(e),{method:"POST",body:JSON.stringify({flag:s,issueKeys:[t],commentVisibility:"",comment:""})}).toPromise())(e,t,Object(Te.c)(s));var Ae=Object(Pe.a)((e,t)=>({fieldId:Object(Te.a)(e),shouldDiscardChangeOnFailure:!0,transformFromStateValue:Te.c,transformToStateValue:Te.d,saveField:De,additionalProps:(e,s)=>({onActionSelectedAnalytics:t.onActionSelectedAnalytics,addFlagMessage:s.formatMessage(_e.addFlag),removeFlagMessage:s.formatMessage(_e.removeFlag)}),onSaveFailureFlagType:Object(Te.b)(e)?Ie.B:Ie.A}))(xe),Me=s("./src/packages/issue/issue-view/src/common/actions/worklog-actions.js"),Le=s("./src/packages/issue/issue-view/src/common/messages/time.js");const Re=({onLogTimeClick:e})=>{const{formatMessage:t}=Object(Z.c)(),{createAnalyticsEvent:s}=Object(M.a)(),i=Object(n.useCallback)(()=>{e();const t=s({action:"clicked",actionSubject:"dropdownItem"});Object(L.h)(t,"logWork")},[s,e]);return a.a.createElement(me.a,{key:"LogTimeActionView",onClick:i},t(Le.a.logWork))};Re.displayName="LogWork";var Ne=Re,Ue=Object(i.b)(null,e=>({onLogTimeClick:()=>{e(Object(Me.H)("ADD_MODAL",null))}}))(Ne);var Fe=(e,t)=>({name:"",key:"AddToIssueDropdownGroup",items:[...t?[a.a.createElement(Ue,{key:"logWork"})]:[],...e?[a.a.createElement(Ae,{key:"flagIssue"})]:[],a.a.createElement(Se,{key:"ecosystemItems"})]}),Ve=s("./node_modules/react-loosely-lazy/lib/esm/index.js"),Ke=s("./node_modules/react-async-component/commonjs/index.js"),Be=s("./src/packages/platform/ui/modal/src/index.js");Object(Ke.asyncComponent)({resolve:()=>s.e("async-jira-clone-issue-dialog").then(s.bind(null,"./src/packages/issue/clone-issue-dialog/src/ui/main.js")),name:"AsyncCloneIssueDialog"});const We=({children:e,packageName:t})=>a.a.createElement(Be.a,{id:"clone-issue-dialog",packageName:t},e);We.displayName="CloneIssueDialogBoundary";const He=Object(j.createSelector)(d.J,e=>e.cloneModal),Ge=Object(j.createSelector)(He,e=>e.isOpen),$e=Object(Ve.f)(()=>s.e("async-clone-issue-dialog").then(s.bind(null,"./src/packages/issue/clone-issue-dialog/src/index.js")),{moduleId:"./src/packages/issue/clone-issue-dialog/src/index.js"});var qe=Object(i.b)(e=>({isOpen:Ge(e)}),e=>({hideModal:()=>e((()=>({type:"HIDE_CLONE_MODAL"}))())}))(({isOpen:e,hideModal:t})=>e?a.a.createElement(We,{packageName:"issue"},a.a.createElement($e,{onClose:t})):null),ze=s("./src/packages/platform/observability/analytics-web-react/src/components/decorators.js"),Ye=s("./src/packages/platform/observability/analytics-web-react/src/utils/events.js"),Qe=s("./src/packages/platform/observability/analytics-web-react/src/components/view-tracker.js"),Je=s("./src/packages/platform/observability/analytics-web-react/src/components/with-fire-ui-analytics.js"),Ze=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/confirmation-modal/index.js"),Xe=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/component-with-condition.js"),et=s("./src/packages/issue/issue-view/src/actions/issue-delete-actions.js"),tt=s("./node_modules/lodash/isEmpty.js"),st=s.n(tt),nt=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js");const at=Object(nt.q)("children-issues"),it=Object(j.createSelector)(at,e=>!!e&&!st()(e.value));var rt,ot,ct,lt=s("./src/packages/issue/issue-view/src/selectors/subtasks-selector.js"),ut=Object(f.defineMessages)({delete:{id:"issue.delete.confirm",defaultMessage:"Delete"},deleteHeading:{id:"issue.delete-heading",defaultMessage:"Delete {issueKey}?"},deleteWithSubtasksHeading:{id:"issue.delete-with-subtasks-heading",defaultMessage:"Delete {issueKey} and its subtasks?"},deleteWithChildrenHeading:{id:"issue.delete-with-children-heading",defaultMessage:"Delete {issueKey} and its child issues?"},cancel:{id:"issue.delete.cancel",defaultMessage:"Cancel"},deleteWarning:{id:"issue.delete-warning",defaultMessage:"You're about to permanently delete this issue, its comments and attachments, and all of its data."},deleteWithSubtasksWarning:{id:"issue.delete-with-subtasks-warning",defaultMessage:"You're about to permanently delete this issue and all its subtasks, its comments and attachments, and all of its data. You should move any subtasks you don't want to delete to another parent issue."},deleteWithChildrenWarning:{id:"issue.delete-with-children-warning",defaultMessage:"You're about to permanently delete this issue and all its child issues, its comments and attachments, and all of its data. You should move any child issues you don't want to delete to another parent issue."},deleteRecommendation:{id:"issue.delete-recommendation",defaultMessage:"If you're not sure, you can resolve or close this issue instead."}});function dt(){return(dt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}let pt=Object(ze.a)("issueDelete",Ye.a.MODAL)((ct=ot=class extends n.Component{constructor(...e){super(...e),this.onConfirmDeleteIssue=(e,t)=>{this.props.deleteConfirmAnalytics(t),this.props.triggerDeleteRequest(this.props.issueKey,t)},this.onCancel=(e,t)=>{this.props.deleteCancelAnalytics(t),this.props.triggerCloseDeleteIssueModal()},this.getChildConditionalDeleteHeading=()=>this.props.shouldShowChildSpecificCopy?this.props.isSimplifiedProject?ut.deleteWithChildrenHeading:ut.deleteWithSubtasksHeading:ut.deleteHeading,this.getChildConditionalDeleteWarning=()=>this.props.shouldShowChildSpecificCopy?this.props.isSimplifiedProject?ut.deleteWithChildrenWarning:ut.deleteWithSubtasksWarning:ut.deleteWarning}UNSAFE_componentWillReceiveProps(e){!e.isDeletingIssue&&this.props.isDeletingIssue&&(e.didIssueDeleteFail?this.props.issueDeleteCallbacks.onIssueDeleteFailure({issueId:this.props.issueId,issueKey:this.props.issueKey}):(this.props.triggerCloseDeleteIssueModal(),this.props.issueDeleteCallbacks.onIssueDeleteSuccess({issueId:this.props.issueId,issueKey:this.props.issueKey}),this.props.onClose()))}render(){const{issueKey:e,isDeletingIssue:t,intl:{formatMessage:s}}=this.props;return this.props.isDeleteIssueModalOpen&&a.a.createElement(Ze.b,{headerMessage:a.a.createElement(f.FormattedMessage,dt({},this.getChildConditionalDeleteHeading(),{values:{issueKey:e}})),appearance:"danger",contentMessage:a.a.createElement("span",null,a.a.createElement("p",null,s(this.getChildConditionalDeleteWarning())),a.a.createElement("p",null,s(ut.deleteRecommendation))),confirmActionText:s(ut.delete),cancelActionText:s(ut.cancel),onConfirm:this.onConfirmDeleteIssue,onCancel:this.onCancel,externalId:"issue.action.delete-confirmation-dialog",isLoading:t,isConfirmDisabled:t,isCancelDisabled:t},a.a.createElement(Qe.a,null))}},ot.displayName="DeleteIssueView",ot.defaultProps={issueDeleteCallbacks:{onIssueDeleteSuccess:o.a,onIssueDeleteFailure:o.a}},rt=ct))||rt;var mt,bt,ft,gt=Object(p.a)([f.injectIntl,Object(i.b)(e=>({issueId:Object(d.l)(e),issueKey:Object(u.B)(e),isDeletingIssue:Object(d.p)(e),isDeleteIssueModalOpen:Object(d.o)(e),didIssueDeleteFail:Object(d.b)(e),isSimplifiedProject:Object(d.v)(e),shouldShowChildSpecificCopy:Object(d.v)(e)?Object(y.b)(e)&&it(e):Object(lt.b)(e)}),e=>({triggerCloseDeleteIssueModal:()=>{e(Object(et.a)())},triggerDeleteRequest:(t,s)=>{e(Object(et.c)(t,s))}})),Object(Je.a)({deleteCancelAnalytics:"deleteIssueCancel",deleteConfirmAnalytics:"deleteIssueDelete"})])(pt);function ht(){return(ht=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}let yt=Object(ze.a)("issueDelete",Ye.a.MODAL)((ft=bt=class extends n.Component{constructor(...e){super(...e),this.onConfirmDeleteIssue=(e,t)=>{this.props.deleteConfirmAnalytics(t),this.props.triggerDeleteRequest(this.props.issueKey,t)},this.onCancel=(e,t)=>{this.props.deleteCancelAnalytics(t),this.props.triggerCloseDeleteIssueModal()},this.getChildConditionalDeleteHeading=()=>this.props.shouldShowChildSpecificCopy?this.props.isSimplifiedProject?ut.deleteWithChildrenHeading:ut.deleteWithSubtasksHeading:ut.deleteHeading,this.getChildConditionalDeleteWarning=()=>this.props.shouldShowChildSpecificCopy?this.props.isSimplifiedProject?ut.deleteWithChildrenWarning:ut.deleteWithSubtasksWarning:ut.deleteWarning}UNSAFE_componentWillReceiveProps(e){!e.isDeletingIssue&&this.props.isDeletingIssue&&(e.didIssueDeleteFail?this.props.onIssueDeleteFailure({issueId:this.props.issueId,issueKey:this.props.issueKey}):(this.props.triggerCloseDeleteIssueModal(),this.props.onIssueDeleteSuccess({issueId:this.props.issueId,issueKey:this.props.issueKey}),this.props.onClose()))}render(){const{issueKey:e,isDeletingIssue:t,intl:{formatMessage:s}}=this.props;return this.props.isDeleteIssueModalOpen&&a.a.createElement(Ze.b,{headerMessage:a.a.createElement(f.FormattedMessage,ht({},this.getChildConditionalDeleteHeading(),{values:{issueKey:e}})),appearance:"danger",contentMessage:a.a.createElement("span",null,a.a.createElement("p",null,s(this.getChildConditionalDeleteWarning())),a.a.createElement("p",null,s(ut.deleteRecommendation))),confirmActionText:s(ut.delete),cancelActionText:s(ut.cancel),onConfirm:this.onConfirmDeleteIssue,onCancel:this.onCancel,externalId:"issue.action.delete-confirmation-dialog",isLoading:t,isConfirmDisabled:t,isCancelDisabled:t},a.a.createElement(Qe.a,null))}},bt.displayName="DeleteIssueView",bt.defaultProps={onIssueDeleteSuccess:o.a,onIssueDeleteFailure:o.a},mt=ft))||mt;const Ot=Object(p.a)([f.injectIntl,Object(i.b)(e=>({issueId:Object(d.l)(e),issueKey:Object(u.B)(e),isDeletingIssue:Object(d.p)(e),isDeleteIssueModalOpen:Object(d.o)(e),didIssueDeleteFail:Object(d.b)(e),isSimplifiedProject:Object(d.v)(e),shouldShowChildSpecificCopy:Object(d.v)(e)?Object(y.b)(e)&&it(e):Object(lt.b)(e)}),e=>({triggerCloseDeleteIssueModal:()=>{e(Object(et.a)())},triggerDeleteRequest:(t,s)=>{e(Object(et.c)(t,s))}})),Object(Je.a)({deleteCancelAnalytics:"deleteIssueCancel",deleteConfirmAnalytics:"deleteIssueDelete"})])(yt);Object(Xe.a)(m.isRefactoringDeleteCallbackPropsEnabled,Ot,gt);var jt=s("./src/packages/forge/forge-ui-async/src/ui/issue-action/async.js");const Et=K.default.div(["display:none;"]),vt=({activeAction:e,context:t,onClose:s,onRendered:i,source:r})=>{const o=Object(n.useMemo)(()=>({source:r}),[r]);if(!e)return null;return a.a.createElement(ge.a,{analyticsData:o,shouldFireScreenEvent:!0},a.a.createElement(Et,{onKeyDown:e=>{"Escape"!==e.key&&"Esc"!==e.key||(e.nativeEvent.stopImmediatePropagation(),s())}},a.a.createElement(jt.a,{extension:e.action.extension,platformContext:t,analyticsData:o,onClose:s,onInitialRender:i})))};vt.displayName="ForgeActionRendererView";const kt=Object(p.a)([Object(i.b)(e=>({activeAction:Object(h.a)(e),context:Object(h.b)(e),source:Object(u.b)(e)}),{onClose:ye.b,onRendered:ye.d})])(vt);var wt=s("./src/packages/issue/jira-settings-service/src/main.js");var St=Object(f.defineMessages)({findOutMore:{id:"issue.find-out-more",defaultMessage:"Find out more"}});const It=({isServiceDeskProject:e})=>{const{formatMessage:t}=Object(Z.c)(),{createAnalyticsEvent:s}=Object(M.a)(),i=Object(n.useCallback)(()=>{const e=s({action:"clicked",actionSubject:"dropdownItem"});Object(L.h)(e,"findOutMore")},[s]),r=e?"//support.atlassian.com/jira-service-desk-cloud/docs/changes-to-requests-in-the-new-issue-view/":"//confluence.atlassian.com/display/JIRACORECLOUD/The+new+Jira+issue+view";return a.a.createElement(me.a,{onClick:i,href:r,target:"_blank",key:"find-out-more"},t(St.findOutMore))};It.displayName="FindOutMore";var Ct=It,Tt=Object(i.b)(e=>({isServiceDeskProject:"service_desk"===Object(d.G)(e)}),{})(Ct),Pt=Object(f.defineMessages)({newIssueView:{id:"issue.title-for-new-issue-actions",defaultMessage:"New Jira issue view"}}),_t=s("./src/packages/common-legacy-do-not-add-anything-new/src/urls/old-issue-view-url.js"),xt=Object(f.defineMessages)({seeOldView:{id:"issue.see-old-view",defaultMessage:"See the old view"}});const Dt=()=>{const{formatMessage:e}=Object(Z.c)(),{createAnalyticsEvent:t}=Object(M.a)(),s=Object(n.useCallback)(()=>{const e=t({action:"clicked",actionSubject:"dropdownItem"});Object(L.h)(e,"oldViewClickthrough")},[t]);return a.a.createElement(me.a,{onClick:s,href:Object(_t.a)(),key:"old-view-clickthrough"},e(xt.seeOldView))};Dt.displayName="OldViewClickthrough";var At=Dt,Mt=Object(f.defineMessages)({turnOffNewIssueView:{id:"issue.turn-off-new-issue-view",defaultMessage:"Turn off new issue view"}});const Lt=({baseUrl:e})=>{const{formatMessage:t}=Object(Z.c)(),{createAnalyticsEvent:s}=Object(M.a)(),i=Object(n.useCallback)(()=>{const e=s({action:"clicked",actionSubject:"dropdownItem"});Object(L.h)(e,"optOut")},[s]),r=`${e}/secure/ViewPersonalSettings.jspa`;return(a.a.createElement(me.a,{onClick:i,href:r,target:"_blank",key:"opt-out"},t(Mt.turnOffNewIssueView)))};Lt.displayName="OptOut";var Rt=Lt,Nt=Object(i.b)(e=>({baseUrl:Object(u.g)(e)}),{})(Rt),Ut=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),s("./src/packages/issue/opt-in-back/src/services/onboarding-tour/main.js")),Ft=Object(f.defineMessages)({startTour:{id:"issue.start-changeboarding-tour",defaultMessage:"Take a tour"}});const Vt=()=>{const{formatMessage:e}=Object(Z.c)(),{createAnalyticsEvent:t}=Object(M.a)(),[,{setTourIsActive:s}]=Object(Ut.a)(),i=Object(n.useCallback)(()=>{s();const e=t({action:"clicked",actionSubject:"dropdownItem"});Object(L.h)(e,"startChangeBoardingTour")},[t,s]);return a.a.createElement(me.a,{onClick:i,key:"start-tour"},e(Ft.startTour))};Vt.displayName="StartTour";var Kt=Vt,Bt=s("./src/packages/issue/issue-view/src/actions/changeboarding-actions.js"),Wt=s("./node_modules/@atlaskit/icon/glyph/presence-active.js"),Ht=s.n(Wt),Gt=Object(f.defineMessages)({startTour:{id:"issue.start-guided-tour",defaultMessage:"Show me the highlights"}});const $t=({onStartTourClick:e,shouldShowPulse:t})=>{const{formatMessage:s}=Object(Z.c)(),{createAnalyticsEvent:i}=Object(M.a)(),r=Object(n.useCallback)(()=>{e();const t=i({action:"clicked",actionSubject:"dropdownItem"});Object(L.h)(t,"startTour")},[i,e]);return a.a.createElement(me.a,{onClick:r,elemBefore:t?a.a.createElement(Ht.a,{label:"",primaryColor:W.a.P300}):null,key:"start-tour"},s(Gt.startTour))};$t.displayName="StartTour";var qt=$t,zt=Object(i.b)(e=>({shouldShowPulse:Object(O.b)(e)}),e=>({onStartTourClick:()=>{e(Object(Bt.c)(Date.now()))}}))(qt),Yt=Object(f.defineMessages)({turnOffForNow:{id:"issue.turn-off-issue-view-for-now",defaultMessage:"Turn off for now"}});const Qt=({baseUrl:e})=>{const{formatMessage:t}=Object(Z.c)(),{createAnalyticsEvent:s}=Object(M.a)(),i=Object(n.useCallback)(()=>{const e=s({action:"clicked",actionSubject:"dropdownItem"});Object(L.h)(e,"turnOffForNow")},[s]),r=`${e}/secure/ViewPersonalSettings.jspa`;return(a.a.createElement(me.a,{onClick:i,href:r,target:"_blank",key:"turn-off-for-now"},t(Yt.turnOffForNow)))};Qt.displayName="TurnOffForNow";var Jt=Qt,Zt=Object(i.b)(e=>({baseUrl:Object(u.g)(e)}),{})(Jt);var Xt=(e,t,s,n,i,r)=>{const o=Object(m.isOptInBackToBentoEnabled)()?Kt:zt,[c]=Object(wt.b)();return{name:e(Pt.newIssueView),key:"IssueActionsDropdownGroup",items:(()=>void 0!==c&&"LOCK_IN_NEW_ISSUE_VIEW"===c.newIssueViewTransitionLockingStatus?[...t?[a.a.createElement(o,{key:"startTour"})]:[],...s?[a.a.createElement(Tt,{key:"findOutMore"})]:[],...r?[a.a.createElement(At,{key:"oldViewClickthrough"})]:[]]:[...t?[a.a.createElement(o,{key:"startTour"})]:[],...s?[a.a.createElement(Tt,{key:"findOutMore"})]:[],...n?[a.a.createElement(Zt,{key:"turnOffForNow"})]:[],...i?[a.a.createElement(Nt,{key:"optOut"})]:[],...r?[a.a.createElement(At,{key:"oldViewClickthrough"})]:[]])()}},es=s("./src/packages/platform/utils/constants/src/analytics-sources.js"),ts=s("./src/packages/issue/issue-view/src/common/service/issue/issue-view-mode.js"),ss=s("./src/packages/issue/issue-view/src/selectors/breadcrumbs-selector.js"),ns=s("./src/packages/issue/issue-view/src/selectors/classic-project-config-selector.js"),as=s("./src/packages/issue/issue-view/src/selectors/request-type-selector.js"),is=s("./src/packages/platform/utils/types/src/general.js"),rs=s("./src/packages/project-settings/common/src/urls.js"),os=Object(f.defineMessages)({configure:{id:"issue.configure",defaultMessage:"Configure"},swiftBacklink:{id:"issue.swift-backlink-title",defaultMessage:"Back to {issueKey}"}});const cs=({shouldShowSwiftLink:e,baseUrl:t,projectKey:s,viewScreenId:i,projectType:r,requestTypeId:o,issueTypeId:c,issueKey:l})=>{const{formatMessage:u}=Object(Z.c)(),{createAnalyticsEvent:d}=Object(M.a)(),p=Object(n.useCallback)(()=>{const e=d({action:"clicked",actionSubject:"dropdownItem"});Object(L.h)(e,"configureIssue")},[d]),m=null!=o&&""!==o?`${t}/servicedesk/admin/${s}/request-types/request-type/${o}`:`${t}/plugins/servlet/project-config/${s}/issuelayout?screenId=${i}`,b=(null!=o||""===o)&&0===i;if(e&&r){const{pathname:e,search:n}=window.location,i=Object(rs.a)(Object(is.b)(t),r,s,c,{url:`${e}${n}`,title:u(os.swiftBacklink,{issueKey:l})});return a.a.createElement(me.a,{onClick:p,href:i,key:"configure"},u(os.configure))}return(a.a.createElement(me.a,{onClick:p,href:m,target:"_blank",isDisabled:b,key:"configure"},u(os.configure)))};cs.displayName="ConfigureIssue";var ls=cs,us=Object(i.b)(e=>({projectType:Object(d.G)(e),baseUrl:Object(u.g)(e),issueKey:Object(u.B)(e),issueTypeId:Object(ss.e)(e),projectKey:Object(u.I)(e),viewScreenId:Object(ns.a)(e),requestTypeId:Object(as.a)(e),shouldShowSwiftLink:Object(w.i)(e)}),{})(ls),ds=Object(f.defineMessages)({switchToModal:{id:"issue.switch-to-modal",defaultMessage:"Open issues in dialog"}});const ps=({viewModeOptions:e,emitEventToLegacyApp:t})=>{const{formatMessage:s}=Object(Z.c)(),{createAnalyticsEvent:i}=Object(M.a)(),r=Object(n.useCallback)(()=>{!0===e.viewModeSwitchEnabled&&e.onSwitchToModal?e.onSwitchToModal():t("issue.details.view.switch-to-modal");const s=i({action:"clicked",actionSubject:"dropdownItem"});Object(L.h)(s,"switchToModal")},[i,t,e]);return a.a.createElement(me.a,{key:"switch-to-modal",onClick:r},s(ds.switchToModal))};ps.displayName="SwitchToModal",ps.defaultProps={viewModeOptions:{viewModeSwitchEnabled:!1}};var ms=ps,bs=Object(f.defineMessages)({switchToSidebar:{id:"issue.switch-to-sidebar",defaultMessage:"Open issues in sidebar"}});const fs=({viewModeOptions:e,emitEventToLegacyApp:t})=>{const{formatMessage:s}=Object(Z.c)(),{createAnalyticsEvent:i}=Object(M.a)(),r=Object(n.useCallback)(()=>{!0===e.viewModeSwitchEnabled&&e.onSwitchToSidebar?e.onSwitchToSidebar():t("issue.details.view.switch-to-sidebar");const s=i({action:"clicked",actionSubject:"dropdownItem"});Object(L.h)(s,"switchToSidebar")},[i,t,e]);return a.a.createElement(me.a,{key:"switch-to-sidebar",onClick:r},s(bs.switchToSidebar))};fs.displayName="SwitchToSidebar",fs.defaultProps={viewModeOptions:{viewModeSwitchEnabled:!1}};var gs=fs;const hs=e=>{const t=document.getElementById("ghx-issue-fragment");window.AJS&&window.AJS.$(t).trigger(e)};var ys=(e,t,s,n)=>{if(Object(m.isImproveSwitchViewMenuEnabled)())return{name:"",key:"issueConfigurationDropdownGroup",items:[...t?[a.a.createElement(us,{key:"configureClassic"})]:[]]};const i=n?n.valueOf():null,r=s&&i===es.a.SOFTWARE_ISSUE||e.viewModeSwitchEnabled,o=!0===r&&Object(ts.b)(e.viewMode),c=!0===r&&!Object(ts.b)(e.viewMode);return{name:"",key:"issueConfigurationDropdownGroup",items:[...o?[a.a.createElement(ms,{key:"switchToModal",emitEventToLegacyApp:hs,viewModeOptions:e})]:[],...c?[a.a.createElement(gs,{key:"switchToSidebar",emitEventToLegacyApp:hs,viewModeOptions:e})]:[],...t?[a.a.createElement(us,{key:"configureClassic"})]:[]]}},Os=Object(f.defineMessages)({exportDOC:{id:"issue.export-doc",defaultMessage:"Export Word"}});const js=({baseUrl:e,issueKey:t})=>{const{formatMessage:s}=Object(Z.c)(),{createAnalyticsEvent:i}=Object(M.a)(),r=Object(n.useCallback)(()=>{const e=i({action:"clicked",actionSubject:"dropdownItem"});Object(L.h)(e,"exportDoc")},[i]),o=`${e}/si/jira.issueviews:issue-word/${t}/${t}.doc`;return(a.a.createElement(me.a,{key:"ExportDocIssueActionView",onClick:r,href:o,target:"_blank"},s(Os.exportDOC)))};js.displayName="ExportIssueDoc";var Es=js,vs=Object(i.b)(e=>({baseUrl:Object(u.g)(e),issueKey:Object(u.B)(e)}),{})(Es),ks=Object(f.defineMessages)({exportXML:{id:"issue.export-xml",defaultMessage:"Export XML"}});const ws=({baseUrl:e,issueKey:t})=>{const{formatMessage:s}=Object(Z.c)(),{createAnalyticsEvent:i}=Object(M.a)(),r=Object(n.useCallback)(()=>{const e=i({action:"clicked",actionSubject:"dropdownItem"});Object(L.h)(e,"exportXml")},[i]),o=`${e}/si/jira.issueviews:issue-xml/${t}/${t}.xml`;return(a.a.createElement(me.a,{key:"ExportXmlIssueActionView",onClick:r,href:o,target:"_blank"},s(ks.exportXML)))};ws.displayName="ExportIssueXML";var Ss=ws,Is=Object(i.b)(e=>({baseUrl:Object(u.g)(e),issueKey:Object(u.B)(e)}),{})(Ss),Cs=Object(f.defineMessages)({print:{id:"issue.print",defaultMessage:"Print"}});const Ts=({baseUrl:e,issueKey:t})=>{const{formatMessage:s}=Object(Z.c)(),{createAnalyticsEvent:i}=Object(M.a)(),r=Object(n.useCallback)(()=>{const e=i({action:"clicked",actionSubject:"dropdownItem"});Object(L.h)(e,"printIssue")},[i]),o=`${e}/si/jira.issueviews:issue-html/${t}/${t}.html`;return(a.a.createElement(me.a,{key:"PrintIssueActionView",onClick:r,href:o,target:"_blank"},s(Cs.print)))};Ts.displayName="PrintIssue";var Ps=Ts,_s=Object(i.b)(e=>({baseUrl:Object(u.g)(e),issueKey:Object(u.B)(e)}),{})(Ps);var xs={name:"",key:"issueExportDropdownGroup",items:[a.a.createElement(_s,{key:"printIssue"}),a.a.createElement(Is,{key:"exportIssueXML"}),a.a.createElement(vs,{key:"exportIssueDoc"})]},Ds=Object(f.defineMessages)({clone:{id:"issue.clone",defaultMessage:"Clone"}});const As=({onCloneItemClick:e})=>{const{formatMessage:t}=Object(Z.c)(),{createAnalyticsEvent:s}=Object(M.a)(),i=Object(n.useCallback)(()=>{e();const t=s({action:"clicked",actionSubject:"dropdownItem"});Object(L.h)(t,"cloneIssue")},[s,e]);return a.a.createElement(me.a,{key:"clone",onClick:i},t(Ds.clone))};As.displayName="CloneIssue";var Ms=As,Ls=Object(i.b)(null,e=>({onCloneItemClick:()=>{e((()=>({type:"SHOW_CLONE_MODAL"}))())}}))(Ms),Rs=Object(f.defineMessages)({clone:{id:"issue.clone",defaultMessage:"Clone"}});const Ns=({baseUrl:e,issueId:t})=>{const{formatMessage:s}=Object(Z.c)(),{createAnalyticsEvent:i}=Object(M.a)(),r=Object(n.useCallback)(()=>{const e=i({action:"clicked",actionSubject:"dropdownItem"});Object(L.h)(e,"cloneIssue")},[i]),o=`${e}/secure/CloneIssueDetails!default.jspa?id=${t||""}`;return(a.a.createElement(me.a,{key:"clone",href:o,onClick:r},s(Rs.clone)))};Ns.displayName="CloneIssue";var Us=Ns,Fs=Object(i.b)(e=>({baseUrl:Object(u.g)(e),issueId:Object(d.l)(e)}),{})(Us),Vs=Object(f.defineMessages)({convertToIssue:{id:"issue.convert-to-issue",defaultMessage:"Convert to Issue"}});const Ks=({baseUrl:e,issueId:t})=>{const{formatMessage:s}=Object(Z.c)(),{createAnalyticsEvent:i}=Object(M.a)(),r=Object(n.useCallback)(()=>{const e=i({action:"clicked",actionSubject:"dropdownItem"});Object(L.h)(e,"convertToIssue")},[i]),o=`${e}/secure/ConvertSubTask.jspa?id=${t||""}`;return(a.a.createElement(me.a,{key:"convert-to-issue",href:o,onClick:r},s(Vs.convertToIssue)))};Ks.displayName="ConvertToIssue";var Bs=Ks,Ws=Object(i.b)(e=>({baseUrl:Object(u.g)(e),issueId:Object(d.l)(e)}),{})(Bs),Hs=Object(f.defineMessages)({convertToSubtask:{id:"issue.convert-to-subtask",defaultMessage:"Convert to Subtask"}});const Gs=({baseUrl:e,issueId:t})=>{const{formatMessage:s}=Object(Z.c)(),{createAnalyticsEvent:i}=Object(M.a)(),r=Object(n.useCallback)(()=>{const e=i({action:"clicked",actionSubject:"dropdownItem"});Object(L.h)(e,"convertToSubtask")},[i]),o=`${e}/secure/ConvertIssue.jspa?id=${t||""}`;return(a.a.createElement(me.a,{key:"convert-to-subtask",href:o,onClick:r},s(Hs.convertToSubtask)))};Gs.displayName="ConvertToSubtask";var $s=Gs,qs=Object(i.b)(e=>({baseUrl:Object(u.g)(e),issueId:Object(d.l)(e)}),{})($s),zs=Object(f.defineMessages)({delete:{id:"issue.delete",defaultMessage:"Delete"}});const Ys=({onDeleteIssueClick:e})=>{const{formatMessage:t}=Object(Z.c)(),{createAnalyticsEvent:s}=Object(M.a)(),i=Object(n.useCallback)(()=>{e();const t=s({action:"clicked",actionSubject:"dropdownItem"});Object(L.h)(t,"deleteIssue")},[s,e]);return a.a.createElement(me.a,{key:"delete",onClick:i},t(zs.delete))};Ys.displayName="DeleteIssue";var Qs=Ys,Js=Object(i.b)(null,e=>({onDeleteIssueClick:()=>{e(Object(et.e)())}}))(Qs),Zs=s("./src/packages/issue/issue-view/src/actions/assign-issue-parent-modal-actions.js");const Xs=Object(j.createSelector)(d.B,e=>Boolean(e&&e.id));var en=Object(f.defineMessages)({addToParentLevel:{id:"issue.add-to-parent-level",defaultMessage:"Add parent"},changeParentLevel:{id:"issue.change-parent-level",defaultMessage:"Change parent"}});const tn=({onLinkToParentClick:e,hasParent:t})=>{const{formatMessage:s}=Object(Z.c)(),{createAnalyticsEvent:i}=Object(M.a)(),r=Object(n.useCallback)(()=>{e();const t=i({action:"clicked",actionSubject:"dropdownItem"});Object(L.h)(t,"linkToParent")},[i,e]);return a.a.createElement(me.a,{key:"link-to-parent",onClick:r},s(t?en.changeParentLevel:en.addToParentLevel))};tn.displayName="LinkToParent";var sn=tn,nn=Object(i.b)(e=>({hasParent:Xs(e)}),e=>({onLinkToParentClick:()=>{e(Object(Zs.h)())}}))(sn),an=Object(f.defineMessages)({move:{id:"issue.move",defaultMessage:"Move"}});const rn=({isSubtask:e,baseUrl:t,issueId:s})=>{const{formatMessage:i}=Object(Z.c)(),{createAnalyticsEvent:r}=Object(M.a)(),o=Object(n.useCallback)(()=>{const e=r({action:"clicked",actionSubject:"dropdownItem"});Object(L.h)(e,"moveIssue")},[r]),c=e?`${t}/secure/MoveSubTaskChooseOperation!default.jspa?id=${s||""}`:`${t}/secure/MoveIssue!default.jspa?id=${s||""}`;return(a.a.createElement(me.a,{key:"move",href:c,onClick:o},i(an.move)))};rn.displayName="MoveIssue";var on=rn,cn=Object(i.b)(e=>({baseUrl:Object(u.g)(e),issueId:Object(d.l)(e),isSubtask:Object(lt.c)(e)}),{})(on);var ln=(e,t,s,n,i,r)=>({name:"",key:"IssueManipulationDropdownGroup",items:[...e?[a.a.createElement(nn,{key:"linkToParent"})]:[],...t?[a.a.createElement(qs,{key:"convertToSubtask"})]:[],...s?[a.a.createElement(Ws,{key:"convertToIssue"})]:[],...n?[a.a.createElement(cn,{key:"moveIssue"})]:[],...i?Object(m.isInlineCloneEnabled)()?[a.a.createElement(Ls,{key:"cloneIssue"})]:[a.a.createElement(Fs,{key:"cloneIssue"})]:[],...r?[a.a.createElement(Js,{key:"deleteIssue"})]:[]]}),un=Object(f.defineMessages)({switchViewGroup:{id:"issue.switch-view.title",defaultMessage:"View issues in"},sideView:{id:"issue.switch-view.side-view",defaultMessage:"Side view"},dialog:{id:"issue.switch-view.dialog",defaultMessage:"Dialog"}}),dn=s("./node_modules/@atlaskit/dropdown-menu/dist/es2019/components/item/DropdownItemRadio.js");const pn=Object(K.default)(dn.a)(["padding:","px ","px !important;"],A.e/2,1.5*A.e),mn=({viewModeOptions:e,emitEventToLegacyApp:t,isSelected:s})=>{const{formatMessage:i}=Object(Z.c)(),{createAnalyticsEvent:r}=Object(M.a)(),o=Object(n.useCallback)(()=>{!0===e.viewModeSwitchEnabled&&e.onSwitchToModal?e.onSwitchToModal():t("issue.details.view.switch-to-modal");const s=r({action:"clicked",actionSubject:"dropdownItem"});Object(L.h)(s,"switchToModal")},[r,t,e]);return a.a.createElement(pn,{id:"switch-to-modal",key:"switch-to-modal",onClick:o,isSelected:s},i(un.dialog))};mn.displayName="DialogView",mn.defaultProps={viewModeOptions:{viewModeSwitchEnabled:!1}};var bn=mn;const fn=({viewModeOptions:e,emitEventToLegacyApp:t,isSelected:s})=>{const{formatMessage:i}=Object(Z.c)(),{createAnalyticsEvent:r}=Object(M.a)(),o=Object(n.useCallback)(()=>{!0===e.viewModeSwitchEnabled&&e.onSwitchToSidebar?e.onSwitchToSidebar():t("issue.details.view.switch-to-sidebar");const s=r({action:"clicked",actionSubject:"dropdownItem"});Object(L.h)(s,"switchToSidebar")},[r,t,e]);return a.a.createElement(pn,{id:"switch-to-sidebar",key:"switch-to-sidebar",onClick:o,isSelected:s},i(un.sideView))};fn.displayName="SideView",fn.defaultProps={viewModeOptions:{viewModeSwitchEnabled:!1}};var gn=fn;const hn=e=>{const t=document.getElementById("ghx-issue-fragment");window.AJS&&window.AJS.$(t).trigger(e)};var yn=(e,t,s,n)=>{const i=n?n.valueOf():null,r=!0===(s&&i===es.a.SOFTWARE_ISSUE||t.viewModeSwitchEnabled),o=Object(ts.b)(t.viewMode);return{name:e(un.switchViewGroup),key:"issueSwitchViewDropdownGroup",type:"radio",items:r?[a.a.createElement(gn,{key:"side-view",viewModeOptions:t,emitEventToLegacyApp:hn,isSelected:o}),a.a.createElement(bn,{key:"dialog-view",viewModeOptions:t,emitEventToLegacyApp:hn,isSelected:!o})]:[]}};const On=({isLoading:e,isForgeLoading:t,shouldShowPulse:s,canLogTime:n,shouldShowFlagAction:i,canLinkToParent:r,shouldShowConvertToSubtask:o,shouldShowConvertToIssue:l,canMoveIssue:u,canCloneIssue:d,canDeleteIssue:p,issueDeleteCallbacks:b,onClose:f,shouldShowActions:g,shouldShowConfiguration:h,isSoftwareProjectType:y,viewModeOptions:O,analyticsSource:j,intl:E,shouldShowStartTour:v,shouldShowFindOutMore:k,shouldShowTurnOffForNow:w,shouldShowOptOut:S,shouldShowOldViewClickthrough:I})=>{if(!g)return null;if(e)return a.a.createElement(ue,{isDisabled:!0,meatballMenuData:[]});const C={viewModeSwitchEnabled:!1},T=[Fe(i,n),ln(r,o,l,u,d,p),xs,Xt(E.formatMessage,v,k,w,S,I),...Object(m.isImproveSwitchViewMenuEnabled)()?[yn(E.formatMessage,O||C,y,j)]:[],ys(O||C,h,y,j)];return a.a.createElement(_.b,null,a.a.createElement(P.a,null,a.a.createElement(c.a,{name:"BOARD_SIDEBAR"},a.a.createElement(ue,{hasPulse:s,isLoading:t,meatballMenuData:T}),Object(m.isRefactoringDeleteCallbackPropsEnabled)()?a.a.createElement(Ot,{onIssueDeleteSuccess:b.onIssueDeleteSuccess,onIssueDeleteFailure:b.onIssueDeleteFailure,onClose:f}):a.a.createElement(gt,{issueDeleteCallbacks:b,onClose:f}),a.a.createElement(kt,null),Object(m.isInlineCloneEnabled)()&&a.a.createElement(qe,null))))};On.displayName="IssueActionsMeatballMenu";var jn=On;const En=Object(f.injectIntl)(Object(i.b)(e=>{var t;const s=Object(m.isOptInBackToBentoEnabled)()?O.e:O.f;return{isLoading:!Object(d.n)(e),isForgeLoading:!!(null===(t=Object(h.a)(e))||void 0===t?void 0:t.isLoading),shouldShowPulse:Object(O.b)(e),canLogTime:Object(g.b)(e),shouldShowFlagAction:k(e),shouldShowConvertToSubtask:Object(w.b)(e),shouldShowConvertToIssue:Object(w.a)(e),canLinkToParent:Object(y.a)(e),canCloneIssue:Object(E.a)(e),canDeleteIssue:Object(E.c)(e),canMoveIssue:Object(E.f)(e),shouldShowActions:Object(w.d)(e),shouldShowStartTour:Object(m.isOptInBackToBentoEnabled)()?Object(O.g)(e):Object(O.f)(e),shouldShowFindOutMore:Object(m.isOptInBackToBentoEnabled)()?Object(w.f)(e):Object(w.g)(e),shouldShowTurnOffForNow:Object(m.isOptInBackToBentoEnabled)()?T(e):C(e),shouldShowOptOut:(Object(d.u)(e)||!s(e))&&Object(w.h)(e),shouldShowOldViewClickthrough:Object(b.b)(e),shouldShowConfiguration:Object(w.e)(e)||!!Object(w.i)(e)&&!!Object(d.G)(e),isSoftwareProjectType:"software"===Object(d.G)(e),analyticsSource:Object(u.b)(e)}},{})(jn)),vn=e=>a.a.createElement(En,{viewModeOptions:e.viewModeOptions,issueDeleteCallbacks:e.issueDeleteCallbacks,onClose:e.onClose});vn.displayName="IssueActionsMenu";var kn=vn,wn=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/modal-close-button.js"),Sn=s("./src/packages/project-settings/issue-restrictions/async.js"),In=s("./src/packages/issue/issue-view/src/common/state/selectors/application-selector.js");const Cn=Object(nt.q)("issuerestriction"),Tn=Object(j.createSelector)(Cn,e=>e&&e.value&&e.value.issuerestrictions&&e.value.issuerestrictions.projectrole||[]),Pn=Object(j.createSelector)(Cn,e=>e&&e.value&&e.value.shouldDisplay||!1);const _n=s("./src/packages/project-settings/issue-restrictions/src/common/types.js").a,xn=Object(p.a)([Object(i.b)(e=>({currentIssueRestriction:Tn(e),isIssueRestrictionDisplayForIssue:Pn(e),hasError:!!Object(d.h)(e),projectKey:Object(d.E)(e),issueKey:Object(u.B)(e),edition:Object(In.a)(e),isSubtask:Object(lt.c)(e)}),{})])(({currentIssueRestriction:e,isIssueRestrictionDisplayForIssue:t,hasError:s,issueKey:n,projectKey:i,edition:r,isSubtask:o})=>!s&&t&&(!o||e.length>0)?a.a.createElement(Sn.a,{entityKey:Object(is.l)(n),currentRestrictions:e,restrictionType:_n,projectKeyOrId:Object(is.q)(i),edition:r,isSubtask:o}):null);var Dn=s("./src/packages/issue/fields/field-base/src/services/field-value-service/main.js"),An=s("./node_modules/@atlaskit/icon/glyph/lock-filled.js"),Mn=s.n(An),Ln=s("./node_modules/@atlaskit/icon/glyph/unlock.js"),Rn=s.n(Ln),Nn=s("./src/packages/issue/fields/security-level/src/common/ui/styled.js");const Un=Object(K.default)(Nn.a)(["color:",";"],W.a.N30),Fn=e=>{const{initialValue:t}=e,s=t?Mn.a:Rn.a;return a.a.createElement(z.a,{appearance:"subtle",spacing:"default",isDisabled:!0,iconBefore:a.a.createElement(Un,null,a.a.createElement(s,{label:""}))})};Fn.displayName="Loading";var Vn=s("./src/packages/platform/ui/error-boundary/src/main.js");const Kn=({children:e,fallback:t,packageName:s})=>a.a.createElement(Vn.a,{id:"issue-security-level-field",packageName:s,render:()=>t},a.a.createElement(Ve.a,{fallback:t},e));Kn.displayName="IssueSecurityLevelFieldBoundary";var Bn=s("./src/packages/issue/issue-view/src/issue-field/state/actions/field-save-actions.js"),Wn=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/security-level-selector.js");const Hn=Object(Ve.f)(()=>s.e("async-issue-field-security-level").then(s.bind(null,"./src/packages/issue/fields/security-level/src/index.js")),{moduleId:"./src/packages/issue/fields/security-level/src/index.js"}),Gn=Object(p.a)([Object(i.b)(e=>({securityLevelItems:Object(Wn.a)(e),isSecurityLevelEnabledForIssue:Object(Wn.d)(e),isSecurityLevelEditable:Object(Wn.c)(e),error:Object(d.h)(e),issueKey:Object(u.B)(e)}),e=>({onSuccess:t=>e(Object(Bn.e)("security",t))}))])(({securityLevelItems:e,isSecurityLevelEnabledForIssue:t,isSecurityLevelEditable:s,error:n,issueKey:i,onSuccess:r})=>{const[o]=Object(Dn.b)({issueKey:i,fieldKey:"security"});if(!n&&t){const t=a.a.createElement(Fn,{initialValue:o});return(a.a.createElement(Kn,{packageName:"issue",fallback:t},a.a.createElement(Hn,{issueKey:i,initialValue:o||null,allowedValues:e,isEditable:s,onSuccess:r})))}return null});var $n=s("./src/packages/platform/controllers/tenant-context/src/components/index.js"),qn=s("./src/packages/growth/share-button/src/index.js"),zn=s("./src/packages/growth/share-button/src/constants.js");const Yn=e=>{const{summary:t,issueAri:s,issueUrl:n,resourceOwner:i,subProductId:r}=e;return(a.a.createElement(qn.b,{integrationType:zn.a.BENTO_ISSUE,triggerButtonStyle:"icon-only",productId:i,subProductId:r,shareLink:n,shareTitle:t,shareContentType:"issue",objectAri:s}))};Yn.displayName="ShareView";var Qn=Object(p.a)([Object(i.b)(e=>({issueAri:Object(d.w)(e),resourceOwner:Object(d.H)(),summary:Object(nt.o)("summary")(e)||"",subProductId:Object(d.I)(e),issueUrl:Object(ss.a)(e)}),{})])(Yn);const Jn=qn.a,Zn=K.default.div(["flex-shrink:0;"]),Xn=Object(p.a)([Object(i.b)(e=>({isLoading:Object(d.s)(e),error:Object(d.h)(e),loggedInAccountId:Object(m.isUseUseAccountIdEnabled)()?void 0:Object(u.a)(e)}),{})])(({error:e=null,isLoading:t,loggedInAccountId:s})=>{const n=Object(m.isUseUseAccountIdEnabled)()?Object($n.c)():s;return!e&&n?a.a.createElement(Zn,null,t?a.a.createElement(Jn,{triggerButtonStyle:"icon-only"}):a.a.createElement(Qn,null)):null});var ea=s("./node_modules/@atlaskit/icon/glyph/like.js"),ta=s.n(ea),sa=s("./src/packages/issue/issue-context-service/src/main.js");var na=s("./src/packages/issue/fields/voters/src/services/voters-list-service/context.js"),aa=s("./src/packages/platform/utils/constants/src/status-categories.js"),ia=Object(f.defineMessages)({addVoteDisabledTooltip:{id:"issue-field-voters.services.disable-resolved-issue-voting-service.add-vote-disabled-tooltip",defaultMessage:"You can't vote on resolved issues"},removeVoteDisabledTooltip:{id:"issue-field-voters.services.disable-resolved-issue-voting-service.remove-vote-disabled-tooltip",defaultMessage:"You can't change your vote on resolved issues"}});const ra=()=>{const{formatMessage:e}=Object(Z.c)(),t=Object(sa.f)(),[s]=Object(Dn.b)({issueKey:t,fieldKey:"status"}),a=Object(n.useMemo)(()=>"DONE"===Object(aa.statusCategoryForId)(null==s?void 0:s.statusCategory.id),[s]),i=Object(n.useMemo)(()=>a?{addVote:e(ia.addVoteDisabledTooltip),removeVote:e(ia.removeVoteDisabledTooltip)}:void 0,[e,a]);return{isDisabled:a,tooltips:i}};var oa=s("./src/packages/issue/fields/voters/src/ui/vote-toggle/index.js"),ca=s("./src/packages/issue/permissions-service/src/main.js"),la=s("./node_modules/@atlaskit/spinner/dist/es2019/spinner.js"),ua=s("./src/packages/issue/fields/voters/src/messages.js"),da=s("./src/packages/issue/fields/voters/src/ui/button/index.js");const pa=K.default.div(["[data-role='droplistContent']{overflow:visible;}"]),ma=K.default.div(["width:240px;min-height:121px;padding:4px 0 0;"]),ba=K.default.div(["height:121px;display:flex;justify-content:center;align-items:center;"]),fa=Object(Ve.f)(()=>s.e("async-voters-dropdown").then(s.bind(null,"./src/packages/issue/fields/voters/src/ui/dropdown-content/index.js")),{moduleId:"./src/packages/issue/fields/voters/src/ui/dropdown-content/index.js"}),ga=a.a.createElement(ba,null,a.a.createElement(la.a,{size:"medium"})),ha=({setCloseDropdown:e,disableVotingProps:t})=>a.a.createElement(Vn.a,{id:"issue-voters-list",packageName:"issue",render:()=>ga},a.a.createElement(Ve.a,{fallback:ga},a.a.createElement(fa,{setCloseDropdown:e,disableVotingProps:t})));ha.displayName="LazyDropdownContent";const ya=({disableVotingProps:e})=>{const{formatMessage:t}=Object(Z.c)(),s=t(ua.a.voteOptionsTooltip),[i,r]=Object(n.useState)(!1),o=Object(n.useCallback)(()=>{r(e=>!e)},[]),c=Object(n.useCallback)(()=>{r(!1)},[]);return a.a.createElement(pa,null,a.a.createElement(D.a,{boundariesElement:"scrollParent",isOpen:i,placement:"auto-end",trigger:e=>a.a.createElement("div",e,a.a.createElement(da.a,{onClick:o,tooltip:s,isSelected:i})),onClose:c,content:()=>a.a.createElement(ma,null,i&&a.a.createElement(ha,{setCloseDropdown:c,disableVotingProps:e})),zIndex:A.f.modal}))};ya.displayName="VoterDropdown";var Oa=ya;const ja=({disableVotingProps:e})=>{const[t]=Object(ca.a)();return t.canViewVoters?a.a.createElement(Oa,{disableVotingProps:e}):a.a.createElement(oa.a,{disableVotingProps:e})};ja.displayName="Voters";var Ea=ja;const va=()=>{const e=ra();return(a.a.createElement(Ea,{disableVotingProps:e}))};va.displayName="IssueVoters";var ka=s("./src/packages/issue/issue-view/src/common/component/loading-component-wrapper/index.js");const wa=K.default.div(["display:flex;padding:4px 8px;"]),Sa=()=>Object(ka.a)(a.a.createElement(wa,null,a.a.createElement(ta.a,{size:"medium",primaryColor:W.a.N30,label:""}))),Ia=({hasError:e,isIssueLoading:t})=>{const s=Object(sa.f)(),n=Object($n.c)(),[i]=Object(Dn.b)({issueKey:s,fieldKey:"votes"});return e||!n?null:t||!i?a.a.createElement(Sa,null):a.a.createElement(Vn.a,{id:"issue.details.vote-action"},a.a.createElement(na.a,{scope:s},a.a.createElement(va,null)))};Ia.displayName="VotersItem";const Ca=Object(i.b)(e=>({hasError:!!Object(d.h)(e),isIssueLoading:Object(d.s)(e)}),{})(Ia),Ta=Object(nt.q)("watches"),Pa=Object(j.createSelector)(Ta,e=>!!e);var _a=s("./node_modules/@atlaskit/icon/glyph/watch.js"),xa=s.n(_a);const Da=K.default.div(["display:flex;margin:4px 25px 4px 8px;"]),Aa=()=>Object(ka.a)(a.a.createElement("div",null,a.a.createElement(Da,null,a.a.createElement(xa.a,{label:"",size:"medium",primaryColor:W.a.N30})))),Ma=({children:e,fallback:t,packageName:s})=>a.a.createElement(Vn.a,{id:"issue-watchers",packageName:s,render:()=>t},a.a.createElement(Ve.a,{fallback:t},e));Ma.displayName="IssueWatchersBoundary";const La=Object(Ve.f)(()=>Promise.all([s.e("vendor~748942c6"),s.e("vendor~31ecd969"),s.e("async-issue-watchers")]).then(s.bind(null,"./src/packages/issue/issue-view/src/views/watchers/index.js")),{moduleId:"./src/packages/issue/issue-view/src/views/watchers/index.js"}),Ra=({isWatchesPresent:e,isLoading:t,error:s})=>{const n=Object($n.c)();return!s&&!!n?!e||t?a.a.createElement(Aa,null):a.a.createElement(Ma,{packageName:"issue",fallback:a.a.createElement(Aa,null)},a.a.createElement(La,null)):null};Ra.displayName="WatchersItem";const Na=Object(i.b)(e=>({isWatchesPresent:Pa(e),isLoading:Object(d.s)(e),error:Object(d.h)(e)}),{})(Ra);var Ua=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/header/header-actions/styled.js");const Fa=({error:e=null,onClose:t=o.a,renderFeedback:s=(()=>null),shouldShowCloseButton:n=!1,isClickthroughBannerHidden:i=!1,issueDeleteCallbacks:r={},viewModeOptions:u={viewModeSwitchEnabled:!1},applicationKey:d,isCompact:p})=>{const b=u&&u.viewMode===l.b&&!e;let f;if(s){const e=i?s(d,!0):void 0;null!=e&&(f=a.a.createElement(c.a,{name:"GIVE_FEEDBACK"},a.a.createElement(Ua.a,null,e)))}return(a.a.createElement(Ua.b,null,a.a.createElement(Ua.c,{maxResponsiveWidth:b?258:0},n?a.a.createElement(wn.a,{onClose:t}):null,a.a.createElement(kn,{externalId:"issue.opsbar",issueDeleteCallbacks:r,viewModeOptions:u,onClose:t}),a.a.createElement(Xn,null),(Object(m.isVoterInSingleColumnEnabled)()||!p)&&a.a.createElement(Ca,null),a.a.createElement(Na,null),a.a.createElement(xn,null),a.a.createElement(Gn,null),f)))};Fa.displayName="HeaderActionsView",Fa.displayName="HeaderActionsView";const Va=Object(p.a)([Object(i.b)(e=>({error:Object(d.h)(e),applicationKey:Object(u.e)(e),isClickthroughBannerHidden:Object(b.a)(e)}),{})])(Fa)},"./src/packages/issue/issue-view/src/views/issue-base/foundation/header/header-actions/styled.js":function(e,t,s){"use strict";s.d(t,"d",(function(){return i})),s.d(t,"b",(function(){return r})),s.d(t,"c",(function(){return c})),s.d(t,"a",(function(){return l}));var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const i=2.5*a.e,r=n.default.div(["min-height:","px;margin-right:0;margin-left:auto;margin-bottom:","px;height:100%;align-items:center;max-width:100%;display:flex;justify-content:flex-end;padding-right:1px;"],4*a.e,a.e/4),o=n.default.div(["display:flex;flex-flow:row-reverse;"," [dir='rtl'] &{padding-right:","px;padding-left:","px;}"],e=>e.maxResponsiveWidth?`flex: 1 0 auto; justify-content: space-between; max-width: ${e.maxResponsiveWidth}px;`:`flex-shrink: 0; > * { margin-left: ${a.e}px; &:last-child { margin-left: 0; } }`,2*a.e,i),c=Object(n.default)(o)(["user-select:none;"]),l=n.default.div(["flex-shrink:0;"])},"./src/packages/issue/issue-view/src/views/issue-base/foundation/header/header-breadcrumbs/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return Ct}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-redux/es/index.js"),r=s("./src/packages/issue/issue-context-service/src/main.js"),o=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),c=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),l=s("./src/packages/issue/issue-view/src/common/util/flow-with-safe-component/index.js"),u=s("./src/packages/issue/issue-view/src/feature-flags.js"),d=s("./src/packages/issue/issue-view/src/views/common/with-compact-mode/index.js"),p=s("./node_modules/react-intl/lib/index.es.js"),m=s("./node_modules/lodash/flow.js"),b=s.n(m),f=s("./src/packages/platform/observability/analytics-web-react/src/components/with-fire-ui-analytics.js"),g=s("./src/packages/platform/observability/analytics-web-react/src/utils/component-with-analytics.js"),h=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/component-with-condition.js"),y=s("./node_modules/react-resource-router/build/esm/index.js"),O=s("./node_modules/@atlaskit/button--current/dist/es2019/components/Button.js"),j=s("./node_modules/@atlaskit/icon/glyph/arrow-left-circle.js"),E=s.n(j),v=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),k=s("./src/packages/platform/controllers/intl/src/index.js"),w=s("./node_modules/@atlaskit/analytics-next--current/dist/esm/useAnalyticsEvents.js"),S=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),I=Object(p.defineMessages)({back:{id:"issue.views.issue-base.foundation.back-button.back",defaultMessage:"Back"}}),C=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),T=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const P=C.default.div(["margin-right:","px;margin-left:-","px;"],1.5*T.e,1.5*T.e);var _=Object(n.memo)(({url:e})=>{const{formatMessage:t}=Object(k.c)(),{createAnalyticsEvent:s}=Object(w.a)(),i=Object(n.useCallback)(()=>{Object(S.h)(s({}),"button clicked","backFromIssueViewButton")},[s]);return a.a.createElement(P,null,a.a.createElement(O.a,{href:e,appearance:"subtle",onClick:i,component:__SPA__?y.a:void 0,iconBefore:a.a.createElement(E.a,{label:"",size:"small",primaryColor:v.a.N300})},t(I.back)))});const x=b()(p.injectIntl,Object(f.a)({onClick:"backFromIssueView"}),Object(g.a)("button",{onClick:"clicked"}))(e=>{const{url:t,intl:{formatMessage:s}}=e;return(a.a.createElement(P,null,a.a.createElement(O.a,{href:t,appearance:"subtle",onClick:e.onClick,component:__SPA__?y.a:void 0,iconBefore:a.a.createElement(E.a,{label:"",size:"small",primaryColor:v.a.N300})},s(I.back))))});var D=Object(h.a)(u.isAnalyticRefactorEnabled,_,x),A=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/with-analytics.js"),M=s("./src/packages/platform/observability/analytics-web-react/src/components/decorators.js"),L=s("./src/packages/platform/observability/analytics-web-react/src/utils/events.js"),R=s("./src/packages/platform/observability/analytics-web-react/src/components/redux-analytics-data.js"),N=s("./src/packages/issue/issue-view/src/actions/issue-navigation-actions.js"),U=s("./src/packages/issue/issue-view/src/actions/issue-preview-actions.js"),F=s("./src/packages/issue/issue-view/src/actions/prefetch-issues-actions.js"),V=s("./src/packages/issue/issue-view/src/common/service/issue/issue-urls.js"),K=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),B=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/hierarchy-level-selector.js"),W=s("./src/packages/issue/issue-view/src/selectors/breadcrumbs-selector.js"),H=s("./src/packages/issue/issue-view/src/selectors/project-selector.js"),G=s("./src/packages/issue/issue-view/src/views/common/experience-tracking/view-experience/index.js"),$=s("./node_modules/lodash/isEqual.js"),q=s.n($),z=s("./node_modules/lodash/noop.js"),Y=s.n(z),Q=s("./node_modules/@atlaskit/breadcrumbs--current/components/Breadcrumbs.js"),J=s("./node_modules/@atlaskit/breadcrumbs--current/components/BreadcrumbsItem.js"),Z=s("./src/packages/platform/utils/types/src/general.js"),X=s("./src/packages/issue/issue-view/src/actions/assign-issue-parent-modal-actions.js"),ee=s("./src/packages/issue/issue-view/src/selectors/assign-issue-parent-modal-selector.js"),te=s("./src/packages/issue/issue-view/src/selectors/issue-types-selector.js"),se=s("./node_modules/@atlaskit/dropdown-menu/dist/es2019/components/item/DropdownItem.js"),ne=s("./node_modules/@atlaskit/dropdown-menu/dist/es2019/components/group/DropdownItemGroup.js"),ae=s("./node_modules/@atlaskit/dropdown-menu/dist/es2019/components/DropdownMenuStateless.js"),ie=s("./node_modules/@atlaskit/icon/glyph/edit-filled.js"),re=s.n(ie),oe=s("./node_modules/@atlaskit/spinner/dist/es2019/spinner.js"),ce=s("./node_modules/@atlaskit/tooltip/dist/es2019/Tooltip.js"),le=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/async-icon/index.js"),ue=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/logging/log.js"),de=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/analytics-event-to-props.js"),pe=Object(p.defineMessages)({triggerTooltipAddEpic:{id:"issue.details.issue-parent-switcher-trigger-tooltip-add-epic",defaultMessage:"{issueTypeName} - Add {target}"},triggerTooltipChangeEpic:{id:"issue.details.issue-parent-switcher-trigger-tooltip-change-epic",defaultMessage:"{issueTypeName} - Change {target}"},triggerTooltipAddParent:{id:"issue.details.issue-parent-switcher-trigger-tooltip-add-parent",defaultMessage:"{issueTypeName}Add parent"},triggerTooltipChangeParent:{id:"issue.details.issue-parent-switcher-trigger-tooltip-change-parent",defaultMessage:"{issueTypeName}Change parent"},dropdownEmpty:{id:"issue.details.issue-parent-switcher-dropdown-empty",defaultMessage:"No {target} has been created in this project. Create your first "},dropdownTitleEpic:{id:"issue.details.issue-parent-switcher-dropdown-title-epic",defaultMessage:"Recent {target}"},removeEpic:{id:"issue.details.issue-parent-switcher-remove-epic",defaultMessage:"Remove {target}"},viewEpics:{id:"issue.details.issue-parent-switcher-view-epics",defaultMessage:"View all {target}"},dropdownTitle:{id:"issue.details.issue-parent-switcher-dropdown-title",defaultMessage:"Recent parents"},removeParent:{id:"issue.details.issue-parent-switcher-remove-parent",defaultMessage:"Remove parent"},viewParents:{id:"issue.details.issue-parent-switcher-view-parents",defaultMessage:"View all parents"}});const me=C.default.div(["border-bottom:1px solid ",";"],v.a.N30),be=C.default.div(["display:flex;justify-content:center;align-items:center;min-width:","px;min-height:","px;overflow:hidden;"],21*T.e,23.375*T.e),fe=C.default.div(["width:","px;padding:","px;& button,& span{padding:0;margin:0;vertical-align:initial;}"],25*T.e,1.5*T.e);function ge(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function he(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const ye=Object(de.a)("dropdownItem",{onClick:"clicked"})(se.a);class Oe extends n.Component{constructor(...e){super(...e),this.state={isOpen:Boolean(this.props.isOpen),isLoading:!this.props.issueParents.length},this.onOpenChange=({isOpen:e,event:t},s)=>{const{clickRef:n,onOpenChange:a,onToggle:i}=this.props,r=n&&n.current&&t&&n.current.button.contains(t.target);i(s),this.toggleMenu(e),a&&!r&&a(e)},this.onItemClick=(e,t={})=>(s,n)=>{const{projectId:a,issueTypes:i,issues:r,issueTypeName:o,onSelect:c,setIssueParent:l,onViewAllParentsClick:u,onClick:d}=this.props;switch(e){case"add parent":case"change parent":l(r,t.parentId);break;case"remove parent":l(r);break;case"open modal":u();break;case"create parent":{const e=String((i.find(({name:e})=>e===o)||{}).id);a&&e||ue.a.safeError("issue-parent-switcher.create.issue.failure","Failed to create the first epic via global issue create",{projectId:a,issueTypeId:e}),((e,t)=>{window.WRM&&window.WRM.require(["wr!com.atlassian.jira.jira-quick-edit-plugin:quick-create-issue"],()=>{window.JIRA.Forms.createCreateIssueForm({pid:e,issueType:t}).asDialog({id:"software-create-issue-dialog"}).show()})})(a,e);break}}d(n.update({userAction:e})),c&&c(),!t.keepMenuOpen&&this.toggleMenu(!1)}}componentDidUpdate(e){const{issueParents:t,isOpen:s}=this.props;s!==e.isOpen&&s!==this.state.isOpen&&this.toggleMenu(s),t!==e.issueParents&&this.state.isLoading&&this.setState({isLoading:!1})}getMessageContent(e,t,s=!0){const{issueTypeName:n,issueHierarchyLevel:a,intl:{formatMessage:i}}=this.props,r="Epic"!==n?"":`${"Epic".toLowerCase()}${s?"s":""}`;return n&&0===a?i(e,{target:r}):i(t)}getTooltipContent(){const{isOrphan:e,issueTypeName:t,issueHierarchyLevel:s,intl:{formatMessage:n}}=this.props;if(t&&0===s){const s="Epic"!==t?t:"Epic".toLowerCase();return n(e?pe.triggerTooltipAddEpic:pe.triggerTooltipChangeEpic,{issueTypeName:t,target:s})}return n(e?pe.triggerTooltipAddParent:pe.triggerTooltipChangeParent,{issueTypeName:t?`${t} - `:""})}toggleMenu(e){const{issueParents:t,fetchIssueParents:s}=this.props;this.setState(function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ge(Object(s),!0).forEach((function(t){he(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ge(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({isOpen:e},e&&!t.length?{isLoading:!0}:{}),()=>{e&&!t.length&&s()})}renderTriggerButton(){const{isDisabled:e,isOpen:t,isOrphan:s,issueTypeName:n,issueTypeIconUrl:i,text:r}=this.props,o=this.getTooltipContent(),c=a.a.createElement(O.a,{"aria-label":o,"aria-expanded":t,isDisabled:e,spacing:"compact",appearance:"subtle",iconBefore:!s&&i?a.a.createElement(le.a,{alt:n||"",url:i}):a.a.createElement(re.a,{size:"small",label:""})},r);return s?c:a.a.createElement(ce.a,{position:"top",content:o,delay:0},c)}renderIssueParentItem(e){const{id:t,key:s,summary:n,issueType:{name:i,iconUrl:r}}=e,o=a.a.createElement(le.a,{alt:i||"",url:r});return a.a.createElement(ye,{key:s,elemBefore:o,onClick:this.onItemClick(`${this.props.isOrphan?"add":"change"} parent`,{parentId:t})},s," ",n)}renderDropdownItemGroup(e){return this.state.isLoading?a.a.createElement(be,null,a.a.createElement(oe.a,{size:"large"})):a.a.createElement(ne.a,{title:this.getMessageContent(pe.dropdownTitleEpic,pe.dropdownTitle)},e.map(e=>this.renderIssueParentItem(e)))}renderDropdownMenu(){const{isOrphan:e,issueTypeName:t,issueHierarchyLevel:s,issueParents:n,issueKey:i,intl:{formatMessage:r}}=this.props,o=t&&"Epic"!==t?t:"Epic".toLowerCase(),c=(n||[]).filter(e=>e.key!==i).slice(0,5);return 0!==s||this.state.isLoading||n.length?a.a.createElement(a.a.Fragment,null,(this.state.isLoading||c.length>0)&&a.a.createElement(me,null,this.renderDropdownItemGroup(c)),a.a.createElement(ne.a,null,!e&&0===s&&a.a.createElement(ye,{onClick:this.onItemClick("remove parent")},this.getMessageContent(pe.removeEpic,pe.removeParent,!1)),a.a.createElement(ye,{onClick:this.onItemClick("open modal")},this.getMessageContent(pe.viewEpics,pe.viewParents)))):a.a.createElement(fe,null,r(pe.dropdownEmpty,{target:o}),a.a.createElement(O.a,{appearance:"link",spacing:"compact",onClick:this.onItemClick("create parent",{keepMenuOpen:!0})},o),".")}render(){return a.a.createElement(ae.a,{isOpen:this.state.isOpen,trigger:this.renderTriggerButton(),onOpenChange:this.onOpenChange},this.renderDropdownMenu())}}Oe.displayName="IssueParentSwitcher",Oe.displayName="IssueParentSwitcher",Oe.defaultProps={isDisabled:!1,isOrphan:!1,issueTypes:[],issues:[],issueParents:[],isOpen:!1,issueKey:"",issueTypeName:"",issueTypeIconUrl:"",issueHierarchyLevel:0,clickRef:null,projectId:null,fetchIssueParents:Y.a,setIssueParent:Y.a,text:"",onOpenChange:Y.a,onSelect:Y.a,onViewAllParentsClick:Y.a};var je=Object(p.injectIntl)(Oe),Ee=Object(l.a)([Object(f.a)({onToggle:"toggled",onClick:"clicked"}),Object(i.b)(e=>({projectId:Object(c.D)(e),issueTypes:Object(te.d)(e),issues:Object(ee.a)(e),issueParents:Object(c.C)(e)}),e=>({fetchIssueParents:()=>{e(Object(X.b)())},setIssueParent:(t,s)=>{e(s?Object(X.f)(t,s):Object(X.i)(t))},onViewAllParentsClick:()=>{e(Object(X.h)())}}))])(je);const ve=e=>null===e?"":e.length>20?`${e.slice(0,20)}...`:e;var ke=Object(p.defineMessages)({addParent:{id:"issue.details.add-parent",defaultMessage:"Add {target}"},copy:{id:"issue.details.copy-to-clipboard",defaultMessage:"Copy link to issue"},rootProjectsLink:{id:"issue.details.root-projects-link",defaultMessage:"Projects"}}),we=s("./node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js");const Se=Object(we.a)("div",{target:"e18k4ulk0"})({name:"sgt9w1",styles:"display:flex;flex-grow:0;overflow:visible;"}),Ie=Object(we.a)("span",{target:"e18k4ulk1"})("padding-right:",T.e,"px;display:flex;"),Ce=Object(we.a)("span",{target:"e18k4ulk2"})("border-radius:",T.a,"px;overflow:hidden;"),Te=Object(we.a)(O.a,{target:"e18k4ulk3"})("opacity:0;transition:opacity 0.2s ease,transform 0.2s ease;transform:translate(-8px,0);",Se,":hover &{opacity:1;transform:translate(0,0);}&:focus{opacity:1;transform:translate(0,0);}"),Pe=Object(we.a)("div",{target:"e18k4ulk4"})("display:flex;margin-left:-",T.e/2,"px;",e=>(e=>!0===e?"\n    & > div:last-child {\n        max-width: 200px;\n    }":"")(e.shouldTruncate)),_e=Object(we.a)("div",{target:"e18k4ulk5"})({name:"1id8hns",styles:"max-width:300px;"}),xe=Object(we.a)("div",{target:"e18k4ulk6"})("color:",v.a.N100,";flex-shrink:0;padding:0 ",T.e,"px;text-align:center;width:",T.e,"px;"),De=Se,Ae=Ie,Me=Ce,Le=Te,Re=Pe,Ne=_e,Ue=xe;class Fe extends n.Component{constructor(...e){super(...e),this.state={isOpen:!1},this.breadcrumbsItemRef=Object(n.createRef)(),this.onOpenChange=e=>{e!==this.state.isOpen&&this.setState({isOpen:e})},this.onClick=e=>{e.preventDefault(),this.setState(e=>({isOpen:!e.isOpen}))}}render(){const{issueTypeName:e,intl:{formatMessage:t}}=this.props,s=e&&"Epic"!==e?e:"Epic".toLowerCase();return a.a.createElement(a.a.Fragment,null,a.a.createElement(Re,{"data-test-id":"issue.views.issue-base.foundation.breadcrumbs.breadcrumb-add-parent"},a.a.createElement(Ee,{clickRef:this.breadcrumbsItemRef,isOpen:this.state.isOpen,isOrphan:!0,issueTypeName:e,onOpenChange:this.onOpenChange,text:ve(t(ke.addParent,{target:s}))}),e?a.a.createElement(Ue,null,"/"):null))}}Fe.displayName="BreadcrumbAddParent",Fe.defaultProps={issueTypeName:"Epic"};var Ve=Object(p.injectIntl)(Fe),Ke=s("./node_modules/@atlaskit/icon/glyph/copy.js"),Be=s.n(Ke),We=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/field-copy-text/view.js"),He=s("./src/packages/issue/fields/summary/src/services/index.js"),Ge=s("./src/packages/issue/issue-view/src/common/component/permalink-button/button/view.js"),$e=s("./src/packages/issue/issue-view/src/common/component/permalink-button/permalink-provider/index.js"),qe=s("./src/packages/issue/issue-view/src/actions/change-issue-type-actions.js"),ze=s("./src/packages/issue/issue-view/src/common/util/safe-component/index.js"),Ye=s("./node_modules/reselect/lib/index.js");const Qe=Object(Ye.createSelector)(c.F,B.g,(e,t)=>{const s=e&&e.issueTypes||[];return t.length?s.filter(e=>t.includes(e.id)):s}),Je=Object(Ye.createSelector)(c.J,e=>!(!e.issueType||!e.issueType.shouldShowIssueTypeList));var Ze=s("./node_modules/@atlaskit/droplist/dist/esm/components/Droplist.js"),Xe=s("./node_modules/@atlaskit/item/dist/esm/components/Item.js"),et=s("./node_modules/@atlaskit/item/dist/esm/components/ItemGroup.js"),tt=Object(p.defineMessages)({changeType:{id:"issue.details.change-issue-type",defaultMessage:"{issueType} - Change issue type"},changeTypeGroupName:{id:"issue.details.change-issue-type-groupname",defaultMessage:"Change Issue Type"}});class st extends n.Component{constructor(...e){super(...e),this.onOpenChange=({isOpen:e})=>{this.props.showIssueTypeList(!!e)},this.itemClick=e=>()=>{this.props.changeIssueType(this.props.issueKey,this.props.issueId,this.props.currentType,e),this.props.showIssueTypeList(!1)},this.toggleList=(e,t)=>{const{projectKey:s,isOpen:n}=this.props;s&&(n?this.props.showIssueTypeList(!1):(this.props.toggleListAnalytics(t),this.props.showIssueTypeList(!0)))}}static filterSubTaskTypePredicate(e,t){return!e.subtask||t.subtask}componentDidUpdate(e){const{isOpen:t,projectKey:s,loadIssueTypes:n}=this.props;e.isOpen!==t&&t&&s&&n(s)}createIssueTypeEntry(e,t){const s=a.a.createElement(le.a,{url:e.iconUrl,alt:e.name});return(a.a.createElement(Xe.a,{key:e.id,elemBefore:s,isDisabled:t,onClick:this.itemClick(e)},e.name))}createTriggerButton(e,t,s){const n=t&&t.name?t.name:"";return(a.a.createElement(ce.a,{position:"top",content:e.formatMessage(tt.changeType,{issueType:n}),delay:0},a.a.createElement(O.a,{"aria-label":e.formatMessage(tt.changeType,{issueType:n}),spacing:"compact",appearance:"subtle",onClick:this.toggleList,iconBefore:s})))}renderIssueTypes(e){const{currentType:t}=this.props;if(e&&e.length>0){const s=e.filter(e=>e.id!==t.id).filter(e=>st.filterSubTaskTypePredicate(t,e)).map(e=>this.createIssueTypeEntry(e,!1));return s.unshift(this.createIssueTypeEntry(t,!0)),s}return null}render(){const{icon:e,intl:t,issueTypes:s,currentType:n,isOpen:i}=this.props,r=null==s||0===s.length;return a.a.createElement(Ze.a,{trigger:this.createTriggerButton(t,n,e),appearance:"default",position:"bottom left",isTriggerNotTabbable:!0,isLoading:r,onOpenChange:this.onOpenChange,isOpen:i},a.a.createElement(et.a,{title:t.formatMessage(tt.changeTypeGroupName)},this.renderIssueTypes(s)))}}st.displayName="UnsafeIssueTypeChanger",st.displayName="IssueTypeChanger",st.defaultProps={isOpen:!1};var nt=s("./src/packages/platform/ui/error-boundary/src/main.js"),at=s("./src/packages/issue/fields/field-base/src/services/field-value-service/main.js");const it=({issueType:e,icon:t,onClick:s})=>{const{formatMessage:n}=Object(k.c)();return(a.a.createElement(ce.a,{position:"top",content:n(tt.changeType,{issueType:e}),delay:0},a.a.createElement(O.a,{"aria-label":n(tt.changeType,{issueType:e}),spacing:"compact",appearance:"subtle",onClick:s,iconBefore:t})))};it.displayName="TriggerButton";var rt=it;const ot=({isOpen:e,icon:t,issueTypes:s,issueId:i,showIssueTypeList:o,loadIssueTypes:c,changeIssueType:l})=>{const{formatMessage:u}=Object(k.c)(),{createAnalyticsEvent:d}=Object(w.a)(),p=Object(r.f)(),[m]=Object(at.b)({issueKey:p,fieldKey:"issuetype"}),b=Object(r.g)(),f=Object(n.useCallback)(e=>{null!==i&&(l(p,i,m,e,d({})),o(!1))},[l,d,m,i,p,o]),g=Object(n.useCallback)(({isOpen:e})=>{o(e)},[o]),h=Object(n.useCallback)((t,s)=>{b&&(e||Object(S.h)(s.update({name:"changeIssueTypeDropdown"}),"button clicked","changeIssueTypeDropdownButton"),o(!e))},[e,b,o]),y=Object(n.useMemo)(()=>{if(s&&0!==s.length){const e=s.filter(e=>e.id!==m.id).filter(e=>((e,t)=>!e.subtask||t.subtask)(m,e)).map(e=>a.a.createElement(Xe.a,{key:e.id,elemBefore:a.a.createElement(le.a,{url:e.iconUrl,alt:e.name}),onClick:()=>f(e)},e.name));return[a.a.createElement(Xe.a,{key:m.id,elemBefore:a.a.createElement(le.a,{url:m.iconUrl,alt:m.name}),onClick:()=>f(m)},m.name),...e]}return null},[m,f,s]),O=Object(n.useRef)(!0);return Object(n.useEffect)(()=>{!O.current&&b?c(b):O.current=!1},[b,e,c]),a.a.createElement(Ze.a,{trigger:a.a.createElement(rt,{icon:t,issueType:m&&m.name?m.name:"",onClick:h}),appearance:"default",position:"bottom left",onOpenChange:g,isOpen:e,isTriggerNotTabbable:!0},a.a.createElement(et.a,{title:u(tt.changeTypeGroupName)},y))};ot.displayName="ChangeIssueType";var ct=ot,lt=Object(i.b)(e=>({issueTypes:Qe(e),issueId:Object(c.l)(e),isOpen:Je(e)}),e=>({showIssueTypeList:t=>e(Object(qe.d)(t)),loadIssueTypes:t=>e(Object(qe.b)(t)),changeIssueType:(t,s,n,a,i)=>e(Object(qe.g)(t,s,n,a,i))}))(e=>a.a.createElement(nt.a,{id:"change-issue-type",packageName:"issue-view"},a.a.createElement(ct,e)));const ut=Object(p.injectIntl)(Object(ze.a)()(st)),dt=b()(Object(f.a)({toggleListAnalytics:"changeIssueTypeDropdown"}),Object(g.a)("change-issue-type",{changeIssueType:"changeIssueType"}),Object(i.b)(e=>({issueTypes:Qe(e),currentType:Object(W.g)(e),projectKey:Object(c.E)(e),issueKey:Object(o.B)(e),issueId:Object(c.l)(e),isOpen:Je(e)}),e=>({showIssueTypeList:t=>e(Object(qe.d)(t)),loadIssueTypes:t=>e(Object(qe.b)(t)),changeIssueType:(t,s,n,a,i)=>e(Object(qe.g)(t,s,n,a,i))})))(ut);var pt=Object(h.a)(u.isAnalyticRefactorEnabled,lt,dt),mt=Object(p.defineMessages)({uneditableIssueType:{id:"issue.details.uneditable-issue-type",defaultMessage:"{issueTypeName} - You cannot edit this issue type in this project."}}),bt=Object(p.injectIntl)(Object(ze.a)()(({intl:e,issueTypeIconUrl:t,issueTypeName:s})=>a.a.createElement(ce.a,{position:"top",content:e.formatMessage(mt.uneditableIssueType,{issueTypeName:s}),truncate:!0,delay:0},a.a.createElement(O.a,{spacing:"compact",appearance:"subtle",iconBefore:a.a.createElement(le.a,{url:t}),isDisabled:!0}))));const ft=({isSimplifiedProject:e=!1,isIssueTypeFieldEditable:t=!1,issueKey:s=Object(Z.l)(""),issueSummary:n="",issueTypeName:i="",issueTypeIconUrl:r="",relativeIssueUrl:o="",fullIssueUrl:c="",onClick:l=Y.a,onCopyClick:d=Y.a,intl:{formatMessage:p}})=>{const m=p(ke.copy),b=a.a.createElement(J.a,{key:"issueKeyBreadcrumbItem",href:o,onClick:l,text:s,target:"_blank"}),f=t?a.a.createElement(pt,{key:"issueTypeChanger",icon:a.a.createElement(le.a,{url:r,alt:i})}):a.a.createElement(bt,{issueTypeName:i,issueTypeIconUrl:r}),[{value:g}]=Object(He.a)({issueKey:s}),h=Object(u.isExtractedSummaryFieldEnabled)()?g||"":n,y=e?a.a.createElement(ce.a,{content:`${s}: ${h}`,position:"top",delay:0},b):b;return a.a.createElement($e.a,null,e=>a.a.createElement(Re,{onMouseLeave:e.hide,onMouseEnter:e.show,onFocus:e.show,onBlur:e.hide,"data-test-id":"issue.views.issue-base.foundation.breadcrumbs.breadcrumb-current-issue-container"},f,y,(e=>e?a.a.createElement(Ge.a,{id:"BreadcrumbCurrentIssue",label:m,fullIssueUrl:c,onCopyClick:d,isVisible:e.isVisible}):a.a.createElement(We.a,{label:m,tooltipDelay:0,tooltipLabel:m,tooltipLabelPosition:"top",shouldFitContainer:!0,value:c,hideFieldText:!0,remountOnChange:!0,onCopyClick:d},a.a.createElement(Le,{appearance:"subtle-link",iconBefore:a.a.createElement(Be.a,{size:"small",label:m}),spacing:"compact"})))(e)))};ft.displayName="BreadcrumbCurrentIssue";var gt=Object(p.injectIntl)(ft);class ht extends n.Component{constructor(...e){super(...e),this.state={isHovered:!1},this.onHoveredChange=e=>()=>{this.setState({isHovered:e})}}renderBreadcrumbsItem(){const{isSimplifiedProject:e,parentIssue:t,issueHierarchyLevel:s,onClick:n}=this.props,{key:i,summary:r,url:o}=t;return a.a.createElement(ce.a,{content:`${i}: ${r}`,position:"top",delay:0},a.a.createElement(J.a,{href:o,onClick:n,text:e?ve(0===s?r:i):i,truncationWidth:e?void 0:300,hasSeparator:!0}))}render(){const{isSimplifiedProject:e,isDisabled:t,parentIssue:s,issueHierarchyLevel:n}=this.props,{key:i,issueTypeName:r,issueTypeIconUrl:o}=s,c=this.renderBreadcrumbsItem();return e?a.a.createElement(Re,{"data-test-id":"issue.views.issue-base.foundation.breadcrumbs.breadcrumb-parent-issue-container",onMouseEnter:t?void 0:this.onHoveredChange(!0),onMouseLeave:t?void 0:this.onHoveredChange(!1),shouldTruncate:!0},a.a.createElement(Ee,{isDisabled:t,issueKey:i,issueTypeName:r,issueTypeIconUrl:this.state.isHovered?"":o,issueHierarchyLevel:n,onSelect:this.onHoveredChange(!1)}),c):a.a.createElement("div",{"data-test-id":"issue.views.issue-base.foundation.breadcrumbs.breadcrumb-parent-issue-container"},c)}}ht.displayName="BreadcrumbParentIssue",ht.defaultProps={isSimplifiedProject:!1,isDisabled:!0,issueHierarchyLevel:0,onClick:Y.a};var yt=({isSimplifiedProject:e=!1,shouldShowProjectLevelBreadcrumb:t=!1,projectName:s="",projectUrl:n="",projectAvatarUrl:i="",onClick:r=Y.a})=>{const o=Boolean(t&&s&&n),c=a.a.createElement(le.a,{url:i,alt:s}),l=a.a.createElement(Ae,null,a.a.createElement(Me,null,c)),u=a.a.createElement(J.a,{href:n,onClick:r,text:e?ve(s):s,truncationWidth:0,iconBefore:l,hasSeparator:!0});return o&&a.a.createElement(Ne,null,a.a.createElement(ce.a,{content:s,position:"top",delay:0},u))};class Ot extends n.Component{constructor(...e){super(...e),this.onClick=e=>{this.props.onClick(e)},this.onProjectClick=e=>{if(e.ctrlKey||e.metaKey||e.shiftKey)return;e.preventDefault();const{projectUrl:t,onProjectClick:s}=this.props;t&&s(t,this.props.pushAction)},this.onParentClick=e=>t=>{if(t.ctrlKey||t.metaKey||t.shiftKey)return;t.preventDefault();const{onParentClick:s,issueKey:n}=this.props;s({childIssueKey:n,parentIssueKey:Object(Z.l)(e),onIssueKeyChange:this.props.onIssueKeyChange})},this.onRootBreadcrumbClick=e=>{if(e.ctrlKey||e.metaKey||e.shiftKey)return;const{onRootBreadcrumbClick:t}=this.props;t()}}componentDidMount(){if(this.props.onExperienceSuccess(),this.props.parentIssues.length>0){const e=this.props.parentIssues.map(e=>e.key);this.props.prefetchParents(e)}}componentDidUpdate(e){const t=this.props.parentIssues.map(e=>e.key),s=e.parentIssues.map(e=>e.key);this.props.parentIssues.length>0&&!q()(s,t)&&this.props.prefetchParents(t)}render(){const{error:e,isSimplifiedProject:t,isLoadingComplete:s,shouldShowProjectLevelBreadcrumb:n,shouldShowRootProjectsBreadcrumb:i,projectName:r,projectUrl:o,projectAvatarUrl:c,parentIssues:l,isIssueTypeFieldEditable:d,issueKey:p,issueSummary:m,issueTypeName:b,issueTypeIconUrl:f,relativeIssueUrl:g,fullIssueUrl:h,onCopyClick:y,intl:{formatMessage:O},canLinkToParent:j,issueHierarchyLevel:E,parentLevelIssueTypeNames:v}=this.props,k=l.length>0,w=j&&null===e&&s,S=t&&0===E&&w,I=Object(u.isProjectsDirectoryPrettyUrlEnabled)()?"/jira/projects":"/secure/BrowseProjects.jspa";return a.a.createElement(De,null,a.a.createElement(Q.a,{maxItems:5},i&&a.a.createElement(J.a,{href:I,text:O(ke.rootProjectsLink),onClick:this.onRootBreadcrumbClick}),a.a.createElement(yt,{isSimplifiedProject:t,shouldShowProjectLevelBreadcrumb:n,projectName:r,projectUrl:o,projectAvatarUrl:c,onClick:this.onProjectClick}),k?l.map((e,s)=>a.a.createElement(ht,{key:s,isSimplifiedProject:t,isDisabled:!w,parentIssue:e,issueHierarchyLevel:E,onClick:this.onParentClick(e?e.key:"")})):S&&a.a.createElement(Ve,{issueTypeName:v[0]}),a.a.createElement(gt,{isSimplifiedProject:t,isIssueTypeFieldEditable:d,issueKey:p,issueSummary:m,issueTypeName:b,issueTypeIconUrl:f,relativeIssueUrl:g,fullIssueUrl:h,onClick:this.onClick,onCopyClick:y})))}}function jt(){return(jt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}Ot.displayName="IssueBreadcrumbs",Ot.displayName="IssueBreadcrumbs",Ot.defaultProps={isSimplifiedProject:!1,isLoadingComplete:!1,issueSummary:"",issueTypeName:"",issueTypeIconUrl:"",issueHierarchyLevel:0,shouldShowRootProjectsBreadcrumb:!1,error:null,parentIssues:[],onCopyClick:Y.a,onExperienceSuccess:Y.a};const Et=e=>{const{push:t}=Object(y.o)();return(a.a.createElement(Ot,jt({pushAction:t},e)))};Et.displayName="IssueBreadcrumbsWithPush";var vt=Object(l.a)([Object(M.a)("breadcrumbs",L.a.SCREEN),Object(G.c)("breadcrumbs"),Object(R.a)(e=>{const t=Object(o.b)(e);return{attributes:{issueHierarchyLevel:Object(B.d)(e),analyticsSource:`issue-view (${t?t.toString():"undefined"})`}}}),Object(g.a)("breadcrumbsItem",{onParentClick:"clicked",onClick:"clicked"}),Object(f.a)({onCopyClick:"copyUrlLink",onParentClick:"navigateToParentIssue",onClick:"navigateToCurrentIssue"}),Object(A.a)(e=>({onClick:()=>{e("full.issue.view")},onParentClick:()=>{e("parent-issue.view")},onProjectClick:()=>{e("project.view")},onRootBreadcrumbClick:()=>{e("projects-list.view")}})),p.injectIntl,Object(i.b)(e=>{const t=Object(c.v)(e);return{error:Object(c.h)(e),isSimplifiedProject:t,isLoadingComplete:Object(c.n)(e),issueKey:Object(o.B)(e),issueSummary:Object(K.o)("summary")(e)||"",relativeIssueUrl:Object(W.h)(e),fullIssueUrl:Object(W.a)(e),issueTypeName:Object(W.f)(e),issueTypeIconUrl:Object(W.d)(e),parentIssues:Object(W.b)(t)(e),projectName:Object(H.e)(e),projectUrl:Object(V.k)(Object(o.g)(e),Object(o.I)(e)),projectAvatarUrl:Object(H.a)(e),isIssueTypeFieldEditable:Object(W.c)(e),canLinkToParent:Object(B.a)(e),issueHierarchyLevel:Object(B.d)(e),parentLevelIssueTypeNames:Object(B.f)(e),onIssueKeyChange:Object(o.G)(e)}},e=>({onParentClick:({childIssueKey:t,parentIssueKey:s,onIssueKeyChange:n})=>{n&&n({fromIssueKey:t,toIssueKey:s,meta:{location:"breadcrumbs"}}),!Object(u.isRemoveDataProviderRefresh)()&&e(Object(U.b)(t,[])),__SPA__||e(Object(N.c)({fromIssueKey:t,toIssueKey:s}))},onProjectClick:(t,s)=>{e(Object(N.d)(t,s))},prefetchParents:t=>e(Object(F.a)({issueKeys:t}))}))])(Et),kt=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/header/header-actions/styled.js");const wt=Object(C.default)(kt.b)(["margin-left:0;"]),St=C.default.div(["display:flex;align-items:center;flex-grow:1;overflow:visible;font-size:",";[dir='rtl'] &{padding-left:0;padding-right:","px;}"],e=>e.isCompact?"12px":null,kt.d),It=({error:e=null,isCompact:t,backButtonUrlOld:s,shouldShowProjectLevelBreadcrumb:n,shouldShowRootProjectsBreadcrumb:i=!1})=>{if(null!==e)return null;const o=Object(u.isIssueContextHooksConsumedPart1Enabled)()?Object(r.b)():s;return(a.a.createElement(wt,null,a.a.createElement(St,{isCompact:t},void 0!==o&&a.a.createElement(D,{url:o}),a.a.createElement(vt,{externalId:"issue",shouldShowProjectLevelBreadcrumb:n,shouldShowRootProjectsBreadcrumb:i}))))};It.displayName="HeaderBreadcrumbsView";const Ct=Object(l.a)([Object(i.b)(e=>({error:Object(c.h)(e),backButtonUrlOld:Object(o.f)(e)}),{}),d.a])(It)},"./src/packages/issue/issue-view/src/views/issue-base/foundation/header/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/lodash/noop.js"),r=s.n(i),o=s("./node_modules/@atlaskit/page/dist/es2019/GridColumn.js"),c=s("./src/packages/issue/issue-view/src/common/util/flow-with-safe-component/index.js"),l=s("./src/packages/issue/issue-view/src/views/common/issue-page-grid/index.js"),u=s("./src/packages/issue/issue-view/src/views/common/with-compact-mode/index.js"),d=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/header/header-actions/index.js"),p=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/header/header-breadcrumbs/index.js"),m=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),b=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const f=2.5*b.e,g=m.default.div(["min-height:","px;margin-right:-","px;margin-bottom:","px;display:flex;justify-content:space-between;height:100%;align-items:center;"],4*b.e,f,b.e/4);class h extends n.Component{render(){const{shouldShowCloseButton:e,onClose:t,renderFeedback:s,isCompact:n,viewModeOptions:i,issueDeleteCallbacks:r,shouldShowProjectLevelBreadcrumb:c,shouldShowRootProjectsBreadcrumb:u}=this.props;return(a.a.createElement(l.a,{isCompact:n},a.a.createElement(o.a,{medium:10},a.a.createElement(g,null,a.a.createElement(p.a,{shouldShowProjectLevelBreadcrumb:c,shouldShowRootProjectsBreadcrumb:u,isCompact:n}),a.a.createElement(d.a,{renderFeedback:s,issueDeleteCallbacks:r,viewModeOptions:i,onClose:t,shouldShowCloseButton:e,isCompact:n})))))}}h.displayName="HeaderItemWithoutCompactMode",h.displayName="Header",h.defaultProps={issueDeleteCallbacks:{},shouldShowCloseButton:!1,shouldShowProjectLevelBreadcrumb:!1,shouldShowRootProjectsBreadcrumb:!1,renderFeedback:()=>null,viewModeOptions:{viewModeSwitchEnabled:!1},onClose:r.a};t.a=Object(c.a)([u.a])(h)},"./src/packages/issue/issue-view/src/views/issue-base/foundation/modal-close-button.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-intl/lib/index.es.js"),r=s("./node_modules/@atlaskit/button--current/dist/es2019/components/Button.js"),o=s("./node_modules/@atlaskit/icon/glyph/cross.js"),c=s.n(o),l=s("./node_modules/@atlaskit/tooltip/dist/es2019/Tooltip.js");const u=Object(i.defineMessages)({label:{id:"issue.label-for-modal-close-button",defaultMessage:"Close"}});class d extends n.PureComponent{render(){const e=this.props.intl.formatMessage(u.label),t=a.a.createElement(c.a,{label:"",size:"medium"});return a.a.createElement("div",null,a.a.createElement(l.a,{content:e,position:"top"},a.a.createElement(r.a,{"aria-label":e,appearance:"subtle",spacing:"default",iconBefore:t,onClick:this.props.onClose})))}}d.displayName="ModalActionsCloseButton",t.a=Object(i.injectIntl)(d)},"./src/packages/issue/issue-view/src/views/issue-base/foundation/quick-add/quick-add-item/styled.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i})),s.d(t,"b",(function(){return r}));var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const i=n.default.span(["margin-right:","px;"],a.e),r=n.default.span(["padding:","px;margin-left:","px;margin-right:","px;"],e=>e.compactMode?a.e/2:0,e=>e.compactMode?0:-4,e=>e.compactMode?0:-2)},"./src/packages/issue/issue-view/src/views/issue-base/foundation/quick-add/quick-add-item/view.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return p}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/@atlaskit/button--current/dist/es2019/components/Button.js"),r=s("./src/packages/servicedesk/common/src/global-spotlight-target/index.js"),o=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/quick-add/quick-add-item/styled.js");function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function l(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function u(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?l(Object(s),!0).forEach((function(t){d(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):l(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function d(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class p extends n.Component{render(){const{id:e,icon:t,onClick:s,extraAttributes:n,label:l,compactMode:d,testId:p,hasGlobalSpotlightTarget:m}=this.props,b=a.a.createElement(i.a,{"aria-label":l,spacing:d?"none":"default",iconBefore:a.a.createElement(o.b,{compactMode:d},t),onClick:s,theme:(e,t)=>{const s=e(t);return u(u({},s),{},{buttonStyles:u(u({},s.buttonStyles),{},{margin:0})})}},!d&&l),f=a.a.createElement(r.a,{id:`global-spotlight-target-${e}`},b);return a.a.createElement(o.a,c({},n,{"data-test-id":p}),m?f:b)}}p.displayName="View",p.defaultProps={hasGlobalSpotlightTarget:!1,extraAttributes:{},label:"",compactMode:!0,testId:void 0}},"./src/packages/issue/issue-view/src/views/issue-base/foundation/quick-add/quick-add-items-old/assets/incident-create-icon.svg":function(e,t,s){e.exports=s.p+"assets/incident-create-icon.b72a10e724bc55a4d580df6e4dc082f7.8.svg"},"./src/packages/issue/issue-view/src/views/issue-base/foundation/quick-add/quick-add-items-old/assets/incident-icon.svg":function(e,t,s){e.exports=s.p+"assets/incident-icon.42c8f6da75b54a565bcc0061425abdb6.8.svg"},"./src/packages/issue/issue-view/src/views/issue-base/foundation/quick-add/quick-add-items/assets/incident-create-icon.svg":function(e,t,s){e.exports=s.p+"assets/incident-create-icon.b72a10e724bc55a4d580df6e4dc082f7.8.svg"},"./src/packages/issue/issue-view/src/views/issue-base/foundation/quick-add/quick-add-items/assets/incident-icon.svg":function(e,t,s){e.exports=s.p+"assets/incident-icon.42c8f6da75b54a565bcc0061425abdb6.8.svg"},"./src/packages/issue/issue-view/src/views/issue-base/get-layout-item-map.js":function(t,s,n){"use strict";var a=n("./node_modules/memoize-one/dist/memoize-one.esm.js"),i=n("./src/packages/platform/ui/field-config/src/index.js"),r=n("./src/packages/issue/issue-view/src/feature-flags.js"),o=n("./node_modules/react/index.js"),c=n.n(o),l=n("./node_modules/react-intl/lib/index.es.js"),u=n("./node_modules/react-redux/es/index.js"),d=n("./node_modules/lodash/flow.js"),p=n.n(d),m=n("./node_modules/lodash/noop.js"),b=n.n(m),f=n("./src/packages/platform/observability/browser-metrics/src/index.js"),g=n("./src/packages/issue/fields/components/field-heading/src/styled.js"),h=n("./src/packages/issue/fields/components/field-pin/src/index.js"),y=n("./src/packages/issue/issue-view/src/common/component/section-heading/section-heading-view.js"),O=n("./src/packages/issue/issue-view/src/common/messages/drafts.js"),j=n("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),E=n("./src/packages/issue/issue-view/src/common/util/safe-component/index.js"),v=n("./src/packages/issue/issue-view/src/selectors/drafts/selectors.js"),k=n("./src/packages/issue/issue-view/src/views/common/experience-tracking/view-experience/index.js"),w=n("./src/packages/issue/issue-view/src/views/common/experience-tracking/edit-experience/index.js"),S=n("./src/packages/issue/issue-view/src/views/constants.js"),I=n("./src/packages/issue/issue-view/src/views/issue-base/utils/get-show-pin-button.js"),C=n("./node_modules/styled-components/dist/styled-components.browser.esm.js"),T=n("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const P=C.default.div(["[class*='CompactWrapper']{margin-bottom:",";}"],2*T.e);var _=n("./src/packages/platform/utils/fetch/src/utils/requests.js"),x=n("./src/packages/issue/issue-view/src/actions/editor-actions.js"),D=n("./src/packages/issue/issue-view/src/common/constants/flags.js"),A=n("./src/packages/issue/issue-view/src/common/service/mentions/mention-provider-selector.js"),M=n("./src/packages/issue/issue-view/src/common/service/mentions/get-mention-encoder.js"),L=n("./src/packages/issue/issue-view/src/common/state/selectors/activity-provider-selector.js"),R=n("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),N=n("./src/packages/issue/issue-view/src/common/state/selectors/media-context-selector.js");const U=()=>document.querySelector(".issue-app-modal-ak-dropdown-portal"),F=()=>document.querySelector(".issue-app-modal-editor-dropdown-portal");var V=n("./node_modules/reselect/lib/index.js"),K=n("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");const B=Object(V.createSelector)(R.A,K.D,(e,t)=>({objectId:e,containerId:t}));var W=n("./src/packages/issue/issue-view/src/selectors/tab-selector.js"),H=n("./src/packages/issue/issue-view/src/views/connect-field.js"),G=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/inline-edit/messages.js"),$=n("./src/packages/rich-content/src/common/adf-parsing-utils.js"),q=n("./node_modules/@atlaskit/inline-edit--current/dist/esm/InlineEditStateless.js");const z=C.default.div([""," margin-bottom:","px;"],e=>e.isEditing?"":"\n        & > div > div > div > div > div {\n            min-height: 32px !important;\n        }\n        & > div > div > div > div > div > div {\n            padding: 0 6px;\n        }\n    ",e=>!0!==e.isGrouped?3*T.e:0),Y=e=>c.a.createElement(z,{isEditing:e.isEditing,isGrouped:e.isGrouped,"data-testid":e["data-testid"]},c.a.createElement(q.a,e));Y.displayName="CompactInlineEditStateless";var Q=Y,J=n("./src/packages/issue/issue-view/src/common/component/renderer/index.js"),Z=Object(l.defineMessages)({nonEditablePlaceholderText:{id:"issue.views.field.rich-text.nonEditablePlaceholderText",defaultMessage:"None"}}),X=n("./node_modules/react-loosely-lazy/lib/esm/index.js"),ee=n("./src/packages/issue/issue-view/src/common/component/editor/async.js");const te=C.default.div(["width:100%;"]),se=Object(X.f)(()=>n.e("async-editor-view").then(n.bind(null,"./src/packages/issue/issue-view/src/common/component/editor/index.js")),{moduleId:"./src/packages/issue/issue-view/src/common/component/editor/index.js"});class ne extends o.Component{render(){const e=c.a.createElement(ee.b,{mediaContext:this.props.mediaContext,defaultValue:this.props.value});return(c.a.createElement(te,{"data-test-id":"issue.views.field.rich-text.editor-container"},c.a.createElement(ee.a,{packageName:"issue",fallback:e},c.a.createElement(se,{baseUrl:this.props.baseUrl,portalElement:this.props.portalElement,mediaContext:this.props.mediaContext,mentionProvider:this.props.mentionProvider,contextIdentifier:this.props.contextIdentifier,mentionEncoder:this.props.mentionEncoder,activityProvider:this.props.activityProvider,emojiProvider:this.props.emojiProvider,externalId:this.props.externalId,defaultValue:this.props.value,onCancel:this.props.onCancel,onBlur:this.props.onBlur,onSave:this.props.onSave,onChange:this.props.onChange,isDisabled:this.props.isDisabled,isInvalid:this.props.isInvalid,isExpanded:this.props.isExpanded,shouldFocus:this.props.shouldFocus,onSaveFailure:this.props.onSaveFailure,onChangeFailure:this.props.onChangeFailure,onPaste:this.props.onPaste}))))}}ne.displayName="RichTextFieldView",ne.displayName="RichTextFieldView",ne.defaultProps={isDisabled:!1,isInvalid:!1,isExpanded:!1,shouldFocus:!1,value:null,mediaContext:null,mentionEncoder:null,emojiProvider:null,onPaste:b.a};const ae=C.default.div(["width:100%;"]),ie=["isEditable","isEditing","externalId","noValueText","mediaContext"],re=["isEditable","isEditing","externalId","noValueText","mediaContext","adfValue"];class oe extends o.Component{constructor(...e){super(...e),this.onMouseDownEditView=()=>{this.mouseDownSelection=window.getSelection().toString()},this.onEditRequested=()=>{const e=window.getSelection().toString(),t=e&&0!==e.length,s=this.mouseDownSelection&&0!==this.mouseDownSelection.length;t||s||this.props.onEditRequest()},this.getEditValue=()=>this.props.adfValue,this.getNonEditablePlaceholderText=()=>this.props.intl.formatMessage(Z.nonEditablePlaceholderText),this.mouseDownSelection=void 0}componentDidMount(){this.props.onExperienceSuccess()}shouldComponentUpdate(e){return Object(r.isFixDescriptionRerenderBugEnabled)()?!re.every(t=>this.props[t]===e[t]):!ie.every(t=>this.props[t]===e[t])}renderContent(){return c.a.createElement(ae,null,c.a.createElement(J.a,{mediaContext:this.props.mediaContext,mentionEncoder:this.props.mentionEncoder,mentionProvider:this.props.mentionProvider,contextIdentifier:this.props.contextIdentifier,adf:Object($.i)(this.props.adfValue),placeholder:this.props.isEditable?this.props.noValueText:this.getNonEditablePlaceholderText()}))}renderReadView(){const{intl:e,isEditable:t,isMobile:s,fieldId:n}=this.props;return(c.a.createElement("div",{onMouseDown:this.onMouseDownEditView,role:"presentation","data-test-id":`issue.views.field.rich-text.${n}`},c.a.createElement(Q,{label:"",isLabelHidden:!0,readView:this.renderContent(),onEditRequested:this.onEditRequested,isEditing:!1,editButtonLabel:e.formatMessage(G.a.editButtonLabel,{fieldName:""}),confirmButtonLabel:e.formatMessage(G.a.confirmButtonLabel,{fieldName:""}),cancelButtonLabel:e.formatMessage(G.a.cancelButtonLabel,{fieldName:""}),editView:t?c.a.createElement("div",null):null,onConfirm:b.a,onCancel:b.a,isFitContainerWidthReadView:!s})))}renderEditView(){return c.a.createElement(ne,{baseUrl:this.props.baseUrl,mediaContext:this.props.mediaContext,portalElement:this.props.portalElement,mentionProvider:this.props.mentionProvider,mentionEncoder:this.props.mentionEncoder,contextIdentifier:this.props.contextIdentifier,activityProvider:this.props.activityProvider,externalId:this.props.externalId,isDisabled:void 0,isExpanded:!0,shouldFocus:!0,value:this.getEditValue(),onCancel:this.props.onCancel,onChange:this.props.onChange,onBlur:this.props.onBlur,onSave:this.props.onConfirm,onSaveFailure:this.props.onSaveFailure,onChangeFailure:this.props.onChangeFailure,onPaste:this.props.onPaste})}render(){return this.props.isEditing?this.renderEditView():this.renderReadView()}}oe.displayName="RichTextInlineEditView",oe.displayName="RichTextInlineEditView",oe.defaultProps={isEditable:!1,isEditing:!1,isMobile:!1,adfValue:void 0,contextIdentifier:void 0,onExperienceSuccess:b.a};var ce=Object(l.injectIntl)(oe);const le=Object(l.defineMessages)({noValueText:{id:"issue.placeholder-for-empty-issue-description-field",defaultMessage:"Add a description..."}});function ue(){return(ue=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const de=e=>{const{onEditRequest:t,onConfirm:s,isEditing:n}=e;Object(o.useEffect)(()=>{n?Object(f.c)().markTimeToFinishTask({key:S.a.DESCRIPTION.TIME_TO_RENDER_EDIT_VIEW}):(Object(f.c)().markTimeToFeedback({key:S.a.DESCRIPTION.TIME_TO_SAVE_UPDATED_DESCRIPTION}),Object(f.c)().markTimeToFeedback({key:S.a.DESCRIPTION.TIME_TO_SAVE_UNCHANGED_DESCRIPTION}))},[n]);const a=Object(o.useCallback)(()=>{Object(f.c)().markStartOfInteraction({key:S.a.DESCRIPTION.TIME_TO_RENDER_EDIT_VIEW,cancelExisting:!0}),t()},[t]),i=Object(o.useCallback)(()=>{Object(f.c)().markStartOfInteraction({key:S.a.DESCRIPTION.TIME_TO_SAVE_UPDATED_DESCRIPTION,cancelExisting:!0}),Object(f.c)().markStartOfInteraction({key:S.a.DESCRIPTION.TIME_TO_SAVE_UNCHANGED_DESCRIPTION,cancelExisting:!0}),s()},[s]);return c.a.createElement(ce,ue({},e,{onEditRequest:a,onConfirm:i}))};de.displayName="DescriptionField";var pe=p()(Object(w.b)("description"),Object(H.a)(()=>({fieldId:"description",shouldSaveDraft:!0,isOptimistic:!0,saveField:({baseUrl:e,issueKey:t,value:s})=>((e,t,s)=>{const n=`${e}/rest/internal/3/issue/${t}/description`,a=JSON.stringify(s);return Object(_.e)(n,{body:a})})(e,t,s),canContainMediaContent:!0,onSaveFailureFlagType:D.H,additionalProps:(e,t)=>{const s=Object(R.g)(e);return{baseUrl:s,portalElement:Object(W.a)("description")(e)?F()||document.body:void 0,adfValue:Object(j.g)("description")(e),htmlValue:Object(j.i)("description")(e),isInvalid:Object(j.k)("description")(e),invalidMessage:Object(j.j)("description")(e),mediaContext:Object(N.a)(e),mentionProvider:Object(A.a)(e),contextIdentifier:B(e),mentionEncoder:Object(M.a)(s),activityProvider:Object(L.a)(e),externalId:"issue.descriptionHtml",noValueText:t.formatMessage(le.noValueText)}},additionalCallbacks:e=>({onExpandedFailure:()=>e(Object(x.b)()),onSaveFailure:()=>e(Object(x.c)()),onChangeFailure:()=>e(Object(x.a)())})})))(de);class me extends o.Component{componentDidMount(){this.props.onExperienceSuccess()}componentDidUpdate(e){const{isEditing:t,isWaiting:s,hasDraft:n}=this.props,a=!(e.isEditing||t||s||n),i=a&&e.hasDraft&&!e.isWaiting,r=a&&!e.hasDraft&&e.isWaiting;i?Object(f.c)().markTimeToFinishTask({key:S.a.DESCRIPTION.TIME_TO_SAVE_UPDATED_DESCRIPTION}):r&&Object(f.c)().markTimeToFinishTask({key:S.a.DESCRIPTION.TIME_TO_SAVE_UNCHANGED_DESCRIPTION})}render(){const{area:e,label:t,fieldId:s,hasDraft:n,isEditing:a,isWaiting:i,intl:r}=this.props,o="content"===e?y.c:g.e,l="content"===e?y.e:g.f,u=Object(I.a)(e);return c.a.createElement(P,null,c.a.createElement(o,null,c.a.createElement(y.b,null,c.a.createElement(l,null,t),!n||a||i?null:c.a.createElement(y.a,null,`\u2022 ${r.formatMessage(O.a.draftIndicator)}`),!0===u&&c.a.createElement(h.a,{fieldId:s,label:t}))),c.a.createElement(pe,null))}}me.displayName="Description",me.defaultProps={area:"context",onExperienceSuccess:b.a},me.displayName="Description";var be=p()(l.injectIntl,Object(k.c)("description-container"),Object(w.b)("description"),Object(E.a)(),Object(u.b)(e=>({label:Object(j.m)("description")(e),hasDraft:Object(v.a)("description")(e),isEditing:Object(j.B)("description")(e),isWaiting:Object(j.D)("description")(e)}),{}),Object(E.a)())(me),fe=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/enter-escape-handler/index.js"),ge=n("./src/packages/issue/issue-view/src/common/styles/issue-value.js"),he=n("./node_modules/react-dom/index.js"),ye=n.n(he),Oe=n("./node_modules/@atlaskit/field-text-area/index.js");const je=C.default.div(["",";"],Object(ge.f)("textarea"));class Ee extends o.Component{constructor(...e){super(...e),this.onChange=e=>{this.props.onChange(e.target.value)},this.editView=Object(o.createRef)(),this.textarea=void 0}componentDidMount(){if(this.editView&&this.editView.current){const e=ye.a.findDOMNode(this.editView.current);e instanceof HTMLElement&&(this.textarea=e.querySelector("textarea"))}}componentWillUnmount(){this.textarea=null}render(){let e=(e=>e?e.split(/\r\n|\r|\n/).length:0)(this.props.value);if(this.textarea){const{scrollHeight:t}=this.textarea,s=window.getComputedStyle(this.textarea),n=Number.parseFloat(s.getPropertyValue("line-height"));Number.isNaN(n)||(e=Math.round(t/n))}const t=this.props.scrollRows||e,s="content"===this.props.area?20:5,n=Math.min(s,Math.max(2,t));return c.a.createElement(je,null,c.a.createElement(Oe.a,{ref:this.editView,value:this.props.value,onChange:this.onChange,isInvalid:!!this.props.invalidMessage,invalidMessage:this.props.invalidMessage,shouldFitContainer:!0,autoFocus:!0,isLabelHidden:!0,label:"",minimumRows:n}))}}Ee.displayName="TextAreaField",Ee.displayName="TextAreaField",Ee.defaultProps={value:"",invalidMessage:null,scrollRows:null,area:"context"};const ve=C.default.div(["[class*='CompactWrapper'] > *{margin-left:0;}[class*='ContentWrapper']{padding-left:0;padding-right:0;}"]),ke=Object(C.default)(ve)(["[class*='CompactWrapper']{margin-bottom:",";}"],2*T.e);class we extends o.Component{constructor(...e){super(...e),this.onChange=e=>{this.props.onChange(e)},this.onConfirm=()=>{const{value:e}=this.props;this.props.onChange(Object($.j)(e)),this.props.onConfirm()},this.readView=void 0}renderReadView(){const{value:e,noValueText:t,area:s}=this.props;return e&&0!==e.trim().length?"content"===s||"content-request"===s?c.a.createElement(ge.d,{innerRef:e=>{this.readView=e}},e&&Object($.j)(e)):c.a.createElement(ge.c,{innerRef:e=>{this.readView=e},maxRows:5},e):c.a.createElement(ge.b,null,t)}renderEditView(){let e;if(this.readView){const{scrollHeight:t}=this.readView,s=window.getComputedStyle(this.readView),n=Number.parseFloat(s.getPropertyValue("line-height"));e=Math.round(t/n)}return(c.a.createElement(Ee,{value:this.props.value,onChange:this.onChange,invalidMessage:this.props.invalidMessage,scrollRows:e,area:this.props.area}))}getField(){return c.a.createElement(fe.a,{onEscape:this.props.onCancel},c.a.createElement(Q,{isLabelHidden:!0,label:this.props.label,readView:this.renderReadView(),editView:this.props.isEditable?this.renderEditView():null,disableEditViewFieldBase:!0,isEditing:this.props.isEditing,onConfirm:this.onConfirm,onCancel:this.props.onCancel,onEditRequested:this.props.onEditRequest,isFitContainerWidthReadView:!0,isConfirmOnBlurDisabled:this.props.isConfirmOnBlurDisabled,editButtonLabel:this.props.intl.formatMessage(G.a.editButtonLabel,{fieldName:this.props.label}),confirmButtonLabel:this.props.intl.formatMessage(G.a.confirmButtonLabel,{fieldName:this.props.label}),cancelButtonLabel:this.props.intl.formatMessage(G.a.cancelButtonLabel,{fieldName:this.props.label})}))}render(){const{area:e,fieldId:t,label:s}=this.props,n="context"===e?ke:ve,a=Object(I.a)(e);return c.a.createElement(n,null,"content"===e?c.a.createElement(y.c,null,c.a.createElement(y.e,null,s)):c.a.createElement(g.e,null,c.a.createElement(g.f,null,s),!0===a&&c.a.createElement(h.a,{fieldId:t,label:s})),this.getField())}}we.displayName="TextAreaInlineEditView",we.displayName="TextAreaInlineEditView",we.defaultProps={isEditable:!1,isEditing:!1,isConfirmOnBlurDisabled:!1,value:"",label:"",noValueText:null,invalidMessage:null};var Se=Object(l.injectIntl)(we),Ie=Object(l.defineMessages)({noValue:{id:"issue.common.multi-line-text.text-for-edit-view-when-no-value-is-provided",defaultMessage:"None"}}),Ce=Object(H.a)((e,t)=>({fieldId:t.fieldId,additionalProps:(e,s)=>({noValueText:s.formatMessage(Ie.noValue),area:t.area})}))(Se),Te=n("./src/packages/issue/issue-view/src/views/common/with-container-width/index.js");const Pe=Object(l.defineMessages)({noValueText:{id:"issue.multiline-field.empty-placeholder",defaultMessage:"None"}});function _e(){return(_e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function xe(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const De=e=>{const{label:t,area:s,hasDraft:n,intl:a,isEditing:i,containerWidth:r}=e,o=xe(e,["label","area","hasDraft","intl","isEditing","containerWidth"]),l=n&&!i,u="content"===s?y.c:g.e,d="content"===s?y.e:g.f,p=Object(I.a)(s);return c.a.createElement(P,null,c.a.createElement(u,null,c.a.createElement(y.b,null,c.a.createElement(d,null,t),!0===l?c.a.createElement(y.a,null,`\u2022 ${a.formatMessage(O.a.draftIndicator)}`):null,!0===p&&c.a.createElement(h.a,{fieldId:e.fieldId,label:t}))),c.a.createElement(ce,_e({isEditing:i},o)))};De.displayName="MultilineField";var Ae=Object(H.a)((e,t)=>({fieldId:t.fieldId,shouldSaveDraft:!0,isOptimistic:!0,saveField:({baseUrl:e,issueKey:s,value:n})=>((e,t,s,n)=>{const a=`${e}/rest/api/3/issue/${t}`;return Object(_.e)(a,{body:JSON.stringify({fields:{[s]:n}})})})(e,s,t.fieldId,n),canContainMediaContent:!0,onSaveFailureFlagType:D.H,additionalProps:(e,s)=>{const n=Object(R.g)(e);return{baseUrl:n,portalElement:Object(W.a)(t.fieldId)(e)?F()||document.body:void 0,adfValue:Object(j.g)(t.fieldId)(e),hasDraft:Object(v.a)(t.fieldId)(e),htmlValue:Object(j.i)(t.fieldId)(e),isInvalid:Object(j.k)(t.fieldId)(e),invalidMessage:Object(j.j)(t.fieldId)(e),mediaContext:Object(N.a)(e),mentionProvider:Object(A.a)(e),mentionEncoder:Object(M.a)(n),activityProvider:Object(L.a)(e),externalId:`issue.${t.fieldId}`,noValueText:s.formatMessage(Pe.noValueText),area:t.area}},additionalCallbacks:e=>({onExpandedFailure:()=>e(Object(x.b)()),onSaveFailure:()=>e(Object(x.c)()),onChangeFailure:()=>e(Object(x.a)())})}))(Object(Te.a)(Object(l.injectIntl)(De)));var Me=Object(u.b)((e,t)=>({isRichTextField:Object(j.G)(t.fieldId)(e)}),{})(e=>{const{isRichTextField:t,fieldId:s,area:n="context"}=e;return t?c.a.createElement(Ae,{fieldId:s,area:n}):c.a.createElement(Ce,{fieldId:s,area:n})}),Le=n("./src/packages/issue/issue-view/src/views/issue-base/context/approval-panel/approval-panel.js"),Re=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/component-with-condition.js"),Ne=n("./src/packages/servicedesk/approval-panel/src/async.js"),Ue=n("./src/packages/issue/issue-view/src/actions/approval-action/index.js"),Fe=n("./src/packages/issue/issue-view/src/actions/context-item-actions.js"),Ve=n("./src/packages/issue/issue-view/src/common/actions/issue-fetch-actions.js"),Ke=n("./src/packages/issue/issue-view/src/common/util/flow-with-safe-component/index.js"),Be=n("./src/packages/issue/issue-view/src/selectors/approval-selector/index.js"),We=n("./src/packages/issue/issue-context-service/src/main.js"),He=n("./src/packages/issue/fields/field-base/src/services/field-value-service/main.js"),Ge=n("./src/packages/issue/fields/field-base/src/services/field-config-service/main.js"),$e=n("./src/packages/platform/controllers/tenant-context/src/components/index.js"),qe=n("./src/packages/issue/fields/approval-panel/src/services/index.js");function ze(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Ye(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ze(Object(s),!0).forEach((function(t){Qe(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ze(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Qe(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var Je=e=>{const t=Object($e.e)(),{issueKey:s}=e,[{value:n}]=Object(qe.a)({issueKey:s}),[a]=Object(He.b)({issueKey:s,fieldKey:"status"}),i=n?n.activeApproval:{},r=i?i.configuration:{},o=i&&r&&r.approvers?r.approvers.customFieldId:"",[l]=Object(Ge.a)(s,o),{autoCompleteUrl:u,isEditable:d}=l||{},p=Ye(Ye({fieldId:o,approvalFieldId:"servicedesk-approvals",approval:i,baseUrl:t,fieldMetaKey:o,fieldAutoCompleteUrl:u,hasLinkedFieldEditPermissions:d,issueStatusId:a.id},e),{},{onApproverListUpdated:t=>{e.onApproverListUpdated(o,t)}});return c.a.createElement(Ne.a,p)};function Ze(){return(Ze=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const Xe=e=>{const t={issueKey:Object(We.f)(),portalElement:U()||document.body};return(c.a.createElement(Je,Ze({},t,e)))};Xe.displayName="ApprovalGlancePanelConnected";const et=Object(u.b)(null,e=>({renderApproverList:()=>{e(Object(Ve.g)())},onApproverListUpdated:(t,s)=>{e(Object(Ue.e)(t,s))},onHidePanel:()=>{e(Object(Fe.a)())},onAddApproverError:()=>{e(Object(Ue.a)())},onRemoveApproverError:()=>{e(Object(Ue.b)())}}))(Xe);function tt(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function st(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?tt(Object(s),!0).forEach((function(t){nt(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):tt(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function nt(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const at=e=>c.a.createElement(Ne.a,e);at.displayName="AsyncApprovalGlancePanelContainer";const it=Object(Ke.a)([Object(u.b)((e,t)=>{const s=t.payload&&t.payload.approvalFieldId||"",n=Object(Be.d)(e,s)||"",a=Object(j.A)(n)(e),i=Object(j.o)("status")(e)||{};return{fieldId:n,approvalFieldId:s,approval:Object(Be.e)(e,s),baseUrl:Object(R.g)(e),issueKey:Object(R.B)(e),fieldMetaKey:Object(j.l)(n)(e)||"",fieldAutoCompleteUrl:Object(j.d)(n)(e)||"",hasLinkedFieldEditPermissions:a,portalElement:U()||document.body,issueStatusId:i.id}},e=>({renderApproverList:()=>{e(Object(Ve.g)())},onApproverListUpdated:(t,s)=>{e(Object(Ue.e)(t,s))},onHidePanel:()=>{e(Object(Fe.a)())},onAddApproverError:()=>{e(Object(Ue.a)())},onRemoveApproverError:()=>{e(Object(Ue.b)())}}),(e,t,s)=>st(st(st(st({},s),e),t),{},{onApproverListUpdated:s=>{t.onApproverListUpdated(e.fieldId,s)}}))])(at);var rt=Object(Re.a)(r.isApprovalFieldExtractionEnabled,et,it),ot=n("./node_modules/lodash/memoize.js"),ct=n.n(ot),lt=n("./node_modules/@atlaskit/analytics-next--current/dist/esm/withAnalyticsEvents.js"),ut=n("./node_modules/@atlaskit/onboarding/dist/es2019/components/SpotlightTarget.js"),dt=n("./src/packages/common-legacy-do-not-add-anything-new/src/performance/index.js"),pt=n("./src/packages/platform/utils/fetch/src/utils/as-json.js"),mt=n("./src/packages/platform/controllers/intl/src/index.js"),bt=n("./src/packages/issue/fields/assignee/src/services/use-assignee-field/index.js"),ft=n("./src/packages/issue/permissions-service/src/main.js"),gt=n("./src/packages/issue/smart-field-prefetch/src/context.js"),ht=n("./src/packages/platform/utils/constants/src/fetch-default-options-with-strict-mode.js");function yt(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Ot(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?yt(Object(s),!0).forEach((function(t){jt(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):yt(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function jt(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var Et=n("./src/packages/issue/issue-view/src/common/util/scroll/index.js"),vt=n("./node_modules/lodash/isNil.js"),kt=n.n(vt),wt=n("./node_modules/@atlaskit/avatar--next/dist/es2019/Avatar.js"),St=n("./node_modules/@atlaskit/form--next/dist/es2019/Messages.js"),It=n("./node_modules/@atlaskit/input/dist/esm/index.js"),Ct=n("./src/packages/issue/fields/components/user-picker/src/main.js"),Tt=n("./src/packages/profilecard-next/src/common/constants.js"),Pt=n("./src/packages/issue/issue-view/src/views/common/with-profilecard-next/index.js"),_t=n("./node_modules/@atlaskit/theme/dist/es2019/index.js"),xt=C.default.div(["padding-right:","px;padding-top:1px;& span[role='img']{background-color:"," !important;}"],T.e,_t.a.N30),Dt=C.default.div(["align-items:center;display:flex;padding-top:1px;"]);function At(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Mt(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?At(Object(s),!0).forEach((function(t){Lt(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):At(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Lt(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class Rt extends o.Component{constructor(...e){super(...e),this.shouldTrackAssigneeInteractions=()=>"assignee"===this.props.fieldId,this.onChange=e=>{this.shouldTrackAssigneeInteractions()&&Object(f.c)().markStartOfInteraction({key:S.a.ASSIGNEE.TIME_TO_REFLECT_SELECTED,cancelExisting:!0}),this.props.onChange(e)},this.onDataRequest=e=>{!0!==e&&this.shouldTrackAssigneeInteractions()&&Object(f.c)().markStartOfInteraction({key:S.a.ASSIGNEE.TIME_TO_REFLECT_INPUT_RESULT,cancelExisting:!0})},this.onDataLoaded=(e=!0,t=0)=>{this.shouldTrackAssigneeInteractions()&&Object(f.c)().markTimeToFinishTask({key:e?S.a.ASSIGNEE.TIME_TO_RENDER_INITIAL_SUGGESTIONS:S.a.ASSIGNEE.TIME_TO_REFLECT_INPUT_RESULT,collectors:[e=>Mt(Mt({},e),{},{resultsLength:t})]})},this.onEditRequested=()=>{this.shouldTrackAssigneeInteractions()&&Object(f.c)().markStartOfInteraction({key:S.a.ASSIGNEE.TIME_TO_RENDER_INITIAL_SUGGESTIONS,cancelExisting:!0}),this.props.onEditRequest()}}componentDidUpdate(e){if(this.shouldTrackAssigneeInteractions()){const{value:t,isEditing:s}=this.props;!1===e.isEditing&&!1===s&&e.value!==t&&Object(f.c)().markTimeToFinishTask({key:S.a.ASSIGNEE.TIME_TO_ASSIGN_TO_ME_VIA_SHORTCUT}),e.isEditing&&!s&&e.value!==t&&Object(f.c)().markTimeToFinishTask({key:S.a.ASSIGNEE.TIME_TO_REFLECT_SELECTED}),!e.isEditing&&s&&setTimeout(()=>{Object(f.c)().markTimeToFeedback({key:S.a.ASSIGNEE.TIME_TO_RENDER_INITIAL_SUGGESTIONS})},0)}}getActions(){const{fieldId:e}=this.props;return"reporter"===e?[Tt.c,Tt.b]:"assignee"===e?[Tt.c,Tt.a]:void 0}renderReadView(){const{customReadView:e}=this.props;if(e)return e(this.props.value);const t=this.props.value||this.props.emptyOption||{avatarUrl:"",name:""};return(c.a.createElement(Pt.a,{userAccount:t,analyticsData:{trigger:this.props.fieldId},position:"left-start",actions:this.getActions()},c.a.createElement(Dt,null,c.a.createElement(xt,null,c.a.createElement(wt.a,{borderColor:"transparent",src:t.avatarUrl,size:"small"})),c.a.createElement(It.a,{isEditing:!1,value:t.name}))))}renderReadViewWithContentWrapper(){const e=this.props.fieldContentWrapper;return kt()(e)?this.renderReadView():c.a.createElement(e,null,this.renderReadView())}renderEditView(){const{portalElement:e,emptyOption:t,initialOptions:s,fetchSuggestions:n,fieldId:a,value:i,onCancel:r,onConfirm:o}=this.props,l={portalElement:e,emptyOption:t,initialOptions:s,fetchSuggestions:n,fieldId:a,value:i,onCancel:r,onSelection:o,width:"100%",onDataRequest:this.onDataRequest,onDataLoaded:this.onDataLoaded,onChange:this.onChange};return c.a.createElement(Ct.a,l)}render(){const{intl:e,label:t,isEditing:s,isEditable:n,isMobile:a,invalidMessage:i,fieldId:r,titleView:o=this.props.label,showPinButton:l,onCancel:u,customReadView:d}=this.props;return(c.a.createElement(g.d,null,c.a.createElement(g.b,null,c.a.createElement(g.c,null,o),!0===l&&c.a.createElement(h.a,{fieldId:r,label:t})),c.a.createElement(g.g,{isEditing:s,"data-test-id":`issue.views.field.user.${r}`,fixedHeight:!d},null!=i?c.a.createElement(St.a,{key:`${r}-error-message`},i):null,c.a.createElement(fe.a,{onEscape:u},c.a.createElement(q.a,{editView:n?this.renderEditView():null,readView:this.renderReadViewWithContentWrapper(),areActionButtonsHidden:!0,disableEditViewFieldBase:!0,shouldConfirmOnEnter:!0,isEditing:s,isInvalid:!!i,invalidMessage:i,isLabelHidden:!0,label:t,onCancel:b.a,onConfirm:b.a,onEditRequested:this.onEditRequested,onFocus:b.a,isFitContainerWidthReadView:!a,editButtonLabel:e.formatMessage(G.a.editButtonLabel,{fieldName:t}),confirmButtonLabel:e.formatMessage(G.a.confirmButtonLabel,{fieldName:t}),cancelButtonLabel:e.formatMessage(G.a.cancelButtonLabel,{fieldName:t})})))))}}Rt.displayName="UserInlineEditView",Rt.displayName="UserInlineEditView",Rt.defaultProps={isMobile:!1,label:"",initialOptions:[],emptyOption:null,invalidMessage:null,value:null};var Nt=Object(l.injectIntl)(Rt),Ut=n("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js");const Ft=(e,t,s,n,a,i)=>{if(null==e)return;const r=e({action:"access",actionSubject:"fieldPrefetchCache",actionSubjectId:n}),o={fieldSelectionSessionId:n,fieldFetchSessionId:i,prefetchSessionId:s,cacheHit:t,fieldId:a};Object(Ut.b)(r,"fieldPrefetchCache access",n,o)},Vt=(e,t,s,n,a)=>Ft(e,!0,t,s,a,n),Kt=(e,t,s,n)=>Ft(e,!1,t,s,n);function Bt(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Wt(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Bt(Object(s),!0).forEach((function(t){Ht(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Bt(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Ht(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Gt=(e,t,s,n,a)=>{const i=Wt(Wt({},a),{},{elapsedTimeMs:dt.default.now()-s});n&&Object(Ut.b)(n({action:e,actionSubject:t}),`${t} ${e}`,i)},$t=(e,t,s,n)=>{Gt("succeeded",`${e}Suggestions`,t,s,n)},qt=(e,t,s,n)=>{Gt("failed",`${e}Suggestions`,t,s,n)},zt=e=>e?(e=>({avatarUrl:e.avatarUrls&&e.avatarUrls["48x48"],id:e.accountId,name:e.displayName}))(e):null,Yt=e=>e?(e=>({avatarUrls:{"48x48":e.avatarUrl},displayName:e.name,accountId:e.id}))(e):null;function Qt(){return(Qt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Jt(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const Zt=Object(l.defineMessages)({assignToMe:{id:"issue.assignee.text-for-logged-in-user",defaultMessage:"Assign to me"},unassignedOption:{id:"issue.assignee.text-when-no-value-is-provided",defaultMessage:"Unassigned"}}),Xt=e=>e&&e.accountId,es=Object(a.a)(e=>({avatarUrl:"",name:e(Zt.unassignedOption)})),ts=Object(a.a)((e,t)=>e?[{avatarUrl:e.avatarUrl,id:e.id,name:e.displayName,displayName:t(Zt.assignToMe)}]:[]),ss=Object(a.a)((e,t)=>e?[{avatarUrl:"",id:null,name:t(Zt.unassignedOption),displayName:t(Zt.unassignedOption)}]:[]),ns=Object(a.a)((e,t,s,n)=>[...!Boolean(t&&e&&e.id===t.accountId)&&n?ts(e,s):[],...t?ss(e,s):[]]),as=(e,t)=>!!e&&t.toLowerCase().startsWith(e.toLowerCase()),is=(e,t)=>Object(a.a)(s=>{const n=as(s,t(Zt.assignToMe));return[...as(s,t(Zt.unassignedOption))?ss(e,t):[],...n?ts(e,t):[]]}),rs=Object(a.a)((e,t,s,n)=>(a,i)=>{if(!e)return Promise.resolve([]);const o=is(t,s)(a),c=null!=i?`&sessionId=${i}`:"";if(Object(r.isFieldSuggestionsRequestAnalyticsEnabled)()){const t=dt.default.now(),s=a.length;return Object(pt.a)(`${e}${a}${c}`).then(e=>{$t("assignee",t,n,{sessionId:i,queryLength:s});const a=e.map(zt).filter(Boolean);return[...o,...a]}).catch(e=>{throw qt("assignee",t,n,{sessionId:i}),e})}return Object(pt.a)(`${e}${a}${c}`).then(e=>{const t=e.map(zt).filter(Boolean);return[...o,...t]})}),os=ct()((e,t)=>(s,n)=>{if(!s&&null!=e){const{prefetchSessionId:a,prefetched:i,fieldValuePromise:o,sessionId:c}=e,{createAnalyticsEvent:l}=t;if(i&&null!==o&&null!==c){const e=t.getDefaultOptions(s);if(Vt(l,a,n||"",c,"assignee"),Object(r.isFieldSuggestionsRequestAnalyticsEnabled)()){const t=dt.default.now();return o.then(s=>{$t("assignee",t,l,{sessionId:n,isPrefetched:!0,queryLength:0});const a=s.map(zt).filter(Boolean);return[...e,...a]}).catch(e=>{throw qt("assignee",t,l,{sessionId:n,isPrefetched:!0}),e})}return o.then(e=>e.map(zt).filter(Boolean)).then(t=>[...e,...t])}return Kt(l,a,n||"","assignee"),t.fetchSuggestions(s,n)}return t.fetchSuggestions(s,n)},(e,t)=>`${e&&e.prefetchSessionId||""}_${t.issueKey}`),cs=e=>{Object(o.useMemo)(()=>e.initFieldOptions(),[]);const t=Object(o.useRef)(null);Object(o.useEffect)(()=>{t.current&&e.isEditing&&Object(Et.a)(t.current)},[e.isEditing]);const[{value:s}]=Object(bt.a)({issueKey:e.issueKey}),[{canBeAssignedToIssues:n,canAssignIssues:a}]=Object(ft.a)(),i=!!a,{formatMessage:r}=Object(mt.c)(),l=ns(e.loggedInUser,s,r,!!n),u=Object(o.useCallback)(()=>{const t=Object(gt.a)(e.issueKey,"assignee");return(c.a.createElement(t,{fieldId:"assignee"},t=>{const n=os(t,e),{createAnalyticsEvent:a,getDefaultOptions:o,initFieldOptions:u,intl:d,issueKey:p,loggedInUser:m}=e,b=Jt(e,["createAnalyticsEvent","getDefaultOptions","initFieldOptions","intl","issueKey","loggedInUser"]);return c.a.createElement(Nt,Qt({},b,{fetchSuggestions:n,fieldId:"assignee",value:zt(s),initialOptions:l,isEditable:i,emptyOption:es(r)}))}))},[r,l,i,e,s]);return c.a.createElement(ut.a,{name:"EDIT_FIELD"},c.a.createElement("div",{ref:e=>{t.current=e}},u()))};cs.displayName="AssigneeView",cs.displayName="AssigneeView";const ls=(e,t)=>`${e}/rest/api/3/user/assignable/search?issueKey=${t}&recommend=true&query=`,us=({baseUrl:e,issueKey:t,value:s,saveFieldData:n})=>((e,t,s,n)=>Object(_.e)(((e,t,s)=>s?`${e}/rest/api/3/issue/${t}/assignee?sessionId=${s}`:`${e}/rest/api/3/issue/${t}/assignee`)(e,t,n),Ot(Ot({},ht.a),{},{body:JSON.stringify({accountId:s})})))(e,t,null==s?null:s.accountId,n);var ds=p()(Object(lt.a)(),Object(w.b)("assignee"),Object(H.a)((e,t)=>(e=>({fieldId:"assignee",transformFromStateValue:zt,transformToStateValue:Yt,saveField:us,additionalProps:(t,s)=>{const n=Object(K.z)(t);return{portalElement:Object(W.a)(e.fieldId)(t)?U()||document.body:void 0,fetchSuggestions:rs(ls(Object(R.g)(t),Object(R.B)(t)),n,s.formatMessage,e.createAnalyticsEvent),issueKey:Object(R.B)(t),getDefaultOptions:is(n,s.formatMessage),loggedInUser:n,showPinButton:Object(I.a)(e.area),analyticsAttributeIdRetriever:Xt}}}))(t)))(cs),ps=n("./src/packages/issue/fields/field-base/src/services/edit-field-service/main.js"),ms=n("./src/packages/issue/fields/cascading-select-custom-field/src/common/utils.js"),bs=n("./src/packages/issue/fields/cascading-select-custom-field/src/ui/cascading-select-view/main.js"),fs=Object(l.defineMessages)({noOptionsSelected:{id:"issue-field-cascading-select.no-options-selected",defaultMessage:"None"}});const gs=C.default.div(["z-index:300;position:relative;"]);function hs(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const ys=(e,t)=>e&&e.child?`${e.label} - ${e.child.label}`:e?e.label:t.formatMessage(fs.noOptionsSelected),Os=e=>{const{label:t,isEditable:s,isMobile:n,allowedValues:a,areOptionsOnSameRow:i,showPinButton:r,intl:l}=e,u=hs(e,["label","isEditable","isMobile","allowedValues","areOptionsOnSameRow","showPinButton","intl"]),[{value:d,error:p},{saveValue:m}]=Object(ps.a)(u),[b,f]=Object(o.useState)(Object(ms.a)(d)),[y,O]=Object(o.useState)(Object(ms.a)(d)),[j,E]=Object(o.useState)(!1),[v,k]=Object(o.useState)(ys(b,l)),w=Object(o.useCallback)(e=>{k(ys(e,l))},[l]),S=()=>{E(!1),f(y)},I=async e=>{f(e)};return Object(o.useEffect)(()=>{w(b)},[b,w]),Object(o.useEffect)(()=>{p&&E(!0)},[p]),Object(o.useEffect)(()=>{f(Object(ms.a)(d))},[d]),c.a.createElement(g.d,null,c.a.createElement(g.b,null,c.a.createElement(g.c,null,t),!0===r&&c.a.createElement(h.a,{fieldId:u.fieldKey,label:t})),c.a.createElement(g.g,{isEditing:j},c.a.createElement(fe.a,{onEscape:S},c.a.createElement(q.a,{isLabelHidden:!0,label:t,readView:(()=>b?c.a.createElement("div",null,v):c.a.createElement(ge.b,null,v))(),editView:s?(()=>c.a.createElement(gs,null,c.a.createElement(bs.a,{value:b,allowedValues:Object(ms.b)(a),allowedChildValues:Object(ms.c)(a),onChange:I,isInvalid:!!p,areOptionsOnSameRow:i,isEditable:s})))():null,onConfirm:e=>{m(Object(ms.d)(b),null,e),E(!1),w(b),Object(Ut.h)(e,"cascadingSelect",{hasChild:!(!b||!b.child||null==b.child),isEmpty:!b}),O(b)},onCancel:S,onEditRequested:()=>E(!0),isEditing:j,disableEditViewFieldBase:!0,isFitContainerWidthReadView:!n}))))};Os.displayName="CascadingSelectInlineEditView",Os.defaultProps={initialValue:null,isMobile:!1,areOptionsOnSameRow:!1,fieldType:"com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect"};var js=Object(l.injectIntl)(Os);function Es(){return(Es=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const vs=e=>{const{issueKey:t,fieldKey:s,label:n}=e,[a]=Object(He.b)({issueKey:t,fieldKey:s}),[i]=Object(Ge.a)(t,s);return c.a.createElement(js,Es({},e,{allowedValues:i&&i.allowedValues||[],isEditable:i&&i.isEditable||!1,label:i&&i.title||n,initialValue:a}))};vs.displayName="CascadingSelectView";var ks=Object(Ke.a)([Object(u.b)((e,{fieldId:t,area:s})=>({fieldKey:t,fieldType:"com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect",error:Object(K.h)(e),issueKey:Object(R.B)(e),isMobile:Object(R.u)(e),label:Object(j.m)(t)(e),areOptionsOnSameRow:"content"===s||"content-request"===s,showPinButton:Object(I.a)(s)}),{})])(Object(k.b)()(vs)),ws=n("./node_modules/lodash/isEmpty.js"),Ss=n.n(ws),Is=n("./node_modules/@atlaskit/tag--current/dist/es2019/Tag/index.js"),Cs=n("./node_modules/@atlaskit/tag-group/dist/es2019/TagGroup/index.js"),Ts=n("./src/packages/platform/observability/analytics-web-react/src/utils/component-with-analytics.js"),Ps=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/html-view/check-for-href.js");const _s=C.default.div(["margin:-4px;width:100%;"]);class xs extends o.Component{constructor(...e){super(...e),this.handleTagSelected=e=>{Object(Ps.a)(e.target,e.currentTarget)&&(e.stopPropagation(),this.props.onClick&&this.props.onClick())},this.handleTagMouseDown=e=>{e.preventDefault(),Object(Ps.a)(e.target,e.currentTarget)&&e.stopPropagation()},this.renderTag=e=>{const t=c.a.createElement(Is.a,{appearance:this.props.tagAppearance,text:void 0!==e.content?e.content:e.label,color:e.color,href:this.props.shouldHideLinks?void 0:e.href,elemBefore:e.elemBefore});return this.props.isUserTag?c.a.createElement(Pt.a,{userAccount:e,analyticsData:{trigger:"user-tag"},position:"left-start"},t):t}}render(){const{value:e,noValueText:t}=this.props;return e&&!Ss()(e)?c.a.createElement(_s,null,c.a.createElement(Cs.a,null,e.map(e=>c.a.createElement("div",{onClick:this.handleTagSelected,onMouseDown:this.handleTagMouseDown,onKeyPress:this.handleTagSelected,key:null!=e.key?e.key:e.value,role:"presentation"},this.renderTag(e))))):c.a.createElement(ge.b,null,t)}}xs.displayName="TagView",xs.defaultProps={isUserTag:!1,shouldHideLinks:!1,value:null,noValueText:null,tagAppearance:"default"};var Ds=Object(Ts.a)("tagView",{onClick:"clicked"})(xs),As=n("./node_modules/@atlaskit/select/dist/esm/CheckboxSelect.js"),Ms=n("./src/packages/issue/issue-view/src/views/common/select-validation-wrapper/select-validation-wrapper.js");class Ls extends o.Component{render(){const{invalidMessage:e,options:t,placeholder:s,onChange:n,value:a}=this.props;return(c.a.createElement(Ms.a,{validationState:null!=e?"error":null,validationMessage:e},c.a.createElement(As.a,{options:t,placeholder:s,onChange:n,value:a,tabSelectsValue:!1,autoFocus:!0})))}}Ls.displayName="CheckboxFieldView",Ls.displayName="CheckboxFieldView",Ls.defaultProps={value:[],options:[],placeholder:null,invalidMessage:null};class Rs extends o.Component{renderReadView(){return c.a.createElement(Ds,{value:this.props.value,noValueText:this.props.noValueText,tagAppearance:this.props.tagAppearance,shouldHideLinks:this.props.isMobile})}renderEditView(){return c.a.createElement(Ls,{value:this.props.value,options:this.props.options,onChange:this.props.onChange,placeholder:this.props.placeholder,invalidMessage:this.props.invalidMessage})}render(){const{intl:e,label:t,onCancel:s,isEditable:n,isEditing:a,onConfirm:i,onEditRequest:r,isMobile:o,fieldId:l,showPinButton:u}=this.props;return(c.a.createElement(g.d,null,c.a.createElement(g.b,null,c.a.createElement(g.c,null,t),!0===u&&c.a.createElement(h.a,{fieldId:l,label:t})),c.a.createElement(g.g,{isEditing:a},c.a.createElement(fe.a,{onEscape:s},c.a.createElement(q.a,{isLabelHidden:!0,label:t,readView:this.renderReadView(),editView:n?this.renderEditView():null,disableEditViewFieldBase:!0,areActionButtonsHidden:!0,isEditing:a,onConfirm:i,onCancel:s,onEditRequested:r,isFitContainerWidthReadView:!o,editButtonLabel:e.formatMessage(G.a.editButtonLabel,{fieldName:t}),confirmButtonLabel:e.formatMessage(G.a.confirmButtonLabel,{fieldName:t}),cancelButtonLabel:e.formatMessage(G.a.cancelButtonLabel,{fieldName:t})})))))}}Rs.displayName="CheckboxInlineEditView",Rs.displayName="CheckboxInlineEditView",Rs.defaultProps={isEditable:!1,isEditing:!1,isMobile:!1,options:[],value:[],label:"",placeholder:null,noValueText:null,tagAppearance:"default",invalidMessage:null};var Ns=Object(l.injectIntl)(Rs);const Us=Object(l.defineMessages)({noValue:{id:"issue.context-items.text-for-edit-view-when-no-value-is-provided",defaultMessage:"None"},version_no_value_placeholder:{id:"issue.version.text-no-value",defaultMessage:"Select version"}}),Fs=e=>({label:e.value,value:e.id}),Vs=e=>e?e.map(Fs):[],Ks=e=>e&&e.map(e=>({id:e.value,value:e.label})),Bs=Object(l.defineMessages)({placeholder:{id:"issue.checkbox-select.text-for-dropdown-when-nothing-selected",defaultMessage:"Select {fieldName}"}}),Ws=ct()(e=>(e=>e&&e.map(Fs)||[])(e));var Hs=Object(H.a)((e,t)=>({fieldId:t.fieldId,transformFromStateValue:Vs,transformToStateValue:Ks,additionalProps:(e,s)=>({options:Ws(Object(j.c)(t.fieldId)(e)),placeholder:s.formatMessage(Bs.placeholder,{fieldName:Object(j.m)(t.fieldId)(e)}),noValueText:s.formatMessage(Us.noValue),showPinButton:Object(I.a)(t.area)})}))(Ns),Gs=n("./node_modules/react-async-component/commonjs/index.js"),$s=n("./src/packages/platform/ui/error-boundary/src/main.js");const qs=Object(Gs.asyncComponent)({resolve:()=>n.e("async-cmdb-object-inline-edit-view").then(n.bind(null,"./src/packages/issue/fields/cmdb-object/src/ui/main.js")).then(e=>e.CmdbObjectMain),name:"AsyncIssueCmdbObjectField"});var zs=n("./src/packages/issue/issue-view/src/common/util/entry/get-project-key.js"),Ys=Object(H.a)((e,{fieldId:t})=>({fieldId:t,additionalProps:e=>{var s;const n=Object(j.q)(t)(e)||{},a=Object(R.B)(e);return{issueKey:a,projectKey:Object(zs.a)(a),cmdbFieldConfig:null===(s=n.configuration)||void 0===s?void 0:s.cmdbFieldConfig}}}))(qs),Qs=n("./src/packages/cache/src/services/components/index.js"),Js=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/logging/log.js"),Zs=n("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js"),Xs=n("./src/packages/platform/utils/constants/src/fetch-default-options.js"),en=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js");function tn(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function sn(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?tn(Object(s),!0).forEach((function(t){nn(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):tn(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function nn(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const an="smarts.fields.ranking";var rn=(e,t,s,n,a,i)=>!t||t.length<=1?Promise.resolve(t):Object(r.isFieldSuggestionsRequestAnalyticsEnabled)()?((e,t,s,n,a,i)=>{let r;const o=new Promise(e=>{r=setTimeout(()=>{en.i.safeWarn(an,"FRS has timeout after 5000ms"),qt(n,5e3,i,{sessionId:a}),e(t)},s)}),c=e().then(e=>(r&&clearTimeout(r),e));return Promise.race([o,c])})(()=>((e,t,s,n,a,i)=>{const r=t.map(e=>({[e.id]:e})).reduce((e,t)=>sn(sn({},e),t),{}),{atlassianAccountId:o,cloudId:c,baseUrl:l}=Object(en.f)(),u=`${l}/gateway/api/fields/v2/recommendations/`,d=dt.default.now();return Object(pt.a)(u,sn(sn({},Xs.a),{},{method:"POST",body:JSON.stringify({context:{objectId:s,containerId:n,principalId:o,product:"jira",tenantId:c,sessionId:a},fieldId:e,fieldObjects:t.map(({id:e,name:t})=>({id:e,value:t}))})})).then(({fieldObjects:t})=>($t(e,d,i,{sessionId:a}),t.map(({id:e})=>r[e]))).catch(s=>(qt(e,d,i,{sessionId:a}),en.i.safeError(an,`error while ranking ${e} via FRS`,s),t))})(e,t,s,n,a,i),t,5e3,e,a,i):((e,t,s)=>{let n;const a=new Promise(e=>{n=setTimeout(()=>{en.i.safeWarn(an,"FRS has timeout after 5000ms"),e(t)},s)}),i=e().then(e=>(n&&clearTimeout(n),e));return Promise.race([a,i])})(()=>((e,t,s,n,a)=>{const i=t.map(e=>({[e.id]:e})).reduce((e,t)=>sn(sn({},e),t),{}),{atlassianAccountId:r,cloudId:o,baseUrl:c}=Object(en.f)(),l=`${c}/gateway/api/fields/v2/recommendations/`;return Object(pt.a)(l,sn(sn({},Xs.a),{},{method:"POST",body:JSON.stringify({context:{objectId:s,containerId:n,principalId:r,product:"jira",tenantId:o,sessionId:a},fieldId:e,fieldObjects:t.map(({id:e,name:t})=>({id:e,value:t}))})})).then(({fieldObjects:e})=>e.map(({id:e})=>i[e])).catch(s=>(en.i.safeError(an,`error while ranking ${e} via FRS`,s),t))})(e,t,s,n,a),t,5e3),on=Object(l.defineMessages)({placeholder:{id:"issue.components.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select component"},createNewItem:{id:"issue.components.create-new-component-message",defaultMessage:"Create new component"},recent:{id:"issue.components.recent-items",defaultMessage:"Recent components"},all:{id:"issue.components.all-items",defaultMessage:"All components"}}),cn=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/jql/helpers.js");function ln(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function un(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ln(Object(s),!0).forEach((function(t){dn(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ln(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function dn(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const pn=(e,{baseUrl:t,projectKey:s})=>e.map(e=>{const n=`project = ${Object(cn.b)(s)} AND component = ${Object(cn.b)(e.name)}`;return{href:Object(cn.a)(t,n),content:e.name,value:e.id}}),mn=e=>({content:e.name,value:e.id,fromCache:e.fromCache||!1}),bn=(e=[],t=[],s,n)=>{const a=(e=>e.slice(-5).reverse())(((e,t,s)=>t.filter(e=>e.projectKey===s).map(t=>{const n=e.find(e=>e.id===t.id);if(n){const e=un(un({},n),{},{projectKey:s});return Qs.a.update(`${t.id}`,e),un(un({},e),{},{fromCache:!0})}return un(un({},t),{},{fromCache:!0})}))(e,t,n));return[{heading:s.formatMessage(on.recent),items:a.map(mn)},{heading:s.formatMessage(on.all),items:e.map(mn)}]},fn=e=>e.map(e=>({name:e.content,id:e.value,fromCache:e.fromCache||!1})),gn=e=>[{items:e.map(e=>({content:e.name,value:e.id}))}];var hn=n("./node_modules/@atlaskit/icon/glyph/add.js"),yn=n.n(hn),On=n("./src/packages/common-legacy-do-not-add-anything-new/src/navigation/iframe-redirect/index.js");function jn(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function En(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?jn(Object(s),!0).forEach((function(t){vn(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):jn(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function vn(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const kn=C.default.div(["display:flex;align-items:center;"]),wn=C.default.span(["margin-left:","px;flex-grow:1;"],T.e),Sn=C.default.div(["display:flex;align-items:center;color:",";padding:6px 12px;&:hover{background-color:",";}&:active{background-color:",";}"],_t.a.B400,_t.a.N20,_t.a.B75),In={option:(e,t)=>En(En(En({},e),!0===t.data.__isNew__?En(En({},t.isFocused?{"> .issue-view__select-footer":{"background-color":_t.a.N20}}:{}),{},{position:"sticky",bottom:0,"background-color":`${_t.a.N0} !important`,"border-top":"2px solid rgba(9, 30, 66, 0.13)",padding:0,"padding-top":`${T.e}px`,"padding-bottom":0,overflow:"visible",":after":{content:'""',display:"block",position:"absolute",bottom:"-8px",left:0,width:"100%",height:"8px","background-color":_t.a.N0,"border-bottom-left-radius":`${T.e/2}px`,"border-bottom-right-radius":`${T.e/2}px`}}):{}),!0===t.data.isAkSelectOption?{"text-align":"center","padding-top":`${T.e}px`,"padding-bottom":`${2*T.e}px`}:{})};var Cn=n("./src/packages/issue/issue-view/src/views/field/select/common/select-inline-edit/select-field/index.js");class Tn extends o.Component{constructor(...e){super(...e),this.onChange=(e,t)=>{const{onChange:s,onConfirm:n}=this.props;s&&s(e,t),n()}}renderEditView(){const{fieldId:e,value:t,fetchSuggestions:s,additionalAnalyticsProps:n,placeholder:a,isEditing:i,isMulti:r,invalidMessage:o,hasAutocomplete:l,debounceFetchSuggestionsTime:u,allowEmptyValue:d,portalElement:p,canCreateNewItem:m,formatCreateLabel:b,styles:f,onChangeMulti:g,footer:h,onFooterSelect:y,shouldShowFooter:O,filterOption:j,formatOptionLabel:E,onDataRequest:v,onDataLoaded:k,components:w,componentsProps:S,initialData:I}=this.props;return(c.a.createElement(Cn.a,{initialData:I,componentsProps:S,components:w,fieldId:e,value:t,fetchSuggestions:s,additionalAnalyticsProps:n,placeholder:a,isOpen:i,invalidMessage:o,hasAutocomplete:l,debounceFetchSuggestionsTime:u,isClearable:d,portalElement:p,canCreateNewItem:m,formatCreateLabel:b,styles:f,autoFocus:!0,onChange:this.onChange,footer:h,onFooterSelect:y,shouldShowFooter:O,onChangeMulti:g,isMulti:r,filterOption:j,formatOptionLabel:E,onDataRequest:v,onDataLoaded:k,optionValuesSafeForAnalytics:this.props.optionValuesSafeForAnalytics}))}renderReadView(){const e=this.props.fieldContentWrapper;return kt()(e)?this.props.renderReadView():c.a.createElement(e,null,this.props.renderReadView())}render(){const{intl:{formatMessage:e},label:t,fieldId:s,isEditable:n,isEditing:a,isMobile:i,isMulti:r,showPinButton:o,onCancel:l,onEditRequest:u,onConfirm:d,titleView:p=this.props.label}=this.props;return(c.a.createElement(g.d,null,c.a.createElement(g.b,null,c.a.createElement(g.c,null,p),!0===o&&c.a.createElement(h.a,{fieldId:s,label:t})),c.a.createElement(g.g,{isEditing:a},c.a.createElement(fe.a,{onEscape:l},c.a.createElement(q.a,{isLabelHidden:!0,label:t,readView:this.renderReadView(),editView:n?this.renderEditView():null,disableEditViewFieldBase:!0,areActionButtonsHidden:!r,isEditing:a,onConfirm:d,onCancel:l,onEditRequested:u,isFitContainerWidthReadView:!i,editButtonLabel:e(G.a.editButtonLabel,{fieldName:t}),confirmButtonLabel:e(G.a.confirmButtonLabel,{fieldName:t}),cancelButtonLabel:e(G.a.cancelButtonLabel,{fieldName:t})})))))}}Tn.displayName="SelectInlineEditView",Tn.displayName="SelectInlineEditView",Tn.defaultProps={isEditable:!1,isEditing:!1,isMobile:!1,isMulti:!1,hasAutocomplete:!1,label:"",noValueText:null,allowEmptyValue:!1,debounceFetchSuggestionsTime:0,onChange:b.a};var Pn=Object(l.injectIntl)(Tn);function _n(){return(_n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function xn(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const Dn=e=>{const{validate:t,invalidMessage:s,value:n,onChange:a,tagAppearance:i,onDataRequest:r,onDataLoaded:o,customReadView:l}=e,u=xn(e,["validate","invalidMessage","value","onChange","tagAppearance","onDataRequest","onDataLoaded","customReadView"]);return c.a.createElement(Pn,_n({},u,{value:n,isMulti:!0,onChangeMulti:a,invalidMessage:t(n)||s,renderReadView:()=>{const{value:t,noValueText:s,tagAppearance:n,isMobile:a,customReadView:i}=e;return i?i(t):c.a.createElement(Ds,{value:t,noValueText:s,tagAppearance:n,shouldHideLinks:a})},onDataRequest:r,onDataLoaded:o}))};Dn.displayName="MultiSelectInlineEditView",Dn.displayName="MultiSelectInlineEditView",Dn.defaultProps={tagAppearance:"default",validate:()=>null,hasAutocomplete:!0,debounceFetchSuggestionsTime:300};var An=Dn;function Mn(){return(Mn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Ln(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}class Rn extends o.Component{constructor(...e){super(...e),this.state={data:[],loading:!1,error:!1},this.componentDidMount=()=>{Object(r.isCacheInPickersEnabled)()&&this.getDataFromCache()},this.getDataFromCache=()=>{var e,t;null===(e=(t=this.props).getDataFromCache)||void 0===e||e.call(t).then(e=>{this.setState({data:e,loading:!1})})},this.fetchSuggestions=e=>this.props.fetchSuggestions(e).then(e=>(this.setState({data:e}),e))}renderFooter(){const{intl:e}=this.props;return(c.a.createElement(Sn,{className:"issue-view__select-footer"},c.a.createElement(yn.a,{label:"",size:"small"}),c.a.createElement(wn,null,e.formatMessage(on.createNewItem))))}render(){const e=this.props,{shouldShowFooter:t,baseUrl:s,projectKey:n,intl:a}=e,i=Ln(e,["shouldShowFooter","baseUrl","projectKey","intl"]);if(Object(r.isCacheInPickersEnabled)()){const{data:e,loading:a,error:r}=this.state,o={data:e,loading:a,error:r};return c.a.createElement(An,Mn({},i,{styles:In,fetchSuggestions:this.fetchSuggestions,debounceFetchSuggestionsTime:300,initialData:o,shouldShowFooter:t,footer:this.renderFooter(),onFooterSelect:()=>Object(On.a)(`${s}/plugins/servlet/project-config/${n}/administer-components`,!1),allowEmptyValue:!0,optionValuesSafeForAnalytics:!0}))}return(c.a.createElement(An,Mn({},i,{styles:In,shouldShowFooter:t,footer:this.renderFooter(),onFooterSelect:()=>Object(On.a)(`${s}/plugins/servlet/project-config/${n}/administer-components`,!1),allowEmptyValue:!0,optionValuesSafeForAnalytics:!0})))}}function Nn(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Un(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Nn(Object(s),!0).forEach((function(t){Fn(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Nn(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Fn(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}Rn.displayName="View";const Vn=Object(a.a)((e,t,s,n,a)=>((e,t,s,n,a)=>rn("components",e,t,s,n,a))(e,t,s,n,a)),Kn=Object(a.a)((e,t,s,n,a,i)=>(o,c)=>{if(Object(r.isCacheInPickersEnabled)()){const r=Vn(t,s,n,c,a);return Promise.all([r,Qs.a.getAll()]).then(([t,s])=>bn(t,s,e,i))}return Vn(t,s,n,c,a).then(gn)});var Bn=Object(H.a)((t,s)=>({fieldId:s.fieldId,transformFromStateValue:pn,transformToStateValue:fn,additionalProps:(e,t)=>({baseUrl:Object(R.g)(e),projectKey:Object(R.I)(e),fetchSuggestions:Kn(t,Object(j.c)(s.fieldId)(e),Object(R.A)(e),Object(K.D)(e),s.createAnalyticsEvent,Object(R.I)(e)),placeholder:t.formatMessage(on.placeholder),noValueText:t.formatMessage(Us.noValue),shouldShowFooter:(Object(Zs.c)(e)||Object(Zs.b)(e))&&!Object(R.u)(e),showPinButton:Object(I.a)(s.area),getDataFromCache:Object(r.isCacheInPickersEnabled)()?()=>Qs.a.getAll().then(s=>bn([],s,t,Object(R.I)(e))):void 0}),saveField:(...t)=>(({baseUrl:t,issueKey:s,fieldMetaKey:n,value:a,fieldEditSessionId:i},o,c)=>{const l=void 0!==i?`${t}/rest/api/2/issue/${s}?fieldEditSessionId=${i}`:`${t}/rest/api/2/issue/${s}`;if(Object(r.isCacheInPickersEnabled)()){const t=Object(R.I)(o);return a.forEach(e=>{try{c.createAnalyticsEvent&&Object(Ut.b)(c.createAnalyticsEvent({}),"componentPickerCache set",{isFromCache:e.fromCache}),e.id&&Qs.a.set(`${e.id}`,Un(Un({},e),{},{projectKey:t}))}catch(s){Js.a.safeError("issue-view.components.cache.set",s.message)}}),Object(_.e)(l,{body:JSON.stringify({fields:{[n]:a}})}).catch(t=>{throw a.forEach(t=>{try{c.createAnalyticsEvent&&Object(Ut.b)(c.createAnalyticsEvent({}),"componentPickerCache removed"),t.id&&Qs.a.remove(`${t.id}`)}catch(e){Js.a.safeError("issue-view.components.cache.remove",e.message)}}),t})}return Object(_.e)(l,{body:JSON.stringify({fields:{[n]:a}})})})(...t,s)}))(Object(l.injectIntl)(Rn));var Wn=n("./src/packages/issue/issue-view/src/selectors/breadcrumbs-selector.js"),Hn=n("./src/packages/issue/issue-view/src/selectors/issue-actions-permissions-selector.js"),Gn=Object(l.defineMessages)({placeholder:{id:"issue.customer-request-type.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select Request Type"}});const $n=e=>({issueTypeId:e.issueType.toString(),content:e.name,value:e.id,iconUrl:e.iconUrl}),qn=e=>e&&(e=>{if(e.errorMessage)return{hasError:!0};if(!e.requestType)return null;const{icon:t,issueTypeId:s,id:n,name:a}=e.requestType;return{issueTypeId:s,content:a,value:n,iconUrl:t._links.iconUrls["48x48"]}})(e),zn=e=>({requestType:{icon:{_links:{iconUrls:{"48x48":e.iconUrl||""}}},id:e.value,name:e.content,issueTypeId:e.issueTypeId}}),Yn=e=>[{items:e.validRequestTypes.map($n)}];var Qn=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/async-icon/index.js"),Jn=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/text-with-icon/index.js");function Zn(){return(Zn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const Xn=e=>()=>{const{value:t,noValueText:s}=e;if(t&&!Array.isArray(t)){const{iconUrl:e,content:s}=t;return void 0!==e?c.a.createElement(Jn.a,{iconUrl:e},s):s}return(c.a.createElement(ge.b,null,s))},ea=e=>c.a.createElement(Pn,Zn({},e,{renderReadView:e.renderReadView||Xn(e),isMulti:!1}));ea.displayName="SingleSelectInlineEditView",ea.displayName="SingleSelectInlineEditView";var ta=ea;const sa=C.default.div(["display:flex;align-items:center;"]),na=C.default.span(["margin-left:","px;"],T.e),aa=C.default.div(["display:flex;padding-left:","px;padding-right:","px;"],.75*T.e,.75*T.e);function ia(){return(ia=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function ra(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function oa(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ra(Object(s),!0).forEach((function(t){ca(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ra(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function ca(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function la(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const ua=e=>{if(null!==e&&void 0!==e.iconUrl)return()=>c.a.createElement(sa,null,c.a.createElement(aa,null,c.a.createElement(Qn.a,{url:e.iconUrl})),c.a.createElement(na,null,e.content))},da=e=>{const{issueTypeId:t}=e,s=la(e,["issueTypeId"]),{value:n}=e;if(null!==n&&!0===n.hasError)return null;const a=null!==n&&n&&t!==n.issueTypeId?null:s.value,i=oa(oa({},s),{},{value:a});return c.a.createElement(ta,ia({},i,{renderReadView:ua(a)}))};da.displayName="RequestTypeField";const pa=(e,t)=>t?`${e}/rest/servicedesk/1/servicedesk/request/${t}/request-types?query=`:null,ma=Object(a.a)(e=>t=>e?Object(pt.a)(`${e}${t}`).then(Yn):Promise.resolve([])),ba=({baseUrl:e,value:t},s)=>{const{requestType:n}=t;return(async(e,t,s)=>{if(!t)throw new Error("Issue ID not available");return Object(_.d)(((e,t)=>`${e}/rest/servicedesk/1/servicedesk/request/${t}/request-types/`)(e,t),{body:JSON.stringify({rtId:s})})})(e,Object(R.A)(s),n.id)},fa=e=>e&&e.requestType&&e.requestType.id;var ga=Object(H.a)((e,t)=>({fieldId:t.fieldId,transformFromStateValue:qn,transformToStateValue:zn,saveField:ba,additionalProps:(e,s)=>({fetchSuggestions:ma(pa(Object(R.g)(e),Object(R.A)(e))),isEditable:Object(Hn.d)(e),issueTypeId:Object(Wn.e)(e),hasAutocomplete:!0,placeholder:s.formatMessage(Gn.placeholder),noValueText:s.formatMessage(Us.noValue),debounceFetchSuggestionsTime:300,analyticsAttributeIdRetriever:fa,showPinButton:Object(I.a)(t.area)})}))(da),ha=n("./src/packages/issue/issue-view/src/common/util/date-time-formatter/index.js"),ya=n("./src/packages/issue/issue-view/src/common/component/date-time/view.js");class Oa extends o.Component{renderEditView(){return c.a.createElement(ya.a,{value:this.props.value,onChange:this.props.onChange,timeZone:this.props.timeZone,parseValue:this.props.parseValue})}renderReadView(){const{value:e,formatDateTime:t}=this.props;return e?t(e):c.a.createElement(ge.b,null,this.props.noValueText)}render(){const{intl:e,isEditable:t,onCancel:s,label:n,value:a,isEditing:i,invalidMessage:r,onConfirm:o,onEditRequest:l,isMobile:u,fieldId:d,showPinButton:p}=this.props;return(c.a.createElement(g.d,null,c.a.createElement(g.b,null,c.a.createElement(g.c,null,n),!0===p&&c.a.createElement(h.a,{fieldId:d,label:n})),c.a.createElement(g.g,{isEditing:i},c.a.createElement(fe.a,{onEscape:s},c.a.createElement(q.a,{isLabelHidden:!0,label:n,readView:this.renderReadView(),editView:t?this.renderEditView():null,value:a,isEditing:i,invalidMessage:r,isInvalid:!!r,onCancel:s,onConfirm:o,onEditRequested:l,disableEditViewFieldBase:!0,isFitContainerWidthReadView:!u,areActionButtonsHidden:!0,editButtonLabel:e.formatMessage(G.a.editButtonLabel,{fieldName:n}),confirmButtonLabel:e.formatMessage(G.a.confirmButtonLabel,{fieldName:n}),cancelButtonLabel:e.formatMessage(G.a.cancelButtonLabel,{fieldName:n})})))))}}Oa.displayName="DateTimeInlineEditFieldView",Oa.defaultProps={isEditable:!1,isEditing:!1,isMobile:!1,label:"",noValueText:null,value:null,invalidMessage:null,formatDateTime:e=>e,onConfirm:b.a,onCancel:b.a,onEditRequest:b.a};var ja=Object(l.injectIntl)(Oa);const Ea=Object(a.a)((e,t)=>s=>Object(ha.a)(e,s,t));var va=Object(H.a)((e,t)=>({fieldId:t.fieldId,additionalProps:(e,s)=>{const n=Object(K.A)(e);return{noValueText:s.formatMessage(Us.noValue),formatDateTime:Ea(s,n),timeZone:n,parseValue:ha.b,showPinButton:Object(I.a)(t.area)}}}))(ja),ka=n("./node_modules/@atlaskit/inline-dialog/dist/es2019/InlineDialog/index.js"),wa=n("./node_modules/@atlaskit/datetime-picker/dist/es2019/components/DatePicker.js"),Sa=n("./src/packages/common-legacy-do-not-add-anything-new/src/date/date-messages.js");class Ia extends o.Component{render(){const{autoFocus:e,isDisabled:t,value:s,intl:{formatMessage:n}}=this.props;return(c.a.createElement(wa.a,{autoFocus:e,isDisabled:t,value:s||void 0,onChange:this.props.onChange,placeholder:n(Sa.a.placeholderDate)}))}}Ia.displayName="DateFieldView",Ia.defaultProps={isDisabled:!1,value:void 0,autoFocus:!1};var Ca=Object(l.injectIntl)(Ia);class Ta extends o.Component{renderEditView(){return c.a.createElement(Ca,{value:this.props.value,onChange:this.props.onChange,autoFocus:!0})}renderReadView(){const{value:e,noValueText:t}=this.props;return e||c.a.createElement(ge.b,null,t)}render(){const{intl:e,isEditable:t,onCancel:s,label:n,value:a,isEditing:i,onConfirm:r,onEditRequest:o,isMobile:l,invalidMessage:u,fieldId:d,showPinButton:p}=this.props;return(c.a.createElement(g.d,null,c.a.createElement(g.b,null,c.a.createElement(g.c,null,n),!0===p&&c.a.createElement(h.a,{fieldId:d,label:n})),c.a.createElement(g.g,{isEditing:i},c.a.createElement(fe.a,{onEnter:r,onEscape:s},c.a.createElement(ka.a,{content:u,isOpen:!!u,placement:"top"},c.a.createElement(q.a,{isLabelHidden:!0,label:n,readView:this.renderReadView(),editView:t?this.renderEditView():null,value:a,isEditing:i,onCancel:s,onConfirm:r,onEditRequested:o,disableEditViewFieldBase:!0,isFitContainerWidthReadView:!l,areActionButtonsHidden:!0,editButtonLabel:e.formatMessage(G.a.editButtonLabel,{fieldName:n}),confirmButtonLabel:e.formatMessage(G.a.confirmButtonLabel,{fieldName:n}),cancelButtonLabel:e.formatMessage(G.a.cancelButtonLabel,{fieldName:n})}))))))}}Ta.displayName="DateInlineEditFieldView",Ta.defaultProps={isEditable:!1,isEditing:!1,isMobile:!1,label:"",noValueText:null,value:"",invalidMessage:null};var Pa=Object(l.injectIntl)(Ta);const _a=e=>e?e.replace(/-/g,"/"):"",xa=e=>e?e.replace(/\//g,"-"):null;var Da=Object(H.a)((e,t)=>({fieldId:t.fieldId,transformFromStateValue:_a,transformToStateValue:xa,additionalProps:(e,s)=>({noValueText:s.formatMessage(Us.noValue),showPinButton:Object(I.a)(t.area)})}))(Pa),Aa=Object(H.a)((e,t)=>({fieldId:t.fieldId,transformFromStateValue:_a,transformToStateValue:xa,additionalProps:(e,s)=>({noValueText:s.formatMessage(Us.noValue),showPinButton:Object(I.a)(t.area)})}))(Pa),Ma=n("./node_modules/@atlaskit/badge/dist/es2019/components/index.js"),La=n("./node_modules/@atlaskit/icon/glyph/arrow-right.js"),Ra=n.n(La),Na=n("./node_modules/@atlaskit/icon/glyph/shortcut.js"),Ua=n.n(Na),Fa=n("./node_modules/@atlaskit/lozenge/dist/es2019/Lozenge/index.js"),Va=n("./src/packages/platform/observability/analytics-legacy-gasv2/src/with-analytics.js"),Ka=n("./src/packages/common-legacy-do-not-add-anything-new/src/bridge/jira-bridge.js"),Ba=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/animations/mount-animator.js"),Wa=n("./src/packages/issue/issue-view-layout/src/services/main.js"),Ha=n("./src/packages/issue/issue-view/src/actions/ecosystem-glance-actions.js"),Ga=n("./src/packages/issue/issue-view/src/common/ecosystem/ecosystem-analytics.js"),$a=n("./src/packages/issue/issue-view/src/common/service/issue/ecosystem-extensions-transformer.js"),qa=n("./src/packages/issue/issue-view/src/ecosystem/broadcast-connect-event.js"),za=n("./src/packages/issue/issue-view/src/ecosystem/ecosystem-extensions-selector.js"),Ya=n("./src/packages/issue/issue-view/src/selectors/ecosystem-glance-ui-selector.js");const Qa=C.default.div(["position:relative;overflow:hidden;display:flex;border-radius:3px;margin-left:-","px;height:","px;width:100%;transition:background-color 0.2s ease-in-out,border-color 0.2s ease-in-out;&:hover{background:",";cursor:pointer;}&:focus{box-shadow:0 0 0 2px ",";outline:0;background:",";}"],T.e,4*T.e,_t.a.N30,_t.a.B100,_t.a.N30),Ja=C.default.div(["overflow:hidden;margin-top:","px;margin-bottom:","px;margin-left:","px;height:24px;width:24px;align-items:center;padding-left:","px;padding-right:","px;"],.5*T.e,.5*T.e,T.e,.25*T.e,.25*T.e),Za=C.default.div(["white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex:1;line-height:","px;padding-left:","px;"],4*T.e,T.e),Xa=C.default.div(["font-weight:600;display:inline;"]),ei=C.default.div(["color:",";display:flex;align-items:center;margin-right:","px};"],_t.a.N70,T.e),ti=C.default.div(["position:absolute;right:0;width:","px;height:","px;background-image:linear-gradient(90deg,rgba(255,255,255,0) 0%,"," 25%);"],7*T.e,4*T.e,_t.a.N20),si=C.default.div(["position:absolute;right:0;margin:","px ","px;height:26px;width:26px;background:",";color:",";border-radius:50%;align-items:center;padding:2px 0 0 2px;"],T.e/4,T.e,_t.a.N30,_t.a.N60),ni=Object(C.keyframes)(["0%{right:-28px;}100%{right:0;}"]),ai=C.default.div(["position:absolute;animation:"," 0.15s ease-in-out;"],ni);var ii=n("./node_modules/lodash/omitBy.js"),ri=n.n(ii);function oi(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function ci(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?oi(Object(s),!0).forEach((function(t){li(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):oi(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function li(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const ui=e=>["click_through","open_panel"].find(t=>t===e)||"open_panel",di=e=>{const t=ri()(e,e=>null==e);return void 0===t.workMode?t:ci(ci({},t),{},{workMode:ui(t.workMode)})};function pi(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function mi(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function bi(){return(bi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}class fi extends o.Component{constructor(...e){super(...e),this.state={isHovering:!1,update:void 0},this.onGlanceUpdate=(e,t,s)=>{s.addonKey===this.props.appKey&&s.moduleKey===this.props.moduleKey&&this.setState({update:di(s.data)})},this.getGlanceIcon=()=>this.state.update&&this.state.update.icon?this.state.update.icon:this.props.icon,this.getGlanceWorkMode=()=>this.state.update&&this.state.update.workMode||this.props.workMode,this.eventHandlers={onMouseEnter:()=>this.setState({isHovering:!0}),onMouseLeave:()=>this.setState({isHovering:!1}),onFocus:()=>this.setState({isHovering:!0}),onBlur:()=>this.setState({isHovering:!1})},this.handleOpenGlancePanel=()=>{const{appKey:e,moduleKey:t,status:s,onGlanceShowAnalytics:n,onOpenGlancePanel:a,onClickThroughGlancePanel:i}=this.props,r=this.getGlanceWorkMode();"open_panel"===r?(n(Object(Ga.d)(e,t,s)),a(e,t)):"click_through"===r&&i(e,t)},this.container=void 0,this.renderStatus=()=>{const e=this.state.update&&this.state.update.status?this.state.update.status:this.props.status;if(!e)return null;const{value:t,type:s}=e;if(t.label)switch(s){case"lozenge":return c.a.createElement(Fa.a,{appearance:t.type},t.label);case"icon":return c.a.createElement(Qn.a,{url:Object($a.a)(this.props.glance.options.origin,t.label),alt:t.type,width:24,height:24});case"badge":{const e=parseInt(t.label,10);return e>=0?c.a.createElement(Ma.a,{appearance:"default"},e):null}default:return null}return null},this.renderContent=()=>{if(this.state.update&&this.state.update.content)return c.a.createElement(Za,null,this.state.update.content);const{label:e,name:t}=this.props;return e.value===t?c.a.createElement(Za,null,c.a.createElement(l.FormattedMessage,{id:"issue.ecosystem.context.rich-glance-label",defaultMessage:"Open {label}",values:{label:c.a.createElement(Xa,null,e.value)}})):c.a.createElement(Za,null,e.value)}}componentDidMount(){Ka.a.addUpdateIssueGlanceListener(this.onGlanceUpdate)}componentWillUnmount(){Ka.a.removeUpdateIssueGlanceListener(this.onGlanceUpdate)}render(){const{name:e,glance:t}=this.props,s=this.getGlanceIcon();return c.a.createElement(g.d,{"data-test-id":"issue.views.issue-base.context.ecosystem-glance-panel"},c.a.createElement(g.b,null,c.a.createElement(g.c,null,e)),c.a.createElement(g.g,null,c.a.createElement(fe.a,{onEnter:this.handleOpenGlancePanel},c.a.createElement(Qa,bi({onClick:this.handleOpenGlancePanel,tabIndex:"0"},this.eventHandlers),s&&c.a.createElement(Ja,null,c.a.createElement(Qn.a,{url:Object($a.a)(t.options.origin,s.url),alt:s.alt,width:24,height:24})),this.renderContent(),c.a.createElement(ei,null,this.renderStatus()),this.state.isHovering&&c.a.createElement(Ba.a,{mountAnimation:ai},c.a.createElement(ti,null,c.a.createElement(si,null,"click_through"===this.getGlanceWorkMode()?c.a.createElement(Ua.a,{size:"medium",label:""}):c.a.createElement(Ra.a,{size:"medium",label:""}))))))))}}fi.displayName="ConnectGlance",fi.displayName="ConnectGlance",fi.defaultProps={icon:null,openedGlance:null,status:null,workMode:"open_panel",onGlanceShowAnalytics:b.a};const gi=(e,t)=>{Object(qa.a)("ISSUE_GLANCE_CONTENT_CLICKED",{addon_key:e,key:t})},hi=e=>{if(!Object(r.isGlanceAndTabSweetStateEnabled)())return c.a.createElement(fi,e);const[,t]=Object(Wa.c)();return(c.a.createElement(fi,bi({},e,{onOpenGlancePanel:(e,s)=>{t({appKey:e,moduleKey:s}),Object(qa.a)("ISSUE_GLANCE_OPENED",{addon_key:e,key:s})}})))};hi.displayName="ConnectGlanceWithIssueLayout";var yi=Object(Ke.a)([Object(Va.a)(e=>({onGlanceShowAnalytics:t=>e("show",function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?pi(Object(s),!0).forEach((function(t){mi(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):pi(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},t))})),Object(u.b)((e,t)=>({openedGlance:Object(Ya.a)(e),glance:Object(za.l)(t.appKey,t.moduleKey)(e),onClickThroughGlancePanel:gi}),e=>({onOpenGlancePanel:(t,s)=>{e(Object(Ha.b)(t,s)),Object(qa.a)("ISSUE_GLANCE_OPENED",{addon_key:t,key:s})}}))])(hi),Oi=n("./node_modules/redux/es/index.js"),ji=n("./node_modules/prop-types/index.js"),Ei=n.n(ji),vi=n("./src/packages/forge/forge-ui-analytics/src/services/custom-field/index.js"),ki=n("./src/packages/forge/forge-ui-analytics/src/ui/custom-field-edit/index.js"),wi=n("./src/packages/forge/forge-ui-async/src/ui/custom-field/async.js"),Si=n("./src/packages/forge/forge-ui/src/ui/extension-title/index.js"),Ii=n("./src/packages/issue/issue-view/src/ecosystem/forge/forge-extensions-selector.js"),Ci=n("./src/packages/forge/forge-ui-analytics/src/common/ui/index.js"),Ti=n("./src/packages/forge/forge-ui-analytics/src/services/custom-field-edit/index.js");function Pi(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function _i(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Pi(Object(s),!0).forEach((function(t){xi(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Pi(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function xi(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var Di=(e,t)=>{switch(t.type){case"FORGE_CUSTOM_FIELD_EDIT_INITIALIZATION":return _i(_i({},e),{},{isEditing:!0,isLoading:!0});case"FORGE_CUSTOM_FIELD_EDIT_RENDERED":return _i(_i({},e),{},{isLoading:!1});case"FORGE_CUSTOM_FIELD_EDIT_CANCEL":return _i(_i({},e),{},{isEditing:!1});case"FORGE_CUSTOM_FIELD_EDIT_SET_VALUE":return _i(_i({},e),{},{isEditing:!1,editValue:t.payload});case"FORGE_CUSTOM_FIELD_EDIT_FAILED":return _i(_i({},e),{},{isEditing:!1,isLoading:!1});default:return e}};function Ai(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Mi(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ai(Object(s),!0).forEach((function(t){Li(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ai(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Li(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var Ri=({context:e,extension:t,source:s,fieldId:n,value:a,viewComponent:i,onConfirm:l,onCancel:u})=>{const[{isEditing:d,isLoading:p,editValue:m},b]=Object(o.useReducer)(Di,{isEditing:!1,isLoading:!1,editValue:a}),f=Object(o.useCallback)(e=>{l(),b((e=>({type:"FORGE_CUSTOM_FIELD_EDIT_SET_VALUE",payload:e}))(e)),Object(Ti.b)(s,{displayType:"modal"})},[l,s]),g=Object(o.useCallback)(()=>{u(),b((()=>({type:"FORGE_CUSTOM_FIELD_EDIT_CANCEL"}))()),Object(Ti.c)(s,{displayType:"modal"})},[u,s]),h=Object(o.useCallback)(()=>{b((()=>({type:"FORGE_CUSTOM_FIELD_EDIT_RENDERED"}))())},[]),y=Object(o.useCallback)(()=>{b((()=>({type:"FORGE_CUSTOM_FIELD_EDIT_FAILED"}))())},[]),O=Object(o.useCallback)(()=>{Object(Ti.d)(s,{displayType:"modal"}),b((()=>({type:"FORGE_CUSTOM_FIELD_EDIT_INITIALIZATION"}))())},[s]),j=Object(o.useMemo)(()=>Mi(Mi({},e),{},{fieldValue:m}),[e,m]),E=Object(o.useMemo)(()=>({source:s}),[s]);return c.a.createElement(c.a.Fragment,null,i(O,m,p),d&&c.a.createElement(c.a.Fragment,null,c.a.createElement(wi.b,{extension:t,fieldId:n,platformContext:j,analyticsData:E,onConfirm:f,onCancel:g,onRender:h,onError:y,extensionContext:Object(r.isForgeCustomFieldDataPassInExtensionContext)()?{fieldValue:m}:void 0}),c.a.createElement(Ci.a,{analyticsData:E})))},Ni=n("./node_modules/@atlaskit/spinner/dist/es2019/spinner.js");const Ui=C.default.div(["position:relative;width:100%;"]),Fi=C.default.div(["opacity:",";"],e=>e.isLoading?"0.7":"1.0"),Vi=C.default.div(["position:absolute;top:0;right:0;margin-right:","px;"],T.e/2);var Ki=({children:e,isLoading:t})=>c.a.createElement(Ui,null,c.a.createElement(Fi,{isLoading:t},e),t&&c.a.createElement(Vi,null,c.a.createElement(Ni.a,{size:"small"})));const Bi=e=>({content:e.name,value:e.name}),Wi=Object(a.a)(e=>t=>Object(pt.a)(`${e}/rest/api/2/groups/picker?query=${t}`).then(e=>(e=>e&&e.groups?[{items:e.groups.map(Bi)}]:[{items:[]}])(e)));var Hi=Object(l.defineMessages)({placeholder:{id:"issue.forge.group.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select group"}});function Gi(){return(Gi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function $i(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const qi=e=>{let{extension:t,type:s,value:n,customReadView:i,onChange:r,intl:{formatMessage:l}}=e,u=$i(e,["extension","type","value","customReadView","onChange","intl"]);const d=Object(a.a)(e=>e?{name:String(e.value)}:null),p=Object(a.a)(e=>e?{value:String(e.name),content:String(e.name)}:null),m=Object(o.useCallback)(e=>r(d(e)),[d,r]),b=Object(o.useCallback)(kt()(i)?()=>null:()=>i(n),[i,n]),f=kt()(i)?void 0:b;return c.a.createElement(ta,Gi({},u,{renderReadView:f,value:p(n),placeholder:l(Hi.placeholder),noValueText:l(Us.noValue),onChange:m,hasAutocomplete:!0}))};qi.displayName="View";var zi=p()([l.injectIntl,Object(u.b)((e,{fieldId:t})=>({fetchSuggestions:Wi(Object(R.g)(e)),allowEmptyValue:!Object(j.C)(t)(e)}),{})])(qi),Yi=Object(l.defineMessages)({placeholder:{id:"issue.forge.groups.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select groups"}});function Qi(){return(Qi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Ji(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const Zi=e=>{let{extension:t,type:s,value:n,onChange:i,customReadView:r,intl:{formatMessage:l}}=e,u=Ji(e,["extension","type","value","onChange","customReadView","intl"]);const d=Object(a.a)(e=>e?e.map(e=>({name:String(e.value)})):[]),p=Object(a.a)(e=>e?e.map(e=>({value:String(e.name),content:String(e.name)})):[]),m=Object(o.useCallback)(e=>i(d(e)),[d,i]),b=Object(o.useCallback)(kt()(r)?()=>null:e=>r(d(e)),[r]),f=kt()(r)?void 0:b;return c.a.createElement(An,Qi({},u,{value:p(n),customReadView:f,placeholder:l(Yi.placeholder),noValueText:l(Us.noValue),onChange:m}))};Zi.displayName="View";var Xi=p()([l.injectIntl,Object(u.b)((e,{fieldId:t})=>({fetchSuggestions:Wi(Object(R.g)(e)),allowEmptyValue:!Object(j.C)(t)(e)}),{})])(Zi),er=Object(l.defineMessages)({placeholder:{id:"issue.labels.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select Label"},createNewItem:{id:"issue.labels.create-new-item-message",defaultMessage:"New label"}});const tr=(e,{baseUrl:t,fieldId:s})=>e?e.map(e=>{const n=encodeURIComponent(`${(e=>{if(e.startsWith("customfield_")){return`cf[${e.substring("customfield_".length,e.length)}]`}return e})(s)} = ${Object(cn.b)(e)}`);return{content:e,value:e,href:`${t}/issues/?jql=${n}`}}):[],sr=e=>e.map(e=>e.value),nr=e=>[{items:e.suggestions?e.suggestions.map(e=>({content:e.label,value:e.label})):[]}],ar=e=>{if(e.length>55)return c.a.createElement(l.FormattedMessage,{id:"issue.labels-view.input-too-many-labels",defaultMessage:"Can't have more than {max} labels.",values:{max:55}});return e.map(e=>e.content.trim()).some(e=>e.includes(" ")||e.length>255)?c.a.createElement(l.FormattedMessage,{id:"issue.labels-view.input-label-is-invalid",defaultMessage:"Labels can't have spaces or be more than {max} characters.",values:{max:255}}):void 0};function ir(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function rr(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ir(Object(s),!0).forEach((function(t){or(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ir(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function or(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function cr(){return(cr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function lr(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const ur=ct()((e,t,s,n)=>(a,i)=>{if(null==e)return Promise.resolve([]);let o=`${e}${encodeURIComponent(a)}`;if(null!=i&&(o=`${o}&sessionId=${i}`),null!=s&&(o=`${o}&fieldEditSessionId=${s}`),Object(r.isFieldSuggestionsRequestAnalyticsEnabled)()){const e=dt.default.now(),s=a.length;return Object(pt.a)(o).then(a=>("labels"===t&&$t("labels",e,n,{sessionId:i,queryLength:s}),nr(a))).catch(s=>{throw"labels"===t&&qt("labels",e,n,{sessionId:i}),s})}return Object(pt.a)(o).then(nr)},(e,t)=>`${e}_${t}`),dr=ct()((e,t)=>(s,n)=>{if(!s&&null!=e){const{prefetched:s,fieldValuePromise:a,sessionId:i,prefetchSessionId:o}=e,{createAnalyticsEvent:c}=t;if(s&&null!==a&&null!==i){if(Vt(c,o,n||"",i,"labels"),Object(r.isFieldSuggestionsRequestAnalyticsEnabled)()){const e=dt.default.now();return a.then(t=>($t("labels",e,c,{sessionId:n,isPrefetched:!0,queryLength:0}),nr(t))).catch(t=>{throw qt("labels",e,c,{sessionId:n,isPrefetched:!0}),t})}return a.then(e=>nr(e))}Kt(c,o,n||"","labels")}return t.fetchSuggestions(s,n)},(e,t)=>`${e&&e.prefetchSessionId||""}_${t.issueKey}`);ct()(e=>t=>`${t} (${e.formatMessage(er.createNewItem)})`);class pr extends o.Component{constructor(...e){super(...e),this.onEditRequest=()=>{Object(f.c)().cancel({key:S.a.LABELS.TIME_TO_REFLECT_INPUT_RESULT},!0),Object(f.c)().markStartOfInteraction({key:S.a.LABELS.TIME_TO_RENDER_INITIAL_SUGGESTIONS,cancelExisting:!0}),this.props.onEditRequest()},this.onConfirm=()=>{Object(f.c)().markStartOfInteraction({key:S.a.LABELS.TIME_TO_RENDER_READ_VIEW_ON_CONFIRM}),this.props.onConfirm()},this.onCancel=()=>{Object(f.c)().markStartOfInteraction({key:S.a.LABELS.TIME_TO_RENDER_READ_VIEW_ON_CANCEL}),this.props.onCancel()},this.onChange=(e,t)=>{null!=t&&null!=t.action&&("select-option"===t.action?Object(f.c)().markStartOfInteraction({key:S.a.LABELS.TIME_TO_REFLECT_SELECTED_EXISTING}):"remove-value"===t.action?Object(f.c)().markStartOfInteraction({key:S.a.LABELS.TIME_TO_REFLECT_REMOVED_EXISTING}):"create-option"===t.action&&Object(f.c)().markStartOfInteraction({key:S.a.LABELS.TIME_TO_REFLECT_SELECTED_NEW})),this.props.onChange(e)},this.onDataRequest=({isInitial:e})=>{e||Object(f.c)().markStartOfInteraction({key:S.a.LABELS.TIME_TO_REFLECT_INPUT_RESULT,cancelExisting:!0})},this.onDataLoaded=({isInitial:e}={})=>{e?Object(f.c)().markTimeToFinishTask({key:S.a.LABELS.TIME_TO_RENDER_INITIAL_SUGGESTIONS}):Object(f.c)().markTimeToFinishTask({key:S.a.LABELS.TIME_TO_REFLECT_INPUT_RESULT})}}componentDidMount(){this.props.initFieldOptions()}componentDidUpdate(e){const{isEditing:t,value:s,fieldId:n}=this.props;if("labels"===n){const n=!e.isEditing&&t,a=e.isEditing&&!t;e.isEditing&&t&&(s.length>e.value.length?(Object(f.c)().markTimeToFinishTask({key:S.a.LABELS.TIME_TO_REFLECT_SELECTED_EXISTING}),Object(f.c)().markTimeToFinishTask({key:S.a.LABELS.TIME_TO_REFLECT_SELECTED_NEW})):s.length<e.value.length&&Object(f.c)().markTimeToFinishTask({key:S.a.LABELS.TIME_TO_REFLECT_REMOVED_EXISTING})),a&&(Object(f.c)().markTimeToFinishTask({key:S.a.LABELS.TIME_TO_RENDER_READ_VIEW_ON_CANCEL}),e.value===s&&Object(f.c)().markTimeToFinishTask({key:S.a.LABELS.TIME_TO_RENDER_READ_VIEW_ON_CONFIRM})),n&&Object(f.c)().markTimeToFeedback({key:S.a.LABELS.TIME_TO_RENDER_INITIAL_SUGGESTIONS})}}renderMultiSelectInlineEditView(e){const{initFieldOptions:t,issueKey:s,createAnalyticsEvent:n}=e,a=lr(e,["initFieldOptions","issueKey","createAnalyticsEvent"]),i="labels"===this.props.fieldId?{onEditRequest:this.onEditRequest,onConfirm:this.onConfirm,onCancel:this.onCancel,onChange:this.onChange,onDataRequest:this.onDataRequest,onDataLoaded:this.onDataLoaded}:{};return c.a.createElement(An,cr({},a,i))}renderWithCachedValue(){const{issueKey:e}=this.props,t=Object(gt.a)(e,"labels");return c.a.createElement(t,{fieldId:"labels"},e=>{const t=dr(e,this.props),s=rr(rr({},this.props),{},{fetchSuggestions:t});return this.renderMultiSelectInlineEditView(s)})}render(){return"labels"===this.props.fieldId?this.renderWithCachedValue():this.renderMultiSelectInlineEditView(this.props)}}pr.displayName="LabelsView",pr.displayName="LabelsView";var mr=Object(H.a)((e,t)=>({fieldId:t.fieldId,transformFromStateValue:tr,transformToStateValue:sr,additionalProps:(e,s)=>({fetchSuggestions:ur(Object(j.d)(t.fieldId)(e),t.fieldId,Object(j.f)(t.fieldId)(e),t.createAnalyticsEvent),placeholder:s.formatMessage(er.placeholder),noValueText:s.formatMessage(Us.noValue),formatCreateLabel:e=>`${e} (${s.formatMessage(er.createNewItem)})`,canCreateNewItem:!0,allowEmptyValue:!0,validate:ar,issueKey:Object(R.B)(e),showPinButton:Object(I.a)(t.area)})}))(pr),br=Object(l.defineMessages)({placeholder:{id:"issue.forge.labels.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select label"},createNewItem:{id:"issue.forge.labels.create-new-item-message",defaultMessage:"{value} (New label)"}});function fr(){return(fr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function gr(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const hr=e=>{const t=e.map(e=>({value:String(e.value),content:e.content,href:e.href||""}));return ar(t)||null},yr=e=>{let{intl:t,value:s,type:n,extension:a,baseUrl:i,projectKey:r,onChange:l,customReadView:u}=e,d=gr(e,["intl","value","type","extension","baseUrl","projectKey","onChange","customReadView"]);const p=Object(o.useCallback)(e=>t.formatMessage(br.createNewItem,{value:e}),[t]),m=Object(o.useCallback)(e=>{const t=sr(e.map(e=>({value:String(e.value),content:e.content,href:e.href||""})));l(t)},[l]),f=Object(o.useMemo)(()=>{const e={fieldId:d.fieldId,issueKey:d.issueKey,baseUrl:i,projectKey:r};return tr(s,e).map(e=>({value:String(e.value),content:e.content,href:e.href||""}))},[i,d.fieldId,d.issueKey,r,s]),g=Object(o.useCallback)(kt()(u)?()=>null:()=>u(s),[u]),h=kt()(u)?void 0:g;return c.a.createElement(pr,fr({},d,{placeholder:t.formatMessage(br.placeholder),noValueText:t.formatMessage(Us.noValue),customReadView:h,canCreateNewItem:!0,allowEmptyValue:!0,validate:hr,formatCreateLabel:p,value:f,onChange:m,initFieldOptions:b.a}))};yr.displayName="View";var Or=p()([l.injectIntl,Object(u.b)((e,{fieldId:t})=>({fetchSuggestions:ur(Object(j.d)(t)(e),t,Object(j.f)(t)(e),void 0),issueKey:Object(R.B)(e),baseUrl:Object(R.g)(e),projectKey:Object(R.I)(e)}),{})])(yr),jr=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/is-url.js"),Er=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/is-valid-email-address.js"),vr=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/prefix-url.js"),kr=n("./node_modules/@atlaskit/field-text/FieldTextStateless.js");const wr=(e,t)=>{const{type:s="text",value:n="",placeholder:a="",invalidMessage:i,onChange:r,compact:o=!1}=e;return(c.a.createElement(kr.a,{type:s,value:n,placeholder:a,onChange:r,isInvalid:!!i,invalidMessage:i,shouldFitContainer:!0,autoFocus:!0,isLabelHidden:!0,label:"",ref:t,compact:o}))};wr.displayName="SingleLineTextField",wr.displayName="SingleLineTextField";var Sr=Object(o.forwardRef)(wr);class Ir extends o.Component{constructor(e){super(e),this.onChange=e=>{const{type:t}=this.props;let s;"number"===t?""===e.target.value?s=null:(s=Number(e.target.value),this.setState({displayValue:e.target.value})):s=e.target.value,"url"===t&&this.setState({showValidationMessage:!1,invalidMessage:e.target.validationMessage}),this.props.onChange(s)},this.onConfirm=()=>{this.state.invalidMessage?(this.setState({showValidationMessage:!0}),this.editFieldRef.current&&this.editFieldRef.current.focus()):this.props.onConfirm()},this.onCancel=()=>{"url"===this.props.type&&this.setState({showValidationMessage:!1,invalidMessage:null}),this.props.onCancel()},this.editFieldRef=Object(o.createRef)(),this.state={invalidMessage:null,showValidationMessage:!1,displayValue:null}}componentDidUpdate(e){"number"===this.props.type&&this.props.value!==e.value&&(this.state.displayValue=null)}renderReadView(){const{value:e,noValueText:t,type:s,customReadView:n}=this.props;if(n)return n(e);if(null==e||""===e)return c.a.createElement(ge.b,null,t);const a=((e,t)=>{switch(e){case"number":return c.a.createElement(l.FormattedNumber,{value:t});case"text":return Object(Er.a)(t)?c.a.createElement("a",{href:`mailto:${t}`},t):Number(t)?t:Object(jr.a)(t)?c.a.createElement("a",{href:Object(vr.a)(t,"//"),target:"_blank"},t):t;case"url":return Object(Er.a)(t)?c.a.createElement("a",{href:`mailto:${t}`},t):c.a.createElement("a",{href:Object(vr.a)(t,"//"),target:"_blank"},t);default:return t}})(s,e);return(c.a.createElement(ge.a,null,a))}renderReadViewWithContentWrapper(){const e=this.props.fieldContentWrapper;return kt()(e)?this.renderReadView():c.a.createElement(e,null,this.renderReadView())}renderEditView(){const{value:e,placeholder:t}=this.props,s=null!=e?this.state.displayValue||e.toString():"";return c.a.createElement(Sr,{ref:this.editFieldRef,type:this.props.type,value:s,placeholder:t,onChange:this.onChange,invalidMessage:this.props.invalidMessage||(this.state.showValidationMessage?this.state.invalidMessage:null)})}render(){const{intl:e,label:t,isEditable:s,isEditing:n,onEditRequest:a,isMobile:i,titleView:r=this.props.label,fieldId:o,showPinButton:l}=this.props;return(c.a.createElement(g.d,null,c.a.createElement(g.b,null,c.a.createElement(g.c,null,r),!0===l&&c.a.createElement(h.a,{fieldId:o,label:t})),c.a.createElement(g.g,{isEditing:n},c.a.createElement(fe.a,{onEnter:this.onConfirm,onEscape:this.onCancel},c.a.createElement(q.a,{isLabelHidden:!0,label:t,readView:this.renderReadViewWithContentWrapper(),editView:s?this.renderEditView():null,disableEditViewFieldBase:!0,isEditing:n,onConfirm:this.onConfirm,onCancel:this.onCancel,onEditRequested:a,isFitContainerWidthReadView:!i,editButtonLabel:e.formatMessage(G.a.editButtonLabel,{fieldName:t}),confirmButtonLabel:e.formatMessage(G.a.confirmButtonLabel,{fieldName:t}),cancelButtonLabel:e.formatMessage(G.a.cancelButtonLabel,{fieldName:t})})))))}}Ir.displayName="SingleLineTextInlineEditView",Ir.displayName="SingleLineTextInlineEditView",Ir.defaultProps={isEditable:!1,isEditing:!1,isMobile:!1,value:null,noValueText:null,invalidMessage:null,type:"text",label:""};var Cr=Object(l.injectIntl)(Ir);function Tr(){return(Tr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Pr(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const _r=e=>{switch(e){case"string":return"text";case"number":case"url":return e;default:return"text"}},xr=e=>{let{extension:t}=e,s=Pr(e,["extension"]);const{properties:{data:{type:n}}}=t;return(c.a.createElement(Cr,Tr({},s,{noValueText:null,type:_r(n)})))};xr.displayName="View";var Dr=xr;function Ar(){return(Ar=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Mr(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const Lr=e=>e.users?e.users.map(zt):[],Rr=Object(a.a)(e=>t=>null===e?Promise.resolve([]):Object(pt.a)(`${e}${t}`).then(Lr)),Nr=Object(a.a)(e=>({avatarUrl:"",name:e.formatMessage(Us.noValue)})),Ur=e=>{let{isFieldRequired:t,extension:s,type:n,value:a,isFieldInTab:i}=e,r=Mr(e,["isFieldRequired","extension","type","value","isFieldInTab"]);const o=i&&(U()||document.body)||void 0;return c.a.createElement(Rt,Ar({},r,{value:zt(a),emptyOption:t?void 0:Nr(r.intl),portalElement:o,onChange:e=>{r.onChange(Yt(e))}}))};Ur.displayName="View";var Fr=p()([l.injectIntl,Object(u.b)((e,{fieldId:t})=>({isFieldInTab:Object(W.a)(t)(e),fetchSuggestions:Rr(Object(j.d)(t)(e)),isFieldRequired:Object(j.C)(t)(e)}),{})])(Ur),Vr=Object(l.defineMessages)({placeholder:{id:"issue.multi-user.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select User"}}),Kr=n("./src/packages/platform/utils/types/src/general.js");const Br=Object(a.a)(e=>e&&e.map(e=>({displayName:e.content,accountId:e.accountId,id:Object(Kr.a)(String(e.value)),avatarUrls:{"24x24":String(e.avatarUrl)}}))),Wr=Object(a.a)(e=>e?e.map(e=>({content:e.displayName,value:String(e.accountId),key:e.accountId,avatarUrl:e.avatarUrls&&e.avatarUrls["24x24"],accountId:e.accountId,elemBefore:c.a.createElement(wt.a,{size:"xsmall",src:e.avatarUrls&&e.avatarUrls["24x24"]})})):[]),Hr=Object(a.a)(e=>[{items:(e&&e.users||[]).map(e=>({content:e.displayName,value:String(e.accountId),accountId:e.accountId,avatarUrl:e.avatarUrls["24x24"]}))}]),Gr=e=>e&&e.map(e=>({displayName:e.content,accountId:e.accountId,id:e.value,avatarUrls:{"24x24":e.avatarUrl}})),$r=e=>e?e.map(e=>({content:e.displayName,value:e.accountId,key:e.accountId,avatarUrl:e.avatarUrls["24x24"],accountId:e.accountId,elemBefore:c.a.createElement(wt.a,{size:"xsmall",src:e.avatarUrls["24x24"]})})):[],qr=e=>[{items:(e&&e.users||[]).map(e=>({content:e.displayName,value:e.accountId,accountId:e.accountId,avatarUrl:e.avatarUrls["24x24"]}))}];function zr(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Yr(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?zr(Object(s),!0).forEach((function(t){Qr(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):zr(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Qr(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Jr=Object(a.a)(e=>t=>e?Object(pt.a)(`${e}${t}`).then(Object(r.isForgeUiUserListCustomFieldIntegrationEnabled)()?Hr:qr):Promise.resolve([]));var Zr=Object(H.a)((e,t)=>Yr(Yr({fieldId:t.fieldId},Object(r.isForgeUiUserListCustomFieldIntegrationEnabled)()?{transformFromStateValue:Wr,transformToStateValue:Br}:{transformFromStateValue:$r,transformToStateValue:Gr}),{},{additionalProps:(e,s)=>({fetchSuggestions:Jr(Object(j.d)(t.fieldId)(e)),placeholder:s.formatMessage(Vr.placeholder),noValueText:s.formatMessage(Us.noValue),tagAppearance:"rounded",showDropdownOnClick:!1,isUserTag:!0,formatOptionLabel:e=>c.a.createElement(kn,null,e.avatarUrl&&c.a.createElement(wt.a,{size:"small",src:e.avatarUrl}),c.a.createElement(wn,null,e.label)),showPinButton:Object(I.a)(t.area)})}))(An);function Xr(){return(Xr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function eo(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const to=e=>c.a.createElement(kn,null,kt()(e.avatarUrl)?null:c.a.createElement(wt.a,{size:"small",src:e.avatarUrl}),c.a.createElement(wn,null,e.label));to.displayName="formatOptionLabel";const so=e=>{let{isFieldRequired:t,extension:s,type:n,value:a,onChange:i,customReadView:r,intl:{formatMessage:l},isFieldInTab:u}=e,d=eo(e,["isFieldRequired","extension","type","value","onChange","customReadView","intl","isFieldInTab"]);const p=Object(o.useCallback)(e=>i(Br(e)),[i]),m=Object(o.useCallback)(kt()(r)?()=>null:e=>r(Br(e)),[r]),b=kt()(r)?void 0:m;return c.a.createElement(An,Xr({},d,{value:Wr(a),customReadView:b,placeholder:l(Vr.placeholder),noValueText:l(Us.noValue),onChange:p,tagAppearance:"rounded",formatOptionLabel:to}))};so.displayName="View";const no={none:{user:Fr,group:zi,string:Dr,number:Dr},list:{string:Or,group:Xi,user:p()([l.injectIntl,Object(u.b)((e,{fieldId:t})=>({fetchSuggestions:Jr(Object(j.d)(t)(e))}),{})])(so)}};var ao=Object(a.a)((e,t="none")=>{const s=no[t];return s?s[e]:null});const io=C.default.div(["width:100%;&:focus{outline:none;}"]),ro=e=>{switch(e.type){case"user":return"list"===e.collection?(e=>kt()(e)?null:e.map(e=>({accountId:kt()(e.accountId)?e.id:e.accountId})))(e.value):(e=>kt()(e)?null:{accountId:kt()(e.accountId)?e.id:e.accountId})(e.value);case"group":return"list"===e.collection?(e=>null==e?null:e.map(e=>e.name))(e.value):(e=>null==e?null:e.name)(e.value);case"string":case"number":default:return e.value}};function oo(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function co(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function lo(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?co(Object(s),!0).forEach((function(t){uo(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):co(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function uo(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const po=(e,t,s,n="none",i)=>Object(a.a)(a=>c.a.createElement(io,null,c.a.createElement(wi.a,{extension:e,platformContext:lo(lo({},t),{},{fieldValue:ro({type:s,collection:n,value:a})}),extensionContext:Object(r.isForgeCustomFieldDataPassInExtensionContext)()?{fieldValue:ro({type:s,collection:n,value:a})}:void 0,analyticsData:i}))),mo=e=>{let{hasCustomFieldExtensions:t,isFilteredOut:s,extension:n,context:i,fieldId:r,value:l,source:u}=e,d=oo(e,["hasCustomFieldExtensions","isFilteredOut","extension","context","fieldId","value","source"]);const p=Object(o.useMemo)(()=>({source:u}),[u]);if(!t||s)return null;if(!n){const{fieldValue:e}=i,t=oo(i,["fieldValue"]);return Object(vi.b)("Forge extension passed to ForgeCustomField component is null or undefined",lo({fieldId:r},t)),Object(vi.a)(u),null}const{properties:{data:{type:m,collection:b}}}=n,f=Object(a.a)(po)(n,i,m,b,p),g=c.a.createElement(Si.a,{extensionName:d.label,extensionEnvType:n.environmentType}),h=!kt()(n.properties.function),y=lo(lo({value:l,fieldId:r,extension:n,titleView:g},h?{customReadView:f}:null),d),O=ao(m,b);if(!O)return Object(vi.b)("Forge extension passed to ForgeCustomField type is not supported",{fieldId:r,type:m}),null;if(n.properties.edit){const e=(e,t,s)=>{const n=({children:e})=>c.a.createElement(Ki,{isLoading:s},e);n.propTypes={children:Ei.a.node};const a=lo(lo({},y),{},{onEditRequest:e,value:t},h?{customReadView:e=>c.a.createElement(Ki,{isLoading:s},f(e))}:{fieldContentWrapper:n});return(c.a.createElement(O,a))};return(c.a.createElement(ki.a,{analyticsData:p},c.a.createElement(Ri,{fieldId:r,extension:n,source:u,context:i,value:l,onConfirm:y.onConfirm,onCancel:y.onCancel,viewComponent:e})))}return(c.a.createElement(O,y))};mo.displayName="ForgeCustomField";var bo=Object(Oi.compose)(Object(H.a)((e,{fieldId:t,area:s})=>({fieldId:t,additionalProps:()=>({showPinButton:Object(I.a)(s)})})),Object(u.b)((e,{fieldId:t})=>({hasCustomFieldExtensions:Object(Ii.l)(e),isFilteredOut:Object(Ii.m)(t)(e),extension:Object(Ii.c)(t)(e),context:Object(Ii.b)(e),source:Object(R.b)(e)}),{}))(mo),fo=n("./src/packages/forge/forge-ui-analytics/src/services/issue-glance/index.js"),go=n("./src/packages/forge/forge-ui-analytics/src/ui/issue-glance/index.js");function ho(){return(ho=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}class yo extends o.Component{constructor(...e){super(...e),this.state={isHovering:!1},this.eventHandlers={onMouseEnter:()=>this.setState({isHovering:!0}),onMouseLeave:()=>this.setState({isHovering:!1}),onFocus:()=>this.setState({isHovering:!0}),onBlur:()=>this.setState({isHovering:!1})},this.onOpenGlancePanel=()=>{const{appKey:e,moduleKey:t,onOpenGlancePanel:s,source:n}=this.props;Object(fo.a)(n),s(e,t)}}renderStatus(){const{status:e={}}=this.props;switch(e.type){case"lozenge":return c.a.createElement(Fa.a,{appearance:e.value.type},e.value.label);case"badge":{const t=parseInt(e.value,10);return t>=0?c.a.createElement(Ma.a,{appearance:"default"},t):null}default:return null}}render(){const{title:e,label:t,extension:{environmentType:s},source:n}=this.props;return(c.a.createElement(go.a,{analyticsData:{source:n}},c.a.createElement(g.d,null,c.a.createElement(g.b,null,c.a.createElement(g.c,null,c.a.createElement(Si.a,{extensionName:e,extensionEnvType:s}))),c.a.createElement(g.g,null,c.a.createElement(fe.a,{onEnter:this.onOpenGlancePanel},c.a.createElement(Qa,ho({onClick:this.onOpenGlancePanel,tabIndex:"0"},this.eventHandlers),c.a.createElement(Za,null,t),c.a.createElement(ei,null,this.renderStatus()),this.state.isHovering&&c.a.createElement(Ba.a,{mountAnimation:ai},c.a.createElement(ti,null,c.a.createElement(si,null,c.a.createElement(Ra.a,{size:"medium",label:""}))))))))))}}yo.displayName="ForgeGlance",yo.displayName="ForgeGlance";const Oo=e=>{if(!Object(r.isGlanceAndTabSweetStateEnabled)())return c.a.createElement(yo,e);const[,t]=Object(Wa.c)();return(c.a.createElement(yo,ho({},e,{onOpenGlancePanel:(e,s)=>{t({appKey:e,moduleKey:s})}})))};Oo.displayName="ForgeGlanceWithIssueLayout";var jo=Object(Ke.a)([Object(u.b)(e=>({source:Object(R.b)(e)}),e=>({onOpenGlancePanel:(t,s)=>{e(Object(Ha.b)(t,s))}}))])(Object(Re.a)(r.isGlanceAndTabSweetStateEnabled,Oo,yo)),Eo=n("./node_modules/uuid/index.js"),vo=n.n(Eo),ko=n("./src/packages/cache/src/services/epics/index.js"),wo=n("./src/packages/issue/issue-view/src/common/service/issue/issue-urls.js");const So=()=>Object(r.isEpicPickerFewerMaxResultsEnabled)()?20:100;var Io=n("./node_modules/lodash/omit.js"),Co=n.n(Io),To=n("./node_modules/@atlaskit/checkbox/dist/es2019/CheckboxIcon.js"),Po=n("./node_modules/react-select/dist/chunk-80640036.browser.esm.js"),_o=n("./node_modules/@atlaskit/analytics-next--current/dist/esm/useAnalyticsEvents.js");const xo=({onVisibilityChange:e})=>{const[t,s]=Object(o.useState)(!1),n=Object(o.useRef)(),a=Object(o.useRef)();return Object(o.useEffect)(()=>{e(t)},[t,e]),Object(o.useEffect)(()=>{(()=>{if(window.IntersectionObserver&&a.current){const e=e=>{e.forEach(e=>{e.target===a.current&&s(e.isIntersecting)})},t={root:null,rootMargin:"0px",threshold:0};n.current=new IntersectionObserver(e,t).observe(a.current)}})();const e=a.current;return()=>{var t;null===(t=n.current)||void 0===t||t.unobserve(e)}},[]),c.a.createElement("div",{ref:a})};xo.displayName="Intersection";var Do=xo,Ao=Object(l.defineMessages)({checkboxLabel:{id:"issue.views.field.epic.checkbox.label",defaultMessage:"Show done epics"},doneEpicLabel:{id:"issue.views.field.epic.done.label",defaultMessage:"Done"}});const Mo=C.default.div(["min-width:","px;"],1.5*T.e),Lo=C.default.div(["display:flex;flex-direction:row;justify-content:flex-end;padding:","px ","px;border-bottom:2px solid ",";"],T.e,1.5*T.e,_t.a.N30),Ro=C.default.label(["display:flex;flex-direction:row;align-items:center;"]),No=C.default.div(["display:flex;flex-direction:row;align-items:center;color:",";font-size:12px;margin-top:","px;"],_t.a.N300,T.e/2),Uo=C.default.span(["overflow:hidden;text-overflow:ellipsis;max-width:100%;"]),Fo=e=>{var t,s,n,a,i;const{createAnalyticsEvent:r}=Object(_o.a)(),l=So(),u=(null===(t=e.options[1])||void 0===t||null===(s=t.options)||void 0===s?void 0:s.length)===l,d=null===(n=e.selectProps.componentsProps)||void 0===n?void 0:n.onChange,p=null===(a=e.selectProps.componentsProps)||void 0===a?void 0:a.isChecked,m=Object(o.useCallback)(e=>{if(e&&u){const e=r({});Object(Ut.f)(e,"intersectionComponent viewed","epicLink")}},[r,u]),b=Object(o.useCallback)(e=>{if(d){d(e);const t=r({});Object(Ut.f)(t,"doneEpics filtered","epicLink",{includeDone:!p})}},[r,p,d]);return c.a.createElement(Po.z.MenuList,e,c.a.createElement(Lo,{onClick:b},c.a.createElement(Ro,null,e.intl.formatMessage(Ao.checkboxLabel),c.a.createElement(To.a,{isChecked:null===(i=e.selectProps.componentsProps)||void 0===i?void 0:i.isChecked}))),e.children,u&&c.a.createElement(Do,{onVisibilityChange:m}))};Fo.displayName="Menu";var Vo=Object(l.injectIntl)(Fo),Ko=n("./node_modules/@atlaskit/icon/glyph/editor/done.js"),Bo=n.n(Ko),Wo=n("./src/packages/common-legacy-do-not-add-anything-new/src/styles/mixins.js");const Ho=C.default.span(["display:flex;flex-direction:column;margin:0 ","px;padding:","px 0;overflow:hidden;flex-grow:1;"],T.e,T.e/4),Go=C.default.span(["",";flex-grow:1;"],Wo.a),$o=C.default.span(["display:inline-block;color:",";font-size:12px;margin-top:","px;"],_t.a.N300,T.e/2);var qo=n("./src/packages/issue/issue-view/src/views/field/select/common/select-inline-edit/select-field/styled.js");const zo=(e,t)=>c.a.createElement(No,null,null!=e.description?c.a.createElement(Uo,null,e.description):null,!0===e.isDone?c.a.createElement(c.a.Fragment,null,c.a.createElement(Bo.a,{primaryColor:_t.a.G500}),c.a.createElement("span",null,t)):null);zo.displayName="renderOptionDescription";const Yo=({option:e,intl:{formatMessage:t}})=>c.a.createElement(qo.e,null,null!=e.elemBefore?e.elemBefore:null,c.a.createElement(Ho,null,c.a.createElement(Go,null,e.label),zo(e,t(Ao.doneEpicLabel))));Yo.displayName="CustomOption";var Qo=Object(l.injectIntl)(Yo);function Jo(){return(Jo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const Zo=e=>c.a.createElement(Is.a,{color:e,elemBefore:c.a.createElement(Mo,null),text:""});Zo.displayName="getOptionColorElem";class Xo extends o.Component{constructor(...e){super(...e),this.state={includeDoneEpics:!1,query:"",data:[],loading:!1,error:!1},this.componentDidMount=()=>{this.getDataFromCache()},this.sessionId="default-session-id",this.getDataFromCache=()=>{var e,t;null===(e=(t=this.props).getDataFromCache)||void 0===e||e.call(t,!this.state.includeDoneEpics).then(e=>{this.setState({data:e,loading:!1})})},this.renderReadView=()=>{const{value:e,noValueText:t,isMobile:s}=this.props;return(c.a.createElement(Ds,{value:e?[e]:null,noValueText:t,shouldHideLinks:s}))},this.fetchSuggestions=(e,t)=>(null!=t&&""!==t&&(this.sessionId=t),this.setState({query:e}),this.props.fetchSuggestions(e,!this.state.includeDoneEpics,this.sessionId).then(e=>(this.setState({data:e}),e))),this.onChangeIncludeDone=async()=>{const{query:e,includeDoneEpics:t}=this.state;this.setState({includeDoneEpics:!t,loading:!0},()=>this.fetchSuggestions(e).then(e=>{this.setState({data:e,loading:!1,error:!1})}).catch(()=>{this.setState({data:[],loading:!1,error:!0})}))},this.formatOptionLabel=(e,{context:t})=>"menu"===t?c.a.createElement(Qo,{option:e}):e.label}render(){const{data:e,loading:t,error:s}=this.state,n={data:e,loading:t,error:s},a={MenuList:Vo},i={isChecked:this.state.includeDoneEpics,onChange:this.onChangeIncludeDone};return c.a.createElement(ta,Jo({},Co()(this.props,"getDataFromCache"),{debounceFetchSuggestionsTime:300,initialData:n,componentsProps:i,fetchSuggestions:this.fetchSuggestions,additionalAnalyticsProps:{isEpicLink:!0},components:a,renderReadView:this.renderReadView,formatOptionLabel:this.formatOptionLabel,hasAutocomplete:!0}))}}Xo.displayName="EpicInlineEditView",Xo.displayName="EpicInlineEditView";var ec=Object(l.defineMessages)({placeholder:{id:"issue.epic.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select Epic"},recent:{id:"issue.epic.text-for-heading-in-recent-group",defaultMessage:"Recent epics"},allEpics:{id:"issue.epic.text-for-heading-in-all-epics-group",defaultMessage:"All epics"}}),tc=n("./src/packages/issue/epic-color/src/common/constants.js");const sc=e=>{const t=e.color?e.color.key:tc.c[e.colorKey];return t?tc.b[t]:null},nc=(e,{baseUrl:t})=>e&&((e,t)=>({content:e.name,value:e.key,isDone:e.done,color:sc(e),href:`${t}/browse/${e.key}`,fromCache:e.fromCache}))(e,t),ac=(e,t)=>e.filter(e=>!(t&&e.done)&&e.key&&e.name&&e.color&&e.color.key).slice(-5).reverse(),ic=(e,t=!1)=>{const s=tc.b[e.color.key];return{color:s,content:e.name,value:e.key,id:e.id,description:e.key,elemBefore:Zo(s),filterValues:[e.name,e.key],isDone:e.done,fromCache:t}},rc=e=>{if(!e)return null;const t=Object.keys(tc.b),s=t.find(t=>tc.b[t]===e.color)||t[0];return{name:e.content,key:e.value,done:e.isDone,id:e.id,color:{key:s},fromCache:e.fromCache}},oc=(e,t,s)=>{const n=(null==e?void 0:e.values)||[],a=((e,t)=>t.map(t=>{const s=e.find(e=>e.key===t.key);return s?(ko.a.update(t.key,s),s):t}))(n,t);return[{heading:s.formatMessage(ec.recent),items:a.map(e=>ic(e,!0))},{heading:s.formatMessage(ec.allEpics),items:n.map(e=>ic(e,!1))}]},cc=Object(a.a)((e,t,s)=>(n,a,i)=>{const o=vo()(),{markTimeToFinishTask:c}=Object(f.c)().markStartOfInteraction({key:S.a.EPIC_LINKS.TIME_TO_FETCH_INPUT_RESULTS_EPIC_PICKER_ENABLED,concurrentId:o,cancelExisting:!0}),l=So(),u=Object(r.isSmartEpicRankingEnabled)()?`${e}/rest/agile/1.0/epic/search?excludeDone=${a}&projectKey=${t}&maxResults=${l}&query=${n}&sessionId=${i}&shouldRank=true`:`${e}/rest/agile/1.0/epic/search?excludeDone=${a}&projectKey=${t}&maxResults=${l}&query=${n}`,d=Object(pt.a)(u).then(e=>(c({}),e)).catch(e=>{throw Object(f.c)().cancel({key:S.a.EPIC_LINKS.TIME_TO_FETCH_INPUT_RESULTS_EPIC_PICKER_ENABLED,concurrentId:o},!0),e});return Promise.all([d,ko.a.getAll()]).then(([e,t])=>{const n=ac(t,a);return oc(e,n,s)})});var lc=Object(H.a)((e,t)=>({fieldId:t.fieldId,transformFromStateValue:nc,transformToStateValue:rc,additionalProps:(e,s)=>({fetchSuggestions:cc(Object(R.g)(e),Object(R.I)(e),s),placeholder:s.formatMessage(ec.placeholder),noValueText:s.formatMessage(Us.noValue),allowEmptyValue:!0,getDataFromCache:e=>ko.a.getAll().then(t=>ac(t,e)).then(e=>oc(void 0,e,s)),showPinButton:Object(I.a)(t.area)}),saveField:({baseUrl:e,issueKey:s,fieldMetaKey:n,value:a})=>(t.createAnalyticsEvent&&(null==a?void 0:a.key)&&(Object(Ut.b)(t.createAnalyticsEvent({}),"epicPickerCache set",{isFromCache:a.fromCache}),ko.a.set(a.key,a)),Object(_.e)(Object(wo.f)(e,s),{body:JSON.stringify({fields:{[n]:a?a.key:null}})}).catch(e=>{throw t.createAnalyticsEvent&&(null==a?void 0:a.key)&&(Object(Ut.b)(t.createAnalyticsEvent({}),"epicPickerCache removed"),(null==a?void 0:a.key)&&ko.a.remove(a.key)),e}))}))(Xo),uc=Object(l.defineMessages)({placeholder:{id:"issue.multi-group-picker.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select groups"}});const dc=e=>e&&Bi(e),pc=e=>e&&{name:e.value},mc=e=>e?(e=>e.map(e=>dc(e)))(e):[],bc=e=>e?e.map(e=>pc(e)):[];var fc=Object(H.a)((e,t)=>({fieldId:t.fieldId,transformFromStateValue:mc,transformToStateValue:bc,additionalProps:(e,s)=>({fetchSuggestions:Wi(Object(R.g)(e)),placeholder:s.formatMessage(uc.placeholder),noValueText:s.formatMessage(Us.noValue),showPinButton:Object(I.a)(t.area)})}))(An),gc=Object(l.defineMessages)({placeholder:{id:"issue.group-picker.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select group"}}),hc=Object(H.a)((e,t)=>({fieldId:t.fieldId,transformFromStateValue:dc,transformToStateValue:pc,additionalProps:(e,s)=>({fetchSuggestions:Wi(Object(R.g)(e)),placeholder:s.formatMessage(gc.placeholder),noValueText:s.formatMessage(Us.noValue),allowEmptyValue:!Object(j.C)(t.fieldId)(e),hasAutocomplete:!0,showPinButton:Object(I.a)(t.area)})}))(ta),yc=n("./src/packages/servicedesk/knowledge-glance/src/ui/kb-glance/main.js");var Oc=Object(Ke.a)([Object(u.b)((e,t)=>({itemId:t.itemId,isVisible:Object(Zs.e)(e),baseUrl:Object(R.g)(e),issueKey:Object(R.B)(e),locale:Object(R.D)(e),issueId:Object(R.A)(e),projectKey:Object(R.I)(e),isAdmin:"admin"===Object(R.O)(e),showPinButton:Object(I.a)(t.area)}),{})])(({isVisible:e=!0,onOpenPanel:t,baseUrl:s,issueKey:n,locale:a,issueId:i,projectKey:r,isAdmin:o,itemId:l,showPinButton:u})=>e&&c.a.createElement(yc.a,{baseUrl:s,locale:a,issueKey:n,onOpenPanel:t,issueId:i,projectKey:r,isAdmin:o,itemId:l,showPinButton:u})),jc=n("./src/packages/servicedesk/knowledge-glance/src/ui/kb-glance-panel/main.js"),Ec=n("./src/packages/issue/issue-view/src/actions/share-as-comment-actions.js"),vc=n("./src/packages/issue/issue-view/src/selectors/comment-selector.js"),kc=n("./src/packages/issue/issue-view/src/selectors/context-panel-selector.js");function wc(){return(wc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const Sc=e=>{if(!Object(r.isGlanceAndTabSweetStateEnabled)())return c.a.createElement(jc.a,e);const[t]=Object(Wa.b)();return(c.a.createElement(jc.a,wc({},e,{isPanelOpen:void 0!==t})))};Sc.displayName="KbGlancePanelContainer";var Ic=Object(Ke.a)([Object(u.b)(e=>({isEditorOpen:Object(vc.w)(e),isPanelOpen:Object(kc.b)(e)}),{onShareAsComment:Ec.b})])(Sc),Cc=Object(l.defineMessages)({placeholder:{id:"issue.multi-select.text-for-dropdown-when-nothing-selected",defaultMessage:"Select {fieldName}"}});const Tc=e=>({value:e.id,content:e.value}),Pc=e=>e?e.map(Tc):[],_c=e=>e&&e.map(e=>({id:e.value,value:e.content})),xc=e=>e&&[{items:e.map(Tc)}]||[],Dc=Object(a.a)(e=>()=>Promise.resolve(e).then(xc));var Ac=Object(H.a)((e,t)=>({fieldId:t.fieldId,transformFromStateValue:Pc,transformToStateValue:_c,additionalProps:(e,s)=>({fetchSuggestions:Dc(Object(j.c)(t.fieldId)(e)),placeholder:s.formatMessage(Cc.placeholder,{fieldName:Object(j.m)(t.fieldId)(e)}),noValueText:s.formatMessage(Us.noValue),showPinButton:Object(I.a)(t.area)})}))(An),Mc=n("./src/packages/issue/fields/number/src/ui/main.js"),Lc=n("./src/packages/issue/fields/number/src/services/index.js");const Rc=Object(C.default)(g.d)(["& > div > div > div > div > div > div > div{width:100%;}"]),Nc=({fieldId:e,label:t,area:s})=>{const{formatMessage:n}=Object(mt.c)(),a=Object(We.f)(),i=Object(I.a)(s),[{value:r,fieldConfig:l}]=Object(Lc.a)({issueKey:a,fieldKey:e}),u=(null==l?void 0:l.title)||t,d=Object(o.useCallback)(()=>null===r||""===r?c.a.createElement(ge.b,null,n(Us.noValue)):r.toString(),[n,r]);return c.a.createElement(Rc,null,c.a.createElement(g.b,null,c.a.createElement(g.c,null,u),!0===i&&c.a.createElement(h.a,{fieldId:e,label:u})),c.a.createElement(g.g,null,c.a.createElement(Mc.default,{label:u,issueKey:a,fieldKey:e,noValueText:n(Us.noValue),readView:d(),isFitContainerWidthReadView:!0})))};Nc.displayName="View";var Uc=Object(o.memo)(Nc),Fc=n("./src/packages/issue/issue-view/src/issue-field/state/actions/field-save-actions.js"),Vc=n("./src/packages/issue/fields/number/src/ui/async.js");const Kc=Object(C.default)(g.g)(["& > div > div > div > div > div > div{width:100%;}"]),Bc=Object(X.f)(()=>n.e("async-issue-field-number").then(n.bind(null,"./src/packages/issue/fields/number/src/index.js")),{moduleId:"./src/packages/issue/fields/number/src/index.js"}),Wc=({issueKey:e,fieldId:t,label:s,noValueText:n,onUpdate:a,showPinButton:i})=>{const[{value:r}]=Object(Lc.a)({issueKey:e,fieldKey:t}),o=null===r||""===r?c.a.createElement(ge.b,null,n):c.a.createElement(Ma.a,null,r.toString());return c.a.createElement(g.d,null,c.a.createElement(g.b,null,c.a.createElement(g.c,null,s),!0===i&&c.a.createElement(h.a,{fieldId:t,label:s})),c.a.createElement(Kc,null,c.a.createElement(Vc.b,{packageName:"issue",fallback:o},c.a.createElement(Bc,{label:s,issueKey:e,fieldKey:t,readView:o,isFitContainerWidthReadView:!0,onUpdate:a}))))};Wc.displayName="NumberView";var Hc=Object(o.memo)(Wc),Gc=Object(H.a)((e,t)=>({fieldId:t.fieldId,additionalProps:(e,s)=>({issueKey:Object(R.B)(e),noValueText:s.formatMessage(Us.noValue),type:"number",showPinButton:Object(I.a)(t.area)}),additionalCallbacks:e=>({onUpdate:s=>e(Object(Fc.e)(t.fieldId,s))})}))(Hc),$c=Object(H.a)((e,t)=>({fieldId:t.fieldId,additionalProps:(e,s)=>({noValueText:s.formatMessage(Us.noValue),type:"number",showPinButton:Object(I.a)(t.area)})}))(Cr),qc=n("./node_modules/@atlaskit/icon/glyph/people-group.js"),zc=n.n(qc);var Yc=Object(l.defineMessages)({placeholder:{id:"issue.organizations.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select the Organizations"},organizationIconLabel:{id:"issue.organizations.organization-icon-label",defaultMessage:"Organization icon"}});const Qc=e=>({value:e.id,content:e.name,elemBefore:c.a.createElement(zc.a,{label:""})}),Jc=e=>e?e.map(Qc):[],Zc=e=>e&&e.map(e=>({id:e.value,name:e.content})),Xc=e=>[{items:e.map(Qc)}],el=Object(a.a)(e=>t=>e?Object(pt.a)(`${e}${t}`).then(Xc):Promise.resolve([])),tl=({baseUrl:e,issueKey:t,fieldMetaKey:s,value:n})=>((e,t,s,n)=>Object(_.e)(Object(wo.f)(e,t),{body:JSON.stringify({fields:{[s]:n.map(e=>Number(e.id))}})}))(e,t,s,n),sl=e=>e&&Array.isArray(e)?e.map(e=>e.id).join(","):e;var nl=Object(H.a)((e,t)=>({fieldId:t.fieldId,transformFromStateValue:Jc,transformToStateValue:Zc,saveField:tl,additionalProps:(e,s)=>({tagAppearance:"rounded",formatOptionLabel:e=>c.a.createElement(kn,null,c.a.createElement(zc.a,{label:s.formatMessage(Yc.organizationIconLabel)}),c.a.createElement(wn,null,e.content)),fetchSuggestions:el(Object(j.d)(t.fieldId)(e)),placeholder:s.formatMessage(Yc.placeholder),noValueText:s.formatMessage(Us.noValue),analyticsAttributeIdRetriever:sl,showPinButton:Object(I.a)(t.area)})}))(An),al=n("./src/packages/platform/utils/xsrf-token/src/index.js"),il=n("./src/packages/issue/issue-view/src/common/state/selectors/time-tracking-selector.js"),rl=n("./src/packages/issue/fields/components/error-flag/src/main.js"),ol=n("./src/packages/issue/fields/components/inline-edit/src/main.js"),cl=n("./src/packages/issue/issue-view/src/common/component/log-time-modal/modal/utils/index.js"),ll=n("./src/packages/issue/issue-view/src/common/util/time-string/seconds-to-time-string/index.js"),ul=n("./src/packages/issue/issue-view/src/common/util/time-string/is-time-string-valid/index.js"),dl=n("./src/packages/issue/issue-view/src/common/util/time-string/time-string-to-seconds/index.js"),pl=n("./src/packages/issue/issue-view/src/common/util/types/type-check/index.js");const ml=e=>t=>Object(ll.a)(e.daysPerWeek,e.hoursPerDay)(t||0),bl=e=>t=>{let s=t.trim();if(Object(pl.a)(s)){const{defaultUnit:t}=e;s=`${s}${Object(cl.a)(t)}`}return s},fl=e=>t=>{const s=bl(e)(t);return""===s||Object(ul.a)(s)},gl=e=>t=>{const s=bl(e)(t);return fl(e)(s)?Object(dl.a)(e.daysPerWeek,e.hoursPerDay)(s):0};var hl=Object(l.defineMessages)({errorTitle:{id:"issue-field-original-estimate.error-title",defaultMessage:"We couldn't set the original estimate value"},errorMessage:{id:"issue-field-original-estimate.error-message",defaultMessage:"Check your connection, then give it another try."}}),yl=n("./node_modules/query-string/index.js");const Ol=({issueKey:e,issueId:t,fieldId:s,timeTrackingValue:n,onSuccess:a,onFailure:i})=>{const[r]=Object(Ge.a)(e,s),o=(null==r?void 0:r.schema.system)||"",[{value:c,error:l},{saveValue:u,resetError:d}]=Object(ps.a)({fieldKey:s,issueKey:e,fieldType:o,initialValue:null,saveField:(e,s,a,i)=>(async({issueId:e,newValue:t,baseUrl:s,timeTrackingValue:n})=>{const a=n&&null!=n.remainingEstimateSeconds;return Object(_.d)(`${s}/secure/AjaxIssueAction.jspa?decorator=none`,{headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Object(yl.stringify)({issueId:e,timetracking_originalestimate:null!==t?`${t/60}m`:null,timetracking_targetsubfield:a?"timetracking_originalestimate":void 0,fieldsToForcePresent:"timetracking",singleFieldEdit:!0,skipScreenCheck:!0,atl_token:Object(al.a)()})})})({issueId:t,newValue:a,baseUrl:i,timeTrackingValue:n}),onSuccess:a,onFailure:i});return[{value:c,error:l,fieldConfig:r},{saveValue:u,resetError:d}]},jl=C.default.div(["width:","px;cursor:auto;"],8.5*T.e),El=({isInvalidInput:e,invalidTimeFormatMessage:t,placeholder:s,value:n,onChange:a})=>c.a.createElement(jl,null,c.a.createElement(Sr,{compact:!0,type:"text",value:n,placeholder:s,onChange:a,invalidMessage:e?t:void 0}));El.displayName="OriginalEstimateEdit";var vl=El,kl=n("./src/packages/issue/fields/original-estimate/src/ui/view/main.js");function wl(){return(wl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Sl(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}var Il=Object(o.memo)(e=>{var t;const{isMobile:s,config:n,editView:a,fieldId:i,issueId:r,issueKey:l,onUpdate:u,placeholder:d,readView:p,timeTrackingValue:m,invalidTimeFormatMessage:b,onCancel:f,onConfirm:g,onEdit:h,onEnter:y,onEscape:O}=e,j=Sl(e,["isMobile","config","editView","fieldId","issueId","issueKey","onUpdate","placeholder","readView","timeTrackingValue","invalidTimeFormatMessage","onCancel","onConfirm","onEdit","onEnter","onEscape"]),[{value:E,error:v,fieldConfig:k},{saveValue:w,resetError:S}]=Ol({fieldId:i,issueId:r&&Object(Kr.j)(r),issueKey:Object(Kr.l)(l),onSuccess:u,timeTrackingValue:m}),[I,C]=Object(o.useState)(!1),[T,P]=Object(o.useState)(null),_=Object(o.useMemo)(()=>ml(n)(T),[n,T]),[x,D]=Object(o.useState)(""),[A,M]=Object(o.useState)(!1);Object(o.useEffect)(()=>{D(_)},[_]),Object(o.useEffect)(()=>{P(E)},[E]),Object(o.useEffect)(()=>{v&&C(!0)},[v]);const L=null!==(t=null==k?void 0:k.isEditable)&&void 0!==t&&t,R=Object(o.useCallback)(e=>{if(x!==_)if(fl(n)(x)){const t=gl(n)(x);w(t,null,e),Object(Ut.h)(e),M(!1),C(!1)}else M(!0),C(!0);else C(!1)},[x,_,n,w]),N=Object(o.useCallback)(e=>{S(),M(!1),C(!1),D(_),P(E),Object(Ut.h)(e)},[E,S,_]),U=Object(o.useCallback)(e=>{N(e),null==f||f(e)},[f,N]),F=Object(o.useCallback)(e=>{R(e),null==g||g(e)},[R,g]),V=Object(o.useCallback)(e=>{C(!0),Object(Ut.h)(e),null==h||h(e)},[h]),K=Object(o.useCallback)(e=>{N(e),null==O||O(e)},[O,N]),B=Object(o.useCallback)(e=>{R(e),null==y||y(e)},[y,R]),W=Object(o.useCallback)(e=>{const{value:t}=e.target;M(!1),S(),D(t)},[S,D]),H=Object(o.useCallback)(()=>c.a.createElement(kl.a,{value:_}),[_]),G=Object(o.useCallback)(()=>c.a.createElement(vl,{isInvalidInput:A,invalidTimeFormatMessage:b,placeholder:d,value:x,onChange:W}),[x,b,A,W,d]);return c.a.createElement(c.a.Fragment,null,v&&(()=>v?c.a.createElement(rl.a,{error:v,title:hl.errorTitle,description:hl.errorMessage}):null)(),c.a.createElement(ol.a,wl({actionSubject:"originalEstimateInlineEdit",isEditable:L,isEditing:I,readView:H(),editView:L?G():null,onCancel:U,onConfirm:F,onEdit:V,onEscape:K,onEnter:B},j)))});const Cl=Object(C.default)(g.d)(["& > div > div > div > div > div > div > div{width:100%;}"]),Tl=({isEditable:e,isMobile:t,config:s,fieldId:n,invalidTimeFormatMessage:a,issueId:i,issueKey:r,label:o,placeholder:l,timeTrackingValue:u,showPinButton:d,onUpdate:p})=>c.a.createElement(Cl,null,c.a.createElement(g.b,null,c.a.createElement(g.c,null,o),!0===d&&c.a.createElement(h.a,{fieldId:n,label:o})),c.a.createElement(g.g,null,c.a.createElement(Il,{isEditable:e,isFitContainerWidthReadView:!0,isMobile:t,config:s,fieldId:n,invalidTimeFormatMessage:a,issueId:i,issueKey:r,label:o,placeholder:l,timeTrackingValue:u,onUpdate:p})));Tl.displayName="OriginalEstimate";var Pl=Object(o.memo)(Tl);const _l=Object(l.defineMessages)({placeholder:{id:"issue.time-estimate.placeholder-for-the-field",defaultMessage:"2w 4d 6h 45m"}});var xl=Object(H.a)((e,t)=>({fieldId:t.fieldId,isOptimistic:!1,additionalProps:(e,s)=>({config:Object(il.h)(e),placeholder:s.formatMessage(_l.placeholder),issueKey:Object(R.B)(e),issueId:Object(R.A)(e),timeTrackingValue:Object(j.h)("timetracking")(e),invalidTimeFormatMessage:c.a.createElement(l.FormattedMessage,{id:"issue.time-estimate.input-time-string-is-invalid",defaultMessage:"Your estimate must be in the format {format}.",values:{format:c.a.createElement("b",null,"2w 4d 6h 45m")}}),isEditable:Object(j.A)(t.fieldId)(e)&&!!Object(al.a)(),showPinButton:Object(I.a)(t.area)}),additionalCallbacks:e=>({onUpdate:s=>e(Object(Fc.e)(t.fieldId,s))})}))(Pl),Dl=n("./src/packages/issue/issue-view/src/common/state/selectors/field-visibility-selector.js"),Al=n("./src/packages/issue/issue-view/src/issue-field/state/selectors/epic-selector.js"),Ml=n("./node_modules/lodash/debounce.js"),Ll=n.n(Ml),Rl=n("./node_modules/@atlaskit/select/dist/esm/AsyncSelect.js"),Nl=Object(l.defineMessages)({menuHeader:{id:"issue.views.field.parent.edit.menuHeader",defaultMessage:"To set an epic as a parent, use the epic link instead."},noMatches:{id:"issue.views.field.parent.edit.noMatches",defaultMessage:"No Matches"},placeholder:{id:"issue.views.field.parent.edit.placeholder",defaultMessage:"Choose a parent to assign this issue to."}});const Ul=C.default.img(["margin-right:","px;"],T.e),Fl=C.default.div(["display:flex;flex-direction:row;overflow:hidden;"]),Vl=C.default.div(["overflow:hidden;text-overflow:ellipsis;white-space:nowrap;"]),Kl=C.default.div(["padding:","px ","px ","px;"],T.e,2*T.e,2*T.e),Bl=C.default.div(["color:",";"],_t.a.N90);function Wl(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Hl(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Wl(Object(s),!0).forEach((function(t){Gl(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Wl(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Gl(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const $l=Object(l.injectIntl)(e=>c.a.createElement(Po.z.MenuList,e,c.a.createElement(Kl,null,e.intl.formatMessage(Nl.menuHeader)),e.children)),ql=e=>{const t=e.data.data;if(t){const{issueType:s,summary:n,key:a}=t,{iconUrl:i}=s;return c.a.createElement(Po.z.Option,e,c.a.createElement(Fl,null,c.a.createElement(Ul,{src:i})," ",c.a.createElement(Vl,null,a," ",n)))}return null},zl=Object(l.injectIntl)(e=>{const{data:t}=e.data,s=t?t.label:c.a.createElement(Bl,null,e.intl.formatMessage(Nl.placeholder));return c.a.createElement(Po.z.SingleValue,e,s)});class Yl extends o.Component{constructor(...e){super(...e),this.onChange=e=>{const{hasEpicLinkFieldDependency:t,showField:s}=this.props.value,n=null!=e?e.data:null,a=Hl(Hl({data:n,value:n?n.key:null},{hasEpicLinkFieldDependency:t}),{showField:s});this.props.onChange(a),this.props.onConfirm(a)},this.debouncedLoadOptions=Ll()((e,t)=>{this.props.loadOptions(e).then(t,()=>{t([])})},300)}render(){const{value:e,portalElement:t,menuPlacement:s,intl:{formatMessage:n}}=this.props;return(c.a.createElement(Rl.a,{value:e,autoFocus:!0,defaultOptions:!0,components:{MenuList:$l,Option:ql,SingleValue:zl},menuPortalTarget:t,menuPlacement:s,onChange:this.onChange,loadOptions:this.debouncedLoadOptions,defaultMenuIsOpen:!0,isClearable:null!==e.data,noOptionsMessage:()=>n(Nl.noMatches),cacheOptions:!0}))}}Yl.displayName="EditableParentLinkField";var Ql=Object(l.injectIntl)(Yl),Jl=Object(l.defineMessages)({label:{id:"issue.views.field.parent.label",defaultMessage:"Parent link"}}),Zl=Object(l.defineMessages)({epicLinkExists:{id:"issue.views.field.parent.epic-link-exists-message.epicLinkExists",defaultMessage:"Cannot use parent link when epic link is set."}});const Xl=C.default.div(["color:",";"],_t.a.N90),eu=e=>{const{intl:{formatMessage:t}}=e;return(c.a.createElement(Xl,null,t(Zl.epicLinkExists)))};eu.displayName="EpicLinkExistsMessage";var tu=Object(l.injectIntl)(eu);const su=C.default.div(["display:flex;flex-direction:row;overflow:hidden;white-space:nowrap;"]),nu=C.default.a(["margin-right:","px;cursor:pointer;"],T.e),au=C.default.div(["overflow:hidden;text-overflow:ellipsis;"]),iu=C.default.img(["margin-right:","px;"],T.e),ru=e=>{const{showError:t,value:s,noValueText:n}=e;if(t)return c.a.createElement(tu,null);if(s.data){const{key:e,summary:t,issueType:{iconUrl:n},url:a}=s.data;return(c.a.createElement(su,null,c.a.createElement(iu,{src:n}),c.a.createElement(nu,{href:a,target:"_blank"},e),c.a.createElement(au,null,t)))}return(c.a.createElement(ge.b,null,n))};ru.displayName="ParentViewField";var ou=ru;class cu extends o.Component{constructor(...e){super(...e),this.shouldShowError=()=>this.props.hasEpic&&this.props.value.hasEpicLinkFieldDependency}renderEditableField(){const{onChange:e,onConfirm:t,fetchSuggestions:s,value:n,portalElement:a,menuPlacement:i}=this.props;return this.shouldShowError()?null:c.a.createElement("span",null,c.a.createElement(Ql,{value:n,loadOptions:s,portalElement:a,menuPlacement:i,onChange:e,onConfirm:t}))}render(){const{intl:{formatMessage:e},value:t,noValueText:s,isEditing:n,onConfirm:a,onCancel:i,onEditRequest:r,isMobile:o,isEditable:l,fieldId:u,showPinButton:d}=this.props,p=e(Jl.label);return c.a.createElement(g.d,null,c.a.createElement(g.b,null,c.a.createElement(g.c,null,p),!0===d&&c.a.createElement(h.a,{fieldId:u,label:p})),c.a.createElement(g.g,{isEditing:n},c.a.createElement(fe.a,{onEscape:i},c.a.createElement(q.a,{isLabelHidden:!0,label:p,readView:c.a.createElement(ou,{noValueText:s,value:t,showError:this.shouldShowError()}),editView:l?this.renderEditableField():null,disableEditViewFieldBase:!0,areActionButtonsHidden:!0,isEditing:n,onConfirm:a,onCancel:i,onEditRequested:r,isFitContainerWidthReadView:!o}))))}}cu.displayName="ParentField";var lu=Object(l.injectIntl)(cu);const uu=e=>e;function du(){return(du=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function pu(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const mu=Object(a.a)((e,t,s,n)=>a=>s?Object(_.d)(`${e}/rest/jpo/1.0/parent/suggest`,{body:JSON.stringify({query:a,projectId:t,issueTypeId:s,maxResults:100})}).then(t=>((e,t,s)=>{if(!e||!e.issues||e.issues.length<=0)return[];const{projects:n}=e,a=e.issueTypes;return e.issues.map(e=>{const i=`${n.filter(t=>t.id===e.projectId)[0].key}-${e.issueKey}`,{iconUrl:r}=a.filter(t=>+t.id===e.issueTypeId)[0];return{data:{key:i,summary:e.issueSummary,value:i,label:`${i} ${e.issueSummary}`,issueType:{id:e.issueTypeId,iconUrl:`${t}${r}`},url:`${t}/browse/${i}`},hasEpicLinkFieldDependency:s.hasEpicLinkFieldDependency,showField:s.showField,value:i}})})(t,e,n)):[]),bu=e=>{let{epic:t,isVisible:s,intl:n}=e,a=pu(e,["epic","isVisible","intl"]);if(!s)return null;const i=null!=t;return(c.a.createElement(lu,du({hasEpic:i},a)))};bu.displayName="ParentView";var fu=Object(H.a)((e,t)=>({fieldId:t.fieldId,transformFromStateValue:(e,t)=>((e,t)=>((e,t)=>({hasEpicLinkFieldDependency:e.hasEpicLinkFieldDependency,showField:e.showField,value:e.data&&e.data.key?e.data.key:null,data:e.data?{key:e.data.key,value:e.data.key,summary:e.data.summary,url:`${t}/browse/${e.data.key}`,label:`${e.data.key} ${e.data.summary}`,issueType:e.data.issueType?{iconUrl:`${t}${e.data.issueType.iconUrl}`,id:e.data.issueType.id}:e.data.issueType}:null}))(e,t.baseUrl))(e,t),transformToStateValue:uu,additionalProps:(e,s)=>({fetchSuggestions:mu(Object(R.g)(e),Object(K.D)(e),Object(Wn.e)(e),Object(j.n)(t.fieldId)(e)),noValueText:s.formatMessage(Us.noValue),epic:Object(Al.a)(e),isVisible:Object(Dl.d)(t.fieldId)(e),portalElement:Object(W.a)(t.fieldId)(e)?U()||document.body:void 0,showPinButton:Object(I.a)(t.area)}),saveField:({baseUrl:e,issueKey:t,fieldMetaKey:s,value:n})=>Object(_.e)(Object(wo.f)(e,t),{body:JSON.stringify({fields:{[s]:n&&n.data?n.data.key:null}})})}))(bu);const gu=e=>e.map(e=>({id:Object(Kr.a)(e.id),accountId:Object(Kr.a)(e.id),displayName:e.name,avatarUrls:{"24x24":e.avatarUrl}})),hu=e=>Array.isArray(e)?e.reduce((e,t)=>{const s=(e=>{if(!e||"object"!=typeof e||!e.accountId||!e.displayName)return null;let t="";return e.avatarUrls&&"object"==typeof e.avatarUrls&&(t=String(e.avatarUrls["24x24"])),{id:String(e.accountId),name:String(e.displayName),type:"user",fixed:!1,avatarUrl:t}})(t);return s?[...e,s]:e},[]):[];var yu=n("./src/packages/project-settings/people-field/src/index.js"),Ou=Object(l.defineMessages)({placeholderMulti:{id:"issue.people.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Choose people"},placeholderSingle:{id:"issue.people.text-for-edit-view-when-no-value-is-provided-single-mode",defaultMessage:"Choose a person"},singleValueValidationError:{id:"issue.people.single-value-validation-error",defaultMessage:"You can only add one person to this field"}});const ju=Object(a.a)(e=>e.map(e=>({value:e.id,content:e.name,elemBefore:c.a.createElement(wt.a,{size:"xsmall",src:e.avatarUrl})}))),Eu=e=>!e||!1!==e.isMulti;class vu extends o.Component{isValid(){const{configuration:e,value:t}=this.props;return!Eu(e)&&t.length>1}renderReadView(){const{value:e,intl:t,isMobile:s}=this.props;return(c.a.createElement(Ds,{value:ju(e),noValueText:t.formatMessage(Us.noValue),tagAppearance:"rounded",shouldHideLinks:s,isUserTag:!0}))}renderEditView(){const{onChange:e,value:t,baseUrl:s,intl:n,configuration:a}=this.props,i=Eu(a)||t.length>1;return c.a.createElement(yu.a,{baseUrl:s,isMulti:i,autoFocus:!0,isInvalid:this.isValid(),isInputDisabled:this.isValid(),invalidMessage:n.formatMessage(Ou.singleValueValidationError),placeholder:n.formatMessage(i?Ou.placeholderMulti:Ou.placeholderSingle),isDisabled:!1,appearance:"compact",onChange:e,value:t})}render(){const{label:e,isEditable:t,isEditing:s,isMobile:n,onConfirm:a,onCancel:i,onEditRequest:r,intl:o,value:l,configuration:u,fieldId:d,showPinButton:p}=this.props,m=!Eu(u)&&l.length<=1;return c.a.createElement(g.d,null,c.a.createElement(g.b,null,c.a.createElement(g.c,null,e),!0===p&&c.a.createElement(h.a,{fieldId:d,label:e})),c.a.createElement(g.g,{isEditing:s},c.a.createElement(fe.a,{onEscape:i},c.a.createElement(q.a,{isLabelHidden:!0,label:e,readView:this.renderReadView(),editView:t?this.renderEditView():null,disableEditViewFieldBase:!0,isEditing:s,shouldConfirmOnEnter:m,isValid:!s||this.isValid(),onConfirm:a,onCancel:i,areActionButtonsHidden:m,onEditRequested:r,isFitContainerWidthReadView:!n,editButtonLabel:o.formatMessage(G.a.editButtonLabel,{fieldName:e}),confirmButtonLabel:o.formatMessage(G.a.confirmButtonLabel,{fieldName:e}),cancelButtonLabel:o.formatMessage(G.a.cancelButtonLabel,{fieldName:e})}))))}}vu.displayName="People",vu.defaultProps={isEditable:!1,isEditing:!1,isMobile:!1,label:""};var ku=Object(H.a)((e,{fieldId:t,area:s})=>({fieldId:t,transformFromStateValue:hu,transformToStateValue:gu,additionalProps:e=>{const n=Object(j.q)(t)(e)||{};return{baseUrl:Object(Kr.b)(Object(R.g)(e)),configuration:n.configuration||{},showPinButton:Object(I.a)(s)}}}))(Object(l.injectIntl)(vu));const wu=e=>({content:e.name,value:e.id,iconUrl:e.iconUrl}),Su=e=>e&&wu(e),Iu=e=>e&&{name:e.content,id:e.value,iconUrl:e.iconUrl},Cu=e=>[{items:e.map(wu)}];function Tu(){return(Tu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const Pu=Object(l.defineMessages)({placeholder:{id:"issue.priority.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select priority"}}),_u=Object(a.a)(e=>()=>Promise.resolve(e).then(Cu)),xu=()=>{Object(f.c)().markTimeToFeedback({key:S.a.PRIORITY.TIME_TO_RENDER_SUGGESTIONS})},Du=()=>{Object(f.c)().markTimeToFinishTask({key:S.a.PRIORITY.TIME_TO_RENDER_SUGGESTIONS})},Au=e=>{const{isEditing:t,value:s,onChange:n,onEditRequest:a,onConfirm:i,onCancel:r}=e,l=Object(o.useRef)(!1);Object(o.useEffect)(()=>{Object(f.c)().markTimeToFinishTask({key:S.a.PRIORITY.TIME_TO_REFLECT_PRIORITY_UPDATE})},[s]),Object(o.useEffect)(()=>{t||Object(f.c)().markTimeToFinishTask({key:S.a.PRIORITY.TIME_TO_RENDER_READ_VIEW})},[t]);const u=Object(o.useCallback)(e=>{l.current=!0,Object(f.c)().markStartOfInteraction({key:S.a.PRIORITY.TIME_TO_REFLECT_PRIORITY_UPDATE,cancelExisting:!0}),n(e)},[n]),d=Object(o.useCallback)(()=>{Object(f.c)().markStartOfInteraction({key:S.a.PRIORITY.TIME_TO_RENDER_SUGGESTIONS,cancelExisting:!0}),a()},[a]),p=Object(o.useCallback)(()=>{l.current||Object(f.c)().markStartOfInteraction({key:S.a.PRIORITY.TIME_TO_RENDER_READ_VIEW,cancelExisting:!0}),l.current=!1,i()},[i]),m=Object(o.useCallback)(()=>{Object(f.c)().markStartOfInteraction({key:S.a.PRIORITY.TIME_TO_RENDER_READ_VIEW,cancelExisting:!0}),r()},[r]);return c.a.createElement(ta,Tu({},e,{onEditRequest:d,onConfirm:p,onCancel:m,onChange:u,onDataRequest:xu,onDataLoaded:Du,renderReadView:ua(s)}))};Au.displayName="PriorityView";var Mu=Object(H.a)((e,t)=>({fieldId:t.fieldId,transformFromStateValue:Su,transformToStateValue:Iu,additionalProps:(e,s)=>({fetchSuggestions:_u(Object(j.c)(t.fieldId)(e)),placeholder:s.formatMessage(Pu.placeholder),noValueText:s.formatMessage(Us.noValue),portalElement:Object(W.a)(t.fieldId)(e)?U()||document.body:void 0,showPinButton:Object(I.a)(t.area)})}))(Au),Lu=n("./node_modules/@atlaskit/select/dist/esm/RadioSelect.js");class Ru extends o.Component{render(){const{invalidMessage:e,options:t,placeholder:s,onChange:n,value:a,portalElement:i}=this.props;return(c.a.createElement(Ms.a,{validationState:null!=e?"error":null,validationMessage:e},c.a.createElement(Lu.a,{menuPortalTarget:i,options:t,placeholder:s,onChange:n,value:a,tabSelectsValue:!1,autoFocus:!0})))}}Ru.displayName="RadioFieldView",Ru.displayName="RadioFieldView",Ru.defaultProps={value:null,options:[],placeholder:null,invalidMessage:null};class Nu extends o.Component{constructor(...e){super(...e),this.emptyOption={label:this.props.intl.formatMessage(Us.noValue)}}getOptions(){const{options:e,value:t}=this.props;return t?[this.emptyOption,...e]:e}renderReadView(){const{value:e,noValueText:t}=this.props;return e?e.label:c.a.createElement(ge.b,null,t)}renderEditView(){return this.props.isEditable?c.a.createElement(Ru,{portalElement:this.props.portalElement,value:this.props.value,options:this.getOptions(),onChange:this.props.onChange,placeholder:this.props.placeholder,invalidMessage:this.props.invalidMessage}):null}render(){const{label:e,onCancel:t,isEditing:s,onConfirm:n,onEditRequest:a,isMobile:i,fieldId:r,showPinButton:o,intl:l}=this.props;return(c.a.createElement(g.d,null,c.a.createElement(g.b,null,c.a.createElement(g.c,null,e),!0===o&&c.a.createElement(h.a,{fieldId:r,label:e})),c.a.createElement(g.g,{isEditing:s},c.a.createElement(fe.a,{onEscape:t},c.a.createElement(q.a,{isLabelHidden:!0,label:e,readView:this.renderReadView(),editView:this.renderEditView(),disableEditViewFieldBase:!0,areActionButtonsHidden:!0,isEditing:s,onConfirm:n,onCancel:t,onEditRequested:a,isFitContainerWidthReadView:!i,editButtonLabel:l.formatMessage(G.a.editButtonLabel,{fieldName:e}),confirmButtonLabel:l.formatMessage(G.a.confirmButtonLabel,{fieldName:e}),cancelButtonLabel:l.formatMessage(G.a.cancelButtonLabel,{fieldName:e})})))))}}Nu.displayName="RadioInlineEditView",Nu.displayName="RadioInlineEditView",Nu.defaultProps={isEditable:!1,isEditing:!1,isMobile:!1,options:[],value:null,label:"",placeholder:null,noValueText:null,invalidMessage:null};var Uu=Object(l.injectIntl)(Nu);const Fu=e=>({label:e.value,value:e.id}),Vu=e=>e?Fu(e):null,Ku=e=>e&&void 0!==e.value?{id:e.value,value:e.label}:null,Bu=Object(l.defineMessages)({placeholder:{id:"issue.radio-select.text-for-dropdown-when-nothing-selected",defaultMessage:"Select {fieldName}"}}),Wu=ct()(e=>(e=>e&&e.map(Fu)||[])(e));var Hu=Object(H.a)((e,t)=>({fieldId:t.fieldId,transformFromStateValue:Vu,transformToStateValue:Ku,additionalProps:(e,s)=>({portalElement:Object(W.a)(t.fieldId)(e)?U()||document.body:void 0,options:Wu(Object(j.c)(t.fieldId)(e)),placeholder:s.formatMessage(Bu.placeholder,{fieldName:Object(j.m)(t.fieldId)(e)}),noValueText:s.formatMessage(Us.noValue),showPinButton:Object(I.a)(t.area)})}))(Uu);const Gu=({issueKey:e,fieldKey:t})=>{const[s]=Object(Ge.a)(e,t),[n]=Object(He.b)({fieldKey:t,issueKey:e});return[{value:n,fieldConfig:s},{}]},$u=C.default.div(["white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"]),qu=({value:e})=>c.a.createElement($u,null,e||"\xa0");qu.displayName="ReadOnlyFieldView";n("./node_modules/react-magnetic-di/lib/esm/index.js");var zu=({fieldKey:e,readView:t})=>{const s=Object(We.f)(),[{value:n}]=Gu({issueKey:s,fieldKey:e});return null!=t&&"function"==typeof t?Object(o.createElement)(t,{value:n}):c.a.createElement(qu,{value:n})};const Yu=Object(C.default)(g.d)(["align-items:center;"]),Qu=({fieldId:e,label:t,area:s})=>{const n=Object(We.f)(),{formatMessage:a}=Object(mt.c)(),[{fieldConfig:i}]=Gu({issueKey:n,fieldKey:e}),r=(null==i?void 0:i.title)||t,{noValue:l}=Us,u=Object(o.useCallback)(({value:e})=>null==e?c.a.createElement(ge.b,null,a(l)):c.a.createElement(qu,{value:e}),[a,l]),d=Object(I.a)(s);return c.a.createElement(Yu,null,c.a.createElement(g.b,null,c.a.createElement(g.c,null,r),!0===d&&c.a.createElement(h.a,{fieldId:e,label:r})),c.a.createElement(g.g,null,c.a.createElement(zu,{fieldKey:e,readView:u})))};Qu.displayName="ReadOnlyView";var Ju=Qu;const Zu=Object(a.a)(e=>({avatarUrl:"",name:e,id:null})),Xu=Object(a.a)(e=>[Zu(e)]);var ed=Object(a.a)((e,t,s)=>async n=>{if(!e)return[];return[...!s&&((e,t)=>!!e&&!!t&&t.toLowerCase().startsWith(e.toLowerCase()))(n,t)?[Zu(t)]:[],...(await Object(pt.a)(`${e}${n}`)).map(zt)]});const td=Object(l.defineMessages)({noReporter:{id:"issue.reporter.text-when-no-value-is-provided",defaultMessage:"Anonymous"}});var sd=Object(H.a)((e,t)=>({fieldId:t.fieldId,transformFromStateValue:zt,transformToStateValue:Yt,additionalProps:(e,s)=>{const n=Object(j.C)(t.fieldId)(e),a=s.formatMessage(td.noReporter);return{portalElement:Object(W.a)(t.fieldId)(e)?U()||document.body:void 0,fetchSuggestions:ed(Object(j.d)(t.fieldId)(e),a,n),emptyOption:n?void 0:Zu(a),initialOptions:n?void 0:Xu(a),fieldId:"reporter",showPinButton:Object(I.a)(t.area)}}}))(Nt),nd=n("./node_modules/lodash/range.js"),ad=n.n(nd),id=n("./node_modules/@atlaskit/icon/glyph/star.js"),rd=n.n(id),od=n("./node_modules/@atlaskit/icon/glyph/star-filled.js"),cd=n.n(od),ld=n("./src/packages/issue/issue-view/src/selectors/request-panel-metadata-selector.js");const ud=Object(j.e)("com.atlassian.servicedesk:sd-request-feedback-date"),dd=Object(V.createSelector)(ud,e=>e&&e.renderedValue),pd=C.default.div(["max-width:220px;padding-right:","px;margin-right:-","px;margin-bottom:","px;max-height:240px;overflow:auto;",";"],T.e,2*T.e,T.e,Object(ge.f)("&")),md=C.default.div(["height:20px;color:#6c798f;",";"],e=>!e.hasComment&&Object(C.css)(["margin:-","px 0;padding:10px 0;"],2*T.e));var bd=Object(Ke.a)([Object(u.b)(e=>({feedbackDate:dd(e),comment:Object(ld.a)(e)}),{})])(e=>{const{feedbackDate:t,comment:s}=e;return(c.a.createElement(c.a.Fragment,null,s&&c.a.createElement(pd,null,s),t&&c.a.createElement(md,{hasComment:!!s},t)))});T.e;const fd=C.default.div(["margin-top:","px;cursor:pointer;"],.5*T.e);class gd extends o.Component{constructor(...e){super(...e),this.state={shouldShowDetails:!1},this.onToggle=()=>this.setState({shouldShowDetails:!this.state.shouldShowDetails}),this.renderStar=e=>{const t=ad()(5).map(t=>t<e?c.a.createElement(cd.a,{label:"",key:t,primaryColor:_t.a.Y300}):c.a.createElement(rd.a,{label:"",key:t,primaryColor:_t.a.N60}));return(c.a.createElement(c.a.Fragment,null,t))}}render(){const{fieldName:e,rating:t,isVisible:s,fieldId:n,showPinButton:a}=this.props;return s&&c.a.createElement(g.d,null,c.a.createElement(g.b,null,c.a.createElement(g.c,null,e),!0===a&&c.a.createElement(h.a,{fieldId:n,label:e})),c.a.createElement(g.g,null,c.a.createElement(ka.a,{onClose:this.onToggle,content:c.a.createElement(bd,null),isOpen:this.state.shouldShowDetails},c.a.createElement(fd,{onClick:this.onToggle},this.renderStar(t)))))}}gd.displayName="RequestFeedback",gd.defaultProps={isVisible:!0};const hd=(e,t)=>{const s=Object(j.o)(t)(e);return s&&s.rating};var yd=Object(Ke.a)([Object(u.b)((e,t)=>({fieldId:t.fieldId,rating:hd(e,t.fieldId),fieldName:Object(j.m)(t.fieldId)(e),isVisible:Object(Dl.e)(t.fieldId)(e),showPinButton:Object(I.a)(t.area)}),{})])(gd);var Od=Object(l.defineMessages)({placeholder:{id:"issue.request-language.placeholder",defaultMessage:"Select Request language"},languageUnknown:{id:"issue.request-language.languageUnknown",defaultMessage:"Language unknown"}});const jd=e=>({content:e.displayName,value:e.languageCode}),Ed=Object(a.a)(e=>({displayName:e.formatMessage(Od.languageUnknown),languageCode:""})),vd=(e,t,s)=>jd(e||Ed(s)),kd=e=>({displayName:e.content,languageCode:e.value.toString()});function wd(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const Sd=Object(a.a)((e,t)=>()=>Promise.resolve(((e,t)=>[{items:[Ed(t),...e].map(jd)}])(e,t))),Id=({baseUrl:e,value:t},s)=>{const{languageCode:n}=t;return(async(e,t,s)=>{if(!t)throw new Error("Issue ID not available");return Object(_.e)(((e,t)=>`${e}/rest/servicedesk/lingo-integration/1/request-language/${t}`)(e,t),{body:JSON.stringify({languageCode:s})})})(e,Object(R.A)(s),n)},Cd=e=>e&&e.languageCode;var Td=Object(H.a)((e,t)=>({fieldId:t.fieldId,transformFromStateValue:vd,transformToStateValue:kd,saveField:Id,additionalProps:(e,s)=>({fetchSuggestions:Sd(Object(j.c)(t.fieldId)(e),s),shouldHide:!Object(Dl.f)(t.fieldId)(e),hasAutocomplete:!0,placeholder:s.formatMessage(Od.placeholder),analyticsAttributeIdRetriever:Cd,showPinButton:Object(I.a)(t.area)})}))(e=>{const{shouldHide:t}=e,s=wd(e,["shouldHide"]);return t?null:c.a.createElement(ta,s)}),Pd=Object(l.defineMessages)({placeholder:{id:"issue.request-participants.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select the Request Participants"}});const _d=e=>e?e.map(e=>({content:e.displayName,value:e.accountId,avatarUrl:e.avatarUrls["24x24"],elemBefore:c.a.createElement(wt.a,{size:"xsmall",src:e.avatarUrls["24x24"]})})):[],xd=e=>e&&e.map(e=>({displayName:e.content,id:Object(Kr.a)(e.value),accountId:Object(Kr.a)(e.value),avatarUrls:{"24x24":e.avatarUrl}})),Dd=e=>[{items:(e&&e.users||[]).map(e=>({content:e.displayName,value:e.accountId,avatarUrl:e.avatarUrl}))}],Ad=Object(a.a)(e=>t=>e?Object(pt.a)(`${e}${t}`).then(Dd):Promise.resolve([])),Md=e=>e&&Array.isArray(e)?e.map(e=>e.accountId).join(","):e;var Ld=Object(H.a)((e,t)=>({fieldId:t.fieldId,transformFromStateValue:_d,transformToStateValue:xd,additionalProps:(e,s)=>({fetchSuggestions:Ad(Object(j.d)(t.fieldId)(e)),placeholder:s.formatMessage(Pd.placeholder),noValueText:s.formatMessage(Us.noValue),tagAppearance:"rounded",formatOptionLabel:e=>c.a.createElement(kn,null,e.avatarUrl&&c.a.createElement(wt.a,{size:"small",src:e.avatarUrl}),c.a.createElement(wn,null,e.content)),analyticsAttributeIdRetriever:Md,showPinButton:Object(I.a)(t.area)})}))(An),Rd=Object(l.defineMessages)({placeholder:{id:"issue.service-entity.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select a service"}});const Nd=e=>encodeURIComponent((e=>e.startsWith("b:")?e:`b:${window.btoa(e)}`)(e)),Ud=(e,t,s)=>`${((e,t)=>Object(r.isMoveServiceRegistryToTopNavEnabled)()?`${e}/jira/servicedesk/services`:`${e}/jira/servicedesk/projects/${t}/services`)(e,t)}/${Nd(s)}`,Fd=(e,{baseUrl:t,projectKey:s})=>e?e.map(e=>({value:e.id,content:e.name,href:Ud(t,s,e.id)})):[],Vd=e=>e.map(e=>({id:String(e.value),name:e.content})),Kd=(e,t,s)=>e.services.map(e=>({value:e.id,content:e.name,href:Ud(t,s,e.id)}));var Bd=n("./src/packages/platform/observability/errors-handling/src/utils/fire-error-analytics.js");function Wd(){return(Wd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Hd(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const Gd=e=>{const{initFieldOptions:t,resolveServiceUrl:s,baseUrl:n,projectKey:a}=e,i=Hd(e,["initFieldOptions","resolveServiceUrl","baseUrl","projectKey"]),[r,l]=Object(o.useState)(!1),[u,d]=Object(o.useState)(null),[p,m]=Object(o.useState)([]),{createAnalyticsEvent:b}=Object(_o.a)();return Object(o.useEffect)(()=>{t()},[t]),Object(o.useEffect)(()=>{l(!0);const t=e.value.map(e=>e.value);if(!t||!t.length)return m([]),void l(!1);Object(pt.a)(s,{method:"POST",body:JSON.stringify({ids:t})}).then(e=>{l(!1),m(Kd(e,n,a))}).then(()=>{Object(Ut.b)(b({}),"jiraIssueView.serviceEntityFetch succeeded")},e=>{Object(Bd.a)({meta:{id:"serviceEntityFetch",packageName:"jiraIssueView"},error:e}),d(e),l(!1)})},[n,b,a,e.value,s]),c.a.createElement(An,Wd({},i,{value:p}))};Gd.displayName="ServiceEntityView";var $d=Gd;const qd=ct()((e,t,s,n)=>(a,i)=>{if(null==e)return Promise.resolve([]);let r=`${e}${encodeURIComponent(a)}`;return null!=i&&(r=`${r}&sessionId=${i}`),null!=t&&(r=`${r}&fieldEditSessionId=${t}`),Object(pt.a)(r).then(e=>((e,t,s)=>[{items:Kd(e,t,s)}])(e,s,n))},(e,t,s,n)=>`${e||""}_${t}_${s}_${n}`);var zd=Object(H.a)((e,t)=>({fieldId:t.fieldId,transformFromStateValue:Fd,transformToStateValue:Vd,additionalProps:(e,s)=>({baseUrl:Object(R.g)(e),projectKey:Object(R.I)(e),fetchSuggestions:qd(Object(j.d)(t.fieldId)(e),Object(j.f)(t.fieldId)(e),Object(R.g)(e),Object(R.I)(e)),placeholder:s.formatMessage(Rd.placeholder),noValueText:s.formatMessage(Us.noValue),canCreateNewItem:!1,allowEmptyValue:!0,resolveServiceUrl:Object(j.d)(t.fieldId)(e),showPinButton:Object(I.a)(t.area),additionalAnalyticsProps:{source:"service-selector"}})}))($d),Yd=Object(H.a)((e,t)=>({fieldId:t.fieldId,additionalProps:(e,s)=>({noValueText:s.formatMessage(Us.noValue),type:"text",showPinButton:Object(I.a)(t.area)})}))(Cr);const Qd=e=>({value:e.id,content:e.value,iconUrl:e.iconUrl}),Jd=e=>e&&Qd(e),Zd=e=>e&&{id:e.value,value:e.content,iconUrl:e.iconUrl},Xd=e=>e&&[{items:e.map(Qd)}]||[],ep=Object(l.defineMessages)({placeholder:{id:"issue.single-select.text-for-dropdown-when-nothing-selected",defaultMessage:"Select {fieldName}"}}),tp=ct()(e=>()=>Promise.resolve(e).then(Xd));var sp=Object(H.a)((e,t)=>({fieldId:t.fieldId,transformFromStateValue:Jd,transformToStateValue:Zd,additionalProps:(e,s)=>({fetchSuggestions:tp(Object(j.c)(t.fieldId)(e)),placeholder:s.formatMessage(ep.placeholder,{fieldName:Object(j.m)(t.fieldId)(e)}),noValueText:s.formatMessage(Us.noValue),allowEmptyValue:!0,hasAutocomplete:!0,portalElement:Object(W.a)(t.fieldId)(e)?U()||document.body:void 0,showPinButton:Object(I.a)(t.area)})}))(ta),np=n("./src/packages/servicedesk/sla-panel/src/index.js");const ap=Object(V.createSelector)(e=>e.sla,e=>e.issueUpdatedTimestamp),ip=C.default.div(["order:'-1';"]);class rp extends o.Component{render(){const{isVisible:e,baseUrl:t,issueKey:s,locale:n,issueUpdatedTimestamp:a}=this.props;return e&&c.a.createElement(ip,{id:"sla-panel"},c.a.createElement(np.a,{baseUrl:t,issueKey:s,locale:n,issueUpdatedTimestamp:a}))}}rp.displayName="SlaPanel",rp.defaultProps={isVisible:!0};var op=Object(Ke.a)([Object(u.b)(e=>({baseUrl:Object(R.g)(e),issueKey:Object(R.B)(e),locale:Object(R.D)(e),issueUpdatedTimestamp:ap(e),isVisible:Object(Zs.e)(e)}),{})])(rp),cp=n("./src/packages/cache/src/services/sprints/index.js"),lp=n("./src/packages/issue/issue-view/src/actions/issue-navigation-actions.js");const up=e=>Object(V.createSelector)(Zs.g,K.n,Object(j.A)(e),(e,t,s)=>e.canScheduleIssues&&t&&s),dp=(e,t)=>`${e}/secure/GHGoToBoard.jspa?sprintId=${t}`;var pp=n("./src/packages/issue/issue-view/src/common/service/issue/issue-view-mode.js");const mp=({option:e})=>c.a.createElement(qo.e,null,null!=e.elemBefore?e.elemBefore:null,c.a.createElement(Ho,null,c.a.createElement(Go,null,e.label),null!=e.description?c.a.createElement($o,null,e.description):null));mp.displayName="RichOptionView";var bp=n("./node_modules/@atlaskit/button--current/dist/es2019/components/Button.js");const fp=C.default.div(["margin-left:","px;"],T.e),gp=C.default.span(["padding:","px;"],T.e/2),hp=C.default.div(["margin-top:","px;display:flex;justify-content:space-between;max-width:300px;"],T.e),yp=C.default.span(["font-weight:500;"]),Op=`\n    margin-right: ${3*T.e}px;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n`,jp=C.default.a(["",";"],Op),Ep=C.default.span(["",";"],Op),vp=C.default.div(["white-space:nowrap;"]);class kp extends o.Component{constructor(...e){super(...e),this.state={isDialogOpen:!1},this.handleButtonClick=e=>{this.setState({isDialogOpen:!this.state.isDialogOpen}),e.stopPropagation()},this.handleDialogClose=e=>{this.setState({isDialogOpen:e.isOpen})},this.handleDialogClick=e=>{e.stopPropagation()},this.handleDialogMouseDown=e=>{e.preventDefault(),e.stopPropagation()},this.renderInlineDialogContent=()=>c.a.createElement("div",null,c.a.createElement(yp,null,this.props.closedSprintsLabel),this.props.closedSprints.map(e=>c.a.createElement(hp,{key:e.name},this.props.shouldHideLinks?c.a.createElement(Ep,null,e.name):c.a.createElement(jp,{href:e.href},e.name),c.a.createElement(vp,null,e.endDate))))}render(){return c.a.createElement(fp,{onClick:this.handleDialogClick,onMouseDown:this.handleDialogMouseDown},c.a.createElement(ka.a,{content:this.renderInlineDialogContent(),isOpen:this.state.isDialogOpen,onClose:this.handleDialogClose,placement:"bottom"},c.a.createElement(bp.a,{onClick:this.handleButtonClick,spacing:"none",isSelected:this.state.isDialogOpen},c.a.createElement(gp,null,`+${this.props.closedSprints.length}`))))}}kp.displayName="ClosedSprintsView",kp.defaultProps={shouldHideLinks:!1,closedSprints:[],closedSprintsLabel:null};const wp=C.default.div(["display:flex;align-items:center;width:100%;"]),Sp=C.default.div(["white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"]);function Ip(){return(Ip=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Cp(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}class Tp extends o.Component{constructor(...e){super(...e),this.state={data:[],loading:!1,error:!1},this.componentDidMount=()=>{Object(r.isCacheInPickersEnabled)()&&this.getDataFromCache()},this.getDataFromCache=()=>{var e,t;null===(e=(t=this.props).getDataFromCache)||void 0===e||e.call(t).then(e=>{this.setState({data:e,loading:!1})})},this.onSprintClick=e=>{const{rapidViewId:t,value:s,onSprintClicked:n}=this.props;void 0!==t&&s&&n(s.value),e.stopPropagation()},this.onEditRequest=()=>{Object(f.c)().cancel({key:S.a.SPRINT.TIME_TO_REFLECT_INPUT_RESULT},!0),Object(f.c)().markStartOfInteraction({key:S.a.SPRINT.TIME_TO_RENDER_INITIAL_SUGGESTIONS,cancelExisting:!0}),this.props.onEditRequest()},this.onChange=(e,t)=>{t&&("select-option"===t.action?Object(f.c)().markStartOfInteraction({key:S.a.SPRINT.TIME_TO_REFLECT_SELECTED_SPRINT}):"clear"===t.action&&Object(f.c)().markStartOfInteraction({key:S.a.SPRINT.TIME_TO_REFLECT_REMOVED_SPRINT})),this.props.onChange(e)},this.onConfirm=()=>{Object(f.c)().markStartOfInteraction({key:S.a.SPRINT.TIME_TO_RENDER_READ_VIEW,cancelExisting:!0}),this.props.onConfirm()},this.onCancel=()=>{Object(f.c)().markStartOfInteraction({key:S.a.SPRINT.TIME_TO_RENDER_READ_VIEW,cancelExisting:!0}),this.props.onCancel()},this.onDataRequest=({isInitial:e})=>{e||Object(f.c)().markStartOfInteraction({key:S.a.SPRINT.TIME_TO_REFLECT_INPUT_RESULT,cancelExisting:!0})},this.onDataLoaded=({isInitial:e}={})=>{e?Object(f.c)().markTimeToFinishTask({key:S.a.SPRINT.TIME_TO_RENDER_INITIAL_SUGGESTIONS}):Object(f.c)().markTimeToFinishTask({key:S.a.SPRINT.TIME_TO_REFLECT_INPUT_RESULT})},this.renderSprintContent=()=>{const{baseUrl:e,rapidViewId:t,value:s}=this.props;return void 0!==(Object(pp.a)()&&t)?s&&s.content:c.a.createElement("a",{href:null==t&&s?dp(e,s.value):void 0,onClick:this.onSprintClick},s&&s.content)},this.renderReadView=()=>{const{value:e,noValueText:t,closedSprints:s,closedSprintsLabel:n,isMobile:a}=this.props;return(c.a.createElement(wp,null,c.a.createElement(Sp,null,e?this.renderSprintContent():c.a.createElement(ge.b,null,t)),s.length>0&&c.a.createElement(kp,{closedSprints:s,closedSprintsLabel:n,shouldHideLinks:a})))},this.formatOptionLabel=(e,{context:t})=>"menu"===t?c.a.createElement(mp,{option:e}):e.label,this.fetchSuggestions=e=>this.props.fetchSuggestions(e).then(e=>(this.setState({data:e}),e))}componentDidUpdate(e){const{isEditing:t,value:s}=this.props;!e.isEditing&&t&&Object(f.c)().markTimeToFeedback({key:S.a.SPRINT.TIME_TO_RENDER_INITIAL_SUGGESTIONS}),e.isEditing&&!t&&(e.value!==s?s?Object(f.c)().markTimeToFinishTask({key:S.a.SPRINT.TIME_TO_REFLECT_SELECTED_SPRINT}):Object(f.c)().markTimeToFinishTask({key:S.a.SPRINT.TIME_TO_REFLECT_REMOVED_SPRINT}):Object(f.c)().markTimeToFinishTask({key:S.a.SPRINT.TIME_TO_RENDER_READ_VIEW}))}render(){const e=this.props,{baseUrl:t,closedSprints:s,closedSprintsLabel:n,rapidViewId:a,onSprintClicked:i}=e,o=Cp(e,["baseUrl","closedSprints","closedSprintsLabel","rapidViewId","onSprintClicked"]);if(Object(r.isCacheInPickersEnabled)()){const{data:e,loading:t,error:s}=this.state,n={data:e,loading:t,error:s};return c.a.createElement(ta,Ip({},o,{fetchSuggestions:this.fetchSuggestions,debounceFetchSuggestionsTime:300,initialData:n,onEditRequest:this.onEditRequest,onChange:this.onChange,onConfirm:this.onConfirm,onCancel:this.onCancel,onDataRequest:this.onDataRequest,onDataLoaded:this.onDataLoaded,renderReadView:this.renderReadView,formatOptionLabel:this.formatOptionLabel,hasAutocomplete:!0,optionValuesSafeForAnalytics:!0}))}return(c.a.createElement(ta,Ip({},o,{onEditRequest:this.onEditRequest,onChange:this.onChange,onConfirm:this.onConfirm,onCancel:this.onCancel,onDataRequest:this.onDataRequest,onDataLoaded:this.onDataLoaded,renderReadView:this.renderReadView,formatOptionLabel:this.formatOptionLabel,hasAutocomplete:!0,optionValuesSafeForAnalytics:!0})))}}Tp.displayName="SprintInlineEditView",Tp.displayName="SprintInlineEditView",Tp.defaultProps={closedSprints:[],closedSprintsLabel:null};var Pp=Object(l.defineMessages)({placeholder:{id:"issue.sprint.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select Sprint"},activeSprints:{id:"issue.sprint.active-heading",defaultMessage:"Active"},recentSprints:{id:"issue.sprint.recent-heading",defaultMessage:"Recent sprints"},futureSprints:{id:"issue.sprint.future-heading",defaultMessage:"Future"},closedSprintsLabel:{id:"issue.sprint.text-for-closed-sprints-inline-dialog",defaultMessage:"{count} completed {count, plural, one {sprint} other {sprints}}"}});const _p=e=>(e?e.find(e=>e.state&&"active"===e.state.toLowerCase()):null)||null;function xp(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Dp(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?xp(Object(s),!0).forEach((function(t){Ap(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):xp(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Ap(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Mp=e=>({content:e.name,value:e.id,fromCache:e.fromCache||!1}),Lp=e=>{const t=_p(e),s=(e=>(e?e.find(e=>e.state&&"future"===e.state.toLowerCase()):null)||null)(e);return t&&Mp(t)||s&&Mp(s)},Rp=e=>t=>{if(!t)return e;const s={name:t.content,id:t.value,state:"active",fromCache:t.fromCache||!1};return e.concat(s)},Np=e=>({content:e.name,value:e.id,description:e.boardName,id:e.id,fromCache:e.fromCache||!1}),Up=(e,t=[],s)=>{const n=e.suggestions||[],a=e.allMatches||[],i=n.concat(a),r=i.filter(e=>"ACTIVE"===e.stateKey).map(Np),o=i.filter(e=>"FUTURE"===e.stateKey).map(Np),c=(e=>e.slice(-5).reverse())(((e,t)=>t.map(t=>{const s=e.find(e=>e.id===t.id);return s?(cp.a.update(`${t.id}`,s),Dp(Dp({},s),{},{fromCache:!0})):Dp(Dp({},t),{},{fromCache:!0})}))(i,t)).map(Np);return[{heading:s.formatMessage(Pp.recentSprints),items:c},{heading:s.formatMessage(Pp.activeSprints),items:r},{heading:s.formatMessage(Pp.futureSprints),items:o}]},Fp=Object(a.a)((e,t,s)=>({id:s.id,name:s.name,href:dp(t,s.id),endDate:e.formatDate(s.endDate,{day:"2-digit",month:"short",year:"numeric"})})),Vp=(e,t)=>{const s=e.length;return s>0?t.formatMessage(Pp.closedSprintsLabel,{count:s}):null},Kp=Object(a.a)((e,t)=>(s,n)=>{let a=`${t}/rest/greenhopper/1.0/sprint/picker?query=${s}&maxResults=10&maxActiveSprints=5`;if(Object(r.isSmartSprintRankingEnabled)()){a=`url&sessionId=${""!==n&&null!=n?n:"default-session-id"}&shouldRank=true`}if(Object(r.isCacheInPickersEnabled)()){const t=Object(pt.a)(a);return Promise.all([t,cp.a.getAll()]).then(([t,s])=>Up(t,s,e))}return Object(pt.a)(a).then(t=>((e,t)=>{const s=e.suggestions||[],n=e.allMatches||[],a=s.concat(n),i=a.filter(e=>"ACTIVE"===e.stateKey).map(Np),r=a.filter(e=>"FUTURE"===e.stateKey).map(Np);return[{heading:t.formatMessage(Pp.activeSprints),items:i},{heading:t.formatMessage(Pp.futureSprints),items:r}]})(t,e))}),Bp=Object(a.a)((e,t,s)=>((e,t,s)=>e.map(e=>Fp(s,t,e)))(e,t,s));var Wp=Object(H.a)((t,s)=>{const n=(e=>Object(V.createSelector)(Object(j.q)(e),e=>e&&e.value?e.value.filter(e=>"closed"===e.state||"CLOSED"===e.state):[]))(s.fieldId)(t);return{fieldId:s.fieldId,transformFromStateValue:Lp,transformToStateValue:Rp(n),additionalProps:(e,t)=>({fetchSuggestions:Kp(t,Object(R.g)(e)),closedSprints:Bp(n,Object(R.g)(e),t),closedSprintsLabel:Vp(n,t),placeholder:t.formatMessage(Pp.placeholder),noValueText:t.formatMessage(Us.noValue),allowEmptyValue:!0,rapidViewId:Object(R.J)(e),baseUrl:Object(R.g)(e),isEditable:up(s.fieldId)(e),showPinButton:Object(I.a)(s.area),getDataFromCache:Object(r.isCacheInPickersEnabled)()?()=>cp.a.getAll().then(e=>Up({},e,t)):void 0}),additionalCallbacks:e=>({onSprintClicked:t=>e(Object(lp.e)(t))}),saveField:(...t)=>(({baseUrl:t,issueKey:s,fieldMetaKey:n,value:a},i,o)=>{const c=_p(a);return Object(r.isCacheInPickersEnabled)()?(a.forEach(e=>{try{o.createAnalyticsEvent&&Object(Ut.b)(o.createAnalyticsEvent({}),"sprintPickerCache set",{isFromCache:e.fromCache}),e.id&&cp.a.set(`${e.id}`,e)}catch(t){Js.a.safeError("issue-view.sprints.cache.set",t.message)}}),Object(_.e)(Object(wo.f)(t,s),{body:JSON.stringify({fields:{[n]:c?c.id:null}})}).catch(t=>{throw a.forEach(t=>{try{o.createAnalyticsEvent&&Object(Ut.b)(o.createAnalyticsEvent({}),"sprintPickerCache removed"),t.id&&cp.a.remove(`${t.id}`)}catch(e){Js.a.safeError("issue-view.sprints.cache.remove",e.message)}}),t})):Object(_.e)(Object(wo.f)(t,s),{body:JSON.stringify({fields:{[n]:c?c.id:null}})})})(...t,s)}})(Tp),Hp=n("./node_modules/lodash/get.js"),Gp=n.n(Hp),$p=Object(l.defineMessages)({errorTitle:{id:"issue-field-classic-story-point.error-title",defaultMessage:"We couldn't set the story point value"},errorMessage:{id:"issue-field-classic-story-point.error-message",defaultMessage:"Check your connection, then give it another try."},negativeNumbersNotAllowed:{id:"issue-field-classic-story-point.negative-numbers-not-allowed",defaultMessage:"Time for some positivity. Story point estimates can't be negative."}});const qp=({issueKey:e,issueId:t,fieldKey:s,onSuccess:n})=>{const[a]=Object(Ge.a)(e,s),i=Gp()(a,"schema.type","number"),[{value:r,error:o},{saveValue:c,resetError:l}]=Object(ps.a)({fieldKey:s,issueKey:e,fieldType:i,initialValue:null,saveField:(e,n,a,i)=>(async(e,t,s,n)=>null!==s&&s<0?Promise.reject(new Error($p.negativeNumbersNotAllowed.id)):Object(_.d)(`${n}/secure/AjaxIssueAction.jspa?decorator=none`,{headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Object(yl.stringify)({[t]:s,issueId:e,skipScreenCheck:!0,atl_token:Object(al.a)(),singleFieldEdit:!0})}))(Object(Kr.l)(t.toString()),s,a,i),onSuccess:n});return[{value:r,error:o,fieldConfig:a},{saveValue:c,resetError:l}]},zp=C.default.div(["width:","px;cursor:auto;"],8.5*T.e);function Yp(){return(Yp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Qp(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}var Jp=Object(o.memo)(e=>{const{isInvalid:t=!1,type:s,defaultValue:n}=e,a=Qp(e,["isInvalid","type","defaultValue"]),i=null===n?"":n;return c.a.createElement(zp,null,c.a.createElement(kr.a,Yp({appearance:"subtle",autoFocus:!0,compact:!0,isLabelHidden:!0,isInvalid:t,shouldFitContainer:!0,type:s,value:i},a)))});const Zp=C.default.div(["cursor:pointer;&:hover > span{color:",";background-color:",";}"],_t.a.N800,_t.a.N90);var Xp=({isEditable:e,noValueText:t,value:s})=>{const n={min:-1*Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER};if(null===s)return c.a.createElement(ge.b,null,t);const a=c.a.createElement(Ma.a,n,s);return e?c.a.createElement(Zp,null,a):a};function em(){return(em=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function tm(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}var sm=Object(o.memo)(e=>{const{fieldKey:t,issueKey:s,issueId:n,onCancel:a,onEdit:i,onEscape:r,onConfirm:l,onEnter:u,onUpdate:d,readView:p,editView:m,noValueText:b}=e,f=tm(e,["fieldKey","issueKey","issueId","onCancel","onEdit","onEscape","onConfirm","onEnter","onUpdate","readView","editView","noValueText"]),[{value:g,error:h,fieldConfig:y},{saveValue:O,resetError:j}]=qp({issueKey:Object(Kr.l)(s),issueId:n&&Object(Kr.j)(n),fieldKey:t,onSuccess:d}),E=Gp()(y,"schema.type","number"),[v,k]=Object(o.useState)(!1),[w,S]=Object(o.useState)(g),I=!!y&&y.isEditable;Object(o.useEffect)(()=>{h&&k(!0)},[h]);const C=Object(o.useCallback)(e=>{w!==g&&O(w,null,e),k(!1),Object(Ut.h)(e)},[O,w,g]),T=Object(o.useCallback)(e=>{j(),k(!1),S(g),Object(Ut.h)(e)},[j,g]),P=Object(o.useCallback)(e=>{T(e),a&&a(e)},[a,T]),_=Object(o.useCallback)(e=>{C(e),l&&l(e)},[l,C]),x=Object(o.useCallback)(e=>{k(!0),Object(Ut.h)(e),i&&i(e)},[i]),D=Object(o.useCallback)(e=>{T(e),r&&r(e)},[r,T]),A=Object(o.useCallback)(e=>{C(e),u&&u(e)},[u,C]),M=Object(o.useCallback)(e=>{j();const t=""===e.target.value?null:Number(e.target.value);S(t)},[j,S]);return c.a.createElement(c.a.Fragment,null,h&&(()=>{if(!h)return null;const e=h.message===$p.negativeNumbersNotAllowed.id?$p.negativeNumbersNotAllowed:$p.errorMessage;return(c.a.createElement(rl.a,{error:h,title:$p.errorTitle,description:e}))})(),c.a.createElement(ol.a,em({actionSubject:"numberInlineEdit",isEditable:I,isEditing:v,readView:(()=>void 0!==p?p:c.a.createElement(Xp,{isEditable:I,value:g,noValueText:b}))(),editView:I?(()=>void 0!==m?m:c.a.createElement(Jp,{defaultValue:w,onChange:M,type:E,isInvalid:!!h}))():null,onCancel:P,onConfirm:_,onEdit:x,onEscape:D,onEnter:A},f)))});const nm=Object(C.default)(g.d)(["& > div > div > div > div > div > div > div{width:100%;}"]),am=({issueKey:e,fieldId:t,showPinButton:s,issueId:n,label:a,noValueText:i,onUpdate:r})=>c.a.createElement(nm,null,c.a.createElement(g.b,null,c.a.createElement(g.c,null,a),!0===s&&c.a.createElement(h.a,{fieldId:t,label:a})),c.a.createElement(g.g,null,c.a.createElement(sm,{label:a,issueKey:e,issueId:n,fieldKey:t,noValueText:i,isFitContainerWidthReadView:!0,onUpdate:r})));am.displayName="View";Object(o.memo)(am);var im=Object(H.a)((e,t)=>({fieldId:t.fieldId,additionalProps:(e,s)=>({issueKey:Object(R.B)(e),issueId:Object(R.A)(e),noValueText:s.formatMessage(Us.noValue),isEditable:Object(j.A)(t.fieldId)(e)&&"PREVIEW"!==Object(K.x)(e)&&!!Object(al.a)(),showPinButton:Object(I.a)(t.area)}),additionalCallbacks:e=>({onUpdate:s=>e(Object(Fc.e)(t.fieldId,s))})}))(am),rm=n("./node_modules/lodash/isEqual.js"),om=n.n(rm),cm=Object(l.defineMessages)({errorTitle:{id:"issue-field-team.error-title",defaultMessage:"We couldn't set the team value"},errorMessage:{id:"issue-field-team.error-message",defaultMessage:"Check your connection, then give it another try."}});const lm=({issueKey:e,fieldKey:t,onSuccess:s})=>{const[n]=Object(Ge.a)(e,t),a=Gp()(n,"schema.type","array"),[{value:i,error:r},{saveValue:o,resetError:c}]=Object(ps.a)({fieldKey:t,issueKey:e,fieldType:a,initialValue:null,onSuccess:s});return[{value:i,error:r,fieldConfig:n},{saveValue:o,resetError:c}]};var um=n("./node_modules/@atlaskit/user-picker/dist/es2019/components/smart-user-picker/components/index.js");const dm=e=>{const{fieldId:t,siteId:s,defaultValue:n,isMulti:a=!0,isClearable:i=!0,debounceTime:r=300,onChange:o,placeholder:l}=e;return(c.a.createElement(um.a,{width:"100%",autoFocus:!0,appearance:"compact",debounceTime:r,fieldId:t,includeGroups:!1,includeTeams:!0,includeUsers:!1,isClearable:i,isMulti:a,productKey:"jira",siteId:s,value:n,onChange:o,placeholder:l}))};dm.displayName="TeamPickerEdit";var pm=dm,mm=n("./node_modules/@atlaskit/theme/dist/es2019/constants.js");const bm=C.default.div(["display:flex;font-size:","px;height:","em;line-height:",";max-width:100%;padding:0px;"],Object(mm.f)(),2.5*Object(mm.h)()/Object(mm.f)(),2.5*Object(mm.h)()/Object(mm.f)()),fm=C.default.div(["padding:0px;"]);var gm=e=>{const{defaultValue:t,placeholder:s}=e;return kt()(t)?c.a.createElement(bm,null,s):c.a.createElement(fm,null,c.a.createElement(Cs.a,null,(e=>e.map(e=>c.a.createElement(Is.a,{appearance:"rounded",text:e.name,key:e.id,elemBefore:c.a.createElement(wt.a,{appearance:"circle",size:"xsmall",src:e.avatarUrl})})))(t)))};function hm(){return(hm=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function ym(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}var Om=e=>{var t,s;const{fieldKey:n,issueKey:a,issueId:i,onCancel:r,onEdit:l,onEscape:u,onConfirm:d,onEnter:p,onUpdate:m,readView:b,editView:f,noValueText:g="DEFAULT PLACEHOLDER MESSAGE",useTeamField:h=lm}=e,y=ym(e,["fieldKey","issueKey","issueId","onCancel","onEdit","onEscape","onConfirm","onEnter","onUpdate","readView","editView","noValueText","useTeamField"]),O=Object($e.m)().cloudId,[{value:j,error:E,fieldConfig:v},{saveValue:k,resetError:w}]=h({issueKey:Object(Kr.l)(a),fieldKey:n,onSuccess:m}),[S,I]=Object(o.useState)(!1),[C,T]=Object(o.useState)(j),P=null!==(t=null==v?void 0:v.isEditable)&&void 0!==t&&t,_=(null!==(s=Gp()(v,"schema.configuration"))&&void 0!==s?s:[]).reduce((e,t)=>(e[t.key]=t.value,e),{}),x="false"!==(null==_?void 0:_.isMulti);Object(o.useEffect)(()=>{E&&I(!0)},[E]);const D=Object(o.useCallback)(e=>{om()(C,j)||k(C,null,e),I(!1),Object(Ut.h)(e)},[k,C,j]),A=Object(o.useCallback)(e=>{w(),I(!1),T(j),Object(Ut.h)(e)},[w,j]),M=Object(o.useCallback)(e=>{A(e),r&&r(e)},[A,r]),L=Object(o.useCallback)(e=>{D(e),d&&d(e)},[d,D]),R=Object(o.useCallback)(e=>{I(!0),Object(Ut.h)(e),l&&l(e)},[l]),N=Object(o.useCallback)(e=>{A(e),u&&u(e)},[A,u]),U=Object(o.useCallback)(e=>{D(e),p&&p(e)},[p,D]),F=Object(o.useCallback)(e=>{w(),T(Array.isArray(e)?e:[e])},[w,T]);return c.a.createElement(c.a.Fragment,null,E&&(()=>E?c.a.createElement(rl.a,{error:E,title:cm.errorTitle,description:cm.errorMessage}):null)(),c.a.createElement(ol.a,hm({areActionButtonsHidden:!x,shouldConfirmOnEnter:!x,actionSubject:"teamInlineEdit",isEditable:P,isEditing:S,readView:(()=>void 0!==b?b:c.a.createElement(gm,{defaultValue:C,placeholder:g}))(),editView:P?(()=>void 0!==f?f:c.a.createElement(pm,{defaultValue:C,fieldId:n,siteId:O,onChange:F,placeholder:g,isMulti:x}))():null,onCancel:M,onConfirm:L,onEdit:R,onEscape:N,onEnter:U},y)))};const jm=e=>{const{label:t,issueKey:s,fieldId:n,issueId:a,onUpdate:i,noValueText:r,showPinButton:o}=e;return(c.a.createElement(g.d,null,c.a.createElement(g.b,null,c.a.createElement(g.c,null,t),!0===o&&c.a.createElement(h.a,{fieldId:n,label:t})),c.a.createElement(g.g,null,c.a.createElement(Om,{label:t,issueKey:s,issueId:a,fieldKey:n,onUpdate:i,noValueText:r,isFitContainerWidthReadView:!0}))))};jm.displayName="View";Object(o.memo)(jm);var Em=Object(H.a)((e,t)=>({fieldId:t.fieldId,additionalProps:(e,s)=>({issueKey:Object(R.B)(e),issueId:Object(R.A)(e),noValueText:s.formatMessage(Us.noValue),isEditable:Object(j.A)(t.fieldId)(e)&&"PREVIEW"!==Object(K.x)(e)&&!!Object(al.a)(),showPinButton:Object(I.a)(t.area)}),additionalCallbacks:e=>({onUpdate:s=>e(Object(Fc.e)(t.fieldId,s))})}))(jm),vm=n("./src/packages/issue/issue-view/src/selectors/subtasks-selector.js");var km=Object(l.defineMessages)({menuHeader:{id:"issue.views.field.team.edit.menuHeader",defaultMessage:"Plan-specific teams can only be selected through a plan."},noMatches:{id:"issue.views.field.team.edit.noMatches",defaultMessage:"No Matches"},placeholder:{id:"issue.views.field.team.edit.placeholder",defaultMessage:"Choose a team to assign this issue to."},sharedTeam:{id:"issue.context-items.team.shared-team",defaultMessage:"Shared Team"},menuFooter:{id:"issue.context-items.team.edit.menuFooter",defaultMessage:"Showing 100 results. To display more results, please refine your search."}});const wm=C.default.img(["width:","px;height:","px;margin-right:","px;"],2*T.e,2*T.e,T.e),Sm=C.default.div(["display:flex;flex-direction:row;overflow:hidden;align-items:center;justify-content:start;padding:0 ","px;"],T.e/2),Im=C.default.div(["overflow:hidden;text-overflow:ellipsis;white-space:nowrap;"]),Cm=C.default.div(["padding:","px ","px ","px;"],T.e,2*T.e,2*T.e),Tm=C.default.div(["padding:0 ","px ","px ","px;color:",";font-weight:bold;font-size:12px;"],2*T.e,T.e,2*T.e,_t.a.DN30),Pm=C.default.div(["color:",";font-size:12px;padding:","px ","px;"],_t.a.N90,T.e,2*T.e),_m=e=>{const{intl:{formatMessage:t},options:s}=e,n=s.length>0&&s[0].moreResultsAvailable?c.a.createElement(Pm,null,t(km.menuFooter)):null;return c.a.createElement(Po.z.MenuList,e,c.a.createElement(Cm,null,t(km.menuHeader)),e.children,n)};_m.displayName="MenuListComponent";var xm=Object(l.injectIntl)(_m),Dm=n("./src/packages/issue/issue-view/src/views/field/team/assets/default-avatar.svg"),Am=n.n(Dm);var Mm=e=>{const t=e.data;if(t){const{avatarUrl:s}=t;return(c.a.createElement(Po.z.Option,e,c.a.createElement(Sm,null,c.a.createElement(wm,{src:s||Am.a})," ",c.a.createElement(Im,null,e.children))))}return null};const Lm=e=>{const{data:t,intl:{formatMessage:s}}=e,n=t?t.label:c.a.createElement(ge.b,null,s(km.placeholder));return c.a.createElement(Po.z.SingleValue,e,n)};Lm.displayName="SingleValueComponent";var Rm=Object(l.injectIntl)(Lm);const Nm=e=>c.a.createElement(xm,e);Nm.displayName="MenuList";const Um=e=>c.a.createElement(Rm,e);Um.displayName="SingleValue";const Fm=e=>c.a.createElement(Mm,e);Fm.displayName="Option";const Vm=Object(l.injectIntl)(e=>c.a.createElement(Tm,null,e.intl.formatMessage(km.sharedTeam)));class Km extends o.Component{constructor(...e){super(...e),this.onChange=e=>{this.props.onChange(e),this.props.onConfirm(e)},this.debouncedLoadOptions=Ll()((e,t)=>{this.props.loadOptions(e).then(t,()=>{t([])})},300)}render(){const{value:e,portalElement:t,menuPlacement:s,intl:{formatMessage:n}}=this.props;return(c.a.createElement(Rl.a,{value:e,autoFocus:!0,defaultOptions:!0,menuPortalTarget:t,menuPlacement:s,components:{MenuList:Nm,Option:Fm,SingleValue:Um,GroupHeading:Vm},onChange:this.onChange,loadOptions:this.debouncedLoadOptions,defaultMenuIsOpen:!0,isClearable:null!==e,noOptionsMessage:()=>n(km.noMatches),placeholder:n(km.placeholder),cacheOptions:!0}))}}Km.displayName="EditableTeamField";var Bm=Object(l.injectIntl)(Km),Wm=Object(l.defineMessages)({label:{id:"issue.views.field.team.label",defaultMessage:"Team"}}),Hm=n("./node_modules/@atlaskit/icon/glyph/share.js"),Gm=n.n(Hm);const $m=C.default.div(["display:flex;flex-direction:row;overflow:hidden;white-space:nowrap;align-items:center;justify-content:start;"]),qm=C.default.div(["overflow:hidden;text-overflow:ellipsis;margin-right:","px;display:inline-block;"],T.e),zm=C.default.img(["vertical-align:middle;width:","px;height:","px;margin-right:","px;display:inline-block;"],3*T.e,3*T.e,T.e),Ym=C.default.span(["width:","px;height:","px;color:",";"],2*T.e,2*T.e,_t.a.R500),Qm=e=>{const{value:t,noValueText:s}=e;if(t){const{label:e,isShared:s,avatarUrl:n}=t,a=s?c.a.createElement(Ym,null,c.a.createElement(Gm.a,{label:"",size:"small"})):null;return c.a.createElement($m,null,c.a.createElement(zm,{src:n||Am.a}),c.a.createElement(qm,null,e),a)}return(c.a.createElement(ge.b,null,s))};Qm.displayName="TeamViewField";var Jm=Qm;class Zm extends o.Component{renderEditableField(){const{isEditable:e,isSubTask:t,fetchSuggestions:s,onChange:n,onConfirm:a,value:i,portalElement:r,menuPlacement:o}=this.props;return e&&!t?c.a.createElement("span",null,c.a.createElement(Bm,{value:i,loadOptions:s,portalElement:r,menuPlacement:o,onChange:n,onConfirm:a})):null}render(){const{intl:{formatMessage:e},value:t,noValueText:s,isEditing:n,onConfirm:a,onCancel:i,onEditRequest:r,isMobile:o,fieldId:l,showPinButton:u}=this.props,d=e(Wm.label);return c.a.createElement(g.d,null,c.a.createElement(g.b,null,c.a.createElement(g.c,null,d),!0===u&&c.a.createElement(h.a,{fieldId:l,label:d})),c.a.createElement(g.g,{isEditing:n},c.a.createElement(fe.a,{onEscape:i},c.a.createElement(q.a,{isLabelHidden:!0,label:d,readView:c.a.createElement(Jm,{noValueText:s,value:t}),editView:this.renderEditableField(),disableEditViewFieldBase:!0,areActionButtonsHidden:!0,isEditing:n,onConfirm:a,onCancel:i,onEditRequested:r,isFitContainerWidthReadView:!o}))))}}Zm.displayName="TeamField";var Xm=Object(l.injectIntl)(Zm);const eb=(e,t)=>e?((e,t)=>({value:e.id,label:e.title,isShared:e.isShared,avatarUrl:e.avatarUrl?`${t}${e.avatarUrl}`:""}))(e,t.baseUrl):null,tb=e=>e?(e=>({id:e.value,title:e.label,isShared:e.isShared,avatarUrl:e.avatarUrl?e.avatarUrl:""}))(e):null,sb=Object(a.a)(e=>t=>Object(_.d)(`${e}/rest/teams/1.0/teams/find`,{body:JSON.stringify({query:t,excludedIds:[],maxResults:100})}).then(t=>((e,t)=>[{options:e.teams.map(e=>({value:e.id,label:e.title,isShared:e.shareable,avatarUrl:e.avatarUrl?`${t}${e.avatarUrl}`:""})),moreResultsAvailable:e.moreResultsAvailable}])(t,e))),nb=({baseUrl:e,issueKey:t,fieldMetaKey:s,value:n})=>{const a=n&&n.id?n.id.toString():null;return Object(_.e)(Object(wo.f)(e,t),{body:JSON.stringify({fields:{[s]:a}})})};var ab=Object(H.a)((e,t)=>({fieldId:t.fieldId,transformFromStateValue:eb,transformToStateValue:tb,additionalProps:(e,s)=>({fetchSuggestions:sb(Object(R.g)(e)),noValueText:s.formatMessage(Us.noValue),portalElement:Object(W.a)(t.fieldId)(e)?U()||document.body:void 0,isSubTask:Object(vm.c)(e),showPinButton:Object(I.a)(t.area)}),saveField:nb}))(Xm),ib=n("./src/packages/platform/observability/analytics-web-react/src/components/with-fire-ui-analytics.js"),rb=n("./src/packages/platform/observability/analytics-web-react/src/components/decorators.js"),ob=n("./src/packages/platform/observability/errors-handling/src/utils/reporting-error-boundary.js"),cb=n("./src/packages/issue/worklog/src/services/context/index.js"),lb=n("./src/packages/issue/issue-view/src/common/actions/worklog-actions.js"),ub=n("./src/packages/issue/issue-view/src/selectors/status-selector.js"),db=Object(l.defineMessages)({timeRemainingFieldLabel:{id:"issue.context.time-remaining-field.label",defaultMessage:"Time remaining"},includeSubtasksLabel:{id:"issue.time-tracking.include-subtasks",defaultMessage:"Include subtasks"},includeChildrenLabel:{id:"issue.time-tracking.include-children",defaultMessage:"Include child issues"}}),pb=n("./node_modules/@atlaskit/checkbox/dist/es2019/Checkbox.js"),mb=Object(l.defineMessages)({errorTitle:{id:"issue-field-remaining-estimate.error-title",defaultMessage:"We couldn't set the remaining estimate value"},errorMessage:{id:"issue-field-remaining-estimate.error-message",defaultMessage:"Check your connection, then give it another try."}});const bb=({issueId:e,issueKey:t,onSuccess:s})=>{const[n]=Object(Ge.a)(t,"timetracking"),a=(null==n?void 0:n.schema.type)||"timetracking",[{value:i,error:r},{saveValue:o,resetError:c}]=Object(ps.a)({fieldKey:"timetracking",issueKey:t,fieldType:a,initialValue:{originalEstimateSeconds:0,timeSpentSeconds:0,remainingEstimateSeconds:0},saveField:(t,s,n,a)=>(async({issueId:e,newValue:t,baseUrl:s})=>{const n=t.remainingEstimateSeconds;return Object(_.d)(`${s}/secure/AjaxIssueAction.jspa?decorator=none`,{headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Object(yl.stringify)({issueId:e,timetracking_remainingestimate:void 0!==n?`${n/60}m`:null,timetracking_targetsubfield:"timetracking_remainingestimate",fieldsToForcePresent:"timetracking",singleFieldEdit:!0,skipScreenCheck:!0,atl_token:Object(al.a)()})})})({issueId:e,newValue:n,baseUrl:a}),onSuccess:s});return[{value:i,error:r,fieldConfig:n},{saveValue:o,resetError:c}]},fb=C.default.div(["width:","px;cursor:auto;"],8.5*mm.h),gb=e=>{const{defaultValue:t,placeholderMessage:s,onChange:n,isInvalidInput:a,invalidTimeFormatMessage:i}=e;return(c.a.createElement(fb,null,c.a.createElement(Sr,{compact:!0,type:"text",value:t,placeholder:s,onChange:n,invalidMessage:a?i:void 0})))};gb.displayName="RemainingEstimateEdit";var hb=gb;const yb=C.default.div(["padding:0px;"]),Ob=e=>{const{defaultValue:t}=e;return(c.a.createElement(yb,null,c.a.createElement(Ma.a,null,t)))};Ob.displayName="RemainingEstimateView";var jb=Ob;function Eb(){return(Eb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function vb(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function kb(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?vb(Object(s),!0).forEach((function(t){wb(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):vb(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function wb(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Sb(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}var Ib=e=>{const{config:t,issueKey:s,issueId:n,onCancel:a,onEdit:i,onEscape:r,onConfirm:l,onEnter:u,onUpdate:d,readView:p,editView:m,placeholderMessage:b,invalidTimeFormatMessage:f,useRemainingEstimateField:g=bb}=e,h=Sb(e,["config","issueKey","issueId","onCancel","onEdit","onEscape","onConfirm","onEnter","onUpdate","readView","editView","placeholderMessage","invalidTimeFormatMessage","useRemainingEstimateField"]),[y]=Object(ft.a)(),O=y.canLogWork,[{value:j,error:E},{saveValue:v,resetError:k}]=g({issueId:n,issueKey:Object(Kr.l)(s),onSuccess:d}),w=j.remainingEstimateSeconds||0,[S,I]=Object(o.useState)(!1),[C,T]=Object(o.useState)(!1),P=Object(o.useMemo)(()=>ml(t)(w),[t,w]),[_,x]=Object(o.useState)(P);Object(o.useEffect)(()=>{x(P)},[P]),Object(o.useEffect)(()=>{E&&T(!0)},[E]);const D=Object(o.useCallback)(e=>{if(om()(_,P))T(!1);else if(fl(t)(_)){const s=kb(kb({},j),{},{remainingEstimateSeconds:gl(t)(_)||0});v(s,null,e),Object(Ut.h)(e),I(!1),T(!1)}else I(!0),T(!0)},[t,P,v,j,_]),A=Object(o.useCallback)(e=>{k(),I(!1),T(!1),x(P),Object(Ut.h)(e)},[P,k]),M=Object(o.useCallback)(e=>{A(e),a&&a(e)},[A,a]),L=Object(o.useCallback)(e=>{D(e),l&&l(e)},[l,D]),R=Object(o.useCallback)(e=>{T(!0),Object(Ut.h)(e),i&&i(e)},[i]),N=Object(o.useCallback)(e=>{A(e),r&&r(e)},[A,r]),U=Object(o.useCallback)(e=>{D(e),u&&u(e)},[u,D]),F=Object(o.useCallback)(e=>{I(!1),k(),x(e.target.value)},[k,x]);return c.a.createElement(c.a.Fragment,null,E&&(()=>E?c.a.createElement(rl.a,{error:E,title:mb.errorTitle,description:mb.errorMessage}):null)(),c.a.createElement(ol.a,Eb({actionSubject:"remainingEstimateInlineEdit",isEditable:O,isEditing:C,readView:(()=>void 0!==p?p:c.a.createElement(jb,{defaultValue:P}))(),editView:O?(()=>void 0!==m?m:c.a.createElement(hb,{defaultValue:_,placeholderMessage:b,onChange:F,invalidTimeFormatMessage:f,isInvalidInput:S}))():null,onCancel:M,onConfirm:L,onEdit:R,onEscape:N,onEnter:U},h)))},Cb=n("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics-component.js"),Tb=n("./src/packages/issue/issue-view/src/common/component/logged-time/view.js");const Pb=e=>void 0===e,_b=e=>{if(!e)return Object.seal({});const{remainingEstimateSeconds:t,timeSpentSeconds:s}=e;return ri()({loggedTime:s,remainingTime:t},Pb)},xb=C.default.div(["margin-bottom:","px;margin-left:-","px;padding-top:","px;& > label > span{color:",";}"],e=>e.sideBySideMode?0:3*T.e,T.e/2,T.e/2,_t.a.N500);class Db extends o.Component{renderReadView(){const{value:e,isDone:t,config:s}=this.props;return(c.a.createElement(Tb.a,{value:_b(e),estimatedTime:e.originalEstimateSeconds,isDone:t,config:s}))}renderRemainingEstimateView(){const{config:e,fieldId:t,issueKey:s,issueId:n,showPinButton:a,invalidTimeFormatMessage:i,placeholderMessage:r,timeRemainingFieldLabel:o}=this.props;return n?c.a.createElement(g.d,null,c.a.createElement(g.b,null,c.a.createElement(g.c,null,o),!0===a&&c.a.createElement(h.a,{fieldId:t,label:o})),c.a.createElement(g.g,null,c.a.createElement(Ib,{config:e,issueKey:s,issueId:n,value:"",placeholderMessage:r,invalidTimeFormatMessage:i,isFitContainerWidthReadView:!0}))):null}renderRollUpToggle(){const{rollupLabel:e,isRollingUpData:t,onToggleRollingUpData:s}=this.props;return(c.a.createElement(xb,{sideBySideMode:!0},c.a.createElement(pb.a,{isChecked:t,onChange:({target:{checked:e}},t)=>{s(e,t)},label:e,name:"include-subtasks-children-in-time-tracking-toggle-from-context"}),c.a.createElement(Cb.a,{action:"exposed",actionSubject:"feature",actionSubjectId:"toggleRollUpDataControlFromContext"})))}render(){const{isVisible:e,label:t,isEditable:s,isMobile:n,onEditRequest:a,editButtonLabel:i,confirmButtonLabel:r,cancelButtonLabel:o,fieldId:l,showPinButton:u,shouldDisplayRollUpDataControl:d}=this.props;return e?c.a.createElement(g.d,null,c.a.createElement(g.b,null,c.a.createElement(g.c,null,t),!0===u&&c.a.createElement(h.a,{fieldId:l,label:t})),c.a.createElement(g.g,{"data-testid":"issue.views.issue-base.context.time-tracking.value"},c.a.createElement(fe.a,null,c.a.createElement(q.a,{label:t,readView:this.renderReadView(),editView:s?c.a.createElement("div",null):null,isEditing:!1,areActionButtonsHidden:!0,disableEditViewFieldBase:!0,isFitContainerWidthReadView:!n,isLabelHidden:!0,onEditRequested:a,editButtonLabel:i,confirmButtonLabel:r,cancelButtonLabel:o}),d&&this.renderRollUpToggle()))):this.renderRemainingEstimateView()}}Db.displayName="TimeTrackingView",Db.displayName="TimeTrackingView";var Ab=Db;function Mb(){return(Mb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Lb(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const Rb=Object(ib.a)({onToggleRollingUpData:"toggleRollingUpData"})(Object(rb.b)("worklog")(Ab)),Nb=e=>{const{timeTrackingCalculationSelector:t,area:s,intl:n}=e,a=Lb(e,["timeTrackingCalculationSelector","area","intl"]),[i,{markRollingUpData:r,unmarkRollingUpData:l}]=Object(cb.a)(),u=Object(o.useCallback)(e=>{e?r():l()},[r,l]);return c.a.createElement(Rb,Mb({},a,{value:t(i),isRollingUpData:i,onToggleRollingUpData:u}))};Nb.displayName="WrappedTimeTrackingView";const Ub=Object(u.b)((e,t)=>{const{intl:{formatMessage:s},area:n,fieldId:a}=t,i=Object(j.m)(t.fieldId)(e);return{fieldId:a,timeTrackingCalculationSelector:Object(il.j)(e),config:Object(il.h)(e),issueKey:Object(R.B)(e),issueId:Object(R.A)(e),isDone:"DONE"===Object(ub.b)(e),isEditable:Object(il.b)(e),isMobile:Object(R.u)(e),isVisible:Object(il.d)(e),label:i,editButtonLabel:s(G.a.editButtonLabel,{fieldName:i}),confirmButtonLabel:s(G.a.confirmButtonLabel,{fieldName:i}),cancelButtonLabel:s(G.a.cancelButtonLabel,{fieldName:i}),timeRemainingFieldLabel:s(db.timeRemainingFieldLabel),rollupLabel:Object(K.m)(e)?s(db.includeSubtasksLabel):s(db.includeChildrenLabel),showPinButton:Object(I.a)(n),shouldDisplayRollUpDataControl:Object(il.c)(e),placeholderMessage:"2w 4d 6h 45m",invalidTimeFormatMessage:c.a.createElement(l.FormattedMessage,{id:"issue.time-estimate.input-time-string-is-invalid",defaultMessage:"Your estimate must be in the format {format}.",values:{format:c.a.createElement("b",null,"2w 4d 6h 45m")}})}},e=>({onEditRequest:()=>{e(Object(lb.H)("ADD_MODAL",null))}}))(Nb);var Fb=e=>{const t=Object(mt.c)();return(c.a.createElement($s.a,{id:"issue.issue-view.context.time-tracking-field"},c.a.createElement(ob.a,{id:"context.time-tracking-field",packageName:"jiraIssueView",sendToPrivacyUnsafeSplunk:!0},c.a.createElement(Ub,Mb({},e,{intl:t})))))},Vb=Object(H.a)((e,t)=>({fieldId:t.fieldId,additionalProps:(e,s)=>({noValueText:s.formatMessage(Us.noValue),type:"url",showPinButton:Object(I.a)(t.area)})}))(Cr);const Kb=e=>e.users?e.users.map(zt):[],Bb=Object(a.a)(e=>t=>e?Object(pt.a)(`${e}${t}`).then(Kb):Promise.resolve([])),Wb=Object(a.a)(e=>({avatarUrl:"",name:e.formatMessage(Us.noValue)}));var Hb=Object(H.a)((e,t)=>({fieldId:t.fieldId,transformFromStateValue:zt,transformToStateValue:Yt,additionalProps:(e,s)=>({portalElement:Object(W.a)(t.fieldId)(e)?U()||document.body:void 0,fetchSuggestions:Bb(Object(j.d)(t.fieldId)(e)),emptyOption:Object(j.C)(t.fieldId)(e)?void 0:Wb(s),showPinButton:Object(I.a)(t.area)})}))(Nt),Gb=n("./src/packages/cache/src/services/versions/index.js"),$b=Object(l.defineMessages)({createNewItem:{id:"issue.fix-versions.create-new-component-message",defaultMessage:"Create new version"},recent:{id:"issue.fix-versions.create-new-component-message.recent",defaultMessage:"Recent versions"},releasedHeading:{id:"issue.fix-versions.released-message",defaultMessage:"Released"},unreleasedHeading:{id:"issue.fix-versions.unreleased-message",defaultMessage:"Unreleased"}});function qb(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function zb(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?qb(Object(s),!0).forEach((function(t){Yb(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):qb(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Yb(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Qb=e=>({content:e.name,value:e.id,fromCache:e.fromCache||!1}),Jb={versions:"affectedVersion",fixVersions:"fixVersion"},Zb=(e,{baseUrl:t,projectKey:s,fieldId:n})=>e.map(e=>{const a=`project = ${Object(cn.b)(s)} AND ${(e=>Jb[e]||"fixVersion")(n)} = ${Object(cn.b)(e.name)}`;return{href:Object(cn.a)(t,a),content:e.name,value:e.id}}),Xb=e=>e?e.map(Qb):[],ef=e=>e.map(e=>({name:e.content,id:e.value,fromCache:e.fromCache})),tf=(e,t,s,n)=>{const a=e.filter(e=>!e.archived),i=a.filter(e=>!e.released).map(Qb),r=a.filter(e=>e.released).map(Qb),o=(e=>e.slice(-5).reverse())(((e,t,s)=>t.filter(e=>e.projectId===s).map(t=>{const n=e.find(e=>e.id===t.id);if(n){const e=zb(zb({},n),{},{projectId:s});return Gb.a.update(`${t.id}`,e),zb(zb({},e),{},{fromCache:!0})}return zb(zb({},t),{},{fromCache:!0})}))(e,t,n));return[{heading:s.formatMessage($b.recent),items:o.map(Qb)},{heading:s.formatMessage($b.unreleasedHeading),items:i},{heading:s.formatMessage($b.releasedHeading),items:r}]},sf=(e,t)=>{const s=e.filter(e=>!e.archived),n=s.filter(e=>!e.released).map(Qb),a=s.filter(e=>e.released).map(Qb);return[{heading:t.formatMessage($b.unreleasedHeading),items:n},{heading:t.formatMessage($b.releasedHeading),items:a}]};var nf=Object(l.defineMessages)({placeholder:{id:"issue.single-version-picker.text-for-dropdown-when-nothing-selected",defaultMessage:"Select version"}});const af=e=>e&&{name:e.content,id:e.value},rf=e=>e&&{content:e.name,value:e.id},of=Object(a.a)((e,t,s)=>()=>Promise.resolve(e).then(e=>Object(r.isCacheInPickersEnabled)()?tf(e,[],t,s):sf(e,t)));var cf=Object(H.a)((e,t)=>({fieldId:t.fieldId,transformFromStateValue:rf,transformToStateValue:af,additionalProps:(e,s)=>({fetchSuggestions:of(Object(j.c)(t.fieldId)(e),s,Object(K.D)(e)),placeholder:s.formatMessage(nf.placeholder),noValueText:s.formatMessage(Us.noValue),allowEmptyValue:!Object(j.C)(t.fieldId)(e),hasAutocomplete:!0,showPinButton:Object(I.a)(t.area)})}))(ta);const lf=Object(a.a)((e,t,s)=>()=>Promise.resolve(e).then(e=>Object(r.isCacheInPickersEnabled)()?tf(e,[],t,s):sf(e,t)));var uf=Object(H.a)((e,t)=>({fieldId:t.fieldId,transformFromStateValue:Xb,transformToStateValue:ef,additionalProps:(e,s)=>({fetchSuggestions:lf(Object(j.c)(t.fieldId)(e),s,Object(K.D)(e)),placeholder:s.formatMessage(Us.version_no_value_placeholder),noValueText:s.formatMessage(Us.noValue),showPinButton:Object(I.a)(t.area)})}))(An),df=n("./src/packages/issue/issue-view/src/issue-field/state/actions/field-actions.js"),pf=n("./src/packages/releases/versions/src/create-version-modal/index.js");function mf(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function bf(){return(bf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}class ff extends o.Component{constructor(...e){super(...e),this.state={isDialogOpen:!1,data:[],loading:!1,error:!1},this.componentDidMount=()=>{Object(r.isCacheInPickersEnabled)()&&this.getDataFromCache()},this.getDataFromCache=()=>{var e,t;null===(e=(t=this.props).getDataFromCache)||void 0===e||e.call(t).then(e=>{this.setState({data:e,loading:!1})})},this.fetchSuggestions=e=>this.props.fetchSuggestions(e).then(e=>(this.setState({data:e}),e)),this.openDialog=()=>{this.setState({isDialogOpen:!0})},this.closeDialog=()=>{this.setState({isDialogOpen:!1})},this.onSuccess=e=>{const{onChange:t,value:s,onVersionCreated:n,versionFieldIds:a}=this.props;t([...s,{content:e.name,value:e.id}]),this.closeDialog(),n(e,a)}}renderSelect(e){const{canAdministerProject:t,canAdministerJira:s,createNewItemMessage:n}=this.props,a=t||s;if(Object(r.isCacheInPickersEnabled)()){const{data:t,loading:s,error:i}=this.state,r={data:t,loading:s,error:i};return c.a.createElement(An,bf({},e,{styles:In,shouldShowFooter:a,footer:c.a.createElement(Sn,{className:"issue-view__select-footer"},c.a.createElement(yn.a,{label:"",size:"small"}),c.a.createElement(wn,null,n)),onFooterSelect:this.openDialog,allowEmptyValue:!0,optionValuesSafeForAnalytics:!0,fetchSuggestions:this.fetchSuggestions,debounceFetchSuggestionsTime:300,initialData:r}))}return(c.a.createElement(An,bf({},e,{styles:In,shouldShowFooter:a,footer:c.a.createElement(Sn,{className:"issue-view__select-footer"},c.a.createElement(yn.a,{label:"",size:"small"}),c.a.createElement(wn,null,n)),onFooterSelect:this.openDialog,allowEmptyValue:!0,optionValuesSafeForAnalytics:!0})))}render(){const e=this.props,{baseUrl:t,projectId:s,createNewItemMessage:n,canAdministerProject:a,canAdministerJira:i,locale:r,onVersionCreated:o,versionFieldIds:l}=e,u=mf(e,["baseUrl","projectId","createNewItemMessage","canAdministerProject","canAdministerJira","locale","onVersionCreated","versionFieldIds"]),{isDialogOpen:d}=this.state;return c.a.createElement(c.a.Fragment,null,d&&c.a.createElement(pf.a,{locale:r,baseUrl:t,projectId:s,onCancel:this.closeDialog,onError:this.closeDialog,onSuccess:this.onSuccess}),this.renderSelect(u))}}ff.displayName="FixVersionsView";function gf(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function hf(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?gf(Object(s),!0).forEach((function(t){yf(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):gf(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function yf(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Of=Object(a.a)((e,t,s,n,a,i)=>((e,t,s,n,a,i)=>rn(e,t,s,n,a,i))(e,t,s,n,a,i)),jf=Object(a.a)((e,t,s,n,a,i)=>(o,c)=>{if(Object(r.isCacheInPickersEnabled)()){const r=Of(s,e,n,a,c,i);return Promise.all([r,Gb.a.getAll()]).then(async([e,s])=>tf(e,s,t,a))}return Of(s,e,n,a,c,i).then(e=>sf(e,t))});var Ef=Object(H.a)((t,s)=>({fieldId:s.fieldId,transformFromStateValue:Zb,transformToStateValue:ef,additionalProps:(e,t)=>({fetchSuggestions:jf(Object(j.c)(s.fieldId)(e),t,s.fieldId,Object(R.A)(e),Object(K.D)(e),s.createAnalyticsEvent),canAdministerProject:Object(Zs.c)(e),canAdministerJira:Object(Zs.b)(e),createNewItemMessage:t.formatMessage($b.createNewItem),baseUrl:Object(R.g)(e),projectId:Object(K.D)(e),isMobile:Object(R.u)(e),placeholder:t.formatMessage(Us.version_no_value_placeholder),noValueText:t.formatMessage(Us.noValue),versionFieldIds:Object(j.x)(e),onTagClick:e=>Object(Ut.h)(e,{name:s.fieldId}),showPinButton:Object(I.a)(s.area),getDataFromCache:Object(r.isCacheInPickersEnabled)()?()=>Gb.a.getAll().then(s=>tf([],s,t,Object(K.D)(e))):void 0}),additionalCallbacks:e=>({onVersionCreated:(t,s)=>{s.forEach(s=>{e(Object(df.a)(s,[t]))})}}),saveField:(...t)=>(({baseUrl:t,issueKey:s,fieldMetaKey:n,value:a,fieldEditSessionId:i},o,c)=>{const l=void 0!==i?`${t}/rest/api/2/issue/${s}?fieldEditSessionId=${i}`:`${t}/rest/api/2/issue/${s}`;if(Object(r.isCacheInPickersEnabled)()){const t=Object(K.D)(o);return a.forEach(e=>{try{c.createAnalyticsEvent&&Object(Ut.b)(c.createAnalyticsEvent({}),"versionPickerCache set",{isFromCache:e.fromCache}),e.id&&Gb.a.set(`${e.id}`,hf(hf({},e),{},{projectId:t}))}catch(s){Js.a.safeError("issue-view.versions.cache.set",s.message)}}),Object(_.e)(l,{body:JSON.stringify({fields:{[n]:a}})}).catch(t=>{throw a.forEach(t=>{try{c.createAnalyticsEvent&&Object(Ut.b)(c.createAnalyticsEvent({}),"versionPickerCache removed"),t.id&&Gb.a.remove(`${t.id}`)}catch(e){Js.a.safeError("issue-view.versions.cache.remove",e.message)}}),t})}return Object(_.e)(l,{body:JSON.stringify({fields:{[n]:a}})})})(...t,s)}))(ff);const vf=({children:e,id:t,fallback:s=c.a.createElement(c.a.Fragment,null)})=>c.a.createElement($s.a,{id:t,packageName:"issue",render:()=>s},c.a.createElement(X.a,{fallback:s},e));vf.displayName="Boundary";const kf=Object(X.f)(()=>Promise.all([n.e("vendor~748942c6"),n.e("vendor~31ecd969"),n.e("async-all-dev-panel")]).then(n.bind(null,"./src/packages/issue/issue-view/src/views/issue-base/context/all-dev-info-panel/all-dev-panel-view.js")),{moduleId:"./src/packages/issue/issue-view/src/views/issue-base/context/all-dev-info-panel/all-dev-panel-view.js"}),wf=Object(X.f)(()=>Promise.all([n.e("vendor~748942c6"),n.e("vendor~31ecd969"),n.e("async-all-dev-panel-old")]).then(n.bind(null,"./src/packages/issue/issue-view/src/views/issue-base/context/all-dev-info-panel/all-dev-panel-view-old.js")),{moduleId:"./src/packages/issue/issue-view/src/views/issue-base/context/all-dev-info-panel/all-dev-panel-view-old.js"}),Sf=Object(X.f)(()=>n.e("async-releases-context-panel").then(n.bind(null,"./src/packages/development/releases-glance/src/view/deployment-release-panel/index.js")),{moduleId:"./src/packages/development/releases-glance/src/view/deployment-release-panel/index.js"}),If=Object(X.f)(()=>n.e("async-assets-glance").then(n.bind(null,"./src/packages/platform/ui/asset-tracking/assets-glance/src/index.js")),{moduleId:"./src/packages/platform/ui/asset-tracking/assets-glance/src/index.js"}),Cf=Object(X.f)(()=>Promise.all([n.e("vendor~748942c6"),n.e("vendor~31ecd969"),n.e("async-assets-panel")]).then(n.bind(null,"./src/packages/issue/issue-view/src/views/issue-base/context/assets-panel/assets-panel-view.js")),{moduleId:"./src/packages/issue/issue-view/src/views/issue-base/context/assets-panel/assets-panel-view.js"}),Tf=Object(X.f)(()=>n.e("async-assets-onboarding").then(n.bind(null,"./src/packages/issue/issue-view/src/views/issue-base/context/assets-onboarding/assets-onboarding-view.js")),{moduleId:"./src/packages/issue/issue-view/src/views/issue-base/context/assets-onboarding/assets-onboarding-view.js"}),Pf=e=>c.a.createElement(vf,{id:"all-dev-panel"},c.a.createElement(kf,e));Pf.displayName="AllDevPanel";const _f=e=>c.a.createElement(vf,{id:"all-dev-panel"},c.a.createElement(wf,e));_f.displayName="AllDevPanelOld";const xf=e=>c.a.createElement(vf,{id:"releases-context-panel"},c.a.createElement(Sf,e));xf.displayName="ReleasesContextPanel";const Df=e=>c.a.createElement(vf,{id:"assets-glance"},c.a.createElement(If,e));Df.displayName="AssetsGlance";const Af=e=>c.a.createElement(vf,{id:"assets-panel"},c.a.createElement(Cf,e));Af.displayName="AssetsPanel";const Mf=e=>c.a.createElement(vf,{id:"assets-onboarding"},c.a.createElement(Tf,e));Mf.displayName="AssetsOnboarding";s.a=Object(a.a)(()=>{const e=Object(i.T)();return{[e.ASSIGNEE_TYPE]:{item:ds},[e.DUE_DATE_TYPE]:{item:Aa},[e.PRIORITY_TYPE]:{item:Mu},[e.REPORTER_TYPE]:{item:sd},[e.DESCRIPTION_TYPE]:{item:be},[e.LABELS_TYPE]:{item:mr},[e.COMPONENTS_TYPE]:{item:Bn},[e.SPRINT_TYPE]:{item:Wp},[e.STORY_POINTS_TYPE]:{item:im},[e.TEAMS_PLATFORM_CF_TYPE]:{item:Object(r.isTeamsCustomFieldTypeEnabled)()?Em:()=>null},[e.EPIC_TYPE]:{item:lc},[e.FIX_VERSIONS_TYPE]:{item:Ef},[e.AFFECTS_VERSIONS_TYPE]:{item:Ef},[e.TIME_ESTIMATE_TYPE]:{item:xl},[e.TIME_TRACKING_TYPE]:{item:Fb},[e.ENVIRONMENT_TYPE]:{item:Me},[e.DEV_SUMMARY_TYPE]:{item:Object(r.isUseUseAccountIdEnabled)()?Pf:_f,panel:xf},[e.APPROVALS_PANEL_TYPE]:{item:Le.a,panel:rt},[e.KNOWLEDGE_BASE_TYPE]:{item:Oc,panel:Ic},[e.SLA_PANEL_TYPE]:{item:op},[e.ASSETS_CF_TYPE]:{item:Af,panel:Df},[e.COLOR_CF_TYPE]:{item:()=>null},[e.EPIC_COLOR_TYPE]:{item:()=>null},[e.RELEASES_TYPE]:{item:()=>null},[e.PARENT_CF_TYPE]:{item:fu},[e.BASELINE_START_CF_TYPE]:{item:Da},[e.BASELINE_END_CF_TYPE]:{item:Da},[e.LABELS_CF_TYPE]:{item:mr},[e.TEXT_CF_TYPE]:{item:Yd},[e.MULTI_USER_CF_TYPE]:{item:Zr},[e.URL_CF_TYPE]:{item:Vb},[e.NUMBER_CF_TYPE]:{item:Object(r.isUseExtractedNumberFieldEnabled)()?Uc:$c},[e.STORY_POINT_ESTIMATE_CF_TYPE]:{item:Gc},[e.SELECT_CF_TYPE]:{item:sp},[e.MULTI_SELECT_CF_TYPE]:{item:Ac},[e.ECOSYSTEM_GLANCE_TYPE]:{item:yi},[e.FORGE_CUSTOM_FIELD_TYPE]:{item:bo},[e.ISSUE_FIELD_USER_CF_TYPE]:{item:Hb},[e.ISSUE_FIELD_GROUPS_CF_TYPE]:{item:fc},[e.ISSUE_FIELD_STRINGS_CF_TYPE]:{item:mr},[e.FORGE_GLANCE_TYPE]:{item:jo},[e.TEXT_AREA_CF_TYPE]:{item:Me},[e.MULTI_VERSION_CF_TYPE]:{item:uf},[e.VERSION_CF_TYPE]:{item:cf},[e.DATE_CF_TYPE]:{item:Da},[e.GROUP_CF_TYPE]:{item:hc},[e.MULTI_GROUP_CF_TYPE]:{item:fc},[e.USER_CF_TYPE]:{item:Hb},[e.DATETIME_CF_TYPE]:{item:va},[e.MULTI_CHECKBOXES_CF_TYPE]:{item:Hs},[e.RADIO_BUTTONS_CF_TYPE]:{item:Hu},[e.TEAM_CF_TYPE]:{item:ab},[e.ISSUE_FIELD_NUMBER_CF_TYPE]:{item:Object(r.isUseExtractedNumberFieldEnabled)()?Uc:$c},[e.ISSUE_FIELD_DATETIME_CF_TYPE]:{item:va},[e.ISSUE_FIELD_STRING_CF_TYPE]:{item:Yd},[e.ISSUE_FIELD_SINGLE_SELECT_CF_TYPE]:{item:sp},[e.ISSUE_FIELD_MULTI_SELECT_CF_TYPE]:{item:Ac},[e.REQUEST_TYPE_CF_TYPE]:{item:ga},[e.SERVICE_ENTITY_CF_TYPE]:{item:zd},[e.REQUEST_PARTICIPANTS_CF_TYPE]:{item:Ld},[e.ORGANIZATIONS_CF_TYPE]:{item:nl},[e.REQUEST_FEEDBACK_CF_TYPE]:{item:yd},[e.PEOPLE_CF_TYPE]:{item:ku},[e.REQUEST_LANGUAGE_CF_TYPE]:{item:Td},[e.ASSET_ONBOARDING_TYPE]:{item:Mf},[e.APPROVERS_LIST_CF_TYPE]:{item:ku},[e.CASCADING_SELECT_CF_TYPE]:{item:ks},[e.CMDB_OBJECT_CF_TYPE]:{item:Object(r.isCmdbIntegrationFieldEnabled)()?Ys:()=>null},[e.READ_ONLY_CF_TYPE]:{item:Ju}}})},"./src/packages/issue/issue-view/src/views/issue-base/utils/get-show-pin-button.js":function(e,t,s){"use strict";t.a=e=>"context"===e},"./src/packages/issue/issue-view/src/views/issue-details/app-provider/index.js":function(t,s,n){"use strict";var a=n("./node_modules/lodash/flow.js"),i=n.n(a),r=n("./src/packages/platform/services/issue/src/components/context/consumer.js"),o=n("./node_modules/react/index.js"),c=n.n(o),l=n("./src/packages/platform/controllers/spa-state/src/components/transition-state/index.js");function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}var d=n("./src/packages/issue/issue-view/src/common/metrics/context/index.js"),p=n("./node_modules/react-resource-router/build/esm/index.js"),m=n("./src/packages/platform/utils/app-base/src/index.js"),b=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/app-style/index.js"),f=n("./src/packages/common-legacy-do-not-add-anything-new/src/redux-disposable/index.js"),g=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/component-with-condition.js"),h=n("./src/packages/growth/cross-flow/src/services/cross-flow-provider/index.js"),y=n("./src/packages/issue/attachments/issue-attachments-base/src/services/attachments-service/main.js"),O=n("./src/packages/issue/issue-context-service/src/main.js"),j=n("./src/packages/issue/fields/field-base/src/services/field-config-service/main.js"),E=n("./src/packages/issue/fields/field-base/src/services/field-value-service/main.js"),v=n("./src/packages/issue/opt-in-back/src/services/onboarding-tour/context.js"),k=n("./src/packages/issue/issue-scroll/src/services/main.js"),w=n("./src/packages/issue/issue-tabs/src/services/main.js"),S=n("./src/packages/issue/user-preferences-services/src/main.js"),I=n("./src/packages/issue/issue-view-layout/src/services/main.js"),C=n("./src/packages/issue/workflow-transitions-services/src/main.js"),T=n("./src/packages/issue/workflow-transitions-services/src/context.js"),P=n("./src/packages/issue/permissions-service/src/main.js"),_=n("./src/packages/issue/project-context-service/src/main.js"),x=n("./src/packages/platform/services/issue/src/service/index.js"),D=n("./src/packages/issue/jira-settings-service/src/main.js"),A=n("./src/packages/platform/controllers/tenant-context/src/components/index.js"),M=n("./src/packages/issue/worklog/src/services/store/index.js");const L=e=>({type:"SET_CONTEXT",payload:e});var R=n("./src/packages/issue/issue-view/src/actions/external-actions.js"),N=n("./src/packages/issue/issue-view/src/common/actions/issue-fetch-actions.js"),U=n("./src/packages/issue/issue-view/src/common/metrics/index.js"),F=n("./src/packages/issue/issue-view/src/feature-flags.js"),V=n("./src/packages/issue/issue-view/src/layout-descriptor/view/context/view.js"),K=n("./src/packages/issue/issue-view/src/selectors/analytics-payload-selector.js"),B=n("./node_modules/react-sweet-state/lib/esm/store/create.js"),W=n("./node_modules/react-sweet-state/lib/esm/components/hook.js");const H=e=>!!(e&&e.savedAt>Date.now()-36e5),G=()=>({setState:e,getState:t})=>{const s=t();Object.entries(s).forEach(([t,s])=>{H(s)||e({[t]:void 0})})},$={setRecentIssue:(e,t)=>({setState:s,dispatch:n})=>{n(G()),s({[String(e)]:{issueState:t,savedAt:Date.now()}})},getRecentIssue:e=>({getState:t,dispatch:s})=>{s(G());const n=t()[e];return H(n)?null==n?void 0:n.issueState:void 0},getRecentIssuesCount:()=>({getState:e})=>{const t=e();return Object.values(t).filter(Boolean).length}},q=Object(B.a)({name:"recent-issues",initialState:{},actions:$}),z=Object(W.a)(q,{selector:null});var Y=n("./src/packages/issue/issue-view/src/utils/prefetched-resources/index.js"),Q=n("./node_modules/react-redux/es/index.js");const J=e=>({type:"FETCH_SCREENID_SUCCESS",payload:e&&e.data});var Z=n("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");var X=Object(Q.b)(e=>({isSimplifiedProject:Object(Z.v)(e)}),{fetchScreenIdRequest:()=>({type:"FETCH_SCREENID_REQUEST"})})(e=>{const{fetchScreenIdRequest:t,isSimplifiedProject:s}=e;return Object(o.useEffect)(()=>{s||t()},[t,s]),null}),ee=n("./node_modules/lodash/join.js"),te=n.n(ee),se=n("./src/packages/platform/observability/analytics-legacy-gasv2/src/safe-string.js"),ne=n("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),ae=n("./src/packages/realtime/src/common/constants/events.js"),ie=n("./src/packages/realtime/src/index.js");var re=n("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),oe=n("./node_modules/reselect/lib/index.js"),ce=n("./src/packages/realtime/src/common/utils/pubsub.utils.js");const le=Object(oe.createSelector)(re.j,Z.D,(e,t)=>[Object(ce.a)(e,t)]);function ue(){return(ue=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function de(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const pe=[ae.g,ae.b];var me=Object(Q.b)(e=>({channels:le(e),cloudId:Object(re.j)(e),projectId:Object(Z.D)(e),issueId:Object(re.A)(e)}),{realtimeUpdateCurrentIssue:e=>({type:"REALTIME_UPDATE_CURRENT_ISSUE",payload:e})},(e,t)=>({channels:e.channels,events:pe,cloudId:e.cloudId,projectId:e.projectId,onJoin:(t,s)=>{Object(ne.b)(s,"channel joined","Realtime",{cloudId:new se.a(e.cloudId),projectId:e.projectId,issueId:new se.a(e.issueId),channels:new se.a(te()(e.channels))})},onReceive:(s,n)=>{s&&s.payload.issueId===Number(e.issueId)&&(t.realtimeUpdateCurrentIssue({atlassianId:s.payload.atlassianId,updateType:s.type}),Object(ne.b)(n,"event received","Realtime",{cloudId:new se.a(e.cloudId),projectId:e.projectId,issueId:new se.a(e.issueId),eventType:new se.a(s.type)}))},onLeave:(t,s)=>{Object(ne.b)(s,"channel left","Realtime",{cloudId:new se.a(e.cloudId),projectId:e.projectId,issueId:new se.a(e.issueId),channels:new se.a(te()(e.channels))})}}))(e=>{let{cloudId:t,projectId:s}=e,n=de(e,["cloudId","projectId"]);return t&&s?c.a.createElement(ie.a,ue({appId:"issue-view"},n)):null}),be=n("./node_modules/history/createBrowserHistory.js"),fe=n.n(be),ge=n("./src/packages/platform/utils/constants/src/status-categories.js"),he=n("./src/packages/platform/utils/types/src/general.js"),ye=n("./src/packages/issue/issue-fetch-services-common/src/common/utils/token-browser-utils.js"),Oe=n("./src/packages/issue/issue-view/src/actions/issue-preview-actions.js"),je=n("./src/packages/issue/issue-view/src/actions/issue-remote-data-actions.js");const Ee=(e,t)=>({type:"FETCH_LOGGED_IN_USER_SUCCESS",payload:{user:e,applicationRoles:t}});var ve=n("./src/packages/issue/issue-view/src/common/util/entry/get-project-key.js");const ke=e=>({type:"PREVIEW_DATA_FETCHED",payload:e});var we=n("./src/packages/issue/issue-view/src/issue-field/state/transformers/initial-data-transformer.js"),Se=n("./src/packages/platform/utils/constants/src/fetch-default-options-with-strict-mode.js"),Ie=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/logging/log.js"),Ce=n("./src/packages/platform/utils/fetch/src/utils/as-json.js");function Te(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Pe(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const _e=(e,t,s)=>Object(Ce.a)(((e,t,s)=>null!=s?`${e}/rest/api/2/project/${t}/properties/@atlassian.polaris.project.enabled?sessionId=${s}`:`${e}/rest/api/2/project/${t}/properties/@atlassian.polaris.project.enabled`)(e,t,s),function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(s),!0).forEach((function(t){Pe(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Te(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},Se.a)).then(e=>!!(e&&"key"in e&&"@atlassian.polaris.project.enabled"===e.key&&!0===e.value)||(Ie.a.safeWarn("isPolarisProjectCheck","Request succeed but response is not expected",e),!1)).catch(e=>(404!==e.statusCode&&Ie.a.safeError("isPolarisProjectCheck",`Request failed with code: ${e.statusCode}`,e),!1));var xe=n("./node_modules/redux/es/index.js"),De=n("./node_modules/redux-batched-actions/lib/index.js"),Ae=n("./node_modules/redux-observable/lib/es/index.js"),Me=n("./node_modules/lodash/noop.js"),Le=n.n(Me),Re=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),Ne=n("./node_modules/rxjs/Rx.js"),Ue=n("./src/packages/platform/observability/analytics-web-react/src/utils/fire-track-event.js"),Fe=n("./src/packages/rich-content/src/common/adf-parsing-utils.js"),Ve=n("./src/packages/issue/issue-view/src/common/state/selectors/time-tracking-selector.js"),Ke=n("./src/packages/issue/issue-view/src/common/util/time-string/time-string-to-seconds/index.js");const Be=e=>"string"==typeof e?""!==e.trim():!Object(Fe.g)(e);var We=e=>{const{comment:t}=e;return!!t&&("string"==typeof t?""!==t.trim():!Object(Fe.g)(t))},He=n("./node_modules/moment/moment.js"),Ge=n.n(He);const $e=e=>{const{accountId:t,displayName:s=null,avatarUrls:n=null}=e;return{accountId:t,displayName:s,avatarUrl:n&&n["48x48"]}},qe=e=>{const{id:t,author:s=null,updateAuthor:n=null,timeSpent:a,started:i,created:r,updated:o,comment:c=null}=e,l=o!==r;return{id:t,author:s&&$e(s),timeSpent:a,started:Ge()(i).valueOf(),updated:l?Ge()(o).valueOf():null,updateAuthor:l&&n?$e(n):null,comment:Object(Fe.h)(c)}},ze=e=>e.map(qe);var Ye=n("./node_modules/lodash/omitBy.js"),Qe=n.n(Ye),Je=n("./node_modules/query-string/index.js"),Ze=n("./src/packages/platform/utils/fetch/src/utils/requests.js");const Xe=(e,t)=>`${e}/rest/internal/3/issue/${t}/worklog`,et=e=>!e;var tt=n("./src/packages/platform/utils/xsrf-token/src/index.js"),st=n("./src/packages/issue/issue-view/src/common/actions/worklog-actions.js");function nt(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function at(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?nt(Object(s),!0).forEach((function(t){it(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):nt(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function it(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var rt=Object(Ae.combineEpics)((e,t)=>e.ofType(st.a).switchMap(e=>{const s=t.getState(),n=Object(re.g)(s),a=Object(he.l)(Object(re.B)(s)),i=Object(Ve.h)(s),r=Object(Ve.i)(s),o=Object(Ke.a)(i.daysPerWeek,i.hoursPerDay),{payload:{values:c},meta:{analyticsEvent:l}}=e,{timeRemaining:u,workDescription:d}=c||{},p=!!Be(d)&&Object(Fe.d)(d);return Ne.Observable.from(((e,t,s)=>{const{timeLogged:n,workDescription:a,timeRemaining:i,dateStarted:r}=s||{},o=Qe()({adjustEstimate:i?"new":"auto",newEstimate:i},et),c=`${Xe(e,t)}?${Object(Je.stringify)(o)}`;return Object(Ze.d)(c,{body:JSON.stringify({timeSpent:n,comment:a,started:s.dateStarted?Ge()(r).format("YYYY-MM-DDTHH:mm:ss.SSSZZ"):void 0})})})(n,a,c)).mergeMap(e=>{const t=qe(e),s=We(t);Object(Ue.a)(l,{action:"added",actionSubjectId:t.id,attributes:{withComment:s}});const n=(r.timeSpentSeconds||0)+e.timeSpentSeconds,a=o(u),i=at(at({},r),{},{timeSpentSeconds:n},null!==a?{remainingEstimateSeconds:a}:{});return Ne.Observable.of(Object(st.n)(e.id,i,{shouldFetchViewContext:p}),Object(st.A)(e.id))}).catch(e=>{const{timeLogged:t}=c,s={logTimeLength:t&&t.length,remainingTimeLength:u&&u.length};return Re.i.safeError("issue.activity.worklog.add-worklog",`Failed to save new worklog with input lengths: ${JSON.stringify(s)}`,e),Ne.Observable.of(Object(st.l)())})}),(e,t)=>e.ofType(st.k).switchMap(e=>{const s=t.getState(),n=Object(re.g)(s),a=Object(Z.l)(s),i=Object(Ve.h)(s),r=Object(Ke.a)(i.daysPerWeek,i.hoursPerDay),{payload:{timeRemaining:o},meta:{analyticsEvent:c}}=e;return Ne.Observable.from(((e,t,s)=>Object(Ze.d)(`${e}/secure/AjaxIssueAction.jspa?decorator=none`,{headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Object(Je.stringify)({issueId:t,timetracking_remainingestimate:s,timetracking_targetsubfield:"timetracking_remainingestimate",fieldsToForcePresent:"timetracking",singleFieldEdit:!0,skipScreenCheck:!0,atl_token:Object(tt.a)()})}))(n,a,o)).do(()=>{Object(Ue.a)(c,{action:"time-remaining-updated"})}).map(()=>Object(st.L)(r(o))).catch(e=>{const t=o&&o.length;return Re.i.safeError("issue.activity.worklog.update-time-remaining",`Failed to update time remaining with input length: ${t}`,e),Ne.Observable.of(Object(st.J)())})})),ot=n("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),ct=(e,t,s,n,a)=>((e,t,s,n,a)=>Object(Ze.a)(`${Xe(e,t)}/${s}?adjustEstimate=${a?`new&newEstimate=${n}`:"leave"}`))(e,t,s,n,a);const lt=(e,t)=>e.ofType(st.c).switchMap(()=>{const e=t.getState();if(Object(Ve.g)(e).length>0)return Ne.Observable.empty();const s=Object(re.g)(e),n=Object(re.B)(e),a=Object(Ve.n)(e),i=Object(Ve.k)(e);return a>0?Ne.Observable.of(Object(st.w)(s,n)):i>a?Ne.Observable.of(Object(st.y)(s,n)):Ne.Observable.empty()}),ut=e=>(t,s)=>t.ofType(st.b).switchMap(({payload:{worklogId:t,timeRemaining:n,isAdjustTimeRemainingChecked:a},meta:{analyticsEvent:i}})=>{const r=s.getState(),o=Object(re.g)(r),c=Object(he.l)(Object(re.B)(r)),l=Object(Ve.m)(r)[t],u=l&&l.comment,d=null!==u&&Object(Fe.d)(u);return Ne.Observable.from(ct(o,c,t,n,a)).map(()=>{const s=Object(Ve.m)(r)[t];return d&&e.refreshAttachments(Object(he.l)(c)),Object(st.r)(t,((e,t,s)=>{const n=Object(Ve.h)(e),a=Object(Ke.a)(n.daysPerWeek,n.hoursPerDay);return{timeSpentSecondsDelta:-(a(t.timeSpent)||0),newRemainingEstimateSeconds:a(s)}})(r,s,n))}).do(()=>Object(Ue.a)(i,{action:"deleted",actionSubjectId:t,attributes:{timeAdjusted:a}})).catch(e=>(Re.i.safeError("issue.activity.worklog.delete-worklog",`Could not delete worklog '${t}'`,new ot.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Ne.Observable.of(Object(st.p)())))});const dt=()=>({type:"FETCH_VIEW_CONTEXT_REQUEST"}),pt=e=>({type:"FETCH_VIEW_CONTEXT_SUCCESS",payload:e}),mt=e=>({type:"FETCH_VIEW_CONTEXT_FAILURE",payload:{error:e}}),bt=()=>({type:"MARK_TOKEN_AS_OUTDATED"});var ft=n("./node_modules/lodash/isUndefined.js"),gt=n.n(ft);var ht=(e,t,s,n)=>Object(Ze.e)(((e,t,s,n)=>{const a=n.timeRemaining?`?adjustEstimate=new&newEstimate=${n.timeRemaining}`:"?adjustEstimate=leave";return`${Xe(e,t)}/${s}${a}`})(e,t,s,n),(e=>({body:JSON.stringify(Qe()({timeSpent:e.timeLogged,started:e.dateStarted?Ge()(e.dateStarted).format("YYYY-MM-DDTHH:mm:ss.SSSZZ"):void 0,comment:e.workDescription},gt.a))}))(n));function yt(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Ot(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?yt(Object(s),!0).forEach((function(t){jt(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):yt(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function jt(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var Et=(e,t)=>e.ofType(st.d).switchMap(e=>{const s=t.getState(),n=Object(re.g)(s),a=Object(he.l)(Object(re.B)(s)),i=Object(Ve.m)(s),{payload:{worklogId:r,values:o},meta:{analyticsEvent:c}}=e;let l=!1;return Be(o.workDescription)&&(l=Object(Fe.e)(i[r].comment,o.workDescription),l&&t.dispatch(bt())),Ne.Observable.from(((e,t,s,n)=>ht(e,t,s,n).then(e=>qe(e)))(n,a,r,o)).do(e=>{const t=We(e);Object(Ue.a)(c,{action:"edited",actionSubjectId:r,attributes:{withComment:t}})}).mergeMap(e=>{const t=Ot(Ot({},i),{},{[r]:e}),n=Object(st.v)(t,e.id,((e,t,s)=>{const n=Object(Ve.h)(e),a=Object(Ke.a)(n.daysPerWeek,n.hoursPerDay),i=Object(Ve.m)(e)[t.id];if(!i)return Re.i.safeError("issue.activity.worklog.edit-worklog","Could not find existing worklog with matching ID when editing a worklog and calculating time tracking deltas."),{timeSpentSecondsDelta:0,newRemainingEstimateSeconds:a(s)};const r=a(i.timeSpent)||0;return{timeSpentSecondsDelta:(a(t.timeSpent)||0)-r,newRemainingEstimateSeconds:a(s)}})(s,e,o.timeRemaining),{shouldFetchViewContext:l});return e.started!==i[r].started?Ne.Observable.of(n,Object(st.A)(r)):Ne.Observable.of(n)}).catch(e=>(Re.i.safeError("issue.activity.worklog.edit-worklog","Failed to save edited worklog:",new ot.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Ne.Observable.of(Object(st.t)())))}),vt=n("./src/packages/platform/observability/analytics-web-react/src/utils/fire-operational-event.js");const kt=(e,t,s)=>`\n    query {\n        viewIssue(issueKey: "${e}") {\n            worklogs (startAt: ${t}, maxResults: ${s}, orderBy: "-started") {\n                nodes {\n                id\n                author {\n                    accountId\n                    displayName\n                    avatarUrl\n                }\n                timeSpent\n                started\n                updated\n                created\n                updateAuthor {\n                    accountId\n                    displayName\n                    avatarUrl\n                }\n                comment\n            }\n            totalCount\n            startIndex\n            }\n        }\n    }\n`,wt=(e,t)=>`\n    query {\n        viewIssue(issueKey: "${e}") {\n            worklogs (worklogId: "${t}", orderBy: "-started") {\n                nodes {\n                id\n                author {\n                    accountId\n                    displayName\n                    avatarUrl\n                }\n                updateAuthor {\n                    accountId\n                    displayName\n                    avatarUrl\n                }\n                created\n                started\n                updated\n                comment\n                timeSpent\n                timeSpentSeconds\n            }\n            totalCount\n            startIndex\n            }\n        }\n    }\n`;function St(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function It(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?St(Object(s),!0).forEach((function(t){Ct(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):St(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Ct(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Tt(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const Pt=e=>{const{totalCount:t,nodes:s,startIndex:n}=e.data.viewIssue.worklogs,a=s.map(e=>{let{updateAuthor:t=null,updated:s,comment:n,created:a}=e;const i=s!==a;return It(It({},Tt(e,["updateAuthor","updated","comment","created"])),{},{updated:i?s:null,updateAuthor:i&&t?t:null,comment:Object(Fe.a)(n)})});return{totalWorklogs:t,sortedWorklogIds:a.map(e=>e.id).reverse(),worklogs:a.reduce((e,t)=>It(It({},e),{},{[t.id]:t}),{}),startIndex:n||0}},_t=(e,t,s)=>((e,t,s)=>Object(Ze.d)(`${e}/rest/gira/1/`,{body:JSON.stringify({query:wt(t,s),variables:{issueKey:t}})}))(e,t,s).then(Pt);var xt=(e,t,s,n)=>((e,t,s,n)=>Object(Ze.d)(`${e}/rest/gira/1/`,{body:JSON.stringify({query:kt(t,s,n),variables:{issueKey:t}})}))(e,t,s,n).then(Pt);const Dt=(e,t,s,n,a,i)=>Ne.Observable.from(xt(e,t,n,a)).do(e=>{s&&Object(vt.a)(s,{attributes:{worklogItemCount:e.worklogs.length}})}).map(({worklogs:e,totalWorklogs:t,sortedWorklogIds:s})=>i(s,e,t)).catch(e=>(Re.i.safeError("issue.activity.worklog.fetch-more-worklogs","Could not fetch more worklogs:",new ot.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e})),Ne.Observable.of(Object(st.D)()))),At=(e,t)=>e.ofType(st.f).switchMap(({payload:{baseUrl:e,issueKey:s,analyticsEvent:n}})=>{const a=t.getState(),i=Object(Ve.n)(a),r=Object(Ve.g)(a).length;return Dt(e,s,n,i+r,10,st.z)}),Mt=(e,t)=>e.ofType(st.e).switchMap(({payload:{baseUrl:e,issueKey:s,analyticsEvent:n}})=>{const a=t.getState(),i=Object(Ve.n)(a);return Dt(e,s,n,i>10?i-10:0,i>10?10:i,st.x)});var Lt=n("./src/packages/platform/ui/flags/src/index.js"),Rt=n("./src/packages/issue/issue-actions/activity-feed/src/messages.js"),Nt=n("./src/packages/issue/issue-scroll/src/services/types.js"),Ut=n("./src/packages/platform/utils/permalinks/src/index.js"),Ft=n("./src/packages/platform/utils/permalinks/src/constants.js"),Vt=n("./src/packages/issue/issue-view/src/actions/activity-feed-actions.js"),Kt=n("./src/packages/issue/issue-view/src/common/messages/flags.js");const Bt=(e,t)=>e.ofType(st.g).switchMap(e=>{const s=t.getState(),n=Object(re.g)(s),a=Object(he.l)(Object(re.B)(s)),{payload:i}=e;return Ne.Observable.from(_t(n,a,i.worklogId)).map(({totalWorklogs:e,worklogs:t,sortedWorklogIds:s,startIndex:n})=>Object(st.C)(s,t,n||0,e)).catch(e=>(Re.i.safeError("issue.activity.worklog.fetch-worklog-by-id","Failed to load worklog list after adding new worklog",e),Ne.Observable.of(Object(st.B)())))});var Wt=(e,t,s,n,a)=>((e,t,s,n,a)=>Object(Ze.b)(`${Xe(e,t)}?startAt=${s}&reverseSortOrder=${a?"true":"false"}${n?`&maxResults=${n}`:""}`))(e,t,s,n,a).then(e=>(e=>({totalWorklogs:e.total,worklogs:ze(e.worklogs)}))(e));function Ht(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Gt(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ht(Object(s),!0).forEach((function(t){$t(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ht(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function $t(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const qt=(e,t,s,n,a)=>Ne.Observable.from(Wt(e,t,n,a,!0)).do(e=>Object(vt.a)(s,{attributes:{worklogItemCount:e.worklogs.length}})).map(({totalWorklogs:e,worklogs:t})=>Object(st.G)(t.map(e=>e.id),t.reduce((e,t)=>Gt(Gt({},e),{},{[t.id]:t}),{}),e)).catch(e=>(Re.i.safeError("issue.activity.worklog.fetch-worklogs","Could not fetch worklogs:",new ot.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e})),Ne.Observable.of(Object(st.D)()))),zt=(e,t)=>e.ofType(st.h,st.j).switchMap(({payload:{baseUrl:e,issueKey:s},meta:{analyticsEvent:n}})=>{const a=t.getState(),i=Object(Ve.g)(a).length;return qt(e,s,n,i,10)}),Yt=e=>e.ofType(st.i).switchMap(({payload:{baseUrl:e,issueKey:t},meta:{analyticsEvent:s}})=>qt(e,t,s,0,5)),Qt=(e,t)=>Object(Ae.combineEpics)(rt,zt,Yt,Bt,(e=>(t,s)=>t.ofType("SCROLL_TO_ATTACHMENT_WORKLOG").switchMap(()=>{const t=s.getState(),n=Object(re.g)(t),a=Object(he.l)(Object(re.B)(t)),i=e.getScrollTargetId(Nt.a.WORKLOG);return null===i?Ne.Observable.of():Ne.Observable.from(_t(n,a,i)).flatMap(({totalWorklogs:t,worklogs:s,sortedWorklogIds:n,startIndex:a})=>{const r={key:"Worklog",type:"Worklog",name:Rt.a.worklog.defaultMessage};return window.history.replaceState({},null,Object(Ut.c)(i,Ft.b.WORKLOG)),e.setScrollTarget(null),Ne.Observable.of(Object(st.C)(n,s,a||0,t),Object(Vt.a)(r),Object(st.I)(!1))}).catch(e=>{Re.i.safeError("issue.activity.worklog.fetch-worklog-by-id","Failed to load worklog list after attempting worklog attachment fetch",e);const{showFlag:t}=Object(Lt.useFlagsService)();return t({type:"error",title:[Kt.a.commentWorklogAttachmentFetchFailedTitle,{field:"worklog"}],description:Kt.a.commentWorklogAttachmentFetchFailedDescription,isAutoDismiss:!0}),Ne.Observable.of(Object(st.B)())})}))(t),Et,(e=>Object(Ae.combineEpics)(ut(e),lt))(e),Mt,At),Jt=(e,t)=>Qt(e,t);var Zt=n("./node_modules/rxjs/operators.js"),Xt=n("./node_modules/lodash/curry.js");const es=({meta:{batch:e}={}})=>!0===e,ts=n.n(Xt)()((e,{type:t})=>e.includes(t));var ss=(...e)=>t=>t.pipe(Object(Zt.filter)(t=>es(t)?t.payload.some(ts(e)):e.includes(t.type)),Object(Zt.flatMap)(t=>es(t)?Ne.Observable.from(t.payload.filter(ts(e))):Ne.Observable.of(t))),ns=n("./node_modules/icepick/icepick.js"),as=n("./src/packages/platform/utils/constants/src/issue-link-types.js"),is=n("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),rs=n("./src/packages/issue/issue-view/src/issue-field/state/selectors/hierarchy-level-selector.js"),os=n("./src/packages/issue/issue-view/src/selectors/comment-selector.js"),cs=n("./src/packages/issue/issue-view/src/selectors/issue-links-selector.js"),ls=e=>/[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}/i.test(e);function us(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function ds(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?us(Object(s),!0).forEach((function(t){ps(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):us(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function ps(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const ms=Object(Re.j)("comment","description"),bs=e=>{switch(e){case"AUTHENTICATION_ERROR":return"AUTHENTICATION";case"NOT_FOUND_OR_NO_PERMISSION_ERROR":return"PERMISSION";case"UNKNOWN_ERROR":case"CONNECTIVITY_ERROR":default:return"GENERIC"}},fs=Object(Re.j)("AUTHENTICATION","PERMISSION","GENERIC"),gs=Object(Re.j)("assignee","labels","priority","components","fixVersions","versions","com.pyxis.greenhopper.jira:gh-sprint","duedate","com.pyxis.greenhopper.jira:gh-epic-link","reporter","com.atlassian.jira.plugin.system.customfieldtypes:storypoint","description","watches","summary","timeoriginalestimate","timetracking","com.atlassian.jira.plugin.system.customfieldtypes:labels","com.atlassian.jira.plugin.system.customfieldtypes:textfield","com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker","com.atlassian.jira.plugin.system.customfieldtypes:url","com.atlassian.jira.plugin.system.customfieldtypes:float","com.pyxis.greenhopper.jira:jsw-story-points","com.atlassian.jira.plugin.system.customfieldtypes:select","com.atlassian.jira.plugin.system.customfieldtypes:multiselect","com.atlassian.jira.plugin.system.customfieldtypes:version","com.atlassian.jira.plugin.system.customfieldtypes:textarea","com.atlassian.jira.plugin.system.customfieldtypes:multiversion","com.atlassian.jira.plugin.system.customfieldtypes:datepicker","com.atlassian.jira.plugin.system.customfieldtypes:grouppicker","com.atlassian.jira.plugin.system.customfieldtypes:multigrouppicker","com.atlassian.jira.plugin.system.customfieldtypes:userpicker","com.atlassian.jira.plugin.system.customfieldtypes:flagged","com.atlassian.jira.plugin.system.customfieldtypes:datetime","com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes","com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons","com.atlassian.teams:rm-teams-custom-field-team","com.atlassian.jpo:jpo-custom-field-parent","com.atlassian.jpo:jpo-custom-field-baseline-start","com.atlassian.jpo:jpo-custom-field-baseline-end","com.pyxis.greenhopper.jira:jsw-issue-color","com.atlassian.servicedesk:vp-origin","com.atlassian.servicedesk.assets-plugin:assetfield","com.atlassian.jira.plugins.service-entity:service-entity-field-cftype","com.atlassian.servicedesk:sd-request-participants","com.atlassian.servicedesk:sd-customer-organizations","com.atlassian.servicedesk.servicedesk-lingo-integration-plugin:sd-request-language","com.atlassian.jira.plugin.system.customfieldtypes:people","com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect"),hs=e=>t=>({eventData:Object(K.a)(t),eventNameSuffix:e}),ys=e=>e.startsWith("comment")?"comment":e,Os=e=>(t,s)=>{const{payload:{fieldId:n}}=s,a=null!==n&&ys(n);return{eventNameSuffix:e,eventData:{type:ms(a)}}},js=e=>(t,s)=>{const{payload:{fieldId:n}}=s,a=null!=n?ys(n):n;return{eventNameSuffix:e,eventData:{type:ms(a)}}},Es=e=>["updatedField","oldValId","newValId","oldValName","newValName"].filter(t=>e&&Object.hasOwnProperty.call(e,t)).reduce((t,s)=>{const n=e[s]?{[s]:e[s]}:{};return ds(ds({},t),n)},{}),vs=e=>({eventData:{commentCount:Object(os.J)(e)}}),ks=e=>{const t=(e=>e?JSON.stringify(e).length:0)(e.bodyAdf);return{isInternal:e.isInternal,charactersInCommentCount:t}};var ws={SAVE_LINKED_ISSUE_REQUEST:(e,t)=>Object(ns.merge)(hs("issue-links.save.request"),((e,t)=>{const{payload:{newIssueLinks:{issueLinkType:s,issueLinks:n}}}=t,a=(null!=n&&null!==n.linkedIssues&&void 0!==n.linkedIssues&&Object.keys(n.linkedIssues).length>0?Object.keys(n.linkedIssues).map(e=>n.linkedIssues[e].issueId):[""])[0];return{eventData:{issueLinkTypeId:s.id,issueLinkTypeName:new se.a(Object(as.a)(s.label)),issueLinkLinkedIssueId:a}}})(0,t)),SAVE_REMOTE_LINKED_ISSUE_REQUEST:hs("issue-links.save.request"),DELETE_LINKED_ISSUE_REQUEST:(e,t)=>Object(ns.merge)(hs("issue-links.delete.request"),(e=>({eventData:{issueLinkTypeId:e.typeId,issueLinkTypeName:new se.a(Object(as.a)(e.typeName))}}))(Object(cs.g)(t.payload.linkedIssueId)(e))),SAVE_LINKED_ISSUE_SUCCESS:hs("issue-links.save.success"),SAVE_LINKED_ISSUE_FAILURE:hs("issue-links.save.failure"),SAVE_REMOTE_LINKED_ISSUE_SUCCESS:hs("issue-links.save.success"),SAVE_REMOTE_LINKED_ISSUE_FAILURE:hs("issue-links.save.failure"),SAVE_LINKED_ISSUE_RETRY:hs("issue-links.save.retry"),SAVE_REMOTE_LINKED_ISSUE_RETRY:hs("issue-links.save.retry"),SAVE_LINKED_ISSUE_CANCEL:hs("issue-links.save.cancel"),SHOW_DELETE_COMMENT_MODAL:hs("comment.delete.linkclicked"),FETCH_OLDER_COMMENTS_REQUEST:hs("comment.fetcholder.click"),FETCH_NEWER_COMMENTS_REQUEST:hs("comment.fetchnewer.click"),EDIT_COMMENT_BEGIN:e=>hs("comment.edit.linkclicked")(e),SAVE_COMMENT_SUCCESS:(e,t)=>Object(ns.merge)(hs("comment.save.success")(e),{eventData:ds(ds({},Es(t.payload)),{},{actionSubjectId:new se.a(t.payload.comment.id),actionSubjectOptimisticId:new se.a(t.payload.optimisticId)},ks(t.payload.comment))}),DELETE_COMMENT_REQUEST:(e,t)=>Object(ns.merge)(hs("comment.delete.modal.confirm")(e),{eventData:ds(ds({},Es(t.payload)),{},{actionSubjectId:new se.a(t.payload.id)})}),PASTED_INTO_COMMENT_FORM:(e,t)=>Object(ns.merge)(hs("comment.paste")(e),{eventData:{isNewComment:"NEW_OPTIMISTIC_COMMENT"===t.payload.id,pastedContentLength:(t.payload.pastedContent||"").length,containsEmailAddress:ls(t.payload.pastedContent)}}),FETCH_ISSUE_SUCCESS:e=>Object(ns.merge)(hs("fetchissue.succeeded")(e),vs(e)),REFRESH_ISSUE_SUCCESS:e=>Object(ns.merge)(hs("refreshissue.succeeded")(e),vs(e)),REFRESH_ISSUE_REQUEST:hs("refreshissue.request"),FETCH_ISSUE_REQUEST:hs("fetchissue.request"),LOAD_NEW_ISSUE:hs("load-new-issue"),FETCH_ISSUE_FAILURE:(e,t)=>({eventNameSuffix:"fetchissue.failed",eventData:{error:fs(bs(Object(Z.h)(e))),statusCode:t.payload.statusCode,analyticsSource:Object(re.b)(e)}}),DELETE_DRAFT_REQUEST:Os("issue.delete-draft.request"),DELETE_DRAFT_SUCCESS:Os("issue.delete-draft.success"),DELETE_DRAFT_FAILURE:Os("issue.delete-draft.failure"),DELETE_DRAFT_NEWER_CONTENT_FOUND:Os("issue.delete-draft.replaced-by-new-content"),LOAD_DRAFT_SUCCESS:js("issue.load-draft.success"),LOAD_DRAFT_FAILURE:js("issue.load-draft.failure"),LOGIN_SUCCESSFUL:e=>({eventNameSuffix:"login.succeeded",eventData:{analyticsSource:Object(re.b)(e)}}),FIELD_EDIT_BEGIN:(e,t)=>Object(ns.merge)(hs("field.edit")(e),{eventData:{fieldType:gs(Object(is.r)(t.payload.fieldId)(e)),fieldEditSessionId:new se.a(t.payload.fieldEditSessionId),isReusableField:!0}}),FIELD_SAVE_REQUEST:(e,t)=>Object(ns.merge)(hs("field.save")(e),{eventData:ds({fieldType:gs(Object(is.r)(t.payload.fieldId)(e)),fieldEditSessionId:new se.a(Object(is.f)(t.payload.fieldId)(e)),isReusableField:!0,issueHierarchyLevel:Object(rs.d)(e)},Es(t.payload.eventData))}),FIELD_EDIT_CANCEL:(e,t)=>Object(ns.merge)(hs("field.cancel")(e),{eventData:{fieldType:gs(Object(is.r)(t.payload.fieldId)(e)),fieldEditSessionId:new se.a(Object(is.f)(t.payload.fieldId)(e)),isReusableField:!0}}),FIELD_PASTE:(e,t)=>Object(ns.merge)(hs("field.paste")(e),{eventData:{fieldType:gs(Object(is.r)(t.payload.fieldId)(e)),isReusableField:!0,pastedContentLength:t.payload.pastedContent.length,containsEmailAddress:ls(t.payload.pastedContent)}})},Ss=Object(Re.n)("issue");function Is(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function Cs(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Ts(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Cs(Object(s),!0).forEach((function(t){Ps(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Cs(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Ps(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const _s=({eventNameSuffix:e,eventData:t,analyticsEvent:s})=>{if(s)try{const e=((e,t)=>{const s=t.payload&&t.payload.action||"updated",{actionSubjectId:n,name:a,tags:i,containerType:r,containerId:o,objectType:c,objectId:l}=e;return{action:s,actionSubjectId:n,name:a,tags:i,containerType:r,containerId:o,objectType:c,objectId:l,attributes:Is(e,["actionSubjectId","name","tags","containerType","containerId","objectType","objectId"])}})(t,s);Object(Ue.a)(s,e)}catch(a){Ie.a.safeError("issue.instrumentation.trigger-analytics-action","Failed to send action track event",new ot.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:a}))}const n=(e=>{if(e&&e.attributes){const{attributes:t}=e,s=Is(e,["attributes"]);return Ts(Ts({},t),s)}return e})(t);Ss(e,n)},xs=Object.keys(ws);var Ds=(e,t)=>e.pipe(ss(...xs),Object(Zt.map)(e=>((e,t)=>ws[t.type]&&Ts({analyticsEvent:t.payload&&t.payload.analyticsEvent},ws[t.type](e,t)))(t.getState(),e)),Object(Zt.filter)(e=>!!e),Object(Zt.tap)(_s),Object(Zt.ignoreElements)()),As=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/page-visibility/index.js"),Ms=n("./src/packages/issue/issue-fetch-services/src/services/issue-media-upload-permissions/index.js"),Ls=n("./src/packages/issue/issue-view/src/utils/prefetched-resources/utils/fallback-on-error.js"),Rs=n("./src/packages/issue/issue-view/src/common/state/selectors/media-context-selector.js"),Ns=n("./src/packages/issue/issue-view/src/common/util/errors/index.js");const Us=e=>((e,t,s)=>e.delay(t.delay,s||void 0).take(t.take).concat(e.flatMap(e=>Ne.Observable.throw(e))))(e,{delay:5e3,take:3});var Fs=n("./src/packages/issue/issue-view/src/common/media/upload-context/upload-context-actions.js"),Vs=e=>({clientId:e.clientId,serviceHost:e.endpointUrl,token:e.token,tokenLifespanInMs:60*e.tokenDurationInMins*1e3,collection:e.targetCollection,tokenIssueTimestamp:Date.now()-1e4});const Ks=e=>Ne.Observable.of(Object(Fs.b)(e)),Bs=(e,t,s)=>Object(Ls.a)(s,()=>Object(Ms.b)(e,t)).map(Vs).map(Fs.d).catch(e=>{if(403===e.statusCode)return Ks(e);throw e}).retryWhen(Us).catch(Ks);var Ws=n("./src/packages/issue/issue-view/src/common/media/user-auth/user-auth-actions.js"),Hs=n("./src/packages/issue/issue-fetch-services/src/services/issue-media-user-auth/index.js"),Gs=e=>({clientId:e.id,token:e.token,tokenLifespanInMs:60*e.tokenDurationInMins*1e3,tokenIssueTimestamp:Date.now()-1e4});const $s=e=>Ne.Observable.of(Object(Ws.b)(e.statusCode)),qs=(e,t)=>Object(Ls.a)(t,()=>Object(Hs.b)(e)).map(Gs).map(Ws.d).catch(e=>{if(403===e.statusCode)return $s(e);throw e}).retryWhen(Us).catch($s);var zs=n("./src/packages/issue/issue-fetch-services/src/services/issue-media-read-permissions/index.js"),Ys=n("./src/packages/issue/issue-view/src/common/media/view-context/view-context-transformer.js");const Qs=e=>Ne.Observable.of(mt(e)),Js=(e,t,s,n,a)=>Object(Ls.a)(a,()=>Object(zs.b)(e,t,s,n)).map(Ys.a).map(pt),Zs=(e,t,s,n,a)=>Js(e,t,s,n,a).catch(e=>{if(403===e.statusCode)return Qs(e);throw e}).retryWhen(Us).catch(Qs);var Xs=(e,t,s,n,a)=>Object(Ae.combineEpics)(((e,t)=>Object(Ae.combineEpics)((s,n)=>s.ofType("FETCH_UPLOAD_CONTEXT_REQUEST").switchMap(()=>{const s=n.getState(),a=e(s),i=t(s);return Bs(a,i)}),(e,t)=>e.pipe(ss("FETCH_UPLOAD_CONTEXT_SUCCESS","CHECK_UPLOAD_CONTEXT"),Object(Zt.switchMap)(()=>{const e=t.getState(),s=Object(Rs.b)(e);if(null==s||!Object(As.a)())return Ne.Observable.empty();const{tokenIssueTimestamp:n,tokenLifespanInMs:a}=s,i=n+a,r=Math.max(1,i-Date.now());return Ne.Observable.of(Object(Fs.c)()).delay(r)})),e=>e.ofType("FETCH_UPLOAD_CONTEXT_FAILURE").filter(({payload:e})=>403!==e.error.statusCode).do(({payload:e})=>{const{error:t}=e;Object(Ns.a)("issue.media.fetch-upload-context-error","Error when fetching media upload context",t,new ot.a({eventNameSuffix:"issue.error",type:"fetch",category:"media",app:"issue",event:{statusCode:t.statusCode}}))}).ignoreElements(),()=>Ne.Observable.fromEvent(window,"focus").startWith(null).debounceTime(1e3).switchMap(()=>Object(As.a)()?Ne.Observable.of(Object(Fs.a)()):Ne.Observable.empty())))(e,t),((e,t,s,n,a)=>Object(Ae.combineEpics)((i,r)=>i.ofType("FETCH_VIEW_CONTEXT_REQUEST").switchMap(()=>{const i=r.getState(),o=e(i),c=t(i),l=Object(F.isIssueContextHooksConsumedPart1Enabled)()?a.getMaxTokenLength():s(i);return n.refreshAttachments(Object(he.l)(c)),Js(o,c,l).retryWhen(Us).catch(e=>Ne.Observable.of(mt(e)))}),(e,t)=>e.pipe(ss("FETCH_VIEW_CONTEXT_SUCCESS","CHECK_VIEW_CONTEXT"),Object(Zt.switchMap)(()=>{const e=t.getState(),s=Object(Rs.d)(e);if(null==s||!Object(As.a)())return Ne.Observable.empty();const{tokenIssueTimestamp:n,tokenLifespanInMs:a}=s,i=n+a,r=Math.max(1,i-Date.now());return Ne.Observable.of(dt()).delay(r)})),e=>e.ofType("FETCH_VIEW_CONTEXT_FAILURE").do(({payload:e})=>{const{error:t}=e;Object(Ns.a)("issue.media.fetch-view-context-error","Error when fetching media view context",t,new ot.a({eventNameSuffix:"issue.error",type:"fetch",category:"media",app:"issue",event:{statusCode:t.statusCode}}))}).ignoreElements(),()=>Ne.Observable.fromEvent(window,"focus").startWith(null).debounceTime(1e3).switchMap(()=>Object(As.a)()?Ne.Observable.of((()=>({type:"CHECK_VIEW_CONTEXT"}))()):Ne.Observable.empty())))(e,t,s,n,a),(e=>Object(Ae.combineEpics)((t,s)=>t.ofType("FETCH_USER_AUTH_REQUEST").switchMap(()=>{const t=s.getState(),n=e(t);return qs(n)}),(e,t)=>e.pipe(ss("FETCH_USER_AUTH_SUCCESS","CHECK_USER_AUTH"),Object(Zt.switchMap)(()=>{const e=t.getState(),s=Object(Rs.c)(e);if(null==s||!Object(As.a)())return Ne.Observable.empty();const{tokenIssueTimestamp:n,tokenLifespanInMs:a}=s,i=n+a,r=Math.max(1,i-Date.now());return Ne.Observable.of(Object(Ws.c)()).delay(r)})),e=>e.ofType("FETCH_USER_AUTH_FAILURE").filter(({payload:e})=>403!==e.statusCode).do(({payload:e})=>{Object(Ns.a)("issue.media.fetch-user-auth-error","Error when fetching media user auth",e,new ot.a({eventNameSuffix:"issue.error",type:"fetch",category:"media",app:"issue",event:{statusCode:e.statusCode}}))}).ignoreElements(),()=>Ne.Observable.fromEvent(window,"focus").startWith(null).debounceTime(1e3).switchMap(()=>Object(As.a)()?Ne.Observable.of(Object(Ws.a)()):Ne.Observable.empty())))(e)),en=n("./src/packages/common-legacy-do-not-add-anything-new/src/storage/storage-provider.js"),tn=n("./src/packages/issue/issue-view/src/drafts/draft-actions.js"),sn=n("./src/packages/issue/issue-view/src/drafts/draft-utils.js");let nn;const an=(e,t)=>{const{payload:{fieldId:s,draftKey:n}}=e;if(s)return((e,t)=>{const s=Object(re.B)(e),n=Object(re.a)(e),a=Object(sn.c)(n,s,t),i=Object(sn.b)(a);return nn.remove(a),nn.remove(i),Ne.Observable.of(Object(tn.c)(t))})(t,s);const a=Object(sn.d)(n);return n?(e=>{const t=Object(sn.b)(e);return nn.remove(e),nn.remove(t),Ne.Observable.of(Object(tn.c)(e))})(a).catch(e=>(Object(Ns.a)("issue.draft.delete","Failed to delete a draft.",e),Ne.Observable.of(Object(tn.a)(a,e)))):Ne.Observable.empty()};var rn=(e,t)=>(nn=Object(en.b)("issue-drafts"),e.ofType("DELETE_DRAFT_REQUEST").mergeMap(e=>an(e,t.getState())).catch(e=>(e=>Ne.Observable.of(Object(tn.a)(null,e)))(e)));let on;var cn=e=>(on=Object(en.b)("issue-drafts"),e.ofType("LOAD_DRAFT_REQUEST").mergeMap(e=>(e=>{const{payload:{fieldId:t,draftKey:s,draftHandler:n}}=e,a=Object(sn.d)(s),i=on.get(s);if(i){const e=n?Ne.Observable.of(n(t,i)):Ne.Observable.empty(),s=Ne.Observable.of(Object(tn.f)(a,i));return Ne.Observable.concat(e,s).catch(e=>(Object(Ns.a)("issue.draft.fetch","Failed to fetch issue draft",e),Ne.Observable.of(Object(tn.d)(a,e))))}return Ne.Observable.empty()})(e)).catch(e=>(e=>Ne.Observable.of(Object(tn.d)(null,e)))(e)));let ln;var un=(e,t)=>(ln=Object(en.b)("issue-drafts"),e.ofType("SAVE_DRAFT_REQUEST").throttleTime(1e3,Ne.Scheduler.default,{leading:!0,trailing:!0}).switchMap(e=>((e,t)=>{const{payload:{fieldId:s,value:n}}=e,a=Object(re.B)(t),i=Object(re.a)(t),r=Object(sn.c)(i,a,s);return ln.set(r,n),Ne.Observable.of(Object(tn.i)(r,n))})(e,t.getState())).catch(e=>(e=>(Object(Ns.a)("issue.save-draft","Failed to save draft",e,new ot.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Ne.Observable.of(Object(tn.g)(e))))(e))),dn=n("./src/packages/platform/utils/fetch/src/utils/as-json-stream.js"),pn=n("./src/packages/platform/services/issue/src/source/issue-express/graphql-util.js");const mn=e=>`\n    mutation {\n        setActivitySortOrder(orderBy: ${e}) {\n            success\n            errors {\n                message\n            }\n        }\n    }\n`,bn=e=>{const{errors:t}=e.setActivitySortOrder;if(t&&t.length>0){const e={eventNameSuffix:"issue.error",type:"update",app:"issue",event:new Error(t[0].message)};Ie.a.safeError("issue.activity-feed.sort.save.gira","Error present in gira response when calling to update setActivitySortOrder",new ot.a(e))}return e.setActivitySortOrder},fn=(e,t)=>Object(dn.a)(`${e}/rest/gira/1/`,(e=>({method:"POST",body:JSON.stringify({query:mn(e)})}))(t)).map(e=>Object(pn.b)("issue.activity-feed.sort.save.gira",e)).map(bn);var gn=(e,t)=>e.ofType("UPDATE_ACTIVITY_SORT_ORDER_REQUEST").switchMap(e=>{const s=t.getState(),n=Object(re.g)(s);return fn(n,e.payload).ignoreElements()}).catch(e=>(Object(Ns.a)("issue.activity-feed.sort.save.epic","Could not save sort order in jira issue view",e),Ne.Observable.empty())),hn=n("./src/packages/common-legacy-do-not-add-anything-new/src/authenticate-using-app-links/index.js"),yn=n("./src/packages/issue/issue-view/src/actions/applink-authentication-actions.js"),On=(e,t)=>e.ofType("APPLINK_AUTHENTICATION_REQUEST").mergeMap(e=>{const s=t.getState(),n=Object(re.g)(s),a=e.payload,{analyticsEvent:i}=e.meta,r=Object(hn.a)(`${n}${a}`);return Object(F.isRemoteIssueLinksEnabled)()&&i&&Object(ne.f)(i,"applink authenticate",{authStatus:"start"}),r?Ne.Observable.fromPromise(r).map(()=>(Object(F.isRemoteIssueLinksEnabled)()&&i&&Object(ne.f)(i,"applink authenticate",{authStatus:"success"}),Object(yn.b)())).catch(e=>(Object(Ns.a)("issue-applink-authentication-epic","Failed to authenticate with applinks",e,new ot.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Ne.Observable.empty())):Ne.Observable.empty()}),jn=n("./node_modules/lodash/get.js"),En=n.n(jn),vn=n("./src/packages/issue/issue-view/src/actions/assign-issue-parent-modal-actions.js");var kn=n("./src/packages/issue/issue-view/src/common/service/issue/issue-urls.js");const wn=(e,t)=>`project=${e} AND issuetype in (${t.join(",")}) ORDER BY lastViewed DESC, updated DESC, priority DESC`,Sn=({issues:e})=>e.map(({id:e,key:t,fields:{summary:s,issuetype:n}})=>({id:Object(he.j)(e),key:Object(he.l)(t),summary:s,issueType:n}));function In(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Cn(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?In(Object(s),!0).forEach((function(t){Tn(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):In(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Tn(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Pn=e=>e.reduce((e,t)=>Cn(Cn({},e),{},{[t.id]:t.parentId}),{});var _n=Object(Ae.combineEpics)((e,t)=>e.ofType("FETCH_ISSUE_PARENTS_REQUEST").mergeMap(()=>{const e=t.getState();return((e,t,s)=>t?Object(dn.a)(Object(kn.p)(e),{method:"POST",body:JSON.stringify({jql:wn(t,s)})}).map(Sn):Ne.Observable.of([]))(Object(re.g)(e),Object(Z.D)(e),Object(rs.e)(e))}).map(vn.c).catch(e=>(Object(Ns.a)("issue.fetch-parent.failure","",e,new ot.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Object(vn.a)())),(e,t)=>e.ofType("SET_PARENT_REQUEST","SET_PARENT_OPTIMISTIC").mergeMap(e=>{const s=t.getState(),{payload:{issues:n}}=e,a="SET_PARENT_OPTIMISTIC"===e.type?e.payload.parentIssue&&e.payload.parentIssue.id:e.payload.parentId,i=Object(Z.C)(s),r="SET_PARENT_OPTIMISTIC"===e.type?e.payload.parentIssue:i.find(e=>e.id===a),o=n.filter(e=>e.parentId!==a&&e.id).map(e=>Number(e.id)),c=Pn(n.filter(e=>o.includes(Number(e.id))));if(!o.length)return Ne.Observable.empty();const l=Object(re.g)(s),u=Object(Z.D)(s);return("SET_PARENT_OPTIMISTIC"===e.type?Ne.Observable.fromPromise(e.payload.requestPromise):((e,t,s,n)=>t?Object(dn.a)(((e,t,s)=>`${e}/rest/internal/simplified/1.0/projects/${t}/issues/${s}/children`)(e,t,s),{method:"POST",body:JSON.stringify(n)}):Ne.Observable.throw("Missing Project Id"))(l,u,e.payload.parentId,{issueIds:o})).flatMap(()=>r?Ne.Observable.of(Object(vn.g)(r,c)):Ne.Observable.of(Object(vn.j)(c))).catch(e=>(Object(Ns.a)("issue.set-parent.failure","",e,new ot.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Ne.Observable.empty()))}),(e,t)=>e.ofType("UNSET_PARENT_REQUEST").mergeMap(e=>{const s=t.getState(),{payload:{issues:n}}=e,a=n.filter(e=>e.parentId&&e.id).map(e=>Number(e.id)),i=Pn(n.filter(e=>a.includes(Number(e.id))));return 0===a.length?Ne.Observable.empty():((e,t,s)=>t?Object(dn.a)(((e,t)=>`${e}/rest/internal/simplified/1.0/projects/${t}/issues/delete-parents`)(e,t),{method:"POST",body:JSON.stringify(s)}):Ne.Observable.throw("Missing Project Id"))(Object(re.g)(s),Object(Z.D)(s),{issueIds:a}).flatMap(()=>Ne.Observable.of(Object(vn.j)(i))).catch(e=>(Object(Ns.a)("issue.unset-parent.failure","",e,new ot.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Ne.Observable.empty()))}),e=>e.ofType("SET_PARENT_SUCCESS","UNSET_PARENT_SUCCESS").map(e=>((e,t=null)=>({type:"ISSUE_RELATIONSHIP_UPDATE_SUCCESS",payload:{oldParentIdsByIssueIds:e,parentIssueId:t}}))(En()(e,"payload.oldParentIdsByIssueIds",null),En()(e,"payload.parentIssue.id",null)))),xn=n("./src/packages/issue/issue-view/src/actions/attachment-picker-actions.js"),Dn=n("./src/packages/issue/issue-view/src/selectors/attachment-picker-selector.js");const An=(e,t,s,n)=>{const a=((e,t)=>`${e}/rest/api/2/attachment/upload/issue/${t}`)(t,s),i=(e=>({method:"POST",body:JSON.stringify({fileId:e.id})}))(e);return Object(dn.a)(a,i).map(t=>((e,t,s)=>({id:`${e.attachmentId}`,mediaApiFileId:t.id,createdDate:t.createdDate,author:s,mimetype:t.mimetype,filename:t.filename}))(t,e,n))};var Mn=Object(Ae.combineEpics)((e,t)=>e.ofType("ATTACHMENT_MEDIA_SERVICES_UPLOAD_END").mergeMap(e=>{const s=t.getState(),n=Object(re.g)(s),a=Object(re.B)(s),i=Object(re.a)(s),r=Object(Dn.b)(e.payload.id)(s);return An(r,n,a,i).retry(3).map(xn.b).catch(e=>(Object(Ns.a)("issue.attachment.jira-create-error","Could not create attachment in Jira",e),Ne.Observable.of(Object(xn.a)(r,e.statusCode))))}),e=>e.ofType("ATTACHMENT_JIRA_CREATE_FAILURE").do(e=>{Ie.a.safeError("issue.attachment.jira-create-error","Could not create attachment in Jira",new ot.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:{statusCode:e.payload.statusCode}}))}).ignoreElements(),e=>e.ofType("MEDIA_PICKER_ERROR","ATTACHMENT_MEDIA_SERVICES_UPLOAD_ERROR").do(e=>{const{description:t,name:s,fileId:n}=e.payload;Ie.a.safeError("issue.attachment.media-services-upload-error","Could not upload attachment to Media Services",new ot.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:{description:t,name:s,fileId:n}}))}).ignoreElements());var Ln=Object(Ae.combineEpics)(e=>e.ofType("ATTACHMENT_MEDIA_SERVICES_UPLOAD_END").mapTo(bt()),e=>e.ofType("ATTACHMENT_JIRA_CREATE_FAILURE").mapTo((()=>({type:"MARK_TOKEN_AS_UP_TO_DATE"}))()),e=>e.ofType("ATTACHMENT_JIRA_CREATE_SUCCESS").mapTo(dt())),Rn=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/graphql-tags.js"),Nn=n("./src/packages/issue/issue-view/src/actions/card-cover-actions.js"),Un=n("./src/packages/issue/issue-view/src/selectors/card-cover-selectors.js");const Fn=kn.e,Vn=(e,t)=>{const s=`[${t}]`;return Rn.a`query {
            agile {
                board {
                    additionalBoardData(rapidViewId: ${e}) {
                        isMediaOnCardsEnabled
                    }
                    media(issueIds: ${s}) {
                        cardMedia {
                            issueId
                            attachmentId
                            availableAttachmentIds
                        }
                    }
                }
            }
    }`},Kn=e=>(Object(Ns.a)("issue.card-cover.fetch",e.message,e,new ot.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Ne.Observable.of(Object(Nn.a)()));var Bn=(e,t)=>e.pipe(ss("FETCH_ISSUE_SUCCESS","ATTACHMENT_JIRA_CREATE_SUCCESS"),Object(Zt.filter)(()=>Object(Un.b)(t.getState())),Object(Zt.flatMap)(()=>(e=>{const t=Object(re.J)(e),s=Object(Z.l)(e);return null==t||null==s?Ne.Observable.empty():Object(dn.a)(Fn(Object(re.g)(e)),{method:"POST",body:JSON.stringify({query:Vn(t,s)})})})(t.getState()).flatMap(e=>e.errors?Kn(e):(e=>{const t=En()(e,"data.agile.board.additionalBoardData.isMediaOnCardsEnabled",!1),s=En()(e,"data.agile.board.media.cardMedia[0].attachmentId",null),n=En()(e,"data.agile.board.media.cardMedia[0].availableAttachmentIds",[]);return Ne.Observable.of(Object(Nn.b)({isEnabled:t,attachmentId:s,availableAttachmentIds:n}))})(e)).catch(e=>Kn(e))));var Wn=(e,t)=>e.ofType("CARD_COVER_UPDATE_REQUEST").flatMap(e=>((e,t)=>{const s=Object(re.g)(e),n=Object(Z.l)(e),{attachmentId:a}=t.payload;if(null==n)return Ne.Observable.empty();const i={method:a?"PUT":"DELETE"};return Object(dn.a)(((e,t,s)=>{const n=`${e}/rest/greenhopper/1.0/xboard/work/media/${t}`;return s?`${n}?attachmentId=${s}`:n})(s,n,a),i)})(t.getState(),e).flatMap(()=>(()=>Ne.Observable.of(Object(Nn.e)()))()).catch(t=>((e,t)=>(Re.i.safeError("issue.card-cover.update",e,new ot.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:new Error(e)})),Ne.Observable.of(Object(Nn.c)(t.payload.currentAttachmentId))))(t,e))),Hn=n("./src/packages/common-legacy-do-not-add-anything-new/src/navigation/iframe-redirect/index.js"),Gn=n("./src/packages/issue/issue-view/src/actions/change-issue-type-actions.js");const $n=e=>e.issueTypes,qn=(e,t,s)=>((e,t,s)=>Object(dn.a)(`${e}/rest/internal/2/issue/${t}/changeissuetype`,{method:"post",body:JSON.stringify({targetIssueTypeId:s})}))(e,t,s).map(e=>e.changeSuccessful);var zn=n("./src/packages/issue/issue-view/src/common/service/issue/issue-fetch-server.js");const Yn=(e,t,s,n)=>{const a=((e,t,s)=>({action:e,actionSubjectId:Object(se.c)(t)(t),attributes:s}))(t,s,n);Object(Ue.a)(e,a)};var Qn=Object(Ae.combineEpics)((e,t)=>e.ofType("SIMPLE_CHANGE_ISSUE_TYPE_REQUEST").switchMap(e=>{const s=Object(re.g)(t.getState()),{issueKey:n,targetType:a,issueId:i,analyticsEvent:r,currentType:o}=e.payload;return!o.subtask&&a.subtask?(Yn(r,"updated","simpleChangeIssueTypeRedirect",{subTask:a.subtask}),Ne.Observable.of(Object(Gn.f)(i,o,a))):qn(s,n,a.id).map(e=>e?(Yn(r,"updated","simpleChangeIssueTypeSuccess"),Object(Gn.h)(n,a.name)):(Yn(r,"updated","simpleChangeIssueTypeRedirect",{subTask:a.subtask}),Object(Gn.f)(i,o,a))).catch(e=>(Re.i.safeError("change.issue.type.simplechange",e,new ot.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Ne.Observable.of(Object(Gn.e)(e))))}),(e,t)=>e.ofType("SIMPLE_CHANGE_ISSUE_TYPE_REQUEST_SUCCESS").switchMap(({payload:{issueKey:e}})=>Object(zn.c)(t.getState()).flatMap(s=>{if(!Object(F.isRemoveDataProviderRefresh)()){const n=t.getState(),a=Object.keys(Object(is.t)(n)).map(e=>Object(is.q)(e)(n)).filter(e=>!!e);return Ne.Observable.of(Object(N.d)(s),Object(Oe.b)(e,a))}return Ne.Observable.of(Object(N.d)(s))})),(e,t)=>e.ofType("SIMPLE_CHANGE_ISSUE_TYPE_NOT_ALLOWED").do(e=>{const s=Object(re.g)(t.getState()),{issueId:n,currentType:a,targetType:i}=e.payload;a.subtask&&i.subtask?Object(Hn.a)(`${s}/secure/MoveSubTaskChooseOperation!default.jspa?id=${n}`,!1):!a.subtask&&i.subtask?Object(Hn.a)(`${s}/secure/ConvertIssue.jspa?id=${n}`,!1):Object(Hn.a)(`${s}/secure/MoveIssue!default.jspa?id=${n}`,!1)}).ignoreElements()),Jn=n("./src/packages/issue/issue-view/src/common/service/issue/changeboarding-local-storage.js");const Zn=e=>(Ie.a.safeError("jira.user.issue.changeboarding.lastinteracted","Error saving last interacted changeboarding timestamp",new ot.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Ne.Observable.empty());var Xn=Object(Ae.combineEpics)(e=>e.ofType("CHANGEBOARDING_BANNER_SEEN").do(e=>{Object(Jn.d)(e.payload.currentSeenTimes+1),e.payload.firstSeenTimestamp||Object(Jn.c)(Date.now())}).ignoreElements(),(e,t)=>e.ofType("CHANGEBOARDING_TOUR_BEGIN","CHANGEBOARDING_BANNER_DISMISS").mergeMap(e=>Ne.Observable.of(e).mergeMap(()=>((e,t)=>{const s=Object(re.g)(e),n=Object(kn.b)(s);return Object(Ze.e)(n,{body:`${t}`})})(t.getState(),e.payload)).catch(Zn)).ignoreElements(),(e,t)=>e.ofType("OPT_OUT_REQUEST").switchMap(e=>{const s=`${Object(re.g)(t.getState())}/rest/greenhopper/1.0/profile/labs-panel/issue-details-popup`,{analyticsEvent:n}=e.payload;return Ne.Observable.from(Object(Ze.e)(s,{body:JSON.stringify({isEnabled:!1})})).map(()=>(n&&Object(ne.b)(n,"changeboarding optedOut"),window.location.reload())).catch(e=>(Ie.a.safeError("jira.issue.details.changeboarding.optout","Could not opt-out from new issue view",new ot.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Ne.Observable.empty()))}));const ea=e=>(Ie.a.safeError("jira.user.issue.clickthrough.lastinteracted","Error saving last interacted clickthrough timestamp",new ot.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Ne.Observable.empty());var ta=(e,t)=>e.ofType("CLICKTHROUGH_BANNER_DISMISS").mergeMap(e=>Ne.Observable.of(e).mergeMap(()=>((e,t)=>{const s=Object(re.g)(e),n=Object(kn.c)(s);return Object(Ze.e)(n,{body:`${t}`})})(t.getState(),e.payload)).catch(ea)).ignoreElements();const sa=["ADD_COMMENT_FORM_CANCEL","EDIT_COMMENT_CANCEL","SAVE_COMMENT_SUCCESS","DELETE_COMMENT_SUCCESS"];var na=e=>e.ofType(...sa).mergeMap(e=>(e=>{if("ADD_COMMENT_FORM_CANCEL"===e.type||e.payload.isNewComment)return Ne.Observable.of(Object(tn.b)({fieldId:Object(sn.a)("NEW_OPTIMISTIC_COMMENT")}));const t=(e=>{const t=(e.id||e.optimisticId).toString();return-1!==t.indexOf("NEW_OPTIMISTIC_COMMENT")?"NEW_OPTIMISTIC_COMMENT":t})(e.payload),s=Object(sn.a)(t);return Ne.Observable.of(Object(tn.b)({fieldId:s}))})(e)).catch(e=>(e=>(Ie.a.safeError("issue.comment-delete-draft",e,new ot.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Ne.Observable.empty()))(e)),aa=n("./src/packages/issue/issue-view/src/actions/comment-actions.js");const ia={method:"DELETE"},ra=(e,t,s)=>{const n=Object(re.g)(e),a=Object(he.l)(Object(re.B)(e)),i=((e,t,s)=>`${e}/rest/api/2/issue/${t}/comment/${s}`)(n,a,t),{bodyAdf:r}=Object(os.t)(e)[t],o=!!r&&Object(Fe.d)(r);return Object(dn.a)(i,ia).map(()=>(o&&s.refreshAttachments(a),Object(aa.h)(t))).catch(e=>((e,t)=>(Object(Ns.a)("issue.comment.delete","Could not delete a comment",e),Ne.Observable.of(404===e.statusCode?Object(aa.h)(t):Object(aa.f)(t))))(e,t))};var oa=e=>(t,s)=>t.ofType("DELETE_COMMENT_REQUEST").mergeMap(t=>{const n=s.getState(),a=t.payload.id;return ra(n,a,e)}),ca=n("./src/packages/issue/issue-view/src/epics/comment-fetch-epic.js");const la=(e,t,s)=>{const n=Object(re.a)(t),a=Object(re.B)(t);return Object(os.n)(t).map(i=>{const r=Object(sn.a)(i),o=Object(sn.c)(n,a,r),c=Object(os.f)(i)(t),l=null!=c?c:void 0;return Ne.Observable.of(Object(tn.e)(i,o,((e,t,s)=>e&&t===s.payload.id?aa.l:null)(s,i,e),l))})},ua=e=>(Object(Ns.a)("issue.comment-load-draft",e.message,e,new ot.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Ne.Observable.empty());var da=Object(Ae.combineEpics)((e,t)=>e.ofType("EDIT_COMMENT_BEGIN").mergeMap(e=>Ne.Observable.merge(...la(e,t.getState(),!0))).catch(e=>ua(e)),(e,t)=>e.pipe(ss("FETCH_ISSUE_SUCCESS","REFRESH_ISSUE_SUCCESS","FETCH_MORE_COMMENTS_SUCCESS","FETCH_LATEST_COMMENTS_SUCCESS"),Object(Zt.mergeMap)(e=>e.payload.comments?Ne.Observable.merge(...la(e,t.getState(),!1)):Ne.Observable.empty()),Object(Zt.catchError)(e=>ua(e))));var pa=e=>e.ofType("SAVE_COMMENT_SUCCESS").filter(e=>e.meta.shouldFetchViewContext).mapTo(dt());var ma=(e,t)=>e.ofType("EDIT_COMMENT_UPDATE").switchMap(e=>((e,t)=>{const{payload:{id:s,value:n}}=e,a=Object(os.f)(s)(t);return Ne.Observable.of(Object(tn.h)(Object(sn.a)(s),n,a))})(e,t.getState())).catch(e=>(e=>(Object(Ns.a)("issue.comment-save-draft",e.message,e,new ot.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Ne.Observable.empty()))(e)),ba=n("./src/packages/platform/utils/fetch/src/utils/errors.js"),fa=n("./src/packages/issue/issue-view/src/common/service/issue/comment-transformer.js");function ga(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function ha(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ga(Object(s),!0).forEach((function(t){ya(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ga(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function ya(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Oa=(e,t,s,n,a)=>{const i=((e,t)=>{const s=e.getState();if(Object(re.v)(s)){return{properties:[{key:"sd.public.comment",value:{internal:Object(os.C)(t)(s)}}]}}return{}})(e,t),r=((e,t)=>Object(os.z)(e.getState())?{visibility:"public"===t.type?null:t}:{})(e,a);return{method:n?"POST":"PUT",body:JSON.stringify(ha(ha({body:s},i),r))}},ja=t=>{if(t instanceof ba.b&&t.message)try{const e=JSON.parse(t.message);return e.errorMessages?e.errorMessages.join("; "):void 0}catch(e){return void Object(Ns.a)("issue.save.comment","Failed to parse FetchError",e)}},Ea=(e,{id:t,bodyAdf:s,isNewComment:n,analyticsEvent:a,visibility:i},{shouldFetchViewContext:r})=>Object(dn.a)(((e,t,s)=>{const n=e.getState();return(({baseUrl:e,issueKey:t,id:s="",isNewComment:n=!1})=>`${e}/rest/api/3/issue/${t}/comment${n?"":`/${s}`}`)({baseUrl:Object(re.g)(n),issueKey:Object(re.B)(n),id:t,isNewComment:s})})(e,t,n),Oa(e,t,s,n,i)).map(fa.c).map(fa.a).map(e=>Object(aa.A)(e,t,n,a,{shouldFetchViewContext:r})).catch(e=>(Object(Ns.a)("issue.save.comment","Failed to save a comment",e),Ne.Observable.of(Object(aa.x)({optimisticId:t,isServerValidationError:!!e&&400===e.statusCode,invalidMessage:ja(e)}))));var va=Object(Ae.combineEpics)((e,t)=>e.ofType("SAVE_COMMENT_RETRY").map(e=>{const s=t.getState(),{optimisticId:n,isNewComment:a}=e.payload;return Object(aa.y)(ha(ha({},Object(os.H)(n)(s)),{},{isNewComment:a}))}),(e,t)=>e.ofType("SAVE_COMMENT_REQUEST").groupBy(e=>e.payload.comment.id).mergeMap(e=>e.concatMap(e=>{const{id:s,bodyAdf:n,isNewComment:a,visibility:i}=e.payload.comment,{analyticsEvent:r}=e.payload;if(!n||Object(Fe.g)(n))return Ne.Observable.empty();let o=!1;if(a)o=Object(Fe.d)(n);else{const e=Object(os.t)(t.getState());o=Object(Fe.e)(e[s].bodyAdf,n)}return o&&t.dispatch(bt()),Ea(t,{id:s,bodyAdf:n,isNewComment:a,analyticsEvent:r,visibility:i},{shouldFetchViewContext:o}).mergeMap(e=>"SAVE_COMMENT_FAILURE"===e.type?Ne.Observable.of(e):a?Ne.Observable.zip(Ne.Observable.of(e),Ne.Observable.of(Object(aa.o)())).mergeMap(e=>Ne.Observable.from(e)):Ne.Observable.zip(Ne.Observable.of(e)).mergeMap(e=>Ne.Observable.from(e)))}))),ka=e=>e.ofType("ADD_COMMENT_FORM_EXPAND","EDIT_COMMENT_BEGIN","PASTED_INTO_COMMENT_FORM","SAVE_COMMENT_SUCCESS").groupBy(e=>{switch(e.type){case"ADD_COMMENT_FORM_EXPAND":return"NEW_OPTIMISTIC_COMMENT";case"EDIT_COMMENT_BEGIN":case"PASTED_INTO_COMMENT_FORM":return e.payload.id;case"SAVE_COMMENT_SUCCESS":return e.payload.optimisticId.startsWith("NEW_OPTIMISTIC_COMMENT")?"NEW_OPTIMISTIC_COMMENT":e.payload.optimisticId;default:return null}}).map(e=>{const t=e.filter(({type:e})=>"ADD_COMMENT_FORM_EXPAND"===e||"EDIT_COMMENT_BEGIN"===e);return e.window(t).map(e=>{const t=e.filter(({type:e})=>"SAVE_COMMENT_SUCCESS"===e),s=e.filter(({type:e})=>"PASTED_INTO_COMMENT_FORM"===e).takeUntil(t).reduce((e,t)=>[...e,t.payload.pastedContent],[]);return t.withLatestFrom(s).mergeMap(([e,t])=>{const{comment:s}=e.payload;return 0===t.length?Ne.Observable.empty():Ne.Observable.of(Object(aa.B)(s,t))})}).mergeAll()}).mergeAll(),wa=n("./src/packages/issue/issue-view/src/actions/fetch-confluence-app-links-actions.js");var Sa=e=>Object(dn.a)(Object(kn.d)(e)),Ia=(e,t)=>e.ofType("FETCH_CONFLUENCE_APP_LINKS_REQUEST").switchMap(()=>{const e=t.getState(),s=Object(re.g)(e);return Sa(s).map(wa.c).catch(e=>(Object(Ns.a)("issue.fetch.confluence-app-links-epic","FETCH_CONFLUENCE_APP_LINKS_REQUEST: Failed to fetch confluence app links data",e,new ot.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e})),Ne.Observable.of(Object(wa.b)())))}),Ca=n("./src/packages/issue/issue-view/src/actions/confluence-pages-actions.js");const Ta=e=>"blogpost"===e?"blogpost":"page",Pa=e=>{if(e.object.status.resolved){return{id:Object(he.e)(e.id),globalId:Object(he.s)(e.globalId),href:Object(he.i)(e.object.url),title:e.object.title,type:Ta(e.object.icon.title),lastUpdatedContext:{user:{displayName:Object(he.f)(e.object.status.icon.title),avatarUrl:Object(he.i)(e.object.status.icon.url16x16)}}}}return{id:Object(he.g)(e.id),error:e.object.status.icon.url16x16?"APPLINK_REQ_AUTH":"REMOTE_SERVER",link:{id:Object(he.g)(e.id),globalId:Object(he.s)(e.globalId),href:Object(he.i)(e.object.url)},repairLink:{href:Object(he.i)(e.object.status.icon.url16x16)}}};var _a=n("./src/packages/issue/issue-view/src/actions/fetch-recently-visited-confluence-pages-actions.js");const xa=["blogpost","page"],Da=e=>!e.includes("http")&&window&&window.location?`${window.location.protocol}//${window.location.host}${e}`:e;var Aa=e=>((e,t)=>e.map(e=>e.filter(e=>xa.includes(e.type)).map(e=>({id:Object(he.e)(e.id.toString()),globalId:Object(he.s)(""),href:Object(he.i)(Da(`${t}/wiki${e.url}`)),title:e.title,type:Ta(e.contentType),space:e.space}))))((e=>Object(dn.a)((e=>`${e}/wiki/rest/recentlyviewed/1.0/recent?limit=20`)(e)))(e),e);var Ma=Object(Ae.combineEpics)((e,t)=>e.ofType("CREATE_CONFLUENCE_PAGE_LINK_REQUEST").switchMap(e=>{const s=t.getState(),n=Object(re.g)(s),a=Object(re.A)(s),{pageHref:i}=e.payload,{analyticsEvent:r}=e.meta;return a?Ne.Observable.from((({baseUrl:e,issueId:t,pageHref:s})=>Object(Ze.d)(`${(e=>`${e}/rest/confluenceIssueLink/1/confluence`)(e)}${((e,t)=>`?issueId=${e}&pageUrl=${t}`)(t,s)}`,{body:JSON.stringify({})}).then(Pa))({baseUrl:n,pageHref:i,issueId:Object(he.j)(a.toString())})).do(e=>{Object(Ue.a)(r,{action:"created",actionSubjectId:e.id,attributes:{createdWithError:!!En()(e,"error"),needsAuthorization:!!En()(e,"repairLink.href")}})}).map(e=>Object(Ca.d)(e)).catch(e=>(Object(Ns.a)("issue.fetch.confluence-pages-epic","CREATE_CONFLUENCE_PAGE_LINK_REQUEST",e,new ot.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Ne.Observable.of(Object(Ca.a)(e.message)))):(Re.i.safeError("issue.fetch.confluence-pages-epic","CREATE_CONFLUENCE_PAGE_LINK_REQUEST",new ot.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:new Error("addconfluencelink.error.issueId.invalid")})),Ne.Observable.of(Object(Ca.a)("addconfluencelink.error.issueId.invalid")))}),(e,t)=>e.ofType("DELETE_CONFLUENCE_PAGE_LINK_REQUEST").switchMap(e=>{const s=t.getState(),n=Object(re.g)(s),a=Object(re.B)(s),{globalId:i}=e.payload;return Ne.Observable.fromPromise(((e,t,s)=>Object(Ze.a)(`${e}/rest/api/2/issue/${t}/remotelink?globalId=${encodeURIComponent(s)}`))(n,a,i)).map(Ca.g).catch(e=>(Object(Ns.a)("issue.fetch.confluence-pages-epic","DELETE_CONFLUENCE_PAGE_LINK_REQUEST: Failed to delete confluence page link",e,new ot.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Ne.Observable.of(Object(Ca.e)())))}),(e,t)=>e.ofType("FETCH_RECENTLY_VISITED_CONFLUENCE_PAGES_REQUEST").switchMap(()=>{const e=t.getState(),s=Object(re.g)(e);return Aa(s).map(_a.c).catch(e=>{const t={eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e};return Re.i.safeError("issue.fetch.confluence-recently-viewed-epic","FETCH_RECENTLY_VISITED_CONFLUENCE_PAGES_REQUEST: Failed to fetch recently viewed confluence pages",new ot.a(t)),Ne.Observable.of(Object(_a.a)())})})),La=n("./src/packages/issue/issue-view/src/actions/issue-navigation-actions.js");var Ra=(e,t)=>e.ofType("SET_CONTEXT").map(()=>Object(re.m)(t.getState())).pairwise().mergeMap(([e,t])=>((e,t)=>e!==t?Ne.Observable.of(Object(La.c)({fromIssueKey:e,toIssueKey:t})):Ne.Observable.empty())(e.issueKey,t.issueKey)),Na=n("./src/packages/issue/issue-view/src/actions/issue-links-actions.js");const Ua={method:"DELETE"};var Fa=(e,t)=>e.ofType("DELETE_LINKED_ISSUE_REQUEST").mergeMap(e=>{const s=t.getState(),n=Object(re.g)(s),a=e.payload.linkedIssueId,i=((e,t)=>`${e}/rest/api/2/issueLink/${t}`)(n,a),r=Object(cs.g)(a)(s),o=Object(cs.j)(r.linkedIssueKey)(s);return Object(dn.a)(i,Ua).map(()=>Object(Na.f)(a,{issueId:o.id,direction:r.direction})).catch(e=>(Object(Ns.a)("issue.issue-links.delete-issue-link-error","Error when removing issue link",e,new ot.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Ne.Observable.of(Object(Na.d)(a))))}),Va=n("./src/packages/issue/issue-view/src/actions/remote-issue-links-actions.js");const Ka={method:"DELETE"},Ba=(e,t,s)=>Object(dn.a)(((e,t,s)=>`${e}/rest/api/3/issue/${t}/remotelink?globalId=${encodeURIComponent(s)}`)(e,t,s),Ka),Wa=(e,t)=>e.ofType("DELETE_REMOTE_LINKED_ISSUE_REQUEST").mergeMap(e=>{const s=t.getState(),n=Object(re.g)(s),a=Object(re.B)(s),{globalId:i,analyticsEvent:r}=e.payload;return Ba(n,a,i).map(()=>(r&&Object(ne.b)(r,"remoteLinkedIssue deleted"),Object(Va.c)(i))).catch(e=>(Object(ne.b)(r,"remoteLinkedIssue deleteFailed"),Object(Ns.a)("issue.issue-links.delete-issue-link-error","remote",e,new ot.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Ne.Observable.of(Object(Va.a)(i))))});var Ha=n("./node_modules/uuid/index.js"),Ga=n.n(Ha),$a=n("./src/packages/forge/forge-ui-analytics/src/services/issue-panel/index.js"),qa=n("./src/packages/forge/forge-ui/src/common/ui/flags/issue-panel/operation-action/limit-failed/index.js"),za=n("./src/packages/forge/forge-ui/src/common/ui/flags/issue-panel/operation-action/generic-error/index.js"),Ya=n("./src/packages/forge/forge-ui/src/utils/connect/index.js"),Qa=n("./src/packages/forge/forge-ui/src/utils/errors/index.js"),Ja=n("./src/packages/issue/issue-view/src/actions/ecosystem-content-panel-actions.js"),Za=n("./src/packages/issue/issue-view/src/actions/forge-actions.js"),Xa=n("./src/packages/issue/issue-view/src/common/ecosystem/module-key-helper.js");const ei=(e,t,s)=>`${e}/rest/api/2/issue/${t}/properties/${s}`;var ti=n("./src/packages/issue/issue-view/src/ecosystem/ecosystem-extensions-selector.js"),si=n("./node_modules/lodash/fp/pipe.js"),ni=n.n(si),ai=n("./node_modules/lodash/isBoolean.js"),ii=n.n(ai),ri=n("./node_modules/lodash/isNumber.js"),oi=n.n(ri),ci=n("./node_modules/lodash/isString.js"),li=n.n(ci);function ui(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function di(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ui(Object(s),!0).forEach((function(t){pi(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ui(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function pi(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const mi=e=>t=>{if(404===t.statusCode)return e();throw t},bi=(e,t,s="none")=>e.added===t&&("none"===s||e.id===s),fi=(e,t,s)=>{const n=((e,t,s)=>`${e}/rest/api/2/issue/${t}/properties/${s}`)(e,t,s);return{get:()=>(e=>Object(Ze.b)(e).then(({value:e})=>(Array.isArray(e)?e:[]).map(({added:e,id:t,collapsed:s})=>({added:e,id:t,collapsed:s})).filter(({added:e,id:t,collapsed:s})=>oi()(e)&&(null==t||li()(t))&&(null==s||ii()(s)))).catch(mi(()=>[])))(n),update:e=>((e,t)=>Object(Ze.e)(e,{body:JSON.stringify(t)}).then(()=>t))(n,e),deleteEntry:()=>(e=>Object(Ze.a)(e).then(()=>[]).catch(mi(()=>[])))(n)}},gi=ni()([async(e,{issueKey:t,extensionId:s,added:n,id:a},i)=>{const{get:r,update:o}=fi(e,t,s),c=await r();if(0===c.length)return[];const l=c.map(e=>di(di({},e),{},{collapsed:bi(e,n,a)?i:e.collapsed}));return o(l).then(()=>l)},Ne.Observable.fromPromise]),hi=ni()([async(e,t,s,n,a,i)=>{const{get:r,update:o}=fi(e,t,s),c=await r(),l={added:n,id:i,collapsed:!1};if(0===c.length)return o([l]).then(()=>[l]);if(a){if(c.length>=5)throw new Qa.b("Multiple issue panel installation limit reached.");return o([...c,l]).then(()=>[...c,l])}return[c[0]]},Ne.Observable.fromPromise]),yi=ni()([async(e,t,s,n,a)=>{const{get:i,update:r,deleteEntry:o}=fi(e,t,s),c=await i();if(0===c.length)return[];const l=c.filter(e=>!bi(e,n,a));return 0===l.length?o():r(l)},Ne.Observable.fromPromise]);var Oi=n("./src/packages/issue/issue-view/src/ecosystem/forge/forge-extensions-selector.js");function ji(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Ei(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ji(Object(s),!0).forEach((function(t){vi(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ji(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function vi(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const ki=(e,t)=>({addonModuleKey:t,baseUrl:Object(re.g)(e),parentIssueKey:Object(re.B)(e)}),wi=(e,t)=>{const s=Object(Oi.k)(t)(e);if(s)return s.name;Object($a.o)("Panel not found")},Si=(e,t,s)=>{const n=Object(Xa.b)(s,10);return((e,t,s)=>{const n=ei(e,t,s);return Ne.Observable.fromPromise(Object(Ze.e)(n,{body:JSON.stringify({added:s})}))})(e,t,n).map(()=>Object(Ja.c)(n)).catch(e=>(Ie.a.safeError("issue.ecosystem.ecosystem-content-panel-epic",`saveExtensionToIssue failed: ${e}`,new ot.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Ne.Observable.of(Object(Ja.a)(e))))};var Ii=Object(Ae.combineEpics)((e,t)=>e.ofType("ADD_CONTENT_PANEL_REQUEST").flatMap(e=>{const{addonModuleKey:s,baseUrl:n,parentIssueKey:a}=ki(t.getState(),e.payload),i=t.getState(),r=Object(ti.p)(i),o=Object(Oi.j)(i),c=Object(ti.f)(i),l=Object(ti.n)(i),u=!Object(ti.o)(i);if(Object(Ya.a)(e.payload)){const t=o.find(t=>Object(Ya.e)(t.appKey,t.moduleKey)===e.payload),i=t?t.name:void 0,r=!!(null==t?void 0:t.allowMultiple);return((e,t,s,n)=>{const a=Date.now(),i=Ga.a.v4().substring(0,8);return hi(e,t,s,a,n,i).mergeMap(e=>{const t=e[e.length-1],n=Object(Ya.f)(s,i,t.added),a=Ne.Observable.of(Object(Za.e)(n),Object(Ja.c)(n));return Object($a.h)(),a})})(n,a,s,r).catch(e=>{Object($a.d)(),Object($a.n)("Adding panel to the issue failed",e);const{showFlag:t}=Object(Lt.useFlagsService)();return e instanceof Qa.b?t(Object(qa.a)(i)):t(Object(za.a)(i)),Ne.Observable.of(Object(Ja.a)(e))})}return!l&&u?Ne.Observable.merge(...c.map(e=>`${e.appKey}_${e.moduleKey}`).filter(e=>!r.includes(e)).map(e=>Si(n,a,e))):Si(n,a,s)}),e=>e.ofType("ADD_CONTENT_PANEL_SUCCESS").switchMap(e=>{const t=e.payload;return Ne.Observable.of(Object(Ja.d)(t))}),(e,t)=>e.ofType("REMOVE_CONTENT_PANEL_REQUEST").flatMap(e=>{const{addonModuleKey:s,baseUrl:n,parentIssueKey:a}=ki(t.getState(),e.payload),i=Object(Xa.b)(s,10),r=t.getState(),o=Object(ti.p)(r);if(Object(Ya.a)(s)){const t=wi(r,e.payload);return((e,t,s)=>{const n=Object(Xa.a)(s);if(null==n)return Object($a.c)(),Ne.Observable.of(Object(Ja.g)());const{extensionId:a}=n,{id:i}=n,r=n.added;return yi(e,t,a,r,i).mergeMap(()=>(Object($a.g)(),Ne.Observable.of(Object(Ja.i)(s),Object(Za.f)(s))))})(n,a,s).catch(e=>{Object($a.c)(),Object($a.n)("Removing panel from the issue failed",e);const{showFlag:s}=Object(Lt.useFlagsService)();return s(Object(za.a)(t)),Ne.Observable.of(Object(Ja.g)(e))})}if(!o.includes(s)&&!o.includes(i)){const e=Object(ti.g)(r);return Ne.Observable.merge(...e.map(e=>`${e.appKey}_${e.moduleKey}`).filter(e=>e!==s).map(e=>Si(n,a,e)))}const c=o.includes(s)?s:i;return((e,t,s)=>{const n=ei(e,t,s);return Ne.Observable.fromPromise(Object(Ze.a)(n))})(n,a,c).map(()=>Object(Ja.i)(c)).catch(e=>(Ie.a.safeError("issue.ecosystem.ecosystem-content-panel-epic",`removeExtensionFromIssue failed: ${e}`,new ot.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Ne.Observable.of(Object(Ja.g)(e))))}),(e,t)=>e.ofType("ADD_CONTENT_PANEL_SUCCESS","CONTENT_PANELS_CUSTOMISED_REQUEST").flatMap(e=>{const{baseUrl:s,parentIssueKey:n}=ki(t.getState(),e.payload);return Object(ti.n)(t.getState())?Ne.Observable.empty():((e,t)=>{const s=ei(e,t,"issue.content.panel.customised.flag");return Ne.Observable.fromPromise(Object(Ze.e)(s,{body:JSON.stringify({createdOn:new Date})}))})(s,n).map(()=>Object(Ja.f)()).catch(e=>(Ie.a.safeError("issue.ecosystem.ecosystem-content-panel-epic",`saveIssueCustomised failed: ${e}`,new ot.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Ne.Observable.empty()))}),(e,t)=>e.ofType("FORGE_ISSUE_PANEL_UPDATE_REQUEST").flatMap(e=>{const s=Object(re.g)(t.getState()),{issueKey:n,panelKey:a,collapsed:i}=e.payload,r=Object(Xa.a)(a);if(null==r)return Object($a.e)(),Ne.Observable.empty();const o=Ei(Ei({},r),{},{issueKey:n});return gi(s,o,i).map(()=>(Object($a.i)(),Object(Za.h)({panelKey:a,collapsed:i}))).catch(e=>{Object($a.e)(),Object($a.n)("Update issue panel failed",e);const s=t.getState(),n=wi(s,a),{showFlag:i}=Object(Lt.useFlagsService)();return i(Object(za.a)(n)),Ne.Observable.empty()})})),Ci=n("./src/packages/issue/issue-view/src/browser-metrics/browser-metrics-constants.js"),Ti=n("./src/packages/issue/issue-view/src/common/service/issue/ecosystem-extensions-transformer.js");var Pi=(e,t)=>e.ofType("REFRESH_ECOSYSTEM_REQUEST").switchMap(()=>{const e=t.getState();return((e,t,s)=>{const n=`${e}/rest/internal/2/issue/${t}/extension`;return Object(dn.a)(n,{perf:Ci.b,headersProcessor:s&&s(Ci.b.key)}).map(Ti.b).catch(e=>(Re.i.safeError("issue.fetch.ecosystem-extensions-fetch-server","fetchEcosystemExtensions: Failed to fetch extensions",new ot.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e})),Ne.Observable.of({})))})(Object(re.g)(e),Object(re.B)(e)).map(N.f).catch(e=>(Re.i.safeError("issue.fetch.ecosystem-refresh-epic","REFRESH_ECOSYSTEM_REQUEST: Failed to refresh ecosystem data",new ot.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e})),Ne.Observable.empty()))}),_i=e=>t=>t.ofType("FETCH_ISSUE_FAILURE").do(t=>e&&e(t.payload.error)).ignoreElements(),xi=n("./src/packages/common-legacy-do-not-add-anything-new/src/experience-tracking/common/services/send-experience-analytics/index.js");var Di=e=>e instanceof ba.a?"VALIDATION_ERROR":e instanceof ba.b?e.statusCode>=400&&e.statusCode<500?"VALIDATION_ERROR":"SERVER_ERROR":"CONNECTIVITY_ERROR",Ai=n("./src/packages/issue/issue-view/src/common/state/selectors/application-selector.js");function Mi(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Li(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Mi(Object(s),!0).forEach((function(t){Ri(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Mi(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Ri(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Ni=["summary","description","assignee","status"],Ui=({payload:e})=>Ni.includes(e.fieldId),Fi=e=>Object(re.b)(e)||"unknown",Vi=(...e)=>Object(xi.a)((({state:e,hasSuccess:t,fieldId:s,hasEdit:n,errorMessage:a})=>({experience:"editIssue",analyticsSource:Fi(e),application:Object(Ai.b)(e),edition:Object(Ai.a)(e),wasExperienceSuccesful:t,field:s,hasEdit:n,additionalAttributes:Li({},null!=a?{errorMessage:a}:{})}))(...e));var Ki=Object(Ae.combineEpics)((e,t)=>e.ofType("FIELD_EDIT_CANCEL").filter(Ui).filter(({payload:e})=>{const s=t.getState();return!Object(is.D)(e.fieldId)(s)}).do(e=>{const s=t.getState(),{fieldId:n}=e.payload;return Vi({state:s,hasSuccess:!0,fieldId:n,hasEdit:!1})}).ignoreElements(),(e,t)=>e.ofType("FIELD_UPDATED").filter(Ui).do(e=>{const s=t.getState(),{fieldId:n}=e.payload;return Vi({state:s,hasSuccess:!0,fieldId:n,hasEdit:!0})}).ignoreElements(),(e,t)=>e.ofType("FIELD_SAVE_FAILURE").filter(Ui).filter(({payload:e})=>"CONNECTIVITY_ERROR"!==Di(e.error)).do(e=>{const s=t.getState(),{fieldId:n,error:a}=e.payload,i=Di(a);return Vi({state:s,hasSuccess:"SERVER_ERROR"!==i,fieldId:n,hasEdit:!0,errorMessage:`${a.statusCode||i} - ${a.message}`})}).ignoreElements()),Bi=n("./src/packages/issue/issue-view/src/selectors/issue-links-type-selector.js");const Wi="issue.issue-view.get-create-linked-issue-permission.epic";var Hi=(e,t)=>e.ofType("FETCH_CREATE_LINKED_ISSUE_PERMISSION_REQUEST").switchMap(()=>{const e=t.getState(),s=Object(Z.G)(e);return Object(Bi.a)(e)&&("business"===s||"service_desk"===s)?(e=>Object(dn.a)(`${e}/rest/api/3/permissions/project`,{method:"POST",body:JSON.stringify({permissions:["CREATE_ISSUES"]})}).retry(2).flatMap(e=>{if(e&&e.projects){const t=e.projects.length>0;return Ne.Observable.of(Object(Na.s)(t))}return Ie.a.safeError(Wi,"The permission endpoint does not return the expected data"),Ne.Observable.of(Object(Na.s)(!1))}).catch(e=>(Ie.a.safeError(Wi,e),Ne.Observable.of(Object(Na.s)(!1)))))(Object(re.g)(e)):Ne.Observable.of(Object(Na.s)(!1))}),Gi=n("./node_modules/lodash/uniq.js"),$i=n.n(Gi),qi=n("./src/packages/issue/issue-view/src/common/service/issue/user-transformer.js");const zi=["assignee","project"],Yi=({id:e,key:t,fields:s})=>({id:e,assigneeUrl:s.assignee&&Object(qi.c)(s.assignee).avatarUrl,assigneeDisplayName:s.assignee&&Object(qi.c)(s.assignee).displayName,projectType:s.project&&s.project.projectTypeKey,issueKey:t}),Qi=(e,t)=>Object(zn.b)(e,t,zi).map(e=>e.map(Yi).reduce((e,t)=>Object.assign(e,{[t.issueKey]:t}),{}));var Ji=Object(Ae.combineEpics)((e,t)=>e.ofType("FETCH_LINKED_ISSUES_REQUEST").switchMap(()=>{const e=t.getState(),s=Object(re.g)(e),n=Object(cs.i)(e);return Qi(s,n).flatMap(e=>Ne.Observable.of(Object(Na.k)(e))).catch(e=>(Object(Ns.a)("issue.issuelinks.fetch.linked.issues.epic","Error while fetching linked issues",e,new ot.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e})),Ne.Observable.of(Object(Na.j)(e))))}),(e,t)=>e.ofType("SAVE_LINKED_ISSUE_SUCCESS").switchMap(()=>{const e=t.getState(),s=Object(re.g)(e),n=Object(re.B)(e),a=Object(cs.l)(e),i=$i()(Object.values(a).map(e=>e.linkedIssueKey)),r=Object.values(a).filter(e=>e.isSaved).map(e=>e.id);return Ne.Observable.zip(Object(zn.d)(s,n),Qi(s,i),(e,t)=>Object(Na.i)(e,t,r,a)).catch(e=>(Object(Ns.a)("issue.issuelinks.fetch.linked.issues.epic","Error while fetching new issue links and their details",e,new ot.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Ne.Observable.of(Object(Na.h)(r,e))))})),Zi=n("./src/packages/forge/forge-ui-analytics/src/common/utils/get-error-type/index.js"),Xi=n("./src/packages/forge/forge-ui-analytics/src/services/fetch-modules/index.js"),er=n("./src/packages/forge/forge-ui/src/utils/can-fetch-forge/index.js"),tr=n("./src/packages/issue/issue-fetch-services/src/services/issue-forge-data/index.js");const sr=async(e,t,s)=>s||Object(tr.a)(e,t),nr=(e,t)=>sr(Object(re.g)(e),Object(re.j)(e),t);function ar(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function ir(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const rr={FETCH_ISSUE_REQUEST:"fetch",REFRESH_ISSUE_REQUEST:"refresh",LOAD_NEW_ISSUE:"load-new",FETCH_FORGE_REQUEST:"fetch-forge"},or=Object.keys(rr);var cr=e=>(t,s)=>t.ofType(...or).switchMap(t=>{const n=Object(re.b)(s.getState());if(!Object(er.a)())return Ne.Observable.empty();if(Object(F.isForgeUiCachedNullResponseFixEnabled)()){let a,i,r=!1,o=!1;const c=rr[t.type],l=null==e?void 0:e.issueForgeData,u=!!l,d=e=>{const t={actionType:c,isPrefetched:u};return u&&(t.isPrefetchedDataResolved=o,t.isPrefetchedDataValid=i),e&&(t.isInfrastructure=e instanceof Qa.a,t.errorType=Object(Zi.a)(e)),t};return Object(Xi.f)(n,d()),null==l||l.then(e=>{r=!0,a=e}),Ne.Observable.fromPromise(Promise.resolve().then(()=>(o=r,r&&(i=!!a),!u||!i&&o?nr(s.getState()):nr(s.getState(),l)))).map(e=>(Object(Xi.e)(n,d()),Object(Za.a)(e))).catch(e=>(Object(Xi.d)(n,d(e),e),Ne.Observable.empty()))}const a=s=>function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ar(Object(s),!0).forEach((function(t){ir(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ar(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({actionType:rr[t.type],isPrefetched:!(!e||!e.issueForgeData)},s&&{isInfrastructure:s instanceof Qa.a,errorType:Object(Zi.a)(s)});return Object(Xi.f)(n,a()),((e,t)=>{const s=Object(re.g)(e),n=Object(re.j)(e);return Ne.Observable.fromPromise(sr(s,n,t&&t.issueForgeData))})(s.getState(),e).map(e=>(Object(Xi.e)(n,a()),Object(Za.a)(e))).catch(e=>(Object(Xi.d)(n,a(e),e),Ne.Observable.empty()))}),lr=n("./src/packages/platform/services/issue/src/model/errors.js");function ur(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function dr(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ur(Object(s),!0).forEach((function(t){pr(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ur(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function pr(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const mr=(e,t,s,n,a=!1)=>{const{setIssue:i,mergeIssue:r,setIssues:o,mergeIssues:c}=t,{setIssueConfig:l,setIssuesConfig:u,mergeIssueConfig:d,mergeIssuesConfig:p}=s,{fieldValues:m,fieldConfigs:b}=((e,t)=>Object.entries(e).reduce((e,[s,{value:n,autoCompleteUrl:a,allowedValues:i,editable:r,required:o,schema:c,title:l,configuration:u}])=>({fieldValues:dr(dr({},e.fieldValues),{},{[s]:n}),fieldConfigs:dr(dr({},e.fieldConfigs),{},{[s]:{autoCompleteUrl:a,allowedValues:i,isEditable:!t&&r,isRequired:o,schema:c,title:l,configuration:u}})}),{}))(e,a);a?r(n,m):i(n,m),Object(F.isFieldConfigMergeEnabled)()&&a?d(n,b):l(n,b);const f=m["children-issues"]||[],g=[],h=[];f.forEach(e=>{const{fieldValues:t,fieldConfigs:s}=((e,t)=>e.reduce((e,{key:s,value:n,autoCompleteUrl:a,allowedValues:i,editable:r,required:o,schema:c,title:l})=>({fieldValues:dr(dr({},e.fieldValues),{},{[s]:Object(F.isInlineAssigneeInChildrenEnabled)()&&void 0===n?null:n}),fieldConfigs:dr(dr({},e.fieldConfigs),{},{[s]:{autoCompleteUrl:a,allowedValues:i,isEditable:!t&&r,isRequired:o,schema:c,title:l}})}),{}))(e.fields,a);g.push({[e.key]:t}),h.push({[e.key]:s})}),a?c(g):o(g),Object(F.isFieldConfigMergeEnabled)()&&a?p(h):u(h)};var br=n("./src/packages/platform/services/issue/src/model/issue-custom-fields.js"),fr=n("./src/packages/platform/services/issue/src/model/issue-managed-fields.js"),gr=n("./src/packages/platform/services/issue/src/model/issue-system-fields.js");function hr(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function yr(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?hr(Object(s),!0).forEach((function(t){Or(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):hr(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Or(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const jr={"com.atlassian.jira.plugin.system.customfieldtypes:float":br.r,"com.pyxis.greenhopper.jira:jsw-story-points":br.u,"com.atlassian.jira.plugin.system.customfieldtypes:url":br.x,"com.atlassian.jira.plugin.system.customfieldtypes:textfield":br.v,"com.atlassian.jira.plugin.system.customfieldtypes:textarea":br.w,"com.atlassian.jira.plugin.system.customfieldtypes:labels":br.l,"com.atlassian.jira.plugin.system.customfieldtypes:datepicker":br.c,"com.atlassian.jira.plugin.system.customfieldtypes:datetime":br.d,"com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons":br.s,"com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes":br.m,"com.atlassian.jira.plugin.system.customfieldtypes:multiselect":br.o,"com.atlassian.jira.plugin.system.customfieldtypes:select":br.t,"com.atlassian.jira.plugin.system.customfieldtypes:multiversion":br.q,"com.atlassian.jira.plugin.system.customfieldtypes:version":br.z,"com.atlassian.jira.plugin.system.customfieldtypes:grouppicker":br.k,"com.atlassian.jira.plugin.system.customfieldtypes:multigrouppicker":br.n,"com.atlassian.jira.plugin.system.customfieldtypes:userpicker":br.y,"com.atlassian.jira.plugin.system.customfieldtypes:people":br.y,"com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker":br.p,"com.pyxis.greenhopper.jira:jsw-issue-color":br.b,"com.atlassian.jira.plugin.system.customfieldtypes:servicedesk-approvers-list":br.y,"com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect":br.a},Er={"com.pyxis.greenhopper.jira:gh-epic-link":fr.c,"com.pyxis.greenhopper.jira:gh-sprint":fr.g,"com.atlassian.jira.plugin.system.customfieldtypes:storypoint":fr.h,"com.atlassian.teams:rm-teams-custom-field-team":fr.i,"com.atlassian.jpo:jpo-custom-field-parent":fr.f,"com.atlassian.jpo:jpo-custom-field-baseline-start":fr.b,"com.atlassian.jpo:jpo-custom-field-baseline-end":fr.a,"com.atlassian.jira.plugin.system.customfieldtypes:flagged":fr.e},vr=e=>{const{key:t}=e,s=(e=>{const{key:t}=e;return"description"===t?e.adfValue:"environment"===t||"com.atlassian.jira.plugin.system.customfieldtypes:textarea"===e.schema.custom?"atlassian-wiki-renderer"===e.schema.renderer?e.adfValue:e.value:void 0!==e.pendingValue?e.pendingValue:null!=e.renderedValue&&void 0!==e.renderedValue?e.renderedValue:e.value})(e),n=e.title||t,{editable:a}=e;return"status"===t||e.schema.system?((e,t,s,n,a,i)=>{switch(t){case"versions":return{type:gr.a,key:"versions",editable:a,title:n,value:s};case"assignee":return{type:gr.b,key:"assignee",editable:a,title:n,value:s};case"components":return{type:gr.e,key:"components",editable:a,title:n,value:s};case"description":return{type:gr.f,key:"description",editable:a,title:n,value:s};case"environment":return{type:gr.h,key:"environment",editable:a,title:n,value:s,renderer:i};case"duedate":return{type:gr.g,key:"duedate",editable:a,title:n,value:s};case"fixVersions":return{type:gr.i,key:"fixVersions",editable:a,title:n,value:s};case"issuetype":return{type:gr.l,key:"issuetype",title:"",editable:!1,value:{id:s.id,name:s.name,iconUrl:s.iconUrl}};case"labels":return{type:gr.n,key:"labels",editable:a,title:n,value:s};case"priority":return{type:gr.o,key:"priority",editable:a,title:n,value:s};case"reporter":return{type:gr.p,key:"reporter",editable:a,title:n,value:s};case"status":{const e=s,{name:t}=e,n=e.statusCategory.id;return{type:gr.s,key:"status",title:"",editable:!1,value:yr(yr({name:t},Object(F.isGlobalLoopTransitionActionsEnabled)()&&{id:e.id}),{},{statusCategory:{id:n}})}}case"summary":return{type:gr.u,key:"summary",editable:a,title:n,value:s};case"timetracking":return{type:gr.v,key:"timetracking",editable:a,title:n,value:s};default:return}})(e.schema&&e.schema.system&&e.schema.system,t,s,n,a,e.schema&&e.schema.renderer):e.schema.custom?((e,t,s,n,a,i)=>{const r=jr[e]||Er[e];if(r)switch(r){case"com.pyxis.greenhopper.jira:gh-epic-link":return{type:fr.c,key:t,editable:a,title:n,value:s};case"com.pyxis.greenhopper.jira:gh-sprint":return{type:fr.g,key:t,editable:a,title:n,value:s};case"com.atlassian.jira.plugin.system.customfieldtypes:storypoint":return{type:fr.h,key:t,editable:a,title:n,value:s};case"com.atlassian.jpo:jpo-custom-field-parent":return{type:fr.f,key:t,editable:a,title:n,value:s};case"com.atlassian.jpo:jpo-custom-field-baseline-start":return{type:fr.b,key:t,editable:a,title:n,value:s};case"com.atlassian.jpo:jpo-custom-field-baseline-end":return{type:fr.a,key:t,editable:a,title:n,value:s};case"com.atlassian.teams:rm-teams-custom-field-team":return{type:fr.i,key:t,editable:a,title:n,value:s};default:return{type:r,key:t,editable:a,title:n,value:s,renderer:i}}})(e.schema.custom,t,s,n,a,e.schema.renderer):void 0},kr=(e,t,s,n,a,i,r)=>(o,c)=>o.ofType("UPDATE_PREVIEW_REQUEST").switchMap(o=>{if(o.payload){const l=o.payload;return e.getIssue$(l).flatMap(({error:e,issue:o})=>{if(e){const t=(e=>{if(e instanceof lr.a)return{error:"NOT_FOUND_OR_NO_PERMISSION_ERROR",errorMessage:e.message};const{statusCode:t,message:s,traceId:n}=e;return{error:t?"UNKNOWN_ERROR":"CONNECTIVITY_ERROR",statusCode:t,errorMessage:s,traceId:n}})(e);return Re.i.safeWarn("issue.data.provider.epic",`UPDATE_PREVIEW_REQUEST: dataProvider issue data lookup failed ${t.error}`),Ne.Observable.of(Object(Oe.a)(t))}if(o){var u;mr(Object(we.a)(o),t,s,l,!0),n.setIssueViewLayout(o.issueSections);const e=null===(u=o.fields.get("project"))||void 0===u?void 0:u.value;return e&&i.setProjectContext(Object(ve.a)(l),e),Object(F.isAddIssueIdToSweetStateEnabled)()&&o.id&&r.mergeIssueContext({issueId:Object(he.j)(o.id)}),a.setUserPreferences(o.myPreferences),"COMPLETE"!==Object(Z.x)(c.getState())?Ne.Observable.of(ke(o)):Ne.Observable.empty()}return Ne.Observable.empty()})}return Ne.Observable.empty()}),wr=e=>(t,s)=>t.ofType("REFRESH_DATA_PROVIDER_ISSUE").filter(()=>!Object(F.isRemoveDataProviderRefresh)()).switchMap(t=>{const{issueKey:s}=t.payload;return Ne.Observable.fromPromise((async(e,t)=>{const{issue:s}=await e.getIssue$(t,!0).toPromise();let n=[];if(s){const e=Object(we.a)(s);n=Object.keys(e).map(t=>Object(is.w)(t,e)).filter(Boolean)}return n})(e,s)).mergeMap(t=>(e=>{const t=e.map(e=>{try{return vr(e)}catch(t){return void Ie.a.safeError("issue.details.data-provider-transformer","Failed to transform field",new ot.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:t}))}}).filter(e=>!!e);return Ne.Observable.of(t)})(t).flatMap(t=>(e.updateIssue(s,t),Ne.Observable.empty())).catch(e=>(Re.i.safeError("issue.data.provider.epic","Error while refreshing cached issue data by fetching issue from server",new ot.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Ne.Observable.empty())))});var Sr=(e,t,s,n,a,i,r)=>Object(Ae.combineEpics)(kr(e,t,s,n,a,i,r),(e=>t=>t.ofType("FETCH_ISSUE_REMOTE_DATA_REQUEST").switchMap(t=>{if(t.payload){const s=t.payload;return e.getIssueRemoteData$(s).flatMap(e=>Ne.Observable.of(Object(je.c)(e)))}return Ne.Observable.of(Object(je.a)())}))(e),(e=>(t,s)=>t.ofType("APPLINK_AUTHENTICATION_SUCCESS","SAVE_REMOTE_LINKED_ISSUE_SUCCESS").switchMap(()=>{const t=s.getState(),n=Object(re.B)(t);return n?e.getIssueRemoteData$(n).flatMap(e=>Ne.Observable.of(Object(je.c)(e))):Ne.Observable.empty()}))(e),wr(e)),Ir=n("./src/packages/issue/issue-view/src/actions/issue-delete-actions.js");const Cr=(e,t,s,n)=>{const a={action:t,actionSubjectId:Object(se.c)(s)(s)};n?Object(Ue.b)(e,a):Object(Ue.a)(e,a)};var Tr=(t,s)=>t.ofType("DELETE_ISSUE_REQUEST").mergeMap(({payload:t})=>{const{issueKey:n,analyticsEvent:a}=t;return((e,t)=>{const s=((e,t)=>`${e}/rest/api/3/issue/${t}?deleteSubtasks=true`)(e,t);return Object(dn.a)(s,{method:"DELETE"})})(Object(re.g)(s.getState()),n).map(()=>(Cr(a,"deleted","issueDeleted"),Object(Ir.d)(n))).catch(t=>(Re.i.safeError("issue.delete.issue-delete-epic","Failed to delete issue",new ot.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:t})),Cr(a,"deletedError","issueDeletedError",t),Ne.Observable.of(Object(Ir.b)(n,(t=>{try{return JSON.parse(t.message).errorMessages[0]}catch(e){return"Failed to delete issue"}})(t)))))}),Pr=n("./src/packages/issue/issue-view/src/browser-metrics/fetch-issue-network-times.js");const _r=e=>t=>s=>{e.dispatch(((e,t)=>({type:"SAVE_SERVER_TIME",payload:{key:e,serverTime:t}}))(t,Number(s.get("atl-vtm-backend-time"))))};var xr=n("./src/packages/issue/issue-view/src/utils/issue-view-fetch-error.js");function Dr(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function Ar(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Mr(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Lr=(e,t)=>{let s="UNKNOWN_ERROR";if(401===e.statusCode?s="AUTHENTICATION_ERROR":403===e.statusCode||404===e.statusCode?s="NOT_FOUND_OR_NO_PERMISSION_ERROR":e.statusCode?t||(s="AUTHENTICATION_ERROR"):s="CONNECTIVITY_ERROR",e instanceof xr.a){const t=e,{endpoint:n,traceId:a,statusCode:i,message:r}=t;return{errorMessage:i?`${r}, endpoint: ${n}, status code: ${i}`:`${r}, endpoint: ${n}`,endpoint:n,traceId:a,statusCode:i,error:s}}if(e instanceof ba.b){const t=e,{message:n,statusCode:a,traceId:i}=t;return function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ar(Object(s),!0).forEach((function(t){Mr(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ar(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({error:s,statusCode:a,errorMessage:`${n}, status code: ${a}`},i?{traceId:i}:{})}return{error:s,statusCode:void 0}};var Rr=({fieldValueActions:e,fieldConfigActions:t,issueViewLayoutActions:s,userPreferenceActions:n,issueTabsActions:a,permissionActions:i,attachmentActions:r,projectContextActions:o,prefetchedResourceManager:c,jiraSettingsActions:l,issueContextActions:u})=>(d,p)=>d.ofType("FETCH_ISSUE_REQUEST","LOAD_NEW_ISSUE").switchMap(()=>{Object(Pr.a)();const d=p.getState(),m=Object(re.a)(d),b=Object(re.g)(d),f=Object(re.B)(d),g=Object(F.isIssueContextHooksConsumedPart1Enabled)()?u.getMaxTokenLength():Object(re.F)(d);return Object(F.isfetchMediaTokensFromGiraEnabled)()?(()=>Object(zn.a)(d,c).do(({issue:{fields:c,tabs:d,id:p},myPreferences:m,permissions:g,attachments:h,jiraSettings:y,issueSections:O,project:j})=>{if(a.setIssueTabs(d),mr(c,e,t,f),s.setIssueViewLayout(O),n.setUserPreferences(m),void 0!==g&&i.setPermissions(g),void 0!==h&&(r.setTotalCount(h.totalCount),r.setVisibleAttachments(h.nodes)),y&&l.setJiraSettings(y),j&&o.setProjectContext(Object(he.q)(j.projectKey),j),Object(F.isPolarisInsightsTabEnabled)()&&j){const{projectKey:e}=j;_e(b,e).then(t=>o.mergeProjectProperty(Object(he.q)(e),{isPolarisProject:t}))}Object(F.isAddIssueIdToSweetStateEnabled)()&&u.mergeIssueContext({issueId:Object(he.j)(p)})}).mergeMap(e=>{const{viewContext:t,uploadContext:s,userAuth:n}=e,a=Dr(e,["viewContext","uploadContext","userAuth"]),i=t?Ne.Observable.of(pt(t)):Zs(b,f,g,_r(p),null==c?void 0:c.issueMediaReadPermission);let r;return s?null!=s.error?r=Object(Fs.b)(new Error(s.error)):null!=s.clientId&&null!=s.serviceHost&&null!=s.token&&null!=s.tokenLifespanInMs&&null!=s.collection&&null!=s.tokenIssueTimestamp&&(r=Object(Fs.d)({clientId:s.clientId,serviceHost:s.serviceHost,token:s.token,tokenLifespanInMs:s.tokenLifespanInMs,collection:s.collection,tokenIssueTimestamp:s.tokenIssueTimestamp})):r=Object(Fs.c)(),i.map(e=>[e,r,n?Object(Ws.d)(n):Object(Ws.c)(),Object(N.d)(a)])}).flatMap(e=>(Object(U.c)(),c&&c.clearAll(),Ne.Observable.of(Object(De.batchActions)(e)))).catch(e=>{const t=Lr(e,m);return"NOT_FOUND_OR_NO_PERMISSION_ERROR"===t.error||Object(Ns.a)("issue.fetch.issue-fetch-epic","FETCH_ISSUE_REQUEST: Failed to fetch issue data",e,new ot.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e})),Ne.Observable.of(Object(N.b)(t))}))():(()=>Ne.Observable.zip(Zs(b,f,g,_r(p),null==c?void 0:c.issueMediaReadPermission),Bs(b,f,null==c?void 0:c.issueMediaUploadPermission),qs(b,null==c?void 0:c.issueMediaUserAuth),Object(zn.a)(d,c).do(({issue:{fields:c,tabs:d,id:p},myPreferences:m,permissions:g,attachments:h,issueSections:y,project:O,jiraSettings:j})=>{if(a.setIssueTabs(d),mr(c,e,t,f),s.setIssueViewLayout(y),n.setUserPreferences(m),g&&i.setPermissions(g),h&&r.setTotalCount(h.totalCount),h&&r.setVisibleAttachments(h.nodes),j&&l.setJiraSettings(j),Object(F.isAddIssueIdToSweetStateEnabled)()&&u.mergeIssueContext({issueId:Object(he.j)(p)}),O&&o.setProjectContext(Object(he.q)(O.projectKey),O),Object(F.isPolarisInsightsTabEnabled)()&&O){const{projectKey:e}=O;_e(b,e).then(t=>o.mergeProjectProperty(Object(he.q)(e),{isPolarisProject:t}))}}).map(N.d)).mergeMap(e=>(Object(U.c)(),c&&c.clearAll(),Ne.Observable.of(Object(De.batchActions)(e)))).catch(e=>{const t=Lr(e,m);return"NOT_FOUND_OR_NO_PERMISSION_ERROR"===t.error||Object(Ns.a)("issue.fetch.issue-fetch-epic","FETCH_ISSUE_REQUEST: Failed to fetch issue data",e,new ot.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e})),Ne.Observable.of(Object(N.b)(t))}))()}),Nr=n("./src/packages/platform/utils/constants/src/fetch-default-options.js"),Ur=n("./src/packages/platform/utils/fetch/src/utils.js");function Fr(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Vr(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Fr(Object(s),!0).forEach((function(t){Kr(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Fr(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Kr(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Br=Vr(Vr({},Nr.a),{},{method:"POST"}),Wr=(e,t,s)=>"OUTWARD"===e.direction?{type:{id:e.id},inwardIssue:{key:t},outwardIssue:{key:s}}:{type:{id:e.id},inwardIssue:{key:s},outwardIssue:{key:t}},Hr=e=>201===e.status?Promise.resolve(null):Promise.reject(new Ur.a(e.status,`Error server response: ${e.status}`)),Gr=(e,t,s,n)=>Ne.Observable.fromPromise(((e,t)=>fetch(e,Vr(Vr({},Br),t)).then(Hr))(Object(kn.n)(e),{body:JSON.stringify(Wr(t,s,n))})),$r=(e,t,s,n,a)=>{const i=Object(re.g)(e),r=Object(re.B)(e);return Gr(i,n,r,s).map(()=>Object(F.isRemoteIssueLinksEnabled)()?Object(Na.q)(t,a.update({action:"succeeded"})):Object(Na.r)(t)).catch(e=>(Re.i.safeError("issue.issuelinks.save.linked.issues.epic","Error while adding linked issues",new ot.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Ne.Observable.of(Object(F.isRemoteIssueLinksEnabled)()?Object(Na.m)(t,e,null==a?void 0:a.update({action:"failed"})):Object(Na.n)(t,e))))};var qr=Object(Ae.combineEpics)((e,t)=>e.ofType("SAVE_LINKED_ISSUE_RETRY").mergeMap(e=>{const s=t.getState(),{optimisticId:n,requestAnalyticsEvent:a}=e.payload,i=Object(cs.g)(n)(s),r=i&&i.linkedIssueKey,o=i&&{direction:i.direction,id:i.typeId};return $r(s,n,r,o,a)}),(e,t)=>e.ofType("SAVE_LINKED_ISSUE_REQUEST").mergeMap(e=>{const s=t.getState(),{optimisticId:n,linkedIssueKey:a,issueLinkType:i}=e.payload.newIssueLinks,{requestAnalyticsEvent:r}=e.payload;return $r(s,n,a,i,r)})),zr=n("./node_modules/lodash/identity.js"),Yr=n.n(zr),Qr=n("./node_modules/lodash/isEqual.js"),Jr=n.n(Qr);const Zr=(e,t)=>{const s=document.getElementById("ghx-issue-fragment");window.AJS&&s?window.AJS.$(s).trigger(e,t):Ie.a.safeError("issue.rapid-board","Could not find container to send event for rapid board",new ot.a({eventNameSuffix:"issue.error",type:"js",app:"issue"}))},Xr="refresh-sprints-on-board",eo="hide";var to=e=>Zr(Xr,{sprintIds:[e]}),so=()=>Zr(eo);const no=({pathname:e,search:t})=>e+t,ao=(e,t,s,n)=>(a,i)=>{const r={},o=a.ofType("NAVIGATE_TO_NEW_ISSUE").pluck("payload").do(({toIssueKey:e})=>{Object(F.isExtractedSummaryFieldEnabled)()&&n.mergeIssueContext({issueKey:Object(he.l)(e)})}).do(({toIssueKey:e})=>{const a=i.getState(),r=Object(re.b)(a),o=Object(F.isIssueContextHooksConsumedPart1Enabled)()?n.getIsLoadedWithPage():Object(re.t)(a),c=s.getRecentIssuesCount(),l=s.getRecentIssue(e);Object(U.a)({analyticsSource:String(r),isLoadedWithPage:o,isRecentIssue:!!l,recentIssuesCount:c,isSPA:!0,store:i,dataProvider:t}),Object(U.g)()}).do(({fromIssueKey:t,toIssueKey:s})=>{if(e){r[no(window.location)]=t;const n=((e,t,s)=>{const n=new RegExp(`${t}(?![\\d])`,"g"),a=e.match(n);return null===a||1!==a.length?null:e.replace(t,s)})(no(window.location),t,s);n&&(r[n]=s,e.push(n))}}),c=e?Ne.Observable.create(t=>e.listen((e,s)=>{t.next({location:e,action:s})})).filter(({action:e})=>"POP"===e).filter(()=>{const e=i.getState();return!(Object(F.isIssueContextHooksConsumedPart1Enabled)()?n.getIsSpaEnabled():Object(re.x)(e))}).map(({location:e})=>r[no(e)]).filter(Yr.a).map(e=>({fromIssueKey:Object(re.B)(i.getState()),toIssueKey:e})).filter(({fromIssueKey:e,toIssueKey:t})=>e!==t):Ne.Observable.empty(),l=i.getState();return Ne.Observable.merge(o,c).distinctUntilChanged((e,t)=>Jr()(e,t)).flatMap(({fromIssueKey:e,toIssueKey:t})=>{Object(Pr.a)();const a=s.getRecentIssue(t);if(a)return Ne.Observable.of(Object(La.b)(t,a));const r=i.getState();if(!Object(F.isRemoveDataProviderRefresh)()){const s=Object.keys(Object(is.t)(l)).map(e=>Object(is.q)(e)(l)).filter(Boolean);if(Object(F.isIssueContextHooksConsumedPart1Enabled)()?n.getIsSpaEnabled():Object(re.x)(r))return Ne.Observable.of(Object(La.a)(t),Object(Oe.c)(t),Object(je.b)(t));const a=Object(Oe.b)(e,s);return Ne.Observable.of(a,Object(La.a)(t),Object(Oe.c)(t),Object(je.b)(t))}return Ne.Observable.of(Object(La.a)(t),Object(Oe.c)(t),Object(je.b)(t))}).takeUntil(a.last().catch(()=>Ne.Observable.of(!0))).catch(e=>Ie.a.safeError("issue.issue-navigation-epic","Unexpected error in issue-navigation-epic",new ot.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})))},io=e=>e.ofType("NAVIGATE_TO_PROJECT").do(e=>{Object(Hn.a)(e.payload.projectUrl,!1,e.payload.pushAction)}).ignoreElements(),ro=e=>e.ofType("NAVIGATE_TO_SPRINT").do(e=>{to(e.payload.sprintId),so()}).ignoreElements();var oo=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/page-visiblity-stream/page-visibility-stream.js"),co=n("./src/packages/issue/issue-view/src/selectors/activity-feed-selector.js"),lo=n("./src/packages/issue/issue-view/src/selectors/ecosystem-glance-ui-selector.js");const uo=(e,t)=>{const s=t.getState(),{atlassianId:n}=e.payload,a=Object(Z.z)(s),i=Object(ti.g)(s).length>0||!!Object(co.a)(s)||!!Object(lo.a)(s),r=a&&n!==a.id;return!i&&r};var po=Object(Ae.combineEpics)((e,t)=>e.ofType("REALTIME_UPDATE_CURRENT_ISSUE").filter(()=>Object(As.a)()).switchMap(e=>uo(e,t)?Ne.Observable.of(Object(N.g)()):Ne.Observable.empty()),(e,t)=>e.ofType("REALTIME_UPDATE_CURRENT_ISSUE").bufferToggle(oo.a.filter(e=>!e),()=>oo.a.filter(e=>e)).switchMap(e=>e.some(e=>uo(e,t))?Ne.Observable.of(Object(N.g)()):Ne.Observable.empty()));var mo=({fieldValueActions:e,fieldConfigActions:t,issueViewLayoutActions:s,userPreferenceActions:n,attachmentActions:a,permissionActions:i,issueTabsActions:r,projectContextActions:o,issueContextActions:c})=>(l,u)=>l.ofType("REFRESH_ISSUE_REQUEST").switchMap(()=>{const l=u.getState(),d=Object(re.g)(l),p=Object(re.B)(l),m=Object(F.isIssueContextHooksConsumedPart1Enabled)()?c.getMaxTokenLength():Object(re.F)(l);return Ne.Observable.zip(Zs(d,p,m),Object(zn.a)(l).do(({issue:{fields:l,tabs:u,id:m},myPreferences:b,attachments:f,permissions:g,issueSections:h,project:y})=>{if(r.setIssueTabs(u),mr(l,e,t,p),s.setIssueViewLayout(h),n.setUserPreferences(b),g&&i.setPermissions(g),f&&a.setTotalCount(f.totalCount),f&&a.setVisibleAttachments(f.nodes),y&&o.setProjectContext(Object(he.q)(y.projectKey),y),Object(F.isPolarisInsightsTabEnabled)()&&y){const{projectKey:e}=y;_e(d,e).then(e=>o.mergeProjectProperty(Object(he.q)(y.projectKey),{isPolarisProject:e}))}Object(F.isAddIssueIdToSweetStateEnabled)()&&c.mergeIssueContext({issueId:Object(he.j)(m)})}).map(N.h)).mergeMap(Ne.Observable.from).catch(e=>(Re.i.safeError("issue.fetch.issue-refresh-epic","REFRESH_ISSUE_REQUEST: Failed to refresh issue data",new ot.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Ne.Observable.empty()))});const bo=(e,t)=>Object(dn.a)((e=>`${e}/rest/graphql/1/`)(e),(e=>({method:"POST",body:JSON.stringify({query:Rn.a`query {
            issue(issueIdOrKey: "${e}", latestVersion: true, screen: "view") {
                id
                viewScreenId
            }
        }`})}))(t));var fo=(e,t)=>e.ofType("FETCH_SCREENID_REQUEST").switchMap(()=>{const e=t.getState(),s=Object(re.a)(e),n=Object(re.g)(e),a=Object(re.B)(e);return bo(n,a).map(J).catch(e=>{const t=((e,t)=>{let s="UNKNOWN_ERROR";return 401===e?s="AUTHENTICATION_ERROR":403===e||404===e?s="NOT_FOUND_OR_NO_PERMISSION_ERROR":e?t||(s="AUTHENTICATION_ERROR"):s="CONNECTIVITY_ERROR",{error:s,statusCode:e}})(e.statusCode,s);return"NOT_FOUND_OR_NO_PERMISSION_ERROR"===t.error||Object(Ns.a)("issue.fetch.issue-screenid-epic","FETCH_ISSUE_REQUEST: Failed to fetch issue data",e,new ot.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e})),Ne.Observable.of((e=>({type:"FETCH_SCREENID_FAILURE",payload:e}))(t))})}),go=n("./node_modules/lodash/size.js"),ho=n.n(go);const yo=e=>({type:"SET_ISSUE_TYPES",payload:e});var Oo=n("./src/packages/issue/issue-view/src/common/service/issue/subtask-types-server.js");function jo(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Eo(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?jo(Object(s),!0).forEach((function(t){vo(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):jo(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function vo(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const ko=new Map;var wo=(e,t)=>e.ofType("SUBTASK_QUICK_ADD_CLICKED","ISSUE_IN_EPIC_QUICK_ADD_CLICKED","CHILD_ISSUE_QUICK_ADD_CLICKED","CHILD_ISSUE_PANEL_ADD_CLICKED").mergeMap(()=>{const e=t.getState(),s=Object(re.I)(e),n=ko.get(s)||{time:new Date};if(n&&n.data&&new Date-n.time<18e5)return Ne.Observable.of(yo(n.data));ko.set(s,n);const a=Object(re.g)(e),i=_r(t);return Ne.Observable.concat(Ne.Observable.of((()=>({type:"FETCHING_ISSUE_TYPES"}))()),Object(Oo.a)(a,s,i).mergeMap(e=>{const t=e&&e.issueTypes;return ho()(t)?(ko.set(s,Eo(Eo({},n),{},{data:t})),Ne.Observable.of(yo(t))):(ko.delete(s),Ne.Observable.of((()=>({type:"FETCH_ISSUE_TYPES_FAILED"}))()))}))}),So=n("./src/packages/issue/issue-view/src/actions/fetch-jira-app-links-actions.js");var Io=(e,t)=>Object(dn.a)(Object(kn.i)(e,t)),Co=(e,t)=>e.ofType("FETCH_JIRA_APP_LINKS_REQUEST","APPLINK_AUTHENTICATION_SUCCESS").switchMap(()=>{const e=t.getState(),s=Object(re.g)(e),n=Object(re.B)(e);return Io(s,n).map(So.c).catch(e=>(Object(Ns.a)("issue.fetch.jira-app-links-epic","FETCH_JIRA_APP_LINKS_REQUEST: Failed to fetch jira app links data",e,new ot.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e})),Ne.Observable.of(Object(So.b)())))}),To=n("./src/packages/issue/issue-view/src/actions/login-actions.js"),Po=(e,t)=>e.ofType("LOGIN").switchMap(()=>{const e=Object(re.E)(t.getState());if(e){const s=`${Object(re.g)(t.getState())}/login.jsp?os_destination=${encodeURIComponent(e)}`,n=window.open(s,"_blank");return Ne.Observable.fromEvent(window,"message").filter(e=>e.origin===window.location.origin).filter(e=>e.source===n).filter(e=>e.data&&"log-in-successful"===e.data.status&&e.data.accountId).do(e=>e.source.close()).mergeMap(e=>Ne.Observable.of(Object(To.b)({accountId:e.data.accountId}),Object(N.c)()))}return Ne.Observable.empty()});const _o=(e,{fieldId:t,commentId:s},n=!1)=>{const a=Object(is.v)(e).filter(e=>e!==t),i=Object(os.u)(e).filter(e=>e!==s),r=!n&&Object(os.w)(e);return a.length>0||i.length>0||r?((e,t,s)=>({type:"MULTILINE_FIELD_EDIT_BEGIN",payload:{multilineFieldIdsToClose:e,commentIdsToClose:t,shouldCloseAddCommentForm:s}}))(a,i,r):null};var xo=Object(Ae.combineEpics)((e,t)=>e.ofType("FIELD_EDIT_BEGIN").filter(e=>Object(is.E)(e.payload.fieldId)(t.getState())).map(e=>_o(t.getState(),{fieldId:e.payload.fieldId})).filter(Boolean),(e,t)=>e.ofType("EDIT_COMMENT_BEGIN").map(e=>_o(t.getState(),{commentId:e.payload.id})).filter(Boolean),(e,t)=>e.ofType("ADD_COMMENT_FORM_EXPAND").map(()=>_o(t.getState(),{},!0)).filter(Boolean));const Do=(e,t)=>{const s=Object(re.a)(e),n=Object(re.B)(e),a=Object(sn.a)("NEW_OPTIMISTIC_COMMENT"),i=Object(sn.c)(s,n,a);return Ne.Observable.of(Object(tn.e)("NEW_OPTIMISTIC_COMMENT",i,t?aa.l:null))},Ao=e=>(Ie.a.safeError("issue.new-comment-load-draft",e,new ot.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Ne.Observable.empty());var Mo=Object(Ae.combineEpics)((e,t)=>e.ofType("SET_CONTEXT").mergeMap(()=>Do(t.getState(),!1)).catch(e=>Ao(e)),(e,t)=>e.ofType("ADD_COMMENT_FORM_EXPAND").mergeMap(()=>Do(t.getState(),!0)).catch(e=>Ao(e)));const Lo=new Ne.Subject;Lo.bufferTime(1e3,1e3,50).subscribe(e=>{Object(x.a)().loadIssues($i()(e))});const Ro=new Ne.Subject;Ro.bufferTime(1e3,1e3,50).subscribe(e=>Object(x.a)().loadIssuesById($i()(e)));var No=e=>e.ofType("PREFETCH_ISSUES").do(e=>{const{issueKeys:t,issueIds:s}=e.payload;t.forEach(e=>Lo.next(e)),s.forEach(e=>Ro.next(e))}).switchMap(()=>Ne.Observable.empty()),Uo=e=>(t,s)=>t.ofType("PROJECT_ISSUE_TYPES_REQUEST").mergeMap(t=>{const n=Object(re.g)(s.getState()),a=t.payload;return((e,t)=>{const s=`${e}/rest/api/3/project/${t}`;return Object(dn.a)(s).map($n)})(n,a).do(t=>e.mergeProjectProperty(a,{issueTypes:t})).map(e=>Object(Gn.c)(e)).catch(e=>(Re.i.safeError("change.issue.type.fetchtypes",e,new ot.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Ne.Observable.of(Object(Gn.a)(e))))});const Fo=Object(Re.j)("true","false");var Vo=(e,t)=>e.ofType("FETCH_PROJECT_HAS_SUBTASK_VALIDATORS").switchMap(()=>{const e=t.getState();return((e,t)=>Object(dn.a)(((e,t)=>`${e}/rest/internal/2/project/${t}/hasValidatorsOnSubtasks`)(e,t)))(Object(re.g)(e),Object(re.I)(e)).do(e=>{Object(Re.m)("project-validators.projectHasSubtaskValidators.result",{result:Fo(e)})}).map(e=>(e=>({type:"FETCH_PROJECT_HAS_SUBTASK_VALIDATORS_SUCCESS",payload:e}))(e)).catch(()=>Ne.Observable.of((()=>({type:"FETCH_PROJECT_HAS_SUBTASK_VALIDATORS_FAILURE"}))()))});var Ko=(e,t)=>e.ofType("SET_CONTEXT").scan(({issueKey:e},t)=>({issueKey:t.payload.issueKey,loggedInAccountId:t.payload.atlassianAccountId,previousIssueKey:e}),{issueKey:null,previousIssueKey:null,loggedInAccountId:null}).filter(({loggedInAccountId:e})=>null!==e).filter(({issueKey:e,previousIssueKey:t})=>e!==t).map(({issueKey:e})=>e).delay(3e3).switchMap(e=>{const s=t.getState(),n=`${Object(re.g)(s)}/rest/internal/2/issue/${e}/history`;return Object(dn.a)(n,{method:"POST"}).catch(e=>((e=>404===e.statusCode)(e)||Object(Ns.a)("issue.recently-viewed-issue-epic","Client network error occurred when fetching user issue history",e,new ot.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e})),Ne.Observable.empty())).ignoreElements()});function Bo(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Wo(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Bo(Object(s),!0).forEach((function(t){Ho(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Bo(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Ho(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Go=e=>{const{applicationType:t,applicationName:s,issueLinkUrl:n,relationship:a,summary:i,iconUrl:r,issueKey:o,createReciprocalLink:c}=e;return Wo({application:{name:s,type:t},relationship:a,object:{summary:i,icon:{url16x16:r},title:o,url:n},createReciprocalLink:c},"WITH_ISSUE_ID"===e.payloadType?{globalId:e.globalId}:{appLinkId:e.appLinkId})},$o=Wo(Wo({},Nr.a),{},{method:"POST"});function qo(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function zo(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?qo(Object(s),!0).forEach((function(t){Yo(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):qo(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Yo(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Qo=(e,t,s)=>((e,t,s)=>Object(dn.a)(Object(kn.o)(e,t),Wo(Wo({},$o),{},{body:JSON.stringify(Go(s))})))(Object(re.g)(e),Object(re.B)(e),t).map(e=>Object(Va.h)(t.id,e,s.update({action:"succeeded"}))).catch(e=>Ne.Observable.of(Object(Va.e)(t.id,t.issueKey,e,s.update({action:"failed"})))),Jo=(e,t)=>e.ofType("SAVE_REMOTE_LINKED_ISSUE_REQUEST").mergeMap(e=>{const s=t.getState(),{saveRemoteIssueLinkPayload:n,requestAnalyticsEvent:a}=e.payload;return Qo(s,n,a)}),Zo=(e,t)=>e.ofType("SAVE_REMOTE_LINKED_ISSUE_RETRY").mergeMap(e=>{const s=t.getState(),{optimisticId:n,requestAnalyticsEvent:a}=e.payload,i=((e,t)=>{const s=Object(cs.n)(e).find(e=>e.id===t);if(!s||void 0===s.applicationName||void 0===s.applicationType||void 0===s.iconUrl||void 0===s.relationship||void 0===s.summary)return;const n={id:s.id,applicationType:s.applicationType,applicationName:s.applicationName,issueLinkUrl:s.issueLinkUrl,relationship:s.relationship,summary:s.summary,iconUrl:s.iconUrl,issueKey:s.issueKey,createReciprocalLink:s.createReciprocalLink};if(void 0===s.globalId){if(void 0===s.appLinkId)return;return zo(zo({},n),{},{appLinkId:s.appLinkId,payloadType:"WITHOUT_ISSUE_ID"})}return zo(zo({},n),{},{globalId:s.globalId,remoteIssueId:s.remoteIssueId,payloadType:"WITH_ISSUE_ID"})})(s,n);return i?Qo(s,i,a):Ne.Observable.empty()});var Xo=n("./src/packages/issue/issue-view/src/actions/request-panel-metadata-actions.js");const ec=e=>(Re.i.safeError("issue.request-panel-metadata.fetch",JSON.stringify(e),new ot.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:new Error(JSON.stringify(e))})),Ne.Observable.of(Object(Xo.b)()));var tc=(e,t)=>e.ofType("FETCH_REQUEST_PANEL_METADATA").flatMap(()=>(e=>Object(dn.a)(((e,t)=>`${e}/rest/servicedesk/1/servicedesk/request/${t}/request-panel-metadata`)(Object(re.g)(e),Object(re.B)(e))))(t.getState()).flatMap(e=>e.errors?ec(e):(e=>Ne.Observable.of(Object(Xo.c)(e)))(e)).catch(e=>ec(e))),sc=(e,t)=>e.ofType("SHARE_AS_COMMENT").switchMap(()=>{const e=t.getState();return Object(os.w)(e)?Ne.Observable.empty():Ne.Observable.of(Object(aa.c)(),Object(aa.d)("NEW_OPTIMISTIC_COMMENT",!1))}),nc=n("./src/packages/issue/issue-view/src/issue-field/state/actions/field-actions.js"),ac=n("./src/packages/issue/issue-view/src/views/connect-field.js"),ic=e=>e.ofType("FIELD_SHORTCUT_SELECTED").switchMap(e=>{const{fieldKey:t,isRichTextField:s,analyticsEvent:n}=e.payload;switch(t){case"issuelinks":return Ne.Observable.of(Object(Na.a)());case"issuetype":return Ne.Observable.of(Object(Gn.d)(!0));default:{const{isOptimistic:e,canContainMediaContent:a,saveField:i,shouldSaveDraft:r,shouldDiscardChangeOnFailure:o,onSaveFailureFlagType:c,onSaveSuccessFlagType:l}=ac.b;return Object(ne.f)(n,"issueFields updateStarted",{isFromDotMenu:!0,fieldType:t}),Ne.Observable.of(Object(nc.b)(t,{isRichTextField:s,isOptimistic:e,canContainMediaContent:a,saveField:i,shouldDiscardChangeOnFailure:o,shouldSaveDraft:r,onSaveFailureFlagType:c,onSaveSuccessFlagType:l}))}}});var rc=e=>e.ofType("SET_TIMESTAMP_DISPLAY_SETTING").do(e=>{window.localStorage.setItem("jira.absolutedate.issueview",e.payload)}).ignoreElements();var oc=(e,t)=>e.ofType("FETCH_LOGGED_IN_USER_REQUEST").switchMap(()=>{const e=t.getState(),s=Object(re.a)(e);if(!s)return Ne.Observable.empty();const n=((e,t)=>`${e}/rest/api/2/user?${`accountId=${encodeURIComponent(t)}`}${Object(F.isUseAppPermissionsFromTenantContextEnabled)()?"":"&expand=applicationRoles"}`)(Object(re.g)(e),s);return Object(dn.a)(n).map(qi.d).map(e=>{const t=Object(qi.c)(e),s=Object(qi.a)(e);return Ee(t,s)}).catch(e=>(Object(Ns.a)("issue.fetch.user-fetch-epic","FETCH_LOGGED_IN_USER_REQUEST: Failed to fetch logged in user details",e,new ot.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e})),Ne.Observable.of((()=>({type:"FETCH_LOGGED_IN_USER_FAILURE"}))())))}),cc=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/get-meta.js");var lc=()=>Object(F.isUseAppPermissionsFromTenantContextEnabled)()?()=>Ne.Observable.empty():Object(F.isItSafeLoggingEnabledToUseAppPermissionsFromTenantContext)()?e=>e.ofType("FETCH_LOGGED_IN_USER_REQUEST").switchMap(()=>{const e=["ajs-has-jira-software","ajs-has-jira-service-desk","ajs-has-jira-core"].filter(e=>null==Object(cc.a)(e));return e.length&&Re.i.safeWarn("issue.fetch.user-fetch-timing-epic",`Missing some product access meta tags: ${e.toString()}`),Ne.Observable.empty()}):(()=>{let e=null,t=null;return(s,n)=>s.pipe(ss("FETCH_LOGGED_IN_USER_SUCCESS","FETCH_ISSUE_SUCCESS"),Object(Zt.mergeMap)(s=>{switch(s.type){case"FETCH_LOGGED_IN_USER_SUCCESS":if(e&&!t){const t=n.getState();"service_desk"===Object(Z.G)(t)&&Re.i.safeWarn("issue.fetch.user-fetch-timing-epic",`Issue data loaded before user data loaded. By [${Date.now()-e}]ms`)}t=Date.now();break;case"FETCH_ISSUE_SUCCESS":e=Date.now()}return Ne.Observable.empty()}))})(),uc=n("./src/packages/issue/issue-view/src/actions/web-links-actions.js"),dc=n("./src/packages/issue/issue-view/src/selectors/web-links-selector.js");const pc=(e,t,s)=>({object:{icon:{url16x16:s},title:e,url:t}}),mc=({baseUrl:e,issueId:t,href:s,linkText:n,iconUrl:a})=>Object(Ze.d)(`${((e,t)=>`${e}/rest/api/3/issue/${t}/remotelink`)(e,t)}`,{body:JSON.stringify(pc(n,s,a))}).then(e=>((e,t,s,n)=>({id:Object(he.u)(e.id),href:t,linkText:s,iconUrl:n}))(e,s,n,a)),bc=(e,t,s)=>{const n=e.message;Object(Ns.a)(s,t,e,{errorReason:n})},fc=(e,t,s,n,a)=>{if(void 0===s||void 0===n){const e=void 0===s?"No issueId when creating weblink":"Broken weblink state when creating weblink";return Re.i.safeError("issue.fetch.web-links-epic",a,new ot.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:new Error(e)})),Ne.Observable.empty()}const{href:i,linkText:r,iconUrl:o}=n,c=null==o?"":o;return Ne.Observable.from(mc({baseUrl:t,href:i,issueId:Object(he.j)(s.toString()),linkText:null==r?i:r,iconUrl:Object(he.i)(c)})).map(e=>Object(uc.e)(n.id,e)).catch(e=>(bc(e,`${a}: Failed to create web link`,"issue.fetch.web-links-epic"),Ne.Observable.of(Object(uc.b)(n.id))))},gc=(e,t)=>e.ofType("DELETE_WEB_LINK_REQUEST").switchMap(e=>{const s=t.getState(),n=Object(re.g)(s),a=Object(re.B)(s),{id:i}=e.payload;return Ne.Observable.fromPromise(((e,t,s)=>Object(Ze.a)(`${e}/rest/api/3/issue/${t}/remotelink/${s}`))(n,a,i)).map(()=>Object(uc.i)(i)).catch(e=>(bc(e,"DELETE_WEB_LINK_REQUEST: Failed to delete web link","issue.fetch.web-links-epic"),Ne.Observable.of(Object(uc.g)(i))))}),hc=(e,t)=>e.ofType("CREATE_WEB_LINK_REQUEST").switchMap(e=>{const s=t.getState(),n=Object(re.g)(s),a=Object(re.A)(s),{optimisticId:i}=e.payload,r=Object(dc.d)(i)(s);return fc(0,n,a,r,"CREATE_WEB_LINK_REQUEST")}),yc=(e,t)=>e.ofType("CREATE_WEB_LINK_RETRY").switchMap(e=>{const s=t.getState(),n=Object(re.g)(s),a=Object(re.A)(s),{optimisticId:i}=e.payload,r=Object(dc.d)(i)(s);return fc(0,n,a,r,"CREATE_WEB_LINK_RETRY")});var Oc=e=>e.ofType("state.EDIT_WORKLOG_SUCCESS","state.ADD_WORKLOG_SUCCESS").filter(e=>e.meta.shouldFetchViewContext).mapTo(dt()),jc=n("./src/packages/issue/issue-view/src/common/model/linked-issue-type.js"),Ec=n("./src/packages/issue/issue-view/src/model/change-type.js"),vc=n("./node_modules/lodash/forEach.js"),kc=n.n(vc);const wc=["FIELD_SAVE_SUCCESS","SIMPLE_CHANGE_ISSUE_TYPE_REQUEST_SUCCESS","ISSUE_RELATIONSHIP_UPDATE_SUCCESS","FIELD_SAVE_REQUEST","FIELD_SAVE_FAILURE","FIELD_UPDATED","FETCH_LINKED_ISSUES_DATA_SUCCESS","DELETE_LINKED_ISSUE_SUCCESS","CHILD_ISSUE_ADD_SUCCESS","ISSUE_CHILDREN_ORDER_CHANGE_SUCCESS"];var Sc=e=>(t,s)=>t.ofType(...wc).do(t=>{if(e)try{const n=Object(he.j)(String(Object(re.A)(s.getState())));switch(t.type){case"SIMPLE_CHANGE_ISSUE_TYPE_REQUEST_SUCCESS":{const{payload:{fieldId:s,targetTypeName:a}}=t;e({issueId:n,type:Ec.a.ISSUE_TYPE_CHANGED,fieldId:s,meta:{typeName:a}});break}case"FIELD_UPDATED":{const{payload:{fieldId:s,fieldValue:a}}=t;e({issueId:n,type:Ec.a.FIELD_CHANGED,fieldId:s,meta:{fieldId:s,fieldValue:a}});break}case"ISSUE_RELATIONSHIP_UPDATE_SUCCESS":{const{payload:{oldParentIdsByIssueIds:s,parentIssueId:a}}=t;e({issueId:n,type:Ec.a.ISSUE_RELATIONSHIP_UPDATED,meta:{newParentIssueId:a,oldParentIssueId:s[n]||null}});break}case"FETCH_LINKED_ISSUES_DATA_SUCCESS":{const s=((e,t)=>{const{payload:{optimisticLinks:s,issueLinks:n}}=t,a=[];return kc()(s,e=>{const t=n.linkedIssues[e.linkedIssueKey];t&&a.push({linkedIssueId:Object(he.j)(t.id),direction:e.direction})}),a})(0,t);s.length&&e({issueId:n,type:Ec.a.ISSUE_LINKS_CREATED,meta:{links:s}});break}case"DELETE_LINKED_ISSUE_SUCCESS":{const{meta:{issueId:s,direction:a}}=t;e({issueId:n,type:Ec.a.ISSUE_LINK_DELETED,meta:{linkedIssueId:s,direction:Object(jc.b)(a)}});break}case"CHILD_ISSUE_ADD_SUCCESS":{const{issueKey:s,issueLink:a,issueSummary:i,issueTypeIconUrl:r,issueTypeName:o}=t.payload.childIssue;e({issueId:n,type:Ec.a.CHILD_ISSUE_ADDED,meta:{childIssue:{id:Object(he.j)(t.payload.childIssue.id),issueKey:s,issueLink:a,issueSummary:i,issueTypeIconUrl:r||void 0,issueTypeName:o||void 0}}});break}case"ISSUE_CHILDREN_ORDER_CHANGE_SUCCESS":e({issueId:n,type:Ec.a.ISSUE_CHILDREN_ORDER_CHANGED,meta:t.payload});break;case"FIELD_SAVE_REQUEST":{const{payload:{fieldId:s,value:a}}=t;e({issueId:n,type:Ec.a.FIELD_CHANGE_REQUESTED,meta:{fieldId:s,fieldValue:a}});break}case"FIELD_SAVE_FAILURE":{const{payload:{fieldId:s}}=t;e({issueId:n,type:Ec.a.FIELD_CHANGE_FAILED,meta:{fieldId:s}});break}}}catch(n){Re.i.safeError("issue.issue-field.ops.change-notification","Failed to call onChange callback",new ot.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:n}))}}).ignoreElements();const Ic=e=>({type:"FIELD_LOAD_DRAFT_FAILURE",payload:e});var Cc=e=>e.ofType("FIELD_SAVE_SUCCESS").mergeMap(e=>(e=>{const{payload:{fieldId:t}}=e;return Ne.Observable.of(Object(tn.b)({fieldId:t}))})(e)).catch(e=>(e=>(Object(Ns.a)("issue.delete-draft-request","Could not send request to delete field draft from local storage",e,new ot.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Ne.Observable.of((e=>({type:"FIELD_DELETE_DRAFT_FAILURE",payload:e}))(e))))(e));var Tc=(e,t)=>e.ofType("FIELD_EDIT_BEGIN").mergeMap(e=>Ne.Observable.merge(...((e,t)=>{const s=Object(is.H)(t);if(-1!==s.indexOf(e.payload.fieldId)){const n=Object(re.a)(t),a=Object(re.B)(t);return s.map(s=>{const i=Object(is.o)(s)(t),r=Object(sn.c)(n,a,s);return Ne.Observable.of(Object(tn.e)(s,r,s!==e.payload.fieldId?null:nc.e,i))})}return[]})(e,t.getState()))).catch(e=>(e=>(Object(Ns.a)("issue.load-field-draft","Failed to send request to load field draft from local storage ",e,new ot.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Ne.Observable.of(Ic(e))))(e));var Pc=e=>e.ofType("FIELD_INIT_OPTIONS","FIELD_EDIT_REQUEST_EXTERNAL").groupBy(e=>e.payload.fieldId).mergeMap(e=>{const t=e.filter(e=>"FIELD_EDIT_REQUEST_EXTERNAL"===e.type),s=e.filter(e=>"FIELD_INIT_OPTIONS"===e.type),n=t.takeUntil(s).takeLast(1).merge(s.take(1)).pairwise(),a=t.withLatestFrom(s);return Ne.Observable.merge(n,a).map(([e,t])=>{const{fieldId:s,fieldOptions:n}=t.payload;return Object(nc.b)(s,n)})}),_c=n("./src/packages/issue/issue-view/src/common/constants/flags.js"),xc=n("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js"),Dc=n("./src/packages/issue/issue-view/src/issue-field/state/actions/field-save-actions.js");function Ac(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Mc(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ac(Object(s),!0).forEach((function(t){Lc(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ac(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Lc(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var Rc=(e,t)=>{const s=e.ofType("ASSIGN_TO_ME_EXTERNAL"),n=e.ofType("FIELD_INIT_OPTIONS").filter(e=>"assignee"===e.payload.fieldId);return s.filter(()=>{const e=t.getState();return Object(Z.z)(e)&&Object(xc.d)(e)}).withLatestFrom(n,(e,{payload:{fieldOptions:s}})=>{const n=t.getState(),a=Object(Z.z)(n);return a?Object(Dc.b)("assignee",(({avatarUrl:e,displayName:t,id:s})=>({avatarUrls:{"48x48":e},displayName:t,accountId:s}))(a),Mc(Mc({},s),{},{onSaveSuccessFlagType:_c.d})):null})},Nc=Object(Ae.combineEpics)(Pc,Rc);var Uc=(e,t)=>e.pipe(ss("FETCH_ISSUE_SUCCESS"),Object(Zt.mergeMap)(e=>Ne.Observable.merge(...((e,t)=>{const s=Object(re.a)(t),n=Object(re.B)(t);return Object(is.H)(t).map(e=>{const a=Object(is.h)(e)(t),i=Object(sn.c)(s,n,e);return Ne.Observable.of(Object(tn.e)(e,i,null,a))})})(0,t.getState()))),Object(Zt.catchError)(e=>(e=>(Object(Ns.a)("issue.load-field-draft","Failed to send request to load field draft from local storage ",e,{}),Ne.Observable.of(Ic(e))))(e)));var Fc=e=>e.ofType("FIELD_SAVE_SUCCESS").filter(e=>e.payload.fieldOptions.canContainMediaContent&&e.meta.shouldFetchViewContext).mapTo(dt());var Vc=(e,t)=>e.ofType("FIELD_EDIT_UPDATE").mergeMap(e=>((e,t)=>{const{payload:{fieldId:s,fieldOptions:n,value:a}}=e;if(!(!!n&&n.shouldSaveDraft))return Ne.Observable.empty();const i=Object(is.n)(s)(t);return Ne.Observable.of(Object(tn.h)(s,a,i))})(e,t.getState())).catch(e=>(e=>(Object(Ns.a)("issue.save-draft","Could not send request to save field draft to local storage",e,new ot.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Ne.Observable.of((e=>({type:"FIELD_SAVE_DRAFT_FAILURE",payload:e}))(e))))(e)),Kc=n("./node_modules/lodash/pickBy.js"),Bc=n.n(Kc),Wc=n("./src/packages/issue/issue-view/src/ecosystem/forge/get-forge-custom-field.js");function Hc(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Gc(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const $c=e=>e&&e.id,qc=(e,t)=>Object(zn.c)(e,t).map(N.h),zc=(e,t,s,n,a,i,r)=>{const o=Object(re.g)(e),c=Object(re.B)(e),l=Object(is.l)(t)(e),u=Object(is.r)(t)(e),d=Object(is.f)(t)(e),p=Object(is.q)(t)(e),m=Object(Wc.b)(p)?s:((e,t)=>{switch(e){case"option2":return t.id;case"array":return t.map(e=>e.id);default:return t}})(u,s);return i.setFieldValue(c,t,m),Ne.Observable.fromPromise(n.saveField(function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Hc(Object(s),!0).forEach((function(t){Gc(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Hc(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({baseUrl:o,issueKey:c,fieldId:t,fieldMetaKey:l,value:m,saveFieldData:a},d?{fieldEditSessionId:d}:null),e)).flatMap(e=>[Object(Dc.c)(t,n,m,e,{issueKey:c,shouldFetchViewContext:r}),Object(Dc.e)(t,m)])},Yc=e=>(t,s)=>t.ofType("FIELD_SAVE_REQUEST").groupBy(e=>e.payload.fieldId).mergeMap(t=>t.switchMap(t=>{const n=s.getState(),a=Object(re.B)(n),{fieldId:i,value:r,fieldOptions:o,saveFieldData:c,shouldFetchViewContext:l}=t.payload,u=o.isOptimistic?zc(n,i,r,o,c,e,l):((e,t,s,n,a,i,r)=>zc(e,t,s,n,a,i,r).mergeMap(t=>qc(e).mergeMap(e=>Ne.Observable.of(e,t))))(n,i,r,o,c,e,l),d=Object(is.o)(i)(n);return u.catch(t=>{const s=(e=>e instanceof ba.a?e.errors&&e.errors.length>0?e.errors[0].error:e.message:null)(t);return e.setFieldValue(a,i,d),Ne.Observable.of(Object(Dc.a)(i,s,t,o))})})),Qc=["status","timeoriginalestimate"],Jc=(e,t)=>(s,n)=>s.ofType("FIELD_UPDATED").filter(e=>Qc.includes(e.payload.fieldId)).switchMap(s=>((e,t,s,n)=>Object(zn.c)(e,t).do(t=>{const{fields:a}=t.issue,i=Object(re.B)(e);return mr(a,s,n,i),t}).map(N.h))(n.getState(),(e=>{const{fieldId:t,extraParams:s}=e.payload;if("status"===t)return{shouldRefreshComments:s&&s.viaDialog}})(s),e,t)),Zc=(e,t)=>e.ofType(_c.L,"ZERO_APPROVAL_REQUIRED").switchMap(()=>qc(t.getState()));var Xc=(e,t)=>Object(Ae.combineEpics)((e=>(t,s)=>t.ofType("FIELD_EDIT_CONFIRM").map(t=>{const n=s.getState(),{fieldId:a,fieldOptions:i,saveFieldData:r,analyticsEvent:o,analyticsAttributeIdRetriever:c=$c}=t.payload,l=Object(is.h)(a)(n),u=Object(F.isReadFromSweetStateBeforeSavingEnabled)()?e.getFieldValue(Object(re.B)(n),a):Object(is.n)(a)(n);if(Jr()(l,u))return Object(nc.c)(a,i);let d=!1;if(i.isRichTextField&&i.canContainMediaContent){const e=Object(is.q)(a)(n),t=e&&e.adfValue;d=Object(Fe.e)(t,l),d&&s.dispatch(bt())}const p=Bc()({updatedField:a,oldValId:c(u),newValId:c(l)},e=>null!=e);return Object(Dc.b)(a,l,i,r,o,p,d)}))(e),Yc(e),Jc(e,t),Zc),el=(e,t)=>e.ofType("FIELD_EDIT_BEGIN","FIELD_PASTE","FIELD_SAVE_SUCCESS").groupBy(e=>e.payload.fieldId).map(e=>{const s=e.filter(({type:e})=>"FIELD_EDIT_BEGIN"===e);return e.window(s).map(e=>{const s=e.filter(({type:e})=>"FIELD_SAVE_SUCCESS"===e),n=e.filter(({type:e})=>"FIELD_PASTE"===e).takeUntil(s).reduce((e,t)=>[...e,t.payload.pastedContent],[]);return s.withLatestFrom(n).mergeMap(([e,s])=>{const{fieldId:n,fieldOptions:a}=e.payload,i=Object(is.o)(n)(t.getState());return 0===s.length?Ne.Observable.empty():Ne.Observable.of(Object(Dc.d)(n,a,i,s))})}).mergeAll()}).mergeAll();const tl=()=>[rn,un,cn,Vc,Cc,Uc,Tc,na,da,ma],sl=(e,t,s,n,a,i,r,o,c,l,u,d,p,m,b,f,g)=>((e,t,s,n,a,i,r,o,c,l,u,d,p,m,b,f,g)=>[Ra,Ds,Rr({fieldValueActions:a,fieldConfigActions:i,issueViewLayoutActions:r,userPreferenceActions:l,issueTabsActions:m,permissionActions:p,attachmentActions:o,prefetchedResourceManager:u,jiraSettingsActions:b,projectContextActions:f,issueContextActions:g}),mo({fieldValueActions:a,fieldConfigActions:i,issueViewLayoutActions:r,userPreferenceActions:l,permissionActions:p,issueTabsActions:m,attachmentActions:o,projectContextActions:f,issueContextActions:g}),cr(u),Pi,On,oc,lc(),Xc(a,i),Po,va,oa(o),ta,ca.d,ca.e,Object(ca.c)(d),sc,Ji,_n,Xs(re.g,re.B,re.F,o,g),Ln,pa,Fc,Fa,qr,Hi,Mn,...tl(),Sc(e),Mo,Ii,Bn,Wn,ao(n,s,c,g),io,ro,Sr(s,a,i,r,l,f,g),Tr,Nc,_i(t),ka,el,Vo,Ko,Xn,Uo(f),Qn,rc,tc,Co,Ia,Ma,po,Jt(o,d),Oc,Ki,xo,wo,fo,gc,hc,yc,No,...Object(F.isShortcutMenuEnabled)()?[ic]:[],...Object(F.isRemoteIssueLinksEnabled)()?[Wa,Jo,Zo]:[],...Object(F.isActivitySortingEnabled)()?[gn]:[]])(e,t,s,n,a,i,r,o,c,l,u,d,p,m,b,f,g);function nl(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function al(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?nl(Object(s),!0).forEach((function(t){il(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):nl(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function il(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const rl={server:{}};var ol=(e=rl,t)=>{const{type:s,payload:n}=t;switch(s){case"SAVE_SERVER_TIME":return n.serverTime?al(al({},e),{},{server:al(al({},e.server),{},{[n.key]:n.serverTime})}):e;default:return e}};var cl=(e=null,t)=>{const{type:s,payload:n}=t;switch(s){case"FETCH_UPLOAD_CONTEXT_SUCCESS":return n;case"FETCH_UPLOAD_CONTEXT_FAILURE":return null;default:return e}};var ll=(e=null,t)=>{const{type:s,payload:n}=t;switch(s){case"FETCH_USER_AUTH_SUCCESS":return n;case"FETCH_USER_AUTH_FAILURE":return null;default:return e}};function ul(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function dl(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ul(Object(s),!0).forEach((function(t){pl(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ul(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function pl(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const ml={clientId:"FETCH_ERROR",serviceHost:"FETCH_ERROR",tokenLifespanInMs:0,tokenIssueTimestamp:0,token:null,areTokenPermissionsUpToDate:!1,collection:null};var bl=(e=null,t)=>{const{type:s,payload:n}=t;switch(s){case"FETCH_VIEW_CONTEXT_FAILURE":return ml;case"FETCH_VIEW_CONTEXT_SUCCESS":return n;case"MARK_TOKEN_AS_OUTDATED":return dl(dl({},e),{},{areTokenPermissionsUpToDate:!1});case"MARK_TOKEN_AS_UP_TO_DATE":return dl(dl({},e),{},{areTokenPermissionsUpToDate:!0});default:return e}},fl=n("./node_modules/lodash/mapValues.js"),gl=n.n(fl),hl=n("./src/packages/issue/issue-view/src/common/state/selectors/get-editing-value.js");function yl(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Ol(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?yl(Object(s),!0).forEach((function(t){jl(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):yl(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function jl(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const El={},vl=(e,t,s,n=[])=>{const a=Ol(Ol({},e),{},{[t]:Ol(Ol({},e[t]),s)});return n.forEach(e=>{delete a[t][e]}),a};var kl=(e=El,t)=>{switch(t.type){case"REFRESH_ISSUE_SUCCESS":case"FETCH_ISSUE_SUCCESS":{const{fields:s}=t.payload.issue;return gl()(s,t=>Ol(Ol({},t),{},{editingValue:e[t.key]&&e[t.key].editingValue,pendingValue:e[t.key]&&e[t.key].pendingValue}))}case"PREVIEW_DATA_FETCHED":{const s=Object(we.a)(t.payload);return Object(ns.merge)(e,s)}case"FIELD_EDIT_BEGIN":{const{fieldId:s,fieldOptions:{isRichTextField:n},fieldEditSessionId:a}=t.payload,i=n?Object(hl.b)(e[s]):Object(hl.a)(e[s]);return vl(e,s,Ol({editingValue:i},a?{fieldEditSessionId:a}:null),["invalidMessage","isInvalid"])}case"MULTILINE_FIELD_EDIT_BEGIN":{const{multilineFieldIdsToClose:s}=t.payload;if(null!=s){const t=s.reduce((t,s)=>Ol(Ol({},t),{},{[s]:Ol(Ol({},e[s]),{},{editingValue:void 0})}),{});return Ol(Ol({},e),t)}return e}case"FIELD_EDIT_UPDATE":{const{fieldId:s,value:n}=t.payload;return vl(e,s,{editingValue:n},["invalidMessage","isInvalid"])}case"FIELD_SAVE_REQUEST":{const{fieldId:s,value:n}=t.payload;return vl(e,s,{pendingValue:n},["editingValue"])}case"FIELD_EDIT_CANCEL":{const{fieldId:s}=t.payload;return vl(e,s,{},["editingValue","invalidMessage","isInvalid","fieldEditSessionId"])}case"FIELD_SAVE_SUCCESS":{const{fieldId:s,fieldOptions:n}=t.payload;if(!(s in e))return e;const{pendingValue:a}=e[s];let i=vl(e,s,{},["pendingValue","fieldEditSessionId"]);return n.isOptimistic&&(i=n.isRichTextField?vl(i,s,{adfValue:a}):vl(i,s,{value:a})),i}case"FIELD_SAVE_FAILURE":{const{fieldId:s,invalidMessage:n,fieldOptions:a}=t.payload,{pendingValue:i}=e[s],r=a.shouldDiscardChangeOnFailure?["editingValue"]:[];return vl(e,s,{editingValue:i,isInvalid:!0,invalidMessage:n},["pendingValue","fieldEditSessionId",...r])}case"FIELD_ADD_ALLOWED_VALUES":{const{allowedValues:s,fieldId:n}=t.payload,a=e[n]&&e[n].allowedValues||[];return vl(e,n,{allowedValues:[...a,...s]})}case"state.UPDATE_TIME_REMAINING_SUCCESS":{const{timeRemaining:s}=t.payload;return Ol(Ol({},e),{},{timetracking:Ol(Ol({},e.timetracking),{},{value:Ol(Ol({},e.timetracking.value),{},{remainingEstimateSeconds:s})})})}case"state.ADD_WORKLOG_SUCCESS":{const{timeTracking:s}=t.payload;return vl(e,"timetracking",{value:s})}case"state.EDIT_WORKLOG_SUCCESS":case"state.DELETE_WORKLOG_SUCCESS":{const{timeSpentSecondsDelta:s,newRemainingEstimateSeconds:n}=t.payload.timeTrackingDeltas,a=e.timetracking.value,i=Ol(Ol({},a),{},{timeSpentSeconds:(a.timeSpentSeconds||0)+s});return null!==n&&(i.remainingEstimateSeconds=n),vl(e,"timetracking",{value:i})}case"UPDATE_APPROVAL_LINKED_USER_PICKER_FIELD":{const{linkedUserPickerFieldId:s,newApproverList:n}=t.payload;return s&&e[s]?vl(e,s,{value:n}):e}default:return e}};function wl(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Sl(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?wl(Object(s),!0).forEach((function(t){Il(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):wl(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Il(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Cl={selectedActivityItem:null,selectedActivitySortOrder:null};var Tl=(e=Cl,t)=>{switch(t.type){case"SELECT_ACTIVITY_ITEM":return Sl(Sl({},e),{},{selectedActivityItem:t.payload});case"SELECT_ACTIVITY_SORT_ORDER":return Object(F.isActivitySortingEnabled)()?Sl(Sl({},e),{},{selectedActivitySortOrder:t.payload}):e;case"FETCH_ISSUE_SUCCESS":return Object(F.isActivitySortingEnabled)()?Sl(Sl({},e),{},{selectedActivitySortOrder:t.payload.activitySortOrder}):e;default:return e}};function Pl(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function _l(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const xl={epic:void 0};var Dl=(e=xl,t)=>{switch(t.type){case"FETCH_ISSUE_SUCCESS":return function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Pl(Object(s),!0).forEach((function(t){_l(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Pl(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},t.payload.issue.agile);default:return e}};function Al(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Ml(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Al(Object(s),!0).forEach((function(t){Ll(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Al(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Ll(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Rl={isOpen:!1};var Nl=(e=Rl,t)=>{switch(t.type){case"SHOW_ASSIGN_ISSUE_PARENT_MODAL":return Ml(Ml({},e),{},{isOpen:!0});case"HIDE_ASSIGN_ISSUE_PARENT_MODAL":return Ml(Ml({},e),{},{isOpen:!1});default:return e}};function Ul(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Fl(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ul(Object(s),!0).forEach((function(t){Vl(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ul(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Vl(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Kl={isPopupOpen:!1,attachments:{},placeholderAttachmentCount:0},Bl=(e,{id:t,mediaApiFileId:s})=>{const n=[t,s],a=Object.keys(e.attachments).filter(e=>!n.includes(e)).reduce((t,s)=>Fl(Fl({},t),{},{[s]:e.attachments[s]}),{});return Fl(Fl({},e),{},{attachments:a})};var Wl=(e=Kl,t)=>{switch(t.type){case"ATTACHMENT_MEDIA_SERVICES_UPLOAD_BEGIN":{const s=t.payload;return Fl(Fl({},e),{},{attachments:Fl(Fl({},e.attachments),{},{[s.id]:s})})}case"ATTACHMENT_MEDIA_SERVICES_UPLOAD_END":return e;case"ATTACHMENT_MEDIA_SERVICES_UPLOAD_ERROR":{const{fileId:s}=t.payload;if(null==s)return e;const n=Object.keys(e.attachments).filter(e=>e!==s).reduce((t,s)=>Fl(Fl({},t),{},{attachments:Fl(Fl({},t.attachments),{},{[s]:e.attachments[s]})}),{});return Fl(Fl({},e),{},{attachments:n})}case"ATTACHMENT_JIRA_CREATE_SUCCESS":return Bl(e,t.payload);case"ATTACHMENT_JIRA_CREATE_FAILURE":return Bl(e,t.payload.attachment);case"ATTACHMENT_PICKER_POPUP_OPEN_SUCCESS":return Fl(Fl({},e),{},{isPopupOpen:!0});case"ATTACHMENT_PICKER_POPUP_CLOSE_SUCCESS":return Fl(Fl({},e),{},{isPopupOpen:!1});case"ATTACHMENT_PANEL_DRAG_ENTER":return Fl(Fl({},e),{},{placeholderAttachmentCount:t.payload});case"ATTACHMENT_PANEL_DRAG_LEAVE":case"ATTACHMENT_PANEL_DROP":return Fl(Fl({},e),{},{placeholderAttachmentCount:0});default:return e}};function Hl(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Gl(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Hl(Object(s),!0).forEach((function(t){$l(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Hl(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function $l(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const ql={isBannerVisible:!1,isBannerDismissed:!1,isTourActive:!1};var zl=(e=ql,t)=>{switch(t.type){case"PREVIEW_DATA_FETCHED":case"FETCH_ISSUE_SUCCESS":{const s=t.payload.myPreferences&&t.payload.myPreferences["jira.user.issue.changeboarding.lastinteracted"];return void 0!==s?Gl(Gl({},e),{},{isBannerVisible:null===s}):e}case"CHANGEBOARDING_BANNER_DISMISS":return Gl(Gl({},e),{},{isBannerVisible:!1,isBannerDismissed:!0});case"CHANGEBOARDING_TOUR_BEGIN":return Gl(Gl({},e),{},{isBannerVisible:!1,isTourActive:!0});case"CHANGEBOARDING_TOUR_END":return Gl(Gl({},e),{},{isTourActive:!1});default:return e}};function Yl(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Ql(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Yl(Object(s),!0).forEach((function(t){Jl(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Yl(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Jl(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Zl={subtaskQuickAddClickCount:0,issueInEpicQuickAddClickCount:0,childIssueQuickAddClickCount:0};var Xl=(e=Zl,t)=>{switch(t.type){case"SUBTASK_QUICK_ADD_CLICKED":return Ql(Ql({},e),{},{subtaskQuickAddClickCount:e.subtaskQuickAddClickCount+1});case"ISSUE_IN_EPIC_QUICK_ADD_CLICKED":return Ql(Ql({},e),{},{issueInEpicQuickAddClickCount:e.issueInEpicQuickAddClickCount+1});case"CHILD_ISSUE_QUICK_ADD_CLICKED":return Ql(Ql({},e),{},{childIssueQuickAddClickCount:e.childIssueQuickAddClickCount+1});default:return e}};function eu(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function tu(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?eu(Object(s),!0).forEach((function(t){su(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):eu(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function su(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const nu={isBannerVisible:!1};var au=(e=nu,t)=>{switch(t.type){case"PREVIEW_DATA_FETCHED":case"FETCH_ISSUE_SUCCESS":{const s=t.payload.myPreferences&&t.payload.myPreferences["jira.user.issue.clickthrough-banner.lastinteracted"];return void 0!==s?tu(tu({},e),{},{isBannerVisible:null===s}):e}case"CLICKTHROUGH_BANNER_DISMISS":return tu(tu({},e),{},{isBannerVisible:!1});default:return e}};const iu={isOpen:!1};var ru=(e=iu,t)=>{const{type:s}=t;switch(s){case"SHOW_CLONE_MODAL":return{isOpen:!0};case"HIDE_CLONE_MODAL":return{isOpen:!1};default:return e}},ou=n("./src/packages/common-legacy-do-not-add-anything-new/src/icepick/unset-in.js");function cu(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function lu(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?cu(Object(s),!0).forEach((function(t){uu(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):cu(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function uu(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const du=Object(ns.freeze)({pendingSavedValues:{},pendingDeletedIds:[],deleteModalCommentId:null,isLoadingMoreComments:!1,commentEditors:{},isCommentAttachmentInProgress:!1,hasScrolledPermalinkComment:!1,loadingStage:"LOADING"});var pu=(e=du,t)=>{const s=t=>Object(ns.updateIn)(e,["pendingDeletedIds"],e=>e.filter(e=>e!==t));switch(t.type){case"SAVE_COMMENT_REQUEST":{const{isNewComment:s,id:n,createdDate:a,authorId:i,bodyHtml:r,bodyAdf:o,visibility:c}=t.payload.comment;let l=e;if(s){const t=e.commentEditors.NEW_OPTIMISTIC_COMMENT;if(void 0!==t){const s=Object(ou.a)(e,["commentEditors","NEW_OPTIMISTIC_COMMENT"]);l=Object(ns.setIn)(s,["commentEditors",n],t)}}const u={id:n,createdDate:a,authorId:i,bodyHtml:r,bodyAdf:o,isInternal:En()(l,["commentEditors",n,"isInternal"],!0),visibility:c};return Object(ns.chain)(l).setIn(["pendingSavedValues",n],u).setIn(["commentEditors",n,"isEditing"],!1).setIn(["loadingStage"],"LOADING").value()}case"FETCH_OLDER_COMMENTS_REQUEST":case"FETCH_NEWER_COMMENTS_REQUEST":return Object(ns.set)(e,"isLoadingMoreComments",!0);case"FETCH_MORE_COMMENTS_SUCCESS":case"FETCH_MORE_COMMENTS_FAILURE":return Object(ns.set)(e,"isLoadingMoreComments",!1);case"SAVE_COMMENT_RETRY":{const{payload:s}=t,n=Object(ou.a)(e,["pendingSavedValues",s.optimisticId,"hasSaveFailed"]);return(t=>!!Object(ns.getIn)(e,["commentEditors",t]))(s.optimisticId)?n:Object(ns.setIn)(n,["pendingSavedValues",s.optimisticId,"createdDate"],s.createdDate)}case"SAVE_COMMENT_EDIT":return Object(ns.setIn)(e,["commentEditors",t.payload.optimisticId,"isEditing"],!0);case"SAVE_COMMENT_SUCCESS":case"SAVE_COMMENT_CANCEL":return Object(ou.a)(Object(ou.a)(e,["commentEditors",t.payload.optimisticId]),["pendingSavedValues",t.payload.optimisticId]);case"FETCH_LATEST_COMMENTS_SUCCESS":case"FETCH_ISSUE_SUCCESS":return Object(ns.set)(e,"loadingStage","COMPLETE");case"SAVE_COMMENT_FAILURE":return Object(ns.setIn)(e,["pendingSavedValues",t.payload.optimisticId,"hasSaveFailed"],!0);case"DELETE_COMMENT_REQUEST":{const{payload:s}=t;return Object(ns.chain)(e).updateIn(["pendingDeletedIds"],e=>[...e,s.id]).set("deleteModalCommentId",null).value()}case"DELETE_COMMENT_SUCCESS":return s(t.payload.id);case"DELETE_COMMENT_FAILURE":return s(t.payload);case"SHOW_DELETE_COMMENT_MODAL":return Object(ns.set)(e,"deleteModalCommentId",t.payload);case"DELETE_COMMENT_CANCEL":return Object(ns.set)(e,"deleteModalCommentId",null);case"EDIT_COMMENT_BEGIN":return Object(ns.setIn)(e,["commentEditors",t.payload.id],{isEditing:!0,isInternal:t.payload.isInternal});case"EDIT_COMMENT_UPDATE":return Object(ns.setIn)(e,["commentEditors",t.payload.id],{isEditing:!0,isInternal:Object(ns.getIn)(e,["commentEditors",t.payload.id,"isInternal"]),editingValue:t.payload.value,visibility:Object(ns.getIn)(e,["commentEditors",t.payload.id,"visibility"])});case"EDIT_COMMENT_VISIBILITY":return Object(ns.setIn)(e,["commentEditors",t.payload.id,"visibility"],t.payload.visibility);case"EDIT_COMMENT_COLLAPSE":case"EDIT_COMMENT_CANCEL":return Object(ou.a)(e,["commentEditors",t.payload.id]);case"ADD_COMMENT_FORM_CANCEL":case"ADD_COMMENT_FORM_COLLAPSE":{const t=Object(ns.unset)(e,"addCommentEditorExpand");return Object(ou.a)(t,["commentEditors","NEW_OPTIMISTIC_COMMENT"])}case"ADD_COMMENT_FORM_EXPAND":return Object(ns.set)(e,"addCommentEditorExpand",!0);case"CHANGE_COMMENT_VISIBILITY":{const{id:s,isInternal:n}=t.payload;return Object(ns.setIn)(e,["commentEditors",s,"isInternal"],n)}case"SET_COMMENT_ATTACHMENT_IN_PROGRESS":return Object(ns.set)(e,"isCommentAttachmentInProgress",t.payload.isInProgress);case"SET_COMMENT_SCROLL_STATUS":return Object(ns.set)(e,"hasScrolledPermalinkComment",t.payload.status);case"MULTILINE_FIELD_EDIT_BEGIN":{const{commentIdsToClose:s,shouldCloseAddCommentForm:n}=t.payload;if(null!=s){const t=(n?s.concat("NEW_OPTIMISTIC_COMMENT"):s).reduce((t,s)=>lu(lu({},t),{},{[s]:lu(lu({},e.commentEditors[s]),{},{editingValue:void 0,visibility:void 0,isEditing:!1})}),{});return lu(lu({},e),{},{commentEditors:lu(lu({},e.commentEditors),t),addCommentEditorExpand:!n&&e.addCommentEditorExpand})}return e}default:return e}};function mu(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function bu(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?mu(Object(s),!0).forEach((function(t){fu(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):mu(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function fu(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const gu={isShowMoreExpanded:!1};var hu=(e=gu,t)=>{const{type:s}=t;switch(s){case"EXPAND_SHOW_MORE":return bu(bu({},e),{},{isShowMoreExpanded:!0});case"COLLAPSE_SHOW_MORE":return bu(bu({},e),{},{isShowMoreExpanded:!1});default:return e}};function yu(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Ou(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?yu(Object(s),!0).forEach((function(t){ju(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):yu(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function ju(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Eu={isContextPanelOpen:!1,contextPanelItem:void 0};var vu=(e=Eu,t)=>{switch(t.type){case"CONTEXT_PANEL_SHOW":return Ou(Ou({},e),{},{isContextPanelOpen:!0,contextPanelItem:t.payload});case"CONTEXT_PANEL_HIDE":return Ou(Ou({},e),{},{isContextPanelOpen:!1});default:return e}},ku=n("./src/packages/platform/utils/types/src/edition.js"),wu=n("./src/packages/platform/utils/types/src/license-state.js"),Su=n("./src/packages/issue/issue-view/src/configurations.js");function Iu(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Cu(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Iu(Object(s),!0).forEach((function(t){Tu(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Iu(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Tu(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Pu={applicationKey:"",issueActions:[],contextItemCategories:{primary:[],secondary:[]},contentItemCategories:{visible:[],request:void 0},atlassianAccountId:null,baseUrl:Object(he.b)(""),isAnonymous:!1,issueKey:Object(he.l)(""),isModal:!1,cloudId:null,locale:"en_US",maxTokenLength:0,ecosystemEnabled:null,isLoadedWithPage:null,rapidViewMap:null,estimationStatistic:null,licensedProducts:{},appEditions:{software:ku.d,core:ku.d,serviceDesk:ku.d},appPermissions:{hasCoreAccess:!1,hasSoftwareAccess:!1,hasServiceDeskAccess:!1},licenseStates:{core:wu.d,software:wu.d,serviceDesk:wu.d},siteAdminStatus:"unknown",productCrossSellConfig:"unknown",isLoading:!1,viewMode:null,firstActivationDateMs:null},_u=({itemId:e,type:t})=>({id:e,type:t}),xu=({state:e,projectConfig:t,issueId:s,contextPrimary:n,contextSecondary:a,contentVisible:i,contentRequest:r})=>{const o=Object(Su.g)(t);return Cu(Cu({},e),{},{issueId:s,applicationKey:o.applicationKey,issueActions:o.issueActions,ecosystemEnabled:o.ecosystemEnabled,contentItemCategories:{visible:i,request:r},contextItemCategories:{primary:n,secondary:a}})};var Du=(e=Pu,t)=>{switch(t.type){case"SET_CONTEXT":{const{payload:s}=t;return Cu(Cu({},e),s)}case"LOAD_NEW_ISSUE":return Cu(Cu({},e),{},{issueKey:t.payload.issueKey});case"LOGIN_SUCCESSFUL":return Cu(Cu({},e),{},{atlassianAccountId:t.payload.accountId});case"PREVIEW_DATA_FETCHED":{const{payload:s}=t;if(s&&s.id&&s.fields.has("project")){const{contextPrimary:t,contextSecondary:n,content:a,contentRequest:i}=s.layout,{id:r}=s,o=s.fields.get("project").value,c=a?a.map(_u):[],l=i&&i.map(_u);return xu({state:e,projectConfig:o,issueId:Object(he.j)(r),contextPrimary:t.map(_u),contextSecondary:n.map(_u),contentVisible:c,contentRequest:l})}return e}case"REFRESH_ISSUE_SUCCESS":case"FETCH_ISSUE_SUCCESS":{const s=t.payload.project,n=t.payload.issue.id,{licensedProducts:a}=t.payload,{licenseStates:i}=t.payload;let r=e.contentItemCategories.visible,o=e.contentItemCategories.request,c=e.contextItemCategories.primary,l=e.contextItemCategories.secondary;if(t.payload.issue.contextItemsCategories){const{primary:e,secondary:s}=t.payload.issue.contextItemsCategories;c=e||[],l=s||[]}return t.payload.issue.contentItemsCategories&&(r=t.payload.issue.contentItemsCategories.visible||[],o=t.payload.issue.contentItemsCategories.request),Cu(Cu({},xu({state:e,projectConfig:s,issueId:n,contextPrimary:c,contextSecondary:l,contentVisible:r,contentRequest:o})),{},{licensedProducts:a,licenseStates:i})}default:return e}};function Au(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Mu(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Au(Object(s),!0).forEach((function(t){Lu(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Au(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Lu(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Ru={};var Nu=(e=Ru,t)=>{switch(t.type){case"LOAD_DRAFT_SUCCESS":case"SAVE_DRAFT_REQUEST":return Mu(Mu({},e),{},{[t.payload.fieldId]:!0});case"DELETE_DRAFT_SUCCESS":return Mu(Mu({},e),{},{[t.payload.fieldId]:!1});default:return e}},Uu=(e=null,t)=>{switch(t.type){case"ECOSYSTEM_SHOW_GLANCE":return t.payload;case"ECOSYSTEM_HIDE_GLANCE":return null;default:return e}},Fu=n("./node_modules/lodash/omit.js"),Vu=n.n(Fu);function Ku(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Bu(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ku(Object(s),!0).forEach((function(t){Wu(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ku(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Wu(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Hu=Bu(Bu({canAddComments:!1,canAdministerJira:!1,canAdministerProject:!1,canAssignIssues:!1,canBeAssignedToIssues:!1,canCloneIssue:!1,canCreateAttachments:!1,canCreateChildren:!1,canCreateSubtask:!1,canDeleteAllAttachments:!1,canDeleteAllComments:!1,canDeleteIssue:!1,canDeleteOwnAttachments:!1,canDeleteOwnComments:!1,canEditAllComments:!1,canEditIssues:!1,canEditOwnComments:!1,canLinkIssues:!1,canManageWatchers:!1,canMoveIssue:!1,canScheduleIssues:!1,canViewWatchers:!1,canBrowseUsers:!1},{canDeleteAllWorklogs:!1,canDeleteOwnWorklogs:!1,canEditAllWorklogs:!1,canEditOwnWorklogs:!1,canLogWork:!1}),{},{canUseServiceDeskAgentFeatures:!1,canViewDevTools:!1});function Gu(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function $u(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Gu(Object(s),!0).forEach((function(t){qu(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Gu(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function qu(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const zu={isEnabled:!1,attachmentId:null,availableAttachmentIds:[]};function Yu(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Qu(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Yu(Object(s),!0).forEach((function(t){Ju(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Yu(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Ju(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Zu={};const Xu=[];var ed=n("./node_modules/lodash/filter.js"),td=n.n(ed),sd=n("./node_modules/lodash/pick.js"),nd=n.n(sd);function ad(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function id(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ad(Object(s),!0).forEach((function(t){rd(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ad(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function rd(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const od={isLinkingEnabled:!0,createLinkedPage:{clickedCount:0,isLoading:!1,isInvalid:!1,errorMessage:""},linkedPages:{pages:[],pageCount:0},mentionedPages:{pages:[],pageCount:0}},cd=["linkedPages","mentionedPages"];var ld=(e=od,t)=>{switch(t.type){case"FETCH_ISSUE_REMOTE_DATA_SUCCESS":{const{remoteLinks:s}=t.payload,n=nd()(s.confluencePages,cd),a=id(id({},e),n);return id(id({},a),{},{isLinkingEnabled:!!s.isLinkingEnabled})}case"PREVIEW_DATA_FETCHED":{const{remoteLinks:s}=t.payload;if(s&&s.confluencePages){const{linkedPages:t,mentionedPages:n}=s.confluencePages;return id(id({},e),{},{linkedPages:id(id({},e.linkedPages),{},{pageCount:t.pageCount}),mentionedPages:id(id({},e.mentionedPages),{},{pageCount:n.pageCount})})}return e}case"DELETE_CONFLUENCE_PAGE_LINK_REQUEST":{const{globalId:s}=t.payload,n=((e,t)=>cd.reduce((e,s)=>{const{pages:n}=e[s],a=td()(n,e=>(e.link?e.link.globalId:e.globalId)!==t);return id(id({},e),{},{[s]:{pageCount:a.length,pages:a}})},nd()(e,cd)))(e,s);return id(id({},e),n)}case"CREATE_CONFLUENCE_PAGE_LINK_REQUEST":return id(id({},e),{},{createLinkedPage:id(id({},e.createLinkedPage),{},{isLoading:!0})});case"CREATE_CONFLUENCE_PAGE_LINK_FAILED":{const{errorMessage:s}=t.payload;return id(id({},e),{},{createLinkedPage:id(id({},e.createLinkedPage),{},{errorMessage:s,isLoading:!1,isInvalid:!0})})}case"CREATE_CONFLUENCE_PAGE_LINK_MODIFIED":return id(id({},e),{},{createLinkedPage:id(id({},e.createLinkedPage),{},{errorMessage:"",isInvalid:!1})});case"LINK_CONFLUENCE_PAGE_CLOSED":return id(id({},e),{},{createLinkedPage:od.createLinkedPage});case"CREATE_CONFLUENCE_PAGE_LINK_SUCCESS":{const s=e.linkedPages.pages||[];return id(id({},e),{},{linkedPages:id(id({},e.linkedPages),{},{pages:[...s,t.payload.confluencePageLink],pageCount:e.linkedPages.pageCount+1}),createLinkedPage:id(id({},e.createLinkedPage),{},{isLoading:!1,isInvalid:!1,errorMessage:""})})}case"LINK_CONFLUENCE_PAGE_CLICKED":return id(id({},e),{},{createLinkedPage:id(id({},e.createLinkedPage),{},{clickedCount:e.createLinkedPage.clickedCount+1})});default:return e}};function ud(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function dd(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ud(Object(s),!0).forEach((function(t){pd(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ud(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function pd(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const md={activityPanels:{},canInstallAddons:!1,contentPanels:{},backgroundScripts:[],ecosystemOnDate:0,glances:{},operations:[]};var bd=n("./src/packages/issue/issue-view/src/reducers/entities/forge-reducer.js");function fd(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function gd(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?fd(Object(s),!0).forEach((function(t){hd(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):fd(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function hd(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const yd={createLinkedIncident:{clickedCount:0},createMajorIncident:{clickedCount:0}};const Od=[];var jd=n("./src/packages/issue/issue-view/src/common/service/issue/issue-links-transformer.js");function Ed(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function vd(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ed(Object(s),!0).forEach((function(t){kd(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ed(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function kd(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const wd={issueLinks:{},linkedIssues:{},linkedIssueKeys:[]};function Sd(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Id(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Sd(Object(s),!0).forEach((function(t){Cd(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Sd(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Cd(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Td={isLoadingComplete:!1};const Pd=[];const _d={status:"NOT_LOADED",remoteLinks:[]};function xd(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function Dd(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Ad(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Dd(Object(s),!0).forEach((function(t){Md(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Dd(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Md(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Ld={isLoading:!1,hasError:!1,isSaved:!1,isDeleted:!1,isOptimistic:!1},Rd=(e,t)=>{var s,n,a,i,r,o,c;return{id:e.issueId.toString(),issueKey:e.issueKey.stringValue,issueSummary:e.summary.textValue,statusCategoryId:null===(s=e.status)||void 0===s?void 0:s.statusCategoryId,statusCategory:Object(ge.statusCategoryForId)(null===(n=e.status)||void 0===n?void 0:n.statusCategoryId),issueLink:Object(kn.r)(t),statusName:null===(a=e.status)||void 0===a?void 0:a.name,statusId:null===(i=e.status)||void 0===i?void 0:i.statusId,issuePriorityUrl:Object(kn.r)(e.priority.iconUrl),issuePriorityName:e.priority.name,issueTypeIconUrl:Object(kn.r)(e.issueType.iconUrl),issueTypeName:e.issueType.name,assigneeDisplayName:null===(r=e.assignee)||void 0===r||null===(o=r.userValue)||void 0===o?void 0:o.displayName,assigneeUrl:(null===(c=e.assignee)||void 0===c?void 0:c.userValue)?Object(kn.r)(e.assignee.userValue.avatarUrl):null}},Nd=e=>e.map(e=>{const{preview:t,details:s}=e;let n={};return n=s.error?{issueDetails:null,remoteIssueLinkError:s}:{issueDetails:Rd(s.associatedIssue,t.href),remoteIssueLinkError:null},Ad(Ad({id:t.id.toString(),globalId:void 0===t.globalId?void 0:Object(he.s)(t.globalId),applicationType:t.applicationType,applicationName:t.applicationName,issueLinkUrl:Object(kn.r)(t.href),relationship:t.relationship,issueKey:Object(he.l)(t.title),remoteIssueId:Object(he.j)(t.issueId.toString())},n),Ld)}),Ud=e=>{let t={};if("WITH_ISSUE_ID"===e.payloadType){const{payloadType:s}=e;t=xd(e,["payloadType"])}else{const{payloadType:s}=e;t=Ad(Ad({},xd(e,["payloadType"])),{},{remoteIssueId:Object(he.j)(`OPTIMISTIC_ISSUE_ID_${Date.now()}`)})}const s=Ad(Ad({},Ld),{},{isLoading:!0,isOptimistic:!0});return Ad(Ad({},t),{},{issueDetails:null,remoteIssueLinkError:null},s)};function Fd(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Vd(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Fd(Object(s),!0).forEach((function(t){Kd(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Fd(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Kd(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Bd={remoteIssueCount:0,remoteIssues:[]};function Wd(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Hd(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Wd(Object(s),!0).forEach((function(t){Gd(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Wd(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Gd(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const $d={isLinkingEnabled:!0,linkCount:0,links:[],createClickCount:0};function qd(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function zd(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?qd(Object(s),!0).forEach((function(t){Yd(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):qd(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Yd(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Qd={sortedWorklogIds:[],worklogs:{},totalWorklogs:0,worklogsStartIndex:0};function Jd(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function Zd(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Xd(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Zd(Object(s),!0).forEach((function(t){ep(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Zd(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function ep(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const tp=Object(ns.freeze)({users:{},applicationRoles:[],ecosystem:md,forge:bd.b,issueLinks:wd,issueTypes:Pd,issueContentPanels:Od,issueRemoteData:Td,permissions:Hu,comments:Zu,totalComments:0,commentsStartIndex:0,loadedComments:0,confluencePages:od,webLinks:$d,subtasks:[],cardCover:zu,childrenIssues:{},parentIssue:null,parentLevelIssues:[],refreshedOn:0,requestPanelMetadata:{channel:void 0,requestUrl:""},worklog:Qd,confluenceAppLinks:Xu,incidentManagement:yd,issue:null,jiraSettings:{subtasksConfiguration:{enabled:!0},issueLinkTypes:[],timeTrackingConfiguration:{isTimeTrackingEnabled:!1,daysPerWeek:0,hoursPerDay:0,defaultUnit:"minute"}}}),sp=(e,t=[])=>Vu()(e,[...t,"forgeIssueProperties"]);var np=(e,t)=>{const s=(e=>{if(e)return e;const t={};return Object.assign(t,{issueTypes:Pd}),Object(F.isRemoteIssueLinksEnabled)()&&Object.assign(t,{remoteIssueLinks:Bd,jiraAppLinks:_d}),Xd(Xd({},tp),t)})(e);let n=Object(ns.chain)(s).set("cardCover",((e=zu,t)=>{switch(t.type){case"CARD_COVER_FETCH_SUCCESS":return t.payload.cardCover;case"CARD_COVER_UPDATE_REQUEST":case"CARD_COVER_UPDATE_FAILURE":return $u($u({},e),{},{attachmentId:t.payload.attachmentId});default:return e}})(s.cardCover,t)).set("comments",((e=Zu,t)=>{switch(t.type){case"SAVE_COMMENT_SUCCESS":{const{comment:s}=t.payload;return Qu(Qu({},e),{},{[s.id]:s})}case"DELETE_COMMENT_SUCCESS":{const s=Qu({},e);return delete s[t.payload.id],s}default:return e}})(s.comments,t)).set("confluencePages",ld(s.confluencePages,t)).set("issueLinks",((e=wd,t)=>{switch(t.type){case"PREVIEW_DATA_FETCHED":{const{fields:s}=t.payload,n=s.get(gr.k);if(n){const{value:e}=n;return Object(jd.b)(Object(he.b)(""),Object(jd.a)(e))}return e}case"FETCH_LINKED_ISSUES_SUCCESS":return Object(ns.merge)(e,{linkedIssues:t.payload});case"FETCH_LINKED_ISSUES_DATA_SUCCESS":{const{linkedIssues:s,issueLinks:n,optimisticIds:a}=t.payload,i=Object(ou.a)(e,["issueLinks",a]);return Object(ns.chain)(i).merge({linkedIssues:s}).merge(n).value()}case"SAVE_LINKED_ISSUE_REQUEST":{const{newIssueLinks:s}=t.payload;return Object(ns.chain)(e).merge(s.issueLinks).setIn(["issueLinks",s.optimisticId,"isOptimistic"],!0).setIn(["issueLinks",s.optimisticId,"isLoading"],!0).setIn(["issueLinks",s.optimisticId,"hasError"],!1).setIn(["issueLinks",s.optimisticId,"isSaved"],!1).value()}case"SAVE_LINKED_ISSUE_FAILURE":return Object(ns.chain)(e).setIn(["issueLinks",t.payload.optimisticId,"isLoading"],!1).setIn(["issueLinks",t.payload.optimisticId,"hasError"],!0).value();case"SAVE_LINKED_ISSUE_SUCCESS":return Object(ns.setIn)(e,["issueLinks",t.payload.optimisticId,"isSaved"],!0);case"FETCH_LINKED_ISSUES_DATA_FAILURE":{let s=e;return t.payload.optimisticIds.forEach(e=>{s=Object(ns.setIn)(s,["issueLinks",e,"isLoading"],!1)}),s}case"SAVE_LINKED_ISSUE_RETRY":return Object(ns.chain)(e).setIn(["issueLinks",t.payload.optimisticId,"isLoading"],!0).setIn(["issueLinks",t.payload.optimisticId,"hasError"],!1).value();case"DELETE_LINKED_ISSUE_REQUEST":{const s=Object(ns.setIn)(e,["issueLinks",t.payload.linkedIssueId,"isDeleted"],!0);return Object(ou.a)(s,["deleteModalLinkId"])}case"DELETE_LINKED_ISSUE_FAILURE":return Object(ns.setIn)(e,["issueLinks",t.payload,"isDeleted"],!1);case"DELETE_LINKED_ISSUE_SUCCESS":case"SAVE_LINKED_ISSUE_CANCEL":return Object(ou.a)(e,["issueLinks",t.payload]);case"ADD_ISSUE_LINK_CLICKED":return Object(ns.setIn)(e,["quickAddClicked"],((e||{}).quickAddClicked||0)+1);case"ADD_ISSUE_LINK_CLOSED":return Object(ns.setIn)(e,["quickAddClicked"],0);case"SET_CREATE_LINKED_ISSUE_PERMISSION":return Object(ns.setIn)(e,["canCreateLinkedIssue"],t.payload.canCreateLinkedIssue);case"REFRESH_ISSUE_SUCCESS":if(t.payload.issueLinks){const s=t.payload.issueLinks;return Object(ns.setIn)(s,["canCreateLinkedIssue"],e.canCreateLinkedIssue)}return e;case"CREATE_LINKED_ISSUE_SUCCESS":{const{newIssueLinks:s}=t.payload;return kc()(s.issueLinks,(e,t)=>{s.issueLinks[t]=vd(vd({},e),{},{isOptimistic:!1,isLoading:!0,hasError:!1,isSaved:!0})}),Object(ns.merge)(e,s)}default:return e}})(s.issueLinks,t)).set("ecosystem",((e=md,t)=>{switch(t.type){case"CONTENT_PANEL_SELECTED":return dd(dd({},e),{},{selectedContentPanel:t.payload});case"CONTENT_PANEL_UNSELECT":return dd(dd({},e),{},{selectedContentPanel:void 0});case"REFRESH_ECOSYSTEM_SUCCESS":return dd({},t.payload);case"FETCH_ISSUE_SUCCESS":return dd({},t.payload.ecosystem);default:return e}})(s.ecosystem,t)).set("forge",Object(bd.a)(s.forge,t)).set("confluenceAppLinks",((e=Xu,t)=>{switch(t.type){case"FETCH_CONFLUENCE_APP_LINKS_SUCCESS":return t.payload;default:return e}})(s.confluenceAppLinks,t)).set("issueContentPanels",((e=Od,t)=>{switch(t.type){case"FETCH_ISSUE_SUCCESS":case"REFRESH_ISSUE_SUCCESS":return t.payload.issueContentPanels||e;case"ADD_CONTENT_PANEL_SUCCESS":return[...e,t.payload];case"REMOVE_CONTENT_PANEL_SUCCESS":{const{payload:s}=t;return e.filter(e=>e!==s)}case"CONTENT_PANELS_CUSTOMISED_SUCCESS":return e.includes("issue.content.panel.customised.flag")?e:[...e,"issue.content.panel.customised.flag"];default:return e}})(s.issueContentPanels,t)).set("issueTypes",((e=Pd,t)=>{switch(t.type){case"FETCH_ISSUE_SUCCESS":return t.payload.issueTypes||e||Pd;case"SET_ISSUE_TYPES":return t.payload.map(e=>{const{id:t,name:s,subtask:n,iconUrl:a,fields:i}=e;return{id:t,name:s,subtask:n,iconUrl:a,fields:i}});default:return t.type,e}})(s.issueTypes,t)).set("webLinks",((e=$d,t)=>{switch(t.type){case"FETCH_ISSUE_REMOTE_DATA_SUCCESS":{const{remoteLinks:s={}}=t.payload,{webLinks:n}=s,{linkCount:a=0,links:i=[]}=n||{};return Hd(Hd({},e),{},{isLinkingEnabled:!!s.isLinkingEnabled,linkCount:a,links:i})}case"SHOW_CREATE_WEB_LINK_FORM":return Hd(Hd({},e),{},{createClickCount:e.createClickCount+1});case"HIDE_CREATE_WEB_LINK_FORM":return Hd(Hd({},e),{},{createClickCount:$d.createClickCount});case"DELETE_WEB_LINK_REQUEST":{const{id:s}=t.payload,n=e.links.map(e=>e.id===s?Hd(Hd({},e),{},{isDeleting:!0,deleteFailed:!1}):e);return Hd(Hd({},e),{},{links:n})}case"DELETE_OPTIMISTIC_WEB_LINK":case"DELETE_WEB_LINK_SUCCESS":{const{id:s}=t.payload;if(s&&e.links){const t=e.links.filter(e=>e.id!==s),n=t.length;return Hd(Hd({},e),{},{linkCount:n,links:t})}return e}case"DELETE_WEB_LINK_FAILED":{const{id:s}=t.payload,n=e.links.map(e=>e.id===s?Hd(Hd({},e),{},{isDeleting:!1,deleteFailed:!0}):e);return Hd(Hd({},e),{},{links:n})}case"CANCEL_FAILED_WEB_LINK_DELETION":{const{id:s}=t.payload,n=e.links.map(e=>{if(e.id!==s)return e;return{id:e.id,href:e.href,linkText:e.linkText,iconUrl:e.iconUrl}});return Hd(Hd({},e),{},{links:n})}case"CREATE_WEB_LINK_REQUEST":{const{optimisticId:s,href:n,linkText:a,iconUrl:i}=t.payload;return Hd(Hd({},e),{},{linkCount:e.linkCount+1,links:[...e.links,{id:s,href:n,linkText:a,iconUrl:i,isCreating:!0,createFailed:!1}]})}case"CREATE_WEB_LINK_SUCCESS":{const{optimisticId:s,webLink:n}=t.payload,a=e.links.map(e=>e.id===s?n:e);return Hd(Hd({},e),{},{links:a})}case"CREATE_WEB_LINK_FAILED":{const{optimisticId:s}=t.payload,n=e.links.map(e=>e.id===s?Hd(Hd({},e),{},{isCreating:!1,createFailed:!0}):e);return Hd(Hd({},e),{},{links:n})}case"CREATE_WEB_LINK_RETRY":{const{optimisticId:s}=t.payload,n=e.links.map(e=>e.id===s?Hd(Hd({},e),{},{isCreating:!0,createFailed:!1}):e);return Hd(Hd({},e),{},{links:n})}default:return e}})(s.webLinks,t)).set("incidentManagement",((e=yd,t)=>{switch(t.type){case"LINK_INCIDENT_CLICKED":return gd(gd({},e),{},{createLinkedIncident:gd(gd({},e.createLinkedIncident),{},{clickedCount:e.createLinkedIncident.clickedCount+1})});case"CREATE_MAJOR_INCIDENT_CLICKED":return gd(gd({},e),{},{createMajorIncident:gd(gd({},e.createMajorIncident),{},{clickedCount:e.createMajorIncident.clickedCount+1})});default:return e}})(s.incidentManagement,t)).value();return Object(F.isRemoteIssueLinksEnabled)()&&(n=Object(ns.set)(n,"remoteIssueLinks",((e=Bd,t)=>{switch(t.type){case"FETCH_ISSUE_REMOTE_DATA_SUCCESS":{const{remoteLinks:s={}}=t.payload,{remoteLinkedIssues:n=[]}=s,a=n.length,i=Vd(Vd({},e),{},{remoteIssueCount:a,remoteIssues:Nd(n)});return Vd({},i)}case"DELETE_REMOTE_LINKED_ISSUE_REQUEST":{const{globalId:s}=t.payload;return Vd(Vd({},e),{},{remoteIssues:e.remoteIssues.map(e=>e.globalId===s?Vd(Vd({},e),{},{isDeleted:!0}):e)})}case"DELETE_REMOTE_LINKED_ISSUE_SUCCESS":{const s=t.payload;return Vd(Vd({},e),{},{remoteIssues:e.remoteIssues.reduce((e,t)=>(t.globalId!==s&&e.push(t),e),[])})}case"DELETE_REMOTE_LINKED_ISSUE_FAILURE":{const s=t.payload;return Vd(Vd({},e),{},{remoteIssues:e.remoteIssues.map(e=>e.globalId===s?Vd(Vd({},e),{},{isDeleted:!1}):e)})}case"SAVE_REMOTE_LINKED_ISSUE_REQUEST":{const{saveRemoteIssueLinkPayload:s}=t.payload;return Vd(Vd({},e),{},{remoteIssues:e.remoteIssues.concat(Ud(s))})}case"SAVE_REMOTE_LINKED_ISSUE_SUCCESS":{const{optimisticId:s,saveRemoteLinkResponse:{id:n,issueId:a,globalId:i}}=t.payload;return Vd(Vd({},e),{},{remoteIssues:e.remoteIssues.map(e=>e.id===s?Vd(Vd({},e),{},{id:n.toString(),globalId:Object(he.s)(i),remoteIssueId:void 0!==a?Object(he.j)(a.toString()):e.remoteIssueId,isOptimistic:!1,isSaved:!0}):e)})}case"SAVE_REMOTE_LINKED_ISSUE_FAILURE":{const{optimisticId:s,error:n}=t.payload;return 400===n.statusCode?Vd(Vd({},e),{},{remoteIssues:e.remoteIssues.filter(e=>e.id!==s)}):Vd(Vd({},e),{},{remoteIssues:e.remoteIssues.map(e=>e.id===s?Vd(Vd({},e),{},{isLoading:!1,hasError:!0}):e)})}case"SAVE_REMOTE_LINKED_ISSUE_RETRY":{const{optimisticId:s}=t.payload;return Vd(Vd({},e),{},{remoteIssues:e.remoteIssues.map(e=>e.id===s?Vd(Vd({},e),{},{isLoading:!0,hasError:!1}):e)})}case"SAVE_REMOTE_LINKED_ISSUE_CANCEL":{const s=t.payload;return Vd(Vd({},e),{},{remoteIssues:e.remoteIssues.filter(e=>e.id!==s)})}default:return e}})(s.remoteIssueLinks,t)),n=Object(ns.set)(n,"jiraAppLinks",((e=_d,t)=>{switch(t.type){case"FETCH_JIRA_APP_LINKS_SUCCESS":return{status:"LOADED",remoteLinks:t.payload.map(e=>({id:e.id,name:e.name,baseUrl:Object(he.b)(e.url),authUrl:Object(he.i)(e.authUrl),requireCredentials:e.requireCredentials}))};case"FETCH_JIRA_APP_LINKS_FAILED":return{status:"ERROR",remoteLinks:e.remoteLinks};case"FETCH_JIRA_APP_LINKS_REQUEST":return{status:"LOADING",remoteLinks:e.remoteLinks};case"APPLINK_AUTHENTICATION_SUCCESS":return{status:"NOT_LOADED",remoteLinks:e.remoteLinks};default:return e}})(s.jiraAppLinks,t))),n=Object(ns.set)(n,"worklog",((e=Qd,t)=>{switch(t.type){case"state.FETCH_WORKLOGS_BY_ID_SUCCESS":{const{sortedWorklogIds:s,worklogs:n,startIndex:a,totalWorklogs:i}=t.payload;return zd(zd({},e),{},{sortedWorklogIds:s,worklogs:n,worklogsStartIndex:a,totalWorklogs:i})}case"state.FETCH_WORKLOGS_BY_ID_FAILURE":return zd({},Qd);case"state.EDIT_WORKLOG_SUCCESS":{const{worklogs:s}=t.payload;return zd(zd({},e),{},{worklogs:s})}case"state.FETCH_WORKLOGS_SUCCESS":{const{sortedWorklogIds:s,worklogs:n,totalWorklogs:a}=t.payload,{worklogsStartIndex:i}=e;return{sortedWorklogIds:s.slice().reverse().concat(e.sortedWorklogIds),worklogs:zd(zd({},e.worklogs),n),totalWorklogs:a,worklogsStartIndex:i}}case"state.FETCH_OLDER_WORKLOGS_SUCCESS":{const{worklogs:s,sortedWorklogIds:n,totalWorklogs:a}=t.payload;return zd(zd({},e),{},{worklogs:zd(zd({},e.worklogs),s),sortedWorklogIds:[...n,...e.sortedWorklogIds],totalWorklogs:a})}case"state.FETCH_NEWER_WORKLOGS_SUCCESS":{const{worklogs:s,sortedWorklogIds:n,totalWorklogs:a}=t.payload,i=e.worklogsStartIndex||0;return zd(zd({},e),{},{worklogs:zd(zd({},e.worklogs),s),sortedWorklogIds:[...e.sortedWorklogIds,...n],totalWorklogs:a,worklogsStartIndex:i-n.length})}case"FETCH_ISSUE_SUCCESS":{const{payload:e}=t,{sortedWorklogIds:s,worklogs:n,totalWorklogs:a,worklogsStartIndex:i}=e;return{sortedWorklogIds:s,worklogs:n,totalWorklogs:a,worklogsStartIndex:i}}case"state.DELETE_WORKLOG_SUCCESS":{const{worklogId:s}=t.payload,{totalWorklogs:n,worklogsStartIndex:a}=e;return{sortedWorklogIds:e.sortedWorklogIds.filter(e=>e!==s),worklogs:Vu()(e.worklogs,s),totalWorklogs:n-1,worklogsStartIndex:a}}default:return e}})(s.worklog,t)),n=Object(ns.set)(n,"issueRemoteData",((e=Td,t)=>{switch(t.type){case"FETCH_ISSUE_REMOTE_DATA_SUCCESS":case"FETCH_ISSUE_REMOTE_DATA_FAILURE":return Id(Id({},e),{},{isLoadingComplete:!0});default:return e}})(s.issueRemoteData,t)),((e,t)=>{const{type:s,payload:n}=t;switch(s){case"FETCH_ISSUE_SUCCESS":{const t=Object(ns.merge)(e,sp(n,["issueContentPanels","issueTypes"]));return Vu()(t,[["issue","fields"],["issue","contextItemsCategories"],["issue","contentItemsCategories"],"changeboardingLastInteracted","clickthroughBannerLastInteracted","licensedProducts","licenseStates"])}case"FETCH_SCREENID_SUCCESS":case"FETCH_MORE_COMMENTS_SUCCESS":return Object(ns.merge)(e,n);case"FETCH_LATEST_COMMENTS_SUCCESS":{const{comments:t,commentsStartIndex:s,loadedComments:a,totalComments:i,users:r}=n;return Object(ns.chain)(e).setIn(["comments"],t).setIn(["users"],r).setIn(["commentsStartIndex"],s).setIn(["loadedComments"],a).setIn(["totalComments"],i).value()}case"PREVIEW_DATA_FETCHED":{const{fields:t}=n;let s=e;const a=t&&t.get("project");if(a&&a.value&&(s=Object(ns.set)(s,"project",a.value)),n.comments){const{comments:{comments:e={},totalCount:t,startIndex:a}}=n;s=Object(ns.chain)(s).setIn(["comments"],e).setIn(["loadedComments"],Object.keys(e).length).setIn(["totalComments"],t).setIn(["commentsStartIndex"],a).value()}return n.users&&(s=Object(ns.set)(s,"users",Object(ns.merge)(e.users,n.users))),s}case"REFRESH_ISSUE_SUCCESS":{const t=sp(n),s=Object.keys(t).reduce((s,n)=>"users"===n?Object(ns.set)(s,"users",Object(ns.merge)(e.users,t.users)):"issueTypes"===n||"issueLinks"===n||"issueContentPanels"===n?s:Object(ns.set)(s,n,t[n]),e);return Object(ns.setIn)(s,["refreshedOn"],Date.now())}case"FETCH_LOGGED_IN_USER_SUCCESS":{const{user:t,applicationRoles:s}=n,a=t.id,i=Xd({},e.users);return a&&(i[t.id]=t),Xd(Xd({},e),{},{users:i},Object(F.isUseAppPermissionsFromTenantContextEnabled)()?void 0:{applicationRoles:s})}case"SAVE_COMMENT_SUCCESS":return n.isNewComment?Object(ns.chain)(e).setIn(["loadedComments"],e.loadedComments+1).setIn(["totalComments"],e.totalComments+1).value():e;case"DELETE_COMMENT_SUCCESS":return Object(ns.chain)(e).setIn(["loadedComments"],e.loadedComments-1).setIn(["totalComments"],e.totalComments-1).value();case"REQUEST_PANEL_METADATA_FETCH_SUCCESS":{const t=Object(ou.a)(e,["requestPanelMetadata"]);return Object(ns.setIn)(t,["requestPanelMetadata"],n)}case"PROJECT_ISSUE_TYPES_REQUEST_SUCCESS":return Object(ns.setIn)(e,["project","issueTypes"],n);case"FETCH_ISSUE_PARENTS_SUCCESS":return Object(ns.setIn)(e,["parentLevelIssues"],n);case"SET_PARENT_SUCCESS":{const s=t.payload.parentIssue,{issueType:n}=s,a=Jd(s,["issueType"]),{name:i,iconUrl:r}=n||{},o=Xd(Xd({},a),{},{issueTypeName:i||"",issueTypeIconUrl:r||""});return Object(ns.setIn)(e,["parentIssue"],o)}case"UNSET_PARENT_SUCCESS":return Object(ns.setIn)(e,["parentIssue"],null);case"CHILD_ISSUE_ADD_SUCCESS":{const{payload:{childIssue:s}}=t;s.isLoading=void 0;const n=JSON.parse(JSON.stringify(e.childrenIssues));return n.push(s),Object(ns.setIn)(e,["childrenIssues"],n)}case"SUBTASK_ADD_SUCCESS":{const{payload:{subtask:s}}=t,n=JSON.parse(JSON.stringify(e.subtasks));return n.push(s),Object(ns.setIn)(e,["subtasks"],n)}default:return e}})(n,t)};const ap=e=>{const{traceId:t,errorMessage:s,endpoint:n,statusCode:a}=e,i={};return null!==t&&(i.traceId=t),null!==s&&(i.errorMessage=s),null!==n&&(i.endpoint=n),null!==a&&(i.statusCode=a),i};var ip=(e=null,t)=>{switch(t.type){case"FETCH_ISSUE_FAILURE":case"ISSUE_PREVIEW_FAILURE":return ap(t.payload);default:return e}};var rp=(e=null,t)=>{switch(t.type){case"FETCH_ISSUE_FAILURE":case"ISSUE_PREVIEW_FAILURE":return t.payload.error;case"LOGIN_SUCCESSFUL":return null;default:return e}};var op=(e="NONE",t)=>{switch(t.type){case"FETCHING_ISSUE_TYPES":return"PENDING";case"SET_ISSUE_TYPES":return"COMPLETE";case"FETCH_ISSUE_TYPES_FAILED":return"FAILED";default:return t.type,e}};const cp=e=>e.length>0?e[0].id+1:1,lp=[];var up=(e=lp,t)=>{switch(t.type){case"SAVE_COMMENT_FAILURE":return t.payload.invalidMessage&&t.payload.invalidMessage.includes("CONTENT_LIMIT_EXCEEDED")?[{type:_c.l,id:cp(e)},...e]:[{type:t.payload.isServerValidationError?_c.k:_c.j,id:cp(e)},...e];case"DELETE_COMMENT_FAILURE":return[{type:_c.m,id:cp(e)},...e];case"CLICKTHROUGH_BANNER_DISMISS":return[{type:_c.i,id:cp(e)},...e];case"ATTACHMENT_MEDIA_SERVICES_UPLOAD_ERROR":case"ATTACHMENT_JIRA_CREATE_FAILURE":return[{type:_c.e,id:cp(e)},...e];case"EDITOR_CHANGE_FAILURE":case"EDITOR_EXPANDED_FAILURE":case"EDITOR_SAVE_FAILURE":return[{type:_c.u,id:cp(e)},...e];case _c.H:return[{type:_c.H,id:cp(e)},...e];case"DELETE_LINKED_ISSUE_FAILURE":case"DELETE_REMOTE_LINKED_ISSUE_FAILURE":return[{type:_c.q,id:cp(e)},...e];case"SAVE_REMOTE_LINKED_ISSUE_FAILURE":{const{error:s,remoteIssueKey:n}=t.payload;if(400===s.statusCode){const t=(e=>{try{const t=JSON.parse(e),s=Object.values(t.errors||{});return[...t.errorMessages||[],...s].join(" ")}catch{return e}})(s.message);return[{type:_c.E,id:cp(e),titleI18nValues:{remoteIssueKey:n},descriptionI18nValues:{i18nServerErrorMessage:t}},...e]}return e}case"FIELD_SAVE_FAILURE":{const{fieldOptions:s}=t.payload,{onSaveFailureFlagType:n}=s;if(s.isRichTextField&&t.payload.invalidMessage){if(t.payload.invalidMessage.includes("CONTENT_LIMIT_EXCEEDED"))return[{type:_c.I,id:cp(e)},...e];if(t.payload.invalidMessage&&t.payload.invalidMessage.includes("is required"))return[{type:_c.J,id:cp(e)},...e]}return n?[{type:n,id:cp(e)},...e]:e}case"FIELD_SAVE_SUCCESS":{const{onSaveSuccessFlagType:s}=t.payload.fieldOptions;return s?[{type:s,id:cp(e),descriptionI18nValues:{issueKey:t.meta&&t.meta.issueKey}},...e]:e}case"DISMISS_FLAG":return e.filter(e=>e.id!==t.payload);case"DELETE_ISSUE_FAILURE":return[{type:_c.p,id:cp(e),titleI18nValues:{issueKey:t.payload.issueKey}},...e];case"SIMPLE_CHANGE_ISSUE_TYPE_REQUEST_SUCCESS":return[{type:_c.h,id:cp(e),titleI18nValues:{destType:t.payload.targetTypeName}},...e];case"SIMPLE_CHANGE_ISSUE_TYPE_REQUEST_FAILURE":return[{type:_c.g,id:cp(e)},...e];case"TOGGLE_WATCHING_ERROR":return[{type:_c.Q,id:cp(e)},...e];case"FETCH_WATCHERS_ERROR":return[{type:_c.z,id:cp(e)},...e];case"START_WATCHING_SUCCESS":return[{type:_c.M,id:cp(e)},...e];case"STOP_WATCHING_SUCCESS":return[{type:_c.N,id:cp(e)},...e];case"REMOVE_WATCHER_ERROR":return[{type:_c.G,id:cp(e)},...e];case"ADD_WATCHER_ERROR":return[{type:_c.b,id:cp(e)},...e];case"state.ADD_WORKLOG_FAILURE":return[{type:_c.c,id:cp(e)},...e];case"state.UPDATE_TIME_REMAINING_FAILURE":return[{type:_c.P,id:cp(e)},...e];case"state.EDIT_WORKLOG_SUCCESS":return[{type:_c.x,id:cp(e)},...e];case"state.EDIT_WORKLOG_FAILURE":return[{type:_c.w,id:cp(e)},...e];case"state.DELETE_WORKLOG_SUCCESS":return[{type:_c.t,id:cp(e)},...e];case"state.DELETE_WORKLOG_FAILURE":return[{type:_c.s,id:cp(e)},...e];case"DELETE_CONFLUENCE_PAGE_LINK_FAILED":return[{type:_c.o,id:cp(e)},...e];case"DELETE_WEB_LINK_FAILED":return[{type:_c.r,id:cp(e)},...e];case _c.K:return[{type:_c.K,id:cp(e)},...e];case _c.L:return[{type:_c.L,id:cp(e)},...e];case _c.a:return[{type:_c.a,id:cp(e)},...e];case _c.F:return[{type:_c.F,id:cp(e)},...e];case"FETCH_JIRA_APP_LINKS_FAILED":return[{type:_c.y,id:cp(e)},...e];default:return e}};function dp(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function pp(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?dp(Object(s),!0).forEach((function(t){mp(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):dp(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function mp(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const bp={showCreateIncidentPanel:!1,showCreateMajorIncidentModal:!1};var fp=(e=bp,t)=>{switch(t.type){case"LINK_INCIDENT_CLICKED":return pp(pp({},e),{},{showCreateIncidentPanel:!0});case"LINK_INCIDENT_PANEL_CLOSED":return pp(pp({},e),{},{showCreateIncidentPanel:!1});case"CREATE_MAJOR_INCIDENT_CLICKED":return pp(pp({},e),{},{showCreateMajorIncidentModal:!0});case"CREATE_MAJOR_INCIDENT_MODAL_CLOSED":return pp(pp({},e),{},{showCreateMajorIncidentModal:!1});default:return e}};function gp(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function hp(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?gp(Object(s),!0).forEach((function(t){yp(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):gp(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function yp(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Op={isDeleteIssueModalOpen:!1,isDeletingIssue:!1,didIssueDeleteFail:!1,issueKey:null};var jp=(e=Op,t)=>{switch(t.type){case"OPEN_DELETE_ISSUE_MODAL":return hp(hp({},e),{},{isDeleteIssueModalOpen:!0});case"CLOSE_DELETE_ISSUE_MODAL":return hp(hp({},e),{},{isDeleteIssueModalOpen:!1});case"DELETE_ISSUE_REQUEST":return hp(hp({},e),{},{isDeletingIssue:!0,didIssueDeleteFail:!1,issueKey:t.payload.issueKey});case"DELETE_ISSUE_SUCCESS":return hp(hp({},e),{},{isDeletingIssue:!1,didIssueDeleteFail:!1,issueKey:t.payload});case"DELETE_ISSUE_FAILURE":return hp(hp({},e),{},{isDeletingIssue:!1,didIssueDeleteFail:!0,issueKey:t.payload.issueKey});default:return e}},Ep=(e="LOADING",t)=>{const{type:s}=t;switch(s){case"FETCH_ISSUE_SUCCESS":case"REFRESH_ISSUE_SUCCESS":case"FETCH_ISSUE_FAILURE":return"COMPLETE";case"PREVIEW_DATA_FETCHED":return"LOADING"===e?"PREVIEW":e;case"LOGIN_SUCCESSFUL":case"LOAD_NEW_ISSUE":return"LOADING";default:return e}};function vp(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function kp(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?vp(Object(s),!0).forEach((function(t){wp(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):vp(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function wp(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Sp={shouldShowIssueTypeList:!1};var Ip=(e=Sp,t)=>{const{type:s,payload:n}=t;switch(s){case"SHOW_ISSUE_TYPE_LIST":return kp(kp({},e),{},{shouldShowIssueTypeList:n});default:return e}};function Cp(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Tp(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Cp(Object(s),!0).forEach((function(t){Pp(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Cp(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Pp(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const _p={projectHasSubtaskValidators:{status:"LOADING"}};var xp=(e=_p,t)=>{switch(t.type){case"SET_CONTEXT":return e;case"FETCH_PROJECT_HAS_SUBTASK_VALIDATORS":return Tp(Tp({},e),{},{projectHasSubtaskValidators:{status:"LOADING"}});case"FETCH_PROJECT_HAS_SUBTASK_VALIDATORS_SUCCESS":return Tp(Tp({},e),{},{projectHasSubtaskValidators:{status:"LOADED",value:t.payload}});case"FETCH_PROJECT_HAS_SUBTASK_VALIDATORS_FAILURE":return Tp(Tp({},e),{},{projectHasSubtaskValidators:{status:"FAILED"}});default:return e}},Dp=(e=[],t)=>{const{type:s,payload:n}=t;switch(s){case"FETCH_RECENTLY_VISITED_CONFLUENCE_PAGES_SUCCESS":return n;default:return e}};const Ap={timestamp:0,value:void 0};var Mp=(e=Ap,t)=>{switch(t.type){case"SHARE_AS_COMMENT":return{timestamp:Date.now(),value:t.payload.value};case"CLEAR_SHARED_AS_COMMENT_VALUES":return{timestamp:Date.now()};default:return e}};function Lp(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Rp(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Lp(Object(s),!0).forEach((function(t){Np(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Lp(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Np(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Up={triggerShortcutDialogCount:0};var Fp=(e=Up,t)=>{const{type:s}=t;switch(s){case"TRIGGER_SHORTCUT_DIALOG_OPEN":return Rp(Rp({},e),{},{triggerShortcutDialogCount:e.triggerShortcutDialogCount+1});default:return e}};const Vp={issueUpdatedTimestamp:0};var Kp=(e=Vp,t)=>{const{type:s,payload:n}=t;switch(s){case"FIELD_UPDATED":return"status"===n.fieldId?{issueUpdatedTimestamp:Date.now()}:e;case"SAVE_COMMENT_SUCCESS":return{issueUpdatedTimestamp:Date.now()};default:return e}};const Bp=window.localStorage&&window.localStorage.getItem("jira.absolutedate.issueview")||"RELATIVE";var Wp=(e=Bp,t)=>{switch(t.type){case"SET_TIMESTAMP_DISPLAY_SETTING":return t.payload;case"FETCH_ISSUE_SUCCESS":return Bp;default:return e}};function Hp(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Gp(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Hp(Object(s),!0).forEach((function(t){$p(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Hp(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function $p(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const qp={newIssueViewLockedIn:!1};var zp=(e=qp,t)=>{switch(t.type){case"PREVIEW_DATA_FETCHED":{const s=t.payload.meta&&t.payload.meta.newIssueViewLockedIn;return void 0!==s?Gp(Gp({},e),{},{newIssueViewLockedIn:s}):e}case"FETCH_ISSUE_SUCCESS":{const{newIssueViewLockedIn:s}=t.payload;return void 0!==s?Gp(Gp({},e),{},{newIssueViewLockedIn:s}):e}default:return e}};function Yp(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Qp(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Yp(Object(s),!0).forEach((function(t){Jp(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Yp(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Jp(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Zp={hasIssueViewMounted:!1};var Xp=(e=Zp,t)=>{switch(t.type){case"ISSUE_VIEW_MOUNTED":return Qp(Qp({},e),{},{hasIssueViewMounted:!0});default:return t.type,e}};function em(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function tm(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?em(Object(s),!0).forEach((function(t){sm(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):em(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function sm(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const nm={openModal:"NO_MODAL",isSaving:!1,activeWorklogId:null};function am(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function im(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?am(Object(s),!0).forEach((function(t){rm(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):am(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function rm(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const om={hasScrolledPermalink:!1};var cm=Object(xe.combineReducers)({loadingStage:(e="LOADING",t)=>{switch(t.type){case"state.FETCH_WORKLOGS_REQUEST_INITIAL":case"state.FETCH_WORKLOGS_RETRY":case"state.ADD_WORKLOG_SUCCESS":case"state.FETCH_SURROUNDING_WORKLOGS_BY_ID":return"LOADING";case"state.FETCH_NEWER_WORKLOGS_REQUEST":return"LOADING_NEWER_WORKLOGS";case"state.FETCH_OLDER_WORKLOGS_REQUEST":return"LOADING_OLDER_WORKLOGS";case"state.FETCH_WORKLOGS_SUCCESS":case"FETCH_ISSUE_SUCCESS":case"state.FETCH_WORKLOGS_BY_ID_SUCCESS":case"state.FETCH_NEWER_WORKLOGS_SUCCESS":case"state.FETCH_OLDER_WORKLOGS_SUCCESS":return"COMPLETE";case"state.FETCH_WORKLOGS_FAILURE":return"LOADING"===e?"ERROR":"ERROR_ADDITIONAL";case"state.FETCH_WORKLOGS_BY_ID_FAILURE":return"ERROR";default:return e}},modal:(e=nm,t)=>{switch(t.type){case"state.OPEN_MODAL":return{openModal:t.payload.modalType,isSaving:!1,activeWorklogId:t.payload.worklogId};case"state.UPDATE_TIME_REMAINING_REQUEST":case"state.ADD_WORKLOG_REQUEST":case"state.EDIT_WORKLOG_REQUEST":case"state.DELETE_WORKLOG_REQUEST":return tm(tm({},e),{},{isSaving:!0});case"state.UPDATE_TIME_REMAINING_FAILURE":case"state.ADD_WORKLOG_FAILURE":case"state.EDIT_WORKLOG_FAILURE":case"state.DELETE_WORKLOG_FAILURE":return tm(tm({},e),{},{isSaving:!1});case"state.CLOSE_MODAL":case"state.ADD_WORKLOG_SUCCESS":case"state.UPDATE_TIME_REMAINING_SUCCESS":case"state.EDIT_WORKLOG_SUCCESS":case"state.DELETE_WORKLOG_SUCCESS":return{openModal:"NO_MODAL",isSaving:!1,activeWorklogId:null};default:return e}},highlightedWorklogId:(e=null,t)=>{switch(t.type){case"state.ADD_WORKLOG_SUCCESS":case"state.EDIT_WORKLOG_SUCCESS":return t.payload.worklogId;case"state.DISPOSE_WORKLOG_APP":return null;case"state.OPEN_MODAL":default:return e}},permalinkStatus:(e=om,t)=>{switch(t.type){case"SET_WORKLOG_SCROLL_STATUS":return im(im({},e),{},{hasScrolledPermalink:t.payload.status});case"state.ADD_WORKLOG_SUCCESS":case"state.EDIT_WORKLOG_SUCCESS":return im(im({},e),{},{hasScrolledPermalink:!1});default:return e}}});function lm(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function um(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?lm(Object(s),!0).forEach((function(t){dm(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):lm(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function dm(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const pm={agile:void 0,context:void 0,entities:void 0,fields:void 0,mediaContext:{viewContext:null,uploadContext:null,userAuth:null},shareAsComment:void 0,sla:void 0,timing:void 0,ui:void 0,validators:void 0},mm=()=>{const e={};return Object(F.isShortcutMenuEnabled)()&&(e.shortcutDialog=Fp),e.issueType=Ip,e},bm=(e,t)=>Object(xe.combineReducers)({agile:Dl,context:Du,entities:np,fields:kl,mediaContext:Object(xe.combineReducers)({uploadContext:cl,userAuth:ll,viewContext:bl}),shareAsComment:Mp,sla:Kp,timing:ol,ui:Object(xe.combineReducers)(um({attachments:Object(xe.combineReducers)({picker:Wl}),activityFeed:Tl,assignIssueParentModal:Nl,comments:pu,changeboarding:zl,childPanel:Xl,clickthroughBanner:au,cloneModal:ru,contextItems:hu,contextPanel:vu,drafts:Nu,ecosystem:Object(xe.combineReducers)({glance:Uu}),error:rp,fetchIssueTypesStatus:op,flags:up,issueDeletion:jp,loadingStage:Ep,recentlyVisitedConfluencePages:Dp,timestampDisplaySetting:Wp,uiConfig:zp,viewMountStatus:Xp,worklog:cm,incidentManagement:fp,errorMessage:ip},mm())),validators:xp})(e,t);var fm=(e=pm,t)=>{if("LOAD_NEW_ISSUE"===t.type){const s=bm({ui:{clickthroughBanner:e.ui.clickthroughBanner,changeboarding:e.ui.changeboarding,uiConfig:e.ui.uiConfig}},L(Object(re.m)(e))),n=bm(s,t),a=Object(Z.z)(e),i=Object(F.isUseAppPermissionsFromTenantContextEnabled)()?[]:Object(xc.a)(e);return a?bm(n,Ee(a,i)):n}if("LOAD_RECENT_ISSUE"===t.type){const s=Object(re.m)(e),{issueState:n}=t.payload;return bm(um(um({},n),{},{context:um(um(um({},n.context),s),{},{issueId:n.context.issueId,contentItemCategories:n.context.contentItemCategories,contextItemCategories:n.context.contextItemCategories})}),Object(N.g)())}return bm(e,t)};const gm=()=>e=>t=>{try{e(t)}catch(s){throw Re.i.safeError("issue.middleware.error-logger",`Unhandled error in ${t.type}`),s}},hm=(e,t,s,n,a,i,r,o,c,l,u,d,p,m,b,g,h)=>{const y=Object(f.b)(((e,t,s,n,a,i,r,o,c,l,u,d,p,m,b,f,g)=>Object(Ae.combineEpics)(...sl(e,t,s,n,a,i,r,o,c,l,u,d,p,m,b,f,g)))(e,t,s,n,a,i,r,o,c,u,l,d,p,m,b,g,h)),O=Object(Ae.createEpicMiddleware)(y);return[gm,O]};var ym=n("./src/packages/issue/issue-view/src/common/service/issue/gira/index.js"),Om=n("./src/packages/issue/issue-view/src/common/service/issue/gira/media-context/index.js"),jm=n("./src/packages/issue/issue-view/src/common/service/issue/issue-transformer.js");function Em(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function vm(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Em(Object(s),!0).forEach((function(t){km(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Em(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function km(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const wm=e=>Object(F.isfetchMediaTokensFromGiraEnabled)()?(({resourceManager:e,savePreferences:t,saveIssueTabs:s,saveProjectContext:n,storeFieldsWithContext:a,storeIssueLayoutData:i,attachmentActions:r,permissionActions:o,jiraSettingsActions:c,store:l,issueData:u,baseUrl:d})=>{const p=e.getGiraData(),m=e.getGqlData();if(p&&p.viewIssue&&p.mediaContext&&p.mediaContext.readToken&&m){l.dispatch(ke(u));const{readToken:e,uploadToken:b,userToken:f}=p.mediaContext;if(e){const t=Object(Om.b)(e);l.dispatch(pt(t))}if(b)if(null!=b.clientId&&null!=b.endpointUrl&&null!=b.targetCollection&&null!=b.token&&null!=b.tokenDurationInMins){const e=Vs({clientId:b.clientId,endpointUrl:b.endpointUrl,targetCollection:b.targetCollection,token:b.token,tokenDurationInMins:b.tokenDurationInMins});l.dispatch(Object(Fs.d)(e))}else null!=b.error&&l.dispatch(Object(Fs.b)(new Error(b.error)));if(f){const e=Object(Om.c)(f);l.dispatch(Object(Ws.d)(e))}const g=Object(jm.b)(m,d),h=vm(vm({},Object(ym.c)(p)),g);s(h.issue.tabs);const{project:y}=h;y&&n(Object(he.q)(y.projectKey),y),a(h.issue.fields),i(h.issueSections),t(h.myPreferences),l.dispatch(Object(N.d)(h)),h.attachments&&r.setVisibleAttachments(h.attachments.nodes),h.attachments&&r.setTotalCount(h.attachments.totalCount),h.permissions&&o.setPermissions(h.permissions),h.jiraSettings&&c.setJiraSettings(h.jiraSettings)}})(e):(({resourceManager:e,savePreferences:t,saveIssueTabs:s,saveProjectContext:n,storeFieldsWithContext:a,storeIssueLayoutData:i,permissionActions:r,attachmentActions:o,jiraSettingsActions:c,store:l,issueData:u,baseUrl:d})=>{const p=e.getMediaReadPermission(),m=e.getMediaUploadPermission(),b=e.getMediaUser(),f=e.getGiraData(),g=e.getGqlData();if(p&&m&&b&&f&&g){l.dispatch(ke(u));const e=Object(Ys.a)(p);l.dispatch(pt(e));const h=Vs(m);l.dispatch(Object(Fs.d)(h));const y=Gs(b);l.dispatch(Object(Ws.d)(y));const O=Object(jm.b)(g,d),j=vm(vm({},Object(ym.c)(f)),O);s(j.issue.tabs);const{project:E}=j;E&&n(Object(he.q)(E.projectKey),E),a(j.issue.fields),i(j.issueSections),t(j.myPreferences),l.dispatch(Object(N.d)(j)),j.attachments&&o.setVisibleAttachments(j.attachments.nodes),j.attachments&&o.setTotalCount(j.attachments.totalCount),j.permissions&&r.setPermissions(j.permissions),j.jiraSettings&&c.setJiraSettings(j.jiraSettings)}})(e);function Sm(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Im(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Sm(Object(s),!0).forEach((function(t){Cm(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Sm(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Cm(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Tm=(e,t)=>{const{baseUrl:s,cloudId:n,licensedProducts:a,locale:i,atlassianAccountId:r,productCrossSellConfig:o,siteAdminStatus:c,isAnonymous:l,appEditions:u,appPermissions:d,licenseStates:p,firstActivationDateMs:m}=t;return{analyticsSource:e.analyticsSource,appEditions:u,appPermissions:d,atlassianAccountId:r,baseUrl:s,backButtonUrl:e.backButtonUrl,boardId:e.boardId,boardType:e.boardType,cloudId:n,estimationStatistic:e.estimationStatistic,firstActivationDateMs:m,isAnonymous:l,isLoadedWithPage:e.isLoadedWithPage,isLoading:!1,isModal:e.isModal,isSpaEnabled:e.isSpaEnabled,issueKey:e.issueKey,licensedProducts:a,licenseStates:p,locale:i,loginRedirectUrl:e.loginRedirectUrl,maxTokenLength:Object(ye.a)(),onIssueKeyChange:e.onIssueKeyChange,productCrossSellConfig:o,rapidViewId:e.rapidViewId,rapidViewMap:e.rapidViewMap,siteAdminStatus:c,viewMode:e.viewMode}},Pm=e=>{var t;return{analyticsSource:e.analyticsSource,backButtonUrl:e.backButtonUrl,boardId:e.boardId,boardType:e.boardType,estimationStatistic:e.estimationStatistic,isLoadedWithPage:e.isLoadedWithPage,isLoading:!1,isModal:e.isModal,isSpaEnabled:e.isSpaEnabled,issueKey:e.issueKey,loginRedirectUrl:e.loginRedirectUrl,maxTokenLength:Object(ye.a)(),onIssueKeyChange:e.onIssueKeyChange,rapidViewId:e.rapidViewId,rapidViewMap:null===(t=e.rapidViewMap)||void 0===t?void 0:t.map(e=>e.map(e=>Object(he.l)(e))),viewMode:e.viewMode}},_m=e=>{var t,s;return{id:e.id,name:e.name,hasScreen:e.hasScreen,isGlobal:e.isGlobal,isInitial:e.isInitial,isConditional:e.isConditional,isLooped:e.isLooped,to:{id:e.to.id,name:e.to.name,description:null!==(t=e.to.description)&&void 0!==t?t:"",statusCategory:{id:Object(ge.categoryIdForStatusCategory)(Object(ge.statusCategoryForId)(null===(s=e.to.statusCategory)||void 0===s?void 0:s.id))}},from:e.from}},xm=(e,t,s,n,a,i,r,o,c,l,u,d,p,m,b,f,g)=>{const h=n.getRecentIssue(e.issueKey),y=h?Im(Im({},h),{},{context:Im(Im({},h.context),Tm(e,t))}):void 0;return(({initialState:e,onChange:t=Le.a,onError:s=Le.a,dataProvider:n,history:a,issueKey:i=Object(he.l)(""),fieldsValueActions:r,fieldsConfigActions:o,issueViewLayoutActions:c,attachmentActions:l,recentIssuesActions:u,prefetchedResourceManager:d,userPreferenceActions:p,issueScrollActions:m,permissionActions:b,issueTabsActions:f,jiraSettingsActions:g,projectContextActions:h,issueContextActions:y})=>Object(xe.createStore)(Object(De.enableBatching)(fm),e,Object(Re.a)({name:`issue-${i}`})(Object(xe.applyMiddleware)(...hm(t,s,n,a,r,o,c,l,u,d,p,m,b,f,g,h,y)))))({attachmentActions:l,onChange:e.onChange,onError:e.onError,dataProvider:s,history:e.history||fe()(),initialState:y,issueKey:e.issueKey,fieldsValueActions:a,fieldsConfigActions:i,issueViewLayoutActions:r,prefetchedResourceManager:c,recentIssuesActions:n,userPreferenceActions:o,issueScrollActions:u,permissionActions:d,issueTabsActions:p,jiraSettingsActions:m,projectContextActions:b,issueContextActions:f,workflowTransitionsActions:g})},Dm=(e,t,s,n,a,i,r,o,c,l,u,d,p,m,b,f,g,h,y)=>{const O=a.getRecentIssue(e.issueKey),j=a.getRecentIssuesCount();if(Object(U.a)({analyticsSource:e.analyticsSource,isLoadedWithPage:e.isLoadedWithPage||!1,isSPA:!e.isInitialRender,isRecentIssue:!!O,recentIssuesCount:j,dataProvider:s,store:n,route:b}),n.dispatch(L(Tm(e,t))),d.setIssueContext(Pm(e)),e.dispatchExternalActionRef&&e.dispatchExternalActionRef(l),O)n.dispatch(Object(N.g)());else{const a=s.getIssue(e.issueKey);if(c&&a&&wm({resourceManager:c,savePreferences:e=>o.setUserPreferences(e),storeFieldsWithContext:t=>mr(t,i,r,e.issueKey),storeIssueLayoutData:e=>{f.setIssueViewLayout(e)},saveIssueTabs:e=>m.setIssueTabs(e),saveProjectContext:(e,s)=>{h.setProjectContext(e,s),Object(F.isPolarisInsightsTabEnabled)()&&s&&_e(t.baseUrl,e).then(t=>h.mergeProjectProperty(e,{isPolarisProject:t}))},permissionActions:p,attachmentActions:u,jiraSettingsActions:g,store:n,issueData:a,baseUrl:t.baseUrl}),(e=>!Object(Z.n)(e.getState()))(n))if(a){var E;n.dispatch(ke(a)),mr(Object(we.a)(a),i,r,e.issueKey,!0),f.setIssueViewLayout(a.issueSections),o.setUserPreferences(a.myPreferences),a.workflow&&a.workflow.transitions&&y.setState({data:a.workflow.transitions.map(_m)});const t=null===(E=a.fields.get("project"))||void 0===E?void 0:E.value;t&&h.setProjectContext(Object(ve.a)(e.issueKey),t)}else n.dispatch(Object(Oe.c)(e.issueKey));c&&c.isAllDataReady()&&a?(n.dispatch(Object(N.a)()),c.clearAll()):(Object(U.f)(),n.dispatch(Object(N.c)())),n.dispatch((()=>({type:"FETCH_LOGGED_IN_USER_REQUEST"}))())}O||n.dispatch(Object(je.b)(e.issueKey))};function Am(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Mm(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Am(Object(s),!0).forEach((function(t){Lm(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Am(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Lm(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Rm(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const Nm=Object(g.a)(()=>"variation"===Object(F.getProductRequirementsDocDiscoveryFlag)(),({children:e})=>c.a.createElement(h.a,null,e),({children:e})=>e),Um=Object(g.a)(F.isOptInBackToBentoEnabled,v.a,({children:e})=>c.a.createElement(c.a.Fragment,null,e)),Fm=e=>{const{analyticsSource:t,backButtonUrl:s,boardId:n,boardType:a,dispatchExternalActionRef:i,estimationStatistic:r,isLoadedWithPage:l,isModal:u,issueKey:d,isSpaEnabled:g,locationTransformer:h,loginRedirectUrl:v,rapidViewId:T,rapidViewMap:F,viewMode:B,children:W}=e,H=Object(A.m)(),G=Object(x.a)(),[{route:$}]=Object(p.n)(),[,q]=(()=>{const[,e]=z(),t=Object(o.useCallback)(t=>e.getRecentIssue(t),[e]),s=Object(o.useCallback)((t,s)=>e.setRecentIssue(t,s),[e]),n=Object(o.useCallback)(()=>e.getRecentIssuesCount(),[e]);return[null,Object(o.useMemo)(()=>({setRecentIssue:s,getRecentIssue:t,getRecentIssuesCount:n}),[t,s,n])]})(),[,Q]=Object(j.b)(),[,J]=Object(E.d)(),[Z]=Object(Y.b)(),[,ee]=Object(S.a)(),[,te]=Object(y.a)(d),[,se]=Object(k.a)(),[,ne]=Object(P.a)(),[,ae]=Object(O.d)(),[,ie]=Object(I.a)(),[,re]=Object(w.b)(),[,oe]=Object(D.a)(),[,ce]=Object(_.e)(),[,le]=Object(C.a)(),ue=Object(o.useMemo)(()=>xm(e,H,G,q,J,Q,ie,ee,Z,te,se,ne,re,oe,ce,ae,le),[]),de=Object(o.useCallback)(()=>{const e=ue.getState(),t=Object(K.a)(e),{attributes:s}=t;return Mm(Mm({},Rm(t,["attributes"])),s)},[ue]),pe=Object(o.useCallback)(e=>{const t=Object(R.d)(e);ue.dispatch(t)},[ue]);Object(o.useMemo)(()=>{Dm(e,H,G,ue,q,J,Q,ee,Z,pe,te,ae,ne,re,$,ie,oe,ce,le)},[]),Object(o.useEffect)(()=>()=>{const e=ue.getState();"COMPLETE"===e.ui.loadingStage&&q.setRecentIssue(d,e)},[d,q,ue]);const be=Object(o.useRef)(!0);return Object(o.useEffect)(()=>{be.current||(ue.dispatch(L(Tm(e,H))),ae.setIssueContext(Pm(e))),be.current=!1},[s,d,v,T,a,n,l,u,F,r,t,B]),Object(o.useEffect)(()=>{if(!be.current){q.getRecentIssue(e.issueKey)&&ue.dispatch(Object(N.g)())}},[e.issueKey,q,ue]),Object(o.useEffect)(()=>()=>{Z&&Z.clearAll(),!1!==g&&null!=g||setTimeout(()=>ue.dispatch(f.a)),i&&i(null)},[]),Object(U.g)(),c.a.createElement(Um,null,c.a.createElement(M.a,{scope:d},c.a.createElement(Nm,null,c.a.createElement(m.a,{store:ue,locale:H.locale,addAnalyticsPayload:de},c.a.createElement(c.a.Fragment,null,c.a.createElement(me,null),c.a.createElement(X,null),c.a.createElement(b.a,null,c.a.createElement(V.b,{store:ue,locationTransformer:h},W)))))))};Fm.displayName="AppProvider";const Vm=e=>c.a.createElement(T.a,{scope:e.issueKey},c.a.createElement(Fm,e));Vm.displayName="ScopedAppProvider";var Km=Object(g.a)(F.isGlobalLoopTransitionActionsEnabled,Vm,Fm);s.a=i()(r.a,(()=>e=>{var t,s;return s=t=class extends o.Component{constructor(...e){super(...e),this.MetricsContext=Object(d.b)(this.props.metrics)}render(){const{MetricsContext:t}=this;return(c.a.createElement(t.Provider,{value:Object(d.a)(this.props.metrics)},c.a.createElement(e,this.props)))}},t.displayName=`WithMetricsProvider(${e.displayName||e.name})`,s})(),(function(e){return t=>c.a.createElement(l.a,null,s=>c.a.createElement(e,u({},t,{isInitialRender:s.isInitialRender})))}))(Km)},"./src/packages/issue/issue-view/src/views/issue-details/error/auth-error.svg":function(e,t,s){e.exports=s.p+"assets/auth-error.37d7a62ee1c48c2d5ae201ec8f798f18.8.svg"},"./src/packages/issue/issue-view/src/views/issue-details/error/permission-error.svg":function(e,t,s){e.exports=s.p+"assets/permission-error.c932893e3cfcbf2f521d55c8596010e7.8.svg"},"./src/packages/issue/issue-view/src/views/issue-details/error/unknown-error.svg":function(e,t,s){e.exports=s.p+"assets/unknown-error.0ae7398ce07e7e3c1125e09977c8fd48.8.svg"},"./src/packages/issue/issue-view/src/views/issue-details/issue-app.js":function(e,t,s){"use strict";s.r(t);const n=e=>{try{window.performance.mark(e)}catch(t){}};n("jira.issue-view.issue-app.eval-start");var a=s("./node_modules/react/index.js"),i=s.n(a),r=s("./node_modules/lodash/noop.js"),o=s.n(r),c=s("./src/packages/platform/observability/analytics-web-react/src/components/decorators.js"),l=s("./src/packages/platform/utils/constants/src/analytics-sources.js"),u=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js"),d=s("./src/packages/growth/up-flow/persistent-upgrade-banner/src/async.js"),p=(s("./src/packages/issue/issue-view/src/views/common/skeleton/skeleton-view.js"),s("./src/packages/issue/issue-view/src/common/util/events/index.js")),m=s("./src/packages/issue/issue-view/src/feature-flags.js");const b=[l.a.FULL_ISSUE,l.a.SERVICEDESK_QUEUES_ISSUE,l.a.SERVICEDESK_REPORTS_ISSUE];var f=s("./src/packages/issue/issue-view/src/views/assign-issue-parent-modal/index.js"),g=s("./src/packages/issue/issue-view/src/views/banner/index.js"),h=s("./src/packages/platform/utils/constants/src/application-keys.js"),y=s("./node_modules/react-redux/es/index.js"),O=s("./node_modules/lodash/flow.js"),j=s.n(O),E=s("./src/packages/platform/observability/analytics-web-react/src/utils/component-with-analytics.js"),v=s("./src/packages/platform/observability/analytics-web-react/src/components/with-fire-ui-analytics.js");var k=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),w=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),S=s("./src/packages/issue/issue-view/src/selectors/changeboarding-selector.js"),I=s("./src/packages/issue/issue-view/src/selectors/clickthrough-banner-selector.js"),C=s("./src/packages/issue/issue-view/src/views/changeboarding/banner/index.js"),T=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),P=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),_=s("./src/packages/issue/issue-view/src/views/common/issue-page-grid/styled.js"),x=s("./src/packages/issue/issue-view/src/views/issue-details/sticky-header-container/styled.js");const D=T.default.div(["margin:","px 0 ","px;"],u.e,2*u.e),A=(_.b,T.default.div(["display:flex;align-items:center;color:",";border-bottom:2px solid ",";margin-bottom:","px;margin-left:","px;padding:","px 0 ","px ","px;"],P.a.N100,P.a.N30,2*u.e,-x.b,2.5*u.e,u.e/2,x.b)),M=T.default.div(["display:flex;align-self:baseline;padding-right:","px;"],u.e),L=T.default.div(["display:flex;flex:2;align-items:flex-start;padding-top:3px;flex-wrap:wrap;"]),R=T.default.div(["display:flex;flex-wrap:wrap;flex:2;margin-bottom:","px;"],2*u.e),N=T.default.div(["margin-right:","px;line-height:20px;min-width:352px;"],u.e),U=T.default.div(["display:inline-block;"]),F=T.default.div(["display:flex;"]),V=T.default.div(["display:flex;flex-shrink:0;align-self:flex-start;margin-right:-10px;margin-left:-12px;margin-top:","px;"],-u.e/2),K=T.default.div(["margin-left:","px;"],2*u.e);var B=s("./node_modules/react-intl/lib/index.es.js"),W=s("./node_modules/memoize-one/dist/memoize-one.esm.js"),H=s("./node_modules/react-resource-router/build/esm/index.js"),G=s("./node_modules/@atlaskit/icon/glyph/cross.js"),$=s.n(G),q=s("./node_modules/@atlaskit/icon/glyph/info.js"),z=s.n(q),Y=s("./node_modules/@atlaskit/onboarding/dist/es2019/components/SpotlightTarget.js"),Q=s("./node_modules/@atlaskit/tooltip/dist/es2019/Tooltip.js"),J=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/button/index.js"),Z=s("./src/packages/issue/issue-view/src/configurations.js"),X=s("./node_modules/query-string/index.js"),ee=s.n(X);var te=Object(B.defineMessages)({heading:{id:"full-page-issue.banner.heading",defaultMessage:"We're updating the issue view to help you get more done."},learnMore:{id:"full-page-issue.banner.learn-more",defaultMessage:"Learn more"},seeTheOldView:{id:"full-page-issue.banner.see-the-old-view",defaultMessage:"See the old view"},dismissBanner:{id:"full-page-issue.banner.dismiss-banner",defaultMessage:"Dismiss banner"}});class se extends a.Component{constructor(...e){super(...e),this.getOldViewUrl=Object(W.a)(()=>(()=>{const{search:e,host:t,protocol:s,pathname:n,hash:a}=window.location,i=ee.a.parse(e);return i.oldIssueView="true",`${s}//${t}${n}?${ee.a.stringify(i)}${a}`})())}renderSpaLinkComponent(){const{applicationKey:e}=this.props,t=this.getOldViewUrl(),s=null!=t&&t.includes("jira/servicedesk");return e===Object(Z.j)().applicationKey&&s&&__SPA__?H.a:void 0}renderFeedback(){const{renderFeedback:e,applicationKey:t,isClickthroughBannerHidden:s}=this.props;return e&&null!=t&&e(t,s)}render(){const{issueId:e,learnMoreUrl:t,isClickthroughBannerHidden:s,isIssueViewComplete:n,onClose:a,intl:r,onClickthroughClick:o}=this.props,c=this.getOldViewUrl();return i.a.createElement(A,null,i.a.createElement(M,null,i.a.createElement(z.a,{primaryColor:P.a.P300,size:"medium",label:"info"})),i.a.createElement(L,null,i.a.createElement(R,null,i.a.createElement(N,null,r.formatMessage(te.heading),"\xa0",i.a.createElement(U,null,i.a.createElement(B.FormattedMessage,{id:"learnMoreOrSeeTheOldView",defaultMessage:"{learnMore} or {seeTheOldView}",values:{learnMore:i.a.createElement(J.a,{appearance:"link",href:t,spacing:"none",target:"_blank"},r.formatMessage(te.learnMore)),seeTheOldView:i.a.createElement(J.a,{appearance:"link",component:this.renderSpaLinkComponent(),externalId:"issue.old-full-page",externalValues:{issueId:e},href:c,spacing:"none",onClick:o},r.formatMessage(te.seeTheOldView))}})))),s?null:i.a.createElement(V,null,i.a.createElement(Y.a,{name:"GIVE_FEEDBACK"},i.a.createElement(F,null,this.renderFeedback()))),i.a.createElement(K,null,i.a.createElement(Q.a,{content:r.formatMessage(te.dismissBanner)},i.a.createElement(J.a,{spacing:"compact",isDisabled:!n,iconBefore:i.a.createElement($.a,{size:"small",label:r.formatMessage(te.dismissBanner)}),onClick:a})))))}}se.displayName="FullPageIssueBannerView";var ne=Object(B.injectIntl)(se);function ae(){return(ae=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function ie(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}class re extends a.Component{render(){const e=this.props,{shouldShowChangeboardingBanner:t,isClickthroughBannerHidden:s}=e,n=ie(e,["shouldShowChangeboardingBanner","isClickthroughBannerHidden"]);return t?i.a.createElement(D,null,i.a.createElement(C.a,null)):s&&Object(m.isPersistentUpgradeBannerEnabled)()?i.a.createElement(d.a,{isBannerEnabled:!0,isFullWidth:!0}):s?null:i.a.createElement(ne,ae({},n,{isClickthroughBannerHidden:s}))}}re.displayName="BannerView",re.defaultProps={isClickthroughBannerHidden:!1,isIssueViewComplete:!1};var oe=j()(Object(E.a)("button",{onClose:"clicked",onClickthroughClick:"clicked"}),Object(v.a)({onClose:"fullIssueBannerDismissed",onClickthroughClick:"clickthroughToOldIssue"}),Object(y.b)(e=>({shouldShowChangeboardingBanner:Object(S.d)(e),isClickthroughBannerHidden:Object(I.a)(e),isIssueViewComplete:Object(w.n)(e),issueId:Object(k.A)(e)}),e=>({onClose:()=>e((e=>({type:"CLICKTHROUGH_BANNER_DISMISS",payload:e}))(Date.now()))})))(re);var ce=({issueId:e,oldViewUrl:t,applicationKey:s,isProjectSimplified:n,renderFeedback:a})=>{const r=s===h.a.SERVICE_DESK?"https://confluence.atlassian.com/display/SERVICEDESKCLOUD/Changes+to+requests+in+the+new+issue+view":"https://confluence.atlassian.com/jiracorecloud/the-new-jira-issue-view-938040503.html";switch(s){case h.a.EMPTY_APPLICATION_KEY:case h.a.SIMPLE_SOFTWARE_BOARD:return null;case h.a.SERVICE_DESK:return n?null:i.a.createElement(oe,{issueId:e,oldViewUrl:t,learnMoreUrl:r,renderFeedback:a,applicationKey:s});default:return i.a.createElement(oe,{issueId:e,oldViewUrl:t,learnMoreUrl:r,renderFeedback:a,applicationKey:s})}},le=s("./src/packages/issue/issue-view/src/views/changeboarding/ui/main.js"),ue=s("./src/packages/issue/issue-view/src/views/changeboarding/index.js"),de=s("./src/packages/issue/issue-view/src/views/common/compact-mode-provider/index.js"),pe=s("./src/packages/issue/issue-view/src/views/common/experience-tracking/view-experience/index.js"),me=s("./src/packages/issue/issue-view/src/views/common/experience-tracking/edit-experience/index.js"),be=s("./src/packages/platform/utils/types/src/general.js"),fe=s("./src/packages/issue/issue-view/src/feedback-button/index.js");const ge={[h.a.SOFTWARE_ISSUE]:{feedbackGroupId:"jira-software-full-issueview",collectorId:"12f21050"},[h.a.CORE_ISSUE]:{feedbackGroupId:"jira-core-full-issueview",collectorId:"f7ac9eb0"},[h.a.SERVICE_DESK]:{feedbackGroupId:"jira-service-desk-full-issueview",collectorId:"3311e016"},[h.a.BITBUCKET_ISSUE]:{feedbackGroupId:"bitbucket-jira-issueview",collectorId:"e7fdb917"}};function he(){return(he=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const ye=({applicationKey:e,baseUrl:t,locale:s,isCompact:n=!1})=>{if(null==e||!(e=>Boolean(ge[e]))(e))return null;const a=ge[e];return(i.a.createElement(Y.a,{name:"GIVE_FEEDBACK"},i.a.createElement(fe.a,he({},a,{baseUrl:t,locale:s,isCompact:n}))))};ye.displayName="Feedback";var Oe=ye;const je=Object(y.b)(e=>({baseUrl:Object(be.b)(Object(k.g)(e)),locale:Object(k.D)(e),applicationKey:Object(k.e)(e)}),{})(Oe);const Ee=(e,t=!0)=>i.a.createElement(je,{isCompact:t});Ee.displayName="renderFeedback";var ve=s("./src/packages/platform/controllers/global/document-title/src/index.js"),ke=s("./src/packages/issue/issue-context-service/src/main.js"),we=s("./src/packages/issue/fields/summary/src/services/index.js"),Se=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js");const Ie=Object(Se.o)("summary"),Ce=Object(y.b)(e=>({issueKey:Object(k.B)(e),summary:Ie(e)}),{})(({issueKey:e,summary:t,location:s})=>(s===l.a.FULL_ISSUE||s===l.a.SERVICEDESK_QUEUES_ISSUE||s===l.a.SERVICEDESK_REPORTS_ISSUE)&&null!=t&&i.a.createElement(ve.a,{title:`[${e}] ${t}`})),Te=({location:e})=>{const t=Object(ke.f)(),[{value:s}]=Object(we.a)({issueKey:t});return e!==l.a.FULL_ISSUE&&e!==l.a.SERVICEDESK_QUEUES_ISSUE&&e!==l.a.SERVICEDESK_REPORTS_ISSUE||null===s?null:i.a.createElement(ve.a,{title:`[${t}] ${s}`})};Te.displayName="ExtractedDocumentTitle";var Pe=({location:e})=>{const t=Object(m.isExtractedSummaryFieldEnabled)()?Te:Ce;return(i.a.createElement(t,{location:e}))},_e=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/header/index.js"),xe=s("./src/packages/issue/issue-view/src/views/issue-details/app-provider/index.js"),De=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),Ae=s("./src/packages/platform/services/providers-project-context/src/index.js"),Me=s("./src/packages/routes/src/ui/spa/servicedesk/practices/resources/index.js"),Le=s("./src/packages/servicedesk/change-management-tour/src/async.js");var Re=Object(y.b)(e=>({fields:Object(Se.t)(e),projectId:Object(be.p)(Object(w.D)(e))}),{})(e=>{const{data:t}=Object(Me.b)(),{baseUrl:s}=Object(De.f)();return Object(m.isPageLayoutEnabled)()&&!e.projectId?null:!0===t&&i.a.createElement(Ae.a,{baseUrl:s,projectKeyOrId:e.projectId},({data:t})=>t&&!0===t.isProjectAdmin?i.a.createElement(Le.a,e):null)}),Ne=s("./src/packages/platform/ui/error-boundaries/src/ui/js-error-boundary/index.js"),Ue=s("./src/packages/servicedesk/incident-management-tour/src/async.js");var Fe,Ve,Ke,Be=Object(y.b)(e=>({fields:Object(Se.t)(e),projectId:Object(be.p)(Object(w.D)(e))}),{})(e=>{const{data:t}=Object(Me.b)(),{baseUrl:s}=Object(De.f)();return Object(m.isPageLayoutEnabled)()&&!e.projectId?null:!0===t&&i.a.createElement(Ne.a,{id:"incidentManagementTourIssues",packageName:"jiraServicedeskIncidentManagementTour",fallback:"flag"},i.a.createElement(Ae.a,{baseUrl:s,projectKeyOrId:e.projectId},({data:t})=>t&&!0===t.isProjectAdmin?i.a.createElement(Ue.a,e):null))}),We=s("./src/packages/issue/issue-view/src/views/issue-details/issue-app.styled.js"),He=s("./src/packages/issue/issue-view/src/views/issue-details/issue-data-provider-refresher.js"),Ge=s("./src/packages/issue/issue-view/src/views/issue-details/issue-view.js"),$e=s("./src/packages/issue/issue-view/src/views/issue-details/sticky-header-container/index.js"),qe=s("./src/packages/issue/issue-view/src/common/metrics/index.js"),ze=s("./src/packages/platform/observability/spa-performance-breakdown/src/utils/mark-product-start/index.js");const Ye=new Set([l.a.SOFTWARE_ISSUE,l.a.AGILITY_BACKLOG]),Qe=[l.a.FULL_ISSUE,l.a.SERVICEDESK_QUEUES_ISSUE,l.a.SERVICEDESK_REPORTS_ISSUE];let Je=Object(c.b)("issue")((Ke=Ve=class extends a.PureComponent{constructor(e){super(e),this.onEscape=e=>{Object(p.c)(e)&&(this.props.onClose(),e.preventDefault())},this.canCloseOnEsc=()=>Ye.has(this.props.analyticsSource),this.getRenderFeedback=()=>{const{analyticsSource:e}=this.props;if(b.includes(e))return Ee},this.renderTopBanner=(e,t)=>{const{analyticsSource:s}=this.props;return Object(m.isOptInBackToBentoEnabled)()||!b.includes(s)||t?b.includes(s)&&Object(m.isPersistentUpgradeBannerEnabled)()?i.a.createElement(d.a,{isBannerEnabled:!0,isFullWidth:!0}):null:ce({applicationKey:e,renderFeedback:this.getRenderFeedback()})},this.renderIssueView=()=>{const e=this.getIssueViewProps();return(i.a.createElement(Ge.default,e))},this.renderChangeManagementTour=()=>i.a.createElement(Re,{currentIssueKey:this.props.issueKey}),this.renderChangeboardingTour=()=>{const e=Qe.includes(this.props.analyticsSource)?i.a.createElement(le.a,null):null;return Object(m.isOptInBackToBentoEnabled)()?e:i.a.createElement(ue.a,{isFeedbackEnabled:void 0!==this.getRenderFeedback()})},this.renderIncidentManagementTour=()=>i.a.createElement(Be,{currentIssueKey:this.props.issueKey}),this.isMobile=()=>this.props.analyticsSource===l.a.MOBILE_ISSUE,this.isFullPage=e=>e===l.a.FULL_ISSUE,this.getIssueViewProps=()=>({renderFeedback:this.getRenderFeedback(),issueDeleteCallbacks:{onIssueDeleteSuccess:this.props.onIssueDeleteSuccess,onIssueDeleteFailure:this.props.onIssueDeleteFailure},viewModeOptions:this.props.viewModeOptions,onClose:this.props.onClose,shouldShowProjectLevelBreadcrumb:this.props.shouldShowProjectLevelBreadcrumb,shouldShowRootProjectsBreadcrumb:this.props.shouldShowProjectLevelBreadcrumb,shouldShowCloseButton:this.props.shouldShowCloseButton,issueMaxWidth:this.props.issueMaxWidth});const{analyticsSource:t}=e;(Object(m.isFullPageBentoBM3Enabled)()||Object(m.isEmbeddedPageBentoBM3Enabled)())&&Object(qe.h)(this.isFullPage(t))}componentDidMount(){this.canCloseOnEsc()&&document.addEventListener("keydown",this.onEscape)}UNSAFE_componentWillReceiveProps(e){if((Object(m.isFullPageBentoBM3Enabled)()||Object(m.isEmbeddedPageBentoBM3Enabled)())&&e.issueKey!==this.props.issueKey){const{analyticsSource:e}=this.props;Object(qe.h)(this.isFullPage(e))}}componentWillUnmount(){this.canCloseOnEsc()&&document.removeEventListener("keydown",this.onEscape)}renderHeader(){const{onClose:e,shouldShowCloseButton:t,shouldShowProjectLevelBreadcrumb:s,shouldShowRootProjectsBreadcrumb:n,onIssueDeleteSuccess:a,onIssueDeleteFailure:r,viewModeOptions:o}=this.props;if(!this.isMobile())return null;const c=Object(m.isRemoveDataProviderRefresh)()?i.a.createElement(_e.a,{shouldShowCloseButton:t,shouldShowProjectLevelBreadcrumb:s,shouldShowRootProjectsBreadcrumb:n,issueDeleteCallbacks:{onIssueDeleteSuccess:a,onIssueDeleteFailure:r},onClose:e,renderFeedback:this.getRenderFeedback(),viewModeOptions:o}):i.a.createElement(He.a,{onClose:e,refreshOnUnmount:!0},i.a.createElement(_e.a,{shouldShowCloseButton:t,shouldShowProjectLevelBreadcrumb:s,shouldShowRootProjectsBreadcrumb:n,issueDeleteCallbacks:{onIssueDeleteSuccess:a,onIssueDeleteFailure:r},onClose:e,renderFeedback:this.getRenderFeedback(),viewModeOptions:o}));return(i.a.createElement($e.a,{elementId:"jira-issue-header",customStyles:`padding-left: ${3*u.e}px; padding-right: ${3*u.e}px;`},c))}render(){Object(m.isDoorKnockPrototypeEnabled)();const{innerBanner:e,analyticsSource:t,backButtonUrl:s,dispatchExternalActionRef:n,ecosystemEnabled:r,estimationStatistic:o,history:c,isCompact:l,isLoadedWithPage:u,isSpaEnabled:d,issueActions:p,issueKey:b,locationTransformer:h,loginRedirectUrl:y,metrics:O,onChange:j,onError:E,onIssueKeyChange:v,rapidViewId:k,rapidViewMap:w,viewModeOptions:S,issueMaxWidth:I}=this.props,C={analyticsSource:t,backButtonUrl:s,dispatchExternalActionRef:n,ecosystemEnabled:r,estimationStatistic:o,history:c,isLoadedWithPage:u,isSpaEnabled:d,issueActions:p,issueKey:b,locationTransformer:h,loginRedirectUrl:y,metrics:O,onChange:j,onError:E,onIssueKeyChange:v,rapidViewId:k,rapidViewMap:w,viewMode:S&&S.viewMode},T=this.isMobile()?a.Fragment:We.a,P=this.isMobile()?a.Fragment:We.b;return i.a.createElement(i.a.Fragment,null,"full-issue"===t&&i.a.createElement(ze.a,null),i.a.createElement(xe.a,C,i.a.createElement(Pe,{location:t}),!Object(m.isRemoveDataProviderRefresh)()&&i.a.createElement(He.a,{refreshOnUnmount:!0,onClose:this.props.onClose}),i.a.createElement(de.b,{defaultIsCompact:l},i.a.createElement(pe.a,null,i.a.createElement(me.a,null,i.a.createElement(T,{issueMaxWidth:I},i.a.createElement(P,null,this.renderChangeboardingTour(),i.a.createElement(g.a,{renderTopBanner:this.renderTopBanner}),this.renderHeader(),i.a.createElement("div",null,e))),i.a.createElement(f.a,null),this.renderIssueView(),this.renderChangeManagementTour(),this.renderIncidentManagementTour())))))}},Ve.defaultProps={isCompact:!1,isLoadedWithPage:!1,isSpaEnabled:!1,shouldShowRootProjectsBreadcrumb:!1,viewModeOptions:{viewModeSwitchEnabled:!1},onClose:o.a,onIssueDeleteSuccess:o.a,onIssueDeleteFailure:o.a},Fe=Ke))||Fe;t.default=Je;(()=>{n("jira.issue-view.issue-app.eval-end")})()},"./src/packages/issue/issue-view/src/views/issue-details/issue-app.styled.js":function(e,t,s){"use strict";s.d(t,"d",(function(){return a})),s.d(t,"c",(function(){return r})),s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return c}));var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js");const a=4*s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js").e,i=e=>`calc((100% - ${e}px) / 2)`,r=(e,t)=>`\n        ${e}: ${i(t)}; /* for browsers which do not support max(); negative padding is ignored by browsers */\n        ${e}: max(${i(t)}, 0px); /* for browsers which support max() */\n        \n        .msie-11 & { /* IE11 is the only browser which does not ignore negative padding */\n            ${e}: 0;\n        }\n    `,o=n.default.div(["flex-shrink:0;",""],({issueMaxWidth:e})=>void 0!==e?`\n        ${r("padding-left",e)}\n        ${r("padding-right",e)}    \n        `:""),c=n.default.div(["padding:0 ","px;"],a)},"./src/packages/issue/issue-view/src/views/issue-details/issue-data-provider-refresher.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s("./node_modules/react-redux/es/index.js"),i=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),r=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),o=s("./src/packages/issue/issue-view/src/actions/issue-preview-actions.js"),c=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),l=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js");class u extends n.Component{constructor(...e){super(...e),this.onCloseHandler=()=>{this.props.refreshIssueData(this.props.currentIssueKey,this.props.fieldData),this.props.onClose()}}componentWillUnmount(){this.props.refreshOnUnmount&&this.props.refreshIssueData(this.props.currentIssueKey,this.props.fieldData)}render(){const{children:e}=this.props,t=e?n.Children.count(e):0;if(t<=0)return null;1!==t&&r.i.safeError("data.provider.issue.refreshed",`Refresher expects 1 child but ${t} specified`,new i.a({eventNameSuffix:"issue.error",type:"js",app:"issue"}));const s=n.Children.map(e,e=>Object(n.cloneElement)(e,{onClose:this.onCloseHandler}));return n.Children.only(s[0])}}u.displayName="ReadOnlyDataIssueRefresher",u.defaultProps={refreshOnUnmount:!1},t.a=Object(a.b)(e=>({currentIssueKey:Object(c.B)(e),fieldData:Object(l.s)(e)}),e=>({refreshIssueData:(t,s)=>e(Object(o.b)(t,s))}))(u)},"./src/packages/issue/issue-view/src/views/issue-details/issue-layout/styled.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return l})),s.d(t,"d",(function(){return u})),s.d(t,"a",(function(){return d})),s.d(t,"g",(function(){return p})),s.d(t,"i",(function(){return m})),s.d(t,"h",(function(){return b})),s.d(t,"b",(function(){return f})),s.d(t,"j",(function(){return g})),s.d(t,"f",(function(){return h})),s.d(t,"e",(function(){return y}));var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js"),i=s("./src/packages/issue/issue-view/src/views/common/issue-page-grid/styled.js"),r=s("./src/packages/issue/issue-view/src/views/issue-details/issue-app.styled.js"),o=s("./src/packages/issue/issue-view/src/views/issue-details/issue-layout/utils.js");const c=1.5*a.e,l=n.default.div(["padding:0 ","px ","px;"," ",""],4*a.e,i.c,({issueMaxWidth:e})=>void 0!==e?`padding-top: ${i.b}px;`:"",({isLeftmost:e,isRightmost:t})=>e?`\n                padding-left: ${r.d}px;\n                `:t?`\n                padding-left: ${3*a.e}px\n                padding-right: ${r.d-1.5*a.e}px;\n                `:""),u=n.default.div(["flex-grow:1;",";",""],({scrollHidden:e})=>e?Object(n.css)(["overflow:hidden;","{border-right:","px solid transparent;}"],l,15):"\n        overflow-x: hidden; /* 2 value shorthand syntax is not supported in IE11 */\n        overflow-y: auto;\n   ",({medium:e,isLeftmost:t,isRightmost:s,issueMaxWidth:n})=>{const a=e/10,i=s?c:t?-c:0,l=void 0!==n;return`\n            width: ${`${(100*a).toFixed(3)}%`};\n            width: ${`calc(${a} * min(${Object(o.a)()}px, 100%) + ${i}px)`};\n            ${t&&l?Object(r.c)("padding-left",n):""}\n            ${s&&l?Object(r.c)("padding-right",n):""}\n        `}),d=n.default.div(["margin-top:","px;"],3*a.e),p=n.default.div(["position:relative;height:100%;display:flex;flex-direction:column;"]),m=n.default.div(["display:flex;flex:1 1 auto;min-width:0;width:100%;"]),b=n.default.div(["display:flex;flex:1 1 auto;> div{display:flex;flex:1 1 auto;}"]),f=n.default.div(["display:flex;flex-wrap:wrap;flex-direction:row;align-items:flex-start;justify-content:space-between;align-content:stretch;margin-left:","px;margin-bottom:","px;padding-left:","px;"],-a.e,3*a.e,1.25*a.e),g=n.default.div(["visibility:",";"],e=>e.show?"visible":"hidden"),h=n.default.div(["height:100%;",";"],({scrollHidden:e})=>e?Object(n.css)(["overflow:hidden;border-right:","px solid transparent;"],15):"\n        overflow: auto;\n   "),y=n.default.div(["",""],({issueMaxWidth:e})=>void 0===e?`padding: 0 ${2.5*a.e}px;`:`padding: ${i.b}px ${4*a.e}px ${i.c}px;`)},"./src/packages/issue/issue-view/src/views/issue-details/issue-layout/utils.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=()=>1400},"./src/packages/issue/issue-view/src/views/issue-details/issue-view.js":function(e,t,s){"use strict";s.r(t),s.d(t,"Issue",(function(){return kL}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-redux/es/index.js"),r=s("./node_modules/lodash/noop.js"),o=s.n(r),c=s("./node_modules/query-string/index.js"),l=s.n(c),u=s("./node_modules/@atlaskit/page/dist/es2019/GridColumn.js"),d=s("./node_modules/@atlaskit/smart-card/dist/es2019/index.js"),p=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),m=s("./src/packages/platform/observability/analytics-web-react/src/components/view-tracker.js"),b=s("./node_modules/@atlaskit/analytics-next--current/dist/esm/withAnalyticsEvents.js"),f=s("./src/packages/platform/observability/analytics-web-react/src/utils/fire-track-event.js"),g=s("./src/packages/platform/observability/analytics-web-react/src/components/redux-analytics-data.js"),h=s("./src/packages/common-legacy-do-not-add-anything-new/src/bridge/jira-bridge.js"),y=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/logging/log.js"),O=s("./src/packages/shortcuts-dialog/src/main.js");var j=s("./node_modules/react-intl/lib/index.es.js"),E=s("./src/packages/platform/observability/analytics-web-react/src/components/with-fire-ui-analytics.js"),v=s("./src/packages/platform/observability/analytics-web-react/src/components/decorators.js"),k=s("./src/packages/issue/worklog/src/services/context/index.js"),w=s("./src/packages/issue/issue-view/src/common/actions/worklog-actions.js"),S=s("./src/packages/issue/issue-view/src/common/service/mentions/get-mention-encoder.js"),I=s("./src/packages/issue/issue-view/src/common/service/mentions/mention-provider-selector.js"),C=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),T=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),P=s("./src/packages/issue/issue-view/src/common/state/selectors/media-context-selector.js"),_=s("./src/packages/issue/issue-view/src/common/state/selectors/time-tracking-selector.js"),x=s("./src/packages/issue/issue-view/src/selectors/status-selector.js"),D=s("./src/packages/platform/observability/analytics-web-react/src/utils/events.js"),A=s("./src/packages/rich-content/src/common/adf-parsing-utils.js"),M=s("./src/packages/platform/ui/error-boundary/src/main.js"),L=s("./src/packages/platform/observability/errors-handling/src/utils/reporting-error-boundary.js"),R=s("./src/packages/issue/issue-view/src/common/util/time-string/is-time-string-valid/index.js"),N=e=>""===e.trim()||Object(R.a)(e),U=s("./src/packages/issue/issue-view/src/common/util/time-string/seconds-to-time-string/index.js"),F=s("./src/packages/issue/issue-view/src/common/util/time-string/time-string-to-seconds/index.js"),V=s("./src/packages/issue/issue-view/src/common/util/types/type-check/index.js"),K=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/enter-escape-handler/index.js"),B=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/modal-dialog/index.js"),W=s("./node_modules/@atlaskit/button--current/dist/es2019/components/Button.js"),H=s("./node_modules/@atlaskit/spinner/dist/es2019/spinner.js"),G=Object(j.defineMessages)({save:{id:"issue.log-time.modal.log-time-action.save",defaultMessage:"Save"},cancel:{id:"issue.log-time.modal.log-time-action.cancel",defaultMessage:"Cancel"}}),$=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),q=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const z=$.default.div(["display:inline-flex;justify-content:flex-end;align-items:center;width:100%;>:not(:first-child){margin-left:","px;}"],q.e/2),Y=$.default.div(["> *{display:flex;}margin-right:","px;"],q.e),Q=()=>a.a.createElement(Y,null,a.a.createElement(H.a,{size:"small"}));Q.displayName="renderSpinner";const J=e=>{const{formState:t,onConfirm:s,onCancel:n,intl:i}=e;return(a.a.createElement(z,null,"submitting"===t?Q():null,a.a.createElement(W.a,{appearance:"primary",onClick:s,isDisabled:"invalid"===t||"submitting"===t},i.formatMessage(G.save)),a.a.createElement(W.a,{appearance:"subtle",onClick:n,isDisabled:"submitting"===t},i.formatMessage(G.cancel))))};J.displayName="LogTimeModalFooter";var Z=J,X=Object(j.injectIntl)(Z),ee=s("./node_modules/@atlaskit/field-base/components/Label.js"),te=s("./src/packages/issue/issue-view/src/common/util/date-time-formatter/index.js"),se=s("./src/packages/issue/issue-view/src/common/component/date-time/view.js"),ne=s("./node_modules/react-loosely-lazy/lib/esm/index.js"),ae=s("./src/packages/issue/issue-view/src/common/component/editor/async.js"),ie=Object(j.defineMessages)({label:{id:"issue.log-time.modal.work-description.label",defaultMessage:"Work description"}});const re=Object(ne.f)(()=>s.e("async-editor-view").then(s.bind(null,"./src/packages/issue/issue-view/src/common/component/editor/index.js")),{moduleId:"./src/packages/issue/issue-view/src/common/component/editor/index.js"});class oe extends n.Component{render(){const e=a.a.createElement(ae.b,{mediaContext:this.props.mediaContext,defaultValue:this.props.defaultValue});return(a.a.createElement(a.a.Fragment,null,a.a.createElement(ee.a,{label:this.props.intl.formatMessage(ie.label)}),a.a.createElement(ae.a,{packageName:"issue",fallback:e},a.a.createElement(re,{isExpanded:!0,externalId:this.props.externalId,baseUrl:this.props.baseUrl,isDisabled:this.props.isDisabled,defaultValue:this.props.defaultValue,portalElement:this.props.portalElement,onChange:this.props.onChange,onChangeFailure:this.props.onChangeFailure,mediaContext:this.props.mediaContext,mentionProvider:this.props.mentionProvider,mentionEncoder:this.props.mentionEncoder,activityProvider:this.props.activityProvider}))))}}oe.displayName="WorkDescription",oe.defaultProps={portalElement:void 0};var ce=Object(j.injectIntl)(oe);const le=$.default.div(["align-items:center;display:flex;flex-direction:row;>:not(:first-child){margin-left:","px;}"],q.e),ue=$.default.div(["width:50%;"]),de=$.default.div(["width:100%;"]);var pe=s("./src/packages/issue/issue-view/src/common/messages/time.js");class me extends n.Component{constructor(...e){super(...e),this.state={shouldAppearInvalid:!this.props.isValid},this.onBlur=()=>{this.setState({shouldAppearInvalid:!this.props.isValid})}}UNSAFE_componentWillReceiveProps(e){!this.props.isValid&&e.isValid&&this.setState({shouldAppearInvalid:!1})}render(){return a.a.createElement("div",{onBlur:this.onBlur},this.props.children(this.state.shouldAppearInvalid))}}me.displayName="WithValidationOnBlur";var be=s("./node_modules/@atlaskit/field-text/FieldTextStateless.js");class fe extends n.Component{constructor(...e){super(...e),this.onChange=e=>{this.props.onChange(e.target.value)}}render(){return a.a.createElement(be.a,{value:this.props.value,label:this.props.label,placeholder:this.props.placeholder,isInvalid:this.props.isInvalid,invalidMessage:this.props.isInvalid?this.props.invalidMessage:void 0,disabled:this.props.isDisabled,required:this.props.isRequired,autoFocus:this.props.autoFocus,onChange:this.onChange,onBlur:this.props.onBlur,shouldFitContainer:!0})}}fe.displayName="TimeLogTextField",fe.defaultProps={isInvalid:!1,isRequired:!1,isDisabled:!1,autoFocus:!1,placeholder:void 0,invalidMessage:void 0,onBlur:o.a};var ge=Object(j.defineMessages)({timeRemaining:{id:"issue.log-time.modal.time-remaining",defaultMessage:"Time remaining"},timeSpent:{id:"issue.log-time.modal.time-spent",defaultMessage:"Time spent"}}),he=s("./node_modules/@atlaskit/tooltip/dist/es2019/Tooltip.js");const ye=$.default.div(["padding:","px ","px;"],q.e-2,q.e-6),Oe=$.default.div(["list-style:inside;margin-top:","px;padding-left:","px;padding-bottom:","px;"],q.e,q.e/2,q.e/2);class je extends n.Component{tooltipContentRender(){const{intl:e}=this.props;return(a.a.createElement(ye,null,a.a.createElement("p",null,e.formatMessage(pe.a.exampleFormat,{formatExample:"2w 4d 6h 45m"})),a.a.createElement(Oe,null,a.a.createElement("li",null,e.formatMessage(pe.a.weeks,{w:"w"})),a.a.createElement("li",null,e.formatMessage(pe.a.days,{d:"d"})),a.a.createElement("li",null,e.formatMessage(pe.a.hours,{h:"h"})),a.a.createElement("li",null,e.formatMessage(pe.a.minutes,{m:"m"})))))}render(){const{children:e,shouldRenderContent:t}=this.props;return(a.a.createElement(he.a,{content:t?this.tooltipContentRender():null},e))}}je.displayName="TimeTrackingTooltip";var Ee=je;const ve=e=>{const{isValid:t,value:s,onChange:n,onBlur:i,isDisabled:r,intl:o}=e;return(a.a.createElement(me,{isValid:t},e=>a.a.createElement(Ee,{shouldRenderContent:t&&!r,intl:o},a.a.createElement(fe,{value:s,isInvalid:e,invalidMessage:pe.b,onChange:n,onBlur:i,isDisabled:r,label:o.formatMessage(ge.timeSpent),placeholder:"2w 4d 6h 45m",autoFocus:!0}))))};ve.displayName="ValidatedLogTimeInput";var ke=ve,we=({isValid:e,value:t,onChange:s,onBlur:n,isDisabled:i,intl:r})=>a.a.createElement(me,{isValid:e},o=>a.a.createElement(je,{shouldRenderContent:e&&!i,intl:r},a.a.createElement(fe,{value:t,isInvalid:o,invalidMessage:pe.b,onChange:s,onBlur:n,isDisabled:i,label:r.formatMessage(ge.timeRemaining),placeholder:"2w 4d 6h 45m"})));class Se extends n.Component{constructor(...e){super(...e),this.onDateStartedChange=e=>{this.props.onDateStartedChange(e)}}render(){const{value:{timeLogged:e,timeRemaining:t,dateStarted:s,workDescription:n}}=this.props;return(a.a.createElement(a.a.Fragment,null,a.a.createElement(le,null,a.a.createElement(ue,null,a.a.createElement(ke,{value:e,isDisabled:this.props.isDisabled,isValid:this.props.isTimeLoggedValid,onChange:this.props.onTimeLoggedChange,onBlur:this.props.onTimeLoggedBlur,intl:this.props.intl})," "),a.a.createElement(ue,null,a.a.createElement(we,{value:t,isDisabled:this.props.isDisabled,isValid:this.props.isTimeRemainingValid,onChange:this.props.onTimeRemainingChange,onBlur:this.props.onTimeRemainingBlur,intl:this.props.intl}))),!this.props.isCollapsed&&a.a.createElement(a.a.Fragment,null,a.a.createElement(de,null,a.a.createElement(j.FormattedMessage,{id:"issue.log-time.modal.date-started",defaultMessage:"Date started"},e=>a.a.createElement(ee.a,{label:String(e),isRequired:!0})),a.a.createElement(se.a,{value:s||null,timeZone:this.props.timeZone,parseValue:te.b,onChange:this.onDateStartedChange,isDisabled:this.props.isDisabled})),a.a.createElement(ce,{defaultValue:n,isDisabled:this.props.isDisabled,portalElement:this.props.portalElement,onChange:this.props.onWorkDescriptionChange,onChangeFailure:this.props.onWorkDescriptionChangeFailure,externalId:this.props.externalId,baseUrl:this.props.baseUrl,mediaContext:this.props.mediaContext,mentionProvider:this.props.mentionProvider,mentionEncoder:this.props.mentionEncoder,activityProvider:this.props.activityProvider}))))}}Se.displayName="LogTimeModalForm",Se.defaultProps={portalElement:void 0};var Ie=Object(j.injectIntl)(Se),Ce=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),s("./node_modules/@atlaskit/checkbox/dist/es2019/Checkbox.js")),Te=s("./src/packages/platform/controllers/intl/src/index.js"),Pe=s("./src/packages/issue/fields/original-estimate/src/ui/view/main.js"),_e=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics-component.js"),xe=s("./src/packages/issue/issue-view/src/common/component/logged-time/view.js"),De=Object(j.defineMessages)({includeSubtasksLabel:{id:"issue.log-time-modal.include-subtasks",defaultMessage:"Include subtasks"},includeChildIssueLabel:{id:"issue.log-time-modal.include-child-issues",defaultMessage:"Include child issues"}}),Ae=s("./node_modules/@atlaskit/theme/dist/es2019/index.js");const Me=$.default.p(["margin-top:","px;"],2*q.e),Le=$.default.div(["margin-left:-","px;padding-top:","px;& > label > span{color:",";}"],q.e/2,q.e,Ae.a.N500);var Re=e=>{const{config:t,value:s,isDone:i,estimatedTime:r,shouldDisplayRollUpDataControl:o,isRollingUpData:c,onToggleRollingUpData:l,isClassicProject:u}=e,{formatMessage:d}=Object(Te.c)(),p=Object(n.useCallback)(e=>{const{daysPerWeek:s,hoursPerDay:n}=t,i=u?()=>a.a.createElement(j.FormattedMessage,{id:"issue.log-time.modal.original-estimate.with-rollup-subtasks",defaultMessage:"The original estimate for this issue and subtasks was {time}.",values:{time:a.a.createElement(Pe.a,{value:Object(U.a)(s,n)(e)})}}):()=>a.a.createElement(j.FormattedMessage,{id:"issue.log-time.modal.original-estimate.with-rollup-child-issues",defaultMessage:"The original estimate for this issue and child issues was {time}.",values:{time:a.a.createElement(Pe.a,{value:Object(U.a)(s,n)(e)})}});return(a.a.createElement(Me,null,c&&o?a.a.createElement(i,null):a.a.createElement(j.FormattedMessage,{id:"issue.log-time.modal.original-estimate",defaultMessage:"The original estimate for this issue was {time}.",values:{time:a.a.createElement(Pe.a,{value:Object(U.a)(s,n)(e)})}})))},[t,u,c,o]),m=Object(n.useCallback)(()=>a.a.createElement(Le,null,a.a.createElement(Ce.a,{isChecked:c,onChange:({target:{checked:e}},t)=>{l(e,t)},label:d(u?De.includeSubtasksLabel:De.includeChildIssueLabel),name:"roll-up-time-tracking-toggle-from-dialog"}),a.a.createElement(_e.a,{action:"exposed",actionSubject:"feature",actionSubjectId:"toggleRollUpDataControlFromWorklogDialog"})),[d,u,c,l]);return a.a.createElement(a.a.Fragment,null,a.a.createElement(xe.a,{config:t,value:s,estimatedTime:r,isDone:i,isCompact:!1}),o&&m(),"number"==typeof r?p(r):null)};class Ne extends n.Component{constructor(...e){super(...e),this.state={containerRef:void 0},this.setContainerRef=e=>{this.state.containerRef||this.setState({containerRef:e})},this.renderHeader=()=>a.a.createElement("h3",null,this.props.header),this.renderFooter=()=>a.a.createElement(X,{formState:this.props.formState,onConfirm:this.props.onSubmit,onCancel:this.props.onCancel})}secondsToTimeString(e){const{daysPerWeek:t,hoursPerDay:s}=this.props.config;return Object(U.a)(t,s)(e)}timeStringToSeconds(e){const{daysPerWeek:t,hoursPerDay:s}=this.props.config;return Object(F.a)(t,s)(e)}renderProgressTracker(){const{progressTrackerValue:e,progressTrackerValue:{loggedTime:t,remainingTime:s},estimatedTime:n,rolledUpEstimatedTime:i,config:r,isDone:o,shouldDisplayRollUpDataControl:c,isRollingUpData:l,onToggleRollingUpData:u,isClassicProject:d}=this.props;return void 0===t&&void 0===s&&void 0===n&&!1===c?null:a.a.createElement(Re,{config:r,value:e,estimatedTime:l?i:n,isDone:o,shouldDisplayRollUpDataControl:c,isRollingUpData:l,onToggleRollingUpData:u,isClassicProject:d})}renderForm(){return a.a.createElement(Ie,{value:this.props.value,isCollapsed:this.props.isCollapsed,isDisabled:"submitting"===this.props.formState,isTimeLoggedValid:this.props.isTimeLoggedValid,onTimeLoggedBlur:this.props.onTimeLoggedBlur,isTimeRemainingValid:this.props.isTimeRemainingValid,onTimeRemainingBlur:this.props.onTimeRemainingBlur,timeZone:this.props.timeZone,portalElement:this.state.containerRef,onTimeLoggedChange:this.props.onTimeLoggedChange,onTimeRemainingChange:this.props.onTimeRemainingChange,onDateStartedChange:this.props.onDateStartedChange,onWorkDescriptionChange:this.props.onWorkDescriptionChange,onWorkDescriptionChangeFailure:this.props.onWorkDescriptionChangeFailure,baseUrl:this.props.baseUrl,mediaContext:this.props.mediaContext,mentionEncoder:this.props.mentionEncoder,mentionProvider:this.props.mentionProvider,activityProvider:this.props.activityProvider,externalId:this.props.externalId})}render(){return a.a.createElement(B.a,{header:this.renderHeader,footer:this.renderFooter,isOpen:!0,width:"small",onDialogDismissed:this.props.onCancel},a.a.createElement(K.a,{onEscape:this.props.onCancel},a.a.createElement("div",{ref:this.setContainerRef,"data-testid":"issue.issue-view.common.log-time-modal-dialog.contents"},this.renderProgressTracker(),this.renderForm())))}}Ne.displayName="LogTimeModal",Ne.defaultProps={isDone:!1,progressTrackerValue:{},estimatedTime:void 0};var Ue=s("./src/packages/issue/issue-view/src/common/component/log-time-modal/modal/utils/index.js");function Fe(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Ve(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Fe(Object(s),!0).forEach((function(t){Ke(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Fe(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Ke(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class Be extends n.Component{constructor(e){super(e),this.onTimeLoggedBlur=()=>{this.applyDefaultTimeFormat(this.state.value.timeLogged,this.onTimeLoggedChange)},this.onTimeRemainingBlur=()=>{this.applyDefaultTimeFormat(this.state.value.timeRemaining,this.onTimeRemainingChange)},this.onTimeLoggedChange=e=>{const t=N(e);if(this.setState(({value:s})=>({value:Ve(Ve({},s),{},{timeLogged:e}),hasUserInteracted:!0,isTimeLoggedValid:t})),t&&this.props.initialValue.timeRemaining){const t=(this.timeStringToSeconds(e)||0)-(this.timeStringToSeconds(this.props.initialValue.timeLogged)||0),s=(this.timeStringToSeconds(this.props.initialValue.timeRemaining)||0)-t,n=this.secondsToTimeString(s);this.setState(({value:e})=>({value:Ve(Ve({},e),{},{timeRemaining:n}),isTimeRemainingValid:!0}))}},this.onTimeRemainingChange=e=>{this.setState(({value:t})=>({value:Ve(Ve({},t),{},{timeRemaining:e}),hasUserInteracted:!0,isTimeRemainingValid:N(e)}))},this.onDateStartedChange=e=>{this.setState(({value:t})=>({value:Ve(Ve({},t),{},{dateStarted:e}),defaultDateStarted:null,hasUserInteracted:!0}))},this.onWorkDescriptionChange=e=>{this.setState(({value:t})=>({value:Ve(Ve({},t),{},{workDescription:e}),hasUserInteracted:!0}))},this.onSubmit=(e,t)=>{const{value:{workDescription:s}}=this.state,n="string"!=typeof this.state.value.workDescription?Object(A.i)(s):s,a=Ve(Ve({},this.getValue()),{},{workDescription:n});this.props.onSubmit(a,t)},this.applyDefaultTimeFormat=(e,t)=>{let s=e.trim();if(Object(V.a)(s)){const{defaultUnit:e}=this.props.config;s=`${s}${Object(Ue.a)(e)}`}s!==e&&t(s)},this.state={value:e.initialValue,defaultDateStarted:Date.now(),isTimeLoggedValid:!0,isTimeRemainingValid:!0,hasUserInteracted:!1}}getIsCollapsed(){return this.props.isCollapsible&&!this.state.value.timeLogged}getDateStarted(){const{defaultDateStarted:e,value:{dateStarted:t,timeLogged:s}}=this.state;if(!this.props.shouldUpdateDate||t)return t;if(!e)return null;const n=this.timeStringToSeconds(s)||0;try{return new Date(e-1e3*n).toISOString()}catch(a){return new Date(e).toISOString()}}getValue(){return Ve(Ve({},this.state.value),{},{dateStarted:this.getDateStarted()})}getFormState(){return this.props.isWaiting?"submitting":this.state.hasUserInteracted&&this.props.validator(this.getValue())?"valid":"invalid"}getProgressTrackerValue(){const{value:{timeLogged:e,timeRemaining:t}}=this.state,{initialValue:s,isRollingUpData:n}=this.props,a=n?this.props.rolledUpTimeTracking:this.props.timeTracking,i=(this.timeStringToSeconds(e)||0)-(this.timeStringToSeconds(s.timeLogged)||0),r=i||a.loggedTime?(i||0)+(a.loggedTime||0):void 0,o=this.timeStringToSeconds(t),c=(o||0)-(this.timeStringToSeconds(s.timeRemaining)||0),l="number"==typeof o;let{remainingTime:u}=a;return l&&(u=n?(a.remainingTime||0)+c:o||0),{loggedTime:r,remainingTime:u}}secondsToTimeString(e){const{daysPerWeek:t,hoursPerDay:s}=this.props.config;return Object(U.a)(t,s)(e)}timeStringToSeconds(e){const{daysPerWeek:t,hoursPerDay:s}=this.props.config;return Object(F.a)(t,s)(e)}render(){return a.a.createElement(Ne,{value:this.getValue(),progressTrackerValue:this.getProgressTrackerValue(),estimatedTime:this.props.estimatedTime,rolledUpEstimatedTime:this.props.rolledUpEstimatedTime,config:this.props.config,header:this.props.header,formState:this.getFormState(),timeZone:this.props.timeZone,isCollapsed:this.getIsCollapsed(),isDone:this.props.isDone,isTimeLoggedValid:this.state.isTimeLoggedValid,isTimeRemainingValid:this.state.isTimeRemainingValid,onSubmit:this.onSubmit,onCancel:this.props.onCancel,onTimeLoggedChange:this.onTimeLoggedChange,onTimeLoggedBlur:this.onTimeLoggedBlur,onTimeRemainingChange:this.onTimeRemainingChange,onTimeRemainingBlur:this.onTimeRemainingBlur,onDateStartedChange:this.onDateStartedChange,onWorkDescriptionChange:this.onWorkDescriptionChange,onWorkDescriptionChangeFailure:this.props.onWorkDescriptionChangeFailure,baseUrl:this.props.baseUrl,mediaContext:this.props.mediaContext,mentionProvider:this.props.mentionProvider,mentionEncoder:this.props.mentionEncoder,activityProvider:this.props.activityProvider,externalId:this.props.externalId,shouldDisplayRollUpDataControl:this.props.shouldDisplayRollUpDataControl,isRollingUpData:this.props.isRollingUpData,onToggleRollingUpData:this.props.onToggleRollingUpData,isClassicProject:this.props.isClassicProject})}}Be.displayName="LogTimeModalWithValidation",Be.defaultProps={isCollapsible:!1,isDone:!1,isWaiting:!1,shouldUpdateDate:!1};const We=Object(E.a)({onSubmit:"clicked",onCancel:"clicked",onToggleRollingUpData:"toggleRollingUpData"})(Object(v.b)("worklogModal")(Be));var He,Ge=e=>a.a.createElement(M.a,{id:"issue.issue-view.common.worklog-dialog"},a.a.createElement(L.a,{id:"common.worklog-dialog",packageName:"jiraIssueView",sendToPrivacyUnsafeSplunk:!0},a.a.createElement(We,e))),$e=Object(j.defineMessages)({title:{id:"issue.activity.worklog.add-modal.title",defaultMessage:"Time tracking"}});const qe=({timeLogged:e,timeRemaining:t,dateStarted:s})=>(!!e||!!t)&&(N(e)||"0"===e)&&N(t)&&!!s;let ze=Object(v.a)("addWorklog",D.a.MODAL)(He=class extends n.Component{render(){const{timeTracking:e,rolledUpTimeTracking:t,timeTrackingConfiguration:s,intl:n}=this.props,{timeSpentSeconds:i,remainingEstimateSeconds:r,originalEstimateSeconds:c}=e,{daysPerWeek:l,hoursPerDay:u}=s,d={timeLogged:"",timeRemaining:"number"==typeof r?Object(U.a)(l,u)(r):"",workDescription:A.c,dateStarted:null},p={loggedTime:i,remainingTime:r};return a.a.createElement(a.a.Fragment,null,a.a.createElement(Ge,{initialValue:d,timeTracking:p,rolledUpTimeTracking:{loggedTime:t.timeSpentSeconds,remainingTime:t.remainingEstimateSeconds},estimatedTime:c,rolledUpEstimatedTime:t.originalEstimateSeconds,config:s,header:n.formatMessage($e.title),timeZone:this.props.timeZone,isCollapsible:!0,isDone:this.props.isDone,isWaiting:this.props.isSaving,shouldUpdateDate:!0,validator:qe,onSubmit:this.props.onSubmit,onCancel:this.props.onCancel,onWorkDescriptionChangeFailure:o.a,baseUrl:this.props.baseUrl,mediaContext:this.props.mediaContext,mentionProvider:this.props.mentionProvider||{},mentionEncoder:this.props.mentionEncoder||o.a,activityProvider:this.props.activityProvider,externalId:this.props.externalId,shouldDisplayRollUpDataControl:this.props.shouldDisplayRollUpDataControl,isRollingUpData:this.props.isRollingUpData,onToggleRollingUpData:this.props.onToggleRollingUpData,isClassicProject:this.props.isClassicProject}),a.a.createElement(m.a,null))}})||He;function Ye(){return(Ye=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Qe(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const Je=e=>{const{timeTrackingValue:t,rolledUpTimeTrackingValue:s}=e,i=Qe(e,["timeTrackingValue","rolledUpTimeTrackingValue"]),[r,{markRollingUpData:o,unmarkRollingUpData:c}]=Object(k.a)(),l=Object(n.useCallback)(e=>{e?o():c()},[o,c]);return a.a.createElement(ze,Ye({},i,{timeTracking:t,rolledUpTimeTracking:s,isRollingUpData:r,onToggleRollingUpData:l}))};Je.displayName="WrappedWorklogModal";const Ze=Object(j.injectIntl)(Object(E.a)({onSubmit:"submitAddWorklog",onCancel:"cancelAddWorklog"})(Object(v.b)("worklog")(Je)));var Xe=Object(i.b)(e=>({timeTrackingConfiguration:Object(_.h)(e),rolledUpTimeTrackingValue:Object(_.j)(e)(!0),timeTrackingValue:Object(_.i)(e),timeZone:Object(T.A)(e),isDone:"DONE"===Object(x.b)(e),isSaving:Object(_.e)(e),baseUrl:Object(C.g)(e),mediaContext:Object(P.a)(e),mentionEncoder:Object(S.a)(Object(C.g)(e)),mentionProvider:Object(I.a)(e),shouldDisplayRollUpDataControl:Object(_.c)(e),isClassicProject:Object(T.m)(e)}),e=>({onSubmit:(t,s)=>{const{timeLogged:n,timeRemaining:a}=t||{};e(!n&&a?Object(w.K)(a,s):Object(w.m)(t,s))},onCancel:()=>{e(Object(w.o)())}}))(Ze),et=s("./node_modules/lodash/flow.js"),tt=s.n(et),st=s("./src/packages/issue/issue-view/src/activity/worklog/state/selectors.js"),nt=s("./node_modules/@atlaskit/icon/glyph/arrow-right.js"),at=s.n(nt),it=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/confirmation-modal/index.js"),rt=Object(j.defineMessages)({delete:{id:"issue.activity.worklog.delete-modal.delete",defaultMessage:"Delete"},deleteHeading:{id:"issue.activity.worklog.delete-modal.delete-heading",defaultMessage:"Delete worklog entry?"},cancel:{id:"issue.activity.worklog.delete-modal.cancel",defaultMessage:"Cancel"},deleteWarning:{id:"issue.activity.worklog.delete-modal.delete-warning",defaultMessage:"Once you delete, it's gone for good."},adjustCheckboxLabel:{id:"issue.activity.worklog.delete-modal.adjust-checkbox-label",defaultMessage:"Adjust time remaining"},adjustCurrentLabel:{id:"issue.activity.worklog.delete-modal.adjust-current-label",defaultMessage:"Current"},adjustNewLabel:{id:"issue.activity.worklog.delete-modal.adjust-new-label",defaultMessage:"New time remaining"},adjustNewSubtext:{id:"issue.activity.worklog.delete-modal.adjust-new-subtext",defaultMessage:"By default, deleted time ({timeSpent}) is added to the time remaining."}});const ot=$.default.div(["display:flex;margin-top:-","px;"],3*q.e),ct=$.default.div(["display:flex;flex-direction:column;align-items:center;max-width:","px;"],11*q.e),lt=$.default.div(["color:#6b778c;font-size:","px;font-weight:600;line-height:1.3333333333333333;padding:","px 0 ","px 0;"],3*q.e/2,5*q.e/2,q.e/2),ut=$.default.div(["text-align:center;padding:","px;"],1.25*q.e),dt=$.default.div(["margin:","px ","px ","px ","px;"],6*q.e,2*q.e,6*q.e,q.e),pt=$.default.div(["margin:","px 0 ","px -","px;"],2*q.e,2*q.e,.5*q.e),mt=$.default.div(["width:50%;"]),bt=$.default.div(["font-size:","px;margin-top:","px;color:",";"],1.25*q.e,q.e/2,Ae.a.N90);var ft;let gt=Object(v.a)("deleteWorklog",D.a.MODAL)(ft=class extends n.Component{constructor(...e){super(...e),this.secondsToTimeString=Object(U.a)(this.props.timeTrackingConfig.daysPerWeek,this.props.timeTrackingConfig.hoursPerDay),this.timeStringToSeconds=Object(F.a)(this.props.timeTrackingConfig.daysPerWeek,this.props.timeTrackingConfig.hoursPerDay),this.state={isAdjustTimeRemainingChecked:!0,timeRemaining:this.secondsToTimeString(this.props.timeRemainingSeconds+this.timeStringToSeconds(this.props.worklog.timeSpent))},this.onTimeRemainingChange=e=>this.setState({timeRemaining:e.target.value}),this.onCheckboxChange=()=>this.setState({isAdjustTimeRemainingChecked:!this.state.isAdjustTimeRemainingChecked}),this.onConfirm=(e,t)=>this.props.onConfirm(this.state.isAdjustTimeRemainingChecked?this.state.timeRemaining:this.secondsToTimeString(this.props.timeRemainingSeconds),this.state.isAdjustTimeRemainingChecked,t),this.originalTimeRemaining=this.secondsToTimeString(this.props.timeRemainingSeconds)}renderTimeRemainingInput(e){const{isDeleting:t,intl:{formatMessage:s}}=this.props,{timeRemaining:n}=this.state;return a.a.createElement(me,{isValid:e},e=>a.a.createElement(be.a,{value:n,isInvalid:e,invalidMessage:e?pe.b:void 0,onChange:this.onTimeRemainingChange,label:s(rt.adjustNewLabel),placeholder:s(pe.a.timeInputPlaceholder),disabled:t,required:!0,shouldFitContainer:!0}))}renderContent(e){const{isDeleting:t,worklog:{timeSpent:s},intl:{formatMessage:n}}=this.props,{isAdjustTimeRemainingChecked:i}=this.state;return a.a.createElement(a.a.Fragment,null,a.a.createElement("p",null,n(rt.deleteWarning)),a.a.createElement(pt,null,a.a.createElement(Ce.a,{isChecked:i,isDisabled:t,onChange:this.onCheckboxChange,label:n(rt.adjustCheckboxLabel),name:"adjust-checkbox"})),i&&a.a.createElement(ot,null,a.a.createElement(ct,null,a.a.createElement(lt,null,n(rt.adjustCurrentLabel)),a.a.createElement(ut,null,this.originalTimeRemaining)),a.a.createElement(dt,null,a.a.createElement(at.a,null)),a.a.createElement(mt,null,this.renderTimeRemainingInput(e),a.a.createElement(bt,null,n(rt.adjustNewSubtext,{timeSpent:s})))))}render(){const{isDeleting:e,onCancel:t,intl:{formatMessage:s}}=this.props,{timeRemaining:n,isAdjustTimeRemainingChecked:i}=this.state,r=Object(R.a)(n);return a.a.createElement(it.b,{headerMessage:s(rt.deleteHeading),appearance:"danger",contentMessage:this.renderContent(r),confirmActionText:s(rt.delete),cancelActionText:s(rt.cancel),onConfirm:this.onConfirm,onCancel:t,isLoading:e,isConfirmDisabled:e||i&&!r,isCancelDisabled:e,externalId:"issue.activity.worklog.delete-modal"},a.a.createElement(m.a,null))}})||ft;function ht(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function yt(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ht(Object(s),!0).forEach((function(t){Ot(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ht(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Ot(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var jt,Et=tt()(Object(v.b)("worklog"),Object(E.a)({onConfirm:"confirmDeleteWorklog",onCancel:"cancelDeleteWorklog"}),j.injectIntl,Object(i.b)(e=>({isDeleting:Object(_.e)(e),worklog:Object(_.a)(e),timeTrackingConfig:Object(_.h)(e),timeRemainingSeconds:Object(st.c)(e)}),{dispatchDeleteWorklog:w.q,onCancel:w.o},(e,{dispatchDeleteWorklog:t,onCancel:s})=>yt(yt({},e),{},{onCancel:s,onConfirm:(s,n,a)=>{e.worklog&&t(e.worklog.id,s,n,a)}})))(gt),vt=Object(j.defineMessages)({title:{id:"issue.activity.worklog.edit-modal.title",defaultMessage:"Edit work log"}});const kt=()=>({timeLogged:e,timeRemaining:t,dateStarted:s})=>(Object(R.a)(e)||"0"===e)&&N(t)&&!!s;let wt=Object(v.a)("editWorklog",D.a.MODAL)(jt=class extends n.Component{constructor(...e){super(...e),this.onSubmit=(e,t)=>{const{worklog:s}=this.props;s&&this.props.onSubmit(s.id,e,t)}}render(){const{worklog:e,timeTracking:t,rolledUpTimeTracking:s,timeTrackingConfiguration:n,intl:i}=this.props;if(!e)return null;const{timeSpentSeconds:r,remainingEstimateSeconds:c,originalEstimateSeconds:l}=t,{daysPerWeek:u,hoursPerDay:d}=n,p={timeLogged:e.timeSpent,timeRemaining:"number"==typeof c?Object(U.a)(u,d)(c):"",dateStarted:new Date(e.started).toISOString(),workDescription:e.comment||A.c},b={loggedTime:r,remainingTime:c};return a.a.createElement(a.a.Fragment,null,a.a.createElement(Ge,{initialValue:p,timeTracking:b,rolledUpTimeTracking:{loggedTime:s.timeSpentSeconds,remainingTime:s.remainingEstimateSeconds},estimatedTime:l,rolledUpEstimatedTime:s.originalEstimateSeconds,config:n,header:i.formatMessage(vt.title),timeZone:this.props.timeZone,isCollapsible:!1,isDone:this.props.isDone,isWaiting:this.props.isSaving,shouldUpdateDate:!1,validator:kt(),onSubmit:this.onSubmit,onCancel:this.props.onCancel,onWorkDescriptionChangeFailure:o.a,baseUrl:this.props.baseUrl,mediaContext:this.props.mediaContext,mentionProvider:this.props.mentionProvider||{},mentionEncoder:this.props.mentionEncoder||o.a,activityProvider:this.props.activityProvider,externalId:this.props.externalId,shouldDisplayRollUpDataControl:this.props.shouldDisplayRollUpDataControl,isRollingUpData:this.props.isRollingUpData,onToggleRollingUpData:this.props.onToggleRollingUpData,isClassicProject:this.props.isClassicProject}),a.a.createElement(m.a,null))}})||jt;function St(){return(St=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function It(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const Ct=e=>{const{timeTrackingValue:t,rolledUpTimeTrackingValue:s}=e,i=It(e,["timeTrackingValue","rolledUpTimeTrackingValue"]),[r,{markRollingUpData:o,unmarkRollingUpData:c}]=Object(k.a)(),l=Object(n.useCallback)(e=>{e?o():c()},[o,c]);return a.a.createElement(wt,St({},i,{timeTracking:t,rolledUpTimeTracking:s,isRollingUpData:r,onToggleRollingUpData:l}))};Ct.displayName="WrappedWorklogModal";const Tt=Object(j.injectIntl)(Object(E.a)({onSubmit:"submitEditWorklog",onCancel:"cancelEditWorklog"})(Object(v.b)("worklog")(Ct)));var Pt=Object(i.b)(e=>({worklog:Object(_.a)(e),timeTrackingConfiguration:Object(_.h)(e),rolledUpTimeTrackingValue:Object(_.j)(e)(!0),timeTrackingValue:Object(_.i)(e),timeZone:Object(T.A)(e),isDone:"DONE"===Object(x.b)(e),isSaving:Object(_.e)(e),baseUrl:Object(C.g)(e),mediaContext:Object(P.a)(e),mentionEncoder:Object(S.a)(Object(C.g)(e)),mentionProvider:Object(I.a)(e),shouldDisplayRollUpDataControl:Object(_.c)(e),isClassicProject:Object(T.m)(e)}),e=>({onSubmit:(t,s,n)=>{e(Object(w.u)(t,s,n))},onCancel:()=>{e(Object(w.o)())}}))(Tt),_t=s("./src/packages/issue/issue-view/src/common/actions/issue-fetch-actions.js"),xt=s("./node_modules/react-resource-router/build/esm/index.js"),Dt=s("./src/packages/platform/services/bento-transition-check/src/utils/index.js"),At=s("./src/packages/platform/services/bento-transition-check/src/components/index.js"),Mt=s("./src/packages/platform/controllers/spa-state/src/components/transition-state/index.js"),Lt=s("./src/packages/platform/services/bento-transition-check/src/types.js"),Rt=s("./src/packages/platform/controllers/spa-state/src/common/index.js"),Nt=s("./src/packages/issue/issue-view/src/common/metrics/index.js");class Ut extends n.Component{constructor(...e){super(...e),this.hasErrored=!1,this.endOfCriticalPath=void 0,this.errorOnCriticalPath=void 0,this.hasSubmittedMetrics=!1,this.timestampRecievedWhileOptimisticCheckIsPending=void 0,this.spaState=void 0}componentDidMount(){const{isPreview:e,isComplete:t,metrics:s,bentoTransitionCheck:n,lastTransitionStartTime:a,hasBentoEnabledCheck:i,isInitialRender:r}=this.props;this.hasErrored||((e||t)&&s.onPreviewRendered({isInitialRender:r,lastTransitionStartTime:a}),t&&(s.onInteractive({lastTransitionStartTime:a}),this.endOfCriticalPath&&this.endOfCriticalPath(),!i||r?this.submitMetrics():n===Lt.a.ALLOW&&this.submitMetrics(a)))}componentDidUpdate(e){const{error:t,metrics:s,isLoading:n,lastTransitionStartTime:a,issueKey:i,hasBentoEnabledCheck:r,isInitialRender:o}=this.props;t&&(this.hasErrored=!0,this.errorOnCriticalPath&&this.errorOnCriticalPath()),this.resetSubmissionStateIfNewView(n,e,i),this.hasErrored||((this.isPreviewModeAfterBentoSpaTransition(e)||this.didBentoMoveOutOfLoadingState(e))&&s.onPreviewRendered({isInitialRender:o,lastTransitionStartTime:a}),(this.didJustMoveToComplete(e)||this.isFirstLoadOfRecentIssue(e))&&(s.onInteractive({lastTransitionStartTime:a}),this.endOfCriticalPath&&this.endOfCriticalPath()),this.props.isComplete&&!this.hasSubmittedMetrics&&(!r||o?this.submitMetrics():this.hasSpaBentoCheckCompleted()&&this.submitMetrics(a)))}setTimestampRecievedWhileOptimisticCheckIsPending(e,t){e&&t!==Lt.a.INITIAL||(this.timestampRecievedWhileOptimisticCheckIsPending=this.props.lastTransitionStartTime)}hasSpaBentoCheckCompleted(){return this.checkIsBentoCompletedWithPageResetHistoryBlocker()}checkIsBentoCompletedWithPageResetHistoryBlocker(){return this.props.hasBentoEnabledCheck&&this.props.bentoTransitionCheck===Lt.a.ALLOW}checkIsBentoCompletedWithOutPageResetHistoryBlocker(){return this.props.hasBentoEnabledCheck&&this.props.bentoTransitionCheck===Lt.a.ALLOW&&this.isTimestampFromAfterPending()}isFirstLoadOfRecentIssue(e){return this.props.issueKey!==e.issueKey&&this.props.isComplete}resetSubmissionStateIfNewView(e,t,s){(e&&!t.isLoading||s!==t.issueKey)&&(this.hasSubmittedMetrics=!1)}isTimestampFromAfterPending(){return this.timestampRecievedWhileOptimisticCheckIsPending!==this.props.lastTransitionStartTime}submitMetrics(e){this.props.isInitialRender||!e?Object(Nt.j)():Object(Nt.j)(e,this.spaState),this.hasSubmittedMetrics=!0,this.timestampRecievedWhileOptimisticCheckIsPending=null}didBentoMoveOutOfLoadingState(e){const{isPreview:t,isComplete:s}=this.props;return e.isLoading&&(t||s)}isPreviewModeAfterBentoSpaTransition(e){const{isPreview:t,issueKey:s}=this.props;return e.issueKey!==s&&t}didJustMoveToComplete(e){const{isComplete:t}=this.props;return t&&!e.isComplete}render(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(Rt.a,null,(e,{setAppReady:t,setAppErrorReady:s})=>(this.endOfCriticalPath=t,this.errorOnCriticalPath=s,this.spaState=e,null)))}}Ut.displayName="BentoMetrics";var Ft=Ut;function Vt(){return(Vt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const Kt=e=>null!=e?e-performance.timing.navigationStart:e,Bt=e=>{const[{isTransitionCurrentlyAllowed:t}]=Object(At.b)(),[{isInitialRender:s,lastTransitionStartTime:n}]=Object(Mt.b)();return a.a.createElement(xt.f,null,({route:i})=>a.a.createElement(Ft,Vt({},e,{bentoTransitionCheck:t,isInitialRender:s,lastTransitionStartTime:Kt(n),hasBentoEnabledCheck:!!i&&Object(Dt.a)(i)})))};Bt.displayName="BentoMetricsWithSpaTimingInfo";var Wt=Bt,Ht=s("./src/packages/issue/issue-view/src/common/metrics/context/index.js");function Gt(){return(Gt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}var $t=s("./src/packages/issue/issue-view/src/common/util/flow-with-safe-component/index.js"),qt=s("./src/packages/issue/issue-view/src/feature-flags.js"),zt=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/hierarchy-level-selector.js"),Yt=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/security-level-selector.js"),Qt=s("./src/packages/issue/issue-view/src/selectors/analytics-payload-selector.js"),Jt=s("./src/packages/issue/issue-view/src/utils/is-valid-experience-error.js"),Zt=s("./src/packages/common-legacy-do-not-add-anything-new/src/experience-tracking/viewing/index.js"),Xt=s("./src/packages/issue/issue-view/src/views/common/issue-page-grid/index.js"),es=s("./src/packages/issue/issue-view/src/views/common/skeleton/skeleton-view.js"),ts=s("./src/packages/issue/issue-view/src/views/common/with-compact-mode/index.js"),ss=s("./node_modules/lodash/find.js"),ns=s.n(ss),as=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/with-analytics.js"),is=s("./src/packages/platform/observability/analytics-web-react/src/utils/component-with-analytics.js"),rs=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/op-triggers/on-mount-and-update/index.js"),os=s("./src/packages/platform/ui/flags/src/index.js");var cs=s("./src/packages/issue/issue-view/src/actions/issue-delete-actions.js"),ls=s("./src/packages/issue/issue-view/src/common/util/safe-component/index.js"),us=s("./node_modules/@atlaskit/icon/glyph/editor/error.js"),ds=s.n(us),ps=s("./node_modules/@atlaskit/icon/glyph/editor/success.js"),ms=s.n(ps),bs=s("./src/packages/issue/issue-view/src/common/constants/flags.js");const fs=$.default.span(["color:",";"],e=>e.color),gs=a.a.createElement(fs,{size:"medium",color:Ae.a.R300},a.a.createElement(ds.a,{label:""})),hs=a.a.createElement(fs,{size:"medium",color:Ae.a.G300},a.a.createElement(ms.a,{label:""})),ys={[bs.j]:{messages:Object(j.defineMessages)({title:{id:"issue.generic-server-error-when-adding-comment-title",defaultMessage:"Comment could not be updated"},description:{id:"issue.generic-server-error-when-adding-comment-description",defaultMessage:"There was a connection problem and your comment was not successfully updated. Check your network before trying to update or add another comment."}}),icon:gs,type:"error"},[bs.k]:{messages:Object(j.defineMessages)({title:{id:"issue.server-validation-error-when-adding-comment-title",defaultMessage:"We couldn't save your comment"},description:{id:"issue.server-validation-error-when-adding-comment-description",defaultMessage:"It might be empty or have invalid formatting. If you copy-pasted, try removing the formatting and adding it directly in the editor."}}),icon:gs,type:"error"},[bs.l]:{messages:Object(j.defineMessages)({title:{id:"issue.content-exceeded-error-when-adding-comment-title",defaultMessage:"We couldn't save your comment"},description:{id:"issue.content-exceeded-error-when-adding-comment-description",defaultMessage:"The comment is too long. Try reducing its length, splitting it, or attaching a file to the issue."}}),icon:gs,type:"error"},[bs.m]:{messages:Object(j.defineMessages)({title:{id:"issue.server-error-when-deleting-comment-title",defaultMessage:"Comment could not be deleted"},description:{id:"issue.server-error-when-deleting-comment-description",defaultMessage:"There was a connection problem and the comment was not successfully deleted. Try checking your network connection."}}),icon:gs,type:"error"},[bs.u]:{messages:Object(j.defineMessages)({title:{id:"issue.error-when-retrieving-editor-value-title",defaultMessage:"The text editor failed"},description:{id:"issue.error-when-retrieving-editor-value-description",defaultMessage:"Retry your last action, or refresh the page."}}),icon:gs,type:"error"},[bs.H]:{messages:Object(j.defineMessages)({title:{id:"issue.error-when-confirming-rich-text-field-value-title",defaultMessage:"We couldn't save your content"},description:{id:"issue.error-when-confirming-rich-text-field-value-description",defaultMessage:"It may contain formatting we don\u2019t recognize. Try removing the formatting before saving."}}),icon:gs,type:"error"},[bs.I]:{messages:Object(j.defineMessages)({title:{id:"issue.error-when-confirming-rich-text-field-value-title",defaultMessage:"We couldn't save your content"},description:{id:"issue.error-when-confirming-rich-text-field-value-description-maximum-length-exceeded",defaultMessage:"It's too long for the field. Try attaching a file or page to the issue, or adding part of the content as comments."}}),icon:gs,type:"error"},[bs.J]:{messages:Object(j.defineMessages)({title:{id:"issue.error-when-saving-empty-required-rich-text-field-title",defaultMessage:"We couldn't save your content"},description:{id:"issue.error-when-saving-empty-required-rich-text-field",defaultMessage:"This field is required and cannot be empty."}}),icon:gs,type:"error"},[bs.e]:{messages:Object(j.defineMessages)({title:{id:"issue.error-when-adding-attachment-title",defaultMessage:"We couldn't save your attachment"},description:{id:"issue.error-when-adding-attachment-description",defaultMessage:"Reload the issue then try adding it again."}}),icon:gs,type:"error"},[bs.q]:{messages:Object(j.defineMessages)({title:{id:"issue.server-error-when-deleting-issue-link-title",defaultMessage:"We couldn't remove the issue link"},description:{id:"issue.server-error-when-deleting-issue-link-description",defaultMessage:"Try reloading the page and removing the issue link again."}}),icon:gs,type:"error"},[bs.f]:{messages:Object(j.defineMessages)({title:{id:"issue.server-error-when-deleting-attachment-title",defaultMessage:"Attachment could not be deleted"},description:{id:"issue.server-error-when-deleting-attachment-description",defaultMessage:"There was a connection problem and the attachment was not successfully deleted. Try checking your network connection."}}),icon:gs,type:"error"},[bs.Q]:{messages:Object(j.defineMessages)({title:{id:"issue.server-error-when-toggle-watch-title",defaultMessage:"We couldn't update your watch status"},description:{id:"issue.server-error-when-toggle-watch-description",defaultMessage:"Check your connection and try clicking watch again."}}),icon:gs,type:"error"},[bs.z]:{messages:Object(j.defineMessages)({title:{id:"issue.error-when-fetching-watchers-title",defaultMessage:"We couldn't load the watchers list"},description:{id:"issue.error-when-fetching-watchers-description",defaultMessage:"Check your connection, then give it another try."}}),icon:gs,type:"error"},[bs.M]:{messages:Object(j.defineMessages)({title:{id:"issue.start-watching-success-title",defaultMessage:"You're watching this issue"},description:{id:"issue.start-watching-success-description",defaultMessage:"We'll notify you when there's activity on it."}}),icon:hs,type:"success"},[bs.N]:{messages:Object(j.defineMessages)({title:{id:"issue.stop-watching-success-title",defaultMessage:"You stopped watching this issue"},description:{id:"issue.stop-watching-success-description",defaultMessage:"We won't notify you about activity on it."}}),icon:hs,type:"success"},[bs.G]:{messages:Object(j.defineMessages)({title:{id:"issue.error-when-removing-watcher-title",defaultMessage:"We couldn't remove that watcher"},description:{id:"issue.error-when-removing-watcher-description",defaultMessage:"Check your connection, then give it another try."}}),icon:gs,type:"error"},[bs.b]:{messages:Object(j.defineMessages)({title:{id:"issue.error-when-adding-watcher-title",defaultMessage:"We couldn't add that watcher"},description:{id:"issue.error-when-adding-watcher-description",defaultMessage:"Check your connection, then give it another try."}}),icon:gs,type:"error"},[bs.O]:{messages:Object(j.defineMessages)({title:{id:"issue.error-when-reordering-subtask",defaultMessage:"We couldn't reorder those subtasks"},description:{id:"issue.error-when-reordering-subtask-description",defaultMessage:"Wait a few moments, then give it another try."}}),icon:gs,type:"error"},[bs.A]:{messages:Object(j.defineMessages)({title:{id:"issue.server-error-when-add-flag-title",defaultMessage:"We couldn't flag this issue"},description:{id:"issue.server-error-when-add-flag-description",defaultMessage:"Check your connection and try adding the flag again."}}),icon:gs,type:"error"},[bs.B]:{messages:Object(j.defineMessages)({title:{id:"issue.server-error-when-remove-flag-title",defaultMessage:"We couldn't remove the flag from this issue"},description:{id:"issue.server-error-when-remove-flag-description",defaultMessage:"Check your connection and try removing the flag again."}}),icon:gs,type:"error"},[bs.D]:{messages:Object(j.defineMessages)({title:{id:"issue.server-error-when-logging-work-title",defaultMessage:"We couldn't add your time spent"},description:{id:"issue.server-error-when-logging-work-description",defaultMessage:"Check your connection, then give it another try."}}),icon:gs,type:"error"},[bs.d]:{messages:Object(j.defineMessages)({title:{id:"issue.assign-to-me-flag-title",defaultMessage:"Successfully assigned to you"},description:{id:"issue.assign-to-me-flag-description",defaultMessage:"You're now the assignee for {issueKey}."}}),icon:hs,type:"success",shouldAutoDismiss:!0},[bs.n]:{messages:Object(j.defineMessages)({title:{id:"issue.error-when-creating-child-issue-title",defaultMessage:"We couldn't create the child issue"},description:{id:"issue.error-when-creating-child-issue-description",defaultMessage:"Check your connection, then give it another try."}}),icon:gs,type:"error"},[bs.C]:{messages:Object(j.defineMessages)({title:{id:"issue.error-when-linking-child-issue-title",defaultMessage:"We couldn't link the child issue"},description:{id:"issue.error-when-linking-child-issue-description",defaultMessage:"The issue was created but the linking failed. Head over to your board and try again."}}),icon:gs,type:"error"},[bs.h]:{messages:Object(j.defineMessages)({title:{id:"change.issue.type.success.title",defaultMessage:"Issue type changed to {destType}"},description:{id:"change.issue.type.success.description",defaultMessage:"Issue type changed"}}),icon:hs,type:"success",shouldAutoDismiss:!0},[bs.g]:{messages:Object(j.defineMessages)({title:{id:"change.issue.type.error.title",defaultMessage:"Error changing issue type"},description:{id:"change.issue.type.error.description",defaultMessage:"There was an error changing the issue type. Please try again."}}),icon:gs,type:"error"},[bs.p]:{messages:Object(j.defineMessages)({title:{id:"issue.error-when-deleting-issue-title",defaultMessage:"We couldn't delete {issueKey}"},description:{id:"issue.error-when-deleting-issue-description",defaultMessage:"Check your connection, then give it another try."}}),icon:gs,type:"error",actions:[{messages:Object(j.defineMessages)({content:{id:"issue.error-when-deleting-issue-call-to-action",defaultMessage:"Try again"}}),onClick:({closeFlag:e,retryIssueDelete:t,deleteFailureIssueKey:s})=>{t&&null!=s&&""!==s&&t(s),e()}}]},[bs.x]:{messages:Object(j.defineMessages)({title:{id:"issue.activity.worklog.flags.edit-success-title",defaultMessage:"Work log entry updated"}}),icon:hs,type:"success",shouldAutoDismiss:!0},[bs.t]:{messages:Object(j.defineMessages)({title:{id:"issue.activity.worklog.flags.delete-success-title",defaultMessage:"Work log entry deleted"}}),icon:hs,type:"success",shouldAutoDismiss:!0},[bs.i]:{messages:Object(j.defineMessages)({title:{id:"issue.clickthrough-banner.flags.dismissed.title",defaultMessage:"Banner be gone!"},description:{id:"issue.clickthrough-banner.flags.dismissed.description",defaultMessage:"You can still open the old view through the \u2022\u2022\u2022 menu on an issue."}}),icon:hs,type:"success",shouldAutoDismiss:!0},[bs.c]:{messages:Object(j.defineMessages)({title:{id:"issue.activity.worklog.flags.add-failure-title",defaultMessage:"We couldn't save your changes"},description:{id:"issue.activity.worklog.flags.add-failure-description",defaultMessage:"Check your connection, then give it another try."}}),icon:gs,type:"error"},[bs.P]:{messages:Object(j.defineMessages)({title:{id:"issue.activity.worklog.flags.update-time-remaining-failure-title",defaultMessage:"We couldn't save your edit"},description:{id:"issue.activity.worklog.flags.update-time-remaining-failure-description",defaultMessage:"Check your connection, then give it another try."}}),icon:gs,type:"error"},[bs.w]:{messages:Object(j.defineMessages)({title:{id:"issue.activity.worklog.flags.edit-failure-title",defaultMessage:"We couldn't save your edit"},description:{id:"issue.activity.worklog.flags.failure-description",defaultMessage:"Check your connection, then give it another try."}}),icon:gs,type:"error"},[bs.s]:{messages:Object(j.defineMessages)({title:{id:"issue.activity.worklog.flags.delete-failure-title",defaultMessage:"We couldn't delete the work log entry"},description:{id:"issue.activity.worklog.flags.failure-description",defaultMessage:"Check your connection, then give it another try."}}),icon:gs,type:"error"},[bs.o]:{messages:Object(j.defineMessages)({title:{id:"issue.confluence-pages.delete-failure-title",defaultMessage:"We couldn\u2019t remove the page link"},description:{id:"issue.confluence-pages.delete-failure-description",defaultMessage:"Check your connection, then give it another try."}}),icon:gs,type:"error"},[bs.K]:{messages:Object(j.defineMessages)({title:{id:"issue.approval.action.save-error-title",defaultMessage:"We couldn\u2019t save your approval response"},description:{id:"issue.approval.action.save-error-description",defaultMessage:"Give it a few seconds, then try again."}}),icon:gs,type:"error",shouldAutoDismiss:!0},[bs.L]:{messages:Object(j.defineMessages)({title:{id:"issue.approval.action.save-success-title",defaultMessage:"We've saved your response."}}),icon:hs,type:"success",shouldAutoDismiss:!0},[bs.a]:{messages:Object(j.defineMessages)({title:{id:"issue.approval.action.add-approver-error-title",defaultMessage:"We couldn\u2019t add the approver"},description:{id:"issue.approval.action.add-approver-error-description",defaultMessage:"Check your connection, then try again later."}}),icon:gs,type:"error",shouldAutoDismiss:!0},[bs.F]:{messages:Object(j.defineMessages)({title:{id:"issue.approval.action.remove-approver-error-title",defaultMessage:"We couldn\u2019t remove the approver"},description:{id:"issue.approval.action.remove-approver-error-description",defaultMessage:"Check your connection, then try again later."}}),icon:gs,type:"error",shouldAutoDismiss:!0},[bs.v]:{messages:Object(j.defineMessages)({title:{id:"issue.color.action.change-color-title",defaultMessage:"We couldn\u2019t change the epic color"},description:{id:"issue.color.action.change-color-description",defaultMessage:"Check your connection, then give it another try."}}),icon:gs,type:"success",shouldAutoDismiss:!0},[bs.y]:{messages:Object(j.defineMessages)({title:{id:"issue.link.jira-app-link-fetch-error-title",defaultMessage:"We couldn\u2019t fetch remote Jira application links"},description:{id:"issue.link.jira-app-link-fetch-error-description",defaultMessage:"Check your connection, then give it another try."}}),icon:gs,type:"error",shouldAutoDismiss:!0},[bs.E]:{messages:Object(j.defineMessages)({title:{id:"issue.link.jira-remote-link-server-error-title",defaultMessage:"We couldn't link the issue to {remoteIssueKey}."},description:{id:"issue.link.jira-remote-link-server-error-description",defaultMessage:"Reason: {i18nServerErrorMessage}"}}),icon:gs,type:"error",shouldAutoDismiss:!0}};function Os(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function js(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Os(Object(s),!0).forEach((function(t){Es(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Os(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Es(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class vs extends n.Component{constructor(...e){super(...e),this.onFlagDismissed=e=>{const{flags:t,onFlagDismissed:s,fireAnalyticsEvent:n}=this.props,a=ns()(t,{id:e});if(a){const e=ys[a.type];e.onDismissed&&e.onDismissed({fireAnalyticsEvent:n})}s(e)}}render(){const{onFlagDismissed:e,flags:t,retryIssueDelete:s,fireAnalyticsEvent:n,deleteFailureIssueKey:i,FlagServiceSubscriber:r}=this.props;return(a.a.createElement(r,null,({showFlag:r})=>t.map(t=>{const o=ys[t.type],c=t.titleI18nValues?[o.messages.title,t.titleI18nValues]:o.messages.title,l=t.descriptionI18nValues&&o.messages.description?[o.messages.description,t.descriptionI18nValues]:o.messages.description,u=(o.actions||[]).map(({messages:a,onClick:r})=>({content:a.content,onClick:()=>r({closeFlag:()=>e(t.id),retryIssueDelete:s,deleteFailureIssueKey:i,fireAnalyticsEvent:n})})),d=js(js({title:c},l&&{description:l}),{},{type:o.type,actions:u,isAutoDismiss:o.shouldAutoDismiss});return a.a.createElement(rs.a,{key:t.id,args:[d],op:r})})))}}vs.displayName="UnsafeFlags",vs.displayName="Flags";var ks=tt()(Object(as.a)(e=>({fireAnalyticsEvent:(t,s)=>e(t,s)})),Object(is.a)("deleteIssueRetry",{retryIssueDelete:"deleteIssueRetry"}),Object(i.b)(e=>({flags:Object(T.i)(e),deleteFailureIssueKey:Object(C.B)(e),FlagServiceSubscriber:os.FlagServiceSubscriber}),e=>({onFlagDismissed:t=>e((e=>({type:"DISMISS_FLAG",payload:e}))(t)),retryIssueDelete:(t,s)=>{e(Object(cs.c)(t,s))}})),Object(ls.a)())(vs),ws=s("./src/packages/issue/issue-view/src/actions/attachment-popup-actions.js"),Ss=s("./src/packages/issue/issue-view/src/common/media/user-auth/user-auth-actions.js"),Is=s("./src/packages/issue/issue-view/src/selectors/attachment-picker-selector.js"),Cs=s("./node_modules/@atlaskit/media-picker/dist/es2019/index.js"),Ts=s("./src/packages/issue/issue-view/src/actions/attachment-picker-actions.js"),Ps=s("./src/packages/issue/issue-view/src/common/media/upload-context/upload-context-actions.js");function _s(){return(_s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function xs(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Ds(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function As(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const Ms=e=>class extends n.Component{constructor(...e){super(...e),this.uploadTokensPromisesResolvers=[],this.onUploadsStart=e=>{const{files:t}=e,{onUploadStart:s}=this.props;t.forEach(e=>{s({id:`${e.id}`,createdDate:Date.now()})})},this.onUploadEnd=e=>{const{file:t}=e,{onUploadEnd:s}=this.props;s({id:`${t.id}`})},this.onError=e=>{const{error:t}=e,{onUploadError:s,onGeneralError:n}=this.props;["upload_fail","object_create_fail"].includes(t.name)?s(t):n(t)},this.resolveAuthPromise=([e,t])=>{if(!this.props.uploadContext||!this.isTokenUpToDate())return void t();const{serviceHost:s,clientId:n,token:a}=this.props.uploadContext;e({clientId:n,token:a,baseUrl:s})}}componentDidUpdate(e){e.uploadContext!==this.props.uploadContext&&this.resolveUploadPromises()}resolveUploadPromises(){this.uploadTokensPromisesResolvers.forEach(this.resolveAuthPromise),this.uploadTokensPromisesResolvers=[]}isTokenUpToDate(){if(!this.props.uploadContext)return!1;const{tokenIssueTimestamp:e,tokenLifespanInMs:t}=this.props.uploadContext;return e+t>Date.now()}render(){const t=this.props,{onUploadStart:s,onUploadEnd:n,onUploadError:i,onGeneralError:r,uploadContext:o,eventHandlers:c,config:l}=t,u=As(t,["onUploadStart","onUploadEnd","onUploadError","onGeneralError","uploadContext","eventHandlers","config"]);if(!o)return null;const d={authProvider:()=>new Promise((e,t)=>{this.isTokenUpToDate()?this.resolveAuthPromise([e,t]):(this.props.requestUploadToken(),this.uploadTokensPromisesResolvers=[...this.uploadTokensPromisesResolvers,[e,t]])})},p=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?xs(Object(s),!0).forEach((function(t){Ds(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):xs(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({uploadParams:{collection:o.collection}},l),m=c?c["upload-error"]:this.onError,b=c?c["uploads-start"]:this.onUploadsStart,f=c&&c["upload-end"]?c["upload-end"]:this.onUploadEnd,g=c&&c["upload-preview-update"];return a.a.createElement(e,_s({mediaClientConfig:d,config:p,onUploadsStart:b,onError:m,onEnd:f,onPreviewUpdate:g},u))}};var Ls=e=>tt()([Object(i.b)(e=>({uploadContext:Object(P.a)(e).uploadContext}),e=>({onUploadStart:t=>e(Object(Ts.c)(t)),onUploadEnd:t=>e(Object(Ts.d)(t)),onUploadError:t=>e(Object(Ts.e)(t)),onGeneralError:t=>e(Object(Ts.f)(t)),requestUploadToken:()=>e(Object(Ps.c)())}))])(Ms(e));const Rs=Ls(Cs.a);var Ns=Object(i.b)(e=>({isOpen:Object(Is.a)(e)}),e=>({onClose:()=>e(Object(ws.a)())}))(e=>a.a.createElement(Rs,{isOpen:e.isOpen,onClose:e.onClose})),Us=s("./node_modules/prop-types/index.js"),Fs=s.n(Us),Vs=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/get-event-for-web-client.js"),Ks=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/analytics-context-wrapper.js"),Bs=s("./src/packages/platform/observability/product-analytics-bridge/src/constants.js"),Ws=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/mount-event-component.js");function Hs(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Gs(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Hs(Object(s),!0).forEach((function(t){$s(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Hs(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function $s(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class qs extends n.Component{constructor(...e){super(...e),this.picker=void 0}componentDidMount(){Object(Cs.d)(Gs(Gs({},this.props.mediaClientConfig),{},{userAuthProvider:this.props.userAuthProvider}),Gs(Gs({},this.props.config),{},{proxyReactContext:this.context})).then(e=>{e.on("uploads-start",this.props.onUploadsStart),e.on("upload-end",this.props.onEnd),e.on("upload-error",this.props.onError),this.props.onPickerReady&&this.props.onPickerReady(e),this.picker=e})}componentWillUnmount(){const{picker:e}=this;e&&(e.removeAllListeners(),"function"==typeof e.teardown&&e.teardown())}render(){return null}}qs.displayName="BaseMediaPicker",qs.contextTypes={getAtlaskitAnalyticsEventHandlers:Fs.a.func};var zs=Ls(qs);function Ys(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Qs(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ys(Object(s),!0).forEach((function(t){Js(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ys(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Js(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class Zs extends n.Component{constructor(...e){super(...e),this.uploadTokensPromisesResolvers=[],this.onPickerReady=e=>{this.picker=e,this.picker.on("closed",this.props.onClose)},this.onMount=e=>{const{payload:t}=Object(Vs.a)(e);this.analyticsSource=null!=t.source&&""!==t.source?t.source:"unknown"},this.overrideSourceHandler=e=>{e.update(e=>Qs(Qs({},e),{},{source:this.analyticsSource}))},this.resolveAuthPromise=([e,t])=>{if(!this.isTokenUpToDate())return void t();const{clientId:s,token:n}=this.props.userAuth;e({clientId:s,token:n,baseUrl:this.props.serviceHost})},this.userAuthProvider=()=>new Promise((e,t)=>{this.isTokenUpToDate()?this.resolveAuthPromise([e,t]):(this.props.requestAuthToken(),this.uploadTokensPromisesResolvers=[...this.uploadTokensPromisesResolvers,[e,t]])}),this.picker=void 0,this.analyticsSource=void 0}getChildContext(){const{getAtlaskitAnalyticsEventHandlers:e}=this.context;return{getAtlaskitAnalyticsEventHandlers:()=>[this.overrideSourceHandler,...e()]}}componentDidUpdate(e){e.userAuth!==this.props.userAuth&&this.resolveUploadPromises(),!e.isOpen&&this.props.isOpen&&this.picker&&this.picker.show()}resolveUploadPromises(){this.uploadTokensPromisesResolvers.forEach(this.resolveAuthPromise),this.uploadTokensPromisesResolvers=[]}isTokenUpToDate(){if(!this.props.userAuth)return!1;const{tokenIssueTimestamp:e,tokenLifespanInMs:t}=this.props.userAuth;return e+t>Date.now()}render(){const{eventHandlers:e,isOpen:t}=this.props;return(a.a.createElement(Ks.a,{sourceType:Bs.d,sourceName:"addAttachment"},a.a.createElement(a.a.Fragment,null,a.a.createElement(Ws.a,{onMount:this.onMount}),a.a.createElement(zs,{userAuthProvider:this.userAuthProvider,onPickerReady:this.onPickerReady,eventHandlers:e}),t&&a.a.createElement(_e.b,null))))}}Zs.displayName="PopupMediaPicker",Zs.childContextTypes={getAtlaskitAnalyticsEventHandlers:Fs.a.func},Zs.contextTypes={getAtlaskitAnalyticsEventHandlers:Fs.a.func};const Xs=e=>{const{userAuth:t,viewContext:s,isMobile:n,onClose:i,isOpen:r,eventHandlers:o,requestAuthToken:c}=e;return!n&&t&&s&&s.serviceHost?a.a.createElement("div",null,a.a.createElement(Zs,{eventHandlers:o,userAuth:t,serviceHost:s.serviceHost,onClose:i,requestAuthToken:c,isOpen:r})):a.a.createElement(Ns,{eventHandlers:o})};Xs.displayName="PopupMediaPickerWithBrowserFallback";var en=Object(i.b)(e=>({userAuth:Object(P.a)(e).userAuth,viewContext:Object(P.a)(e).viewContext,isMobile:Object(C.u)(e),isOpen:Object(Is.a)(e)}),e=>({onClose:()=>{e(Object(ws.a)())},requestAuthToken:()=>e(Object(Ss.c)())}))(Xs),tn=s("./src/packages/issue/issue-view/src/actions/comment-actions.js"),sn=s("./node_modules/lodash/reduce.js"),nn=s.n(sn),an=s("./node_modules/lodash/set.js"),rn=s.n(an),on=s("./node_modules/lodash/some.js"),cn=s.n(on),ln=s("./node_modules/@atlaskit/adf-utils/dist/es2019/builders/nodes/doc.js"),un=s("./node_modules/@atlaskit/adf-utils/dist/es2019/builders/nodes/paragraph.js"),dn=s("./node_modules/@atlaskit/adf-utils/dist/es2019/builders/nodes/media-single.js"),pn=s("./node_modules/@atlaskit/adf-utils/dist/es2019/builders/nodes/media-group.js"),mn=s("./node_modules/@atlaskit/adf-utils/dist/es2019/builders/nodes/media.js");const bn="issue.issue-base.content.attachment.picker.servicedesk";class fn extends n.Component{constructor(...e){super(...e),this.onUploadsStart=({files:e})=>{this.props.setCommentAttachmentInProgress(!0),this.commentAttachments=e.map(e=>({file:e,isUploadFinished:!1}))},this.onUploadFinished=({file:e})=>{this.injectAttachmentsToCommentEditor(this.commentAttachments),this.markAttachmentAsUploadFinished(e.id)},this.onUploadError=({file:e})=>{y.a.safeError(bn,"Failed to upload an attachment.",new p.a({eventNameSuffix:"issue.error",type:"js",app:"issue"})),this.markAttachmentAsUploadFinished(e.id)},this.getAttachmentsDocNode=(e,t)=>{const s=this.separateImageAndNonImageAttachments(e),n=this.getMediaSingleNodes(s.images,t),a=s.nonImages.length>0?this.getMediaGroupNode(s.nonImages,t):null;return a?Object(ln.a)(a,...n,Object(un.a)()):Object(ln.a)(...n,Object(un.a)())},this.getMediaSingleNodes=(e,t)=>e.map(e=>this.getMediaSingleNode(e,t)),this.getMediaSingleNode=(e,t)=>{const s=this.getMediaNode(e,200,200,t);return Object(dn.a)({layout:"center"})(s)},this.getMediaGroupNode=(e,t)=>Object(pn.a)(...e.map(e=>this.getMediaNode(e,null,null,t))),this.getMediaNode=({file:e},t,s,n)=>Object(mn.a)({id:e.id,collection:n,type:"file",name:e.name,size:e.size,width:t,height:s,__key:e.id,__fileName:e.name,__fileSize:e.size,__fileMimeType:e.type,__displayType:null}),this.markAttachmentAsUploadFinished=e=>{rn()(ns()(this.commentAttachments,t=>t.file.id===e),"isUploadFinished",!0),cn()(this.commentAttachments,{isUploadFinished:!1})||(this.props.setCommentAttachmentInProgress(!1),this.commentAttachments=[])},this.commentAttachments=void 0,this.separateImageAndNonImageAttachments=e=>nn()(e,(e,t)=>(this.isImageAttachment(t.file.type)?e.images.push(t):e.nonImages.push(t),e),{images:[],nonImages:[]}),this.injectAttachmentsToCommentEditor=e=>{const{uploadContext:t}=this.props;if(!t)return void y.a.safeError(bn,"Failed to upload attachments. Upload context not available.",new p.a({eventNameSuffix:"issue.error",type:"js",app:"issue"}));const s=this.getAttachmentsDocNode(e,t.collection);this.props.onEditCommentUpdate(s)},this.isImageAttachment=e=>!!e&&(e.indexOf("image/")>-1||e.indexOf("video/")>-1),this.eventHandlers={"uploads-start":this.onUploadsStart,"upload-end":this.onUploadFinished,"upload-error":this.onUploadError}}render(){const{render:e}=this.props;return e(this.eventHandlers)}}fn.displayName="EventHandlersProvider";var gn=tt()([Object(i.b)(e=>({uploadContext:Object(P.a)(e).uploadContext}),e=>({onEditCommentUpdate:t=>{e(Object(tn.d)("NEW_OPTIMISTIC_COMMENT",!0)),e(Object(tn.l)("NEW_OPTIMISTIC_COMMENT",t))},setCommentAttachmentInProgress:t=>e(Object(tn.C)(t))}))])(fn),hn=()=>a.a.createElement(gn,{render:e=>a.a.createElement(en,{eventHandlers:e})}),yn=s("./node_modules/reselect/lib/index.js"),On=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),jn=s("./src/packages/issue/issue-view/src/selectors/comment-selector.js");const En=Object(yn.createSelector)(On.F,jn.y,Is.a,Object(On.B)("timetracking"),_.f,(e,t,s,n,a)=>!(e||t||s||n||"EDIT_MODAL"===a));var vn=s("./src/packages/issue/issue-view/src/aui-modal-stack-index/index.js");function kn(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const wn=Ls(Cs.b),Sn=e=>{let{isEnabled:t}=e,s=kn(e,["isEnabled"]);return(a.a.createElement(vn.a,null,e=>t&&0===e?a.a.createElement(wn,s):null))};Sn.displayName="CommonClipboardMediaPicker";var In=tt()([Object(i.b)(e=>({isEnabled:En(e)}),{})])(Sn),Cn=()=>a.a.createElement(gn,{render:e=>a.a.createElement(In,{eventHandlers:e})});function Tn(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const Pn=Ls(Cs.c);var _n=tt()([Object(i.b)(e=>({isEnabled:En(e)}),{})])(e=>{const{isEnabled:t}=e,s=Tn(e,["isEnabled"]);return t?a.a.createElement(Pn,s):null});class xn extends n.Component{getConfig(){return{container:this.props.container}}render(){return a.a.createElement(gn,{render:e=>a.a.createElement(_n,{config:this.getConfig(),eventHandlers:e})})}}xn.displayName="ServiceDeskDropzonePicker";function Dn(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function An(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Dn(Object(s),!0).forEach((function(t){Mn(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Dn(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Mn(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Ln={headless:!0};class Rn extends n.Component{constructor(...e){super(...e),this.onPickerReady=e=>{this.picker=e,e.on("drag-enter",this.onDragEnter),e.on("drag-leave",this.onDragLeave),e.on("drop",this.onDrop)},this.onDragEnter=({length:e})=>{this.numAttachments!==e&&(this.numAttachments=e,this.props.onDragEnter(e))},this.onDragLeave=()=>{0!==this.numAttachments&&(this.numAttachments=0,this.props.onDragLeave())},this.onDrop=()=>{this.numAttachments=0,this.props.onDrop()},this.numAttachments=0,this.picker=void 0}getConfig(){return An(An({},Ln),{},{container:this.props.container})}render(){return a.a.createElement(_n,{config:this.getConfig(),onPickerReady:this.onPickerReady})}}Rn.displayName="DropzoneMediaPicker";var Nn=tt()([Object(i.b)(()=>({}),e=>({onDragEnter:t=>e((e=>({type:"ATTACHMENT_PANEL_DRAG_ENTER",payload:e}))(t)),onDragLeave:()=>e((()=>({type:"ATTACHMENT_PANEL_DRAG_LEAVE"}))()),onDrop:()=>e((()=>({type:"ATTACHMENT_PANEL_DROP"}))())}))])(Rn),Un=s("./src/packages/common-legacy-do-not-add-anything-new/src/experience-tracking/common/services/send-experience-analytics/index.js"),Fn=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),Vn=s("./src/packages/platform/utils/types/src/application.js"),Kn=s("./src/packages/platform/utils/types/src/edition.js");class Bn extends n.Component{constructor(e){super(e),this.state={noErrorsAfterTimeout:!1,caughtError:!1}}componentDidMount(){this.props.isReady&&setTimeout(()=>{this.setState({noErrorsAfterTimeout:!0})},1e3)}shouldComponentUpdate(e,t){if(t.caughtError)return!0;if(!this.state.noErrorsAfterTimeout&&t.noErrorsAfterTimeout){const{experience:e,analyticsSource:t}=this.props,{application:s,edition:n}=this.getApplicationAndEdition();return Object(Un.a)({experience:e,wasExperienceSuccesful:!0,analyticsSource:t,application:s,edition:n}),!1}return!(this.props.isReady||!e.isReady)&&(setTimeout(()=>{this.setState({noErrorsAfterTimeout:!0})},1e3),!0)}componentDidCatch(e){const{experience:t,analyticsSource:s}=this.props,{application:n,edition:a}=this.getApplicationAndEdition();Object(Un.a)({experience:t,wasExperienceSuccesful:!1,analyticsSource:s,application:n,edition:a,additionalAttributes:{errorMessage:e.message||"unknown"}}),this.setState({caughtError:!0})}getApplicationAndEdition(){const{projectType:e}=this.props;if(null==e)return{application:null,edition:null};const t=Object(Vn.e)(e),s=Fn.f&&Object(Fn.f)(),n=s&&s.appEditions;return{application:t,edition:n?Object(Kn.f)(t,n):null}}render(){const{caughtError:e}=this.state;return e?null:this.props.children}}Bn.displayName="AddAttachmentFrontendSlaTracker";var Wn=s("./src/packages/issue/issue-view/src/common/ecosystem/ecosystem-analytics.js"),Hn=s("./src/packages/issue/issue-view/src/ecosystem/ecosystem-extensions-selector.js"),Gn=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/layout-items-selector.js");class $n extends n.Component{constructor(...e){super(...e),this.fireAnalytics=()=>{const{glances:e,contentPanels:t,activityPanels:s,operations:n,ecosystemCustomFieldIds:a}=this.props;this.props.ecosystemLoadedAnalytics(e,t,s,n,a.length)}}componentDidMount(){this.fireAnalytics()}componentDidUpdate(){this.fireAnalytics()}render(){return null}}$n.displayName="EcosystemAnalyticsView";var qn=tt()(Object(as.a)(e=>({ecosystemLoadedAnalytics:(t,s,n,a,i)=>e("addons-loaded",Object(Wn.f)(t,s,n,a,i))})),Object(i.b)(e=>({glances:Object(Hn.i)(e),contentPanels:Object(Hn.g)(e),activityPanels:Object(Hn.a)(e),operations:Object(Hn.j)(e),ecosystemCustomFieldIds:Object(Gn.b)(e)}),{}),Object(ls.a)())($n),zn=s("./src/packages/issue/issue-view/src/ecosystem/ecosystem-connect-host.js"),Yn=s("./node_modules/@atlassian/connect-module-core/dist/es6/index.js"),Qn=s("./src/packages/common-legacy-do-not-add-anything-new/src/ecosystem/default-connect-iframe-provider.js"),Jn=s("./node_modules/@atlaskit/empty-state/dist/es2019/EmptyState/index.js"),Zn=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/error-state/assets/error.svg"),Xn=s.n(Zn);const ea=Object(j.defineMessages)({timeout:{id:"issue.content.ecosystem-panels.timeout",defaultMessage:"We're having trouble connecting to {appName}.\nTry contacting the developer for support."}}),ta=e=>`https://marketplace.atlassian.com/plugins/${e}/cloud/support?rel="noopener noreferrer"`;class sa extends n.Component{constructor(...e){super(...e),this.tertiaryAction=a.a.createElement(W.a,{appearance:"subtle-link",href:ta(this.props.appKey),target:"_blank"},this.props.appName)}render(){const{appName:e,intl:t}=this.props;return(a.a.createElement(Jn.a,{size:"narrow",imageUrl:Xn.a,maxImageWidth:80,maxImageHeight:80,isLoading:!1,description:t.formatMessage(ea.timeout,{appName:e}),tertiaryAction:this.tertiaryAction}))}}sa.displayName="TimeoutView",sa.displayName="TimeoutView";var na=Object(j.injectIntl)(sa);const aa=`${3*q.e}px`,ia=$.default.div(["margin-top:",";"],aa),ra=e=>{const{options:t,appKey:s,moduleKey:n,appName:i,options:{url:r},refreshedOn:o}=e,c=new Qn.a,l=o?`connect-iFrame-${s}-${n}-${o}`:`connect-iFrame-${s}-${n}`;return(a.a.createElement(ia,null,a.a.createElement(Yn.a,{key:l,appKey:s,moduleKey:n,url:r,connectHost:Object(zn.a)(),connectIframeProvider:c,options:c.convertConnectOptions(t),width:"100%",height:"100%",timeoutIndicator:()=>a.a.createElement(na,{appName:i,appKey:s})})))};ra.displayName="EcosystemModuleBase",ra.defaultProps={refreshedOn:0};const oa=e=>a.a.createElement(ra,e);oa.displayName="EcosystemModuleBaseWithoutRefresh";const ca=Object(ls.a)()(oa);var la=Object($t.a)([Object(i.b)(e=>({refreshedOn:Object(T.d)(e)}),{})])(ra);const ua=$.default.div(["display:none;"]);class da extends n.Component{constructor(...e){super(...e),this.state={connectHost:null}}componentDidMount(){Object(zn.b)(e=>this.setState({connectHost:e}))}render(){const{connectHost:e}=this.state,{scripts:t}=this.props;return e?a.a.createElement(ua,null,t.map(({appKey:e,moduleKey:t,options:s,shouldReloadOnRefresh:n})=>{const i=n?la:ca,r=`${e}-${t}`;return(a.a.createElement(i,{key:r,appKey:e,moduleKey:t,options:s,appName:r}))})):null}}da.displayName="EcosystemBackgroundScriptsView";var pa=Object($t.a)([Object(i.b)(e=>({scripts:Object(Hn.h)(e)}),{})])(da),ma=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/header/header-actions/index.js"),ba=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/button/index.js"),fa=s("./src/packages/issue/issue-view/src/actions/login-actions.js"),ga=s("./src/packages/issue/issue-view/src/views/issue-details/error/auth-error.svg"),ha=s.n(ga);const ya=$.default.div(["text-align:center;flex-direction:column;color:",";display:flex;justify-content:center;align-items:center;"],Ae.a.N800),Oa=$.default.h2(["font-size:20px;font-weight:bold;margin-top:","px;margin-bottom:","px;max-width:100%;"],1.5*q.e,1.5*q.e),ja=$.default.p(["max-width:100%;"]),Ea=e=>a.a.createElement(ya,null,e.image,a.a.createElement(Oa,null,e.header),a.a.createElement(ja,null,e.description),e.children);Ea.displayName="ErrorDisplay",Ea.defaultProps={description:void 0,children:null};var va=Ea;const ka=Object(j.defineMessages)({authErrorHeader:{id:"issue.text-for-header-in-authentication-error",defaultMessage:"Log in to Jira to see this issue"},authBtn:{id:"issue.text-for-login-button-in-authentication-error",defaultMessage:"Log in"}}),wa=$.default.img(["width:160px;margin-bottom:14px;"]),Sa=Object(j.injectIntl)(e=>a.a.createElement(va,{header:e.intl.formatMessage(ka.authErrorHeader),image:a.a.createElement(wa,{src:ha.a,alt:""})},a.a.createElement(ba.a,{externalId:"issue.login",appearance:"primary",onClick:e.login},e.intl.formatMessage(ka.authBtn))));var Ia=Object(i.b)(null,e=>({login:()=>e(Object(fa.a)())}))(Sa),Ca=s("./src/packages/issue/issue-view/src/views/issue-details/error/permission-error.svg"),Ta=s.n(Ca);const Pa=Object(j.defineMessages)({permissionErrorHeader:{id:"issue.text-for-header-in-permission-error",defaultMessage:"You don't have access to this issue"},permissionErrorDescription:{id:"issue.text-for-description-in-permission-error",defaultMessage:"Make sure the issue exists in this project. If it does, ask a project admin for permission to see the project's issues."}}),_a=$.default.img(["height:100px;width:145px;"]);var xa=Object(j.injectIntl)(({intl:e})=>a.a.createElement(va,{header:e.formatMessage(Pa.permissionErrorHeader),description:e.formatMessage(Pa.permissionErrorDescription),image:a.a.createElement(_a,{src:Ta.a,alt:""})})),Da=s("./src/packages/issue/issue-view/src/views/issue-details/error/unknown-error.svg"),Aa=s.n(Da);const Ma=Object(j.defineMessages)({unknownErrorHeader:{id:"issue.text-for-header-in-generic-error",defaultMessage:"We couldn't connect to that issue"},unknownErrorDescription:{id:"issue.text-for-description-in-generic-error",defaultMessage:"Make sure that this issue actually exists in that project. If it does, try again in a few minutes. If you still can't link to the issue, contact your Jira admin."}}),La=$.default.img(["height:130px;width:120px;"]);var Ra=Object(j.injectIntl)(({intl:e})=>a.a.createElement(va,{header:e.formatMessage(Ma.unknownErrorHeader),description:e.formatMessage(Ma.unknownErrorDescription),image:a.a.createElement(La,{src:Aa.a,alt:""})})),Na=s("./node_modules/lodash/isEqual.js"),Ua=s.n(Na),Fa=s("./src/packages/issue/issue-view/src/views/common/with-container-width/index.js"),Va=s("./src/packages/forge/forge-ui/src/utils/connect/index.js"),Ka=s("./src/packages/issue/issue-view/src/actions/activity-feed-actions.js"),Ba=s("./src/packages/issue/issue-view/src/common/component/section-heading/section-heading-view.js");const Wa="FORGE_ENTITY_TYPE",Ha="CONNECT_ENTITY_TYPE";var Ga=s("./src/packages/issue/issue-view/src/common/skeleton/activity-feed-view.js"),$a=s("./src/packages/issue/issue-view/src/selectors/activity-feed-selector.js"),qa=s("./src/packages/platform/utils/permalinks/src/index.js"),za=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),Ya=s("./src/packages/issue/project-context-service/src/main.js"),Qa=s("./src/packages/issue/issue-actions/activity-feed/src/messages.js");function Ja(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Za(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ja(Object(s),!0).forEach((function(t){Xa(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ja(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Xa(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function ei(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const ti=$.default.div(["align-self:flex-end;"]),si=Object($.default)(Ba.c)(["margin-top:","px;"],q.e/2);si.displayName="ActivityItemHeading";const ni=$.default.div(["display:flex;"]),ai=e=>(t,s)=>{const n=t(s),{buttonStyles:a}=n;return Za(Za({},ei(n,["buttonStyles"])),{},{buttonStyles:Za(Za({},a),{},{padding:`0 ${q.e/2}px 0 ${q.e/2}px`,margin:`0 ${q.e/2}px 0 ${q.e/2}px`,backgroundColor:e?Ae.a.N400:Ae.a.N20,"&:hover":{backgroundColor:e?Ae.a.N400:Ae.a.N30},"&:active":{backgroundColor:e?Ae.a.N400:Ae.a.B50}})})};var ii=s("./node_modules/@atlaskit/dropdown-menu/dist/es2019/components/item/DropdownItem.js"),ri=s("./node_modules/@atlaskit/dropdown-menu/dist/es2019/components/DropdownMenu.js"),oi=s("./node_modules/@atlaskit/dropdown-menu/dist/es2019/components/group/DropdownItemGroup.js"),ci=s("./node_modules/@atlaskit/icon/glyph/arrow-down.js"),li=s.n(ci),ui=s("./node_modules/@atlaskit/icon/glyph/arrow-up.js"),di=s.n(ui),pi=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/analytics-event-to-props.js");const mi=Object(j.defineMessages)({newestFirst:{id:"issue-activity-feed.common.newest-first",defaultMessage:"Newest first"},oldestFirst:{id:"issue-activity-feed.common.oldest-first",defaultMessage:"Oldest first"}}),bi=Object(j.defineMessages)({tooltip:{id:"issue-activity-feed.activity-sorting.tooltip",defaultMessage:"Sort by newest/oldest first"}}),fi=Object(pi.a)("sortOrderDropdownItem",{onClick:"clicked"})(ii.a),gi={NEWEST_FIRST:a.a.createElement(li.a,{size:"small",label:"newest-first"}),OLDEST_FIRST:a.a.createElement(di.a,{size:"small",label:"oldest-first"})},hi=e=>{const{selectedSortOrder:t,onSelectSortOrder:s,isDisabled:n=!1}=e,{formatMessage:i}=Object(Te.c)(),r=(e=>[{key:"NEWEST_FIRST",type:"NEWEST_FIRST",name:e(mi.newestFirst)},{key:"OLDEST_FIRST",type:"OLDEST_FIRST",name:e(mi.oldestFirst)}])(i),o=r.find(e=>e.type===t);return o?a.a.createElement(Ks.a,{sourceType:Bs.b,sourceName:"activityFeedSort"},a.a.createElement(Ws.a,{onMount:za.d}),a.a.createElement(he.a,{content:i(bi.tooltip),hideTooltipOnMouseDown:!0,position:"top"},a.a.createElement(ri.a,{trigger:o.name,triggerType:"button",triggerButtonProps:{appearance:"subtle",spacing:"compact",isDisabled:n,iconAfter:gi[o.type]},position:"bottom right"},a.a.createElement(oi.a,null,r.filter(e=>e.type!==t).map(e=>a.a.createElement(fi,{key:e.key,onClick:(t,n)=>s(e.type,n,"sortOrderItemSelected"),elemAfter:gi[e.type],isCompact:!0},e.name)))))):(Fn.i.safeError("issue.activity.activity-sorting.select-sort-order",`Failed to select a sort option with selected sort of ${t}`),null)};hi.displayName="ActivitySortingSelect";var yi=hi,Oi=s("./node_modules/@atlaskit/dropdown-menu/dist/es2019/components/DropdownMenuStateless.js"),ji=s("./src/packages/forge/forge-ui-analytics/src/services/issue-activity/index.js"),Ei=s("./src/packages/forge/forge-ui-analytics/src/ui/issue-activity/index.js"),vi=s("./src/packages/forge/forge-ui/src/ui/extension-title/index.js");const ki=({item:e,component:t})=>{const s=t;return(a.a.createElement(s,null,a.a.createElement(vi.a,{extensionName:e.name,extensionEnvType:e.extension.environmentType})))};ki.displayName="ForgeIssueActivityTrigger";const wi=({component:e,item:t,onClick:s,isSelected:i})=>{const r=e,o=Object(n.useCallback)((e,t)=>{Object(ji.a)(),s(e,t)},[s]);return a.a.createElement(Ei.a,{shouldFireScreenEvent:!1},a.a.createElement(r,{onClick:o,isSelected:!!i},a.a.createElement(vi.a,{extensionName:t.name,extensionEnvType:t.extension.environmentType})))};wi.displayName="ForgeIssueActivityView";var Si=s("./src/packages/issue/issue-view/src/common/styles/issue-value.js");const Ii=$.default.span(["max-width:","px;display:inline-block;line-height:normal;vertical-align:text-bottom;",";"],20*q.e,Si.e);Ii.displayName="DropdownTrigger";const Ci=Object($.default)(ii.a)(["min-width:","px;"],16*q.e);function Ti(){return(Ti=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}Ci.displayName="DropdownItem";const Pi=({children:e,onClick:t})=>a.a.createElement(xi,{onClick:t},e);Pi.displayName="DropdownItemComponent";const _i=({items:e,selectedItem:t,onSelectActivityItem:s})=>{const[i,r]=Object(n.useState)(!1),o=Object(n.useMemo)(()=>"FORGE_ENTITY_TYPE"===t.type?a.a.createElement(ki,{item:t,component:Ii}):a.a.createElement(Ii,null,t.name),[t]);return a.a.createElement(Ks.a,{sourceType:Bs.b,sourceName:"activityFeed"},a.a.createElement(Ws.a,{onMount:za.d}),a.a.createElement(Oi.a,{isOpen:i,onOpenChange:({isOpen:e},t)=>{r(e),Object(za.h)(t,{isOpen:e})},trigger:o,triggerType:"button",triggerButtonProps:{appearance:"subtle",spacing:"compact",theme:ai(i)},position:"bottom left"},a.a.createElement(oi.a,null,e.filter(e=>e.key!==t.key).map(e=>{const t={key:e.key,onClick:(t,n)=>s(e,n,"dropdownItemSelected")};return"FORGE_ENTITY_TYPE"===e.type?a.a.createElement(wi,Ti({},t,{component:Pi,item:e})):a.a.createElement(Pi,t,e.name)}))))};_i.displayName="ActivityFeedDropdown";const xi=Object(pi.a)("dropdownItem",{onClick:"clicked"})(Ci);function Di(){return(Di=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const Ai=({children:e,onClick:t,isSelected:s})=>a.a.createElement(W.a,{appearance:"subtle",spacing:"compact",isSelected:s,theme:ai(s),onClick:t},e);Ai.displayName="ButtonComponent";const Mi=({items:e,selectedItem:t,onSelectActivityItem:s})=>a.a.createElement(Ks.a,{sourceType:Bs.f,sourceName:"activityFeedButtons"},a.a.createElement(Ws.a,{onMount:e=>Object(za.e)(e)}),e.map(e=>{const n={key:e.key,isSelected:t.key===e.key,onClick:(t,n)=>s(e,n,"buttonItemSelected")};return"FORGE_ENTITY_TYPE"===e.type?a.a.createElement(wi,Di({},n,{component:Ai,item:e})):a.a.createElement(Ai,n,e.name)}));Mi.displayName="ActivityFeedButtons";var Li=s("./src/packages/platform/utils/types/src/general.js"),Ri=s("./src/packages/issue/issue-view/src/epics/comment-fetch-epic.js"),Ni=s("./src/packages/issue/issue-view/src/selectors/breadcrumbs-selector.js"),Ui=s("./src/packages/issue/issue-view/src/common/state/selectors/reactions-selector.js"),Fi=s("./src/packages/issue/issue-view/src/drafts/draft-utils.js"),Vi=s("./src/packages/issue/issue-view/src/selectors/issue-remote-data-selector.js");const Ki=Object(yn.createSelector)(Vi.a,e=>e);var Bi=s("./src/packages/issue/issue-view/src/selectors/drafts/selectors.js"),Wi=s("./node_modules/@atlaskit/avatar--next/dist/es2019/Avatar.js"),Hi=s("./node_modules/@atlaskit/comment/dist/es2019/components/ActionItem.js"),Gi=s("./node_modules/@atlaskit/comment/dist/es2019/components/Edited.js"),$i=s("./node_modules/@atlaskit/comment/dist/es2019/components/Comment.js"),qi=s("./node_modules/@atlaskit/comment/dist/es2019/components/Author.js"),zi=s("./src/packages/platform/observability/browser-metrics/src/index.js"),Yi=s("./src/packages/platform/utils/shallow-equal/src/index.js"),Qi=s("./src/packages/issue/issue-view/src/common/component/permalink-button/button/view.js"),Ji=s("./src/packages/issue/issue-view/src/common/component/permalink-button/permalink-provider/index.js"),Zi=s("./src/packages/issue/issue-view/src/common/component/timestamp/index.js"),Xi=s("./src/packages/issue/issue-view/src/common/messages/drafts.js"),er=s("./src/packages/issue/issue-view/src/common/model/comment-type.js"),tr=s("./src/packages/issue/issue-view/src/common/util/scroll/index.js"),sr=s("./src/packages/issue/issue-view/src/views/common/with-profilecard-next/index.js"),nr=s("./src/packages/issue/issue-view/src/views/constants.js"),ar=s("./src/packages/issue/issue-view/src/activity/common/messages.js"),ir=s("./src/packages/issue/issue-view/src/activity/common/styles/index.js");const rr=({children:e,fallback:t,packageName:s})=>a.a.createElement(M.a,{id:"issue-comment-reactions",packageName:s,render:()=>t},a.a.createElement(ne.a,{fallback:t},e));rr.displayName="IssueCommentReactionsBoundary";var or=s("./node_modules/react-sweet-state/lib/esm/components/subscriber.js"),cr=s("./node_modules/react-sweet-state/lib/esm/store/create.js"),lr=s("./src/packages/issue/issue-view/src/common/util/errors/index.js"),ur=s("./src/packages/issue/issue-fetch-services/src/common/utils/client.js"),dr=s("./src/packages/issue/issue-view/src/common/service/issue/comment-transformer.js");const pr=async(e,t)=>{const{errors:s,data:n}=await Object(ur.a)(e).query({query:"\nquery CommentVisibilitiesQuery($issueKey: String!) {\n    viewIssue(issueKey: $issueKey) {\n        commentVisibilities {\n            type\n            value\n        }\n    }\n}\n",variables:{issueKey:t}});if(s)throw new Error("GraphqlErrorResponse");if(n&&n.viewIssue&&n.viewIssue.commentVisibilities){return(e=>e.map(dr.d))(n.viewIssue.commentVisibilities)}throw new Error("GraphqlNullData")};var mr={fetch:()=>async({getState:e,setState:t},{issueKey:s,baseUrl:n,createAnalyticsEvent:a})=>{const i=e();if(!(i.loading||i.error||i.data)){t({loading:!0,error:null,data:null});try{const e=await pr(n,s);t({loading:!1,error:null,data:{commentVisibilities:e}}),((e,t)=>{const s=e({action:"fetched"}),n={totalCount:t.length,roleCount:t.filter(e=>"role"===e.type).length,groupCount:t.filter(e=>"group"===e.type).length};Object(za.c)(s,"commentVisibilities fetched",n)})(a,e)}catch(r){(e=>{const t="GraphqlErrorResponse"===e.message||"GraphqlNullData"===e.message?e.message:"other";Object(lr.a)("issue.fetch.comment-visibilities","An error occurred attempting to fetch comment visibilities from gira",e,{errorReason:t})})(r),t({loading:!1,error:r,data:null})}}}};var br=Object(cr.a)({name:"issue-view-comment-visibilities",initialState:{data:null,loading:!1,error:null},actions:mr}),fr=Object(or.a)(br,{displayName:"CommentVisibilitiesSubscriber"}),gr=s("./node_modules/lodash/countBy.js"),hr=s.n(gr),yr=s("./node_modules/lodash/isEmpty.js"),Or=s.n(yr),jr=s("./node_modules/@atlaskit/icon/glyph/check.js"),Er=s.n(jr),vr=s("./node_modules/@atlaskit/icon/glyph/lock-filled.js"),kr=s.n(vr),wr=s("./node_modules/@atlaskit/icon/glyph/unlock.js"),Sr=s.n(wr),Ir=s("./node_modules/@atlaskit/select/dist/esm/PopupSelect/PopupSelect.js"),Cr=s("./node_modules/react-select/dist/chunk-80640036.browser.esm.js"),Tr=Object(j.defineMessages)({publicTooltip:{id:"comment-visibility.button.public-tooltip",defaultMessage:"Visible to all users"},optionsTooltip:{id:"comment-visibility.button.options-tooltip",defaultMessage:"Only visible to {value}"}});const Pr=$.default.div(["display:flex;align-items:center;",";"],e=>e.removeIconMargin?`margin: 0 ${-q.e/2}px;`:null),_r=$.default.div(["white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:250px;"]);function xr(){return(xr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Dr(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Ar(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Dr(Object(s),!0).forEach((function(t){Mr(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Dr(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Mr(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Lr(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const Rr=(e,t)=>{const s=e(t),{buttonStyles:n}=s,a=Lr(s,["buttonStyles"]);return Ar({buttonStyles:Ar(Ar({},n),{},{maxWidth:"300px"})},a)},Nr=({selectedOption:e,isSelected:t})=>{const s="public"===e.type,n=s?Sr.a:kr.a,i=s?a.a.createElement(j.FormattedMessage,Tr.publicTooltip):a.a.createElement(j.FormattedMessage,xr({},Tr.optionsTooltip,{values:{value:e.value}}));return a.a.createElement(he.a,{content:i,position:"left"},a.a.createElement(W.a,{spacing:"default",theme:Rr,isSelected:t,shouldFitContainer:!0,iconBefore:a.a.createElement(Pr,{removeIconMargin:!s},a.a.createElement(n,{label:""}))},!s&&a.a.createElement(_r,null,e.value)))};Nr.displayName="TargetButton";var Ur=Nr,Fr=Object(j.defineMessages)({errorMessage:{id:"issue.activity.comment.comment-visibility.error-image.messages.errorMessage",defaultMessage:"We couldn't load the visibility options"}}),Vr=s("./src/packages/issue/issue-view/src/activity/comment/comment-visibility/assets/Error.svg"),Kr=s.n(Vr);const Br=$.default.div(["width:","px;"],25*q.e),Wr=$.default.div(["width:","px;height:","px;margin:12px 0;background:center no-repeat url(",");"],10*q.e,10*q.e,Kr.a),Hr=$.default.div(["display:flex;flex-direction:column;align-items:center;"]),Gr=$.default.p(["color:",";text-align:center;"],Ae.a.N200),$r=({intl:e})=>a.a.createElement(Br,null,a.a.createElement(Hr,null,a.a.createElement(Wr,null),a.a.createElement(Gr,null,e.formatMessage(Fr.errorMessage))));$r.displayName="ErrorImage";var qr=Object(j.injectIntl)($r),zr=Object(j.defineMessages)({visibleToAllUsers:{id:"comment-visibility.visible-to-all-users",defaultMessage:"Visible to all users"},projectRolesLabel:{id:"comment-visibility.project-roles-label",defaultMessage:"Project roles"},groupsLabel:{id:"comment-visibility.groups-label",defaultMessage:"Groups"}});const Yr=(e,t)=>e.value===t.value&&e.type===t.type;function Qr(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Jr(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Qr(Object(s),!0).forEach((function(t){Zr(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Qr(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Zr(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Xr=(e,t,s)=>e.filter(e=>e.type===s).map(e=>Jr(Jr({},e),{},{selected:!!e&&Yr(e,t)})),eo=e=>({label:"",options:[Jr(Jr({},er.a),{},{selected:"public"===e.type})]}),to=$.default.div(["display:flex;justify-content:center;align-items:center;height:","px;"],18*q.e),so=()=>a.a.createElement(to,null,a.a.createElement(H.a,null));so.displayName="LoadingSpinner";const no=$.default.div(["display:flex;justify-content:left;align-items:center;"]),ao=$.default.span(["padding:0 5px 0 0;flex-shrink:0;max-height:","px;"],3*q.e),io=$.default.span(["margin-left:","px;max-height:","px;"],q.e/2,3*q.e),ro=$.default.div(["font-size:11px;font-weight:initial;padding-top:4px;"]),oo=$.default.div(["white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"]),co=$.default.div(["display:flex;justify-content:center;padding:","px;"],2*q.e),lo=$.default.div(["min-width:","px;margin-left:","px;"],4.5*q.e,q.e/2);function uo(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function po(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?uo(Object(s),!0).forEach((function(t){mo(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):uo(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function mo(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const bo=({label:e})=>e&&a.a.createElement(ro,null,e),fo={container:e=>po(po({},e),{},{paddingBottom:"0",paddingTop:"0"}),group:e=>po(po({},e),{},{paddingBottom:"4px",paddingTop:"0"}),option:(e,{data:{selected:t},isFocused:s})=>{const n=s?Ae.a.N20:e.backgroundColor,a=t?Ae.a.B50:n;return po(po({},e),{},{backgroundColor:a})}},go={placement:"bottom-end",modifiers:{offset:{offset:`0, ${q.e}px`},preventOverflow:{escapeWithReference:!0},setZIndex:{enabled:!0,order:890,fn:e=>po(po({},e),{},{styles:po(po({},e.styles),{},{zIndex:q.f.modal})})}}},ho=Object(pi.a)("commentVisibilitySelect",{onOpen:"opened",onChange:"changed"})(Ir.a),yo=({value:e,selected:t,isPublic:s})=>{const n=s?Sr.a:kr.a;return(a.a.createElement(he.a,{content:e,delay:2e3},a.a.createElement(no,null,a.a.createElement(ao,null,a.a.createElement(n,{label:""})),a.a.createElement(oo,null,e),a.a.createElement(io,null,t?a.a.createElement(Er.a,{primaryColor:Ae.a.B500,label:""}):null))))};yo.displayName="OptionLabel";const Oo=({isLoading:e,options:t,initialValue:s,onChange:i,error:r,intl:{formatMessage:o}})=>{const c=e||r,[l,u]=Object(n.useState)(s),[d,p]=Object(n.useState)(!1),m=Object(n.useCallback)(()=>p(!0),[]),b=Object(n.useCallback)(()=>p(!1),[]),f="public"===s.type;if((c||Or()(t))&&f)return null;const g=c||null==t?((e,t,s)=>{const n=[eo(t)];if(e){const a=e.type===t.type&&e.value===t.value;n.push({label:"group"===e.type?s(zr.groupsLabel):s(zr.projectRolesLabel),options:[Jr(Jr({},e),{},{selected:a})]})}return n})(s,l,o):((e,t,s)=>[eo(s),{label:t(zr.projectRolesLabel),options:Xr(e,s,"role")},{label:t(zr.groupsLabel),options:Xr(e,s,"group")}])(t,o,l),h=c?{MenuList:e=>a.a.createElement(a.a.Fragment,null,a.a.createElement(Cr.z.MenuList,e,e.children),a.a.createElement(co,null,r?a.a.createElement(qr,null):a.a.createElement(so,null)))}:void 0;return a.a.createElement(a.a.Fragment,null,a.a.createElement(Ws.a,{onMount:e=>Object(za.b)(e,"commentVisibilitySelect rendered")}),a.a.createElement(lo,null,a.a.createElement(ho,{onClose:b,onOpen:e=>{m();const s=hr()(t,"type");Object(za.h)(e,"commentVisibilityView",{roleCount:s.role||0,groupCount:s.group||0,totalCount:null==t?1:t.length+1})},maxMenuWidth:300,minMenuWidth:175,maxMenuHeight:340,formatOptionLabel:({type:e,value:t,selected:s})=>{const n="public"===e;return(a.a.createElement(yo,{isPublic:n,selected:s,value:n?o(zr.visibleToAllUsers):t}))},popperProps:go,components:h,styles:fo,formatGroupLabel:bo,options:g,target:({ref:e})=>a.a.createElement("div",{ref:e},a.a.createElement(Ur,{selectedOption:l,isSelected:d})),isLoading:e,error:r,onChange:(e,t,s)=>{(e=>{i(e),u(e)})((({type:e,value:t})=>({type:e,value:t}))(e)),Object(za.h)(s,"commentVisibilityView")},isSearchable:null!=t&&t.length+1>30,searchThreshold:30})))};var jo=Object($t.a)([j.injectIntl])(e=>a.a.createElement(a.a.Fragment,null,a.a.createElement(Ws.a,{onMount:t=>{Object(za.b)(t,"commentVisibilitySelect mounted",{isLoading:e.isLoading})}}),a.a.createElement(Oo,e)));const Eo=({initialValue:e,onChange:t})=>a.a.createElement(fr,null,({loading:s,error:n,data:i})=>a.a.createElement(jo,{initialValue:e,onChange:t,isLoading:s,error:n,options:i?i.commentVisibilities:null}));Eo.displayName="CommentVisibilitySelect";var vo=Object(ls.a)()(Eo),ko=s("./src/packages/issue/issue-view/src/activity/comment/comment-view/content/index.js"),wo=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/html-view/html-view.js"),So=s("./src/packages/issue/issue-view/src/activity/comment/comment-view/content/styled.js");const Io=({bodyHtml:e})=>a.a.createElement(So.a,null,a.a.createElement(wo.a,{html:e}));Io.displayName="PreviewCommentContent";var Co=Object(ls.a)()(Object(j.injectIntl)(Io));const To=({bodyHtml:e})=>a.a.createElement(Co,{bodyHtml:e});To.displayName="IssueCommentEditorReadonly";const Po=({children:e,fallback:t,packageName:s})=>a.a.createElement(M.a,{id:"issue-comment-editor",packageName:s,render:()=>t},a.a.createElement(ne.a,{fallback:t},e));Po.displayName="IssueCommentEditorBoundary";const _o=Object(j.defineMessages)({edit:{id:"issue.text-for-edit-comment-action",defaultMessage:"Edit"},delete:{id:"issue.text-for-delete-comment-action",defaultMessage:"Delete"},edited:{id:"issue.text-for-edited-comment-flag",defaultMessage:"Edited"},retrySave:{id:"issue.text-for-retry-save-comment-action",defaultMessage:"Retry"},cancelSave:{id:"issue.text-for-cancel-save-comment-action",defaultMessage:"Cancel"},saving:{id:"issue.text-for-save-comment-sending",defaultMessage:"Saving..."},confirmationHeader:{id:"issue.confirm-delete-comment-modal-header",defaultMessage:"Delete this comment?"},confirmationContent:{id:"issue.confirm-delete-comment-modal-text",defaultMessage:"Once you delete, it's gone for good."},confirmationActionText:{id:"issue.confirm-delete-comment-action-text",defaultMessage:"Delete"},internalNote:{id:"issue.internal-comment-distinguishing-text",defaultMessage:"Internal note"},copy:{id:"issue.activity.comment.comment-items.comment-item.copy",defaultMessage:"Copy link to comment"}}),xo={inner:{paddingTop:q.e,paddingBottom:q.e/2,paddingLeft:q.e},outer:{paddingTop:28}},Do=$.default.div(["border-radius:","px;padding:","px 0 ","px ","px;margin:","px 0 -","px -","px;",";"],q.e/2,xo.inner.paddingTop,xo.inner.paddingBottom,xo.inner.paddingLeft,xo.outer.paddingTop-xo.inner.paddingTop,xo.inner.paddingBottom,xo.inner.paddingLeft,e=>e.isEditing?"":`background-color: ${e.highlightColor};`),Ao=$.default.div(["height:","px;margin-left:-7px;margin-bottom:4px;"],2.5*q.e),Mo=$.default.div(["padding-top:","px;&:first-child,&:first-of-type{padding:0;}"],3.5*q.e);q.e;function Lo(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Ro(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Lo(Object(s),!0).forEach((function(t){No(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Lo(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function No(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Uo(){return(Uo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const Fo=Object(ne.f)(()=>s.e("async-comment-reactions").then(s.bind(null,"./src/packages/issue/issue-view/src/activity/comment/comment-reactions/index.js")),{moduleId:"./src/packages/issue/issue-view/src/activity/comment/comment-reactions/index.js"}),Vo=Object(ne.f)(()=>s.e("async-editor-view").then(s.bind(null,"./src/packages/issue/issue-view/src/activity/comment/comment-view/content/index.js")),{moduleId:"./src/packages/issue/issue-view/src/activity/comment/comment-view/content/index.js"});class Ko extends n.Component{constructor(...e){super(...e),this.onDeleteConfirm=()=>{const{createAnalyticsEvent:e,getOnDeleteConfirm:t}=this.props;return t(e({action:"deleted"}))},this.onEditClick=(e,t)=>{const{getOnEditClick:s,isInternal:n,hasDraft:a}=this.props;s(n),Object(za.b)(t,"editCommentEditor expanded",{hasDraft:a})},this.onEditSave=e=>{if(!Object(A.g)(e)){const{author:t,commentId:s,createdDate:n,bodyHtml:a,shouldShowCommentVisibility:i,visibility:r,visibilityEdited:o,getOnEditSave:c,createAnalyticsEvent:l}=this.props,u=t?t.id:null,d=l({action:"updated"});i&&d.update({isVisibilityUpdated:!Yr(r,o)}),c({authorId:u,createdDate:n,bodyAdf:e,bodyHtml:a,isNewComment:s.includes("NEW_OPTIMISTIC_COMMENT"),visibility:o},d)}},this.getAuthorDisplayName=e=>e?e.displayName:this.props.intl.formatMessage(ar.a.anonymous),this.getCommentReactions=()=>a.a.createElement(Ao,null,a.a.createElement(rr,{packageName:"issue",fallback:a.a.createElement(a.a.Fragment,null)},a.a.createElement(Fo,{commentId:this.props.commentId}))),this.getCommentActions=()=>[this.props.canEdit&&a.a.createElement(Hi.a,{key:"edit",onClick:this.onEditClick},this.props.intl.formatMessage(_o.edit),this.props.hasDraft?` (${this.props.intl.formatMessage(Xi.a.draftIndicator)})`:""),this.props.canDelete&&a.a.createElement(Hi.a,{key:"delete",onClick:this.props.onDeleteClick},this.props.intl.formatMessage(_o.delete)),this.props.showReactions&&this.getCommentReactions()].filter(e=>!!e),this.getCommentSaveFailedActions=()=>[a.a.createElement(Hi.a,{key:"retry",onClick:this.props.onSaveRetry},this.props.intl.formatMessage(_o.retrySave)),a.a.createElement(Hi.a,{key:"edit",onClick:this.props.onSaveEdit},this.props.intl.formatMessage(_o.edit)),a.a.createElement(Hi.a,{key:"cancel",onClick:this.props.onSaveCancel},this.props.intl.formatMessage(_o.cancelSave))].filter(e=>!!e),this.renderAdfRendererFallback=()=>a.a.createElement(To,{bodyHtml:this.props.bodyHtml}),this.getCommentContent=()=>{const{bodyAdf:e,bodyHtml:t,commentId:s,isEditing:n,onEditCancel:i,onEditUpdate:r,onEditPaste:o,onBlur:c,visibilityEdited:l,onCommentVisibilityChange:u,shouldShowCommentVisibility:d}=this.props,p={commentId:s,isEditing:n,secondaryToolbarComponents:d?[a.a.createElement(vo,{key:"commentVisibilitySelector",initialValue:l,onChange:u})]:void 0,onCancel:i,onChange:r,onSave:this.onEditSave,onPaste:o,onBlur:c};return Object(qt.isCommentHtmlPreviewDisabled)()?a.a.createElement(M.a,{id:"issue-comment-editor",packageName:"issue",render:this.renderAdfRendererFallback},a.a.createElement(ko.default,Uo({},p,{bodyAdf:e}))):a.a.createElement(Po,{packageName:"issue",fallback:a.a.createElement(To,{bodyHtml:t})},a.a.createElement(Vo,Uo({},p,{bodyAdf:e})))},this.getCommentTime=()=>a.a.createElement(Zi.b,{value:this.props.createdDate,timeZone:this.props.timeZone,tooltipPosition:"top",extraStyles:ir.a}),this.getCommentEditedToolTip=()=>{const{intl:e}=this.props,t=a.a.createElement(j.FormattedMessage,Uo({},ar.a.editedBy,{values:{author:this.getAuthorDisplayName(this.props.updateAuthor),timestamp:a.a.createElement(Zi.b,{value:this.props.updatedDate,timeZone:this.props.timeZone})}}));return a.a.createElement(he.a,{content:t,position:"top"},a.a.createElement(Gi.a,null,e.formatMessage(_o.edited)))},this.getFormattedGridContainer=(e,t)=>a.a.createElement(ir.f,null,a.a.createElement(ir.e,null,e),null!=t?a.a.createElement(ir.e,null,t):null),this.getPermalinkIcon=e=>{const{commentId:t,fullIssueUrl:s,onCopyClick:n,intl:{formatMessage:i}}=this.props;return(a.a.createElement(Qi.a,{id:t,fullIssueUrl:`${s}?focusedCommentId=${t}`,label:i(_o.copy),onCopyClick:n,isVisible:e.isVisible}))},this.renderEditedOld=()=>this.props.edited?this.getCommentEditedToolTip():null,this.getEditingAndRestrictedTo=(e,t)=>{const{isEditing:s,hasSaveFailed:n,isOptimistic:a}=this.props,i=this.getPermalinkIcon(t),r=e.length>0;if(a&&!n)return{restrictedTo:null,edited:null};const o=r?this.getFormattedGridContainer(e,i):null,c=r?null:i,l=this.getCommentEditedToolTip();return s?{restrictedTo:null,edited:this.props.edited?l:null}:this.props.edited?{restrictedTo:o,edited:this.getFormattedGridContainer(l,c)}:{restrictedTo:o,edited:c}},this.renderComment=e=>{const{author:t,isOptimistic:s,hasSaveFailed:n,hasDeleteModal:i,onDeleteCancel:r,isEditing:o,isHighlighted:c,isInternal:l}=this.props;return(a.a.createElement(Ji.a,null,u=>{const{restrictedTo:d,edited:p}=s?{}:this.getEditingAndRestrictedTo(e,u),m=a.a.createElement($i.a,{avatar:a.a.createElement(sr.a,{userAccount:t,analyticsData:{trigger:"comment-avatar"}},a.a.createElement(Wi.a,{borderColor:"transparent",src:t&&t.avatarUrl||void 0,size:"medium"})),author:a.a.createElement(sr.a,{userAccount:t,analyticsData:{trigger:"comment-author"}},a.a.createElement(qi.a,null,this.getAuthorDisplayName(t))),time:this.getCommentTime(),edited:s?this.renderEditedOld():p,content:a.a.createElement("div",null,this.getCommentContent(),i&&a.a.createElement(it.b,{appearance:"danger",headerMessage:this.props.intl.formatMessage(_o.confirmationHeader),contentMessage:this.props.intl.formatMessage(_o.confirmationContent),confirmActionText:this.props.intl.formatMessage(_o.confirmationActionText),onConfirm:this.onDeleteConfirm,onCancel:r,externalId:"issue.comment.delete"})),restrictedTo:s?e:d,actions:s||o?[]:this.getCommentActions(),isError:n&&!o,errorActions:this.getCommentSaveFailedActions(),isSaving:s&&!n,savingText:this.props.intl.formatMessage(_o.saving),highlighted:!l&&!o&&c});return s?m:a.a.createElement(Mo,{onMouseEnter:u.show,onMouseLeave:u.hide,onFocus:u.show,onBlur:u.hide},a.a.createElement("span",{ref:this.setCommentPermalinkContainer},m))}))},this.renderInternalComment=()=>{const{visibility:e,intl:t,isEditing:s,isHighlighted:n}=this.props,i=n?Ae.a.Y75:Ae.a.Y50,r="public"===e.type?`${t.formatMessage(_o.internalNote)}`:`${e.value} \u2022 ${t.formatMessage(_o.internalNote)}`;return(a.a.createElement(Do,{isEditing:s,highlightColor:i},this.renderComment(r)))},this.setCommentPermalinkContainer=e=>{this.commentPermalinkContainer=e},this.commentPermalinkContainer=void 0,this.scrollCommentIntoView=()=>{const{isHighlighted:e,hasScrolledPermalink:t,hasLoadedAllAsyncComponents:s,setScrollStatus:n,createAnalyticsEvent:a}=this.props;if(e&&!t&&s){Object(tr.b)(this.commentPermalinkContainer,{scrollMode:"always",behavior:"smooth"}),n(!0);const e=a({action:"scrolled"});Object(za.h)(e,"permalink comment",{name:"comment"})}}}componentDidMount(){this.props.isOptimistic?Object(zi.c)().markTimeToFeedback({key:nr.a.COMMENTS.TIME_TO_RENDER_SAVED_COMMENT}):Object(zi.c)().markTimeToFinishTask({key:nr.a.COMMENTS.TIME_TO_RENDER_SAVED_COMMENT}),this.scrollCommentIntoView()}shouldComponentUpdate(e){if(!this.props.hasLoadedAllAsyncComponents&&e.hasLoadedAllAsyncComponents||!this.props.hasScrolledPermalink&&e.hasScrolledPermalink){const t=Ro(Ro({},this.props),{},{hasLoadedAllAsyncComponents:e.hasLoadedAllAsyncComponents,hasScrolledPermalink:e.hasScrolledPermalink});if(Object(qt.isUseTrueShallowEqualEnabled)()?Object(Yi.a)(t,e):Object(Fn.h)(t,e))return e.isHighlighted&&!e.hasScrolledPermalink}return!0}componentDidUpdate(){this.scrollCommentIntoView()}render(){const{visibility:e,isInternal:t}=this.props;return t?this.renderInternalComment():this.renderComment(e.value)}}function Bo(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Wo(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Bo(Object(s),!0).forEach((function(t){Ho(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Bo(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Ho(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}Ko.displayName="Comment",Ko.displayName="Comment",Ko.defaultProps={isEditing:!1,visibility:er.a,updatedDate:null,edited:!1};var Go=Object($t.a)([j.injectIntl,Object(is.a)("issueFields",{onEditSave:"updated",onDeleteConfirm:"deleted",onScrolledToPermalink:"scrolled"}),Object(E.a)({onCopyClick:"copyCommentUrl"}),Object(i.b)((e,{commentId:t})=>e=>({bodyAdf:Object(jn.j)(t)(e),bodyHtml:Object(jn.f)(t)(e),hasDraft:Object(Bi.a)(Object(Fi.a)(t))(e),author:Object(jn.e)(t)(e),updateAuthor:Object(jn.q)(t)(e),createdDate:Object(jn.g)(t)(e),updatedDate:Object(jn.r)(t)(e),edited:Object(jn.h)(t)(e),isOptimistic:Object(jn.o)(t)(e),hasSaveFailed:Object(jn.p)(t)(e),canEdit:Object(jn.d)(t)(e),isEditing:Object(jn.B)(t)(e),canDelete:Object(jn.c)(t)(e),hasDeleteModal:Object(jn.m)(t)(e),visibility:Object(jn.s)(t)(e),visibilityEdited:Object(jn.k)(t)(e),isInternal:Object(jn.D)(t)(e),showReactions:Object(Ui.b)(e),timeZone:Object(T.A)(e),shouldShowCommentVisibility:Object(jn.z)(e),hasLoadedAllAsyncComponents:Ki(e),hasScrolledPermalink:Object(jn.v)(e)}),(e,{commentId:t})=>({getOnEditClick:s=>e(Object(tn.i)(t,s)),onEditCancel:()=>e(Object(tn.j)(t)),onEditUpdate:s=>e(Object(tn.l)(t,s)),onEditPaste:s=>e(Object(tn.u)(t,s)),onBlur:()=>e(Object(tn.k)(t)),getOnEditSave:(s,n)=>e(Object(tn.y)(Wo({id:t},s),n)),onCommentVisibilityChange:s=>{e(Object(tn.m)(t,s))},onDeleteClick:()=>e(Object(tn.E)(t)),getOnDeleteConfirm:s=>e(Object(tn.g)(t,s)),onDeleteCancel:()=>e(Object(tn.e)()),onSaveRetry:()=>e(Object(tn.z)(t,(new Date).toISOString(),(e=>e.includes("NEW_OPTIMISTIC_COMMENT"))(t))),onSaveEdit:()=>e(Object(tn.w)(t)),onSaveCancel:()=>e(Object(tn.v)(t)),setScrollStatus:t=>e(Object(tn.D)(t))}),(e,t,s)=>Wo(Wo(Wo({},e),t),s))])(Ko),$o=s("./node_modules/react-sweet-state/lib/esm/components/container.js"),qo=Object($o.a)(br,{displayName:"CommentVisibilitiesContainer"});function zo(){return(zo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}var Yo=e=>t=>{const{baseUrl:s,issueKey:n,shouldFetchCommentVisibilities:i,createAnalyticsEvent:r}=t;return(a.a.createElement(qo,{baseUrl:s,issueKey:n,createAnalyticsEvent:r},a.a.createElement(fr,null,(s,{fetch:n})=>a.a.createElement(e,zo({},t,{fetchCommentVisibilities:i?n:void 0})))))},Qo=s("./node_modules/@atlaskit/onboarding/dist/es2019/components/SpotlightTarget.js"),Jo=s("./src/packages/platform/services/refs-store/src/index.js"),Zo=s("./node_modules/lodash/throttle.js"),Xo=s.n(Zo),ec=s("./node_modules/@atlaskit/lozenge/dist/es2019/Lozenge/index.js"),tc=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/browser.js"),sc=s("./src/packages/issue/issue-view/src/activity/comment/servicedesk-comment-editor-container/index.js");const nc=$.default.button(["text-align:left;color:grey;font:inherit;background:white;width:100%;height:40px;padding-left:","px;padding-right:","px;padding-top:","px;padding-bottom:","px;border:1px solid ",";border-radius:","px;box-sizing:border-box;"],2.5*q.e,2.5*q.e,1.5*q.e,1.5*q.e,Ae.a.N40,q.a),ac=$.default.div(["display:flex;justify-content:space-between;align-items:center;height:14px;padding-top:1px;letter-spacing:-0.005em;"]),ic=$.default.span(["padding-top:","px;"],q.e/2),rc=$.default.div(["text-align:center;"]);class oc extends n.Component{constructor(...e){super(...e),this.state={changed:!1},this.onClick=()=>{this.props.onExpanded(),this.setState({changed:!0})}}static getServiceDeskFallbackEditor(){return a.a.createElement(rc,null,a.a.createElement(H.a,{size:"medium"}))}getGeneralFallbackEditor(){return a.a.createElement(nc,{onClick:this.onClick},a.a.createElement(ac,null,this.props.placeholder,this.state.changed&&a.a.createElement(ic,null,a.a.createElement(H.a,{size:"small"}))))}render(){return this.props.isServiceDesk?oc.getServiceDeskFallbackEditor():this.getGeneralFallbackEditor()}}oc.displayName="FallbackAddCommentEditor",oc.defaultProps={placeholder:"",onExpanded:o.a};const cc=Object($t.a)([Object(i.b)(e=>({isServiceDesk:Object(C.v)(e)}),{})])(oc),lc=({children:e,fallback:t,packageName:s})=>a.a.createElement(M.a,{id:"issue-add-comment-editor",packageName:s,render:()=>t},a.a.createElement(ne.a,{fallback:t},e));lc.displayName="IssueAddCommentEditorBoundary";const uc=Object(j.defineMessages)({placeholder:{id:"issue.placeholder-for-empty-comment-editor",defaultMessage:"Add a comment\u2026"},draftPlaceholder:{id:"issue.draft-placeholder-for-empty-comment-editor",defaultMessage:"You have an unsaved comment"},commentShortcutHintHeading:{id:"issue.comment.shortcut-hint-pro-tip-text",defaultMessage:"Pro tip:"},commentShortcutHintMessage:{id:"issue.comment.shortcut-hint-message-with-pro-tip-text",defaultMessage:"{proTipText} press {shortcutKey} to comment"}});var dc=s("./node_modules/@atlaskit/modal-dialog/dist/esm/styled/Content.js");const pc=$.default.small(["color:",";display:block;margin-top:","px;white-space:nowrap;font-size:12px;line-height:1.33333333333333;"],Ae.a.N200,q.e),mc=Object($.css)(["@supports (position:sticky) or (position:-webkit-sticky){position:sticky;z-index:10;transition:transform 0.3s cubic-bezier(0.86,0,0.07,1) 0.1s;transform:translate(0,",");bottom:-1px;background:white;padding-left:","px;margin-left:-","px;"," &{bottom:-2px;}","}"],e=>e.isHidden?"100px":"0",q.e,q.e,dc.c.toString(),e=>e.isHidden?(()=>Object(tc.c)()?"":"display: contents")():""),bc=Object($.css)(["@supports (position:sticky) or (position:-webkit-sticky){box-shadow:inset 0 2px 0 0 ",";margin-top:",";}"],Ae.a.N30,aa),fc=$.default.div(["",";"],e=>e.isSticky&&mc),gc=$.default.div(["display:flex;padding-top:","px;padding-bottom:","px;background:white;",""],2*q.e,2*q.e,e=>e.isSticky?bc:""),hc=$.default.div(["margin-right:","px;margin-top:","px;"],1.5*q.e,q.e/4);function yc(){return(yc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const Oc=["avatarUrl","hasDraft","isExpanded","isServiceDesk","isEditorFocused","isLoading"],jc=Object(ne.f)(()=>s.e("async-editor-view").then(s.bind(null,"./src/packages/issue/issue-view/src/activity/comment/comment-add/add-comment-editor/index.js")),{moduleId:"./src/packages/issue/issue-view/src/activity/comment/comment-add/add-comment-editor/index.js"});class Ec extends n.Component{constructor(...e){super(...e),this.state={isSticky:!1,shouldHide:!1},this.onSave=e=>{Object(zi.c)().markStartOfInteraction({key:nr.a.COMMENTS.TIME_TO_RENDER_SAVED_COMMENT,cancelExisting:!0}),Object(A.g)(e)||(this.props.onSave(e),this.props.onCancel())},this.setAddCommentContainerRef=e=>{this.addCommentContainer=e},this.setEditorContainerRef=e=>{this.editorContainer=e},this.setContainerRef=e=>{this.container=e},this.getScrollParent=e=>e&&"_issue-app-modal-dialog-wrapper"!==e.className?"auto"===window.getComputedStyle(e).overflowY||"scroll"===window.getComputedStyle(e).overflowY?e:this.getScrollParent(e.parentElement):null,this.setOverflowNode=()=>{this.overflowNode||(this.overflowNode=this.getScrollParent(this.container)),this.setSticky()},this.setSticky=()=>{const{container:e}=this;if(this.overflowNode&&e){const t=this.overflowNode.getBoundingClientRect(),s=e.getBoundingClientRect(),n=Math.min(t.bottom,window.innerHeight),a=!this.props.isExpanded&&s.bottom>=n;a!==this.state.isSticky&&this.setState({isSticky:a})}},this.addCommentContainer=void 0,this.editorContainer=void 0,this.container=void 0,this.editorEndElement=void 0,this.overflowNode=void 0,this.observer=void 0,this.onEditorExpandedWithAnalytics=()=>{Object(zi.c)().markStartOfInteraction({key:nr.a.COMMENTS.TIME_TO_RENDER_NEW_COMMENT_EDITOR,cancelExisting:!0}),this.props.onEditorExpandedWithAnalytics()},this.onExpand=()=>{Object(zi.c)().markStartOfInteraction({key:nr.a.COMMENTS.TIME_TO_RENDER_NEW_COMMENT_EDITOR,cancelExisting:!0}),this.props.onExpand()}}componentDidMount(){this.overflowNode=this.getScrollParent(this.container),Object(tc.d)()||(window.addEventListener("resize",this.setOverflowNode),this.overflowNode&&(this.overflowNode.addEventListener("scroll",Xo()(this.setSticky,100)),this.setSticky())),this.props.isExpanded&&this.scrollEditorIntoView(),this.setupStickyObserver(),this.props.isEditorFocused&&this.setupStickyHidingObserver()}shouldComponentUpdate(e,t){const s=!Oc.every(t=>this.props[t]===e[t]),n=!Object.entries(this.state).every(([e,s])=>s===t[e]);return s||n}componentDidUpdate(e){!e.isExpanded&&this.props.isExpanded&&(Object(zi.c)().markTimeToFinishTask({key:nr.a.COMMENTS.TIME_TO_RENDER_NEW_COMMENT_EDITOR}),this.scrollEditorIntoView()),e.isEditorFocused!==this.props.isEditorFocused&&(this.props.isEditorFocused?this.setupStickyHidingObserver():this.removeStickyHidingObserver())}componentWillUnmount(){Object(tc.d)()||(window.removeEventListener("resize",this.setOverflowNode),this.overflowNode&&this.overflowNode.removeEventListener("scroll",this.setSticky)),this.observer&&this.container&&this.observer.unobserve(this.container),this.observer&&this.editorEndElement&&this.observer.unobserve(this.editorEndElement)}setupStickyObserver(){if(window.IntersectionObserver&&this.container){const e=e=>{e.forEach(e=>{const t=!this.props.isExpanded&&!e.isIntersecting;switch(e.target){case this.container:this.state.isSticky!==t&&this.setState({isSticky:t});break;case this.editorEndElement:{const t=!e.isIntersecting&&e.boundingClientRect.y>=0&&e.boundingClientRect.y>=e.rootBounds.y;this.state.shouldHide!==t&&this.setState({shouldHide:t});break}}})},t={root:this.overflowNode,rootMargin:"0px",threshold:0};this.observer=new IntersectionObserver(e,t),this.observer.observe(this.container)}}setupStickyHidingObserver(){window.IntersectionObserver&&this.observer&&(()=>s.e("async-editor-view").then(s.bind(null,"./src/packages/issue/issue-view/src/activity/comment/comment-add/add-comment-editor/index.js")))().then(()=>setTimeout(()=>{this.editorEndElement=document.getElementsByClassName("issue-editor-end")[0],this.editorEndElement&&this.observer&&this.observer.observe(this.editorEndElement)}))}removeStickyHidingObserver(){window.IntersectionObserver&&this.observer&&this.editorEndElement&&this.observer.unobserve(this.editorEndElement)}scrollEditorIntoView(){setTimeout(()=>{Object(tr.b)(this.addCommentContainer,{scrollMode:"if-needed",behavior:"auto",block:"end"})})}renderAddCommentEditor(){const{hasDraft:e,newCommentDraft:t,isExpanded:s,intl:n,onEdit:i,onCancel:r,onPaste:o,onBlur:c,isServiceDesk:l,isLoading:u,editorSecondaryToolbarComponents:d}=this.props,p=e&&!Object(A.g)(t)?`\u2022 ${n.formatMessage(uc.draftPlaceholder)}`:n.formatMessage(uc.placeholder),m=a.a.createElement(cc,{placeholder:p,onExpanded:this.onEditorExpandedWithAnalytics}),b=a.a.createElement(lc,{packageName:"issue",fallback:m},a.a.createElement(jc,{externalId:"issue.comment.add-form",defaultValue:t,isExpanded:s,shouldFocus:!0,placeholder:p,onExpanded:this.onEditorExpandedWithAnalytics,onChange:i,onSave:this.onSave,onPaste:o,onBlur:c,onCancel:r,isLoading:u,secondaryToolbarComponents:d}));return l?a.a.createElement(sc.a,{isExpanded:s,onExpanded:this.onExpand,commentId:"NEW_OPTIMISTIC_COMMENT"},b):b}render(){const{isExpanded:e,isEditorFocused:t,avatarUrl:s}=this.props,n=t&&this.state.shouldHide&&!e,i=a.a.createElement(ec.a,null,"M"),r=a.a.createElement("strong",null,a.a.createElement(j.FormattedMessage,uc.commentShortcutHintHeading)),o=()=>!e&&a.a.createElement(pc,null,a.a.createElement(j.FormattedMessage,yc({},uc.commentShortcutHintMessage,{values:{shortcutKey:i,proTipText:r}})));return(a.a.createElement("span",{ref:this.setAddCommentContainerRef},a.a.createElement(fc,{isSticky:this.state.isSticky,isHidden:n},a.a.createElement(gc,{isSticky:this.state.isSticky},a.a.createElement(hc,null,a.a.createElement(Wi.a,{size:"medium",src:s})),a.a.createElement(So.a,{innerRef:this.setEditorContainerRef,"data-test-id":"issue.activity.comment"},this.renderAddCommentEditor(),a.a.createElement(o,null)))),a.a.createElement("span",{ref:this.setContainerRef})))}}function vc(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function kc(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?vc(Object(s),!0).forEach((function(t){wc(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):vc(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function wc(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}Ec.displayName="AddCommentForm",Ec.displayName="AddCommentForm",Ec.defaultProps={isServiceDesk:!1,isLoading:!1,hasDraft:!1,avatarUrl:void 0,newCommentDraft:null,onExpand:o.a,onSave:o.a,onEdit:o.a,onPaste:o.a,onBlur:o.a,onCancel:o.a};var Sc=Object($t.a)([j.injectIntl,Object(is.a)("issueFields",{onSave:"created",onEditorExpandedWithAnalytics:"commentExpanded"}),Object(i.b)(e=>({authorId:Object(C.a)(e),avatarUrl:Object(T.y)(e),newCommentDraft:Object(jn.j)("NEW_OPTIMISTIC_COMMENT")(e),hasDraft:Object(Bi.a)(Object(Fi.a)("NEW_OPTIMISTIC_COMMENT"))(e),isExpanded:Object(jn.w)(e)||null!=Object(jn.i)("NEW_OPTIMISTIC_COMMENT")(e),isServiceDesk:Object(C.v)(e),isEditorFocused:Object(On.F)(e)||Object(jn.A)(e),isLoading:Object(C.v)(e)&&Object(jn.x)(e),shouldShowCommentVisibilitySelect:Object(jn.z)(e),visibility:Object(jn.l)("NEW_OPTIMISTIC_COMMENT")(e)||er.a}),e=>({onExpand:()=>e(Object(tn.c)()),onEdit:t=>e(Object(tn.l)("NEW_OPTIMISTIC_COMMENT",t)),onVisibilityChange:t=>e(Object(tn.m)("NEW_OPTIMISTIC_COMMENT",t)),onPaste:t=>e(Object(tn.u)("NEW_OPTIMISTIC_COMMENT",t)),onBlur:()=>e(Object(tn.b)()),onCancel:()=>e(Object(tn.a)()),getOnSave:(t,s)=>e(Object(tn.y)(kc({id:`NEW_OPTIMISTIC_COMMENT_${(new Date).getTime()}`,createdDate:(new Date).toISOString(),isNewComment:!0},t),s))}),(e,t,s)=>kc(kc(kc(kc({},s),e),t),{},{editorSecondaryToolbarComponents:e.shouldShowCommentVisibilitySelect?[a.a.createElement(vo,{key:"commentVisibilitySelect",initialValue:e.visibility,onChange:t.onVisibilityChange})]:void 0,onSave:(s,n)=>{e.shouldShowCommentVisibilitySelect&&n.update({isCommentRestricted:"public"!==e.visibility.type}),t.getOnSave({authorId:e.authorId,bodyAdf:s,bodyHtml:void 0,richContent:void 0,visibility:e.visibility},n)},onEditorExpandedWithAnalytics:s=>{t.onExpand(),Object(za.b)(s,"addCommentEditor expanded",{hasDraft:e.hasDraft})}}))])(Ec),Ic=s("./src/packages/issue/issue-view/src/activity/common/component/feed-skeleton/view.js");const Cc=$.default.div([""]);var Tc=e=>{const{list:t,loadingStage:s,canAddComments:i,numNewerCommentsToLoad:r}=e,[,{register:o}]=Object(Jo.b)(),c=Object(n.useCallback)(e=>{o("PERMALINK",e)},[o]);return"LOADING"===s&&r>0?a.a.createElement(ir.d,null,a.a.createElement(Ic.a,null)):a.a.createElement("span",null,Object(qt.isOptInBackToBentoEnabled)()&&a.a.createElement(Qo.a,{name:"PERMALINK"},a.a.createElement(Cc,{innerRef:c})," "),t,i&&a.a.createElement(Sc,null))},Pc=s("./src/packages/issue/issue-view/src/activity/common/component/load-more-button/index.js");const _c=$.default.div(["margin:"," 0 ","px 0;"],aa,1.5*q.e);class xc extends n.Component{componentDidMount(){const{fetchCommentVisibilities:e}=this.props;e&&e()}UNSAFE_componentWillReceiveProps(e){e.loadedComments!==this.props.loadedComments&&0===e.loadedComments&&e.totalComments>0&&(0===e.startIndex?e.fetchMoreOlderComments():e.fetchMoreNewerComments())}render(){const{commentIds:e,canAddComments:t,fetchMoreNewerComments:s,fetchMoreOlderComments:n,totalComments:i,loadedComments:r,fullIssueUrl:o,isLoadingMoreComments:c,startIndex:l,loadingStage:u}=this.props;if(!e.length&&!t)return null;const{numNewerCommentsToLoad:d,numOlderCommentsToLoad:p}=Object(Ri.a)(i,r,l),{hasPermalink:m,permalinkId:b}=Object(qa.a)("Comments"),f=e.length?a.a.createElement(a.a.Fragment,null,a.a.createElement(Pc.a,{onClick:n,numberToLoad:p,isDisabled:c,isLoading:c},a.a.createElement(j.FormattedMessage,{id:"issue.comments-view-older-comments-text",defaultMessage:"View {numberToLoad, plural, one {1 older comment} other {{numberToLoad} older comments}}",values:{numberToLoad:p}})),a.a.createElement(_c,{"data-test-id":"issue.activity.comments-list"},e.map(e=>a.a.createElement(Go,{key:e,commentId:e,fullIssueUrl:o,isHighlighted:m&&e===b}))),a.a.createElement(Pc.a,{onClick:s,numberToLoad:d,isDisabled:c,isLoading:c},a.a.createElement(j.FormattedMessage,{id:"issue.comments-view-newer-comments-text",defaultMessage:"View {numberToLoad, plural, one {1 newer comment} other {{numberToLoad} newer comments}}",values:{numberToLoad:d}}))):null;return a.a.createElement(Tc,{loadingStage:u,canAddComments:t,list:f,numNewerCommentsToLoad:d})}}xc.displayName="Comments",xc.displayName="Comments",xc.defaultProps={canAddComments:!1};var Dc=Object($t.a)([Object(v.b)("comment"),Yo,Object(b.a)(),Object(i.b)(e=>({commentIds:Object(jn.K)(e),canAddComments:Object(jn.b)(e),totalComments:Object(jn.J)(e),startIndex:Object(jn.I)(e),loadedComments:Object(jn.F)(e),isLoadingMoreComments:Object(jn.E)(e),baseUrl:Object(C.g)(e),issueKey:Object(C.B)(e),shouldFetchCommentVisibilities:Object(jn.z)(e),fullIssueUrl:Object(Ni.a)(e),loadingStage:Object(jn.G)(e)}),e=>({fetchMoreOlderComments:()=>{e(Object(tn.t)())},fetchMoreNewerComments:()=>{e(Object(tn.s)())}}))])(xc),Ac=s("./src/packages/issue/issue-view/src/selectors/approval-selector/index.js"),Mc=s("./node_modules/@atlaskit/logo/dist/es2019/JiraServiceManagementLogo/Icon.js"),Lc=s("./src/packages/servicedesk/approval-decision/src/ui/index.js"),Rc=Object(j.defineMessages)({approvalDecisionIconLabel:{id:"issue-view.activity.servicedesk.comments.approval-decision.approval-decision-icon-label",defaultMessage:"Jira Service Management icon"}});const Nc=e=>{const{approval:t,intl:s}=e;if(!t)return null;const n=t.completedDate||t.createdDate||{},i=new Date(n.epochMillis).toJSON();return a.a.createElement(Lc.a,{icon:a.a.createElement(Mc.a,{size:"small",label:s.formatMessage(Rc.approvalDecisionIconLabel)}),finalDecision:t.finalDecision,status:t.status,time:i,approvers:t.approvers,timeZone:e.timeZone})};Nc.displayName="ServicedeskApprovalDecision";var Uc=Object(j.injectIntl)(Nc);const Fc=$.default.div(["margin:"," 0 ","px 0;"],aa,1.5*q.e);class Vc extends n.Component{constructor(...e){super(...e),this.renderJsdActivityItems=e=>{const{timeZone:t,fullIssueUrl:s}=this.props,{hasPermalink:n,permalinkId:i}=Object(qa.a)("Comments");return a.a.createElement(Fc,{"data-test-id":"issue.issue-view.activity.servicedesk.jsd-activity-items-list"},e.map(e=>{switch(e.type){case"COMMENT":return e.comment&&a.a.createElement(Go,{key:e.comment.id,commentId:e.comment.id,fullIssueUrl:s,isHighlighted:n&&e.comment.id===i});case"APPROVAL":return e.approval&&a.a.createElement(Uc,{key:e.approval.id,approval:e.approval,timeZone:t});default:return null}}))}}UNSAFE_componentWillReceiveProps(e){e.loadedComments!==this.props.loadedComments&&0===e.loadedComments&&e.totalComments>0&&(0===e.startIndex?e.fetchMoreOlderComments():e.fetchMoreNewerComments())}render(){const{canAddComments:e,fetchMoreOlderComments:t,fetchMoreNewerComments:s,isLoadingMoreComments:n,jsdActivityItems:i,startIndex:r,totalComments:o,loadedComments:c,totalApprovalDecisionsItems:l,loadingStage:u}=this.props;if(!i.length&&!e)return null;const{numNewerActivityItemsToLoad:d,numOlderActivityItemsToLoad:p}=Object(Ri.b)(o,c,r,i,l),m=i.length?a.a.createElement(a.a.Fragment,null,a.a.createElement(Pc.a,{onClick:()=>{t()},numberToLoad:p,isDisabled:n,isLoading:n},a.a.createElement("div",{"data-test-id":"issue.issue-view.activity.servicedesk.comments-view.view-older-comments-button"},a.a.createElement(j.FormattedMessage,{id:"issue.comments-view-older-comments-text",defaultMessage:"View {numComments, plural, one {1 older comment} other {{numComments} older comments}}",values:{numComments:p}}))),this.renderJsdActivityItems(i),a.a.createElement(Pc.a,{onClick:()=>{s()},numberToLoad:d,isDisabled:n,isLoading:n},a.a.createElement(j.FormattedMessage,{id:"issue.comments-view-newer-comments-text",defaultMessage:"View {numComments, plural, one {1 newer comment} other {{numComments} newer comments}}",values:{numComments:d}}))):null;return a.a.createElement(Tc,{loadingStage:u,canAddComments:e,list:m,numNewerCommentsToLoad:d})}}Vc.displayName="ServicedeskComments",Vc.displayName="ServicedeskComments",Vc.defaultProps={canAddComments:!1};var Kc=Object($t.a)([Object(v.b)("ServicedeskComments"),Object(i.b)(e=>({canAddComments:Object(jn.b)(e),totalComments:Object(jn.J)(e),startIndex:Object(jn.I)(e),loadedComments:Object(jn.F)(e),isLoadingMoreComments:Object(jn.E)(e),timeZone:Object(T.A)(e),jsdActivityItems:Object(Ac.c)(e),totalApprovalDecisionsItems:Object(Ac.a)(e),fullIssueUrl:Object(Ni.a)(e),loadingStage:Object(jn.G)(e)}),e=>({fetchMoreOlderComments:()=>{e(Object(tn.t)())},fetchMoreNewerComments:()=>{e(Object(tn.s)())}}))])(Vc),Bc=s("./src/packages/issue/issue-view/src/common/actions/timestamp-display-setting-actions.js"),Wc=s("./src/packages/issue/issue-view/src/common/state/selectors/timestamp-display-setting-selector.js"),Hc=s("./src/packages/issue/issue-view/src/ecosystem/forge/forge-extensions-selector.js"),Gc=s("./src/packages/forge/forge-ui-async/src/ui/issue-activity/async.js");const $c=$.default.div(["margin-top:",";"],aa),qc=({source:e,extension:t,context:s})=>{const i=Object(n.useMemo)(()=>({source:e}),[e]);return(a.a.createElement(Ei.a,{analyticsData:i,shouldFireScreenEvent:!0},a.a.createElement($c,null,a.a.createElement(Gc.a,{extension:t,platformContext:s,analyticsData:i}))))};qc.displayName="ForgeIssueActivity";var zc=qc;const Yc=e=>t=>s=>a.a.createElement(M.a,{id:e,packageName:"issue"},a.a.createElement(ne.a,{fallback:a.a.createElement(ir.d,null,a.a.createElement(Ic.a,null))},a.a.createElement(t,s))),Qc=Yc("activity-feed-item-history")(Object(ne.f)(()=>s.e("async-activity-feed-item-history").then(s.bind(null,"./src/packages/issue/issue-actions/issue-history/src/index.js")),{moduleId:"./src/packages/issue/issue-actions/issue-history/src/index.js"}));Qc.displayName="History";const Jc=Yc("activity-feed-item-worklog")(Object(ne.f)(()=>s.e("async-activity-feed-item-worklog").then(s.bind(null,"./src/packages/issue/issue-view/src/activity/worklog/index.js")),{moduleId:"./src/packages/issue/issue-view/src/activity/worklog/index.js"}));Jc.displayName="Worklog";const Zc=Yc("activity-feed-item-polaris-insights")(Object(ne.f)(()=>s.e("async-activity-feed-item-polaris-insights").then(s.bind(null,"./src/packages/polaris/insights/src/index.js")),{moduleId:"./src/packages/polaris/insights/src/index.js"}));Zc.displayName="PolarisInsights";var Xc=Object($t.a)([Object(i.b)(e=>({baseUrl:Object(C.g)(e),issueKey:Object(C.B)(e),timeZone:Object(T.A)(e),timestampDisplaySetting:Object(Wc.a)(e),context:Object(Hc.b)(e),source:Object(C.b)(e)}),e=>({onSwitchTimestampDisplaySetting:t=>{e(Object(Bc.a)(t))}}))])(({selectedItem:e,baseUrl:t,issueKey:s,timeZone:n,timestampDisplaySetting:i,onSwitchTimestampDisplaySetting:r,context:o,source:c})=>{if(!e)return null;switch(e.type){case"JSDComments":return a.a.createElement(Kc,null);case"Comments":return a.a.createElement(Dc,null);case"PolarisInsights":return a.a.createElement(Zc,{issueKey:Object(Li.l)(s)});case Ha:return a.a.createElement(la,{appKey:e.appKey,moduleKey:e.moduleKey,options:e.options,appName:e.name});case"FORGE_ENTITY_TYPE":return a.a.createElement(zc,{key:e.extension.id,source:c,context:o,extension:e.extension});case"History":return a.a.createElement(Qc,{baseUrl:Object(Li.b)(t),issueKey:Object(Li.l)(s),timeZone:n,timestampDisplaySetting:i,onSwitchTimestampDisplaySetting:r});case"Worklog":return a.a.createElement(Jc,{timeZone:n,timestampDisplaySetting:i,onSwitchTimestampDisplaySetting:r});default:return null}});function el(){return(el=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function tl(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function sl(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function nl(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?sl(Object(s),!0).forEach((function(t){al(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):sl(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function al(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const il=["Comments","JSDComments","History","Worklog"];class rl extends n.Component{constructor(...e){super(...e),this.getAnalyticsData=e=>{switch(e.type){case Wa:return{extensionId:e.extension.id};case Ha:return Object(Wn.a)(e.appKey,e.moduleKey);default:return{}}},this.getEcosystemActivity=()=>this.props.ecosystemModules.map(e=>{switch(e.type){case Wa:return nl({key:Object(Va.e)(e.appKey,e.moduleKey)},e);case Ha:return nl({key:`${e.moduleKey}${e.appKey}`},e);default:return y.a.safeError("issue.issue-actions.activity-feed","Tried to show ecosystem activity with other type than connect or forge"),null}}).filter(Boolean),this.getJSDCommentActivity=()=>{const{commentIds:e,canAddComments:t,intl:s}=this.props;return e.length||t?[{key:"JSDComments",type:"JSDComments",name:s.formatMessage(Qa.a.comments)}]:[]},this.getCommentActivity=()=>{const{commentIds:e,canAddComments:t,intl:s}=this.props;return e.length||t?[{key:"Comments",type:"Comments",name:s.formatMessage(Qa.a.comments)}]:[]},this.getHistoryActivity=()=>[{key:"History",type:"History",name:this.props.intl.formatMessage(Qa.a.history)}],this.getWorklogActivity=()=>this.props.shouldShowWorklog?[{key:"Worklog",type:"Worklog",name:this.props.intl.formatMessage(Qa.a.worklog)}]:[],this.getPolarisInsights=()=>this.props.isPolarisProject?[{key:"PolarisInsights",type:"PolarisInsights",name:this.props.intl.formatMessage(Qa.a.polarisData)}]:[],this.getActivityItems=()=>{const{isServiceDesk:e}=this.props;return[...e?this.getJSDCommentActivity():this.getCommentActivity(),...this.getHistoryActivity(),...this.getWorklogActivity(),...this.getPolarisInsights(),...this.getEcosystemActivity()]},this.getSelectedItem=(e=[])=>{if(this.props.selectedItem)return this.props.selectedItem;const t=Object(qa.b)();if(t){const{permalinkType:s}=t,n=e.find(e=>e.type===s);if(n)return n}return e[0]},this.selectActivityItem=(e,t,s)=>{const n=[s,this.getAnalyticsData(e)];Object(za.h)(t,...n),this.props.onSwitchSelectedActivityItem(e)},this.selectSortOrder=(e,t,s)=>{Object(za.h)(t,s),this.props.onSwitchSelectedActivitySortOrder(e)},this.renderChangeboardingMount=()=>{const{permalinkType:e}=Object(qa.b)()||{};return"Comments"===e||"Worklog"===e?a.a.createElement(Ws.a,{onMount:t=>{Object(za.b)(t,"Comments"===e?"permalinkWithChangeboardingModalComments mounted":"permalinkWithChangeboardingModalWorklog mounted")}}):null},this.renderActivitySortDropdown=(e,t)=>{const{selectedSortOrder:s,setActivitySortRef:n}=this.props;if(!s)return null;const i=e.length>1?ti:si,r=!il.includes(t.type);return a.a.createElement(i,{innerRef:n},a.a.createElement(yi,{selectedSortOrder:s,onSelectSortOrder:this.selectSortOrder,isDisabled:r}))},this.renderActvityHeadingRowOld=(e,t)=>{const{intl:{formatMessage:s},setActivityItemsRef:n,shouldDisplayDropdown:i}=this.props;return e.length>1?a.a.createElement(si,{leftAlign:!0},a.a.createElement(ni,{innerRef:n},a.a.createElement(Ba.b,null,s(Qa.a.filterBy)),a.a.createElement(Ba.d,{leftAlign:!0},i?a.a.createElement(_i,{items:e,selectedItem:t,onSelectActivityItem:this.selectActivityItem}):a.a.createElement(Mi,{items:e,selectedItem:t,onSelectActivityItem:this.selectActivityItem})))):null},this.renderActvityHeadingRow=(e,t)=>{const{intl:{formatMessage:s},setActivityItemsRef:n,shouldDisplayDropdown:i}=this.props;return e.length>1?a.a.createElement(si,null,a.a.createElement(ni,{innerRef:n},a.a.createElement(Ba.b,null,s(Qa.a.filterBy)),a.a.createElement(Ba.d,{leftAlign:!0},i?a.a.createElement(_i,{items:e,selectedItem:t,onSelectActivityItem:this.selectActivityItem}):a.a.createElement(Mi,{items:e,selectedItem:t,onSelectActivityItem:this.selectActivityItem}))),this.renderActivitySortDropdown(e,t)):this.renderActivitySortDropdown(e,t)}}render(){const{permalinkType:e}=Object(qa.b)()||{};if(("Worklog"===e||!this.props.commentIds.length)&&this.props.isPreview)return a.a.createElement(Ga.a,null);const t=this.getActivityItems(),s=this.getSelectedItem(t);if(!t.length||!s)return null;const{intl:{formatMessage:n}}=this.props;return(a.a.createElement(Ks.a,{sourceType:Bs.f,sourceName:"activityFeed"},this.renderChangeboardingMount(),a.a.createElement(Ba.c,{leftAlign:!0},a.a.createElement(Ba.e,{"data-test-id":"issue-activity-feed.heading"},t.length>1?n(Qa.a.activity):s.name)),Object(qt.isActivitySortingEnabled)()?this.renderActvityHeadingRow(t,s):this.renderActvityHeadingRowOld(t,s),a.a.createElement(Xc,{selectedItem:s})))}}rl.displayName="FeedDisplay",rl.defaultProps={isServiceDesk:!1,shouldDisplayDropdown:!1,canAddComments:!1,selectedItem:null,ecosystemModules:[]},rl.displayName="FeedDisplay";const ol=e=>{const{projectKey:t}=e,s=tl(e,["projectKey"]),n=Object(Ya.a)(t);return a.a.createElement(rl,el({},s,{isPolarisProject:n}))};ol.displayName="FeedDisplayWrapper";var cl=Object($t.a)([j.injectIntl,Object(i.b)(e=>({isPreview:Object(T.t)(e),isServiceDesk:Object(C.v)(e),shouldShowWorklog:Object(_.d)(e),canAddComments:Object(jn.b)(e),commentIds:Object(jn.K)(e),ecosystemModules:Object(Hn.e)(e),selectedItem:Object($a.a)(e),selectedSortOrder:Object($a.b)(e),projectKey:Object(C.I)(e)}),e=>({onSwitchSelectedActivityItem:t=>{e(Object(Ka.a)(t))},onSwitchSelectedActivitySortOrder:t=>{e(Object(Ka.b)(t)),e(Object(Ka.c)(t))}}))])(ol);class ll extends n.Component{constructor(...e){super(...e),this.state={shouldDisplayDropdown:!1},this.componentDidMount=()=>{this.setShouldDisplayDropdown()},this.componentDidUpdate=()=>{this.setShouldDisplayDropdown()},this.setActivityItemsRef=e=>{this.activityItemsRef=e},this.setActivitySortRef=e=>{this.activitySortRef=e},this.setShouldDisplayDropdown=()=>{const{containerWidth:e}=this.props,t=this.updateAndGetTotalWidth();if(0!==e&&0!==t){const s=e<=t+15;this.state.shouldDisplayDropdown!==s&&this.setState({shouldDisplayDropdown:s})}},this.getActivityItemsRefWidth=()=>this.activityItemsRef?this.activityItemsRef.clientWidth:0,this.getActivitySortRefWidth=()=>this.activitySortRef?this.activitySortRef.clientWidth:0,this.updateAndGetTotalWidth=()=>{const e=Object(qt.isActivitySortingEnabled)()?this.getActivityItemsRefWidth()+this.getActivitySortRefWidth():this.getActivityItemsRefWidth();return this.totalExpandedWidth<e&&(this.totalExpandedWidth=e),this.totalExpandedWidth},this.totalExpandedWidth=0,this.activityItemsRef=void 0,this.activitySortRef=void 0}render(){const{shouldDisplayDropdown:e}=this.state;return(a.a.createElement(cl,{shouldDisplayDropdown:e,setActivityItemsRef:this.setActivityItemsRef,setActivitySortRef:this.setActivitySortRef}))}}ll.displayName="ActivityFeed",ll.defaultProps={containerWidth:0};var ul=Object($t.a)([Fa.a])(ll),dl=s("./src/packages/issue/issue-view-layout/src/services/main.js"),pl=s("./src/packages/issue/issue-view-layout-templates/common/item-list/src/index.js"),ml=s("./node_modules/@atlaskit/tabs/dist/es2019/components/TabItem.js"),bl=s("./node_modules/@atlaskit/tabs/dist/es2019/components/Tabs.js"),fl=s("./src/packages/issue/issue-context-service/src/main.js"),gl=s("./src/packages/issue/fields/field-base/src/services/field-config-service/main.js"),hl=s("./src/packages/issue/fields/field-base/src/services/field-value-service/main.js"),yl=s("./src/packages/issue/issue-tabs/src/services/main.js"),Ol=s("./src/packages/issue/issue-view/src/common/skeleton/skeleton-background-view.js"),jl=s("./src/packages/platform/ui/field-config/src/index.js");const El=$.default.div(["display:flex;flex-direction:column;width:100%;"]),vl=$.default.div(["position:relative;height:14px;"]),kl=$.default.div(["position:relative;display:flex;width:","px;margin:10px ","px 9px ","px;"],10*q.e,q.e,q.e),wl=e=>a.a.createElement(he.a,{content:e.data.label,position:"top"},a.a.createElement(ml.a,e));wl.displayName="TooltipItem";const Sl=()=>a.a.createElement(kl,null,a.a.createElement(Ol.b,null),a.a.createElement(vl,null));Sl.displayName="SSRItem";const Il=Object(n.memo)(({tabsContent:e})=>a.a.createElement(bl.a,{components:{Item:wl},tabs:e}),()=>!0);var Cl=({items:e,area:t})=>{const[{issueTabs:s}]=Object(yl.a)(),i=e.filter(e=>"TabLayout"!==e.__typename),r={label:"Default",content:a.a.createElement(El,null,a.a.createElement(pl.a,{items:i,area:t}))};if(0===Object.keys(s).length){const e=[r,{}];return(a.a.createElement(bl.a,{components:{Item:Sl},tabs:e}))}const o=e.filter(e=>"TabLayout"===e.__typename),c=Object(fl.f)(),[l]=Object(gl.c)(c),[u]=Object(hl.c)(c),d=Object(jl.T)(),p=Object(n.useCallback)(e=>{if(!l||!l[e])return!1;const t=u&&(null===u[e]||void 0===u[e]);if(!l[e].isEditable&&t)return!1;const{custom:s,system:n}=l&&l[e].schema||{},a=(null!==s?s:null)||n;return void 0!==a&&Object.values(d).includes(a)},[l,u,d]),m=o.map(({id:e})=>{const n=s[e];if(void 0!==n&&n.name&&n.items&&n.items.length>0){const e=n.items.filter(e=>p(e.id));return e.length<1?null:{label:n.name,content:a.a.createElement(El,null,a.a.createElement(pl.a,{items:e,area:t}))}}return null}).filter(e=>null!==e),b=i.length>0?[r,...m]:m;if(1===b.length){const e=b[0];return e&&e.content}return(a.a.createElement(Il,{tabsContent:b}))},Tl=s("./src/packages/servicedesk/request-details-panel/src/main.js"),Pl=s("./src/packages/issue/issue-view/src/views/connect-field.js"),_l=s("./src/packages/issue/epic-color/src/common/utils.js"),xl=s("./src/packages/issue/issue-view/src/selectors/issue-types-selector.js");const Dl=Object(yn.createSelector)(Object(On.q)("issuetype"),e=>e&&e.value.id),Al=Object(yn.createSelector)(Object(On.e)("com.pyxis.greenhopper.jira:jsw-issue-color"),Object(On.e)("com.pyxis.greenhopper.jira:gh-epic-color"),(e,t)=>e&&e.key||t&&t.key),Ml=Object(yn.createSelector)(Object(On.e)("com.pyxis.greenhopper.jira:gh-epic-color"),Object(On.e)("com.pyxis.greenhopper.jira:jsw-issue-color"),(e,t)=>e||t);Object(yn.createSelector)(Dl,Al,xl.d,(e,t,s)=>{if(!s)return!1;const n=s.find(t=>t.id===e);return!(!n||!n.fields)&&t in n.fields});var Ll=s("./src/packages/platform/utils/fetch/src/utils/requests.js"),Rl=s("./src/packages/platform/utils/xsrf-token/src/index.js"),Nl=(e,t)=>Object(Ll.d)(`${e.baseUrl}/secure/AjaxIssueAction.jspa?decorator=none`,{headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Object(c.stringify)({[e.fieldId]:e.value,issueId:Object(T.l)(t),skipScreenCheck:!0,atl_token:Object(Rl.a)(),singleFieldEdit:!0})}),Ul=s("./node_modules/memoize-one/dist/memoize-one.esm.js"),Fl=s("./node_modules/@atlaskit/color-picker/dist/es2019/index.js"),Vl=Object(j.defineMessages)({readOnlyLabel:{id:"issue.views.issue-base.foundation.read-only-label",defaultMessage:"Read-only Color, {color} selected"},label:{id:"issue.views.issue-base.foundation.label",defaultMessage:"Edit color"},purple:{id:"issue.views.issue-base.foundation.purple",defaultMessage:"purple"},darkPurple:{id:"issue.views.issue-base.foundation.dark-purple",defaultMessage:"dark purple"},blue:{id:"issue.views.issue-base.foundation.blue",defaultMessage:"blue"},darkBlue:{id:"issue.views.issue-base.foundation.dark-blue",defaultMessage:"dark blue"},green:{id:"issue.views.issue-base.foundation.green",defaultMessage:"green"},darkGreen:{id:"issue.views.issue-base.foundation.dark-green",defaultMessage:"dark green"},teal:{id:"issue.views.issue-base.foundation.teal",defaultMessage:"teal"},darkTeal:{id:"issue.views.issue-base.foundation.dark-teal",defaultMessage:"dark teal"},yellow:{id:"issue.views.issue-base.foundation.yellow",defaultMessage:"yellow"},darkYellow:{id:"issue.views.issue-base.foundation.dark-yellow",defaultMessage:"dark yellow"},orange:{id:"issue.views.issue-base.foundation.orange",defaultMessage:"orange"},darkOrange:{id:"issue.views.issue-base.foundation.dark-orange",defaultMessage:"dark orange"},grey:{id:"issue.views.issue-base.foundation.grey",defaultMessage:"grey"},darkGrey:{id:"issue.views.issue-base.foundation.dark-grey",defaultMessage:"dark grey"}});s("./node_modules/focus-visible/dist/focus-visible.js");const Kl=$.default.div(["margin-left:-2px;padding-top:","px;padding-right:","px;height:","px;button:focus{box-shadow:none;}"],q.e,q.e,4*q.e),Bl=$.default.div(["position:absolute;top:1px;left:1px;width:","px;height:","px;border-radius:3px;background:",";"],3*q.e,3*q.e,e=>e.selectedColor),Wl=$.default.button(["display:inline-block;position:relative;width:","px;height:","px;border:2px solid transparent;box-sizing:border-box;border-radius:6px;border-color:transparent;background-color:transparent;padding:0;outline:none;transition:box-shadow 0.2s cubic-bezier(0.47,0.03,0.49,1.38);&:focus.focus-visible{border-color:",";}"],3.75*q.e,3.75*q.e,Ae.a.B100);class Hl extends n.Component{constructor(...e){super(...e),this.onChange=e=>{const{onChange:t,onConfirm:s}=this.props;t(e),s()},this.generatePalette=Object(Ul.a)((e,t)=>e.map(({value:e,label:s})=>({value:e,label:t.formatMessage(Vl[s])})))}render(){const{value:e,intl:t,isEditable:s}=this.props,n=Object(_l.g)();return a.a.createElement(Kl,{"data-test-id":"issue.views.issue-base.foundation.color.color-picker-wrapper"},s?a.a.createElement(Fl.c,{label:t.formatMessage(Vl.label),popperProps:{positionFixed:!0,modifiers:{offset:{offset:"-10 5"}}},cols:n.length/2,selectedColor:e,palette:this.generatePalette(n,t),onChange:this.onChange}):a.a.createElement(Gl,{intl:t,value:e,palette:this.generatePalette(n,t)}))}}Hl.displayName="UnsafeColorPicker",Hl.displayName="ColorPicker";const Gl=e=>{const t=e.palette.filter(t=>t.value===e.value)[0].label,s=e.intl.formatMessage(Vl.readOnlyLabel,{color:t});return a.a.createElement(Wl,{"aria-label":s},a.a.createElement(Bl,{selectedColor:e.value}))};function $l(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function ql(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?$l(Object(s),!0).forEach((function(t){zl(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):$l(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function zl(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}Gl.displayName="ReadOnlyColorPicker";const Yl=(e,t)=>{const s=Object(On.q)(t.fieldId)(e),n=!!s&&"com.pyxis.greenhopper.jira:gh-epic-color"===s.schema.custom;let a={shouldDiscardChangeOnFailure:!0,onSaveFailureFlagType:bs.v};return n&&(a=ql({saveField:Nl},a)),ql(ql({},a),{},{fieldId:t.fieldId,transformFromStateValue:e=>((e,t=!1)=>t?Object(_l.h)(Object(_l.e)(e)):Object(_l.h)(Object(_l.j)(e)))(e,n),transformToStateValue:e=>((e,t=!1)=>t?Object(_l.d)(Object(_l.f)(e)):Object(_l.i)(Object(_l.f)(e)))(e,n)})},Ql=Object($t.a)([j.injectIntl,Object(Pl.a)((e,t)=>Yl(e,t))])(Hl);var Jl=Object($t.a)([Object(i.b)(e=>({field:Ml(e)}),{})])(e=>e.field?a.a.createElement(Ql,{fieldId:e.field.key}):null),Zl=s("./src/packages/common-legacy-do-not-add-anything-new/src/experience-tracking/viewing/view/common/context/index.js"),Xl=s("./node_modules/@atlaskit/analytics-next--current/dist/esm/UIAnalyticsEvent.js"),eu=s("./node_modules/@atlaskit/inline-edit--current/dist/esm/InlineEditStateless.js"),tu=s("./src/packages/platform/utils/constants/src/analytics-sources.js"),su=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/inline-edit/messages.js"),nu=s("./src/packages/issue/fields/components/error-flag/src/main.js");function au(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function iu(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?au(Object(s),!0).forEach((function(t){ru(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):au(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function ru(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const ou={action:"confirmed",actionSubject:"inlineEdit",attributes:{componentName:"inlineEdit"}},cu=iu(iu({},ou),{},{action:"cancelled"});var lu=s("./src/packages/issue/fields/summary/src/services/index.js"),uu=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/text-area/index.js");const du=Object($.css)(["@media screen and (-webkit-min-device-pixel-ratio:0){word-break:break-word;}@media screen and (-webkit-transition){word-break:break-word;}@-moz-document url-prefix(){overflow-wrap:anywhere;}@media screen and (-ms-high-contrast:active),(-ms-high-contrast:none){word-break:break-all;}"]),pu=$.default.h1(["",";width:100%;margin:0;padding:0;color:",";",";"],Ae.c.h700(),Ae.a.heading,du),mu=Object(n.memo)(({defaultValue:e,passedRef:t,onChange:s})=>a.a.createElement(pu,{innerRef:t,"data-test-id":"issue.views.issue-base.foundation.summary.heading.writeable"},a.a.createElement(uu.a,{shouldAutoFocus:!0,value:e,onChange:s})));var bu=Object(j.defineMessages)({errorEmpty:{id:"issue-field-summary.error-empty",defaultMessage:"You must specify a summary of the issue."},errorTitle:{id:"issue-field-summary.error-title",defaultMessage:"We couldn't save the issue summary."},errorMessage:{id:"issue-field-summary.error-message",defaultMessage:"Check your connection, then give it another try."}});const fu=({value:e})=>{const t=null===e?"":e.toString();return a.a.createElement(pu,{"data-test-id":"issue.views.issue-base.foundation.summary.heading"},t)};fu.displayName="SummaryView";var gu=Object(n.memo)(e=>{const{onCancel:t,onEdit:s,onEscape:i,onConfirm:r,onEnter:o,onUpdate:c,readView:l,editView:u,label:d,issueKey:p,source:m,onFailure:b,onRenderSuccess:f,onEditFailure:g}=e,h=m&&m.value===tu.a.MOBILE_ISSUE,[y,O]=Object(n.useState)(!1),[j,E]=Object(n.useState)(!1),{formatMessage:v}=Object(Te.c)(),k=j?v(bu.errorEmpty):void 0,w=Object(n.useRef)(),S=Object(n.useRef)(),[{value:I,error:C,fieldConfig:T},{saveValue:P,resetError:_}]=Object(lu.a)({issueKey:Object(Li.l)(p),onSuccess:e=>{c&&c(e)},onFailure:e=>{b&&b(e,S.current),y&&g&&g("summary",{errorMessage:e.message})}}),[x,D]=Object(n.useState)(I),A=!!T&&T.isEditable;Object(n.useEffect)(()=>{f&&f()},[]),Object(n.useEffect)(()=>{S.current=I,C&&O(!0),y||D(I)},[C,y,I]);const M=Object(n.useCallback)(e=>{x!==I?(P(x,null,e),O(!1)):O(!1),Object(za.h)(e)},[P,x,I]),L=Object(n.useCallback)(e=>{_(),O(!1),D(I),Object(za.h)(e)},[_,I]),R=Object(n.useCallback)(e=>{document&&document.activeElement&&document.activeElement.blur(),E(!1),L(e),t&&t(e)},[t,L]),N=Object(n.useCallback)(e=>{null!==x&&""!==x?(document&&document.activeElement&&document.activeElement.blur(),M(e),r&&r(e,x)):j||E(!0)},[j,r,M,x]),U=Object(n.useCallback)(e=>{O(!0),Object(za.h)(e),s&&s(e)},[s]),F=Object(n.useCallback)(e=>{_();const t=""===e?null:e.toString();null!==t&&E(!1),D(t)},[_,D]),V=Object(n.useCallback)(e=>{L(e),i&&i(e)},[i,L]),B=Object(n.useCallback)(e=>{M(e),o&&o(e)},[o,M]),W=Object(n.useCallback)(()=>{const e=new Xl.a({payload:ou});N(e)},[N]),H=Object(n.useCallback)(e=>{e.preventDefault(),e.stopPropagation();const t=new Xl.a({payload:cu});R(t)},[R]),G=Object(n.useCallback)(()=>{if(A)return void 0!==u&&"function"==typeof u?Object(n.createElement)(u,{passedRef:w,defaultValue:x,onChange:F}):a.a.createElement(mu,{passedRef:w,defaultValue:x,onChange:F})},[A,u,x,F]);if(w.current&&y&&j){const e=w.current,t=e instanceof HTMLElement?e.querySelector("textarea"):void 0,s=document?document.activeElement:null;t&&t!==s&&t.focus()}return(a.a.createElement(K.a,{onEnter:W,onEscape:H},C&&a.a.createElement(nu.a,{error:C,title:bu.errorTitle,description:bu.errorMessage}),a.a.createElement(eu.a,{label:d,isLabelHidden:!0,defaultValue:x,readView:(()=>void 0!==l&&"function"==typeof l?Object(n.createElement)(l,{value:I}):a.a.createElement(fu,{value:I}))(),editView:G(),onCancel:R,onConfirm:N,onEditRequested:U,onEnter:B,onEscape:V,isFitContainerWidthReadView:!h,isEditable:A,isEditing:y,invalidMessage:k,isInvalid:j,editButtonLabel:v(su.a.editButtonLabel,{fieldName:d}),confirmButtonLabel:v(su.a.confirmButtonLabel,{fieldName:d}),cancelButtonLabel:v(su.a.cancelButtonLabel,{fieldName:d})})))}),hu=s("./src/packages/issue/issue-view/src/issue-field/state/actions/field-save-actions.js"),yu=s("./src/packages/issue/issue-view/src/views/common/experience-tracking/view-experience/index.js"),Ou=s("./src/packages/issue/issue-view/src/views/common/experience-tracking/edit-experience/index.js");const ju=Object($.css)(["@media screen and (-webkit-min-device-pixel-ratio:0){word-break:break-word;}@media screen and (-webkit-transition){word-break:break-word;}@-moz-document url-prefix(){overflow-wrap:anywhere;}@media screen and (-ms-high-contrast:active),(-ms-high-contrast:none){word-break:break-all;}"]);var Eu=$.default.h1(["",";width:100%;margin:0;padding:0;color:",";",";"],Ae.c.h700(),Ae.a.heading,ju);const vu=({value:e,onChange:t})=>a.a.createElement(Eu,{"data-test-id":"issue.views.issue-base.foundation.summary.heading.writeable"},a.a.createElement(uu.a,{shouldAutoFocus:!0,value:e,onChange:t}));vu.displayName="SummaryFieldView";var ku=vu;const wu=({value:e})=>a.a.createElement(Eu,{"data-test-id":"issue.views.issue-base.foundation.summary.heading"},e);wu.displayName="SummaryReadOnlyView";var Su=wu;class Iu extends n.Component{constructor(...e){super(...e),this.onCancel=()=>{document&&document.activeElement&&document.activeElement.blur(),Object(zi.c)().markStartOfInteraction({key:nr.a.SUMMARY.TIME_TO_RENDER_READ_VIEW_ON_CANCEL}),this.props.onCancel()},this.onConfirm=()=>{document&&document.activeElement&&document.activeElement.blur(),Object(zi.c)().markStartOfInteraction({key:nr.a.SUMMARY.TIME_TO_RENDER_READ_VIEW_ON_CONFIRM}),this.props.onConfirm()},this.onEditRequest=()=>{Object(zi.c)().markStartOfInteraction({key:nr.a.SUMMARY.TIME_TO_RENDER_EDIT_VIEW}),this.props.onEditRequest()}}componentDidMount(){this.props.onExperienceSuccess()}componentDidUpdate(e){const{isEditing:t,value:s}=this.props;if(!e.isEditing||!t){const n=e.isEditing&&!t;!e.isEditing&&t&&Object(zi.c)().markTimeToFinishTask({key:nr.a.SUMMARY.TIME_TO_RENDER_EDIT_VIEW}),n&&(Object(zi.c)().markTimeToFinishTask({key:nr.a.SUMMARY.TIME_TO_RENDER_READ_VIEW_ON_CANCEL}),e.value===s&&Object(zi.c)().markTimeToFinishTask({key:nr.a.SUMMARY.TIME_TO_RENDER_READ_VIEW_ON_CONFIRM}))}}renderReadView(){return a.a.createElement(Su,{value:this.props.value})}renderEditView(){return a.a.createElement(ku,{value:this.props.value,onChange:this.props.onChange})}render(){const{intl:e}=this.props;return(a.a.createElement(K.a,{onEnter:this.onConfirm,onEscape:this.onCancel},a.a.createElement(eu.a,{label:this.props.label,isLabelHidden:!0,readView:this.renderReadView(),editView:this.props.isEditable&&this.renderEditView(),value:this.props.value,isEditing:this.props.isEditing,invalidMessage:this.props.invalidMessage,isInvalid:!!this.props.invalidMessage,onCancel:this.onCancel,onConfirm:this.onConfirm,onEditRequested:this.onEditRequest,isFitContainerWidthReadView:!this.props.isMobile,editButtonLabel:e.formatMessage(su.a.editButtonLabel,{fieldName:this.props.label}),confirmButtonLabel:e.formatMessage(su.a.confirmButtonLabel,{fieldName:this.props.label}),cancelButtonLabel:e.formatMessage(su.a.cancelButtonLabel,{fieldName:this.props.label})})))}}Iu.displayName="SummaryInlineEditView",Iu.displayName="SummaryInlineEditView",Iu.defaultProps={isEditable:!1,isEditing:!1,isMobile:!1,label:"",invalidMessage:null,onExperienceSuccess:o.a};var Cu=tt()(Object(yu.c)("summary"),Object(Ou.b)("summary"),j.injectIntl)(Iu),Tu=Object(Pl.a)(()=>({fieldId:"summary"}))(Cu);function Pu(){return(Pu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function _u(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const xu=e=>{let{onUpdate:t,onConfirm:s,onFailure:i}=e,r=_u(e,["onUpdate","onConfirm","onFailure"]);const o=Object(fl.f)(),c=Object(fl.a)(),l=Object(n.useContext)(Zl.a),u=l?l.consumerCallbacks.onSuccess:void 0,d=l?l.consumerCallbacks.onFailure:void 0;return a.a.createElement(M.a,{onError:(e,t)=>{d&&d("summary",{errorMessage:t.message})}},a.a.createElement(gu,Pu({issueKey:o,source:c,onUpdate:t,onConfirm:s,onFailure:i,onRenderSuccess:u,onEditFailure:d},r)))};xu.displayName="ExtractedSummaryField";const Du=Object(i.b)(null,e=>({onUpdate:t=>e(Object(hu.e)("summary",t))}))(xu);var Au=()=>{const e=Object(qt.isExtractedSummaryFieldEnabled)()?Du:Tu;return(a.a.createElement(e,null))};const Mu=$.default.div(["display:flex;flex:1 1 auto;min-width:0;width:100%;"]),Lu=$.default.div(["display:flex;flex:1 1 auto;> div{display:flex;flex:1 1 auto;}"]);var Ru=s("./src/packages/issue/issue-view/src/issue-field/state/actions/field-actions.js"),Nu=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/flagged-selector.js"),Uu=s("./src/packages/issue/fields/status/src/ui/status-view/actions/main.js");const Fu=e=>a.a.createElement(Uu.a,e);Fu.displayName="ActionsMenu";var Vu=Fu,Ku=s("./node_modules/@atlaskit/icon/glyph/flag-filled.js"),Bu=s.n(Ku);const Wu=25*q.e,Hu=$.default.div(["margin-top:","px;display:inline-flex;vertical-align:baseline;margin-left:-","px;height:","px;"],q.e/2,q.e/4,3*q.e),Gu=$.default.span(["color:",";display:inline-block;overflow:hidden;line-height:","px;text-overflow:ellipsis;white-space:nowrap;max-width:","px;"],Ae.a.N90,3*q.e,Wu);class $u extends n.Component{constructor(...e){super(...e),this.state={hasOverflow:!1},this.altStatusLabel=null,this.renderAltStatus=()=>a.a.createElement(Gu,{innerRef:e=>{this.altStatusLabel=e}},this.props.name),this.renderAltStatusWithTooltip=()=>a.a.createElement(he.a,{content:this.props.name,position:"bottom"},this.renderAltStatus())}componentDidMount(){this.updateOverflow()}UNSAFE_componentWillReceiveProps(){this.setState({hasOverflow:!1})}componentDidUpdate(){this.updateOverflow()}updateOverflow(){if(!this.altStatusLabel)return!1;const e=this.altStatusLabel.clientWidth>=Wu;return e!==this.state.hasOverflow&&this.setState({hasOverflow:e}),e}render(){return a.a.createElement(Hu,{onClick:this.props.onClick,"data-test-id":"issue.views.issue-base.foundation.status.alt-view"},this.props.icon,this.state.hasOverflow?this.renderAltStatusWithTooltip():this.renderAltStatus())}}$u.displayName="AltStatusField",$u.defaultProps={onClick:o.a};const qu=Object(j.defineMessages)({flagged:{id:"issue.status-field.flagged",defaultMessage:"Flagged"}});class zu extends n.Component{render(){const e=this.props.intl.formatMessage(qu.flagged);return(a.a.createElement($u,{onClick:this.props.onClick,name:e,icon:a.a.createElement(Bu.a,{size:"medium",primaryColor:Ae.a.R300,label:e})}))}}zu.displayName="FlaggedField";var Yu=Object(as.a)(e=>({onClick:()=>{e("click")}}))(Object(j.injectIntl)(zu)),Qu=e=>a.a.createElement($u,{name:e.name,icon:a.a.createElement(Er.a,{size:"medium",label:e.name,primaryColor:Ae.a.G400})}),Ju=s("./src/packages/issue/fields/status/src/ui/main.js");const Zu=$.default.div([""]),Xu=e=>{const[,{register:t}]=Object(Jo.b)(),s=Object(n.useCallback)(e=>{t("status-spotlight",e)},[t]);return a.a.createElement(Zu,{innerRef:s},a.a.createElement(Ju.a,e))};Xu.displayName="StatusWithRef";var ed=Xu;const td=$.default.div(["padding-top:","px;"],1.5*q.e),sd=$.default.div(["display:flex;flex-wrap:wrap;padding-bottom:","px;& > *:not(:last-child){margin-right:",";}"],q.e,e=>e.isGlobalLoopTransitionActionsEnabled?`${q.e}px`:void 0),nd=$.default.div(["padding-right:",";"],e=>e.isGlobalLoopTransitionActionsEnabled?void 0:`${q.e}px`);class ad extends n.Component{constructor(...e){super(...e),this.onStatusSubmitted=(e,t,s,n)=>{Object(za.f)(n,"issueStatus updated",{oldValId:e.id,oldStatusCategoryId:e.statusCategory.id,oldStatusCategoryName:e.statusCategory.name,newValId:t.id,newStatusCategoryId:t.statusCategory.id,newStatusCategoryName:t.statusCategory.name,hasScreen:s.transition.hasScreen,isConditional:s.transition.isConditional,newStatusField:!0,issueHierarchyLevel:this.props.issueHierarchyLevel})}}componentDidMount(){this.props.onExperienceSuccess()}render(){const{issueKey:e,initialValue:t,isEditable:s,isFlagged:n,projectType:i,resolution:r,ActionsMenu:o,onStatusChanged:c,onEditCancel:l}=this.props;return(a.a.createElement(td,null,a.a.createElement(sd,{isGlobalLoopTransitionActionsEnabled:Object(qt.isGlobalLoopTransitionActionsEnabled)()},a.a.createElement(nd,{"data-test-id":"issue.views.issue-base.foundation.status.status-field-wrapper",isGlobalLoopTransitionActionsEnabled:Object(qt.isGlobalLoopTransitionActionsEnabled)()},a.a.createElement(ed,{issueKey:e,projectType:i,initialValue:t,isEditable:s,appearance:"button",onSubmit:this.onStatusSubmitted,onSuccess:c,onEditCancel:l,preFetchTransitions:!0})),n&&a.a.createElement(Yu,{externalId:"issue.status.flagged"}),r&&!n&&a.a.createElement(Qu,{name:r}),Object(qt.isGlobalLoopTransitionActionsEnabled)()&&a.a.createElement(o,{initialStatusValue:t,onSubmit:this.onStatusSubmitted,onSuccess:c}))))}}ad.displayName="StatusView",ad.displayName="StatusView";const id={canContainMediaContent:!1,isOptimistic:!1,isRichTextField:!1,shouldSaveDraft:!1,shouldDiscardChangeOnFailure:!1,onSaveFailureFlagType:null,onSaveSuccessFlagType:null,saveField:()=>Promise.resolve()};var rd=Object($t.a)([Object(i.b)(e=>({issueKey:Object(C.B)(e),initialValue:Object(x.c)(e),isFlagged:Object(Nu.b)(e),isEditable:Object(T.n)(e),resolution:Object(x.a)(e),issueHierarchyLevel:Object(zt.d)(e),projectType:Object(T.G)(e),ActionsMenu:Object(qt.isGlobalLoopTransitionActionsEnabled)()?Vu:a.a.createElement("div",null)}),e=>({onStatusChanged:(t,s)=>{e(Object(hu.c)("status",id,t)),e(Object(hu.e)("status",t,{viaDialog:s}))},onEditCancel:()=>{e(Object(Ru.c)("status",id))}})),Object(yu.c)("status"),Object(Ou.b)("status")])(ad);const od=$.default.div(["display:flex;flex-wrap:wrap;padding-top:","px;padding-bottom:","px;& > *:not(:last-child){margin-right:",";}"],1.5*q.e,q.e,e=>e.isGlobalLoopTransitionActionsEnabled?`${q.e}px`:void 0),cd=$.default.div(["padding-right:",";"],e=>e.isGlobalLoopTransitionActionsEnabled?void 0:`${q.e}px`),ld=({isEditable:e,isFlagged:t,onStatusChanged:s,onEditCancel:i})=>{const r=Object(fl.f)(),o=Object(fl.g)(),c=Object(Ya.g)(o),l=Object(n.useContext)(Zl.a),[u]=Object(hl.b)({issueKey:r,fieldKey:"status"}),[d]=Object(hl.b)({issueKey:r,fieldKey:"resolution"}),[p]=Object(hl.b)({issueKey:r,fieldKey:"hierarchy-level-same-level"}),m=Object(n.useMemo)(()=>(e=>({name:e.name,id:e.id,statusCategory:{id:e.statusCategory.id,name:e.statusCategory.name}}))(u),[u]),b=null==d?void 0:d.name,f=Object(Ya.c)(o,null==p?void 0:p.id),g=(e,t,s,n)=>{Object(za.f)(n,"issueStatus updated",{oldValId:e.id,oldStatusCategoryId:e.statusCategory.id,oldStatusCategoryName:e.statusCategory.name,newValId:t.id,newStatusCategoryId:t.statusCategory.id,newStatusCategoryName:t.statusCategory.name,hasScreen:s.transition.hasScreen,isConditional:s.transition.isConditional,newStatusField:!0,issueHierarchyLevel:f})};return Object(n.useEffect)(()=>{null==l||l.consumerCallbacks.onSuccess()},[]),a.a.createElement(M.a,{onError:(e,t)=>{null==l||l.consumerCallbacks.onFailure("status",{errorMessage:t.message})}},a.a.createElement(od,{isGlobalLoopTransitionActionsEnabled:Object(qt.isGlobalLoopTransitionActionsEnabled)()},a.a.createElement(cd,{"data-test-id":"issue.views.issue-base.foundation.status.status-field-wrapper",isGlobalLoopTransitionActionsEnabled:Object(qt.isGlobalLoopTransitionActionsEnabled)()},a.a.createElement(ed,{issueKey:r,projectType:c,initialValue:m,isEditable:e,appearance:"button",onSubmit:g,onSuccess:s,onEditCancel:i,preFetchTransitions:!0})),t&&a.a.createElement(Yu,{externalId:"issue.status.flagged"}),b&&!t&&a.a.createElement(Qu,{name:b}),Object(qt.isGlobalLoopTransitionActionsEnabled)()&&a.a.createElement(Vu,{initialStatusValue:m,onSubmit:g,onSuccess:s})))};ld.displayName="StatusView";var ud=Object(i.b)(e=>({isFlagged:Object(Nu.b)(e),isEditable:Object(T.n)(e)}),e=>({onStatusChanged:(t,s)=>{e(Object(hu.c)("status",id,t)),e(Object(hu.e)("status",t,{viaDialog:s}))},onEditCancel:()=>{e(Object(Ru.c)("status",id))}}))(ld);const dd=$.default.div(["margin-bottom:","px;"],2*q.e);const pd=()=>{const[e]=Object(dl.e)();return(()=>a.a.createElement(Mu,null,a.a.createElement(Jl,null),a.a.createElement(Lu,{key:"SUMMARY"},a.a.createElement(Au,null))))()},md=()=>{const[e]=Object(dl.e)();return(()=>a.a.createElement(dd,null,a.a.createElement(ud,{key:"STATUS"})))()},bd=()=>{const[e]=Object(dl.e)();switch(e){case"JsdSections":case"jsd":return(()=>{const[e]=Object(dl.d)(),t=e.contentSection.items.find(({__typename:e})=>"TabLayout"===e);return a.a.createElement(a.a.Fragment,null,a.a.createElement(Tl.a,{requestPanelItems:e.requestPortalSection.items}),t?a.a.createElement(Cl,{items:e.contentSection.items,area:"content"}):a.a.createElement(pl.a,{items:e.contentSection.items,area:"content"}))})();default:return(()=>{const[e]=Object(dl.d)();return e.contentSection.items.find(({__typename:e})=>"TabLayout"===e)?a.a.createElement(Cl,{items:e.contentSection.items,area:"content"}):a.a.createElement(pl.a,{items:e.contentSection.items,area:"content"})})()}},fd=()=>{const[e]=Object(dl.e)();return(()=>{const[e]=Object(dl.d)(),t=[...e.primaryContextSection.items,...e.secondaryContextSection.items];return a.a.createElement(pl.a,{items:t,area:"context"})})()};var gd=s("./src/packages/issue/issue-view/src/selectors/context-panel-selector.js"),hd=s("./src/packages/issue/issue-view/src/selectors/ecosystem-glance-ui-selector.js"),yd=s("./src/packages/platform/services/issue/src/model/issue-system-fields.js"),Od=s("./node_modules/uuid/index.js"),jd=s.n(Od),Ed=s("./src/packages/platform/controllers/tenant-context/src/components/index.js"),vd=s("./node_modules/react-sweet-state/lib/esm/components/hook.js"),kd=s("./node_modules/lodash/memoize.js"),wd=s.n(kd),Sd=s("./src/packages/common-legacy-do-not-add-anything-new/src/performance/index.js"),Id=s("./src/packages/platform/utils/fetch/src/utils/as-json.js");const Cd=wd()((e,t,s,n)=>{const a=Sd.default.now(),i=`${t}/gateway/api/v2/similarity/issue/project`;return Object(Id.a)(i,{body:JSON.stringify({context:{subProduct:"serviceDesk",product:"jira",sessionId:e.sessionId,containerId:e.projectId,objectId:e.issueId,principalId:"context",tenantId:e.cloudId},filter:s,limit:15,estimatedTotalIssues:1e3}),headers:{"Content-Type":"application/json"},method:"POST"}).then(t=>(Object(za.b)(n({}),"fetchRelatedIssues succeeded",{smartSessionId:e.sessionId,elapsedTimeMilli:Math.floor(Sd.default.now()-a)}),t)).catch(t=>{throw Object(za.b)(n({}),"fetchRelatedIssues failed",{smartSessionId:e.sessionId,elapsedTimeMilli:Math.floor(Sd.default.now()-a),traceId:t.traceId,statusCode:t.statusCode}),t})},(e,t,s)=>`${e.issueId} - ${s.jql}`),Td=["summary","issuetype"],Pd=Cd,_d={data:void 0,isLoading:!1,error:void 0,baseUrl:Object(Li.b)(""),issueId:Object(Li.j)(""),projectId:Object(Li.p)(""),projectKey:Object(Li.q)(""),cloudId:Object(Li.c)(""),status:"OPEN"},xd={fetchRelatedIssuesForIssue:(e,t)=>async({getState:s,setState:n})=>{const a=s();n({isLoading:!0,error:void 0});try{const{projectId:i,issueId:r,cloudId:o,projectKey:c,baseUrl:l,status:u}=a,d={projectId:i,issueId:r,sessionId:e,cloudId:o},p={jql:(e=>"OPEN"===e?"statusCategory != Done":"statusCategory = Done")(u),fields:Td,projectKey:c,columnTypesAsJson:Td},m=await Pd(d,l,p,t),{status:b}=s();if(u!==b)return;n({data:(e=>e.issues.map(e=>({id:e.id,issueKey:e.key,issueLink:e.self,issueTypeIconUrl:e.fields.issueType.iconUrl,issueTypeName:e.fields.issueType.name,issueSummary:e.fields.summary})))(m),isLoading:!1,error:void 0})}catch(r){var i;null===(i=Pd.cache)||void 0===i||i.clear(),n({isLoading:!1,error:r})}},setContext:()=>({setState:e},t)=>{e(t)},setIssueStatus:e=>({getState:t,setState:s})=>{const{status:n}=t();e!==n&&s({status:e})}},Dd=Object(cr.a)({name:"FetchRelatedIssuesForIssue",initialState:_d,actions:xd}),Ad=Object($o.a)(Dd,{onInit:xd.setContext}),Md=Object(vd.a)(Dd);var Ld=s("./node_modules/@atlaskit/icon/glyph/premium.js"),Rd=s.n(Ld),Nd=s("./node_modules/@atlaskit/analytics-next--current/dist/esm/useAnalyticsEvents.js");function Ud(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Fd(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ud(Object(s),!0).forEach((function(t){Vd(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ud(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Vd(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Kd(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const Bd=e=>(t,s)=>{const n=t(s),{buttonStyles:a}=n;return Fd(Fd({},Kd(n,["buttonStyles"])),{},{buttonStyles:Fd(Fd({},a),{},{padding:`0 ${q.e/2}px 0 ${q.e/2}px`,margin:`0 ${q.e/2}px 0 ${q.e/2}px`,backgroundColor:e?Ae.a.N400:Ae.a.N20,"&:hover":{backgroundColor:e?Ae.a.N400:Ae.a.N30},"&:active":{backgroundColor:e?Ae.a.N400:Ae.a.B50}})})},Wd=({children:e,onClick:t,isSelected:s})=>a.a.createElement(W.a,{appearance:"subtle",spacing:"compact",isSelected:s,theme:Bd(s),onClick:t},e);Wd.displayName="ButtonComponent";const Hd=({items:e,selectedItem:t,onSelectIssueStatusItem:s})=>a.a.createElement(a.a.Fragment,null,e.map(e=>a.a.createElement(Wd,{key:e.key,isSelected:t.key===e.key,onClick:(t,n)=>s(e,n,"IssueStatusButton")},e.name)));var Gd=Object(j.defineMessages)({show:{id:"smart-related-issues-panel.expander.show",defaultMessage:"Show"},hide:{id:"smart-related-issues-panel.expander.hide",defaultMessage:"Hide"}});var $d=({isContentExpanded:e,onExpand:t,onCollapse:s,sessionId:n})=>{const{formatMessage:i}=Object(Te.c)(),r=(e,s)=>{t(),Object(za.h)(s,"showRelatedIssues",{smartSessionId:n})},o=(e,t)=>{s(),Object(za.h)(t,"hideRelatedIssues",{smartSessionId:n})};return e?(()=>a.a.createElement(ba.a,{appearance:"link",onClick:o},i(Gd.hide)))():(()=>a.a.createElement(ba.a,{appearance:"link",onClick:r},i(Gd.show)))()},qd=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/item-line-card/item-line-card-group-view.js"),zd=s("./src/packages/issue/issue-view/src/common/util/events/index.js"),Yd=s("./node_modules/@atlaskit/icon/glyph/error.js"),Qd=s.n(Yd),Jd=Object(j.defineMessages)({errorMessage:{id:"smart-related-issues-panel.issue-line-card-group.error-feedback.error-message",defaultMessage:"We couldn't load any similar requests."},tryAgainLink:{id:"smart-related-issues-panel.issue-line-card-group.error-feedback.try-again-link",defaultMessage:"Try again?"}});const Zd=$.default.div(["margin-right:","px;"],q.e),Xd=$.default.div(["display:flex;align-items:center;"]),ep=({onTryAgain:e,useIntl:t=Te.c})=>{const{formatMessage:s}=t();return a.a.createElement(Xd,null,(()=>a.a.createElement(Zd,null,a.a.createElement(Qd.a,{label:"error",primaryColor:"#FF5630"})))(),s(Jd.errorMessage),(()=>a.a.createElement(ba.a,{appearance:"link",onClick:e},s(Jd.tryAgainLink)))())};ep.displayName="ErrorFeedback";var tp=ep,sp=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/async-icon/index.js");const np=Object(j.defineMessages)({issueTypeName:{id:"smart-related-issues-panel.issue-line-card-group.issue-line-card.issue-type-name",defaultMessage:"{issueTypeName}"}});var ap=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/mixins.js");const ip=$.default.div(["display:flex;align-items:center;"]),rp=Object($.default)(ip)(["width:100%;height:100%;position:relative;"]),op=$.default.a(["outline:none;padding-left:","px;color:",";font-weight:600;font-size:12px;white-space:nowrap;&:hover,&:active,&:visited,&:link{color:",";}"],q.e,e=>e.isActive?Ae.a.B400:Ae.a.N90,e=>e.isActive?Ae.a.B400:Ae.a.N90),cp=$.default.div([""," padding-left:","px;flex:1;",";&:link{outline:none;color:",";text-decoration:",";}"],e=>e.isActive&&`color: ${Ae.a.B400};`,q.e,ap.a,e=>e.isActive?Ae.a.B400:Ae.a.N90,e=>e.isDone?"line-through":"none"),lp=$.default.div(["",";"],ap.a),up=({isFocused:e,isHovering:t,issueTypeIconUrl:s,issueTypeName:n,issueKey:i,issueSummary:r,useIntl:o=Te.c})=>{const{formatMessage:c}=o();return a.a.createElement(rp,{isFocused:e,isHovering:t},(()=>{const e=c(np.issueTypeName,{issueTypeName:n});return(a.a.createElement(he.a,{content:e,position:"bottom"},a.a.createElement("div",null,a.a.createElement(ip,null,a.a.createElement(sp.a,{alt:e,url:s})))))})(),(()=>a.a.createElement(op,null,i))(),(()=>a.a.createElement(cp,null,a.a.createElement("div",null,a.a.createElement(he.a,{content:r,position:"bottom"},a.a.createElement(lp,null,r)))))())};up.displayName="IssueLineCard";var dp=s("./node_modules/@atlaskit/icon/glyph/info.js"),pp=s.n(dp),mp=Object(j.defineMessages)({errorMessage:{id:"smart-related-issues-panel.issue-line-card-group.no-issues-feedback.error-message",defaultMessage:"We couldn't find any similar requests."},searchLink:{id:"smart-related-issues-panel.issue-line-card-group.no-issues-feedback.search-link",defaultMessage:"Search instead?"}});const bp=$.default.div(["margin-right:","px;"],q.e),fp=$.default.div(["display:flex;align-items:center;"]),gp=({useIntl:e=Te.c,useBaseUrl:t=Ed.e})=>{const{formatMessage:s}=e(),n=`${t()}/issues/?jql=${encodeURIComponent("order by created DESC")}`;return a.a.createElement(fp,null,(()=>a.a.createElement(bp,null,a.a.createElement(pp.a,{label:"info",primaryColor:"#0747A6"})))(),s(mp.errorMessage),(()=>a.a.createElement(ba.a,{appearance:"link",target:"_blank",href:n},s(mp.searchLink)))())};gp.displayName="NoIssuesFeedback";var hp=gp,yp=Object(j.defineMessages)({show:{id:"smart-related-issues-panel.issue-line-card-group.show-more.show",defaultMessage:"Show more"}});const Op=$.default.div(["margin:","px 0px;"],q.e);var jp=({issuesLength:e,isShowMoreExpanded:t,onExpand:s})=>{const{formatMessage:n}=Object(Te.c)(),i=(t,n)=>{s(),Object(za.h)(n,"showMoreRelatedIssues",{issuesLength:e})};return t?null:(()=>a.a.createElement(Op,null,a.a.createElement(ba.a,{appearance:"link",onClick:i},n(yp.show))))()},Ep=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/skeleton/index.js");const vp=$.default.div(["padding-left:","px;padding-right:","px;"],2*q.e,2*q.e),kp=$.default.div(["display:flex;flex-direction:row;justify-content:space-between;margin-bottom:","px;"],q.e),wp=()=>a.a.createElement(vp,null,a.a.createElement(kp,null,a.a.createElement(Ep.k,{height:"16px",width:"6%"}),a.a.createElement(Ep.k,{height:"16px",width:"90%"})),a.a.createElement(kp,null,a.a.createElement(Ep.k,{height:"16px",width:"6%"}),a.a.createElement(Ep.k,{height:"16px",width:"90%"})),a.a.createElement(kp,null,a.a.createElement(Ep.k,{height:"16px",width:"6%"}),a.a.createElement(Ep.k,{height:"16px",width:"90%"})),a.a.createElement(kp,null,a.a.createElement(Ep.k,{height:"16px",width:"6%"}),a.a.createElement(Ep.k,{height:"16px",width:"90%"})),a.a.createElement(kp,null,a.a.createElement(Ep.k,{height:"16px",width:"6%"}),a.a.createElement(Ep.k,{height:"16px",width:"90%"})));wp.displayName="LoadingSkeleton";var Sp=wp;const Ip=$.default.div(["display:flex;"]),Cp=Object($.default)(Ip)(["display:block;width:100%;max-height:","px;",""],30*q.e,({isExpanded:e})=>e&&"\n        overflow-y: scroll;\n    ");function Tp(){return(Tp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const Pp=({useRelatedIssuesForIssue:e=Md,sessionId:t})=>{const[s,i]=Object(n.useState)(!1),{createAnalyticsEvent:r}=Object(Nd.a)(),[{data:o,isLoading:c,error:l},{fetchRelatedIssuesForIssue:u}]=e();if(l)return a.a.createElement(tp,{onTryAgain:()=>{u(t,r)}});if(o&&0===o.length)return a.a.createElement(hp,null);if(c||!o)return a.a.createElement(Sp,null);const d=s?o:o.slice(0,5);return a.a.createElement(Ip,null,a.a.createElement(Cp,{isExpanded:s},a.a.createElement(qd.a,{items:d,groupId:t,onClick:(e,t)=>{null!=e&&(Object(zd.e)(t)||Object(zd.a)(t))&&window.open(e.issueKey)}},(e,t,s,n)=>a.a.createElement(up,Tp({isHovering:e,isActive:t,isFocused:s},n))),(()=>o.length>5&&a.a.createElement(jp,{isShowMoreExpanded:s,onExpand:()=>i(!0),issuesLength:o.length}))()))};Pp.displayName="IssueLineCardGroup";var _p=Pp,xp=Object(j.defineMessages)({title:{id:"smart-related-issues-panel.title",defaultMessage:"Similar requests"},filterBy:{id:"smart-related-issues-panel.filter-by",defaultMessage:"Show:"},open:{id:"smart-related-issues-panel.open",defaultMessage:"Open"},resolved:{id:"smart-related-issues-panel.resolved",defaultMessage:"Resolved"}}),Dp=s("./node_modules/@atlaskit/onboarding/dist/es2019/components/SpotlightManager.js"),Ap=s("./node_modules/@atlaskit/onboarding/dist/es2019/components/Spotlight.js"),Mp=s("./src/packages/engagement/src/ui/coordination-client/index.js"),Lp=Object(j.defineMessages)({header:{id:"smart-related-issues-panel.onboarding.header",defaultMessage:"Discover similar issues"},featuresPageLink:{id:"smart-related-issues-panel.onboarding.features-page-link",defaultMessage:"Take me there"},secondaryButton:{id:"smart-related-issues-panel.onboarding.secondary-button",defaultMessage:"No thanks"},primaryButton:{id:"smart-related-issues-panel.onboarding.primary-button",defaultMessage:"Try it now"}}),Rp=Object(j.defineMessages)({modalBody:{id:"smart-related-issues-panel.onboarding.spotlight-messages.modal-body",defaultMessage:"Save time triaging and finding related solutions directly from the request view."},adminModalBody:{id:"smart-related-issues-panel.onboarding.spotlight-messages.admin-modal-body",defaultMessage:'Save time triaging and finding related solutions directly from the request view. You can disable this feature at any time in your <a href="{url}" target="_blank" tabindex="-1">project settings</a>.'},featuresPageLink:{id:"smart-related-issues-panel.onboarding.spotlight-messages.features-page-link",defaultMessage:"project settings."}});const Np=$.default.p(["margin:0px;a{&:hover{color:",";},&:active:{color:",";},&:visited,&:link{color:",";font-weight:bold;}}"],Ae.a.P200,Ae.a.B400,Ae.a.N0);function Up(){return(Up=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const Fp=()=>{const{formatMessage:e}=Object(Te.c)();return(a.a.createElement(Np,null,e(Rp.modalBody)))};Fp.displayName="ModalBodyMessage";const Vp=({href:e})=>a.a.createElement(Np,null,a.a.createElement(j.FormattedHTMLMessage,Up({},Rp.adminModalBody,{values:{url:e}})));Vp.displayName="AdminModalBodyMessage";const Kp=({stop:e,children:t})=>t(e),Bp=({children:e,onPrimaryActionClick:t})=>{const{formatMessage:s}=Object(Te.c)(),[i,r]=Object(n.useState)(!0),o=Object(Ed.e)(),c=Object(Ed.i)(),l=`${o}/jira/servicedesk/projects/${Object(fl.g)()}/settings/itsm-features`,u=e=>{r(!1),e&&e()};return a.a.createElement(Dp.c,{blanketIsTinted:!1},a.a.createElement(Qo.a,{name:"related-issues-panel"},e),a.a.createElement(Mp.b,{messageId:"related-issues-panel"},a.a.createElement(Kp,null,e=>i&&a.a.createElement(Ap.a,{dialogPlacement:"bottom right",dialogWidth:275,heading:s(Lp.header),target:"related-issues-panel",targetRadius:3,actions:[{appearance:"subtle",onClick:()=>{u(e),t()},text:s(Lp.primaryButton)},{appearance:"subtle",onClick:()=>u(e),text:s(Lp.secondaryButton)}]},c?a.a.createElement(Vp,{href:l}):a.a.createElement(Fp,null)))))};Bp.displayName="OnboardingController";const Wp=$.default.div(["margin-top:","px;margin-bottom:","px;display:flex;flex-direction:column;border-radius:","px;border:1px solid #dfe1e6;background-color:",";padding:16px;",";"],q.e,3*q.e,q.e/2,Ae.a.N0,({isExpanded:e,hasContentItems:t})=>e&&t&&"padding-bottom: 0"),Hp=$.default.div(["display:flex;flex-direction:row;justify-content:space-between;"]),Gp=$.default.div(["margin-right:","px;"],1*q.e),$p=$.default.div(["display:flex;flex-direction:row;align-items:center;"]),qp=$.default.div(["padding-top:","px;"],2*q.e),zp=Object($.default)(Ba.c)(["",";",";margin:0;min-width:0;"],ap.a,Ae.c.h400()),Yp=$.default.div(["display:flex;margin-top:","px;"],q.e),Qp=$.default.div(["",";min-width:0;"],ap.a),Jp=({sessionId:e})=>{const{formatMessage:t}=Object(Te.c)(),{createAnalyticsEvent:s}=Object(Nd.a)(),[i,r]=Object(n.useState)(!1),o={OPEN:{key:"OPEN",name:t(xp.open)},RESOLVED:{key:"RESOLVED",name:t(xp.resolved)}},c=[o.OPEN,o.RESOLVED],[{data:l,isLoading:u,error:d,status:p},{setIssueStatus:m,fetchRelatedIssuesForIssue:b}]=Md();Object(n.useEffect)(()=>{!i||u||l||d||b(e,s)},[s,d,b,i,u,l,e,p]);const f=a.a.createElement(Hp,null,a.a.createElement($p,null,a.a.createElement(Gp,null,a.a.createElement(Rd.a,{size:"medium",label:""})),a.a.createElement(zp,null,t(xp.title))),a.a.createElement($d,{isContentExpanded:i,onExpand:()=>r(!0),onCollapse:()=>r(!1),sessionId:e})),g=a.a.createElement(Yp,null,a.a.createElement(Qp,null,t(xp.filterBy)),a.a.createElement(Hd,{items:c,selectedItem:o[p],onSelectIssueStatusItem:(t,n,a)=>{Object(za.h)(n,a),m(t.key),b(e,s)}}));return a.a.createElement(Bp,{onPrimaryActionClick:()=>r(!0)},a.a.createElement(Wp,{isExpanded:i},f,i&&a.a.createElement(a.a.Fragment,null,g,a.a.createElement(qp,null,a.a.createElement(_p,{sessionId:e})))))};Jp.displayName="RelatedIssuesPanelView";var Zp=Jp;const Xp=e=>null!=e,em=e=>Xp(e)&&""!==e,tm=()=>{const e=jd.a.v4(),t=Object(fl.e)(),s=Object(fl.g)(),n=Object(Li.p)(Object(Ya.f)(s)||""),i=Object(Ed.f)(),r=((e,t,s,n,a)=>{if(em(t)&&t!==Object(Li.p)("")&&Xp(e)&&e!==Object(Li.j)("")&&em(a))return{issueId:e,projectId:t,projectKey:s,baseUrl:n,cloudId:a}})(t,n,s,Object(Ed.e)(),i);return void 0===r?null:a.a.createElement(Ad,r,a.a.createElement(Zp,{sessionId:e}))};tm.displayName="RelatedIssuesPanel";var sm=tm;const nm=$.default.div(["margin-top:","px;"],e=>e.isCompactMode?2.5*q.e:5*q.e),am=$.default.div(["margin-top:",";"],e=>e.isCompactMode?null:`${2.5*q.e}px`);var im=s("./src/packages/issue/issue-view/src/layout-descriptor/view/context/view.js"),rm=s("./src/packages/issue/issue-view/src/actions/context-item-actions.js"),om=s("./src/packages/servicedesk/common/src/global-spotlight-target/index.js"),cm=s("./src/packages/issue/issue-view/src/views/issue-base/get-layout-item-map.js");function lm(){return(lm=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const um=({layoutItems:e,area:t,ItemContainer:s,onOpenPanel:n})=>{const i=Object(cm.a)();return(a.a.createElement(a.a.Fragment,null,e.map(e=>(({key:e,type:t,payload:s,hasGlobalSpotlightTarget:n},i,r,o,c)=>{const l=i[t],u=l&&l.item;if(!u)return y.a.safeError(`issue.views.issue-base.${r}`,`Could not find a matching component for "${t}"`,new p.a({eventNameSuffix:"issue.error",type:"js",app:"issue"})),null;const d=c?(n=>o?a.a.createElement(o,{key:e},a.a.createElement(u,lm({},s,{area:r,onOpenPanel:s=>n(e,t,s)}))):a.a.createElement(u,lm({},s,{key:e,area:r,onOpenPanel:s=>n(e,t,s)})))(c):(()=>o?a.a.createElement(o,{key:e},a.a.createElement(u,lm({},s,{area:r}))):a.a.createElement(u,lm({},s,{key:e,area:r})))();if(!0===n&&void 0!==(null==s?void 0:s.fieldId)){const e=`global-spotlight-target-${s.fieldId}`;return(a.a.createElement(om.a,{id:e,key:e},d))}return d})(e,i,t,s,n))))};um.defaultProps={ItemContainer:void 0,onOpenPanel:o.a};var dm=um,pm=Object(i.b)(()=>({}),e=>({onOpenPanel:(t,s,n)=>{const a={title:n&&n.title||s,type:s,key:t,payload:n};e(Object(rm.b)(a))}}))(dm),mm=s("./src/packages/issue/issue-view/src/actions/ecosystem-content-panel-actions.js"),bm=s("./src/packages/issue/issue-view/src/common/ecosystem/module-key-helper.js"),fm=s("./src/packages/common-legacy-do-not-add-anything-new/src/storage/storage-provider.js");const gm=Object(fm.b)("issue-ecosystem"),hm="issue.ecosystem.local-storage",ym=()=>{try{return gm.get("collapsed-panels")||[]}catch(e){return y.a.safeError(hm,`getCollapsedPanels failed: ${e}`,new p.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),[]}};var Om=s("./node_modules/@atlaskit/icon/glyph/more.js"),jm=s.n(Om);function Em(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function vm(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Em(Object(s),!0).forEach((function(t){km(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Em(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function km(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const wm=({children:e,isLoading:t=!1})=>a.a.createElement("span",null,a.a.createElement(ri.a,{triggerType:"button",triggerButtonProps:vm({appearance:"subtle",spacing:"compact",iconBefore:t?a.a.createElement(H.a,{size:"small"}):a.a.createElement(jm.a,{size:"small",label:"meatball menu"})},!Object(qt.isRemovalOfDeprecatedStylesEnabled)()&&{className:"squareButtonWithIcon"}),position:"bottom right"},e));wm.displayName="MeatBallMenu";const Sm=$.default.div(["display:flex;align-items:center;height:","px;cursor:",";"],4*q.e,e=>e.clickable?"pointer":void 0),Im=$.default.div(["align-items:center;display:flex;flex-flow:row-reverse wrap;& > * + *{margin-left:","px;}"],q.e);function Cm(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Tm(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Cm(Object(s),!0).forEach((function(t){Pm(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Cm(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Pm(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const _m=$.default.span(["color:",";margin-left:5px;display:",";",":hover &{display:inline;}"],Ae.a.link,e=>e.alwaysShow?void 0:"none",Sm),xm=$.default.div(["max-height:",";overflow-y:",";overflow-x:hidden;",";transition:max-height 1s ease-out;"],e=>e.isCollapsed?"0":"1500px",e=>e.isCollapsed?"hidden":"auto",Object(Si.f)("&")),Dm=$.default.h1(["flex:1;",";",";color:",";"],Si.e,Ae.c.h400(),Ae.a.heading),Am=Object(j.defineMessages)({actions:{id:"issue.content.ecosystem-panels.meatballs.actions",defaultMessage:"Actions"},hide:{id:"issue.content.ecosystem-panels.meatballs.hide",defaultMessage:"Hide {appName}"},collapse:{id:"issue.content.ecosystem-panels.collapse-content",defaultMessage:"hide"},expand:{id:"issue.content.ecosystem-panels.expand-content",defaultMessage:"show"}});class Mm extends n.Component{constructor(e){super(e),this.setupConnectHost=e=>{e&&e.onIframeUnload(({extension:t})=>{e.destroy(t.id)})},this.contentPanelContainer=void 0,this.handleRemoveContentPanel=()=>{const{appKey:e,moduleKey:t,removeContentPanel:s,onContentPanelRemoveAnalytics:n}=this.props;n(Object(Wn.b)(e,t)),s(`${e}_${t}`)},this.toggleCollapsedState=()=>{const{appKey:e,moduleKey:t,onToggleCollapsedStateAnalytics:s}=this.props,{isCollapsed:n}=this.state,a=Object(bm.b)(`${e}_${t}`,10);s(Object(Wn.g)(e,t,n?"expand":"collapse")),n?(e=>{const t=ym();try{gm.set("collapsed-panels",t.filter(t=>t!==e))}catch(s){y.a.safeError(hm,`unsetCollapsedPanel failed: ${s}`,new p.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:s}))}})(a):(e=>{const t=ym();try{gm.set("collapsed-panels",[...t,e])}catch(s){y.a.safeError(hm,`setCollapsedPanel failed: ${s}`,new p.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:s}))}})(a),this.setState({isCollapsed:!n})},this.state={connectHost:window.connectHost,isCollapsed:ym().includes(Object(bm.b)(`${e.appKey}_${e.moduleKey}`,10))},this.setupConnectHost(this.state.connectHost)}componentDidMount(){this.state.connectHost||Object(zn.b)(e=>{this.setupConnectHost(e),this.setState({connectHost:e})})}componentDidUpdate(){this.props.isSelected&&(Object(tr.a)(this.contentPanelContainer),this.props.unSelectContentPanel(`${this.props.appKey}_${this.props.moduleKey}`))}renderHidePanelOption(){const{intl:e}=this.props;return(a.a.createElement(oi.a,{title:e.formatMessage(Am.actions)},a.a.createElement(ii.a,{onClick:this.handleRemoveContentPanel},e.formatMessage(Am.hide,{appName:this.props.name}))))}renderMeatBallMenu(){return a.a.createElement(wm,null,this.renderHidePanelOption())}renderHeader(){const{showByDefault:e}=this.props.contentPanel;if(!e)return a.a.createElement(Ba.c,null,a.a.createElement(Sm,null,a.a.createElement(Dm,null,this.props.name)),a.a.createElement(Im,null,this.renderMeatBallMenu()));const{intl:t}=this.props,{isCollapsed:s}=this.state;return a.a.createElement(Ba.c,null,a.a.createElement(Sm,{clickable:!0,onClick:this.toggleCollapsedState},a.a.createElement(Dm,null,this.props.name),a.a.createElement(_m,{alwaysShow:s},s?t.formatMessage(Am.expand):t.formatMessage(Am.collapse))),e?null:a.a.createElement(Im,null,this.renderMeatBallMenu()))}render(){const{appKey:e,moduleKey:t}=this.props,{isCollapsed:s}=this.state,{options:n,options:{url:i,origin:r},showByDefault:o}=this.props.contentPanel,c=new Qn.a;return a.a.createElement("div",{ref:e=>{this.contentPanelContainer=e}},this.renderHeader(),a.a.createElement(xm,{isCollapsed:s&&o},this.state.connectHost&&a.a.createElement(Yn.a,{key:`connect-iFrame-${r}-${this.props.refreshedOn}`,connectHost:this.state.connectHost,appKey:e,moduleKey:t,url:i,options:c.convertConnectOptions(n),connectIframeProvider:c,width:"100%",height:"100%",timeoutIndicator:()=>a.a.createElement(na,{appName:this.props.contentPanel.name,appKey:e})})))}}Mm.displayName="ConnectContentPanel",Mm.displayName="ContentPanel",Mm.defaultProps={isSelected:!1,unSelectContentPanel:o.a,removeContentPanel:o.a,refreshedOn:0,onContentPanelRemoveAnalytics:o.a};var Lm=Object($t.a)([j.injectIntl,Object(as.a)(e=>({onContentPanelRemoveAnalytics:t=>e("remove",Tm({},t)),onToggleCollapsedStateAnalytics:t=>e("toggleCollapsedState",Tm({},t))})),Object(i.b)((e,t)=>({contentPanel:Object(Hn.d)(t.appKey,t.moduleKey)(e),isSelected:Object(Hn.r)(t.appKey,t.moduleKey)(e),refreshedOn:Object(T.d)(e)}),e=>({unSelectContentPanel:t=>e(Object(mm.e)(t)),removeContentPanel:t=>e(Object(mm.h)(t))}))])(Mm),Rm=s("./src/packages/forge/forge-ui-analytics/src/services/issue-panel/index.js"),Nm=s("./src/packages/forge/forge-ui-analytics/src/ui/issue-panel/index.js"),Um=s("./src/packages/forge/forge-ui-async/src/ui/issue-panel/async.js"),Fm=s("./src/packages/issue/issue-view/src/actions/forge-actions.js"),Vm=Object(j.defineMessages)({title:{id:"issue.content.ecosystem.forge.panel.actions.title",defaultMessage:"Actions"},remove:{id:"issue.content.ecosystem.forge.panel.actions.remove",defaultMessage:"Remove"},collapse:{id:"issue.content.ecosystem.forge.panel.actions.collapse",defaultMessage:"Collapse"},expand:{id:"issue.content.ecosystem.forge.panel.actions.expand",defaultMessage:"Expand"}});function Km(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function Bm(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Wm(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Bm(Object(s),!0).forEach((function(t){Hm(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Bm(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Hm(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Gm=({actions:e})=>{const[t,s]=Object(n.useState)(!1),{formatMessage:i}=Object(Te.c)();if(0===e.length)return null;const r=e.map(e=>Wm(Wm({},e),{},{onClick:()=>(s(!0),e.onClick().finally(()=>{s(!1)}))}));return(a.a.createElement(wm,{isLoading:t},a.a.createElement(oi.a,{title:i(Vm.title)},r.map(e=>a.a.createElement(ii.a,{onClick:e.onClick,key:e.key},e.text)))))};Gm.displayName="Actions";const $m=({name:e,extension:{environmentType:t},actions:s})=>a.a.createElement(Ba.c,null,a.a.createElement(Sm,null,a.a.createElement(Ba.e,null,a.a.createElement(vi.a,{extensionName:e,extensionEnvType:t}))),a.a.createElement(Im,null,a.a.createElement(Gm,{actions:s})));$m.displayName="ForgeContentPanelHeader";const qm=e=>{let{platformContext:t,extensionContext:s,source:i,onContentPanelRemoveAnalytics:r,onRemove:o,appKey:c,moduleKey:l,name:u,isPanelCollapsed:d}=e,p=Km(e,["platformContext","extensionContext","source","onContentPanelRemoveAnalytics","onRemove","appKey","moduleKey","name","isPanelCollapsed"]);const{extension:m,panelKey:b,isJustAdded:f,isCompactMode:g,removeFromJustAdded:h,removeFromNewPanels:y,updatePanel:O}=p,j=Object(n.useRef)(null),{formatMessage:E}=Object(Te.c)();Object(n.useEffect)(()=>{f&&j&&j.current&&(Object(tr.a)(j.current),h(b))},[f,b,h]),Object(n.useEffect)(()=>{s.isNewToIssue&&y(b)},[s,b,y]);const v=Object(n.useMemo)(()=>({source:i}),[i]),[k,w]=Object(n.useState)([]),S=Object(n.useMemo)(()=>({onClick:()=>(r(Object(Wn.b)(c,l)),Object(Rm.l)(i),o(b),Promise.resolve()),text:E(Vm.remove),key:"internal__remove-action"}),[c,E,l,r,o,b,i]),I=Object(n.useCallback)(e=>(Object(Rm.k)(i,{collapsed:e}),e&&w([]),O({issueKey:t.issueKey,panelKey:b,collapsed:e}),Promise.resolve()),[b,t.issueKey,i,O]),C=Object(n.useMemo)(()=>({onClick:()=>I(!1),text:E(Vm.expand),key:"internal__expand-action"}),[E,I]),T=Object(n.useMemo)(()=>({onClick:()=>I(!0),text:E(Vm.collapse),key:"internal__collapse-action"}),[E,I]),P=d?C:T,_=[...k.slice(0,5).map(e=>Wm(Wm({},e),{},{onClick:()=>(Object(Rm.j)(i),e.onClick())})),P,S];return a.a.createElement(Nm.a,{analyticsData:v,shouldFireScreenEvent:s.isNewToIssue},a.a.createElement("div",{ref:j},a.a.createElement(nm,{isCompactMode:g},a.a.createElement($m,{actions:_,extension:m,name:u}),!d&&a.a.createElement(Um.a,{platformContext:t,extensionContext:s,extension:m,localId:b,setCustomActions:w,analyticsData:v})),a.a.createElement(nm,{isCompactMode:g})))};qm.displayName="ForgeContentPanelView";var zm=Object($t.a)([Object(as.a)(e=>({onContentPanelRemoveAnalytics:t=>e("remove",Wm({},t))})),Object(i.b)((e,t)=>({isJustAdded:Object(Hc.i)(t.panelKey)(e),platformContext:Object(Hc.b)(e),extensionContext:Object(Hc.h)(t.panelKey)(e),source:Object(C.b)(e),isPanelCollapsed:Object(Hc.e)(t.panelKey)(e)}),e=>({removeFromJustAdded:t=>{e(Object(mm.e)(t))},removeFromNewPanels:t=>{e(Object(Fm.i)(t))},onRemove:t=>{e(Object(mm.h)(t))},updatePanel:t=>{e(Object(Fm.g)(t))}}))])(qm),Ym=s("./src/packages/issue/attachments/issue-attachments-base/src/services/attachments-service/main.js"),Qm=s("./src/packages/issue/attachments/issue-attachments-table/src/ui/error/assets/search.svg"),Jm=s.n(Qm),Zm=Object(j.defineMessages)({errorStateTitle:{id:"issue-attachments-table.error.error-state-title",defaultMessage:"We couldn't load your attachments"},errorStateDescription:{id:"issue-attachments-table.error.error-state-description",defaultMessage:"Check your network connection, then try reloading your attachments."},primaryButton:{id:"issue-attachments-table.error.primary-button",defaultMessage:"Reload Attachments"}});const Xm=$.default.div(["& > div{margin:auto;}"]),eb=({onClick:e,shouldHideImage:t})=>{const{formatMessage:s}=Object(Te.c)(),n=t?void 0:Jm.a,i=a.a.createElement(W.a,{appearance:"primary",onClick:()=>e()},s(Zm.primaryButton));return a.a.createElement(Xm,null,a.a.createElement(Jn.a,{imageUrl:n,header:s(Zm.errorStateTitle),description:s(Zm.errorStateDescription),primaryAction:i}))};eb.displayName="AttachmentsError",eb.defaultProps={shouldHideImage:!1};var tb=eb;const sb=$.default.div(["width:100%;display:flex;position:relative;&&{min-height:initial;}"]),nb=Object($.keyframes)(["0%{background-position:-300px 0;}100%{background-position:2000px 0;}"]),ab=$.default.div(["animation-duration:1s;animation-fill-mode:forwards;animation-iteration-count:infinite;animation-name:",";animation-timing-function:linear;background-color:",";background-image:linear-gradient( to right,"," 10%,"," 30%,"," 50% );background-repeat:no-repeat;position:absolute;left:0;right:0;top:0;bottom:0;"],nb,Ae.a.N30,Ae.a.N30,Ae.a.N20,Ae.a.N30),ib=$.default.div(["min-height:","px;min-width:","px;width:",";border-top:","px solid ",";border-bottom:","px solid ",";border-right:","px solid ",";border-left:","px solid ",";"],e=>e.height,e=>e.minWidth,e=>e.width,e=>(e.lineHeight-e.height)/2,Ae.a.N0,e=>(e.lineHeight-e.height)/2,Ae.a.N0,e=>e.borderRight,Ae.a.N0,e=>e.borderLeft,Ae.a.N0),rb=$.default.div(["position:relative;width:100%;border-top:","px solid ",";border-bottom:","px solid ",";"],e=>e.paddingTop,Ae.a.N0,e=>e.paddingBottom,Ae.a.N0),ob=$.default.div(["background:",";width:",";"],Ae.a.N0,e=>e.width);function cb(){return(cb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const lb=({nameTextWidthPercentage:e,dateAddedWidth:t})=>a.a.createElement(sb,null,a.a.createElement(ib,{height:24,minWidth:24,lineHeight:40,borderLeft:6}),a.a.createElement(ib,{height:14,width:`${e}%`,lineHeight:40,borderLeft:8,borderRight:20}),a.a.createElement(ob,{width:`${100-e}%`}),a.a.createElement(ib,{height:14,minWidth:50,lineHeight:40}),a.a.createElement(ib,{height:14,minWidth:t,lineHeight:40,borderLeft:16}),a.a.createElement(ib,{height:24,minWidth:24,lineHeight:40,borderLeft:170-t+62,borderRight:12}));lb.displayName="TableItem";const ub=e=>{const{pageNumber:t,totalCount:s}=e,n=s-6*(t-1),i=Math.min(n,6),r=[{nameTextWidthPercentage:80,dateAddedWidth:170},{nameTextWidthPercentage:70,dateAddedWidth:150},{nameTextWidthPercentage:80,dateAddedWidth:160},{nameTextWidthPercentage:60,dateAddedWidth:140},{nameTextWidthPercentage:70,dateAddedWidth:155},{nameTextWidthPercentage:80,dateAddedWidth:170}],o=s>6?55:23;return a.a.createElement(sb,null,a.a.createElement(ab,null),a.a.createElement(rb,{paddingTop:0,paddingBottom:o},a.a.createElement(sb,null,a.a.createElement(ib,{height:14,minWidth:50,lineHeight:26}),a.a.createElement(ob,{width:"100%"}),a.a.createElement(ib,{height:14,minWidth:40,lineHeight:26,borderLeft:16}),a.a.createElement(ib,{height:14,minWidth:100,lineHeight:26,borderLeft:26}),a.a.createElement(ib,{height:0,minWidth:24,lineHeight:26,borderLeft:144})),a.a.createElement(ib,{height:2,lineHeight:2}),a.a.createElement(rb,{paddingTop:0,paddingBottom:0},Array.from({length:i}).map((e,t)=>a.a.createElement(lb,cb({},r[t],{key:`table-item--${t}`})))),a.a.createElement(ib,{height:2,lineHeight:2})))};ub.displayName="AttachmentsTableSkeleton",ub.defaultProps={pageNumber:1,totalCount:6};var db=ub,pb=s("./src/packages/issue/user-preferences-services/src/main.js"),mb=s("./node_modules/lodash/debounce.js"),bb=s.n(mb),fb=s("./node_modules/@atlaskit/media-card/dist/es2019/utils/lightCards/cardLoading.js"),gb=s("./node_modules/@atlaskit/media-card/dist/es2019/root/card/cardLoader.js"),hb=s("./node_modules/@atlaskit/media-filmstrip/dist/es2019/filmstripView/index.js"),yb=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/with-props.js"),Ob=s("./src/packages/issue/permissions-service/src/main.js"),jb=Object(j.defineMessages)({confirmationHeader:{id:"issue-attachments-base.with-issue-attachments-delete.confirmation-header",defaultMessage:"Delete this attachment?"},confirmationContent:{id:"issue-attachments-base.with-issue-attachments-delete.confirmation-content",defaultMessage:"Once you delete, it's gone for good."}});function Eb(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function vb(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Eb(Object(s),!0).forEach((function(t){kb(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Eb(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function kb(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function wb(){return(wb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}var Sb=(e,t="filmStripView")=>s=>{const i=Object(fl.f)(),[{value:{attachments:r}},{deleteAttachment:o}]=Object(Ym.a)(i),[c,l]=Object(n.useState)(),{formatMessage:u}=Object(Te.c)(),{createAnalyticsEvent:d}=Object(Nd.a)(),p=Object(Ed.c)(),[m]=Object(Ob.a)(),b=Object(n.useCallback)(e=>{if(void 0!==c){e.stopPropagation();const s=d({action:"clicked",actionSubject:"button"});Object(za.h)(s,"deleteAttachmentConfirm",{view:t}),o(i,c),l()}},[d,o,c,i]),f=Object(n.useCallback)(e=>{e.stopPropagation(),l()},[]),g=Object(n.useMemo)(()=>(({attachments:e,canDeleteAllAttachments:t,canDeleteOwnAttachments:s,accountIdLoggedInUser:n})=>e.reduce((e,a)=>vb(vb({},e),{},{[a.id]:"issue"===a.parentName&&(t||null!==n&&null!==a.author&&s&&a.author.accountId===n)}),{}))({attachments:r,canDeleteAllAttachments:m.canDeleteAllAttachments,canDeleteOwnAttachments:m.canDeleteOwnAttachments,accountIdLoggedInUser:p}),[p,r,m.canDeleteAllAttachments,m.canDeleteOwnAttachments]);return a.a.createElement(a.a.Fragment,null,a.a.createElement(e,wb({},s,{onDeleteAttachment:l,canDeleteAttachmentMap:g})),void 0!==c&&a.a.createElement(it.b,{appearance:"danger",headerMessage:u(jb.confirmationHeader),contentMessage:u(jb.confirmationContent),onConfirm:b,onCancel:f,externalId:"issue.attachment.card.delete"}))},Ib=s("./src/packages/issue/issue-view/src/actions/card-cover-actions.js");const Cb=()=>({type:"SCROLL_TO_ATTACHMENT_COMMENT"}),Tb=()=>({type:"SCROLL_TO_ATTACHMENT_WORKLOG"});var Pb=s("./src/packages/issue/issue-view/src/common/media/components/create-auth-provider.js"),_b=s("./src/packages/issue/issue-view/src/common/media/components/with-token-provider/with-token-provider.js");function xb(){return(xb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Db(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}var Ab=e=>Object(_b.a)((e=>t=>{const{tokenProvider:s}=t,n=Db(t,["tokenProvider"]),{mediaContext:i}=n;if(!i.viewContext)return null;const{clientId:r,serviceHost:o}=i.viewContext,c={authProvider:Object(Pb.a)(s,r,o)};return a.a.createElement(e,xb({viewMediaClientConfig:c},n))})(e)),Mb=s("./src/packages/issue/issue-view/src/media-feature-flags.js"),Lb=s("./src/packages/issue/issue-view/src/selectors/card-cover-selectors.js"),Rb=s("./node_modules/@atlaskit/icon/glyph/trash.js"),Nb=s.n(Rb),Ub=s("./src/packages/issue/attachments/issue-attachments-base/src/services/constants.js");var Fb=s("./node_modules/@atlaskit/icon/glyph/watch.js"),Vb=s.n(Fb),Kb=s("./src/packages/issue/issue-scroll/src/services/main.js"),Bb=s("./src/packages/issue/issue-scroll/src/services/types.js"),Wb=Object(j.defineMessages)({goToComment:{id:"issue-attachments-base.goto-button.go-to-comment",defaultMessage:"Go to the comment with this attachment"},goToWorklog:{id:"issue-attachments-base.goto-button.go-to-worklog",defaultMessage:"Go to the work log entry with this attachment"},goToField:{id:"issue-attachments-base.goto-button.go-to-field",defaultMessage:"You can find this attachment in the {field} field"}});function Hb(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Gb(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Hb(Object(s),!0).forEach((function(t){$b(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Hb(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function $b(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const qb=(e,t)=>e!==Ub.a.customfield?e:t&&t.title||"custom field",zb=({attachmentParent:e,attachmentParentId:t,onScrollToComments:s,onScrollToWorklogs:i,attachmentView:r,issueKey:o,component:c})=>{const{formatMessage:l}=Object(Te.c)(),[,{setScrollTarget:u}]=Object(Kb.a)(),[d]=Object(gl.a)(o,`customfield_${t}`),p=e!==Ub.a.comment&&e!==Ub.a.worklog,m=Object(n.useCallback)((n,a)=>{n.stopPropagation(),n.preventDefault();const o=(e,s)=>{u({type:e,id:t}),s()};switch(e){case Ub.a.comment:o(Bb.a.COMMENT,s),Object(za.h)(a,"gotoComment",{view:r});break;case Ub.a.worklog:o(Bb.a.WORKLOG,i),Object(za.h)(a,"gotoWorklog",{view:r})}},[e,u,t,s,r,i]),b=Object(n.useCallback)(e=>{"Enter"===e.key&&e.stopPropagation()},[]),f=Object(n.useMemo)(()=>{switch(e){case Ub.a.comment:return l(Wb.goToComment);case Ub.a.worklog:return l(Wb.goToWorklog);default:return l(Wb.goToField,{field:qb(e,d)})}},[e,d,l]),g=()=>p?{}:"listView"===r?{background:"rgba(9, 30, 66, 0.06)"}:{background:"#FFFFFF"};return a.a.createElement(he.a,{content:f,position:"top"},a.a.createElement(ba.a,{appearance:"subtle",iconBefore:a.a.createElement(Vb.a,{label:f}),onClick:m,onKeyPress:b,theme:(e,t)=>({buttonStyles:Gb(Gb({},e(t).buttonStyles),{},{display:"flex",justifyContent:"center","&:hover":g(),paddingLeft:"filmStripView"===r?"0px":void 0,paddingRight:"filmStripView"===r?"0px":void 0,margin:"0"})}),isDisabled:p,component:c}))};zb.displayName="GoToButton",zb.defaultProps={component:"button"};var Yb=zb,Qb=s("./node_modules/@atlaskit/icon/cjs/index.js"),Jb=s.n(Qb);const Zb=()=>a.a.createElement("svg",{viewBox:"0 0 24 24"},a.a.createElement("g",{transform:"translate(3 3)",fill:"currentColor",fillRule:"evenodd"},a.a.createElement("path",{d:"M2 11v5h14v-5H2zM0 1.995C0 .893.893 0 1.995 0h14.01C17.107 0 18 .893 18 1.995v14.01A1.995 1.995 0 0 1 16.005 18H1.995A1.995 1.995 0 0 1 0 16.005V1.995z",fillRule:"nonzero"}),a.a.createElement("rect",{x:"3",y:"12",width:"8",height:"2",rx:"1"}),a.a.createElement("rect",{x:"13",y:"12",width:"2",height:"2",rx:"1"})));Zb.displayName="hideIcon";const Xb=()=>a.a.createElement("svg",{viewBox:"0 0 24 24"},a.a.createElement("g",{transform:"translate(3 3)",fill:"currentColor",fillRule:"evenodd"},a.a.createElement("path",{d:"M2 11v5h14v-5H2zm0-1V9h14v1-8H2v8zM0 1.995C0 .893.893 0 1.995 0h14.01C17.107 0 18 .893 18 1.995v14.01A1.995 1.995 0 0 1 16.005 18H1.995A1.995 1.995 0 0 1 0 16.005V1.995z",fillRule:"nonzero"}),a.a.createElement("rect",{x:"3",y:"12",width:"8",height:"2",rx:"1"}),a.a.createElement("rect",{x:"13",y:"12",width:"2",height:"2",rx:"1"})));Xb.displayName="showIcon";const ef=({icon:e,label:t})=>{const s="show-icon"===e?Xb:Zb;return(a.a.createElement(he.a,{position:"top",content:t},a.a.createElement(Jb.a,{glyph:s,label:t,size:"small"})))};ef.displayName="CardCoverIcon";var tf=ef,sf=Object(j.defineMessages)({delete:{id:"attachments.delete-attachment-from-attachment-panel",defaultMessage:"Delete"},goto:{id:"attachments.goto-attachment-from-attachment-panel",defaultMessage:"GoTo"},show:{id:"attachments.show-on-card",defaultMessage:"Show on card"},hide:{id:"attachments.hide-on-card",defaultMessage:"Hide on card"},confirmationHeader:{id:"attachments.confirm-delete-attachment-modal-header",defaultMessage:"Delete this attachment?"},confirmationContent:{id:"attachments.confirm-delete-attachment-modal-text",defaultMessage:"Once you delete, it's gone for good."}});const nf=(e,t,s,n,i,r,c,l,u)=>{const d=i.formatMessage(sf.delete);return t===Ub.b?n?[{label:d,handler:()=>c(e),icon:a.a.createElement(Nb.a,{label:d})}]:[]:[{label:i.formatMessage(sf.goto),handler:o.a,icon:a.a.createElement(Yb,{attachmentParent:t,attachmentParentId:s,attachmentView:"filmStripView",onScrollToComments:l,onScrollToWorklogs:u,issueKey:r,component:"div"})}]},af=(e,t,s,n,i)=>{const r=Number(e),o=s.formatMessage(sf.hide),c=s.formatMessage(sf.show);return t&&t.isEnabled&&t.availableAttachmentIds.includes(r)?r===t.attachmentId?[{label:o,handler:()=>{i(r)},icon:a.a.createElement(tf,{icon:"hide-icon",label:o})}]:[{label:c,handler:()=>{n(t.attachmentId,r)},icon:a.a.createElement(tf,{icon:"show-icon",label:c})}]:[]};function rf(){return(rf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function of(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function cf(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const lf={width:156,height:125},uf=e=>a.a.createElement(fb.a,{key:e,dimensions:lf});uf.displayName="fakeCard";const df=e=>{const[t,s]=Object(n.useState)(0),[i,r]=Object(n.useState)(0),[o,c]=Object(n.useState)([]),[l,u]=Object(n.useState)(!1),{cardCover:d,intl:p,isMobile:m,isPreview:b,mediaContext:f,onCardCoverHide:g,onCardCoverShow:h,onScrollToComments:y,onScrollToWorklogs:O,viewMediaClientConfig:j,onDeleteAttachment:E,canDeleteAttachmentMap:v}=e,k=Object(fl.f)(),[{value:{attachments:w,totalCount:S},meta:{startAt:I},error:C},{refreshAttachments:T}]=Object(Ym.a)(k),P=Object(n.useCallback)(({offset:e,offsets:t})=>{c(t),s(e)},[]),_=Object(n.useCallback)(bb()(T,300),[T]);Object(n.useEffect)(()=>{0===I&&s(0)},[I]);const x=Object(n.useCallback)(({animate:e,offset:t})=>{const n=o.findIndex(e=>e.left>t)-1;u(e),r(n),s(t),_(k,{startAt:n})},[o,_,k]),D=w||[],A=Object(n.useMemo)(()=>D.map(e=>({identifier:function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?of(Object(s),!0).forEach((function(t){cf(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):of(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({mediaItemType:"file",id:e.mediaApiFileId},f.viewContext&&null!==f.viewContext.collection?{collectionName:f.viewContext.collection}:{}),selectable:!1,actions:((e,t,s,n,a,i,r,o,c,l,u,d)=>[...nf(e,t,s,a,i,r,o,u,d),...af(e,n,i,c,l)])(e.id,e.parentName,e.parentId,d,v[e.id],p,k,E,h,g,y,O),isLazy:!m})),[D,v,d,p,m,k,f.viewContext,g,h,E,y,O]),M=Object(n.useCallback)(e=>{const t={list:e.map(e=>e.identifier)},s=e.map((e,s)=>b||C?uf(`card-${s}`):a.a.createElement(gb.a,rf({key:e.identifier.id,mediaClientConfig:j,mediaViewerDataSource:t,useInlinePlayer:!1,dimensions:lf,shouldOpenMediaViewer:!0,featureFlags:Object(Mb.a)()},e))),n=S-s.length-I,i=Array.from({length:I}).map((e,t)=>uf(`card-${t}`)),r=Array.from({length:n}).map((e,t)=>uf(`card-${S-n+t}`));return[...i,...s,...r]},[I,C,b,S,j]);return C?a.a.createElement(tb,{shouldHideImage:!0,onClick:()=>T(k,{startAt:i})}):a.a.createElement("div",{"data-test-id":"issue.views.issue-base.content.attachment.filmstrip-panel"},a.a.createElement(hb.a,{offset:t,animate:l,onSize:P,onScroll:x,mediaClientConfig:j,featureFlags:Object(Mb.a)()},M(A)))};df.displayName="AttachmentFilmstrip";var pf=tt()([Sb,Ab,j.injectIntl,Object(as.a)(e=>({onCardCoverShow:()=>{e("card-cover-show.click")},onCardCoverHide:()=>{e("card-cover-hide.click")}})),Object(yb.a)({externalId:"issue.attachment.card"}),Object(i.b)(e=>({mediaContext:Object(P.a)(e),isMobile:Object(C.u)(e),cardCover:Object(Lb.c)(e)?Object(Lb.a)(e):null,isPreview:Object(T.t)(e)}),e=>({onCardCoverShow:(t,s)=>{e(Object(Ib.d)(t,s))},onCardCoverHide:t=>{e(Object(Ib.d)(t))},onScrollToComments:()=>{e(Cb())},onScrollToWorklogs:()=>{e(Tb())}})),Object(ls.a)()])(df),mf=s("./src/packages/platform/ui/error-boundary/src/index.js"),bf=s("./node_modules/@atlaskit/media-table/dist/es2019/component/mediaTable.js"),ff=s("./node_modules/@atlaskit/width-detector/dist/es2019/WidthObserver/index.js"),gf=s("./src/packages/accessibility/src/ui/screenreader-text/styled.js"),hf=s("./src/packages/issue/attachments/issue-attachments-table/src/ui/empty/assets/cloud.svg"),yf=s.n(hf),Of=Object(j.defineMessages)({emptyStateTitle:{id:"issue-attachments-table.empty.empty-state-title",defaultMessage:"All your attachments in one place"},emptyStateDescription:{id:"issue-attachments-table.empty.empty-state-description",defaultMessage:"Attachments can be added to paragraph fields, comments, and worklog entries. When you have attachments on this issue, you can view and download them here."}});const jf=()=>{const{formatMessage:e}=Object(Te.c)();return(a.a.createElement(Jn.a,{imageUrl:yf.a,header:e(Of.emptyStateTitle),description:e(Of.emptyStateDescription)}))};jf.displayName="NoAttachments";var Ef=jf,vf=Object(j.defineMessages)({fileName:{id:"issue-attachments-table.file-name",defaultMessage:"Name"},size:{id:"issue-attachments-table.size",defaultMessage:"Size"},date:{id:"issue-attachments-table.date",defaultMessage:"Date added"},loadingAriaLabel:{id:"issue-attachments-table.loading-aria-label",defaultMessage:"loading attachments"},loadedAriaLabel:{id:"issue-attachments-table.loaded-aria-label",defaultMessage:"Attachments table loaded. Press tab to enter the table"}}),kf=s("./node_modules/moment/moment.js"),wf=s.n(kf),Sf=s("./node_modules/@atlaskit/media-client/dist/es2019/utils/getMediaTypeFromMimeType.js"),If=s("./node_modules/@atlaskit/media-table/dist/es2019/component/nameCell.js"),Cf=s("./node_modules/@atlaskit/media-ui/dist/es2019/humanReadableSize.js");const Tf="date",Pf="deleteOrGoto",_f="download",xf="file",Df="size";var Af=Object(j.defineMessages)({delete:{id:"issue-attachments-table.delete-button.delete",defaultMessage:"Delete attachment"}});function Mf(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Lf(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Mf(Object(s),!0).forEach((function(t){Rf(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Mf(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Rf(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Nf=({attachmentId:e,onDeleteAttachment:t})=>{const s=Object(Te.c)(),{createAnalyticsEvent:i}=Object(Nd.a)(),r=Object(n.useCallback)(s=>{s.stopPropagation();const n=i({action:"clicked",actionSubject:"button"});Object(za.h)(n,"deleteAttachment"),t(e)},[e,i,t]),o=Object(n.useCallback)(e=>{"Enter"===e.key&&e.stopPropagation()},[]);return a.a.createElement(ba.a,{appearance:"subtle",iconAfter:a.a.createElement(Nb.a,{label:s.formatMessage(Af.delete)}),onClick:r,onKeyPress:o,theme:(e,t)=>({buttonStyles:Lf(Lf({},e(t).buttonStyles),{},{display:"flex",justifyContent:"center","&:hover":{background:"rgba(9, 30, 66, 0.06)"},margin:"0"})})})};Nf.displayName="DeleteButton";var Uf=Nf;const Ff=$.default.span(["white-space:nowrap;"]),Vf=$.default.div(["margin:0 -","px;min-width:calc(100% + ","px);."," &{opacity:0;}.",":hover &,.",":focus &,.",":focus-within &{opacity:1;}"],q.e,2*q.e,"jira-issue-view-attachments-table","jira-issue-view-attachments-table","jira-issue-view-attachments-table","jira-issue-view-attachments-table");function Kf(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Bf(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Kf(Object(s),!0).forEach((function(t){Wf(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Kf(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Wf(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Hf=(e,t)=>a.a.createElement("div",{"aria-label":e},a.a.createElement(Ff,{"aria-hidden":!0},a.a.createElement(If.a,{text:e,mediaType:Object(Sf.a)(t),startFixedChars:3,endFixedChars:4})));Hf.displayName="createNameCell";const Gf=(e,t,s,n,i,r,o,c,l)=>t===Ub.b?n?a.a.createElement(Vf,null,a.a.createElement(Uf,{attachmentId:e,onDeleteAttachment:i})):null:c?null:a.a.createElement(Vf,null,a.a.createElement(Yb,{attachmentParent:t,attachmentParentId:s,attachmentView:"listView",onScrollToComments:r,onScrollToWorklogs:o,issueKey:l}));Gf.displayName="createDeleteOrGoToCell";const $f=e=>void 0===e||e>=430,qf=Object(Ul.a)((e,t,s,n,a,i,r,o,c)=>{const l=$f(t);return e.map(e=>({data:Bf(Bf({file:Hf(e.filename,e.mimetype),date:wf()(1e3*e.createdDate).locale(s).format("DD MMM YYYY h:mma")},l?{size:Object(Cf.a)(e.filesize)}:{}),{},{deleteOrGoto:Gf(e.id,e.parentName,e.parentId,a[e.id],n,r,i,o,c)}),identifier:{mediaItemType:"file",id:e.mediaApiFileId}}))}),zf=e=>{const{viewMediaClientConfig:t,onPreviewOpen:s=o.a,onPreviewClose:i=o.a,onDeleteAttachment:r,canDeleteAttachmentMap:c,onScrollToComments:l=o.a,onScrollToWorklogs:u=o.a,isInModal:d=!1}=e,p=Object(Te.c)(),{createAnalyticsEvent:m}=Object(Nd.a)(),b=Object(n.useRef)(!1),f=Object(fl.f)(),[{error:g,loading:h,meta:y,value:O},j]=Object(Ym.a)(f),{orderDirection:E,orderField:v,startAt:k}=y,{attachments:w,totalCount:S}=O,{refreshAttachments:I,setOrderDirection:C,setOrderField:T}=j,P=Object(Ul.a)(bb()(I,50)),_=Object(n.useMemo)(()=>Math.ceil((k+1)/6),[k]),[x,D]=Object(n.useState)(_),[A,M]=Object(n.useState)(void 0),L=bb()(M,100),R=Object(n.useCallback)(e=>{b.current=!0,D(e),P(f,{orderDirection:E,orderField:v,startAt:6*(e-1)})},[P,f,E,v]),N=Object(n.useCallback)((e,t)=>{b.current=!0;const s=(e=>{switch(e){case Df:return Ub.e.FILESIZE;case xf:return Ub.e.FILENAME;default:return Ub.e.CREATED}})(e),n=m({action:"sorted",actionSubject:"dynamicTable"});T(s),C(t),Object(za.h)(n,"issueAttachments",{key:e}),P(f,{orderDirection:t,orderField:s})},[m,P,f,C,T]),U=Object(Ed.l)();if(g)return a.a.createElement(tb,{shouldHideImage:e.shouldHideErrorImage,onClick:()=>I(f,{orderDirection:E,orderField:v,startAt:6*(_-1)})});if(0===S)return a.a.createElement(Ef,null);const F=qf(w||[],A,U,r,c,u,l,d,f),V=((e,{formatMessage:t})=>({cells:[{key:xf,content:a.a.createElement(Ff,null,t(vf.fileName)),isSortable:!0},...$f(e)?[{key:Df,content:t(vf.size),isSortable:!0,inlineStyles:{width:"66px"}}]:[],{key:Tf,content:t(vf.date),isSortable:!0,inlineStyles:{width:"188px"}},{key:Pf,content:"",inlineStyles:{width:"36px"},width:10},{key:_f,content:"",inlineStyles:{width:"48px"}}]}))(A,p),K=(e=>{switch(e){case Ub.e.FILESIZE:return Df;case Ub.e.FILENAME:return xf;case Ub.e.CREATED:return Tf;default:return}})(v);return a.a.createElement(a.a.Fragment,null,a.a.createElement(ff.a,{offscreen:!0,setWidth:e=>{L(e)}}),h&&a.a.createElement(a.a.Fragment,null,b.current&&a.a.createElement(gf.a,{"aria-live":"assertive"},p.formatMessage(vf.loadingAriaLabel)),a.a.createElement(db,{pageNumber:x,totalCount:S})),!h&&a.a.createElement(a.a.Fragment,null,b.current&&a.a.createElement(gf.a,{"aria-live":"assertive"},p.formatMessage(vf.loadedAriaLabel)),a.a.createElement(bf.a,{items:F,mediaClientConfig:t,columns:V,itemsPerPage:6,totalItems:S||0,pageNumber:_,onSetPage:R,onSort:N,sortKey:K,sortOrder:E,onPreviewOpen:s,onPreviewClose:i,rowProps:{className:"jira-issue-view-attachments-table"}})))};zf.defaultProps={shouldHideErrorImage:!1};var Yf=Sb(zf,"listView");const Qf=$.default.div(["padding:","px;min-width:","px;position:relative;table{width:100%;}"],q.e/2,37*q.e),Jf=({viewMediaClientConfig:e,onScrollToWorklogs:t,onScrollToComments:s})=>a.a.createElement(mf.b,{id:"issue.details.attachment.list-view"},a.a.createElement(Qf,null,a.a.createElement(Yf,{shouldHideErrorImage:!0,viewMediaClientConfig:e,onScrollToWorklogs:t,onScrollToComments:s})));Jf.displayName="ListView";const Zf=Ab(Jf);var Xf=Object(i.b)(e=>({issueKey:Object(C.B)(e),mediaContext:Object(P.a)(e)}),e=>({onScrollToComments:()=>e(Cb()),onScrollToWorklogs:()=>e(Tb())}))(Zf);var eg=({attachmentError:e,refreshAttachments:t,isPreview:s,totalCount:i})=>{const[r]=Object(pb.b)("jira.user.issue.attachment.view"),o=Object(fl.f)(),c=Object(n.useCallback)(()=>{t(o)},[o,t]);if(e)return a.a.createElement(tb,{shouldHideImage:!0,onClick:c});switch(r){case"list-view":return s?a.a.createElement(db,{totalCount:i}):a.a.createElement(Xf,null);case"strip-view":default:return a.a.createElement(pf,null)}},tg=Object(i.b)(e=>({isPreview:Object(T.t)(e)}),{})(eg),sg=s("./src/packages/issue/issue-view/src/selectors/attachment-selector.js"),ng=s("./src/packages/issue/issue-view/src/views/common/button/square-add-icon-button.js"),ag=Object(j.defineMessages)({title:{id:"attachments.heading.title",defaultMessage:"Attachments {totalCount}"},attachmentsMenuAriaLabel:{id:"attachments.heading.attachmentsMenuLabel",defaultMessage:"Attachments Menu"},addAttachmentAriaLabel:{id:"attachments.heading.addAttachmentLabel",defaultMessage:"Add Attachment"}});const ig=$.default.div(["margin-left:","px;"],.75*q.e),rg=({canCreateAttachment:e,onClick:t})=>{const{createAnalyticsEvent:s}=Object(Nd.a)(),{formatMessage:i}=Object(Te.c)(),r=Object(n.useCallback)(()=>{t();const e=s({action:"clicked",actionSubject:"button"});Object(za.h)(e,"addAttachment")},[s,t]);return e?a.a.createElement(ig,null,a.a.createElement(ng.a,{label:i(ag.addAttachmentAriaLabel),onClick:r})):null};rg.displayName="AddAttachments";var og=Object(i.b)(e=>({canCreateAttachment:!Object(C.v)(e)&&Object(sg.b)(e)}),e=>({onClick:()=>e(Object(ws.b)())}))(rg),cg=s("./node_modules/@atlaskit/badge/dist/es2019/components/index.js"),lg=s("./node_modules/file-saver/FileSaver.js"),ug=s("./src/packages/platform/observability/errors-handling/src/utils/fire-error-analytics.js"),dg=s("./src/packages/platform/utils/fetch/src/utils/errors.js"),pg=s("./src/packages/issue/attachments/issue-attachments-base/src/services/messages.js"),mg=s("./src/packages/issue/attachments/issue-attachments-base/src/services/index.js");const bg=Object(vd.a)(mg.a,{selector:e=>e.isDownloading});var fg=Object(j.defineMessages)({downloadAll:{id:"attachments.heading.download-all",defaultMessage:"Download all"},downloading:{id:"attachments.heading.downloading",defaultMessage:"Downloading attachments"}});const gg=Object(n.memo)(e=>{const{issueId:t,issueKey:s}=e,{formatMessage:i}=Object(Te.c)(),{createAnalyticsEvent:r}=Object(Nd.a)();if(!t)return null;const[{value:{totalCount:o}}]=Object(Ym.a)(s),[c,l]=((e,t)=>{const s=`${t}_attachments.zip`,[a,{setIsDownloading:i}]=bg({issueKey:t}),r=`${Object(Ed.e)()}/secure/issueAttachments/${e}.zip`,{createAnalyticsEvent:o}=Object(Nd.a)(),{showFlag:c,dismissFlag:l}=Object(os.useFlagsService)(),u=Object(n.useRef)();let d=Object(n.useCallback)(()=>{},[]);const p=Object(n.useCallback)(()=>{u.current&&l(u.current)},[l]),m=Object(n.useCallback)((e,s)=>{let n=null,a=e.toString();e instanceof dg.b&&(n=e.statusCode,a=e.message),i(t,!1),Object(ug.a)({error:e,meta:{id:s,packageName:"jiraIssueAttachmentsBase",teamName:"bento"}}),Fn.i.safeError("issue.attachments.download-all",a);const r=500===n?pg.a.downloadFailedExceedFileSizeDescription:pg.a.downloadFailedDescription;u.current=c({type:"error",title:pg.a.downloadFailedTitle,description:[r,{issueKey:t}],actions:[{onClick:d,content:pg.a.tryAgain}]})},[t,d,i,c]),b=Object(n.useCallback)(async()=>{i(t,!0),Object(za.b)(o({}),"downloadAll requested"),c({type:"success",title:pg.a.downloadStartTitle,description:pg.a.downloadStartDescription,isAutoDismiss:!0}),fetch(r).then(e=>{if(!e.ok)throw new dg.b(e.status,e.statusText);return Object(za.b)(o({}),"downloadAll started"),e.blob()}).then(e=>{try{Object(lg.saveAs)(e,s),i(t,!1),Object(za.b)(o({}),"downloadAll completed")}catch(n){m(n,"useDownloadAllService-save-file")}}).catch(e=>m(e,"useDownloadAllService-fetch"))},[o,s,t,m,r,i,c]);return d=Object(n.useCallback)(()=>{b(),p()},[b,p]),[a,b]})(t,s),u=Object(n.useCallback)(()=>{l();const e=r({action:"clicked",actionSubject:"dropdownItem"});Object(za.h)(e,"downloadAllAttachments",{totalMedia:o})},[r,l,o]);return a.a.createElement(ii.a,{key:"download-all-attachments",onClick:u,elemAfter:a.a.createElement(cg.a,null,o),isDisabled:c},i(c?fg.downloading:fg.downloadAll))});var hg=Object(i.b)(e=>({issueId:Object(C.A)(e),issueKey:Object(C.B)(e)}),{})(gg),yg=s("./src/packages/issue/user-preferences-services/src/feature-flags.js"),Og=Object(j.defineMessages)({switchToListView:{id:"attachments.heading.switch-to-listView",defaultMessage:"Switch to list view"},switchToStripView:{id:"attachments.heading.switch-to-strip-view",defaultMessage:"Switch to strip view"}});var jg=Object(n.memo)(({refreshAttachments:e})=>{const t=Object(fl.f)(),{formatMessage:s}=Object(Te.c)(),[i,r]=Object(pb.b)("jira.user.issue.attachment.view"),{createAnalyticsEvent:o}=Object(Nd.a)(),c=Object(n.useCallback)(s=>()=>{Object(yg.a)()&&"function"!=typeof r?r.setValue(s):"function"==typeof r&&r(s),e(t);const n=o({action:"clicked",actionSubject:"dropdownItem"});Object(za.h)(n,"switchAttachmentsView",{view:s})},[o,t,e,r]);switch(i){case"list-view":return a.a.createElement(ii.a,{onClick:c("strip-view")},s(Og.switchToStripView));case"strip-view":default:return a.a.createElement(ii.a,{onClick:c("list-view")},s(Og.switchToListView))}});var Eg=({refreshAttachments:e,isPreview:t})=>{const{formatMessage:s}=Object(Te.c)();return(a.a.createElement(a.a.Fragment,null,a.a.createElement(ri.a,{triggerType:"button",triggerButtonProps:{appearance:"subtle",spacing:"compact",iconBefore:a.a.createElement(jm.a,{size:"small",label:s(ag.attachmentsMenuAriaLabel)}),isDisabled:t},position:"bottom right"},a.a.createElement(oi.a,null,a.a.createElement(jg,{refreshAttachments:e}),a.a.createElement(hg,null))),a.a.createElement(Ws.a,{onMount:e=>Object(za.b)(e,"AttachmentListViewOnboarding mounted")})))},vg=Object(i.b)(e=>({isPreview:Object(T.t)(e)}),{})(Eg);var kg=({totalCount:e,refreshAttachments:t})=>{const{formatMessage:s}=Object(Te.c)();return(a.a.createElement(a.a.Fragment,null,a.a.createElement(Ba.e,null,s(ag.title,{totalCount:e>0?`(${e})`:""})),a.a.createElement(Ba.d,null,a.a.createElement(vg,{refreshAttachments:t}),a.a.createElement(og,null))))};const wg=()=>{const e=Object(fl.f)(),[{error:t,value:{totalCount:s}},{refreshAttachments:n}]=Object(Ym.a)(e);return 0===s?null:a.a.createElement("div",{"data-test-id":"issue.views.issue-base.content.attachment.panel"},a.a.createElement(Ba.c,null,a.a.createElement(kg,{totalCount:s,refreshAttachments:n})),a.a.createElement(tg,{attachmentError:t,totalCount:s,refreshAttachments:n}))};wg.displayName="Attachments";var Sg=wg;const Ig=()=>({type:"SUBTASK_QUICK_ADD_CLICKED"}),Cg=()=>({type:"ISSUE_IN_EPIC_QUICK_ADD_CLICKED"}),Tg=()=>({type:"CHILD_ISSUE_QUICK_ADD_CLICKED"}),Pg=e=>({type:"CHILD_ISSUE_ADD_SUCCESS",payload:{childIssue:e}}),_g=()=>({type:"CHILD_ISSUE_PANEL_ADD_CLICKED"});var xg=s("./src/packages/issue/issue-view/src/actions/issue-navigation-actions.js"),Dg=s("./src/packages/issue/issue-view/src/actions/prefetch-issues-actions.js");const Ag=Object(yn.createSelector)(T.J,e=>e.childPanel),Mg=Object(yn.createSelector)(Ag,e=>e.subtaskQuickAddClickCount),Lg=Object(yn.createSelector)(Ag,e=>e.issueInEpicQuickAddClickCount),Rg=Object(yn.createSelector)(Ag,e=>e.childIssueQuickAddClickCount);var Ng=s("./src/packages/issue/issue-view/src/selectors/children-issues-selector.js");const Ug={CHILD_ISSUE_ADDED:"CHILD_ISSUE_ADDED",ISSUE_CHILDREN_ORDER_CHANGED:"ISSUE_CHILDREN_ORDER_CHANGED"};var Fg=s("./src/packages/platform/utils/app-base/src/index.js"),Vg=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/app-style/index.js"),Kg=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/is-shallow-equal.js"),Bg=s("./src/packages/platform/services/issue/src/components/context/consumer.js");const Wg=()=>Object(Fn.c)("jsw.issue.issue-view.child-issues-panel.label-for-linked-issues",!1);var Hg=Object(j.defineMessages)({linkParentErrorTitle:{id:"issue.views.common.child-issues-panel.flags.link-parent-error-title",defaultMessage:"We couldn't link the child issue"},linkParentErrorDescription:{id:"issue.views.common.child-issues-panel.flags.link-parent-error-description",defaultMessage:"The issue was created but the linking failed. Head over to your board and try again."},reorderErrorTitle:{id:"issue.views.common.child-issues-panel.flags.reorder-error-title",defaultMessage:"We couldn't reorder those issues"},reorderErrorDescription:{id:"issue.views.common.child-issues-panel.flags.reorder-error-description",defaultMessage:"Wait a few moments, then give it another try."}}),Gg=e=>{switch(e.type){case"state.entities.LINK_PARENT_FAILURE":return{type:"error",title:Hg.linkParentErrorTitle,description:Hg.linkParentErrorDescription};case"state.entities.REORDER_CHILDREN_FAILED":return{type:"error",title:Hg.reorderErrorTitle,description:Hg.reorderErrorDescription};default:return}};function $g(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function qg(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?$g(Object(s),!0).forEach((function(t){zg(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):$g(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function zg(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Yg(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const Qg=["summary","issuetype","parent","project"],Jg=e=>!!Object.keys(e).find(t=>!(e=>Qg.find(t=>e===t))(t)&&!e[t].hasDefaultValue&&e[t].required);var Zg=s("./node_modules/redux-observable/lib/es/index.js");const Xg=e=>e.context,eh=e=>e.entities,th=e=>e.ui,sh=Object(yn.createSelector)(eh,e=>e.issues||[]),nh=Object(yn.createSelector)(sh,e=>e.filter(e=>"DONE"===e.statusCategory)),ah=Object(yn.createSelector)(sh,e=>e.filter(e=>"DONE"!==e.statusCategory)),ih=Object(yn.createSelector)(sh,e=>e.filter(e=>"IN_PROGRESS"===e.statusCategory)),rh=Object(yn.createSelector)(eh,e=>e.issueHierarchyLevel),oh=e=>Object(yn.createSelector)(sh,t=>ns()(t,t=>t.id===e)),ch=Object(yn.createSelector)(eh,e=>e.issueTypes),lh=Object(yn.createSelector)(ch,e=>`issuetype in (${e.map(e=>e.id).join(",")})`),uh=Object(yn.createSelector)(th,e=>e.addClickCount),dh=Object(yn.createSelector)(th,e=>e.childPanelView),ph=Object(yn.createSelector)(th,e=>e.childCreateSummary),mh=Object(yn.createSelector)(th,ch,(e,t)=>e.selectedIssueType||t[0]),bh=Object(yn.createSelector)(th,e=>e.hideDone),fh=Object(yn.createSelector)(th,e=>e.fetchIssueTypesStatus),gh=Object(yn.createSelector)(fh,e=>"COMPLETE"===e),hh=Object(yn.createSelector)(th,e=>e.sortBy),yh=Object(yn.createSelector)(Xg,e=>e.baseUrl),Oh=(Object(yn.createSelector)(Xg,e=>e.locale),Object(yn.createSelector)(Xg,e=>e.childIssuesPanelType)),jh=Object(yn.createSelector)(Oh,e=>!!e&&"classicSubtasks"===e),Eh=Object(yn.createSelector)(Oh,e=>!!e&&"classicProjectEpicChildren"===e),vh=Object(yn.createSelector)(Oh,e=>!!e&&"nextGenChildren"===e),kh=Object(yn.createSelector)(Xg,e=>e.supportsIssueCreation),wh=Object(yn.createSelector)(Xg,gh,(e,t)=>e.requiresFullCreate||!t),Sh=Object(yn.createSelector)(Xg,e=>e.parentKey),Ih=Object(yn.createSelector)(Xg,e=>e.parentId),Ch=Object(yn.createSelector)(Xg,e=>e.customFieldIdRank),Th=Object(yn.createSelector)(Xg,e=>e.epicLinkFieldKey),Ph=Object(yn.createSelector)(Xg,e=>e.projectId),_h=Object(yn.createSelector)(Xg,e=>e.messages||{}),xh=Object(yn.createSelector)(_h,e=>e.title),Dh=Object(yn.createSelector)(_h,e=>e.noValueText||null),Ah=Object(yn.createSelector)(Xg,e=>e.onNavigateToNewIssue),Mh=Object(yn.createSelector)(Xg,e=>e.onChange),Lh=(Object(yn.createSelector)(Xg,e=>e.isIssueViewComplete),Object(yn.createSelector)(Xg,e=>null===e.user||""===e.user)),Rh=Object(yn.createSelector)(Xg,e=>e.projectType),Nh=Object(yn.createSelector)(Xg,e=>e.application),Uh=Object(yn.createSelector)(Xg,e=>e.edition);var Fh=(e,t)=>e.ofType("state.entities.CREATE_CHILD_SUCCESS","state.entities.LINK_CHILD_SUCCESS","state.entities.REORDER_CHILDREN_REQUEST","state.entities.REORDER_CHILDREN_FAILED").do(e=>{try{const s=t.getState(),n=Mh(s),a=Oh(s);switch(e.type){case"state.entities.CREATE_CHILD_SUCCESS":n({type:Ug.CHILD_ISSUE_ADDED,meta:{childIssue:e.payload.createdChild}});break;case"state.entities.LINK_CHILD_SUCCESS":n({type:Ug.CHILD_ISSUE_ADDED,meta:{childIssue:e.payload.linkedChild}});break;case"state.entities.REORDER_CHILDREN_REQUEST":{const{currentOrder:t,newOrder:s,currentIndex:i,newIndex:r}=e.payload,{id:o}=t[i],c=o?[Object(Li.j)(o)]:[],l=r>i,u=Number((s[l?r-1:r+1]||{}).id);"nextGenChildren"===a&&n({type:Ug.ISSUE_CHILDREN_ORDER_CHANGED,meta:{issueIds:c,rankId:u,isRankAfter:l}});break}case"state.entities.REORDER_CHILDREN_FAILED":{const{originalOrder:t,originalIndex:s,newIndex:i}=e.payload,{id:r}=t[s],o=r?[Object(Li.j)(r)]:[],c=s>i,l=Number((t[c?s-1:s+1]||{}).id);"nextGenChildren"===a&&l&&n({type:Ug.ISSUE_CHILDREN_ORDER_CHANGED,meta:{issueIds:o,rankId:l,isRankAfter:c}});break}}}catch(s){Fn.i.safeError("issue.views.common.child-issues-panel.change-notification","Failed to call onChange callback",new p.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:s}))}}).ignoreElements(),Vh=s("./node_modules/rxjs/Rx.js");const Kh=(e,t)=>({type:"state.entities.CREATE_CHILD_REQUEST",payload:{optimisticUiChildIssue:e},meta:{analyticsEvent:t}}),Bh=(e,t,s,n=!1)=>({type:"state.entities.CREATE_CHILD_SUCCESS",payload:{optimisticId:e,createdChild:t,usedGlobalCreateDialog:n},meta:{analyticsEvent:s}}),Wh=(e,t,s)=>({type:"state.entities.LINK_CHILD_SUCCESS",payload:{issueId:e,linkedChild:t},meta:{analyticsEvent:s}}),Hh=e=>({type:"state.entities.LINKING_ISSUE_RETRY_FAILURE",payload:{issueId:e}}),Gh=e=>({type:"state.entities.FETCH_SINGLE_CHILD_SUCCESS",payload:{childIssue:e}}),$h=()=>({type:"state.entities.FETCH_DETAILS_FOR_ISSUES_REQUEST"}),qh=(e,t,s,n)=>({type:"state.entities.REORDER_CHILDREN_FAILED",payload:{originalOrder:e,newOrder:t,originalIndex:s,newIndex:n}}),zh=e=>({type:"state.entities.REORDER_CHILDREN_SUCCESS",payload:{newOrder:e}});var Yh=(e,t)=>e.ofType("state.entities.CHILD_CREATED_IN_FULL_DIALOG").mergeMap(({payload:e,meta:s})=>{const n=t.getState(),{optimisticId:a,createdChild:i}=e;if(!vh(n))return Vh.Observable.of(Bh(a,i,s.analyticsEvent,!0));const r=yh(n),o=Ph(n),c=Ih(n);if(!o||!c)throw new Error("Attempted to link a child issue without a project or parent issue ID");return Vh.Observable.from(((e,t,s,n)=>Object(Ll.d)(`${e}/rest/internal/simplified/1.0/projects/${t}/issues/${s}/children`,{body:JSON.stringify({issueIds:[n]})}))(r,o,c,i.id)).map(()=>Bh(a,i,s.analyticsEvent,!0)).catch(e=>Vh.Observable.of(((e,t="")=>({type:"state.entities.LINK_PARENT_FAILURE",payload:{optimisticId:e,errorReason:`LINK_PARENT${t?`: ${t}`:""}`}}))(a,e.message)))}),Qh=(e,t)=>e.ofType("state.entities.CREATE_CHILD_FAILURE","state.entities.LINK_PARENT_FAILURE","state.entities.LINKING_ISSUE_FAILURE").do(({type:e,payload:{errorName:s,errorReason:n}})=>{const a=t.getState(),i=Oh(a)||"unknown_child",r=Nh(a),o=Uh(a);"state.entities.CREATE_CHILD_FAILURE"===e&&"ValidationError"===s?Object(Un.a)({experience:"createIssue",wasExperienceSuccesful:!0,analyticsSource:i,application:r,edition:o}):"TypeError"!==s&&"AbortError"!==s&&Object(Un.a)({experience:"createIssue",wasExperienceSuccesful:!1,analyticsSource:i,application:r,edition:o,additionalAttributes:{errorMessage:n}})}).switchMap(()=>Vh.Observable.empty());const Jh=(e,t,s)=>Object(Ll.e)(`${e}/rest/greenhopper/1.0/epics/${t}/add`,{body:JSON.stringify({ignoreEpics:!0,issueKeys:[s]})});var Zh=(e,t,s)=>((e,t)=>Object(Ll.d)(`${e}/rest/api/2/issue`,{body:JSON.stringify(t)}))(e,t).then(t=>({id:t.id,issueKey:t.key,issueLink:`${e}/browse/${t.key}`,issueSummary:s.issueSummary,issueTypeIconUrl:s.issueTypeIconUrl,issueTypeName:s.issueTypeName,assigneeUrl:s.assigneeUrl,assigneeDisplayName:s.assigneeDisplayName,isLoading:!1,errorType:void 0}));function Xh(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function ey(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Xh(Object(s),!0).forEach((function(t){ty(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Xh(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function ty(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var sy=(e,t)=>e.ofType("state.entities.CREATE_CHILD_REQUEST").mergeMap(({payload:e,meta:s})=>{const n=t.getState(),{optimisticUiChildIssue:a}=e;return((e,t,s)=>{const n=yh(e),a=Ph(e),i=Ih(e),r=jh(e),o=vh(e),c=Eh(e),l=mh(e);if(!a||!i)throw new Error("Attempted to create a new child issue without a project or parent issue ID");const u=r||o,{hasEpicLinkField:d}=l,p=c&&d,m=Th(e),b={fields:ey(ey({project:{id:a},issuetype:{id:t.issueTypeId},summary:t.issueSummary},u?{parent:{id:i}}:{}),p&&m?{[m]:Sh(e)}:{})};return Vh.Observable.from(Zh(n,b,t)).mergeMap(e=>c&&!d?Vh.Observable.from(Jh(n,i,e.id)).map(()=>Bh(t.id,e,s)).catch(s=>Vh.Observable.of(((e,t,s="")=>({type:"state.entities.LINKING_ISSUE_FAILURE",payload:{createdChild:e,optimisticId:t,errorReason:`CLASSIC_EPIC_LINK${s?`: ${s}`:""}`}}))(e,t.id,s.message))):Vh.Observable.of(Bh(t.id,e,s))).catch(e=>Vh.Observable.of(((e,t="",s="")=>({type:"state.entities.CREATE_CHILD_FAILURE",payload:{optimisticId:e,errorName:t,errorReason:`CREATE${s?`: ${s}`:""}`}}))(t.id,e.name,e.message)))})(n,a,s.analyticsEvent)});function ny(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}var ay=(e,t)=>e.ofType("state.entities.CREATE_CHILD_RETRY").map(({payload:{optimisticId:e},meta:s})=>{const n=t.getState(),a=oh(e)(n),{isLoading:i,hasError:r}=a,o=ny(a,["isLoading","hasError"]);return Kh(o,s.analyticsEvent)}),iy=s("./src/packages/platform/utils/constants/src/status-categories.js"),ry=s("./src/packages/issue/issue-view/src/common/service/issue/issue-urls.js"),oy=s("./src/packages/issue/issue-view/src/common/service/issue/user-transformer.js");const cy=(e,t)=>{const s=e.get(t);return s?s.value:void 0};var ly=(e,t,s)=>((e,t)=>e.getIssue$(t,!0).toPromise().then(({error:e,issue:t})=>e?Promise.reject(e):t?Promise.resolve(t):Promise.reject(new Error("Unexpected response from the dataprovider, expected an issue or an error but got neither"))))(e,s).then(e=>{const{id:s,key:n,fields:a}=e,i=cy(a,"summary"),r=cy(a,"issuetype"),o=cy(a,"priority"),c=cy(a,"status"),l=cy(a,"assignee")||null;return{id:s?s.toString():"",issueKey:n,issueLink:Object(ry.g)(Object(Li.b)(t),Object(Li.l)(n)),issueSummary:i,issueTypeIconUrl:r&&r.iconUrl,issueTypeName:r&&r.name,issuePriorityUrl:o&&o.iconUrl,issuePriorityName:o&&o.name,statusName:c&&c.name,statusId:c&&c.id,statusCategory:c&&Object(iy.statusCategoryForId)(c.statusCategory.id),statusCategoryId:c&&c.statusCategory.id,assigneeUrl:l&&Object(oy.c)(l).avatarUrl,assigneeDisplayName:l&&l.displayName,errorType:void 0,isLoading:!1}}),uy=s("./src/packages/issue/issue-view/src/common/service/issue/issue-fetch-server.js"),dy=(e,t)=>((e,t)=>Object(uy.b)(e,t,["assignee"]).toPromise())(e,t).then(e=>e.map(({id:e,fields:t})=>({id:e,assigneeUrl:t&&t.assignee&&Object(oy.c)(t.assignee).avatarUrl,assigneeDisplayName:t&&t.assignee&&Object(oy.c)(t.assignee).displayName}))),py=(e,t)=>e.ofType("state.entities.FETCH_DETAILS_FOR_ISSUES_REQUEST").switchMap(()=>{const e=t.getState(),s=yh(e),n=sh(e).map(e=>e.issueKey).filter(e=>void 0!==e);return Vh.Observable.from(dy(s,n)).map(e=>(e=>({type:"state.entities.FETCH_DETAILS_FOR_ISSUES_SUCCESS",payload:{issues:e}}))(e)).catch(e=>(Fn.i.safeError("issue.views.common.child-issues-panel.fetch-details-for-issues","Failed to fetch details for issues",new p.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e})),Vh.Observable.empty()))});const my=(e,t,s)=>{const n=yh(t),a=Ih(t),i=oh(e)(t);if(!a)throw new Error("Attempted to link a next-gen issue to a parent without issue ID ");return Vh.Observable.from(((e,t,s)=>Object(Ll.e)(`${e}/rest/api/3/issue/${s}`,{body:JSON.stringify({fields:{parent:{id:t}}})}))(n,a,e)).map(()=>Wh(e,i,s)).catch(t=>(Fn.i.safeError("issue.views.common.child-issues-panel.add-existing-issue","Failed to link a next-gen issue to a parent",new p.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:t})),Vh.Observable.of(Hh(e))))};var by=Object(Zg.combineEpics)((e,t)=>e.ofType("state.entities.LINKING_ISSUE_RETRY").mergeMap(({payload:{issueId:e},meta:{analyticsEvent:s}})=>{const n=t.getState();switch(Oh(n)){case"classicProjectEpicChildren":{const t=yh(n),a=Ih(n),i=oh(e)(n);if(!a)throw new Error("Attempted to link a classic issue to an epic without a parent issue ID");return Vh.Observable.from(Jh(t,a,e)).map(()=>Wh(e,i,s)).catch(t=>(Fn.i.safeError("issue.views.common.child-issues-panel.link-child-issue","Failed to link a classic issue to a parent",new p.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:t})),Vh.Observable.of(Hh(e))))}case"nextGenChildren":return my(e,n,s);default:return Vh.Observable.empty()}}),(e,t)=>e.ofType("state.entities.ADD_EXISTING_CHILD_ISSUE_REQUEST").mergeMap(({payload:{issueId:e},meta:{analyticsEvent:s}})=>{const n=t.getState();switch(Oh(n)){case"nextGenChildren":return my(e,n,s);default:return Vh.Observable.empty()}})),fy=(e,t)=>{const{id:s,key:n,fields:a}=e;return{id:s,issueKey:n,issueLink:Object(ry.g)(Object(Li.b)(t),Object(Li.l)(n)),issueSummary:a.summary,issueTypeIconUrl:a.issuetype.iconUrl,issueTypeName:a.issuetype.name,issuePriorityUrl:a.priority&&a.priority.iconUrl||void 0,issuePriorityName:a.priority&&a.priority.name||void 0,statusCategory:Object(iy.statusCategoryForId)(a.status.statusCategory.id),statusCategoryId:a.status.statusCategory.id,statusName:a.status.name,statusId:a.status.id,assigneeUrl:a.assignee&&Object(oy.c)(a.assignee).avatarUrl,assigneeDisplayName:a.assignee&&Object(oy.c)(a.assignee).displayName,isLoading:!1,errorType:void 0}},gy=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/graphql-tags.js"),hy=s("./src/packages/platform/utils/fetch/src/utils/as-json-stream.js");const yy=e=>gy.a`query {
      issue(issueIdOrKey: "${e}", latestVersion: true, screen:"view", fields:"subtasks") {
        fields {
          key
          value
        }
      }
    }`,Oy=e=>{if(!e||!e.data||!e.data.issue)return[];const t=e.data.issue.fields.find(e=>"children-issues"===e.key);return t&&t.value?t.value.map(({id:e,key:t,self:s,fields:{assignee:n,issuetype:a,priority:i,summary:r,status:o}})=>({id:e,key:t,self:s,fields:{issueType:a,priority:i,status:o,summary:r,assignee:n}})):[]};var jy=(e,t)=>((e,t)=>Object(hy.a)((e=>`${e}/rest/graphql/1/`)(e),{method:"POST",body:JSON.stringify({query:yy(t)})}))(e,t).map(Oy),Ey=s("./src/packages/platform/utils/fetch/src/utils/as-text-stream.js");var vy=(e,t,s,n)=>((e,t,s,n)=>Object(Ey.a)((e=>`${e}/rest/greenhopper/1.0/api/rank/after`)(e),{method:"PUT",body:JSON.stringify({customFieldId:t,issueIds:s,rankAfterId:n})}))(e,t,s,n);var ky=(e,t,s,n)=>((e,t,s,n)=>Object(Ey.a)((e=>`${e}/rest/greenhopper/1.0/api/rank/before`)(e),{method:"PUT",body:JSON.stringify({customFieldId:t,issueIds:s,rankBeforeId:n})}))(e,t,s,n);function wy(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Sy(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?wy(Object(s),!0).forEach((function(t){Iy(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):wy(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Iy(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var Cy=s("./src/packages/platform/utils/fetch/src/utils.js"),Ty=(e,t)=>((e,t)=>Object(Ll.b)(`${e}/rest/api/2/issue/${t}?fields=subtasks`))(e,t).then(e=>{const t=e&&e.fields;return t&&t.subtasks||[]});function Py(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function _y(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Py(Object(s),!0).forEach((function(t){xy(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Py(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function xy(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var Dy=(e,t)=>{const s=yh(e),n=Ih(e);if(!n)throw new Error("Attempted to reorder subtasks without parentId");const{currentOrder:a,newOrder:i,currentIndex:r,newIndex:o}=t;return Vh.Observable.from(((e,t,s,n)=>{const a=`${e}/secure/MoveSubtask.jspa?id=${t}&currentSubTaskSequence=${s}&subTaskSequence=${n}&atl_token=${Object(Rl.a)()||""}`;return fetch(a).then(e=>e.ok?null:e.text().then(t=>{throw new Cy.a(e.status,t)}))})(s,n,r,o)).switchMap(()=>Ty(s,n)).flatMap((e=[])=>{const t=e.map(({id:e})=>e),n=i.map(({id:e})=>e);if(Ua()(t,n))return Vh.Observable.of(zh(i));if(Ua()(t.slice().sort(),n.slice().sort())){const e=t.map(e=>i.find(t=>t.id===e));return Vh.Observable.of(zh(e))}const a=e.map(e=>{const{id:t}=e;return _y(_y({},i.find(e=>e.id===t)||{}),fy(e,s))});return Vh.Observable.of(zh(a),$h())}).catch(e=>(Fn.i.safeError("issue.views.common.child-issues-panel.reorder-subtask","Failed to reorder subtasks",new p.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Vh.Observable.of(qh(a,i,r,o))))},Ay=(e,t)=>e.ofType("state.entities.REORDER_CHILDREN_REQUEST").mergeMap(e=>{const s=t.getState();switch(Oh(s)){case"classicSubtasks":return Dy(s,e.payload);case"nextGenChildren":return((e,t,s)=>{const n=yh(e),a=Ih(e),i=Ch(e);if(!a)throw new Error("Attempted to reorder children without parentId");if(!i)throw new Error("Attempted to reorder children without customFieldId");const{currentOrder:r,newOrder:o,currentIndex:c,newIndex:l}=t,{analyticsEvent:u}=s,{id:d}=r[c],m=d?[+d]:[],b=l>c,f=Number((o[b?l-1:l+1]||{}).id);if(!f)throw new Error("Attempted to reorder children without rankId");return(b?vy(n,i,m,f):ky(n,i,m,f)).switchMap(()=>jy(n,a)).flatMap((e=[])=>{const t=e.map(({id:e})=>e),s=o.map(({id:e})=>e);if(Object(za.f)(u,"issueRank updated",{numIssues:1,previousIssueIndex:c,currentIssueIndex:l,isRankAfter:b}),Ua()(t,s))return Vh.Observable.of(zh(o));if(Ua()([...t].sort(),[...s].sort())){const e=t.map(e=>o.find(t=>t.id===e));return Vh.Observable.of(zh(e))}const a=e.map(e=>{const{id:t}=e;return Sy(Sy({},o.find(e=>e.id===t)||{}),fy(e,n))});return Vh.Observable.of(zh(a),$h())}).catch(e=>(Fn.i.safeError("issue.views.common.child-issues-panel.reorder-children","Failed to reorder children",new p.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Vh.Observable.of(qh(r,o,c,l))))})(s,e.payload,e.meta);default:return Vh.Observable.empty()}});const My=e=>({type:"state.context.REQUIRES_FULL_CREATE_CHECK_SUCCESS",payload:{requiresFullCreate:e}}),Ly=()=>({type:"state.context.REQUIRES_FULL_CREATE_CHECK_FAILED"});var Ry=(e,t)=>t?Vh.Observable.from(((e,t)=>Object(Ll.b)(`${e}/rest/internal/2/project/${t}/hasValidatorsOnSubtasks`))(e,t)).map(e=>My(e)).catch(e=>(Object(lr.a)("issue.views.common.child-issues-panel.has-validators-on-subtasks","Failed to check if project has validators on subtasks",e,new p.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Vh.Observable.of(Ly()))):Vh.Observable.of(Ly()),Ny=(e,t)=>e.ofType("state.context.REQUIRES_FULL_CREATE_CHECK").switchMap(()=>{const e=t.getState();switch(Oh(e)){case"classicSubtasks":{const t=yh(e),s=Ph(e);return Lh(e)?Vh.Observable.of(My(!0)):Ry(t,s)}default:return Vh.Observable.empty()}}),Uy=e=>Object(Zg.combineEpics)(sy,(e=>(t,s)=>t.ofType("state.entities.CREATE_CHILD_SUCCESS").do(({payload:{createdChild:e,usedGlobalCreateDialog:t},meta:n})=>{const a=s.getState(),i=jh(a),r={action:"created",actionSubjectId:e.id,attributes:{isInlineCreatedOnIssue:!0,isClassicSubtask:i}};Object(f.a)(n.analyticsEvent,r);const o=Oh(a)||"unknown_child",c=Nh(a),l=Uh(a);Object(Un.a)({experience:"createIssue",wasExperienceSuccesful:!0,analyticsSource:o,application:c,edition:l,additionalAttributes:{isCreated:!0,wasCreatedInline:!t}})}).switchMap(({payload:{createdChild:t}})=>{const n=s.getState(),a=yh(n);return Vh.Observable.from(ly(e,a,t.issueKey)).map(e=>Gh(e)).catch(e=>(Fn.i.safeError("issue.views.common.child-issues-panel.create-child-success.fetch-single-issue","Failed to fetch single issue after a successful create",new p.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Vh.Observable.empty()))}))(e),Qh,ay,py,Yh,Ny,Ay,Fh,by,(e=>(t,s)=>t.ofType("state.entities.LINK_CHILD_SUCCESS").do(({payload:{linkedChild:e},meta:t})=>{const n=s.getState(),a=Oh(n),i={action:"linked",actionSubjectId:e.id,attributes:{isInlineChildAdded:!0,panelType:a}};Object(f.a)(t.analyticsEvent,i)}).switchMap(({payload:{linkedChild:t}})=>{const n=s.getState(),a=yh(n);return Vh.Observable.from(ly(e,a,t.issueKey)).map(e=>Gh(e)).catch(e=>(Fn.i.safeError("issue.views.common.child-issues-panel.link-child-success.fetch-single-issue","Failed to fetch single issue after a successful child issue linking",new p.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Vh.Observable.empty()))}))(e)),Fy=s("./src/packages/common-legacy-do-not-add-anything-new/src/tangerine/state/initiate.js"),Vy=s("./node_modules/redux/es/index.js");function Ky(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function By(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ky(Object(s),!0).forEach((function(t){Wy(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ky(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Wy(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Hy={baseUrl:Object(Li.b)(""),locale:"en_US",user:null,childIssuesPanelType:null,supportsIssueCreation:!1,requiresFullCreate:!1,parentKey:null,customFieldIdRank:null,epicLinkFieldKey:null,parentId:null,projectId:null,messages:null,onNavigateToNewIssue:o.a,onChange:o.a,isIssueViewComplete:!1,projectType:null,application:null,edition:null};const Gy="create",$y="linkIssue";function qy(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function zy(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?qy(Object(s),!0).forEach((function(t){Yy(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):qy(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Yy(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Qy={issues:[],issueTypes:[],issueHierarchyLevel:void 0};const Jy=()=>({type:"state.ui.SHOW_INLINE_CREATE"}),Zy=()=>({type:"state.ui.HIDE_ADD_CHILD_ISSUE"}),Xy=Object.freeze({InlineCreate:"InlineCreate",AddExistingIssue:"AddExistingIssue"}),eO=e=>({type:"state.ui.SET_CHILD_PANEL_VIEW",view:e}),tO=e=>({type:"state.ui.SET_CHILD_CREATE_SUMMARY",summary:e}),sO=e=>({type:"state.ui.SET_FETCH_ISSUE_TYPES_STATUS",payload:e});function nO(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function aO(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?nO(Object(s),!0).forEach((function(t){iO(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):nO(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function iO(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const rO={addClickCount:0,hideDone:!1,selectedIssueType:null,childPanelView:Xy.InlineCreate,childCreateSummary:"",fetchIssueTypesStatus:"NONE",sortBy:null};var oO=Object(Vy.combineReducers)({context:(e=Hy,t)=>{switch(t.type){case"state.context.SET_CONTEXT":case"state.context.REQUIRES_FULL_CREATE_CHECK_SUCCESS":return By(By({},e),t.payload);case"state.context.REQUIRES_FULL_CREATE_CHECK_FAILED":return By(By({},e),{},{requiresFullCreate:!0});case"state.context.SET_IS_ISSUE_VIEW_COMPLETE":return By(By({},e),{},{isIssueViewComplete:t.payload});default:return e}},ui:(e=rO,t)=>{switch(t.type){case"state.ui.SHOW_INLINE_CREATE":return aO(aO({},e),{},{addClickCount:e.addClickCount+1});case"state.ui.HIDE_ADD_CHILD_ISSUE":return aO(aO({},e),{},{addClickCount:0,childPanelView:Xy.InlineCreate,childCreateSummary:""});case"state.ui.SET_CHILD_PANEL_VIEW":return aO(aO({},e),{},{childPanelView:t.view});case"state.ui.SET_CHILD_CREATE_SUMMARY":return aO(aO({},e),{},{childCreateSummary:t.summary});case"state.ui.TOGGLE_HIDE_DONE":return aO(aO({},e),{},{hideDone:!e.hideDone});case"state.ui.SELECTED_ISSUE_TYPE_CHANGED":return aO(aO({},e),{},{selectedIssueType:t.payload});case"state.ui.SET_FETCH_ISSUE_TYPES_STATUS":return aO(aO({},e),{},{fetchIssueTypesStatus:t.payload});case"state.ui.SET_SORTING_ORDER":return aO(aO({},e),{},{sortBy:t.payload});default:return e}},entities:(e=Qy,t)=>{switch(t.type){case"state.entities.SET_ENTITIES":{const{issueTypes:s,issues:n,issueHierarchyLevel:a}=t.payload;return zy(zy({},e),{},{issues:n,issueTypes:s,issueHierarchyLevel:a})}case"state.entities.UPDATE_ISSUE":{const s=t.payload,n=[...e.issues],a=n.findIndex(e=>e.id===s.id);return n[a]=s,zy(zy({},e),{},{issues:n})}case"state.entities.CREATE_CHILD_REQUEST":{const s=zy(zy({},t.payload.optimisticUiChildIssue),{},{isLoading:!0,errorType:void 0});return zy(zy({},e),{},{issues:e.issues.filter(e=>e.id!==s.id).concat(s)})}case"state.entities.CREATE_CHILD_SUCCESS":{const{optimisticId:s,createdChild:n}=t.payload;return zy(zy({},e),{},{issues:e.issues.filter(e=>e.id!==s).concat(n)})}case"state.entities.FETCH_SINGLE_CHILD_SUCCESS":{const{childIssue:s}=t.payload;return zy(zy({},e),{},{issues:e.issues.map(e=>e.id===s.id?s:e)})}case"state.entities.CREATE_CHILD_FAILURE":{const{optimisticId:s}=t.payload;return zy(zy({},e),{},{issues:e.issues.map(e=>e.id===s?zy(zy({},e),{},{errorType:Gy,isLoading:!1}):e)})}case"state.entities.LINKING_ISSUE_FAILURE":{const{optimisticId:s,createdChild:n}=t.payload;return zy(zy({},e),{},{issues:e.issues.filter(e=>e.id!==s).concat(zy(zy({},n),{},{errorType:$y,isLoading:!1}))})}case"state.entities.CREATE_CHILD_RETRY":{const{optimisticId:s}=t.payload;return zy(zy({},e),{},{issues:e.issues.map(e=>e.id===s?zy(zy({},e),{},{errorType:void 0,isLoading:!0}):e)})}case"state.entities.LINKING_ISSUE_RETRY":{const{issueId:s}=t.payload;return zy(zy({},e),{},{issues:e.issues.map(e=>e.id===s?zy(zy({},e),{},{errorType:void 0,isLoading:!0}):e)})}case"state.entities.LINKING_ISSUE_RETRY_FAILURE":{const{issueId:s}=t.payload;return zy(zy({},e),{},{issues:e.issues.map(e=>e.id===s?zy(zy({},e),{},{errorType:$y,isLoading:!1}):e)})}case"state.entities.LINK_PARENT_FAILURE":case"state.entities.CANCEL_OPTIMISTIC_CHILD":{const{optimisticId:s}=t.payload;return zy(zy({},e),{},{issues:e.issues.filter(e=>e.id!==s)})}case"state.entities.FETCH_DETAILS_FOR_ISSUES_SUCCESS":{const{issues:s}=t.payload;return zy(zy({},e),{},{issues:e.issues.map(e=>zy(zy({},e),ns()(s,t=>t.id===e.id)))})}case"state.entities.REORDER_CHILDREN_REQUEST":case"state.entities.REORDER_CHILDREN_SUCCESS":{const{newOrder:s}=t.payload;return zy(zy({},e),{},{issues:s})}case"state.entities.REORDER_CHILDREN_FAILED":{const{originalOrder:s}=t.payload;return zy(zy({},e),{},{issues:s})}case"state.entities.ADD_EXISTING_CHILD_ISSUE_REQUEST":{const s={id:t.payload.issueId,issueKey:t.payload.issueKey,issueSummary:t.payload.issueSummary,issueTypeIconUrl:t.payload.issueTypeIconUrl,assigneeUrl:null,assigneeDisplayName:null,isLoading:!0,errorType:void 0};return zy(zy({},e),{},{issues:e.issues.filter(e=>e.id!==s.id).concat(s)})}default:return e}}}),cO=s("./node_modules/keycode/index.js"),lO=s.n(cO),uO=s("./node_modules/@atlaskit/select/dist/esm/CreatableSelect.js"),dO=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/error-state/index.js"),pO=s("./src/packages/issue/issue-view/src/views/field/select/common/select-inline-edit/select-field/styled.js"),mO=s("./node_modules/debounce-promise/dist/index.js"),bO=s.n(mO),fO=s("./src/packages/common-legacy-do-not-add-anything-new/src/match-jira-url/index.js"),gO=s("./node_modules/lodash/uniqBy.js"),hO=s.n(gO);const yO=({sections:e},t)=>{const s=e[0],n=e[1],a=s.issues,i=n?n.issues:[],r=hO()([...a,...i],"key");return[{label:n?t.matchingIssues:t.recentIssues,options:r.map(e=>({issueId:Object(Li.j)(String(e.id)),value:e.key,issueKey:e.key,summary:e.summaryText,imageUrl:e.img}))}]};class OO extends n.Component{constructor(...e){super(...e),this.state={options:[],isLoading:!1,error:null},this.fetchData=e=>{const{baseUrl:t,issueKey:s,projectId:n,jql:a,labels:i}=this.props,r=Object(fO.a)(e,window.location.host,t)||e;return this.setState({isLoading:!0,error:null}),Object(Id.a)(`${t}/rest/api/3/issue/picker?currentIssueKey=${s}&currentProjectId=${n}&showSubTasks=true&showSubTaskParent=true&currentJQL=${a}&query=${r}`).then(e=>(this.setState({options:yO(e,i),isLoading:!1}),e)).catch(e=>this.setState({isLoading:!1,options:[],error:e}))},this.debouncedFetchData=bO()(this.fetchData,300,{leading:!0})}componentDidMount(){this.fetchData(this.props.initialValue)}render(){const{children:e}=this.props,{options:t,isLoading:s,error:n}=this.state;return e({options:t,isLoading:s,error:n,loadOptions:this.debouncedFetchData})}}OO.displayName="IssueOptionService",OO.defaultProps={initialValue:""};var jO=s("./node_modules/@atlaskit/icon/glyph/add.js"),EO=s.n(jO);const vO=$.default.div(["display:flex;align-items:center;"]),kO=$.default.div(["margin-right:","px;width:","px;height:","px;"],q.e,2*q.e,2*q.e),wO=$.default.div(["overflow:hidden;text-overflow:ellipsis;white-space:nowrap;flex:1 1 100%;min-width:0;"]);function SO(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const IO=({imageUrl:e,children:t})=>a.a.createElement(vO,null,a.a.createElement(kO,null,a.a.createElement("img",{src:e,alt:""})),t);IO.displayName="IssueCard";const CO=({label:e})=>a.a.createElement(vO,null,a.a.createElement(EO.a,{label:"",size:"small",primaryColor:Ae.a.B400}),a.a.createElement(W.a,{appearance:"link",isSelected:!1},e));CO.displayName="CreateIssueOption";const TO=({imageUrl:e,issueKey:t,summary:s})=>a.a.createElement(IO,{imageUrl:e},a.a.createElement(wO,null,t," ",s));TO.displayName="IssueOption";const PO=({imageUrl:e,issueKey:t,summary:s})=>a.a.createElement(IO,{imageUrl:e},a.a.createElement(wO,null,`${t} ${s}`));PO.displayName="SelectedValue";const _O=e=>{let{children:t}=e,s=SO(e,["children"]);return(a.a.createElement(Cr.z.SingleValue,s,a.a.createElement(PO,{imageUrl:s.data.imageUrl,issueKey:s.data.issueKey,summary:s.data.summary})))};_O.displayName="SingleValue";var xO=Object(j.defineMessages)({defaultPlaceholder:{id:"issue-picker.default-placeholder",defaultMessage:"Search by issue key or summary"},defaultRecentIssues:{id:"issue-picker.default-recent-issues",defaultMessage:"Recent Issues"},defaultMatchingIssues:{id:"issue-picker.default-matching-issues",defaultMessage:"Matching Issues"},defaultFailedLoadingIssues:{id:"issue-picker.default-failed-loading-issues",defaultMessage:"Failed to load issues"},createIssue:{id:"issue-picker.create-issue",defaultMessage:"Create an issue for '{value}'"}});class DO extends n.Component{constructor(...e){super(...e),this.onBlur=e=>{e("")},this.onChange=(e,{action:t},s)=>{switch(t){case"select-option":{const{issueId:t,issueKey:n,summary:a,imageUrl:i}=e;this.props.onChange&&this.props.onChange({issueId:t,issueKey:n,issueSummary:a,issueTypeIconUrl:i}),s("");break}case"clear":this.props.onClear&&this.props.onClear()}},this.onCreate=e=>{this.props.onCreate&&this.props.onCreate(e)},this.onInputChange=e=>(t,{action:s})=>{"input-change"===s&&e(t)},this.onSetSelectRef=e=>{this.akSelect=e},this.formatOptionLabel=(e,{context:t})=>{if(e.__isNew__){const t=this.props.intl.formatMessage(xO.createIssue,{value:e.value});return(a.a.createElement(CO,{label:t}))}return"menu"===t?a.a.createElement(TO,{imageUrl:e.imageUrl,issueKey:e.issueKey,summary:e.summary}):e.label},this.akSelect=void 0,this.filterOption=()=>!0,this.renderNoOptionsMessage=e=>{if(!e)return;const{intl:t}=this.props;return(a.a.createElement(dO.a,{description:t.formatMessage(xO.defaultFailedLoadingIssues),imageWidth:56,isSubtle:!0}))}}focus(){this.akSelect.focus()}reset(){this.akSelect.select.select.select.clearValue(),this.akSelect.blur(),this.akSelect.focus()}render(){const{initialValue:e,issueKey:t,projectId:s,jql:n,intl:i}=this.props;return(a.a.createElement(Ed.b,null,({tenantContext:{baseUrl:r}})=>a.a.createElement(OO,{labels:{recentIssues:i.formatMessage(xO.defaultRecentIssues),matchingIssues:i.formatMessage(xO.defaultMatchingIssues)},baseUrl:r,issueKey:t,projectId:s,jql:n,initialValue:e},({loadOptions:t,options:s,isLoading:n,error:r})=>a.a.createElement(uO.a,{ref:this.onSetSelectRef,styles:pO.f,isLoading:n,formatOptionLabel:this.formatOptionLabel,options:s,defaultInputValue:e,autoFocus:!0,allowCreateWhileLoading:!0,defaultOptions:!0,onCreateOption:this.onCreate,placeholder:i.formatMessage(xO.defaultPlaceholder),components:{SingleValue:_O},onChange:(e,s)=>this.onChange(e,s,t),onInputChange:this.onInputChange(t),onBlur:()=>this.onBlur(t),isClearable:!0,filterOption:this.filterOption,noOptionsMessage:()=>this.renderNoOptionsMessage(r),openMenuOnFocus:!0}))))}}DO.displayName="IssuePicker",DO.defaultProps={initialValue:""};var AO=DO,MO=Object(j.defineMessages)({childLinkButton:{id:"issue.views.common.child-issues-panel.add-existing-issue.child-link-button",defaultMessage:"Add"},childCancelButton:{id:"issue.views.common.child-issues-panel.add-existing-issue.child-cancel-button",defaultMessage:"Cancel"}});const LO=Object($.default)(W.a)(["margin-left:","px !important;"],q.e),RO=$.default.div(["margin-top:","px;display:flex;justify-content:flex-end;"],q.e);class NO extends n.Component{constructor(...e){super(...e),this.state={selectedIssue:void 0,isDisabled:!0},this.onChildContainerRefSet=e=>{this.childContainer=e},this.onAdd=()=>{this.state.selectedIssue&&(this.props.onAdd(this.state.selectedIssue),this.resetPicker())},this.onChange=e=>{this.setState({selectedIssue:e,isDisabled:!1})},this.onClear=()=>this.setState({selectedIssue:void 0,isDisabled:!0}),this.onCancelClicked=()=>{this.onClear(),this.props.onCancel()},this.onSetSelectRef=e=>{this.issuePicker=e},this.onKeyDown=e=>{e.keyCode===lO()("enter")&&(this.onAdd(),e.stopPropagation())},this.issuePicker=void 0,this.childContainer=void 0}async componentDidMount(){Object(tr.a)(this.childContainer)}componentDidUpdate(e){this.props.addClickCount!==e.addClickCount&&(Object(tr.a)(this.childContainer),this.focusPicker())}resetPicker(){this.issuePicker&&this.issuePicker.reset()}focusPicker(){this.issuePicker&&this.issuePicker.focus()}render(){const{initialValue:e,issueKey:t,projectId:s,jql:n,intl:i}=this.props;return t&&s?a.a.createElement(K.a,{onEscape:this.onCancelClicked},a.a.createElement("div",{onKeyDown:this.onKeyDown,ref:this.onChildContainerRefSet},a.a.createElement(AO,{ref:this.onSetSelectRef,initialValue:e,issueKey:t,projectId:s,jql:n,onChange:this.onChange,onClear:this.onClear,intl:i,onCreate:this.props.onCreate}),a.a.createElement(RO,null,a.a.createElement(LO,{appearance:"primary",onClick:this.onAdd,isDisabled:this.state.isDisabled},i.formatMessage(MO.childLinkButton)),a.a.createElement(LO,{appearance:"subtle",onClick:this.onCancelClicked},i.formatMessage(MO.childCancelButton))))):null}}NO.displayName="AddExistingIssue",NO.defaultProps={initialValue:""};var UO=Object($t.a)([j.injectIntl,Object(is.a)("button",{onAdd:"clicked",onCancel:"clicked",onCreate:"clicked"}),Object(E.a)({onAdd:"addExistingChildIssueRequest",onCancel:"hideAddExistingChildIssue",onCreate:"switchToCreateChildIssue"}),Object(i.b)(e=>({addClickCount:uh(e),initialValue:ph(e),issueKey:Sh(e),jql:lh(e),projectId:Ph(e)}),e=>({onAdd:(t,s)=>e(((e,t)=>({type:"state.entities.ADD_EXISTING_CHILD_ISSUE_REQUEST",payload:e,meta:{analyticsEvent:t}}))(t,s)),onCancel:()=>e(Zy()),onCreate:t=>{e(tO(t)),e(eO(Xy.InlineCreate))}}))])(NO),FO=Object(j.defineMessages)({createChildLabel:{id:"issue.views.common.child-issues-panel.heading.add-child.create-child-label",defaultMessage:"Create child"},createSubtaskLabel:{id:"issue.views.common.child-issues-panel.heading.add-child.create-subtask-label",defaultMessage:"Create subtask"}});const VO=$.default.div(["margin-left:","px;"],.75*q.e);class KO extends n.Component{render(){const{intl:{formatMessage:e},onClick:t,isClassicSubtaskPanel:s}=this.props,n=s?FO.createSubtaskLabel:FO.createChildLabel;return a.a.createElement(VO,null,a.a.createElement(ng.a,{onClick:t,label:e(n)}))}}KO.displayName="AddChild",KO.defaultProps={isClassicSubtaskPanel:!1};var BO=Object($t.a)([j.injectIntl,Object(is.a)("button",{onClick:"clicked"}),Object(E.a)({onClick:"showChildIssuesInlineCreate"}),Object(i.b)(e=>({isClassicSubtaskPanel:jh(e)}),(e,t)=>({onClick:(...s)=>{e(Jy()),t.onClick(...s)}}))])(KO),WO=s("./node_modules/@atlaskit/dropdown-menu/dist/es2019/components/group/DropdownItemGroupCheckbox.js"),HO=s("./node_modules/@atlaskit/dropdown-menu/dist/es2019/components/item/DropdownItemCheckbox.js"),GO=Object(j.defineMessages)({actions:{id:"issue.views.common.child-issues-panel.heading.meatballs.actions",defaultMessage:"Actions"},filter:{id:"issue.views.common.child-issues-panel.heading.meatballs.filter",defaultMessage:"Filter"},bulkEdit:{id:"issue.views.common.child-issues-panel.heading.meatballs.bulk-edit",defaultMessage:"Bulk edit"},hideDone:{id:"issue.views.common.child-issues-panel.heading.meatballs.hide-done",defaultMessage:"Hide done"},search:{id:"issue.views.common.child-issues-panel.heading.meatballs.search",defaultMessage:"View in search"},tooltip:{id:"issue.views.common.child-issues-panel.heading.meatballs.tooltip",defaultMessage:"Issue actions"}});const $O=$.default.div([".childIssuesPanelMeatballButton{padding:0 ","px;}"],.75*q.e);function qO(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function zO(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?qO(Object(s),!0).forEach((function(t){YO(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):qO(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function YO(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class QO extends n.Component{constructor(...e){super(...e),this.onHideDoneClickedAnalytics=e=>{const{onHideDoneClicked:t,allIssues:s,incompleteIssues:n,hideDone:a}=this.props;t(s.length,n.length,!a,e)}}onBulkEditClickedAnalytics(e){return t=>{this.props.onBulkEditClicked(e,t)}}onViewInSearchClickedAnalytics(e){return t=>{this.props.onViewInSearchClicked(e,t)}}isHideDoneCheckboxVisible(){const{allIssues:e,incompleteIssues:t}=this.props;return!Or()(t)&&t.length!==e.length}generateBulkEditLink(e){return`${this.props.baseUrl}/secure/GHBulkChange.jspa?issueKeys=${encodeURIComponent(e)}`}generateSearchLink(e){const t=encodeURIComponent(`issueKey in (${e})`);return`${this.props.baseUrl}/issues/?jql=${t}`}renderHideDoneCheckbox(){const{intl:{formatMessage:e},hideDone:t}=this.props;return this.isHideDoneCheckboxVisible()?a.a.createElement(WO.a,{title:e(GO.filter),id:"child-issues-panel-checkbox-group"},a.a.createElement(HO.a,{id:"hideDone",key:"hideDone",onClick:this.onHideDoneClickedAnalytics,isSelected:t},e(GO.hideDone))):null}renderActionLinks(){const{intl:{formatMessage:e},hideDone:t,allIssues:s,incompleteIssues:n}=this.props,i=t?n:s,r=i.length,o=i.map(e=>e.issueKey).join(","),c=this.generateBulkEditLink(o),l=this.generateSearchLink(o),u=this.isHideDoneCheckboxVisible()?e(GO.actions):"";return a.a.createElement(oi.a,{title:u},a.a.createElement(ii.a,{onClick:this.onBulkEditClickedAnalytics(r),href:c},e(GO.bulkEdit)),a.a.createElement(ii.a,{onClick:this.onViewInSearchClickedAnalytics(r),href:l},e(GO.search)))}render(){return a.a.createElement($O,null,a.a.createElement(ri.a,{triggerType:"button",triggerButtonProps:zO({appearance:"subtle",spacing:"compact",iconBefore:a.a.createElement(jm.a,{size:"small",label:this.props.intl.formatMessage(GO.tooltip)})},!Object(qt.isRemovalOfDeprecatedStylesEnabled)()&&{className:"childIssuesPanelMeatballButton"}),position:"bottom right"},this.renderHideDoneCheckbox(),this.renderActionLinks()))}}QO.displayName="Meatballs",QO.defaultProps={hideDone:!1};var JO=Object($t.a)([j.injectIntl,Object(is.a)("item",{onBulkEditClicked:"clicked",onViewInSearchClicked:"clicked",onHideDoneClicked:"clicked"}),Object(E.a)({onBulkEditClicked:e=>({name:"bulkEdit",issueCount:e}),onViewInSearchClicked:e=>({name:"viewInSearch",issueCount:e}),onHideDoneClicked:(e,t,s)=>({name:"toggleHideDone",totalIssues:e,incompleteIssues:t,hideDone:s})}),Object(i.b)(e=>({baseUrl:yh(e),parentKey:Sh(e),hideDone:bh(e),allIssues:sh(e),incompleteIssues:ah(e)}),{onHideDoneClicked:()=>({type:"state.ui.TOGGLE_HIDE_DONE"})})])(QO),ZO=s("./node_modules/@atlaskit/icon/glyph/chevron-down.js"),XO=s.n(ZO),ej=Object(j.defineMessages)({sortByLabel:{id:"issue.views.common.child-issues-panel.heading.sort-by.label",defaultMessage:"Order by {option}"},created:{id:"issue.views.common.child-issues-panel.heading.created.label",defaultMessage:"Created"},key:{id:"issue.views.common.child-issues-panel.heading.key.label",defaultMessage:"Key"},priority:{id:"issue.views.common.child-issues-panel.heading.priority.label",defaultMessage:"Priority"},status:{id:"issue.views.common.child-issues-panel.heading.status.label",defaultMessage:"Status"},assignee:{id:"issue.views.common.child-issues-panel.heading.assignee.label",defaultMessage:"Assignee"},ranking:{id:"issue.views.common.child-issues-panel.heading.ranking.label",defaultMessage:"Rank"},defaultOptionLabel:{id:"issue.views.common.child-issues-panel.heading.default-option.label",defaultMessage:"{option} (default)"}});const tj=$.default.span(["padding-right:","px;"],.75*q.e),sj=$.default.div(["min-width:","px;"],20*q.e),nj=$.default.div(["border-top:1px solid ",";padding:","px 0;span{color:",";}"],"#EBECF0",q.e/2,"#0052CC"),aj=Object(pi.a)("dropdownItem",{onClick:"clicked"})(ii.a),ij=["created","key","priority","status","assignee"],rj=e=>{var t;const{sortedBy:s,onSelect:i}=e,{formatMessage:r}=Object(Te.c)(),[o,c]=Object(n.useState)(!1),l=Object(n.useMemo)(()=>{const e=new Map,t=r(ej.ranking),s=r(ej.defaultOptionLabel,{option:t});return e.set("ranking",t),e.set("defaultOptionLabel",s),ij.forEach(t=>{e.set(t,r(ej[t]))}),e},[r]),u=Object(n.useMemo)(()=>ij.filter(e=>e!==s),[s]);return a.a.createElement(Oi.a,{trigger:a.a.createElement(W.a,{appearance:"subtle",isSelected:o,iconAfter:a.a.createElement(XO.a,{label:""})},a.a.createElement(tj,null,r(ej.sortByLabel,{option:null!==s&&"ranking"!==s?null===(t=l.get(s))||void 0===t?void 0:t.toLowerCase():""}))),isOpen:o,onOpenChange:()=>{c(!o)}},a.a.createElement(sj,null,a.a.createElement(oi.a,null,u.map(e=>a.a.createElement(aj,{key:e,onClick:(t,s)=>i(e,s)},l.get(e))),s&&"ranking"!==s&&a.a.createElement(nj,null,a.a.createElement(aj,{key:"ranking",onClick:(e,t)=>i("ranking",t)},l.get("defaultOptionLabel"))))))};rj.displayName="SortByMenu";var oj=Object(i.b)(e=>({sortedBy:hh(e)}),e=>({onSelect:t=>{e((e=>({type:"state.ui.SET_SORTING_ORDER",payload:e}))(t))}}))(rj),cj=Object(j.defineMessages)({title:{id:"issue.views.common.child-issues-panel.heading.title.title",defaultMessage:"Child issues"}});class lj extends n.Component{render(){const{intl:{formatMessage:e},title:t}=this.props;return(a.a.createElement(Ba.e,null,e(t)))}}lj.displayName="Title",lj.defaultProps={title:cj.title};var uj=Object($t.a)([j.injectIntl,Object(i.b)(e=>({title:xh(e)}),{})])(lj);class dj extends n.Component{render(){const{Title:e,Meatballs:t,AddChild:s,SortByMenu:n,supportsIssueCreation:i,allIssues:r,onAddChildClick:o,sourceName:c}=this.props;return(a.a.createElement(Ba.c,null,Wg()?a.a.createElement("label",{htmlFor:c},a.a.createElement(e,null)):a.a.createElement(e,null),a.a.createElement(Ba.d,null,Object(qt.isSortingIssuesUnderEpicEnabled)()&&r.length>1?a.a.createElement(n,null):null,r.length>0?a.a.createElement(t,null):null,i&&0!==r.length?a.a.createElement(s,{onClick:o}):null)))}}dj.displayName="Heading",dj.defaultProps={supportsIssueCreation:!1,allIssues:[]};var pj=Object($t.a)([Object(i.b)(e=>({Title:uj,Meatballs:JO,AddChild:BO,SortByMenu:oj,allIssues:sh(e),supportsIssueCreation:kh(e)}),{})])(dj),mj=s("./node_modules/@atlaskit/select/dist/esm/Select.js"),bj=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/keyboard-shortcuts/shortcut-scope.js"),fj=s("./src/packages/issue/issue-view/src/views/field/select/common/select-inline-edit/select-field/index.js"),gj=s("./src/packages/issue/issue-view/src/views/field/select/common/select-inline-edit/select-field/utils.js"),hj=Object(j.defineMessages)({typesPlaceholder:{id:"issue.views.common.child-issues-panel.inline-create.child-types-select.types-placeholder",defaultMessage:"Issue type"}});Ae.a.N50,q.e,q.e;const yj=$.default.div(["display:flex;align-items:center;"]),Oj=$.default.span(["padding-left:","px;display:inline-block;"],q.e);function jj(){return(jj=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Ej(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function vj(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ej(Object(s),!0).forEach((function(t){kj(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ej(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function kj(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const wj={singleValue:e=>vj(vj({},e),{},{position:"static",transform:"none"})},Sj=e=>e.name,Ij=e=>e.id,Cj=e=>a.a.createElement(yj,null,a.a.createElement(sp.a,{url:e.iconUrl,title:e.name}),a.a.createElement(Oj,null,e.name));Cj.displayName="formatOptionLabel";class Tj extends n.Component{constructor(...e){super(...e),this.onChange=(e,t)=>{"select-option"===t.action&&null!=e&&this.props.onChange(e)}}render(){const{intl:{formatMessage:e},issueTypes:t,selectedIssueType:s}=this.props;return(a.a.createElement(bj.a,null,a.a.createElement(mj.a,jj({},fj.b,{styles:Object(gj.a)(pO.f,wj),options:t,value:s,getOptionLabel:Sj,getOptionValue:Ij,formatOptionLabel:Cj,onChange:this.onChange,placeholder:e(hj.typesPlaceholder)}))))}}Tj.displayName="ChildTypesSelect",Tj.defaultProps={issueTypes:[]};var Pj=Object($t.a)([j.injectIntl,Object(i.b)(e=>({selectedIssueType:mh(e),issueTypes:ch(e)}),e=>({onChange:t=>e((e=>({type:"state.ui.SELECTED_ISSUE_TYPE_CHANGED",payload:e}))(t))}))])(Tj),_j=s("./node_modules/lodash/trim.js"),xj=s.n(_j),Dj=s("./src/packages/common-legacy-do-not-add-anything-new/src/bridge/index.js"),Aj=s("./node_modules/@atlaskit/icon/glyph/search.js"),Mj=s.n(Aj);const Lj=e=>{const{children:t,onClick:s}=e;return(a.a.createElement(W.a,{appearance:"subtle-link",iconBefore:a.a.createElement(Mj.a,{label:""}),isSelected:!1,onClick:s},t))};Lj.displayName="AddExistingIssueButton",Lj.displayName="AddExistingIssueButton";var Rj=Object(j.defineMessages)({summaryLabel:{id:"issue.views.common.child-issues-panel.inline-create.summary-label",defaultMessage:"Child summary"},summaryPlaceholder:{id:"issue.views.common.child-issues-panel.inline-create.summary-placeholder",defaultMessage:"What needs to be done?"},summaryTooLong:{id:"issue.views.common.child-issues-panel.inline-create.summary-too-long",defaultMessage:"Summary must be less than 255 characters."},childCreateButton:{id:"issue.views.common.child-issues-panel.inline-create.child-create-button",defaultMessage:"Create"},childCancelButton:{id:"issue.views.common.child-issues-panel.inline-create.child-cancel-button",defaultMessage:"Cancel"},addExistingIssuePlaceholder:{id:"issue.views.common.child-issues-panel.inline-create.add-existing-issue-placeholder",defaultMessage:"Choose an existing issue"}}),Nj=s("./node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js");const Uj=$.default.div(["display:flex;align-items:center;background-color:",";width:100%;"],Ae.a.N10),Fj=$.default.div(["flex-grow:1;"]),Vj=Object(Nj.a)(W.a,{target:"e1o0mbwp0"})("margin-left:",q.e,"px !important;"),Kj=$.default.div(["margin-top:","px;display:flex;justify-content:space-between;"],q.e),Bj=$.default.div(["justify-content:flex-end;display:flex;"]);function Wj(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Hj(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Wj(Object(s),!0).forEach((function(t){Gj(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Wj(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Gj(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const $j=e=>xj()(e).length>255,qj=e=>{const t=xj()(e);return Or()(t)||$j(e)};class zj extends n.Component{constructor(e){super(e),this.onSubmitClicked=()=>{this.createChild(),this.props.onSubmitClickAnalytics()},this.onCancelClicked=()=>{this.closeAndReset(),this.props.onCancelClickAnalytics()},this.onEnterPressed=()=>{this.createChild(),this.props.onEnterKeyPressedAnalytics()},this.onEscPressed=()=>{this.closeAndReset(),this.props.onEscapeKeyPressedAnalytics()},this.onUpdateChildSummary=e=>{const t=e.target.value;this.props.onChangeSummary(t)},this.onChildContainerRefSet=e=>{this.childContainer=e},this.onFieldContainerRefSet=e=>{this.fieldContainer=e},this.onAddExisting=()=>{this.props.onAddExistingIssue(),this.props.onAddExistingClickAnalytics()},this.childContainer=void 0,this.fieldContainer=void 0,this.createIssueFormFactory=void 0,this.createIssueFormFactory=null}async componentDidMount(){Object(tr.a)(this.childContainer),this.fieldContainer&&this.fieldContainer.focus();const e="classicSubtasks"===this.props.childIssuesPanelType?"quick-edit/form/factory/create-subtask":"quick-edit/form/factory/create-issue";this.createIssueFormFactory=await Object(Dj.a)({name:e})}componentDidUpdate(e){this.props.addClickCount!==e.addClickCount&&(Object(tr.a)(this.childContainer),this.fieldContainer&&this.fieldContainer.focus())}createChild(){const e=`OPTIMISTIC_CHILD_${Date.now()}`,{baseUrl:t,epicLinkFieldKey:s,selectedIssueType:n,projectId:a,parentIssueId:i,parentIssueKey:r,childIssuesPanelType:o,requiresFullCreate:c,summary:l}=this.props;if(!qj(l)&&n){const u={id:e,issueSummary:l,issueTypeId:`${n.id}`,issueTypeIconUrl:`${n.iconUrl}`,issueTypeName:`${n.name}`,assigneeUrl:null,assigneeDisplayName:null};if(n.hasRequiredField||c){const c="classicProjectEpicChildren"===o,u=this.createIssueFormFactory(Hj({pid:a,issueType:n&&n.id,fields:Hj({summary:l||""},c&&s?{[s]:r}:{}),customFieldsToPreserveOnFormRecreation:[...c&&s?[s]:[]]},"classicSubtasks"===o?{parentIssueId:i}:{}));u.bind("issueCreated",(n,a)=>{c&&a.createdIssueDetails.fields[s]!==r||this.props.onFullDialogCreate(e,fy(a.createdIssueDetails,t)),this.resetAndFocus()}),u.asDialog({id:"classicSubtasks"===o?"create-subtask-dialog":"create-issue-dialog"}).show()}else this.props.onSubmit(u),this.resetAndFocus()}}closeAndReset(){this.reset(),this.props.onCancel()}resetAndFocus(){this.reset(),this.fieldContainer&&this.fieldContainer.focus()}reset(){this.props.onChangeSummary("")}renderAddExistingIssueButton(){const{intl:{formatMessage:e}}=this.props;switch(this.props.childIssuesPanelType){case"nextGenChildren":return a.a.createElement(he.a,{content:e(Rj.addExistingIssuePlaceholder)},a.a.createElement(Lj,{onClick:this.onAddExisting},e(Rj.addExistingIssuePlaceholder)));case"portfolioChildren":case"classicProjectEpicChildren":case"classicSubtasks":default:return a.a.createElement("div",null)}}render(){const{intl:{formatMessage:e},issueTypes:t,ChildTypesSelect:s,summary:n,inputId:i}=this.props,r=$j(n)?e(Rj.summaryTooLong):"";return a.a.createElement("div",{ref:this.onChildContainerRefSet},a.a.createElement(Uj,null,t.length>1?a.a.createElement(s,null):null,a.a.createElement(Fj,null,a.a.createElement(K.a,{onEnter:this.onEnterPressed,onEscape:this.onEscPressed},Wg()?a.a.createElement(be.a,{ref:this.onFieldContainerRefSet,placeholder:e(Rj.summaryPlaceholder),label:e(Rj.summaryLabel),onChange:this.onUpdateChildSummary,value:n,isInvalid:$j(n),invalidMessage:r,isLabelHidden:!0,shouldFitContainer:!0,id:i}):a.a.createElement(be.a,{ref:this.onFieldContainerRefSet,placeholder:e(Rj.summaryPlaceholder),label:e(Rj.summaryLabel),onChange:this.onUpdateChildSummary,value:n,isInvalid:$j(n),invalidMessage:r,isLabelHidden:!0,shouldFitContainer:!0})))),a.a.createElement(Kj,null,this.renderAddExistingIssueButton(),a.a.createElement(Bj,null,a.a.createElement(Vj,{appearance:"primary",onClick:this.onSubmitClicked,isDisabled:qj(n)},e(Rj.childCreateButton)),a.a.createElement(Vj,{appearance:"subtle",onClick:this.onCancelClicked},e(Rj.childCancelButton)))))}}zj.displayName="InlineCreate",zj.defaultProps={addClickCount:0,requiresFullCreate:!1,parentIssueKey:void 0,epicLinkFieldKey:null};var Yj=Object(v.b)("issue")(zj),Qj=Object($t.a)([j.injectIntl,Object(is.a)("button",{onSubmitClickAnalytics:"clicked",onCancelClickAnalytics:"clicked",onAddExistingClickAnalytics:"clicked"}),Object(is.a)("keyboardShortcut",{onEnterKeyPressedAnalytics:"pressed",onEscapeKeyPressedAnalytics:"pressed"}),Object(is.a)("childIssuePanelInlineCreate",{onSubmit:"onSubmit",onFullDialogCreate:"onFullDialogCreate"}),Object(E.a)({onSubmitClickAnalytics:"createChildIssue",onCancelClickAnalytics:"hideChildIssueInlineCreate",onEnterKeyPressedAnalytics:"confirmChildIssueCreate",onEscapeKeyPressedAnalytics:"cancelChildIssueCreate",onAddExistingClickAnalytics:"addExistingChildClick"}),Object(i.b)(e=>({ChildTypesSelect:Pj,baseUrl:yh(e),issues:sh(e),addClickCount:uh(e),issueTypes:ch(e),selectedIssueType:mh(e),projectId:Ph(e),parentIssueId:Ih(e),parentIssueKey:Sh(e),epicLinkFieldKey:Th(e),childIssuesPanelType:Oh(e),requiresFullCreate:wh(e),summary:ph(e)}),{onCancel:Zy,onAddExistingIssue:()=>eO(Xy.AddExistingIssue),onChangeSummary:e=>tO(e),onSubmit:(e,t)=>Kh(e,t),onFullDialogCreate:(e,t,s)=>((e,t,s)=>({type:"state.entities.CHILD_CREATED_IN_FULL_DIALOG",payload:{optimisticId:e,createdChild:t},meta:{analyticsEvent:s}}))(e,t,s)})])(Yj),Jj=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/component-with-condition.js"),Zj=s("./node_modules/@atlaskit/inline-message/dist/es2019/components/InlineMessage/index.js");const Xj=Object(j.defineMessages)({retry:{id:"issue.issue-line-card-retry",defaultMessage:"Try again"},cancel:{id:"issue.issue-line-card-cancel",defaultMessage:"Cancel"}}),eE=$.default.h1([""," margin-bottom:","px;"],Ae.c.h400(),2*q.e),tE=$.default.div(["margin-bottom:","px;"],2*q.e),sE=$.default.div(["display:flex;justify-content:flex-start;"]),nE=$.default.div(["margin-left:","px;"],q.e),aE=(e,t,s,n,i)=>a.a.createElement(Zj.a,{type:"warning",placement:"bottom-end"},a.a.createElement("div",null,a.a.createElement(eE,null,t),a.a.createElement(tE,null,s),a.a.createElement(sE,null,a.a.createElement(W.a,{onClick:n},e.formatMessage(Xj.retry)),a.a.createElement(nE,null,a.a.createElement(W.a,{appearance:"subtle",onClick:i},e.formatMessage(Xj.cancel))))));aE.displayName="renderInlineMessage";var iE=s("./node_modules/lodash/isNil.js"),rE=s.n(iE),oE=s("./node_modules/lodash/isUndefined.js"),cE=s.n(oE),lE=s("./node_modules/@atlaskit/icon/glyph/editor/close.js"),uE=s.n(lE),dE=s("./node_modules/@atlaskit/icon/glyph/list.js"),pE=s.n(dE),mE=s("./src/packages/platform/utils/constants/src/index.js"),bE=s("./src/packages/issue/fields/assignee/src/ui/main.js"),fE=s("./src/packages/issue/issue-view/src/views/common/issue-line-card/assets/server.svg"),gE=s.n(fE),hE=s("./src/packages/issue/fields/number/src/services/index.js"),yE=s("./src/packages/issue/fields/number/src/ui/view/main.js"),OE=s("./src/packages/issue/fields/number/src/ui/async.js");const jE=$.default.div(["& > div > div{margin-left:0;}"]),EE=Object(ne.f)(()=>s.e("async-issue-field-number").then(s.bind(null,"./src/packages/issue/fields/number/src/index.js")),{moduleId:"./src/packages/issue/fields/number/src/index.js"}),vE=Object(n.memo)(({isHovering:e,isActive:t,isFocused:s,issueKey:i,estimateFieldId:r})=>{const[o,c]=Object(n.useState)(!1),[{value:l}]=Object(hE.a)({issueKey:i,fieldKey:r}),u=Object(n.useCallback)(()=>c(!0),[]),d=Object(n.useCallback)(()=>c(!1),[]),p=!(null==l)||o||!0===e||!0===s||!0===t,m=a.a.createElement(yE.a,{isEditable:!0,value:l});return p?a.a.createElement(jE,{role:"button",onClick:e=>e.preventDefault(),onFocus:e=>e.stopPropagation()},a.a.createElement(OE.b,{packageName:"issue",fallback:m},a.a.createElement(EE,{issueKey:i,fieldKey:r,onEdit:u,onConfirm:d,onEnter:d,onCancel:d,onEscape:d}))):null}),kE=Object(j.defineMessages)({issueTypeTitle:{id:"issue.view.common.issue-line-card.issue-type.title",defaultMessage:"Issue type: {issueTypeName}"},issuePriorityTitle:{id:"issue.view.common.issue-line-card.priority.title",defaultMessage:"Priority: {issuePriorityName}"}});var wE=s("./src/packages/issue/jira-settings-service/src/main.js"),SE=s("./src/packages/issue/issue-view/src/common/component/progress-tracker/index.js");const IE=$.default.div(["width:","px;position:relative;"],5*q.e);var CE=({issueTimeTracking:e,statusCategory:t})=>{const[s]=Object(wE.c)(),{remainingEstimateSeconds:n,originalEstimateSeconds:i,timeSpentSeconds:r}=e,o={loggedTime:r,remainingTime:n},c=i,l=t===mE.a.DONE;return a.a.createElement(IE,{"data-testid":"issue.views.common.issue-line-card.issue-line-card.mini-time-log-graph"},a.a.createElement(SE.a,{value:o,estimatedTime:c,config:s,isDone:l,isCompact:!0,shouldHighlightOnHover:!0}))};const TE=$.default.div(["display:flex;align-items:center;"]),PE=Object($.default)(TE)(["width:","px;height:100%;margin-left:","px;margin-right:-","px;"],4*q.e,q.e/4,q.e),_E=Object($.default)(TE)(["width:100%;height:100%;position:relative;"]),xE=Object($.default)(TE)(["cursor:grab;"]),DE=Object($.default)(TE)(["padding-left:","px;"],q.e),AE=Object($.default)(TE)(["padding-right:","px;"],q.e),ME=Object($.default)(TE)(["padding-right:","px;"],q.e/2),LE=$.default.a(["outline:none;margin-left:","px;color:",";font-weight:600;font-size:12px;text-decoration:",";white-space:nowrap;&:hover,&:active,&:visited,&:link{outline:none;color:",";text-decoration:",";}"],q.e,e=>e.isActive?Ae.a.B400:Ae.a.N90,e=>e.isDone?"line-through":"none",e=>e.isActive?Ae.a.B400:Ae.a.N90,e=>e.isDone?"line-through":"none"),RE=$.default.div(["",";padding-left:","px;flex:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"],e=>e.isActive&&`color: ${Ae.a.B400};`,q.e),NE=$.default.div(["overflow:hidden;text-overflow:ellipsis;white-space:nowrap;"]),UE=$.default.div([""]);function FE(){return(FE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const{DONE:VE,statusCategoryForId:KE}=mE.a;class BE extends n.Component{constructor(...e){super(...e),this.handleEditStatus=e=>{const{onEdit:t}=this.props;t&&t({statusId:e.id,statusName:e.name,statusCategory:KE(e.statusCategory.id),statusCategoryId:e.statusCategory.id})},this.handleErrorDialogClick=e=>{e.stopPropagation()},this.handleErrorDialogMouseDown=e=>{e.preventDefault(),e.stopPropagation()},this.handleLinkKeyClick=e=>{e.preventDefault();const{issueLink:t,push:s}=this.props;null!=t&&Object(zd.d)(e)?s(t):window.open(t,"_blank")}}shouldRenderKey(){return!!this.props.issueKey}isActionVisible(){const{isActive:e=!1,isHovering:t=!1,isFocused:s}=this.props;return!e&&(t||s)}shouldShowRemoveAction(){const{isActive:e=!1,isHovering:t=!1,canRemove:s=!1,isFocused:n}=this.props;return s&&(e||t||n)}deleteButtonAction(e){e.stopPropagation();const{issueKey:t,globalId:s,onDelete:n}=this.props;null!=t&&n&&n(Object(Li.l)(t),s)}renderReadOnlyAssignee(){const{assigneeDisplayName:e,assigneeUrl:t,isDraggable:s}=this.props;return rE()(t)?null:a.a.createElement(DE,null,a.a.createElement(he.a,{content:e||"",hideTooltipOnMouseDown:s,position:"bottom"},a.a.createElement(Wi.a,{name:e||"",src:t,size:"small"})))}renderExtractedAssignee(){const{issueKey:e}=this.props;return void 0===e?null:a.a.createElement(DE,{role:"button",onClick:e=>e.preventDefault(),onFocus:e=>e.stopPropagation()},a.a.createElement(bE.default,{issueKey:Object(Li.l)(e)}))}renderStatus(){const{isInteractive:e,issueKey:t,statusCategory:s,statusCategoryId:n,statusId:i,statusName:r,projectType:o}=this.props;return cE()(t)||cE()(s)||cE()(r)||cE()(i)||cE()(n)?null:a.a.createElement(DE,{onClick:e=>e.preventDefault(),onFocus:e=>e.stopPropagation()},a.a.createElement(Ks.a,{sourceName:"childIssuesPanel"},a.a.createElement(Ju.a,{isEditable:e,appearance:"lozenge",issueKey:Object(Li.l)(t),projectType:o,initialValue:{id:i,name:r,statusCategory:{id:n}},onSuccess:this.handleEditStatus})))}renderPriority(){const{intl:e,isDraggable:t,issuePriorityUrl:s,issuePriorityName:n}=this.props;if(rE()(s))return null;const i=e.formatMessage(kE.issuePriorityTitle,{issuePriorityName:n});return(a.a.createElement(he.a,{content:n||"",hideTooltipOnMouseDown:t,position:"bottom"},a.a.createElement(sp.a,{alt:i,url:s,width:20,height:20})))}renderLoadingSpinner(){return this.props.isLoading?a.a.createElement(DE,null,a.a.createElement(H.a,{size:"small"})):null}renderError(){const{hasError:e=!1,errorInlineMessage:t}=this.props;return e||t?a.a.createElement(DE,{onClick:this.handleErrorDialogClick,onMouseDown:this.handleErrorDialogMouseDown},t):null}renderSummary(){const{isActive:e,issueSummary:t,isDraggable:s}=this.props;return(a.a.createElement(RE,{"data-test-id":"issue.issue-view.views.common.issue-line-card.issue-line-card-view.summary",isActive:e},a.a.createElement(he.a,{content:t,hideTooltipOnMouseDown:s,position:"bottom"},a.a.createElement(NE,null,t))))}renderKey(){return a.a.createElement(LE,{"data-test-id":"issue.issue-view.views.common.issue-line-card.issue-line-card-view.key",href:this.props.issueLink,isActive:this.props.isActive,isDone:this.props.statusCategory===VE,onClick:this.handleLinkKeyClick},this.props.issueKey)}renderRemoveButton(){return a.a.createElement(W.a,{iconBefore:a.a.createElement(uE.a,{label:""}),onClick:e=>this.deleteButtonAction(e),tabIndex:-1,appearance:"subtle",spacing:"none"})}renderRemoveButtonContainer(){const{onDelete:e,isLoading:t,hasError:s=!1}=this.props;return e===o.a||t||s?null:a.a.createElement(PE,null,this.shouldShowRemoveAction()&&this.renderRemoveButton())}renderType(){const{intl:e,isDraggable:t=!1,issueTypeIconUrl:s,issueTypeName:n,handleUserClickAnalytics:i}=this.props;if(rE()(n))return null;const r=e.formatMessage(kE.issueTypeTitle,{issueTypeName:n});return(a.a.createElement(he.a,{content:n,hideTooltipOnMouseDown:t,position:"bottom"},a.a.createElement(UE,{onClick:()=>{i&&i("typeIcon")}},t&&this.isActionVisible()?a.a.createElement(xE,null,a.a.createElement(pE.a,{label:r,size:"small"})):a.a.createElement(TE,null,a.a.createElement(sp.a,{alt:r,url:s})))))}renderEstimate(){const{issueKey:e,estimateFieldId:t,isActive:s,isHovering:n,isFocused:i}=this.props;return cE()(e)||cE()(t)?null:a.a.createElement(vE,{isActive:s,isHovering:n,isFocused:i,issueKey:Object(Li.l)(e),estimateFieldId:t})}renderServerIcon(){const{remoteServerHostname:e,isDraggable:t,remoteServerIconUrl:s}=this.props;return cE()(e)||cE()(s)?null:a.a.createElement(he.a,{content:e,hideTooltipOnMouseDown:t,position:"bottom"},a.a.createElement(AE,null,a.a.createElement(sp.a,{alt:e,url:s})))}renderMiniTimeLogGraph(){const{shouldDisplayWorklogGraph:e,issueTimeTracking:t,statusCategory:s}=this.props;return void 0===(null==t?void 0:t.timeSpentSeconds)||0===t.timeSpentSeconds||!1===Boolean(e)?null:a.a.createElement(ME,null,a.a.createElement(CE,{issueTimeTracking:t,statusCategory:s}))}render(){return a.a.createElement(_E,{isFocused:this.props.isFocused,isHovering:this.props.isHovering},this.renderType(),this.shouldRenderKey()&&this.renderKey(),this.renderSummary(),this.renderServerIcon(),this.renderMiniTimeLogGraph(),this.renderPriority(),this.renderEstimate(),Object(qt.isInlineAssigneeInChildrenEnabled)()&&this.props.shouldShowInteractiveAssignee?this.renderExtractedAssignee():this.renderReadOnlyAssignee(),this.renderStatus(),this.renderLoadingSpinner(),this.renderError(),this.renderRemoveButtonContainer())}}BE.displayName="IssueLineCard",BE.defaultProps={isLoading:!1,isDraggable:!1,isHovering:!1,isActive:!1,isFocused:!1,isInteractive:!0,hasError:!1,shouldDisplayWorklogGraph:!1,canRemove:!0,remoteServerIconUrl:gE.a,onDelete:o.a,onEdit:o.a};const WE=e=>{const{push:t}=Object(xt.o)(),{issueKey:s=""}=e,[n]=Object(qt.isInlineAssigneeInChildrenEnabled)()?Object(hl.b)({issueKey:Object(Li.l)(s),fieldKey:"assignee"}):[void 0],i=void 0!==n;return a.a.createElement(BE,FE({push:t,shouldShowInteractiveAssignee:i},e))};WE.displayName="IssueLineCardWithHooks";var HE=Object(j.injectIntl)(WE),GE=s("./src/packages/issue/fields/assignee/src/ui/async.js"),$E=s("./src/packages/issue/fields/status/src/ui/status-view-lozenge/main.js");const qE=$.default.div(["width:","px;position:relative;"],5*q.e);var zE=({issueTimeTracking:e,statusCategory:t})=>{const[s]=Object(wE.c)(),{remainingEstimateSeconds:n,originalEstimateSeconds:i,timeSpentSeconds:r}=e,o={loggedTime:r,remainingTime:n},c=i,l=t===mE.a.DONE;return a.a.createElement(qE,{"data-testid":"issue.views.common.issue-line-card.issue-line-card.mini-time-log-graph"},a.a.createElement(SE.a,{value:o,estimatedTime:c,config:s,isDone:l,isCompact:!0,shouldHighlightOnHover:!0}))};const YE=$.default.div(["& > div > div{margin-left:0;}"]),QE=Object(ne.f)(()=>s.e("async-issue-field-number").then(s.bind(null,"./src/packages/issue/fields/number/src/index.js")),{moduleId:"./src/packages/issue/fields/number/src/index.js"}),JE=Object(n.memo)(({isHovering:e,isActive:t,isFocused:s,issueKey:i,estimateFieldId:r})=>{const[o,c]=Object(n.useState)(!1),[{value:l}]=Object(hE.a)({issueKey:i,fieldKey:r}),u=Object(n.useCallback)(()=>c(!0),[]),d=Object(n.useCallback)(()=>c(!1),[]),p=!(null==l)||o||!0===e||!0===s||!0===t,m=a.a.createElement(yE.a,{isEditable:!0,value:l});return p?a.a.createElement(YE,{role:"button",onClick:e=>e.preventDefault(),onFocus:e=>e.stopPropagation()},a.a.createElement(OE.b,{packageName:"issue",fallback:m},a.a.createElement(QE,{issueKey:i,fieldKey:r,onEdit:u,onConfirm:d,onEnter:d,onCancel:d,onEscape:d}))):null});function ZE(){return(ZE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const XE=Object(j.defineMessages)({issueTypeTitle:{id:"issue.view.common.issue-line-card.issue-type.title",defaultMessage:"Issue type: {issueTypeName}"},issuePriorityTitle:{id:"issue.view.common.issue-line-card.priority.title",defaultMessage:"Priority: {issuePriorityName}"}}),{DONE:ev,statusCategoryForId:tv}=mE.a,sv=$.default.div(["display:flex;align-items:center;"]),nv=Object($.default)(sv)(["width:","px;height:100%;margin-left:","px;margin-right:-","px;"],4*q.e,q.e/4,q.e),av=Object($.default)(sv)(["width:100%;height:100%;position:relative;"]),iv=Object($.default)(sv)(["cursor:grab;"]),rv=Object($.default)(sv)(["padding-left:","px;"],q.e),ov=$.default.a(["outline:none;margin-left:","px;color:",";font-weight:600;font-size:12px;text-decoration:",";white-space:nowrap;&:hover,&:active,&:visited,&:link{outline:none;color:",";text-decoration:",";}"],q.e,e=>e.isActive?Ae.a.B400:Ae.a.N90,e=>e.isDone?"line-through":"none",e=>e.isActive?Ae.a.B400:Ae.a.N90,e=>e.isDone?"line-through":"none"),cv=$.default.div(["",";padding-left:","px;flex:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"],e=>e.isActive&&`color: ${Ae.a.B400};`,q.e),lv=$.default.div(["overflow:hidden;text-overflow:ellipsis;white-space:nowrap;"]),uv=Object($.default)(sv)(["padding-right:","px;"],q.e/2);class dv extends n.Component{constructor(...e){super(...e),this.handleEditStatus=e=>{const{onEdit:t}=this.props;t({statusId:e.id,statusName:e.name,statusCategory:tv(e.statusCategory.id),statusCategoryId:e.statusCategory.id})},this.handleErrorDialogClick=e=>{e.stopPropagation()},this.handleErrorDialogMouseDown=e=>{e.preventDefault(),e.stopPropagation()},this.handleLinkKeyClick=e=>{e.preventDefault(),this.props.issueLink&&Object(zd.d)(e)?this.props.push(this.props.issueLink):window.open(this.props.issueLink,"_blank")}}shouldRenderKey(){return!!this.props.issueKey}isActionVisible(){return!this.props.isActive&&(this.props.isHovering||this.props.isFocused)}shouldShowRemoveAction(){return this.props.canRemove&&(this.props.isActive||this.props.isHovering||this.props.isFocused)}deleteButtonAction(e){e.stopPropagation(),this.props.issueKey&&this.props.onDelete(this.props.issueKey)}renderAssigneeStatic(){const{assigneeDisplayName:e,assigneeUrl:t,isDraggable:s}=this.props;return t?a.a.createElement(rv,null,a.a.createElement(he.a,{content:e||"",hideTooltipOnMouseDown:s,position:"bottom"},a.a.createElement(Wi.a,{name:e||"",src:t,size:"small"}))):null}renderAssigneeInteractive(){const{issueKey:e}=this.props;return void 0===e?null:a.a.createElement(rv,{role:"button",onClick:e=>e.preventDefault(),onFocus:e=>e.stopPropagation()},a.a.createElement(GE.a,{issueKey:Object(Li.l)(e)}))}renderStatus(){const{isInteractive:e,issueKey:t,statusCategory:s,statusCategoryId:n,statusId:i,statusName:r,projectType:o}=this.props;return t&&s&&r&&i&&n?a.a.createElement(rv,{onClick:e=>e.preventDefault(),onFocus:e=>e.stopPropagation()},a.a.createElement(Ks.a,{sourceName:"childIssuesPanel"},a.a.createElement($E.a,{isEditable:e,appearance:"lozenge",issueKey:Object(Li.l)(t),projectType:o,initialValue:{id:i,name:r,statusCategory:{id:n}},onSuccess:this.handleEditStatus}))):null}renderPriority(){const{intl:e,isDraggable:t,issuePriorityUrl:s,issuePriorityName:n}=this.props;if(!s)return null;const i=e.formatMessage(XE.issuePriorityTitle,{issuePriorityName:n});return(a.a.createElement(he.a,{content:n||"",hideTooltipOnMouseDown:t,position:"bottom"},a.a.createElement(sp.a,{alt:i,url:s,width:20,height:20})))}renderLoadingSpinner(){return this.props.isLoading?a.a.createElement(rv,null,a.a.createElement(H.a,{size:"small"})):null}renderError(){return this.props.hasError||this.props.errorInlineMessage?a.a.createElement(rv,{onClick:this.handleErrorDialogClick,onMouseDown:this.handleErrorDialogMouseDown},this.props.errorInlineMessage):null}renderSummary(){const{isActive:e,issueSummary:t,isDraggable:s}=this.props;return(a.a.createElement(cv,{"data-test-id":"issue.issue-view.views.common.issue-line-card.issue-line-card-view.summary",isActive:e},a.a.createElement(he.a,{content:t,hideTooltipOnMouseDown:s,position:"bottom"},a.a.createElement(lv,null,t))))}renderKey(){return a.a.createElement(ov,{"data-test-id":"issue.issue-view.views.common.issue-line-card.issue-line-card-view.key",href:this.props.issueLink,isActive:this.props.isActive,isDone:this.props.statusCategory===ev,onClick:this.handleLinkKeyClick},this.props.issueKey)}renderRemoveButton(){return a.a.createElement(W.a,{iconBefore:a.a.createElement(uE.a,{label:""}),onClick:e=>this.deleteButtonAction(e),tabIndex:-1,appearance:"subtle",spacing:"none"})}renderRemoveButtonContainer(){const{onDelete:e,isLoading:t,hasError:s}=this.props;return e===o.a||t||s?null:a.a.createElement(nv,null,this.shouldShowRemoveAction()&&this.renderRemoveButton())}renderType(){const{intl:e,isDraggable:t,issueTypeIconUrl:s,issueTypeName:n}=this.props;if(!n)return null;const i=e.formatMessage(XE.issueTypeTitle,{issueTypeName:n});return(a.a.createElement(he.a,{content:n,hideTooltipOnMouseDown:t,position:"bottom"},a.a.createElement("div",null,t&&this.isActionVisible()?a.a.createElement(iv,null,a.a.createElement(pE.a,{label:i,size:"small"})):a.a.createElement(sv,null,a.a.createElement(sp.a,{alt:i,url:s})))))}renderEstimate(){const{issueKey:e,estimateFieldId:t,isActive:s,isHovering:n,isFocused:i}=this.props;return e&&t?a.a.createElement(JE,{isActive:s,isHovering:n,isFocused:i,issueKey:Object(Li.l)(e),estimateFieldId:t}):null}renderMiniTimeLogGraph(){const{shouldDisplayWorklogGraph:e,issueTimeTracking:t,statusCategory:s}=this.props;return void 0===(null==t?void 0:t.timeSpentSeconds)||0===t.timeSpentSeconds||!1===Boolean(e)?null:a.a.createElement(uv,null,a.a.createElement(zE,{issueTimeTracking:t,statusCategory:s}))}render(){return a.a.createElement(av,{isFocused:this.props.isFocused,isHovering:this.props.isHovering},this.renderType(),this.shouldRenderKey()&&this.renderKey(),this.renderSummary(),this.renderMiniTimeLogGraph(),this.renderPriority(),this.renderEstimate(),Object(qt.isInlineAssigneeInChildrenEnabled)()&&this.props.shouldShowInteractiveAssignee?this.renderAssigneeInteractive():this.renderAssigneeStatic(),this.renderStatus(),this.renderLoadingSpinner(),this.renderError(),this.renderRemoveButtonContainer())}}dv.displayName="IssueLineCard",dv.defaultProps={isLoading:!1,isDraggable:!1,isHovering:!1,isActive:!1,isFocused:!1,isInteractive:!0,hasError:!1,canRemove:!0,projectType:null,onDelete:o.a,onEdit:o.a};const pv=e=>{const{push:t}=Object(xt.o)(),{issueKey:s=Object(Li.l)("")}=e,[n]=Object(qt.isInlineAssigneeInChildrenEnabled)()?Object(hl.b)({issueKey:s,fieldKey:"assignee"}):[void 0],i=void 0!==n;return a.a.createElement(dv,ZE({push:t,shouldShowInteractiveAssignee:i},e))};pv.displayName="IssueLineCardWithHooks";var mv=Object(j.injectIntl)(pv);function bv(){return(bv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function fv(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function gv(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?fv(Object(s),!0).forEach((function(t){hv(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):fv(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function hv(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class yv extends n.Component{constructor(...e){super(...e),this.handleClick=(e,t)=>{this.props.onClick(e,t),e.issueLink&&(Object(zd.e)(t)||Object(zd.a)(t))&&window.open(e.issueLink,"_blank")}}render(){const{issues:e,onOrderChange:t,groupId:s,isReorderEnabled:n,isInteractive:i,projectType:r,onDelete:o,onEditIssue:c,canAddIssueLinks:l,shouldDisplayWorklogGraph:u}=this.props;return(a.a.createElement(qd.a,{items:e,onOrderChange:t,groupId:s,isReorderEnabled:n,isInteractive:i,onClick:this.handleClick},(e,t,d,p)=>a.a.createElement(mv,bv({isHovering:e,isActive:t,isFocused:d,isDraggable:n,isInteractive:i,issueId:p.id,projectType:r,onDelete:o&&(e=>o&&o(s,e)),onEdit:c&&(e=>c&&c(gv(gv({},p),e))),canRemove:l,shouldDisplayWorklogGraph:u},p))))}}yv.displayName="IssueLineCardGroup",yv.defaultProps={isReorderEnabled:!1,isInteractive:!0,shouldDisplayWorklogGraph:!1,projectType:null};var Ov=Object(j.defineMessages)({createChildErrorTitle:{id:"issue.views.common.child-issues-panel.issues.create-child-error-title",defaultMessage:"We couldn't create the child issue"},createSubtaskErrorTitle:{id:"issue.views.common.child-issues-panel.issues.create-subtask-error-title",defaultMessage:"We couldn't create the subtask"},createErrorBody:{id:"issue.views.common.child-issues-panel.issues.create-error-body",defaultMessage:"Check your connection, then give it another try"},linkIssueErrorTitle:{id:"issue.views.common.child-issues-panel.issues.link-issue-error-title",defaultMessage:"We couldn't link the child issue"},linkIssueErrorBody:{id:"issue.views.common.child-issues-panel.issues.link-issue-error-body",defaultMessage:"Check your connection, then give it another try"}});const jv=$.default.div(["margin-top:","px;margin-bottom:","px;padding-right:1px;"],q.e,q.e);function Ev(){return(Ev=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function vv(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function kv(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?vv(Object(s),!0).forEach((function(t){wv(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):vv(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function wv(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class Sv extends n.Component{constructor(...e){super(...e),this.onChildIssueClick=(e,t)=>{const s=e.issueKey;"string"==typeof s&&Object(zd.d)(t)?this.props.onNavigateToNewIssue({fromIssueKey:this.props.parentKey,toIssueKey:s}):Object(qt.isRemoteIssueLinksEnabled)()&&"string"==typeof s&&(Object(zd.e)(t)||Object(zd.a)(t))&&window.open(e.issueLink,"_blank")},this.onOrderChange=(e,t,s,n,a)=>{this.props.onReorderChildren(this.props.allIssues,e,s,n,a)}}inlineErrorMessage(e,t){const{intl:s,onInlineErrorCreateRetry:n,onInlineErrorLinkingRetry:a,onInlineErrorCancel:i,isClassicSubtaskPanel:r}=this.props;switch(t){case $y:return aE(s,s.formatMessage(Ov.linkIssueErrorTitle),s.formatMessage(Ov.linkIssueErrorBody),(t,s)=>a(e,s),()=>i(e));case Gy:default:{const t=r?Ov.createSubtaskErrorTitle:Ov.createChildErrorTitle;return aE(s,s.formatMessage(t),s.formatMessage(Ov.createErrorBody),(t,s)=>n(e,s),()=>i(e))}}}renderIssueLineCardGroup({groupId:e,issues:t,projectType:s,isReorderEnabled:n,isInteractive:i,onEditIssue:r,shouldDisplayWorklogGraph:o}){return a.a.createElement(qd.a,{items:t,onOrderChange:this.onOrderChange,groupId:e,isReorderEnabled:n,isInteractive:i,onClick:this.onChildIssueClick},(e,t,c,l)=>a.a.createElement(HE,Ev({isHovering:e,isActive:t,isFocused:c,isDraggable:n,isInteractive:i,projectType:s,onEdit:r&&(e=>r&&r(kv(kv({},l),e))),shouldDisplayWorklogGraph:o},l)))}render(){const{allIssues:e,incompleteIssues:t,hideDone:s,isClassicSubtaskPanel:n,isNextGenChildrenPanel:i,projectType:r,onEditIssue:o,shouldDisplayWorklogGraph:c}=this.props,l=e.length>1,u=e.filter(e=>e.isLoading).length>0,d=(i||n)&&!s&&l&&!u,p=(s?t:e).map(e=>e.errorType?kv(kv({},e),{},{errorInlineMessage:this.inlineErrorMessage(e.id,e.errorType)}):e),m={"data-testid":"issue.issue-view.views.common.child-issues-panel.issues-container"};return a.a.createElement(jv,m,Object(qt.isRemoteIssueLinksEnabled)()?this.renderIssueLineCardGroup({groupId:"child-issues-panel",issues:p,projectType:r,isReorderEnabled:d,onEditIssue:o,shouldDisplayWorklogGraph:c}):a.a.createElement(yv,{groupId:"child-issues-panel",issues:p,projectType:r,onClick:this.onChildIssueClick,isReorderEnabled:d,onOrderChange:this.onOrderChange,onEditIssue:o,shouldDisplayWorklogGraph:c}))}}Sv.displayName="Issues",Sv.defaultProps={isClassicSubtaskPanel:!1,isNextGenChildrenPanel:!1,shouldDisplayWorklogGraph:!1,allIssues:[],incompleteIssues:[],projectType:null,onReorderChildren:o.a,onEditIssue:o.a};const Iv={UNDEFINED:0,TODO:1,IN_PROGRESS:2,DONE:3},Cv=e=>Iv[null==e?"UNDEFINED":e]||0;function Tv(){return(Tv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Pv(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const _v=e=>{let{allIssues:t,sortBy:s}=e,i=Pv(e,["allIssues","sortBy"]);const r=Object(fl.f)(),[o]=Object(gl.a)(r,"priority"),c=(null==o?void 0:o.allowedValues)||[],l=Object(n.useMemo)(()=>c.map(e=>e.name),[c]),u=Object(n.useMemo)(()=>{switch(s){case"created":return(e=>[...e].sort((e,t)=>void 0===e.created?1:void 0===t.created?-1:t.created-e.created))(t);case"key":return(e=>[...e].sort((e,t)=>{const[s="",n=0]=(e.issueKey||"").split("-"),[a="",i=0]=(t.issueKey||"").split("-");return s.localeCompare(a)||parseInt(n,10)-parseInt(i,10)}))(t);case"status":return(e=>[...e].sort((e,t)=>Cv(e.statusCategory)-Cv(t.statusCategory)||(e.statusName||"").localeCompare(t.statusName||"")))(t);case"assignee":return(e=>[...e].sort((e,t)=>""===e.assigneeDisplayName||null==e.assigneeDisplayName?1:""===t.assigneeDisplayName||null==t.assigneeDisplayName?-1:e.assigneeDisplayName.localeCompare(t.assigneeDisplayName)))(t);case"priority":return((e,t)=>[...e].sort((e,s)=>t.indexOf(e.issuePriorityName)-t.indexOf(s.issuePriorityName)))(t,l);case"ranking":default:return t}},[t,l,s]);return a.a.createElement(Sv,Tv({},i,{allIssues:u}))};_v.displayName="SortedIssues",_v.defaultProps={isClassicSubtaskPanel:!1,isNextGenChildrenPanel:!1,shouldDisplayWorklogGraph:!1,allIssues:[],incompleteIssues:[],projectType:null,onReorderChildren:o.a,onEditIssue:o.a};const xv=e=>{const{sortBy:t}=e,s=Pv(e,["sortBy"]);return(a.a.createElement(Sv,s))};xv.displayName="OldIssuesWithAdjustedProps";const Dv=Object(v.b)("issue")(xv),Av=Object(v.b)("issue")(_v),Mv=Object(Jj.a)(qt.isSortingIssuesUnderEpicEnabled,Av,Dv);var Lv=Object($t.a)([j.injectIntl,Object(is.a)("button",{onInlineErrorCancel:"clicked",onInlineErrorCreateRetry:"clicked"}),Object(is.a)("inlineIssue",{onNavigateToNewIssue:"clicked",onReorderChildren:"dragged"}),Object(E.a)({onInlineErrorCancel:"cancelInlineErrorCreate",onInlineErrorCreateRetry:"retryInlineErrorCreate",onNavigateToNewIssue:"navigateToNewIssue",onReorderChildren:"reorderChildren"}),Object(i.b)(e=>({allIssues:sh(e),sortBy:hh(e),incompleteIssues:ah(e),hideDone:bh(e),parentKey:Sh(e),projectType:Rh(e),isClassicSubtaskPanel:jh(e),isNextGenChildrenPanel:vh(e),onNavigateToNewIssue:Ah(e),shouldDisplayWorklogGraph:jh(e)||vh(e)&&0===rh(e)}),{onInlineErrorCancel:e=>({type:"state.entities.CANCEL_OPTIMISTIC_CHILD",payload:{optimisticId:e}}),onInlineErrorCreateRetry:(e,t)=>({type:"state.entities.CREATE_CHILD_RETRY",payload:{optimisticId:e},meta:{analyticsEvent:t}}),onInlineErrorLinkingRetry:(e,t)=>({type:"state.entities.LINKING_ISSUE_RETRY",payload:{issueId:e},meta:{analyticsEvent:t}}),onReorderChildren:(e,t,s,n,a)=>({type:"state.entities.REORDER_CHILDREN_REQUEST",payload:{currentOrder:e,newOrder:t,currentIndex:s,newIndex:n},meta:{analyticsEvent:a}}),onEditIssue:e=>({type:"state.entities.UPDATE_ISSUE",payload:e})})])(Mv),Rv=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/progress-bar/index.js"),Nv=Object(j.defineMessages)({completionPercentageText:{id:"issue.views.common.child-issues-panel.progress-summary.completion-percentage-text",defaultMessage:"{completionPercentage}% Done"},todoIssuesSegmentTooltipText:{id:"issue.views.common.child-issues-panel.progress-summary.todo-issues-segment-tooltip-text",defaultMessage:"To Do: {todoIssueCount} of {totalIssueCount} issues"},todoSubtasksSegmentTooltipText:{id:"issue.views.common.child-issues-panel.progress-summary.todo-subtasks-segment-tooltip-text",defaultMessage:"To Do: {todoIssueCount} of {totalIssueCount} subtasks"},inProgressIssuesSegmentTooltipText:{id:"issue.views.common.child-issues-panel.progress-summary.in-progress-issues-segment-tooltip-text",defaultMessage:"In Progress: {inProgressIssueCount} of {totalIssueCount} issues"},inProgressSubtasksSegmentTooltipText:{id:"issue.views.common.child-issues-panel.progress-summary.in-progress-subtasks-segment-tooltip-text",defaultMessage:"In Progress: {inProgressIssueCount} of {totalIssueCount} subtasks"},completedIssuesSegmentTooltipText:{id:"issue.views.common.child-issues-panel.progress-summary.completed-issues-segment-tooltip-text",defaultMessage:"Done: {completedIssueCount} of {totalIssueCount} issues"},completedSubtasksSegmentTooltipText:{id:"issue.views.common.child-issues-panel.progress-summary.completed-subtasks-segment-tooltip-text",defaultMessage:"Done: {completedIssueCount} of {totalIssueCount} subtasks"}});const Uv=Ae.a.N30,Fv=Ae.a.B400,Vv=Ae.a.G300,Kv=$.default.div(["display:flex;align-items:center;"]),Bv=$.default.div(["flex-grow:1;"]),Wv=$.default.div(["margin-left:","px;margin-right:","px;flex-shrink:0;color:",";"],2*q.e,.25*q.e,Ae.a.N200),Hv=$.default.span(["display:inline-block;width:","px;text-align:right;"],3*q.e);function Gv(){return(Gv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const $v={remainingTooltip:Nv.todoSubtasksSegmentTooltipText,completedTooltip:Nv.completedSubtasksSegmentTooltipText,inProgressTooltip:Nv.inProgressSubtasksSegmentTooltipText},qv={remainingTooltip:Nv.todoIssuesSegmentTooltipText,completedTooltip:Nv.completedIssuesSegmentTooltipText,inProgressTooltip:Nv.inProgressIssuesSegmentTooltipText};var zv=Object($t.a)([j.injectIntl,Object(i.b)(e=>({isClassicSubtaskPanel:jh(e),totalIssueCount:sh(e).length,inProgressIssueCount:ih(e).length,completedIssueCount:nh(e).length}),{})])(e=>{const{isClassicSubtaskPanel:t,intl:{formatMessage:s},totalIssueCount:n,inProgressIssueCount:i,completedIssueCount:r}=e,o=n-i-r,c=Math.floor(r/n*100),{remainingTooltip:l,completedTooltip:u,inProgressTooltip:d}=t?$v:qv;return a.a.createElement(Kv,null,a.a.createElement(Bv,null,a.a.createElement(Rv.b,{sum:n,backgroundColor:Uv,remainingTooltipContent:s(l,{todoIssueCount:o,totalIssueCount:n})},a.a.createElement(Rv.a,{value:r,color:Vv,tooltipContent:s(u,{completedIssueCount:r,totalIssueCount:n})}),a.a.createElement(Rv.a,{value:i,color:Fv,tooltipContent:s(d,{inProgressIssueCount:i,totalIssueCount:n})}))),a.a.createElement(Wv,null,a.a.createElement(j.FormattedMessage,Gv({},Nv.completionPercentageText,{values:{completionPercentage:a.a.createElement(Hv,null,c)}}))))});class Yv extends n.Component{hasIssues(){const{allIssues:e}=this.props;return e.length>0}hasContent(){const{noValueText:e,addClickCount:t}=this.props;return this.hasIssues()||t>0||!!e}renderEmptyValue(){const{noValueText:e,addClickCount:t,intl:{formatMessage:s}}=this.props;return this.hasIssues()||null===e||0!==t?null:a.a.createElement(Si.b,null,s(e))}renderIssues(){const{ProgressSummary:e,Issues:t,allIssues:s}=this.props,n=s.length>=2?a.a.createElement(e,null):null;return s.length>0?a.a.createElement(a.a.Fragment,null,n,a.a.createElement(t,null)):null}renderCreate(){const{InlineCreate:e,addClickCount:t,AddExistingIssue:s,childPanelView:n,sourceName:i}=this.props;if(t>0)switch(n){case Xy.InlineCreate:return Wg()?a.a.createElement(e,{inputId:i}):a.a.createElement(e,null);case Xy.AddExistingIssue:return a.a.createElement(s,null);default:return null}return null}render(){const{Heading:e,onAddChildClick:t,sourceName:s}=this.props;return Wg()?this.hasContent()?a.a.createElement(a.a.Fragment,null,a.a.createElement(e,{onAddChildClick:t,sourceName:s}),this.renderEmptyValue(),this.renderIssues(),this.renderCreate()):null:this.hasContent()?a.a.createElement(a.a.Fragment,null,a.a.createElement(e,{onAddChildClick:t}),this.renderEmptyValue(),this.renderIssues(),this.renderCreate()):null}}Yv.displayName="ChildIssuesPanel",Yv.defaultProps={addClickCount:0,noValueText:null};var Qv=Object($t.a)([j.injectIntl,Object(i.b)(e=>({Heading:pj,InlineCreate:Qj,Issues:Lv,ProgressSummary:zv,AddExistingIssue:UO,childPanelView:dh(e),allIssues:sh(e),incompleteIssues:ah(e),addClickCount:uh(e),noValueText:Dh(e)}),{})])(Yv);class Jv extends n.Component{constructor(e){super(e),this.store=void 0;const{issues:t,parentKey:s,childIssuesPanelType:n}=this.props;this.store=((e,t,s)=>Object(Fy.a)({appName:`${t}-child-issues-panel-${s}`,rootReducer:oO,rootEpic:e}))(Uy(this.props.dataProvider),s,n),this.dispatchContext(),this.store.dispatch((()=>({type:"state.context.REQUIRES_FULL_CREATE_CHECK"}))()),this.dispatchEntities(),"classicSubtasks"!==n&&t.length>0&&this.store.dispatch($h());const{fetchIssueTypesStatus:a}=e;a&&this.store.dispatch(sO(a))}componentDidMount(){this.props.issues.length>0&&this.props.prefetchChildIssues(this.props.issues.map(e=>e.id))}componentDidUpdate(e){if(Object(qt.isUseTrueShallowEqualEnabled)()){if(Object(Yi.a)(e,this.props))return}else if(Object(Kg.a)(e,this.props))return;const{issues:t,quickAddClickCount:s,fetchIssueTypesStatus:n}=this.props;s>e.quickAddClickCount&&this.store.dispatch(Jy()),t.length&&this.dispatchEntities(),n!==e.fetchIssueTypesStatus&&(this.store.dispatch(sO(n||"NONE")),this.dispatchEntities());const a=t.map(e=>e.id),i=e.issues.map(e=>e.id);Ua()(a,i)||this.props.prefetchChildIssues(a)}dispatchEntities(){const{issueTypes:e,issues:t,epicLinkFieldKey:s,issueHierarchyLevel:n}=this.props;this.store.dispatch((e=>({type:"state.entities.SET_ENTITIES",payload:e}))({issueTypes:e.map(e=>((e,t)=>{const{fields:s}=e,n=Yg(e,["fields"]),a=!!s&&Jg(s),i=!!s&&Object.keys(s).includes(t);return qg(qg({},n),{},{hasRequiredField:a,hasEpicLinkField:i})})(e,s)),issues:t,issueHierarchyLevel:n}))}dispatchContext(){const{supportsIssueCreation:e,baseUrl:t,locale:s,user:n,parentKey:a,customFieldIdRank:i,epicLinkFieldKey:r,parentId:o,projectId:c,projectType:l,messages:u,onNavigateToNewIssue:d,onChange:p,childIssuesPanelType:m,isIssueViewComplete:b}=this.props;let f=null,g=null;if(null!==l){const{appEditions:e}=Object(Fn.f)();f=Object(Vn.e)(l),g=Object(Kn.f)(f,e)}this.store.dispatch((e=>({type:"state.context.SET_CONTEXT",payload:e}))({baseUrl:t,locale:s,user:n,projectId:c,parentId:o,parentKey:a,customFieldIdRank:i,epicLinkFieldKey:r,supportsIssueCreation:e,messages:u,onNavigateToNewIssue:d,onChange:p,childIssuesPanelType:m,isIssueViewComplete:b,projectType:l,application:f,edition:g,requiresFullCreate:!1}))}render(){const{locale:e,onAddChildClick:t,childIssuesPanelType:s,analyticsSource:n,issueHierarchyLevel:i}=this.props;return(a.a.createElement(Fg.a,{store:this.store,locale:e},a.a.createElement(Ks.a,{sourceName:"childIssuesPanel",sourceType:Bs.f,attributes:{childIssuesPanelType:s,issueHierarchyLevel:i-1,analyticsSource:`issue-view (${n})`}},a.a.createElement(Vg.a,null,Wg()?a.a.createElement(Qv,{onAddChildClick:t,sourceName:"childIssuesPanel"}):a.a.createElement(Qv,{onAddChildClick:t}),a.a.createElement(os.FlagsDispatcher,{mapper:Gg})))))}}Jv.displayName="ChildIssuesPanel",Jv.defaultProps={issues:[],issueTypes:[],isIssueViewComplete:!1};const Zv=e=>a.a.createElement(M.a,{id:"issue.issue-view.common.child-issues-panel"},a.a.createElement(L.a,{id:"common.child-issues-panel",packageName:"jiraIssueView",sendToPrivacyUnsafeSplunk:!0},a.a.createElement(Jv,e)));Zv.displayName="WrappedChildIssuesPanel";var Xv=Object(Bg.a)(Zv),ek=Object(j.defineMessages)({title:{id:"issue.children-issues.title",defaultMessage:"Child issues"}});function tk(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function sk(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?tk(Object(s),!0).forEach((function(t){nk(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):tk(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function nk(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function ak(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}var ik=Object($t.a)([Object(i.b)(e=>({childIssuesPanelType:"nextGenChildren",baseUrl:Object(C.g)(e),locale:Object(C.D)(e),user:Object(C.a)(e),projectId:Object(T.D)(e),projectType:Object(T.G)(e),parentKey:Object(C.B)(e),parentId:Object(C.A)(e),customFieldIdRank:Object(On.b)("com.pyxis.greenhopper.jira:gh-lexo-rank")(e),issueTypes:Object(zt.h)(e),issues:Object(Ng.a)(e),supportsIssueCreation:Object(zt.i)(e),quickAddClickCount:Rg(e),isIssueViewComplete:Object(T.n)(e),messages:ek,onNavigateToNewIssueStateProp:Object(C.G)(e),fetchIssueTypesStatus:Object(xl.a)(e),issueHierarchyLevel:Object(zt.d)(e),analyticsSource:Object(C.b)(e)}),e=>({onChange:t=>{switch(t.type){case Ug.CHILD_ISSUE_ADDED:e(Pg(t.meta.childIssue));break;case Ug.ISSUE_CHILDREN_ORDER_CHANGED:e((({issueIds:e,rankId:t,isRankAfter:s})=>({type:"ISSUE_CHILDREN_ORDER_CHANGE_SUCCESS",payload:{issueIds:e,rankId:t,isRankAfter:s}}))(t.meta))}},onAddChildClick:()=>e(_g()),prefetchChildIssues:t=>e(Object(Dg.a)({issueIds:t})),onNavigateToNewIssueDispatchProp:({fromIssueKey:t,toIssueKey:s})=>{__SPA__||e(Object(xg.c)({fromIssueKey:t,toIssueKey:s}))}}),(e,t)=>{const{onNavigateToNewIssueStateProp:s}=e,n=ak(e,["onNavigateToNewIssueStateProp"]),{onNavigateToNewIssueDispatchProp:a}=t,i=ak(t,["onNavigateToNewIssueDispatchProp"]);return sk(sk(sk({},n),i),{},{onNavigateToNewIssue:({fromIssueKey:e,toIssueKey:t})=>{s&&s({fromIssueKey:e,toIssueKey:t}),a&&a({fromIssueKey:e,toIssueKey:t})}})})])(Xv),rk=s("./src/packages/issue/issue-view/src/actions/applink-authentication-actions.js"),ok=s("./src/packages/issue/issue-view/src/actions/confluence-pages-actions.js"),ck=s("./src/packages/issue/issue-view/src/selectors/confluence-app-links-selector.js"),lk=s("./src/packages/issue/issue-view/src/selectors/confluence-pages-selector.js"),uk=s("./node_modules/@atlaskit/icon/glyph/warning.js"),dk=s.n(uk);const pk=$.default.div(["height:100%;margin-left:","px;transform:scale(",");margin-right:","px;"],q.e/4,({show:e})=>e?1:0,-q.e),mk=$.default.div(["display:inline-block;vertical-align:middle;margin-top:","px;width:","px;height:","px;margin-left:","px;"],q.e,4*q.e,3*q.e,q.e),bk=e=>{const{show:t,onClick:s,icon:n}=e;return(a.a.createElement(pk,{show:t},a.a.createElement(mk,null,a.a.createElement(W.a,{iconBefore:n,appearance:"subtle",onClick:s,spacing:"none"}))))};bk.displayName="LineCardHiddenButton";const fk=e=>{const{show:t,onClick:s}=e;return(a.a.createElement(bk,{show:t,icon:a.a.createElement(uE.a,null),onClick:s}))};fk.displayName="DeleteButton";const gk=$.default.div(["display:flex;align-items:center;"]),hk=Object($.default)(gk)(["width:100%;height:100%;position:relative;"]),yk=$.default.div(["margin-left:-2px;"]),Ok=$.default.div(["margin-left:-1px;"]),jk=$.default.div(["padding-left:","px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"],q.e/2),Ek=$.default.div(["padding-left:","px;overflow:hidden;"],q.e),vk=$.default.div(["padding-left:","px;"],q.e);class kk extends n.Component{constructor(...e){super(...e),this.onDeleteClick=e=>{const{onDeleteClick:t,globalId:s}=this.props;e.stopPropagation(),t(s)},this.authenticateApplink=e=>{const{error:t,repairLinkHref:s,onAuthenticateApplink:n}=this.props;"APPLINK_REQ_AUTH"===t&&s&&n&&n(s),e.stopPropagation()},this.openRepairApplink=e=>{const{repairLinkHref:t}=this.props;t&&window.open(t,"_blank"),e.stopPropagation()},this.openConfluenceLink=e=>{window.open(this.props.href,"_blank"),e.stopPropagation()},this.renderErrorIcon=()=>a.a.createElement(yk,null,a.a.createElement(dk.a,{label:"",primaryColor:Ae.a.Y300})),this.renderPadlockIcon=()=>a.a.createElement(Ok,null,a.a.createElement(kr.a,{label:"",primaryColor:Ae.a.B300})),this.renderErrorText=()=>a.a.createElement(jk,null,a.a.createElement(j.FormattedMessage,{id:"issue.details.confluence-pages.line-card-error.loading-error",defaultMessage:"We couldn't load this page."})),this.renderAuthRequiredText=()=>a.a.createElement(jk,null,a.a.createElement(j.FormattedMessage,{id:"issue.details.confluence-pages.line-card-error.auth-required",defaultMessage:"Authenticate with Confluence to see this page."})),this.renderMissingApplinkText=()=>a.a.createElement(jk,null,a.a.createElement(j.FormattedMessage,{id:"issue.details.confluence-pages.line-card-error.missing-applink",defaultMessage:"Confluence site not linked."}))}renderIcon(){const{error:e}=this.props;return"APPLINK_REQ_AUTH"===e?this.renderPadlockIcon():this.renderErrorIcon()}renderText(){const{error:e}=this.props;return"APPLINK_REQ_AUTH"===e?this.renderAuthRequiredText():"APPLINK_MISSING"===e?this.renderMissingApplinkText():this.renderErrorText()}renderAuthorizationRepairLink(){return a.a.createElement(vk,null,a.a.createElement(W.a,{appearance:"link",spacing:"none",onClick:this.authenticateApplink},a.a.createElement(j.FormattedMessage,{id:"issue.details.confluence-pages.line-card-error.auth-repair-link",defaultMessage:"Authenticate"})))}renderApplinkRepairLink(){return a.a.createElement(vk,null,a.a.createElement(W.a,{appearance:"link",spacing:"none",onClick:this.openRepairApplink},a.a.createElement(j.FormattedMessage,{id:"issue.details.confluence-pages.line-card-error.applink-repair-link",defaultMessage:"Repair"})))}renderRepairLink(){const{error:e,href:t,repairLinkHref:s}=this.props;if(s){let s;"APPLINK_MISSING"===e?s=this.renderApplinkRepairLink():"APPLINK_REQ_AUTH"===e&&(s=this.renderAuthorizationRepairLink());const n=t?a.a.createElement(Ek,null,"\u2022"):null;return(a.a.createElement(a.a.Fragment,null,s,n))}return null}renderLink(){return a.a.createElement(vk,null,a.a.createElement(W.a,{appearance:"link",spacing:"none",onClick:this.openConfluenceLink},a.a.createElement(j.FormattedMessage,{id:"issue.details.confluence-pages.line-card-error.open-link",defaultMessage:"Open in Confluence"})))}renderDeleteButton(){const{isHovering:e,isFocused:t}=this.props;return(a.a.createElement(fk,{show:e||t,onClick:this.onDeleteClick}))}render(){return a.a.createElement(hk,null,this.renderIcon(),this.renderText(),this.renderRepairLink(),this.renderLink(),this.renderDeleteButton())}}kk.displayName="ConfluencePageLineCardError";var wk=s("./node_modules/@atlaskit/icon-object/glyph/blog/16.js"),Sk=s.n(wk),Ik=s("./node_modules/@atlaskit/icon-object/glyph/page/16.js"),Ck=s.n(Ik);const Tk=$.default.div(["display:flex;align-items:center;"]),Pk=Object($.default)(Tk)(["padding-left:","px;"],q.e),_k=Object($.default)(Tk)(["width:100%;height:100%;position:relative;"]),xk=$.default.div(["height:","px;padding-right:2px;"],3.5*q.e),Dk=$.default.div([""," padding-left:","px;flex:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"],e=>e.isFocused&&`color: ${Ae.a.B400};`,q.e);class Ak extends n.Component{constructor(...e){super(...e),this.onDeleteClick=e=>{const{onDeleteClick:t,globalId:s}=this.props;e.stopPropagation(),t(s)}}renderPageIcon(){const e="blogpost"===this.props.pageType,t=e?a.a.createElement(j.FormattedMessage,{id:"issue.details.confluence-pages.line-card.blog-icon",defaultMessage:"Confluence blog post"}):a.a.createElement(j.FormattedMessage,{id:"issue.details.confluence-pages.line-card.page-icon",defaultMessage:"Confluence page"});return a.a.createElement(he.a,{content:t,position:"bottom"},e?a.a.createElement(Sk.a,null):a.a.createElement(Ck.a,null))}renderPageTitle(){const{pageTitle:e,isFocused:t}=this.props;return(a.a.createElement(Dk,{isFocused:t},e))}renderLastUpdateAvatar(){const{userDisplayName:e,userAvatarUrl:t}=this.props;return t?e?a.a.createElement(Pk,null,a.a.createElement(he.a,{content:e,position:"bottom"},a.a.createElement(xk,null,a.a.createElement(Wi.a,{name:e,src:t,size:"small"})))):a.a.createElement(Pk,null,a.a.createElement(Wi.a,{src:t,size:"small"})):null}renderDeleteButton(){const{isHovering:e,isFocused:t}=this.props;return(a.a.createElement(fk,{show:e||t,onClick:this.onDeleteClick}))}render(){return a.a.createElement(_k,null,this.renderPageIcon(),this.renderPageTitle(),this.renderLastUpdateAvatar(),this.renderDeleteButton())}}Ak.displayName="ConfluencePageLineCard";var Mk=Ak;class Lk extends n.Component{constructor(...e){super(...e),this.state={modalOpen:!1,linkToDeleteId:null},this.onCancelDelete=()=>{this.setState({modalOpen:!1,linkToDeleteId:null})},this.onConfirmDelete=()=>{const{onDeleteConfluencePageLink:e}=this.props,{linkToDeleteId:t}=this.state;null!=t&&e(t),this.setState({modalOpen:!1,linkToDeleteId:null})},this.onDeleteClick=e=>{this.setState({modalOpen:!0,linkToDeleteId:e})},this.handleErrorLineCardClick=e=>{e.link&&e.link.href&&window.open(e.link.href,"_blank")},this.handleLineCardClick=e=>{e.href&&window.open(e.href,"_blank")},this.handleClick=(e,t)=>{this.props.onClick&&this.props.onClick(e,t),e.error?this.handleErrorLineCardClick(e):this.handleLineCardClick(e)},this.renderErrorLineCard=(e,t,s)=>a.a.createElement(kk,{globalId:e.link.globalId,error:e.error,href:e.link.href,repairLinkHref:e.repairLink?e.repairLink.href:null,onAuthenticateApplink:this.props.onAuthenticateApplink,onDeleteClick:this.onDeleteClick,isHovering:t,isFocused:s}),this.renderLineCard=(e,t,s)=>a.a.createElement(Mk,{globalId:e.globalId,pageTitle:e.title,pageType:e.type,userDisplayName:e.lastUpdatedContext&&e.lastUpdatedContext.user.displayName,userAvatarUrl:e.lastUpdatedContext&&e.lastUpdatedContext.user.avatarUrl,onDeleteClick:this.onDeleteClick,isHovering:t,isFocused:s})}render(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(qd.a,{items:this.props.pages,groupId:this.props.groupId,onClick:this.handleClick},(e,t,s,n)=>n.error?this.renderErrorLineCard(n,e,s):this.renderLineCard(n,e,s)),this.state.modalOpen&&a.a.createElement(it.a,{appearance:"danger",headerMessage:a.a.createElement(j.FormattedMessage,{id:"issue.details.confluence-pages.delete-confirmation-modal.title",defaultMessage:"Delete the Confluence page link?"}),contentMessage:a.a.createElement(j.FormattedMessage,{id:"issue.details.confluence-pages.delete-confirmation-modal.content",defaultMessage:"You can add the page later again if you need to."}),confirmActionText:a.a.createElement(j.FormattedMessage,{id:"issue.details.confluence-pages.delete-confirmation-modal.confirmation-text",defaultMessage:"Delete"}),cancelActionText:a.a.createElement(j.FormattedMessage,{id:"issue.details.confluence-pages.delete-confirmation-modal.cancellation-text",defaultMessage:"Cancel"}),onConfirm:this.onConfirmDelete,onCancel:this.onCancelDelete}))}}Lk.displayName="ConfluencePageLineCardGroup";var Rk=s("./node_modules/lodash/range.js"),Nk=s.n(Rk),Uk=s("./src/packages/issue/issue-view/src/common/skeleton/container-mask-view.js"),Fk=s("./src/packages/issue/issue-view/src/common/skeleton/skeleton-container-view.js"),Vk=s("./src/packages/issue/issue-view/src/common/skeleton/text-line-mask-view.js");class Kk extends n.Component{getItems(){return Nk()(this.props.itemCount).map(e=>a.a.createElement(Vk.a,{key:e,fontSize:20,lineHeight:41,intrusion:0}))}render(){const{paddingTopInPixels:e,paddingBottomInPixels:t}=this.props;return(a.a.createElement(Fk.a,null,a.a.createElement(Ol.b,null),a.a.createElement(Uk.a,{paddingTop:e,paddingBottom:t},this.getItems())))}}Kk.displayName="ItemLineCardGroup",Kk.defaultProps={paddingTopInPixels:0,paddingBottomInPixels:0};const Bk=Object(j.defineMessages)({label:{id:"issue.confluence-links-add-label",defaultMessage:"Link a Confluence Page"}}),Wk=$.default.span(["margin-left:auto;"]);class Hk extends n.Component{render(){return a.a.createElement(Wk,null,a.a.createElement(ng.a,{label:this.props.intl.formatMessage(Bk.label),onClick:this.props.onClick}))}}Hk.displayName="AddButton",Hk.defaultProps={onClick:o.a};var Gk=Object(j.injectIntl)(Hk),$k=s("./src/packages/issue/issue-view/src/actions/fetch-recently-visited-confluence-pages-actions.js");const qk=Object(yn.createSelector)(T.J,lk.h,lk.j,(e,t=[],s=[])=>{const n=e.recentlyVisitedConfluencePages||[],a=t.concat(s).map(e=>e.href);return n.filter(e=>!a.includes(e.href))}),zk="addconfluencelink.error.duplicate",Yk="addconfluencelink.error.page.forbidden",Qk="addconfluencelink.error.issueId.invalid",Jk="addconfluencelink.error.no.matching.app.link",Zk="addconfluencelink.error.pageid.notfound",Xk="addconfluencelink.error.page.unauthorized",ew="addconfluencelink.error.url.invalid",tw="addconfluencelink.error.url.required";var sw=Object(j.defineMessages)({fieldLabel:{id:"issue.views.confluence-pages.link.label",defaultMessage:"Search pages or paste in a link"},fieldPlaceholder:{id:"issue.views.confluence-pages.link.placeholder",defaultMessage:"Search pages or paste in a link"},genericErrorText:{id:"issue.views.confluence-pages.link.error.generic",defaultMessage:"We're having trouble. Check your connection and try again."},duplicateErrorText:{id:"issue.views.confluence-pages.link.error.duplicate",defaultMessage:"That page is already linked to this issue."},forbiddenErrorText:{id:"issue.views.confluence-pages.link.error.forbidden",defaultMessage:"You don't have permission to link to Confluence pages."},issueIdErrorText:{id:"issue.views.confluence-pages.link.error.issue-id",defaultMessage:"We're having trouble. Check your connection and try again."},noMatchingApplinkErrorText:{id:"issue.views.confluence-pages.link.error.no-matching-app-link",defaultMessage:"You don't have an application link set up for that Confluence site."},pageIdNotFoundErrorText:{id:"issue.views.confluence-pages.link.error.page-id-not-found",defaultMessage:"We can't find that page. It might be deleted or restricted."},unauthorizedErrorText:{id:"issue.views.confluence-pages.link.error.unauthorized",defaultMessage:"You need to authorize this pages' Confluence site."},urlInvalidErrorText:{id:"issue.views.confluence-pages.link.error.url-invalid",defaultMessage:"That URL doesn't look right. Try entering it again."},urlRequiredErrorText:{id:"issue.views.confluence-pages.link.error.url-required",defaultMessage:"That URL doesn't look right. Try entering it again."},linkButton:{id:"issue.views.confluence-pages.link.link-button",defaultMessage:"Link"},cancelButton:{id:"issue.views.confluence-pages.link.cancel-button",defaultMessage:"Cancel"}});const nw={[zk]:sw.duplicateErrorText,[Yk]:sw.forbiddenErrorText,[Qk]:sw.issueIdErrorText,[Jk]:sw.noMatchingApplinkErrorText,[Zk]:sw.pageIdNotFoundErrorText,[Xk]:sw.unauthorizedErrorText,[ew]:sw.urlInvalidErrorText,[tw]:sw.urlRequiredErrorText};var aw=e=>nw[e]||sw.genericErrorText,iw=s("./src/packages/issue/issue-view/src/views/issue-base/content/confluence-pages/create-link/link-select/product-requirements/state/store.js"),rw=s("./node_modules/react-async-component/commonjs/index.js"),ow=Object(rw.asyncComponent)({resolve:()=>s.e("async-product-requirements-controller").then(s.bind(null,"./src/packages/issue/issue-view/src/views/issue-base/content/confluence-pages/create-link/link-select/product-requirements/controllers/index.js")),name:"AsyncProductRequirementsController"}),cw=s("./node_modules/react-select/dist/base/dist/react-select-cac0a5ae.browser.esm.js"),lw=s("./src/packages/issue/issue-view/src/views/common/select-validation-wrapper/select-validation-wrapper.js"),uw=s("./node_modules/@atlaskit/icon/glyph/link-filled.js"),dw=s.n(uw);const pw=$.default.div(["display:flex;align-items:center;height:34px;"]),mw=$.default.div(["margin-right:","px;line-height:1;"],2*q.e),bw=$.default.div(["display:flex;flex-direction:column;"]),fw=$.default.div(["line-height:1.25em;font-size:14px;font-weight:500;"]);class gw extends n.PureComponent{render(){const{href:e,onSelect:t}=this.props;return(a.a.createElement(pw,{onClick:()=>t&&t(e)},a.a.createElement(mw,null,a.a.createElement(dw.a,{label:"",size:"medium",primaryColor:Ae.a.B200})),a.a.createElement(bw,null,a.a.createElement(fw,null,a.a.createElement(Si.a,null,e)))))}}gw.displayName="LinkItem";var hw=gw,yw=s("./node_modules/@atlaskit/icon-object/glyph/blog/24.js"),Ow=s.n(yw),jw=s("./node_modules/@atlaskit/icon-object/glyph/page/24.js"),Ew=s.n(jw);const vw=$.default.div(["display:flex;align-items:center;height:34px;"]),kw=$.default.div(["margin-right:","px;line-height:1;"],2*q.e),ww=$.default.div(["display:flex;flex-direction:column;"]),Sw=$.default.div(["line-height:1.25em;font-size:14px;font-weight:500;"]),Iw=$.default.div(["font-size:12px;color:",";"],Ae.a.N200);class Cw extends n.PureComponent{render(){if(!this.props.page)return null;const{title:e,space:t,type:s,href:n}=this.props.page;return(a.a.createElement(vw,{onClick:()=>this.props.onSelect&&this.props.onSelect(n)},a.a.createElement(kw,null,"blogpost"===s?a.a.createElement(Ow.a,null):a.a.createElement(Ew.a,null)),a.a.createElement(ww,null,a.a.createElement(Sw,null,a.a.createElement(Si.a,null,e)),a.a.createElement(Iw,null,a.a.createElement(Si.a,null,t)))))}}Cw.displayName="ConfluencePageItem";var Tw=Cw,Pw=Object(j.defineMessages)({enterOrSelectConfluenceLink:{id:"issue.views.confluence-pages.link.selector.placeholder",defaultMessage:"Search pages or paste in a link"},noOptionsMessage:{id:"issue.views.confluence-pages.link.selector.noOptionsMessage",defaultMessage:"No recently visited pages"}}),_w=s("./src/packages/issue/issue-view/src/views/issue-base/content/confluence-pages/create-link/link-select/styled.js");function xw(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Dw(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?xw(Object(s),!0).forEach((function(t){Aw(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):xw(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Aw(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Mw(){return(Mw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const Lw=e=>{const{innerProps:t,innerRef:s,getStyles:n,data:i}=e,r=n("option",e);return a.a.createElement(_w.a,{style:r},a.a.createElement("div",Mw({},t,{ref:s}),i.page?a.a.createElement(Tw,Mw({key:`item_key-${i.page.href}`},i)):a.a.createElement(hw,{href:Object(Li.i)(e.value)})))};Lw.displayName="Option";class Rw extends n.Component{constructor(...e){super(...e),this.state={isMenuOpen:!1,value:void 0},this.onKeyDown=e=>{switch(e.keyCode){case lO()("enter"):this.props.onEnter&&!this.state.isMenuOpen&&(this.props.onEnter(),e.stopPropagation())}},this.onMenuOpen=()=>{const{onMenuOpen:e}=this.props;e&&e(),this.setState({isMenuOpen:!0})},this.onMenuClose=()=>this.setState({isMenuOpen:!1}),this.handleChange=e=>{e&&e.page&&this.props.onSelect&&this.props.onSelect(),this.setState({value:e}),this.props.onChange(e?e.value:null)}}render(){const{value:e}=this.state,{options:t,intl:{formatMessage:s},link:n,isLoading:i,filterOption:r=Object(cw.b)(),customComponents:o={}}=this.props;return a.a.createElement(lw.a,{validationState:this.props.validationState||"default",validationMessage:this.props.validationMessage},a.a.createElement(uO.a,{isClearable:!0,isDisabled:i,filterOption:r,isLoading:i,onChange:this.handleChange,value:""!==n&&e?e:null,components:Dw({Option:Lw},o),options:t,placeholder:s(Pw.enterOrSelectConfluenceLink),validationState:this.props.validationState||"default",getOptionLabel:e=>e.page?e.page.href:e.value,maxMenuHeight:256,autoFocus:!0,menuPlacement:"auto",minMenuHeight:100,onKeyDown:this.onKeyDown,onMenuOpen:this.onMenuOpen,onMenuClose:this.onMenuClose,noOptionsMessage:()=>s(Pw.noOptionsMessage)}))}}function Nw(){return(Nw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}Rw.displayName="LinkSelect",Rw.defaultProps={isLoading:!1,link:void 0};var Uw=e=>{const{options:t}=e;return"not-enrolled"===Object(qt.getProductRequirementsDocDiscoveryFlag)()?a.a.createElement(Rw,e):a.a.createElement(iw.a,null,a.a.createElement(ow,{options:t,Option:Lw},({options:t,filterOption:s,components:n,onMenuOpen:i})=>a.a.createElement(Rw,Nw({},e,{options:t,filterOption:s,customComponents:n,onMenuOpen:i}))))};const Fw=Object(Nj.a)(W.a,{target:"eplslgz0"})("margin-left:",q.e,"px !important;"),Vw=$.default.div(["margin-top:","px;display:flex;justify-content:flex-end;"],q.e);class Kw extends n.Component{constructor(e){super(e),this.onChildContainerRefSet=e=>{this.childContainer=e},this.onChange=e=>{const{isInvalid:t,onInvalidLinkModified:s}=this.props,n=xj()(e),a=Or()(n);this.setState({isDisabled:a,link:n}),t&&s()},this.onSubmitClicked=()=>{this.onSubmit(),this.props.onSubmitClickAnalytics()},this.onCancelClicked=()=>{this.closeAndReset(),this.props.onCancelClickAnalytics()},this.onEnterPressed=()=>{this.onSubmit(),this.props.onEnterKeyPressedAnalytics()},this.onEscPressed=()=>{this.closeAndReset(),this.props.onEscapeKeyPressedAnalytics()},this.onSelect=e=>{this.setState({link:e,isDisabled:!1}),this.props.onSelectAnalytics()},this.childContainer=void 0,this.initialState={link:"",isDisabled:!0,showList:!1},this.state=this.initialState}componentDidMount(){Object(tr.a)(this.childContainer),this.props.requestRecentlyViewedPages()}componentDidUpdate(e){this.props.createLinkClickedCount!==e.createLinkClickedCount&&Object(tr.a)(this.childContainer),this.props.linkedPagesCount>e.linkedPagesCount&&!this.props.isLoading&&e.isLoading&&this.resetAndFocus()}onSubmit(){const{isDisabled:e,link:t}=this.state,{isLoading:s,onSubmit:n}=this.props;e||s||n(t)}closeAndReset(){this.props.isLoading||(this.reset(),this.props.onCancel())}resetAndFocus(){this.reset()}reset(){this.setState(this.initialState)}render(){const{intl:e,intl:{formatMessage:t},errorMessage:s,isInvalid:n,isLoading:i,recentlyViewedPages:r}=this.props,{link:o,isDisabled:c}=this.state,l=r.map(e=>({label:e.title,value:e.href,page:e}));return a.a.createElement("div",{ref:this.onChildContainerRefSet},a.a.createElement(K.a,{onEscape:this.onEscPressed},a.a.createElement(Uw,{options:l,onChange:this.onChange,intl:e,validationMessage:n?t(aw(s)):void 0,validationState:n?"error":"default",onSelect:this.props.onSelectAnalytics,onEnter:this.onEnterPressed,link:o,isLoading:i})),a.a.createElement(Vw,null,a.a.createElement(Fw,{appearance:"primary",onClick:this.onSubmitClicked,isDisabled:c,isLoading:i},t(sw.linkButton)),a.a.createElement(Fw,{appearance:"subtle",onClick:this.onCancelClicked},t(sw.cancelButton))))}}Kw.displayName="ConfluencePageCreateLinkView";var Bw=Object($t.a)([j.injectIntl,Object(is.a)("button",{onSubmitClickAnalytics:"clicked",onCancelClickAnalytics:"clicked"}),Object(is.a)("keyboardShortcut",{onEnterKeyPressedAnalytics:"pressed",onEscapeKeyPressedAnalytics:"pressed"}),Object(is.a)("confluencePagesCreateLinkView",{onSubmit:"onSubmit"}),Object(E.a)({onSubmitClickAnalytics:"linkConfluencePage",onCancelClickAnalytics:"cancelLinkConfluencePage",onEnterKeyPressedAnalytics:"linkConfluencePage",onEscapeKeyPressedAnalytics:"cancelLinkConfluencePage"}),Object(is.a)("recentlyVisitedPages",{onSelectAnalytics:"selected"}),Object(E.a)({onSelectAnalytics:"selectConfluencePage"}),Object(i.b)(e=>({linkedPagesCount:Object(lk.g)(e),errorMessage:Object(lk.b)(e),isInvalid:Object(lk.d)(e),isLoading:Object(lk.e)(e),createLinkClickedCount:Object(lk.a)(e),recentlyViewedPages:qk(e)}),e=>({onInvalidLinkModified:()=>e(Object(ok.b)()),onCancel:()=>e(Object(ok.i)()),onSubmit:(t,s)=>e(Object(ok.c)(Object(Li.i)(t),s)),requestRecentlyViewedPages:()=>e(Object($k.b)())}))])(Kw);const Ww=$.default.h3([""," margin:0;"],Ae.c.h200()),Hw=$.default.div(["margin:","px 0;padding-right:1px;"],q.e);class Gw extends n.Component{constructor(...e){super(...e),this.renderHeading=()=>{const{canLinkConfluencePage:e,onAddButtonClicked:t}=this.props;return(a.a.createElement(Ba.c,null,a.a.createElement(Ba.e,null,a.a.createElement(j.FormattedMessage,{id:"issue.details.confluence-pages.heading",defaultMessage:"Confluence pages"})),a.a.createElement(Ba.d,null,e&&this.hasLinkedPages()&&a.a.createElement(Gk,{onClick:t}))))},this.renderLinkedPagesIfAny=()=>this.hasAnyLinkedPageLoaded()&&this.props.linkedPages?a.a.createElement(Lk,{groupId:"linked-confluence-pages",pages:this.props.linkedPages,onClick:this.props.onLinkedPageClicked,onAuthenticateApplink:this.props.onAuthenticateApplink,onDeleteConfluencePageLink:this.props.onDeleteConfluencePageLink}):null,this.renderMentionedPagesIfAny=()=>this.hasAnyMentionedPageLoaded()&&this.props.mentionedPages?a.a.createElement(Lk,{groupId:"mentioned-confluence-pages",pages:this.props.mentionedPages,onClick:this.props.onMentionedPageClicked,onAuthenticateApplink:this.props.onAuthenticateApplink,onDeleteConfluencePageLink:this.props.onDeleteConfluencePageLink}):null}shouldShowConfluencePages(){return this.props.isCreateLinkedPageOpened||this.hasLinkedPages()||this.hasMentionedPages()}hasLinkedPages(){return this.props.linkedPages&&this.props.linkedPages.length>0}hasMentionedPages(){return this.props.mentionedPages&&this.props.mentionedPages.length>0}hasAnyLinkedPageLoaded(){return this.props.linkedPages&&this.props.linkedPages.length>0}hasAnyMentionedPageLoaded(){return this.props.mentionedPages&&this.props.mentionedPages.length>0}renderLinkedPages(){return a.a.createElement(Hw,null,this.props.linkedPages?this.renderLinkedPagesIfAny():a.a.createElement(Kk,{itemCount:this.props.linkedPagesCachedCount}))}renderMentionedPages(){return a.a.createElement(Hw,null,a.a.createElement(Ww,null,a.a.createElement(j.FormattedMessage,{id:"issue.details.confluence-pages.mentioned-on",defaultMessage:"mentioned on"})),this.props.mentionedPages?this.renderMentionedPagesIfAny():a.a.createElement(Kk,{itemCount:this.props.mentionedPagesCachedCount}))}renderCreateLinkedPage(){return this.props.isCreateLinkedPageOpened?a.a.createElement(Bw,null):null}renderConfluencePageFragment(){return a.a.createElement(a.a.Fragment,null,this.renderHeading(),this.hasLinkedPages()&&this.renderLinkedPages(),this.hasMentionedPages()&&this.renderMentionedPages(),this.renderCreateLinkedPage())}render(){return this.props.isConfluencePageLinksEnabled&&this.shouldShowConfluencePages()?this.renderConfluencePageFragment():null}}Gw.displayName="ConfluencePagesView",Gw.defaultProps={isConfluencePageLinksEnabled:!1,linkedPagesCachedCount:0,mentionedPagesCachedCount:0};var $w=Object($t.a)([Object(is.a)("ItemLineCardGroup",{onMentionedPageClicked:"clicked",onLinkedPageClicked:"clicked"}),Object(E.a)({onMentionedPageClicked:"MentionedConfluencePage",onLinkedPageClicked:"LinkedConfluencePage"}),Object(is.a)("DeleteConfluencePage",{onDeleteConfluencePageLink:"clicked"}),Object(E.a)({onDeleteConfluencePageLink:e=>({name:"onDeleteConfluencePageLink",globalId:e})}),Object(i.b)(e=>({isCreateLinkedPageOpened:Object(lk.f)(e),linkedPages:Object(lk.h)(e),linkedPagesCachedCount:Object(lk.g)(e),mentionedPages:Object(lk.j)(e),mentionedPagesCachedCount:Object(lk.i)(e),isConfluencePageLinksEnabled:Object(lk.c)(e),canLinkConfluencePage:Object(ck.a)(e)}),e=>({onAuthenticateApplink:t=>e(Object(rk.a)(t)),onDeleteConfluencePageLink:t=>e(Object(ok.f)(t)),onAddButtonClicked:()=>e(Object(ok.h)())}))])(Gw),qw=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js");const zw=Object(yn.createSelector)(xl.c,e=>!!e.find(xl.b)),Yw=Object(yn.createSelector)(qw.g,zw,C.u,C.q,({canCreateIssuesInClassicProjectEpic:e},t,s,n)=>e&&!(!!t&&(s||n)));var Qw=Object(j.defineMessages)({title:{id:"issue.epic-issues-title",defaultMessage:"Issues in this epic"}});function Jw(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Zw(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Jw(Object(s),!0).forEach((function(t){Xw(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Jw(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Xw(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function eS(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}var tS=Object($t.a)([Object(i.b)(e=>({childIssuesPanelType:"classicProjectEpicChildren",baseUrl:Object(C.g)(e),locale:Object(C.D)(e),user:Object(C.a)(e),projectId:Object(T.D)(e),projectType:Object(T.G)(e),parentId:Object(C.A)(e),parentKey:Object(C.B)(e),epicLinkFieldKey:Object(T.f)(e),issueTypes:Object(xl.c)(e),issues:Object(Ng.a)(e),messages:Qw,quickAddClickCount:Lg(e),supportsIssueCreation:Yw(e),isIssueViewComplete:Object(T.n)(e),onNavigateToNewIssueStateProp:Object(C.G)(e),fetchIssueTypesStatus:Object(xl.a)(e)}),e=>({onChange:t=>{switch(t.type){case Ug.CHILD_ISSUE_ADDED:e(Pg(t.meta.childIssue))}},onAddChildClick:()=>e(_g()),prefetchChildIssues:t=>e(Object(Dg.a)({issueIds:t})),onNavigateToNewIssueDispatchProp:({fromIssueKey:t,toIssueKey:s})=>{__SPA__||e(Object(xg.c)({fromIssueKey:t,toIssueKey:s}))}}),(e,t)=>{const{onNavigateToNewIssueStateProp:s}=e,n=eS(e,["onNavigateToNewIssueStateProp"]),{onNavigateToNewIssueDispatchProp:a}=t,i=eS(t,["onNavigateToNewIssueDispatchProp"]);return Zw(Zw(Zw({},n),i),{},{onNavigateToNewIssue:({fromIssueKey:e,toIssueKey:t})=>{s&&s({fromIssueKey:e,toIssueKey:t}),a&&a({fromIssueKey:e,toIssueKey:t})}})})])(Xv),sS=s("./src/packages/platform/utils/constants/src/project-types.js"),nS=s("./src/packages/common-legacy-do-not-add-anything-new/src/navigation/with-link-actions/index.js"),aS=s("./src/packages/issue/issue-view/src/actions/issue-links-actions.js"),iS=s("./src/packages/issue/issue-view/src/actions/remote-issue-links-actions.js"),rS=s("./src/packages/issue/issue-view/src/selectors/issue-links-selector.js"),oS=s("./src/packages/issue/issue-view/src/selectors/issue-links-type-selector.js"),cS=s("./node_modules/lodash/get.js"),lS=s.n(cS),uS=s("./src/packages/common-legacy-do-not-add-anything-new/src/navigation/iframe-redirect/index.js"),dS=s("./src/packages/issue/issue-view/src/actions/fetch-jira-app-links-actions.js"),pS=s("./src/packages/issue/issue-view/src/selectors/issue-actions-permissions-selector.js");const mS=Object(yn.createSelector)(T.e,e=>e.jiraAppLinks||{status:"NOT_LOADED",remoteLinks:[]}),bS=Object(yn.createSelector)(mS,e=>e.status),fS=Object(yn.createSelector)(rS.f,pS.e,(e,t)=>e&&t),gS=Object(yn.createSelector)(mS,e=>e.remoteLinks);var hS=s("./node_modules/@atlaskit/button--current/dist/es2019/components/ButtonGroup.js");const yS=/^(([A-Z][A-Z0-9]+)-([0-9]+))($|\?.*)/,OS=()=>""!==window.location.port?Object(Li.b)(`${window.location.protocol}//${window.location.hostname}:${window.location.port}`):Object(Li.b)(`${window.location.protocol}//${window.location.hostname}`);var jS=(e,t)=>{let s=e;if(void 0===s||void 0===t)return t||"";if(s.endsWith("/")||(s+="/"),s+="browse/",0!==t.indexOf(s))return t;const n=t.slice(s.length).match(yS);return null===n?t:n[1]||""};const ES=$.default.div(["min-width:200px;"]),vS=e=>{const{selectItems:t,selectedItem:s,onChange:n}=e;return Object(qt.isRemoteIssueLinksEnabled)()?a.a.createElement(mj.a,{options:t,defaultValue:s,styles:pO.f,onChange:n}):a.a.createElement(ES,null,a.a.createElement(mj.a,{options:t,defaultValue:s,styles:pO.f,onChange:n}))};vS.defaultProps={selectedItem:null};var kS=s("./src/packages/issue/issue-view/src/views/common/issue-line-card/assets/authKey.svg"),wS=s.n(kS);const SS=Object(j.defineMessages)({remoteLinkAuthText:{id:"issues.issue-links.jira-app-link-option.auth-required",defaultMessage:"Authenticate to search"}}),IS=$.default.span(["margin-right:10px;"]),CS=({value:e,intl:t},s)=>e.fullObject.requireCredentials?a.a.createElement(he.a,{content:e.fullObject.baseUrl,position:"bottom"},a.a.createElement("p",null,a.a.createElement(IS,null,e.label),a.a.createElement(W.a,{spacing:"none",appearance:"link",onClick:(t,n)=>((t,n)=>{t.preventDefault(),void 0!==s.onAuthenticateAppLink&&(s.onAuthenticateAppLink(e.fullObject.authUrl,n),n&&Object(za.h)(n,"JiraApplinkSelectAuthentication",{appLinkId:e.fullObject.id}))})(t,n),iconBefore:a.a.createElement(kr.a,{size:"small",label:""})},a.a.createElement("span",null,t.formatMessage(SS.remoteLinkAuthText))))):a.a.createElement(he.a,{content:e.fullObject.baseUrl,position:"bottom"},a.a.createElement(IS,null,e.label));CS.displayName="JiraAppLinkOption";var TS=CS;const PS=Object(j.defineMessages)({remoteLinkAuthText:{id:"issues.issue-links.jira-app-link.auth-required",defaultMessage:"Authenticate to select"}}),_S=Object(b.a)({onMenuOpen:{action:"opened",component:"select"},onMenuClose:{action:"closed",component:"select"}})(mj.a);function xS(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function DS(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?xS(Object(s),!0).forEach((function(t){AS(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):xS(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function AS(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const MS=DS(DS({},pO.f),{},{menu:(e,t)=>DS(DS({},pO.f.menu?pO.f.menu(e,t):{}),{},{minWidth:t.selectProps.containerWidth||"auto"}),option:(...e)=>DS(DS({},pO.f.option?pO.f.option(...e):{}),{},{overflow:"initial"})});class LS extends n.Component{handleClick(e,t,s){e.preventDefault(),void 0!==this.props.onAuthenticateAppLink&&(this.props.onAuthenticateAppLink(t.fullObject.authUrl,s),s&&Object(za.h)(s,"JiraApplinkSelectAuthentication",{appLinkId:t.fullObject.id}))}formatOptionLabel(e){return a.a.createElement(TS,{value:e,intl:this.props.intl,onAuthenticateAppLink:this.props.onAuthenticateAppLink})}formatOptionLabelLegacy(e){const{baseUrl:t}=e.fullObject;return e.fullObject.requireCredentials?a.a.createElement(he.a,{content:t,position:"bottom"},a.a.createElement("p",null,e.label,"\xa0",a.a.createElement(W.a,{appearance:"link",onClick:(t,s)=>this.handleClick(t,e,s)},a.a.createElement(sp.a,{url:wS.a}),"\xa0",this.props.intl.formatMessage(PS.remoteLinkAuthText)))):a.a.createElement(he.a,{content:t,position:"bottom"},a.a.createElement("p",null,e.label))}getNumAppLinksRequiringAuth(){return this.props.selectItems.filter(e=>e.fullObject.requireCredentials).length}sendMenuAnalytics(e,t){e&&Object(za.h)(e,`issueView.JiraAppLinksSelect ${t}`,"JiraAppLinksSelect",{numAppLinks:this.props.selectItems.length-1,numAppLinksRequiringAuth:this.getNumAppLinksRequiringAuth()})}onChange(e,t){this.props.onChange(e),t&&Object(za.h)(t,"issueView.JiraAppLinksSelect changed","JiraAppLinksSelect",{appLinkId:e.fullObject.id})}render(){const{selectItems:e,defaultValue:t,containerWidth:s}=this.props;return(a.a.createElement(M.a,null,a.a.createElement(L.a,{packageName:"jiraIssueView",id:"JiraAppLinksSelect"},a.a.createElement(_S,{options:e,defaultValue:t,onChange:(e,t,s)=>this.onChange(e,s),formatOptionLabel:e=>Object(qt.isUIUpdateForRemoteIssueLinksEnabled)()?this.formatOptionLabel(e):this.formatOptionLabelLegacy(e),isOptionDisabled:e=>e.fullObject.requireCredentials,styles:MS,onMenuOpen:e=>this.sendMenuAnalytics(e,"opened"),onMenuClose:e=>this.sendMenuAnalytics(e,"closed"),containerWidth:s}),a.a.createElement(Ws.a,{onMount:t=>{t&&Object(za.h)(t,"issueView.JiraAppLinksSelect mounted","JiraAppLinksSelect",{numAppLinks:e.length-1,numAppLinksRequiringAuth:this.getNumAppLinksRequiringAuth()})}}))))}}LS.displayName="JiraAppLinksSelect";const RS=Object(j.injectIntl)(LS);var NS=tt()([Object(i.b)(()=>({}),e=>({onAuthenticateAppLink:(t,s)=>e(Object(rk.a)(t,s))}))])(RS);const US={label:"Local",value:"local",fullObject:{id:"local",name:"Local",baseUrl:OS(),authUrl:Object(Li.i)(""),requireCredentials:!1}};var FS=s("./node_modules/lodash/keys.js"),VS=s.n(FS),KS=s("./src/packages/platform/utils/constants/src/issue-link-types.js"),BS=s("./src/packages/platform/observability/analytics-web-react/src/utils/fire-ui-event.js"),WS=Object(j.defineMessages)({createLinkedIssueButtonLabel:{id:"issue.linked-issue-create.button-label",defaultMessage:"Create linked issue"},createLinkedIssueDialogTitle:{id:"issue.linked-issue-create.dialog-title",defaultMessage:"Create linked issue"}});function HS(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function GS(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const $S=(e,t)=>{let s={};const n=ns()(lS()(e,["fields","issuelinks"]),e=>lS()(e.outwardIssue||e.inwardIssue,"id")===t);if(void 0!==n){const e=(e=>e.outwardIssue?"INWARD":"OUTWARD")(n);s={issueLink:{id:n.id,direction:e,linkType:{id:lS()(n,["type","id"],""),label:"INWARD"===e?lS()(n,["type","inward"],""):lS()(n,["type","outward"],"")}}}}return function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?HS(Object(s),!0).forEach((function(t){GS(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):HS(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({id:Object(Li.j)(e.id),key:Object(Li.l)(e.key),summary:lS()(e,["fields","summary"],""),issueTypeIconUrl:lS()(e,["fields","issuetype","iconUrl"],"")},s)};const qS="issue.views.issue-base-content.issue-links.add.create-linked-issue-button.view";class zS extends n.Component{constructor(...e){super(...e),this.showCreateLinkedIssueDialog=async()=>{const{baseUrl:e,sourceIssueId:t,sourceIssueKey:s,onLinkedIssueCreated:n}=this.props;this.showLoadingIndicator();try{const a=await Object(Dj.a)({name:"wrm/require"});await new Promise(e=>{a("wr!com.atlassian.jira.jira-quick-edit-plugin:create-linked-issue",e)}),(await Object(Dj.a)({name:"quick-edit/create-linked-issue/create-linked-issue-dialog"})).show({sourceIssueId:t,sourceIssueKey:s}).getQuickForm().bind("issueCreated",(s,{createdIssueDetails:a})=>{n(((e,t,s)=>{const n=$S(e,t);if(void 0===n.issueLink)return{issueLinks:{},linkedIssues:{}};const{issueLink:a}=n;return{issueLinks:{[`${a.id}`]:{id:a.id,linkedIssueKey:n.key,direction:a.direction,typeName:a.linkType.label,typeId:a.linkType.id}},linkedIssues:{[`${n.key}`]:{id:n.id,issueKey:n.key,issueLink:Object(ry.g)(s,n.key),issueSummary:n.summary,issueTypeIconUrl:n.issueTypeIconUrl}}}})(a,t,e))})}catch(a){this.hideLoadingIndicator(),y.a.safeError(qS,a)}},this.onCreateLinkedIssueClick=(e,t)=>{Object(BS.a)(t,{name:"createLinkedIssue"}),this.showCreateLinkedIssueDialog()},this.showLoadingIndicator=async()=>{try{(await Object(Dj.a)({name:"quick-edit/util/loading-indicator"})).showLoadingIndicator()}catch(e){y.a.safeError(qS,e)}},this.hideLoadingIndicator=async()=>{try{(await Object(Dj.a)({name:"quick-edit/util/loading-indicator"})).hideLoadingIndicator()}catch(e){y.a.safeError(qS,e)}}}render(){const{intl:{formatMessage:e}}=this.props;return(a.a.createElement(W.a,{spacing:"compact",onClick:this.onCreateLinkedIssueClick,appearance:"link",iconBefore:a.a.createElement(EO.a,{size:"small",label:e(WS.createLinkedIssueButtonLabel)})},e(WS.createLinkedIssueButtonLabel)))}}zS.displayName="CreateLinkedIssueButton";var YS=Object($t.a)([j.injectIntl,Object(is.a)("createLinkedIssueButton",{onLinkedIssueCreated:"created"}),Object(i.b)(e=>({baseUrl:Object(C.g)(e),sourceIssueKey:Object(C.B)(e),sourceIssueId:Object(Li.j)(String(Object(C.A)(e)))}),e=>({onLinkedIssueCreated:(t,s)=>{e(Object(aS.c)(t)),e(Object(aS.b)()),(({issueLinks:e,linkedIssues:t},s)=>{const n=VS()(e)[0];if(void 0!==n){const a=e[n],i={action:"created",actionSubjectId:t[a.linkedIssueKey].id,attributes:{linkTypeName:Object(KS.a)(a.typeName),linkTypeId:a.typeId,issueLinkId:n}};Object(f.a)(s,i)}})(t,s)}}))])(zS);const QS=/^([A-Z][A-Z0-9]+)-([0-9]+)$/i,JS=(e,t)=>({sections:s=[]}={})=>{const{baseUrl:a=Object(Li.b)(""),id:i}=t||{};return s.map(e=>e.issues).filter(e=>!!e).reduce((t,s)=>t.concat(s.map(t=>({content:`${t.key} ${t.summaryText}`,value:t.key,id:t.id?t.id.toString():"",elemBefore:Object(n.createElement)("img",{src:`${a}${t.img}`,width:16,height:16}),fullObject:t,filterValues:[e],iconUrl:`${a}${t.img}`,appLinkId:i}))),[]).reduce((e,t)=>e.findIndex(e=>e.value===t.value)<0?[...e,t]:e,[])},ZS=(e,t,s,n)=>(e=>{if(e){const t=QS.exec(e);return!(!t||3!==t.length)}return!1})(s)?((e,t,s,n)=>{const a=void 0===n?Object(ry.a)(e,t,s):Object(ry.l)(e,s,n.id);return Object(hy.a)(a)})(e,t,Object(Li.l)(s),n).map(JS(s,n)).catch(()=>Vh.Observable.of([])):Vh.Observable.of([]);var XS=s("./src/packages/issue/issue-view/src/views/field/select/common/custom-format/filter-option/index.js"),eI=Object(j.defineMessages)({searchPlaceholder:{id:"issue.issue-links-search-placeholder",defaultMessage:"Search for issues"},openIssues:{id:"issue.issue-links-search-open-issues",defaultMessage:"Open Issues"},exactKey:{id:"issue.issue-links-exact-key",defaultMessage:"Exact key"},selfLinkInvalidIssue:{id:"issue.issue-link-invalid-self-link",defaultMessage:"You cannot link an issue to itself"},singleInvalidIssue:{id:"issue.issue-link-invalid-single",defaultMessage:"We can't find an issue with the key"},multipleInvalidIssues:{id:"issue.issue-link-invalid-plural",defaultMessage:"We can't find issues with the keys"},noHistoryResults:{id:"issue.issue-link-no-history-results",defaultMessage:"Type to search for an issue summary or key"}});class tI extends n.Component{constructor(...e){super(...e),this.getErrorMessage=(e,t,s)=>s.includes(e)?`${t.formatMessage(eI.selfLinkInvalidIssue)} (${e})`:1===s.length?`${t.formatMessage(eI.singleInvalidIssue)} ${s[0]}`:s.length>1?`${t.formatMessage(eI.multipleInvalidIssues)} ${s.join(", ")}`:void 0,this.fetchSuggestions=e=>{const{baseUrl:t,remoteAppLink:s,issueKey:n,intl:a}=this.props,i=a.formatMessage(eI.openIssues),r=a.formatMessage(eI.noHistoryResults);return((e,t,s,n)=>{const a=void 0===n?Object(ry.q)(e,t,s):Object(ry.m)(e,s,n.id);return Object(hy.a)(a).map(JS(s,n))})(t,n,e,s).map(e=>e.length?[{heading:i,items:e}]:[{items:[{content:r,isDisabled:!0,value:""}]}]).toPromise()},this.onChange=(e,t)=>{null!=t&&null!=t.action&&("select-option"===t.action?Object(zi.c)().markStartOfInteraction({key:nr.a.ISSUE_LINKS.TIME_TO_REFLECT_SELECTED_ISSUE,cancelExisting:!0}):"remove-value"===t.action&&Object(zi.c)().markStartOfInteraction({key:nr.a.ISSUE_LINKS.TIME_TO_REFLECT_REMOVED_ISSUE,cancelExisting:!0})),this.props.onChange(e)},this.onDataRequest=({isInitial:e})=>{e||Object(zi.c)().markStartOfInteraction({key:nr.a.ISSUE_LINKS.TIME_TO_REFLECT_INPUT_RESULT,cancelExisting:!0})},this.onDataLoaded=({isInitial:e})=>{e||Object(zi.c)().markTimeToFinishTask({key:nr.a.ISSUE_LINKS.TIME_TO_REFLECT_INPUT_RESULT})},this.stripQueryValueToIssueKey=e=>{const{remoteAppLink:t}=this.props,s=void 0===t?OS():t.baseUrl;return jS(s,e)},this.filterIssueOptions=(e,t)=>this.filterIssueSuggestionByAppLink(e)&&Object(XS.a)(e,t),this.filterIssueSuggestionByAppLink=e=>{if(Boolean(e.data&&e.data.fullObject)){var t,s;return(null===(t=e.data)||void 0===t?void 0:t.appLinkId)===(null===(s=this.props.remoteAppLink)||void 0===s?void 0:s.id)}return!0}}componentDidUpdate(e){const t=this.props.value.length,s=e.value.length;s<t?Object(zi.c)().markTimeToFinishTask({key:nr.a.ISSUE_LINKS.TIME_TO_REFLECT_SELECTED_ISSUE}):s>t&&Object(zi.c)().markTimeToFinishTask({key:nr.a.ISSUE_LINKS.TIME_TO_REFLECT_REMOVED_ISSUE})}render(){const{value:e,issueKey:t,intl:s,invalidSelections:n,remoteAppLink:i}=this.props,r={isRemote:void 0!==i};return a.a.createElement(fj.a,{fieldId:"issue-link-search",classNamePrefix:"issue-links-search",value:e,fetchSuggestions:this.fetchSuggestions,onChangeMulti:this.onChange,canCreateNewItem:!0,formatCreateLabel:e=>`${e} (${s.formatMessage(eI.exactKey)})`,placeholder:s.formatMessage(eI.searchPlaceholder),invalidMessage:this.getErrorMessage(t,s,n),changeQueryValue:this.stripQueryValueToIssueKey,isMulti:!0,autoFocus:!0,errorMessagePosition:"bottom",onDataLoaded:this.onDataLoaded,onDataRequest:this.onDataRequest,inputId:"issue-link-search",additionalAnalyticsProps:r,filterOption:this.filterIssueOptions})}}tI.displayName="IssueSearchSelect";var sI=Object(j.injectIntl)(tI);const nI=$.default.div(["display:flex;flex-direction:",";justify-content:space-around;align-content:stretch;> *{margin-top:","px;}>:not(:last-child){margin-right:",";}"],({isCompact:e})=>e?"column":"row",q.e,({isCompact:e})=>e?"0":`${q.e}px`),aI=$.default.div(["flex:1;flex-basis:auto;"]),iI=$.default.div(["margin-top:","px;display:flex;flex-wrap:wrap;justify-content:flex-end;margin-left:auto;"],q.e),rI=$.default.div(["flex-grow:1;margin-left:-","px;"],1.5*q.e),oI=$.default.div(["max-width:",";width:",";min-width:","px;"],({isCompact:e})=>e?"none":`${25*q.e}px`,({isCompact:e})=>e?"100%":"27%",17*q.e);function cI(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function lI(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?cI(Object(s),!0).forEach((function(t){uI(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):cI(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function uI(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const dI=(e,t,s,n)=>({issueLinks:{[e]:{id:e,linkedIssueKey:s.key,direction:t.direction,typeName:t.label,typeId:t.id}},linkedIssues:{[`${s.key}`]:{id:s.key,issueKey:s.key,issueId:null!==s.id&&void 0!==s.id?s.id.toString():null,issueLink:Object(ry.g)(n,s.key),issueSummary:s.summaryText?s.summaryText:"",issueTypeIconUrl:s.img?s.img:""}}}),pI=(e,t)=>Object(Li.s)(`appId=${e}&issueId=${t}`);function mI(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function bI(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?mI(Object(s),!0).forEach((function(t){fI(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):mI(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function fI(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const gI={newIssueLinks:[],isDisabled:!0,invalidSelections:[]};class hI extends n.Component{constructor(e){super(e),this.getInitialState=()=>bI({issueLinkType:this.transformIssueLinkTypesForSelect()[0],jiraAppLink:US,createReciprocalLink:!1},gI),this.isLocalJira=e=>e.value===US.value,this.getRemoteAppLink=()=>{const{jiraAppLink:e}=this.state;return this.isLocalJira(e)?void 0:e.fullObject},this.onIssueLinkTypeChange=e=>this.setState({issueLinkType:e}),this.onJiraAppLinkChange=e=>this.setState(bI({jiraAppLink:e,createReciprocalLink:!this.isLocalJira(e)},gI)),this.onIssueSearchChangeWithUserInput=e=>{let t=!1;const s=[],n=this.state.jiraAppLink.fullObject.baseUrl,a=this.updateInvalidSelections(e),i=e.map(e=>{const i=jS(n,e.value),r=bI(bI({},e),{},{content:i,value:i});return r.fullObject||a&&a.includes(r.value)||(t=!0,s.push(()=>this.query$.next({queryIssueKey:r.content,remoteAppLink:this.getRemoteAppLink()}))),bI(bI({},r),{},{tag:{elemBefore:r.elemBefore}})}),r=!(!t&&Or()(a)&&!Or()(i));this.setState({newIssueLinks:i,isDisabled:r,invalidSelections:a}),s.map(e=>e())},this.onIssueSearchChange=e=>{this.onIssueSearchChangeWithUserInput(e)},this.onSave=(e,t)=>{const{issueLinkType:s,newIssueLinks:n,jiraAppLink:a,createReciprocalLink:i}=this.state,{issueLinks:r}=this.props,o=this.isLocalJira(a);Object(za.h)(t,"addLinkedIssueButton",{isRemote:!o,newLinkedIssueIds:n.map(e=>e.id)}),s&&n&&n.length>0&&(Object(zi.c)().markStartOfInteraction({key:nr.a.ISSUE_LINKS.TIME_TO_RENDER_LINKED_ISSUE}),o?this.saveLocalIssueLink(s,n,r):this.saveRemoteIssueLink(s,n,a,r,Object(qt.isRemoteIssueReciprocalLinkEnabled)()?i:void 0))},this.saveLocalIssueLink=(e,t,s)=>{const{createAnalyticsEvent:n}=this.props,a=e.fullObject&&e.fullObject.label,i=(s&&s[a]||[]).filter(e=>!e.isRemote).map(e=>e.linkedIssueKey);t.map(e=>e.fullObject?e:bI(bI({},e),{},{fullObject:{key:e.value}})).filter(e=>!i.includes(e.fullObject.key)).forEach((t,s)=>{const a=`OPTIMISTIC_LINKED_ISSUE_${Date.now()}_${s}`;this.props.onAdd({optimisticId:a,linkedIssueKey:t.fullObject.key,issueLinkType:e.fullObject,issueLinks:dI(a,e.fullObject,t.fullObject,this.props.baseUrl)},Object(qt.isRemoteIssueLinksEnabled)()?n({action:"succeeded"}):null)}),this.props.onClose()},this.saveRemoteIssueLink=(e,t,s,n,a)=>{const{createAnalyticsEvent:i}=this.props,r=n?Object.keys(n).reduce((e,t)=>[...e,...n[t]],[]).filter(e=>e.isRemote).map(e=>e.globalId):[];t.filter(e=>e.fullObject).map((t,n)=>((e,t,s,n,a)=>{const i=`OPTIMISTIC_LINKED_ISSUE_${Date.now()}_${e}`,{fullObject:{id:r,key:o,summaryText:c},iconUrl:l}=t,{id:u,name:d,baseUrl:p}=s,m={id:i,applicationType:"com.atlassian.jira",applicationName:d,issueLinkUrl:Object(ry.g)(p,o),relationship:n.label,summary:c,iconUrl:Object(ry.r)(l),issueKey:o,createReciprocalLink:a};if(!r)return lI(lI({},m),{},{appLinkId:u,payloadType:"WITHOUT_ISSUE_ID"});const b=Object(Li.j)(r.toString());return lI(lI({},m),{},{globalId:pI(u,b),remoteIssueId:b,payloadType:"WITH_ISSUE_ID"})})(n,t,s.fullObject,e,a)).filter(e=>!e.globalId||!r.includes(e.globalId)).forEach(e=>{this.props.onAddRemote(e,i({action:"succeeded",isRemote:!0}))}),this.props.onClose()},this.updateInvalidSelections=e=>{const t=e?e.map(e=>e.value):[];return this.state.invalidSelections.filter(e=>t.includes(e))},this.handleUpdate=({issue:e,results:t})=>{const s=t.map(e=>bI(bI({},e),{},{tag:{elemBefore:e.elemBefore}}))[0];s?this.setState(t=>{const n=t.newIssueLinks.map(e=>e.value.toLowerCase()===s.value.toLowerCase()?s:e),a=t.invalidSelections.filter(t=>t!==e);return{newIssueLinks:n,isDisabled:a.length>0,invalidSelections:a}}):this.setState(t=>({newIssueLinks:t.newIssueLinks.slice(),isDisabled:!0,invalidSelections:t.invalidSelections.concat(e)}))},this.transformIssueLinkTypesForSelect=()=>this.props.issueLinkTypes.map(e=>({label:e.label,value:e.id+e.direction,fullObject:e})),this.transformJiraAppLinksForSelect=()=>{const e=this.props.jiraAppLinks.map(e=>({label:`${e.name}`,value:e.id,fullObject:e}));return[US,...e]},this.subscription=void 0,this.query$=void 0,this.addLinkContainer=void 0,this.renderLoading=()=>a.a.createElement(H.a,null),this.state=this.getInitialState(),this.query$=new Vh.Subject,this.subscription=this.query$.flatMap(({queryIssueKey:t,remoteAppLink:s})=>ZS(e.baseUrl,e.issueKey,t,s).map(e=>({issue:t,results:e}))).subscribe(this.handleUpdate)}componentDidMount(){this.addLinkContainer&&Object(tr.a)(this.addLinkContainer),!this.props.canLinkRemoteIssues||"NOT_LOADED"!==this.props.jiraAppLinksFetchStatus&&"ERROR"!==this.props.jiraAppLinksFetchStatus||this.props.fetchJiraAppLinks()}componentDidUpdate(e){e.quickAddClickedCount!==this.props.quickAddClickedCount&&Object(tr.a)(this.addLinkContainer)}componentWillUnmount(){this.subscription.unsubscribe()}renderFullAddForm(){const e=this.transformIssueLinkTypesForSelect(),t=this.transformJiraAppLinksForSelect(),{baseUrl:s,issueKey:n,containerWidth:i,onClose:r,canCreateLinkedIssue:o,canLinkRemoteIssues:c}=this.props,{issueLinkType:l,newIssueLinks:u,isDisabled:d,invalidSelections:p}=this.state,m=i&&i<=480,b=t.length>1;return a.a.createElement("div",{ref:e=>{this.addLinkContainer=e}},a.a.createElement(nI,{isCompact:m},c&&b&&a.a.createElement(bj.a,null,a.a.createElement(oI,{isCompact:m},a.a.createElement(NS,{selectItems:t,defaultValue:US,onChange:this.onJiraAppLinkChange,containerWidth:i}))),a.a.createElement(bj.a,null,a.a.createElement(oI,{isCompact:m},a.a.createElement(vS,{selectItems:e,selectedItem:l,onChange:this.onIssueLinkTypeChange}))),a.a.createElement(aI,null,a.a.createElement(sI,{value:u,baseUrl:s,issueKey:n,onChange:this.onIssueSearchChange,invalidSelections:p,remoteAppLink:this.getRemoteAppLink()}))),a.a.createElement(iI,null,o&&a.a.createElement(rI,{"data-test-id":"issue.issue-view.views.issue-base.content.issue-links.add.issue-links-add-view.create-linked-issue"},a.a.createElement(YS,null)),a.a.createElement(hS.a,null,a.a.createElement("div",{"data-test-id":"issue.issue-view.views.issue-base.content.issue-links.add.issue-links-add-view.link-button"},a.a.createElement(W.a,{appearance:"primary",onClick:this.onSave,isDisabled:d},a.a.createElement(j.FormattedMessage,{id:"issue.issue-links-add-button-label",defaultMessage:"Link"}))),a.a.createElement(W.a,{appearance:"subtle",onClick:r},a.a.createElement(j.FormattedMessage,{id:"issue.issue-links-cancel-button-label",defaultMessage:"Cancel"})))))}render(){return!this.props.canLinkRemoteIssues||"LOADING"!==this.props.jiraAppLinksFetchStatus&&"NOT_LOADED"!==this.props.jiraAppLinksFetchStatus?this.renderFullAddForm():this.renderLoading()}}hI.displayName="AddIssueLinkView",hI.displayName="AddIssueLinkView",hI.defaultProps={issueLinks:null,quickAddClickedCount:0,containerWidth:null,onAdd:o.a,onAddRemote:o.a,onClose:o.a};var yI=Object($t.a)([Object(b.a)({onAdd:{action:"added"},onAddRemote:{action:"added",isRemote:!0}}),Object(i.b)(e=>({quickAddClickedCount:Object(rS.m)(e),canCreateLinkedIssue:Object(rS.a)(e),canLinkRemoteIssues:fS(e),jiraAppLinksFetchStatus:bS(e),jiraAppLinks:gS(e)}),e=>({onAdd:(t,s,n)=>e(Object(aS.o)(t,s,n)),onAddRemote:(t,s,n)=>e(Object(iS.f)(t,s,n)),fetchJiraAppLinks:()=>e(Object(dS.a)())})),Fa.a])(hI),OI=Object(j.defineMessages)({createLinkedIssueButtonLabel:{id:"issue.linked-issue-create.button-label",defaultMessage:"Create linked issue"},createLinkedIssueDialogTitle:{id:"issue.linked-issue-create.dialog-title",defaultMessage:"Create linked issue"}});function jI(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function EI(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const vI=(e,t)=>{let s={};const n=ns()(lS()(e,["fields","issuelinks"]),e=>lS()(e.outwardIssue||e.inwardIssue,"id")===t);if(void 0!==n){const e=(e=>e.outwardIssue?"INWARD":"OUTWARD")(n);s={issueLink:{id:n.id,direction:e,linkType:{id:lS()(n,["type","id"],""),label:"INWARD"===e?lS()(n,["type","inward"],""):lS()(n,["type","outward"],"")}}}}return function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?jI(Object(s),!0).forEach((function(t){EI(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):jI(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({id:Object(Li.j)(e.id),key:Object(Li.l)(e.key),summary:lS()(e,["fields","summary"],""),issueTypeIconUrl:lS()(e,["fields","issuetype","iconUrl"],"")},s)};const kI="issue.views.issue-base-content.issue-links.add.create-linked-issue-button.view";class wI extends n.Component{constructor(...e){super(...e),this.showCreateLinkedIssueDialog=async()=>{const{baseUrl:e,sourceIssueId:t,sourceIssueKey:s,onLinkedIssueCreated:n}=this.props;this.showLoadingIndicator();try{const a=await Object(Dj.a)({name:"wrm/require"});await new Promise(e=>{a("wr!com.atlassian.jira.jira-quick-edit-plugin:create-linked-issue",e)}),(await Object(Dj.a)({name:"quick-edit/create-linked-issue/create-linked-issue-dialog"})).show({sourceIssueId:t,sourceIssueKey:s}).getQuickForm().bind("issueCreated",(s,{createdIssueDetails:a})=>{n(((e,t,s)=>{const n=vI(e,t);if(void 0===n.issueLink)return{issueLinks:{},linkedIssues:{}};const{issueLink:a}=n;return{issueLinks:{[`${a.id}`]:{id:a.id,linkedIssueKey:n.key,direction:a.direction,typeName:a.linkType.label,typeId:a.linkType.id}},linkedIssues:{[`${n.key}`]:{id:n.id,issueKey:n.key,issueLink:Object(ry.g)(s,n.key),issueSummary:n.summary,issueTypeIconUrl:n.issueTypeIconUrl}}}})(a,t,e))})}catch(a){this.hideLoadingIndicator(),y.a.safeError(kI,a)}},this.onCreateLinkedIssueClick=(e,t)=>{Object(BS.a)(t,{name:"createLinkedIssue"}),this.showCreateLinkedIssueDialog()},this.showLoadingIndicator=async()=>{try{(await Object(Dj.a)({name:"quick-edit/util/loading-indicator"})).showLoadingIndicator()}catch(e){y.a.safeError(kI,e)}},this.hideLoadingIndicator=async()=>{try{(await Object(Dj.a)({name:"quick-edit/util/loading-indicator"})).hideLoadingIndicator()}catch(e){y.a.safeError(kI,e)}}}render(){const{intl:{formatMessage:e}}=this.props;return(a.a.createElement(W.a,{spacing:"compact",onClick:this.onCreateLinkedIssueClick,appearance:"link",iconBefore:a.a.createElement(EO.a,{size:"small",label:e(OI.createLinkedIssueButtonLabel)})},e(OI.createLinkedIssueButtonLabel)))}}wI.displayName="CreateLinkedIssueButton";var SI=Object($t.a)([j.injectIntl,Object(is.a)("createLinkedIssueButton",{onLinkedIssueCreated:"created"}),Object(i.b)(e=>({baseUrl:Object(C.g)(e),sourceIssueKey:Object(C.B)(e),sourceIssueId:Object(Li.j)(String(Object(C.A)(e)))}),e=>({onLinkedIssueCreated:(t,s)=>{e(Object(aS.c)(t)),e(Object(aS.b)()),(({issueLinks:e,linkedIssues:t},s)=>{const n=VS()(e)[0];if(void 0!==n){const a=e[n],i={action:"created",actionSubjectId:t[a.linkedIssueKey].id,attributes:{linkTypeName:Object(KS.a)(a.typeName),linkTypeId:a.typeId,issueLinkId:n}};Object(f.a)(s,i)}})(t,s)}}))])(wI);const II=/^([A-Z][A-Z0-9]+)-([0-9]+)$/i,CI=e=>({sections:t=[]}={})=>t.map(e=>e.issues).filter(e=>!!e).reduce((t,s)=>t.concat(s.map(t=>({content:`${t.key} ${t.summaryText}`,value:t.key,id:t.id?t.id.toString():"",elemBefore:Object(n.createElement)("img",{src:`${t.img}`,width:16,height:16}),fullObject:t,filterValues:[e],iconUrl:t.img}))),[]).reduce((e,t)=>e.findIndex(e=>e.value===t.value)<0?[...e,t]:e,[]),TI=(e,t,s)=>(e=>{if(e){const t=II.exec(e);return!(!t||3!==t.length)}return!1})(s)?((e,t,s)=>Object(hy.a)(Object(ry.a)(e,t,s)))(e,t,Object(Li.l)(s)).map(CI(s)).catch(()=>Vh.Observable.of([])):Vh.Observable.of([]);var PI=Object(j.defineMessages)({searchPlaceholder:{id:"issue.issue-links-search-placeholder",defaultMessage:"Search for issues"},openIssues:{id:"issue.issue-links-search-open-issues",defaultMessage:"Open Issues"},exactKey:{id:"issue.issue-links-exact-key",defaultMessage:"Exact key"},selfLinkInvalidIssue:{id:"issue.issue-link-invalid-self-link",defaultMessage:"You cannot link an issue to itself"},singleInvalidIssue:{id:"issue.issue-link-invalid-single",defaultMessage:"We can't find an issue with the key"},multipleInvalidIssues:{id:"issue.issue-link-invalid-plural",defaultMessage:"We can't find issues with the keys"},noHistoryResults:{id:"issue.issue-link-no-history-results",defaultMessage:"Type to search for an issue summary or key"}});const _I=()=>""!==window.location.port?`${window.location.protocol}//${window.location.hostname}:${window.location.port}`:`${window.location.protocol}//${window.location.hostname}`;class xI extends n.Component{constructor(...e){super(...e),this.getErrorMessage=(e,t,s)=>s.includes(e)?`${t.formatMessage(PI.selfLinkInvalidIssue)} (${e})`:1===s.length?`${t.formatMessage(PI.singleInvalidIssue)} ${s[0]}`:s.length>1?`${t.formatMessage(PI.multipleInvalidIssues)} ${s.join(", ")}`:void 0,this.fetchSuggestions=(e,t,s,n,a)=>{const i=_I();return((e,t,s)=>Object(hy.a)(Object(ry.q)(e,t,s)).map(CI(s)))(t,s,jS(i,n)).map(t=>t.length?[{heading:e,items:t}]:[{items:[{content:a,isDisabled:!0,value:""}]}])},this.onChange=(e,t)=>{null!=t&&null!=t.action&&("select-option"===t.action?Object(zi.c)().markStartOfInteraction({key:nr.a.ISSUE_LINKS.TIME_TO_REFLECT_SELECTED_ISSUE,cancelExisting:!0}):"remove-value"===t.action&&Object(zi.c)().markStartOfInteraction({key:nr.a.ISSUE_LINKS.TIME_TO_REFLECT_REMOVED_ISSUE,cancelExisting:!0})),this.props.onChange(e)},this.onDataRequest=({isInitial:e})=>{e||Object(zi.c)().markStartOfInteraction({key:nr.a.ISSUE_LINKS.TIME_TO_REFLECT_INPUT_RESULT,cancelExisting:!0})},this.onDataLoaded=({isInitial:e})=>{e||Object(zi.c)().markTimeToFinishTask({key:nr.a.ISSUE_LINKS.TIME_TO_REFLECT_INPUT_RESULT})},this.stripQueryValueToIssueKey=e=>{const t=_I();return jS(t,e)}}componentDidUpdate(e){const t=this.props.value.length,s=e.value.length;s<t?Object(zi.c)().markTimeToFinishTask({key:nr.a.ISSUE_LINKS.TIME_TO_REFLECT_SELECTED_ISSUE}):s>t&&Object(zi.c)().markTimeToFinishTask({key:nr.a.ISSUE_LINKS.TIME_TO_REFLECT_REMOVED_ISSUE})}render(){const{value:e,baseUrl:t,issueKey:s,intl:n,invalidSelections:i}=this.props,r=n.formatMessage(PI.openIssues);return a.a.createElement(fj.a,{fieldId:"issue-link-search",classNamePrefix:"issue-links-search",value:e,fetchSuggestions:e=>this.fetchSuggestions(r,t,s,e,n.formatMessage(PI.noHistoryResults)).toPromise(),onChangeMulti:this.onChange,canCreateNewItem:!0,formatCreateLabel:e=>`${e} (${n.formatMessage(PI.exactKey)})`,placeholder:n.formatMessage(PI.searchPlaceholder),invalidMessage:this.getErrorMessage(s,n,i),changeQueryValue:this.stripQueryValueToIssueKey,isMulti:!0,autoFocus:!0,errorMessagePosition:"bottom",onDataLoaded:this.onDataLoaded,onDataRequest:this.onDataRequest})}}xI.displayName="IssueSearchSelect";var DI=Object(j.injectIntl)(xI);const AI=$.default.div(["display:flex;flex-direction:",";justify-content:space-around;align-content:stretch;> *{margin-top:","px;}>:not(:last-child){margin-right:",";}"],({isCompact:e})=>e?"column":"row",q.e,({isCompact:e})=>e?"0":`${q.e}px`),MI=$.default.div(["flex:1;flex-basis:auto;"]),LI=$.default.div(["margin-top:","px;display:flex;flex-wrap:wrap;justify-content:flex-end;margin-left:auto;"],q.e),RI=$.default.div(["flex-grow:1;margin-left:-","px;"],1.5*q.e),NI=(e,t,s,n)=>({issueLinks:{[e]:{id:e,linkedIssueKey:s.key,direction:t.direction,typeName:t.label,typeId:t.id}},linkedIssues:{[`${s.key}`]:{id:s.key,issueKey:s.key,issueId:null!==s.id&&void 0!==s.id?s.id.toString():null,issueLink:Object(ry.g)(n,s.key),issueSummary:s.summaryText?s.summaryText:"",issueTypeIconUrl:s.img?s.img:""}}});function UI(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function FI(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?UI(Object(s),!0).forEach((function(t){VI(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):UI(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function VI(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class KI extends n.Component{constructor(e){super(e),this.getInitialState=()=>({newIssueLinks:[],issueLinkType:this.transformIssueLinkTypesForSelect()[0],isDisabled:!0}),this.onIssueLinkTypeChange=e=>this.setState({issueLinkType:e}),this.onIssueSearchChangeWithUserInput=e=>{let t=!1;const s=[],n=OS(),a=this.updateInvalidSelections(e),i=e.map(e=>{const i=jS(n,e.value),r=FI(FI({},e),{},{content:i,value:i});return r.fullObject||a&&a.includes(r.value)||(t=!0,s.push(()=>this.query$.next(r))),FI(FI({},r),{},{tag:{elemBefore:r.elemBefore}})}),r=!(!t&&Or()(a)&&!Or()(i));this.setState({newIssueLinks:i,isDisabled:r,invalidSelections:a}),s.map(e=>e())},this.onIssueSearchChange=e=>{this.onIssueSearchChangeWithUserInput(e)},this.onSave=()=>{const{issueLinkType:e,newIssueLinks:t}=this.state,{issueLinks:s}=this.props;if(e&&t&&t.length>0){const n=e.fullObject&&e.fullObject.label,a=(s&&s[n]||[]).map(e=>e.linkedIssueKey);Object(zi.c)().markStartOfInteraction({key:nr.a.ISSUE_LINKS.TIME_TO_RENDER_LINKED_ISSUE}),t.map(e=>e.fullObject?e:FI(FI({},e),{},{fullObject:{key:e.value}})).filter(e=>!a.includes(e.fullObject.key)).forEach((t,s)=>{const n=`OPTIMISTIC_LINKED_ISSUE_${Date.now()}_${s}`;this.props.onAdd({optimisticId:n,linkedIssueKey:t.fullObject.key,issueLinkType:e.fullObject,issueLinks:NI(n,e.fullObject,t.fullObject,this.props.baseUrl)})}),this.props.onClose()}},this.updateInvalidSelections=e=>{const t=e?e.map(e=>e.value):[];return this.state.invalidSelections?this.state.invalidSelections.filter(e=>t.includes(e)):[]},this.handleUpdate=({issue:e,results:t})=>{const s=t.map(e=>FI(FI({},e),{},{tag:{elemBefore:e.elemBefore}}));0===s.length?this.setState(t=>({newIssueLinks:t.newIssueLinks.slice(),isDisabled:!0,invalidSelections:t.invalidSelections?t.invalidSelections.concat(e):[e]})):this.setState(t=>{const n=t.newIssueLinks.slice(),a=s[0],i=n.findIndex(e=>e.value===a.value);n[i]=a;const r=t.invalidSelections&&t.invalidSelections.filter(t=>t!==e);return{newIssueLinks:n,isDisabled:r&&r.length>0,invalidSelections:r}})},this.transformIssueLinkTypesForSelect=()=>this.props.issueLinkTypes.map(e=>({label:e.label,value:e.id+e.direction,fullObject:e})),this.subscription=void 0,this.query$=void 0,this.addLinkContainer=void 0,this.state=this.getInitialState(),this.query$=new Vh.Subject,this.subscription=this.query$.flatMap(t=>TI(e.baseUrl,e.issueKey,t.content).map(e=>({issue:t.content,results:e}))).subscribe(this.handleUpdate)}componentDidMount(){this.addLinkContainer&&Object(tr.a)(this.addLinkContainer)}componentDidUpdate(e){e.quickAddClickedCount!==this.props.quickAddClickedCount&&Object(tr.a)(this.addLinkContainer)}componentWillUnmount(){this.subscription.unsubscribe()}render(){const e=this.transformIssueLinkTypesForSelect(),{baseUrl:t,issueKey:s,containerWidth:n,onClose:i,canCreateLinkedIssue:r}=this.props,{issueLinkType:o,newIssueLinks:c,isDisabled:l,invalidSelections:u=[]}=this.state,d=n&&n<=480;return a.a.createElement("div",{ref:e=>{this.addLinkContainer=e}},a.a.createElement(AI,{isCompact:d},a.a.createElement(bj.a,null,a.a.createElement(vS,{selectItems:e,selectedItem:o,onChange:this.onIssueLinkTypeChange})),a.a.createElement(MI,null,a.a.createElement(DI,{value:c,baseUrl:t,issueKey:s,onChange:this.onIssueSearchChange,invalidSelections:u}))),a.a.createElement(LI,null,r&&a.a.createElement(RI,{"data-test-id":"issue.issue-view.views.issue-base.content.issue-links.add.issue-links-add-view.create-linked-issue"},a.a.createElement(SI,null)),a.a.createElement(hS.a,null,a.a.createElement("div",{"data-test-id":"issue.issue-view.views.issue-base.content.issue-links.add.issue-links-add-view.link-button"},a.a.createElement(W.a,{appearance:"primary",onClick:this.onSave,isDisabled:l},a.a.createElement(j.FormattedMessage,{id:"issue.issue-links-add-button-label",defaultMessage:"Link"}))),a.a.createElement(W.a,{appearance:"subtle",onClick:i},a.a.createElement(j.FormattedMessage,{id:"issue.issue-links-cancel-button-label",defaultMessage:"Cancel"})))))}}KI.displayName="AddIssueLinkView",KI.displayName="AddIssueLinkView",KI.defaultProps={issueLinks:null,quickAddClickedCount:0,containerWidth:null,onAdd:o.a,onClose:o.a};var BI=Object($t.a)([Object(b.a)({onAdd:{action:"added"}}),Object(i.b)(e=>({quickAddClickedCount:Object(rS.m)(e),canCreateLinkedIssue:Object(rS.a)(e)}),e=>({onAdd:(t,s)=>e(Object(aS.o)(t,null,s))})),Fa.a])(KI),WI=Object(j.defineMessages)({label:{id:"issue.issue-links-add-label",defaultMessage:"Link an issue"}});const HI=$.default.span(["margin-left:auto;"]);class GI extends n.Component{render(){return a.a.createElement(HI,null,a.a.createElement(ng.a,{label:this.props.intl.formatMessage(WI.label),onClick:this.props.onClick}))}}GI.displayName="AddIssueLinkButton",GI.defaultProps={onClick:o.a};var $I=Object(j.injectIntl)(GI),qI=s("./node_modules/@atlaskit/icon/glyph/editor/link.js"),zI=s.n(qI),YI=s("./node_modules/@atlaskit/icon/glyph/shortcut.js"),QI=s.n(YI);const JI=Object(j.defineMessages)({issueTypeTitle:{id:"issues.issue-links.remote-issue-link-error.issue-type.title",defaultMessage:"Issue type: {issueTypeName}"},remoteLinkAuthAction:{id:"issues.issue-links.remote-issue-link-error.auth-required.action",defaultMessage:"Authenticate"},remoteLinkAuthDescription:{id:"issues.issue-links.remote-issue-link-error.auth-required.description",defaultMessage:"to see additional information"},remoteLinkAuthText:{id:"issues.issue-links.remote-issue-link-error.auth-required",defaultMessage:"Authenticate to see additional information"},remoteLinkGeneralError:{id:"issues.issue-links.remote-issue-link-error.general-error",defaultMessage:"Something is wrong with link, please refresh to fix"},remoteLinkAuthTooltip:{id:"issues.issue-links.remote-issue-link-error.auth-required.tooltip",defaultMessage:"Authenticate to {remoteServerHostname}"},remoteLinkOpenLinkTooltip:{id:"issues.issue-links.remote-issue-link-error.link-button.tooltip",defaultMessage:"Open link in a new tab"},remoteLinkDeleteLinkTooltip:{id:"issues.issue-links.remote-issue-link-error.delete-button.tooltip",defaultMessage:"Unlink remote issue"}}),ZI=$.default.div(["display:flex;align-items:center;"]),XI=Object($.default)(ZI)(["width:100%;height:100%;position:relative;"]),eC=$.default.span(["outline:none;margin-left:","px;color:",";font-weight:600;font-size:12px;white-space:nowrap;&:hover,&:active,&:visited,&:link{outline:none;color:",";}"],q.e,Ae.a.N90,Ae.a.N90),tC=$.default.div(["margin-left:-2px;"]),sC=$.default.div(["padding-left:","px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex-grow:1;"],q.e),nC=$.default.div(["display:flex;align-items:center;"]),aC=$.default.span(["color:",";text-decoration:underline;"],Ae.a.B400),iC=$.default.div(["background-color:",";width:","px;height:","px;border-radius:3px;margin-left:","px;margin-right:","px;"],Ae.a.N20,5*q.e,2*q.e,2*q.e,q.e/2),rC=$.default.div(["width:","px;height:","px;padding:","px;box-sizing:border-box;"],3*q.e,3*q.e,q.e/2);class oC extends n.Component{constructor(...e){super(...e),this.renderErrorIcon=()=>a.a.createElement(tC,null,a.a.createElement(dk.a,{label:"Issue link loading error",primaryColor:Ae.a.Y300})),this.renderAuthKeyIcon=()=>a.a.createElement(sp.a,{url:wS.a}),this.renderIcon=()=>{const{error:e}=this.props;return"APPLINK_REQ_AUTH"===e?Object(qt.isUIUpdateForRemoteIssueLinksEnabled)()?this.renderIssueTypeIcon():this.renderAuthKeyIcon():this.renderErrorIcon()},this.renderAuthRequiredText=()=>{if(!Object(qt.isUIUpdateForRemoteIssueLinksEnabled)())return a.a.createElement(sC,null,this.props.intl.formatMessage(JI.remoteLinkAuthText));const{intl:e,remoteServerHostname:t,handleUserClickAnalytics:s}=this.props;return(a.a.createElement(sC,null,a.a.createElement(he.a,{content:e.formatMessage(JI.remoteLinkAuthTooltip,{remoteServerHostname:t}),position:"bottom"},a.a.createElement(nC,null,a.a.createElement(kr.a,{label:"",size:"small",primaryColor:Ae.a.B400}),a.a.createElement(aC,{onClick:()=>{s("errorCard.authenticationLink")}},this.props.intl.formatMessage(JI.remoteLinkAuthAction)),"\xa0",this.props.intl.formatMessage(JI.remoteLinkAuthDescription)))))},this.renderAvatarSkeleton=()=>a.a.createElement(Wi.a,{size:"small"}),this.renderStatusSkeleton=()=>a.a.createElement(iC,null),this.openIssueLink=e=>{void 0!==this.props.issueLink&&window.open(this.props.issueLink,"_blank"),this.props.handleUserClickAnalytics("errorCard.linkIcon"),e.stopPropagation()},this.handleDelete=e=>{const{issueKey:t,globalId:s,onDelete:n}=this.props;null!=t&&null!=s&&n&&n(Object(Li.l)(t),s),e.stopPropagation()}}renderIssueTypeIcon(){const{intl:e,issueTypeIconUrl:t,issueTypeName:s}=this.props,n=rE()(s)?s:e.formatMessage(JI.issueTypeTitle,{issueTypeName:s});return a.a.createElement(he.a,{content:s||"",position:"bottom"},a.a.createElement(ZI,null,a.a.createElement(sp.a,{alt:n,url:t})))}renderKey(){return a.a.createElement(eC,{onClick:()=>this.props.handleUserClickAnalytics("errorCard.issueKey")},this.props.issueKey)}renderText(){const{error:e}=this.props;return"APPLINK_REQ_AUTH"===e?this.renderAuthRequiredText():a.a.createElement(sC,null,this.props.intl.formatMessage(JI.remoteLinkGeneralError))}renderLinkButton(){const{isHovering:e,isFocused:t,intl:s}=this.props,n=Object(qt.isUIUpdateForRemoteIssueLinksEnabled)()?a.a.createElement(he.a,{content:s.formatMessage(JI.remoteLinkOpenLinkTooltip),position:"bottom"},a.a.createElement(rC,null,a.a.createElement(QI.a,{label:"Open remote issue",size:"small"}))):a.a.createElement(zI.a,{label:"Open remote issue"});return a.a.createElement(bk,{show:e||t,icon:n,onClick:this.openIssueLink})}renderDeleteButton(){const{canRemove:e,onDelete:t,isHovering:s,isFocused:n,intl:i}=this.props;return e&&t?a.a.createElement(bk,{show:s||n,icon:a.a.createElement(he.a,{content:i.formatMessage(JI.remoteLinkDeleteLinkTooltip),position:"bottom"},a.a.createElement(uE.a,{label:"Remove issue link"})),onClick:this.handleDelete}):null}render(){return a.a.createElement(XI,null,this.renderIcon(),this.renderKey(),this.renderText(),Object(qt.isUIUpdateForRemoteIssueLinksEnabled)()||this.renderAvatarSkeleton(),Object(qt.isUIUpdateForRemoteIssueLinksEnabled)()||this.renderStatusSkeleton(),this.renderLinkButton(),Object(qt.isUIUpdateForRemoteIssueLinksEnabled)()&&this.renderDeleteButton())}}oC.displayName="RemoteIssueLinkLineCardError";var cC=Object(j.injectIntl)(oC);function lC(){return(lC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const uC=({isHovering:e,isActive:t,isFocused:s,issue:i,groupId:r,isInteractive:o,onDelete:c,canAddIssueLinks:l,projectType:u})=>{const d=Object(n.useCallback)(()=>({projectType:u,groupId:r,linkedIssueId:i.id,isRemote:i.isRemote||!1,hasError:i.hasError||!1,errorType:i.errorType||"",remoteIssueLinkError:i.remoteIssueLinkError&&i.remoteIssueLinkError.error?i.remoteIssueLinkError.error:"NONE"}),[u,r,i]),{createAnalyticsEvent:p}=Object(Nd.a)(),m=Object(n.useCallback)(e=>{const t=p({action:"clicked",actionSubject:"issueView.IssueLinkLineCard"}),s=d();Object(za.h)(t,e,s)},[p,d]);return a.a.createElement(L.a,{id:"IssueLinkLineCard",packageName:"jiraIssueView",attributes:d()},(()=>{const n=(e,t)=>c&&c(r,e,t);if(i.remoteIssueLinkError)return a.a.createElement(cC,{issueTypeIconUrl:i.issueTypeIconUrl,issueTypeName:i.issueTypeName,issueKey:i.issueKey,remoteServerHostname:i.remoteServerHostname,globalId:i.globalId,isHovering:e,isFocused:s,issueLink:i.issueLink,error:i.remoteIssueLinkError.error,handleUserClickAnalytics:m,canRemove:l,onDelete:c&&n});const d=o&&!i.remoteServerHostname;return(a.a.createElement(HE,lC({isHovering:e,isActive:t,isFocused:s,isInteractive:d,onDelete:c&&n,canRemove:l,projectType:u,handleUserClickAnalytics:m},i)))})(),(()=>a.a.createElement(Ws.a,{onMount:e=>Object(za.b)(e,"issueView.IssueLinkLineCard loaded","IssueLinkLineCard",d())}))())};uC.displayName="IssueLinkLineCard";var dC=Object(j.defineMessages)({removeIssueLinkHeader:{id:"issues.confirm-delete-issuelink-modal-header",defaultMessage:"Remove the link to {issueKey}?"},removeIssueLinkContent:{id:"issues.confirm-delete-issuelink-modal-text",defaultMessage:"You can add it again later if you need to."},removeIssueLinkButton:{id:"issues.conirm-delete-issue-link-confirm-btn-text",defaultMessage:"Remove"},issueLinkFailureHeader:{id:"issue.issue-links-failure-header",defaultMessage:"We couldn't link the issue"},issueLinkFailureContent:{id:"issue.issue-links-failure-content",defaultMessage:"Wait a few moments, then give it another try."}});const pC=$.default.h3(["",";margin:0;"],Ae.c.h200()),mC=$.default.div(["margin:","px 0;padding-right:1px;"],q.e),bC=$.default.div(["margin:","px 0;padding-right:1px;"],q.e),fC=$.default.label(["display:flex;align-items:center;justify-content:space-between;"]);function gC(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function hC(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?gC(Object(s),!0).forEach((function(t){yC(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):gC(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function yC(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const OC=(e={})=>e?Object.keys(e).reduce((t,s)=>e[s].length+t,0):0,jC=Object(v.a)("removeLinkedIssue",D.a.MODAL)(it.b);class EC extends n.Component{constructor(...e){super(...e),this.state={hasDeleteModal:!1,groupId:null,issueKey:null,globalId:void 0},this.onIssueClickNew=({id:e,issueKey:t,issueLink:s,remoteIssueLinkError:n,projectType:a=null,isRemote:i}={},r)=>{if(t){const{onIssueLinkClicked:t,linkActions:c,onAuthenticateApplink:l}=this.props,u="APPLINK_REQ_AUTH"===(null==n?void 0:n.error);if(t&&t(e,a,OC(this.props.issueLinks)),Object(zd.d)(r))if(u){var o;const e=null==n||null===(o=n.repairLink)||void 0===o?void 0:o.href;e&&l&&l(Object(Li.i)(e))}else s&&Object(uS.a)(s,r.metaKey,c.push);(Object(zd.e)(r)||Object(zd.a)(r))&&!u&&s&&window.open(s,"_blank");const{createAnalyticsEvent:d}=this.props,p=d({action:"clicked",actionSubject:"card"});Object(za.h)(p,"issueLinkedCard",{clickedIssueId:e,linkedIssuesCount:OC(this.props.issueLinks),issueNeedsAuthentication:u,isRemote:i})}},this.onIssueClick=({id:e,issueKey:t,issueLink:s,projectType:n=null}={},a)=>{if(t){const{onIssueLinkClicked:t,linkActions:i}=this.props;t&&t(e,n,OC(this.props.issueLinks)),Object(zd.d)(a)&&s&&Object(uS.a)(s,a.metaKey,i.push)}},this.getLinkByGroupAndIssueKey=(e,t,s)=>(this.props.issueLinks&&e&&this.props.issueLinks[e]||[]).find(e=>e.linkedIssueKey===t&&e.globalId===s),this.renderIssueLinkInlineMessage=(e,t)=>{const{intl:s,retryLinkedIssue:n,cancelLinkedIssue:a,createAnalyticsEvent:i}=this.props;return aE(s,s.formatMessage(dC.issueLinkFailureHeader),s.formatMessage(dC.issueLinkFailureContent),(s,a)=>Object(qt.isRemoteIssueLinksEnabled)()?n(e,t,i({action:"succeeded"}),a):n(e,t),()=>a(e,t))}}componentDidMount(){const{issueLinks:e,onIssueLinkRendered:t,hasLinks:s,onMountCreatePermissionFetching:n}=this.props;if(s&&t(OC(e)),n(),this.props.issueLinks){const e=this.flattenedIssueLinks().map(e=>e.linkedIssueKey);this.props.prefetchLinkedIssues(e)}}componentDidUpdate(e){const{displayAddIssueLinks:t}=this.props,s=!e.displayAddIssueLinks&&t,n=e.displayAddIssueLinks&&!t;if(s&&Object(zi.c)().markTimeToFinishTask({key:nr.a.ISSUE_LINKS.TIME_TO_RENDER_NEW_LINKED_ISSUE_INPUT}),n&&Object(zi.c)().markTimeToFinishTask({key:nr.a.ISSUE_LINKS.TIME_TO_RENDER_LINKED_ISSUE}),this.props.issueLinks&&!Ua()(e.issueLinks,this.props.issueLinks)){const e=this.flattenedIssueLinks().map(e=>e.linkedIssueKey);this.props.prefetchLinkedIssues(e)}}onDeleteConfirmOld(e,t){const s=this.getLinkByGroupAndIssueKey(e,t);if(s){const e=s.id;this.props.deleteLinkedIssue({linkId:e});const t=this.flattenedIssueLinks().findIndex(t=>t.id===e);this.props.onRemoveIssueLinkInitiated(t)}this.modalClosedStateChanges()}onDeleteConfirmNew(e,t,s){const n=this.getLinkByGroupAndIssueKey(e,t,s);if(n){const e=n.id;this.props.deleteLinkedIssue({linkId:e,globalId:s});const t=this.flattenedIssueLinks().findIndex(t=>t.id===e&&t.globalId===s);this.props.onRemoveIssueLinkInitiated(t)}this.modalClosedStateChanges()}onDeleteCancel(){this.modalClosedStateChanges()}onDeleteAction(e,t,s){this.setState({groupId:e,issueKey:t,globalId:s,hasDeleteModal:!0});const{createAnalyticsEvent:n}=this.props,a=this.getLinkByGroupAndIssueKey(e,t,s),i=n({action:"clicked",actionSubject:"button"});Object(za.h)(i,"linkedIssueCardDeleteButton",{issueLinkToDeleteId:lS()(a,["linkedIssue","id"]),isRemote:!Or()(s)})}getRemovalConfirmationText(e){const{intl:{formatMessage:t}}=this.props;return{confirmationHeader:t(dC.removeIssueLinkHeader,{issueKey:e}),confirmationContent:t(dC.removeIssueLinkContent)}}modalClosedStateChanges(){this.setState({groupId:null,issueKey:null,hasDeleteModal:!1,globalId:void 0})}flattenedIssueLinks(){const{issueLinks:e}=this.props;return e?Object.keys(e).reduce((t,s)=>[...t,...e[s]],[]):[]}renderDeleteConfirmationModal(){const{intl:{formatMessage:e}}=this.props,{groupId:t,issueKey:s,globalId:n}=this.state,i=this.getRemovalConfirmationText(s),{confirmationHeader:r,confirmationContent:o}=i;return a.a.createElement("div",null,a.a.createElement(jC,{appearance:"warning",headerMessage:r,contentMessage:o,onConfirm:()=>Object(qt.isRemoteIssueLinksEnabled)()?this.onDeleteConfirmNew(t,s,n):this.onDeleteConfirmOld(t,s),onCancel:()=>this.onDeleteCancel(),externalId:"issue.issueLinks.delete",confirmActionText:e(dC.removeIssueLinkButton)}),a.a.createElement(m.a,null))}renderLineCardGroupOld(e,t){const{projectType:s}=this.props;return(a.a.createElement(yv,{issues:e,projectType:s,groupId:t,isInteractive:this.props.isIssueViewComplete,canAddIssueLinks:this.props.canAddIssueLinks,onClick:this.onIssueClick,onDelete:(e,t)=>this.onDeleteAction(e,Object(Li.l)(t))}))}renderLineCardGroupNew(e,t){const{projectType:s}=this.props;return(a.a.createElement(qd.a,{items:e,groupId:t,isInteractive:this.props.isIssueViewComplete,onClick:this.onIssueClickNew},(e,n,i,r)=>a.a.createElement(uC,{isHovering:e,isActive:n,isFocused:i,issue:r,groupId:t,isInteractive:this.props.isIssueViewComplete,onDelete:(e,t,s)=>this.onDeleteAction(e,Object(Li.l)(t),s),canAddIssueLinks:this.props.canAddIssueLinks,projectType:s})))}renderGroup(e,t){const s=t.map(e=>hC(hC({},e.linkedIssue),{},{projectType:e.linkedIssue.projectType||null,isLoading:e.isLoading||!1,hasError:e.hasError,errorInlineMessage:e.hasError?this.renderIssueLinkInlineMessage(e.id,!!e.isRemote):void 0},Object(qt.isRemoteIssueLinksEnabled)()?{id:e.globalId||e.linkedIssue.id,isRemote:e.isRemote,globalId:e.isRemote?e.globalId:void 0,remoteServerHostname:e.isRemote?e.remoteServerHostname:void 0,remoteIssueLinkError:e.isRemote?e.remoteIssueLinkError:void 0}:null));return(a.a.createElement(mC,{key:e},a.a.createElement(pC,{"data-test-id":"issue.issue-view.views.issue-base.content.issue-links.issue-links-view.relationship-heading"},e),Object(qt.isRemoteIssueLinksEnabled)()?this.renderLineCardGroupNew(s,e):this.renderLineCardGroupOld(s,e)))}renderHeading(){const{hasLinks:e,canAddIssueLinks:t,onIssueLinkAddClick:s}=this.props;return Wg()?a.a.createElement(Ba.c,null,a.a.createElement(fC,{htmlFor:"issue-link-search"},a.a.createElement(Ba.e,null,a.a.createElement(j.FormattedMessage,{id:"issue.issue-links-heading",defaultMessage:"Linked issues"}))),a.a.createElement(Ba.d,null,t&&e&&a.a.createElement($I,{onClick:s}))):a.a.createElement(Ba.c,null,a.a.createElement(Ba.e,null,a.a.createElement(j.FormattedMessage,{id:"issue.issue-links-heading",defaultMessage:"Linked issues"})),a.a.createElement(Ba.d,null,t&&e&&a.a.createElement($I,{onClick:s})))}renderExistingLinks(){const{issueLinks:e}=this.props;return(a.a.createElement("div",null,e&&Object.keys(e).sort().map(t=>this.renderGroup(t,e[t]))))}renderAddIssueLink(){const{issueLinkTypes:e,baseUrl:t,issueKey:s,onIssueLinkAddClosed:n,issueLinks:i}=this.props;return(a.a.createElement(bC,null,a.a.createElement("div",null,Object(qt.isRemoteIssueLinksEnabled)()?a.a.createElement(yI,{issueLinkTypes:e,baseUrl:t,issueKey:s,onClose:n,issueLinks:i}):a.a.createElement(BI,{issueLinkTypes:e,baseUrl:t,issueKey:s,onClose:n,issueLinks:i}))))}render(){const{issueLinks:e,hasLinks:t,displayAddIssueLinks:s}=this.props,n=t&&!Or()(e),i=this.state.hasDeleteModal;return a.a.createElement(M.a,null,n||s?this.renderHeading():null,n?this.renderExistingLinks():null,s?this.renderAddIssueLink():null,i?this.renderDeleteConfirmationModal():null)}}EC.displayName="IssueLinksView",EC.displayName="IssueLinksView",EC.defaultProps={issueLinks:null,issueLinkTypes:[],isIssueViewComplete:!1,onIssueLinkClicked:o.a,onIssueLinkRendered:o.a,onIssueLinkAddClick:o.a,onIssueLinkAddClosed:o.a};var vC=Object($t.a)([j.injectIntl,Object(b.a)({deleteLinkedIssue:{action:"deleted"},onAuthenticateApplink:{action:"authenticate"}}),Object(v.b)("linkedIssue"),Object(as.a)(e=>({onIssueLinkClicked:(t,s,n)=>e("linked-issue-clicked",{targetIssueId:t,targetProjectType:Object(Fn.j)(...sS.c)(s),linkedIssuesCount:n}),onIssueLinkRendered:t=>e("linked-issue-render",{linkedIssuesCount:t}),onRemoveIssueLinkInitiated:t=>e("linked-issue-removed",{indexOfDeletedLink:t})})),nS.a,Object(i.b)(e=>({canAddIssueLinks:Object(oS.a)(e),hasLinks:Object(qt.isRemoteIssueLinksEnabled)()?Object(rS.d)(e):Object(rS.e)(e),issueLinks:Object(qt.isRemoteIssueLinksEnabled)()?Object(rS.c)(e):Object(rS.k)(e),issueLinkTypes:Object(oS.b)(e),baseUrl:Object(C.g)(e),issueKey:Object(C.B)(e),externalId:"issue.issue-links",displayAddIssueLinks:Object(rS.o)(e),projectType:Object(T.G)(e),isIssueViewComplete:Object(T.n)(e)}),e=>({onAuthenticateApplink:Object(qt.isRemoteIssueLinksEnabled)()&&((t,s)=>e(Object(rk.a)(t,s))),deleteLinkedIssue:({linkId:t,globalId:s},n)=>{Object(qt.isRemoteIssueLinksEnabled)()&&void 0!==s?e(Object(iS.b)(s,n)):e(Object(aS.e)(t,n))},cancelLinkedIssue:(t,s)=>{Object(qt.isRemoteIssueLinksEnabled)()&&s?e(Object(iS.d)(t)):e(Object(aS.l)(t))},retryLinkedIssue:(t,s,n,a)=>{Object(qt.isRemoteIssueLinksEnabled)()&&s?e(Object(iS.g)(t,n,a)):e(Object(aS.p)(t,n,a))},onIssueLinkAddClick:()=>e(Object(aS.a)()),onIssueLinkAddClosed:()=>e(Object(aS.b)()),onMountCreatePermissionFetching:()=>e(Object(aS.g)()),prefetchLinkedIssues:t=>e(Object(Dg.a)({issueKeys:t}))}))])(EC);const kC=()=>({type:"LINK_INCIDENT_CLICKED"}),wC=()=>({type:"CREATE_MAJOR_INCIDENT_CLICKED"}),SC=Object(yn.createSelector)(T.e,e=>e.incidentManagement),IC=Object(yn.createSelector)(SC,e=>e.createMajorIncident),CC=(Object(yn.createSelector)(IC,e=>e.clickedCount),Object(yn.createSelector)(T.J,e=>e.incidentManagement)),TC=Object(yn.createSelector)(CC,e=>e.showCreateMajorIncidentModal),PC=Object(yn.createSelector)(T.e,e=>e.incidentManagement),_C=Object(yn.createSelector)(PC,e=>e.createLinkedIncident),xC=(Object(yn.createSelector)(_C,e=>e.errorMessage),Object(yn.createSelector)(_C,e=>e.isInvalid),Object(yn.createSelector)(_C,e=>e.isLoading),Object(yn.createSelector)(_C,e=>e.clickedCount)),DC=Object(yn.createSelector)(T.J,e=>e.incidentManagement),AC=Object(yn.createSelector)(DC,e=>e.showCreateIncidentPanel),MC=Object(On.e)("com.atlassian.jira.plugins.service-entity:service-entity-field-cftype"),LC=Object(yn.createSelector)(MC,e=>e&&e.renderedValue);var RC=s("./src/packages/servicedesk/incident-management/issue-view/link-incident/src/async.js");const NC=Object($t.a)([Object(i.b)(e=>({issueSummary:Object(On.g)("summary")(e),issueDescription:Object(On.g)("description")(e),impactedServices:LC(e),issueKey:Object(C.B)(e),issueId:Object(C.A)(e),projectKey:Object(C.I)(e),projectId:Object(T.D)(e),isCreateVisible:AC(e),isCreateMajorIncidentModalVisible:TC(e),createLinkedIncidentCount:xC(e)}),e=>({onCreateLinkedIncidentClick:()=>e(kC()),onCloseLinkedIncidentPanelClick:()=>e((()=>({type:"LINK_INCIDENT_PANEL_CLOSED"}))()),onCloseCreateMajorIncidentModal:()=>e((()=>({type:"CREATE_MAJOR_INCIDENT_MODAL_CLOSED"}))())}))])(({issueSummary:e,issueDescription:t,impactedServices:s,issueKey:n,useFieldValue:i=hl.b,issueId:r,isCreateVisible:o,isCreateMajorIncidentModalVisible:c,createLinkedIncidentCount:l,onCreateLinkedIncidentClick:u,onCloseLinkedIncidentPanelClick:d,onCloseCreateMajorIncidentModal:p,projectId:m,projectKey:b})=>{const[f]=i({issueKey:n,fieldKey:"servicedesk-incident-linking"}),g=Object(qt.isJsmCreateMajorIncidentFromIssueViewAutofillEnabled)()?(e=>e?e.map(e=>e.name):null)(s):[];return f&&void 0!==r?a.a.createElement(RC.a,{issueSummary:e,issueDescription:t,impactedServiceNames:g,issueKey:n,issueId:r,projectId:m,projectKey:b,isCreateVisible:o,isCreateMajorIncidentModalVisible:c,createLinkedIncidentCount:l,onCreateLinkedIncidentClick:u,onCloseLinkedIncidentPanelClick:d,onCloseCreateMajorIncidentModal:p}):null});var UC=Object(j.defineMessages)({title:{id:"issue.portfolio-child-issues.title",defaultMessage:"Child issues"},noValueText:{id:"issue.placeholder-for-empty-child-issues-field",defaultMessage:"There are no child issues."}}),FC=Object($t.a)([Object(i.b)(e=>({childIssuesPanelType:"portfolioChildren",baseUrl:Object(C.g)(e),locale:Object(C.D)(e),user:Object(C.a)(e),projectId:Object(T.D)(e),projectType:Object(T.G)(e),parentKey:Object(C.B)(e),parentId:Object(C.A)(e),issues:Object(Ng.a)(e),isIssueViewComplete:Object(T.n)(e),messages:UC}),e=>({onNavigateToNewIssue:({fromIssueKey:t,toIssueKey:s})=>e(Object(xg.c)({fromIssueKey:t,toIssueKey:s})),onChange:t=>{switch(t.type){case Ug.CHILD_ISSUE_ADDED:e(Pg(t.meta.childIssue))}},prefetchChildIssues:t=>e(Object(Dg.a)({issueIds:t}))}))])(Xv),VC=Object(rw.asyncComponent)({resolve:()=>s.e("async-product-requirements-touchpoint").then(s.bind(null,"./src/packages/issue/issue-view/src/views/issue-base/content/product-requirements-touchpoint/index.js")),name:"AsyncProductRequirementsTouchpoint"}),KC=s("./src/packages/issue/issue-view/src/actions/request-panel-metadata-actions.js"),BC=s("./src/packages/issue/issue-view/src/selectors/request-panel-metadata-selector.js"),WC=s("./src/packages/platform/services/spa-apdex-analytics/src/submit-apdex-mark/index.js"),HC=s("./src/packages/platform/services/spa-apdex-analytics/src/marks.js"),GC=s("./src/packages/servicedesk/common/src/itsm-practices/index.js"),$C=s("./src/packages/servicedesk/common/src/itsm-practices/constants.js"),qC=s("./node_modules/@atlassian/servicedesk-frontend-apdex/dist/servicedesk-frontend-apdex.min.js");class zC extends n.Component{constructor(...e){super(...e),this.onExpand=(e,t)=>{this.props.onExpand(),Object(za.h)(t,"showRequestDetails")},this.onCollapse=(e,t)=>{this.props.onCollapse(),Object(za.h)(t,"hideRequestDetails")}}renderShowDetailsButton(){return a.a.createElement(ba.a,{externalId:"showdetailslink.expand",appearance:"link",onClick:this.onExpand},a.a.createElement(j.FormattedMessage,{id:"request.text-on-show-details-button",defaultMessage:"Show details"}))}renderHideDetailsButton(){return a.a.createElement(ba.a,{externalId:"showdetailslink.collapse",appearance:"link",onClick:this.onCollapse},a.a.createElement(j.FormattedMessage,{id:"request.text-on-hide-details-button",defaultMessage:"Hide details"}))}render(){return a.a.createElement(a.a.Fragment,null,this.props.isContentExpanded?this.renderHideDetailsButton():this.renderShowDetailsButton())}}zC.displayName="ContentSectionExpander";var YC=Object(j.defineMessages)({viewRequest:{id:"issue.view-request",defaultMessage:"View request in portal"}});const QC=$.default.div(["display:flex;align-items:center;padding-left:","px;"],4*q.e+q.e/2),JC=$.default.a(["font-size:12px;"]),ZC=Object(pi.a)("link",{onClick:"clicked"})(JC);class XC extends n.Component{constructor(...e){super(...e),this.onClick=(e,t)=>{Object(za.h)(t,"viewRequestInHelpCenter")}}render(){const{intl:e,link:t}=this.props;return(a.a.createElement(QC,null,a.a.createElement(ZC,{href:t,target:"_blank",onClick:this.onClick},e.formatMessage(YC.viewRequest))))}}XC.displayName="HelpCenter";var eT=Object(j.defineMessages)({portal:{id:"issue.portal-channel",defaultMessage:"Portal"},email:{id:"issue.email-channel",defaultMessage:"Email"},api:{id:"issue.api-channel",defaultMessage:"API"},jira:{id:"issue.jira-channel",defaultMessage:"Jira"},deployment:{id:"issue.deployment-channel",defaultMessage:"Deployment"},anonymousportal:{id:"issue.anonymousportal-channel",defaultMessage:"Anonymous Portal"},unknown:{id:"issue.unknown-channel",defaultMessage:"Unknown"},requestRaised:{id:"issue.request-raised",defaultMessage:"raised this request"},via:{id:"issue.via",defaultMessage:"via"},noReporter:{id:"issue.reporter.text-when-no-value-is-provided",defaultMessage:"Anonymous"}});const tT=$.default.div(["display:flex;padding-right:","px;"],q.e),sT=$.default.div(["display:flex;align-items:center;min-width:0;"]),nT=$.default.div(["font-weight:600;padding-right:","px;flex-shrink:0;"],q.e/2),aT=$.default.div(["font-weight:600;padding-left:","px;"],q.e/2),iT=$.default.div(["",";min-width:0;"],ap.a),rT=$.default.div(["padding-left:","px;"],q.e/2),oT=Object(Ul.a)(e=>({avatarUrl:"",name:e.formatMessage(eT.noReporter)})),cT=Object(Ul.a)((e,t)=>{const{displayName:s,avatarUrls:n}=t;return{avatarUrl:n["48x48"],name:s}}),lT=e=>{const{intl:t,reporter:s,requestChannel:n}=e;let i=oT(t);s&&(i=cT(t,s));const{name:r,avatarUrl:o}=i,c=((e,t)=>{switch(e){case"portal":return t.formatMessage(eT.portal);case"email":return t.formatMessage(eT.email);case"api":return t.formatMessage(eT.api);case"jira":return t.formatMessage(eT.jira);case"deployment":return t.formatMessage(eT.deployment);case"anonymousportal":return t.formatMessage(eT.anonymousportal);case"unknown":return t.formatMessage(eT.unknown);default:return}})(n,t);return a.a.createElement(sT,null,a.a.createElement(tT,null,a.a.createElement(Wi.a,{src:o,size:"small"})),a.a.createElement(nT,null,r),a.a.createElement(iT,null,t.formatMessage(eT.requestRaised)),void 0!==c&&a.a.createElement(a.a.Fragment,null,a.a.createElement(rT,null,t.formatMessage(eT.via)),a.a.createElement(aT,null,c)))};lT.displayName="ReporterAndChannel";var uT=lT;const dT=$.default.div(["margin-top:","px;margin-bottom:","px;display:flex;flex-direction:column;border-radius:","px;border:1px solid #dfe1e6;background-color:",";padding:16px;",";"],q.e,3*q.e,q.e/2,Ae.a.N0,({isExpanded:e,hasContentItems:t})=>e&&t&&"padding-bottom: 0"),pT=$.default.div(["display:flex;justify-content:space-between;"]),mT=$.default.div(["",";"],({hasContentItems:e})=>e&&`margin-top: ${2*q.e}px`),bT=$.default.div(["margin-bottom:","px;"],3*q.e);class fT extends n.Component{constructor(e){super(e),this.onExpand=()=>{this.setState({isExpanded:!0})},this.onCollapse=()=>{this.setState({isExpanded:!1})},this.getMetricKey=e=>{if(this.props.isInServiceDeskReport)return"servicedesk.reports.custom.issue";const t=Object(GC.a)(e);return t!==$C.c?`servicedesk.queues.${t}.issue`:"servicedesk.queues.issue"},this.shouldWrapItsmChangeManagementTourSpotlights=()=>this.props.isServiceDesk,this.props.fetchRequestPanelMetadata(),this.state={isExpanded:!0}}componentDidMount(){if(!this.props.isLoading&&(this.props.isInServiceDeskQueue||this.props.isInServiceDeskReport)&&!__SPA__){const{baseUrl:e}=this.props,t=window.location.pathname.replace(e,"");Object(qC.end)(t)}}render(){const{isExpanded:e}=this.state,{requestPanelItems:t,isInServiceDeskReport:s,isInServiceDeskQueue:n,isLoading:i,LayoutItemsComponent:r}=this.props,o=t.length>0,c=a.a.createElement(a.a.Fragment,null,a.a.createElement(Zt.c,{location:"panel-header-expand"},a.a.createElement(pT,null,a.a.createElement(uT,{intl:this.props.intl,reporter:this.props.reporter&&this.props.reporter.value,requestChannel:this.props.requestChannel}),o&&a.a.createElement(zC,{isContentExpanded:e,onExpand:this.onExpand,onCollapse:this.onCollapse}))),(o&&e||!o)&&this.props.requestUrl&&a.a.createElement(XC,{intl:this.props.intl,link:this.props.requestUrl}));return a.a.createElement(Zt.f,{location:"requestDetailsPanel"},a.a.createElement(dT,{isExpanded:e,hasContentItems:o},!i&&(n||s)&&__SPA__&&a.a.createElement(xt.f,null,({match:e})=>a.a.createElement(WC.c,{metricKey:this.getMetricKey(e&&e.params&&e.params.practiceType),withMarks:[HC.a],isExpectedToHaveSsr:!1})),this.shouldWrapItsmChangeManagementTourSpotlights()?a.a.createElement(om.a,{id:"reporter-spotlight"},c):c,e&&a.a.createElement(mT,{hasContentItems:o},a.a.createElement(r,{layoutItems:t,area:"content-request",ItemContainer:bT}))))}}fT.displayName="RequestDetailsPanelView",fT.defaultProps={LayoutItemsComponent:dm};const gT=e=>{const t=Object(C.b)(e);return t&&t.valueOf()===tu.a.SERVICEDESK_QUEUES_ISSUE},hT=e=>{const t=Object(C.b)(e);return t&&t.valueOf()===tu.a.SERVICEDESK_REPORTS_ISSUE},yT=e=>"jira-servicedesk"===Object(T.I)(e);var OT=Object($t.a)([j.injectIntl,Object(i.b)(e=>({baseUrl:Object(C.g)(e),reporter:Object(On.q)("reporter")(e),requestChannel:Object(BC.b)(e),isLoading:Object(T.s)(e),isServiceDesk:yT(e),isInServiceDeskQueue:gT(e),isInServiceDeskReport:hT(e),requestUrl:Object(BC.c)(e),LayoutItemsComponent:pm}),e=>(e=>({fetchRequestPanelMetadata:()=>e(Object(KC.a)()),onOpenPanel:(t,s,n)=>{const a={title:n&&n.title||s,type:s,key:t,payload:n};e(Object(rm.b)(a))}}))(e))])(fT),jT=s("./src/packages/issue/issue-view/src/selectors/subtask-types-selector.js"),ET=s("./src/packages/issue/issue-view/src/selectors/subtasks-selector.js"),vT=Object(j.defineMessages)({title:{id:"issue.subtasks-heading",defaultMessage:"Subtasks"},createSubtaskErrorHeader:{id:"issue.subtask-error-header",defaultMessage:"We couldn't create the subtask"},createSubtaskErrorContent:{id:"issue.subtask-error-content",defaultMessage:"Wait a few moments, then give it another try."}});function kT(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function wT(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?kT(Object(s),!0).forEach((function(t){ST(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):kT(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function ST(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function IT(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}var CT=Object($t.a)([Object(i.b)(e=>({childIssuesPanelType:"classicSubtasks",baseUrl:Object(C.g)(e),locale:Object(C.D)(e),user:Object(C.a)(e),projectId:Object(T.D)(e),projectType:Object(T.G)(e),parentKey:Object(C.B)(e),parentId:Object(C.A)(e),issueTypes:Object(jT.c)(e),issues:Object(ET.d)(e),messages:vT,supportsIssueCreation:Object(ET.a)(e),quickAddClickCount:Mg(e),isIssueViewComplete:Object(T.n)(e),onNavigateToNewIssueStateProp:Object(C.G)(e),fetchIssueTypesStatus:Object(xl.a)(e)}),e=>({onChange:t=>{switch(t.type){case Ug.CHILD_ISSUE_ADDED:e((e=>({type:"SUBTASK_ADD_SUCCESS",payload:{subtask:e}}))(t.meta.childIssue))}},onAddChildClick:()=>e(_g()),prefetchChildIssues:t=>e(Object(Dg.a)({issueIds:t})),onNavigateToNewIssueDispatchProp:({fromIssueKey:t,toIssueKey:s})=>{__SPA__||e(Object(xg.c)({fromIssueKey:t,toIssueKey:s}))}}),(e,t)=>{const{onNavigateToNewIssueStateProp:s}=e,n=IT(e,["onNavigateToNewIssueStateProp"]),{onNavigateToNewIssueDispatchProp:a}=t,i=IT(t,["onNavigateToNewIssueDispatchProp"]);return wT(wT(wT({},n),i),{},{onNavigateToNewIssue:({fromIssueKey:e,toIssueKey:t})=>{s&&s({fromIssueKey:e,toIssueKey:t}),a&&a({fromIssueKey:e,toIssueKey:t})}})})])(Xv),TT=s("./src/packages/issue/issue-view/src/actions/web-links-actions.js"),PT=s("./src/packages/issue/issue-view/src/selectors/web-links-selector.js");const _T=Object(j.defineMessages)({headerMessage:{id:"issue.details.web-links.delete-confirmation-modal.title",defaultMessage:"Delete the web link?"},contentMessage:{id:"issue.details.web-links.delete-confirmation-modal.content",defaultMessage:"You can add the link later again if you need to."},confirmActionText:{id:"issue.details.web-links.delete-confirmation-modal.confirmation-text",defaultMessage:"Delete"},cancelActionText:{id:"issue.details.web-links.delete-confirmation-modal.cancellation-text",defaultMessage:"Cancel"}});const xT=({intl:e,onDelete:t,onCancel:s})=>a.a.createElement(it.b,{appearance:"danger",headerMessage:e.formatMessage(_T.headerMessage),contentMessage:e.formatMessage(_T.contentMessage),confirmActionText:e.formatMessage(_T.confirmActionText),cancelActionText:e.formatMessage(_T.cancelActionText),onConfirm:t,onCancel:s});xT.displayName="DeleteModal";var DT=Object(j.injectIntl)(xT),AT=s("./node_modules/shortid/index.js"),MT=s("./node_modules/@atlaskit/icon/glyph/world.js"),LT=s.n(MT),RT=s("./src/packages/platform/ui/flags/src/model/index.js"),NT=Object(j.defineMessages)({createErrorHeading:{id:"issue-view.views.common.web-link-line-card-group.line-card.error-message.create-error-heading",defaultMessage:"We couldn't create the web link"},deleteErrorHeading:{id:"issue-view.views.common.web-link-line-card-group.line-card.error-message.delete-error-heading",defaultMessage:"We couldn't delete the web link"},errorBody:{id:"issue-view.views.common.web-link-line-card-group.line-card.error-message.create-error-body",defaultMessage:"Wait a few moments, then give it another try."},retryAction:{id:"issue-view.views.common.web-link-line-card-group.line-card.error-message.retry-action",defaultMessage:"Try again"},cancelAction:{id:"issue-view.views.common.web-link-line-card-group.line-card.error-message.cancel-action",defaultMessage:"Cancel"}});const UT=e=>e.stopPropagation(),FT=({errorHeading:e,errorBody:t,onRetry:s,onCancel:n,intl:i})=>a.a.createElement("div",{onClick:UT,onKeyPress:UT},aE(i,i.formatMessage(e),i.formatMessage(t),s,n));FT.displayName="ErrorMessage";var VT=tt()([Object(is.a)("webLinks",{onRetry:"retry"}),Object(i.b)(null,(e,{webLink:t})=>({onCreateWebLinkRetry:()=>{e(Object(TT.d)(t.id))},onCreateWebLinkCancel:()=>{e(Object(TT.f)(t.id))},onDeleteWebLinkRetry:()=>{e(Object(TT.h)(t.id))},onDeleteWebLinkCancel:()=>{e(Object(TT.a)(t.id))}}),(e,t,s)=>({intl:s.intl,errorHeading:!0===s.webLink.createFailed?NT.createErrorHeading:NT.deleteErrorHeading,errorBody:NT.errorBody,onRetry:(e,n,a)=>{!0===s.webLink.createFailed?(t.onCreateWebLinkRetry(),Object(BS.a)(a,{name:"createRetry"})):(t.onDeleteWebLinkRetry(),Object(BS.a)(a,{name:"deleteRetry"}))},onCancel:!0===s.webLink.createFailed?t.onCreateWebLinkCancel:t.onDeleteWebLinkCancel})),j.injectIntl])(FT);const KT=$.default.div(["display:flex;align-items:center;"]),BT=Object($.default)(KT)(["width:100%;height:100%;position:relative;"]),WT=$.default.div(["flex:1;overflow:hidden;align-items:center;"]),HT=$.default.div([""," padding-left:","px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"],e=>e.isFocused&&`color: ${Ae.a.B400};`,q.e),GT=$.default.div(["margin-left:","px;margin-right:","px;"],q.e/4,q.e/4),$T=e=>!(!e.createFailed&&!e.deleteFailed);class qT extends n.Component{constructor(...e){super(...e),this.state={validIconUrl:!1},this.onDeleteClick=e=>{const{onDelete:t,webLink:{id:s}}=this.props;e.stopPropagation(),t(s)}}componentDidMount(){const{iconUrl:e}=this.props.webLink;if(this.props.webLink.deleteFailed){const{onDeleteWebLinkRetry:e,onDeleteWebLinkCancel:t}=this.props;this.showErrorFlag(NT.deleteErrorHeading,e,t)}if(null!=e){const t=new Image;t.onload=()=>this.setState({validIconUrl:!0}),t.onerror=()=>this.setState({validIconUrl:!1}),t.src=e}}componentDidUpdate(e){if(!e.webLink.createFailed&&this.props.webLink.createFailed){const{onCreateWebLinkRetry:e,onCreateWebLinkCancel:t}=this.props;this.showErrorFlag(NT.createErrorHeading,e,t)}}showErrorFlag(e,t,s){const{showFlag:n,dismissFlag:a}=this.props,i=Object(RT.b)(Object(AT.generate)());n(((e,t,s,n)=>({id:e,title:t,description:NT.errorBody,type:"warning",isAutoDismiss:!0,actions:[{content:NT.retryAction,onClick:s},{content:NT.cancelAction,onClick:n}]}))(i,e,()=>{a({id:i,command:"DISMISS"}),t()},()=>{a({id:i,command:"DISMISS"}),s()}))}shouldRenderDeleteButton(){const{webLink:e,canDelete:t}=this.props;return t&&!(e.isCreating||$T(e))}renderLinkIcon(){const{webLink:{iconUrl:e,linkText:t=""}}=this.props;return this.state.validIconUrl?a.a.createElement(Wi.a,{src:e,size:"small",appearance:"square"}):a.a.createElement(GT,null,a.a.createElement(LT.a,{label:t}))}renderLinkText(){const{webLink:e,isFocused:t}=this.props,{linkText:s,href:n}=e;return a.a.createElement(WT,null,a.a.createElement(he.a,{content:n,truncate:!0,position:"bottom"},a.a.createElement(HT,{isFocused:t},s||n)))}renderDeleteButton(){const{isHovering:e,isFocused:t}=this.props;return(a.a.createElement(fk,{show:e||t,onClick:this.onDeleteClick}))}render(){const{webLink:e}=this.props;return(a.a.createElement(BT,null,this.renderLinkIcon(),this.renderLinkText(),this.shouldRenderDeleteButton()&&this.renderDeleteButton(),$T(e)&&a.a.createElement(VT,{webLink:e})))}}qT.displayName="WebLinkLineCard";var zT=qT;function YT(){return(YT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const QT=e=>a.a.createElement(os.FlagServiceSubscriber,null,({showFlag:t,dismissFlag:s})=>a.a.createElement(zT,YT({showFlag:t,dismissFlag:s},e)));QT.displayName="WithFlagSubscriber";var JT=tt()([Object(is.a)("webLinks",{onCreateWebLinkRetry:"retry",onDeleteWebLinkRetry:"retry"}),Object(i.b)(null,(e,{webLink:t})=>({onCreateWebLinkRetry:s=>{e(Object(TT.d)(t.id)),Object(BS.a)(s,{name:"createRetry"})},onCreateWebLinkCancel:()=>{e(Object(TT.f)(t.id))},onDeleteWebLinkRetry:s=>{e(Object(TT.h)(t.id)),Object(BS.a)(s,{name:"deleteRetry"})},onDeleteWebLinkCancel:()=>{e(Object(TT.a)(t.id))}}))])(QT);const ZT=$.default.div(["div[class*='item-line-card-view__Card']:focus{border-bottom-color:",";}"],Ae.a.N30),XT=e=>{const[t,s]=Object(n.useState)(!1),[i,r]=Object(n.useState)(null),o=e=>{s(!0),r(e)},c=()=>{s(!1),r(null)},l=c,{canDelete:u}=e;return a.a.createElement(ZT,null,a.a.createElement(Ws.a,{onMount:t=>Object(za.b)(t,"webLinkLineCardGroup rendered",{linkCount:e.links.length})}),a.a.createElement(qd.a,{items:e.links,groupId:"web-links",onClick:(t,s)=>{e.onClick&&e.onClick(t,s),s&&s.currentTarget&&s.currentTarget.blur(),(e=>{e.href&&window.open(e.href,"_blank")})(t)}},(e,t,s,n)=>(({link:e,isHovering:t,isFocused:s})=>a.a.createElement(JT,{webLink:e,isHovering:t,isFocused:s,onDelete:o,canDelete:u}))({link:n,isHovering:e,isFocused:s})),t?a.a.createElement(DT,{onDelete:()=>{i&&e.onDelete(i),c()},onCancel:l}):null)};XT.displayName="WebLinkLineCardGroup";var eP=XT,tP=Object($t.a)([Object(is.a)("webLinkCard",{onClick:"clicked",onDelete:"deleted"}),Object(E.a)({onClick:"visitWebLink",onDelete:"deleteWebLink"}),Object(i.b)(null,e=>({onDelete:t=>e(Object(TT.h)(t))}))])(eP);const sP=Object(j.defineMessages)({label:{id:"issue.web-links-add-label",defaultMessage:"Link to a web page"}}),nP=$.default.span(["margin-left:auto;"]),aP=({intl:e,onClick:t})=>a.a.createElement(nP,null,a.a.createElement(ng.a,{label:e.formatMessage(sP.label),onClick:t}));aP.displayName="AddButton";var iP=Object(j.injectIntl)(aP),rP=s("./node_modules/url-parse/index.js"),oP=s.n(rP);const cP=e=>{const t=e.trim();return/^(((https?):)?\/\/)[^\s/$.?#].[^\s]*$/i.test(t)};var lP=s("./node_modules/@atlaskit/textfield/dist/es2019/components/Textfield.js");const uP=$.default.span(["color:",";font-weight:600;font-size:","px;"],Ae.a.N300,1.5*q.e),dP=$.default.div(["flex:auto;"]);function pP(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const mP=e=>{let{headingText:t}=e,s=pP(e,["headingText"]);return(a.a.createElement(dP,null,a.a.createElement(uP,null,t),a.a.createElement(lP.a,s)))};mP.displayName="InlineField";var bP=Object(j.defineMessages)({url:{id:"issue.views.web-links.addLink.label.url",defaultMessage:"URL"},linkText:{id:"issue.views.web-links.addLink.label.linkText",defaultMessage:"Link text"},linkTextPlaceholder:{id:"issue.views.web-links.addLink.label.linkTextPlaceholder",defaultMessage:"Add a description..."},invalidUrlMessage:{id:"issue.views.web-links.addLink.label.invalidUrlMessage",defaultMessage:"Enter a valid URL starting with http:// or https://"},errorIconLabel:{id:"issue.views.web-links.addLink.label.errorIcon",defaultMessage:"Error icon"}});const fP=$.default.div(["margin-top:","px;display:flex;"],2*q.e),gP=$.default.div(["margin-right:","px;flex:1;"],q.e),hP=$.default.div(["margin-left:","px;flex:1;"],q.e),yP=$.default.div(["align-items:center;color:",";display:flex;margin-top:","px;"],e=>e.colour,q.e/2),OP=$.default.div(["margin-left:","px;"],q.e/2);class jP extends n.Component{constructor(...e){super(...e),this.state={isHrefFocused:!0}}render(){const{href:e,linkText:t,onHrefChange:s,intl:n,onLinkTextChange:i,isHrefValid:r}=this.props;return(a.a.createElement(fP,null,a.a.createElement(gP,null,a.a.createElement(mP,{value:e,headingText:n.formatMessage(bP.url),autoFocus:!0,placeholder:"https://www.example.com",onChange:s,onBlur:()=>{this.setState({isHrefFocused:!1})},onFocus:()=>this.setState({isHrefFocused:!0}),isInvalid:!r}),!r&&!this.state.isHrefFocused&&a.a.createElement(yP,{colour:Ae.a.R400},a.a.createElement(Qd.a,{label:n.formatMessage(bP.errorIconLabel),role:"presentation"}),a.a.createElement(OP,null,n.formatMessage(bP.invalidUrlMessage)))),a.a.createElement(hP,null,a.a.createElement(mP,{value:t,headingText:n.formatMessage(bP.linkText),autoFocus:!1,placeholder:n.formatMessage(bP.linkTextPlaceholder),onChange:i}))))}}jP.displayName="InlineFields";var EP=Object(j.injectIntl)(jP),vP=Object(j.defineMessages)({linkButton:{id:"issue.views.web-links.link.link-button",defaultMessage:"Link"},cancelButton:{id:"issue.views.web-links.link.cancel-button",defaultMessage:"Cancel"}});Ae.a.N10;const kP=Object($.default)(W.a)(["margin-left:","px !important;"],q.e),wP=$.default.div(["margin-top:","px;display:flex;justify-content:flex-end;"],q.e),SP={href:"",linkText:"",isDisabled:!0,isHrefValid:!0};class IP extends n.Component{constructor(...e){super(...e),this.state=SP,this.onChildContainerRefSet=e=>{this.childContainer=e},this.onHrefChange=e=>{const t=e.target.value;this.updateDisabledState(t),this.setState({href:t,isHrefValid:cP(t)})},this.onLinkTextChange=e=>{const t=e.target.value.slice(0,255);t!==this.state.linkText&&(this.updateDisabledState(this.state.href),this.setState({linkText:t}))},this.onSubmit=()=>{const{href:e,linkText:t}=this.state,s=e.trim(),n=(e=>{const{origin:t}=new oP.a(e.trim(),"null"),s="null"===t?"":`${t}/favicon.ico`;return Object(Li.i)(s)})(s);this.props.onSubmit(s,Or()(t.trim())?s:t.trim(),n)},this.childContainer=void 0,this.closeAndReset=()=>{this.resetState(),this.props.onCancel()}}componentDidMount(){Object(tr.a)(this.childContainer),this.updateDisabledState(this.state.href)}componentDidUpdate(e){this.props.createLinkClickedCount!==e.createLinkClickedCount&&(Object(tr.a)(this.childContainer),this.focusOnInput()),this.props.linkedPagesCount>e.linkedPagesCount&&(this.resetState(),this.focusOnInput())}focusOnInput(){if(null!==this.childContainer){const e=this.childContainer.querySelector("input");null!==e&&e.focus()}}updateDisabledState(e){const t=Or()(e)||!cP(e);this.setState({isDisabled:t})}resetState(){this.setState(SP)}render(){const{intl:{formatMessage:e}}=this.props,{href:t,linkText:s,isDisabled:n,isHrefValid:i}=this.state,r=n?null:this.onSubmit;return a.a.createElement("div",{ref:this.onChildContainerRefSet},a.a.createElement(K.a,{onEscape:this.closeAndReset,onEnter:r},a.a.createElement(EP,{href:t,linkText:s,isHrefValid:i,onHrefChange:this.onHrefChange,onLinkTextChange:this.onLinkTextChange})),a.a.createElement(wP,null,a.a.createElement(kP,{appearance:"primary",onClick:this.onSubmit,isDisabled:n},e(vP.linkButton)),a.a.createElement(kP,{appearance:"subtle",onClick:this.closeAndReset},e(vP.cancelButton))))}}IP.displayName="WebLinkCreateLinkView";var CP=Object($t.a)([j.injectIntl,Object(is.a)("button",{onSubmit:"clicked",onCancel:"clicked"}),Object(E.a)({onSubmit:"webLinkSubmit",onCancel:"webLinkCancel"}),Object(i.b)(e=>({linkedPagesCount:Object(PT.e)(e),createLinkClickedCount:Object(PT.b)(e)}),e=>({onCancel:()=>e(Object(TT.j)()),onSubmit:(t,s,n)=>e(Object(TT.c)(Object(Li.i)(t),s,n))}))])(IP);const TP=Object(j.defineMessages)({heading:{id:"issue.details.web-links.heading",defaultMessage:"Web links"}});const PP=$.default.div(["margin:","px 0;padding-right:1px;"],q.e);class _P extends n.Component{renderHeading(){const{intl:e,isCreateWebLinkOpened:t,onAddButtonClicked:s,links:n,canAddWebLinks:i}=this.props,r=Boolean(n&&n.length);return t||r?a.a.createElement(Ba.c,null,a.a.createElement(Ba.e,null,e.formatMessage(TP.heading)),a.a.createElement(Ba.d,null,i&&a.a.createElement(iP,{onClick:s}))):null}renderLineCards(){const{links:e,canAddWebLinks:t}=this.props;return e&&e.length?a.a.createElement(PP,null,a.a.createElement(tP,{links:e,canDelete:t})):null}renderCreateLinkView(){return this.props.isCreateWebLinkOpened?a.a.createElement(CP,null):null}render(){return a.a.createElement(a.a.Fragment,null,this.renderHeading(),this.renderLineCards(),this.renderCreateLinkView())}}_P.displayName="WebLinksView";var xP=Object($t.a)([j.injectIntl,Object(E.a)({onAddButtonClicked:"addWebLink"}),Object(i.b)(e=>({isCreateWebLinkOpened:Object(PT.c)(e),links:Object(PT.f)(e),canAddWebLinks:Object(PT.a)(e)}),e=>({onAddButtonClicked:()=>e(Object(TT.k)())}))])(_P);class DP extends n.Component{maybeWrapInSectionWrapper(e){const{isCompactMode:t}=this.props;return e?a.a.createElement(nm,{isCompactMode:t},e):e}renderEcosystemContentPanels(){const{contentPanels:e,isCompactMode:t}=this.props,s=e.map(e=>{if("FORGE_ENTITY_TYPE"===e.type){const{name:s,appKey:n,moduleKey:i,dateAdded:r,panelInstanceId:o,extension:c}=e,l=Object(Va.g)(n,i,o,r);return a.a.createElement(zm,{key:l,panelKey:l,name:s,appKey:n,moduleKey:i,extension:c,isCompactMode:t,externalId:"issue.ecosystem.content-panel.forge"})}return(a.a.createElement(Lm,{key:e.name,name:e.name,appKey:e.appKey,moduleKey:e.moduleKey,externalId:"issue.ecosystem.content-panel"}))});return a.a.createElement(a.a.Fragment,null,s)}render(){const{isComplete:e,fields:t,isCompactMode:s,issueKey:n}=this.props,i=Object.keys(t),r=i.includes(yd.k)?a.a.createElement(vC,null):null,o=i.includes("subtasks")?a.a.createElement(CT,{key:n}):null,c=Object(T.q)(t)?a.a.createElement(tS,{key:n}):null,l=i.includes("children-issues")?a.a.createElement(ik,{key:n}):null,u=e?a.a.createElement(Sg,null):null,d=i.includes("portfolio-child-issues")?a.a.createElement(FC,{key:n}):null,p="not-enrolled"!==Object(qt.getProductRequirementsDocDiscoveryFlag)()?a.a.createElement(VC,null):null;return a.a.createElement(im.a,null,({layoutDescriptor:e})=>a.a.createElement(am,{isCompactMode:s},(e=>{const{visibleContentItems:t,requestPanelContentItems:s}=e.content;return Object(qt.isContentTemplateRendererEnabled)()?a.a.createElement(bd,null):a.a.createElement(a.a.Fragment,null,s&&a.a.createElement(OT,{requestPanelItems:s}),a.a.createElement(pm,{layoutItems:t,area:"content"}))})(e),this.maybeWrapInSectionWrapper(u),this.maybeWrapInSectionWrapper(p),this.maybeWrapInSectionWrapper(c),this.maybeWrapInSectionWrapper(l),this.maybeWrapInSectionWrapper(d),this.maybeWrapInSectionWrapper(o),this.maybeWrapInSectionWrapper(a.a.createElement(NC,null)),this.maybeWrapInSectionWrapper(r),this.maybeWrapInSectionWrapper(Object(qt.isRelatedIssuesPanelEnabled)()?a.a.createElement(sm,null):null),this.maybeWrapInSectionWrapper(a.a.createElement($w,null)),this.maybeWrapInSectionWrapper(a.a.createElement(xP,null)),this.maybeWrapInSectionWrapper(this.renderEcosystemContentPanels())))}}DP.displayName="ContentItems",DP.displayName="ContentItems",DP.defaultProps={isComplete:!1,isCompactMode:!1,contentPanels:[],fields:{}};var AP=Object($t.a)([Object(i.b)(e=>({issueKey:Object(C.B)(e),contentPanels:Object(Hn.f)(e),isComplete:Object(T.n)(e),fields:Object(On.t)(e)}),{})])(DP),MP=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/get-tenant-context/index.js");var LP=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/animations/slide-down-on-mount.js"),RP=s("./src/packages/issue/fields/components/field-pin/src/utils.js"),NP=s("./src/packages/issue/issue-view/src/selectors/tab-selector.js"),UP=s("./src/packages/issue/issue-view/src/common/state/selectors/field-visibility-selector.js");const FP=e=>Object(yn.createSelector)(On.t,e=>e,(t,s)=>e.filter(e=>{const t=e.type,{payload:n}=e;return!!n&&("TAB"===e.type?Object(NP.b)(s,n.tabId):void 0!==n.itemId?Object(UP.b)({fieldType:t,fieldId:n.itemId,state:s}):!(!Object(UP.a)(t)||void 0===n.fieldId)&&Object(UP.b)({fieldType:t,fieldId:n.fieldId,state:s}))}));var VP=s("./node_modules/@atlaskit/icon/glyph/folder.js"),KP=s.n(VP);var BP=s("./src/packages/issue/issue-view/src/views/issue-base/utils/get-show-pin-button.js"),WP=s("./src/packages/issue/issue-glance/src/main.js"),HP=Object($t.a)()(WP.a);function GP(){return(GP=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function $P(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const qP=(e,t)=>e.items.reduce((e,s)=>{switch(s.type){case"FIELD":return[...e,Object(On.m)(s.id)(t)];default:return Fn.i.safeError("issue.views.issue-base.context.tab-glance",`Unknown tab item '${JSON.stringify(s)}'`,new p.a({eventNameSuffix:"issue.error",type:"js",app:"issue"})),e}},[]).join(", "),zP=()=>a.a.createElement(KP.a,{primaryColor:Ae.a.N500,label:""});zP.displayName="TabIcon";const YP=Object(Ul.a)(e=>({tabItems:e})),QP=e=>{if(void 0!==e.shouldHideTab)return null;const{tabId:t,area:s}=e,n=$P(e,["tabId","area"]);return(a.a.createElement(HP,GP({itemId:t},n)))};QP.displayName="TabGlance";var JP=Object(i.b)(()=>{const e=Object(NP.c)();return(t,s)=>{const n=e(t,s.tabId);if(n){return{title:n.name,content:qP(n,t),onClickPayload:YP(n.items),Icon:zP,showPinButton:Object(BP.a)(s.area)}}return{shouldHideTab:!0}}},{})(QP);function ZP(){return(ZP=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}var XP=({item:e,onOpenPanel:t})=>{const{createAnalyticsEvent:s}=Object(Nd.a)(),{key:i,type:r,payload:o,hasGlobalSpotlightTarget:c}=e,l=Object(n.useCallback)(e=>{Object(za.h)(s({}),"contextPanel viewed","issueContextPanel",{contextPanelKey:i,contextPanelType:r,tabItemsCount:e.tabItems?e.tabItems.length:0});const n=e&&e.title?e.title:r;t({payload:e,title:n,type:r,key:i})},[i,r,s,t]);if("TAB"===r)return o&&"string"==typeof o.tabId&&o.tabId?a.a.createElement(JP,{createAnalyticsEvent:s,tabId:o.tabId,onOpenPanel:l,area:"context"}):(y.a.safeError("context.context-item.view","Could not find payload for Tab Item when trying to render TabGlance",new p.a({eventNameSuffix:"issue.error",type:"js",app:"issue"})),null);const u=Object(cm.a)()[r],d=u&&u.item;if(!d)return y.a.safeError("issue",`Could not find a matching component for "${r}"`,new p.a({eventNameSuffix:"issue.error",type:"js",app:"issue"})),null;const m=a.a.createElement(d,ZP({},o,{onOpenPanel:l,area:"context",createAnalyticsEvent:s}));if(!0===c&&void 0!==(null==o?void 0:o.fieldId)){const e=`global-spotlight-target-${o.fieldId}`;return(a.a.createElement(om.a,{id:e,key:e},m))}return m};function e_(){return(e_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}class t_ extends n.Component{constructor(...e){super(...e),this.onOpenPanel=e=>{const{item:{key:t,type:s}}=this.props,n={title:e&&e.title||s,type:s,key:t,payload:e};this.props.onOpenPanel(n)}}render(){const{item:e,createAnalyticsEvent:t}=this.props,{type:s,payload:n,hasGlobalSpotlightTarget:i}=e;if("TAB"===s)return n&&n.tabId?a.a.createElement(JP,{createAnalyticsEvent:t,tabId:n.tabId,onOpenPanel:this.onOpenPanel,area:"context"}):(y.a.safeError("context.context-item.view","Could not find payload for Tab Item when trying to render TabGlance",new p.a({eventNameSuffix:"issue.error",type:"js",app:"issue"})),null);const r=Object(cm.a)()[s],o=r&&r.item;if(!o)return y.a.safeError("issue",`Could not find a matching component for "${s}"`,new p.a({eventNameSuffix:"issue.error",type:"js",app:"issue"})),null;const c=a.a.createElement(o,e_({},n,{onOpenPanel:this.onOpenPanel,area:"context",createAnalyticsEvent:t}));if(i&&void 0!==(null==n?void 0:n.fieldId)){const e=`global-spotlight-target-${n.fieldId}`;return(a.a.createElement(om.a,{id:e,key:e},c))}return c}}function s_(){return(s_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}t_.displayName="ContextItemView";const n_=Object(i.b)(null,{onOpenPanel:e=>Object(rm.b)(e)})(e=>{let{onOpenPanel:t}=e;if(Object(qt.isGlanceAndTabSweetStateEnabled)()){const[,e]=Object(dl.b)();t=t=>{e(t)}}return(a.a.createElement(M.a,{id:"context-item",packageName:"issue-view"},a.a.createElement(XP,s_({},e,{onOpenPanel:t}))))}),a_=tt()(Object(b.a)(),Object(is.a)("contextPanel",{onOpenPanel:"viewed"}),Object(i.b)(()=>({}),{onOpenPanel:(e,t)=>(Object(BS.a)(t,{name:"issue",attributes:{contextPanelKey:e.key,contextPanelType:e.type,tabItemsCount:e.payload&&e.payload.tabItems&&e.payload.tabItems.length}}),Object(rm.b)(e))}),Object(ls.a)())(t_);var i_=Object(Jj.a)(qt.isAnalyticRefactorEnabled,n_,a_),r_=s("./src/packages/issue/issue-view/src/views/issue-base/context/context-items/common/utils.js"),o_=s("./node_modules/@atlaskit/icon/glyph/chevron-up.js"),c_=s.n(o_),l_=Object(j.defineMessages)({showLessText:{id:"issue.views.issue-base.context.context-items.expander.show-less-button.show-less-text",defaultMessage:"Show less"}});const u_=Object($.default)(ba.a)(["& > span{color:",";& > span:first-child{align-self:auto;margin-left:","px;margin-right:","px;}}&&,&:hover,&:focus{height:inherit;text-align:left;}"],Ae.a.B400,-q.e,-q.e/2),d_=({onCollapse:e,intl:t})=>a.a.createElement(u_,{externalId:"showmorelink.collapse",appearance:"subtle",iconBefore:a.a.createElement(c_.a,{label:"",primaryColor:Ae.a.B400,size:"large"}),alt:t.formatMessage(l_.showLessText),shouldFitContainer:!0,onClick:(t,s)=>{e(),Object(za.h)(s,"showLess")},"data-test-id":"issue.views.issue-base.context.context-items.expander.show-less-button.container"},a.a.createElement(j.FormattedMessage,l_.showLessText));d_.displayName="ShowLessButton";var p_=Object(j.injectIntl)(d_),m_=s("./src/packages/issue/issue-view/src/views/issue-base/context/context-items/view/expander/show-more-button/view.js");const b_=$.default.div(["margin-left:","px;margin-bottom:","px;"],-q.e,1.5*q.e);function f_(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const g_=e=>{let{isShowMoreExpanded:t,onCollapse:s}=e,n=f_(e,["isShowMoreExpanded","onCollapse"]);return(a.a.createElement("div",null,a.a.createElement(b_,null,t?a.a.createElement(p_,{onCollapse:s}):a.a.createElement(m_.a,n))))};g_.displayName="ContextItemsExpander";var h_=g_,y_=Object($t.a)([Object(i.b)((e,t)=>({visibleSecondaryContextItemNameList:Object(r_.a)(t.visibleSecondaryContextItems,Object(NP.d)(e),Object(On.t)(e))}),{})])(h_),O_=Object(j.defineMessages)({header:{id:"issue.views.issue-base.context.context-items.pinned-fields-box.header",defaultMessage:"Your pinned fields"}});const j_=$.default.div(["margin:-8px -","px ","px;padding:","px ","px 0px;border-radius:3px;display:flex;flex-direction:column;background:",";&:empty{display:none;}&::before{",";content:'","';margin-top:","px;margin-bottom:","px;text-transform:uppercase;font-size:11px;}"],1.5*q.e,1.5*q.e,1.25*q.e,1.5*q.e,Ae.a.N20,Ae.c.h200(),e=>e.header,q.e/2,1.5*q.e),E_=({children:e})=>{const t=Object(Te.c)(),{formatMessage:s}=t;return a.a.createElement(j_,{header:s(O_.header),"data-test-id":"issue.views.issue-base.context.context-items.pinned-fields-box.pinned-items"},e)};E_.displayName="PinnedFieldsBox";var v_=E_;const k_=e=>"SLA_PANEL"!==e.type&&!!Object(r_.d)(e.payload),w_=$.default.div([""]),S_=({primaryContextItems:e,contextItemsMap:t})=>{let s=!1;const[,{register:i}]=Object(Jo.b)(),r=Object(n.useCallback)(e=>{i("PIN_FIELD",e)},[i]),o=e=>{const s=t[e];return void 0!==s?a.a.createElement(i_,{item:s,key:e}):null},c=e.map(e=>!s&&k_(e)&&"assignee"!==e.type?(s=!0,a.a.createElement(w_,{innerRef:r,key:e.key},o(e.key))):o(e.key));return a.a.createElement(a.a.Fragment,null,c)};S_.displayName="PrimaryItems";var I_=S_;const C_=$.default.div(["display:flex;flex-direction:column;padding-bottom:0;"]),T_=$.default.div(["margin-top:0px;padding-bottom:0;"]),P_=$.default.div(["padding-top:","px;box-shadow:inset 0 2px 0 0 ",";margin-left:","px;"],q.e,Ae.a.N30,-q.e);function __(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function x_(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?__(Object(s),!0).forEach((function(t){D_(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):__(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function D_(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class A_ extends n.Component{constructor(...e){super(...e),this.state=x_(x_({},Object(r_.c)(this.props)),{},{contextItemsMap:{}}),this.onExpand=()=>{this.props.onSecondaryContextItemsVisibilityToggle(!0),this.onUpdateLayoutDescriptor()},this.onCollapse=()=>{this.props.onSecondaryContextItemsVisibilityToggle(!1),this.onUpdateLayoutDescriptor()}}static getDerivedStateFromProps(e){const{primaryContextItems:t,secondaryContextItems:s}=e.layoutDescriptor.context,n={};return t.concat(s).forEach(e=>{n[e.key]=e}),{contextItemsMap:n}}componentDidMount(){this.onRender(),this.onUpdateLayoutDescriptor()}componentDidUpdate(e,t){this.shouldUpdateItemVisibility(e,t)&&this.onUpdateLayoutDescriptor()}onUpdateLayoutDescriptor(){const e=Object(r_.c)(this.props);this.setState(e),this.onRender()}onRender(){const{primaryContextItems:e,secondaryContextItems:t}=this.props.layoutDescriptor.context,s=e.concat(t);this.props.onRendered(s)}shouldUpdateItemVisibility(e,t){const s="VISIBLE"===this.props.secondaryContextItemVisibility,n=e.layoutDescriptor.context.primaryContextItems,a=this.props.layoutDescriptor.context.primaryContextItems,i=e.pinnedFields,r=this.props.pinnedFields,o=!Ua()(t.contextItemsMap,this.state.contextItemsMap),c=!s&&n.length<a.length,l=!Ua()(i,r),u=!s&&n.length===a.length&&!Ua()(n,a),d=e.layoutDescriptor.context.secondaryContextItems,p=this.props.layoutDescriptor.context.secondaryContextItems,m=!Ua()(e.visibleSecondaryContextItems,this.props.visibleSecondaryContextItems)&&Ua()(d,p);return o||c||u||m||l}renderContextItem(e){const t=this.state.contextItemsMap[e];return void 0!==t?a.a.createElement(i_,{item:t,key:e}):null}renderPrimaryItems(){const{primaryContextItems:e}=this.state.layoutDescriptor.context;if(Object(qt.isOptInBackToBentoEnabled)())return a.a.createElement(C_,{"data-test-id":"issue.views.issue-base.context.context-items.primary-items"},this.renderPinnedItems(),a.a.createElement(I_,{primaryContextItems:e,contextItemsMap:this.state.contextItemsMap}));const t=e.map(e=>this.renderContextItem(e.key));return(a.a.createElement(C_,{"data-test-id":"issue.views.issue-base.context.context-items.primary-items"},this.renderPinnedItems(),t))}renderSecondaryItems(){const{secondaryContextItems:e}=this.state.layoutDescriptor.context,t=e.map(e=>this.renderContextItem(e.key));return a.a.createElement(LP.a,null,a.a.createElement(T_,null,t))}renderPinnedItems(){const{secondaryContextItems:e,primaryContextItems:t}=this.props.layoutDescriptor.context,{pinnedFields:s}=this.props,n=[...e,...t].reduce((e,t)=>e.set(Object(r_.d)(t.payload),t),new Map),i=s.reduce((e,t)=>{const s=n.get(t);return s&&e.push(this.renderContextItem(s.key)),e},[]);return a.a.createElement(v_,null,i)}render(){const e="HIDDEN"!==this.props.secondaryContextItemVisibility,t=this.state.visibleSecondaryContextItems,s=t.length;return a.a.createElement("div",{"data-test-id":"issue.views.issue-base.context.context-items"},this.renderPrimaryItems(),e?this.renderSecondaryItems():null,a.a.createElement(Qo.a,{name:"SHOW_MORE"},a.a.createElement("div",null,s>0&&a.a.createElement(y_,{isShowMoreExpanded:e,onExpand:this.onExpand,onCollapse:this.onCollapse,visibleSecondaryContextItems:t,fieldCount:s}))),a.a.createElement(P_,null),a.a.createElement(Ws.a,{onMount:e=>Object(za.b)(e,"PinnedFieldOnboarding mounted")}))}}A_.displayName="ContextItems",A_.displayName="ContextItems",A_.defaultProps={forgeExtensions:[],pinnedFields:[],onRendered:o.a};var M_=Object($t.a)([Object(i.b)((e,t)=>({visibleSecondaryContextItems:FP(t.layoutDescriptor.context.secondaryContextItems)(e),forgeContext:Object(Hc.b)(e),source:Object(C.b)(e),issueKey:Object(RP.d)(e)}),{})])(Object(RP.f)(A_));var L_=({layoutDescriptor:e,isProjectAdmin:t})=>{const{createAnalyticsEvent:s}=Object(Nd.a)(),{primaryContextItems:a,secondaryContextItems:i}=e.context,r=[...a,...i].filter(e=>"TAB"===e.type).length>0;return Object(n.useEffect)(()=>{if(r){const e=t?"bentoTabsProjectAdminChangeboarding":"bentoTabsChangeboarding";Object(za.f)(s({}),`${e} viewed`,e)}},[]),null};const R_=e=>t=>{Object(f.a)(t,{action:"viewed",actionSubjectId:e})};class N_ extends n.Component{componentDidMount(){this.props.onMount()}render(){return null}}N_.displayName="ChangeboardingTrigger";var U_=Object(Jj.a)(qt.isAnalyticRefactorEnabled,L_,({layoutDescriptor:e,isProjectAdmin:t})=>{const{primaryContextItems:s,secondaryContextItems:n}=e.context;if([...s,...n].filter(e=>"TAB"===e.type).length>0){const e=t?"bentoTabsProjectAdminChangeboarding":"bentoTabsChangeboarding",s=tt()(Object(is.a)(e,{onMount:"onMount"}),Object(v.b)(e))(N_);return a.a.createElement(s,{onMount:R_(e)})}return null});function F_(){return(F_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const V_=e=>{const{isCompletedLoading:t,isProjectAdmin:s,hasJsd:n}=e,i=!n;return a.a.createElement(im.a,null,({layoutDescriptor:n})=>a.a.createElement(a.a.Fragment,null,a.a.createElement(M_,F_({layoutDescriptor:n},e)),t&&i&&a.a.createElement(U_,{layoutDescriptor:n,isProjectAdmin:s})))};V_.displayName="ContextItemsWithLayoutDescriptor";var K_=Object($t.a)([Object(as.a)(e=>({onRendered:t=>{const s=t.filter(e=>"ecosystemGlance"===e.type).map(e=>e.payload);s.length>0&&e("ecosystem.glances",Object(Wn.e)(s))}})),Object(i.b)(e=>{const t=Object(C.C)(e)||{};return{secondaryContextItemVisibility:Object(Gn.c)(e)?"VISIBLE":"HIDDEN",isProjectAdmin:Object(qw.c)(e),isCompletedLoading:Object(T.n)(e),hasJsd:!!t[MP.a.JIRA_SERVICEDESK]}},e=>({onSecondaryContextItemsVisibilityToggle:t=>e(t?(()=>({type:"EXPAND_SHOW_MORE"}))():(()=>({type:"COLLAPSE_SHOW_MORE"}))())}))])(V_),B_=s("./node_modules/@atlaskit/icon/glyph/arrow-left.js"),W_=s.n(B_),H_=s("./src/packages/issue/issue-view/src/views/issue-base/context/side-panel/view.js"),G_=s("./src/packages/issue/issue-view/src/views/issue-base/context/side-panel/styled.js"),$_=s("./src/packages/platform/observability/analytics-web-react/src/components/analytics-data.js"),q_=s("./src/packages/issue/issue-view/src/common/state/selectors/get-field-type.js");var z_=(e,t)=>{const s=Object(cm.a)();return e.reduce((e,n)=>{switch(n.type){case"FIELD":{const i=Object(q_.a)(Object(On.w)(n.id,t));if(!i||!Object.keys(s).includes(i))return Fn.i.safeError("issue.views.issue-base.context.tab-panel",`Could not find a matching component for field '${i||"(unknown type)"}' with id '${n.id}'`,new p.a({eventNameSuffix:"issue.error",type:"js",app:"issue"})),e;const r=s[i].item,o=a.a.createElement(r,{key:n.id,fieldId:n.id,area:"tab-panel"});return e.push({fieldType:i,component:o}),e}default:return Fn.i.safeError("issue.views.issue-base.context.tab-panel",`Unknown tab item '${JSON.stringify(n)}'`,new p.a({eventNameSuffix:"issue.error",type:"js",app:"issue"})),e}},[])},Y_=s("./src/packages/issue/issue-view/src/views/issue-details/sticky-header-container/styled.js");const Q_=$.default.div(["flex-shrink:0;background:",";outline:0;min-height:40px;"],Ae.a.N0),J_=$.default.div(["display:flex;align-items:center;position:relative;box-sizing:border-box;box-shadow:inset 0 ","px 0 0 ",";margin-left:","px;padding-left:","px;"," &:hover{cursor:pointer;}&:focus{box-shadow:inset 0 0 0 ","px ",";outline:0;}"],-2,Ae.a.N30,-Y_.b,Y_.b,({maxWidth:e})=>`max-width: ${e}px;`,2,Ae.a.B100),Z_=$.default.div(["height:100%;display:inline-block;width:100%;",""],({maxWidth:e})=>`max-width: ${e}px;`),X_=$.default.button(["display:flex;height:28px;width:28px;border:none;border-radius:50%;background:",";color:",";align-items:center;padding-left:2px;margin-left:","px;&:hover{cursor:pointer;}"],Ae.a.N30,Ae.a.N60,q.e/2);var ex=Object(j.defineMessages)({emptyStateHeader:{id:"issue.context.tab-panel.empty-state.header",defaultMessage:"No fields to show"},emptyStateMessage:{id:"issue.context.tab-panel.empty-state.message",defaultMessage:"If you expect to see fields here, ask your Jira admin to check permissions and field configuration."},emptyStateMessageAdmin:{id:"issue.context.tab-panel.empty-state.message.admin",defaultMessage:"If you expect to see fields here, check your permission and field configuration settings."}});const tx=$.default.div(["padding:","px ","px ","px ","px;overflow:auto;height:100%;"],2*q.e,q.e,q.e,1.25*q.e);function sx(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function nx(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?sx(Object(s),!0).forEach((function(t){ax(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):sx(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function ax(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class ix extends n.Component{componentDidMount(){const{renderedItems:e,tabItems:t}=this.props,s=new Set(e.map(e=>e.fieldType)),n=t.map(e=>e.id).filter(e=>!s.has(e));this.props.onComponentMounted({renderedFieldsCount:s.size,unrenderedFieldsCount:n.length,unrenderedFieldTypes:n.join(",")})}render(){const{renderedItems:e,isProjectAdmin:t,contentWidth:s,intl:{formatMessage:n}}=this.props;return e.every(e=>null==e.component)?a.a.createElement(dO.a,{size:"narrow",isSubtle:!0,header:n(ex.emptyStateHeader),description:n(t?ex.emptyStateMessageAdmin:ex.emptyStateMessage)}):a.a.createElement(tx,null,a.a.createElement(Z_,{maxWidth:s},e.map(e=>e.component)))}}ix.displayName="TabPanel";var rx=Object($t.a)([j.injectIntl,Object(is.a)("fieldTab",{onComponentMounted:"rendered"}),Object(i.b)((e,t)=>({onComponentMounted:(e,s)=>{Object(BS.a)(s,{name:t.panelKey,attributes:nx({contextPanelType:t.type},e)})}}),{})])(ix),ox=Object($t.a)([Object($_.a)({attributes:{contextPanelType:"TAB"}}),Object(i.b)((e,{type:t,panelKey:s,payload:{tabItems:n}})=>({renderedItems:z_(n,Object(On.t)(e)),tabItems:n,type:t,panelKey:s,isProjectAdmin:Object(qw.c)(e)}),{})])(rx);function cx(){return(cx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const lx=e=>{const{isCompact:t,refs:s,layoutItemEntryMap:i}=e,[r,o]=Object(dl.b)(),c=void 0!==r,l=Object(n.useCallback)(()=>{o(void 0)},[o]);let u=null;if(r){const e=i[r.type];u="TAB"===r.type?ox:e&&e.panel}return(a.a.createElement(H_.a,{refs:s,isOpen:c,isCompact:t},e=>a.a.createElement(a.a.Fragment,null,a.a.createElement(Q_,{"data-test-id":"issue.views.issue-base.context.context-panel.back"},a.a.createElement(J_,{maxWidth:e.headerWidth,onClick:l,tabIndex:"0"},a.a.createElement(X_,null,a.a.createElement(W_.a,{size:"medium",label:"Return"})),a.a.createElement(G_.c,null,r&&r.title))),u&&r?a.a.createElement(u,{contentWidth:e.contentWidth,type:r.type,panelKey:r.key,payload:r.payload}):null)))};lx.displayName="ContextPanel",lx.displayName="ContextPanel";class ux extends n.Component{renderContent(e){const{panel:t,onHidePanel:s,layoutItemEntryMap:n}=this.props;let i=null;if(t){const e=n[t.type];i="TAB"===t.type?ox:e&&e.panel}return(a.a.createElement(a.a.Fragment,null,a.a.createElement(Q_,{"data-test-id":"issue.views.issue-base.context.context-panel.back"},a.a.createElement(J_,{maxWidth:e.headerWidth,onClick:s,tabIndex:"0"},a.a.createElement(X_,null,a.a.createElement(W_.a,{size:"medium",label:"Return"})),a.a.createElement(G_.c,null,t&&t.title))),i?a.a.createElement(i,cx({contentWidth:e.contentWidth},t?{type:t.type,panelKey:t.key,payload:t.payload}:null)):null))}render(){const{isOpen:e,isCompact:t,refs:s}=this.props;return(a.a.createElement(H_.a,{refs:s,isOpen:e,isCompact:t},e=>this.renderContent(e)))}}ux.displayName="OldContextPanel",ux.displayName="ContextPanel";var dx=Object(Jj.a)(qt.isGlanceAndTabSweetStateEnabled,lx,ux),px=tt()(Object(i.b)(e=>({isOpen:Object(gd.b)(e),panel:Object(gd.a)(e),layoutItemEntryMap:Object(cm.a)()}),{onHidePanel:rm.a}),Object(ls.a)())(dx),mx=s("./src/packages/issue/issue-view/src/actions/ecosystem-glance-actions.js");const bx=$.default.div(["",";width:100%;height:100%;overflow:auto;position:relative;padding:","px;"],({panelWidth:e})=>`min-width: ${e}px;`,q.e);function fx(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function gx(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const hx=Object(n.memo)(({refreshedOn:e=0,onGlanceHideAnalytics:t=o.a,appKey:s,moduleKey:i,glance:r,styles:c,statusCategory:l})=>{const[u,d]=Object(n.useState)(window.connectHost),[,p]=Object(dl.c)(),{options:{origin:m}}=r;Object(n.useEffect)(()=>{u||(Fn.i.safeInfo("issue.ecosystem.glance.panel","Delayed initialization of ecosystem glance panel"),Object(zn.b)(e=>d(e)))},[u]);const b=new Qn.a;return a.a.createElement(a.a.Fragment,null,a.a.createElement(Q_,null,a.a.createElement(J_,{maxWidth:c.headerWidth,onClick:()=>{t(Object(Wn.d)(s,i,r.status)),p(void 0)},tabIndex:"0"},a.a.createElement(X_,null,a.a.createElement(W_.a,{size:"medium",label:"Return"})),a.a.createElement(G_.c,null,r.name))),u&&a.a.createElement(bx,{panelWidth:c.contentWidth},a.a.createElement(Z_,{maxWidth:c.contentWidth},a.a.createElement(Yn.a,{key:`connect-iFrame-${m}-${l}-${e}`,connectHost:u,appKey:s,moduleKey:i,url:r.options.url,options:b.convertConnectOptions(r.options),height:"100%",width:"100%",connectIframeProvider:b,timeoutIndicator:()=>a.a.createElement(na,{appName:r.name,appKey:s})}))))},(e,t)=>{const s=e.appKey!==t.appKey,n=e.moduleKey!==t.moduleKey,a=e.statusCategory!==t.statusCategory,i=e.refreshedOn!==t.refreshedOn,r=e.styles!==t.styles;return!(s||n||a||r||i)});class yx extends n.Component{constructor(e){super(e),this.handleHideGlancePanel=()=>{const{appKey:e,moduleKey:t,glance:s,onGlanceHideAnalytics:n,onHideGlance:a}=this.props;n(Object(Wn.d)(e,t,s.status)),a()},this.state={connectHost:window.connectHost}}componentDidMount(){this.state.connectHost||(Fn.i.safeInfo("issue.ecosystem.glance.panel","Delayed initialization of ecosystem glance panel"),Object(zn.b)(e=>this.setState({connectHost:e})))}shouldComponentUpdate(e,t){const s=this.props.appKey!==e.appKey,n=this.props.moduleKey!==e.moduleKey,a=this.state.connectHost!==t.connectHost,i=this.props.statusCategory!==e.statusCategory,r=this.props.refreshedOn!==e.refreshedOn,o=this.props.styles!==e.styles;return s||n||a||i||o||r}render(){const{glance:e,glance:{options:{origin:t}},refreshedOn:s,statusCategory:n}=this.props,{appKey:i,moduleKey:r,styles:o}=this.props,c=new Qn.a;return a.a.createElement(a.a.Fragment,null,a.a.createElement(Q_,null,a.a.createElement(J_,{maxWidth:o.headerWidth,onClick:this.handleHideGlancePanel,tabIndex:"0"},a.a.createElement(X_,null,a.a.createElement(W_.a,{size:"medium",label:"Return"})),a.a.createElement(G_.c,null,e.name))),this.state.connectHost&&a.a.createElement(bx,{panelWidth:o.contentWidth},a.a.createElement(Z_,{maxWidth:o.contentWidth},a.a.createElement(Yn.a,{key:`connect-iFrame-${t}-${n}-${s}`,connectHost:this.state.connectHost,appKey:i,moduleKey:r,url:e.options.url,options:c.convertConnectOptions(e.options),height:"100%",width:"100%",connectIframeProvider:c,timeoutIndicator:()=>a.a.createElement(na,{appName:e.name,appKey:i})}))))}}yx.displayName="GlancePanelOld",yx.displayName="GlancePanel",yx.defaultProps={refreshedOn:0,onGlanceHideAnalytics:o.a};var Ox=Object($t.a)([Object(as.a)(e=>({onGlanceHideAnalytics:t=>e("hide",function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?fx(Object(s),!0).forEach((function(t){gx(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):fx(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},t))})),Object(i.b)((e,t)=>({glance:Object(Hn.l)(t.appKey,t.moduleKey)(e),statusCategory:Object(x.b)(e),refreshedOn:Object(T.d)(e)}),e=>({onHideGlance:()=>{e(Object(mx.a)()),e(Object(_t.e)())}}))])(Object(Jj.a)(qt.isGlanceAndTabSweetStateEnabled,hx,yx)),jx=s("./src/packages/forge/forge-ui-analytics/src/ui/issue-glance/index.js"),Ex=s("./src/packages/forge/forge-ui-async/src/ui/issue-glance/async.js");const vx=({glance:e,context:t,styles:s,source:i,isOpen:r})=>{const[o,c]=Object(n.useState)(!1),[,l]=Object(dl.c)(),u=Object(n.useCallback)(()=>{l(void 0)},[l]);return Object(n.useEffect)(()=>{r&&!o&&c(!0)},[r,o]),a.a.createElement(jx.a,{analyticsData:{source:i},shouldFireScreenEvent:r},a.a.createElement(Q_,{onClick:void 0,tabIndex:void 0},a.a.createElement(J_,{maxWidth:s.headerWidth,onClick:u,tabIndex:"0"},a.a.createElement(X_,null,a.a.createElement(W_.a,{size:"medium",label:"Return"})),a.a.createElement(G_.c,null,e.title))),a.a.createElement(bx,{panelWidth:s.contentWidth},a.a.createElement(Z_,{maxWidth:s.contentWidth},Object(qt.isIssueGlanceNewLoadStrategyEnabled)()?o&&a.a.createElement(Ex.a,{platformContext:t,extension:e.extension,analyticsData:{source:i}}):a.a.createElement(Ex.a,{platformContext:t,extension:e.extension,analyticsData:{source:i}}))))};vx.displayName="ForgeGlancePanel",vx.displayName="ForgeGlancePanel";class kx extends n.Component{constructor(...e){super(...e),this.state={shouldRenderGlance:!1},this.onHideForgeGlance=()=>{const{onHideForgeGlance:e}=this.props;e()}}componentDidUpdate(){this.props.isOpen&&!this.state.shouldRenderGlance&&this.setState({shouldRenderGlance:!0})}render(){const{glance:e,context:t,styles:s,source:n,isOpen:i}=this.props;return(a.a.createElement(jx.a,{analyticsData:{source:n},shouldFireScreenEvent:i},a.a.createElement(Q_,{onClick:void 0,tabIndex:void 0},a.a.createElement(J_,{maxWidth:s.headerWidth,onClick:this.onHideForgeGlance,tabIndex:"0"},a.a.createElement(X_,null,a.a.createElement(W_.a,{size:"medium",label:"Return"})),a.a.createElement(G_.c,null,e.title))),a.a.createElement(bx,{panelWidth:s.contentWidth},a.a.createElement(Z_,{maxWidth:s.contentWidth},Object(qt.isIssueGlanceNewLoadStrategyEnabled)()?this.state.shouldRenderGlance&&a.a.createElement(Ex.a,{platformContext:t,extension:e.extension,analyticsData:{source:n}}):a.a.createElement(Ex.a,{platformContext:t,extension:e.extension,analyticsData:{source:n}})))))}}kx.displayName="ForgeGlancePanelOld",kx.displayName="ForgeGlancePanel";var wx=Object($t.a)([Object(i.b)(e=>({context:Object(Hc.b)(e),source:Object(C.b)(e)}),{onHideForgeGlance:mx.a})])(Object(Jj.a)(qt.isGlanceAndTabSweetStateEnabled,vx,kx));class Sx extends n.Component{renderGlance(e,t){const{glance:s}=this.props;switch(s.glanceType){case"CONNECT_ENTITY_TYPE":return a.a.createElement(Ox,{panelWidth:e.panelWidth,styles:e,appKey:s.appKey,moduleKey:s.moduleKey,key:`issue.ecosystem.glance.panel_${s.appKey}_${s.moduleKey}`});case"FORGE_ENTITY_TYPE":return a.a.createElement(wx,{panelWidth:e.panelWidth,styles:e,key:`issue.forge.glance.panel_${s.appKey}_${s.moduleKey}`,glance:s,isOpen:t});default:return null}}render(){const{isCompact:e,openedGlance:t,glance:s,refs:n}=this.props,i=!!t&&t.appKey===s.appKey&&t.moduleKey===s.moduleKey;return a.a.createElement(H_.a,{refs:n,isOpen:i,isCompact:e},e=>this.renderGlance(e,i))}}Sx.displayName="GlanceAnimatedPanel",Sx.defaultProps={openedGlance:null};var Ix=Object(as.a)(e=>({onMount:t=>e("mounted",t)}))(Sx),Cx=s("./src/packages/issue/issue-view/src/views/issue-base/context/approval-panel/approval-panel.js");const Tx=$.default.div([""]),Px=$.default.div(["margin-bottom:","px;"],2*q.e),_x=e=>{const[,{register:t}]=Object(Jo.b)(),s=Object(n.useCallback)(e=>{t("status-and-approval-spotlight",e)},[t]);return a.a.createElement(Tx,{innerRef:s},a.a.createElement(Px,{key:"STATUS_AND_APPROVAL","data-test-id":"issue.views.issue-base.context.status-and-approvals-wrapper.status-and-approval"},a.a.createElement(rd,{key:"WRAPPED_STATUS"}),e.shouldShowApprovalPanel&&a.a.createElement(Cx.a,null)))};_x.displayName="StatusAndApprovalsWithRef";const xx=e=>a.a.createElement(Px,{key:"STATUS","data-test-id":"issue.views.issue-base.context.status-and-approvals-wrapper.status-and-approval"},a.a.createElement(rd,{key:"STATUS"}),e.shouldShowApprovalPanel&&a.a.createElement(Cx.a,null));xx.displayName="StatusAndApprovalsWithoutRef";var Dx=s("./node_modules/@atlaskit/icon/glyph/settings.js"),Ax=s.n(Dx),Mx=s("./src/packages/issue/issue-view/src/configurations.js"),Lx=s("./src/packages/issue/issue-view/src/selectors/classic-project-config-selector.js"),Rx=s("./src/packages/issue/issue-view/src/selectors/request-type-selector.js");const Nx=Mx.h.software,Ux=Object(yn.createSelector)(C.g,Lx.a,T.E,T.G,Rx.a,(e,t,s,n,a)=>s&&t?"service_desk"===n?a?`${e}/servicedesk/admin/${s}/request-types/request-type/${a}`:Mx.h.service_desk:`${e}/plugins/servlet/project-config/${s}/issuelayout?screenId=${t}`:n?Mx.h[n]:Nx);var Fx=s("./src/packages/issue/issue-view/src/selectors/issue-actions-selector.js"),Vx=Object(j.defineMessages)({move:{id:"issue.move",defaultMessage:"Move"},clone:{id:"issue.clone",defaultMessage:"Clone"},delete:{id:"issue.delete",defaultMessage:"Delete"},print:{id:"issue.print",defaultMessage:"Print"},exportXML:{id:"issue.export-xml",defaultMessage:"Export XML"},exportDOC:{id:"issue.export-doc",defaultMessage:"Export Word"},switchToModal:{id:"issue.switch-to-modal",defaultMessage:"Open issues in dialog"},switchToSidebar:{id:"issue.switch-to-sidebar",defaultMessage:"Open issues in sidebar"},newIssueView:{id:"issue.title-for-new-issue-actions",defaultMessage:"New Jira issue view"},swiftLink:{id:"issue.swift-link",defaultMessage:"Configure"},swiftBacklink:{id:"issue.swift-backlink-title",defaultMessage:"Back to {issueKey}"},startTour:{id:"issue.start-guided-tour",defaultMessage:"Show me the highlights"},findOutMore:{id:"issue.find-out-more",defaultMessage:"Find out more"},seeOldView:{id:"issue.see-old-view",defaultMessage:"See the old view"},turnOffNewIssueView:{id:"issue.turn-off-new-issue-view",defaultMessage:"Turn off new issue view"},turnOffForNow:{id:"issue.turn-off-issue-view-for-now",defaultMessage:"Turn off for now"},triggerButtonLabel:{id:"issue.label-for-issue-actions-button",defaultMessage:"Actions"},configure:{id:"issue.configure",defaultMessage:"Configure"},addToParentLevel:{id:"issue.add-to-parent-level",defaultMessage:"Add parent"},changeParentLevel:{id:"issue.change-parent-level",defaultMessage:"Change parent"},convertToSubtask:{id:"issue.convert-to-subtask",defaultMessage:"Convert to Subtask"},convertToIssue:{id:"issue.convert-to-issue",defaultMessage:"Convert to Issue"}}),Kx=Object(j.defineMessages)({configureTooltipAdmin:{id:"issue.details.configuration-button.configure-fields.tooltip-admin",defaultMessage:"Configure fields"},configureTooltipEndUser:{id:"issue.details.configuration-button.configure-fields.tooltip-end-user",defaultMessage:"Contact your admin to change the field order & layout"},configureTooltipAdminNoRequestType:{id:"issue.details.configuration-button.configure-fields.tooltip-admin-no-request-type",defaultMessage:"You can\u2019t configure the layout of an issue while it doesn\u2019t have a request type."}});var Bx=$.default.div(["margin:","px ","px 0 0;display:block;min-width:0;max-width:50%;[type='button']{padding:0;font-size:12px;span{margin:0;text-overflow:unset;}span[class*='Icon__IconWrapper']{width:16px;}}"],q.e/2,1.5*q.e);const Wx=Object(n.memo)(e=>{const{classicConfigurationLinkMode:t,configScreenUrl:s,intl:{formatMessage:n}}=e,i=((e,t)=>{switch(e){case"show":return{tooltipText:t(Kx.configureTooltipAdmin),isDisabled:!1};case"disabled_permission":return{tooltipText:t(Kx.configureTooltipEndUser),isDisabled:!0};case"disabled_no_request_type":return{tooltipText:t(Kx.configureTooltipAdminNoRequestType),isDisabled:!0};case"disabled_no_screen_id":return{tooltipText:"",isDisabled:!0};case"hide":default:return{isHidden:!0}}})(t,n);if(i.isHidden)return null;const{tooltipText:r,isDisabled:o}=i,c=n(Vx.configure);return a.a.createElement(Bx,null,a.a.createElement(he.a,{position:"mouse",mousePosition:"left",content:r},a.a.createElement(W.a,{isDisabled:o,appearance:"subtle-link",iconBefore:a.a.createElement(Ax.a,{label:""}),href:s,target:"_blank",rel:"noopener noreferrer",onClick:(e,t)=>Object(za.h)(t,"configureButton")},c)))});var Hx=Object($t.a)([Object(i.b)(e=>({classicConfigurationLinkMode:Object(Fx.c)(e),configScreenUrl:Ux(e)}),{}),j.injectIntl])(Wx),Gx=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/header/index.js"),$x=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/header/header-breadcrumbs/index.js");const qx=Object(yn.createSelector)(T.e,e=>e.createdDate),zx=$.default.div(["display:flex;margin-top:","px;"],q.e/2),Yx=$.default.small(["color:",";padding-top:","px;white-space:nowrap;margin-top:0;font-size:","px;line-height:",";"],Ae.a.N200,q.e/4,1.5*q.e,q.e/6),Qx={whenDisplaySettingSwitchable:Object($.css)([":hover{color:",";}"],Ae.a.N500)},Jx=e=>{const{text:t,date:s,timeZone:n}=e;return(a.a.createElement(zx,null,a.a.createElement(Yx,null,t,"\xa0",a.a.createElement(Zi.b,{value:s,timeZone:n,extraStyles:Qx,tooltipPosition:"right"}))))};Jx.displayName="AuditDate";var Zx=Jx,Xx=Object($t.a)([Object(i.b)(e=>({timeZone:Object(T.A)(e)}),{})])(Zx);const eD=a.a.createElement(j.FormattedMessage,{id:"issue.created-date-text-short",defaultMessage:"Created"}),tD=({date:e})=>null!==e&&""!==e?a.a.createElement(mf.b,null,a.a.createElement(Xx,{date:e,text:eD})):null;tD.defaultProps={date:null};var sD=Object(i.b)(e=>({date:qx(e)}),{})(tD);const nD=Object(yn.createSelector)(T.e,e=>e.updatedDate),aD=a.a.createElement(j.FormattedMessage,{id:"issue.updated-date-text-short",defaultMessage:"Updated"}),iD=({date:e})=>null!==e&&""!==e?a.a.createElement(mf.b,null,a.a.createElement(Xx,{date:e,text:aD})):null;iD.defaultProps={date:null};var rD=Object(i.b)(e=>({date:nD(e)}),{})(iD);const oD=$.default.div(["margin-top:","px;margin-right:","px;flex:1;"],q.e/2,2*q.e);var cD=()=>a.a.createElement(oD,null,a.a.createElement(sD,null),a.a.createElement(rD,null)),lD=s("./src/packages/issue/issue-view/src/actions/fetch-confluence-app-links-actions.js");function uD(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function dD(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?uD(Object(s),!0).forEach((function(t){pD(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):uD(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function pD(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var mD=({fieldKey:e,propName:t,isEnabled:s=(()=>!0),FieldValueSubscriber:n=hl.a})=>i=>r=>{if(!s())return a.a.createElement(i,r);const{issueKey:o}=r;return(a.a.createElement(n,{issueKey:o,fieldKey:e},e=>{const s=dD(dD({},r),{},{[t]:e});return(a.a.createElement(i,s))}))};const bD=Object(yn.createSelector)(ET.a,Yw,zt.i,T.r,sg.b,oS.a,C.v,ck.a,PT.a,(e,t,s,n,a,i,r,o,c)=>{const l=t&&!s&&n;return{canCreateAttachment:a,shouldShowCreateSubtaskButton:e&&!s&&!l,shouldShowIssueInEpicButton:l,supportsChildCreation:s,canCreateIssueLink:i,isServiceDesk:r,canLinkConfluencePage:o,canAddWebLinks:c}});var fD=s("./src/packages/wrm/src/wrm-module-loader/index.js"),gD=s("./src/packages/wrm/src/common-modules/calendar-locale-module.js");const hD=$.default.div(["display:flex;flex-direction:row;width:100%;"]),yD=Object($.default)(Ol.a)(["flex-grow:1;"]),OD=Object($.default)(Ol.a)(["width:8px;"]),jD=$.default.div(["width:32px;height:32px;background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjAgMCAzMiAzMiIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4gICAgICAgIDx0aXRsZT4zMngzMl9yb3VuZGVkZWRnZTwvdGl0bGU+ICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPiAgICA8ZGVmcz48L2RlZnM+ICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPiAgICAgICAgPGcgaWQ9IjMyeDMyX3JvdW5kZWRlZGdlIiBmaWxsPSIjRkZGRkZGIj4gICAgICAgICAgICA8cGF0aCBkPSJNMywwIEMxLjM0MzE0NTc1LDMuMDQzNTkxODhlLTE2IC0yLjAyOTA2MTI1ZS0xNiwxLjM0MzE0NTc1IDAsMyBMMCwwIEwzLDAgWiBNMjksMCBMMzIsMCBMMzIsMyBDMzIsMS4zNDMxNDU3NSAzMC42NTY4NTQyLC0zLjA0MzU5MTg4ZS0xNiAyOSwwIFogTTMyLDI5IEwzMiwzMiBMMjksMzIgQzMwLjY1Njg1NDIsMzIgMzIsMzAuNjU2ODU0MiAzMiwyOSBaIE0zLDMyIEwwLDMyIEwwLDI5IEMyLjAyOTA2MTI1ZS0xNiwzMC42NTY4NTQyIDEuMzQzMTQ1NzUsMzIgMywzMiBaIiBpZD0iQ29tYmluZWQtU2hhcGUiPjwvcGF0aD4gICAgICAgIDwvZz4gICAgPC9nPjwvc3ZnPg==);"]);var ED=()=>a.a.createElement(Fk.a,null,a.a.createElement(Ol.b,null),a.a.createElement(Uk.a,{paddingTop:4,paddingBottom:9},a.a.createElement(hD,null,a.a.createElement(jD,null),a.a.createElement(OD,null),a.a.createElement(jD,null),a.a.createElement(OD,null),a.a.createElement(jD,null),a.a.createElement(yD,null)))),vD=s("./node_modules/lodash/differenceBy.js"),kD=s.n(vD),wD=s("./node_modules/@atlaskit/icon/glyph/addon.js"),SD=s.n(wD),ID=s("./src/packages/common-legacy-do-not-add-anything-new/src/analytics-v2-wrapped-components/dropdown-item.js"),CD=s("./src/packages/issue/issue-view/src/ecosystem/broadcast-connect-event.js");function TD(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function PD(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?TD(Object(s),!0).forEach((function(t){_D(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):TD(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function _D(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const xD=3*q.e,DD=$.default.span(["padding:","px;"],q.e/2),AD=$.default.div(["display:inline-flex;"]),MD=$.default.span(["color:",";"],Ae.a.B400),LD=Object(j.defineMessages)({quickAddAddonLabel:{id:"issue.quickadd.addon",defaultMessage:"Add app"},addMore:{id:"issue.quickadd.addon.add.more",defaultMessage:"Add apps"}}),RD=e=>!!e.tooltip&&!!e.iconUrl;class ND extends n.Component{constructor(...e){super(...e),this.getExtensionsToShowIconsFor=()=>this.props.availableAddons.filter(RD).slice(0,3),this.getExtensionsToShowInDropdown=()=>kD()(this.props.availableAddons,this.getExtensionsToShowIconsFor(),"moduleKey"),this.transformExtension=e=>{const t=a.a.createElement(ID.b,{key:e.moduleKey,elemBefore:ND.getIcon(e),onClick:this.itemSelected(e)},e.name);return e.tooltip?a.a.createElement(he.a,{content:e.tooltip,key:e.moduleKey},t):t},this.createDropdownItems=e=>a.a.createElement(oi.a,null,e.map(this.transformExtension),this.props.canInstallAddons&&a.a.createElement(ID.b,{key:LD.addMore.id,elemBefore:a.a.createElement(MD,null,a.a.createElement(EO.a,{label:this.props.intl.formatMessage(LD.addMore)})),onClick:this.props.onAddExtensionsClick,href:`${this.props.baseUrl}/plugins/servlet/upm/marketplace/featured`,target:"_new"},a.a.createElement(MD,null,this.props.intl.formatMessage(LD.addMore)))),this.itemSelected=e=>()=>{const t=Object(bm.b)(e.moduleKey,10),s="FORGE_ENTITY_TYPE"===e.type;let n=s?Object(Va.e)(e.appKey,e.moduleKey):Object(Va.c)(e.appKey,e.moduleKey);if(s){const t=`${n}-`,s=this.props.contentPanelsInIssue.find(e=>Object(Va.b)(e,t));null!=s&&!1===e.allowMultiple&&(n=s)}e.showByDefault||this.props.contentPanelsInIssue.includes(`${e.appKey}_${t}`)||this.props.contentPanelsInIssue.includes(n)?(this.props.onContentPanelFocusAnalytics(Object(Wn.b)(e.appKey,e.moduleKey)),this.props.onSelectContentPanel(n),this.sendQuickAddClickedEvent(!1,e.appKey,e.moduleKey,s)):(this.props.onContentPanelAddAnalytics(Object(Wn.b)(e.appKey,e.moduleKey)),this.props.onAddExtension(n),this.sendQuickAddClickedEvent(!0,e.appKey,e.moduleKey,s))},this.sendQuickAddClickedEvent=(e,t,s,n)=>{this.props.onQuickAddClick("ISSUE_QUICK_ADD_CLICKED",{addon_key:t,key:s},{isNewToIssue:e.toString()}),n&&Object(Rm.m)(this.props.source,{isNewToIssue:e})},this.transformExtensionToQuickIcon=(e,t)=>this.props.createItemView({id:`${e.appKey}_${e.moduleKey}`,label:e.tooltip||e.name,icon:ND.getIcon(e),onClick:this.itemSelected(e),itemIndex:this.props.startIndex+t}),this.renderVisibleExtensionIcons=()=>this.getExtensionsToShowIconsFor().map((e,t)=>this.transformExtensionToQuickIcon(e,t)),this.renderDropdownExtensions=()=>{const{intl:e,canInstallAddons:t}=this.props,s=this.getExtensionsToShowInDropdown();return s.length>0||t?a.a.createElement(ri.a,{key:"ecosystem-actions-dropdown",boundariesElement:"scrollParent",triggerType:"button",triggerButtonProps:{spacing:"none",theme:(e,t)=>{const s=e(t);return PD(PD({},s),{},{buttonStyles:PD(PD({},s.buttonStyles),{},{margin:0})})},iconBefore:a.a.createElement(DD,null,a.a.createElement(jm.a,{size:"medium",label:""})),"aria-label":e.formatMessage(LD.quickAddAddonLabel)}},this.createDropdownItems(s)):null}}static getIcon(e){return e.iconUrl?a.a.createElement(sp.a,{title:e.name,url:e.iconUrl,width:xD,height:xD,fallback:()=>this.getFallbackIcon({name:e.name})}):this.getFallbackIcon({name:e.name})}componentDidMount(){const{availableAddons:e,contentPanelsInIssue:t,onContentPanelListLoadedAnalytics:s}=this.props;e.length>0&&s(Object(Wn.c)(e,t))}render(){const e=this.renderVisibleExtensionIcons(),t=this.renderDropdownExtensions();return a.a.createElement(AD,null,[...e,t])}}ND.displayName="UnsafeAddonsQuickAdd",ND.defaultProps={canInstallAddons:!1,availableAddons:[],contentPanelsInIssue:[],onContentPanelListLoadedAnalytics:o.a,onContentPanelAddAnalytics:o.a,onContentPanelFocusAnalytics:o.a,onAddExtensionsClick:o.a,onQuickAddClick:o.a,onAddWebLinkClick:o.a},ND.getFallbackIcon=e=>a.a.createElement(SD.a,{size:"medium",label:e.name});const UD=(e,t,s)=>{Object(CD.a)(e,t,s)};var FD=tt()(Object(as.a)(e=>({onContentPanelListLoadedAnalytics:t=>e("load",PD({},t)),onContentPanelAddAnalytics:t=>e("add",PD({},t)),onContentPanelFocusAnalytics:t=>e("focus",PD({},t))})),Object(E.a)({onAddExtensionsClick:"quickAddDropdownMenuItem",onAddWebLinkClick:"quickAddWebLink"}),Object(i.b)(e=>({availableAddons:Object(Hn.k)(e),contentPanelsInIssue:Object(Hn.p)(e),baseUrl:Object(C.g)(e),canInstallAddons:Object(Hn.c)(e),source:Object(C.b)(e),onQuickAddClick:UD}),e=>({onAddWebLinkClick:()=>e(Object(TT.k)())})),Object(ls.a)())(Object(j.injectIntl)(ND)),VD=s("./node_modules/@atlaskit/icon/glyph/link.js"),KD=s.n(VD),BD=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/quick-add/quick-add-item/styled.js");const WD=$.default.span(["display:flex;margin-right:","px;"],q.e),HD=$.default.span(["padding:","px;"],q.e/2);var GD=Object(n.memo)(e=>{const{id:t,icon:s,label:i,onClick:r,testId:o}=e.item,c=Object(n.useCallback)((e,s)=>{Object(za.h)(s,"createLink",{actionItemId:t,name:"linkDropdownListItem"}),r&&r()},[t,r]);return a.a.createElement(ID.b,{id:t,elemBefore:s,onClick:c,"data-test-id":o},i)});function $D(){return($D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const qD=e=>{const[t,s]=Object(n.useState)(!1),{position:i,actions:r,tooltip:o,triggerButtonProps:c}=e,l=a.a.createElement(W.a,$D({spacing:"none","aria-label":o,"aria-expanded":t},c,{"data-test-id":"issue.views.issue-base.foundation.quick-add.link-button.ui.link-dropdown-button"})),u=void 0!==o?a.a.createElement(he.a,{content:o,position:"bottom",hideTooltipOnClick:!0},l):l;return a.a.createElement(ri.a,{key:"web-link-actions-dropdown",position:i,trigger:u,onOpenChange:({isOpen:e},t)=>{s(e),Object(za.h)(t,"moreLinksDropdownToggled",{isOpen:e,name:"linkDropdownListButton"})}},a.a.createElement(oi.a,null,r.map(e=>a.a.createElement(GD,{key:e.id,item:e}))))};qD.displayName="DropdownListButton";var zD=qD;function YD(){return(YD=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function QD(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function JD(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function ZD(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?JD(Object(s),!0).forEach((function(t){XD(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):JD(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function XD(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const eA=({compactMode:e,actions:t,tooltipLabel:s})=>{if(e){const e={iconBefore:a.a.createElement(HD,null,a.a.createElement(KD.a,{size:"medium",label:""}))};return(a.a.createElement(zD,{actions:t,triggerButtonProps:e,tooltip:s}))}const[{id:n,onClick:i,label:r,tooltip:o,testId:c},...l]=t,u=a.a.createElement(BD.b,{compactMode:e},a.a.createElement(KD.a,{size:"medium",label:""})),d=(e,t)=>{Object(za.h)(t,"AddLink",{name:"AddLinkButton"}),i()};return 0===l.length?a.a.createElement(he.a,{content:o,position:"bottom",key:n},a.a.createElement(W.a,{"aria-label":o,spacing:"default",iconBefore:u,onClick:d,"data-test-id":c},r)):a.a.createElement(a.a.Fragment,null,a.a.createElement(he.a,{content:o,position:"bottom",key:n},a.a.createElement(W.a,{"aria-label":o,spacing:"default",iconBefore:u,onClick:d,"data-test-id":c,theme:(e,t)=>{const s=e(t);return ZD(ZD({},s),{},{buttonStyles:ZD(ZD({},s.buttonStyles),{},{borderTopRightRadius:0,borderBottomRightRadius:0,borderRight:`2px solid ${Ae.a.N40}`,margin:0})})}},r)),a.a.createElement(zD,{actions:l,position:"bottom right",tooltip:s,triggerButtonProps:{iconBefore:a.a.createElement(HD,null,a.a.createElement(XO.a,{size:"medium",label:""})),theme:(e,t)=>{const s=e(t);return ZD(ZD({},s),{},{buttonStyles:ZD(ZD({},s.buttonStyles),{},{borderTopLeftRadius:0,borderBottomLeftRadius:0,margin:0})})}}}))},tA=e=>{let{actions:t}=e,s=QD(e,["actions"]);return 0===t.length?null:a.a.createElement(WD,null,a.a.createElement(eA,YD({actions:t},s)))};tA.displayName="LinkButtonWithWrapper";var sA=tA,nA=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/quick-add/quick-add-item/view.js"),aA=s("./node_modules/@atlaskit/icon/glyph/attachment.js"),iA=s.n(aA),rA=s("./node_modules/@atlaskit/icon/glyph/child-issues.js"),oA=s.n(rA),cA=s("./node_modules/@atlaskit/icon/glyph/issues.js"),lA=s.n(cA),uA=s("./node_modules/@atlaskit/icon/glyph/page.js"),dA=s.n(uA),pA=s("./node_modules/@atlaskit/icon/glyph/subtask.js"),mA=s.n(pA),bA=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/quick-add/quick-add-items/assets/incident-create-icon.svg"),fA=s.n(bA),gA=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/quick-add/quick-add-items/assets/incident-icon.svg"),hA=s.n(gA),yA=Object(j.defineMessages)({addAttachmentTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.add-attachment-label",defaultMessage:"Add attachment"},createSubtaskTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.create-subtask-label",defaultMessage:"Create subtask"},addIssueLinkTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.add-issue-link-label",defaultMessage:"Link issue"},createChildTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.create-child-label",defaultMessage:"Add a child issue"},linkConfluencePageTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.link-confluence-page-label",defaultMessage:"Link a Confluence page"},createIssueInEpicTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.create-issue-in-epic-label",defaultMessage:"Create issue in epic"},addAttachmentLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.add-attachment-button-label",defaultMessage:"Attach"},createSubtaskLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.create-subtask-button-label",defaultMessage:"Create subtask"},addIssueLinkLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.add-issue-link-button-label",defaultMessage:"Link issue"},createChildLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.create-child-button-label",defaultMessage:"Add a child issue"},linkConfluencePageLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.link-confluence-page-button-label",defaultMessage:"Link Confluence page"},createIssueInEpicLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.create-issue-in-epic-button-label",defaultMessage:"Create issue in epic"},linkIncidentLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.link-incident-label",defaultMessage:"Link major incident"},linkIncidentTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.link-incident-tooltip",defaultMessage:"Link major incident"},createIncidentLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.create-incident-label",defaultMessage:"Create major incident"},createIncidentTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.create-incident-tooltip",defaultMessage:"Create major incident"},addWebLinkLabel:{id:"issue.foundation.quick-add.quick-add-items.add-web-link-label",defaultMessage:"Add web link"},addWebLinkTooltip:{id:"issue.foundation.quick-add.quick-add-items.add-web-link-tooltip",defaultMessage:"Link web pages and more"},linkDropdownButtonLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.web-link-dropdown-label",defaultMessage:"Link web pages and more"},linkDropdownButtonCompactLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.web-link-dropdown-compact-label",defaultMessage:"Link issues, web pages, and more"}});const OA=$.default.div(["margin-bottom:","px;padding:","px 0;display:inline-flex;"],q.e/2,q.e/2),jA=$.default.img(["height:","px;width:","px;"],3*q.e,3*q.e);var EA=e=>{const{formatMessage:t,canCreateAttachment:s,shouldShowCreateSubtaskButton:n,shouldShowIssueInEpicButton:i,canCreateIssueLink:r,onAddAttachmentClick:o,onCreateSubtaskClick:c,onCreateIssueInEpicClick:l,onChildCreateClick:u,supportsChildCreation:d,isServiceDesk:p,canLinkConfluencePage:m,onLinkConfluencePageClick:b,onCreateMajorIncidentClick:f,incidentLinking:g,incidentEscalate:h,onLinkIncidentClick:y,canAddWebLinks:O,onAddWebLinkClick:j,onAddIssueLinkClick:E}=e,v=[{id:"attachment",tooltip:t(yA.addAttachmentTooltip),label:t(yA.addAttachmentLabel),icon:a.a.createElement(iA.a,{size:"medium",label:""}),onClick:o,itemIndex:0,shouldRender:!p&&s,testId:""},{id:"create-subtask",tooltip:t(yA.createSubtaskTooltip),label:t(yA.createSubtaskLabel),icon:a.a.createElement(mA.a,{size:"medium",label:""}),onClick:c,itemIndex:1,shouldRender:n,testId:""},{id:"create-issue-in-epic",tooltip:t(yA.createIssueInEpicTooltip),label:t(yA.createIssueInEpicLabel),icon:a.a.createElement(oA.a,{size:"medium",label:""}),onClick:l,itemIndex:1,shouldRender:i,testId:""},{id:"create-child",tooltip:t(yA.createChildTooltip),label:t(yA.createChildLabel),icon:a.a.createElement(oA.a,{size:"medium",label:""}),onClick:u,itemIndex:1,shouldRender:d,testId:""},{id:"create-incident",tooltip:t(yA.createIncidentTooltip),label:t(yA.createIncidentLabel),icon:a.a.createElement(a.a.Fragment,null,a.a.createElement(_e.d,{eventName:"escalateMajorIncidentButton viewed",componentName:"BentoQuickAddItems"}),a.a.createElement(jA,{src:fA.a})),onClick:f,itemIndex:3,shouldRender:!!h,testId:"issue.issue-view.views.issue-base.foundation.quick-add.quick-add-item.create-incident",hasGlobalSpotlightTarget:!0}],k=[{id:"issue-links",tooltip:t(yA.addIssueLinkTooltip),label:t(yA.addIssueLinkLabel),icon:a.a.createElement(lA.a,{size:"medium",label:""}),onClick:E,itemIndex:2,shouldRender:r,testId:"issue.issue-view.views.issue-base.foundation.quick-add.quick-add-item.link-issue"},{id:"link-confluence-page",tooltip:t(yA.linkConfluencePageTooltip),label:t(yA.linkConfluencePageLabel),icon:a.a.createElement(dA.a,{size:"medium",label:""}),onClick:b,itemIndex:3,shouldRender:m,testId:"issue.issue-view.views.issue-base.foundation.quick-add.quick-add-item.link-page"},{id:"link-incident",tooltip:t(yA.linkIncidentTooltip),label:t(yA.linkIncidentLabel),icon:a.a.createElement(jA,{src:hA.a}),onClick:y,itemIndex:3,shouldRender:!!g,testId:"issue.issue-view.views.issue-base.foundation.quick-add.quick-add-item.link-incident"},{id:"add-web-link",tooltip:t(yA.addWebLinkTooltip),label:t(yA.addWebLinkLabel),icon:a.a.createElement(LT.a,{size:"medium",label:""}),onClick:j,itemIndex:3,shouldRender:O,testId:"issue.issue-view.views.issue-base.foundation.quick-add.quick-add-item.link-web"}];return{issueActions:v.filter(e=>e.shouldRender),linkingActions:k.filter(e=>e.shouldRender)}};function vA(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function kA(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?vA(Object(s),!0).forEach((function(t){wA(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):vA(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function wA(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const SA=()=>a.a.createElement(ED,null);SA.displayName="renderSkeleton";const IA=e=>{const[t,s]=Object(n.useState)(!1),{formatMessage:i}=Object(Te.c)(),{fetchConfluenceAppLinks:r,triggerButtonClickAnalytics:o,onSelectContentPanel:c,onAddExtension:l,issueKey:u,containerWidth:d,locale:p}=e,m=Object(n.useRef)(0),b=Object(n.useRef)(null),f=Object(n.useCallback)(()=>b.current?b.current.clientWidth:0,[]),g=Object(n.useCallback)(()=>(m.current<f()&&(m.current=f()),m.current),[f]),h=Object(n.useCallback)(()=>{const e=!d||d<=g();t!==e&&s(e)},[d,g,t]);Object(n.useMemo)(()=>{h()},[h]),Object(n.useEffect)(()=>{r()},[r,u]),Object(n.useEffect)(()=>{h()},[d,h]);const y=Object(n.useCallback)(e=>{b.current=e},[]),O=Object(n.useCallback)((e,t,s)=>()=>{s(),o(e,t,4)},[o]),j=Object(n.useCallback)(e=>{const{id:s,tooltip:n,label:i,icon:r,onClick:o,itemIndex:c,testId:l,hasGlobalSpotlightTarget:u}=e;return(a.a.createElement(he.a,{content:n,position:"bottom",key:s},a.a.createElement(nA.a,{key:s,id:s,icon:r,onClick:O(s,c,o),label:i,compactMode:t,testId:l,hasGlobalSpotlightTarget:u})))},[O,t]),E=Object(n.useCallback)(()=>{const{issueActions:s,linkingActions:n}=EA(kA(kA({},e),{},{formatMessage:i})),r=s.map(j),u=t?yA.linkDropdownButtonCompactLabel:yA.linkDropdownButtonLabel,d=i(u),p=a.a.createElement(sA,{key:"quick-add-web-link-button",compactMode:t,actions:n,tooltipLabel:d}),m=a.a.createElement(FD,{key:"quick-add-content-panel",externalId:"issue.ecosystem.quick-add-content-panel",onSelectContentPanel:e=>{c(e),o("select_contentpanel",3,4)},onAddExtension:e=>{l(e),o("add_contentpanel",3,4)},createItemView:j,startIndex:r.length});return[...r,p,m]},[j,i,l,c,e,t,o]);if(e.isPreview)return SA();const v=E();return(a.a.createElement(M.a,{id:"jira.issuebase.quickadditems"},a.a.createElement(Qo.a,{name:"QUICK_ADDS"},v.length?a.a.createElement(fD.a,{modules:[Object(gD.a)(p)]},()=>a.a.createElement(OA,{innerRef:y},v)):a.a.createElement("div",null))))};IA.displayName="QuickAddItemsFn",IA.defaultProps={canCreateIssueLink:!1,canCreateAttachment:!1,canLinkConfluencePage:!1,canAddWebLinks:!1,triggerButtonClickAnalytics:o.a};class CA extends n.Component{constructor(...e){super(...e),this.state={shouldUseCompactButtons:!1},this.componentDidMount=()=>{this.props.fetchConfluenceAppLinks(),this.setShouldUseCompactButtons()},this.componentDidUpdate=()=>{this.setShouldUseCompactButtons()},this.setQuickAddRef=e=>{this.quickAddRef=e},this.setShouldUseCompactButtons=()=>{const e=!this.props.containerWidth||this.props.containerWidth<=this.updateAndGetQuickAddExpandedWidth();this.state.shouldUseCompactButtons!==e&&this.setState({shouldUseCompactButtons:e})},this.getQuickAddRefClientWidth=()=>this.quickAddRef?this.quickAddRef.clientWidth:0,this.updateAndGetQuickAddExpandedWidth=()=>(this.quickAddExpandedWidth<this.getQuickAddRefClientWidth()&&(this.quickAddExpandedWidth=this.getQuickAddRefClientWidth()),this.quickAddExpandedWidth),this.quickAddExpandedWidth=0,this.quickAddRef=void 0,this.sendAnalyticsEventFunc=(e,t,s)=>()=>{s(),this.props.triggerButtonClickAnalytics(e,t,4)},this.createItemView=e=>{const{id:t,tooltip:s,label:n,icon:i,onClick:r,itemIndex:o,testId:c,hasGlobalSpotlightTarget:l}=e;return(a.a.createElement(he.a,{content:s,position:"bottom",key:t},a.a.createElement(nA.a,{key:t,id:t,icon:i,onClick:this.sendAnalyticsEventFunc(t,o,r),label:n,compactMode:this.state.shouldUseCompactButtons,testId:c,hasGlobalSpotlightTarget:l})))},this.renderSkeleton=()=>a.a.createElement(ED,null),this.getQuickAddActionData=()=>{const{intl:{formatMessage:e}}=this.props,{issueActions:t,linkingActions:s}=EA(kA(kA({},this.props),{},{formatMessage:e})),n=t.map(this.createItemView),{shouldUseCompactButtons:i}=this.state,r=e(i?yA.linkDropdownButtonCompactLabel:yA.linkDropdownButtonLabel),o=a.a.createElement(sA,{key:"quick-add-web-link-button",compactMode:i,actions:s,tooltipLabel:r}),c=a.a.createElement(FD,{key:"quick-add-content-panel",externalId:"issue.ecosystem.quick-add-content-panel",onSelectContentPanel:e=>{this.props.onSelectContentPanel(e),this.props.triggerButtonClickAnalytics("select_contentpanel",3,4)},onAddExtension:e=>{this.props.onAddExtension(e),this.props.triggerButtonClickAnalytics("add_contentpanel",3,4)},createItemView:this.createItemView,startIndex:n.length});return[...n,o,c]}}render(){if(this.props.isPreview)return this.renderSkeleton();const{locale:e}=this.props,t=this.getQuickAddActionData();return a.a.createElement(Qo.a,{name:"QUICK_ADDS"},t.length?a.a.createElement(fD.a,{modules:[Object(gD.a)(e)]},()=>a.a.createElement(OA,{innerRef:this.setQuickAddRef},t)):a.a.createElement("div",null))}}CA.displayName="UnsafeQuickAddItems",CA.displayName="QuickAddItems",CA.defaultProps={canCreateIssueLink:!1,canCreateAttachment:!1,canLinkConfluencePage:!1,canAddWebLinks:!1,triggerButtonClickAnalytics:o.a};const TA=Object(j.injectIntl)(Object(ls.a)()(CA)),PA=Object(Jj.a)(qt.isAddConfluenceButtonOnChildAndLinkedIssuesEnabled,IA,TA);function _A(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function xA(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?_A(Object(s),!0).forEach((function(t){DA(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):_A(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function DA(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const AA=e=>({onAddAttachmentClick:()=>{e(Object(ws.b)())},onCreateSubtaskClick:()=>{e(Ig())},onCreateIssueInEpicClick:()=>{e(Cg())},onAddIssueLinkClick:()=>{Object(zi.c)().markStartOfInteraction({key:nr.a.ISSUE_LINKS.TIME_TO_RENDER_NEW_LINKED_ISSUE_INPUT,cancelExisting:!0}),e(Object(aS.a)())},onChildCreateClick:()=>{e(Tg())},onLinkConfluencePageClick:()=>{e(Object(ok.h)())},onLinkIncidentClick:()=>{e(kC())},onCreateMajorIncidentClick:()=>{e(wC())},onAddWebLinkClick:()=>{e(Object(TT.k)())}});var MA=tt()(mD({fieldKey:"servicedesk-incident-linking",propName:"incidentEscalate"}),mD({fieldKey:"servicedesk-incident-linking",propName:"incidentLinking"}),Object(i.b)(e=>xA(xA({},bD(e)),{},{isPreview:Object(T.t)(e),locale:Object(C.D)(e),projectType:Object(T.G)(e),issueKey:Object(C.B)(e)}),e=>xA(xA({},AA(e)),{},{onAddExtension:t=>{e(Object(mm.b)(t))},onSelectContentPanel:t=>{e(Object(mm.d)(t))},fetchConfluenceAppLinks:()=>{e(Object(lD.a)())}})),Object(as.a)(e=>({triggerButtonClickAnalytics:(t,s,n)=>e(`${t}.click`,{index:s,actions:n})})),Fa.a)(PA),LA=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/quick-add/quick-add-items-old/assets/incident-create-icon.svg"),RA=s.n(LA),NA=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/quick-add/quick-add-items-old/assets/incident-icon.svg"),UA=s.n(NA),FA=Object(j.defineMessages)({addAttachmentTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.add-attachment-label",defaultMessage:"Add attachment"},createSubtaskTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.create-subtask-label",defaultMessage:"Create subtask"},addIssueLinkTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.add-issue-link-label",defaultMessage:"Link issue"},createChildTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.create-child-label",defaultMessage:"Add a child issue"},linkConfluencePageTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.link-confluence-page-label",defaultMessage:"Link a Confluence page"},createIssueInEpicTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.create-issue-in-epic-label",defaultMessage:"Create issue in epic"},addAttachmentLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.add-attachment-button-label",defaultMessage:"Attach"},createSubtaskLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.create-subtask-button-label",defaultMessage:"Create subtask"},addIssueLinkLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.add-issue-link-button-label",defaultMessage:"Link issue"},createChildLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.create-child-button-label",defaultMessage:"Add a child issue"},linkConfluencePageLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.link-confluence-page-button-label",defaultMessage:"Link Confluence page"},createIssueInEpicLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.create-issue-in-epic-button-label",defaultMessage:"Create issue in epic"},linkIncidentLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.link-incident-label",defaultMessage:"Link major incident"},linkIncidentTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.link-incident-tooltip",defaultMessage:"Link major incident"},createIncidentLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.create-incident-label",defaultMessage:"Create major incident"},createIncidentTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.create-incident-tooltip",defaultMessage:"Create major incident"},addWebLinkLabel:{id:"issue.foundation.quick-add.quick-add-items.add-web-link-label",defaultMessage:"Add web link"},addWebLinkTooltip:{id:"issue.foundation.quick-add.quick-add-items.add-web-link-tooltip",defaultMessage:"Link web pages and more"},linkDropdownButtonLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.web-link-dropdown-label",defaultMessage:"Link web pages and more"},linkDropdownButtonCompactLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.web-link-dropdown-compact-label",defaultMessage:"Link issues, web pages, and more"}});const VA=$.default.div(["margin-bottom:","px;padding:","px 0;display:inline-flex;"],q.e/2,q.e/2),KA=$.default.img(["height:","px;width:","px;"],3*q.e,3*q.e);class BA extends n.Component{constructor(...e){super(...e),this.state={shouldUseCompactButtons:!1},this.componentDidMount=()=>{this.props.fetchConfluenceAppLinks(),this.setShouldUseCompactButtons()},this.componentDidUpdate=()=>{this.setShouldUseCompactButtons()},this.setQuickAddRef=e=>{this.quickAddRef=e},this.setShouldUseCompactButtons=()=>{const e=!this.props.containerWidth||this.props.containerWidth<=this.updateAndGetQuickAddExpandedWidth();this.state.shouldUseCompactButtons!==e&&this.setState({shouldUseCompactButtons:e})},this.getQuickAddRefClientWidth=()=>this.quickAddRef?this.quickAddRef.clientWidth:0,this.updateAndGetQuickAddExpandedWidth=()=>(this.quickAddExpandedWidth<this.getQuickAddRefClientWidth()&&(this.quickAddExpandedWidth=this.getQuickAddRefClientWidth()),this.quickAddExpandedWidth),this.quickAddExpandedWidth=0,this.quickAddRef=void 0,this.sendAnalyticsEventFunc=(e,t,s)=>()=>{s(),this.props.triggerButtonClickAnalytics(e,t,4)},this.createItemView=e=>{const{id:t,tooltip:s,label:n,icon:i,onClick:r,itemIndex:o,testId:c,hasGlobalSpotlightTarget:l}=e;return(a.a.createElement(he.a,{content:s,position:"bottom",key:t},a.a.createElement(nA.a,{key:t,id:t,icon:i,onClick:this.sendAnalyticsEventFunc(t,o,r),label:n,compactMode:this.state.shouldUseCompactButtons,testId:c,hasGlobalSpotlightTarget:l})))},this.renderSkeleton=()=>a.a.createElement(ED,null),this.onAddIssueLinkClick=()=>{Object(zi.c)().markStartOfInteraction({key:nr.a.ISSUE_LINKS.TIME_TO_RENDER_NEW_LINKED_ISSUE_INPUT,cancelExisting:!0}),this.props.onAddIssueLinkClick()},this.getQuickAddActionData=()=>{const{intl:e,canCreateAttachment:t,shouldShowCreateSubtaskButton:s,shouldShowIssueInEpicButton:n,canCreateIssueLink:i,onAddAttachmentClick:r,onCreateSubtaskClick:o,onCreateIssueInEpicClick:c,onChildCreateClick:l,supportsChildCreation:u,isServiceDesk:d,canLinkConfluencePage:p,onLinkConfluencePageClick:m,onCreateMajorIncidentClick:b,incidentLinking:f,incidentEscalate:g,onLinkIncidentClick:h,canAddWebLinks:y,onAddWebLinkClick:O}=this.props,j=[{id:"attachment",tooltip:e.formatMessage(FA.addAttachmentTooltip),label:e.formatMessage(FA.addAttachmentLabel),icon:a.a.createElement(iA.a,{size:"medium",label:""}),onClick:r,itemIndex:0,shouldRender:!d&&t,testId:""},{id:"create-subtask",tooltip:e.formatMessage(FA.createSubtaskTooltip),label:e.formatMessage(FA.createSubtaskLabel),icon:a.a.createElement(mA.a,{size:"medium",label:""}),onClick:o,itemIndex:1,shouldRender:s,testId:""},{id:"create-issue-in-epic",tooltip:e.formatMessage(FA.createIssueInEpicTooltip),label:e.formatMessage(FA.createIssueInEpicLabel),icon:a.a.createElement(oA.a,{size:"medium",label:""}),onClick:c,itemIndex:1,shouldRender:n,testId:""},{id:"create-child",tooltip:e.formatMessage(FA.createChildTooltip),label:e.formatMessage(FA.createChildLabel),icon:a.a.createElement(oA.a,{size:"medium",label:""}),onClick:l,itemIndex:1,shouldRender:u,testId:""},{id:"create-incident",tooltip:e.formatMessage(FA.createIncidentTooltip),label:e.formatMessage(FA.createIncidentLabel),icon:a.a.createElement(a.a.Fragment,null,a.a.createElement(_e.d,{eventName:"escalateMajorIncidentButton viewed",componentName:"BentoQuickAddItems"}),a.a.createElement(KA,{src:RA.a})),onClick:b,itemIndex:3,shouldRender:!!g,testId:"issue.issue-view.views.issue-base.foundation.quick-add.quick-add-item.create-incident",hasGlobalSpotlightTarget:!0}].filter(e=>e.shouldRender).map(this.createItemView),E=[{id:"issue-links",tooltip:e.formatMessage(FA.addIssueLinkTooltip),label:e.formatMessage(FA.addIssueLinkLabel),icon:a.a.createElement(lA.a,{size:"medium",label:""}),onClick:this.onAddIssueLinkClick,itemIndex:2,shouldRender:i,testId:"issue.issue-view.views.issue-base.foundation.quick-add.quick-add-item.link-issue"},{id:"link-confluence-page",tooltip:e.formatMessage(FA.linkConfluencePageTooltip),label:e.formatMessage(FA.linkConfluencePageLabel),icon:a.a.createElement(dA.a,{size:"medium",label:""}),onClick:m,itemIndex:3,shouldRender:p,testId:"issue.issue-view.views.issue-base.foundation.quick-add.quick-add-item.link-page"},{id:"link-incident",tooltip:e.formatMessage(FA.linkIncidentTooltip),label:e.formatMessage(FA.linkIncidentLabel),icon:a.a.createElement(KA,{src:UA.a}),onClick:h,itemIndex:3,shouldRender:!!f,testId:"issue.issue-view.views.issue-base.foundation.quick-add.quick-add-item.link-incident"},{id:"add-web-link",tooltip:e.formatMessage(FA.addWebLinkTooltip),label:e.formatMessage(FA.addWebLinkLabel),icon:a.a.createElement(LT.a,{size:"medium",label:""}),onClick:O,itemIndex:3,shouldRender:y,testId:"issue.issue-view.views.issue-base.foundation.quick-add.quick-add-item.link-web"}].filter(e=>e.shouldRender),{shouldUseCompactButtons:v}=this.state,k=v?FA.linkDropdownButtonCompactLabel:FA.linkDropdownButtonLabel,w=e.formatMessage(k),S=a.a.createElement(sA,{key:"quick-add-web-link-button",compactMode:v,actions:E,tooltipLabel:w}),I=a.a.createElement(FD,{key:"quick-add-content-panel",externalId:"issue.ecosystem.quick-add-content-panel",onSelectContentPanel:e=>{this.props.onSelectContentPanel(e),this.props.triggerButtonClickAnalytics("select_contentpanel",3,4)},onAddExtension:e=>{this.props.onAddExtension(e),this.props.triggerButtonClickAnalytics("add_contentpanel",3,4)},createItemView:this.createItemView,startIndex:j.length});return[...j,S,I]}}render(){if(this.props.isPreview)return this.renderSkeleton();const{locale:e}=this.props,t=this.getQuickAddActionData();return a.a.createElement(Qo.a,{name:"QUICK_ADDS"},t.length?a.a.createElement(fD.a,{modules:[Object(gD.a)(e)]},()=>a.a.createElement(VA,{innerRef:this.setQuickAddRef},t)):a.a.createElement("div",null))}}BA.displayName="UnsafeQuickAddItems",BA.displayName="QuickAddItems",BA.defaultProps={canCreateIssueLink:!1,canCreateSubtask:!1,canCreateAttachment:!1,canLinkConfluencePage:!1,canAddWebLinks:!1,triggerButtonClickAnalytics:o.a};const WA=Object(j.injectIntl)(Object(ls.a)()(BA));var HA=tt()(mD({fieldKey:"servicedesk-incident-linking",propName:"incidentEscalate"}),mD({fieldKey:"servicedesk-incident-linking",propName:"incidentLinking"}),Object(i.b)(e=>{const t=Object(ET.a)(e),s=Yw(e),n=Object(zt.i)(e),a=Object(T.r)(e),i=s&&!n&&a,r=t&&!n&&!i;return{locale:Object(C.D)(e),canCreateAttachment:Object(sg.b)(e),shouldShowCreateSubtaskButton:r,shouldShowIssueInEpicButton:i,supportsChildCreation:n,canCreateIssueLink:Object(oS.a)(e),isPreview:Object(T.t)(e),isServiceDesk:Object(C.v)(e),canLinkConfluencePage:Object(ck.a)(e),canAddWebLinks:Object(PT.a)(e),projectType:Object(T.G)(e),issueKey:Object(C.B)(e)}},e=>({fetchConfluenceAppLinks:()=>e(Object(lD.a)()),onAddAttachmentClick:()=>e(Object(ws.b)()),onCreateSubtaskClick:()=>e(Ig()),onCreateIssueInEpicClick:()=>e(Cg()),onAddIssueLinkClick:()=>e(Object(aS.a)()),onChildCreateClick:()=>e(Tg()),onLinkConfluencePageClick:()=>e(Object(ok.h)()),onLinkIncidentClick:()=>e(kC()),onCreateMajorIncidentClick:()=>e(wC()),onAddWebLinkClick:()=>e(Object(TT.k)()),onAddExtension:t=>e(Object(mm.b)(t)),onSelectContentPanel:t=>e(Object(mm.d)(t))})),Object(as.a)(e=>({triggerButtonClickAnalytics:(t,s,n)=>e(`${t}.click`,{index:s,actions:n})})),Fa.a)(WA),GA=s("./src/packages/issue/issue-view/src/views/issue-details/sticky-header-container/index.js"),$A=s("./src/packages/issue/issue-view/src/views/issue-details/issue-layout/styled.js");function qA(){return(qA=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function zA(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function YA(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function QA(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?YA(Object(s),!0).forEach((function(t){JA(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):YA(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function JA(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class ZA extends n.Component{constructor(e){super(e),this.setSidePanelContainer=e=>{e&&this.setState(t=>({refs:QA(QA({},t.refs),{},{refSidePanelContainerElement:this.props.isMobile&&this.props.isCompact?document.body:e})}))},this.setLayoutContainer=e=>{e&&this.setState(t=>({refs:QA(QA({},t.refs),{},{refLayoutContainer:e})}))},this.setPanelColumn=e=>{e&&this.setState(t=>({refs:QA(QA({},t.refs),{},{refPanelColumnElement:e})}))},this.setVisibilityContainer=e=>{e&&this.setState(t=>({refs:QA(QA({},t.refs),{},{refVisibilityContainer:e}),contextWidth:e.offsetWidth}))},this.getPassedDownRefs=()=>this.state.refs,this.shouldRenderHeaderFF=()=>this.props.shouldRenderHeader,this.renderContextItems=()=>a.a.createElement($A.a,{key:"CONTEXT_ITEMS"},a.a.createElement(K_,{externalId:"issue.context-items"})),this.renderSummary=()=>a.a.createElement($A.i,{key:"SUMMARY"},a.a.createElement(Jl,null),a.a.createElement($A.h,null,a.a.createElement(Au,null))),this.renderFullSizeLayoutSideContent=()=>a.a.createElement($A.j,{innerRef:this.setVisibilityContainer,show:this.props.arePanelsClosed,key:"sideContentWrapper"},Object(qt.isTemplatedFoundationContextEnabled)()?a.a.createElement(md,null):this.renderStatusFieldAndApprovals(),Object(qt.isTemplatedBaseContextEnabled)()?a.a.createElement(fd,{key:"CONTEXT_ITEMS",externalId:"issue.context-items"}):a.a.createElement(K_,{forgeExtensions:this.props.forgeExtensions,key:"CONTEXT_ITEMS",externalId:"issue.context-items"}),a.a.createElement($A.b,{"data-test-id":"issue.views.issue-details.issue-layout.footnote"},a.a.createElement(cD,{key:"META_CONTAINER"}),a.a.createElement(Hx,{key:"CONFIGURE_FIELDS"}))),this.renderCompactHeader=()=>this.shouldRenderHeaderFF()?a.a.createElement(GA.a,{key:"SPLIT_HEADER",elementId:"jira-issue-header"},a.a.createElement(Gx.a,{shouldShowCloseButton:this.props.shouldShowCloseButton,shouldShowProjectLevelBreadcrumb:this.props.shouldShowProjectLevelBreadcrumb,shouldShowRootProjectsBreadcrumb:this.props.shouldShowRootProjectsBreadcrumb,issueDeleteCallbacks:this.props.issueDeleteCallbacks,renderFeedback:this.props.renderFeedback,viewModeOptions:this.props.viewModeOptions,onClose:this.props.onClose})):null,this.renderHeaderBreadcrumbs=()=>this.shouldRenderHeaderFF()?a.a.createElement(GA.a,{elementId:"jira-issue-header"},a.a.createElement($x.a,{shouldShowProjectLevelBreadcrumb:this.props.shouldShowProjectLevelBreadcrumb,shouldShowRootProjectsBreadcrumb:this.props.shouldShowRootProjectsBreadcrumb,isCompact:this.props.isCompact})):null,this.renderHeaderActions=()=>this.shouldRenderHeaderFF()?a.a.createElement(GA.a,{elementId:"jira-issue-header-actions",customStyles:"margin-right: -7px"},a.a.createElement(ma.a,{renderFeedback:this.props.renderFeedback,issueDeleteCallbacks:this.props.issueDeleteCallbacks,viewModeOptions:this.props.viewModeOptions,onClose:this.props.onClose,shouldShowCloseButton:this.props.shouldShowCloseButton})):null,this.renderFullSizeLayout=()=>{const e=$A.d,t=$A.c;return a.a.createElement(Xt.a,{hasMultipleScrollingColumns:!0},a.a.createElement(e,{issueMaxWidth:this.props.issueMaxWidth,medium:6,isLeftmost:!0},a.a.createElement(t,{isLeftmost:!0,issueMaxWidth:this.props.issueMaxWidth,"data-test-id":"issue.views.issue-details.issue-layout.left-most-column"},this.renderHeaderBreadcrumbs(),Object(qt.isTemplatedFoundationContentEnabled)()?a.a.createElement(pd,null):this.renderSummary(),Object(qt.isShortcutMenuEnabled)()?a.a.createElement(MA,{key:"QUICK_ADD_ITEMS",externalId:"issue.quick-add"}):a.a.createElement(HA,{key:"QUICK_ADD_ITEMS",externalId:"issue.quick-add"}),a.a.createElement(AP,{key:"CONTENT_ITEMS",isCompactMode:!1}),a.a.createElement(ul,{key:"ACTIVITY_FEED",externalId:"issue.activity-feed"}))),a.a.createElement(e,{medium:4,issueMaxWidth:this.props.issueMaxWidth,isRightmost:!0,scrollHidden:!this.props.arePanelsClosed,innerRef:this.setSidePanelContainer},a.a.createElement(t,{isRightmost:!0,innerRef:this.setPanelColumn,issueMaxWidth:this.props.issueMaxWidth,"data-test-id":"issue.views.issue-details.issue-layout.right-most-column"},this.renderHeaderActions(),this.renderFullSizeLayoutSideContent())))},this.renderCompactLayoutItems=()=>[Object(qt.isTemplatedFoundationContentEnabled)()?a.a.createElement(pd,null):this.renderSummary(),a.a.createElement(MA,{key:"QUICK_ADD_ITEMS",externalId:"issue.quick-add"}),Object(qt.isTemplatedFoundationContextEnabled)()?a.a.createElement(md,null):this.renderStatusFieldAndApprovals(),a.a.createElement(AP,{key:"CONTENT_ITEMS",isCompactMode:!0}),Object(qt.isTemplatedBaseContextEnabled)()?a.a.createElement($A.a,{key:"CONTEXT_ITEMS"},a.a.createElement(fd,{externalId:"issue.context-items"})):this.renderContextItems(),a.a.createElement($A.b,{"data-test-id":"issue.views.issue-details.issue-layout.footnote",key:"FOOTNOTE_WRAPPER_KEY"},a.a.createElement(cD,{key:"META_CONTAINER"}),a.a.createElement(Hx,{key:"CONFIGURE_FIELDS"})),a.a.createElement(ul,{key:"ACTIVITY_FEED",externalId:"issue.activity-feed"})],this.renderCompactLayout=()=>a.a.createElement($A.f,{scrollHidden:!this.props.arePanelsClosed,innerRef:this.setSidePanelContainer},a.a.createElement($A.e,{issueMaxWidth:this.props.issueMaxWidth,innerRef:this.setPanelColumn},this.renderCompactHeader(),a.a.createElement($A.j,{innerRef:this.setVisibilityContainer,show:this.props.arePanelsClosed,key:"sideContentWrapper"},a.a.createElement(Xt.a,{isCompact:!0},a.a.createElement(u.a,null,this.renderCompactLayoutItems()))))),this.state={contextWidth:0,refs:{refVisibilityContainer:null,refSidePanelContainerElement:null,refPanelColumnElement:null,refLayoutContainer:null}}}shouldComponentUpdate(e,t){return this.didPropsChange(e)||this.didStateChange(t)}didStateChange(e){const t=this.state,{refs:s}=t,n=zA(t,["refs"]),{refs:a}=e,i=zA(e,["refs"]);return(!this.props.arePanelsClosed||!Ua()(n,i))&&!Ua()(this.state,e)}didPropsChange(e){return!Ua()(this.props,e)}renderStatusFieldAndApprovals(){const e=this.props.shouldShowApprovalPanel?_x:xx;return(a.a.createElement(e,{shouldShowApprovalPanel:this.props.shouldShowApprovalPanel,key:"STATUS"}))}renderConnectGlancePanels(){return this.props.glances.map(e=>a.a.createElement(Ix,{key:`connectGlanceAnimatedPanel-${e.appKey}__${e.moduleKey}`,glance:e,openedGlance:this.props.openedGlance,externalId:"issue.glance-panel",glanceType:"CONNECT_ENTITY_TYPE",refs:this.getPassedDownRefs(),isCompact:this.props.isCompact}))}renderGlancePanels(){return this.props.glances.map(e=>a.a.createElement(Ix,{key:`connectGlanceAnimatedPanel-${e.appKey}__${e.moduleKey}`,glance:e,openedGlance:this.props.openedGlance,externalId:"issue.glance-panel",refs:this.getPassedDownRefs(),isCompact:this.props.isCompact}))}renderContextPanel(){return a.a.createElement(px,{key:"context-panel",refs:this.getPassedDownRefs(),isCompact:this.props.isCompact})}render(){const e=this.props.isCompact?this.renderCompactLayout():this.renderFullSizeLayout();return(a.a.createElement($A.g,{innerRef:this.setLayoutContainer,"data-test-id":"issue.views.issue-details.issue-layout.issue-layout"},e,this.renderGlancePanels(),this.renderContextPanel()))}}ZA.displayName="IssueLayout",ZA.displayName="IssueLayout",ZA.defaultProps={isCompact:!1,shouldRenderHeader:!1,shouldShowApprovalPanel:!1,openedGlance:null,forgeExtensions:[],glances:[]};const XA=e=>{if(!Object(qt.isGlanceAndTabSweetStateEnabled)())return a.a.createElement(ZA,e);const[t]=Object(dl.b)(),[s]=Object(dl.c)();return a.a.createElement(ZA,qA({},e,{arePanelsClosed:void 0===t&&void 0===s,openedGlance:s}))};XA.displayName="IssueLayoutWithIssueLayoutState";var eM=Object(i.b)(e=>({glances:Object(Hn.i)(e),openedGlance:Object(hd.a)(e),arePanelsClosed:!Object(hd.a)(e)&&!Object(gd.b)(e),shouldShowApprovalPanel:Object(C.v)(e),shouldRenderHeader:Object(C.N)(e),isMobile:Object(C.u)(e)}),{})(XA);const tM=$.default.div(["flex-grow:1;overflow:hidden;display:flex;flex-direction:column;height:100%;"]),sM=$.default.div(["height:100%;display:flex;flex-direction:column;"]);var nM=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/keyboard-shortcuts/shortcuts.js"),aM=s("./src/packages/issue/issue-view/src/actions/external-actions.js");const iM=Object(j.defineMessages)({nextIssue:{id:"issue.shortcuts.navigatingIssues.nextIssue",defaultMessage:"Next issue"},previousIssue:{id:"issue.shortcuts.navigatingIssues.previousIssue",defaultMessage:"Previous issue"},nextActivity:{id:"issue.shortcuts.navigatingIssues.nextActivity",defaultMessage:"Next activity"},previousActivity:{id:"issue.shortcuts.navigatingIssues.previousActivity",defaultMessage:"Previous activity"},editAssignee:{id:"issue.shortcuts.editAssignee",defaultMessage:"Edit assignee"},commentOnIssue:{id:"issue.shortcuts.commentOnIssue",defaultMessage:"Comment on issue"},editLabels:{id:"issue.shortcuts.editLabels",defaultMessage:"Edit labels"},assignToMe:{id:"issue.shorctus.assignToMe",defaultMessage:"Assign to me"},openShortcutDialog:{id:"issue.shorctus.openShortcutDialog",defaultMessage:"Open shortcut dialog"}});function rM(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function oM(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?rM(Object(s),!0).forEach((function(t){cM(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):rM(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function cM(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var lM=e=>Object(n.useMemo)(()=>({a:{callback:()=>{Object(zi.c)().markStartOfInteraction({key:nr.a.ASSIGNEE.TIME_TO_RENDER_INITIAL_SUGGESTIONS,cancelExisting:!0,collectors:[e=>oM(oM({},e),{},{viaShortcut:1})]});const t=Object(aM.d)(Object(aM.c)("assignee"));e(t,"assignIssue","a")},label:a.a.createElement(j.FormattedMessage,iM.editAssignee),priority:999},i:{callback:()=>{Object(zi.c)().markStartOfInteraction({key:nr.a.ASSIGNEE.TIME_TO_ASSIGN_TO_ME_VIA_SHORTCUT,cancelExisting:!0});const t=Object(aM.d)(Object(aM.b)());e(t,"assignToMe","i")},label:a.a.createElement(j.FormattedMessage,iM.assignToMe),priority:999},l:{callback:()=>{Object(zi.c)().markStartOfInteraction({key:nr.a.LABELS.TIME_TO_RENDER_INITIAL_SUGGESTIONS,cancelExisting:!0});const t=Object(aM.d)(Object(aM.c)("labels"));e(t,"editLabels","l")},label:a.a.createElement(j.FormattedMessage,iM.editLabels),priority:999},m:{callback:()=>{Object(zi.c)().markStartOfInteraction({key:nr.a.COMMENTS.TIME_TO_RENDER_NEW_COMMENT_EDITOR,cancelExisting:!0});const t=Object(aM.d)(Object(aM.a)());e(t,"commentIssue","m")},label:a.a.createElement(j.FormattedMessage,iM.commentOnIssue),priority:999}}),[e]);const uM=()=>({type:"TRIGGER_SHORTCUT_DIALOG_OPEN"});var dM=e=>Object(n.useMemo)(()=>Object(qt.isShortcutMenuEnabled)()?{".":{callback:()=>{e(uM(),"triggerShortcutDialogOpen",".")},label:a.a.createElement(j.FormattedMessage,iM.openShortcutDialog),priority:999}}:{},[e]);const pM=(e,t)=>{const s=e.find(e=>e.length);return s&&(s[t]||s[s.length-1])},mM=(e,t)=>{const s=e.find(e=>e.includes(t))||[],n=s.indexOf(t);return[s,n]},bM=(e,t)=>{const s=e.findIndex(e=>e.includes(t));return[s,e[s].indexOf(t)]},fM=(e,t)=>{if(!e)return t;const[s,n]=mM(e,t);return s[n+1]||t},gM=(e,t)=>{if(!e)return t;const[s,n]=mM(e,t);return s[n-1]||t},hM=(e,t)=>{if(!e)return t;const[s,n]=bM(e,t),a=e.slice(s+1);return pM(a,n)||t},yM=(e,t)=>{if(!e)return t;const[s,n]=bM(e,t),a=e.slice(0,s).reverse();return pM(a,n)||t};var OM=e=>{const t=Object(fl.f)(),s=Object(fl.h)();return Object(n.useMemo)(()=>s?{j:{callback:()=>{e(fM(s,t))},label:a.a.createElement(j.FormattedMessage,iM.nextIssue),priority:999},k:{callback:()=>{e(gM(s,t))},label:a.a.createElement(j.FormattedMessage,iM.previousIssue),priority:999},n:{callback:()=>{e(hM(s,t))},label:a.a.createElement(j.FormattedMessage,iM.nextActivity),priority:999},p:{callback:()=>{e(yM(s,t))},label:a.a.createElement(j.FormattedMessage,iM.previousActivity),priority:999}}:{},[t,e,s])};function jM(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function EM(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?jM(Object(s),!0).forEach((function(t){vM(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):jM(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function vM(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const kM=e=>{const{dispatch:t}=e,s=Object(fl.f)(),{createAnalyticsEvent:i}=Object(Nd.a)(),r=Object(n.useCallback)((e,s,n)=>{setTimeout(()=>t(e),0),Object(za.h)(i({}),"keyboardShortcut pressed",`${s}KeyboardShortcut`,{key:n}),"TRIGGER_SHORTCUT_DIALOG_OPEN"===e.type&&Object(za.h)(i({}),"keyboardShortcut pressed","dotDialogKeyboardShortcut",{key:n})},[i,t]),o=Object(n.useCallback)(e=>{e!==s&&t(Object(xg.c)({fromIssueKey:s,toIssueKey:e}))},[t,s]),c=lM(r),l=dM(r),u=OM(o),d=Object(n.useMemo)(()=>EM(EM(EM({},c),u),l),[u,c,l]);return a.a.createElement(nM.a,{keyMap:d})};kM.displayName="KeyboardShortcutsView";var wM=Object(n.memo)(kM),SM=Object(i.b)(null,e=>({dispatch:e}))(e=>a.a.createElement(M.a,{id:"keyboard-shortcuts",packageName:"issue-view"},a.a.createElement(wM,e)));function IM(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function CM(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?IM(Object(s),!0).forEach((function(t){TM(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):IM(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function TM(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const PM=Object(j.defineMessages)({nextIssue:{id:"issue.shortcuts.navigatingIssues.nextIssue",defaultMessage:"Next issue"},previousIssue:{id:"issue.shortcuts.navigatingIssues.previousIssue",defaultMessage:"Previous issue"},nextActivity:{id:"issue.shortcuts.navigatingIssues.nextActivity",defaultMessage:"Next activity"},previousActivity:{id:"issue.shortcuts.navigatingIssues.previousActivity",defaultMessage:"Previous activity"},editAssignee:{id:"issue.shortcuts.editAssignee",defaultMessage:"Edit assignee"},commentOnIssue:{id:"issue.shortcuts.commentOnIssue",defaultMessage:"Comment on issue"},editLabels:{id:"issue.shortcuts.editLabels",defaultMessage:"Edit labels"},assignToMe:{id:"issue.shorctus.assignToMe",defaultMessage:"Assign to me"},openShortcutDialog:{id:"issue.shorctus.openShortcutDialog",defaultMessage:"Open shortcut dialog"}});class _M extends n.Component{constructor(...e){super(...e),this.navigateToIssue=e=>{const t=this.props.currentIssueKey;e!==t&&this.props.onNextIssue(t,e)},this.issueActionShortcuts={a:{callback:()=>{Object(zi.c)().markStartOfInteraction({key:nr.a.ASSIGNEE.TIME_TO_RENDER_INITIAL_SUGGESTIONS,cancelExisting:!0,collectors:[e=>CM(CM({},e),{},{viaShortcut:1})]});const e=Object(aM.d)(Object(aM.c)("assignee"));this.props.triggerShortcutAction(e,"assignIssue","a")},label:a.a.createElement(j.FormattedMessage,PM.editAssignee),priority:999},i:{callback:()=>{Object(zi.c)().markStartOfInteraction({key:nr.a.ASSIGNEE.TIME_TO_ASSIGN_TO_ME_VIA_SHORTCUT,cancelExisting:!0});const e=Object(aM.d)(Object(aM.b)());this.props.triggerShortcutAction(e,"assignToMe","i")},label:a.a.createElement(j.FormattedMessage,PM.assignToMe),priority:999},l:{callback:()=>{Object(zi.c)().markStartOfInteraction({key:nr.a.LABELS.TIME_TO_RENDER_INITIAL_SUGGESTIONS,cancelExisting:!0});const e=Object(aM.d)(Object(aM.c)("labels"));this.props.triggerShortcutAction(e,"editLabels","l")},label:a.a.createElement(j.FormattedMessage,PM.editLabels),priority:999},m:{callback:()=>{Object(zi.c)().markStartOfInteraction({key:nr.a.COMMENTS.TIME_TO_RENDER_NEW_COMMENT_EDITOR,cancelExisting:!0});const e=Object(aM.d)(Object(aM.a)());this.props.triggerShortcutAction(e,"commentIssue","m")},label:a.a.createElement(j.FormattedMessage,PM.commentOnIssue),priority:999}},this.boardNavigationShortcuts={j:{callback:()=>{this.navigateToIssue(fM(this.props.rapidViewMap,this.props.currentIssueKey))},label:a.a.createElement(j.FormattedMessage,PM.nextIssue),priority:999},k:{callback:()=>{this.navigateToIssue(gM(this.props.rapidViewMap,this.props.currentIssueKey))},label:a.a.createElement(j.FormattedMessage,PM.previousIssue),priority:999},n:{callback:()=>{this.navigateToIssue(hM(this.props.rapidViewMap,this.props.currentIssueKey))},label:a.a.createElement(j.FormattedMessage,PM.nextActivity),priority:999},p:{callback:()=>{this.navigateToIssue(yM(this.props.rapidViewMap,this.props.currentIssueKey))},label:a.a.createElement(j.FormattedMessage,PM.previousActivity),priority:999}}}render(){const e=CM(CM({},this.props.rapidViewMap?this.boardNavigationShortcuts:{}),this.issueActionShortcuts);return Object(qt.isShortcutMenuEnabled)()&&(e["."]={callback:()=>{if(this.props.triggerShortcutAction(uM(),"triggerShortcutDialogOpen","."),this.props.createAnalyticsEvent){const e=this.props.createAnalyticsEvent({action:"pressed",actionSubject:"keyboardShortcut"});Object(za.h)(e,"dotDialogKeyboardShortcut")}},label:a.a.createElement(j.FormattedMessage,PM.openShortcutDialog),priority:999}),a.a.createElement(nM.a,{keyMap:e})}}_M.displayName="KeyboardShortcutsOld",_M.displayName="KeyboardShortcutsOld";var xM=Object($t.a)([Object(is.a)("keyboardShortcut",{triggerShortcutAction:"pressed"}),Object(E.a)({triggerShortcutAction:(e,t,s)=>({name:t,key:s})}),Object(i.b)(e=>({rapidViewMap:Object(C.K)(e),currentIssueKey:Object(C.B)(e)}),e=>({onNextIssue:(t,s)=>e(Object(xg.c)({fromIssueKey:t,toIssueKey:s})),triggerShortcutAction:t=>setTimeout(()=>e(t),0)}))])(_M),DM=Object(Jj.a)(qt.isAnalyticRefactorEnabled,SM,xM);const AM=Object(yn.createSelector)(T.J,e=>e.shortcutDialog.triggerShortcutDialogCount);Object(yn.createSelector)(Fx.b,qw.g,(e,t)=>({comment:t.canAddComments,logWork:t.canLogWork,attachFiles:t.canCreateAttachments,createSubtask:t.canCreateSubtask,convertSubtask:e,move:t.canMoveIssue,clone:t.canCloneIssue}));var MM=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/transition-screen-legacy-dialog/index.js"),LM=s("./src/packages/shortcuts-dialog/src/controllers/register-shortcuts/index.js"),RM=Object(j.defineMessages)({editFieldsSectionLabel:{id:"issue.issue-view.issue-details.register-shortcuts.edit-fields",defaultMessage:"Edit Fields"},issueActionsSectionLabel:{id:"issue.issue-view.issue-details.register-shortcuts.issue-actions",defaultMessage:"Issue Actions"},issueWorkflowsSectionLabel:{id:"issue.issue-view.issue-details.register-shortcuts.issue-workflows",defaultMessage:"Workflow"},issueActionComment:{id:"issue.issue-view.issue-details.register-shortcuts.issue-actions.comment",defaultMessage:"Comment"},issueActionLogwork:{id:"issue.issue-view.issue-details.register-shortcuts.issue-actions.log-work",defaultMessage:"Log work"},issueActionAttachFiles:{id:"issue.issue-view.issue-details.register-shortcuts.issue-actions.attach-files",defaultMessage:"Attach files"},issueActionCreateSubtask:{id:"issue.issue-view.issue-details.register-shortcuts.issue-actions.create-subtask",defaultMessage:"Create sub-task"},issueActionConvertSubtask:{id:"issue.issue-view.issue-details.register-shortcuts.issue-actions.convert-subtask",defaultMessage:"Convert to sub-task"},issueActionMove:{id:"issue.issue-view.issue-details.register-shortcuts.issue-actions.move",defaultMessage:"Move"},issueActionClone:{id:"issue.issue-view.issue-details.register-shortcuts.issue-actions.clone",defaultMessage:"Clone"}});function NM(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function UM(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?NM(Object(s),!0).forEach((function(t){FM(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):NM(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function FM(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const VM=e=>{const[t,s]=Object(n.useState)([]),{formatMessage:i}=Object(Te.c)(),{createAnalyticsEvent:r}=Object(Nd.a)(),{baseUrl:o,issueId:c,issueKey:l,fieldsShortcuts:u,onIssueFieldsSelected:d,canCreateAttachment:p,shouldShowCreateSubtaskButton:m,shouldShowIssueInEpicButton:b,canCreateIssueLink:f,onAddAttachmentClick:g,onCreateSubtaskClick:h,onCreateIssueInEpicClick:y,onChildCreateClick:O,supportsChildCreation:j,isServiceDesk:E,canLinkConfluencePage:v,onLinkConfluencePageClick:k,onCreateMajorIncidentClick:w,incidentLinking:S,incidentEscalate:I,onLinkIncidentClick:C,canAddWebLinks:T,onAddWebLinkClick:P,onAddIssueLinkClick:_,onChangeWorkflow:x}=e,D=Object(n.useCallback)(async e=>{e.hasScreen?new MM.a({baseUrl:o,transitionId:e.id,issueKey:l}).onDialogSuccess(()=>{x(e,!0)}).show():(await Object(Ll.d)(`/rest/api/2/issue/${l}/transitions`,{body:JSON.stringify({transition:e})}),x(e,!1))},[o,l,x]),A=Object(n.useCallback)(async()=>{if(!l||void 0===c)return;const e={key:"issue.edit-fields",label:i(RM.editFieldsSectionLabel),isLoaded:!0,weight:1,options:u.map(e=>UM(UM({},e),{},{action:()=>d(e,r({}))}))},t=EA({formatMessage:i,canCreateAttachment:p,shouldShowCreateSubtaskButton:m,shouldShowIssueInEpicButton:b,canCreateIssueLink:f,onAddAttachmentClick:g,onCreateSubtaskClick:h,onCreateIssueInEpicClick:y,onChildCreateClick:O,supportsChildCreation:j,isServiceDesk:E,canLinkConfluencePage:v,onLinkConfluencePageClick:k,onCreateMajorIncidentClick:w,incidentLinking:S,incidentEscalate:I,onLinkIncidentClick:C,canAddWebLinks:T,onAddWebLinkClick:P,onAddIssueLinkClick:_}),n=Object.keys(t).map(e=>t[e]).flat().map(({id:e,label:t,onClick:s})=>({value:e,label:t,action:s})),a={key:"issue.actions",label:i(RM.issueActionsSectionLabel),isLoaded:!0,weight:2,options:n},o=await Object(Id.a)(`/rest/api/2/issue/${l}/transitions`),x={key:"issue.workflows",label:i(RM.issueWorkflowsSectionLabel),isLoaded:!0,weight:3,options:o.transitions.map(e=>({value:e.id,label:e.name,action:()=>D(e)}))};s([e,a,x])},[l,c,i,u,p,m,b,f,g,h,y,O,j,E,v,k,w,S,I,C,T,P,_,r,d,D]);if(!l||void 0===c)return null;const{triggerShortcutDialogCount:M}=e;return(a.a.createElement(LM.a,{shortcuts:t,triggerShortcutDialogCount:M,onShortcutDialogOpen:A}))};VM.displayName="RegisterShortcutsDialogHelper";var KM=VM;function BM(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function WM(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?BM(Object(s),!0).forEach((function(t){HM(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):BM(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function HM(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var GM=Object($t.a)([Object(i.b)(e=>WM(WM({},bD(e)),{},{fieldsShortcuts:Object(On.u)(e),triggerShortcutDialogCount:AM(e),baseUrl:Object(C.g)(e),issueId:Object(C.A)(e),issueKey:Object(C.B)(e)}),e=>WM(WM({},AA(e)),{},{onChangeWorkflow:(t,s)=>{e(Object(hu.c)("status",id,t.to)),e(Object(hu.e)("status",t.to,{viaDialog:s}))},onIssueFieldsSelected:(t,s)=>{e(((e,t,s)=>({type:"FIELD_SHORTCUT_SELECTED",payload:{fieldKey:e,isRichTextField:t,analyticsEvent:s}}))(t.value,t.isRichTextField||!1,s))}})),j.injectIntl])(KM),$M=s("./node_modules/lodash/toString.js"),qM=s.n($M),zM=s("./src/packages/issue/smart-field-prefetch/src/context.js");const YM=wd()((e,t,s)=>Object(Id.a)(((e,t,s="")=>`${t}/rest/api/3/user/assignable/search?issueKey=${e}&recommend=true&query=&sessionId=${s}`)(e,t,s))),QM=wd()((e,t,s,n,a)=>{const i=`${e.baseUrl}/gateway/api/fields/v2/prefetch`;return Object(Id.a)(i,{body:JSON.stringify({context:{product:"jira",sessionId:n,containerId:e.projectId,objectId:e.issueId,principalId:e.accountIdloggedInUser,tenantId:e.cloudId,additionalContext:{properties:t,type:"issue",customPropertyMappings:s}},prefetchFields:a}),headers:{"Content-Type":"application/json"},method:"POST"})},e=>+e.issueId),JM=wd()((e,t,s,n)=>Object(Id.a)(((e,t,s="",n)=>`${t}/rest/api/1.0/labels/${n}/suggest?query=&sessionId=${s}`)(0,t,s,n)));function ZM(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function XM(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ZM(Object(s),!0).forEach((function(t){eL(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ZM(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function eL(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const tL=e=>null!=e,sL=e=>tL(e)&&""!==e;function nL(){return(nL=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const aL={assignee:YM,labels:JM},iL=Object(n.memo)(e=>{const t=(e=>{if(sL(e.projectId)&&tL(e.issueId)&&e.issueId!==Object(Li.j)("")&&sL(e.cloudId)&&sL(e.issueKey)&&tL(e.fields))return XM(XM({},e),{},{issueId:e.issueId,projectId:e.projectId})})(e);if(void 0===t)return null;const[s,a]=Object(zM.b)(t.issueKey)(),{issueId:i,cloudId:r,projectId:o,accountIdloggedInUser:c,fields:l,baseUrl:u,issueKey:d,customFieldMappings:p,createAnalyticsEvent:m}=t,b={issueId:i,cloudId:r,projectId:o,accountIdloggedInUser:c,baseUrl:u};return Object(n.useEffect)(()=>{if(s&&Object.values(s).filter(e=>e).length>0)return;const e=Object.keys(aL||{}),t=e.filter(e=>!!l[e]&&l[e].editable);if(!((e,t,s)=>!(e.length<t.length&&(s&&y.a.safeInfo("smart-field-prefetch.index","Prefetch request skipped for non-editable fields.",s({action:"skipped",actionSubject:"prefetch"}).update({prefetchableFields:t,permissiableFields:e})),0===e.length)))(t,e,m))return;const n=jd.a.v4();QM(b,l,p,n,t).then(({prefetchFields:e=[]})=>{((e,t,s,n)=>{if(null==e)return;const a=e({action:"requested",actionSubject:"prefetchFields",actionSubjectId:n}),i={prefetchSessionId:n,requestedFields:t,positiveFields:s};Object(za.c)(a,"prefetchFields requested",n,i)})(m,t,e,n),t.forEach(t=>{if(e.includes(t)){const e=jd.a.v4(),s=aL[t](d,u,e,i);a.setField(t,n,!0,e,s),((e,t,s,n)=>{if(null==e)return;const a=e({action:"prefetched",actionSubject:"field"}),i={fieldFetchSessionId:n,prefetchSessionId:s,fieldId:t};Object(za.c)(a,"field prefetched",i)})(m,t,n,e)}else a.setField(t,n,!1,null,null)})}).catch(e=>{y.a.safeError("smart-field-prefetch.index","error while calling frs prefetch",e)})},[u,b,l,d,p,a,m,i,s]),null},(e,t)=>qM()(e.issueId)===qM()(t.issueId)&&qM()(e.projectId)===qM()(t.projectId)),rL=e=>{const t=Object(Ed.f)(),s=Object(fl.g)(),n=Object(Ya.f)(s),i=Object(fl.f)(),r=Object(Ed.e)(),o=Object(Ed.c)();return a.a.createElement(iL,nL({},e,{cloudId:t,projectId:n,issueKey:i,baseUrl:r,accountIdloggedInUser:o}))};rL.displayName="SmartFieldPrefetchApp";var oL=rL;function cL(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function lL(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?cL(Object(s),!0).forEach((function(t){uL(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):cL(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function uL(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const dL=["epic","sprint","storyPointsField","com.atlassian.teams:rm-teams-custom-field-team","com.atlassian.jpo:jpo-custom-field-parent","com.atlassian.jpo:jpo-custom-field-baseline-start","com.atlassian.jpo:jpo-custom-field-baseline-end","com.pyxis.greenhopper.jira:jsw-issue-color","com.pyxis.greenhopper.jira:jsw-story-points"],pL=e=>e?dL.map(t=>{const s=Object(On.q)(t)(e);return s?{[t]:s.key}:{}}).reduce((e,t)=>lL(lL({},e),t),{}):{};var mL=Object(b.a)()(Object(i.b)((e,t)=>({fields:Object(On.t)(e),issueId:Object(C.A)(e),customFieldMappings:pL(e),createAnalyticsEvent:t.createAnalyticsEvent}),{})(oL));function bL(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function fL(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?bL(Object(s),!0).forEach((function(t){gL(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):bL(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function gL(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const hL=["epic","sprint","storyPointsField","com.atlassian.teams:rm-teams-custom-field-team","com.atlassian.jpo:jpo-custom-field-parent","com.atlassian.jpo:jpo-custom-field-baseline-start","com.atlassian.jpo:jpo-custom-field-baseline-end","com.pyxis.greenhopper.jira:jsw-issue-color","com.pyxis.greenhopper.jira:jsw-story-points"],yL=e=>e?hL.map(t=>{const s=Object(On.q)(t)(e);return s?{[t]:s.key}:{}}).reduce((e,t)=>fL(fL({},e),t),{}):{};var OL=Object(b.a)()(Object(i.b)((e,t)=>({fields:Object(On.t)(e),issueId:Object(C.A)(e),baseUrl:Object(C.g)(e),cloudId:Object(C.j)(e),projectId:Object(T.D)(e),accountIdloggedInUser:Object(C.a)(e),issueKey:Object(C.B)(e),customFieldMappings:yL(e),createAnalyticsEvent:t.createAnalyticsEvent}),{})(iL));function jL(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function EL(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?jL(Object(s),!0).forEach((function(t){vL(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):jL(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function vL(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class kL extends n.Component{constructor(...e){super(...e),this.state={isIssueContainerReady:!1},this.setIssueBodyContainerRef=e=>{e&&(this.issueBodyContainerRef=e,this.setState({isIssueContainerReady:!0}))},this.hasErrored=!1,this.issueBodyContainerRef=void 0,this.renderError=(e,t)=>{const{isComplete:s}=this.props,n=EL({},t);switch(e){case"AUTHENTICATION_ERROR":return s?a.a.createElement(Zt.c,{location:"auth-error"},a.a.createElement(Ia,null)):a.a.createElement(Ia,null);case"NOT_FOUND_OR_NO_PERMISSION_ERROR":return s?a.a.createElement(Zt.c,{location:"not-found-or-no-permission-error"},a.a.createElement(xa,null)):a.a.createElement(xa,null);case"CONNECTIVITY_ERROR":return a.a.createElement(Ra,null);case"UNKNOWN_ERROR":default:{const e=null==t?void 0:t.statusCode,i=!Object(qt.isSkip4xxReportingEnabled)()||!e||!Object(Jt.b)(e);return s&&i?a.a.createElement(Zt.a,{location:"unknown-error",failureEventAttributes:n},a.a.createElement(Ra,null)):a.a.createElement(Ra,null)}}},this.renderAttachmentPickers=()=>{const{isServiceDesk:e,isComplete:t,projectType:s}=this.props;return t?a.a.createElement(Bn,{experience:"renderAttachmentPickers",analyticsSource:e?"issue-view-jsd":"issue-view-non-jsd",projectType:s,isReady:this.state.isIssueContainerReady&&!!this.issueBodyContainerRef},e?a.a.createElement(a.a.Fragment,null,a.a.createElement(hn,null),a.a.createElement(Cn,null),this.state.isIssueContainerReady&&this.issueBodyContainerRef&&a.a.createElement(xn,{container:this.issueBodyContainerRef})):a.a.createElement("div",null,a.a.createElement(en,null),a.a.createElement(In,null),this.state.isIssueContainerReady&&a.a.createElement(Nn,{container:this.issueBodyContainerRef}))):null}}componentDidMount(){const{onRefresh:e,onMount:t}=this.props;t(),h.a.addRefreshIssueListener(e),this.props.isComplete&&this.props.onLoadedIssueView()}shouldComponentUpdate(e){const{error:t,isLoading:s}=this.props,n=s&&e.isLoading;return e.error!==t||!n}componentDidUpdate(e){const{error:t}=this.props;null!=t&&(this.hasErrored=!0),this.hasErrored||this.isCompleteStateForFirstTime(e)&&this.props.onLoadedIssueView()}componentWillUnmount(){h.a.removeRefreshIssueListener(this.props.onRefresh)}isCompleteStateForFirstTime(e){const{isComplete:t}=this.props;return t&&!e.isComplete}renderWorklogModal(){switch(this.props.worklogModal){case"ADD_MODAL":return a.a.createElement(Xe,null);case"EDIT_MODAL":return a.a.createElement(Pt,null);case"DELETE_MODAL":return a.a.createElement(Et,null);case"NO_MODAL":default:return null}}renderMainContent(){const{error:e,errorMessage:t,isLoading:s,isCompact:n,issueMaxWidth:i,shouldShowCloseButton:r,onClose:o}=this.props;return null!=e?a.a.createElement(Xt.a,{isCompact:n},a.a.createElement(u.a,{medium:10},r&&a.a.createElement(ma.a,{viewModeOptions:this.props.viewModeOptions,shouldShowCloseButton:!0,onClose:o}),this.renderError(e,t))):s?a.a.createElement(es.b,{issueMaxWidth:i}):a.a.createElement(sM,{innerRef:this.setIssueBodyContainerRef},a.a.createElement(eM,{renderFeedback:this.props.renderFeedback,issueDeleteCallbacks:this.props.issueDeleteCallbacks,viewModeOptions:this.props.viewModeOptions,isStickyHeaderOffset:this.props.isStickyHeaderOffset,onClose:o,isCompact:n,issueMaxWidth:i,shouldShowProjectLevelBreadcrumb:this.props.shouldShowProjectLevelBreadcrumb,shouldShowRootProjectsBreadcrumb:this.props.shouldShowProjectLevelBreadcrumb,shouldShowCloseButton:r}),this.renderWorklogModal(),this.renderAttachmentPickers(),a.a.createElement(qn,{externalId:"issue.ecosystem"}),this.props.isComplete&&a.a.createElement(pa,null),Object(qt.isUseUseAccountIdEnabled)()?a.a.createElement(mL,null):a.a.createElement(OL,null))}render(){const{jql:e,filter:t}=l.a.parse(window.location.search),s=null!=e||null!=t;return a.a.createElement(tM,null,a.a.createElement(Wt,{isLoading:this.props.isLoading,isPreview:this.props.isPreview,isComplete:this.props.isComplete,error:this.props.error,metrics:this.props.metrics,issueKey:this.props.issueKey}),this.props.isComplete?a.a.createElement(m.a,null):null,a.a.createElement(ks,{externalId:"issue.flags"}),a.a.createElement(DM,null),a.a.createElement(d.d,null,this.renderMainContent()),Object(qt.isShortcutMenuEnabled)()&&!s&&a.a.createElement(a.a.Fragment,null,a.a.createElement(O.a,null),a.a.createElement(GM,null)))}}kL.displayName="Issue",kL.displayName="Issue",kL.defaultProps={projectType:null,onLoadedIssueView:o.a,onMount:o.a};t.default=Object($t.a)([Object(b.a)({onLoadedIssueView:{action:"mounted"}}),Object(i.b)(e=>({isLoading:Object(T.s)(e),isPreview:Object(T.t)(e),isComplete:Object(T.n)(e),error:Object(T.h)(e),errorMessage:Object(T.g)(e),issueKey:Object(C.B)(e),isServiceDesk:Object(C.v)(e),projectType:Object(T.G)(e),worklogModal:Object(_.f)(e)}),e=>({onRefresh:()=>e(Object(_t.g)()),onMount:()=>{e((()=>({type:"ISSUE_VIEW_MOUNTED"}))())},onLoadedIssueView:e=>{const t={action:"viewed"};try{Object(f.a)(e,t)}catch(s){y.a.safeError("issue.viewed",s,new p.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:s}))}}})),ts.a,(()=>e=>{var t,s;return s=t=class extends n.Component{constructor(...e){super(...e),this.MetricsContext=Object(Ht.c)()}render(){const{MetricsContext:t}=this;return(a.a.createElement(t.Consumer,null,t=>a.a.createElement(e,Gt({},this.props,{metrics:t}))))}},t.displayName=`WithMetricsConsumer(${e.displayName||e.name})`,s})(),Object(g.a)(e=>{const t=Object(Qt.a)(e),s=Object(Yt.b)(e);return EL(EL({},t),{},{attributes:EL(EL(EL(EL({},t.attributes),s),Object(T.j)()),{},{issueHierarchyLevel:Object(zt.d)(e)})})})])(kL)},"./src/packages/issue/issue-view/src/views/issue-details/sticky-header-container/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return u}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/lodash/throttle.js"),r=s.n(i),o=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/browser.js"),c=s("./src/packages/issue/issue-view/src/common/util/dom-util/get-scroll-parent/index.js"),l=s("./src/packages/issue/issue-view/src/views/issue-details/sticky-header-container/styled.js");class u extends n.Component{constructor(e){super(e),this.state={shouldShowKeyline:!1},this.getScrollContainer=()=>(this.scrollContainer||(this.scrollContainer=Object(c.a)(this.innerEl.current)),this.scrollContainer),this.calculateShouldShowKeyline=r()(()=>{const e=this.getScrollContainer(),t=this.innerEl.current;if(!e||!t)return;const s=e.getBoundingClientRect(),n=t.getBoundingClientRect(),a=Math.max(s.top,0),i=e.scrollTop>0&&n.top<=a;i!==this.state.shouldShowKeyline&&this.setState({shouldShowKeyline:i})},100),this.scrollContainer=null,this.innerEl=void 0,this.innerEl=Object(n.createRef)()}componentDidMount(){if(!Object(o.d)()){const e=this.getScrollContainer();e&&e.addEventListener("scroll",this.calculateShouldShowKeyline),this.calculateShouldShowKeyline()}}componentWillUnmount(){if(!Object(o.d)()){const e=this.getScrollContainer();e&&e.removeEventListener("scroll",this.calculateShouldShowKeyline)}}render(){return a.a.createElement(l.a,{topOffset:0,id:this.props.elementId,showKeyline:this.state.shouldShowKeyline,innerRef:this.innerEl,customStyles:this.props.customStyles},this.props.children)}}u.displayName="WithShouldShowKeyline"},"./src/packages/issue/issue-view/src/views/issue-details/sticky-header-container/styled.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return r})),s.d(t,"a",(function(){return o}));var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),i=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const r=i.e,o=n.default.div(["@supports (position:sticky) or (position:-webkit-sticky){position:sticky;background:white;z-index:",";padding-left:","px;margin-left:-","px;padding-top:","px;top:","px;",";",";}"],i.f.card-1,r,r,1,e=>e.topOffset+-1,e=>e.showKeyline?`box-shadow: 0 2px ${a.a.N30}`:"",e=>e.customStyles||"")},"./src/packages/issue/jira-settings-service/src/main.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return p})),s.d(t,"b",(function(){return m})),s.d(t,"a",(function(){return b}));var n={};s.r(n),s.d(n,"setJiraSettings",(function(){return o}));var a=s("./node_modules/react/index.js"),i=s("./node_modules/react-sweet-state/lib/esm/store/create.js"),r=s("./node_modules/react-sweet-state/lib/esm/components/hook.js");const o=e=>({setState:t})=>{t(e)},c=Object(i.a)({name:"jiraSettings",initialState:{newIssueViewTransitionSettings:{newIssueViewTransitionLockingStatus:"DEFAULT_TO_NEW_ISSUE_VIEW",shouldDelayChangeboarding:!1},issueLinkTypes:[],subtasksConfiguration:{enabled:!0},timeTrackingConfiguration:{isTimeTrackingEnabled:!1,daysPerWeek:0,hoursPerDay:0,defaultUnit:"minute"}},actions:n}),l=Object(r.a)(c,{selector:e=>e.timeTrackingConfiguration}),u=Object(r.a)(c,{selector:e=>e.newIssueViewTransitionSettings||void 0}),d=(Object(r.a)(c,{selector:e=>e.subtasksConfiguration}),Object(r.a)(c,{selector:e=>e.issueLinkTypes}),Object(r.a)(c,{selector:null})),p=()=>{const[e]=l();return[e]},m=()=>{const[e]=u();return[e]},b=()=>{const[,{setJiraSettings:e}]=d();return[null,Object(a.useMemo)(()=>({setJiraSettings:e}),[e])]}},"./src/packages/issue/opt-in-back/src/async.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return a})),s.d(t,"b",(function(){return i}));var n=s("./node_modules/react-async-component/commonjs/index.js");const a=Object(n.asyncComponent)({resolve:()=>Promise.all([s.e("vendor~748942c6"),s.e("vendor~31ecd969"),s.e("async-issue-details-opt-in-back-modal")]).then(s.bind(null,"./src/packages/issue/opt-in-back/src/ui/opt-in-modal/index.js")).then(e=>e.default),name:"AsyncOptInBackModal"}),i=Object(n.asyncComponent)({resolve:()=>s.e("async-issue-details-opt-in-back-onboarding").then(s.bind(null,"./src/packages/issue/opt-in-back/src/ui/onboarding/index.js")).then(e=>e.default),name:"AsyncOptInBackOnboarding"})},"./src/packages/issue/opt-in-back/src/services/onboarding-tour/context.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return u})),s.d(t,"a",(function(){return d}));var n={};s.r(n),s.d(n,"setTourIsActive",(function(){return o})),s.d(n,"setTourIsInactive",(function(){return c}));var a=s("./node_modules/react-sweet-state/lib/esm/store/create.js"),i=s("./node_modules/react-sweet-state/lib/esm/components/hook.js"),r=s("./node_modules/react-sweet-state/lib/esm/components/container.js");const o=()=>({setState:e})=>{e({isTourActive:!0})},c=()=>({setState:e})=>{e({isTourActive:!1})},l=Object(a.a)({name:"new-issue-view-onboarding",initialState:{isTourActive:!1},actions:n}),u=Object(i.a)(l,{selector:e=>e}),d=Object(r.a)(l)},"./src/packages/issue/opt-in-back/src/services/onboarding-tour/main.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s("./node_modules/react/index.js"),a=s("./src/packages/issue/opt-in-back/src/services/onboarding-tour/context.js");const i=()=>{const[{isTourActive:e},{setTourIsActive:t,setTourIsInactive:s}]=Object(a.b)();return[{isTourActive:e},Object(n.useMemo)(()=>({setTourIsActive:t,setTourIsInactive:s}),[t,s])]}},"./src/packages/issue/permissions-service/src/context.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return l}));var n={};s.r(n),s.d(n,"setPermissions",(function(){return r}));var a=s("./node_modules/react-sweet-state/lib/esm/store/create.js"),i=s("./node_modules/react-sweet-state/lib/esm/components/hook.js");const r=e=>({setState:t})=>{t(e)},o={canAddComments:!1,canAdministerJira:!1,canAdministerProject:!1,canAssignIssues:!1,canBeAssignedToIssues:!1,canCloneIssue:!1,canCreateAttachments:!1,canCreateChildren:!1,canCreateSubtask:!1,canDeleteAllAttachments:!1,canDeleteAllComments:!1,canDeleteAllWorklogs:!1,canDeleteIssue:!1,canDeleteOwnAttachments:!1,canDeleteOwnComments:!1,canDeleteOwnWorklogs:!1,canEditAllComments:!1,canEditAllWorklogs:!1,canEditIssues:!1,canEditOwnComments:!1,canEditOwnWorklogs:!1,canLinkIssues:!1,canLogWork:!1,canManageWatchers:!1,canMoveIssue:!1,canScheduleIssues:!1,canUseServiceDeskAgentFeatures:!1,canBrowseUsers:!1,canViewDevTools:!1,canViewWatchers:!1,canViewVoters:!1,canCreateIssuesInClassicProjectEpic:!1},c=Object(a.a)({name:"permissions",initialState:o,actions:n}),l=Object(i.a)(c,{selector:e=>e})},"./src/packages/issue/permissions-service/src/main.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s("./node_modules/react/index.js"),a=s("./src/packages/issue/permissions-service/src/context.js");const i=()=>{const[e,{setPermissions:t}]=Object(a.b)();return[e,Object(n.useMemo)(()=>({setPermissions:t}),[t])]}},"./src/packages/issue/project-context-service/src/main.js":function(e,t,s){"use strict";s.d(t,"e",(function(){return O})),s.d(t,"g",(function(){return j})),s.d(t,"d",(function(){return E})),s.d(t,"a",(function(){return v})),s.d(t,"b",(function(){return k})),s.d(t,"f",(function(){return w})),s.d(t,"c",(function(){return S}));var n={};s.r(n),s.d(n,"setProjectContext",(function(){return u})),s.d(n,"mergeProjectProperty",(function(){return d}));var a=s("./node_modules/react/index.js"),i=s("./node_modules/react-sweet-state/lib/esm/store/create.js"),r=s("./node_modules/react-sweet-state/lib/esm/components/hook.js");function o(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function c(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?o(Object(s),!0).forEach((function(t){l(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function l(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const u=(e,t)=>({setState:s})=>{s({[e]:t})},d=(e,t)=>({setState:s,getState:n})=>{const a=c(c({},n()[e]),t);s({[e]:a})},p=Object(i.a)({name:"project-context",initialState:{},actions:n}),m=Object(r.a)(p,{selector:null}),b=(e,{projectKey:t})=>e[t],f=Object(r.a)(p,{selector:b}),g=Object(r.a)(p,{selector:(e,{projectKey:t})=>{const s=b(e,{projectKey:t});return null==s?void 0:s.projectType}}),h=Object(r.a)(p,{selector:(e,{projectKey:t})=>{const s=b(e,{projectKey:t});return null==s?void 0:s.issueTypeHierarchy}});var y=s("./src/packages/issue/project-context-service/src/utils.js");const O=()=>{const[,{setProjectContext:e,mergeProjectProperty:t}]=m();return[null,Object(a.useMemo)(()=>({setProjectContext:e,mergeProjectProperty:t}),[e,t])]},j=e=>{const[t]=g({projectKey:e});return t},E=e=>{const[t]=f({projectKey:e});return t},v=e=>{const[t]=f({projectKey:e});return(null==t?void 0:t.isPolarisProject)||!1},k=e=>{const[t]=f({projectKey:e});return(null==t?void 0:t.isSimplified)||!1},w=e=>{const[t]=f({projectKey:e});return null==t?void 0:t.projectId},S=(e,t=null)=>{const[s]=h({projectKey:e}),n=null==s?void 0:s.levels,i=null==s?void 0:s.baseLevelId;return Object(a.useMemo)(()=>Object(y.a)(i,t,n),[i,t,n])}},"./src/packages/issue/project-context-service/src/utils.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=(e=null,t=null,s={})=>{if(null==t||null==e||void 0===s[t]||void 0===s[e])return null;if(t===e)return 0;let n=0,a=s[t].aboveLevelId,i=s[t].belowLevelId;for(;null!==a||null!==i;){if(n+=1,a===e)return-n;if(i===e)return n;if(a=null!==a&&s[a]?s[a].aboveLevelId:null,i=null!==i&&s[i]?s[i].belowLevelId:null,a===t||i===t)return null}return null}},"./src/packages/issue/smart-field-prefetch/src/context.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return f})),s.d(t,"a",(function(){return g}));var n=s("./node_modules/react-sweet-state/lib/esm/store/create.js"),a=s("./node_modules/react-sweet-state/lib/esm/components/hook.js"),i=s("./node_modules/react-sweet-state/lib/esm/components/subscriber.js");function r(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const c={assignee:null,labels:null},l={setField:(e,t,s,n,a)=>({setState:i})=>{i({[e]:{prefetchSessionId:t,prefetched:s,fieldValuePromise:a,sessionId:n}})}},u={},d=e=>(u[e]||(u[e]=(e=>Object(n.a)({name:`smart-issue-prefetch-${e}`,initialState:c,actions:l}))(e)),u[e]),p={},m=(e,{fieldId:t}={})=>e[t],b={},f=e=>(b[e]||(b[e]=Object(a.a)(d(e))),b[e]),g=(e,t)=>{if(void 0!==p[e]&&null!==p[e]){if(void 0!==p[e][t]&&null!==p[e][t])return p[e][t]}else p[e]=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?r(Object(s),!0).forEach((function(t){o(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):r(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({labels:null,assignee:null},p[e]);return p[e][t]=Object(i.a)(d(e),{selector:m}),p[e][t]}},"./src/packages/issue/user-preferences-services/src/feature-flags.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js");const a=()=>Object(n.b)("issue.details.delete-user-preference",!1)},"./src/packages/issue/user-preferences-services/src/main.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return j})),s.d(t,"a",(function(){return E}));var n=s("./node_modules/react/index.js"),a=s("./src/packages/platform/controllers/tenant-context/src/components/index.js"),i=s("./node_modules/react-sweet-state/lib/esm/store/create.js"),r=s("./node_modules/react-sweet-state/lib/esm/components/hook.js"),o=s("./src/packages/issue/user-preferences-services/src/feature-flags.js");function c(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function l(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var n=s.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function u(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function d(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?u(Object(s),!0).forEach((function(t){p(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):u(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function p(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const m={setUserPreferenceValue:(e,t)=>({setState:s,getState:n})=>{Object(o.a)()?s({preferences:d(d({},n().preferences),{},{[e]:t})}):s({[e]:t})},deleteUserPreferenceValue:e=>({setState:t,getState:s})=>{const n=s().preferences,{[e]:a}=n;t({preferences:c(n,[e].map(l))})},setUserPreferences:e=>({setState:t})=>{Object(o.a)()?t({preferences:e}):t(e)}},b=Object(i.a)({name:"user-preferences",initialState:{preferences:{}},actions:m}),f=Object(r.a)(b,{selector:(e,t)=>Object(o.a)()?e.preferences[t]:e[t]}),g=Object(r.a)(b,{selector:null});var h=s("./src/packages/platform/utils/fetch/src/utils/requests.js");const y=async(e,t,s)=>Object(h.e)(`${e}/rest/api/2/mypreferences?key=${t}`,{body:s}),O=async(e,t)=>Object(h.a)(`${e}/rest/api/2/mypreferences?key=${t}`),j=e=>{const t=Object(a.e)(),[s,{setUserPreferenceValue:i,deleteUserPreferenceValue:r}]=f(e),c=Object(n.useCallback)(s=>{i(e,s),y(t,e,s)},[t,i,e]),l=Object(n.useCallback)(()=>{r(e),O(t,e)},[t,r,e]);return Object(o.a)()?[s,{setValue:c,deleteValue:l}]:[s,c]},E=()=>{const e=Object(a.e)(),[,t]=g();return[null,Object(n.useMemo)(()=>({setUserPreferenceValue:(s,n)=>{t.setUserPreferenceValue(s,n),y(e,s,n)},setUserPreferences:e=>{e&&0!==Object.keys(e).length&&t.setUserPreferences(e)},deleteUserPreferenceValue:s=>{t.deleteUserPreferenceValue(s),O(e,s)}}),[t,e])]}},"./src/packages/issue/workflow-transitions-services/src/context.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return d})),s.d(t,"b",(function(){return p})),s.d(t,"a",(function(){return m}));var n=s("./node_modules/react-sweet-state/lib/esm/store/create.js"),a=s("./node_modules/react-sweet-state/lib/esm/components/hook.js"),i=s("./node_modules/react-sweet-state/lib/esm/components/container.js");function r(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function o(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?r(Object(s),!0).forEach((function(t){c(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):r(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function c(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const l={setState:(e={})=>({setState:t,getState:s})=>{t(o(o({},s()),e))}},u=Object(n.a)({name:"workflow-transitions",initialState:{data:null,loading:!1,error:null},actions:l}),d=Object(a.a)(u,{selector:e=>e}),p=Object(a.a)(u,{selector:null}),m=Object(i.a)(u)},"./src/packages/issue/workflow-transitions-services/src/main.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return i})),s.d(t,"a",(function(){return r}));var n=s("./node_modules/react/index.js"),a=s("./src/packages/issue/workflow-transitions-services/src/context.js");const i=()=>{const[e,{setState:t}]=Object(a.c)();return[e,t]},r=()=>{const[,e]=Object(a.b)();return[null,Object(n.useMemo)(()=>({setState:t=>{e.setState(t)}}),[e])]}},"./src/packages/issue/worklog/src/services/context/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s("./node_modules/react-sweet-state/lib/esm/components/hook.js"),a=s("./src/packages/issue/worklog/src/services/store/index.js");const i=Object(n.a)(a.b,{selector:e=>e.isRollingUp})},"./src/packages/issue/worklog/src/services/store/index.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return c})),s.d(t,"a",(function(){return l}));var n={};s.r(n),s.d(n,"markRollingUpData",(function(){return r})),s.d(n,"unmarkRollingUpData",(function(){return o}));var a=s("./node_modules/react-sweet-state/lib/esm/store/create.js"),i=s("./node_modules/react-sweet-state/lib/esm/components/container.js");const r=()=>({setState:e})=>{e({isRollingUp:!0})},o=()=>({setState:e})=>{e({isRollingUp:!1})},c=Object(a.a)({name:"worklog-time-tracking",initialState:{isRollingUp:!0},actions:n}),l=Object(i.a)(c)}}]);try{window.__jsEvalStop("async-issue-app~issue.js")}catch(e){}
//# sourceMappingURL=https://statlas.prod.atl-paas.net/jira-frontend-source-maps/assets/async-issue-app~issue.50b3a10097e880d7aa8e.8.js.map